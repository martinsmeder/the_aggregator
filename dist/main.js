/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,h=a?t[e+2]:0,c=i>>2,u=(3&i)<<4|o>>4;let l=(15&o)<<2|h>>6,d=63&h;a||(d=64,s||(l=64)),r.push(n[c],n[u],n[l],n[d])}return r.join("")},encodeString(t,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(t):this.encodeByteArray(e(t),n)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const h=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==o||null==a||null==h)throw new r;const c=s<<2|o>>4;if(i.push(c),64!==a){const t=o<<4&240|a>>2;if(i.push(t),64!==h){const t=a<<6&192|h;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i=function(t){return function(t){const r=e(t);return n.encodeByteArray(r,!0)}(t).replace(/\./g,"")},s=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const t="MISSING_ENV_VAR".__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return n.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},o=()=>{var t;return null===(t=s())||void 0===t?void 0:t.config};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}class h extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c.prototype.create)}}class c{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(u,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new h(r,o,n)}}const u=/\{\$([^}]+)}/g;function l(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(d(n)&&d(s)){if(!l(n,s))return!1}else if(n!==s)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function d(t){return null!==t&&"object"==typeof t}function f(t){return t&&t._delegate?t._delegate:t}class g{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const p="[DEFAULT]";class m{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new a;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:p})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=p){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=p){return this.instances.has(t)}getOptions(t=p){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===p?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=p){return this.component?this.component.multipleInstances?t:p:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class y{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new m(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const v=[];var w,_;(_=w||(w={}))[_.DEBUG=0]="DEBUG",_[_.VERBOSE=1]="VERBOSE",_[_.INFO=2]="INFO",_[_.WARN=3]="WARN",_[_.ERROR=4]="ERROR",_[_.SILENT=5]="SILENT";const E={debug:w.DEBUG,verbose:w.VERBOSE,info:w.INFO,warn:w.WARN,error:w.ERROR,silent:w.SILENT},b=w.INFO,T={[w.DEBUG]:"log",[w.VERBOSE]:"log",[w.INFO]:"info",[w.WARN]:"warn",[w.ERROR]:"error"},I=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=T[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class S{constructor(t){this.name=t,this._logLevel=b,this._logHandler=I,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in w))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?E[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,w.DEBUG,...t),this._logHandler(this,w.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,w.VERBOSE,...t),this._logHandler(this,w.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,w.INFO,...t),this._logHandler(this,w.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,w.WARN,...t),this._logHandler(this,w.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,w.ERROR,...t),this._logHandler(this,w.ERROR,...t)}}const C=(t,e)=>e.some((e=>t instanceof e));let A,D;const N=new WeakMap,k=new WeakMap,R=new WeakMap,L=new WeakMap,x=new WeakMap;let O={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return k.get(t);if("objectStoreNames"===e)return t.objectStoreNames||R.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return P(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function M(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(D||(D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(V(this),t),P(N.get(this))}:function(...t){return P(e.apply(V(this),t))}:function(t,...n){const r=e.call(V(this),t,...n);return R.set(r,t.sort?t.sort():[t]),P(r)}:(t instanceof IDBTransaction&&function(t){if(k.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));k.set(t,e)}(t),C(t,A||(A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,O):t);var e}function P(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(P(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&N.set(e,t)})).catch((()=>{})),x.set(e,t),e}(t);if(L.has(t))return L.get(t);const e=M(t);return e!==t&&(L.set(t,e),x.set(e,t)),e}const V=t=>x.get(t),F=["get","getKey","getAll","getAllKeys","count"],U=["put","add","delete","clear"],B=new Map;function q(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(B.get(e))return B.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=U.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!F.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return B.set(e,s),s}var j;j=O,O={...j,get:(t,e,n)=>q(t,e)||j.get(t,e,n),has:(t,e)=>!!q(t,e)||j.has(t,e)};class ${constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const z="@firebase/app",K="0.9.19",G=new S("@firebase/app"),H="[DEFAULT]",Q={[z]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},W=new Map,Y=new Map;function X(t,e){try{t.container.addComponent(e)}catch(n){G.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function J(t){const e=t.name;if(Y.has(e))return G.debug(`There were multiple attempts to register component ${e}.`),!1;Y.set(e,t);for(const e of W.values())X(e,t);return!0}const Z=new c("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class tt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new g("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Z.create("app-deleted",{appName:this._name})}}function et(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:H,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Z.create("bad-app-name",{appName:String(i)});if(n||(n=o()),!n)throw Z.create("no-options");const s=W.get(i);if(s){if(l(n,s.options)&&l(r,s.config))return s;throw Z.create("duplicate-app",{appName:i})}const a=new y(i);for(const t of Y.values())a.addComponent(t);const h=new tt(n,r,a);return W.set(i,h),h}function nt(t,e,n){var r;let i=null!==(r=Q[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void G.warn(t.join(" "))}J(new g(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const rt="firebase-heartbeat-database",it=1,st="firebase-heartbeat-store";let ot=null;function at(){return ot||(ot=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=P(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(P(o.result),t.oldVersion,t.newVersion,P(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(rt,it,{upgrade:(t,e)=>{0===e&&t.createObjectStore(st)}}).catch((t=>{throw Z.create("idb-open",{originalErrorMessage:t.message})}))),ot}async function ht(t,e){try{const n=(await at()).transaction(st,"readwrite"),r=n.objectStore(st);await r.put(e,ct(t)),await n.done}catch(t){if(t instanceof h)G.warn(t.message);else{const e=Z.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});G.warn(e.message)}}}function ct(t){return`${t.name}!${t.options.appId}`}class ut{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new dt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=lt();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=lt(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),ft(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ft(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=i(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function lt(){return(new Date).toISOString().substring(0,10)}class dt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await at();return await e.transaction(st).objectStore(st).get(ct(t))}catch(t){if(t instanceof h)G.warn(t.message);else{const e=Z.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});G.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function ft(t){return i(JSON.stringify({version:2,heartbeats:t})).length}J(new g("platform-logger",(t=>new $(t)),"PRIVATE")),J(new g("heartbeat",(t=>new ut(t)),"PRIVATE")),nt(z,K,""),nt(z,K,"esm2017"),nt("fire-js","");var gt,pt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},mt={},yt=yt||{},vt=pt||self;function wt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function _t(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Et="closure_uid_"+(1e9*Math.random()>>>0),bt=0;function Tt(t,e,n){return t.call.apply(t.bind,arguments)}function It(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function St(t,e,n){return(St=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Tt:It).apply(null,arguments)}function Ct(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function At(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function Dt(){this.s=this.s,this.o=this.o}Dt.prototype.s=!1,Dt.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Et)&&t[Et]||(t[Et]=++bt))},Dt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function kt(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Rt(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(wt(n)){const e=t.length||0,r=n.length||0;t.length=e+r;for(let i=0;i<r;i++)t[e+i]=n[i]}else t.push(n)}}function Lt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Lt.prototype.h=function(){this.defaultPrevented=!0};var xt=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{vt.addEventListener("test",(()=>{}),e),vt.removeEventListener("test",(()=>{}),e)}catch(t){}return t}();function Ot(t){return/^[\s\xa0]*$/.test(t)}function Mt(){var t=vt.navigator;return t&&(t=t.userAgent)?t:""}function Pt(t){return-1!=Mt().indexOf(t)}function Vt(t){return Vt[" "](t),t}Vt[" "]=function(){};var Ft,Ut,Bt,qt=Pt("Opera"),jt=Pt("Trident")||Pt("MSIE"),$t=Pt("Edge"),zt=$t||jt,Kt=Pt("Gecko")&&!(-1!=Mt().toLowerCase().indexOf("webkit")&&!Pt("Edge"))&&!(Pt("Trident")||Pt("MSIE"))&&!Pt("Edge"),Gt=-1!=Mt().toLowerCase().indexOf("webkit")&&!Pt("Edge");function Ht(){var t=vt.document;return t?t.documentMode:void 0}t:{var Qt="",Wt=(Ut=Mt(),Kt?/rv:([^\);]+)(\)|;)/.exec(Ut):$t?/Edge\/([\d\.]+)/.exec(Ut):jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ut):Gt?/WebKit\/(\S+)/.exec(Ut):qt?/(?:Version)[ \/]?(\S+)/.exec(Ut):void 0);if(Wt&&(Qt=Wt?Wt[1]:""),jt){var Yt=Ht();if(null!=Yt&&Yt>parseFloat(Qt)){Ft=String(Yt);break t}}Ft=Qt}vt.document&&jt?Bt=Ht()||parseInt(Ft,10)||void 0:Bt=void 0;var Xt=Bt;function Jt(t,e){if(Lt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Kt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Zt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Jt.$.h.call(this)}}At(Jt,Lt);var Zt={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),ee=0;function ne(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++ee,this.fa=this.ia=!1}function re(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ie(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function se(t){const e={};for(const n in t)e[n]=t[n];return e}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<oe.length;e++)n=oe[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function he(t){this.src=t,this.g={},this.h=0}function ce(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Nt(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(re(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ue(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}he.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=ue(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new ne(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var le="closure_lm_"+(1e6*Math.random()|0),de={};function fe(t,e,n,r,i){if(r&&r.once)return pe(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)fe(t,e[s],n,r,i);return null}return n=be(n),t&&t[te]?t.O(e,n,_t(r)?!!r.capture:!!r,i):ge(t,e,n,!1,r,i)}function ge(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=_t(i)?!!i.capture:!!i,a=_e(t);if(a||(t[le]=a=new he(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){const t=we;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xt||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ve(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function pe(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)pe(t,e[s],n,r,i);return null}return n=be(n),t&&t[te]?t.P(e,n,_t(r)?!!r.capture:!!r,i):ge(t,e,n,!0,r,i)}function me(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)me(t,e[s],n,r,i);else r=_t(r)?!!r.capture:!!r,n=be(n),t&&t[te]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=ue(s=t.g[e],n,r,i))&&(re(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=_e(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ue(e,n,r,i)),(n=-1<t?e[t]:null)&&ye(n))}function ye(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[te])ce(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ve(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_e(e))?(ce(n,t),0==n.h&&(n.src=null,e[le]=null)):re(t)}}}function ve(t){return t in de?de[t]:de[t]="on"+t}function we(t,e){if(t.fa)t=!0;else{e=new Jt(e,this);var n=t.listener,r=t.la||t.src;t.ia&&ye(t),t=n.call(r,e)}return t}function _e(t){return(t=t[le])instanceof he?t:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(t){return"function"==typeof t?t:(t[Ee]||(t[Ee]=function(e){return t.handleEvent(e)}),t[Ee])}function Te(){Dt.call(this),this.i=new he(this),this.S=this,this.J=null}function Ie(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Lt(e,t);else if(e instanceof Lt)e.target=e.target||t;else{var i=e;ae(e=new Lt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Se(o,r,!0,e)&&i}if(i=Se(o=e.g=t,r,!0,e)&&i,i=Se(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Se(o=e.g=n[s],r,!1,e)&&i}function Se(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,h=o.la||o.src;o.ia&&ce(t.i,o),i=!1!==a.call(h,r)&&i}}return i&&!r.defaultPrevented}At(Te,Dt),Te.prototype[te]=!0,Te.prototype.removeEventListener=function(t,e,n,r){me(this,t,e,n,r)},Te.prototype.N=function(){if(Te.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)re(n[r]);delete e.g[t],e.h--}}this.J=null},Te.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Te.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ce=vt.JSON.stringify;function Ae(){var t=Oe;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var De=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Ne),(t=>t.reset()));class Ne{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ke(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Re(t){vt.setTimeout((()=>{throw t}),0)}let Le,xe=!1,Oe=new class{constructor(){this.h=this.g=null}add(t,e){const n=De.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Me=()=>{const t=vt.Promise.resolve(void 0);Le=()=>{t.then(Pe)}};var Pe=()=>{for(var t;t=Ae();){try{t.h.call(t.g)}catch(t){Re(t)}var e=De;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}xe=!1};function Ve(t,e){Te.call(this),this.h=t||1,this.g=e||vt,this.j=St(this.qb,this),this.l=Date.now()}function Fe(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Ue(t,e,n){if("function"==typeof t)n&&(t=St(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=St(t.handleEvent,t)}return 2147483647<Number(e)?-1:vt.setTimeout(t,e||0)}function Be(t){t.g=Ue((()=>{t.g=null,t.i&&(t.i=!1,Be(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}At(Ve,Te),(gt=Ve.prototype).ga=!1,gt.T=null,gt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ie(this,"tick"),this.ga&&(Fe(this),this.start()))}},gt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.N=function(){Ve.$.N.call(this),Fe(this),delete this.g};class qe extends Dt{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Be(this)}N(){super.N(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(t){Dt.call(this),this.h=t,this.g={}}At(je,Dt);var $e=[];function ze(t,e,n,r){Array.isArray(n)||(n&&($e[0]=n.toString()),n=$e);for(var i=0;i<n.length;i++){var s=fe(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Ke(t){ie(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ye(t)}),t),t.g={}}function Ge(){this.g=!0}function He(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ce(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}je.prototype.N=function(){je.$.N.call(this),Ke(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ge.prototype.Ea=function(){this.g=!1},Ge.prototype.info=function(){};var Qe={},We=null;function Ye(){return We=We||new Te}function Xe(t){Lt.call(this,Qe.Ta,t)}function Je(t){const e=Ye();Ie(e,new Xe(e))}function Ze(t,e){Lt.call(this,Qe.STAT_EVENT,t),this.stat=e}function tn(t){const e=Ye();Ie(e,new Ze(e,t))}function en(t,e){Lt.call(this,Qe.Ua,t),this.size=e}function nn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return vt.setTimeout((function(){t()}),e)}Qe.Ta="serverreachability",At(Xe,Lt),Qe.STAT_EVENT="statevent",At(Ze,Lt),Qe.Ua="timingevent",At(en,Lt);var rn={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},sn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function on(){}function an(t){return t.h||(t.h=t.i())}function hn(){}on.prototype.h=null;var cn,un={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ln(){Lt.call(this,"d")}function dn(){Lt.call(this,"c")}function fn(){}function gn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new je(this),this.P=mn,t=zt?125:void 0,this.V=new Ve(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}At(ln,Lt),At(dn,Lt),At(fn,on),fn.prototype.g=function(){return new XMLHttpRequest},fn.prototype.i=function(){return{}},cn=new fn;var mn=45e3,yn={},vn={};function wn(t,e,n){t.L=1,t.v=Fn(xn(e)),t.s=n,t.S=!0,_n(t,null)}function _n(t,e){t.G=Date.now(),In(t),t.A=xn(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Xn(n.i,"t",r),t.C=0,n=t.l.J,t.h=new pn,t.g=Yr(t.l,n?e:null,!t.s),0<t.O&&(t.M=new qe(St(t.Pa,t,t.g),t.O)),ze(t.U,t.g,"readystatechange",t.nb),e=t.I?se(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Je(),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),h=0;h<a.length;h++){var c=a[h].split("=");if(1<c.length){var u=c[0];c=c[1];var l=u.split("_");o=2<=l.length&&"type"==l[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.W,t.s)}function En(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function bn(t,e,n){let r,i=!0;for(;!t.J&&t.C<n.length;){if(r=Tn(t,n),r==vn){4==e&&(t.o=4,tn(14),i=!1),He(t.j,t.m,null,"[Incomplete Response]");break}if(r==yn){t.o=4,tn(15),He(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}He(t.j,t.m,r,null),Nn(t,r)}En(t)&&r!=vn&&r!=yn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,tn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),jr(e),e.M=!0,tn(11))):(He(t.j,t.m,n,"[Invalid Chunked Response]"),Dn(t),An(t))}function Tn(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?vn:(n=Number(e.substring(n,r)),isNaN(n)?yn:(r+=1)+n>e.length?vn:(e=e.slice(r,r+n),t.C=r+n,e))}function In(t){t.Y=Date.now()+t.P,Sn(t,t.P)}function Sn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=nn(St(t.lb,t),e)}function Cn(t){t.B&&(vt.clearTimeout(t.B),t.B=null)}function An(t){0==t.l.H||t.J||Kr(t.l,t)}function Dn(t){Cn(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Fe(t.V),Ke(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Nn(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||rr(n.i,t)))if(!t.K&&rr(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;zr(n),Or(n)}qr(n),tn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=nn(St(n.ib,n),6e3));if(1>=nr(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Hr(n,11)}else if((t.K||n.g==t)&&zr(n),!Ot(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const e=c[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const l=t.g;if(l){const t=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ir(s,s.h),s.h=null))}if(r.F){const t=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.Da=t,Vn(r.I,r.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Wr(r,r.J?r.pa:null,r.Y),o.K){sr(r.i,o);var a=o,h=r.L;h&&a.setTimeout(h),a.B&&(Cn(a),In(a)),r.g=o}else Br(r);0<n.j.length&&Pr(n)}else"stop"!=c[0]&&"close"!=c[0]||Hr(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Hr(n,7):xr(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Je()}catch(t){}}function kn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(wt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(wt(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(wt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(gt=gn.prototype).setTimeout=function(t){this.P=t},gt.nb=function(t){t=t.target;const e=this.M;e&&3==Ar(t)?e.l():this.Pa(t)},gt.Pa=function(t){try{if(t==this.g)t:{const u=Ar(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||zt||this.g&&(this.h.h||this.g.ja()||Dr(this.g)))){this.J||4!=u||7==e||Je(),Cn(this);var n=this.g.da();this.ca=n;e:if(En(this)){var r=Dr(this.g);t="";var i=r.length,s=4==Ar(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Dn(this),An(this);var o="";break e}this.h.i=new vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,h=this.g;if((a=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ot(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,tn(12),Dn(this),An(this);break t}He(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nn(this,n)}this.S?(bn(this,u,o),zt&&this.i&&3==u&&(ze(this.U,this.V,"tick",this.mb),this.V.start())):(He(this.j,this.m,o,null),Nn(this,o)),4==u&&Dn(this),this.i&&!this.J&&(4==u?Kr(this.l,this):(this.i=!1,In(this)))}else(function(t){const e={};t=(t.g&&2<=Ar(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Ot(t[r]))continue;var n=ke(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,tn(12)):(this.o=0,tn(13)),Dn(this),An(this)}}}catch(t){}},gt.mb=function(){if(this.g){var t=Ar(this.g),e=this.g.ja();this.C<e.length&&(Cn(this),bn(this,t,e),this.i&&4!=t&&In(this))}},gt.cancel=function(){this.J=!0,Dn(this)},gt.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.L&&(Je(),tn(17)),Dn(this),this.o=2,An(this)):Sn(this,this.Y-t)};var Rn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ln(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ln){this.h=t.h,On(this,t.j),this.s=t.s,this.g=t.g,Mn(this,t.m),this.l=t.l;var e=t.i,n=new Hn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Pn(this,n),this.o=t.o}else t&&(e=String(t).match(Rn))?(this.h=!1,On(this,e[1]||"",!0),this.s=Un(e[2]||""),this.g=Un(e[3]||"",!0),Mn(this,e[4]),this.l=Un(e[5]||"",!0),Pn(this,e[6]||"",!0),this.o=Un(e[7]||"")):(this.h=!1,this.i=new Hn(null,this.h))}function xn(t){return new Ln(t)}function On(t,e,n){t.j=n?Un(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Mn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Pn(t,e,n){e instanceof Hn?(t.i=e,function(t,e){e&&!t.j&&(Qn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Wn(this,e),Xn(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Bn(e,Kn)),t.i=new Hn(e,t.h))}function Vn(t,e,n){t.i.set(e,n)}function Fn(t){return Vn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Bn(e,jn,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Bn(e,jn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Bn(n,"/"==n.charAt(0)?zn:$n,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Bn(n,Gn)),t.join("")};var jn=/[#\/\?@]/g,$n=/[#\?:]/g,zn=/[#\?]/g,Kn=/[#\?@]/g,Gn=/#/g;function Hn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qn(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Wn(t,e){Qn(t),e=Jn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Yn(t,e){return Qn(t),e=Jn(t,e),t.g.has(e)}function Xn(t,e,n){Wn(t,e),0<n.length&&(t.i=null,t.g.set(Jn(t,e),kt(n)),t.h+=n.length)}function Jn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Zn(t){this.l=t||tr,t=vt.PerformanceNavigationTiming?0<(t=vt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(vt.g&&vt.g.Ka&&vt.g.Ka()&&vt.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=Hn.prototype).add=function(t,e){Qn(this),this.i=null,t=Jn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},gt.forEach=function(t,e){Qn(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},gt.ta=function(){Qn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},gt.Z=function(t){Qn(this);let e=[];if("string"==typeof t)Yn(this,t)&&(e=e.concat(this.g.get(Jn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},gt.set=function(t,e){return Qn(this),this.i=null,Yn(this,t=Jn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},gt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var tr=10;function er(t){return!!t.h||!!t.g&&t.g.size>=t.j}function nr(t){return t.h?1:t.g?t.g.size:0}function rr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ir(t,e){t.g?t.g.add(e):t.h=e}function sr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function or(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return kt(t.i)}Zn.prototype.cancel=function(){if(this.i=or(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ar=class{stringify(t){return vt.JSON.stringify(t,void 0)}parse(t){return vt.JSON.parse(t,void 0)}};function hr(){this.g=new ar}function cr(t,e,n){const r=n||"";try{kn(t,(function(t,n){let i=t;_t(t)&&(i=Ce(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function ur(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function lr(t){this.l=t.ec||null,this.j=t.ob||!1}function dr(t,e){Te.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=fr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}At(lr,on),lr.prototype.g=function(){return new dr(this.l,this.j)},lr.prototype.i=function(t){return function(){return t}}({}),At(dr,Te);var fr=0;function gr(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function pr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,mr(t)}function mr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(gt=dr.prototype).open=function(t,e){if(this.readyState!=fr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,mr(this)},gt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||vt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pr(this)),this.readyState=fr},gt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==vt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gr(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},gt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?pr(this):mr(this),3==this.readyState&&gr(this)}},gt.Za=function(t){this.g&&(this.response=this.responseText=t,pr(this))},gt.Ya=function(t){this.g&&(this.response=t,pr(this))},gt.ka=function(){this.g&&pr(this)},gt.setRequestHeader=function(t,e){this.v.append(t,e)},gt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(dr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var yr=vt.JSON.parse;function vr(t){Te.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wr,this.L=this.M=!1}At(vr,Te);var wr="",_r=/^https?$/i,Er=["POST","PUT"];function br(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Tr(t),Sr(t)}function Tr(t){t.F||(t.F=!0,Ie(t,"complete"),Ie(t,"error"))}function Ir(t){if(t.h&&void 0!==yt&&(!t.C[1]||4!=Ar(t)||2!=t.da()))if(t.v&&4==Ar(t))Ue(t.La,0,t);else if(Ie(t,"readystatechange"),4==Ar(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(Rn)[1]||null;!i&&vt.self&&vt.self.location&&(i=vt.self.location.protocol.slice(0,-1)),r=!_r.test(i?i.toLowerCase():"")}n=r}if(n)Ie(t,"complete"),Ie(t,"success");else{t.m=6;try{var s=2<Ar(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",Tr(t)}}finally{Sr(t)}}}function Sr(t,e){if(t.g){Cr(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ie(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Cr(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(vt.clearTimeout(t.A),t.A=null)}function Ar(t){return t.g?t.g.readyState:0}function Dr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case wr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Nr(t){let e="";return ie(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function kr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Nr(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Vn(t,e,n))}function Rr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Lr(t){this.Ga=0,this.j=[],this.l=new Ge,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rr("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rr("baseRetryDelayMs",5e3,t),this.hb=Rr("retryDelaySeedMs",1e4,t),this.eb=Rr("forwardChannelMaxRetries",2,t),this.xa=Rr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Zn(t&&t.concurrentRequestLimit),this.Ja=new hr,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function xr(t){if(Mr(t),3==t.H){var e=t.W++,n=xn(t.I);if(Vn(n,"SID",t.K),Vn(n,"RID",e),Vn(n,"TYPE","terminate"),Fr(t,n),(e=new gn(t,t.l,e)).L=2,e.v=Fn(xn(n)),n=!1,vt.navigator&&vt.navigator.sendBeacon)try{n=vt.navigator.sendBeacon(e.v.toString(),"")}catch(t){}!n&&vt.Image&&((new Image).src=e.v,n=!0),n||(e.g=Yr(e.l,null),e.g.ha(e.v)),e.G=Date.now(),In(e)}Qr(t)}function Or(t){t.g&&(jr(t),t.g.cancel(),t.g=null)}function Mr(t){Or(t),t.u&&(vt.clearTimeout(t.u),t.u=null),zr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&vt.clearTimeout(t.m),t.m=null)}function Pr(t){if(!er(t.i)&&!t.m){t.m=!0;var e=t.Na;Le||Me(),xe||(Le(),xe=!0),Oe.add(e,t),t.C=0}}function Vr(t,e){var n;n=e?e.m:t.W++;const r=xn(t.I);Vn(r,"SID",t.K),Vn(r,"RID",n),Vn(r,"AID",t.V),Fr(t,r),t.o&&t.s&&kr(r,t.o,t.s),n=new gn(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ur(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ir(t.i,n),wn(n,r,e)}function Fr(t,e){t.na&&ie(t.na,(function(t,n){Vn(e,n,t)})),t.h&&kn({},(function(t,n){Vn(e,n,t)}))}function Ur(t,e,n){n=Math.min(t.j.length,n);var r=t.h?St(t.h.Va,t.h,t):null;t:{var i=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=e,0>n)e=Math.max(0,i[o].g-100),s=!1;else try{cr(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,r}function Br(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Le||Me(),xe||(Le(),xe=!0),Oe.add(e,t),t.A=0}}function qr(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=nn(St(t.Ma,t),Gr(t,t.A)),t.A++,0))}function jr(t){null!=t.B&&(vt.clearTimeout(t.B),t.B=null)}function $r(t){t.g=new gn(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=xn(t.wa);Vn(e,"RID","rpc"),Vn(e,"SID",t.K),Vn(e,"AID",t.V),Vn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Vn(e,"TO",t.qa),Vn(e,"TYPE","xmlhttp"),Fr(t,e),t.o&&t.s&&kr(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Fn(xn(e)),n.s=null,n.S=!0,_n(n,t)}function zr(t){null!=t.v&&(vt.clearTimeout(t.v),t.v=null)}function Kr(t,e){var n=null;if(t.g==e){zr(t),jr(t),t.g=null;var r=2}else{if(!rr(t.i,e))return;n=e.F,sr(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Ie(r=Ye(),new en(r,n)),Pr(t)}else Br(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function(t,e){return!(nr(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=nn(St(t.Na,t,e),Gr(t,t.C)),t.C++,0)))}(t,e)||2==r&&qr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Hr(t,5);break;case 4:Hr(t,10);break;case 3:Hr(t,6);break;default:Hr(t,2)}}function Gr(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hr(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=St(t.pb,t);n||(n=new Ln("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||On(n,"https"),Fn(n)),function(t,e){const n=new Ge;if(vt.Image){const r=new Image;r.onload=Ct(ur,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ct(ur,n,r,"TestLoadImage: error",!1,e),r.onabort=Ct(ur,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ct(ur,n,r,"TestLoadImage: timeout",!1,e),vt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else tn(2);t.H=0,t.h&&t.h.za(e),Qr(t),Mr(t)}function Qr(t){if(t.H=0,t.ma=[],t.h){const e=or(t.i);0==e.length&&0==t.j.length||(Rt(t.ma,e),Rt(t.ma,t.j),t.i.i.length=0,kt(t.j),t.j.length=0),t.h.ya()}}function Wr(t,e,n){var r=n instanceof Ln?xn(n):new Ln(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Mn(r,r.m);else{var i=vt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ln(null);r&&On(s,r),e&&(s.g=e),i&&Mn(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Vn(r,n,e),Vn(r,"VER",t.ra),Fr(t,r),r}function Yr(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ha&&!t.va?new vr(new lr({ob:!0})):new vr(t.va)).Oa(t.J),e}function Xr(){}function Jr(){if(jt&&!(10<=Number(Xt)))throw Error("Environmental error: no available transport.")}function Zr(t,e){Te.call(this),this.g=new Lr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ot(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ot(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ni(this)}function ti(t){ln.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ei(){dn.call(this),this.status=1}function ni(t){this.g=t}function ri(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ii(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function si(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(gt=vr.prototype).Oa=function(t){this.M=t},gt.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cn.g(),this.C=this.u?an(this.u):an(cn),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void br(this,t)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),i=vt.FormData&&t instanceof vt.FormData,!(0<=Nt(Er,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Cr(this),0<this.B&&((this.L=function(t){return jt&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=Ue(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){br(this,t)}},gt.ua=function(){void 0!==yt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ie(this,"timeout"),this.abort(8))},gt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ie(this,"complete"),Ie(this,"abort"),Sr(this))},gt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sr(this,!0)),vr.$.N.call(this)},gt.La=function(){this.s||(this.G||this.v||this.l?Ir(this):this.kb())},gt.kb=function(){Ir(this)},gt.isActive=function(){return!!this.g},gt.da=function(){try{return 2<Ar(this)?this.g.status:-1}catch(t){return-1}},gt.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},gt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),yr(e)}},gt.Ia=function(){return this.m},gt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=Lr.prototype).ra=8,gt.H=1,gt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new gn(this,this.l,t);let s=this.s;if(this.U&&(s?(s=se(s),ae(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Ur(this,i,e),Vn(n=xn(this.I),"RID",t),Vn(n,"CVER",22),this.F&&Vn(n,"X-HTTP-Session-Id",this.F),Fr(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Nr(s)))+"&"+e:this.o&&kr(n,this.o,s)),ir(this.i,i),this.bb&&Vn(n,"TYPE","init"),this.P?(Vn(n,"$req",e),Vn(n,"SID","null"),i.aa=!0,wn(i,n,null)):wn(i,n,e),this.H=2}}else 3==this.H&&(t?Vr(this,t):0==this.j.length||er(this.i)||Vr(this))},gt.Ma=function(){if(this.u=null,$r(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=nn(St(this.jb,this),t)}},gt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,tn(10),Or(this),$r(this))},gt.ib=function(){null!=this.v&&(this.v=null,Or(this),qr(this),tn(19))},gt.pb=function(t){t?(this.l.info("Successfully pinged google.com"),tn(2)):(this.l.info("Failed to ping google.com"),tn(1))},gt.isActive=function(){return!!this.h&&this.h.isActive(this)},(gt=Xr.prototype).Ba=function(){},gt.Aa=function(){},gt.za=function(){},gt.ya=function(){},gt.isActive=function(){return!0},gt.Va=function(){},Jr.prototype.g=function(t,e){return new Zr(t,e)},At(Zr,Te),Zr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;tn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Wr(t,null,t.Y),Pr(t)},Zr.prototype.close=function(){xr(this.g)},Zr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Ce(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Pr(e)},Zr.prototype.N=function(){this.g.h=null,delete this.j,xr(this.g),delete this.g,Zr.$.N.call(this)},At(ti,ln),At(ei,dn),At(ni,Xr),ni.prototype.Ba=function(){Ie(this.g,"a")},ni.prototype.Aa=function(t){Ie(this.g,new ti(t))},ni.prototype.za=function(t){Ie(this.g,new ei)},ni.prototype.ya=function(){Ie(this.g,"b")},At(ri,(function(){this.blockSize=-1})),ri.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ri.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)ii(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ii(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ii(this,r),i=0;break}}this.h=i,this.i+=e},ri.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var oi={};function ai(t){return-128<=t&&128>t?function(t,e){var n=oi;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new si([0|t],0>t?-1:0)}(t)}(t):new si([0|t],0>t?-1:0)}function hi(t){if(isNaN(t)||!isFinite(t))return ui;if(0>t)return pi(hi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ci;return new si(e,0)}var ci=4294967296,ui=ai(0),li=ai(1),di=ai(16777216);function fi(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function gi(t){return-1==t.h}function pi(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new si(n,~t.h).add(li)}function mi(t,e){return t.add(pi(e))}function yi(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function vi(t,e){this.g=t,this.h=e}function wi(t,e){if(fi(e))throw Error("division by zero");if(fi(t))return new vi(ui,ui);if(gi(t))return e=wi(pi(t),e),new vi(pi(e.g),pi(e.h));if(gi(e))return e=wi(t,pi(e)),new vi(pi(e.g),e.h);if(30<t.g.length){if(gi(t)||gi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=li,r=e;0>=r.X(t);)n=_i(n),r=_i(r);var i=Ei(n,1),s=Ei(r,1);for(r=Ei(r,2),n=Ei(n,2);!fi(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ei(r,1),n=Ei(n,1)}return e=mi(t,i.R(e)),new vi(i,e)}for(i=ui;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=hi(n)).R(e);gi(o)||0<o.X(t);)o=(s=hi(n-=r)).R(e);fi(s)&&(s=li),i=i.add(s),t=mi(t,o)}return new vi(i,t)}function _i(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new si(n,t.h)}function Ei(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new si(i,t.h)}(gt=si.prototype).ea=function(){if(gi(this))return-pi(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ci+r)*e,e*=ci}return t},gt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(fi(this))return"0";if(gi(this))return"-"+pi(this).toString(t);for(var e=hi(Math.pow(t,6)),n=this,r="";;){var i=wi(n,e).g,s=((0<(n=mi(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(fi(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},gt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},gt.X=function(t){return gi(t=mi(this,t))?-1:fi(t)?0:1},gt.abs=function(){return gi(this)?pi(this):this},gt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new si(n,-2147483648&n[n.length-1]?-1:0)},gt.R=function(t){if(fi(this)||fi(t))return ui;if(gi(this))return gi(t)?pi(this).R(pi(t)):pi(pi(this).R(t));if(gi(t))return pi(this.R(pi(t)));if(0>this.X(di)&&0>t.X(di))return hi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,h=65535&t.D(i);n[2*r+2*i]+=o*h,yi(n,2*r+2*i),n[2*r+2*i+1]+=s*h,yi(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,yi(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,yi(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new si(n,0)},gt.gb=function(t){return wi(this,t).h},gt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new si(n,this.h&t.h)},gt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new si(n,this.h|t.h)},gt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new si(n,this.h^t.h)},Jr.prototype.createWebChannel=Jr.prototype.g,Zr.prototype.send=Zr.prototype.u,Zr.prototype.open=Zr.prototype.m,Zr.prototype.close=Zr.prototype.close,rn.NO_ERROR=0,rn.TIMEOUT=8,rn.HTTP_ERROR=6,sn.COMPLETE="complete",hn.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",Te.prototype.listen=Te.prototype.O,vr.prototype.listenOnce=vr.prototype.P,vr.prototype.getLastError=vr.prototype.Sa,vr.prototype.getLastErrorCode=vr.prototype.Ia,vr.prototype.getStatus=vr.prototype.da,vr.prototype.getResponseJson=vr.prototype.Wa,vr.prototype.getResponseText=vr.prototype.ja,vr.prototype.send=vr.prototype.ha,vr.prototype.setWithCredentials=vr.prototype.Oa,ri.prototype.digest=ri.prototype.l,ri.prototype.reset=ri.prototype.reset,ri.prototype.update=ri.prototype.j,si.prototype.add=si.prototype.add,si.prototype.multiply=si.prototype.R,si.prototype.modulo=si.prototype.gb,si.prototype.compare=si.prototype.X,si.prototype.toNumber=si.prototype.ea,si.prototype.toString=si.prototype.toString,si.prototype.getBits=si.prototype.D,si.fromNumber=hi,si.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return pi(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=hi(Math.pow(n,8)),i=ui,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=hi(Math.pow(n,o)),i=i.R(o).add(hi(a))):i=(i=i.R(r)).add(hi(a))}return i};var bi=mt.createWebChannelTransport=function(){return new Jr},Ti=mt.getStatEventTarget=function(){return Ye()},Ii=mt.ErrorCode=rn,Si=mt.EventType=sn,Ci=mt.Event=Qe,Ai=mt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Di=(mt.FetchXmlHttpFactory=lr,mt.WebChannel=hn),Ni=mt.XhrIo=vr,ki=mt.Md5=ri,Ri=mt.Integer=si;const Li="@firebase/firestore";class xi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");let Oi="10.4.0";const Mi=new S("@firebase/firestore");function Pi(){return Mi.logLevel}function Vi(t,...e){if(Mi.logLevel<=w.DEBUG){const n=e.map(Bi);Mi.debug(`Firestore (${Oi}): ${t}`,...n)}}function Fi(t,...e){if(Mi.logLevel<=w.ERROR){const n=e.map(Bi);Mi.error(`Firestore (${Oi}): ${t}`,...n)}}function Ui(t,...e){if(Mi.logLevel<=w.WARN){const n=e.map(Bi);Mi.warn(`Firestore (${Oi}): ${t}`,...n)}}function Bi(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function qi(t="Unexpected state"){const e=`FIRESTORE (${Oi}) INTERNAL ASSERTION FAILED: `+t;throw Fi(e),new Error(e)}function ji(t,e){t||qi()}function $i(t,e){return t}const zi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ki extends h{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gi{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Hi{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Qi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(xi.UNAUTHENTICATED)))}shutdown(){}}class Wi{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Yi{constructor(t){this.t=t,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gi,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{Vi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Vi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gi)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Vi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(ji("string"==typeof e.accessToken),new Hi(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ji(null===t||"string"==typeof t),new xi(t)}}class Xi{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ji{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Xi(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(xi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ts{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Vi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Vi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{Vi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):Vi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(ji("string"==typeof t.token),this.R=t.token,new Zi(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function es(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class ns{static V(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=es(40);for(let r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return e}}function rs(t,e){return t<e?-1:t>e?1:0}function is(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class ss{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ss.fromMillis(Date.now())}static fromDate(t){return ss.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new ss(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?rs(this.nanoseconds,t.nanoseconds):rs(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class os{constructor(t){this.timestamp=t}static fromTimestamp(t){return new os(t)}static min(){return new os(new ss(0,0))}static max(){return new os(new ss(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class as{constructor(t,e,n){void 0===e?e=0:e>t.length&&qi(),void 0===n?n=t.length-e:n>t.length-e&&qi(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===as.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof as?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class hs extends as{construct(t,e,n){return new hs(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Ki(zi.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new hs(e)}static emptyPath(){return new hs([])}}const cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class us extends as{construct(t,e,n){return new us(t,e,n)}static isValidIdentifier(t){return cs.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),us.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new us(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ki(zi.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Ki(zi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Ki(zi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new Ki(zi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new us(e)}static emptyPath(){return new us([])}}class ls{constructor(t){this.path=t}static fromPath(t){return new ls(hs.fromString(t))}static fromName(t){return new ls(hs.fromString(t).popFirst(5))}static empty(){return new ls(hs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===hs.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return hs.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ls(new hs(t.slice()))}}function ds(t){return new fs(t.readTime,t.key,-1)}class fs{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new fs(os.min(),ls.empty(),-1)}static max(){return new fs(os.max(),ls.empty(),-1)}}function gs(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ls.comparator(t.documentKey,e.documentKey),0!==n?n:rs(t.largestBatchId,e.largestBatchId))}const ps="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ms{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function ys(t){if(t.code!==zi.FAILED_PRECONDITION||t.message!==ps)throw t;Vi("LocalStore","Unexpectedly lost primary lease")}class vs{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&qi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new vs(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof vs?e:vs.resolve(e)}catch(t){return vs.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):vs.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):vs.reject(e)}static resolve(t){return new vs(((e,n)=>{e(t)}))}static reject(t){return new vs(((e,n)=>{n(t)}))}static waitFor(t){return new vs(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=vs.resolve(!1);for(const n of t)e=e.next((t=>t?vs.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new vs(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const h=a;e(t[h]).next((t=>{s[h]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new vs(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}function ws(t){return"IndexedDbTransactionError"===t.name}class _s{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.oe(t),this._e=t=>e.writeSequenceNumber(t))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}function Es(t){return null==t}function bs(t){return 0===t&&1/t==-1/0}_s.ae=-1;function Ts(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ss(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Cs{constructor(t,e){this.comparator=t,this.root=e||Ds.EMPTY}insert(t,e){return new Cs(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ds.BLACK,null,null))}remove(t){return new Cs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ds.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new As(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new As(this.root,t,this.comparator,!1)}getReverseIterator(){return new As(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new As(this.root,t,this.comparator,!0)}}class As{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ds{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ds.RED,this.left=null!=r?r:Ds.EMPTY,this.right=null!=i?i:Ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new Ds(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ds.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Ds.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qi();if(this.right.isRed())throw qi();const t=this.left.check();if(t!==this.right.check())throw qi();return t+(this.isRed()?0:1)}}Ds.EMPTY=null,Ds.RED=!0,Ds.BLACK=!1,Ds.EMPTY=new class{constructor(){this.size=0}get key(){throw qi()}get value(){throw qi()}get color(){throw qi()}get left(){throw qi()}get right(){throw qi()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Ds(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ns{constructor(t){this.comparator=t,this.data=new Cs(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ks(this.data.getIterator())}getIteratorFrom(t){return new ks(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Ns))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ns(this.comparator);return e.data=t,e}}class ks{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Rs{constructor(t){this.fields=t,t.sort(us.comparator)}static empty(){return new Rs([])}unionWith(t){let e=new Ns(us.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Rs(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return is(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Ls extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class xs{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Ls("Invalid base64 string: "+t):t}}(t);return new xs(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new xs(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rs(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}xs.EMPTY_BYTE_STRING=new xs("");const Os=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(t){if(ji(!!t),"string"==typeof t){let e=0;const n=Os.exec(t);if(ji(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ps(t.seconds),nanos:Ps(t.nanos)}}function Ps(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vs(t){return"string"==typeof t?xs.fromBase64String(t):xs.fromUint8Array(t)}function Fs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Us(t){const e=t.mapValue.fields.__previous_value__;return Fs(e)?Us(e):e}function Bs(t){const e=Ms(t.mapValue.fields.__local_write_time__.timestampValue);return new ss(e.seconds,e.nanos)}class qs{constructor(t,e,n,r,i,s,o,a,h){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=h}}class js{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new js("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof js&&t.projectId===this.projectId&&t.database===this.database}}const $s={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fs(t)?4:io(t)?9007199254740991:10:qi()}function Ks(t,e){if(t===e)return!0;const n=zs(t);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bs(t).isEqual(Bs(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Ms(t.timestampValue),r=Ms(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Vs(t.bytesValue).isEqual(Vs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ps(t.geoPointValue.latitude)===Ps(e.geoPointValue.latitude)&&Ps(t.geoPointValue.longitude)===Ps(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ps(t.integerValue)===Ps(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ps(t.doubleValue),r=Ps(e.doubleValue);return n===r?bs(n)===bs(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return is(t.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ts(n)!==Ts(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!Ks(n[t],r[t])))return!1;return!0}(t,e);default:return qi()}}function Gs(t,e){return void 0!==(t.values||[]).find((t=>Ks(t,e)))}function Hs(t,e){if(t===e)return 0;const n=zs(t),r=zs(e);if(n!==r)return rs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rs(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ps(t.integerValue||t.doubleValue),r=Ps(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Qs(t.timestampValue,e.timestampValue);case 4:return Qs(Bs(t),Bs(e));case 5:return rs(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Vs(t),r=Vs(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=rs(n[t],r[t]);if(0!==e)return e}return rs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=rs(Ps(t.latitude),Ps(e.latitude));return 0!==n?n:rs(Ps(t.longitude),Ps(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=Hs(n[t],r[t]);if(e)return e}return rs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===$s.mapValue&&e===$s.mapValue)return 0;if(t===$s.mapValue)return 1;if(e===$s.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=rs(r[t],s[t]);if(0!==e)return e;const o=Hs(n[r[t]],i[s[t]]);if(0!==o)return o}return rs(r.length,s.length)}(t.mapValue,e.mapValue);default:throw qi()}}function Qs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rs(t,e);const n=Ms(t),r=Ms(e),i=rs(n.seconds,r.seconds);return 0!==i?i:rs(n.nanos,r.nanos)}function Ws(t){return Ys(t)}function Ys(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Ms(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Vs(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return ls.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Ys(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${Ys(t.fields[i])}`;return n+"}"}(t.mapValue):qi()}function Xs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Js(t){return!!t&&"integerValue"in t}function Zs(t){return!!t&&"arrayValue"in t}function to(t){return!!t&&"nullValue"in t}function eo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function no(t){return!!t&&"mapValue"in t}function ro(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Is(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=ro(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ro(t.arrayValue.values[n]);return e}return Object.assign({},t)}function io(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class so{constructor(t){this.value=t}static empty(){return new so({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!no(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ro(e)}setAll(t){let e=us.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=ro(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());no(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ks(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];no(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Is(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new so(ro(this.value))}}class oo{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new oo(t,0,os.min(),os.min(),os.min(),so.empty(),0)}static newFoundDocument(t,e,n,r){return new oo(t,1,e,os.min(),n,r,0)}static newNoDocument(t,e){return new oo(t,2,e,os.min(),os.min(),so.empty(),0)}static newUnknownDocument(t,e){return new oo(t,3,e,os.min(),os.min(),so.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(os.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=so.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=so.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=os.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof oo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new oo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ao{constructor(t,e){this.position=t,this.inclusive=e}}function ho(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ls.comparator(ls.fromName(o.referenceValue),n.key):Hs(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function co(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ks(t.position[n],e.position[n]))return!1;return!0}class uo{constructor(t,e="asc"){this.field=t,this.dir=e}}function lo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class fo{}class go extends fo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Eo(t,e,n):"array-contains"===e?new So(t,n):"in"===e?new Co(t,n):"not-in"===e?new Ao(t,n):"array-contains-any"===e?new Do(t,n):new go(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new bo(t,n):new To(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Hs(e,this.value)):null!==e&&zs(this.value)===zs(e)&&this.matchesComparison(Hs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return qi()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class po extends fo{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new po(t,e)}matches(t){return mo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.le((t=>t.isInequality()));return null!==t?t.field:null}le(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function mo(t){return"and"===t.op}function yo(t){return function(t){for(const e of t.filters)if(e instanceof po)return!1;return!0}(t)&&mo(t)}function vo(t){if(t instanceof go)return t.field.canonicalString()+t.op.toString()+Ws(t.value);if(yo(t))return t.filters.map((t=>vo(t))).join(",");{const e=t.filters.map((t=>vo(t))).join(",");return`${t.op}(${e})`}}function wo(t,e){return t instanceof go?function(t,e){return e instanceof go&&t.op===e.op&&t.field.isEqual(e.field)&&Ks(t.value,e.value)}(t,e):t instanceof po?function(t,e){return e instanceof po&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&wo(n,e.filters[r])),!0)}(t,e):void qi()}function _o(t){return t instanceof go?function(t){return`${t.field.canonicalString()} ${t.op} ${Ws(t.value)}`}(t):t instanceof po?function(t){return t.op.toString()+" {"+t.getFilters().map(_o).join(" ,")+"}"}(t):"Filter"}class Eo extends go{constructor(t,e,n){super(t,e,n),this.key=ls.fromName(n.referenceValue)}matches(t){const e=ls.comparator(t.key,this.key);return this.matchesComparison(e)}}class bo extends go{constructor(t,e){super(t,"in",e),this.keys=Io(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class To extends go{constructor(t,e){super(t,"not-in",e),this.keys=Io(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Io(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>ls.fromName(t.referenceValue)))}class So extends go{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Zs(e)&&Gs(e.arrayValue,this.value)}}class Co extends go{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Gs(this.value.arrayValue,e)}}class Ao extends go{constructor(t,e){super(t,"not-in",e)}matches(t){if(Gs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Gs(this.value.arrayValue,e)}}class Do extends go{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Zs(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Gs(this.value.arrayValue,t)))}}class No{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.he=null}}function ko(t,e=null,n=[],r=[],i=null,s=null,o=null){return new No(t,e,n,r,i,s,o)}function Ro(t){const e=$i(t);if(null===e.he){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>vo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Es(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Ws(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Ws(t))).join(",")),e.he=t}return e.he}function Lo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wo(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!co(t.startAt,e.startAt)&&co(t.endAt,e.endAt)}function xo(t){return ls.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Oo{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Mo(t){return new Oo(t)}function Po(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Vo(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Fo(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Uo(t){return null!==t.collectionGroup}function Bo(t){const e=$i(t);if(null===e.Pe){e.Pe=[];const t=Fo(e),n=Vo(e);if(null!==t&&null===n)t.isKeyField()||e.Pe.push(new uo(t)),e.Pe.push(new uo(us.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.Pe.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new uo(us.keyField(),t))}}}return e.Pe}function qo(t){const e=$i(t);return e.Ie||(e.Ie=function(t,e){if("F"===t.limitType)return ko(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new uo(t.field,e)}));const n=t.endAt?new ao(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ao(t.startAt.position,t.startAt.inclusive):null;return ko(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Bo(t))),e.Ie}function jo(t,e){e.getFirstInequalityField(),Fo(t);const n=t.filters.concat([e]);return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $o(t,e,n){return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zo(t,e){return Lo(qo(t),qo(e))&&t.limitType===e.limitType}function Ko(t){return`${Ro(qo(t))}|lt:${t.limitType}`}function Go(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>_o(t))).join(", ")}]`),Es(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Ws(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Ws(t))).join(",")),`Target(${e})`}(qo(t))}; limitType=${t.limitType})`}function Ho(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ls.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Bo(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=ho(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Bo(t),e)||t.endAt&&!function(t,e,n){const r=ho(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Bo(t),e))}(t,e)}function Qo(t){return(e,n)=>{let r=!1;for(const i of Bo(t)){const t=Wo(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Wo(t,e,n){const r=t.field.isKeyField()?ls.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Hs(r,i):qi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return qi()}}class Yo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Is(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return Ss(this.inner)}size(){return this.innerSize}}const Xo=new Cs(ls.comparator);function Jo(){return Xo}const Zo=new Cs(ls.comparator);function ta(...t){let e=Zo;for(const n of t)e=e.insert(n.key,n);return e}function ea(t){let e=Zo;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function na(){return ia()}function ra(){return ia()}function ia(){return new Yo((t=>t.toString()),((t,e)=>t.isEqual(e)))}new Cs(ls.comparator);const sa=new Ns(ls.comparator);function oa(...t){let e=sa;for(const n of t)e=e.add(n);return e}const aa=new Ns(rs);function ha(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bs(e)?"-0":e}}function ca(t){return{integerValue:""+t}}function ua(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!bs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?ca(e):ha(t,e)}class la{constructor(){this._=void 0}}function da(t,e,n){return t instanceof ga?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Fs(e)&&(e=Us(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof pa?ma(t,e):t instanceof ya?va(t,e):function(t,e){const n=function(t,e){return t instanceof wa?function(t){return Js(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}(t,e),r=_a(n)+_a(t.Te);return Js(n)&&Js(t.Te)?ca(r):ha(t.serializer,r)}(t,e)}function fa(t,e,n){return t instanceof pa?ma(t,e):t instanceof ya?va(t,e):n}class ga extends la{}class pa extends la{constructor(t){super(),this.elements=t}}function ma(t,e){const n=Ea(e);for(const e of t.elements)n.some((t=>Ks(t,e)))||n.push(e);return{arrayValue:{values:n}}}class ya extends la{constructor(t){super(),this.elements=t}}function va(t,e){let n=Ea(e);for(const e of t.elements)n=n.filter((t=>!Ks(t,e)));return{arrayValue:{values:n}}}class wa extends la{constructor(t,e){super(),this.serializer=t,this.Te=e}}function _a(t){return Ps(t.integerValue||t.doubleValue)}function Ea(t){return Zs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ba{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ba}static exists(t){return new ba(void 0,t)}static updateTime(t){return new ba(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ta(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ia{}function Sa(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Oa(t.key,ba.none()):new Na(t.key,t.data,ba.none());{const n=t.data,r=so.empty();let i=new Ns(us.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new ka(t.key,r,new Rs(i.toArray()),ba.none())}}function Ca(t,e,n){t instanceof Na?function(t,e,n){const r=t.value.clone(),i=La(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ka?function(t,e,n){if(!Ta(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=La(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ra(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Aa(t,e,n,r){return t instanceof Na?function(t,e,n,r){if(!Ta(t.precondition,e))return n;const i=t.value.clone(),s=xa(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof ka?function(t,e,n,r){if(!Ta(t.precondition,e))return n;const i=xa(t.fieldTransforms,r,e),s=e.data;return s.setAll(Ra(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return Ta(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Da(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&is(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof pa&&e instanceof pa||t instanceof ya&&e instanceof ya?is(t.elements,e.elements,Ks):t instanceof wa&&e instanceof wa?Ks(t.Te,e.Te):t instanceof ga&&e instanceof ga}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Na extends Ia{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ka extends Ia{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ra(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function La(t,e,n){const r=new Map;ji(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,fa(o,a,n[i]))}return r}function xa(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,da(t,s,e))}return r}class Oa extends Ia{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ma{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&Ca(r,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Aa(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Aa(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=ra();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=Sa(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(os.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),oa())}isEqual(t){return this.batchId===t.batchId&&is(this.mutations,t.mutations,((t,e)=>Da(t,e)))&&is(this.baseMutations,t.baseMutations,((t,e)=>Da(t,e)))}}class Pa{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Va{constructor(t,e){this.count=t,this.unchangedNames=e}}var Fa,Ua;function Ba(t){if(void 0===t)return Fi("GRPC error has no .code"),zi.UNKNOWN;switch(t){case Fa.OK:return zi.OK;case Fa.CANCELLED:return zi.CANCELLED;case Fa.UNKNOWN:return zi.UNKNOWN;case Fa.DEADLINE_EXCEEDED:return zi.DEADLINE_EXCEEDED;case Fa.RESOURCE_EXHAUSTED:return zi.RESOURCE_EXHAUSTED;case Fa.INTERNAL:return zi.INTERNAL;case Fa.UNAVAILABLE:return zi.UNAVAILABLE;case Fa.UNAUTHENTICATED:return zi.UNAUTHENTICATED;case Fa.INVALID_ARGUMENT:return zi.INVALID_ARGUMENT;case Fa.NOT_FOUND:return zi.NOT_FOUND;case Fa.ALREADY_EXISTS:return zi.ALREADY_EXISTS;case Fa.PERMISSION_DENIED:return zi.PERMISSION_DENIED;case Fa.FAILED_PRECONDITION:return zi.FAILED_PRECONDITION;case Fa.ABORTED:return zi.ABORTED;case Fa.OUT_OF_RANGE:return zi.OUT_OF_RANGE;case Fa.UNIMPLEMENTED:return zi.UNIMPLEMENTED;case Fa.DATA_LOSS:return zi.DATA_LOSS;default:return qi()}}(Ua=Fa||(Fa={}))[Ua.OK=0]="OK",Ua[Ua.CANCELLED=1]="CANCELLED",Ua[Ua.UNKNOWN=2]="UNKNOWN",Ua[Ua.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ua[Ua.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ua[Ua.NOT_FOUND=5]="NOT_FOUND",Ua[Ua.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ua[Ua.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ua[Ua.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ua[Ua.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ua[Ua.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ua[Ua.ABORTED=10]="ABORTED",Ua[Ua.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ua[Ua.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ua[Ua.INTERNAL=13]="INTERNAL",Ua[Ua.UNAVAILABLE=14]="UNAVAILABLE",Ua[Ua.DATA_LOSS=15]="DATA_LOSS";const qa=new Ri([4294967295,4294967295],0);function ja(t){const e=(new TextEncoder).encode(t),n=new ki;return n.update(e),new Uint8Array(n.digest())}function $a(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([i,s],0)]}class za{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ka(`Invalid padding: ${e}`);if(n<0)throw new Ka(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Ka(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Ka(`Invalid padding when bitmap length is 0: ${e}`);this.Ae=8*t.length-e,this.Re=Ri.fromNumber(this.Ae)}Ve(t,e,n){let r=t.add(e.multiply(Ri.fromNumber(n)));return 1===r.compare(qa)&&(r=new Ri([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}me(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ae)return!1;const e=ja(t),[n,r]=$a(e);for(let t=0;t<this.hashCount;t++){const e=this.Ve(n,r,t);if(!this.me(e))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new za(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Ae)return;const e=ja(t),[n,r]=$a(e);for(let t=0;t<this.hashCount;t++){const e=this.Ve(n,r,t);this.fe(e)}}fe(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ga{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,Ha.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Ga(os.min(),r,new Cs(rs),Jo(),oa())}}class Ha{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Ha(n,e,oa(),oa(),oa())}}class Qa{constructor(t,e,n,r){this.ge=t,this.removedTargetIds=e,this.key=n,this.pe=r}}class Wa{constructor(t,e){this.targetId=t,this.ye=e}}class Ya{constructor(t,e,n=xs.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Xa{constructor(){this.we=0,this.Se=th(),this.be=xs.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return 0!==this.we}get Fe(){return this.Ce}Me(t){t.approximateByteSize()>0&&(this.Ce=!0,this.be=t)}xe(){let t=oa(),e=oa(),n=oa();return this.Se.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:qi()}})),new Ha(this.be,this.De,t,e,n)}Oe(){this.Ce=!1,this.Se=th()}Ne(t,e){this.Ce=!0,this.Se=this.Se.insert(t,e)}Be(t){this.Ce=!0,this.Se=this.Se.remove(t)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class Ja{constructor(t){this.Qe=t,this.Ke=new Map,this.$e=Jo(),this.Ue=Za(),this.We=new Cs(rs)}Ge(t){for(const e of t.ge)t.pe&&t.pe.isFoundDocument()?this.ze(e,t.pe):this.je(e,t.key,t.pe);for(const e of t.removedTargetIds)this.je(e,t.key,t.pe)}He(t){this.forEachTarget(t,(e=>{const n=this.Je(e);switch(t.state){case 0:this.Ye(e)&&n.Me(t.resumeToken);break;case 1:n.ke(),n.ve||n.Oe(),n.Me(t.resumeToken);break;case 2:n.ke(),n.ve||this.removeTarget(e);break;case 3:this.Ye(e)&&(n.qe(),n.Me(t.resumeToken));break;case 4:this.Ye(e)&&(this.Ze(e),n.Me(t.resumeToken));break;default:qi()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ke.forEach(((t,n)=>{this.Ye(n)&&e(n)}))}Xe(t){const e=t.targetId,n=t.ye.count,r=this.et(e);if(r){const i=r.target;if(xo(i))if(0===n){const t=new ls(i.path);this.je(e,t,oo.newNoDocument(t,os.min()))}else ji(1===n);else{const r=this.tt(e);if(r!==n){const n=this.nt(t),i=n?this.rt(n,t,r):1;if(0!==i){this.Ze(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(e,t)}}}}}nt(t){const e=t.ye.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=e;let s,o;try{s=Vs(n).toUint8Array()}catch(t){if(t instanceof Ls)return Ui("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new za(s,r,i)}catch(t){return Ui(t instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Ae?null:o}rt(t,e,n){return e.ye.count===n-this.ot(t,e.targetId)?0:2}ot(t,e){const n=this.Qe.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Qe.st(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.je(e,n,null),r++)})),r}_t(t){const e=new Map;this.Ke.forEach(((n,r)=>{const i=this.et(r);if(i){if(n.current&&xo(i.target)){const e=new ls(i.target.path);null!==this.$e.get(e)||this.ut(r,e)||this.je(r,e,oo.newNoDocument(e,t))}n.Fe&&(e.set(r,n.xe()),n.Oe())}}));let n=oa();this.Ue.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.et(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.$e.forEach(((e,n)=>n.setReadTime(t)));const r=new Ga(t,e,this.We,this.$e,n);return this.$e=Jo(),this.Ue=Za(),this.We=new Cs(rs),r}ze(t,e){if(!this.Ye(t))return;const n=this.ut(t,e.key)?2:0;this.Je(t).Ne(e.key,n),this.$e=this.$e.insert(e.key,e),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}je(t,e,n){if(!this.Ye(t))return;const r=this.Je(t);this.ut(t,e)?r.Ne(e,1):r.Be(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),n&&(this.$e=this.$e.insert(e,n))}removeTarget(t){this.Ke.delete(t)}tt(t){const e=this.Je(t).xe();return this.Qe.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Le(t){this.Je(t).Le()}Je(t){let e=this.Ke.get(t);return e||(e=new Xa,this.Ke.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Ns(rs),this.Ue=this.Ue.insert(t,e)),e}Ye(t){const e=null!==this.et(t);return e||Vi("WatchChangeAggregator","Detected inactive target",t),e}et(t){const e=this.Ke.get(t);return e&&e.ve?null:this.Qe.lt(t)}Ze(t){this.Ke.set(t,new Xa),this.Qe.getRemoteKeysForTarget(t).forEach((e=>{this.je(t,e,null)}))}ut(t,e){return this.Qe.getRemoteKeysForTarget(t).has(e)}}function Za(){return new Cs(ls.comparator)}function th(){return new Cs(ls.comparator)}const eh={asc:"ASCENDING",desc:"DESCENDING"},nh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rh={and:"AND",or:"OR"};class ih{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function sh(t,e){return t.useProto3Json||Es(e)?e:{value:e}}function oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ah(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hh(t){return ji(!!t),os.fromTimestamp(function(t){const e=Ms(t);return new ss(e.seconds,e.nanos)}(t))}function ch(t,e){return function(t){return new hs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function uh(t){const e=hs.fromString(t);return ji(Sh(e)),e}function lh(t,e){const n=uh(e);if(n.get(1)!==t.databaseId.projectId)throw new Ki(zi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ki(zi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ls(gh(n))}function dh(t,e){return ch(t.databaseId,e)}function fh(t){return new hs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gh(t){return ji(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ph(t,e){return{documents:[dh(t,e.path)]}}function mh(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=dh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=dh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0!==t.length)return Ih(po.create(t,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:bh(t.field),direction:wh(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=sh(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function yh(t){let e=function(t){const e=uh(t);return 4===e.length?hs.emptyPath():gh(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ji(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=vh(t);return e instanceof po&&yo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new uo(Th(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Es(e)?null:e}(n.limit));let h=null;n.startAt&&(h=function(t){const e=!!t.before,n=t.values||[];return new ao(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new ao(n,e)}(n.endAt)),function(t,e,n,r,i,s,o,a){return new Oo(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",h,c)}function vh(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Th(t.unaryFilter.field);return go.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Th(t.unaryFilter.field);return go.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Th(t.unaryFilter.field);return go.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Th(t.unaryFilter.field);return go.create(i,"!=",{nullValue:"NULL_VALUE"});default:return qi()}}(t):void 0!==t.fieldFilter?function(t){return go.create(Th(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qi()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return po.create(t.compositeFilter.filters.map((t=>vh(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return qi()}}(t.compositeFilter.op))}(t):qi()}function wh(t){return eh[t]}function _h(t){return nh[t]}function Eh(t){return rh[t]}function bh(t){return{fieldPath:t.canonicalString()}}function Th(t){return us.fromServerFormat(t.fieldPath)}function Ih(t){return t instanceof go?function(t){if("=="===t.op){if(eo(t.value))return{unaryFilter:{field:bh(t.field),op:"IS_NAN"}};if(to(t.value))return{unaryFilter:{field:bh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(eo(t.value))return{unaryFilter:{field:bh(t.field),op:"IS_NOT_NAN"}};if(to(t.value))return{unaryFilter:{field:bh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(t.field),op:_h(t.op),value:t.value}}}(t):t instanceof po?function(t){const e=t.getFilters().map((t=>Ih(t)));return 1===e.length?e[0]:{compositeFilter:{op:Eh(t.op),filters:e}}}(t):qi()}function Sh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ch{constructor(t,e,n,r,i=os.min(),s=os.min(),o=xs.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Ch(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Ah{constructor(t){this.ht=t}}function Dh(t){const e=yh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$o(e,e.limit,"L"):e}class Nh{constructor(){}dt(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.At(e,5);else if("booleanValue"in t)this.At(e,10),e.Rt(t.booleanValue?1:0);else if("integerValue"in t)this.At(e,15),e.Rt(Ps(t.integerValue));else if("doubleValue"in t){const n=Ps(t.doubleValue);isNaN(n)?this.At(e,13):(this.At(e,15),bs(n)?e.Rt(0):e.Rt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.At(e,20),"string"==typeof n?e.Vt(n):(e.Vt(`${n.seconds||""}`),e.Rt(n.nanos||0))}else if("stringValue"in t)this.ft(t.stringValue,e),this.gt(e);else if("bytesValue"in t)this.At(e,30),e.yt(Vs(t.bytesValue)),this.gt(e);else if("referenceValue"in t)this.wt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.At(e,45),e.Rt(n.latitude||0),e.Rt(n.longitude||0)}else"mapValue"in t?io(t)?this.At(e,Number.MAX_SAFE_INTEGER):(this.St(t.mapValue,e),this.gt(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.gt(e)):qi()}ft(t,e){this.At(e,25),this.Dt(t,e)}Dt(t,e){e.Vt(t)}St(t,e){const n=t.fields||{};this.At(e,55);for(const t of Object.keys(n))this.ft(t,e),this.Tt(n[t],e)}bt(t,e){const n=t.values||[];this.At(e,50);for(const t of n)this.Tt(t,e)}wt(t,e){this.At(e,37),ls.fromName(t).path.forEach((t=>{this.At(e,60),this.Dt(t,e)}))}At(t,e){t.Rt(e)}gt(t){t.Rt(2)}}Nh.Ct=new Nh;class kh{constructor(){this.an=new Rh}addToCollectionParentIndex(t,e){return this.an.add(e),vs.resolve()}getCollectionParents(t,e){return vs.resolve(this.an.getEntries(e))}addFieldIndex(t,e){return vs.resolve()}deleteFieldIndex(t,e){return vs.resolve()}deleteAllFieldIndexes(t){return vs.resolve()}createTargetIndexes(t,e){return vs.resolve()}getDocumentsMatchingTarget(t,e){return vs.resolve(null)}getIndexType(t,e){return vs.resolve(0)}getFieldIndexes(t,e){return vs.resolve([])}getNextCollectionGroupToUpdate(t){return vs.resolve(null)}getMinOffset(t,e){return vs.resolve(fs.min())}getMinOffsetFromCollectionGroup(t,e){return vs.resolve(fs.min())}updateCollectionGroup(t,e,n){return vs.resolve()}updateIndexEntries(t,e){return vs.resolve()}}class Rh{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ns(hs.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Ns(hs.comparator)).toArray()}}new Uint8Array(0);class Lh{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Lh(t,Lh.DEFAULT_COLLECTION_PERCENTILE,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Lh.DEFAULT_COLLECTION_PERCENTILE=10,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lh.DEFAULT=new Lh(41943040,Lh.DEFAULT_COLLECTION_PERCENTILE,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lh.DISABLED=new Lh(-1,0,0);class xh{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Bn(){return new xh(0)}static Ln(){return new xh(-1)}}class Oh{constructor(){this.changes=new Yo((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,oo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?vs.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Mh{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Ph{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Aa(n.mutation,t,Rs.empty(),ss.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,oa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=oa()){const r=na();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=ta();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=na();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,oa())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=Jo();const s=ia(),o=ia();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof ka)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Aa(o.mutation,e,o.mutation.getFieldMask(),ss.now())):s.set(e.key,Rs.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Mh(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=ia();let r=new Cs(((t,e)=>t-e)),i=oa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Rs.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||oa()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,h=r.value,c=ra();h.forEach((t=>{if(!i.has(t)){const r=Sa(e.get(t),n.get(t));null!==r&&c.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return vs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return ls.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Uo(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):vs.resolve(na());let o=-1,a=i;return s.next((e=>vs.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?vs.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,oa()))).next((t=>({batchId:o,changes:ea(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ls(e)).next((t=>{let e=ta();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let s=ta();return this.indexManager.getCollectionParents(t,i).next((o=>vs.forEach(o,(o=>{const a=function(t,e){return new Oo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,oo.newInvalidDocument(r)))}));let n=ta();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&Aa(s.mutation,r,Rs.empty(),ss.now()),Ho(e,r)&&(n=n.insert(t,r))})),n}))}}class Vh{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,e){return vs.resolve(this.lr.get(e))}saveBundleMetadata(t,e){return this.lr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:hh(t.createTime)}}(e)),vs.resolve()}getNamedQuery(t,e){return vs.resolve(this.hr.get(e))}saveNamedQuery(t,e){return this.hr.set(e.name,function(t){return{name:t.name,query:Dh(t.bundledQuery),readTime:hh(t.readTime)}}(e)),vs.resolve()}}class Fh{constructor(){this.overlays=new Cs(ls.comparator),this.Pr=new Map}getOverlay(t,e){return vs.resolve(this.overlays.get(e))}getOverlays(t,e){const n=na();return vs.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.It(t,e,r)})),vs.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.Pr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.Pr.delete(n)),vs.resolve()}getOverlaysForCollection(t,e,n){const r=na(),i=e.length+1,s=new ls(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return vs.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new Cs(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=na(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=na(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return vs.resolve(o)}It(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Pa(e,n));let i=this.Pr.get(e);void 0===i&&(i=oa(),this.Pr.set(e,i)),this.Pr.set(e,i.add(n.key))}}class Uh{constructor(){this.Ir=new Ns(Bh.dr),this.Tr=new Ns(Bh.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(t,e){const n=new Bh(t,e);this.Ir=this.Ir.add(n),this.Tr=this.Tr.add(n)}Ar(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Rr(new Bh(t,e))}Vr(t,e){t.forEach((t=>this.removeReference(t,e)))}mr(t){const e=new ls(new hs([])),n=new Bh(e,t),r=new Bh(e,t+1),i=[];return this.Tr.forEachInRange([n,r],(t=>{this.Rr(t),i.push(t.key)})),i}gr(){this.Ir.forEach((t=>this.Rr(t)))}Rr(t){this.Ir=this.Ir.delete(t),this.Tr=this.Tr.delete(t)}pr(t){const e=new ls(new hs([])),n=new Bh(e,t),r=new Bh(e,t+1);let i=oa();return this.Tr.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new Bh(t,0),n=this.Ir.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Bh{constructor(t,e){this.key=t,this.yr=e}static dr(t,e){return ls.comparator(t.key,e.key)||rs(t.yr,e.yr)}static Er(t,e){return rs(t.yr,e.yr)||ls.comparator(t.key,e.key)}}class qh{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.wr=1,this.Sr=new Ns(Bh.dr)}checkEmpty(t){return vs.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ma(i,e,n,r);this.mutationQueue.push(s);for(const e of r)this.Sr=this.Sr.add(new Bh(e.key,i)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return vs.resolve(s)}lookupMutationBatch(t,e){return vs.resolve(this.br(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.Dr(n),i=r<0?0:r;return vs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return vs.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(t){return vs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Bh(e,0),r=new Bh(e,Number.POSITIVE_INFINITY),i=[];return this.Sr.forEachInRange([n,r],(t=>{const e=this.br(t.yr);i.push(e)})),vs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ns(rs);return e.forEach((t=>{const e=new Bh(t,0),r=new Bh(t,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([e,r],(t=>{n=n.add(t.yr)}))})),vs.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;ls.isDocumentKey(i)||(i=i.child(""));const s=new Bh(new ls(i),0);let o=new Ns(rs);return this.Sr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.yr)),!0)}),s),vs.resolve(this.Cr(o))}Cr(t){const e=[];return t.forEach((t=>{const n=this.br(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){ji(0===this.vr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Sr;return vs.forEach(e.mutations,(r=>{const i=new Bh(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Sr=n}))}xn(t){}containsKey(t,e){const n=new Bh(e,0),r=this.Sr.firstAfterOrEqual(n);return vs.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,vs.resolve()}vr(t,e){return this.Dr(t)}Dr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}br(t){const e=this.Dr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class jh{constructor(t){this.Fr=t,this.docs=new Cs(ls.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.Fr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return vs.resolve(n?n.document.mutableCopy():oo.newInvalidDocument(e))}getEntries(t,e){let n=Jo();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():oo.newInvalidDocument(t))})),vs.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=Jo();const s=e.path,o=new ls(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||gs(ds(o),n)<=0||(r.has(o.key)||Ho(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return vs.resolve(i)}getAllFromCollectionGroup(t,e,n,r){qi()}Mr(t,e){return vs.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new $h(this)}getSize(t){return vs.resolve(this.size)}}class $h extends Oh{constructor(t){super(),this.ur=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.ur.addEntry(t,r)):this.ur.removeEntry(n)})),vs.waitFor(e)}getFromCache(t,e){return this.ur.getEntry(t,e)}getAllFromCache(t,e){return this.ur.getEntries(t,e)}}class zh{constructor(t){this.persistence=t,this.Or=new Yo((t=>Ro(t)),Lo),this.lastRemoteSnapshotVersion=os.min(),this.highestTargetId=0,this.Nr=0,this.Br=new Uh,this.targetCount=0,this.Lr=xh.Bn()}forEachTarget(t,e){return this.Or.forEach(((t,n)=>e(n))),vs.resolve()}getLastRemoteSnapshotVersion(t){return vs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return vs.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),vs.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Nr&&(this.Nr=e),vs.resolve()}Qn(t){this.Or.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new xh(e),this.highestTargetId=e),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,e){return this.Qn(e),this.targetCount+=1,vs.resolve()}updateTargetData(t,e){return this.Qn(e),vs.resolve()}removeTargetData(t,e){return this.Or.delete(e.target),this.Br.mr(e.targetId),this.targetCount-=1,vs.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Or.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Or.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),vs.waitFor(i).next((()=>r))}getTargetCount(t){return vs.resolve(this.targetCount)}getTargetData(t,e){const n=this.Or.get(e)||null;return vs.resolve(n)}addMatchingKeys(t,e,n){return this.Br.Ar(e,n),vs.resolve()}removeMatchingKeys(t,e,n){this.Br.Vr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),vs.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Br.mr(e),vs.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Br.pr(e);return vs.resolve(n)}containsKey(t,e){return vs.resolve(this.Br.containsKey(e))}}class Kh{constructor(t,e){this.kr={},this.overlays={},this.qr=new _s(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new zh(this),this.indexManager=new kh,this.remoteDocumentCache=function(t){return new jh(t)}((t=>this.referenceDelegate.$r(t))),this.serializer=new Ah(e),this.Ur=new Vh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Fh,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.kr[t.toKey()];return n||(n=new qh(e,this.referenceDelegate),this.kr[t.toKey()]=n),n}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(t,e,n){Vi("MemoryPersistence","Starting transaction:",t);const r=new Gh(this.qr.next());return this.referenceDelegate.Wr(),n(r).next((t=>this.referenceDelegate.Gr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}zr(t,e){return vs.or(Object.values(this.kr).map((n=>()=>n.containsKey(t,e))))}}class Gh extends ms{constructor(t){super(),this.currentSequenceNumber=t}}class Hh{constructor(t){this.persistence=t,this.jr=new Uh,this.Hr=null}static Jr(t){return new Hh(t)}get Yr(){if(this.Hr)return this.Hr;throw qi()}addReference(t,e,n){return this.jr.addReference(n,e),this.Yr.delete(n.toString()),vs.resolve()}removeReference(t,e,n){return this.jr.removeReference(n,e),this.Yr.add(n.toString()),vs.resolve()}markPotentiallyOrphaned(t,e){return this.Yr.add(e.toString()),vs.resolve()}removeTarget(t,e){this.jr.mr(e.targetId).forEach((t=>this.Yr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Yr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Wr(){this.Hr=new Set}Gr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vs.forEach(this.Yr,(n=>{const r=ls.fromPath(n);return this.Zr(t,r).next((t=>{t||e.removeEntry(r,os.min())}))})).next((()=>(this.Hr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Zr(t,e).next((t=>{t?this.Yr.delete(e.toString()):this.Yr.add(e.toString())}))}$r(t){return 0}Zr(t,e){return vs.or([()=>vs.resolve(this.jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.zr(t,e)])}}class Qh{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Qi=n,this.Ki=r}static $i(t,e){let n=oa(),r=oa();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new Qh(t,e.fromCache,n,r)}}class Wh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Yh{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(t,e){this.ji=t,this.indexManager=e,this.Ui=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.Hi(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.Ji(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new Wh;return this.Yi(t,e,n).next((r=>{if(i.result=r,this.Wi)return this.Zi(t,e,n,r.size)}))})).next((()=>i.result))}Zi(t,e,n,r){return n.documentReadCount<this.Gi?(Pi()<=w.DEBUG&&Vi("QueryEngine","SDK will not create cache indexes for query:",Go(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),vs.resolve()):(Pi()<=w.DEBUG&&Vi("QueryEngine","Query:",Go(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.zi*r?(Pi()<=w.DEBUG&&Vi("QueryEngine","The SDK decides to create cache indexes for query:",Go(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qo(e))):vs.resolve())}Hi(t,e){if(Po(e))return vs.resolve(null);let n=qo(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=$o(e,null,"F"),n=qo(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=oa(...r);return this.ji.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Xi(e,r);return this.es(e,s,i,n.readTime)?this.Hi(t,$o(e,null,"F")):this.ts(t,s,e,n)}))))})))))}Ji(t,e,n,r){return Po(e)||r.isEqual(os.min())?vs.resolve(null):this.ji.getDocuments(t,n).next((i=>{const s=this.Xi(e,i);return this.es(e,s,n,r)?vs.resolve(null):(Pi()<=w.DEBUG&&Vi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Go(e)),this.ts(t,s,e,function(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=os.fromTimestamp(1e9===r?new ss(n+1,0):new ss(n,r));return new fs(i,ls.empty(),e)}(r,-1)).next((t=>t)))}))}Xi(t,e){let n=new Ns(Qo(t));return e.forEach(((e,r)=>{Ho(t,r)&&(n=n.add(r))})),n}es(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Yi(t,e,n){return Pi()<=w.DEBUG&&Vi("QueryEngine","Using full collection scan to execute query:",Go(e)),this.ji.getDocumentsMatchingQuery(t,e,fs.min(),n)}ts(t,e,n,r){return this.ji.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Xh{constructor(t,e,n,r){this.persistence=t,this.ns=e,this.serializer=r,this.rs=new Cs(rs),this.ss=new Yo((t=>Ro(t)),Lo),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(n)}us(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ph(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.rs)))}}async function Jh(t,e){const n=$i(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.us(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=oa();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({cs:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function Zh(t){const e=$i(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Kr.getLastRemoteSnapshotVersion(t)))}async function tc(t,e,n){const r=$i(t),i=r.rs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!ws(t))throw t;Vi("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}function ec(t,e,n){const r=$i(t);let i=os.min(),s=oa();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=$i(t),i=r.ss.get(n);return void 0!==i?vs.resolve(r.rs.get(i)):r.Kr.getTargetData(e,n)}(r,t,qo(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.ns.getDocumentsMatchingQuery(t,e,n?i:os.min(),n?s:oa()))).next((t=>(function(t,e,n){let r=t.os.get(e)||os.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.os.set(e,r)}(r,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,Ps:s})))))}class nc{constructor(){this.activeTargetIds=aa}Rs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}As(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class rc{constructor(){this.ro=new nc,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.ro.Rs(t),this.io[t]||"not-current"}updateQueryState(t,e,n){this.io[t]=e}removeLocalQueryTarget(t){this.ro.Vs(t)}isLocalQueryTarget(t){return this.ro.activeTargetIds.has(t)}clearQueryState(t){delete this.io[t]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(t){return this.ro.activeTargetIds.has(t)}start(){return this.ro=new nc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class ic{so(t){}shutdown(){}}class sc{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(t){this.co.push(t)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){Vi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.co)t(0)}uo(){Vi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.co)t(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oc=null;function ac(){return null===oc?oc=268435456+Math.round(2147483648*Math.random()):oc++,"0x"+oc.toString(16)}const hc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cc{constructor(t){this.ho=t.ho,this.Po=t.Po}Io(t){this.To=t}Eo(t){this.Ao=t}onMessage(t){this.Ro=t}close(){this.Po()}send(t){this.ho(t)}Vo(){this.To()}mo(t){this.Ao(t)}fo(t){this.Ro(t)}}const uc="WebChannelConnection";class lc extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${n}/databases/${r}`,this.wo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get So(){return!1}bo(t,e,n,r,i){const s=ac(),o=this.Do(t,e);Vi("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(a,r,i),this.vo(t,o,a,n).then((e=>(Vi("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Ui("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Fo(t,e,n,r,i,s){return this.bo(t,e,n,r,i)}Co(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Oi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}Do(t,e){const n=hc[t];return`${this.po}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,n,r){const i=ac();return new Promise(((s,o)=>{const a=new Ni;a.setWithCredentials(!0),a.listenOnce(Si.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ii.NO_ERROR:const e=a.getResponseJson();Vi(uc,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case Ii.TIMEOUT:Vi(uc,`RPC '${t}' ${i} timed out`),o(new Ki(zi.DEADLINE_EXCEEDED,"Request time out"));break;case Ii.HTTP_ERROR:const n=a.getStatus();if(Vi(uc,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(zi).indexOf(e)>=0?e:zi.UNKNOWN}(e.status);o(new Ki(t,e.message))}else o(new Ki(zi.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ki(zi.UNAVAILABLE,"Connection failed."));break;default:qi()}}finally{Vi(uc,`RPC '${t}' ${i} completed.`)}}));const h=JSON.stringify(r);Vi(uc,`RPC '${t}' ${i} sending request:`,r),a.send(e,"POST",h,n,15)}))}Mo(t,e,n){const r=ac(),i=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=bi(),o=Ti(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;void 0!==h&&(a.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Co(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Vi(uc,`Creating RPC '${t}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let l=!1,d=!1;const f=new cc({ho:e=>{d?Vi(uc,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(l||(Vi(uc,`Opening RPC '${t}' stream ${r} transport.`),u.open(),l=!0),Vi(uc,`RPC '${t}' stream ${r} sending:`,e),u.send(e))},Po:()=>u.close()}),g=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return g(u,Di.EventType.OPEN,(()=>{d||Vi(uc,`RPC '${t}' stream ${r} transport opened.`)})),g(u,Di.EventType.CLOSE,(()=>{d||(d=!0,Vi(uc,`RPC '${t}' stream ${r} transport closed`),f.mo())})),g(u,Di.EventType.ERROR,(e=>{d||(d=!0,Ui(uc,`RPC '${t}' stream ${r} transport errored:`,e),f.mo(new Ki(zi.UNAVAILABLE,"The operation could not be completed")))})),g(u,Di.EventType.MESSAGE,(e=>{var n;if(!d){const i=e.data[0];ji(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Vi(uc,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=Fa[t];if(void 0!==e)return Ba(e)}(e),i=o.message;void 0===n&&(n=zi.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),d=!0,f.mo(new Ki(n,i)),u.close()}else Vi(uc,`RPC '${t}' stream ${r} received:`,i),f.fo(i)}})),g(o,Ci.STAT_EVENT,(e=>{e.stat===Ai.PROXY?Vi(uc,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===Ai.NOPROXY&&Vi(uc,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.Vo()}),0),f}}function dc(){return"undefined"!=typeof document?document:null}function fc(t){return new ih(t,!0)}class gc{constructor(t,e,n=1e3,r=1.5,i=6e4){this._i=t,this.timerId=e,this.xo=n,this.Oo=r,this.No=i,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(t){this.cancel();const e=Math.floor(this.Bo+this.Ko()),n=Math.max(0,Date.now()-this.ko),r=Math.max(0,e-n);r>0&&Vi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Bo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,r,(()=>(this.ko=Date.now(),t()))),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}class pc{constructor(t,e,n,r,i,s,o,a){this._i=t,this.Uo=n,this.Wo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new gc(t,e)}Jo(){return 1===this.state||5===this.state||this.Yo()}Yo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,(()=>this.t_())))}n_(t){this.r_(),this.stream.send(t)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(t,e){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,4!==t?this.Ho.reset():e&&e.code===zi.RESOURCE_EXHAUSTED?(Fi(e.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):e&&e.code===zi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Eo(e)}s_(){}auth(){this.state=1;const t=this.o_(this.Go),e=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Go===e&&this.__(t,n)}),(e=>{t((()=>{const t=new Ki(zi.UNKNOWN,"Fetching auth token failed: "+e.message);return this.a_(t)}))}))}__(t,e){const n=this.o_(this.Go);this.stream=this.u_(t,e),this.stream.Io((()=>{n((()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,(()=>(this.Yo()&&(this.state=3),Promise.resolve()))),this.listener.Io())))})),this.stream.Eo((t=>{n((()=>this.a_(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Zo(){this.state=5,this.Ho.Qo((async()=>{this.state=0,this.start()}))}a_(t){return Vi("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}o_(t){return e=>{this._i.enqueueAndForget((()=>this.Go===t?e():(Vi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mc extends pc{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}u_(t,e){return this.connection.Mo("Listen",t,e)}onMessage(t){this.Ho.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:qi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(ji(void 0===e||"string"==typeof e),xs.fromBase64String(e||"")):(ji(void 0===e||e instanceof Uint8Array),xs.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?zi.UNKNOWN:Ba(t.code);return new Ki(e,t.message||"")}(o);n=new Ya(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lh(t,r.document.name),s=hh(r.document.updateTime),o=r.document.createTime?hh(r.document.createTime):os.min(),a=new so({mapValue:{fields:r.document.fields}}),h=oo.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Qa(c,u,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lh(t,r.document),s=r.readTime?hh(r.readTime):os.min(),o=oo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lh(t,r.document),s=r.removedTargetIds||[];n=new Qa([],s,i,null)}else{if(!("filter"in e))return qi();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new Va(r,i),o=t.targetId;n=new Wa(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return os.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?os.min():e.readTime?hh(e.readTime):os.min()}(t);return this.listener.c_(e,n)}l_(t){const e={};e.database=fh(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=xo(r)?{documents:ph(t,r)}:{query:mh(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=ah(t,e.resumeToken);const r=sh(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(os.min())>0){n.readTime=oh(t,e.snapshotVersion.toTimestamp());const r=sh(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qi()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.n_(e)}h_(t){const e={};e.database=fh(this.serializer),e.removeTarget=t,this.n_(e)}}class yc extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.R_=!1}V_(){if(this.R_)throw new Ki(zi.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,e,n){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.bo(t,e,n,r,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ki(zi.UNKNOWN,t.toString())}))}Fo(t,e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Fo(t,e,n,i,s,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ki(zi.UNKNOWN,t.toString())}))}terminate(){this.R_=!0}}class vc{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve()))))}b_(t){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.w_("Offline")))}set(t){this.D_(),this.f_=0,"Online"===t&&(this.p_=!1),this.w_(t)}w_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}S_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(Fi(e),this.p_=!1):Vi("OnlineStateTracker",e)}D_(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}class wc{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=i,this.x_.so((t=>{n.enqueueAndForget((async()=>{Dc(this)&&(Vi("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=$i(t);e.F_.add(4),await Ec(e),e.O_.set("Unknown"),e.F_.delete(4),await _c(e)}(this))}))})),this.O_=new vc(n,r)}}async function _c(t){if(Dc(t))for(const e of t.M_)await e(!0)}async function Ec(t){for(const e of t.M_)await e(!1)}function bc(t,e){const n=$i(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),Ac(n)?Cc(n):Mc(n).Yo()&&Ic(n,e))}function Tc(t,e){const n=$i(t),r=Mc(n);n.v_.delete(e),r.Yo()&&Sc(n,e),0===n.v_.size&&(r.Yo()?r.e_():Dc(n)&&n.O_.set("Unknown"))}function Ic(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(os.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mc(t).l_(e)}function Sc(t,e){t.N_.Le(e),Mc(t).h_(e)}function Cc(t){t.N_=new Ja({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Mc(t).start(),t.O_.y_()}function Ac(t){return Dc(t)&&!Mc(t).Jo()&&t.v_.size>0}function Dc(t){return 0===$i(t).F_.size}function Nc(t){t.N_=void 0}async function kc(t){t.v_.forEach(((e,n)=>{Ic(t,e)}))}async function Rc(t,e){Nc(t),Ac(t)?(t.O_.b_(e),Cc(t)):t.O_.set("Unknown")}async function Lc(t,e,n){if(t.O_.set("Online"),e instanceof Ya&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.v_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.v_.delete(r),t.N_.removeTarget(r))}(t,e)}catch(n){Vi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await xc(t,n)}else if(e instanceof Qa?t.N_.Ge(e):e instanceof Wa?t.N_.Xe(e):t.N_.He(e),!n.isEqual(os.min()))try{const e=await Zh(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.N_._t(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.v_.get(r);i&&t.v_.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.v_.get(e);if(!r)return;t.v_.set(e,r.withResumeToken(xs.EMPTY_BYTE_STRING,r.snapshotVersion)),Sc(t,e);const i=new Ch(r.target,e,n,r.sequenceNumber);Ic(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Vi("RemoteStore","Failed to raise snapshot:",e),await xc(t,e)}}async function xc(t,e,n){if(!ws(e))throw e;t.F_.add(1),await Ec(t),t.O_.set("Offline"),n||(n=()=>Zh(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Vi("RemoteStore","Retrying IndexedDB access"),await n(),t.F_.delete(1),await _c(t)}))}async function Oc(t,e){const n=$i(t);n.asyncQueue.verifyOperationInProgress(),Vi("RemoteStore","RemoteStore received new credentials");const r=Dc(n);n.F_.add(3),await Ec(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),await _c(n)}function Mc(t){return t.B_||(t.B_=function(t,e,n){const r=$i(t);return r.V_(),new mc(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Io:kc.bind(null,t),Eo:Rc.bind(null,t),c_:Lc.bind(null,t)}),t.M_.push((async e=>{e?(t.B_.Xo(),Ac(t)?Cc(t):t.O_.set("Unknown")):(await t.B_.stop(),Nc(t))}))),t.B_}class Pc{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new Pc(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ki(zi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vc(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),ws(t))return new Ki(zi.UNAVAILABLE,`${e}: ${t}`);throw t}class Fc{constructor(t){this.comparator=t?(e,n)=>t(e,n)||ls.comparator(e.key,n.key):(t,e)=>ls.comparator(t.key,e.key),this.keyedMap=ta(),this.sortedSet=new Cs(this.comparator)}static emptySet(t){return new Fc(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Fc))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Fc;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Uc{constructor(){this.k_=new Cs(ls.comparator)}track(t){const e=t.doc.key,n=this.k_.get(e);n?0!==t.type&&3===n.type?this.k_=this.k_.insert(e,t):3===t.type&&1!==n.type?this.k_=this.k_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.k_=this.k_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.k_=this.k_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.k_=this.k_.remove(e):1===t.type&&2===n.type?this.k_=this.k_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.k_=this.k_.insert(e,{type:2,doc:t.doc}):qi():this.k_=this.k_.insert(e,t)}q_(){const t=[];return this.k_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Bc{constructor(t,e,n,r,i,s,o,a,h){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=h}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Bc(t,e,Fc.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class qc{constructor(){this.Q_=void 0,this.listeners=[]}}class jc{constructor(){this.queries=new Yo((t=>Ko(t)),zo),this.onlineState="Unknown",this.K_=new Set}}function $c(t,e){const n=$i(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.W_(t)&&(r=!0);i.Q_=t}}r&&Kc(n)}function zc(t,e,n){const r=$i(t),i=r.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);r.queries.delete(e)}function Kc(t){t.K_.forEach((t=>{t.next()}))}class Gc{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Bc(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=Bc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}class Hc{constructor(t){this.key=t}}class Qc{constructor(t){this.key=t}}class Wc{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=oa(),this.mutatedKeys=oa(),this.ua=Qo(t),this.ca=new Fc(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new Uc,r=e?e.ca:this.ca;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,h="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const c=r.get(t),u=Ho(this.query,e)?e:null,l=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?l!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||h&&this.ua(u,h)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||h)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{ca:s,Pa:n,es:o,mutatedKeys:i}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const i=t.Pa.q_();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qi()}};return n(t)-n(e)}(t.type,e.type)||this.ua(t.doc,e.doc))),this.da(n);const s=e?this.Ta():[],o=0===this.aa.size&&this.current?1:0,a=o!==this._a;return this._a=o,0!==i.length||a?{snapshot:new Bc(this.query,t.ca,r,i,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:s}:{Ea:s}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Uc,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}da(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ta(){if(!this.current)return[];const t=this.aa;this.aa=oa(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new Qc(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new Hc(n))})),e}Ra(t){this.oa=t.Ps,this.aa=oa();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return Bc.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Yc{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Xc{constructor(t){this.key=t,this.ma=!1}}class Jc{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Yo((t=>Ko(t)),zo),this.pa=new Map,this.ya=new Set,this.wa=new Cs(ls.comparator),this.Sa=new Map,this.ba=new Uh,this.Da={},this.Ca=new Map,this.va=xh.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Zc(t,e){const n=function(t){const e=$i(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eu.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ru.bind(null,e),e.fa.c_=$c.bind(null,e.eventManager),e.fa.xa=zc.bind(null,e.eventManager),e}(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const t=await function(t,e){const n=$i(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Kr.getTargetData(t,e).next((i=>i?(r=i,vs.resolve(r)):n.Kr.allocateTargetId(t).next((i=>(r=new Ch(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Kr.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.rs.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.rs=n.rs.insert(t.targetId,t),n.ss.set(e,t.targetId)),t}))}(n.localStore,qo(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await async function(t,e,n,r,i){t.Ma=(e,n,r)=>async function(t,e,n,r){let i=e.view.ha(n);i.es&&(i=await ec(t.localStore,e.query,!1).then((({documents:t})=>e.view.ha(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return ou(t,e.targetId,o.Ea),o.snapshot}(t,e,n,r);const s=await ec(t.localStore,e,!0),o=new Wc(e,s.Ps),a=o.ha(s.documents),h=Ha.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,h);ou(t,n,c.Ea);const u=new Yc(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}(n,e,r,"current"===s,t.resumeToken),n.isPrimaryClient&&bc(n.remoteStore,t)}return i}async function tu(t,e){const n=$i(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((t=>!zo(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await tc(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Tc(n.remoteStore,r.targetId),iu(n,r.targetId)})).catch(ys)):(iu(n,r.targetId),await tc(n.localStore,r.targetId,!0))}async function eu(t,e){const n=$i(t);try{const t=await function(t,e){const n=$i(t),r=e.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const o=[];e.targetChanges.forEach(((s,a)=>{const h=i.get(a);if(!h)return;o.push(n.Kr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Kr.addMatchingKeys(t,s.addedDocuments,a))));let c=h.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?c=c.withResumeToken(xs.EMPTY_BYTE_STRING,os.min()).withLastLimboFreeSnapshotVersion(os.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(h,c,s)&&o.push(n.Kr.updateTargetData(t,c))}));let a=Jo(),h=oa();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n){let r=oa(),i=oa();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=Jo();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(os.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):Vi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{ls:r,hs:i}}))}(t,s,e.documentUpdates).next((t=>{a=t.ls,h=t.hs}))),!r.isEqual(os.min())){const e=n.Kr.getLastRemoteSnapshotVersion(t).next((e=>n.Kr.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return vs.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,h))).next((()=>a))})).then((t=>(n.rs=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Sa.get(e);r&&(ji(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.ma=!0:t.modifiedDocuments.size>0?ji(r.ma):t.removedDocuments.size>0&&(ji(r.ma),r.ma=!1))})),await cu(n,t,e)}catch(t){await ys(t)}}function nu(t,e,n){const r=$i(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=$i(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.U_(e)&&(r=!0)})),r&&Kc(n)}(r.eventManager,e),t.length&&r.fa.c_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ru(t,e,n){const r=$i(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let t=new Cs(ls.comparator);t=t.insert(s,oo.newNoDocument(s,os.min()));const n=oa().add(s),i=new Ga(os.min(),new Map,new Cs(rs),t,n);await eu(r,i),r.wa=r.wa.remove(s),r.Sa.delete(e),hu(r)}else await tc(r.localStore,e,!1).then((()=>iu(r,e,n))).catch(ys)}function iu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach((e=>{t.ba.containsKey(e)||su(t,e)}))}function su(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(Tc(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),hu(t))}function ou(t,e,n){for(const r of n)r instanceof Hc?(t.ba.addReference(r.key,e),au(t,r)):r instanceof Qc?(Vi("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||su(t,r.key)):qi()}function au(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(Vi("SyncEngine","New document in limbo: "+n),t.ya.add(r),hu(t))}function hu(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new ls(hs.fromString(e)),r=t.va.next();t.Sa.set(r,new Xc(n)),t.wa=t.wa.insert(n,r),bc(t.remoteStore,new Ch(qo(Mo(n.path)),r,"TargetPurposeLimboResolution",_s.ae))}}async function cu(t,e,n){const r=$i(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((t,a)=>{o.push(r.Ma(a,e,n).then((t=>{if((t||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){i.push(t);const e=Qh.$i(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.fa.c_(i),await async function(t,e){const n=$i(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>vs.forEach(e,(e=>vs.forEach(e.Qi,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>vs.forEach(e.Ki,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!ws(t))throw t;Vi("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.rs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.rs=n.rs.insert(e,i)}}}(r.localStore,s))}async function uu(t,e){const n=$i(t);if(!n.currentUser.isEqual(e)){Vi("SyncEngine","User change. New user:",e.toKey());const t=await Jh(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new Ki(zi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await cu(n,t.cs)}}function lu(t,e){const n=$i(t),r=n.Sa.get(e);if(r&&r.ma)return oa().add(r.key);{let t=oa();const r=n.pa.get(e);if(!r)return t;for(const e of r){const r=n.ga.get(e);t=t.unionWith(r.view.la)}return t}}class du{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=fc(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,r){return new Xh(t,e,n,r)}(this.persistence,new Yh,t.initialUser,this.serializer)}createPersistence(t){return new Kh(Hh.Jr,this.serializer)}createSharedClientState(t){return new rc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class fu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>nu(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=uu.bind(null,this.syncEngine),await async function(t,e){const n=$i(t);e?(n.F_.delete(2),await _c(n)):e||(n.F_.add(2),await Ec(n),n.O_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new jc}createDatastore(t){const e=fc(t.databaseInfo.databaseId),n=function(t){return new lc(t)}(t.databaseInfo);return function(t,e,n,r){return new yc(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new wc(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>nu(this.syncEngine,t,0)),sc.C()?new sc:new ic)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Jc(t,e,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=$i(t);Vi("RemoteStore","RemoteStore shutting down."),e.F_.add(5),await Ec(e),e.x_.shutdown(),e.O_.set("Unknown")}(this.remoteStore)}}class gu{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Fi("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class pu{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=xi.UNAUTHENTICATED,this.clientId=ns.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Vi("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Vi("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ki(zi.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Vc(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function mu(t,e){t.asyncQueue.verifyOperationInProgress(),Vi("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await Jh(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function yu(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Vi("FirestoreClient","Using user provided OfflineComponentProvider");try{await mu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===zi.FAILED_PRECONDITION||t.code===zi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Ui("Error using user provided cache. Falling back to memory cache: "+n),await mu(t,new du)}}else Vi("FirestoreClient","Using default OfflineComponentProvider"),await mu(t,new du);return t._offlineComponents}(t);Vi("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>Oc(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Oc(e.remoteStore,n))),t._onlineComponents=e}async function vu(t){const e=await async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Vi("FirestoreClient","Using user provided OnlineComponentProvider"),await yu(t,t._uninitializedComponentsProvider._online)):(Vi("FirestoreClient","Using default OnlineComponentProvider"),await yu(t,new fu))),t._onlineComponents}(t),n=e.eventManager;return n.onListen=Zc.bind(null,e.syncEngine),n.onUnlisten=tu.bind(null,e.syncEngine),n}function wu(t,e,n={}){const r=new Gi;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new gu({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=$i(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(t,o))),n.fromCache&&"server"===r.source?i.reject(new Ki(zi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Gc(n,s,{includeMetadataChanges:!0,Z_:!0});return async function(t,e){const n=$i(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new qc),i)try{s.Q_=await n.onListen(r)}catch(t){const n=Vc(t,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.U_(n.onlineState),s.Q_&&e.W_(s.Q_)&&Kc(n)}(t,o)}(await vu(t),t.asyncQueue,e,n,r))),r.promise}function _u(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Eu=new Map;function bu(t){if(ls.isDocumentKey(t))throw new Ki(zi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tu(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":qi()}function Iu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ki(zi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tu(t);throw new Ki(zi.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Su{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Ki(zi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ki(zi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new Ki(zi.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_u(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Ki(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Ki(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Ki(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Cu{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Su({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ki(zi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ki(zi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Su(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Qi;switch(t.type){case"firstParty":return new Ji(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ki(zi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Eu.get(t);e&&(Vi("ComponentProvider","Removing Datastore"),Eu.delete(t),e.terminate())}(this),Promise.resolve()}}class Au{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Au(this.firestore,t,this._query)}}class Du{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Du(this.firestore,t,this._key)}}class Nu extends Au{constructor(t,e,n){super(t,e,Mo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Du(this.firestore,null,new ls(t))}withConverter(t){return new Nu(this.firestore,t,this._path)}}function ku(t,e,...n){if(t=f(t),function(t,e,n){if(!n)throw new Ki(zi.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}("collection","path",e),t instanceof Cu){const r=hs.fromString(e,...n);return bu(r),new Nu(t,null,r)}{if(!(t instanceof Du||t instanceof Nu))throw new Ki(zi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(hs.fromString(e,...n));return bu(r),new Nu(t.firestore,null,r)}}class Ru{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new gc(this,"async_queue_retry"),this.ou=()=>{const t=dc();t&&Vi("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ho.$o()};const t=dc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this._u(),this.au(t)}enterRestrictedMode(t){if(!this.eu){this.eu=!0,this.iu=t||!1;const e=dc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.ou)}}enqueue(t){if(this._u(),this.eu)return new Promise((()=>{}));const e=new Gi;return this.au((()=>this.eu&&this.iu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xa.push(t),this.uu())))}async uu(){if(0!==this.Xa.length){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(t){if(!ws(t))throw t;Vi("AsyncQueue","Operation failed with retryable error: "+t)}this.Xa.length>0&&this.Ho.Qo((()=>this.uu()))}}au(t){const e=this.Za.then((()=>(this.ru=!0,t().catch((t=>{this.nu=t,this.ru=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Fi("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.ru=!1,t))))));return this.Za=e,e}enqueueAfterDelay(t,e,n){this._u(),this.su.indexOf(t)>-1&&(e=0);const r=Pc.createAndSchedule(this,t,e,n,(t=>this.cu(t)));return this.tu.push(r),r}_u(){this.nu&&qi()}verifyOperationInProgress(){}async lu(){let t;do{t=this.Za,await t}while(t!==this.Za)}hu(t){for(const e of this.tu)if(e.timerId===t)return!0;return!1}Pu(t){return this.lu().then((()=>{this.tu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.tu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.lu()}))}Iu(t){this.su.push(t)}cu(t){const e=this.tu.indexOf(t);this.tu.splice(e,1)}}class Lu extends Cu{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new Ru,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xu(this),this._firestoreClient.terminate()}}function xu(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new qs(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,_u(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new pu(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Ou{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ou(xs.fromBase64String(t))}catch(t){throw new Ki(zi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Ou(xs.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Mu{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ki(zi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new us(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Pu{constructor(t){this._methodName=t}}class Vu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ki(zi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ki(zi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return rs(this._lat,t._lat)||rs(this._long,t._long)}}const Fu=/^__.*__$/;function Uu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qi()}}class Bu{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.du(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(t){return new Bu(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Eu({path:n,Ru:!1});return r.Vu(t),r}mu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Eu({path:n,Ru:!1});return r.du(),r}fu(t){return this.Eu({path:void 0,Ru:!0})}gu(t){return Hu(t,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}du(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vu(this.path.get(t))}Vu(t){if(0===t.length)throw this.gu("Document fields must not be empty");if(Uu(this.Tu)&&Fu.test(t))throw this.gu('Document fields cannot begin and end with "__"')}}class qu{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||fc(t)}wu(t,e,n,r=!1){return new Bu({Tu:t,methodName:e,yu:n,path:us.emptyPath(),Ru:!1,pu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ju(t){const e=t._freezeSettings(),n=fc(t._databaseId);return new qu(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $u(t,e,n,r=!1){return zu(n,t.wu(r?4:3,e))}function zu(t,e){if(Ku(t=f(t)))return function(t,e,n){if(!Ku(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=Tu(n);throw"an object"===r?e.gu(t+" a custom object"):e.gu(t+" "+r)}}("Unsupported field value:",e,t),function(t,e){const n={};return Ss(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(t,((t,r)=>{const i=zu(r,e.Au(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}(t,e);if(t instanceof Pu)return function(t,e){if(!Uu(e.Tu))throw e.gu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.gu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ru&&4!==e.Tu)throw e.gu("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=zu(i,e.fu(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=f(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ua(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=ss.fromDate(t);return{timestampValue:oh(e.serializer,n)}}if(t instanceof ss){const n=new ss(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:oh(e.serializer,n)}}if(t instanceof Vu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ou)return{bytesValue:ah(e.serializer,t._byteString)};if(t instanceof Du){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.gu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ch(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.gu(`Unsupported field value: ${Tu(t)}`)}(t,e)}function Ku(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ss||t instanceof Vu||t instanceof Ou||t instanceof Du||t instanceof Pu)}const Gu=new RegExp("[~\\*/\\[\\]]");function Hu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let h="";return(s||o)&&(h+=" (found",s&&(h+=` in field ${r}`),o&&(h+=` in document ${i}`),h+=")"),new Ki(zi.INVALID_ARGUMENT,a+t+h)}class Qu{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Du(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Wu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Yu("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Wu extends Qu{data(){return super.data()}}function Yu(t,e){return"string"==typeof e?function(t,e,n){if(e.search(Gu)>=0)throw Hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mu(...e.split("."))._internalPath}catch(r){throw Hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e):e instanceof Mu?e._internalPath:e._delegate._internalPath}class Xu{}class Ju extends Xu{}function Zu(t,e,...n){let r=[];e instanceof Xu&&r.push(e),r=r.concat(n),function(t){const e=t.filter((t=>t instanceof nl)).length,n=t.filter((t=>t instanceof tl)).length;if(e>1||e>0&&n>0)throw new Ki(zi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const e of r)t=e._apply(t);return t}class tl extends Ju{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new tl(t,e,n)}_apply(t){const e=this._parse(t);return ll(t._query,e),new Au(t.firestore,t.converter,jo(t._query,e))}_parse(t){const e=ju(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ki(zi.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){ul(o,s);const e=[];for(const n of o)e.push(cl(r,t,n));a={arrayValue:{values:e}}}else a=cl(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ul(o,s),a=$u(n,"where",o,"in"===s||"not-in"===s);return go.create(i,s,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function el(t,e,n){const r=e,i=Yu("where",t);return tl._create(i,r,n)}class nl extends Xu{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new nl(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:po.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const r=e.getFlattenedFilters();for(const t of r)ll(n,t),n=jo(n,t)}(t._query,e),new Au(t.firestore,t.converter,jo(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rl extends Ju{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new rl(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Ki(zi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ki(zi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new uo(e,n);return function(t,e){if(null===Vo(t)){const n=Fo(t);null!==n&&dl(0,n,e.field)}}(t,r),r}(t._query,this._field,this._direction);return new Au(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Oo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function il(t,e="asc"){const n=e,r=Yu("orderBy",t);return rl._create(r,n)}class sl extends Ju{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new sl(t,e,n)}_apply(t){return new Au(t.firestore,t.converter,$o(t._query,this._limit,this._limitType))}}function ol(t){return function(t,e){if(e<=0)throw new Ki(zi.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}("limit",t),sl._create("limit",t,"F")}class al extends Ju{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new al(t,e,n)}_apply(t){const e=function(t,e,n,r){if(n[0]=f(n[0]),n[0]instanceof Qu)return function(t,e,n,r,i){if(!r)throw new Ki(zi.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of Bo(t))if(n.field.isKeyField())s.push(Xs(e,r.key));else{const t=r.data.field(n.field);if(Fs(t))throw new Ki(zi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=n.field.canonicalString();throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new ao(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=ju(t.firestore);return function(t,e,n,r,i,s){const o=t.explicitOrderBy;if(i.length>o.length)throw new Ki(zi.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const h=i[s];if(o[s].field.isKeyField()){if("string"!=typeof h)throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof h}`);if(!Uo(t)&&-1!==h.indexOf("/"))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${h}' contains a slash.`);const n=t.path.child(hs.fromString(h));if(!ls.isDocumentKey(n))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ls(n);a.push(Xs(e,i))}else{const t=$u(n,r,h);a.push(t)}}return new ao(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}}(t,this.type,this._docOrFields,this._inclusive);return new Au(t.firestore,t.converter,function(t,e){return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function hl(...t){return al._create("startAfter",t,!1)}function cl(t,e,n){if("string"==typeof(n=f(n))){if(""===n)throw new Ki(zi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uo(e)&&-1!==n.indexOf("/"))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(hs.fromString(n));if(!ls.isDocumentKey(r))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xs(t,new ls(r))}if(n instanceof Du)return Xs(t,n._key);throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tu(n)}.`)}function ul(t,e){if(!Array.isArray(t)||0===t.length)throw new Ki(zi.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ll(t,e){if(e.isInequality()){const n=Fo(t),r=e.field;if(null!==n&&!n.isEqual(r))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=Vo(t);null!==i&&dl(0,r,i)}const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Ki(zi.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ki(zi.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function dl(t,e,n){if(!n.isEqual(e))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class fl{convertValue(t,e="none"){switch(zs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ps(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw qi()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Is(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Vu(Ps(t.latitude),Ps(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Us(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Bs(t));default:return null}}convertTimestamp(t){const e=Ms(t);return new ss(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=hs.fromString(t);ji(Sh(n));const r=new js(n.get(1),n.get(3)),i=new ls(n.popFirst(5));return r.isEqual(e)||Fi(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}class gl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class pl extends Qu{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Yu("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class ml extends pl{data(t={}){return super.data(t)}}class yl{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new gl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new ml(this._firestore,this._userDataWriter,n.key,n,new gl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ki(zi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new ml(t._firestore,t._userDataWriter,n.doc.key,n.doc,new gl(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new ml(t._firestore,t._userDataWriter,e.doc.key,e.doc,new gl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:vl(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vl(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qi()}}class wl extends fl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ou(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Du(this.firestore,null,e)}}function _l(t){t=Iu(t,Au);const e=Iu(t.firestore,Lu),n=function(t){return t._firestoreClient||xu(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(e),r=new wl(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Ki(zi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),wu(n,t._query).then((n=>new yl(e,r,t,n)))}new WeakMap,function(t,e=!0){Oi="10.4.0",J(new g("firestore",((t,{instanceIdentifier:n,options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Lu(new Yi(t.getProvider("auth-internal")),new ts(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ki(zi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new js(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),nt(Li,"4.2.0",t),nt(Li,"4.2.0","esm2017")}(),nt("firebase","10.4.0","app");const El=function(t,e){const n="string"==typeof t?t:"(default)",r=function(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}("object"==typeof t?t:function(t=H){const e=W.get(t);if(!e&&t===H&&o())return et();if(!e)throw Z.create("no-app",{appName:t});return e}(),"firestore").getImmediate({identifier:n});if(!r._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=s())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");t&&function(t,e,n,r={}){var s;const o=(t=Iu(t,Cu))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&Ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=xi.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i(JSON.stringify({alg:"none",type:"JWT"})),i(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Ki(zi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new xi(o)}t._authCredentials=new Wi(new Hi(e,n))}}(r,...t)}return r}(et({apiKey:"AIzaSyDtEkRwxjahEQUlY6FzBMCvmlCPAhCQiiA",authDomain:"the-aggregator-test.firebaseapp.com",projectId:"the-aggregator-test",storageBucket:"the-aggregator-test.appspot.com",messagingSenderId:"935577100983",appId:"1:935577100983:web:6aba1d3741f773010ce332"})),bl=(()=>{function t(t){return t?t.docs[t.docs.length-1]:null}return{getHomeQuery:function(e,n=null){const r=ku(e,"all-items"),i=t(n);let s=Zu(r,il("timestamp","desc"),ol(10));return i&&(s=Zu(r,il("timestamp","desc"),ol(10),hl(i))),_l(s)},getCategoryQuery:function(e,n,r=null){const i=ku(e,"all-items"),s=t(r);let o=Zu(i,il("timestamp","desc"),ol(10),el("category","==",n));return s&&(o=Zu(i,il("timestamp","desc"),ol(10),el("category","==",n),hl(s))),_l(o)}}})();bl.getCategoryQuery(El,"ai",null).then((t=>(console.log("First: "),t.forEach((t=>console.log(t.data().title))),bl.getCategoryQuery(El,"ai",t)))).then((t=>{console.log("Second: "),t.forEach((t=>console.log(t.data().title)))})).catch((t=>console.error(t)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0YxdEQsRUFBSStrQyxHQUNGMG9CLEVBQ0F2OUIsR0FBUSxZQUFhLFFBQ3JCL08sR0FBTSxJQUNOd2MsR0FBTSxXQUFZLEtBQU1pd0IsR0FDeEJqRSxHQUFXK0QsS0FJUnRDLEdBQVFwckQsRUFDakIsRUFNRCxFQXBEZ0IsR0FzRGpCMnNELEdBQ0dnQixpQkFBaUJwQyxHQUFRLEtBQU0sTUFDL0JuMEQsTUFBTW0yRCxJQUNMemlFLFFBQVFxSixJQUFJLFdBQ1pvNUQsRUFBY2ovQyxTQUFTeTlCLEdBQVFqaEQsUUFBUXFKLElBQUk0M0MsRUFBSW4vQyxPQUFPaWhFLFNBQy9DbEIsR0FBU2dCLGlCQUFpQnBDLEdBQVEsS0FBTWdDLE1BRWhEbjJELE1BQU1tMkQsSUFDTHppRSxRQUFRcUosSUFBSSxZQUNabzVELEVBQWNqL0MsU0FBU3k5QixHQUFRamhELFFBQVFxSixJQUFJNDNDLEVBQUluL0MsT0FBT2loRSxRQUFPLElBRTlEL2hFLE9BQU9mLEdBQVVELFFBQVFDLE1BQU1BIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3Ivd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2luZGV4LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL3NyYy9maXJlYmFzZS10ZXN0LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vc3JjL2xvZ2ljLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBBbiBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBkZWNvZGluZyBiYXNlNjQgc3RyaW5nLlxyXG4gKi9cclxuY2xhc3MgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcic7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuLyoqXHJcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cclxuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfXyBvciBhIEpTT04gZmlsZSB3aG9zZSBwYXRoIGlzIGluXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX1BBVEhfX1xyXG4gKiBUaGUgZG90cyBhcmUgaW4gcGFyZW5zIGJlY2F1c2UgY2VydGFpbiBjb21waWxlcnMgKFZpdGU/KSBjYW5ub3RcclxuICogaGFuZGxlIHNlZWluZyB0aGF0IHZhcmlhYmxlIGluIGNvbW1lbnRzLlxyXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjgzOFxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWZhdWx0c0pzb25TdHJpbmcgPSBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcclxuICAgICAgICAvLyBgZG9jdW1lbnRgIG9iamVjdCBidXQgZXJyb3Igb24gYWNjZXNzaW5nIGBkb2N1bWVudC5jb29raWVgLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZWQgPSBtYXRjaCAmJiBiYXNlNjREZWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcclxufTtcclxuLyoqXHJcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxyXG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXHJcbiAqICgyKSBpZiBzdWNoIGFuIG9iamVjdCB3YXMgcHJvdmlkZWQgb24gYSBzaGVsbCBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKGdldERlZmF1bHRzRnJvbUdsb2JhbCgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tQ29va2llKCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXRjaC1hbGwgZm9yIGJlaW5nIHVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZVxyXG4gICAgICAgICAqIHRvIGFueSBlbnZpcm9ubWVudCBjYXNlIHdlIGhhdmUgbm90IGFjY291bnRlZCBmb3IuIExvZyB0b1xyXG4gICAgICAgICAqIGluZm8gaW5zdGVhZCBvZiBzd2FsbG93aW5nIHNvIHdlIGNhbiBmaW5kIHRoZXNlIHVua25vd24gY2FzZXNcclxuICAgICAgICAgKiBhbmQgYWRkIHBhdGhzIGZvciB0aGVtIGlmIG5lZWRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zb2xlLmluZm8oYFVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZSB0bzogJHtlfWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIFVSTCBob3N0IGZvcm1hdHRlZCBsaWtlIGAxMjcuMC4wLjE6OTk5OWAgb3IgYFs6OjFdOjQwMDBgIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0ID0gKHByb2R1Y3ROYW1lKSA9PiB7IHZhciBfYSwgX2I7IHJldHVybiAoX2IgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW11bGF0b3JIb3N0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW3Byb2R1Y3ROYW1lXTsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdG5hbWUgYW5kIHBvcnQgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBwYWlyIG9mIGhvc3RuYW1lIGFuZCBwb3J0IGxpa2UgYFtcIjo6MVwiLCA0MDAwXWAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCA9IChwcm9kdWN0TmFtZSkgPT4ge1xyXG4gICAgY29uc3QgaG9zdCA9IGdldERlZmF1bHRFbXVsYXRvckhvc3QocHJvZHVjdE5hbWUpO1xyXG4gICAgaWYgKCFob3N0KSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gaG9zdC5sYXN0SW5kZXhPZignOicpOyAvLyBGaW5kaW5nIHRoZSBsYXN0IHNpbmNlIElQdjYgYWRkciBhbHNvIGhhcyBjb2xvbnMuXHJcbiAgICBpZiAoc2VwYXJhdG9ySW5kZXggPD0gMCB8fCBzZXBhcmF0b3JJbmRleCArIDEgPT09IGhvc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhvc3QgJHtob3N0fSB3aXRoIG5vIHNlcGFyYXRlIGhvc3RuYW1lIGFuZCBwb3J0IWApO1xyXG4gICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xyXG4gICAgY29uc3QgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSksIDEwKTtcclxuICAgIGlmIChob3N0WzBdID09PSAnWycpIHtcclxuICAgICAgICAvLyBCcmFja2V0LXF1b3RlZCBgW2lwdjZhZGRyXTpwb3J0YCA9PiByZXR1cm4gXCJpcHY2YWRkclwiICh3aXRob3V0IGJyYWNrZXRzKS5cclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDEsIHNlcGFyYXRvckluZGV4IC0gMSksIHBvcnRdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCksIHBvcnRdO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBGaXJlYmFzZSBhcHAgY29uZmlnIHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEFwcENvbmZpZyA9ICgpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbmZpZzsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gZXhwZXJpbWVudGFsIHNldHRpbmcgb24gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QgKHByb3BlcnRpZXNcclxuICogcHJlZml4ZWQgYnkgXCJfXCIpXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldEV4cGVyaW1lbnRhbFNldHRpbmcgPSAobmFtZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbYF8ke25hbWV9YF07IH07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZCBvciBzcGVjaWZpZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZm9yY2VFbnZpcm9ubWVudCA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JjZUVudmlyb25tZW50O1xyXG4gICAgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdub2RlJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ2Jyb3dzZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIvc3cgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICpcclxuICogQHRocm93cyBleGNlcHRpb24gaWYgY3VycmVudCBicm93c2VyL3N3IGNvbnRleHQgY2FuJ3QgcnVuIGlkYi5vcGVuIChleDogU2FmYXJpIGlmcmFtZSwgRmlyZWZveFxyXG4gKiBwcml2YXRlIGJyb3dzaW5nKVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHByZUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjb2RlLCBtZXNzYWdlLCBcclxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmViYXNlRXJyb3JzLiAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlamVjdHMgaWYgdGhlIGdpdmVuIHByb21pc2UgZG9lc24ndCByZXNvbHZlIGluIHRpbWVJbk1TIG1pbGxpc2Vjb25kcy5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9taXNlV2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZUluTVMgPSAyMDAwKSB7XHJcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gZGVmZXJyZWRQcm9taXNlLnJlamVjdCgndGltZW91dCEnKSwgdGltZUluTVMpO1xyXG4gICAgcHJvbWlzZS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLCBkZWZlcnJlZFByb21pc2UucmVqZWN0KTtcclxuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvcGllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyB1dWlkLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCB1dWlkdjQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcclxuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldERlZmF1bHRBcHBDb25maWcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0RGVmYXVsdHMsIGdldEV4cGVyaW1lbnRhbFNldHRpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcHJvbWlzZVdpdGhUaW1lb3V0LCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdXVpZHY0LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbmNvbnN0IGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICovXHJcbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XHJcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcclxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxyXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsb2dUeXBlLCAuLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0xldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgIH1cclxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgXCIke3ZhbH1cIiBhc3NpZ25lZCB0byBcXGBsb2dMZXZlbFxcYGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIGRlYnVnKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpbmZvKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xyXG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUxvZ0xldmVsID0gbGV2ZWxTdHJpbmdUb0VudW1bb3B0aW9ucy5sZXZlbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbGV2ZWwsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImNvbnN0IGluc3RhbmNlT2ZBbnkgPSAob2JqZWN0LCBjb25zdHJ1Y3RvcnMpID0+IGNvbnN0cnVjdG9ycy5zb21lKChjKSA9PiBvYmplY3QgaW5zdGFuY2VvZiBjKTtcblxubGV0IGlkYlByb3h5YWJsZVR5cGVzO1xubGV0IGN1cnNvckFkdmFuY2VNZXRob2RzO1xuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRJZGJQcm94eWFibGVUeXBlcygpIHtcbiAgICByZXR1cm4gKGlkYlByb3h5YWJsZVR5cGVzIHx8XG4gICAgICAgIChpZGJQcm94eWFibGVUeXBlcyA9IFtcbiAgICAgICAgICAgIElEQkRhdGFiYXNlLFxuICAgICAgICAgICAgSURCT2JqZWN0U3RvcmUsXG4gICAgICAgICAgICBJREJJbmRleCxcbiAgICAgICAgICAgIElEQkN1cnNvcixcbiAgICAgICAgICAgIElEQlRyYW5zYWN0aW9uLFxuICAgICAgICBdKSk7XG59XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkge1xuICAgIHJldHVybiAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgfHxcbiAgICAgICAgKGN1cnNvckFkdmFuY2VNZXRob2RzID0gW1xuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5hZHZhbmNlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWVQcmltYXJ5S2V5LFxuICAgICAgICBdKSk7XG59XG5jb25zdCBjdXJzb3JSZXF1ZXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uRG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSh3cmFwKHJlcXVlc3QucmVzdWx0KSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHByb21pc2VcbiAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIFNpbmNlIGN1cnNvcmluZyByZXVzZXMgdGhlIElEQlJlcXVlc3QgKCpzaWdoKiksIHdlIGNhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWxcbiAgICAgICAgLy8gKHNlZSB3cmFwRnVuY3Rpb24pLlxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJDdXJzb3IpIHtcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3RNYXAuc2V0KHZhbHVlLCByZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYXRjaGluZyB0byBhdm9pZCBcIlVuY2F1Z2h0IFByb21pc2UgZXhjZXB0aW9uc1wiXG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgLy8gVGhpcyBtYXBwaW5nIGV4aXN0cyBpbiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYnV0IGRvZXNuJ3QgZG9lc24ndCBleGlzdCBpbiB0cmFuc2Zvcm1DYWNoZS4gVGhpc1xuICAgIC8vIGlzIGJlY2F1c2Ugd2UgY3JlYXRlIG1hbnkgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0LlxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJvbWlzZSwgcmVxdWVzdCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odHgpIHtcbiAgICAvLyBFYXJseSBiYWlsIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCBhIGRvbmUgcHJvbWlzZSBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICBpZiAodHJhbnNhY3Rpb25Eb25lTWFwLmhhcyh0eCkpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBkb25lID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh0eC5lcnJvciB8fCBuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydEVycm9yJywgJ0Fib3J0RXJyb3InKSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIC8vIENhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWwuXG4gICAgdHJhbnNhY3Rpb25Eb25lTWFwLnNldCh0eCwgZG9uZSk7XG59XG5sZXQgaWRiUHJveHlUcmFwcyA9IHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyYW5zYWN0aW9uLmRvbmUuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RvbmUnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkRvbmVNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICAvLyBQb2x5ZmlsbCBmb3Igb2JqZWN0U3RvcmVOYW1lcyBiZWNhdXNlIG9mIEVkZ2UuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ29iamVjdFN0b3JlTmFtZXMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5vYmplY3RTdG9yZU5hbWVzIHx8IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1ha2UgdHguc3RvcmUgcmV0dXJuIHRoZSBvbmx5IHN0b3JlIGluIHRoZSB0cmFuc2FjdGlvbiwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBtYW55LlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdzdG9yZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1sxXVxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IHJlY2VpdmVyLm9iamVjdFN0b3JlKHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgdHJhbnNmb3JtIHdoYXRldmVyIHdlIGdldCBiYWNrLlxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXRbcHJvcF0pO1xuICAgIH0sXG4gICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaGFzKHRhcmdldCwgcHJvcCkge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24gJiZcbiAgICAgICAgICAgIChwcm9wID09PSAnZG9uZScgfHwgcHJvcCA9PT0gJ3N0b3JlJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wIGluIHRhcmdldDtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIHJlcGxhY2VUcmFwcyhjYWxsYmFjaykge1xuICAgIGlkYlByb3h5VHJhcHMgPSBjYWxsYmFjayhpZGJQcm94eVRyYXBzKTtcbn1cbmZ1bmN0aW9uIHdyYXBGdW5jdGlvbihmdW5jKSB7XG4gICAgLy8gRHVlIHRvIGV4cGVjdGVkIG9iamVjdCBlcXVhbGl0eSAod2hpY2ggaXMgZW5mb3JjZWQgYnkgdGhlIGNhY2hpbmcgaW4gYHdyYXBgKSwgd2VcbiAgICAvLyBvbmx5IGNyZWF0ZSBvbmUgbmV3IGZ1bmMgcGVyIGZ1bmMuXG4gICAgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgb2JqZWN0U3RvcmVOYW1lcyAoYm9vbyksIHNvIHdlIHBvbHlmaWxsIGl0IGhlcmUuXG4gICAgaWYgKGZ1bmMgPT09IElEQkRhdGFiYXNlLnByb3RvdHlwZS50cmFuc2FjdGlvbiAmJlxuICAgICAgICAhKCdvYmplY3RTdG9yZU5hbWVzJyBpbiBJREJUcmFuc2FjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RvcmVOYW1lcywgLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3QgdHggPSBmdW5jLmNhbGwodW53cmFwKHRoaXMpLCBzdG9yZU5hbWVzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5zZXQodHgsIHN0b3JlTmFtZXMuc29ydCA/IHN0b3JlTmFtZXMuc29ydCgpIDogW3N0b3JlTmFtZXNdKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKHR4KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ3Vyc29yIG1ldGhvZHMgYXJlIHNwZWNpYWwsIGFzIHRoZSBiZWhhdmlvdXIgaXMgYSBsaXR0bGUgbW9yZSBkaWZmZXJlbnQgdG8gc3RhbmRhcmQgSURCLiBJblxuICAgIC8vIElEQiwgeW91IGFkdmFuY2UgdGhlIGN1cnNvciBhbmQgd2FpdCBmb3IgYSBuZXcgJ3N1Y2Nlc3MnIG9uIHRoZSBJREJSZXF1ZXN0IHRoYXQgZ2F2ZSB5b3UgdGhlXG4gICAgLy8gY3Vyc29yLiBJdCdzIGtpbmRhIGxpa2UgYSBwcm9taXNlIHRoYXQgY2FuIHJlc29sdmUgd2l0aCBtYW55IHZhbHVlcy4gVGhhdCBkb2Vzbid0IG1ha2Ugc2Vuc2VcbiAgICAvLyB3aXRoIHJlYWwgcHJvbWlzZXMsIHNvIGVhY2ggYWR2YW5jZSBtZXRob2RzIHJldHVybnMgYSBuZXcgcHJvbWlzZSBmb3IgdGhlIGN1cnNvciBvYmplY3QsIG9yXG4gICAgLy8gdW5kZWZpbmVkIGlmIHRoZSBlbmQgb2YgdGhlIGN1cnNvciBoYXMgYmVlbiByZWFjaGVkLlxuICAgIGlmIChnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpLmluY2x1ZGVzKGZ1bmMpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKGN1cnNvclJlcXVlc3RNYXAuZ2V0KHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24odmFsdWUpO1xuICAgIC8vIFRoaXMgZG9lc24ndCByZXR1cm4sIGl0IGp1c3QgY3JlYXRlcyBhICdkb25lJyBwcm9taXNlIGZvciB0aGUgdHJhbnNhY3Rpb24sXG4gICAgLy8gd2hpY2ggaXMgbGF0ZXIgcmV0dXJuZWQgZm9yIHRyYW5zYWN0aW9uLmRvbmUgKHNlZSBpZGJPYmplY3RIYW5kbGVyKS5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbilcbiAgICAgICAgY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHZhbHVlKTtcbiAgICBpZiAoaW5zdGFuY2VPZkFueSh2YWx1ZSwgZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSkpXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodmFsdWUsIGlkYlByb3h5VHJhcHMpO1xuICAgIC8vIFJldHVybiB0aGUgc2FtZSB2YWx1ZSBiYWNrIGlmIHdlJ3JlIG5vdCBnb2luZyB0byB0cmFuc2Zvcm0gaXQuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gd3JhcCh2YWx1ZSkge1xuICAgIC8vIFdlIHNvbWV0aW1lcyBnZW5lcmF0ZSBtdWx0aXBsZSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QgKGVnIHdoZW4gY3Vyc29yaW5nKSwgYmVjYXVzZVxuICAgIC8vIElEQiBpcyB3ZWlyZCBhbmQgYSBzaW5nbGUgSURCUmVxdWVzdCBjYW4geWllbGQgbWFueSByZXNwb25zZXMsIHNvIHRoZXNlIGNhbid0IGJlIGNhY2hlZC5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJSZXF1ZXN0KVxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdCh2YWx1ZSk7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSB0cmFuc2Zvcm1lZCB0aGlzIHZhbHVlIGJlZm9yZSwgcmV1c2UgdGhlIHRyYW5zZm9ybWVkIHZhbHVlLlxuICAgIC8vIFRoaXMgaXMgZmFzdGVyLCBidXQgaXQgYWxzbyBwcm92aWRlcyBvYmplY3QgZXF1YWxpdHkuXG4gICAgaWYgKHRyYW5zZm9ybUNhY2hlLmhhcyh2YWx1ZSkpXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSk7XG4gICAgLy8gTm90IGFsbCB0eXBlcyBhcmUgdHJhbnNmb3JtZWQuXG4gICAgLy8gVGhlc2UgbWF5IGJlIHByaW1pdGl2ZSB0eXBlcywgc28gdGhleSBjYW4ndCBiZSBXZWFrTWFwIGtleXMuXG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICB0cmFuc2Zvcm1DYWNoZS5zZXQodmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChuZXdWYWx1ZSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3VmFsdWU7XG59XG5jb25zdCB1bndyYXAgPSAodmFsdWUpID0+IHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuXG5leHBvcnQgeyByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYXMgYSwgaW5zdGFuY2VPZkFueSBhcyBpLCByZXBsYWNlVHJhcHMgYXMgciwgdW53cmFwIGFzIHUsIHdyYXAgYXMgdyB9O1xuIiwiaW1wb3J0IHsgdyBhcyB3cmFwLCByIGFzIHJlcGxhY2VUcmFwcyB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuZXhwb3J0IHsgdSBhcyB1bndyYXAsIHcgYXMgd3JhcCB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuXG4vKipcbiAqIE9wZW4gYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEBwYXJhbSB2ZXJzaW9uIFNjaGVtYSB2ZXJzaW9uLlxuICogQHBhcmFtIGNhbGxiYWNrcyBBZGRpdGlvbmFsIGNhbGxiYWNrcy5cbiAqL1xuZnVuY3Rpb24gb3BlbkRCKG5hbWUsIHZlcnNpb24sIHsgYmxvY2tlZCwgdXBncmFkZSwgYmxvY2tpbmcsIHRlcm1pbmF0ZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xuICAgIGNvbnN0IG9wZW5Qcm9taXNlID0gd3JhcChyZXF1ZXN0KTtcbiAgICBpZiAodXBncmFkZSkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHVwZ3JhZGUod3JhcChyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIHdyYXAocmVxdWVzdC50cmFuc2FjdGlvbiksIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICBvcGVuUHJvbWlzZVxuICAgICAgICAudGhlbigoZGIpID0+IHtcbiAgICAgICAgaWYgKHRlcm1pbmF0ZWQpXG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHRlcm1pbmF0ZWQoKSk7XG4gICAgICAgIGlmIChibG9ja2luZykge1xuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsIChldmVudCkgPT4gYmxvY2tpbmcoZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG5yZXBsYWNlVHJhcHMoKG9sZFRyYXBzKSA9PiAoe1xuICAgIC4uLm9sZFRyYXBzLFxuICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSxcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXG59KSk7XG5cbmV4cG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGdldERlZmF1bHRBcHBDb25maWcsIGRlZXBFcXVhbCwgRmlyZWJhc2VFcnJvciwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBDb21wb25lbnRUeXBlLlZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuOS4xOVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIxMC40LjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICBjb25zdCBoZWFydGJlYXRDb250cm9sbGVyID0gYXBwLmNvbnRhaW5lclxyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcclxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0Q29udHJvbGxlcikge1xyXG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIGluaXRpYWxpemVBcHAoKSBmaXJzdCcsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBBcHBFcnJvci5CQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovXTogJ05lZWQgdG8gcHJvdmlkZSBvcHRpb25zLCB3aGVuIG5vdCBiZWluZyBkZXBsb3llZCB0byBob3N0aW5nIHZpYSBzb3VyY2UuJyxcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nLFxyXG4gICAgW1wiaWRiLW9wZW5cIiAvKiBBcHBFcnJvci5JREJfT1BFTiAqL106ICdFcnJvciB0aHJvd24gd2hlbiBvcGVuaW5nIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqL106ICdFcnJvciB0aHJvd24gd2hlbiByZWFkaW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gd3JpdGluZyB0byBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWRlbGV0ZVwiIC8qIEFwcEVycm9yLklEQl9ERUxFVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gZGVsZXRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogQ29tcG9uZW50VHlwZS5QVUJMSUMgKi8pKTtcclxuICAgIH1cclxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBnZXQgY29uZmlnKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRGVsZXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGlzRGVsZXRlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChfb3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGxldCBvcHRpb25zID0gX29wdGlvbnM7XHJcbiAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zdCBuYW1lID0gcmF3Q29uZmlnO1xyXG4gICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZSB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7IG5hbWU6IERFRkFVTFRfRU5UUllfTkFNRSwgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOiBmYWxzZSB9LCByYXdDb25maWcpO1xyXG4gICAgY29uc3QgbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IGdldERlZmF1bHRBcHBDb25maWcoKSk7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBleGlzdGluZyBhcHAgaWYgb3B0aW9ucyBhbmQgY29uZmlnIGRlZXAgZXF1YWwgdGhlIG9uZXMgaW4gdGhlIGV4aXN0aW5nIGFwcC5cclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGRlZXBFcXVhbChjb25maWcsIGV4aXN0aW5nQXBwLmNvbmZpZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZSk7XHJcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xyXG4gICAgX2FwcHMuc2V0KG5hbWUsIG5ld0FwcCk7XHJcbiAgICByZXR1cm4gbmV3QXBwO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcclxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxyXG4gKiBpbml0aWFsaXplZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXHJcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcclxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xyXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXHJcbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmICghYXBwICYmIG5hbWUgPT09IERFRkFVTFRfRU5UUllfTkFNRSAmJiBnZXREZWZhdWx0QXBwQ29uZmlnKCkpIHtcclxuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IFNUT1JFX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1vcGVuXCIgLyogQXBwRXJyb3IuSURCX09QRU4gKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGJQcm9taXNlO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQihhcHApIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxyXG4gICAgICAgICAgICAudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpXHJcbiAgICAgICAgICAgIC5nZXQoY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIoYXBwLCBoZWFydGJlYXRPYmplY3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dChoZWFydGJlYXRPYmplY3QsIGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29tcHV0ZUtleShhcHApIHtcclxuICAgIHJldHVybiBgJHthcHAubmFtZX0hJHthcHAub3B0aW9ucy5hcHBJZH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE1BWF9IRUFERVJfQllURVMgPSAxMDI0O1xyXG4vLyAzMCBkYXlzXHJcbmNvbnN0IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVMgPSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbmNsYXNzIEhlYXJ0YmVhdFNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluLW1lbW9yeSBjYWNoZSBmb3IgaGVhcnRiZWF0cywgdXNlZCBieSBnZXRIZWFydGJlYXRzSGVhZGVyKCkgdG8gZ2VuZXJhdGVcclxuICAgICAgICAgKiB0aGUgaGVhZGVyIHN0cmluZy5cclxuICAgICAgICAgKiBTdG9yZXMgb25lIHJlY29yZCBwZXIgZGF0ZS4gVGhpcyB3aWxsIGJlIGNvbnNvbGlkYXRlZCBpbnRvIHRoZSBzdGFuZGFyZFxyXG4gICAgICAgICAqIGZvcm1hdCBvZiBvbmUgcmVjb3JkIHBlciB1c2VyIGFnZW50IHN0cmluZyBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIGhlYWRlci5cclxuICAgICAgICAgKiBQb3B1bGF0ZWQgZnJvbSBpbmRleGVkREIgd2hlbiB0aGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZFxyXG4gICAgICAgICAqIGJlIGtlcHQgaW4gc3luYyB3aXRoIGluZGV4ZWREQi5cclxuICAgICAgICAgKiBMZWF2ZSBwdWJsaWMgZm9yIGVhc2llciB0ZXN0aW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBuZXcgSGVhcnRiZWF0U3RvcmFnZUltcGwoYXBwKTtcclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlID0gdGhpcy5fc3RvcmFnZS5yZWFkKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB0byByZXBvcnQgYSBoZWFydGJlYXQuIFRoZSBmdW5jdGlvbiB3aWxsIGdlbmVyYXRlXHJcbiAgICAgKiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBvYmplY3QsIHVwZGF0ZSBoZWFydGJlYXRzQ2FjaGUsIGFuZCBwZXJzaXN0IGl0XHJcbiAgICAgKiB0byBJbmRleGVkREIuXHJcbiAgICAgKiBOb3RlIHRoYXQgd2Ugb25seSBzdG9yZSBvbmUgaGVhcnRiZWF0IHBlciBkYXkuIFNvIGlmIGEgaGVhcnRiZWF0IGZvciB0b2RheSBpc1xyXG4gICAgICogYWxyZWFkeSBsb2dnZWQsIHN1YnNlcXVlbnQgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbiBpbiB0aGUgc2FtZSBkYXkgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyB0cmlnZ2VySGVhcnRiZWF0KCkge1xyXG4gICAgICAgIGNvbnN0IHBsYXRmb3JtTG9nZ2VyID0gdGhpcy5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVyKCdwbGF0Zm9ybS1sb2dnZXInKVxyXG4gICAgICAgICAgICAuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgXCJGaXJlYmFzZSB1c2VyIGFnZW50XCIgc3RyaW5nIGZyb20gdGhlIHBsYXRmb3JtIGxvZ2dlclxyXG4gICAgICAgIC8vIHNlcnZpY2UsIG5vdCB0aGUgYnJvd3NlciB1c2VyIGFnZW50LlxyXG4gICAgICAgIGNvbnN0IGFnZW50ID0gcGxhdGZvcm1Mb2dnZXIuZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IGF3YWl0IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvIG5vdCBzdG9yZSBhIGhlYXJ0YmVhdCBpZiBvbmUgaXMgYWxyZWFkeSBzdG9yZWQgZm9yIHRoaXMgZGF5XHJcbiAgICAgICAgLy8gb3IgaWYgYSBoZWFkZXIgaGFzIGFscmVhZHkgYmVlbiBzZW50IHRvZGF5LlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID09PSBkYXRlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnNvbWUoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiBzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUgPT09IGRhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIGRhdGUuIENyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnB1c2goeyBkYXRlLCBhZ2VudCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGVudHJpZXMgb2xkZXIgdGhhbiAzMCBkYXlzLlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuZmlsdGVyKHNpbmdsZURhdGVIZWFydGJlYXQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYlRpbWVzdGFtcCA9IG5ldyBEYXRlKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSkudmFsdWVPZigpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm93IC0gaGJUaW1lc3RhbXAgPD0gU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB3aGljaCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIGhlYXJ0YmVhdC1zcGVjaWZpYyBoZWFkZXIgZGlyZWN0bHkuXHJcbiAgICAgKiBJdCBhbHNvIGNsZWFycyBhbGwgaGVhcnRiZWF0cyBmcm9tIG1lbW9yeSBhcyB3ZWxsIGFzIGluIEluZGV4ZWREQi5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDb25zdW1pbmcgcHJvZHVjdCBTREtzIHNob3VsZCBub3Qgc2VuZCB0aGUgaGVhZGVyIGlmIHRoaXMgbWV0aG9kXHJcbiAgICAgKiByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIGl0J3Mgc3RpbGwgbnVsbCBvciB0aGUgYXJyYXkgaXMgZW1wdHksIHRoZXJlIGlzIG5vIGRhdGEgdG8gc2VuZC5cclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgLy8gRXh0cmFjdCBhcyBtYW55IGhlYXJ0YmVhdHMgZnJvbSB0aGUgY2FjaGUgYXMgd2lsbCBmaXQgdW5kZXIgdGhlIHNpemUgbGltaXQuXHJcbiAgICAgICAgY29uc3QgeyBoZWFydGJlYXRzVG9TZW5kLCB1bnNlbnRFbnRyaWVzIH0gPSBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcih0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyU3RyaW5nID0gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzVG9TZW5kIH0pKTtcclxuICAgICAgICAvLyBTdG9yZSBsYXN0IHNlbnQgZGF0ZSB0byBwcmV2ZW50IGFub3RoZXIgYmVpbmcgbG9nZ2VkL3NlbnQgZm9yIHRoZSBzYW1lIGRheS5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID0gZGF0ZTtcclxuICAgICAgICBpZiAodW5zZW50RW50cmllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGFueSB1bnNlbnQgZW50cmllcyBpZiB0aGV5IGV4aXN0LlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHVuc2VudEVudHJpZXM7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgbW9yZSBsaWtlbHkgdGhhbiBlbXB0eWluZyB0aGUgYXJyYXkgKGJlbG93KSB0byBsZWFkIHRvIHNvbWUgb2RkIHN0YXRlXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBjYWNoZSBpc24ndCBlbXB0eSBhbmQgdGhpcyB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBvbiB0aGUgbmV4dCByZXF1ZXN0LFxyXG4gICAgICAgICAgICAvLyBhbmQgaXMgcHJvYmFibHkgc2FmZXN0IGlmIHdlIGF3YWl0IGl0LlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHdhaXQgZm9yIHRoaXMsIHRvIHJlZHVjZSBsYXRlbmN5LlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJTdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0VVRDRGF0ZVN0cmluZygpIHtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIC8vIFJldHVybnMgZGF0ZSBmb3JtYXQgJ1lZWVktTU0tREQnXHJcbiAgICByZXR1cm4gdG9kYXkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKGhlYXJ0YmVhdHNDYWNoZSwgbWF4U2l6ZSA9IE1BWF9IRUFERVJfQllURVMpIHtcclxuICAgIC8vIEhlYXJ0YmVhdHMgZ3JvdXBlZCBieSB1c2VyIGFnZW50IGluIHRoZSBzdGFuZGFyZCBmb3JtYXQgdG8gYmUgc2VudCBpblxyXG4gICAgLy8gdGhlIGhlYWRlci5cclxuICAgIGNvbnN0IGhlYXJ0YmVhdHNUb1NlbmQgPSBbXTtcclxuICAgIC8vIFNpbmdsZSBkYXRlIGZvcm1hdCBoZWFydGJlYXRzIHRoYXQgYXJlIG5vdCBzZW50LlxyXG4gICAgbGV0IHVuc2VudEVudHJpZXMgPSBoZWFydGJlYXRzQ2FjaGUuc2xpY2UoKTtcclxuICAgIGZvciAoY29uc3Qgc2luZ2xlRGF0ZUhlYXJ0YmVhdCBvZiBoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgICAgICAvLyBMb29rIGZvciBhbiBleGlzdGluZyBlbnRyeSB3aXRoIHRoZSBzYW1lIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RW50cnkgPSBoZWFydGJlYXRzVG9TZW5kLmZpbmQoaGIgPT4gaGIuYWdlbnQgPT09IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQpO1xyXG4gICAgICAgIGlmICghaGVhcnRiZWF0RW50cnkpIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gZW50cnkgZm9yIHRoaXMgdXNlciBhZ2VudCBleGlzdHMsIGNyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBhZ2VudDogc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCxcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBoZWFydGJlYXRcclxuICAgICAgICAgICAgICAgIC8vIGVudHJ5IGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wdXNoKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGRhdGVcclxuICAgICAgICAgICAgLy8gYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3AgdW5zZW50IGVudHJ5IGZyb20gcXVldWUuIChTa2lwcGVkIGlmIGFkZGluZyB0aGUgZW50cnkgZXhjZWVkZWRcclxuICAgICAgICAvLyBxdW90YSBhbmQgdGhlIGxvb3AgYnJlYWtzIGVhcmx5LilcclxuICAgICAgICB1bnNlbnRFbnRyaWVzID0gdW5zZW50RW50cmllcy5zbGljZSgxKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhcnRiZWF0c1RvU2VuZCxcclxuICAgICAgICB1bnNlbnRFbnRyaWVzXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIEhlYXJ0YmVhdFN0b3JhZ2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2UgPSB0aGlzLnJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKSB7XHJcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVhZCBhbGwgaGVhcnRiZWF0cy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVhZCgpIHtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJIZWFydGJlYXRPYmplY3QgPSBhd2FpdCByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIodGhpcy5hcHApO1xyXG4gICAgICAgICAgICByZXR1cm4gaWRiSGVhcnRiZWF0T2JqZWN0IHx8IHsgaGVhcnRiZWF0czogW10gfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBvdmVyd3JpdGUgdGhlIHN0b3JhZ2Ugd2l0aCB0aGUgcHJvdmlkZWQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgb3ZlcndyaXRlKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogaGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGFkZCBoZWFydGJlYXRzXHJcbiAgICBhc3luYyBhZGQoaGVhcnRiZWF0c09iamVjdCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCA9IGF3YWl0IHRoaXMucmVhZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIodGhpcy5hcHAsIHtcclxuICAgICAgICAgICAgICAgIGxhc3RTZW50SGVhcnRiZWF0RGF0ZTogKF9hID0gaGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUsXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uaGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ2FsY3VsYXRlIGJ5dGVzIG9mIGEgSGVhcnRiZWF0c0J5VXNlckFnZW50IGFycmF5IGFmdGVyIGJlaW5nIHdyYXBwZWRcclxuICogaW4gYSBwbGF0Zm9ybSBsb2dnaW5nIGhlYWRlciBKU09OIG9iamVjdCwgc3RyaW5naWZpZWQsIGFuZCBjb252ZXJ0ZWRcclxuICogdG8gYmFzZSA2NC5cclxuICovXHJcbmZ1bmN0aW9uIGNvdW50Qnl0ZXMoaGVhcnRiZWF0c0NhY2hlKSB7XHJcbiAgICAvLyBiYXNlNjQgaGFzIGEgcmVzdHJpY3RlZCBzZXQgb2YgY2hhcmFjdGVycywgYWxsIG9mIHdoaWNoIHNob3VsZCBiZSAxIGJ5dGUuXHJcbiAgICByZXR1cm4gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoXHJcbiAgICAvLyBoZWFydGJlYXRzQ2FjaGUgd3JhcHBlciBwcm9wZXJ0aWVzXHJcbiAgICBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNDYWNoZSB9KSkubGVuZ3RoO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29yZUNvbXBvbmVudHModmFyaWFudCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGNvbnRhaW5lciA9PiBuZXcgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdoZWFydGJlYXQnLCBjb250YWluZXIgPT4gbmV3IEhlYXJ0YmVhdFNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIENvbXBvbmVudFR5cGUuUFJJVkFURSAqLykpO1xyXG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgdmFyaWFudCk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCAnZXNtMjAxNycpO1xyXG4gICAgLy8gUmVnaXN0ZXIgcGxhdGZvcm0gU0RLIGlkZW50aWZpZXIgKG5vIHZlcnNpb24pLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKCdmaXJlLWpzJywgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBBcHBcclxuICpcclxuICogQHJlbWFya3MgVGhpcyBwYWNrYWdlIGNvb3JkaW5hdGVzIHRoZSBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIGRpZmZlcmVudCBGaXJlYmFzZSBjb21wb25lbnRzXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygnJyk7XG5cbmV4cG9ydCB7IFNES19WRVJTSU9OLCBERUZBVUxUX0VOVFJZX05BTUUgYXMgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZENvbXBvbmVudCwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCBfYXBwcywgX2NsZWFyQ29tcG9uZW50cywgX2NvbXBvbmVudHMsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBkZWxldGVBcHAsIGdldEFwcCwgZ2V0QXBwcywgaW5pdGlhbGl6ZUFwcCwgb25Mb2csIHJlZ2lzdGVyVmVyc2lvbiwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cblxudmFyIGssZ29vZz1nb29nfHx7fSxsPWNvbW1vbmpzR2xvYmFsfHxzZWxmO2Z1bmN0aW9uIGFhKGEpe3ZhciBiPXR5cGVvZiBhO2I9XCJvYmplY3RcIiE9Yj9iOmE/QXJyYXkuaXNBcnJheShhKT9cImFycmF5XCI6YjpcIm51bGxcIjtyZXR1cm4gXCJhcnJheVwiPT1ifHxcIm9iamVjdFwiPT1iJiZcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGh9ZnVuY3Rpb24gcChhKXt2YXIgYj10eXBlb2YgYTtyZXR1cm4gXCJvYmplY3RcIj09YiYmbnVsbCE9YXx8XCJmdW5jdGlvblwiPT1ifWZ1bmN0aW9uIGJhKGEpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjYSkmJmFbY2FdfHwoYVtjYV09KytkYSl9dmFyIGNhPVwiY2xvc3VyZV91aWRfXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCksZGE9MDtmdW5jdGlvbiBlYShhLGIsYyl7cmV0dXJuIGEuY2FsbC5hcHBseShhLmJpbmQsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGZhKGEsYixjKXtpZighYSl0aHJvdyBFcnJvcigpO2lmKDI8YXJndW1lbnRzLmxlbmd0aCl7dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoZSxkKTtyZXR1cm4gYS5hcHBseShiLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHEoYSxiLGMpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kJiYtMSE9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQudG9TdHJpbmcoKS5pbmRleE9mKFwibmF0aXZlIGNvZGVcIik/cT1lYTpxPWZhO3JldHVybiBxLmFwcGx5KG51bGwsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGhhKGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpO3JldHVybiBhLmFwcGx5KHRoaXMsZCl9fWZ1bmN0aW9uIHIoYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EuJD1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EuYWM9ZnVuY3Rpb24oZCxlLGYpe2Zvcih2YXIgaD1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLG49MjtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWhbbi0yXT1hcmd1bWVudHNbbl07cmV0dXJuIGIucHJvdG90eXBlW2VdLmFwcGx5KGQsaCl9O31mdW5jdGlvbiB2KCl7dGhpcy5zPXRoaXMuczt0aGlzLm89dGhpcy5vO312YXIgaWE9MDt2LnByb3RvdHlwZS5zPSExO3YucHJvdG90eXBlLnNhPWZ1bmN0aW9uKCl7aWYoIXRoaXMucyYmKHRoaXMucz0hMCx0aGlzLk4oKSwwIT1pYSkpe2JhKHRoaXMpO319O3YucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtpZih0aGlzLm8pZm9yKDt0aGlzLm8ubGVuZ3RoOyl0aGlzLm8uc2hpZnQoKSgpO307Y29uc3Qga2E9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChhLGIsdm9pZCAwKX06ZnVuY3Rpb24oYSxiKXtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpcmV0dXJuIFwic3RyaW5nXCIhPT10eXBlb2YgYnx8MSE9Yi5sZW5ndGg/LTE6YS5pbmRleE9mKGIsMCk7Zm9yKGxldCBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYyBpbiBhJiZhW2NdPT09YilyZXR1cm4gYztyZXR1cm4gLTF9O2Z1bmN0aW9uIG1hKGEpe2NvbnN0IGI9YS5sZW5ndGg7aWYoMDxiKXtjb25zdCBjPUFycmF5KGIpO2ZvcihsZXQgZD0wO2Q8YjtkKyspY1tkXT1hW2RdO3JldHVybiBjfXJldHVybiBbXX1cbmZ1bmN0aW9uIG5hKGEsYil7Zm9yKGxldCBjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyl7Y29uc3QgZD1hcmd1bWVudHNbY107aWYoYWEoZCkpe2NvbnN0IGU9YS5sZW5ndGh8fDAsZj1kLmxlbmd0aHx8MDthLmxlbmd0aD1lK2Y7Zm9yKGxldCBoPTA7aDxmO2grKylhW2UraF09ZFtoXTt9ZWxzZSBhLnB1c2goZCk7fX1mdW5jdGlvbiB3KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO313LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307dmFyIG9hPWZ1bmN0aW9uKCl7aWYoIWwuYWRkRXZlbnRMaXN0ZW5lcnx8IU9iamVjdC5kZWZpbmVQcm9wZXJ0eSlyZXR1cm4gITE7dmFyIGE9ITEsYj1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe2E9ITA7fX0pO3RyeXtsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsKCk9Pnt9LGIpLGwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RcIiwoKT0+e30sYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB4KGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX1mdW5jdGlvbiBwYSgpe3ZhciBhPWwubmF2aWdhdG9yO3JldHVybiBhJiYoYT1hLnVzZXJBZ2VudCk/YTpcIlwifWZ1bmN0aW9uIHkoYSl7cmV0dXJuIC0xIT1wYSgpLmluZGV4T2YoYSl9ZnVuY3Rpb24gcWEoYSl7cWFbXCIgXCJdKGEpO3JldHVybiBhfXFhW1wiIFwiXT1mdW5jdGlvbigpe307ZnVuY3Rpb24gcmEoYSxiKXt2YXIgYz1zYTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsYSk/Y1thXTpjW2FdPWIoYSl9dmFyIHRhPXkoXCJPcGVyYVwiKSx6PXkoXCJUcmlkZW50XCIpfHx5KFwiTVNJRVwiKSx1YT15KFwiRWRnZVwiKSx2YT11YXx8eix3YT15KFwiR2Vja29cIikmJiEoLTEhPXBhKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwid2Via2l0XCIpJiYheShcIkVkZ2VcIikpJiYhKHkoXCJUcmlkZW50XCIpfHx5KFwiTVNJRVwiKSkmJiF5KFwiRWRnZVwiKSx4YT0tMSE9cGEoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJ3ZWJraXRcIikmJiF5KFwiRWRnZVwiKTtmdW5jdGlvbiB5YSgpe3ZhciBhPWwuZG9jdW1lbnQ7cmV0dXJuIGE/YS5kb2N1bWVudE1vZGU6dm9pZCAwfXZhciB6YTtcbmE6e3ZhciBBYT1cIlwiLEJhPWZ1bmN0aW9uKCl7dmFyIGE9cGEoKTtpZih3YSlyZXR1cm4gL3J2OihbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKHVhKXJldHVybiAvRWRnZVxcLyhbXFxkXFwuXSspLy5leGVjKGEpO2lmKHopcmV0dXJuIC9cXGIoPzpNU0lFfHJ2KVs6IF0oW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZih4YSlyZXR1cm4gL1dlYktpdFxcLyhcXFMrKS8uZXhlYyhhKTtpZih0YSlyZXR1cm4gLyg/OlZlcnNpb24pWyBcXC9dPyhcXFMrKS8uZXhlYyhhKX0oKTtCYSYmKEFhPUJhP0JhWzFdOlwiXCIpO2lmKHope3ZhciBDYT15YSgpO2lmKG51bGwhPUNhJiZDYT5wYXJzZUZsb2F0KEFhKSl7emE9U3RyaW5nKENhKTticmVhayBhfX16YT1BYTt9dmFyIERhO2lmKGwuZG9jdW1lbnQmJnope3ZhciBFYT15YSgpO0RhPUVhP0VhOnBhcnNlSW50KHphLDEwKXx8dm9pZCAwO31lbHNlIERhPXZvaWQgMDt2YXIgRmE9RGE7ZnVuY3Rpb24gQShhLGIpe3cuY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZih3YSl7YTp7dHJ5e3FhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpHYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLiQuaC5jYWxsKHRoaXMpO319cihBLHcpO3ZhciBHYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS4kLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBIYT1cImNsb3N1cmVfbGlzdGVuYWJsZV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCk7dmFyIElhPTA7ZnVuY3Rpb24gSmEoYSxiLGMsZCxlKXt0aGlzLmxpc3RlbmVyPWE7dGhpcy5wcm94eT1udWxsO3RoaXMuc3JjPWI7dGhpcy50eXBlPWM7dGhpcy5jYXB0dXJlPSEhZDt0aGlzLmxhPWU7dGhpcy5rZXk9KytJYTt0aGlzLmZhPXRoaXMuaWE9ITE7fWZ1bmN0aW9uIEthKGEpe2EuZmE9ITA7YS5saXN0ZW5lcj1udWxsO2EucHJveHk9bnVsbDthLnNyYz1udWxsO2EubGE9bnVsbDt9ZnVuY3Rpb24gTmEoYSxiLGMpe2Zvcihjb25zdCBkIGluIGEpYi5jYWxsKGMsYVtkXSxkLGEpO31mdW5jdGlvbiBPYShhLGIpe2Zvcihjb25zdCBjIGluIGEpYi5jYWxsKHZvaWQgMCxhW2NdLGMsYSk7fWZ1bmN0aW9uIFBhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9Y29uc3QgUWE9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gUmEoYSxiKXtsZXQgYyxkO2ZvcihsZXQgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2ZvcihsZXQgZj0wO2Y8UWEubGVuZ3RoO2YrKyljPVFhW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIFNhKGEpe3RoaXMuc3JjPWE7dGhpcy5nPXt9O3RoaXMuaD0wO31TYS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS50b1N0cmluZygpO2E9dGhpcy5nW2ZdO2F8fChhPXRoaXMuZ1tmXT1bXSx0aGlzLmgrKyk7dmFyIGg9VGEoYSxiLGQsZSk7LTE8aD8oYj1hW2hdLGN8fChiLmlhPSExKSk6KGI9bmV3IEphKGIsdGhpcy5zcmMsZiwhIWQsZSksYi5pYT1jLGEucHVzaChiKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIFVhKGEsYil7dmFyIGM9Yi50eXBlO2lmKGMgaW4gYS5nKXt2YXIgZD1hLmdbY10sZT1rYShkLGIpLGY7KGY9MDw9ZSkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKEthKGIpLDA9PWEuZ1tjXS5sZW5ndGgmJihkZWxldGUgYS5nW2NdLGEuaC0tKSk7fX1cbmZ1bmN0aW9uIFRhKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLmZhJiZmLmxpc3RlbmVyPT1iJiZmLmNhcHR1cmU9PSEhYyYmZi5sYT09ZClyZXR1cm4gZX1yZXR1cm4gLTF9dmFyIFZhPVwiY2xvc3VyZV9sbV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksV2E9e307ZnVuY3Rpb24gWWEoYSxiLGMsZCxlKXtpZihkJiZkLm9uY2UpcmV0dXJuIFphKGEsYixjLGQsZSk7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspWWEoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPSRhKGMpO3JldHVybiBhJiZhW0hhXT9hLk8oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmFiKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBhYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1iYihhKTtufHwoYVtWYV09bj1uZXcgU2EoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9Y2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKW9hfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGRiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBjYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfWNvbnN0IGI9ZWI7cmV0dXJuIGF9ZnVuY3Rpb24gWmEoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylaYShhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9JGEoYyk7cmV0dXJuIGEmJmFbSGFdP2EuUChiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6YWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylmYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz0kYShjKSxhJiZhW0hhXSk/KGE9YS5pLGI9U3RyaW5nKGIpLnRvU3RyaW5nKCksYiBpbiBhLmcmJihmPWEuZ1tiXSxjPVRhKGYsYyxkLGUpLC0xPGMmJihLYShmW2NdKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZixjLDEpLDA9PWYubGVuZ3RoJiYoZGVsZXRlIGEuZ1tiXSxhLmgtLSkpKSk6YSYmKGE9YmIoYSkpJiYoYj1hLmdbYi50b1N0cmluZygpXSxhPS0xLGImJihhPVRhKGIsYyxkLGUpKSwoYz0tMTxhP2JbYV06bnVsbCkmJmdiKGMpKTt9XG5mdW5jdGlvbiBnYihhKXtpZihcIm51bWJlclwiIT09dHlwZW9mIGEmJmEmJiFhLmZhKXt2YXIgYj1hLnNyYztpZihiJiZiW0hhXSlVYShiLmksYSk7ZWxzZSB7dmFyIGM9YS50eXBlLGQ9YS5wcm94eTtiLnJlbW92ZUV2ZW50TGlzdGVuZXI/Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZCxhLmNhcHR1cmUpOmIuZGV0YWNoRXZlbnQ/Yi5kZXRhY2hFdmVudChkYihjKSxkKTpiLmFkZExpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyKGQpOyhjPWJiKGIpKT8oVWEoYyxhKSwwPT1jLmgmJihjLnNyYz1udWxsLGJbVmFdPW51bGwpKTpLYShhKTt9fX1mdW5jdGlvbiBkYihhKXtyZXR1cm4gYSBpbiBXYT9XYVthXTpXYVthXT1cIm9uXCIrYX1mdW5jdGlvbiBlYihhLGIpe2lmKGEuZmEpYT0hMDtlbHNlIHtiPW5ldyBBKGIsdGhpcyk7dmFyIGM9YS5saXN0ZW5lcixkPWEubGF8fGEuc3JjO2EuaWEmJmdiKGEpO2E9Yy5jYWxsKGQsYik7fXJldHVybiBhfVxuZnVuY3Rpb24gYmIoYSl7YT1hW1ZhXTtyZXR1cm4gYSBpbnN0YW5jZW9mIFNhP2E6bnVsbH12YXIgaGI9XCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApO2Z1bmN0aW9uICRhKGEpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKXJldHVybiBhO2FbaGJdfHwoYVtoYl09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVtoYl19ZnVuY3Rpb24gQigpe3YuY2FsbCh0aGlzKTt0aGlzLmk9bmV3IFNhKHRoaXMpO3RoaXMuUz10aGlzO3RoaXMuSj1udWxsO31yKEIsdik7Qi5wcm90b3R5cGVbSGFdPSEwO0IucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7ZmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gQyhhLGIpe3ZhciBjLGQ9YS5KO2lmKGQpZm9yKGM9W107ZDtkPWQuSiljLnB1c2goZCk7YT1hLlM7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHcoYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB3KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgdyhkLGEpO1JhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1pYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1pYihoLGQsITAsYikmJmU7ZT1pYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1pYihoLGQsITEsYikmJmU7fVxuQi5wcm90b3R5cGUuTj1mdW5jdGlvbigpe0IuJC5OLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKUthKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLko9bnVsbDt9O0IucHJvdG90eXBlLk89ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qi5wcm90b3R5cGUuUD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIGliKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguZmEmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix0PWgubGF8fGguc3JjO2guaWEmJlVhKGEuaSxoKTtlPSExIT09bi5jYWxsKHQsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgamI9bC5KU09OLnN0cmluZ2lmeTtjbGFzcyBrYntjb25zdHJ1Y3RvcihhLGIpe3RoaXMuaT1hO3RoaXMuaj1iO3RoaXMuaD0wO3RoaXMuZz1udWxsO31nZXQoKXtsZXQgYTswPHRoaXMuaD8odGhpcy5oLS0sYT10aGlzLmcsdGhpcy5nPWEubmV4dCxhLm5leHQ9bnVsbCk6YT10aGlzLmkoKTtyZXR1cm4gYX19ZnVuY3Rpb24gbGIoKXt2YXIgYT1tYjtsZXQgYj1udWxsO2EuZyYmKGI9YS5nLGEuZz1hLmcubmV4dCxhLmd8fChhLmg9bnVsbCksYi5uZXh0PW51bGwpO3JldHVybiBifWNsYXNzIG5ie2NvbnN0cnVjdG9yKCl7dGhpcy5oPXRoaXMuZz1udWxsO31hZGQoYSxiKXtjb25zdCBjPW9iLmdldCgpO2Muc2V0KGEsYik7dGhpcy5oP3RoaXMuaC5uZXh0PWM6dGhpcy5nPWM7dGhpcy5oPWM7fX12YXIgb2I9bmV3IGtiKCgpPT5uZXcgcGIsYT0+YS5yZXNldCgpKTtjbGFzcyBwYntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiBxYihhKXt2YXIgYj0xO2E9YS5zcGxpdChcIjpcIik7Y29uc3QgYz1bXTtmb3IoOzA8YiYmYS5sZW5ndGg7KWMucHVzaChhLnNoaWZ0KCkpLGItLTthLmxlbmd0aCYmYy5wdXNoKGEuam9pbihcIjpcIikpO3JldHVybiBjfWZ1bmN0aW9uIHJiKGEpe2wuc2V0VGltZW91dCgoKT0+e3Rocm93IGE7fSwwKTt9bGV0IHNiLHRiPSExLG1iPW5ldyBuYix2Yj0oKT0+e2NvbnN0IGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtzYj0oKT0+e2EudGhlbih1Yik7fTt9O3ZhciB1Yj0oKT0+e2Zvcih2YXIgYTthPWxiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7cmIoYyk7fXZhciBiPW9iO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fXRiPSExO307ZnVuY3Rpb24gd2IoYSxiKXtCLmNhbGwodGhpcyk7dGhpcy5oPWF8fDE7dGhpcy5nPWJ8fGw7dGhpcy5qPXEodGhpcy5xYix0aGlzKTt0aGlzLmw9RGF0ZS5ub3coKTt9cih3YixCKTtrPXdiLnByb3RvdHlwZTtrLmdhPSExO2suVD1udWxsO2sucWI9ZnVuY3Rpb24oKXtpZih0aGlzLmdhKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMubDswPGEmJmE8LjgqdGhpcy5oP3RoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oLWEpOih0aGlzLlQmJih0aGlzLmcuY2xlYXJUaW1lb3V0KHRoaXMuVCksdGhpcy5UPW51bGwpLEModGhpcyxcInRpY2tcIiksdGhpcy5nYSYmKHhiKHRoaXMpLHRoaXMuc3RhcnQoKSkpO319O2suc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmdhPSEwO3RoaXMuVHx8KHRoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oKSx0aGlzLmw9RGF0ZS5ub3coKSk7fTtcbmZ1bmN0aW9uIHhiKGEpe2EuZ2E9ITE7YS5UJiYoYS5nLmNsZWFyVGltZW91dChhLlQpLGEuVD1udWxsKTt9ay5OPWZ1bmN0aW9uKCl7d2IuJC5OLmNhbGwodGhpcyk7eGIodGhpcyk7ZGVsZXRlIHRoaXMuZzt9O2Z1bmN0aW9uIHliKGEsYixjKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSljJiYoYT1xKGEsYykpO2Vsc2UgaWYoYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5oYW5kbGVFdmVudClhPXEoYS5oYW5kbGVFdmVudCxhKTtlbHNlIHRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTtyZXR1cm4gMjE0NzQ4MzY0NzxOdW1iZXIoYik/LTE6bC5zZXRUaW1lb3V0KGEsYnx8MCl9ZnVuY3Rpb24gemIoYSl7YS5nPXliKCgpPT57YS5nPW51bGw7YS5pJiYoYS5pPSExLHpiKGEpKTt9LGEuaik7Y29uc3QgYj1hLmg7YS5oPW51bGw7YS5tLmFwcGx5KG51bGwsYik7fWNsYXNzIEFiIGV4dGVuZHMgdntjb25zdHJ1Y3RvcihhLGIpe3N1cGVyKCk7dGhpcy5tPWE7dGhpcy5qPWI7dGhpcy5oPW51bGw7dGhpcy5pPSExO3RoaXMuZz1udWxsO31sKGEpe3RoaXMuaD1hcmd1bWVudHM7dGhpcy5nP3RoaXMuaT0hMDp6Yih0aGlzKTt9Tigpe3N1cGVyLk4oKTt0aGlzLmcmJihsLmNsZWFyVGltZW91dCh0aGlzLmcpLHRoaXMuZz1udWxsLHRoaXMuaT0hMSx0aGlzLmg9bnVsbCk7fX1mdW5jdGlvbiBCYihhKXt2LmNhbGwodGhpcyk7dGhpcy5oPWE7dGhpcy5nPXt9O31yKEJiLHYpO3ZhciBDYj1bXTtmdW5jdGlvbiBEYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKENiWzBdPWMudG9TdHJpbmcoKSksYz1DYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPVlhKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gRmIoYSl7TmEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZnYihiKTt9LGEpO2EuZz17fTt9QmIucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtCYi4kLk4uY2FsbCh0aGlzKTtGYih0aGlzKTt9O0JiLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIEdiKCl7dGhpcy5nPSEwO31HYi5wcm90b3R5cGUuRWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBIYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHQ9MDt0PG4ubGVuZ3RoO3QrKyl7dmFyIG09blt0XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHU9bVswXTttPW1bMV07dmFyIEw9dS5zcGxpdChcIl9cIik7aD0yPD1MLmxlbmd0aCYmXCJ0eXBlXCI9PUxbMV0/aCsodStcIj1cIittK1wiJlwiKTpoKyh1K1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIEliKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBEKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK0piKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBLYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9R2IucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gSmIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIGpiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgRT17fSxMYj1udWxsO2Z1bmN0aW9uIE1iKCl7cmV0dXJuIExiPUxifHxuZXcgQn1FLlRhPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gTmIoYSl7dy5jYWxsKHRoaXMsRS5UYSxhKTt9cihOYix3KTtmdW5jdGlvbiBPYihhKXtjb25zdCBiPU1iKCk7QyhiLG5ldyBOYihiKSk7fUUuU1RBVF9FVkVOVD1cInN0YXRldmVudFwiO2Z1bmN0aW9uIFBiKGEsYil7dy5jYWxsKHRoaXMsRS5TVEFUX0VWRU5ULGEpO3RoaXMuc3RhdD1iO31yKFBiLHcpO2Z1bmN0aW9uIEYoYSl7Y29uc3QgYj1NYigpO0MoYixuZXcgUGIoYixhKSk7fUUuVWE9XCJ0aW1pbmdldmVudFwiO2Z1bmN0aW9uIFFiKGEsYil7dy5jYWxsKHRoaXMsRS5VYSxhKTt0aGlzLnNpemU9Yjt9cihRYix3KTtcbmZ1bmN0aW9uIFJiKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBTYj17Tk9fRVJST1I6MCxyYjoxLEViOjIsRGI6Myx5Yjo0LENiOjUsRmI6NixRYTo3LFRJTUVPVVQ6OCxJYjo5fTt2YXIgVGI9e3diOlwiY29tcGxldGVcIixTYjpcInN1Y2Nlc3NcIixSYTpcImVycm9yXCIsUWE6XCJhYm9ydFwiLEtiOlwicmVhZHlcIixMYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEdiOlwiaW5jcmVtZW50YWxkYXRhXCIsSmI6XCJwcm9ncmVzc1wiLHpiOlwiZG93bmxvYWRwcm9ncmVzc1wiLCRiOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gVWIoKXt9VWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBWYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiBXYigpe312YXIgWGI9e09QRU46XCJhXCIsdmI6XCJiXCIsUmE6XCJjXCIsSGI6XCJkXCJ9O2Z1bmN0aW9uIFliKCl7dy5jYWxsKHRoaXMsXCJkXCIpO31yKFliLHcpO2Z1bmN0aW9uIFpiKCl7dy5jYWxsKHRoaXMsXCJjXCIpO31yKFpiLHcpO3ZhciAkYjtmdW5jdGlvbiBhYygpe31yKGFjLFViKTthYy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9O2FjLnByb3RvdHlwZS5pPWZ1bmN0aW9uKCl7cmV0dXJuIHt9fTskYj1uZXcgYWM7ZnVuY3Rpb24gYmMoYSxiLGMsZCl7dGhpcy5sPWE7dGhpcy5qPWI7dGhpcy5tPWM7dGhpcy5XPWR8fDE7dGhpcy5VPW5ldyBCYih0aGlzKTt0aGlzLlA9Y2M7YT12YT8xMjU6dm9pZCAwO3RoaXMuVj1uZXcgd2IoYSk7dGhpcy5JPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuTD10aGlzLkc9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRj1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5jYT0tMTt0aGlzLko9ITE7dGhpcy5PPTA7dGhpcy5NPW51bGw7dGhpcy5iYT10aGlzLks9dGhpcy5hYT10aGlzLlM9ITE7dGhpcy5oPW5ldyBkYzt9ZnVuY3Rpb24gZGMoKXt0aGlzLmk9bnVsbDt0aGlzLmc9XCJcIjt0aGlzLmg9ITE7fXZhciBjYz00NUUzLGVjPXt9LGZjPXt9O2s9YmMucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gZ2MoYSxiLGMpe2EuTD0xO2Eudj1oYyhHKGIpKTthLnM9YzthLlM9ITA7aWMoYSxudWxsKTt9ZnVuY3Rpb24gaWMoYSxiKXthLkc9RGF0ZS5ub3coKTtqYyhhKTthLkE9RyhhLnYpO3ZhciBjPWEuQSxkPWEuVztBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7a2MoYy5pLFwidFwiLGQpO2EuQz0wO2M9YS5sLko7YS5oPW5ldyBkYzthLmc9bGMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5NPW5ldyBBYihxKGEuUGEsYSxhLmcpLGEuTykpO0RiKGEuVSxhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5uYik7Yj1hLkk/UGEoYS5JKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5oYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5oYShhLkEsYS51LG51bGwsYikpO09iKCk7SGIoYS5qLGEudSxhLkEsYS5tLGEuVyxhLnMpO31cbmsubmI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTTtiJiYzPT1IKGEpP2IubCgpOnRoaXMuUGEoYSk7fTtcbmsuUGE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCB1PUgodGhpcy5nKTt2YXIgYj10aGlzLmcuSWEoKTtjb25zdCBMPXRoaXMuZy5kYSgpO2lmKCEoMz51KSYmKDMhPXV8fHZhfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmphKCl8fG1jKHRoaXMuZykpKSl7dGhpcy5KfHw0IT11fHw3PT1ifHwoOD09Ynx8MD49TD9PYigzKTpPYigyKSk7bmModGhpcyk7dmFyIGM9dGhpcy5nLmRhKCk7dGhpcy5jYT1jO2I6aWYob2ModGhpcykpe3ZhciBkPW1jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09SCh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7SSh0aGlzKTtwYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmphKCk7dGhpcy5pPTIwMD09YztJYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5XLHUsYyk7aWYodGhpcy5pKXtpZih0aGlzLmFhJiYhdGhpcy5LKXtiOntpZih0aGlzLmcpe3ZhciBuLHQ9dGhpcy5nO2lmKChuPXQuZz90LmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKTpudWxsKSYmIXgobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRCh0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5LPSEwLHFjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0YoMTIpO0kodGhpcyk7cGModGhpcyk7YnJlYWsgYX19dGhpcy5TPyhyYyh0aGlzLHUsaCksdmEmJnRoaXMuaSYmMz09dSYmKERiKHRoaXMuVSx0aGlzLlYsXCJ0aWNrXCIsdGhpcy5tYiksXG50aGlzLlYuc3RhcnQoKSkpOihEKHRoaXMuaix0aGlzLm0saCxudWxsKSxxYyh0aGlzLGgpKTs0PT11JiZJKHRoaXMpO3RoaXMuaSYmIXRoaXMuSiYmKDQ9PXU/c2ModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsamModGhpcykpKTt9ZWxzZSB0Yyh0aGlzLmcpLDQwMD09YyYmMDxoLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT8odGhpcy5vPTMsRigxMikpOih0aGlzLm89MCxGKDEzKSksSSh0aGlzKSxwYyh0aGlzKTt9fX1jYXRjaCh1KXt9ZmluYWxseXt9fTtmdW5jdGlvbiBvYyhhKXtyZXR1cm4gYS5nP1wiR0VUXCI9PWEudSYmMiE9YS5MJiZhLmwuSGE6ITF9XG5mdW5jdGlvbiByYyhhLGIsYyl7bGV0IGQ9ITAsZTtmb3IoOyFhLkomJmEuQzxjLmxlbmd0aDspaWYoZT11YyhhLGMpLGU9PWZjKXs0PT1iJiYoYS5vPTQsRigxNCksZD0hMSk7RChhLmosYS5tLG51bGwsXCJbSW5jb21wbGV0ZSBSZXNwb25zZV1cIik7YnJlYWt9ZWxzZSBpZihlPT1lYyl7YS5vPTQ7RigxNSk7RChhLmosYS5tLGMsXCJbSW52YWxpZCBDaHVua11cIik7ZD0hMTticmVha31lbHNlIEQoYS5qLGEubSxlLG51bGwpLHFjKGEsZSk7b2MoYSkmJmUhPWZjJiZlIT1lYyYmKGEuaC5nPVwiXCIsYS5DPTApOzQhPWJ8fDAhPWMubGVuZ3RofHxhLmguaHx8KGEubz0xLEYoMTYpLGQ9ITEpO2EuaT1hLmkmJmQ7ZD8wPGMubGVuZ3RoJiYhYS5iYSYmKGEuYmE9ITAsYj1hLmwsYi5nPT1hJiZiLmNhJiYhYi5NJiYoYi5sLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHZjKGIpLGIuTT0hMCxGKDExKSkpOihEKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksSShhKSxwYyhhKSk7fWsubWI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPUgodGhpcy5nKSxiPXRoaXMuZy5qYSgpO3RoaXMuQzxiLmxlbmd0aCYmKG5jKHRoaXMpLHJjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmpjKHRoaXMpKTt9fTtmdW5jdGlvbiB1YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBmYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZWM7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGZjO2I9Yi5zbGljZShkLGQrYyk7YS5DPWQrYztyZXR1cm4gYn1rLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuSj0hMDtJKHRoaXMpO307ZnVuY3Rpb24gamMoYSl7YS5ZPURhdGUubm93KCkrYS5QO3djKGEsYS5QKTt9XG5mdW5jdGlvbiB3YyhhLGIpe2lmKG51bGwhPWEuQil0aHJvdyBFcnJvcihcIldhdGNoRG9nIHRpbWVyIG5vdCBudWxsXCIpO2EuQj1SYihxKGEubGIsYSksYik7fWZ1bmN0aW9uIG5jKGEpe2EuQiYmKGwuY2xlYXJUaW1lb3V0KGEuQiksYS5CPW51bGwpO31rLmxiPWZ1bmN0aW9uKCl7dGhpcy5CPW51bGw7Y29uc3QgYT1EYXRlLm5vdygpOzA8PWEtdGhpcy5ZPyhLYih0aGlzLmosdGhpcy5BKSwyIT10aGlzLkwmJihPYigpLEYoMTcpKSxJKHRoaXMpLHRoaXMubz0yLHBjKHRoaXMpKTp3Yyh0aGlzLHRoaXMuWS1hKTt9O2Z1bmN0aW9uIHBjKGEpezA9PWEubC5IfHxhLkp8fHNjKGEubCxhKTt9ZnVuY3Rpb24gSShhKXtuYyhhKTt2YXIgYj1hLk07YiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYi5zYSYmYi5zYSgpO2EuTT1udWxsO3hiKGEuVik7RmIoYS5VKTthLmcmJihiPWEuZyxhLmc9bnVsbCxiLmFib3J0KCksYi5zYSgpKTt9XG5mdW5jdGlvbiBxYyhhLGIpe3RyeXt2YXIgYz1hLmw7aWYoMCE9Yy5IJiYoYy5nPT1hfHx4YyhjLmksYSkpKWlmKCFhLksmJnhjKGMuaSxhKSYmMz09Yy5IKXt0cnl7dmFyIGQ9Yy5KYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5HKzNFMzxhLkcpeWMoYyksemMoYyk7ZWxzZSBicmVhayBhO0FjKGMpO0YoMTgpO319ZWxzZSBjLkZhPWVbMV0sMDxjLkZhLWMuViYmMzc1MDA+ZVsyXSYmYy5HJiYwPT1jLkEmJiFjLnYmJihjLnY9UmIocShjLmliLGMpLDZFMykpO2lmKDE+PUJjKGMuaSkmJmMub2Epe3RyeXtjLm9hKCk7fWNhdGNoKG0pe31jLm9hPXZvaWQgMDt9fWVsc2UgSihjLDExKTt9ZWxzZSBpZigoYS5LfHxjLmc9PWEpJiZ5YyhjKSwheChiKSlmb3IoZT1jLkphLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO2MuVj1cbm1bMF07bT1tWzFdO2lmKDI9PWMuSClpZihcImNcIj09bVswXSl7Yy5LPW1bMV07Yy5wYT1tWzJdO2NvbnN0IHU9bVszXTtudWxsIT11JiYoYy5yYT11LGMubC5pbmZvKFwiVkVSPVwiK2MucmEpKTtjb25zdCBMPW1bNF07bnVsbCE9TCYmKGMuR2E9TCxjLmwuaW5mbyhcIlNWRVI9XCIrYy5HYSkpO2NvbnN0IExhPW1bNV07bnVsbCE9TGEmJlwibnVtYmVyXCI9PT10eXBlb2YgTGEmJjA8TGEmJihkPTEuNSpMYSxjLkw9ZCxjLmwuaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBsYT1hLmc7aWYobGEpe2NvbnN0IE1hPWxhLmc/bGEuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihNYSl7dmFyIGY9ZC5pO2YuZ3x8LTE9PU1hLmluZGV4T2YoXCJzcGR5XCIpJiYtMT09TWEuaW5kZXhPZihcInF1aWNcIikmJi0xPT1NYS5pbmRleE9mKFwiaDJcIil8fChmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKENjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkYpe2NvbnN0IEViPVxubGEuZz9sYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDtFYiYmKGQuRGE9RWIsSyhkLkksZC5GLEViKSk7fX1jLkg9MztjLmgmJmMuaC5CYSgpO2MuY2EmJihjLlM9RGF0ZS5ub3coKS1hLkcsYy5sLmluZm8oXCJIYW5kc2hha2UgUlRUOiBcIitjLlMrXCJtc1wiKSk7ZD1jO3ZhciBoPWE7ZC53YT1EYyhkLGQuSj9kLnBhOm51bGwsZC5ZKTtpZihoLkspe0VjKGQuaSxoKTt2YXIgbj1oLHQ9ZC5MO3QmJm4uc2V0VGltZW91dCh0KTtuLkImJihuYyhuKSxqYyhuKSk7ZC5nPWg7fWVsc2UgRmMoZCk7MDxjLmoubGVuZ3RoJiZHYyhjKTt9ZWxzZSBcInN0b3BcIiE9bVswXSYmXCJjbG9zZVwiIT1tWzBdfHxKKGMsNyk7ZWxzZSAzPT1jLkgmJihcInN0b3BcIj09bVswXXx8XCJjbG9zZVwiPT1tWzBdP1wic3RvcFwiPT1tWzBdP0ooYyw3KTpIYyhjKTpcIm5vb3BcIiE9bVswXSYmYy5oJiZjLmguQWEobSksYy5BPTApO31PYig0KTt9Y2F0Y2gobSl7fX1mdW5jdGlvbiBJYyhhKXtpZihhLlomJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuWilyZXR1cm4gYS5aKCk7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBNYXAmJmEgaW5zdGFuY2VvZiBNYXB8fFwidW5kZWZpbmVkXCIhPT10eXBlb2YgU2V0JiZhIGluc3RhbmNlb2YgU2V0KXJldHVybiBBcnJheS5mcm9tKGEudmFsdWVzKCkpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihhYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBKYyhhKXtpZihhLnRhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLnRhKXJldHVybiBhLnRhKCk7aWYoIWEuWnx8XCJmdW5jdGlvblwiIT10eXBlb2YgYS5aKXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIE1hcCYmYSBpbnN0YW5jZW9mIE1hcClyZXR1cm4gQXJyYXkuZnJvbShhLmtleXMoKSk7aWYoIShcInVuZGVmaW5lZFwiIT09dHlwZW9mIFNldCYmYSBpbnN0YW5jZW9mIFNldCkpe2lmKGFhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBiPVtdO2E9YS5sZW5ndGg7Zm9yKHZhciBjPTA7YzxhO2MrKyliLnB1c2goYyk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGNvbnN0IGQgaW4gYSliW2MrK109ZDtyZXR1cm4gYn19fVxuZnVuY3Rpb24gS2MoYSxiKXtpZihhLmZvckVhY2gmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZm9yRWFjaClhLmZvckVhY2goYix2b2lkIDApO2Vsc2UgaWYoYWEoYSl8fFwic3RyaW5nXCI9PT10eXBlb2YgYSlBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsYix2b2lkIDApO2Vsc2UgZm9yKHZhciBjPUpjKGEpLGQ9SWMoYSksZT1kLmxlbmd0aCxmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9dmFyIExjPVJlZ0V4cChcIl4oPzooW146Lz8jLl0rKTopPyg/Oi8vKD86KFteXFxcXFxcXFwvPyNdKilAKT8oW15cXFxcXFxcXC8/I10qPykoPzo6KFswLTldKykpPyg/PVtcXFxcXFxcXC8/I118JCkpPyhbXj8jXSspPyg/OlxcXFw/KFteI10qKSk/KD86IyhbXFxcXHNcXFxcU10qKSk/JFwiKTtmdW5jdGlvbiBNYyhhLGIpe2lmKGEpe2E9YS5zcGxpdChcIiZcIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10uaW5kZXhPZihcIj1cIiksZT1udWxsO2lmKDA8PWQpe3ZhciBmPWFbY10uc3Vic3RyaW5nKDAsZCk7ZT1hW2NdLnN1YnN0cmluZyhkKzEpO31lbHNlIGY9YVtjXTtiKGYsZT9kZWNvZGVVUklDb21wb25lbnQoZS5yZXBsYWNlKC9cXCsvZyxcIiBcIikpOlwiXCIpO319fWZ1bmN0aW9uIE0oYSl7dGhpcy5nPXRoaXMucz10aGlzLmo9XCJcIjt0aGlzLm09bnVsbDt0aGlzLm89dGhpcy5sPVwiXCI7dGhpcy5oPSExO2lmKGEgaW5zdGFuY2VvZiBNKXt0aGlzLmg9YS5oO05jKHRoaXMsYS5qKTt0aGlzLnM9YS5zO3RoaXMuZz1hLmc7T2ModGhpcyxhLm0pO3RoaXMubD1hLmw7dmFyIGI9YS5pO3ZhciBjPW5ldyBQYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgTWFwKGIuZyksYy5oPWIuaCk7UWModGhpcyxjKTt0aGlzLm89YS5vO31lbHNlIGEmJihiPVN0cmluZyhhKS5tYXRjaChMYykpPyh0aGlzLmg9ITEsTmModGhpcyxiWzFdfHxcIlwiLCEwKSx0aGlzLnM9UmMoYlsyXXx8XCJcIiksdGhpcy5nPVJjKGJbM118fFwiXCIsITApLE9jKHRoaXMsYls0XSksdGhpcy5sPVJjKGJbNV18fFwiXCIsITApLFFjKHRoaXMsYls2XXx8XCJcIiwhMCksdGhpcy5vPVJjKGJbN118fFwiXCIpKToodGhpcy5oPSExLHRoaXMuaT1uZXcgUGMobnVsbCx0aGlzLmgpKTt9XG5NLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5qO2ImJmEucHVzaChTYyhiLFRjLCEwKSxcIjpcIik7dmFyIGM9dGhpcy5nO2lmKGN8fFwiZmlsZVwiPT1iKWEucHVzaChcIi8vXCIpLChiPXRoaXMucykmJmEucHVzaChTYyhiLFRjLCEwKSxcIkBcIiksYS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYz10aGlzLm0sbnVsbCE9YyYmYS5wdXNoKFwiOlwiLFN0cmluZyhjKSk7aWYoYz10aGlzLmwpdGhpcy5nJiZcIi9cIiE9Yy5jaGFyQXQoMCkmJmEucHVzaChcIi9cIiksYS5wdXNoKFNjKGMsXCIvXCI9PWMuY2hhckF0KDApP1VjOlZjLCEwKSk7KGM9dGhpcy5pLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYyk7KGM9dGhpcy5vKSYmYS5wdXNoKFwiI1wiLFNjKGMsV2MpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtmdW5jdGlvbiBHKGEpe3JldHVybiBuZXcgTShhKX1cbmZ1bmN0aW9uIE5jKGEsYixjKXthLmo9Yz9SYyhiLCEwKTpiO2EuaiYmKGEuaj1hLmoucmVwbGFjZSgvOiQvLFwiXCIpKTt9ZnVuY3Rpb24gT2MoYSxiKXtpZihiKXtiPU51bWJlcihiKTtpZihpc05hTihiKXx8MD5iKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2IpO2EubT1iO31lbHNlIGEubT1udWxsO31mdW5jdGlvbiBRYyhhLGIsYyl7YiBpbnN0YW5jZW9mIFBjPyhhLmk9YixYYyhhLmksYS5oKSk6KGN8fChiPVNjKGIsWWMpKSxhLmk9bmV3IFBjKGIsYS5oKSk7fWZ1bmN0aW9uIEsoYSxiLGMpe2EuaS5zZXQoYixjKTt9ZnVuY3Rpb24gaGMoYSl7SyhhLFwienhcIixNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKV5EYXRlLm5vdygpKS50b1N0cmluZygzNikpO3JldHVybiBhfVxuZnVuY3Rpb24gUmMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFNjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsWmMpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIFpjKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9dmFyIFRjPS9bI1xcL1xcP0BdL2csVmM9L1sjXFw/Ol0vZyxVYz0vWyNcXD9dL2csWWM9L1sjXFw/QF0vZyxXYz0vIy9nO2Z1bmN0aW9uIFBjKGEsYil7dGhpcy5oPXRoaXMuZz1udWxsO3RoaXMuaT1hfHxudWxsO3RoaXMuaj0hIWI7fVxuZnVuY3Rpb24gTihhKXthLmd8fChhLmc9bmV3IE1hcCxhLmg9MCxhLmkmJk1jKGEuaSxmdW5jdGlvbihiLGMpe2EuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSksYyk7fSkpO31rPVBjLnByb3RvdHlwZTtrLmFkZD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7dmFyIGM9dGhpcy5nLmdldChhKTtjfHx0aGlzLmcuc2V0KGEsYz1bXSk7Yy5wdXNoKGIpO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gJGMoYSxiKXtOKGEpO2I9TyhhLGIpO2EuZy5oYXMoYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGEuZy5kZWxldGUoYikpO31mdW5jdGlvbiBhZChhLGIpe04oYSk7Yj1PKGEsYik7cmV0dXJuIGEuZy5oYXMoYil9XG5rLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtOKHRoaXMpO3RoaXMuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EuY2FsbChiLGUsZCx0aGlzKTt9LHRoaXMpO30sdGhpcyk7fTtrLnRhPWZ1bmN0aW9uKCl7Tih0aGlzKTtjb25zdCBhPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKSxiPUFycmF5LmZyb20odGhpcy5nLmtleXMoKSksYz1bXTtmb3IobGV0IGQ9MDtkPGIubGVuZ3RoO2QrKyl7Y29uc3QgZT1hW2RdO2ZvcihsZXQgZj0wO2Y8ZS5sZW5ndGg7ZisrKWMucHVzaChiW2RdKTt9cmV0dXJuIGN9O2suWj1mdW5jdGlvbihhKXtOKHRoaXMpO2xldCBiPVtdO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlhZCh0aGlzLGEpJiYoYj1iLmNvbmNhdCh0aGlzLmcuZ2V0KE8odGhpcyxhKSkpKTtlbHNlIHthPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKyliPWIuY29uY2F0KGFbY10pO31yZXR1cm4gYn07XG5rLnNldD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7YWQodGhpcyxhKSYmKHRoaXMuaC09dGhpcy5nLmdldChhKS5sZW5ndGgpO3RoaXMuZy5zZXQoYSxbYl0pO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ay5nZXQ9ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gYjthPXRoaXMuWihhKTtyZXR1cm4gMDxhLmxlbmd0aD9TdHJpbmcoYVswXSk6Yn07ZnVuY3Rpb24ga2MoYSxiLGMpeyRjKGEsYik7MDxjLmxlbmd0aCYmKGEuaT1udWxsLGEuZy5zZXQoTyhhLGIpLG1hKGMpKSxhLmgrPWMubGVuZ3RoKTt9XG5rLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5pKXJldHVybiB0aGlzLmk7aWYoIXRoaXMuZylyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9QXJyYXkuZnJvbSh0aGlzLmcua2V5cygpKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtjb25zdCBmPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZCkpLGg9dGhpcy5aKGQpO2ZvcihkPTA7ZDxoLmxlbmd0aDtkKyspe3ZhciBlPWY7XCJcIiE9PWhbZF0mJihlKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGhbZF0pKSk7YS5wdXNoKGUpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBPKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifVxuZnVuY3Rpb24gWGMoYSxiKXtiJiYhYS5qJiYoTihhKSxhLmk9bnVsbCxhLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe3ZhciBlPWQudG9Mb3dlckNhc2UoKTtkIT1lJiYoJGModGhpcyxkKSxrYyh0aGlzLGUsYykpO30sYSkpO2Euaj1iO312YXIgYmQ9Y2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmc9YTt0aGlzLm1hcD1iO319O2Z1bmN0aW9uIGNkKGEpe3RoaXMubD1hfHxkZDtsLlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZz8oYT1sLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpLGE9MDxhLmxlbmd0aCYmKFwiaHFcIj09YVswXS5uZXh0SG9wUHJvdG9jb2x8fFwiaDJcIj09YVswXS5uZXh0SG9wUHJvdG9jb2wpKTphPSEhKGwuZyYmbC5nLkthJiZsLmcuS2EoKSYmbC5nLkthKCkuZGMpO3RoaXMuaj1hP3RoaXMubDoxO3RoaXMuZz1udWxsOzE8dGhpcy5qJiYodGhpcy5nPW5ldyBTZXQpO3RoaXMuaD1udWxsO3RoaXMuaT1bXTt9dmFyIGRkPTEwO2Z1bmN0aW9uIGVkKGEpe3JldHVybiBhLmg/ITA6YS5nP2EuZy5zaXplPj1hLmo6ITF9ZnVuY3Rpb24gQmMoYSl7cmV0dXJuIGEuaD8xOmEuZz9hLmcuc2l6ZTowfWZ1bmN0aW9uIHhjKGEsYil7cmV0dXJuIGEuaD9hLmg9PWI6YS5nP2EuZy5oYXMoYik6ITF9ZnVuY3Rpb24gQ2MoYSxiKXthLmc/YS5nLmFkZChiKTphLmg9Yjt9XG5mdW5jdGlvbiBFYyhhLGIpe2EuaCYmYS5oPT1iP2EuaD1udWxsOmEuZyYmYS5nLmhhcyhiKSYmYS5nLmRlbGV0ZShiKTt9Y2QucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuaT1mZCh0aGlzKTtpZih0aGlzLmgpdGhpcy5oLmNhbmNlbCgpLHRoaXMuaD1udWxsO2Vsc2UgaWYodGhpcy5nJiYwIT09dGhpcy5nLnNpemUpe2Zvcihjb25zdCBhIG9mIHRoaXMuZy52YWx1ZXMoKSlhLmNhbmNlbCgpO3RoaXMuZy5jbGVhcigpO319O2Z1bmN0aW9uIGZkKGEpe2lmKG51bGwhPWEuaClyZXR1cm4gYS5pLmNvbmNhdChhLmguRik7aWYobnVsbCE9YS5nJiYwIT09YS5nLnNpemUpe2xldCBiPWEuaTtmb3IoY29uc3QgYyBvZiBhLmcudmFsdWVzKCkpYj1iLmNvbmNhdChjLkYpO3JldHVybiBifXJldHVybiBtYShhLmkpfXZhciBnZD1jbGFzc3tzdHJpbmdpZnkoYSl7cmV0dXJuIGwuSlNPTi5zdHJpbmdpZnkoYSx2b2lkIDApfXBhcnNlKGEpe3JldHVybiBsLkpTT04ucGFyc2UoYSx2b2lkIDApfX07ZnVuY3Rpb24gaGQoKXt0aGlzLmc9bmV3IGdkO31mdW5jdGlvbiBpZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1qYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIGpkKGEsYil7Y29uc3QgYz1uZXcgR2I7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIGtkKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIGxkKGEpe3RoaXMubD1hLmVjfHxudWxsO3RoaXMuaj1hLm9ifHwhMTt9cihsZCxVYik7bGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG1kKHRoaXMubCx0aGlzLmopfTtsZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBtZChhLGIpe0IuY2FsbCh0aGlzKTt0aGlzLkY9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1uZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXIobWQsQik7dmFyIG5kPTA7az1tZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPW5kKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7b2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkZ8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLiRhLmJpbmQodGhpcyksdGhpcy5rYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKS5jYXRjaCgoKT0+e30pOzE8PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy5nJiY0IT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLmc9ITEscGQodGhpcykpO3RoaXMucmVhZHlTdGF0ZT1uZDt9O1xuay4kYT1mdW5jdGlvbihhKXtpZih0aGlzLmcmJih0aGlzLmw9YSx0aGlzLmh8fCh0aGlzLnN0YXR1cz10aGlzLmwuc3RhdHVzLHRoaXMuc3RhdHVzVGV4dD10aGlzLmwuc3RhdHVzVGV4dCx0aGlzLmg9YS5oZWFkZXJzLHRoaXMucmVhZHlTdGF0ZT0yLG9kKHRoaXMpKSx0aGlzLmcmJih0aGlzLnJlYWR5U3RhdGU9MyxvZCh0aGlzKSx0aGlzLmcpKSlpZihcImFycmF5YnVmZmVyXCI9PT10aGlzLnJlc3BvbnNlVHlwZSlhLmFycmF5QnVmZmVyKCkudGhlbih0aGlzLllhLmJpbmQodGhpcyksdGhpcy5rYS5iaW5kKHRoaXMpKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgbC5SZWFkYWJsZVN0cmVhbSYmXCJib2R5XCJpbiBhKXt0aGlzLmo9YS5ib2R5LmdldFJlYWRlcigpO2lmKHRoaXMudSl7aWYodGhpcy5yZXNwb25zZVR5cGUpdGhyb3cgRXJyb3IoJ3Jlc3BvbnNlVHlwZSBtdXN0IGJlIGVtcHR5IGZvciBcInN0cmVhbUJpbmFyeUNodW5rc1wiIG1vZGUgcmVzcG9uc2VzLicpO3RoaXMucmVzcG9uc2U9XG5bXTt9ZWxzZSB0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCIsdGhpcy5BPW5ldyBUZXh0RGVjb2RlcjtxZCh0aGlzKTt9ZWxzZSBhLnRleHQoKS50aGVuKHRoaXMuWmEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO307ZnVuY3Rpb24gcWQoYSl7YS5qLnJlYWQoKS50aGVuKGEuWGEuYmluZChhKSkuY2F0Y2goYS5rYS5iaW5kKGEpKTt9ay5YYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe2lmKHRoaXMudSYmYS52YWx1ZSl0aGlzLnJlc3BvbnNlLnB1c2goYS52YWx1ZSk7ZWxzZSBpZighdGhpcy51KXt2YXIgYj1hLnZhbHVlP2EudmFsdWU6bmV3IFVpbnQ4QXJyYXkoMCk7aWYoYj10aGlzLkEuZGVjb2RlKGIse3N0cmVhbTohYS5kb25lfSkpdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dCs9Yjt9YS5kb25lP3BkKHRoaXMpOm9kKHRoaXMpOzM9PXRoaXMucmVhZHlTdGF0ZSYmcWQodGhpcyk7fX07XG5rLlphPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9YSxwZCh0aGlzKSk7fTtrLllhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9YSxwZCh0aGlzKSk7fTtrLmthPWZ1bmN0aW9uKCl7dGhpcy5nJiZwZCh0aGlzKTt9O2Z1bmN0aW9uIHBkKGEpe2EucmVhZHlTdGF0ZT00O2EubD1udWxsO2Euaj1udWxsO2EuQT1udWxsO29kKGEpO31rLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLnYuYXBwZW5kKGEsYik7fTtrLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmg/dGhpcy5oLmdldChhLnRvTG93ZXJDYXNlKCkpfHxcIlwiOlwiXCJ9O1xuay5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5oKXJldHVybiBcIlwiO2NvbnN0IGE9W10sYj10aGlzLmguZW50cmllcygpO2Zvcih2YXIgYz1iLm5leHQoKTshYy5kb25lOyljPWMudmFsdWUsYS5wdXNoKGNbMF0rXCI6IFwiK2NbMV0pLGM9Yi5uZXh0KCk7cmV0dXJuIGEuam9pbihcIlxcclxcblwiKX07ZnVuY3Rpb24gb2QoYSl7YS5vbnJlYWR5c3RhdGVjaGFuZ2UmJmEub25yZWFkeXN0YXRlY2hhbmdlLmNhbGwoYSk7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZC5wcm90b3R5cGUsXCJ3aXRoQ3JlZGVudGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5jbHVkZVwiPT09dGhpcy5tfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5tPWE/XCJpbmNsdWRlXCI6XCJzYW1lLW9yaWdpblwiO319KTt2YXIgcmQ9bC5KU09OLnBhcnNlO2Z1bmN0aW9uIFAoYSl7Qi5jYWxsKHRoaXMpO3RoaXMuaGVhZGVycz1uZXcgTWFwO3RoaXMudT1hfHxudWxsO3RoaXMuaD0hMTt0aGlzLkM9dGhpcy5nPW51bGw7dGhpcy5JPVwiXCI7dGhpcy5tPTA7dGhpcy5qPVwiXCI7dGhpcy5sPXRoaXMuRz10aGlzLnY9dGhpcy5GPSExO3RoaXMuQj0wO3RoaXMuQT1udWxsO3RoaXMuSz1zZDt0aGlzLkw9dGhpcy5NPSExO31yKFAsQik7dmFyIHNkPVwiXCIsdGQ9L15odHRwcz8kL2ksdWQ9W1wiUE9TVFwiLFwiUFVUXCJdO2s9UC5wcm90b3R5cGU7ay5PYT1mdW5jdGlvbihhKXt0aGlzLk09YTt9O1xuay5oYT1mdW5jdGlvbihhLGIsYyxkKXtpZih0aGlzLmcpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrdGhpcy5JK1wiOyBuZXdVcmk9XCIrYSk7Yj1iP2IudG9VcHBlckNhc2UoKTpcIkdFVFwiO3RoaXMuST1hO3RoaXMuaj1cIlwiO3RoaXMubT0wO3RoaXMuRj0hMTt0aGlzLmg9ITA7dGhpcy5nPXRoaXMudT90aGlzLnUuZygpOiRiLmcoKTt0aGlzLkM9dGhpcy51P1ZiKHRoaXMudSk6VmIoJGIpO3RoaXMuZy5vbnJlYWR5c3RhdGVjaGFuZ2U9cSh0aGlzLkxhLHRoaXMpO3RyeXt0aGlzLkc9ITAsdGhpcy5nLm9wZW4oYixTdHJpbmcoYSksITApLHRoaXMuRz0hMTt9Y2F0Y2goZil7dmQodGhpcyxmKTtyZXR1cm59YT1jfHxcIlwiO2M9bmV3IE1hcCh0aGlzLmhlYWRlcnMpO2lmKGQpaWYoT2JqZWN0LmdldFByb3RvdHlwZU9mKGQpPT09T2JqZWN0LnByb3RvdHlwZSlmb3IodmFyIGUgaW4gZCljLnNldChlLGRbZV0pO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT09XG50eXBlb2YgZC5rZXlzJiZcImZ1bmN0aW9uXCI9PT10eXBlb2YgZC5nZXQpZm9yKGNvbnN0IGYgb2YgZC5rZXlzKCkpYy5zZXQoZixkLmdldChmKSk7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gaW5wdXQgdHlwZSBmb3Igb3B0X2hlYWRlcnM6IFwiK1N0cmluZyhkKSk7ZD1BcnJheS5mcm9tKGMua2V5cygpKS5maW5kKGY9PlwiY29udGVudC10eXBlXCI9PWYudG9Mb3dlckNhc2UoKSk7ZT1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTshKDA8PWthKHVkLGIpKXx8ZHx8ZXx8Yy5zZXQoXCJDb250ZW50LVR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04XCIpO2Zvcihjb25zdCBbZixoXW9mIGMpdGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoZixoKTt0aGlzLksmJih0aGlzLmcucmVzcG9uc2VUeXBlPXRoaXMuSyk7XCJ3aXRoQ3JlZGVudGlhbHNcImluIHRoaXMuZyYmdGhpcy5nLndpdGhDcmVkZW50aWFscyE9PXRoaXMuTSYmKHRoaXMuZy53aXRoQ3JlZGVudGlhbHM9XG50aGlzLk0pO3RyeXt3ZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLkw9eGQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy51YSx0aGlzKSk6dGhpcy5BPXliKHRoaXMudWEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt2ZCh0aGlzLGYpO319O2Z1bmN0aW9uIHhkKGEpe3JldHVybiB6JiZcIm51bWJlclwiPT09dHlwZW9mIGEudGltZW91dCYmdm9pZCAwIT09YS5vbnRpbWVvdXR9ay51YT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiZ0aGlzLmcmJih0aGlzLmo9XCJUaW1lZCBvdXQgYWZ0ZXIgXCIrdGhpcy5CK1wibXMsIGFib3J0aW5nXCIsdGhpcy5tPTgsQyh0aGlzLFwidGltZW91dFwiKSx0aGlzLmFib3J0KDgpKTt9O2Z1bmN0aW9uIHZkKGEsYil7YS5oPSExO2EuZyYmKGEubD0hMCxhLmcuYWJvcnQoKSxhLmw9ITEpO2Euaj1iO2EubT01O3lkKGEpO3pkKGEpO31cbmZ1bmN0aW9uIHlkKGEpe2EuRnx8KGEuRj0hMCxDKGEsXCJjb21wbGV0ZVwiKSxDKGEsXCJlcnJvclwiKSk7fWsuYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5nJiZ0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSx0aGlzLm09YXx8NyxDKHRoaXMsXCJjb21wbGV0ZVwiKSxDKHRoaXMsXCJhYm9ydFwiKSx6ZCh0aGlzKSk7fTtrLk49ZnVuY3Rpb24oKXt0aGlzLmcmJih0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSksemQodGhpcywhMCkpO1AuJC5OLmNhbGwodGhpcyk7fTtrLkxhPWZ1bmN0aW9uKCl7dGhpcy5zfHwodGhpcy5HfHx0aGlzLnZ8fHRoaXMubD9BZCh0aGlzKTp0aGlzLmtiKCkpO307ay5rYj1mdW5jdGlvbigpe0FkKHRoaXMpO307XG5mdW5jdGlvbiBBZChhKXtpZihhLmgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiYoIWEuQ1sxXXx8NCE9SChhKXx8MiE9YS5kYSgpKSlpZihhLnYmJjQ9PUgoYSkpeWIoYS5MYSwwLGEpO2Vsc2UgaWYoQyhhLFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT1IKGEpKXthLmg9ITE7dHJ5e2NvbnN0IGg9YS5kYSgpO2E6c3dpdGNoKGgpe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYj0hMDticmVhayBhO2RlZmF1bHQ6Yj0hMTt9dmFyIGM7aWYoIShjPWIpKXt2YXIgZDtpZihkPTA9PT1oKXt2YXIgZT1TdHJpbmcoYS5JKS5tYXRjaChMYylbMV18fG51bGw7IWUmJmwuc2VsZiYmbC5zZWxmLmxvY2F0aW9uJiYoZT1sLnNlbGYubG9jYXRpb24ucHJvdG9jb2wuc2xpY2UoMCwtMSkpO2Q9IXRkLnRlc3QoZT9lLnRvTG93ZXJDYXNlKCk6XCJcIik7fWM9ZDt9aWYoYylDKGEsXCJjb21wbGV0ZVwiKSxDKGEsXCJzdWNjZXNzXCIpO2Vsc2Uge2EubT1cbjY7dHJ5e3ZhciBmPTI8SChhKT9hLmcuc3RhdHVzVGV4dDpcIlwiO31jYXRjaChuKXtmPVwiXCI7fWEuaj1mK1wiIFtcIithLmRhKCkrXCJdXCI7eWQoYSk7fX1maW5hbGx5e3pkKGEpO319fWZ1bmN0aW9uIHpkKGEsYil7aWYoYS5nKXt3ZChhKTtjb25zdCBjPWEuZyxkPWEuQ1swXT8oKT0+e306bnVsbDthLmc9bnVsbDthLkM9bnVsbDtifHxDKGEsXCJyZWFkeVwiKTt0cnl7Yy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDt9Y2F0Y2goZSl7fX19ZnVuY3Rpb24gd2QoYSl7YS5nJiZhLkwmJihhLmcub250aW1lb3V0PW51bGwpO2EuQSYmKGwuY2xlYXJUaW1lb3V0KGEuQSksYS5BPW51bGwpO31rLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5nfTtmdW5jdGlvbiBIKGEpe3JldHVybiBhLmc/YS5nLnJlYWR5U3RhdGU6MH1rLmRhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPEgodGhpcyk/dGhpcy5nLnN0YXR1czotMX1jYXRjaChhKXtyZXR1cm4gLTF9fTtcbmsuamE9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZz90aGlzLmcucmVzcG9uc2VUZXh0OlwiXCJ9Y2F0Y2goYSl7cmV0dXJuIFwiXCJ9fTtrLldhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7dmFyIGI9dGhpcy5nLnJlc3BvbnNlVGV4dDthJiYwPT1iLmluZGV4T2YoYSkmJihiPWIuc3Vic3RyaW5nKGEubGVuZ3RoKSk7cmV0dXJuIHJkKGIpfX07ZnVuY3Rpb24gbWMoYSl7dHJ5e2lmKCFhLmcpcmV0dXJuIG51bGw7aWYoXCJyZXNwb25zZVwiaW4gYS5nKXJldHVybiBhLmcucmVzcG9uc2U7c3dpdGNoKGEuSyl7Y2FzZSBzZDpjYXNlIFwidGV4dFwiOnJldHVybiBhLmcucmVzcG9uc2VUZXh0O2Nhc2UgXCJhcnJheWJ1ZmZlclwiOmlmKFwibW96UmVzcG9uc2VBcnJheUJ1ZmZlclwiaW4gYS5nKXJldHVybiBhLmcubW96UmVzcG9uc2VBcnJheUJ1ZmZlcn1yZXR1cm4gbnVsbH1jYXRjaChiKXtyZXR1cm4gbnVsbH19XG5mdW5jdGlvbiB0YyhhKXtjb25zdCBiPXt9O2E9KGEuZyYmMjw9SChhKT9hLmcuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl8fFwiXCI6XCJcIikuc3BsaXQoXCJcXHJcXG5cIik7Zm9yKGxldCBkPTA7ZDxhLmxlbmd0aDtkKyspe2lmKHgoYVtkXSkpY29udGludWU7dmFyIGM9cWIoYVtkXSk7Y29uc3QgZT1jWzBdO2M9Y1sxXTtpZihcInN0cmluZ1wiIT09dHlwZW9mIGMpY29udGludWU7Yz1jLnRyaW0oKTtjb25zdCBmPWJbZV18fFtdO2JbZV09ZjtmLnB1c2goYyk7fU9hKGIsZnVuY3Rpb24oZCl7cmV0dXJuIGQuam9pbihcIiwgXCIpfSk7fWsuSWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtrLlNhPWZ1bmN0aW9uKCl7cmV0dXJuIFwic3RyaW5nXCI9PT10eXBlb2YgdGhpcy5qP3RoaXMuajpTdHJpbmcodGhpcy5qKX07ZnVuY3Rpb24gQmQoYSl7bGV0IGI9XCJcIjtOYShhLGZ1bmN0aW9uKGMsZCl7Yis9ZDtiKz1cIjpcIjtiKz1jO2IrPVwiXFxyXFxuXCI7fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gQ2QoYSxiLGMpe2E6e2ZvcihkIGluIGMpe3ZhciBkPSExO2JyZWFrIGF9ZD0hMDt9ZHx8KGM9QmQoYyksXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhudWxsIT1jJiZlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKSk6SyhhLGIsYykpO31mdW5jdGlvbiBEZChhLGIsYyl7cmV0dXJuIGMmJmMuaW50ZXJuYWxDaGFubmVsUGFyYW1zP2MuaW50ZXJuYWxDaGFubmVsUGFyYW1zW2FdfHxiOmJ9XG5mdW5jdGlvbiBFZChhKXt0aGlzLkdhPTA7dGhpcy5qPVtdO3RoaXMubD1uZXcgR2I7dGhpcy5wYT10aGlzLndhPXRoaXMuST10aGlzLlk9dGhpcy5nPXRoaXMuRGE9dGhpcy5GPXRoaXMubmE9dGhpcy5vPXRoaXMuVT10aGlzLnM9bnVsbDt0aGlzLmZiPXRoaXMuVz0wO3RoaXMuY2I9RGQoXCJmYWlsRmFzdFwiLCExLGEpO3RoaXMuRz10aGlzLnY9dGhpcy51PXRoaXMubT10aGlzLmg9bnVsbDt0aGlzLmFhPSEwO3RoaXMuRmE9dGhpcy5WPS0xO3RoaXMuYmE9dGhpcy5BPXRoaXMuQz0wO3RoaXMuYWI9RGQoXCJiYXNlUmV0cnlEZWxheU1zXCIsNUUzLGEpO3RoaXMuaGI9RGQoXCJyZXRyeURlbGF5U2VlZE1zXCIsMUU0LGEpO3RoaXMuZWI9RGQoXCJmb3J3YXJkQ2hhbm5lbE1heFJldHJpZXNcIiwyLGEpO3RoaXMueGE9RGQoXCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNcIiwyRTQsYSk7dGhpcy52YT1hJiZhLnhtbEh0dHBGYWN0b3J5fHx2b2lkIDA7dGhpcy5IYT1hJiZhLnVzZUZldGNoU3RyZWFtc3x8XG4hMTt0aGlzLkw9dm9pZCAwO3RoaXMuSj1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSz1cIlwiO3RoaXMuaT1uZXcgY2QoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkphPW5ldyBoZDt0aGlzLlA9YSYmYS5mYXN0SGFuZHNoYWtlfHwhMTt0aGlzLk89YSYmYS5lbmNvZGVJbml0TWVzc2FnZUhlYWRlcnN8fCExO3RoaXMuUCYmdGhpcy5PJiYodGhpcy5PPSExKTt0aGlzLmJiPWEmJmEuYmN8fCExO2EmJmEuRWEmJnRoaXMubC5FYSgpO2EmJmEuZm9yY2VMb25nUG9sbGluZyYmKHRoaXMuYWE9ITEpO3RoaXMuY2E9IXRoaXMuUCYmdGhpcy5hYSYmYSYmYS5kZXRlY3RCdWZmZXJpbmdQcm94eXx8ITE7dGhpcy5xYT12b2lkIDA7YSYmYS5sb25nUG9sbGluZ1RpbWVvdXQmJjA8YS5sb25nUG9sbGluZ1RpbWVvdXQmJih0aGlzLnFhPWEubG9uZ1BvbGxpbmdUaW1lb3V0KTt0aGlzLm9hPXZvaWQgMDt0aGlzLlM9MDt0aGlzLk09ITE7dGhpcy5tYT10aGlzLkI9bnVsbDt9XG5rPUVkLnByb3RvdHlwZTtrLnJhPTg7ay5IPTE7ZnVuY3Rpb24gSGMoYSl7RmQoYSk7aWYoMz09YS5IKXt2YXIgYj1hLlcrKyxjPUcoYS5JKTtLKGMsXCJTSURcIixhLkspO0soYyxcIlJJRFwiLGIpO0soYyxcIlRZUEVcIixcInRlcm1pbmF0ZVwiKTtHZChhLGMpO2I9bmV3IGJjKGEsYS5sLGIpO2IuTD0yO2Iudj1oYyhHKGMpKTtjPSExO2lmKGwubmF2aWdhdG9yJiZsLm5hdmlnYXRvci5zZW5kQmVhY29uKXRyeXtjPWwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi52LnRvU3RyaW5nKCksXCJcIik7fWNhdGNoKGQpe30hYyYmbC5JbWFnZSYmKChuZXcgSW1hZ2UpLnNyYz1iLnYsYz0hMCk7Y3x8KGIuZz1sYyhiLmwsbnVsbCksYi5nLmhhKGIudikpO2IuRz1EYXRlLm5vdygpO2pjKGIpO31IZChhKTt9ZnVuY3Rpb24gemMoYSl7YS5nJiYodmMoYSksYS5nLmNhbmNlbCgpLGEuZz1udWxsKTt9XG5mdW5jdGlvbiBGZChhKXt6YyhhKTthLnUmJihsLmNsZWFyVGltZW91dChhLnUpLGEudT1udWxsKTt5YyhhKTthLmkuY2FuY2VsKCk7YS5tJiYoXCJudW1iZXJcIj09PXR5cGVvZiBhLm0mJmwuY2xlYXJUaW1lb3V0KGEubSksYS5tPW51bGwpO31mdW5jdGlvbiBHYyhhKXtpZighZWQoYS5pKSYmIWEubSl7YS5tPSEwO3ZhciBiPWEuTmE7c2J8fHZiKCk7dGJ8fChzYigpLHRiPSEwKTttYi5hZGQoYixhKTthLkM9MDt9fWZ1bmN0aW9uIElkKGEsYil7aWYoQmMoYS5pKT49YS5pLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEuaj1iLkYuY29uY2F0KGEuaiksITA7aWYoMT09YS5IfHwyPT1hLkh8fGEuQz49KGEuY2I/MDphLmViKSlyZXR1cm4gITE7YS5tPVJiKHEoYS5OYSxhLGIpLEpkKGEsYS5DKSk7YS5DKys7cmV0dXJuICEwfVxuay5OYT1mdW5jdGlvbihhKXtpZih0aGlzLm0paWYodGhpcy5tPW51bGwsMT09dGhpcy5IKXtpZighYSl7dGhpcy5XPU1hdGguZmxvb3IoMUU1Kk1hdGgucmFuZG9tKCkpO2E9dGhpcy5XKys7Y29uc3QgZT1uZXcgYmModGhpcyx0aGlzLmwsYSk7bGV0IGY9dGhpcy5zO3RoaXMuVSYmKGY/KGY9UGEoZiksUmEoZix0aGlzLlUpKTpmPXRoaXMuVSk7bnVsbCE9PXRoaXMub3x8dGhpcy5PfHwoZS5JPWYsZj1udWxsKTtpZih0aGlzLlApYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMuai5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmpbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5tYXAmJihkPWQubWFwLl9fZGF0YV9fLFwic3RyaW5nXCI9PT10eXBlb2YgZCkpe2Q9ZC5sZW5ndGg7YnJlYWsgYn1kPXZvaWQgMDt9aWYodm9pZCAwPT09ZClicmVhaztiKz1kO2lmKDQwOTY8Yil7Yj1jO2JyZWFrIGF9aWYoNDA5Nj09PWJ8fGM9PT10aGlzLmoubGVuZ3RoLTEpe2I9YysxO2JyZWFrIGF9fWI9MUUzO31lbHNlIGI9XG4xRTM7Yj1LZCh0aGlzLGUsYik7Yz1HKHRoaXMuSSk7SyhjLFwiUklEXCIsYSk7SyhjLFwiQ1ZFUlwiLDIyKTt0aGlzLkYmJksoYyxcIlgtSFRUUC1TZXNzaW9uLUlkXCIsdGhpcy5GKTtHZCh0aGlzLGMpO2YmJih0aGlzLk8/Yj1cImhlYWRlcnM9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhCZChmKSkpK1wiJlwiK2I6dGhpcy5vJiZDZChjLHRoaXMubyxmKSk7Q2ModGhpcy5pLGUpO3RoaXMuYmImJksoYyxcIlRZUEVcIixcImluaXRcIik7dGhpcy5QPyhLKGMsXCIkcmVxXCIsYiksSyhjLFwiU0lEXCIsXCJudWxsXCIpLGUuYWE9ITAsZ2MoZSxjLG51bGwpKTpnYyhlLGMsYik7dGhpcy5IPTI7fX1lbHNlIDM9PXRoaXMuSCYmKGE/TGQodGhpcyxhKTowPT10aGlzLmoubGVuZ3RofHxlZCh0aGlzLmkpfHxMZCh0aGlzKSk7fTtcbmZ1bmN0aW9uIExkKGEsYil7dmFyIGM7Yj9jPWIubTpjPWEuVysrO2NvbnN0IGQ9RyhhLkkpO0soZCxcIlNJRFwiLGEuSyk7SyhkLFwiUklEXCIsYyk7SyhkLFwiQUlEXCIsYS5WKTtHZChhLGQpO2EubyYmYS5zJiZDZChkLGEubyxhLnMpO2M9bmV3IGJjKGEsYS5sLGMsYS5DKzEpO251bGw9PT1hLm8mJihjLkk9YS5zKTtiJiYoYS5qPWIuRi5jb25jYXQoYS5qKSk7Yj1LZChhLGMsMUUzKTtjLnNldFRpbWVvdXQoTWF0aC5yb3VuZCguNSphLnhhKStNYXRoLnJvdW5kKC41KmEueGEqTWF0aC5yYW5kb20oKSkpO0NjKGEuaSxjKTtnYyhjLGQsYik7fWZ1bmN0aW9uIEdkKGEsYil7YS5uYSYmTmEoYS5uYSxmdW5jdGlvbihjLGQpe0soYixkLGMpO30pO2EuaCYmS2Moe30sZnVuY3Rpb24oYyxkKXtLKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBLZChhLGIsYyl7Yz1NYXRoLm1pbihhLmoubGVuZ3RoLGMpO3ZhciBkPWEuaD9xKGEuaC5WYSxhLmgsYSk6bnVsbDthOnt2YXIgZT1hLmo7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmcsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBuPSEwO2ZvcihsZXQgdD0wO3Q8Yzt0Kyspe2xldCBtPWVbdF0uZztjb25zdCB1PWVbdF0ubWFwO20tPWY7aWYoMD5tKWY9TWF0aC5tYXgoMCxlW3RdLmctMTAwKSxuPSExO2Vsc2UgdHJ5e2lkKHUsaCxcInJlcVwiK20rXCJfXCIpO31jYXRjaChMKXtkJiZkKHUpO319aWYobil7ZD1oLmpvaW4oXCImXCIpO2JyZWFrIGF9fX1hPWEuai5zcGxpY2UoMCxjKTtiLkY9YTtyZXR1cm4gZH1mdW5jdGlvbiBGYyhhKXtpZighYS5nJiYhYS51KXthLmJhPTE7dmFyIGI9YS5NYTtzYnx8dmIoKTt0Ynx8KHNiKCksdGI9ITApO21iLmFkZChiLGEpO2EuQT0wO319XG5mdW5jdGlvbiBBYyhhKXtpZihhLmd8fGEudXx8Mzw9YS5BKXJldHVybiAhMTthLmJhKys7YS51PVJiKHEoYS5NYSxhKSxKZChhLGEuQSkpO2EuQSsrO3JldHVybiAhMH1rLk1hPWZ1bmN0aW9uKCl7dGhpcy51PW51bGw7TWQodGhpcyk7aWYodGhpcy5jYSYmISh0aGlzLk18fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5TKSl7dmFyIGE9Mip0aGlzLlM7dGhpcy5sLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5CPVJiKHEodGhpcy5qYix0aGlzKSxhKTt9fTtrLmpiPWZ1bmN0aW9uKCl7dGhpcy5CJiYodGhpcy5CPW51bGwsdGhpcy5sLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZW91dCByZWFjaGVkLlwiKSx0aGlzLmwuaW5mbyhcIkJ1ZmZlcmluZyBwcm94eSBkZXRlY3RlZCBhbmQgc3dpdGNoIHRvIGxvbmctcG9sbGluZyFcIiksdGhpcy5HPSExLHRoaXMuTT0hMCxGKDEwKSx6Yyh0aGlzKSxNZCh0aGlzKSk7fTtcbmZ1bmN0aW9uIHZjKGEpe251bGwhPWEuQiYmKGwuY2xlYXJUaW1lb3V0KGEuQiksYS5CPW51bGwpO31mdW5jdGlvbiBNZChhKXthLmc9bmV3IGJjKGEsYS5sLFwicnBjXCIsYS5iYSk7bnVsbD09PWEubyYmKGEuZy5JPWEucyk7YS5nLk89MDt2YXIgYj1HKGEud2EpO0soYixcIlJJRFwiLFwicnBjXCIpO0soYixcIlNJRFwiLGEuSyk7SyhiLFwiQUlEXCIsYS5WKTtLKGIsXCJDSVwiLGEuRz9cIjBcIjpcIjFcIik7IWEuRyYmYS5xYSYmSyhiLFwiVE9cIixhLnFhKTtLKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO0dkKGEsYik7YS5vJiZhLnMmJkNkKGIsYS5vLGEucyk7YS5MJiZhLmcuc2V0VGltZW91dChhLkwpO3ZhciBjPWEuZzthPWEucGE7Yy5MPTE7Yy52PWhjKEcoYikpO2Mucz1udWxsO2MuUz0hMDtpYyhjLGEpO31rLmliPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy52JiYodGhpcy52PW51bGwsemModGhpcyksQWModGhpcyksRigxOSkpO307XG5mdW5jdGlvbiB5YyhhKXtudWxsIT1hLnYmJihsLmNsZWFyVGltZW91dChhLnYpLGEudj1udWxsKTt9ZnVuY3Rpb24gc2MoYSxiKXt2YXIgYz1udWxsO2lmKGEuZz09Yil7eWMoYSk7dmMoYSk7YS5nPW51bGw7dmFyIGQ9Mjt9ZWxzZSBpZih4YyhhLmksYikpYz1iLkYsRWMoYS5pLGIpLGQ9MTtlbHNlIHJldHVybjtpZigwIT1hLkgpaWYoYi5pKWlmKDE9PWQpe2M9Yi5zP2Iucy5sZW5ndGg6MDtiPURhdGUubm93KCktYi5HO3ZhciBlPWEuQztkPU1iKCk7QyhkLG5ldyBRYihkLGMpKTtHYyhhKTt9ZWxzZSBGYyhhKTtlbHNlIGlmKGU9Yi5vLDM9PWV8fDA9PWUmJjA8Yi5jYXx8ISgxPT1kJiZJZChhLGIpfHwyPT1kJiZBYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaSxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOkooYSw1KTticmVhaztjYXNlIDQ6SihhLDEwKTticmVhaztjYXNlIDM6SihhLDYpO2JyZWFrO2RlZmF1bHQ6SihhLDIpO319XG5mdW5jdGlvbiBKZChhLGIpe2xldCBjPWEuYWIrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuaGIpO2EuaXNBY3RpdmUoKXx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gSihhLGIpe2EubC5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EuaCYmKGM9bnVsbCk7dmFyIGQ9cShhLnBiLGEpO2N8fChjPW5ldyBNKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxOYyhjLFwiaHR0cHNcIiksaGMoYykpO2pkKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBGKDIpO2EuSD0wO2EuaCYmYS5oLnphKGIpO0hkKGEpO0ZkKGEpO31rLnBiPWZ1bmN0aW9uKGEpe2E/KHRoaXMubC5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEYoMikpOih0aGlzLmwuaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksRigxKSk7fTtcbmZ1bmN0aW9uIEhkKGEpe2EuSD0wO2EubWE9W107aWYoYS5oKXtjb25zdCBiPWZkKGEuaSk7aWYoMCE9Yi5sZW5ndGh8fDAhPWEuai5sZW5ndGgpbmEoYS5tYSxiKSxuYShhLm1hLGEuaiksYS5pLmkubGVuZ3RoPTAsbWEoYS5qKSxhLmoubGVuZ3RoPTA7YS5oLnlhKCk7fX1mdW5jdGlvbiBEYyhhLGIsYyl7dmFyIGQ9YyBpbnN0YW5jZW9mIE0/RyhjKTpuZXcgTShjKTtpZihcIlwiIT1kLmcpYiYmKGQuZz1iK1wiLlwiK2QuZyksT2MoZCxkLm0pO2Vsc2Uge3ZhciBlPWwubG9jYXRpb247ZD1lLnByb3RvY29sO2I9Yj9iK1wiLlwiK2UuaG9zdG5hbWU6ZS5ob3N0bmFtZTtlPStlLnBvcnQ7dmFyIGY9bmV3IE0obnVsbCk7ZCYmTmMoZixkKTtiJiYoZi5nPWIpO2UmJk9jKGYsZSk7YyYmKGYubD1jKTtkPWY7fWM9YS5GO2I9YS5EYTtjJiZiJiZLKGQsYyxiKTtLKGQsXCJWRVJcIixhLnJhKTtHZChhLGQpO3JldHVybiBkfVxuZnVuY3Rpb24gbGMoYSxiLGMpe2lmKGImJiFhLkopdGhyb3cgRXJyb3IoXCJDYW4ndCBjcmVhdGUgc2Vjb25kYXJ5IGRvbWFpbiBjYXBhYmxlIFhocklvIG9iamVjdC5cIik7Yj1jJiZhLkhhJiYhYS52YT9uZXcgUChuZXcgbGQoe29iOiEwfSkpOm5ldyBQKGEudmEpO2IuT2EoYS5KKTtyZXR1cm4gYn1rLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5oJiZ0aGlzLmguaXNBY3RpdmUodGhpcyl9O2Z1bmN0aW9uIE5kKCl7fWs9TmQucHJvdG90eXBlO2suQmE9ZnVuY3Rpb24oKXt9O2suQWE9ZnVuY3Rpb24oKXt9O2suemE9ZnVuY3Rpb24oKXt9O2sueWE9ZnVuY3Rpb24oKXt9O2suaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gITB9O2suVmE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIE9kKCl7aWYoeiYmISgxMDw9TnVtYmVyKEZhKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9T2QucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFEoYSxiKX07XG5mdW5jdGlvbiBRKGEsYil7Qi5jYWxsKHRoaXMpO3RoaXMuZz1uZXcgRWQoYik7dGhpcy5sPWE7dGhpcy5oPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5nLnM9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIuQ2EmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi5DYTphPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIuQ2F9KTt0aGlzLmcuVT1cbmE7KGE9YiYmYi5jYykmJiF4KGEpJiYodGhpcy5nLm89YSk7dGhpcy5BPWImJmIuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy52PWImJmIuc2VuZFJhd0pzb258fCExOyhiPWImJmIuaHR0cFNlc3Npb25JZFBhcmFtKSYmIXgoYikmJih0aGlzLmcuRj1iLGE9dGhpcy5oLG51bGwhPT1hJiZiIGluIGEmJihhPXRoaXMuaCxiIGluIGEmJmRlbGV0ZSBhW2JdKSk7dGhpcy5qPW5ldyBSKHRoaXMpO31yKFEsQik7US5wcm90b3R5cGUubT1mdW5jdGlvbigpe3RoaXMuZy5oPXRoaXMuajt0aGlzLkEmJih0aGlzLmcuSj0hMCk7dmFyIGE9dGhpcy5nLGI9dGhpcy5sLGM9dGhpcy5ofHx2b2lkIDA7RigwKTthLlk9YjthLm5hPWN8fHt9O2EuRz1hLmFhO2EuST1EYyhhLG51bGwsYS5ZKTtHYyhhKTt9O1EucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7SGModGhpcy5nKTt9O1xuUS5wcm90b3R5cGUudT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmc7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYz17fTtjLl9fZGF0YV9fPWE7YT1jO31lbHNlIHRoaXMudiYmKGM9e30sYy5fX2RhdGFfXz1qYihhKSxhPWMpO2Iuai5wdXNoKG5ldyBiZChiLmZiKyssYSkpOzM9PWIuSCYmR2MoYik7fTtRLnByb3RvdHlwZS5OPWZ1bmN0aW9uKCl7dGhpcy5nLmg9bnVsbDtkZWxldGUgdGhpcy5qO0hjKHRoaXMuZyk7ZGVsZXRlIHRoaXMuZztRLiQuTi5jYWxsKHRoaXMpO307XG5mdW5jdGlvbiBQZChhKXtZYi5jYWxsKHRoaXMpO2EuX19oZWFkZXJzX18mJih0aGlzLmhlYWRlcnM9YS5fX2hlYWRlcnNfXyx0aGlzLnN0YXR1c0NvZGU9YS5fX3N0YXR1c19fLGRlbGV0ZSBhLl9faGVhZGVyc19fLGRlbGV0ZSBhLl9fc3RhdHVzX18pO3ZhciBiPWEuX19zbV9fO2lmKGIpe2E6e2Zvcihjb25zdCBjIGluIGIpe2E9YzticmVhayBhfWE9dm9pZCAwO31pZih0aGlzLmk9YSlhPXRoaXMuaSxiPW51bGwhPT1iJiZhIGluIGI/YlthXTp2b2lkIDA7dGhpcy5kYXRhPWI7fWVsc2UgdGhpcy5kYXRhPWE7fXIoUGQsWWIpO2Z1bmN0aW9uIFFkKCl7WmIuY2FsbCh0aGlzKTt0aGlzLnN0YXR1cz0xO31yKFFkLFpiKTtmdW5jdGlvbiBSKGEpe3RoaXMuZz1hO31yKFIsTmQpO1IucHJvdG90eXBlLkJhPWZ1bmN0aW9uKCl7Qyh0aGlzLmcsXCJhXCIpO307Ui5wcm90b3R5cGUuQWE9ZnVuY3Rpb24oYSl7Qyh0aGlzLmcsbmV3IFBkKGEpKTt9O1xuUi5wcm90b3R5cGUuemE9ZnVuY3Rpb24oYSl7Qyh0aGlzLmcsbmV3IFFkKCkpO307Ui5wcm90b3R5cGUueWE9ZnVuY3Rpb24oKXtDKHRoaXMuZyxcImJcIik7fTtmdW5jdGlvbiBSZCgpe3RoaXMuYmxvY2tTaXplPS0xO31mdW5jdGlvbiBTKCl7dGhpcy5ibG9ja1NpemU9LTE7dGhpcy5ibG9ja1NpemU9NjQ7dGhpcy5nPUFycmF5KDQpO3RoaXMubT1BcnJheSh0aGlzLmJsb2NrU2l6ZSk7dGhpcy5pPXRoaXMuaD0wO3RoaXMucmVzZXQoKTt9cihTLFJkKTtTLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuZ1swXT0xNzMyNTg0MTkzO3RoaXMuZ1sxXT00MDIzMjMzNDE3O3RoaXMuZ1syXT0yNTYyMzgzMTAyO3RoaXMuZ1szXT0yNzE3MzM4Nzg7dGhpcy5pPXRoaXMuaD0wO307XG5mdW5jdGlvbiBTZChhLGIsYyl7Y3x8KGM9MCk7dmFyIGQ9QXJyYXkoMTYpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYilmb3IodmFyIGU9MDsxNj5lOysrZSlkW2VdPWIuY2hhckNvZGVBdChjKyspfGIuY2hhckNvZGVBdChjKyspPDw4fGIuY2hhckNvZGVBdChjKyspPDwxNnxiLmNoYXJDb2RlQXQoYysrKTw8MjQ7ZWxzZSBmb3IoZT0wOzE2PmU7KytlKWRbZV09YltjKytdfGJbYysrXTw8OHxiW2MrK108PDE2fGJbYysrXTw8MjQ7Yj1hLmdbMF07Yz1hLmdbMV07ZT1hLmdbMl07dmFyIGY9YS5nWzNdO3ZhciBoPWIrKGZeYyYoZV5mKSkrZFswXSszNjE0MDkwMzYwJjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFsxXSszOTA1NDAyNzEwJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fGg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbMl0rNjA2MTA1ODE5JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7XG5oPWMrKGJeZSYoZl5iKSkrZFszXSszMjUwNDQxOTY2JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhmXmMmKGVeZikpK2RbNF0rNDExODU0ODM5OSY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbNV0rMTIwMDA4MDQyNiY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTImNDI5NDk2NzI5NXxoPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzZdKzI4MjE3MzU5NTUmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtoPWMrKGJeZSYoZl5iKSkrZFs3XSs0MjQ5MjYxMzEzJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhmXmMmKGVeZikpK2RbOF0rMTc3MDAzNTQxNiY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbOV0rMjMzNjU1Mjg3OSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTImNDI5NDk2NzI5NXxcbmg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbMTBdKzQyOTQ5MjUyMzMmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtoPWMrKGJeZSYoZl5iKSkrZFsxMV0rMjMwNDU2MzEzNCY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZl5jJihlXmYpKStkWzEyXSsxODA0NjAzNjgyJjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFsxM10rNDI1NDYyNjE5NSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTImNDI5NDk2NzI5NXxoPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzE0XSsyNzkyOTY1MDA2JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7aD1jKyhiXmUmKGZeYikpK2RbMTVdKzEyMzY1MzUzMjkmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGVeZiYoY15lKSkrZFsxXSs0MTI5MTcwNzg2JjQyOTQ5NjcyOTU7Yj1jKyhoPDxcbjUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzZdKzMyMjU0NjU2NjQmNDI5NDk2NzI5NTtmPWIrKGg8PDkmNDI5NDk2NzI5NXxoPj4+MjMpO2g9ZSsoYl5jJihmXmIpKStkWzExXSs2NDM3MTc3MTMmNDI5NDk2NzI5NTtlPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFswXSszOTIxMDY5OTk0JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMCY0Mjk0OTY3Mjk1fGg+Pj4xMik7aD1iKyhlXmYmKGNeZSkpK2RbNV0rMzU5MzQwODYwNSY0Mjk0OTY3Mjk1O2I9YysoaDw8NSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbMTBdKzM4MDE2MDgzJjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFsxNV0rMzYzNDQ4ODk2MSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzRdKzM4ODk0Mjk0NDgmNDI5NDk2NzI5NTtjPVxuZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoZV5mJihjXmUpKStkWzldKzU2ODQ0NjQzOCY0Mjk0OTY3Mjk1O2I9YysoaDw8NSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbMTRdKzMyNzUxNjM2MDYmNDI5NDk2NzI5NTtmPWIrKGg8PDkmNDI5NDk2NzI5NXxoPj4+MjMpO2g9ZSsoYl5jJihmXmIpKStkWzNdKzQxMDc2MDMzMzUmNDI5NDk2NzI5NTtlPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFs4XSsxMTYzNTMxNTAxJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMCY0Mjk0OTY3Mjk1fGg+Pj4xMik7aD1iKyhlXmYmKGNeZSkpK2RbMTNdKzI4NTAyODU4MjkmNDI5NDk2NzI5NTtiPWMrKGg8PDUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzJdKzQyNDM1NjM1MTImNDI5NDk2NzI5NTtmPWIrKGg8PDkmNDI5NDk2NzI5NXxoPj4+MjMpO2g9ZSsoYl5jJihmXmIpKStkWzddKzE3MzUzMjg0NzMmNDI5NDk2NzI5NTtcbmU9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzEyXSsyMzY4MzU5NTYyJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMCY0Mjk0OTY3Mjk1fGg+Pj4xMik7aD1iKyhjXmVeZikrZFs1XSs0Mjk0NTg4NzM4JjQyOTQ5NjcyOTU7Yj1jKyhoPDw0JjQyOTQ5NjcyOTV8aD4+PjI4KTtoPWYrKGJeY15lKStkWzhdKzIyNzIzOTI4MzMmNDI5NDk2NzI5NTtmPWIrKGg8PDExJjQyOTQ5NjcyOTV8aD4+PjIxKTtoPWUrKGZeYl5jKStkWzExXSsxODM5MDMwNTYyJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFsxNF0rNDI1OTY1Nzc0MCY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhjXmVeZikrZFsxXSsyNzYzOTc1MjM2JjQyOTQ5NjcyOTU7Yj1jKyhoPDw0JjQyOTQ5NjcyOTV8aD4+PjI4KTtoPWYrKGJeY15lKStkWzRdKzEyNzI4OTMzNTMmNDI5NDk2NzI5NTtmPWIrKGg8PDExJjQyOTQ5NjcyOTV8XG5oPj4+MjEpO2g9ZSsoZl5iXmMpK2RbN10rNDEzOTQ2OTY2NCY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbMTBdKzMyMDAyMzY2NTYmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoY15lXmYpK2RbMTNdKzY4MTI3OTE3NCY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFswXSszOTM2NDMwMDc0JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fGg+Pj4yMSk7aD1lKyhmXmJeYykrZFszXSszNTcyNDQ1MzE3JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFs2XSs3NjAyOTE4OSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhjXmVeZikrZFs5XSszNjU0NjAyODA5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw0JjQyOTQ5NjcyOTV8aD4+PjI4KTtoPWYrKGJeY15lKStkWzEyXStcbjM4NzMxNTE0NjEmNDI5NDk2NzI5NTtmPWIrKGg8PDExJjQyOTQ5NjcyOTV8aD4+PjIxKTtoPWUrKGZeYl5jKStkWzE1XSs1MzA3NDI1MjAmNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzJdKzMyOTk2Mjg2NDUmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoZV4oY3x+ZikpK2RbMF0rNDA5NjMzNjQ1MiY0Mjk0OTY3Mjk1O2I9YysoaDw8NiY0Mjk0OTY3Mjk1fGg+Pj4yNik7aD1mKyhjXihifH5lKSkrZFs3XSsxMTI2ODkxNDE1JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFsxNF0rMjg3ODYxMjM5MSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTUmNDI5NDk2NzI5NXxoPj4+MTcpO2g9YysoZl4oZXx+YikpK2RbNV0rNDIzNzUzMzI0MSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjEmNDI5NDk2NzI5NXxoPj4+MTEpO2g9YisoZV4oY3x+ZikpK2RbMTJdKzE3MDA0ODU1NzEmXG40Mjk0OTY3Mjk1O2I9YysoaDw8NiY0Mjk0OTY3Mjk1fGg+Pj4yNik7aD1mKyhjXihifH5lKSkrZFszXSsyMzk5OTgwNjkwJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFsxMF0rNDI5MzkxNTc3MyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTUmNDI5NDk2NzI5NXxoPj4+MTcpO2g9YysoZl4oZXx+YikpK2RbMV0rMjI0MDA0NDQ5NyY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjEmNDI5NDk2NzI5NXxoPj4+MTEpO2g9YisoZV4oY3x+ZikpK2RbOF0rMTg3MzMxMzM1OSY0Mjk0OTY3Mjk1O2I9YysoaDw8NiY0Mjk0OTY3Mjk1fGg+Pj4yNik7aD1mKyhjXihifH5lKSkrZFsxNV0rNDI2NDM1NTU1MiY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbNl0rMjczNDc2ODkxNiY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTUmNDI5NDk2NzI5NXxoPj4+MTcpO2g9YysoZl4oZXx+YikpK2RbMTNdKzEzMDkxNTE2NDkmXG40Mjk0OTY3Mjk1O2M9ZSsoaDw8MjEmNDI5NDk2NzI5NXxoPj4+MTEpO2g9YisoZV4oY3x+ZikpK2RbNF0rNDE0OTQ0NDIyNiY0Mjk0OTY3Mjk1O2I9YysoaDw8NiY0Mjk0OTY3Mjk1fGg+Pj4yNik7aD1mKyhjXihifH5lKSkrZFsxMV0rMzE3NDc1NjkxNyY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbMl0rNzE4Nzg3MjU5JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFs5XSszOTUxNDgxNzQ1JjQyOTQ5NjcyOTU7YS5nWzBdPWEuZ1swXStiJjQyOTQ5NjcyOTU7YS5nWzFdPWEuZ1sxXSsoZSsoaDw8MjEmNDI5NDk2NzI5NXxoPj4+MTEpKSY0Mjk0OTY3Mjk1O2EuZ1syXT1hLmdbMl0rZSY0Mjk0OTY3Mjk1O2EuZ1szXT1hLmdbM10rZiY0Mjk0OTY3Mjk1O31cblMucHJvdG90eXBlLmo9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj1hLmxlbmd0aCk7Zm9yKHZhciBjPWItdGhpcy5ibG9ja1NpemUsZD10aGlzLm0sZT10aGlzLmgsZj0wO2Y8Yjspe2lmKDA9PWUpZm9yKDtmPD1jOylTZCh0aGlzLGEsZiksZis9dGhpcy5ibG9ja1NpemU7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWZvcig7ZjxiOyl7aWYoZFtlKytdPWEuY2hhckNvZGVBdChmKyspLGU9PXRoaXMuYmxvY2tTaXplKXtTZCh0aGlzLGQpO2U9MDticmVha319ZWxzZSBmb3IoO2Y8YjspaWYoZFtlKytdPWFbZisrXSxlPT10aGlzLmJsb2NrU2l6ZSl7U2QodGhpcyxkKTtlPTA7YnJlYWt9fXRoaXMuaD1lO3RoaXMuaSs9Yjt9O1xuUy5wcm90b3R5cGUubD1mdW5jdGlvbigpe3ZhciBhPUFycmF5KCg1Nj50aGlzLmg/dGhpcy5ibG9ja1NpemU6Mip0aGlzLmJsb2NrU2l6ZSktdGhpcy5oKTthWzBdPTEyODtmb3IodmFyIGI9MTtiPGEubGVuZ3RoLTg7KytiKWFbYl09MDt2YXIgYz04KnRoaXMuaTtmb3IoYj1hLmxlbmd0aC04O2I8YS5sZW5ndGg7KytiKWFbYl09YyYyNTUsYy89MjU2O3RoaXMuaihhKTthPUFycmF5KDE2KTtmb3IoYj1jPTA7ND5iOysrYilmb3IodmFyIGQ9MDszMj5kO2QrPTgpYVtjKytdPXRoaXMuZ1tiXT4+PmQmMjU1O3JldHVybiBhfTtmdW5jdGlvbiBUKGEsYil7dGhpcy5oPWI7Zm9yKHZhciBjPVtdLGQ9ITAsZT1hLmxlbmd0aC0xOzA8PWU7ZS0tKXt2YXIgZj1hW2VdfDA7ZCYmZj09Ynx8KGNbZV09ZixkPSExKTt9dGhpcy5nPWM7fXZhciBzYT17fTtmdW5jdGlvbiBUZChhKXtyZXR1cm4gLTEyODw9YSYmMTI4PmE/cmEoYSxmdW5jdGlvbihiKXtyZXR1cm4gbmV3IFQoW2J8MF0sMD5iPy0xOjApfSk6bmV3IFQoW2F8MF0sMD5hPy0xOjApfWZ1bmN0aW9uIFUoYSl7aWYoaXNOYU4oYSl8fCFpc0Zpbml0ZShhKSlyZXR1cm4gVjtpZigwPmEpcmV0dXJuIFcoVSgtYSkpO2Zvcih2YXIgYj1bXSxjPTEsZD0wO2E+PWM7ZCsrKWJbZF09YS9jfDAsYyo9VWQ7cmV0dXJuIG5ldyBUKGIsMCl9XG5mdW5jdGlvbiBWZChhLGIpe2lmKDA9PWEubGVuZ3RoKXRocm93IEVycm9yKFwibnVtYmVyIGZvcm1hdCBlcnJvcjogZW1wdHkgc3RyaW5nXCIpO2I9Ynx8MTA7aWYoMj5ifHwzNjxiKXRocm93IEVycm9yKFwicmFkaXggb3V0IG9mIHJhbmdlOiBcIitiKTtpZihcIi1cIj09YS5jaGFyQXQoMCkpcmV0dXJuIFcoVmQoYS5zdWJzdHJpbmcoMSksYikpO2lmKDA8PWEuaW5kZXhPZihcIi1cIikpdGhyb3cgRXJyb3IoJ251bWJlciBmb3JtYXQgZXJyb3I6IGludGVyaW9yIFwiLVwiIGNoYXJhY3RlcicpO2Zvcih2YXIgYz1VKE1hdGgucG93KGIsOCkpLGQ9VixlPTA7ZTxhLmxlbmd0aDtlKz04KXt2YXIgZj1NYXRoLm1pbig4LGEubGVuZ3RoLWUpLGg9cGFyc2VJbnQoYS5zdWJzdHJpbmcoZSxlK2YpLGIpOzg+Zj8oZj1VKE1hdGgucG93KGIsZikpLGQ9ZC5SKGYpLmFkZChVKGgpKSk6KGQ9ZC5SKGMpLGQ9ZC5hZGQoVShoKSkpO31yZXR1cm4gZH1cbnZhciBVZD00Mjk0OTY3Mjk2LFY9VGQoMCksV2Q9VGQoMSksWGQ9VGQoMTY3NzcyMTYpO2s9VC5wcm90b3R5cGU7ay5lYT1mdW5jdGlvbigpe2lmKFgodGhpcykpcmV0dXJuIC1XKHRoaXMpLmVhKCk7Zm9yKHZhciBhPTAsYj0xLGM9MDtjPHRoaXMuZy5sZW5ndGg7YysrKXt2YXIgZD10aGlzLkQoYyk7YSs9KDA8PWQ/ZDpVZCtkKSpiO2IqPVVkO31yZXR1cm4gYX07XG5rLnRvU3RyaW5nPWZ1bmN0aW9uKGEpe2E9YXx8MTA7aWYoMj5hfHwzNjxhKXRocm93IEVycm9yKFwicmFkaXggb3V0IG9mIHJhbmdlOiBcIithKTtpZihZKHRoaXMpKXJldHVybiBcIjBcIjtpZihYKHRoaXMpKXJldHVybiBcIi1cIitXKHRoaXMpLnRvU3RyaW5nKGEpO2Zvcih2YXIgYj1VKE1hdGgucG93KGEsNikpLGM9dGhpcyxkPVwiXCI7Oyl7dmFyIGU9WWQoYyxiKS5nO2M9WmQoYyxlLlIoYikpO3ZhciBmPSgoMDxjLmcubGVuZ3RoP2MuZ1swXTpjLmgpPj4+MCkudG9TdHJpbmcoYSk7Yz1lO2lmKFkoYykpcmV0dXJuIGYrZDtmb3IoOzY+Zi5sZW5ndGg7KWY9XCIwXCIrZjtkPWYrZDt9fTtrLkQ9ZnVuY3Rpb24oYSl7cmV0dXJuIDA+YT8wOmE8dGhpcy5nLmxlbmd0aD90aGlzLmdbYV06dGhpcy5ofTtmdW5jdGlvbiBZKGEpe2lmKDAhPWEuaClyZXR1cm4gITE7Zm9yKHZhciBiPTA7YjxhLmcubGVuZ3RoO2IrKylpZigwIT1hLmdbYl0pcmV0dXJuICExO3JldHVybiAhMH1cbmZ1bmN0aW9uIFgoYSl7cmV0dXJuIC0xPT1hLmh9ay5YPWZ1bmN0aW9uKGEpe2E9WmQodGhpcyxhKTtyZXR1cm4gWChhKT8tMTpZKGEpPzA6MX07ZnVuY3Rpb24gVyhhKXtmb3IodmFyIGI9YS5nLmxlbmd0aCxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09fmEuZ1tkXTtyZXR1cm4gKG5ldyBUKGMsfmEuaCkpLmFkZChXZCl9ay5hYnM9ZnVuY3Rpb24oKXtyZXR1cm4gWCh0aGlzKT9XKHRoaXMpOnRoaXN9O2suYWRkPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wLGU9MDtlPD1iO2UrKyl7dmFyIGY9ZCsodGhpcy5EKGUpJjY1NTM1KSsoYS5EKGUpJjY1NTM1KSxoPShmPj4+MTYpKyh0aGlzLkQoZSk+Pj4xNikrKGEuRChlKT4+PjE2KTtkPWg+Pj4xNjtmJj02NTUzNTtoJj02NTUzNTtjW2VdPWg8PDE2fGY7fXJldHVybiBuZXcgVChjLGNbYy5sZW5ndGgtMV0mLTIxNDc0ODM2NDg/LTE6MCl9O1xuZnVuY3Rpb24gWmQoYSxiKXtyZXR1cm4gYS5hZGQoVyhiKSl9XG5rLlI9ZnVuY3Rpb24oYSl7aWYoWSh0aGlzKXx8WShhKSlyZXR1cm4gVjtpZihYKHRoaXMpKXJldHVybiBYKGEpP1codGhpcykuUihXKGEpKTpXKFcodGhpcykuUihhKSk7aWYoWChhKSlyZXR1cm4gVyh0aGlzLlIoVyhhKSkpO2lmKDA+dGhpcy5YKFhkKSYmMD5hLlgoWGQpKXJldHVybiBVKHRoaXMuZWEoKSphLmVhKCkpO2Zvcih2YXIgYj10aGlzLmcubGVuZ3RoK2EuZy5sZW5ndGgsYz1bXSxkPTA7ZDwyKmI7ZCsrKWNbZF09MDtmb3IoZD0wO2Q8dGhpcy5nLmxlbmd0aDtkKyspZm9yKHZhciBlPTA7ZTxhLmcubGVuZ3RoO2UrKyl7dmFyIGY9dGhpcy5EKGQpPj4+MTYsaD10aGlzLkQoZCkmNjU1MzUsbj1hLkQoZSk+Pj4xNix0PWEuRChlKSY2NTUzNTtjWzIqZCsyKmVdKz1oKnQ7JGQoYywyKmQrMiplKTtjWzIqZCsyKmUrMV0rPWYqdDskZChjLDIqZCsyKmUrMSk7Y1syKmQrMiplKzFdKz1oKm47JGQoYywyKmQrMiplKzEpO2NbMipkKzIqZSsyXSs9ZipuOyRkKGMsMipkKzIqZSsyKTt9Zm9yKGQ9XG4wO2Q8YjtkKyspY1tkXT1jWzIqZCsxXTw8MTZ8Y1syKmRdO2ZvcihkPWI7ZDwyKmI7ZCsrKWNbZF09MDtyZXR1cm4gbmV3IFQoYywwKX07ZnVuY3Rpb24gJGQoYSxiKXtmb3IoOyhhW2JdJjY1NTM1KSE9YVtiXTspYVtiKzFdKz1hW2JdPj4+MTYsYVtiXSY9NjU1MzUsYisrO31mdW5jdGlvbiBhZShhLGIpe3RoaXMuZz1hO3RoaXMuaD1iO31cbmZ1bmN0aW9uIFlkKGEsYil7aWYoWShiKSl0aHJvdyBFcnJvcihcImRpdmlzaW9uIGJ5IHplcm9cIik7aWYoWShhKSlyZXR1cm4gbmV3IGFlKFYsVik7aWYoWChhKSlyZXR1cm4gYj1ZZChXKGEpLGIpLG5ldyBhZShXKGIuZyksVyhiLmgpKTtpZihYKGIpKXJldHVybiBiPVlkKGEsVyhiKSksbmV3IGFlKFcoYi5nKSxiLmgpO2lmKDMwPGEuZy5sZW5ndGgpe2lmKFgoYSl8fFgoYikpdGhyb3cgRXJyb3IoXCJzbG93RGl2aWRlXyBvbmx5IHdvcmtzIHdpdGggcG9zaXRpdmUgaW50ZWdlcnMuXCIpO2Zvcih2YXIgYz1XZCxkPWI7MD49ZC5YKGEpOyljPWJlKGMpLGQ9YmUoZCk7dmFyIGU9WihjLDEpLGY9WihkLDEpO2Q9WihkLDIpO2ZvcihjPVooYywyKTshWShkKTspe3ZhciBoPWYuYWRkKGQpOzA+PWguWChhKSYmKGU9ZS5hZGQoYyksZj1oKTtkPVooZCwxKTtjPVooYywxKTt9Yj1aZChhLGUuUihiKSk7cmV0dXJuIG5ldyBhZShlLGIpfWZvcihlPVY7MDw9YS5YKGIpOyl7Yz1NYXRoLm1heCgxLE1hdGguZmxvb3IoYS5lYSgpL1xuYi5lYSgpKSk7ZD1NYXRoLmNlaWwoTWF0aC5sb2coYykvTWF0aC5MTjIpO2Q9NDg+PWQ/MTpNYXRoLnBvdygyLGQtNDgpO2Y9VShjKTtmb3IoaD1mLlIoYik7WChoKXx8MDxoLlgoYSk7KWMtPWQsZj1VKGMpLGg9Zi5SKGIpO1koZikmJihmPVdkKTtlPWUuYWRkKGYpO2E9WmQoYSxoKTt9cmV0dXJuIG5ldyBhZShlLGEpfWsuZ2I9ZnVuY3Rpb24oYSl7cmV0dXJuIFlkKHRoaXMsYSkuaH07ay5hbmQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsYS5nLmxlbmd0aCksYz1bXSxkPTA7ZDxiO2QrKyljW2RdPXRoaXMuRChkKSZhLkQoZCk7cmV0dXJuIG5ldyBUKGMsdGhpcy5oJmEuaCl9O2sub3I9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsYS5nLmxlbmd0aCksYz1bXSxkPTA7ZDxiO2QrKyljW2RdPXRoaXMuRChkKXxhLkQoZCk7cmV0dXJuIG5ldyBUKGMsdGhpcy5ofGEuaCl9O1xuay54b3I9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsYS5nLmxlbmd0aCksYz1bXSxkPTA7ZDxiO2QrKyljW2RdPXRoaXMuRChkKV5hLkQoZCk7cmV0dXJuIG5ldyBUKGMsdGhpcy5oXmEuaCl9O2Z1bmN0aW9uIGJlKGEpe2Zvcih2YXIgYj1hLmcubGVuZ3RoKzEsYz1bXSxkPTA7ZDxiO2QrKyljW2RdPWEuRChkKTw8MXxhLkQoZC0xKT4+PjMxO3JldHVybiBuZXcgVChjLGEuaCl9ZnVuY3Rpb24gWihhLGIpe3ZhciBjPWI+PjU7YiU9MzI7Zm9yKHZhciBkPWEuZy5sZW5ndGgtYyxlPVtdLGY9MDtmPGQ7ZisrKWVbZl09MDxiP2EuRChmK2MpPj4+YnxhLkQoZitjKzEpPDwzMi1iOmEuRChmK2MpO3JldHVybiBuZXcgVChlLGEuaCl9T2QucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9T2QucHJvdG90eXBlLmc7US5wcm90b3R5cGUuc2VuZD1RLnByb3RvdHlwZS51O1EucHJvdG90eXBlLm9wZW49US5wcm90b3R5cGUubTtRLnByb3RvdHlwZS5jbG9zZT1RLnByb3RvdHlwZS5jbG9zZTtTYi5OT19FUlJPUj0wO1NiLlRJTUVPVVQ9ODtTYi5IVFRQX0VSUk9SPTY7VGIuQ09NUExFVEU9XCJjb21wbGV0ZVwiO1diLkV2ZW50VHlwZT1YYjtYYi5PUEVOPVwiYVwiO1hiLkNMT1NFPVwiYlwiO1hiLkVSUk9SPVwiY1wiO1hiLk1FU1NBR0U9XCJkXCI7Qi5wcm90b3R5cGUubGlzdGVuPUIucHJvdG90eXBlLk87UC5wcm90b3R5cGUubGlzdGVuT25jZT1QLnByb3RvdHlwZS5QO1AucHJvdG90eXBlLmdldExhc3RFcnJvcj1QLnByb3RvdHlwZS5TYTtQLnByb3RvdHlwZS5nZXRMYXN0RXJyb3JDb2RlPVAucHJvdG90eXBlLklhO1AucHJvdG90eXBlLmdldFN0YXR1cz1QLnByb3RvdHlwZS5kYTtQLnByb3RvdHlwZS5nZXRSZXNwb25zZUpzb249UC5wcm90b3R5cGUuV2E7XG5QLnByb3RvdHlwZS5nZXRSZXNwb25zZVRleHQ9UC5wcm90b3R5cGUuamE7UC5wcm90b3R5cGUuc2VuZD1QLnByb3RvdHlwZS5oYTtQLnByb3RvdHlwZS5zZXRXaXRoQ3JlZGVudGlhbHM9UC5wcm90b3R5cGUuT2E7Uy5wcm90b3R5cGUuZGlnZXN0PVMucHJvdG90eXBlLmw7Uy5wcm90b3R5cGUucmVzZXQ9Uy5wcm90b3R5cGUucmVzZXQ7Uy5wcm90b3R5cGUudXBkYXRlPVMucHJvdG90eXBlLmo7VC5wcm90b3R5cGUuYWRkPVQucHJvdG90eXBlLmFkZDtULnByb3RvdHlwZS5tdWx0aXBseT1ULnByb3RvdHlwZS5SO1QucHJvdG90eXBlLm1vZHVsbz1ULnByb3RvdHlwZS5nYjtULnByb3RvdHlwZS5jb21wYXJlPVQucHJvdG90eXBlLlg7VC5wcm90b3R5cGUudG9OdW1iZXI9VC5wcm90b3R5cGUuZWE7VC5wcm90b3R5cGUudG9TdHJpbmc9VC5wcm90b3R5cGUudG9TdHJpbmc7VC5wcm90b3R5cGUuZ2V0Qml0cz1ULnByb3RvdHlwZS5EO1QuZnJvbU51bWJlcj1VO1QuZnJvbVN0cmluZz1WZDtcbnZhciBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0ID0gZXNtLmNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9kfTt2YXIgZ2V0U3RhdEV2ZW50VGFyZ2V0ID0gZXNtLmdldFN0YXRFdmVudFRhcmdldD1mdW5jdGlvbigpe3JldHVybiBNYigpfTt2YXIgRXJyb3JDb2RlID0gZXNtLkVycm9yQ29kZT1TYjt2YXIgRXZlbnRUeXBlID0gZXNtLkV2ZW50VHlwZT1UYjt2YXIgRXZlbnQgPSBlc20uRXZlbnQ9RTt2YXIgU3RhdCA9IGVzbS5TdGF0PXt4YjowLEFiOjEsQmI6MixVYjozLFpiOjQsV2I6NSxYYjo2LFZiOjcsVGI6OCxZYjo5LFBST1hZOjEwLE5PUFJPWFk6MTEsUmI6MTIsTmI6MTMsT2I6MTQsTWI6MTUsUGI6MTYsUWI6MTcsdGI6MTgsc2I6MTksdWI6MjB9O3ZhciBGZXRjaFhtbEh0dHBGYWN0b3J5ID0gZXNtLkZldGNoWG1sSHR0cEZhY3Rvcnk9bGQ7dmFyIFdlYkNoYW5uZWwgPSBlc20uV2ViQ2hhbm5lbD1XYjt2YXIgWGhySW8gPSBlc20uWGhySW89UDt2YXIgTWQ1ID0gZXNtLk1kNT1TO3ZhciBJbnRlZ2VyID0gZXNtLkludGVnZXI9VDtcblxuZXhwb3J0IHsgRXJyb3JDb2RlLCBFdmVudCwgRXZlbnRUeXBlLCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBJbnRlZ2VyLCBNZDUsIFN0YXQsIFdlYkNoYW5uZWwsIFhocklvLCBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0LCBlc20gYXMgZGVmYXVsdCwgZ2V0U3RhdEV2ZW50VGFyZ2V0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24sIF9nZXRQcm92aWRlciwgZ2V0QXBwLCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBTREtfVkVSU0lPTiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yLCBjcmVhdGVNb2NrVXNlclRva2VuLCBnZXRNb2R1bGFySW5zdGFuY2UsIGRlZXBFcXVhbCwgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0LCBnZXRVQSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzU2FmYXJpIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgSW50ZWdlciwgWGhySW8sIEV2ZW50VHlwZSwgRXJyb3JDb2RlLCBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0LCBnZXRTdGF0RXZlbnRUYXJnZXQsIFdlYkNoYW5uZWwsIEV2ZW50LCBTdGF0LCBNZDUgfSBmcm9tICdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyJztcblxuY29uc3QgdyA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgYSBudWxsYWJsZSBVSUQuIE1vc3RseSBleGlzdHMgdG8gbWFrZSBjb2RlIG1vcmVcbiAqIHJlYWRhYmxlLlxuICovXG5jbGFzcyBVc2VyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudWlkID0gZTtcbiAgICB9XG4gICAgaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLnVpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcbiAgICAgKiBkaWN0aW9uYXJ5LlxuICAgICAqLyAgICB0b0tleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRoZW50aWNhdGVkKCkgPyBcInVpZDpcIiArIHRoaXMudWlkIDogXCJhbm9ueW1vdXMtdXNlclwiO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUudWlkID09PSB0aGlzLnVpZDtcbiAgICB9XG59XG5cbi8qKiBBIHVzZXIgd2l0aCBhIG51bGwgVUlELiAqLyBVc2VyLlVOQVVUSEVOVElDQVRFRCA9IG5ldyBVc2VyKG51bGwpLCBcbi8vIFRPRE8obWlrZWxlaGVuKTogTG9vayBpbnRvIGdldHRpbmcgYSBwcm9wZXIgdWlkLWVxdWl2YWxlbnQgZm9yXG4vLyBub24tRmlyZWJhc2VBdXRoIHByb3ZpZGVycy5cblVzZXIuR09PR0xFX0NSRURFTlRJQUxTID0gbmV3IFVzZXIoXCJnb29nbGUtY3JlZGVudGlhbHMtdWlkXCIpLCBVc2VyLkZJUlNUX1BBUlRZID0gbmV3IFVzZXIoXCJmaXJzdC1wYXJ0eS11aWRcIiksIFxuVXNlci5NT0NLX1VTRVIgPSBuZXcgVXNlcihcIm1vY2stdXNlclwiKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBTID0gXCIxMC40LjBcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGIgPSBuZXcgTG9nZ2VyKFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcblxuLy8gSGVscGVyIG1ldGhvZHMgYXJlIG5lZWRlZCBiZWNhdXNlIHZhcmlhYmxlcyBjYW4ndCBiZSBleHBvcnRlZCBhcyByZWFkL3dyaXRlXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSB7XG4gICAgcmV0dXJuIGIubG9nTGV2ZWw7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmVyYm9zaXR5IG9mIENsb3VkIEZpcmVzdG9yZSBsb2dzIChkZWJ1ZywgZXJyb3IsIG9yIHNpbGVudCkuXG4gKlxuICogQHBhcmFtIGxvZ0xldmVsIC0gVGhlIHZlcmJvc2l0eSB5b3Ugc2V0IGZvciBhY3Rpdml0eSBhbmQgZXJyb3IgbG9nZ2luZy4gQ2FuXG4gKiAgIGJlIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAqXG4gKiAgIDx1bD5cbiAqICAgICA8bGk+YGRlYnVnYCBmb3IgdGhlIG1vc3QgdmVyYm9zZSBsb2dnaW5nIGxldmVsLCBwcmltYXJpbHkgZm9yXG4gKiAgICAgZGVidWdnaW5nLjwvbGk+XG4gKiAgICAgPGxpPmBlcnJvcmAgdG8gbG9nIGVycm9ycyBvbmx5LjwvbGk+XG4gKiAgICAgPGxpPjxjb2RlPmBzaWxlbnRgIHRvIHR1cm4gb2ZmIGxvZ2dpbmcuPC9saT5cbiAqICAgPC91bD5cbiAqLyBmdW5jdGlvbiBzZXRMb2dMZXZlbChlKSB7XG4gICAgYi5zZXRMb2dMZXZlbChlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2xvZ0RlYnVnKGUsIC4uLnQpIHtcbiAgICBpZiAoYi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gdC5tYXAoX19QUklWQVRFX2FyZ1RvU3RyaW5nKTtcbiAgICAgICAgYi5kZWJ1ZyhgRmlyZXN0b3JlICgke1N9KTogJHtlfWAsIC4uLm4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2xvZ0Vycm9yKGUsIC4uLnQpIHtcbiAgICBpZiAoYi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xuICAgICAgICBjb25zdCBuID0gdC5tYXAoX19QUklWQVRFX2FyZ1RvU3RyaW5nKTtcbiAgICAgICAgYi5lcnJvcihgRmlyZXN0b3JlICgke1N9KTogJHtlfWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9nV2FybihlLCAuLi50KSB7XG4gICAgaWYgKGIubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuV0FSTikge1xuICAgICAgICBjb25zdCBuID0gdC5tYXAoX19QUklWQVRFX2FyZ1RvU3RyaW5nKTtcbiAgICAgICAgYi53YXJuKGBGaXJlc3RvcmUgKCR7U30pOiAke2V9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXJnVG9TdHJpbmcoZSkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gZTtcbiAgICB0cnkge1xuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKiogRm9ybWF0cyBhbiBvYmplY3QgYXMgYSBKU09OIHN0cmluZywgc3VpdGFibGUgZm9yIGxvZ2dpbmcuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZm9ybWF0SlNPTihlKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgICAgIH0oZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICAvLyBDb252ZXJ0aW5nIHRvIEpTT04gZmFpbGVkLCBqdXN0IGxvZyB0aGUgb2JqZWN0IGRpcmVjdGx5XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVW5jb25kaXRpb25hbGx5IGZhaWxzLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICpcbiAqIFJldHVybnMgYG5ldmVyYCBhbmQgY2FuIGJlIHVzZWQgaW4gZXhwcmVzc2lvbnM6XG4gKiBAZXhhbXBsZVxuICogbGV0IGZ1dHVyZVZhciA9IGZhaWwoJ25vdCBpbXBsZW1lbnRlZCB5ZXQnKTtcbiAqLyBmdW5jdGlvbiBmYWlsKGUgPSBcIlVuZXhwZWN0ZWQgc3RhdGVcIikge1xuICAgIC8vIExvZyB0aGUgZmFpbHVyZSBpbiBhZGRpdGlvbiB0byB0aHJvdyBhbiBleGNlcHRpb24sIGp1c3QgaW4gY2FzZSB0aGVcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxuICAgIGNvbnN0IHQgPSBgRklSRVNUT1JFICgke1N9KSBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgZTtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZXN0b3JlRXJyb3IgaGVyZSBiZWNhdXNlIHRoZXNlIGFyZSBpbnRlcm5hbCBmYWlsdXJlc1xuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcbiAgICB0aHJvdyBfX1BSSVZBVEVfbG9nRXJyb3IodCksIG5ldyBFcnJvcih0KTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaGFyZEFzc2VydChlLCB0KSB7XG4gICAgZSB8fCBmYWlsKCk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBUaGUgY29kZSBvZiBjYWxsc2l0ZXMgaW52b2tpbmcgdGhpcyBmdW5jdGlvbiBhcmUgc3RyaXBwZWQgb3V0IGluIHByb2R1Y3Rpb25cbiAqIGJ1aWxkcy4gQW55IHNpZGUtZWZmZWN0cyBvZiBjb2RlIHdpdGhpbiB0aGUgZGVidWdBc3NlcnQoKSBpbnZvY2F0aW9uIHdpbGwgbm90XG4gKiBoYXBwZW4gaW4gdGhpcyBjYXNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kZWJ1Z0Fzc2VydChlLCB0KSB7XG4gICAgZSB8fCBmYWlsKCk7XG59XG5cbi8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLiBJbiBub24tcHJvZHVjdGlvbiBidWlsZHMsIHZlcmlmaWVzIHRoYXQgYG9iamAgaXMgYW5cbiAqIGluc3RhbmNlIG9mIGBUYCBiZWZvcmUgY2FzdGluZy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGVidWdDYXN0KGUsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnQpIHtcbiAgICByZXR1cm4gZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgRCA9IHtcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cbiAgICBPSzogXCJva1wiLFxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cbiAgICBDQU5DRUxMRUQ6IFwiY2FuY2VsbGVkXCIsXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXG4gICAgVU5LTk9XTjogXCJ1bmtub3duXCIsXG4gICAgLyoqXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXG4gICAgICogbmFtZSkuXG4gICAgICovXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogXCJpbnZhbGlkLWFyZ3VtZW50XCIsXG4gICAgLyoqXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xuICAgICAqIGV4cGlyZS5cbiAgICAgKi9cbiAgICBERUFETElORV9FWENFRURFRDogXCJkZWFkbGluZS1leGNlZWRlZFwiLFxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xuICAgIE5PVF9GT1VORDogXCJub3QtZm91bmRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIEFMUkVBRFlfRVhJU1RTOiBcImFscmVhZHktZXhpc3RzXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgRmlyZXN0b3JlRXJyb3IgZXh0ZW5kcyBGaXJlYmFzZUVycm9yIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBiYWNrZW5kIGVycm9yIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXJyb3IuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gZXJyb3IgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgdCkge1xuICAgICAgICBzdXBlcihlLCB0KSwgdGhpcy5jb2RlID0gZSwgdGhpcy5tZXNzYWdlID0gdCwgXG4gICAgICAgIC8vIEhBQ0s6IFdlIHdyaXRlIGEgdG9TdHJpbmcgcHJvcGVydHkgZGlyZWN0bHkgYmVjYXVzZSBFcnJvciBpcyBub3QgYSByZWFsXG4gICAgICAgIC8vIGNsYXNzIGFuZCBzbyBpbmhlcml0YW5jZSBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseS4gV2UgY291bGQgYWx0ZXJuYXRpdmVseVxuICAgICAgICAvLyBkbyB0aGUgc2FtZSBcImJhY2stZG9vciBpbmhlcml0YW5jZVwiIHRyaWNrIHRoYXQgRmlyZWJhc2VFcnJvciBkb2VzLlxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKCkgPT4gYCR7dGhpcy5uYW1lfTogW2NvZGU9JHt0aGlzLmNvZGV9XTogJHt0aGlzLm1lc3NhZ2V9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9EZWZlcnJlZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gZSwgdGhpcy5yZWplY3QgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfT0F1dGhUb2tlbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnVzZXIgPSB0LCB0aGlzLnR5cGUgPSBcIk9BdXRoXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHRoaXMuaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHtlfWApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgX19QUklWQVRFX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0KFVzZXIuVU5BVVRIRU5USUNBVEVEKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHJldHVybnMgYSBjb25zdGFudCB0b2tlbi4gVXNlZCBmb3JcbiAqIGVtdWxhdG9yIHRva2VuIG1vY2tpbmcuXG4gKi8gY2xhc3MgX19QUklWQVRFX0VtdWxhdG9yQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IHQsIFxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHQodGhpcy50b2tlbi51c2VyKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnQgPSBlLCBcbiAgICAgICAgLyoqIFRyYWNrcyB0aGUgY3VycmVudCBVc2VyLiAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gVXNlci5VTkFVVEhFTlRJQ0FURUQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRlciB1c2VkIHRvIGRldGVjdCBpZiB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSBhIGdldFRva2VuIHJlcXVlc3Qgd2FzXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pID0gMCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuaTtcbiAgICAgICAgLy8gQSBjaGFuZ2UgbGlzdGVuZXIgdGhhdCBwcmV2ZW50cyBkb3VibGUtZmlyaW5nIGZvciB0aGUgc2FtZSB0b2tlbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgY29uc3QgX19QUklWQVRFX2d1YXJkZWRDaGFuZ2VMaXN0ZW5lciA9IGUgPT4gdGhpcy5pICE9PSBuID8gKG4gPSB0aGlzLmksIFxuICAgICAgICB0KGUpKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAvLyBBIHByb21pc2UgdGhhdCBjYW4gYmUgd2FpdGVkIG9uIHRvIGJsb2NrIG9uIHRoZSBuZXh0IHRva2VuIGNoYW5nZS5cbiAgICAgICAgLy8gVGhpcyBwcm9taXNlIGlzIHJlLWNyZWF0ZWQgYWZ0ZXIgZWFjaCBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgbGV0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICB0aGlzLm8gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmkrKywgdGhpcy5jdXJyZW50VXNlciA9IHRoaXMudSgpLCByLnJlc29sdmUoKSwgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIFxuICAgICAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyKHRoaXMuY3VycmVudFVzZXIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9hd2FpdE5leHRUb2tlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSByO1xuICAgICAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdC5wcm9taXNlLCBhd2FpdCBfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyKHRoaXMuY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LCBfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoID0gZSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gZSwgXG4gICAgICAgICAgICB0aGlzLmF1dGguYWRkQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKSwgX19QUklWQVRFX2F3YWl0TmV4dFRva2VuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudC5vbkluaXQoKGUgPT4gX19QUklWQVRFX3JlZ2lzdGVyQXV0aChlKSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEF1dGggcmlnaHQgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrIGJlZm9yZSB3ZVxuICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0byBzdGFydCB1cCBpbiB1bmF1dGhlbnRpY2F0ZWQgbW9kZS5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy50LmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUgPyBfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoKGUpIDogKFxuICAgICAgICAgICAgICAgIC8vIElmIGF1dGggaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRoIGBudWxsYCB1c2VyXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggbm90IHlldCBkZXRlY3RlZFwiKSwgXG4gICAgICAgICAgICAgICAgci5yZXNvbHZlKCksIHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApLCBfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4oKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmksIHQgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA/IHRoaXMuYXV0aC5nZXRUb2tlbih0KS50aGVuKCh0ID0+IFxuICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxuICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cbiAgICAgICAgdGhpcy5pICE9PSBlID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLCBcbiAgICAgICAgdGhpcy5nZXRUb2tlbigpKSA6IHQgPyAoX19QUklWQVRFX2hhcmRBc3NlcnQoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC5hY2Nlc3NUb2tlbiksIFxuICAgICAgICBuZXcgX19QUklWQVRFX09BdXRoVG9rZW4odC5hY2Nlc3NUb2tlbiwgdGhpcy5jdXJyZW50VXNlcikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxuICAgIC8vIEF1dGguZ2V0VWlkKCkgY2FuIHJldHVybiBudWxsIGV2ZW4gd2l0aCBhIHVzZXIgbG9nZ2VkIGluLiBJdCBpcyBiZWNhdXNlXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgaW4gdGhlIEF1dGhUb2tlbkxpc3RlbmVyIGNhbGxiYWNrXG4gICAgLy8gdG8gZ3VhcmFudGVlIHRvIGdldCB0aGUgYWN0dWFsIHVzZXIuXG4gICAgdSgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuYXV0aCAmJiB0aGlzLmF1dGguZ2V0VWlkKCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChudWxsID09PSBlIHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpLCBuZXcgVXNlcihlKTtcbiAgICB9XG59XG5cbi8qXG4gKiBGaXJzdFBhcnR5VG9rZW4gcHJvdmlkZXMgYSBmcmVzaCB0b2tlbiBlYWNoIHRpbWUgaXRzIHZhbHVlXG4gKiBpcyByZXF1ZXN0ZWQsIGJlY2F1c2UgaWYgdGhlIHRva2VuIGlzIHRvbyBvbGQsIHJlcXVlc3RzIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKiBUZWNobmljYWxseSB0aGlzIG1heSBubyBsb25nZXIgYmUgbmVjZXNzYXJ5IHNpbmNlIHRoZSBTREsgc2hvdWxkIGdyYWNlZnVsbHlcbiAqIHJlY292ZXIgZnJvbSB1bmF1dGhlbnRpY2F0ZWQgZXJyb3JzIChzZWUgYi8zMzE0NzgxOCBmb3IgY29udGV4dCksIGJ1dCBpdCdzXG4gKiBzYWZlciB0byBrZWVwIHRoZSBpbXBsZW1lbnRhdGlvbiBhcy1pcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRmlyc3RQYXJ0eVRva2VuIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMubCA9IGUsIHRoaXMuaCA9IHQsIHRoaXMuUCA9IG4sIHRoaXMudHlwZSA9IFwiRmlyc3RQYXJ0eVwiLCB0aGlzLnVzZXIgPSBVc2VyLkZJUlNUX1BBUlRZLCBcbiAgICAgICAgdGhpcy5JID0gbmV3IE1hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBhdXRob3JpemF0aW9uIHRva2VuLCB1c2luZyBhIHByb3ZpZGVkIGZhY3RvcnkgZnVuY3Rpb24sIG9yIHJldHVyblxuICAgICAqIG51bGwuXG4gICAgICovICAgIFQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlAgPyB0aGlzLlAoKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCBoZWFkZXJzKCkge1xuICAgICAgICB0aGlzLkkuc2V0KFwiWC1Hb29nLUF1dGhVc2VyXCIsIHRoaXMubCk7XG4gICAgICAgIC8vIFVzZSBhcnJheSBub3RhdGlvbiB0byBwcmV2ZW50IG1pbmlmaWNhdGlvblxuICAgICAgICBjb25zdCBlID0gdGhpcy5UKCk7XG4gICAgICAgIHJldHVybiBlICYmIHRoaXMuSS5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGUpLCB0aGlzLmggJiYgdGhpcy5JLnNldChcIlgtR29vZy1JYW0tQXV0aG9yaXphdGlvbi1Ub2tlblwiLCB0aGlzLmgpLCBcbiAgICAgICAgdGhpcy5JO1xuICAgIH1cbn1cblxuLypcbiAqIFByb3ZpZGVzIHVzZXIgY3JlZGVudGlhbHMgcmVxdWlyZWQgZm9yIHRoZSBGaXJlc3RvcmUgSmF2YVNjcmlwdCBTREtcbiAqIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlciwgdXNpbmcgdGVjaG5pcXVlIHRoYXQgaXMgb25seSBhdmFpbGFibGVcbiAqIHRvIGFwcGxpY2F0aW9ucyBob3N0ZWQgYnkgR29vZ2xlLlxuICovIGNsYXNzIF9fUFJJVkFURV9GaXJzdFBhcnR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5sID0gZSwgdGhpcy5oID0gdCwgdGhpcy5QID0gbjtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IF9fUFJJVkFURV9GaXJzdFBhcnR5VG9rZW4odGhpcy5sLCB0aGlzLmgsIHRoaXMuUCkpO1xuICAgIH1cbiAgICBzdGFydChlLCB0KSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVpZC5cbiAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0KFVzZXIuRklSU1RfUEFSVFkpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxufVxuXG5jbGFzcyBBcHBDaGVja1Rva2VuIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlLCB0aGlzLnR5cGUgPSBcIkFwcENoZWNrXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIGUgJiYgZS5sZW5ndGggPiAwICYmIHRoaXMuaGVhZGVycy5zZXQoXCJ4LWZpcmViYXNlLWFwcGNoZWNrXCIsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0ZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuQSA9IGUsIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPSBudWxsLCB0aGlzLlIgPSBudWxsO1xuICAgIH1cbiAgICBzdGFydChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG9uVG9rZW5DaGFuZ2VkID0gZSA9PiB7XG4gICAgICAgICAgICBudWxsICE9IGUuZXJyb3IgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYEVycm9yIGdldHRpbmcgQXBwIENoZWNrIHRva2VuOyB1c2luZyBwbGFjZWhvbGRlciB0b2tlbiBpbnN0ZWFkLiBFcnJvcjogJHtlLmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICBjb25zdCBuID0gZS50b2tlbiAhPT0gdGhpcy5SO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuUiA9IGUudG9rZW4sIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBSZWNlaXZlZCAke24gPyBcIm5ld1wiIDogXCJleGlzdGluZ1wifSB0b2tlbi5gKSwgXG4gICAgICAgICAgICBuID8gdChlLnRva2VuKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm8gPSB0ID0+IHtcbiAgICAgICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gb25Ub2tlbkNoYW5nZWQodCkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgX19QUklWQVRFX3JlZ2lzdGVyQXBwQ2hlY2sgPSBlID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgZGV0ZWN0ZWRcIiksIHRoaXMuYXBwQ2hlY2sgPSBlLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2suYWRkVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLkEub25Jbml0KChlID0+IF9fUFJJVkFURV9yZWdpc3RlckFwcENoZWNrKGUpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXBwQ2hlY2sgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5BLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUgPyBfX1BSSVZBVEVfcmVnaXN0ZXJBcHBDaGVjayhlKSA6IFxuICAgICAgICAgICAgICAgIC8vIElmIEFwcENoZWNrIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aG91dCBpdC5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBcIkFwcENoZWNrIG5vdCB5ZXQgZGV0ZWN0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPyB0aGlzLmFwcENoZWNrLmdldFRva2VuKGUpLnRoZW4oKGUgPT4gZSA/IChfX1BSSVZBVEVfaGFyZEFzc2VydChcInN0cmluZ1wiID09IHR5cGVvZiBlLnRva2VuKSwgXG4gICAgICAgIHRoaXMuUiA9IGUudG9rZW4sIG5ldyBBcHBDaGVja1Rva2VuKGUudG9rZW4pKSA6IG51bGwpKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge1xuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9ICEwO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5hcHBDaGVjayAmJiB0aGlzLmFwcENoZWNrLnJlbW92ZVRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gQXBwQ2hlY2sgdG9rZW4gcHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgX19QUklWQVRFX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyIHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQXBwQ2hlY2tUb2tlbihcIlwiKSk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQoZSwgdCkge31cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEdlbmVyYXRlcyBgbkJ5dGVzYCBvZiByYW5kb20gYnl0ZXMuXG4gKlxuICogSWYgYG5CeXRlcyA8IDBgICwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9yYW5kb21CeXRlcyhlKSB7XG4gICAgLy8gUG9seWZpbGxzIGZvciBJRSBhbmQgV2ViV29ya2VyIGJ5IHVzaW5nIGBzZWxmYCBhbmQgYG1zQ3J5cHRvYCB3aGVuIGBjcnlwdG9gIGlzIG5vdCBhdmFpbGFibGUuXG4gICAgY29uc3QgdCA9IFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygc2VsZiAmJiAoc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0byksIG4gPSBuZXcgVWludDhBcnJheShlKTtcbiAgICBpZiAodCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQuZ2V0UmFuZG9tVmFsdWVzKSB0LmdldFJhbmRvbVZhbHVlcyhuKTsgZWxzZSBcbiAgICAvLyBGYWxscyBiYWNrIHRvIE1hdGgucmFuZG9tXG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlOyB0KyspIG5bdF0gPSBNYXRoLmZsb29yKDI1NiAqIE1hdGgucmFuZG9tKCkpO1xuICAgIHJldHVybiBuO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQXV0b0lkIHtcbiAgICBzdGF0aWMgVigpIHtcbiAgICAgICAgLy8gQWxwaGFudW1lcmljIGNoYXJhY3RlcnNcbiAgICAgICAgY29uc3QgZSA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIiwgdCA9IE1hdGguZmxvb3IoMjU2IC8gZS5sZW5ndGgpICogZS5sZW5ndGg7XG4gICAgICAgIC8vIFRoZSBsYXJnZXN0IGJ5dGUgdmFsdWUgdGhhdCBpcyBhIG11bHRpcGxlIG9mIGBjaGFyLmxlbmd0aGAuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBcIlwiO1xuICAgICAgICBmb3IgKDtuLmxlbmd0aCA8IDIwOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfcmFuZG9tQnl0ZXMoNDApO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByLmxlbmd0aDsgKytpKSBcbiAgICAgICAgICAgIC8vIE9ubHkgYWNjZXB0IHZhbHVlcyB0aGF0IGFyZSBbMCwgbWF4TXVsdGlwbGUpLCB0aGlzIGVuc3VyZXMgdGhleSBjYW5cbiAgICAgICAgICAgIC8vIGJlIGV2ZW5seSBtYXBwZWQgdG8gaW5kaWNlcyBvZiBgY2hhcnNgIHZpYSBhIG1vZHVsbyBvcGVyYXRpb24uXG4gICAgICAgICAgICBuLmxlbmd0aCA8IDIwICYmIHJbaV0gPCB0ICYmIChuICs9IGUuY2hhckF0KHJbaV0gJSBlLmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZSwgdCkge1xuICAgIHJldHVybiBlIDwgdCA/IC0xIDogZSA+IHQgPyAxIDogMDtcbn1cblxuLyoqIEhlbHBlciB0byBjb21wYXJlIGFycmF5cyB1c2luZyBpc0VxdWFsKCkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcnJheUVxdWFscyhlLCB0LCBuKSB7XG4gICAgcmV0dXJuIGUubGVuZ3RoID09PSB0Lmxlbmd0aCAmJiBlLmV2ZXJ5KCgoZSwgcikgPT4gbihlLCB0W3JdKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltbWVkaWF0ZSBsZXhpY29ncmFwaGljYWxseS1mb2xsb3dpbmcgc3RyaW5nLiBUaGlzIGlzIHVzZWZ1bCB0b1xuICogY29uc3RydWN0IGFuIGluY2x1c2l2ZSByYW5nZSBmb3IgaW5kZXhlZGRiIGl0ZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW1tZWRpYXRlU3VjY2Vzc29yKGUpIHtcbiAgICAvLyBSZXR1cm4gdGhlIGlucHV0IHN0cmluZywgd2l0aCBhbiBhZGRpdGlvbmFsIE5VTCBieXRlIGFwcGVuZGVkLlxuICAgIHJldHVybiBlICsgXCJcXDBcIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRoZSBlYXJsaWVzdCBkYXRlIHN1cHBvcnRlZCBieSBGaXJlc3RvcmUgdGltZXN0YW1wcyAoMDAwMS0wMS0wMVQwMDowMDowMFopLlxuLyoqXG4gKiBBIGBUaW1lc3RhbXBgIHJlcHJlc2VudHMgYSBwb2ludCBpbiB0aW1lIGluZGVwZW5kZW50IG9mIGFueSB0aW1lIHpvbmUgb3JcbiAqIGNhbGVuZGFyLCByZXByZXNlbnRlZCBhcyBzZWNvbmRzIGFuZCBmcmFjdGlvbnMgb2Ygc2Vjb25kcyBhdCBuYW5vc2Vjb25kXG4gKiByZXNvbHV0aW9uIGluIFVUQyBFcG9jaCB0aW1lLlxuICpcbiAqIEl0IGlzIGVuY29kZWQgdXNpbmcgdGhlIFByb2xlcHRpYyBHcmVnb3JpYW4gQ2FsZW5kYXIgd2hpY2ggZXh0ZW5kcyB0aGVcbiAqIEdyZWdvcmlhbiBjYWxlbmRhciBiYWNrd2FyZHMgdG8geWVhciBvbmUuIEl0IGlzIGVuY29kZWQgYXNzdW1pbmcgYWxsIG1pbnV0ZXNcbiAqIGFyZSA2MCBzZWNvbmRzIGxvbmcsIGkuZS4gbGVhcCBzZWNvbmRzIGFyZSBcInNtZWFyZWRcIiBzbyB0aGF0IG5vIGxlYXAgc2Vjb25kXG4gKiB0YWJsZSBpcyBuZWVkZWQgZm9yIGludGVycHJldGF0aW9uLiBSYW5nZSBpcyBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gKiA5OTk5LTEyLTMxVDIzOjU5OjU5Ljk5OTk5OTk5OVouXG4gKlxuICogRm9yIGV4YW1wbGVzIGFuZCBmdXJ0aGVyIHNwZWNpZmljYXRpb25zLCByZWZlciB0byB0aGVcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3Byb3RvYnVmL2Jsb2IvbWFzdGVyL3NyYy9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvIHwgVGltZXN0YW1wIGRlZmluaXRpb259LlxuICovXG5jbGFzcyBUaW1lc3RhbXAge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlY29uZHMgLSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gICAgICogICAgIDk5OTktMTItMzFUMjM6NTk6NTlaIGluY2x1c2l2ZS5cbiAgICAgKiBAcGFyYW0gbmFub3NlY29uZHMgLSBUaGUgbm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kXG4gICAgICogICAgIHJlc29sdXRpb24uIE5lZ2F0aXZlIHNlY29uZCB2YWx1ZXMgd2l0aCBmcmFjdGlvbnMgbXVzdCBzdGlsbCBoYXZlXG4gICAgICogICAgIG5vbi1uZWdhdGl2ZSBuYW5vc2Vjb25kcyB2YWx1ZXMgdGhhdCBjb3VudCBmb3J3YXJkIGluIHRpbWUuIE11c3QgYmVcbiAgICAgKiAgICAgZnJvbSAwIHRvIDk5OSw5OTksOTk5IGluY2x1c2l2ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmQgcmVzb2x1dGlvbi4qXG4gICAgICovXG4gICAgdCkge1xuICAgICAgICBpZiAodGhpcy5zZWNvbmRzID0gZSwgdGhpcy5uYW5vc2Vjb25kcyA9IHQsIHQgPCAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgICAgIGlmICh0ID49IDFlOSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICBpZiAoZSA8IC02MjEzNTU5NjgwMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBicmVhayBpbiB0aGUgeWVhciAxMCwwMDAuXG4gICAgICAgICAgICAgICAgaWYgKGUgPj0gMjUzNDAyMzAwODAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgd2l0aCB0aGUgY3VycmVudCBkYXRlLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHRpbWVzdGFtcCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIFRpbWVzdGFtcC5mcm9tTWlsbGlzKERhdGUubm93KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSB0byBpbml0aWFsaXplIHRoZSBgVGltZXN0YW1wYCBmcm9tLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbURhdGUoZSkge1xuICAgICAgICByZXR1cm4gVGltZXN0YW1wLmZyb21NaWxsaXMoZS5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1pbGxpc2Vjb25kcyAtIE51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKi8gICAgc3RhdGljIGZyb21NaWxsaXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gTWF0aC5mbG9vcihlIC8gMWUzKSwgbiA9IE1hdGguZmxvb3IoMWU2ICogKGUgLSAxZTMgKiB0KSk7XG4gICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wKHQsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0LiBUaGlzIGNvbnZlcnNpb25cbiAgICAgKiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbiBzaW5jZSBgRGF0ZWAgb2JqZWN0cyBvbmx5IHN1cHBvcnQgbWlsbGlzZWNvbmRcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXNcbiAgICAgKiAgICAgdGhpcyBgVGltZXN0YW1wYCwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICovICAgIHRvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBudW1lcmljIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAgICogZXBvY2gpLiBUaGlzIG9wZXJhdGlvbiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsIHJlcHJlc2VudGVkIGFzXG4gICAgICogICAgIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gMWUzICogdGhpcy5zZWNvbmRzICsgdGhpcy5uYW5vc2Vjb25kcyAvIDFlNjtcbiAgICB9XG4gICAgX2NvbXBhcmVUbyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHMgPT09IGUuc2Vjb25kcyA/IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMubmFub3NlY29uZHMsIGUubmFub3NlY29uZHMpIDogX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5zZWNvbmRzLCBlLnNlY29uZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBUaW1lc3RhbXBgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlLnNlY29uZHMgPT09IHRoaXMuc2Vjb25kcyAmJiBlLm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlRpbWVzdGFtcChzZWNvbmRzPVwiICsgdGhpcy5zZWNvbmRzICsgXCIsIG5hbm9zZWNvbmRzPVwiICsgdGhpcy5uYW5vc2Vjb25kcyArIFwiKVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IHRoaXMuc2Vjb25kcyxcbiAgICAgICAgICAgIG5hbm9zZWNvbmRzOiB0aGlzLm5hbm9zZWNvbmRzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHN0cmluZywgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHNcbiAgICAgKiB0byBiZSBjb21wYXJlZCB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqLyAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlXG4gICAgICAgIC8vIDxzZWNvbmRzPiBpcyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+XG4gICAgICAgIC8vIGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZCB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLlxuICAgICAgICAvLyBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcgdGhhdCBtYXRjaGVzXG4gICAgICAgIC8vIHRoZSBleHBlY3RlZCBvcmRlcmluZy4gVGhlIDxzZWNvbmRzPiB0cmFuc2xhdGlvbiBpcyBkb25lIHRvIGF2b2lkIGhhdmluZ1xuICAgICAgICAvLyBhIGxlYWRpbmcgbmVnYXRpdmUgc2lnbiAoaS5lLiBhIGxlYWRpbmcgJy0nIGNoYXJhY3RlcikgaW4gaXRzIHN0cmluZ1xuICAgICAgICAvLyByZXByZXNlbnRhdGlvbiwgd2hpY2ggd291bGQgYWZmZWN0IGl0cyBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2Vjb25kcyAtIC02MjEzNTU5NjgwMDtcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWRcbiAgICAgICAgLy8gJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKGUpLnBhZFN0YXJ0KDEyLCBcIjBcIikgKyBcIi5cIiArIFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCBcIjBcIik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXG4gKi8gY2xhc3MgU25hcHNob3RWZXJzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UaW1lc3RhbXAoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90VmVyc2lvbihlKTtcbiAgICB9XG4gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTbmFwc2hvdFZlcnNpb24obmV3IFRpbWVzdGFtcCgwLCAwKSk7XG4gICAgfVxuICAgIHN0YXRpYyBtYXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKG5ldyBUaW1lc3RhbXAoMjUzNDAyMzAwNzk5LCA5OTk5OTk5OTkpKTtcbiAgICB9XG4gICAgY29tcGFyZVRvKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLl9jb21wYXJlVG8oZS50aW1lc3RhbXApO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwoZS50aW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovICAgIHRvTWljcm9zZWNvbmRzKCkge1xuICAgICAgICAvLyBDb252ZXJ0IHRvIG1pY3Jvc2Vjb25kcy5cbiAgICAgICAgcmV0dXJuIDFlNiAqIHRoaXMudGltZXN0YW1wLnNlY29uZHMgKyB0aGlzLnRpbWVzdGFtcC5uYW5vc2Vjb25kcyAvIDFlMztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlNuYXBzaG90VmVyc2lvbihcIiArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgdG9UaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cbiAqL1xuY2xhc3MgQmFzZVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdm9pZCAwID09PSB0ID8gdCA9IDAgOiB0ID4gZS5sZW5ndGggJiYgZmFpbCgpLCB2b2lkIDAgPT09IG4gPyBuID0gZS5sZW5ndGggLSB0IDogbiA+IGUubGVuZ3RoIC0gdCAmJiBmYWlsKCksIFxuICAgICAgICB0aGlzLnNlZ21lbnRzID0gZSwgdGhpcy5vZmZzZXQgPSB0LCB0aGlzLmxlbiA9IG47XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbjtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiAwID09PSBCYXNlUGF0aC5jb21wYXJhdG9yKHRoaXMsIGUpO1xuICAgIH1cbiAgICBjaGlsZChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEJhc2VQYXRoID8gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlKTtcbiAgICAgICAgfSkpIDogdC5wdXNoKGUpLCB0aGlzLmNvbnN0cnVjdCh0KTtcbiAgICB9XG4gICAgLyoqIFRoZSBpbmRleCBvZiBvbmUgcGFzdCB0aGUgbGFzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiAqLyAgICBsaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIHBvcEZpcnN0KGUpIHtcbiAgICAgICAgcmV0dXJuIGUgPSB2b2lkIDAgPT09IGUgPyAxIDogZSwgdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQgKyBlLCB0aGlzLmxlbmd0aCAtIGUpO1xuICAgIH1cbiAgICBwb3BMYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGZpcnN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXRdO1xuICAgIH1cbiAgICBsYXN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0ICsgZV07XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgaXNQcmVmaXhPZihlKSB7XG4gICAgICAgIGlmIChlLmxlbmd0aCA8IHRoaXMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5sZW5ndGg7IHQrKykgaWYgKHRoaXMuZ2V0KHQpICE9PSBlLmdldCh0KSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlzSW1tZWRpYXRlUGFyZW50T2YoZSkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggKyAxICE9PSBlLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMubGVuZ3RoOyB0KyspIGlmICh0aGlzLmdldCh0KSAhPT0gZS5nZXQodCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgZm9yIChsZXQgdCA9IHRoaXMub2Zmc2V0LCBuID0gdGhpcy5saW1pdCgpOyB0IDwgbjsgdCsrKSBlKHRoaXMuc2VnbWVudHNbdF0pO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gTWF0aC5taW4oZS5sZW5ndGgsIHQubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBuOyByKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmdldChyKSwgaSA9IHQuZ2V0KHIpO1xuICAgICAgICAgICAgaWYgKG4gPCBpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAobiA+IGkpIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLmxlbmd0aCA8IHQubGVuZ3RoID8gLTEgOiBlLmxlbmd0aCA+IHQubGVuZ3RoID8gMSA6IDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgcmVzb3VyY2VzIChkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zKVxuICogd2l0aGluIEZpcmVzdG9yZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBSZXNvdXJjZVBhdGggZXh0ZW5kcyBCYXNlUGF0aCB7XG4gICAgY29uc3RydWN0KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoZSwgdCwgbik7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oXCIvXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvdXJjZSBwYXRoIGZyb20gdGhlIGdpdmVuIHNsYXNoLWRlbGltaXRlZCBzdHJpbmcuIElmIG11bHRpcGxlXG4gICAgICogYXJndW1lbnRzIGFyZSBwcm92aWRlZCwgYWxsIGNvbXBvbmVudHMgYXJlIGNvbWJpbmVkLiBMZWFkaW5nIGFuZCB0cmFpbGluZ1xuICAgICAqIHNsYXNoZXMgZnJvbSBhbGwgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TdHJpbmcoLi4uZSkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSB7XG4gICAgICAgICAgICBpZiAobi5pbmRleE9mKFwiLy9cIikgPj0gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgc2VnbWVudCAoJHtufSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5gKTtcbiAgICAgICAgICAgIC8vIFN0cmlwIGxlYWRpbmcgYW5kIHRyYWxpbmcgc2xhc2hlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaCguLi5uLnNwbGl0KFwiL1wiKS5maWx0ZXIoKGUgPT4gZS5sZW5ndGggPiAwKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChbXSk7XG4gICAgfVxufVxuXG5jb25zdCBDID0gL15bX2EtekEtWl1bX2EtekEtWjAtOV0qJC87XG5cbi8qKlxuICogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgd2l0aGluIGEgZG9jdW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBGaWVsZFBhdGgkMSBleHRlbmRzIEJhc2VQYXRoIHtcbiAgICBjb25zdHJ1Y3QoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKGUsIHQsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb3VsZCBiZSB1c2VkIGFzIGEgc2VnbWVudCBpbiBhIGZpZWxkIHBhdGhcbiAgICAgKiB3aXRob3V0IGVzY2FwaW5nLlxuICAgICAqLyAgICBzdGF0aWMgaXNWYWxpZElkZW50aWZpZXIoZSkge1xuICAgICAgICByZXR1cm4gQy50ZXN0KGUpO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoKGUgPT4gKGUgPSBlLnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9gL2csIFwiXFxcXGBcIiksIFxuICAgICAgICBGaWVsZFBhdGgkMS5pc1ZhbGlkSWRlbnRpZmllcihlKSB8fCAoZSA9IFwiYFwiICsgZSArIFwiYFwiKSwgZSkpKS5qb2luKFwiLlwiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgaXNLZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIDEgPT09IHRoaXMubGVuZ3RoICYmIFwiX19uYW1lX19cIiA9PT0gdGhpcy5nZXQoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZCBkZXNpZ25hdGluZyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIHN0YXRpYyBrZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgkMShbIFwiX19uYW1lX19cIiBdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgZmllbGQgc3RyaW5nIGZyb20gdGhlIGdpdmVuIHNlcnZlci1mb3JtYXR0ZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogLSBTcGxpdHRpbmcgdGhlIGVtcHR5IHN0cmluZyBpcyBub3QgYWxsb3dlZCAoZm9yIG5vdyBhdCBsZWFzdCkuXG4gICAgICogLSBFbXB0eSBzZWdtZW50cyB3aXRoaW4gdGhlIHN0cmluZyAoZS5nLiBpZiB0aGVyZSBhcmUgdHdvIGNvbnNlY3V0aXZlXG4gICAgICogICBzZXBhcmF0b3JzKSBhcmUgbm90IGFsbG93ZWQuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzcyNDQxNTcpOiB3ZSBzaG91bGQgbWFrZSB0aGlzIG1vcmUgc3RyaWN0LiBSaWdodCBub3csIGl0IGFsbG93c1xuICAgICAqIG5vbi1pZGVudGlmaWVyIHBhdGggY29tcG9uZW50cywgZXZlbiBpZiB0aGV5IGFyZW4ndCBlc2NhcGVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlcnZlckZvcm1hdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgbGV0IG4gPSBcIlwiLCByID0gMDtcbiAgICAgICAgY29uc3QgX19QUklWQVRFX2FkZEN1cnJlbnRTZWdtZW50ID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2ApO1xuICAgICAgICAgICAgdC5wdXNoKG4pLCBuID0gXCJcIjtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGkgPSAhMTtcbiAgICAgICAgZm9yICg7ciA8IGUubGVuZ3RoOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlW3JdO1xuICAgICAgICAgICAgaWYgKFwiXFxcXFwiID09PSB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHIgKyAxID09PSBlLmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyB0cmFpbGluZyBlc2NhcGUgY2hhcmFjdGVyOiBcIiArIGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlW3IgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoXCJcXFxcXCIgIT09IHQgJiYgXCIuXCIgIT09IHQgJiYgXCJgXCIgIT09IHQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgbiArPSB0LCByICs9IDI7XG4gICAgICAgICAgICB9IGVsc2UgXCJgXCIgPT09IHQgPyAoaSA9ICFpLCByKyspIDogXCIuXCIgIT09IHQgfHwgaSA/IChuICs9IHQsIHIrKykgOiAoX19QUklWQVRFX2FkZEN1cnJlbnRTZWdtZW50KCksIFxuICAgICAgICAgICAgcisrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX19QUklWQVRFX2FkZEN1cnJlbnRTZWdtZW50KCksIGkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiVW50ZXJtaW5hdGVkIGAgaW4gcGF0aDogXCIgKyBlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgkMSh0KTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgkMShbXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBEb2N1bWVudEtleSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnBhdGggPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhdGgoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21OYW1lKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhlKS5wb3BGaXJzdCg1KSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShSZXNvdXJjZVBhdGguZW1wdHlQYXRoKCkpO1xuICAgIH1cbiAgICBnZXQgY29sbGVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnBvcExhc3QoKS5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25JZC4gKi8gICAgaGFzQ29sbGVjdGlvbklkKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gZTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAgKGkuZS4gdGhlIG5hbWUgb2YgdGhlIHBhcmVudCBjb2xsZWN0aW9uKSBmb3IgdGhpcyBrZXkuICovICAgIGdldENvbGxlY3Rpb25Hcm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgZnVsbHkgcXVhbGlmaWVkIHBhdGggdG8gdGhlIHBhcmVudCBjb2xsZWN0aW9uLiAqLyAgICBnZXRDb2xsZWN0aW9uUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5wb3BMYXN0KCk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiAwID09PSBSZXNvdXJjZVBhdGguY29tcGFyYXRvcih0aGlzLnBhdGgsIGUucGF0aCk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFJlc291cmNlUGF0aC5jb21wYXJhdG9yKGUucGF0aCwgdC5wYXRoKTtcbiAgICB9XG4gICAgc3RhdGljIGlzRG9jdW1lbnRLZXkoZSkge1xuICAgICAgICByZXR1cm4gZS5sZW5ndGggJSAyID09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgZG9jdW1lbnQga2V5IHdpdGggdGhlIGdpdmVuIHNlZ21lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlZ21lbnRzIC0gVGhlIHNlZ21lbnRzIG9mIHRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudFxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIERvY3VtZW50S2V5XG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VnbWVudHMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KG5ldyBSZXNvdXJjZVBhdGgoZS5zbGljZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgaW5pdGlhbCBtdXRhdGlvbiBiYXRjaCBpZCBmb3IgZWFjaCBpbmRleC4gR2V0cyB1cGRhdGVkIGR1cmluZyBpbmRleFxuICogYmFja2ZpbGwuXG4gKi9cbi8qKlxuICogQW4gaW5kZXggZGVmaW5pdGlvbiBmb3IgZmllbGQgaW5kZXhlcyBpbiBGaXJlc3RvcmUuXG4gKlxuICogRXZlcnkgaW5kZXggaXMgYXNzb2NpYXRlZCB3aXRoIGEgY29sbGVjdGlvbi4gVGhlIGRlZmluaXRpb24gY29udGFpbnMgYSBsaXN0XG4gKiBvZiBmaWVsZHMgYW5kIHRoZWlyIGluZGV4IGtpbmQgKHdoaWNoIGNhbiBiZSBgQVNDRU5ESU5HYCwgYERFU0NFTkRJTkdgIG9yXG4gKiBgQ09OVEFJTlNgIGZvciBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgcXVlcmllcykuXG4gKlxuICogVW5saWtlIHRoZSBiYWNrZW5kLCB0aGUgU0RLIGRvZXMgbm90IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjb2xsZWN0aW9uIG9yXG4gKiBjb2xsZWN0aW9uIGdyb3VwLXNjb3BlZCBpbmRpY2VzLiBFdmVyeSBpbmRleCBjYW4gYmUgdXNlZCBmb3IgYm90aCBzaW5nbGVcbiAqIGNvbGxlY3Rpb24gYW5kIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcy5cbiAqL1xuY2xhc3MgRmllbGRJbmRleCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IElELiBSZXR1cm5zIC0xIGlmIHRoZSBpbmRleCBJRCBpcyBub3QgYXZhaWxhYmxlIChlLmcuIHRoZSBpbmRleFxuICAgICAqIGhhcyBub3QgeWV0IGJlZW4gcGVyc2lzdGVkKS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGNvbGxlY3Rpb24gSUQgdGhpcyBpbmRleCBhcHBsaWVzIHRvLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgZmllbGQgc2VnbWVudHMgZm9yIHRoaXMgaW5kZXguICovXG4gICAgbiwgXG4gICAgLyoqIFNob3dzIGhvdyB1cC10by1kYXRlIHRoZSBpbmRleCBpcyBmb3IgdGhlIGN1cnJlbnQgdXNlci4gKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMuaW5kZXhJZCA9IGUsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gdCwgdGhpcy5maWVsZHMgPSBuLCB0aGlzLmluZGV4U3RhdGUgPSByO1xuICAgIH1cbn1cblxuLyoqIEFuIElEIGZvciBhbiBpbmRleCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYWRkZWQgdG8gcGVyc2lzdGVuY2UuICAqL1xuLyoqIFJldHVybnMgdGhlIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueSBzZWdtZW50IGZvciB0aGlzIGluZGV4LiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQoZSkge1xuICAgIHJldHVybiBlLmZpZWxkcy5maW5kKChlID0+IDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovID09PSBlLmtpbmQpKTtcbn1cblxuLyoqIFJldHVybnMgYWxsIGRpcmVjdGlvbmFsIChhc2NlbmRpbmcvZGVzY2VuZGluZykgc2VnbWVudHMgZm9yIHRoaXMgaW5kZXguICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKSB7XG4gICAgcmV0dXJuIGUuZmllbGRzLmZpbHRlcigoZSA9PiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyAhPT0gZS5raW5kKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgb3JkZXIgb2YgdGhlIGRvY3VtZW50IGtleSBjb21wb25lbnQgZm9yIHRoZSBnaXZlbiBpbmRleC5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBXZWIgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIENvbXBhcmVzIGluZGV4ZXMgYnkgY29sbGVjdGlvbiBncm91cCBhbmQgc2VnbWVudHMuIElnbm9yZXMgdXBkYXRlIHRpbWUgYW5kXG4gKiBpbmRleCBJRC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhTZW1hbnRpY0NvbXBhcmF0b3IoZSwgdCkge1xuICAgIGxldCBuID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5jb2xsZWN0aW9uR3JvdXAsIHQuY29sbGVjdGlvbkdyb3VwKTtcbiAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBNYXRoLm1pbihlLmZpZWxkcy5sZW5ndGgsIHQuZmllbGRzLmxlbmd0aCk7ICsrcikgaWYgKG4gPSBfX1BSSVZBVEVfaW5kZXhTZWdtZW50Q29tcGFyYXRvcihlLmZpZWxkc1tyXSwgdC5maWVsZHNbcl0pLCBcbiAgICAwICE9PSBuKSByZXR1cm4gbjtcbiAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5maWVsZHMubGVuZ3RoLCB0LmZpZWxkcy5sZW5ndGgpO1xufVxuXG4vKiogUmV0dXJucyBhIGRlYnVnIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmaWVsZCBpbmRleCAqLyBGaWVsZEluZGV4LlVOS05PV05fSUQgPSAtMTtcblxuLyoqIEFuIGluZGV4IGNvbXBvbmVudCBjb25zaXN0aW5nIG9mIGZpZWxkIHBhdGggYW5kIGluZGV4IHR5cGUuICAqL1xuY2xhc3MgSW5kZXhTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIGZpZWxkIHBhdGggb2YgdGhlIGNvbXBvbmVudC4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGZpZWxkcyBzb3J0aW5nIG9yZGVyLiAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy5maWVsZFBhdGggPSBlLCB0aGlzLmtpbmQgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2luZGV4U2VnbWVudENvbXBhcmF0b3IoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBGaWVsZFBhdGgkMS5jb21wYXJhdG9yKGUuZmllbGRQYXRoLCB0LmZpZWxkUGF0aCk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5raW5kLCB0LmtpbmQpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgXCJoaWdoIHdhdGVyIG1hcmtcIiB0aGF0IGluZGljYXRlcyBob3cgdXBkYXRlZCB0aGUgSW5kZXggaXMgZm9yIHRoZVxuICogY3VycmVudCB1c2VyLlxuICovIGNsYXNzIEluZGV4U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGVuIHRoZSBpbmRleCB3YXMgbGFzdCB1cGRhdGVkIChyZWxhdGl2ZSB0byBvdGhlciBpbmRleGVzKS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHRoZSBsYXRlc3QgaW5kZXhlZCByZWFkIHRpbWUsIGRvY3VtZW50IGFuZCBiYXRjaCBpZC4gKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBlLCB0aGlzLm9mZnNldCA9IHQ7XG4gICAgfVxuICAgIC8qKiBUaGUgc3RhdGUgb2YgYW4gaW5kZXggdGhhdCBoYXMgbm90IHlldCBiZWVuIGJhY2tmaWxsZWQuICovICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleFN0YXRlKDAsIEluZGV4T2Zmc2V0Lm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBvZmZzZXQgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgd2l0aCBhIHJlYWQgdGltZSBoaWdoZXIgdGhhblxuICogYHJlYWRUaW1lYC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUoZSwgdCkge1xuICAgIC8vIFdlIHdhbnQgdG8gY3JlYXRlIGFuIG9mZnNldCB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyB3aXRoIGEgcmVhZCB0aW1lXG4gICAgLy8gZ3JlYXRlciB0aGFuIHRoZSBwcm92aWRlZCByZWFkIHRpbWUuIFRvIGRvIHNvLCB3ZSB0ZWNobmljYWxseSBuZWVkIHRvXG4gICAgLy8gY3JlYXRlIGFuIG9mZnNldCBmb3IgYChyZWFkVGltZSwgTUFYX0RPQ1VNRU5UX0tFWSlgLiBXaGlsZSB3ZSBjb3VsZCB1c2VcbiAgICAvLyBVbmljb2RlIGNvZGVwb2ludHMgdG8gZ2VuZXJhdGUgTUFYX0RPQ1VNRU5UX0tFWSwgaXQgaXMgbXVjaCBlYXNpZXIgdG8gdXNlXG4gICAgLy8gYChyZWFkVGltZSArIDEsIERvY3VtZW50S2V5LmVtcHR5KCkpYCBzaW5jZSBgPiBEb2N1bWVudEtleS5lbXB0eSgpYCBtYXRjaGVzXG4gICAgLy8gYWxsIHZhbGlkIGRvY3VtZW50IElEcy5cbiAgICBjb25zdCBuID0gZS50b1RpbWVzdGFtcCgpLnNlY29uZHMsIHIgPSBlLnRvVGltZXN0YW1wKCkubmFub3NlY29uZHMgKyAxLCBpID0gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAoMWU5ID09PSByID8gbmV3IFRpbWVzdGFtcChuICsgMSwgMCkgOiBuZXcgVGltZXN0YW1wKG4sIHIpKTtcbiAgICByZXR1cm4gbmV3IEluZGV4T2Zmc2V0KGksIERvY3VtZW50S2V5LmVtcHR5KCksIHQpO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBvZmZzZXQgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRGcm9tRG9jdW1lbnQoZSkge1xuICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQoZS5yZWFkVGltZSwgZS5rZXksIC0xKTtcbn1cblxuLyoqXG4gKiBTdG9yZXMgdGhlIGxhdGVzdCByZWFkIHRpbWUsIGRvY3VtZW50IGFuZCBiYXRjaCBJRCB0aGF0IHdlcmUgcHJvY2Vzc2VkIGZvciBhblxuICogaW5kZXguXG4gKi8gY2xhc3MgSW5kZXhPZmZzZXQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRlc3QgcmVhZCB0aW1lIHZlcnNpb24gdGhhdCBoYXMgYmVlbiBpbmRleGVkIGJ5IEZpcmVzdG9yZSBmb3IgdGhpc1xuICAgICAqIGZpZWxkIGluZGV4LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBrZXkgb2YgdGhlIGxhc3QgZG9jdW1lbnQgdGhhdCB3YXMgaW5kZXhlZCBmb3IgdGhpcyBxdWVyeS4gVXNlXG4gICAgICogYERvY3VtZW50S2V5LmVtcHR5KClgIGlmIG5vIGRvY3VtZW50IGhhcyBiZWVuIGluZGV4ZWQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLypcbiAgICAgKiBUaGUgbGFyZ2VzdCBtdXRhdGlvbiBiYXRjaCBpZCB0aGF0J3MgYmVlbiBwcm9jZXNzZWQgYnkgRmlyZXN0b3JlLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IGUsIHRoaXMuZG9jdW1lbnRLZXkgPSB0LCB0aGlzLmxhcmdlc3RCYXRjaElkID0gbjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYW4gb2Zmc2V0IHRoYXQgc29ydHMgYmVmb3JlIGFsbCByZWd1bGFyIG9mZnNldHMuICovICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQoU25hcHNob3RWZXJzaW9uLm1pbigpLCBEb2N1bWVudEtleS5lbXB0eSgpLCAtMSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFuIG9mZnNldCB0aGF0IHNvcnRzIGFmdGVyIGFsbCByZWd1bGFyIG9mZnNldHMuICovICAgIHN0YXRpYyBtYXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQoU25hcHNob3RWZXJzaW9uLm1heCgpLCBEb2N1bWVudEtleS5lbXB0eSgpLCAtMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yKGUsIHQpIHtcbiAgICBsZXQgbiA9IGUucmVhZFRpbWUuY29tcGFyZVRvKHQucmVhZFRpbWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IChuID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmRvY3VtZW50S2V5LCB0LmRvY3VtZW50S2V5KSwgXG4gICAgMCAhPT0gbiA/IG4gOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmxhcmdlc3RCYXRjaElkLCB0Lmxhcmdlc3RCYXRjaElkKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHYgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgcmVwcmVzZW50aW5nIGEgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24sIGVuY2Fwc3VsYXRpbmcgYm90aCB0aGVcbiAqIHRyYW5zYWN0aW9uJ3Mgc2VxdWVuY2UgbnVtYmVycyBhcyB3ZWxsIGFzIGEgbGlzdCBvZiBvbkNvbW1pdHRlZCBsaXN0ZW5lcnMuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBQZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigpLCBpdCB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIGFuZFxuICogcGFzcyBpdCB0byB5b3VyIGNhbGxiYWNrLiBZb3UgdGhlbiBwYXNzIGl0IHRvIGFueSBtZXRob2QgdGhhdCBvcGVyYXRlc1xuICogb24gcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgUGVyc2lzdGVuY2VUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMgPSBbXTtcbiAgICB9XG4gICAgYWRkT25Db21taXR0ZWRMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMucHVzaChlKTtcbiAgICB9XG4gICAgcmFpc2VPbkNvbW1pdHRlZEV2ZW50KCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLmZvckVhY2goKGUgPT4gZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBWZXJpZmllcyB0aGUgZXJyb3IgdGhyb3duIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uIElmIGEgTG9jYWxTdG9yZVxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXG4gKiB3ZSBpZ25vcmUgdGhlIGVycm9yICh0aGUgcGVyc2lzdGVuY2UgbGF5ZXIgd2lsbCBpbW1lZGlhdGVseSBjYWxsXG4gKiBgYXBwbHlQcmltYXJ5TGVhc2VgIHRvIHByb3BhZ2F0ZSB0aGUgcHJpbWFyeSBzdGF0ZSBjaGFuZ2UpLiBBbGwgb3RoZXIgZXJyb3JzXG4gKiBhcmUgcmUtdGhyb3duLlxuICpcbiAqIEBwYXJhbSBlcnIgLSBBbiBlcnJvciByZXR1cm5lZCBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKSB7XG4gICAgaWYgKGUuY29kZSAhPT0gRC5GQUlMRURfUFJFQ09ORElUSU9OIHx8IGUubWVzc2FnZSAhPT0gdikgdGhyb3cgZTtcbiAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJMb2NhbFN0b3JlXCIsIFwiVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZVwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGVyc2lzdGVuY2VQcm9taXNlIGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZSBleGNlcHRcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZSBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxuICpcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcbiAqIFByb21pc2VzLlxuICovIGNsYXNzIFBlcnNpc3RlbmNlUHJvbWlzZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICAvLyBOT1RFOiBuZXh0L2NhdGNoQ2FsbGJhY2sgd2lsbCBhbHdheXMgcG9pbnQgdG8gb3VyIG93biB3cmFwcGVyIGZ1bmN0aW9ucyxcbiAgICAgICAgLy8gbm90IHRoZSB1c2VyJ3MgcmF3IG5leHQoKSBvciBjYXRjaCgpIGNhbGxiYWNrcy5cbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsLCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBudWxsLCBcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cbiAgICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDAsIHRoaXMuZXJyb3IgPSB2b2lkIDAsIHRoaXMuaXNEb25lID0gITEsIFxuICAgICAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIC50aGVuKCkgb3IgLmNhdGNoKCkgYXJlIGNhbGxlZCBhbmQgcHJldmVudHMgYWRkaXRpb25hbFxuICAgICAgICAvLyBjaGFpbmluZy5cbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITEsIGUoKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5yZXN1bHQgPSBlLCB0aGlzLm5leHRDYWxsYmFjayAmJiBcbiAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXG4gICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrKGUpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5lcnJvciA9IGUsIHRoaXMuY2F0Y2hDYWxsYmFjayAmJiB0aGlzLmNhdGNoQ2FsbGJhY2soZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KHZvaWQgMCwgZSk7XG4gICAgfVxuICAgIG5leHQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja0F0dGFjaGVkICYmIGZhaWwoKSwgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITAsIHRoaXMuaXNEb25lID8gdGhpcy5lcnJvciA/IHRoaXMud3JhcEZhaWx1cmUodCwgdGhpcy5lcnJvcikgOiB0aGlzLndyYXBTdWNjZXNzKGUsIHRoaXMucmVzdWx0KSA6IG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChuLCByKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcFN1Y2Nlc3MoZSwgdCkubmV4dChuLCByKTtcbiAgICAgICAgICAgIH0sIHRoaXMuY2F0Y2hDYWxsYmFjayA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcEZhaWx1cmUodCwgZSkubmV4dChuLCByKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9Qcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKChlLCB0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHQoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgd3JhcFVzZXJGdW5jdGlvbihlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZVByb21pc2UgPyB0IDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyYXBTdWNjZXNzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IGUodCkpKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHQpO1xuICAgIH1cbiAgICB3cmFwRmFpbHVyZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiBlKHQpKSkgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KHQpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgdChlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVqZWN0KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBuKGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyB3YWl0Rm9yKFxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgbGV0IHIgPSAwLCBpID0gMCwgcyA9ICExO1xuICAgICAgICAgICAgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICArK3IsIGUubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICArK2ksIHMgJiYgaSA9PT0gciAmJiB0KCk7XG4gICAgICAgICAgICAgICAgfSksIChlID0+IG4oZSkpKTtcbiAgICAgICAgICAgIH0pKSwgcyA9ICEwLCBpID09PSByICYmIHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwcmVkaWNhdGUgZnVuY3Rpb25zIHRoYXQgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdG8gYVxuICAgICAqIGJvb2xlYW4sIGltcGxlbWVudHMgYSBzaG9ydC1jaXJjdWl0aW5nIGBvcmAgYmV0d2VlbiB0aGUgcmVzdWx0cy4gUHJlZGljYXRlc1xuICAgICAqIHdpbGwgYmUgZXZhbHVhdGVkIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYHRydWVgLCB0aGVuIHN0b3AuIFRoZSBmaW5hbFxuICAgICAqIHJlc3VsdCB3aWxsIGJlIHdoZXRoZXIgYW55IG9mIHRoZW0gcmV0dXJuZWQgYHRydWVgLlxuICAgICAqLyAgICBzdGF0aWMgb3IoZSkge1xuICAgICAgICBsZXQgdCA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCExKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSB0Lm5leHQoKGUgPT4gZSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGUpIDogbigpKSk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICBzdGF0aWMgZm9yRWFjaChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIHIpID0+IHtcbiAgICAgICAgICAgIG4ucHVzaCh0LmNhbGwodGhpcywgZSwgcikpO1xuICAgICAgICB9KSksIHRoaXMud2FpdEZvcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uY3VycmVudGx5IG1hcCBhbGwgYXJyYXkgZWxlbWVudHMgdGhyb3VnaCBhc3luY2hyb25vdXMgZnVuY3Rpb24uXG4gICAgICovICAgIHN0YXRpYyBtYXBBcnJheShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGUubGVuZ3RoLCBzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgXyA9IDA7IF8gPCBpOyBfKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gXztcbiAgICAgICAgICAgICAgICB0KGVbYV0pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzW2FdID0gZSwgKytvLCBvID09PSBpICYmIG4ocyk7XG4gICAgICAgICAgICAgICAgfSksIChlID0+IHIoZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSB0byByZWN1cnNpdmUgUGVyc2lzdGVuY2VQcm9taXNlIGNhbGxzLCB0aGF0IGF2b2lkc1xuICAgICAqIHBvdGVudGlhbCBtZW1vcnkgcHJvYmxlbXMgZnJvbSB1bmJvdW5kZWQgY2hhaW5zIG9mIHByb21pc2VzLlxuICAgICAqXG4gICAgICogVGhlIGBhY3Rpb25gIHdpbGwgYmUgY2FsbGVkIHJlcGVhdGVkbHkgd2hpbGUgYGNvbmRpdGlvbmAgaXMgdHJ1ZS5cbiAgICAgKi8gICAgc3RhdGljIGRvV2hpbGUoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgITAgPT09IGUoKSA/IHQoKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MoKTtcbiAgICAgICAgICAgICAgICB9KSwgcikgOiBuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcHJvY2VzcygpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBTaW1wbGVEYi5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogV3JhcHMgYW4gSURCVHJhbnNhY3Rpb24gYW5kIGV4cG9zZXMgYSBzdG9yZSgpIG1ldGhvZCB0byBnZXQgYSBoYW5kbGUgdG8gYVxuICogc3BlY2lmaWMgb2JqZWN0IHN0b3JlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmFjdGlvbiA9IGUsIHRoaXMudHJhbnNhY3Rpb24gPSB0LCB0aGlzLmFib3J0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgSW5kZXhlZERiIHRyYW5zYWN0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgdGhpcy50cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tLnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdC5lcnJvciA/IHRoaXMubS5yZWplY3QobmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUsIHQuZXJyb3IpKSA6IHRoaXMubS5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9jaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIHRoaXMubS5yZWplY3QobmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUsIG4pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIG9wZW4oZSwgdCwgbiwgcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbih0LCBlLnRyYW5zYWN0aW9uKHIsIG4pKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKHQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tLnByb21pc2U7XG4gICAgfVxuICAgIGFib3J0KGUpIHtcbiAgICAgICAgZSAmJiB0aGlzLm0ucmVqZWN0KGUpLCB0aGlzLmFib3J0ZWQgfHwgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiQWJvcnRpbmcgdHJhbnNhY3Rpb246XCIsIGUgPyBlLm1lc3NhZ2UgOiBcIkNsaWVudC1pbml0aWF0ZWQgYWJvcnRcIiksIFxuICAgICAgICB0aGlzLmFib3J0ZWQgPSAhMCwgdGhpcy50cmFuc2FjdGlvbi5hYm9ydCgpKTtcbiAgICB9XG4gICAgcCgpIHtcbiAgICAgICAgLy8gSWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgVjMgSW5kZXhlZERCLCB3ZSBpbnZva2UgY29tbWl0KCkgZXhwbGljaXRseSB0b1xuICAgICAgICAvLyBzcGVlZCB1cCBpbmRleCBEQiBwcm9jZXNzaW5nIGlmIHRoZSBldmVudCBsb29wIHJlbWFpbnMgYmxvY2tzLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBlID0gdGhpcy50cmFuc2FjdGlvbjtcbiAgICAgICAgdGhpcy5hYm9ydGVkIHx8IFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZS5jb21taXQgfHwgZS5jb21taXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcbiAgICAgKiBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXG4gICAgICovICAgIHN0b3JlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoZSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpbXBsZURiU3RvcmUodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1NpbXBsZURiIHtcbiAgICAvKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU2ltcGxlRGIgd3JhcHBlciBmb3IgSW5kZXhlZERiIGRhdGFiYXNlIGBuYW1lYC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBgdmVyc2lvbmAgbXVzdCBub3QgYmUgYSBkb3duZ3JhZGUuIEluZGV4ZWREQiBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICogZG93bmdyYWRpbmcgdGhlIHNjaGVtYSB2ZXJzaW9uLiBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgYW55IHdheSB0byBkb1xuICAgICAqIHZlcnNpb25pbmcgb3V0c2lkZSBvZiBJbmRleGVkREIncyB2ZXJzaW9uaW5nIG1lY2hhbmlzbSwgYXMgb25seVxuICAgICAqIHZlcnNpb24tdXBncmFkZSB0cmFuc2FjdGlvbnMgYXJlIGFsbG93ZWQgdG8gZG8gdGhpbmdzIGxpa2UgY3JlYXRlXG4gICAgICogb2JqZWN0c3RvcmVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gZSwgdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5TID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBfX1BSSVZBVEVfU2ltcGxlRGIuRChnZXRVQSgpKSAmJiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJGaXJlc3RvcmUgcGVyc2lzdGVuY2Ugc3VmZmVycyBmcm9tIGEgYnVnIGluIGlPUyAxMi4yIFNhZmFyaSB0aGF0IG1heSBjYXVzZSB5b3VyIGFwcCB0byBzdG9wIHdvcmtpbmcuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLlwiKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZS4gKi8gICAgc3RhdGljIGRlbGV0ZShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlJlbW92aW5nIGRhdGFiYXNlOlwiLCBlKSwgX19QUklWQVRFX3dyYXBSZXF1ZXN0KHdpbmRvdy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoZSkpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBDKCkge1xuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9TaW1wbGVEYi52KCkpIHJldHVybiAhMDtcbiAgICAgICAgLy8gV2UgZXh0ZW5zaXZlbHkgdXNlIGluZGV4ZWQgYXJyYXkgdmFsdWVzIGFuZCBjb21wb3VuZCBrZXlzLFxuICAgICAgICAvLyB3aGljaCBJRSBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydC4gSG93ZXZlciwgdGhleSBzdGlsbCBoYXZlIGluZGV4ZWREQlxuICAgICAgICAvLyBkZWZpbmVkIG9uIHRoZSB3aW5kb3csIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIHRoZW0gaGVyZSBhbmQgbWFrZSBzdXJlXG4gICAgICAgIC8vIHRvIHJldHVybiB0aGF0IHBlcnNpc3RlbmNlIGlzIG5vdCBlbmFibGVkIGZvciB0aG9zZSBicm93c2Vycy5cbiAgICAgICAgLy8gRm9yIHRyYWNraW5nIHN1cHBvcnQgb2YgdGhpcyBmZWF0dXJlLCBzZWUgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9zdGF0dXMvaW5kZXhlZGRiYXJyYXlzYW5kbXVsdGllbnRyeXN1cHBvcnQvXG4gICAgICAgIC8vIENoZWNrIHRoZSBVQSBzdHJpbmcgdG8gZmluZCBvdXQgdGhlIGJyb3dzZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGdldFVBKCksIHQgPSBfX1BSSVZBVEVfU2ltcGxlRGIuRChlKSwgbiA9IDAgPCB0ICYmIHQgPCAxMCwgciA9IF9fUFJJVkFURV9TaW1wbGVEYi5GKGUpLCBpID0gMCA8IHIgJiYgciA8IDQuNTtcbiAgICAgICAgLy8gSUUgMTBcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBOVCA2LjI7IFRyaWRlbnQvNi4wKSc7XG4gICAgICAgIC8vIElFIDExXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28nO1xuICAgICAgICAvLyBFZGdlXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLFxuICAgICAgICAvLyBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJztcbiAgICAgICAgLy8gaU9TIFNhZmFyaTogRGlzYWJsZSBmb3IgdXNlcnMgcnVubmluZyBpT1MgdmVyc2lvbiA8IDEwLlxuICAgICAgICAgICAgICAgIHJldHVybiAhKGUuaW5kZXhPZihcIk1TSUUgXCIpID4gMCB8fCBlLmluZGV4T2YoXCJUcmlkZW50L1wiKSA+IDAgfHwgZS5pbmRleE9mKFwiRWRnZS9cIikgPiAwIHx8IG4gfHwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYmFja2luZyBJbmRleGVkREIgc3RvcmUgaXMgdGhlIE5vZGUgSW5kZXhlZERCU2hpbVxuICAgICAqIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltKS5cbiAgICAgKi8gICAgc3RhdGljIHYoKSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKGUgPSBwcm9jZXNzLmVudikgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5NKTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZyb20gYSB0cmFuc2FjdGlvbi4gKi8gICAgc3RhdGljIE8oZSwgdCkge1xuICAgICAgICByZXR1cm4gZS5zdG9yZSh0KTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBpT1MgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIEQoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IHQgPyB0WzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBGKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpLCBuID0gdCA/IHRbMV0uc3BsaXQoXCIuXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLCBjcmVhdGluZyBvciB1cGdyYWRpbmcgaXQgaWYgbmVjZXNzYXJ5LlxuICAgICAqLyAgICBhc3luYyBOKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIgfHwgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiT3BlbmluZyBkYXRhYmFzZTpcIiwgdGhpcy5uYW1lKSwgXG4gICAgICAgIHRoaXMuZGIgPSBhd2FpdCBuZXcgUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSW52ZXN0aWdhdGUgYnJvd3NlciBjb21wYXRpYmlsaXR5LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0luZGV4ZWREQl9BUEkvVXNpbmdfSW5kZXhlZERCXG4gICAgICAgICAgICAvLyBzdWdnZXN0cyBJRTkgYW5kIG9sZGVyIFdlYktpdCBicm93c2VycyBoYW5kbGUgdXBncmFkZVxuICAgICAgICAgICAgLy8gZGlmZmVyZW50bHkuIFRoZXkgZXhwZWN0IHNldFZlcnNpb24sIGFzIGRlc2NyaWJlZCBoZXJlOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQlZlcnNpb25DaGFuZ2VSZXF1ZXN0L3NldFZlcnNpb25cbiAgICAgICAgICAgIGNvbnN0IHIgPSBpbmRleGVkREIub3Blbih0aGlzLm5hbWUsIHRoaXMudmVyc2lvbik7XG4gICAgICAgICAgICByLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdChuKTtcbiAgICAgICAgICAgIH0sIHIub25ibG9ja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIG4obmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUsIFwiQ2Fubm90IHVwZ3JhZGUgSW5kZXhlZERCIHNjaGVtYSB3aGlsZSBhbm90aGVyIHRhYiBpcyBvcGVuLiBDbG9zZSBhbGwgdGFicyB0aGF0IGFjY2VzcyBGaXJlc3RvcmUgYW5kIHJlbG9hZCB0aGlzIHBhZ2UgdG8gcHJvY2VlZC5cIikpO1xuICAgICAgICAgICAgfSwgci5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHQudGFyZ2V0LmVycm9yO1xuICAgICAgICAgICAgICAgIFwiVmVyc2lvbkVycm9yXCIgPT09IHIubmFtZSA/IG4obmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIG5ld2VyIHZlcnNpb24gb2YgdGhlIEZpcmVzdG9yZSBTREsgd2FzIHByZXZpb3VzbHkgdXNlZCBhbmQgc28gdGhlIHBlcnNpc3RlZCBkYXRhIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHZlcnNpb24gb2YgdGhlIFNESyB5b3UgYXJlIG5vdyB1c2luZy4gVGhlIFNESyB3aWxsIG9wZXJhdGUgd2l0aCBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gSWYgeW91IG5lZWQgcGVyc2lzdGVuY2UsIHBsZWFzZSByZS11cGdyYWRlIHRvIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgU0RLIG9yIGVsc2UgY2xlYXIgdGhlIHBlcnNpc3RlZCBJbmRleGVkREIgZGF0YSBmb3IgeW91ciBhcHAgdG8gc3RhcnQgZnJlc2guXCIpKSA6IFwiSW52YWxpZFN0YXRlRXJyb3JcIiA9PT0gci5uYW1lID8gbihuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlVuYWJsZSB0byBvcGVuIGFuIEluZGV4ZWREQiBjb25uZWN0aW9uLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBydW5uaW5nIGluIGEgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9uIG9uIGEgYnJvd3NlciB3aG9zZSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb25zIGRvIG5vdCBzdXBwb3J0IEluZGV4ZWREQjogXCIgKyByKSkgOiBuKG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlLCByKSk7XG4gICAgICAgICAgICB9LCByLm9udXBncmFkZW5lZWRlZCA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsICdEYXRhYmFzZSBcIicgKyB0aGlzLm5hbWUgKyAnXCIgcmVxdWlyZXMgdXBncmFkZSBmcm9tIHZlcnNpb246JywgZS5vbGRWZXJzaW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMuUy5CKHQsIHIudHJhbnNhY3Rpb24sIGUub2xkVmVyc2lvbiwgdGhpcy52ZXJzaW9uKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiRGF0YWJhc2UgdXBncmFkZSB0byB2ZXJzaW9uIFwiICsgdGhpcy52ZXJzaW9uICsgXCIgY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpKSwgdGhpcy5MICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IGUgPT4gdGhpcy5MKGUpKSwgdGhpcy5kYjtcbiAgICB9XG4gICAgayhlKSB7XG4gICAgICAgIHRoaXMuTCA9IGUsIHRoaXMuZGIgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gdCA9PiBlKHQpKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuVHJhbnNhY3Rpb24oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gXCJyZWFkb25seVwiID09PSB0O1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICsrcztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYiA9IGF3YWl0IHRoaXMuTihlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX1NpbXBsZURiVHJhbnNhY3Rpb24ub3Blbih0aGlzLmRiLCBlLCBpID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgbiksIHMgPSByKHQpLm5leHQoKGUgPT4gKHQucCgpLCBcbiAgICAgICAgICAgICAgICBlKSkpLmNhdGNoKChlID0+IChcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgIHQuYWJvcnQoZSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZSkpKSkudG9Qcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gQXMgbm90ZWQgYWJvdmUsIGVycm9ycyBhcmUgcHJvcGFnYXRlZCBieSBhYm9ydGluZyB0aGUgdHJhbnNhY3Rpb24uIFNvXG4gICAgICAgICAgICAgICAgLy8gd2Ugc3dhbGxvdyBhbnkgZXJyb3IgaGVyZSB0byBhdm9pZCB0aGUgYnJvd3NlciBsb2dnaW5nIGl0IGFzIHVuaGFuZGxlZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gcy5jYXRjaCgoKCkgPT4ge30pKSwgXG4gICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xuICAgICAgICAgICAgICAgIC8vIGZpcmUpLCBidXQgc3RpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0cmFuc2FjdGlvbkZuUmVzdWx0IGJhY2sgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVyLlxuICAgICAgICAgICAgICAgIGF3YWl0IHQuZywgcztcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZSwgbiA9IFwiRmlyZWJhc2VFcnJvclwiICE9PSB0Lm5hbWUgJiYgcyA8IDM7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhzY2htaWR0LXNlYmFzdGlhbik6IFdlIGNvdWxkIHByb2JhYmx5IGJlIHNtYXJ0ZXIgYWJvdXQgdGhpcyBhbmRcbiAgICAgICAgICAgICAgICAvLyBub3QgcmV0cnkgZXhjZXB0aW9ucyB0aGF0IGFyZSBsaWtlbHkgdW5yZWNvdmVyYWJsZSAoc3VjaCBhcyBxdW90YVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VlZGVkIGVycm9ycykuXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2UgY2Fubm90IHVzZSBhbiBpbnN0YW5jZW9mIGNoZWNrIGZvciBGaXJlc3RvcmVFeGNlcHRpb24sIHNpbmNlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VwdGlvbiBpcyB3cmFwcGVkIGluIGEgZ2VuZXJpYyBlcnJvciBieSBvdXIgYXN5bmMvYXdhaXQgaGFuZGxpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlRyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOlwiLCB0Lm1lc3NhZ2UsIFwiUmV0cnlpbmc6XCIsIG4pLCBcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCksICFuKSByZXR1cm4gUHJvbWlzZS5yZWplY3QodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGIgJiYgdGhpcy5kYi5jbG9zZSgpLCB0aGlzLmRiID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNvbnRyb2xsZXIgZm9yIGl0ZXJhdGluZyBvdmVyIGEga2V5IHJhbmdlIG9yIGluZGV4LiBJdCBhbGxvd3MgYW4gaXRlcmF0ZVxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XG4gKiB3aXRoaW4gdGhlIGtleSByYW5nZSBvciBpbmRleC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSXRlcmF0aW9uQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnEgPSBlLCB0aGlzLksgPSAhMSwgdGhpcy4kID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGlzRG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSztcbiAgICB9XG4gICAgZ2V0IFUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQ7XG4gICAgfVxuICAgIHNldCBjdXJzb3IoZSkge1xuICAgICAgICB0aGlzLnEgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLksgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHNraXAgdG8gdGhhdCBuZXh0IGtleSwgd2hpY2ggY291bGQgYmVcbiAgICAgKiBhbiBpbmRleCBvciBhIHByaW1hcnkga2V5LlxuICAgICAqLyAgICBXKGUpIHtcbiAgICAgICAgdGhpcy4kID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5xLmRlbGV0ZSgpKTtcbiAgICB9XG59XG5cbi8qKiBBbiBlcnJvciB0aGF0IHdyYXBzIGV4Y2VwdGlvbnMgdGhhdCB0aHJvd24gZHVyaW5nIEluZGV4ZWREQiBleGVjdXRpb24uICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yIGV4dGVuZHMgRmlyZXN0b3JlRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoRC5VTkFWQUlMQUJMRSwgYEluZGV4ZWREQiB0cmFuc2FjdGlvbiAnJHtlfScgZmFpbGVkOiAke3R9YCksIHRoaXMubmFtZSA9IFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiO1xuICAgIH1cbn1cblxuLyoqIFZlcmlmaWVzIHdoZXRoZXIgYGVgIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkge1xuICAgIC8vIFVzZSBuYW1lIGVxdWFsaXR5LCBhcyBpbnN0YW5jZW9mIGNoZWNrcyBvbiBlcnJvcnMgZG9uJ3Qgd29yayB3aXRoIGVycm9yc1xuICAgIC8vIHRoYXQgd3JhcCBvdGhlciBlcnJvcnMuXG4gICAgcmV0dXJuIFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiID09PSBlLm5hbWU7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XG4gKlxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxuICovIGNsYXNzIF9fUFJJVkFURV9TaW1wbGVEYlN0b3JlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSBlO1xuICAgIH1cbiAgICBwdXQoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdCA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIGUsIHQpLCBcbiAgICAgICAgbiA9IHRoaXMuc3RvcmUucHV0KHQsIGUpKSA6IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIFwiPGF1dG8ta2V5PlwiLCBlKSwgXG4gICAgICAgIG4gPSB0aGlzLnN0b3JlLnB1dChlKSksIF9fUFJJVkFURV93cmFwUmVxdWVzdChuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG9iamVjdCB0byB3cml0ZS5cbiAgICAgKiBAcmV0dXJucyBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXG4gICAgICovICAgIGFkZChlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiQUREXCIsIHRoaXMuc3RvcmUubmFtZSwgZSwgZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5zdG9yZS5hZGQoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyYXBSZXF1ZXN0KHRoaXMuc3RvcmUuZ2V0KGUpKS5uZXh0KCh0ID0+IChcbiAgICAgICAgLy8gTm9ybWFsaXplIG5vbmV4aXN0ZW5jZSB0byBudWxsLlxuICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBudWxsKSwgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJHRVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBlLCB0KSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiREVMRVRFXCIsIHRoaXMuc3RvcmUubmFtZSwgZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5zdG9yZS5kZWxldGUoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB3ZSBldmVyIG5lZWQgbW9yZSBvZiB0aGUgY291bnQgdmFyaWFudHMsIHdlIGNhbiBhZGQgb3ZlcmxvYWRzLiBGb3Igbm93LFxuICAgICAqIGFsbCB3ZSBuZWVkIGlzIHRvIGNvdW50IGV2ZXJ5dGhpbmcgaW4gYSBzdG9yZS5cbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBzdG9yZS5cbiAgICAgKi8gICAgY291bnQoKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdCh0aGlzLnN0b3JlLmNvdW50KCkpO1xuICAgIH1cbiAgICBHKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyhlLCB0KTtcbiAgICAgICAgLy8gVXNlIGBnZXRBbGwoKWAgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgSW5kZXhlZERCIHYzLCBhcyBpdCBpcyByb3VnaGx5XG4gICAgICAgIC8vIDIwJSBmYXN0ZXIuIFVuZm9ydHVuYXRlbHksIGdldEFsbCgpIGRvZXMgbm90IHN1cHBvcnQgY3VzdG9tIGluZGljZXMuXG4gICAgICAgICAgICAgICAgaWYgKG4uaW5kZXggfHwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0aGlzLnN0b3JlLmdldEFsbCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuY3Vyc29yKG4pLCB0ID0gW107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5qKGUsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQucHVzaChuKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmUuZ2V0QWxsKG4ucmFuZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG4oZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0sIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQoZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBmaXJzdCBgY291bnRgIGVsZW1lbnRzIGZyb20gdGhlIHByb3ZpZGVkIGluZGV4IHJhbmdlLiBMb2FkcyBhbGxcbiAgICAgKiBlbGVtZW50cyBpZiBubyBsaW1pdCBpcyBwcm92aWRlZC5cbiAgICAgKi8gICAgSChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmdldEFsbChlLCBudWxsID09PSB0ID8gdm9pZCAwIDogdCk7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgbi5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdChlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCBuLm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGUodC50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgSihlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiREVMRVRFIEFMTFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKGUsIHQpO1xuICAgICAgICBuLlkgPSAhMTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5qKHIsICgoZSwgdCwgbikgPT4gbi5kZWxldGUoKSkpO1xuICAgIH1cbiAgICBaKGUsIHQpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHQgPyBuID0gZSA6IChuID0ge30sIHQgPSBlKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5qKHIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxuICAgICAqIGVhY2ggZW50cnkgYmVmb3JlIGl0ZXJhdGluZyB0aGUgbmV4dCBlbnRyeS4gVGhpcyBhbGxvd3MgdGhlIGNhbGxiYWNrIHRvIGRvXG4gICAgICogYXN5bmNocm9ub3VzIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXRlcmF0aW9uIHNob3VsZCBjb250aW51ZS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm92aWRlZCBjYWxsYmFjayBzaG91bGQgcmV0dXJuIGB0cnVlYCB0byBjb250aW51ZSBpdGVyYXRpb24sIGFuZFxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqLyAgICBYKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY3Vyc29yKHt9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChuLCByKSA9PiB7XG4gICAgICAgICAgICB0Lm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHIodCk7XG4gICAgICAgICAgICB9LCB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgciA/IGUoci5wcmltYXJ5S2V5LCByLnZhbHVlKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZSA/IHIuY29udGludWUoKSA6IG4oKTtcbiAgICAgICAgICAgICAgICB9KSkgOiBuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGooZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgociwgaSkgPT4ge1xuICAgICAgICAgICAgZS5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgaShlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm4gdm9pZCByKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBfX1BSSVZBVEVfSXRlcmF0aW9uQ29udHJvbGxlcihpKSwgbyA9IHQoaS5wcmltYXJ5S2V5LCBpLnZhbHVlLCBzKTtcbiAgICAgICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gby5jYXRjaCgoZSA9PiAocy5kb25lKCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZSkpKSk7XG4gICAgICAgICAgICAgICAgICAgIG4ucHVzaChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcy5pc0RvbmUgPyByKCkgOiBudWxsID09PSBzLlUgPyBpLmNvbnRpbnVlKCkgOiBpLmNvbnRpbnVlKHMuVSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IobikpKTtcbiAgICB9XG4gICAgb3B0aW9ucyhlLCB0KSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlICYmIChcInN0cmluZ1wiID09IHR5cGVvZiBlID8gbiA9IGUgOiB0ID0gZSksIHtcbiAgICAgICAgICAgIGluZGV4OiBuLFxuICAgICAgICAgICAgcmFuZ2U6IHRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3Vyc29yKGUpIHtcbiAgICAgICAgbGV0IHQgPSBcIm5leHRcIjtcbiAgICAgICAgaWYgKGUucmV2ZXJzZSAmJiAodCA9IFwicHJldlwiKSwgZS5pbmRleCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuaW5kZXgoZS5pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gZS5ZID8gbi5vcGVuS2V5Q3Vyc29yKGUucmFuZ2UsIHQpIDogbi5vcGVuQ3Vyc29yKGUucmFuZ2UsIHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlLm9wZW5DdXJzb3IoZS5yYW5nZSwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFdyYXBzIGFuIElEQlJlcXVlc3QgaW4gYSBQZXJzaXN0ZW5jZVByb21pc2UsIHVzaW5nIHRoZSBvbnN1Y2Nlc3MgLyBvbmVycm9yXG4gKiBoYW5kbGVycyB0byByZXNvbHZlIC8gcmVqZWN0IHRoZSBQZXJzaXN0ZW5jZVByb21pc2UgYXMgYXBwcm9wcmlhdGUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3dyYXBSZXF1ZXN0KGUpIHtcbiAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICB0KG4pO1xuICAgICAgICB9LCBlLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcihlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICBuKHQpO1xuICAgICAgICB9O1xuICAgIH0pKTtcbn1cblxuLy8gR3VhcmQgc28gd2Ugb25seSByZXBvcnQgdGhlIGVycm9yIG9uY2UuXG5sZXQgRiA9ICExO1xuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcihlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9TaW1wbGVEYi5EKGdldFVBKCkpO1xuICAgIGlmICh0ID49IDEyLjIgJiYgdCA8IDEzKSB7XG4gICAgICAgIGNvbnN0IHQgPSBcIkFuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXJcIjtcbiAgICAgICAgaWYgKGUubWVzc2FnZS5pbmRleE9mKHQpID49IDApIHtcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRmlyZXN0b3JlRXJyb3IoXCJpbnRlcm5hbFwiLCBgSU9TX0lOREVYRUREQl9CVUcxOiBJbmRleGVkRGIgaGFzIHRocm93biAnJHt0fScuIFRoaXMgaXMgbGlrZWx5IGR1ZSB0byBhbiB1bmF2b2lkYWJsZSBidWcgaW4gaU9TLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5gKTtcbiAgICAgICAgICAgIHJldHVybiBGIHx8IChGID0gITAsIFxuICAgICAgICAgICAgLy8gVGhyb3cgYSBnbG9iYWwgZXhjZXB0aW9uIG91dHNpZGUgb2YgdGhpcyBwcm9taXNlIGNoYWluLCBmb3IgdGhlIHVzZXIgdG9cbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGNhdGNoLlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9KSwgMCkpLCBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlO1xufVxuXG4vKiogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgSW5kZXggQmFja2ZpbGxlci4gKi9cbmNsYXNzIF9fUFJJVkFURV9JbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5lZSA9IHQsIHRoaXMudGFzayA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnRlKDE1ZTMpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnRhc2sgJiYgKHRoaXMudGFzay5jYW5jZWwoKSwgdGhpcy50YXNrID0gbnVsbCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy50YXNrO1xuICAgIH1cbiAgICB0ZShlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4QmFja2lsbGVyXCIsIGBTY2hlZHVsZWQgaW4gJHtlfW1zYCksIHRoaXMudGFzayA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImluZGV4X2JhY2tmaWxsXCIgLyogVGltZXJJZC5JbmRleEJhY2tmaWxsICovICwgZSwgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4QmFja2lsbGVyXCIsIGBEb2N1bWVudHMgd3JpdHRlbjogJHthd2FpdCB0aGlzLmVlLm5lKCl9YCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSA/IF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4QmFja2lsbGVyXCIsIFwiSWdub3JpbmcgSW5kZXhlZERCIGVycm9yIGR1cmluZyBpbmRleCBiYWNrZmlsbDogXCIsIGUpIDogYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMudGUoNmU0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqIEltcGxlbWVudHMgdGhlIHN0ZXBzIGZvciBiYWNrZmlsbGluZyBpbmRleGVzLiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhCYWNrZmlsbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBMb2NhbFN0b3JlIHByb3ZpZGVzIGFjY2VzcyB0byBJbmRleE1hbmFnZXIgYW5kIExvY2FsRG9jdW1lbnRWaWV3LlxuICAgICAqIFRoZXNlIHByb3BlcnRpZXMgd2lsbCB1cGRhdGUgd2hlbiB0aGUgdXNlciBjaGFuZ2VzLiBDb25zZXF1ZW50bHksXG4gICAgICogbWFraW5nIGEgbG9jYWwgY29weSBvZiBJbmRleE1hbmFnZXIgYW5kIExvY2FsRG9jdW1lbnRWaWV3IHdpbGwgcmVxdWlyZVxuICAgICAqIHVwZGF0ZXMgb3ZlciB0aW1lLiBUaGUgc2ltcGxlciBzb2x1dGlvbiBpcyB0byByZWx5IG9uIExvY2FsU3RvcmUgdG8gaGF2ZVxuICAgICAqIGFuIHVwLXRvLWRhdGUgcmVmZXJlbmNlcyB0byBJbmRleE1hbmFnZXIgYW5kIExvY2FsRG9jdW1lbnRTdG9yZS5cbiAgICAgKi9cbiAgICBlLCB0KSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IGUsIHRoaXMucGVyc2lzdGVuY2UgPSB0O1xuICAgIH1cbiAgICBhc3luYyBuZShlID0gNTApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJCYWNrZmlsbCBJbmRleGVzXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4gdGhpcy5yZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIGluZGV4IGVudHJpZXMgdW50aWwgdGhlIGNhcCBpcyByZWFjaGVkLiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHByb2Nlc3NlZC4gKi8gICAgcmUoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IFNldDtcbiAgICAgICAgbGV0IHIgPSB0LCBpID0gITA7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZG9XaGlsZSgoKCkgPT4gITAgPT09IGkgJiYgciA+IDApLCAoKCkgPT4gdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci5nZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiAhbi5oYXModCkpIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleEJhY2tpbGxlclwiLCBgUHJvY2Vzc2luZyBjb2xsZWN0aW9uOiAke3R9YCksIFxuICAgICAgICAgICAgdGhpcy5pZShlLCB0LCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICByIC09IGUsIG4uYWRkKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaSA9ICExO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiB0IC0gcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgZW50cmllcyBmb3IgdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuIFJldHVybnMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcHJvY2Vzc2VkLlxuICAgICAqLyAgICBpZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgZWFybGllc3Qgb2Zmc2V0IG9mIGFsbCBmaWVsZCBpbmRleGVzIHRvIHF1ZXJ5IHRoZSBsb2NhbCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIuZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0KS5uZXh0KChyID0+IHRoaXMubG9jYWxTdG9yZS5sb2NhbERvY3VtZW50cy5nZXROZXh0RG9jdW1lbnRzKGUsIHQsIHIsIG4pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uY2hhbmdlcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLnVwZGF0ZUluZGV4RW50cmllcyhlLCBpKS5uZXh0KCgoKSA9PiB0aGlzLnNlKHIsIG4pKSkubmV4dCgobiA9PiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNraWxsZXJcIiwgYFVwZGF0aW5nIG9mZnNldDogJHtufWApLCBcbiAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIudXBkYXRlQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4pKSkpLm5leHQoKCgpID0+IGkuc2l6ZSkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIG5leHQgb2Zmc2V0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuICovICAgIHNlKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBlO1xuICAgICAgICByZXR1cm4gdC5jaGFuZ2VzLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld0luZGV4T2Zmc2V0RnJvbURvY3VtZW50KHQpO1xuICAgICAgICAgICAgX19QUklWQVRFX2luZGV4T2Zmc2V0Q29tcGFyYXRvcihyLCBuKSA+IDAgJiYgKG4gPSByKTtcbiAgICAgICAgfSkpLCBuZXcgSW5kZXhPZmZzZXQobi5yZWFkVGltZSwgbi5kb2N1bWVudEtleSwgTWF0aC5tYXgodC5iYXRjaElkLCBlLmxhcmdlc3RCYXRjaElkKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBgTGlzdGVuU2VxdWVuY2VgIGlzIGEgbW9ub3RvbmljIHNlcXVlbmNlLiBJdCBpcyBpbml0aWFsaXplZCB3aXRoIGEgbWluaW11bSB2YWx1ZSB0b1xuICogZXhjZWVkLiBBbGwgc3Vic2VxdWVudCBjYWxscyB0byBuZXh0IHdpbGwgcmV0dXJuIGluY3JlYXNpbmcgdmFsdWVzLiBJZiBwcm92aWRlZCB3aXRoIGFcbiAqIGBTZXF1ZW5jZU51bWJlclN5bmNlcmAsIGl0IHdpbGwgYWRkaXRpb25hbGx5IGJ1bXAgaXRzIG5leHQgdmFsdWUgd2hlbiB0b2xkIG9mIGEgbmV3IHZhbHVlLCBhc1xuICogd2VsbCBhcyB3cml0ZSBvdXQgc2VxdWVuY2UgbnVtYmVycyB0aGF0IGl0IHByb2R1Y2VzIHZpYSBgbmV4dCgpYC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2Uge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gZSwgdCAmJiAodC5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBlID0+IHRoaXMub2UoZSksIHRoaXMuX2UgPSBlID0+IHQud3JpdGVTZXF1ZW5jZU51bWJlcihlKSk7XG4gICAgfVxuICAgIG9lKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZSA9IE1hdGgubWF4KGUsIHRoaXMucHJldmlvdXNWYWx1ZSksIHRoaXMucHJldmlvdXNWYWx1ZTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgY29uc3QgZSA9ICsrdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcy5fZSAmJiB0aGlzLl9lKGUpLCBlO1xuICAgIH1cbn1cblxuX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlID0gLTE7XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFyaWFibGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBudWxsLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQoZSkge1xuICAgIHJldHVybiBudWxsID09IGU7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHZhbHVlIHJlcHJlc2VudHMgLTAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyhlKSB7XG4gICAgLy8gRGV0ZWN0IGlmIHRoZSB2YWx1ZSBpcyAtMC4wLiBCYXNlZCBvbiBwb2x5ZmlsbCBmcm9tXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gICAgcmV0dXJuIDAgPT09IGUgJiYgMSAvIGUgPT0gLTEgLyAwO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhbHVlIGlzIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIGludGVnZXIgcmFuZ2VcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byB0ZXN0IGZvciBiZWluZyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSByYW5nZVxuICovIGZ1bmN0aW9uIGlzU2FmZUludGVnZXIoZSkge1xuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiBlICYmIE51bWJlci5pc0ludGVnZXIoZSkgJiYgIV9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyhlKSAmJiBlIDw9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSICYmIGUgPj0gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSByZXNvdXJjZSBwYXRoIGludG8gYSBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChlKSB7XG4gICAgbGV0IHQgPSBcIlwiO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgdC5sZW5ndGggPiAwICYmICh0ID0gX19QUklWQVRFX2VuY29kZVNlcGFyYXRvcih0KSksIFxuICAgIHQgPSBfX1BSSVZBVEVfZW5jb2RlU2VnbWVudChlLmdldChuKSwgdCk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbmNvZGVTZXBhcmF0b3IodCk7XG59XG5cbi8qKiBFbmNvZGVzIGEgc2luZ2xlIHNlZ21lbnQgb2YgYSByZXNvdXJjZSBwYXRoIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5jb2RlU2VnbWVudChlLCB0KSB7XG4gICAgbGV0IG4gPSB0O1xuICAgIGNvbnN0IHIgPSBlLmxlbmd0aDtcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHI7IHQrKykge1xuICAgICAgICBjb25zdCByID0gZS5jaGFyQXQodCk7XG4gICAgICAgIHN3aXRjaCAocikge1xuICAgICAgICAgIGNhc2UgXCJcXDBcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMVwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbiArPSByO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG4vKiogRW5jb2RlcyBhIHBhdGggc2VwYXJhdG9yIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5jb2RlU2VwYXJhdG9yKGUpIHtcbiAgICByZXR1cm4gZSArIFwiXHUwMDAxXHUwMDAxXCI7XG59XG5cbi8qKlxuICogRGVjb2RlcyB0aGUgZ2l2ZW4gSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0gb2YgYSByZXNvdXJjZSBwYXRoIGludG9cbiAqIGEgUmVzb3VyY2VQYXRoIGluc3RhbmNlLiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHN1aXRhYmxlIGZvciB1c2Ugd2l0aFxuICogZGVjb2RpbmcgcmVzb3VyY2UgbmFtZXMgZnJvbSB0aGUgc2VydmVyOyB0aG9zZSBhcmUgT25lIFBsYXRmb3JtIGZvcm1hdFxuICogc3RyaW5ncy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKGUpIHtcbiAgICAvLyBFdmVudCB0aGUgZW1wdHkgcGF0aCBtdXN0IGVuY29kZSBhcyBhIHBhdGggb2YgYXQgbGVhc3QgbGVuZ3RoIDIuIEEgcGF0aFxuICAgIC8vIHdpdGggZXhhY3RseSAyIG11c3QgYmUgdGhlIGVtcHR5IHBhdGguXG4gICAgY29uc3QgdCA9IGUubGVuZ3RoO1xuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydCh0ID49IDIpLCAyID09PSB0KSByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoXCJcdTAwMDFcIiA9PT0gZS5jaGFyQXQoMCkgJiYgXCJcdTAwMDFcIiA9PT0gZS5jaGFyQXQoMSkpLCBcbiAgICBSZXNvdXJjZVBhdGguZW1wdHlQYXRoKCk7XG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlcnMgY2Fubm90IGV4aXN0IHBhc3QgdGhlIHNlY29uZC10by1sYXN0IHBvc2l0aW9uIGluIHRoZVxuICAgIC8vIHNvdXJjZSB2YWx1ZS5cbiAgICAgICAgY29uc3QgX19QUklWQVRFX2xhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXggPSB0IC0gMiwgbiA9IFtdO1xuICAgIGxldCByID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQ7ICkge1xuICAgICAgICAvLyBUaGUgbGFzdCB0d28gY2hhcmFjdGVycyBvZiBhIHZhbGlkIGVuY29kZWQgcGF0aCBtdXN0IGJlIGEgc2VwYXJhdG9yLCBzb1xuICAgICAgICAvLyB0aGVyZSBtdXN0IGJlIGFuIGVuZCB0byB0aGlzIHNlZ21lbnQuXG4gICAgICAgIGNvbnN0IHQgPSBlLmluZGV4T2YoXCJcdTAwMDFcIiwgaSk7XG4gICAgICAgICh0IDwgMCB8fCB0ID4gX19QUklWQVRFX2xhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXgpICYmIGZhaWwoKTtcbiAgICAgICAgc3dpdGNoIChlLmNoYXJBdCh0ICsgMSkpIHtcbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBjb25zdCBzID0gZS5zdWJzdHJpbmcoaSwgdCk7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIDAgPT09IHIubGVuZ3RoID8gXG4gICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXG4gICAgICAgICAgICAvLyBhbmQgXFwwMDFcbiAgICAgICAgICAgIG8gPSBzIDogKHIgKz0gcywgbyA9IHIsIHIgPSBcIlwiKSwgbi5wdXNoKG8pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDEwXCI6XG4gICAgICAgICAgICByICs9IGUuc3Vic3RyaW5nKGksIHQpLCByICs9IFwiXFwwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTFcIjpcbiAgICAgICAgICAgIC8vIFRoZSBlc2NhcGUgY2hhcmFjdGVyIGNhbiBiZSB1c2VkIGluIHRoZSBvdXRwdXQgdG8gZW5jb2RlIGl0c2VsZi5cbiAgICAgICAgICAgIHIgKz0gZS5zdWJzdHJpbmcoaSwgdCArIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgZmFpbCgpO1xuICAgICAgICB9XG4gICAgICAgIGkgPSB0ICsgMjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgobik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IE0gPSBbIFwidXNlcklkXCIsIFwiYmF0Y2hJZFwiIF07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBuYW1lICdvd25lcicgaXMgY2hvc2VuIHRvIGVuc3VyZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoXG4gKiBvbGRlciBjbGllbnRzIHRoYXQgb25seSBzdXBwb3J0ZWQgc2luZ2xlIGxvY2tlZCBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlXG4gKiBsYXllci5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXG4gKiBpbmRleCB0byBpdGVyYXRlIG92ZXIgYWxsIGF0IGRvY3VtZW50IG11dGF0aW9ucyBmb3IgYSBnaXZlbiBwYXRoIG9yIGxvd2VyLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uUHJlZml4Rm9yUGF0aChlLCB0KSB7XG4gICAgcmV0dXJuIFsgZSwgX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0KSBdO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdWxsIGluZGV4IGtleSBvZiBbdXNlcklkLCBlbmNvZGVkUGF0aCwgYmF0Y2hJZF0gZm9yIGluc2VydGluZ1xuICogYW5kIGRlbGV0aW5nIGludG8gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXguXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvbktleShlLCB0LCBuKSB7XG4gICAgcmV0dXJuIFsgZSwgX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0KSwgbiBdO1xufVxuXG4vKipcbiAqIEJlY2F1c2Ugd2Ugc3RvcmUgYWxsIHRoZSB1c2VmdWwgaW5mb3JtYXRpb24gZm9yIHRoaXMgc3RvcmUgaW4gdGhlIGtleSxcbiAqIHRoZXJlIGlzIG5vIHVzZWZ1bCBpbmZvcm1hdGlvbiB0byBzdG9yZSBhcyB0aGUgdmFsdWUuIFRoZSByYXcgKHVuZW5jb2RlZClcbiAqIHBhdGggY2Fubm90IGJlIHN0b3JlZCBiZWNhdXNlIEluZGV4ZWREYiBkb2Vzbid0IHN0b3JlIHByb3RvdHlwZVxuICogaW5mb3JtYXRpb24uXG4gKi8gY29uc3QgeCA9IHt9LCBPID0gWyBcInByZWZpeFBhdGhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJyZWFkVGltZVwiLCBcImRvY3VtZW50SWRcIiBdLCBOID0gWyBcInByZWZpeFBhdGhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJkb2N1bWVudElkXCIgXSwgQiA9IFsgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJyZWFkVGltZVwiLCBcInByZWZpeFBhdGhcIiwgXCJkb2N1bWVudElkXCIgXSwgTCA9IFsgXCJjYW5vbmljYWxJZFwiLCBcInRhcmdldElkXCIgXSwgayA9IFsgXCJ0YXJnZXRJZFwiLCBcInBhdGhcIiBdLCBxID0gWyBcInBhdGhcIiwgXCJ0YXJnZXRJZFwiIF0sIFEgPSBbIFwiY29sbGVjdGlvbklkXCIsIFwicGFyZW50XCIgXSwgSyA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIgXSwgJCA9IFsgXCJ1aWRcIiwgXCJzZXF1ZW5jZU51bWJlclwiIF0sIFUgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiLCBcImFycmF5VmFsdWVcIiwgXCJkaXJlY3Rpb25hbFZhbHVlXCIsIFwib3JkZXJlZERvY3VtZW50S2V5XCIsIFwiZG9jdW1lbnRLZXlcIiBdLCBXID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiwgXCJvcmRlcmVkRG9jdW1lbnRLZXlcIiBdLCBHID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25QYXRoXCIsIFwiZG9jdW1lbnRJZFwiIF0sIHogPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvblBhdGhcIiwgXCJsYXJnZXN0QmF0Y2hJZFwiIF0sIGogPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwibGFyZ2VzdEJhdGNoSWRcIiBdLCBIID0gWyAuLi5bIC4uLlsgLi4uWyAuLi5bIFwibXV0YXRpb25RdWV1ZXNcIiwgXCJtdXRhdGlvbnNcIiwgXCJkb2N1bWVudE11dGF0aW9uc1wiLCBcInJlbW90ZURvY3VtZW50c1wiLCBcInRhcmdldHNcIiwgXCJvd25lclwiLCBcInRhcmdldEdsb2JhbFwiLCBcInRhcmdldERvY3VtZW50c1wiIF0sIFwiY2xpZW50TWV0YWRhdGFcIiBdLCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIgXSwgXCJjb2xsZWN0aW9uUGFyZW50c1wiIF0sIFwiYnVuZGxlc1wiLCBcIm5hbWVkUXVlcmllc1wiIF0sIEogPSBbIC4uLkgsIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIFkgPSBbIFwibXV0YXRpb25RdWV1ZXNcIiwgXCJtdXRhdGlvbnNcIiwgXCJkb2N1bWVudE11dGF0aW9uc1wiLCBcInJlbW90ZURvY3VtZW50c1YxNFwiLCBcInRhcmdldHNcIiwgXCJvd25lclwiLCBcInRhcmdldEdsb2JhbFwiLCBcInRhcmdldERvY3VtZW50c1wiLCBcImNsaWVudE1ldGFkYXRhXCIsIFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiwgXCJjb2xsZWN0aW9uUGFyZW50c1wiLCBcImJ1bmRsZXNcIiwgXCJuYW1lZFF1ZXJpZXNcIiwgXCJkb2N1bWVudE92ZXJsYXlzXCIgXSwgWiA9IFksIFggPSBbIC4uLlosIFwiaW5kZXhDb25maWd1cmF0aW9uXCIsIFwiaW5kZXhTdGF0ZVwiLCBcImluZGV4RW50cmllc1wiIF07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb24gZXh0ZW5kcyBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudWUgPSBlLCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfU2ltcGxlRGIuTyhuLnVlLCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX29iamVjdFNpemUoZSkge1xuICAgIGxldCB0ID0gMDtcbiAgICBmb3IgKGNvbnN0IG4gaW4gZSkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIG4pICYmIHQrKztcbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaChlLCB0KSB7XG4gICAgZm9yIChjb25zdCBuIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBuKSAmJiB0KG4sIGVbbl0pO1xufVxuXG5mdW5jdGlvbiBpc0VtcHR5KGUpIHtcbiAgICBmb3IgKGNvbnN0IHQgaW4gZSkgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KSkgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbi8vIHRyZWUuXG5jbGFzcyBTb3J0ZWRNYXAge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gZSwgdGhpcy5yb290ID0gdCB8fCBMTFJCTm9kZS5FTVBUWTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICBpbnNlcnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5pbnNlcnQoZSwgdCwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5yZW1vdmUoZSwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cbiAgICBnZXQoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IXQuaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmNvbXBhcmF0b3IoZSwgdC5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybiB0LnZhbHVlO1xuICAgICAgICAgICAgbiA8IDAgPyB0ID0gdC5sZWZ0IDogbiA+IDAgJiYgKHQgPSB0LnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgaW4gdGhpcyBzb3J0ZWQgbWFwLCBvciAtMSBpZiBpdCBkb2Vzbid0XG4gICAgLy8gZXhpc3QuXG4gICAgaW5kZXhPZihlKSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBub2RlcyB0aGF0IHdlcmUgcHJ1bmVkIHdoZW4gZGVzY2VuZGluZyByaWdodFxuICAgICAgICBsZXQgdCA9IDAsIG4gPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFuLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5jb21wYXJhdG9yKGUsIG4ua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSByKSByZXR1cm4gdCArIG4ubGVmdC5zaXplO1xuICAgICAgICAgICAgciA8IDAgPyBuID0gbi5sZWZ0IDogKFxuICAgICAgICAgICAgLy8gQ291bnQgYWxsIG5vZGVzIGxlZnQgb2YgdGhlIG5vZGUgcGx1cyB0aGUgbm9kZSBpdHNlbGZcbiAgICAgICAgICAgIHQgKz0gbi5sZWZ0LnNpemUgKyAxLCBuID0gbi5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwoZSk7XG4gICAgfVxuICAgIGZvckVhY2goZSkge1xuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZSh0LCBuKSwgITEpKSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZS5wdXNoKGAke3R9OiR7bn1gKSwgITEpKSksIGB7JHtlLmpvaW4oXCIsIFwiKX19YDtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xuICAgIC8vIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnJldmVyc2VUcmF2ZXJzYWwoZSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBlLCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20oZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgZSwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcFxuLy8gQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbmNsYXNzIFNvcnRlZE1hcEl0ZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlID0gciwgdGhpcy5ub2RlU3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICBmb3IgKDshZS5pc0VtcHR5KCk7ICkgaWYgKGkgPSB0ID8gbihlLmtleSwgdCkgOiAxLCBcbiAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXG4gICAgICAgIHQgJiYgciAmJiAoaSAqPSAtMSksIGkgPCAwKSBcbiAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcbiAgICAgICAgZSA9IHRoaXMuaXNSZXZlcnNlID8gZS5sZWZ0IDogZS5yaWdodDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBzdG9wIGl0ZXJhdGluZztcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2goZSksIGUgPSB0aGlzLmlzUmV2ZXJzZSA/IGUucmlnaHQgOiBlLmxlZnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLm5vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGtleTogZS5rZXksXG4gICAgICAgICAgICB2YWx1ZTogZS52YWx1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIGZvciAoZSA9IGUubGVmdDsgIWUuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2goZSksIGUgPSBlLnJpZ2h0OyBlbHNlIGZvciAoZSA9IGUucmlnaHQ7ICFlLmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKGUpLCBcbiAgICAgICAgZSA9IGUubGVmdDtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5ub2RlU3RhY2subGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubm9kZVN0YWNrW3RoaXMubm9kZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5OiBlLmtleSxcbiAgICAgICAgICAgIHZhbHVlOiBlLnZhbHVlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcEl0ZXJhdG9yXG4vLyBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cbmNsYXNzIExMUkJOb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZSwgdGhpcy52YWx1ZSA9IHQsIHRoaXMuY29sb3IgPSBudWxsICE9IG4gPyBuIDogTExSQk5vZGUuUkVELCB0aGlzLmxlZnQgPSBudWxsICE9IHIgPyByIDogTExSQk5vZGUuRU1QVFksIFxuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbCAhPSBpID8gaSA6IExMUkJOb2RlLkVNUFRZLCB0aGlzLnNpemUgPSB0aGlzLmxlZnQuc2l6ZSArIDEgKyB0aGlzLnJpZ2h0LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cbiAgICBjb3B5KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShudWxsICE9IGUgPyBlIDogdGhpcy5rZXksIG51bGwgIT0gdCA/IHQgOiB0aGlzLnZhbHVlLCBudWxsICE9IG4gPyBuIDogdGhpcy5jb2xvciwgbnVsbCAhPSByID8gciA6IHRoaXMubGVmdCwgbnVsbCAhPSBpID8gaSA6IHRoaXMucmlnaHQpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwoZSkgfHwgZSh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5yaWdodC5pbm9yZGVyVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5yZXZlcnNlVHJhdmVyc2FsKGUpIHx8IGUodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMubGVmdC5yZXZlcnNlVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIG5vZGUgaW4gdGhlIHRyZWUuXG4gICAgbWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmlzRW1wdHkoKSA/IHRoaXMgOiB0aGlzLmxlZnQubWluKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKCkua2V5O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmlzRW1wdHkoKSA/IHRoaXMua2V5IDogdGhpcy5yaWdodC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydChlLCB0LCBuKSB7XG4gICAgICAgIGxldCByID0gdGhpcztcbiAgICAgICAgY29uc3QgaSA9IG4oZSwgci5rZXkpO1xuICAgICAgICByZXR1cm4gciA9IGkgPCAwID8gci5jb3B5KG51bGwsIG51bGwsIG51bGwsIHIubGVmdC5pbnNlcnQoZSwgdCwgbiksIG51bGwpIDogMCA9PT0gaSA/IHIuY29weShudWxsLCB0LCBudWxsLCBudWxsLCBudWxsKSA6IHIuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCByLnJpZ2h0Lmluc2VydChlLCB0LCBuKSksIFxuICAgICAgICByLmZpeFVwKCk7XG4gICAgfVxuICAgIHJlbW92ZU1pbigpIHtcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHJldHVybiBMTFJCTm9kZS5FTVBUWTtcbiAgICAgICAgbGV0IGUgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZS5sZWZ0LmlzUmVkKCkgfHwgZS5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAoZSA9IGUubW92ZVJlZExlZnQoKSksIGUgPSBlLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgZS5sZWZ0LnJlbW92ZU1pbigpLCBudWxsKSwgXG4gICAgICAgIGUuZml4VXAoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGl0ZW0gcmVtb3ZlZC5cbiAgICByZW1vdmUoZSwgdCkge1xuICAgICAgICBsZXQgbiwgciA9IHRoaXM7XG4gICAgICAgIGlmICh0KGUsIHIua2V5KSA8IDApIHIubGVmdC5pc0VtcHR5KCkgfHwgci5sZWZ0LmlzUmVkKCkgfHwgci5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAociA9IHIubW92ZVJlZExlZnQoKSksIFxuICAgICAgICByID0gci5jb3B5KG51bGwsIG51bGwsIG51bGwsIHIubGVmdC5yZW1vdmUoZSwgdCksIG51bGwpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyLmxlZnQuaXNSZWQoKSAmJiAociA9IHIucm90YXRlUmlnaHQoKSksIHIucmlnaHQuaXNFbXB0eSgpIHx8IHIucmlnaHQuaXNSZWQoKSB8fCByLnJpZ2h0LmxlZnQuaXNSZWQoKSB8fCAociA9IHIubW92ZVJlZFJpZ2h0KCkpLCBcbiAgICAgICAgICAgIDAgPT09IHQoZSwgci5rZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHIucmlnaHQuaXNFbXB0eSgpKSByZXR1cm4gTExSQk5vZGUuRU1QVFk7XG4gICAgICAgICAgICAgICAgbiA9IHIucmlnaHQubWluKCksIHIgPSByLmNvcHkobi5rZXksIG4udmFsdWUsIG51bGwsIG51bGwsIHIucmlnaHQucmVtb3ZlTWluKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgciA9IHIuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCByLnJpZ2h0LnJlbW92ZShlLCB0KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHIuZml4VXAoKTtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlIGFmdGVyIHBlcmZvcm1pbmcgYW55IG5lZWRlZCByb3RhdGlvbnMuXG4gICAgZml4VXAoKSB7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGUucmlnaHQuaXNSZWQoKSAmJiAhZS5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLnJvdGF0ZUxlZnQoKSksIGUubGVmdC5pc1JlZCgpICYmIGUubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgZS5sZWZ0LmlzUmVkKCkgJiYgZS5yaWdodC5pc1JlZCgpICYmIChlID0gZS5jb2xvckZsaXAoKSksIGU7XG4gICAgfVxuICAgIG1vdmVSZWRMZWZ0KCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiBlLnJpZ2h0LmxlZnQuaXNSZWQoKSAmJiAoZSA9IGUuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBlLnJpZ2h0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgZSA9IGUucm90YXRlTGVmdCgpLCBlID0gZS5jb2xvckZsaXAoKSksIGU7XG4gICAgfVxuICAgIG1vdmVSZWRSaWdodCgpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gZS5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAoZSA9IGUucm90YXRlUmlnaHQoKSwgZSA9IGUuY29sb3JGbGlwKCkpLCBlO1xuICAgIH1cbiAgICByb3RhdGVMZWZ0KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgbnVsbCwgdGhpcy5yaWdodC5sZWZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBlLCBudWxsKTtcbiAgICB9XG4gICAgcm90YXRlUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuUkVELCB0aGlzLmxlZnQucmlnaHQsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbnVsbCwgZSk7XG4gICAgfVxuICAgIGNvbG9yRmxpcCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpLCB0ID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgZSwgdCk7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdygyLCBlKSA8PSB0aGlzLnNpemUgKyAxO1xuICAgIH1cbiAgICAvLyBJbiBhIGJhbGFuY2VkIFJCIHRyZWUsIHRoZSBibGFjay1kZXB0aCAobnVtYmVyIG9mIGJsYWNrIG5vZGVzKSBmcm9tIHJvb3QgdG9cbiAgICAvLyBsZWF2ZXMgaXMgZXF1YWwgb24gYm90aCBzaWRlcy4gIFRoaXMgZnVuY3Rpb24gdmVyaWZpZXMgdGhhdCBvciBhc3NlcnRzLlxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy5pc1JlZCgpICYmIHRoaXMubGVmdC5pc1JlZCgpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzUmVkKCkpIHRocm93IGZhaWwoKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubGVmdC5jaGVjaygpO1xuICAgICAgICBpZiAoZSAhPT0gdGhpcy5yaWdodC5jaGVjaygpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgIHJldHVybiBlICsgKHRoaXMuaXNSZWQoKSA/IDAgOiAxKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgTExSQk5vZGVcbi8vIEVtcHR5IG5vZGUgaXMgc2hhcmVkIGJldHdlZW4gYWxsIExMUkIgdHJlZXMuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuTExSQk5vZGUuRU1QVFkgPSBudWxsLCBMTFJCTm9kZS5SRUQgPSAhMCwgTExSQk5vZGUuQkxBQ0sgPSAhMTtcblxuLy8gZW5kIExMUkJFbXB0eU5vZGVcbkxMUkJOb2RlLkVNUFRZID0gbmV3IFxuLy8gUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxuY2xhc3MgTExSQkVtcHR5Tm9kZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIGdldCBrZXkoKSB7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIGdldCBjb2xvcigpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbiAgICBnZXQgbGVmdCgpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbiAgICBnZXQgcmlnaHQoKSB7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZS5cbiAgICBjb3B5KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydChlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgTExSQk5vZGUoZSwgdCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaW5vcmRlclRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV2ZXJzZVRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBjaGVjaygpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuXG4gKlxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xuICogYmUgZXF1YWwhXG4gKi9cbmNsYXNzIFNvcnRlZFNldCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBlLCB0aGlzLmRhdGEgPSBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyhlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmRhdGEuZ2V0KGUpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXhLZXkoKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2l6ZTtcbiAgICB9XG4gICAgaW5kZXhPZihlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZihlKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGVsZW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIHRoaXMuZGF0YS5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4gKGUodCksICExKSkpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gJmx0Oz0gZWxlbSAmbHQ7IHJhbmdlWzFdLiAqLyAgICBmb3JFYWNoSW5SYW5nZShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGVbMF0pO1xuICAgICAgICBmb3IgKDtuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbi5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKHIua2V5LCBlWzFdKSA+PSAwKSByZXR1cm47XG4gICAgICAgICAgICB0KHIua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCAmbHQ7PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBmb3JFYWNoV2hpbGUoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yIChuID0gdm9pZCAwICE9PSB0ID8gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KSA6IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpOyBuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoIWUobi5nZXROZXh0KCkua2V5KSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqLyAgICBmaXJzdEFmdGVyT3JFcXVhbChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGUpO1xuICAgICAgICByZXR1cm4gdC5oYXNOZXh0KCkgPyB0LmdldE5leHQoKS5rZXkgOiBudWxsO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRTZXRJdGVyYXRvcih0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkU2V0SXRlcmF0b3IodGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZWxlbWVudCAqLyAgICBhZGQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUoZSkuaW5zZXJ0KGUsICEwKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGFuIGVsZW1lbnQgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzKGUpID8gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUoZSkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VtcHR5KCk7XG4gICAgfVxuICAgIHVuaW9uV2l0aChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgLy8gTWFrZSBzdXJlIGByZXN1bHRgIGFsd2F5cyByZWZlcnMgdG8gdGhlIGxhcmdlciBvbmUgb2YgdGhlIHR3byBzZXRzLlxuICAgICAgICAgICAgICAgIHJldHVybiB0LnNpemUgPCBlLnNpemUgJiYgKHQgPSBlLCBlID0gdGhpcyksIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0ID0gdC5hZGQoZSk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBTb3J0ZWRTZXQpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IGUuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCksIG4gPSBlLmRhdGEuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7dC5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZ2V0TmV4dCgpLmtleSwgciA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0aGlzLmNvbXBhcmF0b3IoZSwgcikpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLnB1c2godCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgodCA9PiBlLnB1c2godCkpKSwgXCJTb3J0ZWRTZXQoXCIgKyBlLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgY29weShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgU29ydGVkU2V0KHRoaXMuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0LmRhdGEgPSBlLCB0O1xuICAgIH1cbn1cblxuY2xhc3MgU29ydGVkU2V0SXRlcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5pdGVyID0gZTtcbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5nZXROZXh0KCkua2V5O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmhhc05leHQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIHNvcnRlZCBzZXRzIGZvciBlcXVhbGl0eSB1c2luZyB0aGVpciBuYXR1cmFsIG9yZGVyaW5nLiBUaGVcbiAqIG1ldGhvZCBjb21wdXRlcyB0aGUgaW50ZXJzZWN0aW9uIGFuZCBpbnZva2VzIGBvbkFkZGAgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdFxuICogaXMgaW4gYGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLiBgb25SZW1vdmVgIGlzIGludm9rZWQgZm9yIGV2ZXJ5IGVsZW1lbnQgaW5cbiAqIGBiZWZvcmVgIGJ1dCBtaXNzaW5nIGZyb20gYGFmdGVyYC5cbiAqXG4gKiBUaGUgbWV0aG9kIGNyZWF0ZXMgYSBjb3B5IG9mIGJvdGggYGJlZm9yZWAgYW5kIGBhZnRlcmAgYW5kIHJ1bnMgaW4gTyhuIGxvZ1xuICogbiksIHdoZXJlIG4gaXMgdGhlIHNpemUgb2YgdGhlIHR3byBsaXN0cy5cbiAqXG4gKiBAcGFyYW0gYmVmb3JlIC0gVGhlIGVsZW1lbnRzIHRoYXQgZXhpc3QgaW4gdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBjb21wYXJhdG9yIC0gVGhlIGNvbXBhcmF0b3IgZm9yIHRoZSBlbGVtZW50cyBpbiBiZWZvcmUgYW5kIGFmdGVyLlxuICogQHBhcmFtIG9uQWRkIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mIGBcbiAqIGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLlxuICogQHBhcmFtIG9uUmVtb3ZlIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mXG4gKiBgYmVmb3JlYCBidXQgbm90IGBhZnRlcmAuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgbmV4dCBlbGVtZW50IGZyb20gdGhlIGl0ZXJhdG9yIG9yIGB1bmRlZmluZWRgIGlmIG5vbmUgYXZhaWxhYmxlLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKGUpIHtcbiAgICByZXR1cm4gZS5oYXNOZXh0KCkgPyBlLmdldE5leHQoKSA6IHZvaWQgMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGFydGlhbGx5IHBhdGNoIGEgZG9jdW1lbnQuXG4gKiBGaWVsZE1hc2sgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIE9iamVjdFZhbHVlLlxuICogRXhhbXBsZXM6XG4gKiAgIGZvbyAtIE92ZXJ3cml0ZXMgZm9vIGVudGlyZWx5IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLiBJZiBmb28gaXMgbm90XG4gKiAgICAgICAgIHByZXNlbnQgaW4gdGhlIGNvbXBhbmlvbiBPYmplY3RWYWx1ZSwgdGhlIGZpZWxkIGlzIGRlbGV0ZWQuXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cbiAqICAgICAgICAgICAgIElmIGZvbyBpcyBub3QgYW4gb2JqZWN0LCBmb28gaXMgcmVwbGFjZWQgd2l0aCBhbiBvYmplY3RcbiAqICAgICAgICAgICAgIGNvbnRhaW5pbmcgZm9vXG4gKi8gY2xhc3MgRmllbGRNYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gZSwgXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGlvbiBvZiBGaWVsZE1hc2tcbiAgICAgICAgLy8gU29ydCB0aGUgZmllbGQgbWFzayB0byBzdXBwb3J0IGBGaWVsZE1hc2suaXNFcXVhbCgpYCBhbmQgYXNzZXJ0IGJlbG93LlxuICAgICAgICBlLnNvcnQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2soW10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IEZpZWxkTWFzayBvYmplY3QgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGFkZGluZyBhbGwgdGhlIGdpdmVuXG4gICAgICogZmllbGRzIHBhdGhzIHRvIHRoaXMgZmllbGQgbWFzay5cbiAgICAgKi8gICAgdW5pb25XaXRoKGUpIHtcbiAgICAgICAgbGV0IHQgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5maWVsZHMpIHQgPSB0LmFkZChlKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSB0LmFkZChuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2sodC50b0FycmF5KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IGBmaWVsZFBhdGhgIGlzIGluY2x1ZGVkIGJ5IGF0IGxlYXN0IG9uZSBmaWVsZCBpbiB0aGlzIGZpZWxkXG4gICAgICogbWFzay5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgYW4gTyhuKSBvcGVyYXRpb24sIHdoZXJlIGBuYCBpcyB0aGUgc2l6ZSBvZiB0aGUgZmllbGQgbWFzay5cbiAgICAgKi8gICAgY292ZXJzKGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuZmllbGRzKSBpZiAodC5pc1ByZWZpeE9mKGUpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfYXJyYXlFcXVhbHModGhpcy5maWVsZHMsIGUuZmllbGRzLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQmFzZTY0RGVjb2RlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMubmFtZSA9IFwiQmFzZTY0RGVjb2RlRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQ29udmVydHMgYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBiaW5hcnkgc3RyaW5nLiAqL1xuLyoqIFRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIEJhc2U2NCBjb252ZXJzaW9uIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzQmFzZTY0QXZhaWxhYmxlKCkge1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBhdG9iO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbW11dGFibGUgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgXCJwcm90b1wiIGJ5dGUgc3RyaW5nLlxuICpcbiAqIFByb3RvIGJ5dGUgc3RyaW5ncyBjYW4gZWl0aGVyIGJlIEJhc2U2NC1lbmNvZGVkIHN0cmluZ3Mgb3IgVWludDhBcnJheXMgd2hlblxuICogc2VudCBvbiB0aGUgd2lyZS4gVGhpcyBjbGFzcyBhYnN0cmFjdHMgYXdheSB0aGlzIGRpZmZlcmVudGlhdGlvbiBieSBob2xkaW5nXG4gKiB0aGUgcHJvdG8gYnl0ZSBzdHJpbmcgaW4gYSBjb21tb24gY2xhc3MgdGhhdCBtdXN0IGJlIGNvbnZlcnRlZCBpbnRvIGEgc3RyaW5nXG4gKiBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIHByb3RvLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgQnl0ZVN0cmluZyB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmJpbmFyeVN0cmluZyA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uIF9fUFJJVkFURV9kZWNvZGVCYXNlNjQoZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXRvYihlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IGBET01FeGNlcHRpb25gIGlzIGRlZmluZWQgYmVmb3JlIHVzaW5nIGl0IHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gXCJSZWZlcmVuY2VFcnJvcjogUHJvcGVydHkgJ0RPTUV4Y2VwdGlvbicgZG9lc24ndCBleGlzdFwiIGluIHJlYWN0LW5hdGl2ZS5cbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNzExNSlcbiAgICAgICAgICAgICAgICB0aHJvdyBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiA/IG5ldyBfX1BSSVZBVEVfQmFzZTY0RGVjb2RlRXJyb3IoXCJJbnZhbGlkIGJhc2U2NCBzdHJpbmc6IFwiICsgZSkgOiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIGJpbmFyeSBzdHJpbmcgdG8gYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcuICovIChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlU3RyaW5nKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkoZSkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTsgUmVtb3ZlIHRoZSBjb3B5IG9mIHRoZSBieXRlIHN0cmluZyBoZXJlIGFzIHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGlzIGZyZXF1ZW50bHkgY2FsbGVkIGR1cmluZyBpbmRleGluZy5cbiAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGFuIFVpbnQ4YXJyYXkgdG8gYSBiaW5hcnkgc3RyaW5nLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9iaW5hcnlTdHJpbmdGcm9tVWludDhBcnJheShlKSB7XG4gICAgICAgICAgICBsZXQgdCA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyArK24pIHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShlW25dKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKGUpO1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVTdHJpbmcodCk7XG4gICAgfVxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXh0OiAoKSA9PiBlIDwgdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGUrKyksXG4gICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9lbmNvZGVCYXNlNjQoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoZSk7XG4gICAgICAgIH0odGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfdWludDhBcnJheUZyb21CaW5hcnlTdHJpbmcoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KGUubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgdFtuXSA9IGUuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8vIEEgUmVnRXhwIG1hdGNoaW5nIElTTyA4NjAxIFVUQyB0aW1lc3RhbXBzIHdpdGggb3B0aW9uYWwgZnJhY3Rpb24uXG4gICAgICAgICh0aGlzLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGFwcHJveGltYXRlQnl0ZVNpemUoKSB7XG4gICAgICAgIHJldHVybiAyICogdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBjb21wYXJlVG8oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5iaW5hcnlTdHJpbmcsIGUuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmFyeVN0cmluZyA9PT0gZS5iaW5hcnlTdHJpbmc7XG4gICAgfVxufVxuXG5CeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HID0gbmV3IEJ5dGVTdHJpbmcoXCJcIik7XG5cbmNvbnN0IGVlID0gbmV3IFJlZ0V4cCgvXlxcZHs0fS1cXGRcXGQtXFxkXFxkVFxcZFxcZDpcXGRcXGQ6XFxkXFxkKD86XFwuKFxcZCspKT9aJC8pO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB2YWx1ZXMgZm9yIGEgdGltZXN0YW1wIHZhbHVlIGludG8gYSBcInNlY29uZHMgYW5kXG4gKiBuYW5vc1wiIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSkge1xuICAgIC8vIFRoZSBqc29uIGludGVyZmFjZSAoZm9yIHRoZSBicm93c2VyKSB3aWxsIHJldHVybiBhbiBpc28gdGltZXN0YW1wIHN0cmluZyxcbiAgICAvLyB3aGlsZSB0aGUgcHJvdG8ganMgbGlicmFyeSAoZm9yIG5vZGUpIHdpbGwgcmV0dXJuIGFcbiAgICAvLyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGluc3RhbmNlLlxuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydCghIWUpLCBcInN0cmluZ1wiID09IHR5cGVvZiBlKSB7XG4gICAgICAgIC8vIFRoZSBkYXRlIHN0cmluZyBjYW4gaGF2ZSBoaWdoZXIgcHJlY2lzaW9uIChuYW5vcykgdGhhbiB0aGUgRGF0ZSBjbGFzc1xuICAgICAgICAvLyAobWlsbGlzKSwgc28gd2UgZG8gc29tZSBjdXN0b20gcGFyc2luZyBoZXJlLlxuICAgICAgICAvLyBQYXJzZSB0aGUgbmFub3MgcmlnaHQgb3V0IG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgY29uc3QgbiA9IGVlLmV4ZWMoZSk7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydCghIW4pLCBuWzFdKSB7XG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxuICAgICAgICAgICAgbGV0IGUgPSBuWzFdO1xuICAgICAgICAgICAgZSA9IChlICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDAsIDkpLCB0ID0gTnVtYmVyKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IERhdGUoZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBNYXRoLmZsb29yKHIuZ2V0VGltZSgpIC8gMWUzKSxcbiAgICAgICAgICAgIG5hbm9zOiB0XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5zZWNvbmRzKSxcbiAgICAgICAgbmFub3M6IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5uYW5vcylcbiAgICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgbnVtYmVycyBpbnRvIGEgSmF2YVNjcmlwdCBudW1iZXIuXG4gKiBSZXR1cm5zIDAgaWYgdGhlIHZhbHVlIGlzIG5vdCBudW1lcmljLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZSkge1xuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIGUgPyBlIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IE51bWJlcihlKSA6IDA7XG59XG5cbi8qKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIEJsb2JzIGludG8gYSBCeXRlU3RyaW5nLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlKSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcoZSkgOiBCeXRlU3RyaW5nLmZyb21VaW50OEFycmF5KGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWxseS1hcHBsaWVkIFNlcnZlclRpbWVzdGFtcC5cbiAqXG4gKiBTZXJ2ZXIgVGltZXN0YW1wcyBhcmUgYmFja2VkIGJ5IE1hcFZhbHVlcyB0aGF0IGNvbnRhaW4gYW4gaW50ZXJuYWwgZmllbGRcbiAqIGBfX3R5cGVfX2Agd2l0aCBhIHZhbHVlIG9mIGBzZXJ2ZXJfdGltZXN0YW1wYC4gVGhlIHByZXZpb3VzIHZhbHVlIGFuZCBsb2NhbFxuICogd3JpdGUgdGltZSBhcmUgc3RvcmVkIGluIGl0cyBgX19wcmV2aW91c192YWx1ZV9fYCBhbmQgYF9fbG9jYWxfd3JpdGVfdGltZV9fYFxuICogZmllbGRzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBOb3RlczpcbiAqIC0gU2VydmVyVGltZXN0YW1wVmFsdWUgaW5zdGFuY2VzIGFyZSBjcmVhdGVkIGFzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYVxuICogICB0cmFuc2Zvcm0uIFRoZXkgY2FuIG9ubHkgZXhpc3QgaW4gdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gVGhlcmVmb3JlXG4gKiAgIHRoZXkgZG8gbm90IG5lZWQgdG8gYmUgcGFyc2VkIG9yIHNlcmlhbGl6ZWQuXG4gKiAtIFdoZW4gZXZhbHVhdGVkIGxvY2FsbHkgKGUuZy4gZm9yIHNuYXBzaG90LmRhdGEoKSksIHRoZXkgYnkgZGVmYXVsdFxuICogICBldmFsdWF0ZSB0byBgbnVsbGAuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgcGFzc2luZyBjdXN0b21cbiAqICAgRmllbGRWYWx1ZU9wdGlvbnMgdG8gdmFsdWUoKS5cbiAqIC0gV2l0aCByZXNwZWN0IHRvIG90aGVyIFNlcnZlclRpbWVzdGFtcFZhbHVlcywgdGhleSBzb3J0IGJ5IHRoZWlyXG4gKiAgIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcChlKSB7XG4gICAgdmFyIHQsIG47XG4gICAgcmV0dXJuIFwic2VydmVyX3RpbWVzdGFtcFwiID09PSAobnVsbCA9PT0gKG4gPSAoKG51bGwgPT09ICh0ID0gbnVsbCA9PSBlID8gdm9pZCAwIDogZS5tYXBWYWx1ZSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5maWVsZHMpIHx8IHt9KS5fX3R5cGVfXykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdHJpbmdWYWx1ZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBTZXJ2ZXJUaW1lc3RhbXAgcHJvdG8gdmFsdWUgKHVzaW5nIHRoZSBpbnRlcm5hbCBmb3JtYXQpLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBiZWZvcmUgdGhpcyBTZXJ2ZXJUaW1lc3RhbXAgd2FzIHNldC5cbiAqXG4gKiBQcmVzZXJ2aW5nIHRoZSBwcmV2aW91cyB2YWx1ZXMgYWxsb3dzIHRoZSB1c2VyIHRvIGRpc3BsYXkgdGhlIGxhc3QgcmVzb2xlZFxuICogdmFsdWUgdW50aWwgdGhlIGJhY2tlbmQgcmVzcG9uZHMgd2l0aCB0aGUgdGltZXN0YW1wLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0UHJldmlvdXNWYWx1ZShlKSB7XG4gICAgY29uc3QgdCA9IGUubWFwVmFsdWUuZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXztcbiAgICByZXR1cm4gX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKHQpID8gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUodCkgOiB0O1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxvY2FsIHRpbWUgYXQgd2hpY2ggdGhpcyB0aW1lc3RhbXAgd2FzIGZpcnN0IHNldC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUubWFwVmFsdWUuZmllbGRzLl9fbG9jYWxfd3JpdGVfdGltZV9fLnRpbWVzdGFtcFZhbHVlKTtcbiAgICByZXR1cm4gbmV3IFRpbWVzdGFtcCh0LnNlY29uZHMsIHQubmFub3MpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBEYXRhYmFzZUluZm8ge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBEYXRhYmFzZUluZm8gdXNpbmcgdGhlIHByb3ZpZGVkIGhvc3QsIGRhdGFiYXNlSWQgYW5kXG4gICAgICogcGVyc2lzdGVuY2VLZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSB0byB1c2UuXG4gICAgICogQHBhcmFtIGFwcElkIC0gVGhlIEZpcmViYXNlIEFwcCBJZC5cbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VLZXkgLSBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIEZpcmVzdG9yZSdzIGxvY2FsXG4gICAgICogc3RvcmFnZSAodXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBkYXRhYmFzZUlkKS5cbiAgICAgKiBAcGFyYW0gaG9zdCAtIFRoZSBGaXJlc3RvcmUgYmFja2VuZCBob3N0IHRvIGNvbm5lY3QgdG8uXG4gICAgICogQHBhcmFtIHNzbCAtIFdoZXRoZXIgdG8gdXNlIFNTTCB3aGVuIGNvbm5lY3RpbmcuXG4gICAgICogQHBhcmFtIGZvcmNlTG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZm9yY2VMb25nUG9sbGluZyBvcHRpb25cbiAgICAgKiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSBhdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZGV0ZWN0QnVmZmVyaW5nUHJveHlcbiAgICAgKiBvcHRpb24gd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gbG9uZ1BvbGxpbmdPcHRpb25zIE9wdGlvbnMgdGhhdCBjb25maWd1cmUgbG9uZy1wb2xsaW5nLlxuICAgICAqIEBwYXJhbSB1c2VGZXRjaFN0cmVhbXMgV2hldGhlciB0byB1c2UgdGhlIEZldGNoIEFQSSBpbnN0ZWFkIG9mXG4gICAgICogWE1MSFRUUFJlcXVlc3RcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzLCBvLCBfLCBhKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IGUsIHRoaXMuYXBwSWQgPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5ob3N0ID0gciwgdGhpcy5zc2wgPSBpLCBcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gcywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBvLCB0aGlzLmxvbmdQb2xsaW5nT3B0aW9ucyA9IF8sIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGE7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIERhdGFiYXNlSWQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0SWQgPSBlLCB0aGlzLmRhdGFiYXNlID0gdCB8fCBcIihkZWZhdWx0KVwiO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJZChcIlwiLCBcIlwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgRGF0YWJhc2VJZCAmJiBlLnByb2plY3RJZCA9PT0gdGhpcy5wcm9qZWN0SWQgJiYgZS5kYXRhYmFzZSA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCB0ZSA9IHtcbiAgICBtYXBWYWx1ZToge1xuICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwiX19tYXhfX1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCBuZSA9IHtcbiAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG59O1xuXG4vKiogRXh0cmFjdHMgdGhlIGJhY2tlbmQncyB0eXBlIG9yZGVyIGZvciB0aGUgcHJvdmlkZWQgdmFsdWUuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdHlwZU9yZGVyKGUpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiBlID8gMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDogXCJib29sZWFuVmFsdWVcIiBpbiBlID8gMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiBlIHx8IFwiZG91YmxlVmFsdWVcIiBpbiBlID8gMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSA/IDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDogXCJzdHJpbmdWYWx1ZVwiIGluIGUgPyA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6IFwiYnl0ZXNWYWx1ZVwiIGluIGUgPyA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSA/IDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSA/IDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOiBcImFycmF5VmFsdWVcIiBpbiBlID8gOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6IFwibWFwVmFsdWVcIiBpbiBlID8gX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKGUpID8gNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOiBfX1BSSVZBVEVfaXNNYXhWYWx1ZShlKSA/IDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDogMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDogZmFpbCgpO1xufVxuXG4vKiogVGVzdHMgYGxlZnRgIGFuZCBgcmlnaHRgIGZvciBlcXVhbGl0eSBiYXNlZCBvbiB0aGUgYmFja2VuZCBzZW1hbnRpY3MuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLCB0KSB7XG4gICAgaWYgKGUgPT09IHQpIHJldHVybiAhMDtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3R5cGVPcmRlcihlKTtcbiAgICBpZiAobiAhPT0gX19QUklWQVRFX3R5cGVPcmRlcih0KSkgcmV0dXJuICExO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5ib29sZWFuVmFsdWUgPT09IHQuYm9vbGVhblZhbHVlO1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZShlKS5pc0VxdWFsKF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZSh0KSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3RpbWVzdGFtcEVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0LnRpbWVzdGFtcFZhbHVlICYmIGUudGltZXN0YW1wVmFsdWUubGVuZ3RoID09PSB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGVxdWFsaXR5IGZvciBJU08gODYwMSB0aW1lc3RhbXBzXG4gICAgICAgICAgICByZXR1cm4gZS50aW1lc3RhbXBWYWx1ZSA9PT0gdC50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUudGltZXN0YW1wVmFsdWUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcCh0LnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHIuc2Vjb25kcyAmJiBuLm5hbm9zID09PSByLm5hbm9zO1xuICAgICAgICB9KGUsIHQpO1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGUuc3RyaW5nVmFsdWUgPT09IHQuc3RyaW5nVmFsdWU7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9ibG9iRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlLmJ5dGVzVmFsdWUpLmlzRXF1YWwoX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcodC5ieXRlc1ZhbHVlKSk7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5yZWZlcmVuY2VWYWx1ZSA9PT0gdC5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9nZW9Qb2ludEVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpID09PSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKSA9PT0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0Lmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKTtcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbnVtYmVyRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIGlmIChcImludGVnZXJWYWx1ZVwiIGluIGUgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiB0KSByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSkgPT09IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5pbnRlZ2VyVmFsdWUpO1xuICAgICAgICAgICAgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiBlICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5kb3VibGVWYWx1ZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuID09PSByID8gX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKG4pID09PSBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8ocikgOiBpc05hTihuKSAmJiBpc05hTihyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9hcnJheUVxdWFscyhlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCB0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCBfX1BSSVZBVEVfdmFsdWVFcXVhbHMpO1xuXG4gICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfb2JqZWN0RXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fSwgciA9IHQubWFwVmFsdWUuZmllbGRzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9vYmplY3RTaXplKG4pICE9PSBfX1BSSVZBVEVfb2JqZWN0U2l6ZShyKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIGluIG4pIGlmIChuLmhhc093blByb3BlcnR5KGUpICYmICh2b2lkIDAgPT09IHJbZV0gfHwgIV9fUFJJVkFURV92YWx1ZUVxdWFscyhuW2VdLCByW2VdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKGUsIHQpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyhlLCB0KSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gKGUudmFsdWVzIHx8IFtdKS5maW5kKChlID0+IF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLCB0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKGUsIHQpIHtcbiAgICBpZiAoZSA9PT0gdCkgcmV0dXJuIDA7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV90eXBlT3JkZXIoZSksIHIgPSBfX1BSSVZBVEVfdHlwZU9yZGVyKHQpO1xuICAgIGlmIChuICE9PSByKSByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobiwgcik7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuYm9vbGVhblZhbHVlLCB0LmJvb2xlYW5WYWx1ZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVOdW1iZXJzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuIDwgciA/IC0xIDogbiA+IHIgPyAxIDogbiA9PT0gciA/IDAgOiBcbiAgICAgICAgICAgIC8vIG9uZSBvciBib3RoIGFyZSBOYU4uXG4gICAgICAgICAgICBpc05hTihuKSA/IGlzTmFOKHIpID8gMCA6IC0xIDogMTtcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29tcGFyZVRpbWVzdGFtcHMoZS50aW1lc3RhbXBWYWx1ZSwgdC50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbXBhcmVUaW1lc3RhbXBzKF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZShlKSwgX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lKHQpKTtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLnN0cmluZ1ZhbHVlLCB0LnN0cmluZ1ZhbHVlKTtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVCbG9icyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyh0KTtcbiAgICAgICAgICAgIHJldHVybiBuLmNvbXBhcmVUbyhyKTtcbiAgICAgICAgfShlLmJ5dGVzVmFsdWUsIHQuYnl0ZXNWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVSZWZlcmVuY2VzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnNwbGl0KFwiL1wiKSwgciA9IHQuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBuLmxlbmd0aCAmJiBlIDwgci5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuW2VdLCByW2VdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfShlLnJlZmVyZW5jZVZhbHVlLCB0LnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlR2VvUG9pbnRzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubGF0aXR1ZGUpLCBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQubGF0aXR1ZGUpKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubG9uZ2l0dWRlKSwgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmxvbmdpdHVkZSkpO1xuICAgICAgICB9KGUuZ2VvUG9pbnRWYWx1ZSwgdC5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQXJyYXlzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnZhbHVlcyB8fCBbXSwgciA9IHQudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBuLmxlbmd0aCAmJiBlIDwgci5sZW5ndGg7ICsrZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKG5bZV0sIHJbZV0pO1xuICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLmxlbmd0aCwgci5sZW5ndGgpO1xuICAgICAgICB9KGUuYXJyYXlWYWx1ZSwgdC5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVNYXBzKGUsIHQpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB0ZS5tYXBWYWx1ZSAmJiB0ID09PSB0ZS5tYXBWYWx1ZSkgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdGUubWFwVmFsdWUpIHJldHVybiAxO1xuICAgICAgICAgICAgaWYgKHQgPT09IHRlLm1hcFZhbHVlKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5maWVsZHMgfHwge30sIHIgPSBPYmplY3Qua2V5cyhuKSwgaSA9IHQuZmllbGRzIHx8IHt9LCBzID0gT2JqZWN0LmtleXMoaSk7XG4gICAgICAgICAgICAvLyBFdmVuIHRob3VnaCBNYXBWYWx1ZXMgYXJlIGxpa2VseSBzb3J0ZWQgY29ycmVjdGx5IGJhc2VkIG9uIHRoZWlyIGluc2VydGlvblxuICAgICAgICAgICAgLy8gb3JkZXIgKGUuZy4gd2hlbiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kKSwgbG9jYWwgbW9kaWZpY2F0aW9ucyBjYW4gYnJpbmdcbiAgICAgICAgICAgIC8vIGVsZW1lbnRzIG91dCBvZiBvcmRlci4gV2UgbmVlZCB0byByZS1zb3J0IHRoZSBlbGVtZW50cyB0byBlbnN1cmUgdGhhdFxuICAgICAgICAgICAgLy8gY2Fub25pY2FsIElEcyBhcmUgaW5kZXBlbmRlbnQgb2YgaW5zZXJ0aW9uIG9yZGVyLlxuICAgICAgICAgICAgci5zb3J0KCksIHMuc29ydCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCByLmxlbmd0aCAmJiBlIDwgcy5sZW5ndGg7ICsrZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihyW2VdLCBzW2VdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUobltyW2VdXSwgaVtzW2VdXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IG8pIHJldHVybiBvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHIubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGNhbm9uaWNhbCBJRCBmb3IgdGhlIHByb3ZpZGVkIGZpZWxkIHZhbHVlIChhcyB1c2VkIGluIFRhcmdldFxuICogc2VyaWFsaXphdGlvbikuXG4gKi8gKGUubWFwVmFsdWUsIHQubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZVRpbWVzdGFtcHMoZSwgdCkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgZS5sZW5ndGggPT09IHQubGVuZ3RoKSByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZSwgdCk7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKHQpLCBpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5zZWNvbmRzLCByLnNlY29uZHMpO1xuICAgIHJldHVybiAwICE9PSBpID8gaSA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4ubmFub3MsIHIubmFub3MpO1xufVxuXG5mdW5jdGlvbiBjYW5vbmljYWxJZChlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jYW5vbmlmeVZhbHVlKGUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlWYWx1ZShlKSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gZSA/IFwibnVsbFwiIDogXCJib29sZWFuVmFsdWVcIiBpbiBlID8gXCJcIiArIGUuYm9vbGVhblZhbHVlIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiBlID8gXCJcIiArIGUuaW50ZWdlclZhbHVlIDogXCJkb3VibGVWYWx1ZVwiIGluIGUgPyBcIlwiICsgZS5kb3VibGVWYWx1ZSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5VGltZXN0YW1wKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSk7XG4gICAgICAgIHJldHVybiBgdGltZSgke3Quc2Vjb25kc30sJHt0Lm5hbm9zfSlgO1xuICAgIH0oZS50aW1lc3RhbXBWYWx1ZSkgOiBcInN0cmluZ1ZhbHVlXCIgaW4gZSA/IGUuc3RyaW5nVmFsdWUgOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5Qnl0ZVN0cmluZyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlKS50b0Jhc2U2NCgpO1xuICAgIH0oZS5ieXRlc1ZhbHVlKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5UmVmZXJlbmNlKGUpIHtcbiAgICAgICAgcmV0dXJuIERvY3VtZW50S2V5LmZyb21OYW1lKGUpLnRvU3RyaW5nKCk7XG4gICAgfShlLnJlZmVyZW5jZVZhbHVlKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUgPyBmdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlHZW9Qb2ludChlKSB7XG4gICAgICAgIHJldHVybiBgZ2VvKCR7ZS5sYXRpdHVkZX0sJHtlLmxvbmdpdHVkZX0pYDtcbiAgICB9KGUuZ2VvUG9pbnRWYWx1ZSkgOiBcImFycmF5VmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5QXJyYXkoZSkge1xuICAgICAgICBsZXQgdCA9IFwiW1wiLCBuID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBlLnZhbHVlcyB8fCBbXSkgbiA/IG4gPSAhMSA6IHQgKz0gXCIsXCIsIHQgKz0gX19QUklWQVRFX2Nhbm9uaWZ5VmFsdWUocik7XG4gICAgICAgIHJldHVybiB0ICsgXCJdXCI7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSAoYW5kIHdpbGRseSBpbmFjY3VyYXRlKSBpbi1tZW1vcnkgc2l6ZSBmb3IgdGhlIGZpZWxkXG4gKiB2YWx1ZS5cbiAqXG4gKiBUaGUgbWVtb3J5IHNpemUgdGFrZXMgaW50byBhY2NvdW50IG9ubHkgdGhlIGFjdHVhbCB1c2VyIGRhdGEgYXMgaXQgcmVzaWRlc1xuICogaW4gbWVtb3J5IGFuZCBpZ25vcmVzIG9iamVjdCBvdmVyaGVhZC5cbiAqLyAoZS5hcnJheVZhbHVlKSA6IFwibWFwVmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5TWFwKGUpIHtcbiAgICAgICAgLy8gSXRlcmF0aW9uIG9yZGVyIGluIEphdmFTY3JpcHQgaXMgbm90IGd1YXJhbnRlZWQuIFRvIGVuc3VyZSB0aGF0IHdlIGdlbmVyYXRlXG4gICAgICAgIC8vIG1hdGNoaW5nIGNhbm9uaWNhbCBJRHMgZm9yIGlkZW50aWNhbCBtYXBzLCB3ZSBuZWVkIHRvIHNvcnQgdGhlIGtleXMuXG4gICAgICAgIGNvbnN0IHQgPSBPYmplY3Qua2V5cyhlLmZpZWxkcyB8fCB7fSkuc29ydCgpO1xuICAgICAgICBsZXQgbiA9IFwie1wiLCByID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSByID8gciA9ICExIDogbiArPSBcIixcIiwgbiArPSBgJHtpfToke19fUFJJVkFURV9jYW5vbmlmeVZhbHVlKGUuZmllbGRzW2ldKX1gO1xuICAgICAgICByZXR1cm4gbiArIFwifVwiO1xuICAgIH0oZS5tYXBWYWx1ZSkgOiBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9lc3RpbWF0ZUJ5dGVTaXplKGUpIHtcbiAgICBzd2l0Y2ggKF9fUFJJVkFURV90eXBlT3JkZXIoZSkpIHtcbiAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDQ7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gODtcblxuICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAvLyBHZW9Qb2ludHMgYXJlIG1hZGUgdXAgb2YgdHdvIGRpc3RpbmN0IG51bWJlcnMgKGxhdGl0dWRlICsgbG9uZ2l0dWRlKVxuICAgICAgICByZXR1cm4gMTY7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUoZSk7XG4gICAgICAgIHJldHVybiB0ID8gMTYgKyBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZSh0KSA6IDE2O1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvRGF0YV9zdHJ1Y3R1cmVzOlxuICAgICAgICAvLyBcIkphdmFTY3JpcHQncyBTdHJpbmcgdHlwZSBpcyBbLi4uXSBhIHNldCBvZiBlbGVtZW50cyBvZiAxNi1iaXQgdW5zaWduZWRcbiAgICAgICAgLy8gaW50ZWdlciB2YWx1ZXNcIlxuICAgICAgICByZXR1cm4gMiAqIGUuc3RyaW5nVmFsdWUubGVuZ3RoO1xuXG4gICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlLmJ5dGVzVmFsdWUpLmFwcHJveGltYXRlQnl0ZVNpemUoKTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBlLnJlZmVyZW5jZVZhbHVlLmxlbmd0aDtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9lc3RpbWF0ZUFycmF5Qnl0ZVNpemUoZSkge1xuICAgICAgICAgICAgcmV0dXJuIChlLnZhbHVlcyB8fCBbXSkucmVkdWNlKCgoZSwgdCkgPT4gZSArIF9fUFJJVkFURV9lc3RpbWF0ZUJ5dGVTaXplKHQpKSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgYSByZWZlcmVuY2UgdmFsdWUgZm9yIHRoZSBwcm92aWRlZCBkYXRhYmFzZSBhbmQga2V5LiAqLyAoZS5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2VzdGltYXRlTWFwQnl0ZVNpemUoZSkge1xuICAgICAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICAgICAgcmV0dXJuIGZvckVhY2goZS5maWVsZHMsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQgKz0gZS5sZW5ndGggKyBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZShuKTtcbiAgICAgICAgICAgIH0pKSwgdDtcbiAgICAgICAgfShlLm1hcFZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3JlZlZhbHVlKGUsIHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWZlcmVuY2VWYWx1ZTogYHByb2plY3RzLyR7ZS5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke2UuZGF0YWJhc2V9L2RvY3VtZW50cy8ke3QucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEludGVnZXJWYWx1ZSAuICovIGZ1bmN0aW9uIGlzSW50ZWdlcihlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcImludGVnZXJWYWx1ZVwiIGluIGU7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIERvdWJsZVZhbHVlLiAqL1xuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEFycmF5VmFsdWUuICovXG5mdW5jdGlvbiBpc0FycmF5KGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwiYXJyYXlWYWx1ZVwiIGluIGU7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE51bGxWYWx1ZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTnVsbFZhbHVlKGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwibnVsbFZhbHVlXCIgaW4gZTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIE5hTi4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTmFuVmFsdWUoZSkge1xuICAgIHJldHVybiAhIWUgJiYgXCJkb3VibGVWYWx1ZVwiIGluIGUgJiYgaXNOYU4oTnVtYmVyKGUuZG91YmxlVmFsdWUpKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTWFwVmFsdWUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc01hcFZhbHVlKGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwibWFwVmFsdWVcIiBpbiBlO1xufVxuXG4vKiogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlZXBDbG9uZShlKSB7XG4gICAgaWYgKGUuZ2VvUG9pbnRWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgZS5nZW9Qb2ludFZhbHVlKVxuICAgIH07XG4gICAgaWYgKGUudGltZXN0YW1wVmFsdWUgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIGUudGltZXN0YW1wVmFsdWUpXG4gICAgfTtcbiAgICBpZiAoZS5tYXBWYWx1ZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmb3JFYWNoKGUubWFwVmFsdWUuZmllbGRzLCAoKGUsIG4pID0+IHQubWFwVmFsdWUuZmllbGRzW2VdID0gX19QUklWQVRFX2RlZXBDbG9uZShuKSkpLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgaWYgKGUuYXJyYXlWYWx1ZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAoZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkubGVuZ3RoOyArK24pIHQuYXJyYXlWYWx1ZS52YWx1ZXNbbl0gPSBfX1BSSVZBVEVfZGVlcENsb25lKGUuYXJyYXlWYWx1ZS52YWx1ZXNbbl0pO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGUpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBWYWx1ZSByZXByZXNlbnRzIHRoZSBjYW5vbmljYWwge0BsaW5rICNNQVhfVkFMVUV9IC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTWF4VmFsdWUoZSkge1xuICAgIHJldHVybiBcIl9fbWF4X19cIiA9PT0gKCgoZS5tYXBWYWx1ZSB8fCB7fSkuZmllbGRzIHx8IHt9KS5fX3R5cGVfXyB8fCB7fSkuc3RyaW5nVmFsdWU7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBsb3dlc3QgdmFsdWUgZm9yIHRoZSBnaXZlbiB2YWx1ZSB0eXBlIChpbmNsdXNpdmUpLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVzR2V0TG93ZXJCb3VuZChlKSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gZSA/IG5lIDogXCJib29sZWFuVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBib29sZWFuVmFsdWU6ICExXG4gICAgfSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSB8fCBcImRvdWJsZVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgIH0gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgIHNlY29uZHM6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXG4gICAgICAgIH1cbiAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIHN0cmluZ1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwiYnl0ZXNWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICB9IDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGUgPyBfX1BSSVZBVEVfcmVmVmFsdWUoRGF0YWJhc2VJZC5lbXB0eSgpLCBEb2N1bWVudEtleS5lbXB0eSgpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICBsb25naXR1ZGU6IC0xODBcbiAgICAgICAgfVxuICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBhcnJheVZhbHVlOiB7fVxuICAgIH0gOiBcIm1hcFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgfSA6IGZhaWwoKTtcbn1cblxuLyoqIFJldHVybnMgdGhlIGxhcmdlc3QgdmFsdWUgZm9yIHRoZSBnaXZlbiB2YWx1ZSB0eXBlIChleGNsdXNpdmUpLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVzR2V0VXBwZXJCb3VuZChlKSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYm9vbGVhblZhbHVlOiAhMVxuICAgIH0gOiBcImJvb2xlYW5WYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICB9IDogXCJpbnRlZ2VyVmFsdWVcIiBpbiBlIHx8IFwiZG91YmxlVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgc2Vjb25kczogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJcbiAgICAgICAgfVxuICAgIH0gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgc3RyaW5nVmFsdWU6IFwiXCJcbiAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICB9IDogXCJieXRlc1ZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9yZWZWYWx1ZShEYXRhYmFzZUlkLmVtcHR5KCksIERvY3VtZW50S2V5LmVtcHR5KCkpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICBsb25naXR1ZGU6IC0xODBcbiAgICAgICAgfVxuICAgIH0gOiBcImdlb1BvaW50VmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBhcnJheVZhbHVlOiB7fVxuICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBtYXBWYWx1ZToge31cbiAgICB9IDogXCJtYXBWYWx1ZVwiIGluIGUgPyB0ZSA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2xvd2VyQm91bmRDb21wYXJlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShlLnZhbHVlLCB0LnZhbHVlKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBlLmluY2x1c2l2ZSAmJiAhdC5pbmNsdXNpdmUgPyAtMSA6ICFlLmluY2x1c2l2ZSAmJiB0LmluY2x1c2l2ZSA/IDEgOiAwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdXBwZXJCb3VuZENvbXBhcmUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKGUudmFsdWUsIHQudmFsdWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IGUuaW5jbHVzaXZlICYmICF0LmluY2x1c2l2ZSA/IDEgOiAhZS5pbmNsdXNpdmUgJiYgdC5pbmNsdXNpdmUgPyAtMSA6IDA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIE9iamVjdFZhbHVlIHJlcHJlc2VudHMgYSBNYXBWYWx1ZSBpbiB0aGUgRmlyZXN0b3JlIFByb3RvIGFuZCBvZmZlcnMgdGhlXG4gKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIGZpZWxkcyAodmlhIHRoZSBPYmplY3RWYWx1ZUJ1aWxkZXIpLlxuICovIGNsYXNzIE9iamVjdFZhbHVlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBvciBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSB0aGUgcGF0aCB0byBzZWFyY2hcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgYXQgdGhlIHBhdGggb3IgbnVsbCBpZiB0aGUgcGF0aCBpcyBub3Qgc2V0LlxuICAgICAqLyAgICBmaWVsZChlKSB7XG4gICAgICAgIGlmIChlLmlzRW1wdHkoKSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCB0ID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGggLSAxOyArK24pIGlmICh0ID0gKHQubWFwVmFsdWUuZmllbGRzIHx8IHt9KVtlLmdldChuKV0sIFxuICAgICAgICAgICAgIV9fUFJJVkFURV9pc01hcFZhbHVlKHQpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0ID0gKHQubWFwVmFsdWUuZmllbGRzIHx8IHt9KVtlLmxhc3RTZWdtZW50KCldLCB0IHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZmllbGQgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byBzZXQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi8gICAgc2V0KGUsIHQpIHtcbiAgICAgICAgdGhpcy5nZXRGaWVsZHNNYXAoZS5wb3BMYXN0KCkpW2UubGFzdFNlZ21lbnQoKV0gPSBfX1BSSVZBVEVfZGVlcENsb25lKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm92aWRlZCBmaWVsZHMgdG8gdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gQSBtYXAgb2YgZmllbGRzIHRvIHZhbHVlcyAob3IgbnVsbCBmb3IgZGVsZXRlcykuXG4gICAgICovICAgIHNldEFsbChlKSB7XG4gICAgICAgIGxldCB0ID0gRmllbGRQYXRoJDEuZW1wdHlQYXRoKCksIG4gPSB7fSwgciA9IFtdO1xuICAgICAgICBlLmZvckVhY2goKChlLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXQuaXNJbW1lZGlhdGVQYXJlbnRPZihpKSkge1xuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBhdCB0aGlzIHBhcmVudCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldEZpZWxkc01hcCh0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyhlLCBuLCByKSwgbiA9IHt9LCByID0gW10sIHQgPSBpLnBvcExhc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUgPyBuW2kubGFzdFNlZ21lbnQoKV0gPSBfX1BSSVZBVEVfZGVlcENsb25lKGUpIDogci5wdXNoKGkubGFzdFNlZ21lbnQoKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZ2V0RmllbGRzTWFwKHQpO1xuICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyhpLCBuLCByKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZmllbGQgYXQgdGhlIHNwZWNpZmllZCBwYXRoLiBJZiB0aGVyZSBpcyBubyBmaWVsZCBhdCB0aGVcbiAgICAgKiBzcGVjaWZpZWQgcGF0aCwgbm90aGluZyBpcyBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byByZW1vdmUuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmZpZWxkKGUucG9wTGFzdCgpKTtcbiAgICAgICAgX19QUklWQVRFX2lzTWFwVmFsdWUodCkgJiYgdC5tYXBWYWx1ZS5maWVsZHMgJiYgZGVsZXRlIHQubWFwVmFsdWUuZmllbGRzW2UubGFzdFNlZ21lbnQoKV07XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbHVlRXF1YWxzKHRoaXMudmFsdWUsIGUudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCBjb250YWlucyB0aGUgbGVhZiBlbGVtZW50IG9mIGBwYXRoYC4gSWYgdGhlIHBhcmVudFxuICAgICAqIGVudHJ5IGRvZXMgbm90IHlldCBleGlzdCwgb3IgaWYgaXQgaXMgbm90IGEgbWFwLCBhIG5ldyBtYXAgd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqLyAgICBnZXRGaWVsZHNNYXAoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMudmFsdWU7XG4gICAgICAgIHQubWFwVmFsdWUuZmllbGRzIHx8ICh0Lm1hcFZhbHVlID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBsZXQgciA9IHQubWFwVmFsdWUuZmllbGRzW2UuZ2V0KG4pXTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9pc01hcFZhbHVlKHIpICYmIHIubWFwVmFsdWUuZmllbGRzIHx8IChyID0ge1xuICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0Lm1hcFZhbHVlLmZpZWxkc1tlLmdldChuKV0gPSByKSwgdCA9IHI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubWFwVmFsdWUuZmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBgZmllbGRzTWFwYCBieSBhZGRpbmcsIHJlcGxhY2luZyBvciBkZWxldGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgYXBwbHlDaGFuZ2VzKGUsIHQsIG4pIHtcbiAgICAgICAgZm9yRWFjaCh0LCAoKHQsIG4pID0+IGVbdF0gPSBuKSk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSBkZWxldGUgZVt0XTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUoX19QUklWQVRFX2RlZXBDbG9uZSh0aGlzLnZhbHVlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgZmllbGRzIGluIGEgTWFwVmFsdWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2V4dHJhY3RGaWVsZE1hc2soZSkge1xuICAgIGNvbnN0IHQgPSBbXTtcbiAgICByZXR1cm4gZm9yRWFjaChlLmZpZWxkcywgKChlLCBuKSA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgRmllbGRQYXRoJDEoWyBlIF0pO1xuICAgICAgICBpZiAoX19QUklWQVRFX2lzTWFwVmFsdWUobikpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZXh0cmFjdEZpZWxkTWFzayhuLm1hcFZhbHVlKS5maWVsZHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cbiAgICAgICAgICAgIHQucHVzaChyKTsgZWxzZSBcbiAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxuICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSB0LnB1c2goci5jaGlsZChuKSk7XG4gICAgICAgIH0gZWxzZSBcbiAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlIGxlYWZcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIHQucHVzaChyKTtcbiAgICB9KSksIG5ldyBGaWVsZE1hc2sodCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciBpdFxuICogaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqIERvY3VtZW50cyBjYW4gdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXRlcyB2aWEgYGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoKWAsXG4gKiBgY29udmVydFRvTm9Eb2N1bWVudCgpYCBhbmQgYGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCgpYC4gSWYgYSBkb2N1bWVudCBkb2VzXG4gKiBub3QgdHJhbnNpdGlvbiB0byBvbmUgb2YgdGhlc2Ugc3RhdGVzIGV2ZW4gYWZ0ZXIgYWxsIG11dGF0aW9ucyBoYXZlIGJlZW5cbiAqIGFwcGxpZWQsIGBpc1ZhbGlkRG9jdW1lbnQoKWAgcmV0dXJucyBmYWxzZSBhbmQgdGhlIGRvY3VtZW50IHNob3VsZCBiZSByZW1vdmVkXG4gKiBmcm9tIGFsbCB2aWV3cy5cbiAqLyBjbGFzcyBNdXRhYmxlRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMsIG8pIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlLCB0aGlzLmRvY3VtZW50VHlwZSA9IHQsIHRoaXMudmVyc2lvbiA9IG4sIHRoaXMucmVhZFRpbWUgPSByLCB0aGlzLmNyZWF0ZVRpbWUgPSBpLCBcbiAgICAgICAgdGhpcy5kYXRhID0gcywgdGhpcy5kb2N1bWVudFN0YXRlID0gbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRvY3VtZW50IHdpdGggbm8ga25vd24gdmVyc2lvbiBvciBkYXRhLCBidXQgd2hpY2ggY2FuIHNlcnZlIGFzXG4gICAgICogYmFzZSBkb2N1bWVudCBmb3IgbXV0YXRpb25zLlxuICAgICAqLyAgICBzdGF0aWMgbmV3SW52YWxpZERvY3VtZW50KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQoZSwgMCAvKiBEb2N1bWVudFR5cGUuSU5WQUxJRCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBPYmplY3RWYWx1ZS5lbXB0eSgpLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IHdpdGggdGhlIGdpdmVuIGRhdGEgYXQgdGhlXG4gICAgICogZ2l2ZW4gdmVyc2lvbi5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ZvdW5kRG9jdW1lbnQoZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHQsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIG4sIHIsIDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIG5vdCBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbi4gKi8gICAgc3RhdGljIG5ld05vRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHQsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgT2JqZWN0VmFsdWUuZW1wdHkoKSwgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB3aG9zZSBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIHN0YXRpYyBuZXdVbmtub3duRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gdCwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBPYmplY3RWYWx1ZS5lbXB0eSgpLCAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGFuZCB0aGF0IGl0cyB2ZXJzaW9uXG4gICAgICogYW5kIGRhdGEgYXJlIGtub3duLlxuICAgICAqLyAgICBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCBpcyBzd2l0Y2hpbmcgc3RhdGUgZnJvbSBiZWluZyBhbiBpbnZhbGlkIG9yIGRlbGV0ZWRcbiAgICAgICAgLy8gZG9jdW1lbnQgdG8gYSB2YWxpZCAoRk9VTkRfRE9DVU1FTlQpIGRvY3VtZW50LCBlaXRoZXIgZHVlIHRvIHJlY2VpdmluZyBhblxuICAgICAgICAvLyB1cGRhdGUgZnJvbSBXYXRjaCBvciBkdWUgdG8gYXBwbHlpbmcgYSBsb2NhbCBzZXQgbXV0YXRpb24gb24gdG9wXG4gICAgICAgIC8vIG9mIGEgZGVsZXRlZCBkb2N1bWVudCwgb3VyIGJlc3QgZ3Vlc3MgYWJvdXQgaXRzIGNyZWF0ZVRpbWUgd291bGQgYmUgdGhlXG4gICAgICAgIC8vIHZlcnNpb24gYXQgd2hpY2ggdGhlIGRvY3VtZW50IHRyYW5zaXRpb25lZCB0byBhIEZPVU5EX0RPQ1VNRU5ULlxuICAgICAgICByZXR1cm4gIXRoaXMuY3JlYXRlVGltZS5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgfHwgMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlICYmIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlIHx8ICh0aGlzLmNyZWF0ZVRpbWUgPSBlKSwgXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuZG9jdW1lbnRUeXBlID0gMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSB0LCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0IGV4aXN0IGF0IHRoZSBnaXZlblxuICAgICAqIHZlcnNpb24uXG4gICAgICovICAgIGNvbnZlcnRUb05vRG9jdW1lbnQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gZSwgdGhpcy5kb2N1bWVudFR5cGUgPSAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSBPYmplY3RWYWx1ZS5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovICwgXG4gICAgICAgIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYXQgYSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHRoYXQgaXRzIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgY29udmVydFRvVW5rbm93bkRvY3VtZW50KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuZG9jdW1lbnRUeXBlID0gMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSBPYmplY3RWYWx1ZS5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAxIC8qIERvY3VtZW50U3RhdGUuSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyAsIHRoaXMudmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIHRoaXM7XG4gICAgfVxuICAgIHNldFJlYWRUaW1lKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZFRpbWUgPSBlLCB0aGlzO1xuICAgIH1cbiAgICBnZXQgaGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIERvY3VtZW50U3RhdGUuSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNMb2NhbE11dGF0aW9ucyB8fCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcbiAgICB9XG4gICAgaXNWYWxpZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMCAvKiBEb2N1bWVudFR5cGUuSU5WQUxJRCAqLyAhPT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRm91bmREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNOb0RvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc1Vua25vd25Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDMgLyogRG9jdW1lbnRUeXBlLlVOS05PV05fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBNdXRhYmxlRG9jdW1lbnQgJiYgdGhpcy5rZXkuaXNFcXVhbChlLmtleSkgJiYgdGhpcy52ZXJzaW9uLmlzRXF1YWwoZS52ZXJzaW9uKSAmJiB0aGlzLmRvY3VtZW50VHlwZSA9PT0gZS5kb2N1bWVudFR5cGUgJiYgdGhpcy5kb2N1bWVudFN0YXRlID09PSBlLmRvY3VtZW50U3RhdGUgJiYgdGhpcy5kYXRhLmlzRXF1YWwoZS5kYXRhKTtcbiAgICB9XG4gICAgbXV0YWJsZUNvcHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YWJsZURvY3VtZW50KHRoaXMua2V5LCB0aGlzLmRvY3VtZW50VHlwZSwgdGhpcy52ZXJzaW9uLCB0aGlzLnJlYWRUaW1lLCB0aGlzLmNyZWF0ZVRpbWUsIHRoaXMuZGF0YS5jbG9uZSgpLCB0aGlzLmRvY3VtZW50U3RhdGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBEb2N1bWVudCgke3RoaXMua2V5fSwgJHt0aGlzLnZlcnNpb259LCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS52YWx1ZSl9LCB7Y3JlYXRlVGltZTogJHt0aGlzLmNyZWF0ZVRpbWV9fSksIHtkb2N1bWVudFR5cGU6ICR7dGhpcy5kb2N1bWVudFR5cGV9fSksIHtkb2N1bWVudFN0YXRlOiAke3RoaXMuZG9jdW1lbnRTdGF0ZX19KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHRoZSB2YWx1ZSBmb3IgZmllbGQgYGZpZWxkYCBpbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiBUaHJvd3MgaWZcbiAqIHRoZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiBib3RoIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXG4gKlxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cbiAqXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxuICpcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICovXG5jbGFzcyBCb3VuZCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gZSwgdGhpcy5pbmNsdXNpdmUgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2JvdW5kQ29tcGFyZVRvRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIGxldCByID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGUucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcyA9IHRbaV0sIG8gPSBlLnBvc2l0aW9uW2ldO1xuICAgICAgICBpZiAocy5maWVsZC5pc0tleUZpZWxkKCkpIHIgPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKERvY3VtZW50S2V5LmZyb21OYW1lKG8ucmVmZXJlbmNlVmFsdWUpLCBuLmtleSk7IGVsc2Uge1xuICAgICAgICAgICAgciA9IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUobywgbi5kYXRhLmZpZWxkKHMuZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IHMuZGlyICYmIChyICo9IC0xKSwgMCAhPT0gcikgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGFmdGVyIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZEVxdWFscyhlLCB0KSB7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBudWxsID09PSB0O1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gITE7XG4gICAgaWYgKGUuaW5jbHVzaXZlICE9PSB0LmluY2x1c2l2ZSB8fCBlLnBvc2l0aW9uLmxlbmd0aCAhPT0gdC5wb3NpdGlvbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUucG9zaXRpb24ubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZS5wb3NpdGlvbltuXSwgdC5wb3NpdGlvbltuXSkpIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBvcmRlcmluZyBvbiBhIGZpZWxkLCBpbiBzb21lIERpcmVjdGlvbi4gRGlyZWN0aW9uIGRlZmF1bHRzIHRvIEFTQ0VORElORy5cbiAqLyBjbGFzcyBPcmRlckJ5IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0ID0gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSBlLCB0aGlzLmRpciA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfb3JkZXJCeUVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUuZGlyID09PSB0LmRpciAmJiBlLmZpZWxkLmlzRXF1YWwodC5maWVsZCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEZpbHRlciB7fVxuXG5jbGFzcyBGaWVsZEZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpZWxkID0gZSwgdGhpcy5vcCA9IHQsIHRoaXMudmFsdWUgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gZS5pc0tleUZpZWxkKCkgPyBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHQgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHQgPyB0aGlzLmNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIoZSwgdCwgbikgOiBuZXcgX19QUklWQVRFX0tleUZpZWxkRmlsdGVyKGUsIHQsIG4pIDogXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9BcnJheUNvbnRhaW5zRmlsdGVyKGUsIG4pIDogXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9JbkZpbHRlcihlLCBuKSA6IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9Ob3RJbkZpbHRlcihlLCBuKSA6IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9BcnJheUNvbnRhaW5zQW55RmlsdGVyKGUsIG4pIDogbmV3IEZpZWxkRmlsdGVyKGUsIHQsIG4pO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlS2V5RmllbGRJbkZpbHRlcihlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHQgPyBuZXcgX19QUklWQVRFX0tleUZpZWxkSW5GaWx0ZXIoZSwgbikgOiBuZXcgX19QUklWQVRFX0tleUZpZWxkTm90SW5GaWx0ZXIoZSwgbik7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICAvLyBUeXBlcyBkbyBub3QgaGF2ZSB0byBtYXRjaCBpbiBOT1RfRVFVQUwgZmlsdGVycy5cbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA9PT0gdGhpcy5vcCA/IG51bGwgIT09IHQgJiYgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihfX1BSSVZBVEVfdmFsdWVDb21wYXJlKHQsIHRoaXMudmFsdWUpKSA6IG51bGwgIT09IHQgJiYgX19QUklWQVRFX3R5cGVPcmRlcih0aGlzLnZhbHVlKSA9PT0gX19QUklWQVRFX3R5cGVPcmRlcih0KSAmJiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKF9fUFJJVkFURV92YWx1ZUNvbXBhcmUodCwgdGhpcy52YWx1ZSkpO1xuICAgICAgICAvLyBPbmx5IGNvbXBhcmUgdHlwZXMgd2l0aCBtYXRjaGluZyBiYWNrZW5kIG9yZGVyIChzdWNoIGFzIGRvdWJsZSBhbmQgaW50KS5cbiAgICAgICAgfVxuICAgIG1hdGNoZXNDb21wYXJpc29uKGUpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUgPCAwO1xuXG4gICAgICAgICAgY2FzZSBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiBlIDw9IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gZTtcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gZTtcblxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiBlID4gMDtcblxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZSA+PSAwO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNJbmVxdWFsaXR5KCkge1xuICAgICAgICByZXR1cm4gWyBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gLCBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovICwgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovICwgXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyAsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdLmluZGV4T2YodGhpcy5vcCkgPj0gMDtcbiAgICB9XG4gICAgZ2V0RmxhdHRlbmVkRmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIFsgdGhpcyBdO1xuICAgIH1cbiAgICBnZXRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gWyB0aGlzIF07XG4gICAgfVxuICAgIGdldEZpcnN0SW5lcXVhbGl0eUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0luZXF1YWxpdHkoKSA/IHRoaXMuZmllbGQgOiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgQ29tcG9zaXRlRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlsdGVycyA9IGUsIHRoaXMub3AgPSB0LCB0aGlzLmNlID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGVGaWx0ZXIoZSwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24odGhpcykgPyB2b2lkIDAgPT09IHRoaXMuZmlsdGVycy5maW5kKCh0ID0+ICF0Lm1hdGNoZXMoZSkpKSA6IHZvaWQgMCAhPT0gdGhpcy5maWx0ZXJzLmZpbmQoKHQgPT4gdC5tYXRjaGVzKGUpKSk7XG4gICAgfVxuICAgIGdldEZsYXR0ZW5lZEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmNlIHx8ICh0aGlzLmNlID0gdGhpcy5maWx0ZXJzLnJlZHVjZSgoKGUsIHQpID0+IGUuY29uY2F0KHQuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSksIFtdKSksIFxuICAgICAgICB0aGlzLmNlO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgbXV0YWJsZSBjb3B5IG9mIGB0aGlzLmZpbHRlcnNgXG4gICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oW10sIHRoaXMuZmlsdGVycyk7XG4gICAgfVxuICAgIGdldEZpcnN0SW5lcXVhbGl0eUZpZWxkKCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5sZSgoZSA9PiBlLmlzSW5lcXVhbGl0eSgpKSk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlID8gZS5maWVsZCA6IG51bGw7XG4gICAgfVxuICAgIC8vIFBlcmZvcm1zIGEgZGVwdGgtZmlyc3Qgc2VhcmNoIHRvIGZpbmQgYW5kIHJldHVybiB0aGUgZmlyc3QgRmllbGRGaWx0ZXIgaW4gdGhlIGNvbXBvc2l0ZSBmaWx0ZXJcbiAgICAvLyB0aGF0IHNhdGlzZmllcyB0aGUgcHJlZGljYXRlLiBSZXR1cm5zIGBudWxsYCBpZiBub25lIG9mIHRoZSBGaWVsZEZpbHRlcnMgc2F0aXNmeSB0aGVcbiAgICAvLyBwcmVkaWNhdGUuXG4gICAgbGUoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpIGlmIChlKHQpKSByZXR1cm4gdDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovID09PSBlLm9wO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNEaXNqdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyA9PT0gZS5vcDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWx0ZXIgaXMgYSBjb25qdW5jdGlvbiBvZiBmaWVsZCBmaWx0ZXJzIG9ubHkuIFJldHVybnMgZmFsc2Ugb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQoZSkgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24oZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmlsdGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IGNvbXBvc2l0ZSBmaWx0ZXJzLiBSZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0KGUpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5maWx0ZXJzKSBpZiAodCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlcikgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5RmlsdGVyKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSBcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUZWNobmljYWxseSwgdGhpcyB3b24ndCBiZSB1bmlxdWUgaWYgdHdvIHZhbHVlcyBoYXZlXG4gICAgLy8gdGhlIHNhbWUgZGVzY3JpcHRpb24sIHN1Y2ggYXMgdGhlIGludCAzIGFuZCB0aGUgc3RyaW5nIFwiM1wiLiBTbyB3ZSBzaG91bGRcbiAgICAvLyBhZGQgdGhlIHR5cGVzIGluIGhlcmUgc29tZWhvdywgdG9vLlxuICAgIHJldHVybiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgZS5vcC50b1N0cmluZygpICsgY2Fub25pY2FsSWQoZS52YWx1ZSk7XG4gICAgaWYgKF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbihlKSkgXG4gICAgLy8gT2xkZXIgU0RLIHZlcnNpb25zIHVzZSBhbiBpbXBsaWNpdCBBTkQgb3BlcmF0aW9uIGJldHdlZW4gdGhlaXIgZmlsdGVycy5cbiAgICAvLyBJbiB0aGUgbmV3IFNESyB2ZXJzaW9ucywgdGhlIGRldmVsb3BlciBtYXkgdXNlIGFuIGV4cGxpY2l0IEFORCBmaWx0ZXIuXG4gICAgLy8gVG8gc3RheSBjb25zaXN0ZW50IHdpdGggdGhlIG9sZCB1c2FnZXMsIHdlIGFkZCBhIHNwZWNpYWwgY2FzZSB0byBlbnN1cmVcbiAgICAvLyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGVzZSB0d28gYXJlIHRoZSBzYW1lLiBGb3IgZXhhbXBsZTpcbiAgICAvLyBgY29sLndoZXJlRXF1YWxzKFwiYVwiLCAxKS53aGVyZUVxdWFscyhcImJcIiwgMilgIHNob3VsZCBoYXZlIHRoZSBzYW1lXG4gICAgLy8gY2Fub25pY2FsIElEIGFzIGBjb2wud2hlcmUoYW5kKGVxdWFscyhcImFcIiwxKSwgZXF1YWxzKFwiYlwiLDIpKSlgLlxuICAgIHJldHVybiBlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpO1xuICAgIHtcbiAgICAgICAgLy8gZmlsdGVyIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyXG4gICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpO1xuICAgICAgICByZXR1cm4gYCR7ZS5vcH0oJHt0fSlgO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpbHRlckVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEZpbHRlckVxdWFscyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgJiYgZS5vcCA9PT0gdC5vcCAmJiBlLmZpZWxkLmlzRXF1YWwodC5maWVsZCkgJiYgX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUudmFsdWUsIHQudmFsdWUpO1xuICAgIH0oZSwgdCkgOiBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlckVxdWFscyhlLCB0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIGUub3AgPT09IHQub3AgJiYgZS5maWx0ZXJzLmxlbmd0aCA9PT0gdC5maWx0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGUuZmlsdGVycy5yZWR1Y2UoKChlLCBuLCByKSA9PiBlICYmIF9fUFJJVkFURV9maWx0ZXJFcXVhbHMobiwgdC5maWx0ZXJzW3JdKSksICEwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wb3NpdGUgZmlsdGVyIHRoYXQgY29udGFpbnMgYWxsIGZpbHRlciBmcm9tXG4gKiBgY29tcG9zaXRlRmlsdGVyYCBwbHVzIGFsbCB0aGUgZ2l2ZW4gZmlsdGVycyBpbiBgb3RoZXJGaWx0ZXJzYC5cbiAqLyAoZSwgdCkgOiB2b2lkIGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcldpdGhBZGRlZEZpbHRlcnMoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBlLmZpbHRlcnMuY29uY2F0KHQpO1xuICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKG4sIGUub3ApO1xufVxuXG4vKiogUmV0dXJucyBhIGRlYnVnIGRlc2NyaXB0aW9uIGZvciBgZmlsdGVyYC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3N0cmluZ2lmeUZpbHRlcihlKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlGaWVsZEZpbHRlcihlKSB7XG4gICAgICAgIHJldHVybiBgJHtlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAke2Uub3B9ICR7Y2Fub25pY2FsSWQoZS52YWx1ZSl9YDtcbiAgICB9XG4gICAgLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyAoaS5lLiAnX19uYW1lX18nKS4gKi8gKGUpIDogZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlDb21wb3NpdGVGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gZS5vcC50b1N0cmluZygpICsgXCIge1wiICsgZS5nZXRGaWx0ZXJzKCkubWFwKF9fUFJJVkFURV9zdHJpbmdpZnlGaWx0ZXIpLmpvaW4oXCIgLFwiKSArIFwifVwiO1xuICAgIH0oZSkgOiBcIkZpbHRlclwiO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfS2V5RmllbGRGaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcihlLCB0LCBuKSwgdGhpcy5rZXkgPSBEb2N1bWVudEtleS5mcm9tTmFtZShuLnJlZmVyZW5jZVZhbHVlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUua2V5LCB0aGlzLmtleSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKHQpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIF9fUFJJVkFURV9LZXlGaWVsZEluRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgdCksIHRoaXMua2V5cyA9IF9fUFJJVkFURV9leHRyYWN0RG9jdW1lbnRLZXlzRnJvbUFycmF5VmFsdWUoXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzLnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUua2V5KSkpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyBub3QgcHJlc2VudCB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIF9fUFJJVkFURV9LZXlGaWVsZE5vdEluRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCB0KSwgdGhpcy5rZXlzID0gX19QUklWQVRFX2V4dHJhY3REb2N1bWVudEtleXNGcm9tQXJyYXlWYWx1ZShcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmtleXMuc29tZSgodCA9PiB0LmlzRXF1YWwoZS5rZXkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXh0cmFjdERvY3VtZW50S2V5c0Zyb21BcnJheVZhbHVlKGUsIHQpIHtcbiAgICB2YXIgbjtcbiAgICByZXR1cm4gKChudWxsID09PSAobiA9IHQuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi52YWx1ZXMpIHx8IFtdKS5tYXAoKGUgPT4gRG9jdW1lbnRLZXkuZnJvbU5hbWUoZS5yZWZlcmVuY2VWYWx1ZSkpKTtcbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMgb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9BcnJheUNvbnRhaW5zRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gaXNBcnJheSh0KSAmJiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHQuYXJyYXlWYWx1ZSwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi8gY2xhc3MgX19QUklWQVRFX0luRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBub3QtaW4gb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9Ob3RJbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBpZiAoX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgIV9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnModGhpcy52YWx1ZS5hcnJheVZhbHVlLCB0KTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi8gY2xhc3MgX19QUklWQVRFX0FycmF5Q29udGFpbnNBbnlGaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuICEoIWlzQXJyYXkodCkgfHwgIXQuYXJyYXlWYWx1ZS52YWx1ZXMpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMuc29tZSgoZSA9PiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfVGFyZ2V0SW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IGUsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gdCwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gciwgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSBzLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5oZSA9IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAqXG4gKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcbiAqIHVzaW5nIHRoaXMgZmFjdG9yeSBtZXRob2QsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcbiAqIHByb3BlcnR5LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdUYXJnZXQoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfVGFyZ2V0SW1wbChlLCB0LCBuLCByLCBpLCBzLCBvKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAobnVsbCA9PT0gdC5oZSkge1xuICAgICAgICBsZXQgZSA9IHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgKGUgKz0gXCJ8Y2c6XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIGUgKz0gXCJ8ZjpcIiwgZSArPSB0LmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpLCBcbiAgICAgICAgZSArPSBcInxvYjpcIiwgZSArPSB0Lm9yZGVyQnkubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeU9yZGVyQnkoZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgICAgICAgICByZXR1cm4gZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIGUuZGlyO1xuICAgICAgICB9KGUpKSkuam9pbihcIixcIiksIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0LmxpbWl0KSB8fCAoZSArPSBcInxsOlwiLCBlICs9IHQubGltaXQpLCBcbiAgICAgICAgdC5zdGFydEF0ICYmIChlICs9IFwifGxiOlwiLCBlICs9IHQuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIGUgKz0gdC5zdGFydEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIHQuZW5kQXQgJiYgKGUgKz0gXCJ8dWI6XCIsIGUgKz0gdC5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIGUgKz0gdC5lbmRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICB0LmhlID0gZTtcbiAgICB9XG4gICAgcmV0dXJuIHQuaGU7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRFcXVhbHMoZSwgdCkge1xuICAgIGlmIChlLmxpbWl0ICE9PSB0LmxpbWl0KSByZXR1cm4gITE7XG4gICAgaWYgKGUub3JkZXJCeS5sZW5ndGggIT09IHQub3JkZXJCeS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUub3JkZXJCeS5sZW5ndGg7IG4rKykgaWYgKCFfX1BSSVZBVEVfb3JkZXJCeUVxdWFscyhlLm9yZGVyQnlbbl0sIHQub3JkZXJCeVtuXSkpIHJldHVybiAhMTtcbiAgICBpZiAoZS5maWx0ZXJzLmxlbmd0aCAhPT0gdC5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5maWx0ZXJzLmxlbmd0aDsgbisrKSBpZiAoIV9fUFJJVkFURV9maWx0ZXJFcXVhbHMoZS5maWx0ZXJzW25dLCB0LmZpbHRlcnNbbl0pKSByZXR1cm4gITE7XG4gICAgcmV0dXJuIGUuY29sbGVjdGlvbkdyb3VwID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoISFlLnBhdGguaXNFcXVhbCh0LnBhdGgpICYmICghIV9fUFJJVkFURV9ib3VuZEVxdWFscyhlLnN0YXJ0QXQsIHQuc3RhcnRBdCkgJiYgX19QUklWQVRFX2JvdW5kRXF1YWxzKGUuZW5kQXQsIHQuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KGUpIHtcbiAgICByZXR1cm4gRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlLnBhdGgpICYmIG51bGwgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IGUuZmlsdGVycy5sZW5ndGg7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBmaWVsZCBmaWx0ZXJzIHRoYXQgdGFyZ2V0IHRoZSBnaXZlbiBmaWVsZCBwYXRoLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCB0KSB7XG4gICAgcmV0dXJuIGUuZmlsdGVycy5maWx0ZXIoKGUgPT4gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyICYmIGUuZmllbGQuaXNFcXVhbCh0KSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWVxuICogZmlsdGVycy4gUmV0dXJucyBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIGxvd2VyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgdXBwZXIgYm91bmQgZm9yIGFuIGRlc2NlbmRpbmcgc2VnbWVudCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRBc2NlbmRpbmdCb3VuZChlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSBuZSwgaSA9ICEwO1xuICAgIC8vIFByb2Nlc3MgYWxsIGZpbHRlcnMgdG8gZmluZCBhIHZhbHVlIGZvciB0aGUgY3VycmVudCBmaWVsZCBzZWdtZW50XG4gICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIHQpKSB7XG4gICAgICAgIGxldCBlID0gbmUsIHQgPSAhMDtcbiAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gX19QUklWQVRFX3ZhbHVlc0dldExvd2VyQm91bmQobi52YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIGUgPSBuLnZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZSwgdCA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgZSA9IG5lO1xuIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGNhbm5vdCBiZSB1c2VkIGFzIGxvd2VyIGJvdW5kcy5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIF9fUFJJVkFURV9sb3dlckJvdW5kQ29tcGFyZSh7XG4gICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdFxuICAgICAgICB9KSA8IDAgJiYgKHIgPSBlLCBpID0gdCk7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzIGFuIGFkZGl0aW9uYWwgYm91bmQsIGNvbXBhcmUgdGhlIHZhbHVlcyBhZ2FpbnN0IHRoZSBleGlzdGluZ1xuICAgIC8vIHJhbmdlIHRvIHNlZSBpZiB3ZSBjYW4gbmFycm93IHRoZSBzY29wZS5cbiAgICAgICAgaWYgKG51bGwgIT09IG4pIGZvciAobGV0IHMgPSAwOyBzIDwgZS5vcmRlckJ5Lmxlbmd0aDsgKytzKSB7XG4gICAgICAgIGlmIChlLm9yZGVyQnlbc10uZmllbGQuaXNFcXVhbCh0KSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4ucG9zaXRpb25bc107XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG93ZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiByLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBlLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogbi5pbmNsdXNpdmVcbiAgICAgICAgICAgIH0pIDwgMCAmJiAociA9IGUsIGkgPSBuLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIHVwcGVyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgbG93ZXIgYm91bmQgZm9yIGEgZGVzY2VuZGluZyBzZWdtZW50KS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0RGVzY2VuZGluZ0JvdW5kKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IHRlLCBpID0gITA7XG4gICAgLy8gUHJvY2VzcyBhbGwgZmlsdGVycyB0byBmaW5kIGEgdmFsdWUgZm9yIHRoZSBjdXJyZW50IGZpZWxkIHNlZ21lbnRcbiAgICBmb3IgKGNvbnN0IG4gb2YgX19QUklWQVRFX3RhcmdldEdldEZpZWxkRmlsdGVyc0ZvclBhdGgoZSwgdCkpIHtcbiAgICAgICAgbGV0IGUgPSB0ZSwgdCA9ICEwO1xuICAgICAgICBzd2l0Y2ggKG4ub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIGUgPSBfX1BSSVZBVEVfdmFsdWVzR2V0VXBwZXJCb3VuZChuLnZhbHVlKSwgdCA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgZSA9IG4udmFsdWUsIHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIGUgPSB0ZTtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyB1cHBlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBfX1BSSVZBVEVfdXBwZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IGUsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRcbiAgICAgICAgfSkgPiAwICYmIChyID0gZSwgaSA9IHQpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCBzID0gMDsgcyA8IGUub3JkZXJCeS5sZW5ndGg7ICsrcykge1xuICAgICAgICBpZiAoZS5vcmRlckJ5W3NdLmZpZWxkLmlzRXF1YWwodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLnBvc2l0aW9uW3NdO1xuICAgICAgICAgICAgX19QUklWQVRFX3VwcGVyQm91bmRDb21wYXJlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IG4uaW5jbHVzaXZlXG4gICAgICAgICAgICB9KSA+IDAgJiYgKHIgPSBlLCBpID0gbi5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgIGluY2x1c2l2ZTogaVxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2VnbWVudHMgb2YgYSBwZXJmZWN0IGluZGV4IGZvciB0aGlzIHRhcmdldC4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFF1ZXJ5IGVuY2Fwc3VsYXRlcyBhbGwgdGhlIHF1ZXJ5IGF0dHJpYnV0ZXMgd2Ugc3VwcG9ydCBpbiB0aGUgU0RLLiBJdCBjYW5cbiAqIGJlIHJ1biBhZ2FpbnN0IHRoZSBMb2NhbFN0b3JlLCBhcyB3ZWxsIGFzIGJlIGNvbnZlcnRlZCB0byBhIGBUYXJnZXRgIHRvXG4gKiBxdWVyeSB0aGUgUmVtb3RlU3RvcmUgcmVzdWx0cy5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlJbXBsIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIG8gPSBudWxsLCBfID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSBlLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IHQsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gciwgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHMsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSBfLCB0aGlzLlBlID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSwgZm9yIHVzZSB3aXRoXG4gICAgICAgIC8vIG5vbi1hZ2dyZWdhdGUgcXVlcmllcy5cbiAgICAgICAgdGhpcy5JZSA9IG51bGwsIFxuICAgICAgICAvLyBUaGUgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCBvZiB0aGlzIGBRdWVyeWAgaW5zdGFuY2UsIGZvciB1c2Ugd2l0aFxuICAgICAgICAvLyBhZ2dyZWdhdGUgcXVlcmllcy4gVW5saWtlIHRhcmdldHMgZm9yIG5vbi1hZ2dyZWdhdGUgcXVlcmllcyxcbiAgICAgICAgLy8gYWdncmVnYXRlIHF1ZXJ5IHRhcmdldHMgZG8gbm90IGNvbnRhaW4gbm9ybWFsaXplZCBvcmRlci1ieXMsIHRoZXkgb25seVxuICAgICAgICAvLyBjb250YWluIGV4cGxpY2l0IG9yZGVyLWJ5cy5cbiAgICAgICAgdGhpcy5kZSA9IG51bGwsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdDtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGluc3RhbmNlIHdpdGggdGhlIG9wdGlvbnMgcHJvdmlkZWQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeShlLCB0LCBuLCByLCBpLCBzLCBvLCBfKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUsIHQsIG4sIHIsIGksIHMsIG8sIF8pO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyBhdCBgcGF0aGAgKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXG4gKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxuICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcbiAqIHBhdGhzLlxuICovXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcbiAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzKGUpIHtcbiAgICByZXR1cm4gMCA9PT0gZS5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSBlLmxpbWl0ICYmIG51bGwgPT0gZS5zdGFydEF0ICYmIG51bGwgPT0gZS5lbmRBdCAmJiAoMCA9PT0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiBlLmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0Rmlyc3RPcmRlckJ5RmllbGQoZSkge1xuICAgIHJldHVybiBlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPiAwID8gZS5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQgOiBudWxsO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKGUpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5maWx0ZXJzKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmdldEZpcnN0SW5lcXVhbGl0eUZpZWxkKCk7XG4gICAgICAgIGlmIChudWxsICE9PSBlKSByZXR1cm4gZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzXG4gKiB3aXRoaW4gdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuXG4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgY29sbGVjdGlvbiBncm91cCByYXRoZXIgdGhhbiBhIHNwZWNpZmljXG4gKiBjb2xsZWN0aW9uLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfaXNDb2xsZWN0aW9uR3JvdXBRdWVyeShlKSB7XG4gICAgcmV0dXJuIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIG5vcm1hbGl6ZWQgb3JkZXItYnkgY29uc3RyYWludCB0aGF0IGlzIHVzZWQgdG8gZXhlY3V0ZSB0aGUgUXVlcnksXG4gKiB3aGljaCBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yZGVyLWJ5IGNvbnN0cmFpbnRzIHRoZSB1c2VyIHByb3ZpZGVkIChlLmcuXG4gKiB0aGUgU0RLIGFuZCBiYWNrZW5kIGFsd2F5cyBvcmRlcnMgYnkgYF9fbmFtZV9fYCkuIFRoZSBub3JtYWxpemVkIG9yZGVyLWJ5XG4gKiBpbmNsdWRlcyBpbXBsaWNpdCBvcmRlci1ieXMgaW4gYWRkaXRpb24gdG8gdGhlIGV4cGxpY2l0IHVzZXIgcHJvdmlkZWRcbiAqIG9yZGVyLWJ5cy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKG51bGwgPT09IHQuUGUpIHtcbiAgICAgICAgdC5QZSA9IFtdO1xuICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX2dldEluZXF1YWxpdHlGaWx0ZXJGaWVsZCh0KSwgbiA9IF9fUFJJVkFURV9nZXRGaXJzdE9yZGVyQnlGaWVsZCh0KTtcbiAgICAgICAgaWYgKG51bGwgIT09IGUgJiYgbnVsbCA9PT0gbikgXG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGltcGxpY2l0bHkgYWRkIGtleSBvcmRlcmluZywgd2UgbXVzdCBhbHNvIGFkZCB0aGVcbiAgICAgICAgLy8gaW5lcXVhbGl0eSBmaWx0ZXIgZmllbGQgZm9yIGl0IHRvIGJlIGEgdmFsaWQgcXVlcnkuXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgZGVmYXVsdCBpbmVxdWFsaXR5IGZpZWxkIGFuZCBrZXkgb3JkZXJpbmcgaXMgYXNjZW5kaW5nLlxuICAgICAgICBlLmlzS2V5RmllbGQoKSB8fCB0LlBlLnB1c2gobmV3IE9yZGVyQnkoZSkpLCB0LlBlLnB1c2gobmV3IE9yZGVyQnkoRmllbGRQYXRoJDEua2V5RmllbGQoKSwgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovKSk7IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmV4cGxpY2l0T3JkZXJCeSkgdC5QZS5wdXNoKG4pLCBuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiAoZSA9ICEwKTtcbiAgICAgICAgICAgIGlmICghZSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQga2V5IG9yZGVyaW5nIGFsd2F5cyBtYXRjaGVzIHRoZSBsYXN0XG4gICAgICAgICAgICAgICAgLy8gZXhwbGljaXQgb3JkZXItYnlcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IHQuZXhwbGljaXRPcmRlckJ5W3QuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpciA6IFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLztcbiAgICAgICAgICAgICAgICB0LlBlLnB1c2gobmV3IE9yZGVyQnkoRmllbGRQYXRoJDEua2V5RmllbGQoKSwgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0LlBlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSB0byBpdHMgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQuSWUgfHwgKHQuSWUgPSBfX1BSSVZBVEVfX3F1ZXJ5VG9UYXJnZXQodCwgX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSkpKSwgXG4gICAgdC5JZTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXRzIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgcmVwcmVzZW50YXRpb24sXG4gKiBmb3IgdXNlIHdpdGhpbiBhbiBhZ2dyZWdhdGUgcXVlcnkuIFVubGlrZSB0YXJnZXRzIGZvciBub24tYWdncmVnYXRlIHF1ZXJpZXMsXG4gKiBhZ2dyZWdhdGUgcXVlcnkgdGFyZ2V0cyBkbyBub3QgY29udGFpbiBub3JtYWxpemVkIG9yZGVyLWJ5cywgdGhleSBvbmx5XG4gKiBjb250YWluIGV4cGxpY2l0IG9yZGVyLWJ5cy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfX3F1ZXJ5VG9UYXJnZXQoZSwgdCkge1xuICAgIGlmIChcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IGUubGltaXRUeXBlKSByZXR1cm4gX19QUklWQVRFX25ld1RhcmdldChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCk7XG4gICAge1xuICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXG4gICAgICAgIHQgPSB0Lm1hcCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IGUuZGlyID8gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovIDogXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9yZGVyQnkoZS5maWVsZCwgdCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gV2UgbmVlZCB0byBzd2FwIHRoZSBjdXJzb3JzIHRvIG1hdGNoIHRoZSBub3ctZmxpcHBlZCBxdWVyeSBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgbiA9IGUuZW5kQXQgPyBuZXcgQm91bmQoZS5lbmRBdC5wb3NpdGlvbiwgZS5lbmRBdC5pbmNsdXNpdmUpIDogbnVsbCwgciA9IGUuc3RhcnRBdCA/IG5ldyBCb3VuZChlLnN0YXJ0QXQucG9zaXRpb24sIGUuc3RhcnRBdC5pbmNsdXNpdmUpIDogbnVsbDtcbiAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uZXdUYXJnZXQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgdCwgZS5maWx0ZXJzLCBlLmxpbWl0LCBuLCByKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVdpdGhBZGRlZEZpbHRlcihlLCB0KSB7XG4gICAgdC5nZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpLCBfX1BSSVZBVEVfZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKGUpO1xuICAgIGNvbnN0IG4gPSBlLmZpbHRlcnMuY29uY2F0KFsgdCBdKTtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgbiwgZS5saW1pdCwgZS5saW1pdFR5cGUsIGUuc3RhcnRBdCwgZS5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdChlLCB0LCBuKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIGUuZmlsdGVycy5zbGljZSgpLCB0LCBuLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlFcXVhbHMoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KGUpLCBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCh0KSkgJiYgZS5saW1pdFR5cGUgPT09IHQubGltaXRUeXBlO1xufVxuXG4vLyBUT0RPKGIvMjkxODMxNjUpOiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgdW5pcXVlIHN0cmluZyBmcm9tIGEgcXVlcnkgdG8sIGZvclxuLy8gZXhhbXBsZSwgdXNlIGFzIGEgZGljdGlvbmFyeSBrZXksIGJ1dCB0aGUgaW1wbGVtZW50YXRpb24gaXMgc3ViamVjdCB0b1xuLy8gY29sbGlzaW9ucy4gTWFrZSBpdCBjb2xsaXNpb24tZnJlZS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVF1ZXJ5KGUpIHtcbiAgICByZXR1cm4gYCR7X19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KGUpKX18bHQ6JHtlLmxpbWl0VHlwZX1gO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkoZSkge1xuICAgIHJldHVybiBgUXVlcnkodGFyZ2V0PSR7ZnVuY3Rpb24gX19QUklWQVRFX3N0cmluZ2lmeVRhcmdldChlKSB7XG4gICAgICAgIGxldCB0ID0gZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKHQgKz0gXCIgY29sbGVjdGlvbkdyb3VwPVwiICsgZS5jb2xsZWN0aW9uR3JvdXApLCBcbiAgICAgICAgZS5maWx0ZXJzLmxlbmd0aCA+IDAgJiYgKHQgKz0gYCwgZmlsdGVyczogWyR7ZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfc3RyaW5naWZ5RmlsdGVyKGUpKSkuam9pbihcIiwgXCIpfV1gKSwgXG4gICAgICAgIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZChlLmxpbWl0KSB8fCAodCArPSBcIiwgbGltaXQ6IFwiICsgZS5saW1pdCksIGUub3JkZXJCeS5sZW5ndGggPiAwICYmICh0ICs9IGAsIG9yZGVyQnk6IFske2Uub3JkZXJCeS5tYXAoKGUgPT4gZnVuY3Rpb24gX19QUklWQVRFX3N0cmluZ2lmeU9yZGVyQnkoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGAke2UuZmllbGQuY2Fub25pY2FsU3RyaW5nKCl9ICgke2UuZGlyfSlgO1xuICAgICAgICB9KGUpKSkuam9pbihcIiwgXCIpfV1gKSwgZS5zdGFydEF0ICYmICh0ICs9IFwiLCBzdGFydEF0OiBcIiwgdCArPSBlLnN0YXJ0QXQuaW5jbHVzaXZlID8gXCJiOlwiIDogXCJhOlwiLCBcbiAgICAgICAgdCArPSBlLnN0YXJ0QXQucG9zaXRpb24ubWFwKChlID0+IGNhbm9uaWNhbElkKGUpKSkuam9pbihcIixcIikpLCBlLmVuZEF0ICYmICh0ICs9IFwiLCBlbmRBdDogXCIsIFxuICAgICAgICB0ICs9IGUuZW5kQXQuaW5jbHVzaXZlID8gXCJhOlwiIDogXCJiOlwiLCB0ICs9IGUuZW5kQXQucG9zaXRpb24ubWFwKChlID0+IGNhbm9uaWNhbElkKGUpKSkuam9pbihcIixcIikpLCBcbiAgICAgICAgYFRhcmdldCgke3R9KWA7XG4gICAgfShfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlKSl9OyBsaW1pdFR5cGU9JHtlLmxpbWl0VHlwZX0pYDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciBgZG9jYCBtYXRjaGVzIHRoZSBjb25zdHJhaW50cyBvZiBgcXVlcnlgLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKGUsIHQpIHtcbiAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzUGF0aEFuZENvbGxlY3Rpb25Hcm91cChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LmtleS5wYXRoO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgPyB0LmtleS5oYXNDb2xsZWN0aW9uSWQoZS5jb2xsZWN0aW9uR3JvdXApICYmIGUucGF0aC5pc1ByZWZpeE9mKG4pIDogRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlLnBhdGgpID8gZS5wYXRoLmlzRXF1YWwobikgOiBlLnBhdGguaXNJbW1lZGlhdGVQYXJlbnRPZihuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIGRvY3VtZW50IG11c3QgaGF2ZSBhIHZhbHVlIGZvciBldmVyeSBvcmRlcmluZyBjbGF1c2UgaW4gb3JkZXIgdG8gc2hvdyB1cFxuICogaW4gdGhlIHJlc3VsdHMuXG4gKi8gKGUsIHQpICYmIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU1hdGNoZXNPcmRlckJ5KGUsIHQpIHtcbiAgICAgICAgLy8gV2UgbXVzdCB1c2UgYHF1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoKWAgdG8gZ2V0IHRoZSBsaXN0IG9mIGFsbCBvcmRlckJ5cyAoYm90aCBpbXBsaWNpdCBhbmQgZXhwbGljaXQpLlxuICAgICAgICAvLyBOb3RlIHRoYXQgZm9yIE9SIHF1ZXJpZXMsIG9yZGVyQnkgYXBwbGllcyB0byBhbGwgZGlzanVuY3Rpb24gdGVybXMgYW5kIGltcGxpY2l0IG9yZGVyQnlzIG11c3RcbiAgICAgICAgLy8gYmUgdGFrZW4gaW50byBhY2NvdW50LiBGb3IgZXhhbXBsZSwgdGhlIHF1ZXJ5IFwiYSA+IDEgfHwgYj09MVwiIGhhcyBhbiBpbXBsaWNpdCBcIm9yZGVyQnkgYVwiIGR1ZVxuICAgICAgICAvLyB0byB0aGUgaW5lcXVhbGl0eSwgYW5kIGlzIGV2YWx1YXRlZCBhcyBcImEgPiAxIG9yZGVyQnkgYSB8fCBiPT0xIG9yZGVyQnkgYVwiLlxuICAgICAgICAvLyBBIGRvY3VtZW50IHdpdGggY29udGVudCBvZiB7YjoxfSBtYXRjaGVzIHRoZSBmaWx0ZXJzLCBidXQgZG9lcyBub3QgbWF0Y2ggdGhlIG9yZGVyQnkgYmVjYXVzZVxuICAgICAgICAvLyBpdCdzIG1pc3NpbmcgdGhlIGZpZWxkICdhJy5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV9xdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KGUpKSBcbiAgICAgICAgLy8gb3JkZXItYnkga2V5IGFsd2F5cyBtYXRjaGVzXG4gICAgICAgIGlmICghbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgbnVsbCA9PT0gdC5kYXRhLmZpZWxkKG4uZmllbGQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9KGUsIHQpICYmIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU1hdGNoZXNGaWx0ZXJzKGUsIHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuZmlsdGVycykgaWYgKCFuLm1hdGNoZXModCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogTWFrZXMgc3VyZSBhIGRvY3VtZW50IGlzIHdpdGhpbiB0aGUgYm91bmRzLCBpZiBwcm92aWRlZC4gKi8gKGUsIHQpICYmIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU1hdGNoZXNCb3VuZHMoZSwgdCkge1xuICAgICAgICBpZiAoZS5zdGFydEF0ICYmICFcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBiZWZvcmUgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxuICogb3JkZXIuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2JvdW5kU29ydHNCZWZvcmVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2JvdW5kQ29tcGFyZVRvRG9jdW1lbnQoZSwgdCwgbik7XG4gICAgICAgICAgICByZXR1cm4gZS5pbmNsdXNpdmUgPyByIDw9IDAgOiByIDwgMDtcbiAgICAgICAgfShlLnN0YXJ0QXQsIF9fUFJJVkFURV9xdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KGUpLCB0KSkgcmV0dXJuICExO1xuICAgICAgICBpZiAoZS5lbmRBdCAmJiAhZnVuY3Rpb24gX19QUklWQVRFX2JvdW5kU29ydHNBZnRlckRvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfYm91bmRDb21wYXJlVG9Eb2N1bWVudChlLCB0LCBuKTtcbiAgICAgICAgICAgIHJldHVybiBlLmluY2x1c2l2ZSA/IHIgPj0gMCA6IHIgPiAwO1xuICAgICAgICB9KGUuZW5kQXQsIF9fUFJJVkFURV9xdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KGUpLCB0KSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyB0aGUgY29sbGVjdGlvbiBncm91cCB0aGF0IHRoaXMgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBXZWIgU0RLIHRvIGZhY2lsaXRhdGUgbXVsdGktdGFiXG4gKiBzeW5jaHJvbml6YXRpb24gZm9yIHF1ZXJ5IHJlc3VsdHMuXG4gKi8gKGUsIHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlDb2xsZWN0aW9uR3JvdXAoZSkge1xuICAgIHJldHVybiBlLmNvbGxlY3Rpb25Hcm91cCB8fCAoZS5wYXRoLmxlbmd0aCAlIDIgPT0gMSA/IGUucGF0aC5sYXN0U2VnbWVudCgpIDogZS5wYXRoLmdldChlLnBhdGgubGVuZ3RoIC0gMikpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgY29tcGFyYXRvciBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXBhcmUgdHdvIGRvY3VtZW50c1xuICogYmFzZWQgb24gdGhlIFF1ZXJ5J3Mgb3JkZXJpbmcgY29uc3RyYWludC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlDb21wYXJhdG9yKGUpIHtcbiAgICByZXR1cm4gKHQsIG4pID0+IHtcbiAgICAgICAgbGV0IHIgPSAhMTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIF9fUFJJVkFURV9xdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX2NvbXBhcmVEb2NzKGksIHQsIG4pO1xuICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgciA9IHIgfHwgaS5maWVsZC5pc0tleUZpZWxkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVEb2NzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gZS5maWVsZC5pc0tleUZpZWxkKCkgPyBEb2N1bWVudEtleS5jb21wYXJhdG9yKHQua2V5LCBuLmtleSkgOiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZURvY3VtZW50c0J5RmllbGQoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gdC5kYXRhLmZpZWxkKGUpLCBpID0gbi5kYXRhLmZpZWxkKGUpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gciAmJiBudWxsICE9PSBpID8gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShyLCBpKSA6IGZhaWwoKTtcbiAgICB9KGUuZmllbGQsIHQsIG4pO1xuICAgIHN3aXRjaCAoZS5kaXIpIHtcbiAgICAgIGNhc2UgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIHI7XG5cbiAgICAgIGNhc2UgXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gLTEgKiByO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtYXAgaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIG9iamVjdHMgYXMga2V5cy4gT2JqZWN0cyBtdXN0IGhhdmUgYW5cbiAqIGFzc29jaWF0ZWQgZXF1YWxzIGZ1bmN0aW9uIGFuZCBtdXN0IGJlIGltbXV0YWJsZS4gRW50cmllcyBpbiB0aGUgbWFwIGFyZVxuICogc3RvcmVkIHRvZ2V0aGVyIHdpdGggdGhlIGtleSBiZWluZyBwcm9kdWNlZCBmcm9tIHRoZSBtYXBLZXlGbi4gVGhpcyBtYXBcbiAqIGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBjb2xsaXNpb25zIG9mIGtleXMuXG4gKi8gY2xhc3MgT2JqZWN0TWFwIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMubWFwS2V5Rm4gPSBlLCB0aGlzLmVxdWFsc0ZuID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5uZXIgbWFwIGZvciBhIGtleS92YWx1ZSBwYWlyLiBEdWUgdG8gdGhlIHBvc3NpYmlsaXR5IG9mIGNvbGxpc2lvbnMgd2VcbiAgICAgICAgICoga2VlcCBhIGxpc3Qgb2YgZW50cmllcyB0aGF0IHdlIGRvIGEgbGluZWFyIHNlYXJjaCB0aHJvdWdoIHRvIGZpbmQgYW4gYWN0dWFsXG4gICAgICAgICAqIG1hdGNoLiBOb3RlIHRoYXQgY29sbGlzaW9ucyBzaG91bGQgYmUgcmFyZSwgc28gd2Ugc3RpbGwgZXhwZWN0IG5lYXJcbiAgICAgICAgICogY29uc3RhbnQgdGltZSBsb29rdXBzIGluIHByYWN0aWNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbm5lciA9IHt9LCBcbiAgICAgICAgLyoqIFRoZSBudW1iZXIgb2YgZW50cmllcyBzdG9yZWQgaW4gdGhlIG1hcCAqL1xuICAgICAgICB0aGlzLmlubmVyU2l6ZSA9IDA7XG4gICAgfVxuICAgIC8qKiBHZXQgYSB2YWx1ZSBmb3IgdGhpcyBrZXksIG9yIHVuZGVmaW5lZCBpZiBpdCBkb2VzIG5vdCBleGlzdC4gKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubWFwS2V5Rm4oZSksIG4gPSB0aGlzLmlubmVyW3RdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBuKSBmb3IgKGNvbnN0IFt0LCByXSBvZiBuKSBpZiAodGhpcy5lcXVhbHNGbih0LCBlKSkgcmV0dXJuIHI7XG4gICAgfVxuICAgIGhhcyhlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZ2V0KGUpO1xuICAgIH1cbiAgICAvKiogUHV0IHRoaXMga2V5IGFuZCB2YWx1ZSBpbiB0aGUgbWFwLiAqLyAgICBzZXQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5tYXBLZXlGbihlKSwgciA9IHRoaXMuaW5uZXJbbl07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybiB0aGlzLmlubmVyW25dID0gWyBbIGUsIHQgXSBdLCB2b2lkIHRoaXMuaW5uZXJTaXplKys7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgci5sZW5ndGg7IG4rKykgaWYgKHRoaXMuZXF1YWxzRm4ocltuXVswXSwgZSkpIFxuICAgICAgICAvLyBUaGlzIGlzIHVwZGF0aW5nIGFuIGV4aXN0aW5nIGVudHJ5IGFuZCBkb2VzIG5vdCBpbmNyZWFzZSBgaW5uZXJTaXplYC5cbiAgICAgICAgcmV0dXJuIHZvaWQgKHJbbl0gPSBbIGUsIHQgXSk7XG4gICAgICAgIHIucHVzaChbIGUsIHQgXSksIHRoaXMuaW5uZXJTaXplKys7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGlzIGtleSBmcm9tIHRoZSBtYXAuIFJldHVybnMgYSBib29sZWFuIGlmIGFueXRoaW5nIHdhcyBkZWxldGVkLlxuICAgICAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5tYXBLZXlGbihlKSwgbiA9IHRoaXMuaW5uZXJbdF07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBuLmxlbmd0aDsgcisrKSBpZiAodGhpcy5lcXVhbHNGbihuW3JdWzBdLCBlKSkgcmV0dXJuIDEgPT09IG4ubGVuZ3RoID8gZGVsZXRlIHRoaXMuaW5uZXJbdF0gOiBuLnNwbGljZShyLCAxKSwgXG4gICAgICAgIHRoaXMuaW5uZXJTaXplLS0sICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGZvckVhY2goZSkge1xuICAgICAgICBmb3JFYWNoKHRoaXMuaW5uZXIsICgodCwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbdCwgcl0gb2YgbikgZSh0LCByKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gaXNFbXB0eSh0aGlzLmlubmVyKTtcbiAgICB9XG4gICAgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJTaXplO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgcmUgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCkge1xuICAgIHJldHVybiByZTtcbn1cblxuY29uc3QgaWUgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBkb2N1bWVudE1hcCguLi5lKSB7XG4gICAgbGV0IHQgPSBpZTtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IHQuaW5zZXJ0KG4ua2V5LCBuKTtcbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbnZlcnRPdmVybGF5ZWREb2N1bWVudE1hcFRvRG9jdW1lbnRNYXAoZSkge1xuICAgIGxldCB0ID0gaWU7XG4gICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIG4pID0+IHQgPSB0Lmluc2VydChlLCBuLm92ZXJsYXllZERvY3VtZW50KSkpLCB0O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdNdXRhdGlvbk1hcCgpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdE1hcCgoZSA9PiBlLnRvU3RyaW5nKCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpO1xufVxuXG5jb25zdCBzZSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG5cbmNvbnN0IG9lID0gbmV3IFNvcnRlZFNldChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KC4uLmUpIHtcbiAgICBsZXQgdCA9IG9lO1xuICAgIGZvciAoY29uc3QgbiBvZiBlKSB0ID0gdC5hZGQobik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmNvbnN0IF9lID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRJZFNldCgpIHtcbiAgICByZXR1cm4gX2U7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYW4gRG91YmxlVmFsdWUgZm9yIGB2YWx1ZWAgdGhhdCBpcyBlbmNvZGVkIGJhc2VkIHRoZSBzZXJpYWxpemVyJ3NcbiAqIGB1c2VQcm90bzNKc29uYCBzZXR0aW5nLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0RvdWJsZShlLCB0KSB7XG4gICAgaWYgKGUudXNlUHJvdG8zSnNvbikge1xuICAgICAgICBpZiAoaXNOYU4odCkpIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJOYU5cIlxuICAgICAgICB9O1xuICAgICAgICBpZiAodCA9PT0gMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJJbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0ID09PSAtMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCItSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBkb3VibGVWYWx1ZTogX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKHQpID8gXCItMFwiIDogdFxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBJbnRlZ2VyVmFsdWUgZm9yIGB2YWx1ZWAuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvSW50ZWdlcihlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiBcIlwiICsgZVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqIFRoZSByZXR1cm4gdmFsdWUgaXMgYW4gSW50ZWdlclZhbHVlIGlmIGl0IGNhbiBzYWZlbHkgcmVwcmVzZW50IHRoZSB2YWx1ZSxcbiAqIG90aGVyd2lzZSBhIERvdWJsZVZhbHVlIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIHRvTnVtYmVyKGUsIHQpIHtcbiAgICByZXR1cm4gaXNTYWZlSW50ZWdlcih0KSA/IF9fUFJJVkFURV90b0ludGVnZXIodCkgOiBfX1BSSVZBVEVfdG9Eb3VibGUoZSwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVXNlZCB0byByZXByZXNlbnQgYSBmaWVsZCB0cmFuc2Zvcm0gb24gYSBtdXRhdGlvbi4gKi8gY2xhc3MgVHJhbnNmb3JtT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIHN0cnVjdHVyYWwgdHlwZSBvZiBgVHJhbnNmb3JtT3BlcmF0aW9uYCBpcyB1bmlxdWUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzU0NTFcbiAgICAgICAgdGhpcy5fID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbG9jYWwgdHJhbnNmb3JtIHJlc3VsdCBhZ2FpbnN0IHRoZSBwcm92aWRlZCBgcHJldmlvdXNWYWx1ZWAsXG4gKiBvcHRpb25hbGx5IHVzaW5nIHRoZSBwcm92aWRlZCBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub0xvY2FsVmlldyhlLCB0LCBuKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtID8gZnVuY3Rpb24gc2VydmVyVGltZXN0YW1wJDEoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgX190eXBlX186IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwic2VydmVyX3RpbWVzdGFtcFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfX2xvY2FsX3dyaXRlX3RpbWVfXzoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogZS5zZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFub3M6IGUubmFub3NlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gV2Ugc2hvdWxkIGF2b2lkIHN0b3JpbmcgZGVlcGx5IG5lc3RlZCBzZXJ2ZXIgdGltZXN0YW1wIG1hcCB2YWx1ZXNcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBuZXZlciB1c2UgdGhlIGludGVybWVkaWF0ZSBcInByZXZpb3VzIHZhbHVlc1wiLlxuICAgICAgICAvLyBGb3IgZXhhbXBsZTpcbiAgICAgICAgLy8gcHJldmlvdXM6IDQyTCwgYWRkOiB0MSwgcmVzdWx0OiB0MSAtPiA0MkxcbiAgICAgICAgLy8gcHJldmlvdXM6IHQxLCAgYWRkOiB0MiwgcmVzdWx0OiB0MiAtPiA0MkwgKE5PVCB0MiAtPiB0MSAtPiA0MkwpXG4gICAgICAgIC8vIHByZXZpb3VzOiB0MiwgIGFkZDogdDMsIHJlc3VsdDogdDMgLT4gNDJMIChOT1QgdDMgLT4gdDIgLT4gdDEgLT4gNDJMKVxuICAgICAgICAvLyBgZ2V0UHJldmlvdXNWYWx1ZWAgcmVjdXJzaXZlbHkgdHJhdmVyc2VzIHNlcnZlciB0aW1lc3RhbXBzIHRvIGZpbmQgdGhlXG4gICAgICAgIC8vIGxlYXN0IHJlY2VudCBWYWx1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdCAmJiBfX1BSSVZBVEVfaXNTZXJ2ZXJUaW1lc3RhbXAodCkgJiYgKHQgPSBfX1BSSVZBVEVfZ2V0UHJldmlvdXNWYWx1ZSh0KSksIFxuICAgICAgICB0ICYmIChuLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX18gPSB0KSwge1xuICAgICAgICAgICAgbWFwVmFsdWU6IG5cbiAgICAgICAgfTtcbiAgICB9KG4sIHQpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FwcGx5QXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXBwbHlBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseU51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb25Ub0xvY2FsVmlldyhlLCB0KSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogU2luY2UgSmF2YVNjcmlwdCdzIGludGVnZXIgYXJpdGhtZXRpYyBpcyBsaW1pdGVkIHRvIDUzIGJpdFxuICAgICAgICAvLyBwcmVjaXNpb24gYW5kIHJlc29sdmVzIG92ZXJmbG93cyBieSByZWR1Y2luZyBwcmVjaXNpb24sIHdlIGRvIG5vdFxuICAgICAgICAvLyBtYW51YWxseSBjYXAgb3ZlcmZsb3dzIGF0IDJeNjMuXG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY29tcHV0ZVRyYW5zZm9ybU9wZXJhdGlvbkJhc2VWYWx1ZShlLCB0KSwgciA9IGFzTnVtYmVyKG4pICsgYXNOdW1iZXIoZS5UZSk7XG4gICAgICAgIHJldHVybiBpc0ludGVnZXIobikgJiYgaXNJbnRlZ2VyKGUuVGUpID8gX19QUklWQVRFX3RvSW50ZWdlcihyKSA6IF9fUFJJVkFURV90b0RvdWJsZShlLnNlcmlhbGl6ZXIsIHIpO1xuICAgIH0oZSwgdCk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYSBmaW5hbCB0cmFuc2Zvcm0gcmVzdWx0IGFmdGVyIHRoZSB0cmFuc2Zvcm0gaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gKiBieSB0aGUgc2VydmVyLCBwb3RlbnRpYWxseSB1c2luZyB0aGUgc2VydmVyLXByb3ZpZGVkIHRyYW5zZm9ybVJlc3VsdC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAvLyBUaGUgc2VydmVyIGp1c3Qgc2VuZHMgbnVsbCBhcyB0aGUgdHJhbnNmb3JtIHJlc3VsdCBmb3IgYXJyYXkgb3BlcmF0aW9ucyxcbiAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBhIHJlc3VsdCB0aGUgc2FtZSBhcyB3ZSBkbyBmb3IgbG9jYWxcbiAgICAvLyBhcHBsaWNhdGlvbnMuXG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcHBseUFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FwcGx5QXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkgOiBuO1xufVxuXG4vKipcbiAqIElmIHRoaXMgdHJhbnNmb3JtIG9wZXJhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0b1xuICogcGVyc2lzdCBmb3IgdGhpcyB0cmFuc2Zvcm0uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIHRyYW5zZm9ybVxuICogb3BlcmF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXNcbiAqIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIEJhc2UgdmFsdWVzIHByb3ZpZGUgY29uc2lzdGVudCBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmRcbiAqIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZSBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmRcbiAqIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlIHRyYW5zZm9ybSBvcGVyYXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMsIGFzIHRoZXkgY2FuIGJlIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhc1xuICogYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlKGUsIHQpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uID8gXG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGVpdGhlciBhbiBJbnRlZ2VyVmFsdWUgb3IgYSBEb3VibGVWYWx1ZS4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfaXNOdW1iZXIoZSkge1xuICAgICAgICByZXR1cm4gaXNJbnRlZ2VyKGUpIHx8IGZ1bmN0aW9uIF9fUFJJVkFURV9pc0RvdWJsZShlKSB7XG4gICAgICAgICAgICByZXR1cm4gISFlICYmIFwiZG91YmxlVmFsdWVcIiBpbiBlO1xuICAgICAgICB9KGUpO1xuICAgIH0odCkgPyB0IDoge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IDBcbiAgICB9IDogbnVsbDtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYSB2YWx1ZSBpbnRvIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAuICovXG5jbGFzcyBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtIGV4dGVuZHMgVHJhbnNmb3JtT3BlcmF0aW9uIHt9XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHVuaW9uIG9wZXJhdGlvbi4gKi8gY2xhc3MgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gZXh0ZW5kcyBUcmFuc2Zvcm1PcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2NvZXJjZWRGaWVsZFZhbHVlc0FycmF5KHQpO1xuICAgIGZvciAoY29uc3QgdCBvZiBlLmVsZW1lbnRzKSBuLnNvbWUoKGUgPT4gX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUsIHQpKSkgfHwgbi5wdXNoKHQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgcmVtb3ZlIG9wZXJhdGlvbi4gKi8gY2xhc3MgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uIGV4dGVuZHMgVHJhbnNmb3JtT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5QXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkge1xuICAgIGxldCBuID0gX19QUklWQVRFX2NvZXJjZWRGaWVsZFZhbHVlc0FycmF5KHQpO1xuICAgIGZvciAoY29uc3QgdCBvZiBlLmVsZW1lbnRzKSBuID0gbi5maWx0ZXIoKGUgPT4gIV9fUFJJVkFURV92YWx1ZUVxdWFscyhlLCB0KSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBiYWNrZW5kIHNlbWFudGljcyBmb3IgbG9jYWxseSBjb21wdXRlZCBOVU1FUklDX0FERCAoaW5jcmVtZW50KVxuICogdHJhbnNmb3Jtcy4gQ29udmVydHMgYWxsIGZpZWxkIHZhbHVlcyB0byBpbnRlZ2VycyBvciBkb3VibGVzLCBidXQgdW5saWtlIHRoZVxuICogYmFja2VuZCBkb2VzIG5vdCBjYXAgaW50ZWdlciB2YWx1ZXMgYXQgMl42My4gSW5zdGVhZCwgSmF2YVNjcmlwdCBudW1iZXJcbiAqIGFyaXRobWV0aWMgaXMgdXNlZCBhbmQgcHJlY2lzaW9uIGxvc3MgY2FuIG9jY3VyIGZvciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDJeNTMuXG4gKi8gY2xhc3MgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gZXh0ZW5kcyBUcmFuc2Zvcm1PcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5zZXJpYWxpemVyID0gZSwgdGhpcy5UZSA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhc051bWJlcihlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb2VyY2VkRmllbGRWYWx1ZXNBcnJheShlKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkoZSkgJiYgZS5hcnJheVZhbHVlLnZhbHVlcyA/IGUuYXJyYXlWYWx1ZS52YWx1ZXMuc2xpY2UoKSA6IFtdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgZmllbGQgcGF0aCBhbmQgdGhlIFRyYW5zZm9ybU9wZXJhdGlvbiB0byBwZXJmb3JtIHVwb24gaXQuICovIGNsYXNzIEZpZWxkVHJhbnNmb3JtIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSBlLCB0aGlzLnRyYW5zZm9ybSA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRUcmFuc2Zvcm1FcXVhbHMoZSwgdCkge1xuICAgIHJldHVybiBlLmZpZWxkLmlzRXF1YWwodC5maWVsZCkgJiYgZnVuY3Rpb24gX19QUklWQVRFX3RyYW5zZm9ybU9wZXJhdGlvbkVxdWFscyhlLCB0KSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gJiYgdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIHx8IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gJiYgdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcnJheUVxdWFscyhlLmVsZW1lbnRzLCB0LmVsZW1lbnRzLCBfX1BSSVZBVEVfdmFsdWVFcXVhbHMpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uICYmIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLlRlLCB0LlRlKSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtICYmIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtO1xuICAgIH0oZS50cmFuc2Zvcm0sIHQudHJhbnNmb3JtKTtcbn1cblxuLyoqIFRoZSByZXN1bHQgb2Ygc3VjY2Vzc2Z1bGx5IGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gdGhlIGJhY2tlbmQuICovXG5jbGFzcyBNdXRhdGlvblJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHZlcnNpb24gYXQgd2hpY2ggdGhlIG11dGF0aW9uIHdhcyBjb21taXR0ZWQ6XG4gICAgICpcbiAgICAgKiAtIEZvciBtb3N0IG9wZXJhdGlvbnMsIHRoaXMgaXMgdGhlIHVwZGF0ZVRpbWUgaW4gdGhlIFdyaXRlUmVzdWx0LlxuICAgICAqIC0gRm9yIGRlbGV0ZXMsIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIChiZWNhdXNlIGRlbGV0ZXMgYXJlXG4gICAgICogICBub3Qgc3RvcmVkIGFuZCBoYXZlIG5vIHVwZGF0ZVRpbWUpLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIHZlcnNpb25zIGNhbiBiZSBkaWZmZXJlbnQ6IE5vLW9wIHdyaXRlcyB3aWxsIG5vdCBjaGFuZ2VcbiAgICAgKiB0aGUgdXBkYXRlVGltZSBldmVuIHRob3VnaCB0aGUgY29tbWl0VGltZSBhZHZhbmNlcy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzdWx0aW5nIGZpZWxkcyByZXR1cm5lZCBmcm9tIHRoZSBiYWNrZW5kIGFmdGVyIGEgbXV0YXRpb25cbiAgICAgKiBjb250YWluaW5nIGZpZWxkIHRyYW5zZm9ybXMgaGFzIGJlZW4gY29tbWl0dGVkLiBDb250YWlucyBvbmUgRmllbGRWYWx1ZVxuICAgICAqIGZvciBlYWNoIEZpZWxkVHJhbnNmb3JtIHRoYXQgd2FzIGluIHRoZSBtdXRhdGlvbi5cbiAgICAgKlxuICAgICAqIFdpbGwgYmUgZW1wdHkgaWYgdGhlIG11dGF0aW9uIGRpZCBub3QgY29udGFpbiBhbnkgZmllbGQgdHJhbnNmb3Jtcy5cbiAgICAgKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMudHJhbnNmb3JtUmVzdWx0cyA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuY29kZXMgYSBwcmVjb25kaXRpb24gZm9yIGEgbXV0YXRpb24uIFRoaXMgZm9sbG93cyB0aGUgbW9kZWwgdGhhdCB0aGVcbiAqIGJhY2tlbmQgYWNjZXB0cyB3aXRoIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYW4gZXhwbGljaXQgXCJlbXB0eVwiIHByZWNvbmRpdGlvblxuICogKG1lYW5pbmcgbm8gcHJlY29uZGl0aW9uKS5cbiAqLyBjbGFzcyBQcmVjb25kaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lID0gZSwgdGhpcy5leGlzdHMgPSB0O1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBlbXB0eSBQcmVjb25kaXRpb24uICovICAgIHN0YXRpYyBub25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByZWNvbmRpdGlvbjtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIHdpdGggYW4gZXhpc3RzIGZsYWcuICovICAgIHN0YXRpYyBleGlzdHMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByZWNvbmRpdGlvbih2b2lkIDAsIGUpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gYmFzZWQgb24gYSB2ZXJzaW9uIGEgZG9jdW1lbnQgZXhpc3RzIGF0LiAqLyAgICBzdGF0aWMgdXBkYXRlVGltZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJlY29uZGl0aW9uKGUpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIHRoaXMgUHJlY29uZGl0aW9uIGlzIGVtcHR5LiAqLyAgICBnZXQgaXNOb25lKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0aGlzLnVwZGF0ZVRpbWUgJiYgdm9pZCAwID09PSB0aGlzLmV4aXN0cztcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4aXN0cyA9PT0gZS5leGlzdHMgJiYgKHRoaXMudXBkYXRlVGltZSA/ICEhZS51cGRhdGVUaW1lICYmIHRoaXMudXBkYXRlVGltZS5pc0VxdWFsKGUudXBkYXRlVGltZSkgOiAhZS51cGRhdGVUaW1lKTtcbiAgICB9XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByZWNvbmRpdGlvbnMgaXMgdmFsaWQgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLCB0KSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51cGRhdGVUaW1lID8gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiB0LnZlcnNpb24uaXNFcXVhbChlLnVwZGF0ZVRpbWUpIDogdm9pZCAwID09PSBlLmV4aXN0cyB8fCBlLmV4aXN0cyA9PT0gdC5pc0ZvdW5kRG9jdW1lbnQoKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIGRlc2NyaWJlcyBhIHNlbGYtY29udGFpbmVkIGNoYW5nZSB0byBhIGRvY3VtZW50LiBNdXRhdGlvbnMgY2FuXG4gKiBjcmVhdGUsIHJlcGxhY2UsIGRlbGV0ZSwgYW5kIHVwZGF0ZSBzdWJzZXRzIG9mIGRvY3VtZW50cy5cbiAqXG4gKiBNdXRhdGlvbnMgbm90IG9ubHkgYWN0IG9uIHRoZSB2YWx1ZSBvZiB0aGUgZG9jdW1lbnQgYnV0IGFsc28gaXRzIHZlcnNpb24uXG4gKlxuICogRm9yIGxvY2FsIG11dGF0aW9ucyAobXV0YXRpb25zIHRoYXQgaGF2ZW4ndCBiZWVuIGNvbW1pdHRlZCB5ZXQpLCB3ZSBwcmVzZXJ2ZVxuICogdGhlIGV4aXN0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBGb3IgRGVsZXRlIG11dGF0aW9ucywgd2VcbiAqIHJlc2V0IHRoZSB2ZXJzaW9uIHRvIDAuXG4gKlxuICogSGVyZSdzIHRoZSBleHBlY3RlZCB0cmFuc2l0aW9uIHRhYmxlLlxuICpcbiAqIE1VVEFUSU9OICAgICAgICAgICBBUFBMSUVEIFRPICAgICAgICAgICAgUkVTVUxUUyBJTlxuICpcbiAqIFNldE11dGF0aW9uICAgICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIERvY3VtZW50KHYwKVxuICogU2V0TXV0YXRpb24gICAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBEb2N1bWVudCh2MClcbiAqIFBhdGNoTXV0YXRpb24gICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIFVua25vd25Eb2N1bWVudCh2MylcbiAqIERlbGV0ZU11dGF0aW9uICAgICBEb2N1bWVudCh2MykgICAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgTm9Eb2N1bWVudCh2MClcbiAqXG4gKiBGb3IgYWNrbm93bGVkZ2VkIG11dGF0aW9ucywgd2UgdXNlIHRoZSB1cGRhdGVUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGFzXG4gKiB0aGUgcmVzdWx0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBBcyBkZWxldGVzIGhhdmUgbm9cbiAqIGV4cGxpY2l0IHVwZGF0ZSB0aW1lLCB3ZSB1c2UgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgZm9yXG4gKiBEZWxldGUgbXV0YXRpb25zLlxuICpcbiAqIElmIGEgbXV0YXRpb24gaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kIGJ1dCBmYWlscyB0aGUgcHJlY29uZGl0aW9uIGNoZWNrXG4gKiBsb2NhbGx5LCB3ZSB0cmFuc2l0aW9uIHRvIGFuIGBVbmtub3duRG9jdW1lbnRgIGFuZCByZWx5IG9uIFdhdGNoIHRvIHNlbmQgdXNcbiAqIHRoZSB1cGRhdGVkIHZlcnNpb24uXG4gKlxuICogRmllbGQgdHJhbnNmb3JtcyBhcmUgdXNlZCBvbmx5IHdpdGggUGF0Y2ggYW5kIFNldCBNdXRhdGlvbnMuIFdlIHVzZSB0aGVcbiAqIGB1cGRhdGVUcmFuc2Zvcm1zYCBtZXNzYWdlIHRvIHN0b3JlIHRyYW5zZm9ybXMsIHJhdGhlciB0aGFuIHRoZSBgdHJhbnNmb3Jtc2BzXG4gKiBtZXNzYWdlcy5cbiAqXG4gKiAjIyBTdWJjbGFzc2luZyBOb3Rlc1xuICpcbiAqIEV2ZXJ5IHR5cGUgb2YgbXV0YXRpb24gbmVlZHMgdG8gaW1wbGVtZW50IGl0cyBvd24gYXBwbHlUb1JlbW90ZURvY3VtZW50KCkgYW5kXG4gKiBhcHBseVRvTG9jYWxWaWV3KCkgdG8gaW1wbGVtZW50IHRoZSBhY3R1YWwgYmVoYXZpb3Igb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uXG4gKiB0byBzb21lIHNvdXJjZSBkb2N1bWVudCAoc2VlIGBzZXRNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudCgpYCBmb3IgYW5cbiAqIGV4YW1wbGUpLlxuICovIGNsYXNzIE11dGF0aW9uIHt9XG5cbi8qKlxuICogQSB1dGlsaXR5IG1ldGhvZCB0byBjYWxjdWxhdGUgYSBgTXV0YXRpb25gIHJlcHJlc2VudGluZyB0aGUgb3ZlcmxheSBmcm9tIHRoZVxuICogZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50LCBhbmQgYSBgRmllbGRNYXNrYCByZXByZXNlbnRpbmcgdGhlIGZpZWxkcyB0aGF0XG4gKiBhcmUgbXV0YXRlZCBieSB0aGUgbG9jYWwgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jYWxjdWxhdGVPdmVybGF5TXV0YXRpb24oZSwgdCkge1xuICAgIGlmICghZS5oYXNMb2NhbE11dGF0aW9ucyB8fCB0ICYmIDAgPT09IHQuZmllbGRzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgLy8gbWFzayBpcyBudWxsIHdoZW4gc2V0cyBvciBkZWxldGVzIGFyZSBhcHBsaWVkIHRvIHRoZSBjdXJyZW50IGRvY3VtZW50LlxuICAgICAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIGUuaXNOb0RvY3VtZW50KCkgPyBuZXcgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uKGUua2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSA6IG5ldyBfX1BSSVZBVEVfU2V0TXV0YXRpb24oZS5rZXksIGUuZGF0YSwgUHJlY29uZGl0aW9uLm5vbmUoKSk7XG4gICAge1xuICAgICAgICBjb25zdCBuID0gZS5kYXRhLCByID0gT2JqZWN0VmFsdWUuZW1wdHkoKTtcbiAgICAgICAgbGV0IGkgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpO1xuICAgICAgICBmb3IgKGxldCBlIG9mIHQuZmllbGRzKSBpZiAoIWkuaGFzKGUpKSB7XG4gICAgICAgICAgICBsZXQgdCA9IG4uZmllbGQoZSk7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZGVsZXRpbmcgYSBuZXN0ZWQgZmllbGQsIHdlIHRha2UgdGhlIGltbWVkaWF0ZSBwYXJlbnQgYXNcbiAgICAgICAgICAgIC8vIHRoZSBtYXNrIHVzZWQgdG8gY29uc3RydWN0IHRoZSByZXN1bHRpbmcgbXV0YXRpb24uXG4gICAgICAgICAgICAvLyBKdXN0aWZpY2F0aW9uOiBOZXN0ZWQgZmllbGRzIGNhbiBjcmVhdGUgcGFyZW50IGZpZWxkcyBpbXBsaWNpdGx5LiBJZlxuICAgICAgICAgICAgLy8gb25seSBhIGxlYWYgZW50cnkgaXMgZGVsZXRlZCBpbiBsYXRlciBtdXRhdGlvbnMsIHRoZSBwYXJlbnQgZmllbGRcbiAgICAgICAgICAgIC8vIHNob3VsZCBzdGlsbCByZW1haW4sIGJ1dCB3ZSBtYXkgaGF2ZSBsb3N0IHRoaXMgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICAvLyBDb25zaWRlciBtdXRhdGlvbiAoZm9vLmJhciAxKSwgdGhlbiBtdXRhdGlvbiAoZm9vLmJhciBkZWxldGUoKSkuXG4gICAgICAgICAgICAvLyBUaGlzIGxlYXZlcyB0aGUgZmluYWwgcmVzdWx0IChmb28sIHt9KS4gRGVzcGl0ZSB0aGUgZmFjdCB0aGF0IGBkb2NgXG4gICAgICAgICAgICAvLyBoYXMgdGhlIGNvcnJlY3QgcmVzdWx0LCBgZm9vYCBpcyBub3QgaW4gYG1hc2tgLCBhbmQgdGhlIHJlc3VsdGluZ1xuICAgICAgICAgICAgLy8gbXV0YXRpb24gd291bGQgbWlzcyBgZm9vYC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT09IHQgJiYgZS5sZW5ndGggPiAxICYmIChlID0gZS5wb3BMYXN0KCksIHQgPSBuLmZpZWxkKGUpKSwgbnVsbCA9PT0gdCA/IHIuZGVsZXRlKGUpIDogci5zZXQoZSwgdCksIFxuICAgICAgICAgICAgaSA9IGkuYWRkKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oZS5rZXksIHIsIG5ldyBGaWVsZE1hc2soaS50b0FycmF5KCkpLCBQcmVjb25kaXRpb24ubm9uZSgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZyBhXG4gKiBuZXcgcmVtb3RlIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGUgZXhwZWN0ZWQgc3RhdGVcbiAqIChlLmcuIGl0IGlzIGludmFsaWQgb3Igb3V0ZGF0ZWQpLCB0aGUgZG9jdW1lbnQgdHlwZSBtYXkgdHJhbnNpdGlvbiB0b1xuICogdW5rbm93bi5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBtdXRhdGlvblJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uIGZyb20gdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NldE11dGF0aW9uID8gZnVuY3Rpb24gX19QUklWQVRFX3NldE11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIHNldE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhXG4gICAgICAgIC8vIHJlbW90ZSBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtdXN0IGhhdmUgaGVsZC5cbiAgICAgICAgY29uc3QgciA9IGUudmFsdWUuY2xvbmUoKSwgaSA9IF9fUFJJVkFURV9zZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzKGUuZmllbGRUcmFuc2Zvcm1zLCB0LCBuLnRyYW5zZm9ybVJlc3VsdHMpO1xuICAgICAgICByLnNldEFsbChpKSwgdC5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgcikuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfShlLCB0LCBuKSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbiA/IGZ1bmN0aW9uIF9fUFJJVkFURV9wYXRjaE11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUucHJlY29uZGl0aW9uLCB0KSkgXG4gICAgICAgIC8vIFNpbmNlIHRoZSBtdXRhdGlvbiB3YXMgbm90IHJlamVjdGVkLCB3ZSBrbm93IHRoYXQgdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtYXRjaGVkIG9uIHRoZSBiYWNrZW5kLiBXZSB0aGVyZWZvcmUgbXVzdCBub3QgaGF2ZSB0aGUgZXhwZWN0ZWQgdmVyc2lvblxuICAgICAgICAvLyBvZiB0aGUgZG9jdW1lbnQgaW4gb3VyIGNhY2hlIGFuZCBjb252ZXJ0IHRvIGFuIFVua25vd25Eb2N1bWVudCB3aXRoIGFcbiAgICAgICAgLy8ga25vd24gdXBkYXRlVGltZS5cbiAgICAgICAgcmV0dXJuIHZvaWQgdC5jb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQobi52ZXJzaW9uKTtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9zZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzKGUuZmllbGRUcmFuc2Zvcm1zLCB0LCBuLnRyYW5zZm9ybVJlc3VsdHMpLCBpID0gdC5kYXRhO1xuICAgICAgICBpLnNldEFsbChfX1BSSVZBVEVfZ2V0UGF0Y2goZSkpLCBpLnNldEFsbChyKSwgdC5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgaSkuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfShlLCB0LCBuKSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9kZWxldGVNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBhcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGEgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxuICAgICAgICB0LmNvbnZlcnRUb05vRG9jdW1lbnQobi52ZXJzaW9uKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KDAsIHQsIG4pO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmdcbiAqIHRoZSBuZXcgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGVcbiAqIGV4cGVjdGVkIHN0YXRlLCB0aGUgZG9jdW1lbnQgaXMgbm90IG1vZGlmaWVkLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIHByZXZpb3VzTWFzayAtIFRoZSBmaWVsZHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBiZWZvcmUgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbi5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIEEgdGltZXN0YW1wIGluZGljYXRpbmcgdGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlXG4gKiAgICAgYmF0Y2ggdGhpcyBtdXRhdGlvbiBpcyBhIHBhcnQgb2YuXG4gKiBAcmV0dXJucyBBIGBGaWVsZE1hc2tgIHJlcHJlc2VudGluZyB0aGUgZmllbGRzIHRoYXQgYXJlIGNoYW5nZWQgYnkgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KGUsIHQsIG4sIHIpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXRNdXRhdGlvbiA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcoZSwgdCwgbiwgcikge1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZS5wcmVjb25kaXRpb24sIHQpKSBcbiAgICAgICAgLy8gVGhlIG11dGF0aW9uIGZhaWxlZCB0byBhcHBseSAoZS5nLiBhIGRvY3VtZW50IElEIGNyZWF0ZWQgd2l0aCBhZGQoKVxuICAgICAgICAvLyBjYXVzZWQgYSBuYW1lIGNvbGxpc2lvbikuXG4gICAgICAgIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gZS52YWx1ZS5jbG9uZSgpLCBzID0gX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyhlLmZpZWxkVHJhbnNmb3JtcywgciwgdCk7XG4gICAgICAgIHJldHVybiBpLnNldEFsbChzKSwgdC5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KHQudmVyc2lvbiwgaSkuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGw7XG4gLy8gU2V0TXV0YXRpb24gb3ZlcndyaXRlcyBhbGwgZmllbGRzLlxuICAgICAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgbW9kaWZpZXMgZmllbGRzIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBnaXZlbiB2YWx1ZXMuIFRoZSB2YWx1ZXMgYXJlIGFwcGxpZWQgdGhyb3VnaCBhIGZpZWxkIG1hc2s6XG4gKlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIGJvdGggdGhlIG1hc2sgYW5kIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyB1cGRhdGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIG5laXRoZXIgdGhlIG1hc2sgbm9yIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nXG4gKiAgICBmaWVsZCBpcyB1bm1vZGlmaWVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIHRoZSBtYXNrIGJ1dCBub3QgaW4gdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIGRlbGV0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgbm90IGluIHRoZSBtYXNrIGJ1dCBpcyBpbiB0aGUgdmFsdWVzLCB0aGUgdmFsdWVzIG1hcCBpc1xuICogICAgaWdub3JlZC5cbiAqLyAoZSwgdCwgbiwgcikgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24gPyBmdW5jdGlvbiBfX1BSSVZBVEVfcGF0Y2hNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcoZSwgdCwgbiwgcikge1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZS5wcmVjb25kaXRpb24sIHQpKSByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9sb2NhbFRyYW5zZm9ybVJlc3VsdHMoZS5maWVsZFRyYW5zZm9ybXMsIHIsIHQpLCBzID0gdC5kYXRhO1xuICAgICAgICBpZiAocy5zZXRBbGwoX19QUklWQVRFX2dldFBhdGNoKGUpKSwgcy5zZXRBbGwoaSksIHQuY29udmVydFRvRm91bmREb2N1bWVudCh0LnZlcnNpb24sIHMpLnNldEhhc0xvY2FsTXV0YXRpb25zKCksIFxuICAgICAgICBudWxsID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG4udW5pb25XaXRoKGUuZmllbGRNYXNrLmZpZWxkcykudW5pb25XaXRoKGUuZmllbGRUcmFuc2Zvcm1zLm1hcCgoZSA9PiBlLmZpZWxkKSkpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBGaWVsZFBhdGgvVmFsdWUgbWFwIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlIFBhdGNoTXV0YXRpb24uXG4gKi8gKGUsIHQsIG4sIHIpIDogZnVuY3Rpb24gX19QUklWQVRFX2RlbGV0ZU11dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhlLCB0LCBuKSB7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUucHJlY29uZGl0aW9uLCB0KSkgcmV0dXJuIHQuY29udmVydFRvTm9Eb2N1bWVudCh0LnZlcnNpb24pLnNldEhhc0xvY2FsTXV0YXRpb25zKCksIFxuICAgICAgICBudWxsO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgdmVyaWZpZXMgdGhlIGV4aXN0ZW5jZSBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoXG4gKiB0aGUgcHJvdmlkZWQgcHJlY29uZGl0aW9uLlxuICpcbiAqIFRoZSBgdmVyaWZ5YCBvcGVyYXRpb24gaXMgb25seSB1c2VkIGluIFRyYW5zYWN0aW9ucywgYW5kIHRoaXMgY2xhc3Mgc2VydmVzXG4gKiBwcmltYXJpbHkgdG8gZmFjaWxpdGF0ZSBzZXJpYWxpemF0aW9uIGludG8gcHJvdG9zLlxuICovIChlLCB0LCBuKTtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIG11dGF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvIHBlcnNpc3Qgd2l0aFxuICogdGhpcyBtdXRhdGlvbi4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgbXV0YXRpb24gaXMgYWx3YXlzIGFwcGxpZWRcbiAqIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXMgYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogVGhlIGJhc2UgdmFsdWUgaXMgYSBzcGFyc2Ugb2JqZWN0IHRoYXQgY29uc2lzdHMgb2Ygb25seSB0aGUgZG9jdW1lbnRcbiAqIGZpZWxkcyBmb3Igd2hpY2ggdGhpcyBtdXRhdGlvbiBjb250YWlucyBhIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybWF0aW9uXG4gKiAoZS5nLiBhIG51bWVyaWMgaW5jcmVtZW50KS4gVGhlIHByb3ZpZGVkIHZhbHVlIGd1YXJhbnRlZXMgY29uc2lzdGVudFxuICogYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZVxuICogbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlXG4gKiBtdXRhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3IgaWRlbXBvdGVudCBtdXRhdGlvbnMsIGFzIHRoZXkgY2FuIGJlXG4gKiByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCBtdXRhdGlvbnMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uRXh0cmFjdEJhc2VWYWx1ZShlLCB0KSB7XG4gICAgbGV0IG4gPSBudWxsO1xuICAgIGZvciAoY29uc3QgciBvZiBlLmZpZWxkVHJhbnNmb3Jtcykge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHIuZmllbGQpLCBpID0gX19QUklWQVRFX2NvbXB1dGVUcmFuc2Zvcm1PcGVyYXRpb25CYXNlVmFsdWUoci50cmFuc2Zvcm0sIGUgfHwgbnVsbCk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobnVsbCA9PT0gbiAmJiAobiA9IE9iamVjdFZhbHVlLmVtcHR5KCkpLCBuLnNldChyLmZpZWxkLCBpKSk7XG4gICAgfVxuICAgIHJldHVybiBuIHx8IG51bGw7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbkVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUudHlwZSA9PT0gdC50eXBlICYmICghIWUua2V5LmlzRXF1YWwodC5rZXkpICYmICghIWUucHJlY29uZGl0aW9uLmlzRXF1YWwodC5wcmVjb25kaXRpb24pICYmICghIWZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZFRyYW5zZm9ybXNBcmVFcXVhbChlLCB0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IGUgJiYgdm9pZCAwID09PSB0IHx8ICEoIWUgfHwgIXQpICYmIF9fUFJJVkFURV9hcnJheUVxdWFscyhlLCB0LCAoKGUsIHQpID0+IF9fUFJJVkFURV9maWVsZFRyYW5zZm9ybUVxdWFscyhlLCB0KSkpO1xuICAgIH0oZS5maWVsZFRyYW5zZm9ybXMsIHQuZmllbGRUcmFuc2Zvcm1zKSAmJiAoMCAvKiBNdXRhdGlvblR5cGUuU2V0ICovID09PSBlLnR5cGUgPyBlLnZhbHVlLmlzRXF1YWwodC52YWx1ZSkgOiAxIC8qIE11dGF0aW9uVHlwZS5QYXRjaCAqLyAhPT0gZS50eXBlIHx8IGUuZGF0YS5pc0VxdWFsKHQuZGF0YSkgJiYgZS5maWVsZE1hc2suaXNFcXVhbCh0LmZpZWxkTWFzaykpKSkpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gdGhhdCBjcmVhdGVzIG9yIHJlcGxhY2VzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBvYmplY3QgdmFsdWUgY29udGVudHMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1NldE11dGF0aW9uIGV4dGVuZHMgTXV0YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IGUsIHRoaXMudmFsdWUgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IG4sIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gciwgXG4gICAgICAgIHRoaXMudHlwZSA9IDAgLyogTXV0YXRpb25UeXBlLlNldCAqLztcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9QYXRjaE11dGF0aW9uIGV4dGVuZHMgTXV0YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IGUsIHRoaXMuZGF0YSA9IHQsIHRoaXMuZmllbGRNYXNrID0gbiwgdGhpcy5wcmVjb25kaXRpb24gPSByLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpLCB0aGlzLnR5cGUgPSAxIC8qIE11dGF0aW9uVHlwZS5QYXRjaCAqLztcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZE1hc2s7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0UGF0Y2goZSkge1xuICAgIGNvbnN0IHQgPSBuZXcgTWFwO1xuICAgIHJldHVybiBlLmZpZWxkTWFzay5maWVsZHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgIGlmICghbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBlLmRhdGEuZmllbGQobik7XG4gICAgICAgICAgICB0LnNldChuLCByKTtcbiAgICAgICAgfVxuICAgIH0pKSwgdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSBhZnRlciBhIG11dGF0aW9uXG4gKiBjb250YWluaW5nIHRyYW5zZm9ybXMgaGFzIGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHBhcmFtIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMgLSBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgdGhlIHNlcnZlci5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gbmV3IE1hcDtcbiAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChlLmxlbmd0aCA9PT0gbi5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzID0gZVtpXSwgbyA9IHMudHJhbnNmb3JtLCBfID0gdC5kYXRhLmZpZWxkKHMuZmllbGQpO1xuICAgICAgICByLnNldChzLmZpZWxkLCBfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub1JlbW90ZURvY3VtZW50KG8sIF8sIG5baV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2Ugd2hlbiBhcHBseWluZyBhXG4gKiB0cmFuc2Zvcm0gbG9jYWxseS5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBsb2NhbCB0aW1lIG9mIHRoZSBtdXRhdGlvbiAodXNlZCB0b1xuICogICAgIGdlbmVyYXRlIFNlcnZlclRpbWVzdGFtcFZhbHVlcykuXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IHRyYW5zZm9ybXMgb24uXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxUcmFuc2Zvcm1SZXN1bHRzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gbmV3IE1hcDtcbiAgICBmb3IgKGNvbnN0IGkgb2YgZSkge1xuICAgICAgICBjb25zdCBlID0gaS50cmFuc2Zvcm0sIHMgPSBuLmRhdGEuZmllbGQoaS5maWVsZCk7XG4gICAgICAgIHIuc2V0KGkuZmllbGQsIF9fUFJJVkFURV9hcHBseVRyYW5zZm9ybU9wZXJhdGlvblRvTG9jYWxWaWV3KGUsIHMsIHQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbi8qKiBBIG11dGF0aW9uIHRoYXQgZGVsZXRlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleS4gKi8gY2xhc3MgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uIGV4dGVuZHMgTXV0YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IHQsIHRoaXMudHlwZSA9IDIgLyogTXV0YXRpb25UeXBlLkRlbGV0ZSAqLyAsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uIGV4dGVuZHMgTXV0YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IHQsIHRoaXMudHlwZSA9IDMgLyogTXV0YXRpb25UeXBlLlZlcmlmeSAqLyAsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBiYXRjaCBvZiBtdXRhdGlvbnMgdGhhdCB3aWxsIGJlIHNlbnQgYXMgb25lIHVuaXQgdG8gdGhlIGJhY2tlbmQuXG4gKi8gY2xhc3MgTXV0YXRpb25CYXRjaCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgdW5pcXVlIElEIG9mIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIG9yaWdpbmFsIHdyaXRlIHRpbWUgb2YgdGhpcyBtdXRhdGlvbi5cbiAgICAgKiBAcGFyYW0gYmFzZU11dGF0aW9ucyAtIE11dGF0aW9ucyB0aGF0IGFyZSB1c2VkIHRvIHBvcHVsYXRlIHRoZSBiYXNlXG4gICAgICogdmFsdWVzIHdoZW4gdGhpcyBtdXRhdGlvbiBpcyBhcHBsaWVkIGxvY2FsbHkuIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9jYWxseVxuICAgICAqIG92ZXJ3cml0ZSB2YWx1ZXMgdGhhdCBhcmUgcGVyc2lzdGVkIGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIEJhc2VcbiAgICAgKiBtdXRhdGlvbnMgYXJlIG5ldmVyIHNlbnQgdG8gdGhlIGJhY2tlbmQuXG4gICAgICogQHBhcmFtIG11dGF0aW9ucyAtIFRoZSB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucyBpbiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIFVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGFyZSBhcHBsaWVkIGJvdGggbG9jYWxseSBhbmQgcmVtb3RlbHkgb24gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IGUsIHRoaXMubG9jYWxXcml0ZVRpbWUgPSB0LCB0aGlzLmJhc2VNdXRhdGlvbnMgPSBuLCB0aGlzLm11dGF0aW9ucyA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpcyBNdXRhdGlvbkJhdGNoIHRvIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnRcbiAgICAgKiB0byBjb21wdXRlIHRoZSBzdGF0ZSBvZiB0aGUgcmVtb3RlIGRvY3VtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSBiYXRjaFJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIE11dGF0aW9uQmF0Y2ggdG8gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi8gICAgYXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQubXV0YXRpb25SZXN1bHRzO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMubXV0YXRpb25zLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5tdXRhdGlvbnNbdF07XG4gICAgICAgICAgICBpZiAoci5rZXkuaXNFcXVhbChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQociwgZSwgblt0XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudCBnaXZlbiBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzXG4gICAgICogYmF0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSBtdXRhdGVkRmllbGRzIC0gRmllbGRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgYmVmb3JlIGFwcGx5aW5nIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogQHJldHVybnMgQSBgRmllbGRNYXNrYCByZXByZXNlbnRpbmcgYWxsIHRoZSBmaWVsZHMgdGhhdCBhcmUgbXV0YXRlZC5cbiAgICAgKi8gICAgYXBwbHlUb0xvY2FsVmlldyhlLCB0KSB7XG4gICAgICAgIC8vIEZpcnN0LCBhcHBseSB0aGUgYmFzZSBzdGF0ZS4gVGhpcyBhbGxvd3MgdXMgdG8gYXBwbHkgbm9uLWlkZW1wb3RlbnRcbiAgICAgICAgLy8gdHJhbnNmb3JtIGFnYWluc3QgYSBjb25zaXN0ZW50IHNldCBvZiB2YWx1ZXMuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0aGlzLmJhc2VNdXRhdGlvbnMpIG4ua2V5LmlzRXF1YWwoZS5rZXkpICYmICh0ID0gX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhuLCBlLCB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lKSk7XG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0aGlzLm11dGF0aW9ucykgbi5rZXkuaXNFcXVhbChlLmtleSkgJiYgKHQgPSBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KG4sIGUsIHQsIHRoaXMubG9jYWxXcml0ZVRpbWUpKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cbiAgICAgKiB0aGlzIGJhdGNoLiBSZXR1cm5zIGEgYERvY3VtZW50S2V5YCB0byBgTXV0YXRpb25gIG1hcCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHJlcGxhY2UgYWxsIHRoZSBtdXRhdGlvbiBhcHBsaWNhdGlvbnMuXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KGUsIHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIE8obl4yKS4gSWYgd2UgYXBwbHkgdGhlIG11dGF0aW9uc1xuICAgICAgICAvLyBkaXJlY3RseSAoYXMgZG9uZSBpbiBgYXBwbHlUb0xvY2FsVmlldygpYCksIHdlIGNhbiByZWR1Y2UgdGhlIGNvbXBsZXhpdHlcbiAgICAgICAgLy8gdG8gTyhuKS5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdNdXRhdGlvbk1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgociA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5nZXQoci5rZXkpLCBzID0gaS5vdmVybGF5ZWREb2N1bWVudDtcbiAgICAgICAgICAgIC8vIFRPRE8obXV0YWJsZWRvY3VtZW50cyk6IFRoaXMgbWV0aG9kIHNob3VsZCB0YWtlIGEgTXV0YWJsZURvY3VtZW50TWFwXG4gICAgICAgICAgICAvLyBhbmQgd2Ugc2hvdWxkIHJlbW92ZSB0aGlzIGNhc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IHRoaXMuYXBwbHlUb0xvY2FsVmlldyhzLCBpLm11dGF0ZWRGaWVsZHMpO1xuICAgICAgICAgICAgLy8gU2V0IG11dGF0ZWRGaWVsZHMgdG8gbnVsbCBpZiB0aGUgZG9jdW1lbnQgaXMgb25seSBmcm9tIGxvY2FsIG11dGF0aW9ucy5cbiAgICAgICAgICAgIC8vIFRoaXMgY3JlYXRlcyBhIFNldCBvciBEZWxldGUgbXV0YXRpb24sIGluc3RlYWQgb2YgdHJ5aW5nIHRvIGNyZWF0ZSBhXG4gICAgICAgICAgICAvLyBwYXRjaCBtdXRhdGlvbiBhcyB0aGUgb3ZlcmxheS5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0LmhhcyhyLmtleSkgPyBudWxsIDogbztcbiAgICAgICAgICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfY2FsY3VsYXRlT3ZlcmxheU11dGF0aW9uKHMsIG8pO1xuICAgICAgICAgICAgbnVsbCAhPT0gXyAmJiBuLnNldChyLmtleSwgXyksIHMuaXNWYWxpZERvY3VtZW50KCkgfHwgcy5jb252ZXJ0VG9Ob0RvY3VtZW50KFNuYXBzaG90VmVyc2lvbi5taW4oKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZSgoKGUsIHQpID0+IGUuYWRkKHQua2V5KSksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoSWQgPT09IGUuYmF0Y2hJZCAmJiBfX1BSSVZBVEVfYXJyYXlFcXVhbHModGhpcy5tdXRhdGlvbnMsIGUubXV0YXRpb25zLCAoKGUsIHQpID0+IF9fUFJJVkFURV9tdXRhdGlvbkVxdWFscyhlLCB0KSkpICYmIF9fUFJJVkFURV9hcnJheUVxdWFscyh0aGlzLmJhc2VNdXRhdGlvbnMsIGUuYmFzZU11dGF0aW9ucywgKChlLCB0KSA9PiBfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMoZSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgbXV0YXRpb24gYmF0Y2ggdG8gdGhlIGJhY2tlbmQuICovIGNsYXNzIE11dGF0aW9uQmF0Y2hSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIFxuICAgIC8qKlxuICAgICAqIEEgcHJlLWNvbXB1dGVkIG1hcHBpbmcgZnJvbSBlYWNoIG11dGF0ZWQgZG9jdW1lbnQgdG8gdGhlIHJlc3VsdGluZ1xuICAgICAqIHZlcnNpb24uXG4gICAgICovXG4gICAgcikge1xuICAgICAgICB0aGlzLmJhdGNoID0gZSwgdGhpcy5jb21taXRWZXJzaW9uID0gdCwgdGhpcy5tdXRhdGlvblJlc3VsdHMgPSBuLCB0aGlzLmRvY1ZlcnNpb25zID0gcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNdXRhdGlvbkJhdGNoUmVzdWx0IGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHJlc3VsdHMuIFRoZXJlXG4gICAgICogbXVzdCBiZSBvbmUgcmVzdWx0IGZvciBlYWNoIG11dGF0aW9uIGluIHRoZSBiYXRjaC4gVGhpcyBzdGF0aWMgZmFjdG9yeVxuICAgICAqIGNhY2hlcyBhIGRvY3VtZW50PSZndDt2ZXJzaW9uIG1hcHBpbmcgKGRvY1ZlcnNpb25zKS5cbiAgICAgKi8gICAgc3RhdGljIGZyb20oZSwgdCwgbikge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChlLm11dGF0aW9ucy5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICAgICAgbGV0IHIgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRWZXJzaW9uTWFwKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlO1xuICAgICAgICB9KCk7XG4gICAgICAgIGNvbnN0IGkgPSBlLm11dGF0aW9ucztcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBpLmxlbmd0aDsgZSsrKSByID0gci5pbnNlcnQoaVtlXS5rZXksIG5bZV0udmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdChlLCB0LCBuLCByKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGFuIG92ZXJsYXkgY29tcHV0ZWQgYnkgRmlyZXN0b3JlLlxuICpcbiAqIEhvbGRzIGluZm9ybWF0aW9uIGFib3V0IGEgbXV0YXRpb24gYW5kIHRoZSBsYXJnZXN0IGJhdGNoIGlkIGluIEZpcmVzdG9yZSB3aGVuXG4gKiB0aGUgbXV0YXRpb24gd2FzIGNyZWF0ZWQuXG4gKi8gY2xhc3MgT3ZlcmxheSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmxhcmdlc3RCYXRjaElkID0gZSwgdGhpcy5tdXRhdGlvbiA9IHQ7XG4gICAgfVxuICAgIGdldEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb24ua2V5O1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgdGhpcy5tdXRhdGlvbiA9PT0gZS5tdXRhdGlvbjtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgT3ZlcmxheXtcXG4gICAgICBsYXJnZXN0QmF0Y2hJZDogJHt0aGlzLmxhcmdlc3RCYXRjaElkfSxcXG4gICAgICBtdXRhdGlvbjogJHt0aGlzLm11dGF0aW9uLnRvU3RyaW5nKCl9XFxuICAgIH1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29uY3JldGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIEFnZ3JlZ2F0ZSB0eXBlLlxuICovIGNsYXNzIF9fUFJJVkFURV9BZ2dyZWdhdGVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBlLCB0aGlzLkVlID0gdCwgdGhpcy5maWVsZFBhdGggPSBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRXhpc3RlbmNlRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY291bnQgPSBlLCB0aGlzLnVuY2hhbmdlZE5hbWVzID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICpcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBvciBjaGFuZ2UgdGhpcyBpbnRvIGEgY29uc3QgZW51bS5cbiAqLyB2YXIgYWUsIHVlO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoKTtcblxuICAgICAgY2FzZSBELkNBTkNFTExFRDpcbiAgICAgIGNhc2UgRC5VTktOT1dOOlxuICAgICAgY2FzZSBELkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgY2FzZSBELlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgIGNhc2UgRC5JTlRFUk5BTDpcbiAgICAgIGNhc2UgRC5VTkFWQUlMQUJMRTpcbiAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMgd2hpY2ggd2lsbCBoYXBwZW4gYXV0b21hdGljYWxseS5cbiAgICAgICAgICAgICAgY2FzZSBELlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBjYXNlIEQuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgIGNhc2UgRC5OT1RfRk9VTkQ6XG4gICAgICBjYXNlIEQuQUxSRUFEWV9FWElTVFM6XG4gICAgICBjYXNlIEQuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICBjYXNlIEQuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAvLyBBYm9ydGVkIG1pZ2h0IGJlIHJldHJpZWQgaW4gc29tZSBzY2VuYXJpb3MsIGJ1dCB0aGF0IGlzIGRlcGVuZGFudCBvblxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxuICAgICAgICAgICAgICBjYXNlIEQuQUJPUlRFRDpcbiAgICAgIGNhc2UgRC5PVVRfT0ZfUkFOR0U6XG4gICAgICBjYXNlIEQuVU5JTVBMRU1FTlRFRDpcbiAgICAgIGNhc2UgRC5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIHdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBXcml0ZSBvcGVyYXRpb25zIG11c3QgYmUgaGFuZGxlZCBzcGVjaWFsbHkgYmVjYXVzZSBhcyBvZiBiLzExOTQzNzc2NCwgQUJPUlRFRFxuICogZXJyb3JzIG9uIHRoZSB3cml0ZSBzdHJlYW0gc2hvdWxkIGJlIHJldHJpZWQgdG9vIChldmVuIHRob3VnaCBBQk9SVEVEIGVycm9yc1xuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cbiAqXG4gKiBOb3RlIHRoYXQgZHVyaW5nIHRoZSBpbml0aWFsIGhhbmRzaGFrZSBvbiB0aGUgd3JpdGUgc3RyZWFtIGFuIEFCT1JURUQgZXJyb3JcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcbiAqIG1lYW5zIGEgaGFuZHNoYWtlIGVycm9yIHNob3VsZCBiZSBjbGFzc2lmaWVkIHdpdGggaXNQZXJtYW5lbnRFcnJvciwgYWJvdmUuXG4gKi9cbi8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXG4gKiBhcmUgbm90IHRoZSBzYW1lIGFzIEhUVFAgc3RhdHVzIGNvZGVzLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXG4gKiAgICAgaXMgbm8gbWF0Y2guXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9tYXBDb2RlRnJvbVJwY0NvZGUoZSkge1xuICAgIGlmICh2b2lkIDAgPT09IGUpIFxuICAgIC8vIFRoaXMgc2hvdWxkbid0IG5vcm1hbGx5IGhhcHBlbiwgYnV0IGluIGNlcnRhaW4gZXJyb3IgY2FzZXMgKGxpa2UgdHJ5aW5nXG4gICAgLy8gdG8gc2VuZCBpbnZhbGlkIHByb3RvIG1lc3NhZ2VzKSB3ZSBtYXkgZ2V0IGFuIGVycm9yIHdpdGggbm8gR1JQQyBjb2RlLlxuICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJHUlBDIGVycm9yIGhhcyBubyAuY29kZVwiKSwgRC5VTktOT1dOO1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSBhZS5PSzpcbiAgICAgICAgcmV0dXJuIEQuT0s7XG5cbiAgICAgIGNhc2UgYWUuQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gRC5DQU5DRUxMRUQ7XG5cbiAgICAgIGNhc2UgYWUuVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIEQuVU5LTk9XTjtcblxuICAgICAgY2FzZSBhZS5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgcmV0dXJuIEQuREVBRExJTkVfRVhDRUVERUQ7XG5cbiAgICAgIGNhc2UgYWUuUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgICByZXR1cm4gRC5SRVNPVVJDRV9FWEhBVVNURUQ7XG5cbiAgICAgIGNhc2UgYWUuSU5URVJOQUw6XG4gICAgICAgIHJldHVybiBELklOVEVSTkFMO1xuXG4gICAgICBjYXNlIGFlLlVOQVZBSUxBQkxFOlxuICAgICAgICByZXR1cm4gRC5VTkFWQUlMQUJMRTtcblxuICAgICAgY2FzZSBhZS5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiBELlVOQVVUSEVOVElDQVRFRDtcblxuICAgICAgY2FzZSBhZS5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgICByZXR1cm4gRC5JTlZBTElEX0FSR1VNRU5UO1xuXG4gICAgICBjYXNlIGFlLk5PVF9GT1VORDpcbiAgICAgICAgcmV0dXJuIEQuTk9UX0ZPVU5EO1xuXG4gICAgICBjYXNlIGFlLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgICByZXR1cm4gRC5BTFJFQURZX0VYSVNUUztcblxuICAgICAgY2FzZSBhZS5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgcmV0dXJuIEQuUEVSTUlTU0lPTl9ERU5JRUQ7XG5cbiAgICAgIGNhc2UgYWUuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAgICAgICAgcmV0dXJuIEQuRkFJTEVEX1BSRUNPTkRJVElPTjtcblxuICAgICAgY2FzZSBhZS5BQk9SVEVEOlxuICAgICAgICByZXR1cm4gRC5BQk9SVEVEO1xuXG4gICAgICBjYXNlIGFlLk9VVF9PRl9SQU5HRTpcbiAgICAgICAgcmV0dXJuIEQuT1VUX09GX1JBTkdFO1xuXG4gICAgICBjYXNlIGFlLlVOSU1QTEVNRU5URUQ6XG4gICAgICAgIHJldHVybiBELlVOSU1QTEVNRU5URUQ7XG5cbiAgICAgIGNhc2UgYWUuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gRC5EQVRBX0xPU1M7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKHVlID0gYWUgfHwgKGFlID0ge30pKVt1ZS5PSyA9IDBdID0gXCJPS1wiLCB1ZVt1ZS5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxudWVbdWUuVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIHVlW3VlLklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbnVlW3VlLkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIHVlW3VlLk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG51ZVt1ZS5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCB1ZVt1ZS5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbnVlW3VlLlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIHVlW3VlLlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG51ZVt1ZS5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgdWVbdWUuQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbnVlW3VlLk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIHVlW3VlLlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG51ZVt1ZS5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgdWVbdWUuVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIHVlW3VlLkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBnbG9iYWwsIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBUZXN0aW5nSG9va3NTcGkuXG4gKlxuICogVGhpcyB2YXJpYWJsZSB3aWxsIGJlIGBudWxsYCBpbiBhbGwgY2FzZXMgX2V4Y2VwdF8gd2hlbiBydW5uaW5nIGZyb21cbiAqIGludGVncmF0aW9uIHRlc3RzIHRoYXQgaGF2ZSByZWdpc3RlcmVkIGNhbGxiYWNrcyB0byBiZSBub3RpZmllZCBvZiBldmVudHNcbiAqIHRoYXQgaGFwcGVuIGR1cmluZyB0aGUgdGVzdCBleGVjdXRpb24uXG4gKi9cbmxldCBjZSA9IG51bGw7XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIGB0ZXN0aW5nSG9va3NTcGlgIG9iamVjdC5cbiAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgaW5zdGFuY2UgdG8gc2V0LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGV4dEVuY29kZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RW5jb2Rlcjtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dERlY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgbGUgPSBuZXcgSW50ZWdlcihbIDQyOTQ5NjcyOTUsIDQyOTQ5NjcyOTUgXSwgMCk7XG5cbi8vIEhhc2ggYSBzdHJpbmcgdXNpbmcgbWQ1IGhhc2hpbmcgYWxnb3JpdGhtLlxuZnVuY3Rpb24gX19QUklWQVRFX2dldE1kNUhhc2hWYWx1ZShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdUZXh0RW5jb2RlcigpLmVuY29kZShlKSwgbiA9IG5ldyBNZDU7XG4gICAgcmV0dXJuIG4udXBkYXRlKHQpLCBuZXcgVWludDhBcnJheShuLmRpZ2VzdCgpKTtcbn1cblxuLy8gSW50ZXJwcmV0IHRoZSAxNiBieXRlcyBhcnJheSBhcyB0d28gNjQtYml0IHVuc2lnbmVkIGludGVnZXJzLCBlbmNvZGVkIHVzaW5nXG4vLyAy4oCZcyBjb21wbGVtZW50IHVzaW5nIGxpdHRsZSBlbmRpYW4uXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyhlKSB7XG4gICAgY29uc3QgdCA9IG5ldyBEYXRhVmlldyhlLmJ1ZmZlciksIG4gPSB0LmdldFVpbnQzMigwLCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgciA9IHQuZ2V0VWludDMyKDQsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCBpID0gdC5nZXRVaW50MzIoOCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHMgPSB0LmdldFVpbnQzMigxMiwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCk7XG4gICAgcmV0dXJuIFsgbmV3IEludGVnZXIoWyBuLCByIF0sIDApLCBuZXcgSW50ZWdlcihbIGksIHMgXSwgMCkgXTtcbn1cblxuY2xhc3MgQmxvb21GaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKHRoaXMuYml0bWFwID0gZSwgdGhpcy5wYWRkaW5nID0gdCwgdGhpcy5oYXNoQ291bnQgPSBuLCB0IDwgMCB8fCB0ID49IDgpIHRocm93IG5ldyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvcihgSW52YWxpZCBwYWRkaW5nOiAke3R9YCk7XG4gICAgICAgIGlmIChuIDwgMCkgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKGUubGVuZ3RoID4gMCAmJiAwID09PSB0aGlzLmhhc2hDb3VudCkgXG4gICAgICAgIC8vIE9ubHkgZW1wdHkgYmxvb20gZmlsdGVyIGNhbiBoYXZlIDAgaGFzaCBjb3VudC5cbiAgICAgICAgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoICYmIDAgIT09IHQpIFxuICAgICAgICAvLyBFbXB0eSBibG9vbSBmaWx0ZXIgc2hvdWxkIGhhdmUgMCBwYWRkaW5nLlxuICAgICAgICB0aHJvdyBuZXcgX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IoYEludmFsaWQgcGFkZGluZyB3aGVuIGJpdG1hcCBsZW5ndGggaXMgMDogJHt0fWApO1xuICAgICAgICB0aGlzLkFlID0gOCAqIGUubGVuZ3RoIC0gdCwgXG4gICAgICAgIC8vIFNldCB0aGUgYml0IGNvdW50IGluIEludGVnZXIgdG8gYXZvaWQgcmVwZXRpdGlvbiBpbiBtaWdodENvbnRhaW4oKS5cbiAgICAgICAgdGhpcy5SZSA9IEludGVnZXIuZnJvbU51bWJlcih0aGlzLkFlKTtcbiAgICB9XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBpdGggaGFzaCB2YWx1ZSBiYXNlZCBvbiB0aGUgaGFzaGVkIDY0Yml0IGludGVnZXJzLFxuICAgIC8vIGFuZCBjYWxjdWxhdGUgaXRzIGNvcnJlc3BvbmRpbmcgYml0IGluZGV4IGluIHRoZSBiaXRtYXAgdG8gYmUgY2hlY2tlZC5cbiAgICBWZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBoYXNoZWQgdmFsdWUgaChpKSA9IGgxICsgKGkgKiBoMikuXG4gICAgICAgIGxldCByID0gZS5hZGQodC5tdWx0aXBseShJbnRlZ2VyLmZyb21OdW1iZXIobikpKTtcbiAgICAgICAgLy8gV3JhcCBpZiBoYXNoIHZhbHVlIG92ZXJmbG93IDY0Yml0LlxuICAgICAgICAgICAgICAgIHJldHVybiAxID09PSByLmNvbXBhcmUobGUpICYmIChyID0gbmV3IEludGVnZXIoWyByLmdldEJpdHMoMCksIHIuZ2V0Qml0cygxKSBdLCAwKSksIFxuICAgICAgICByLm1vZHVsbyh0aGlzLlJlKS50b051bWJlcigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gd2hldGhlciB0aGUgYml0IG9uIHRoZSBnaXZlbiBpbmRleCBpbiB0aGUgYml0bWFwIGlzIHNldCB0byAxLlxuICAgIG1lKGUpIHtcbiAgICAgICAgcmV0dXJuIDAgIT0gKHRoaXMuYml0bWFwW01hdGguZmxvb3IoZSAvIDgpXSAmIDEgPDwgZSAlIDgpO1xuICAgIH1cbiAgICBtaWdodENvbnRhaW4oZSkge1xuICAgICAgICAvLyBFbXB0eSBiaXRtYXAgc2hvdWxkIGFsd2F5cyByZXR1cm4gZmFsc2Ugb24gbWVtYmVyc2hpcCBjaGVjay5cbiAgICAgICAgaWYgKDAgPT09IHRoaXMuQWUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSksIFtuLCByXSA9IF9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzKHQpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMuaGFzaENvdW50OyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlZlKG4sIHIsIGUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1lKHQpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlIGJsb29tIGZpbHRlciBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LiAqLyAgICBzdGF0aWMgY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IGUgJSA4ID09IDAgPyAwIDogOCAtIGUgJSA4LCBpID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5jZWlsKGUgLyA4KSksIHMgPSBuZXcgQmxvb21GaWx0ZXIoaSwgciwgdCk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4gcy5pbnNlcnQoZSkpKSwgcztcbiAgICB9XG4gICAgaW5zZXJ0KGUpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuQWUpIHJldHVybjtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSksIFtuLCByXSA9IF9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzKHQpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMuaGFzaENvdW50OyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlZlKG4sIHIsIGUpO1xuICAgICAgICAgICAgdGhpcy5mZSh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBNYXRoLmZsb29yKGUgLyA4KSwgbiA9IGUgJSA4O1xuICAgICAgICB0aGlzLmJpdG1hcFt0XSB8PSAxIDw8IG47XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKSwgdGhpcy5uYW1lID0gXCJCbG9vbUZpbHRlckVycm9yXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBldmVudCBmcm9tIHRoZSBSZW1vdGVTdG9yZS4gSXQgaXMgc3BsaXQgaW50byB0YXJnZXRDaGFuZ2VzIChjaGFuZ2VzIHRvIHRoZVxuICogc3RhdGUgb3IgdGhlIHNldCBvZiBkb2N1bWVudHMgaW4gb3VyIHdhdGNoZWQgdGFyZ2V0cykgYW5kIGRvY3VtZW50VXBkYXRlc1xuICogKGNoYW5nZXMgdG8gdGhlIGFjdHVhbCBkb2N1bWVudHMpLlxuICovIGNsYXNzIFJlbW90ZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgc25hcHNob3QgdmVyc2lvbiB0aGlzIGV2ZW50IGJyaW5ncyB1cyB1cCB0bywgb3IgTUlOIGlmIG5vdCBzZXQuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBtYXAgZnJvbSB0YXJnZXQgdG8gY2hhbmdlcyB0byB0aGUgdGFyZ2V0LiBTZWUgVGFyZ2V0Q2hhbmdlLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHRhcmdldHMgdGhhdCBpcyBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQsIGFuZCB0aGUgcHVycG9zZSBmb3JcbiAgICAgKiByZS1saXN0ZW5pbmcuIExpc3RlbnMgZm9yIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHJlLWVzdGFibGlzaGVkIHdpdGhvdXRcbiAgICAgKiByZXN1bWUgdG9rZW5zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50cyBoYXZlIGNoYW5nZWQgb3IgYmVlbiBkZWxldGVkLCBhbG9uZyB3aXRoIHRoZVxuICAgICAqIGRvYydzIG5ldyB2YWx1ZXMgKGlmIG5vdCBkZWxldGVkKS5cbiAgICAgKi9cbiAgICByLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudCB1cGRhdGVzIGFyZSBkdWUgb25seSB0byBsaW1ibyByZXNvbHV0aW9uIHRhcmdldHMuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGUsIHRoaXMudGFyZ2V0Q2hhbmdlcyA9IHQsIHRoaXMudGFyZ2V0TWlzbWF0Y2hlcyA9IG4sIHRoaXMuZG9jdW1lbnRVcGRhdGVzID0gciwgXG4gICAgICAgIHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhBQ0s6IFZpZXdzIHJlcXVpcmUgUmVtb3RlRXZlbnRzIGluIG9yZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzXG4gICAgICogQ1VSUkVOVCwgYnV0IHNlY29uZGFyeSB0YWJzIGRvbid0IHJlY2VpdmUgcmVtb3RlIGV2ZW50cy4gU28gdGhpcyBtZXRob2QgaXNcbiAgICAgKiB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXBwbHkgYVxuICAgICAqIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcsIGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50IHRhYi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiByLnNldChlLCBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKGUsIHQsIG4pKSwgXG4gICAgICAgIG5ldyBSZW1vdGVFdmVudChTbmFwc2hvdFZlcnNpb24ubWluKCksIHIsIG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcbiAqIG1hcmtlZCBDVVJSRU5ULlxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cbiAqLyBjbGFzcyBUYXJnZXRDaGFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHIsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IGUsIHRoaXMuY3VycmVudCA9IHQsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gciwgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0Q2hhbmdlKG4sIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYW5nZWQgZG9jdW1lbnQgYW5kIGEgbGlzdCBvZiB0YXJnZXQgaWRzIHRvIHdoaWNoIHRoaXMgY2hhbmdlXG4gKiBhcHBsaWVzLlxuICpcbiAqIElmIGRvY3VtZW50IGhhcyBiZWVuIGRlbGV0ZWQgTm9Eb2N1bWVudCB3aWxsIGJlIHByb3ZpZGVkLlxuICovIGNsYXNzIF9fUFJJVkFURV9Eb2N1bWVudFdhdGNoQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgY2hhbmdlLiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCB3ZW50IG91dCBvZiB2aWV3IHdpdGhvdXQgdGhlIHNlcnZlciBzZW5kaW5nIGEgbmV3IGRvY3VtZW50LlxuICAgICAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy5nZSA9IGUsIHRoaXMucmVtb3ZlZFRhcmdldElkcyA9IHQsIHRoaXMua2V5ID0gbiwgdGhpcy5wZSA9IHI7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnllID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9XYXRjaFRhcmdldENoYW5nZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFdoYXQga2luZCBvZiBjaGFuZ2Ugb2NjdXJyZWQgdG8gdGhlIHdhdGNoIHRhcmdldC4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHRhcmdldCBJRHMgdGhhdCB3ZXJlIGFkZGVkL3JlbW92ZWQvc2V0LiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgbiA9IEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovICwgciA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGUsIHRoaXMudGFyZ2V0SWRzID0gdCwgdGhpcy5yZXN1bWVUb2tlbiA9IG4sIHRoaXMuY2F1c2UgPSByO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovIGNsYXNzIF9fUFJJVkFURV9UYXJnZXRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIChhZGRzIG9yIHJlbW92ZXMpIHRoYXQgd2UgYXJlIHdhaXRpbmcgb24uXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53ZSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50IGNoYW5nZXMgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSBjaGFuZ2VzIGFyZSBjb250aW51b3VzbHkgdXBkYXRlZCBhcyB3ZSByZWNlaXZlIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICAgICAqIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzIGFnYWluc3QgdGhlIGxhc3QgaXNzdWVkIHNuYXBzaG90LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5TZSA9IF9fUFJJVkFURV9zbmFwc2hvdENoYW5nZXNNYXAoKSwgXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXG4gICAgICAgIHRoaXMuYmUgPSBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HLCB0aGlzLkRlID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5DZSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5EZTtcbiAgICB9XG4gICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi8gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iZTtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovICAgIGdldCB2ZSgpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMud2U7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi8gICAgZ2V0IEZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5DZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICBNZShlKSB7XG4gICAgICAgIGUuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodGhpcy5DZSA9ICEwLCB0aGlzLmJlID0gZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAgeGUoKSB7XG4gICAgICAgIGxldCBlID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHQgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5TZS5mb3JFYWNoKCgociwgaSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIHQgPSB0LmFkZChyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmYWlsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgbmV3IFRhcmdldENoYW5nZSh0aGlzLmJlLCB0aGlzLkRlLCBlLCB0LCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFuZCBzZXRzIGBoYXNQZW5kaW5nQ2hhbmdlc2AgdG8gZmFsc2UuXG4gICAgICovICAgIE9lKCkge1xuICAgICAgICB0aGlzLkNlID0gITEsIHRoaXMuU2UgPSBfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwKCk7XG4gICAgfVxuICAgIE5lKGUsIHQpIHtcbiAgICAgICAgdGhpcy5DZSA9ICEwLCB0aGlzLlNlID0gdGhpcy5TZS5pbnNlcnQoZSwgdCk7XG4gICAgfVxuICAgIEJlKGUpIHtcbiAgICAgICAgdGhpcy5DZSA9ICEwLCB0aGlzLlNlID0gdGhpcy5TZS5yZW1vdmUoZSk7XG4gICAgfVxuICAgIExlKCkge1xuICAgICAgICB0aGlzLndlICs9IDE7XG4gICAgfVxuICAgIGtlKCkge1xuICAgICAgICB0aGlzLndlIC09IDE7XG4gICAgfVxuICAgIHFlKCkge1xuICAgICAgICB0aGlzLkNlID0gITAsIHRoaXMuRGUgPSAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBoZWxwZXIgY2xhc3MgdG8gYWNjdW11bGF0ZSB3YXRjaCBjaGFuZ2VzIGludG8gYSBSZW1vdGVFdmVudC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1dhdGNoQ2hhbmdlQWdncmVnYXRvciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLlFlID0gZSwgXG4gICAgICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2YgYWxsIHRyYWNrZWQgdGFyZ2V0cy4gKi9cbiAgICAgICAgdGhpcy5LZSA9IG5ldyBNYXAsIFxuICAgICAgICAvKiogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50cyB0byB1cGRhdGUgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LiAqL1xuICAgICAgICB0aGlzLiRlID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBcbiAgICAgICAgLyoqIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXlzIHRvIHRoZWlyIHNldCBvZiB0YXJnZXQgSURzLiAqL1xuICAgICAgICB0aGlzLlVlID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwKCksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXAgb2YgdGFyZ2V0cyB3aXRoIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy4gVGhlc2UgdGFyZ2V0cyBhcmVcbiAgICAgICAgICoga25vd24gdG8gYmUgaW5jb25zaXN0ZW50IGFuZCB0aGVpciBsaXN0ZW5zIG5lZWRzIHRvIGJlIHJlLWVzdGFibGlzaGVkIGJ5XG4gICAgICAgICAqIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5XZSA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICovICAgIEdlKGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZ2UpIGUucGUgJiYgZS5wZS5pc0ZvdW5kRG9jdW1lbnQoKSA/IHRoaXMuemUodCwgZS5wZSkgOiB0aGlzLmplKHQsIGUua2V5LCBlLnBlKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUucmVtb3ZlZFRhcmdldElkcykgdGhpcy5qZSh0LCBlLmtleSwgZS5wZSk7XG4gICAgfVxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqLyAgICBIZShlKSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldChlLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5KZSh0KTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5ZZSh0KSAmJiBuLk1lKGUucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4ua2UoKSwgbi52ZSB8fCBcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZnJlc2hseSBhZGRlZCB0YXJnZXQsIHNvIHdlIG5lZWQgdG8gcmVzZXQgYW55IHN0YXRlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBoYWQgcHJldmlvdXNseS4gVGhpcyBjYW4gaGFwcGVuIGUuZy4gd2hlbiByZW1vdmUgYW5kIGFkZFxuICAgICAgICAgICAgICAgIC8vIGJhY2sgYSB0YXJnZXQgZm9yIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICBuLk9lKCksIG4uTWUoZS5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHJlbW92ZWQgdGFyZ2V0cyB0byB3ZSBjYW4gcG9zdC1maWx0ZXIgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSB0YXJnZXQgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4ua2UoKSwgbi52ZSB8fCB0aGlzLnJlbW92ZVRhcmdldCh0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLlllKHQpICYmIChuLnFlKCksIG4uTWUoZS5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLlllKHQpICYmIChcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cbiAgICAgICAgICAgICAgICB0aGlzLlplKHQpLCBuLk1lKGUucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGZhaWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGFsbCB0YXJnZXRJZHMgdGhhdCB0aGUgd2F0Y2ggY2hhbmdlIGFwcGxpZXMgdG86IGVpdGhlciB0aGVcbiAgICAgKiB0YXJnZXRJZHMgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGNoYW5nZSBvciB0aGUgdGFyZ2V0SWRzIG9mIGFsbCBjdXJyZW50bHlcbiAgICAgKiBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIGUudGFyZ2V0SWRzLmxlbmd0aCA+IDAgPyBlLnRhcmdldElkcy5mb3JFYWNoKHQpIDogdGhpcy5LZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5ZZShuKSAmJiB0KG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZXhpc3RlbmNlIGZpbHRlcnMgYW5kIHN5bnRoZXNpemVzIGRlbGV0ZXMgZm9yIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAqIFRhcmdldHMgdGhhdCBhcmUgaW52YWxpZGF0ZWQgYnkgZmlsdGVyIG1pc21hdGNoZXMgYXJlIGFkZGVkIHRvXG4gICAgICogYHBlbmRpbmdUYXJnZXRSZXNldHNgLlxuICAgICAqLyAgICBYZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLnRhcmdldElkLCBuID0gZS55ZS5jb3VudCwgciA9IHRoaXMuZXQodCk7XG4gICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gci50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQoaSkpIGlmICgwID09PSBuKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGV4aXN0ZW5jZSBmaWx0ZXIgdG9sZCB1cyB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QuIFdlIGRlZHVjZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhpcyBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCBhbmQgYXBwbHkgYSBkZWxldGVkIGRvY3VtZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gb3VyIHVwZGF0ZXMuIFdpdGhvdXQgYXBwbHlpbmcgdGhpcyBkZWxldGVkIGRvY3VtZW50IHRoZXJlIG1pZ2h0IGJlXG4gICAgICAgICAgICAgICAgLy8gYW5vdGhlciBxdWVyeSB0aGF0IHdpbGwgcmFpc2UgdGhpcyBkb2N1bWVudCBhcyBwYXJ0IG9mIGEgc25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyB1bnRpbCBpdCBpcyByZXNvbHZlZCwgZXNzZW50aWFsbHkgZXhwb3NpbmcgaW5jb25zaXN0ZW5jeSBiZXR3ZWVuXG4gICAgICAgICAgICAgICAgLy8gcXVlcmllcy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IERvY3VtZW50S2V5KGkucGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5qZSh0LCBlLCBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChlLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpKTtcbiAgICAgICAgICAgIH0gZWxzZSBfX1BSSVZBVEVfaGFyZEFzc2VydCgxID09PSBuKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMudHQodCk7XG4gICAgICAgICAgICAgICAgLy8gRXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC4gTWFyayB0aGUgZG9jdW1lbnRzIGFzIGJlaW5nIGluIGxpbWJvLCBhbmRcbiAgICAgICAgICAgICAgICAvLyByYWlzZSBhIHNuYXBzaG90IHdpdGggYGlzRnJvbUNhY2hlOnRydWVgLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociAhPT0gbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSBibG9vbSBmaWx0ZXIgdG8gaWRlbnRpZnkgYW5kIG1hcmsgcmVtb3ZlZCBkb2N1bWVudHMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLm50KGUpLCBpID0gbiA/IHRoaXMucnQobiwgZSwgcikgOiAxIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLztcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovICE9PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBibG9vbSBmaWx0ZXIgYXBwbGljYXRpb24gZmFpbHMsIHdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlciByZS1ydW4gb2YgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5aZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLyA9PT0gaSA/IFwiVGFyZ2V0UHVycG9zZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb21cIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb20gKi8gOiBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi87XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLldlID0gdGhpcy5XZS5pbnNlcnQodCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSBjZSB8fCBjZS5pdChmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hJbmZvRm9yVGVzdGluZ0hvb2tzKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzLCBvLCBfLCBhLCB1LCBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbENhY2hlQ291bnQ6IGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RlbmNlRmlsdGVyQ291bnQ6IHQuY291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VJZDogbi5kYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SWQ6IG4ucHJvamVjdElkXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBoID0gdC51bmNoYW5nZWROYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGggJiYgKGwuYmxvb21GaWx0ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGllZDogMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi8gPT09IGksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaENvdW50OiBudWxsICE9PSAocyA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguaGFzaENvdW50KSAmJiB2b2lkIDAgIT09IHMgPyBzIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRtYXBMZW5ndGg6IG51bGwgIT09IChhID0gbnVsbCA9PT0gKF8gPSBudWxsID09PSAobyA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguYml0cykgfHwgdm9pZCAwID09PSBvID8gdm9pZCAwIDogby5iaXRtYXApIHx8IHZvaWQgMCA9PT0gXyA/IHZvaWQgMCA6IF8ubGVuZ3RoKSAmJiB2b2lkIDAgIT09IGEgPyBhIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBudWxsICE9PSAoYyA9IG51bGwgPT09ICh1ID0gbnVsbCA9PSBoID8gdm9pZCAwIDogaC5iaXRzKSB8fCB2b2lkIDAgPT09IHUgPyB2b2lkIDAgOiB1LnBhZGRpbmcpICYmIHZvaWQgMCAhPT0gYyA/IGMgOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZ2h0Q29udGFpbjogZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gKHQgPSBudWxsID09IHIgPyB2b2lkIDAgOiByLm1pZ2h0Q29udGFpbihlKSkgJiYgdm9pZCAwICE9PSB0ICYmIHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAociwgZS55ZSwgdGhpcy5RZS5zdCgpLCBuLCBpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlIHRoZSBibG9vbSBmaWx0ZXIgZnJvbSB0aGUgXCJ1bmNoYW5nZWRfbmFtZXNcIiBmaWVsZCBvZiBhbiBleGlzdGVuY2VcbiAgICAgKiBmaWx0ZXIuXG4gICAgICovICAgIG50KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUueWUudW5jaGFuZ2VkTmFtZXM7XG4gICAgICAgIGlmICghdCB8fCAhdC5iaXRzKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3Qge2JpdHM6IHtiaXRtYXA6IG4gPSBcIlwiLCBwYWRkaW5nOiByID0gMH0sIGhhc2hDb3VudDogaSA9IDB9ID0gdDtcbiAgICAgICAgbGV0IHMsIG87XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzID0gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcobikudG9VaW50OEFycmF5KCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yKSByZXR1cm4gX19QUklWQVRFX2xvZ1dhcm4oXCJEZWNvZGluZyB0aGUgYmFzZTY0IGJsb29tIGZpbHRlciBpbiBleGlzdGVuY2UgZmlsdGVyIGZhaWxlZCAoXCIgKyBlLm1lc3NhZ2UgKyBcIik7IGlnbm9yaW5nIHRoZSBibG9vbSBmaWx0ZXIgYW5kIGZhbGxpbmcgYmFjayB0byBmdWxsIHJlLXF1ZXJ5LlwiKSwgXG4gICAgICAgICAgICBudWxsO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQmxvb21GaWx0ZXIgdGhyb3dzIGVycm9yIGlmIHRoZSBpbnB1dHMgYXJlIGludmFsaWQuXG4gICAgICAgICAgICBvID0gbmV3IEJsb29tRmlsdGVyKHMsIHIsIGkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ1dhcm4oZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yID8gXCJCbG9vbUZpbHRlciBlcnJvcjogXCIgOiBcIkFwcGx5aW5nIGJsb29tIGZpbHRlciBmYWlsZWQ6IFwiLCBlKSwgXG4gICAgICAgICAgICBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwID09PSBvLkFlID8gbnVsbCA6IG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGx5IGJsb29tIGZpbHRlciB0byByZW1vdmUgdGhlIGRlbGV0ZWQgZG9jdW1lbnRzLCBhbmQgcmV0dXJuIHRoZVxuICAgICAqIGFwcGxpY2F0aW9uIHN0YXR1cy5cbiAgICAgKi8gICAgcnQoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdC55ZS5jb3VudCA9PT0gbiAtIHRoaXMub3QoZSwgdC50YXJnZXRJZCkgPyAwIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU3VjY2VzcyAqLyA6IDIgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5GYWxzZVBvc2l0aXZlICovO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgb3V0IHJlbW92ZWQgZG9jdW1lbnRzIGJhc2VkIG9uIGJsb29tIGZpbHRlciBtZW1iZXJzaGlwIHJlc3VsdCBhbmRcbiAgICAgKiByZXR1cm4gbnVtYmVyIG9mIGRvY3VtZW50cyByZW1vdmVkLlxuICAgICAqLyAgICBvdChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLlFlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCk7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5RZS5zdCgpLCBzID0gYHByb2plY3RzLyR7aS5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke2kuZGF0YWJhc2V9L2RvY3VtZW50cy8ke24ucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gO1xuICAgICAgICAgICAgZS5taWdodENvbnRhaW4ocykgfHwgKHRoaXMuamUodCwgbiwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCksIHIrKyk7XG4gICAgICAgIH0pKSwgcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBzdGF0ZSBpbnRvIGEgcmVtb3RlIGV2ZW50IGF0IHRoZVxuICAgICAqIHByb3ZpZGVkIHNuYXBzaG90IHZlcnNpb24uIFJlc2V0cyB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAqLyAgICBfdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLktlLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5ldChyKTtcbiAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4uY3VycmVudCAmJiBfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldChpLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgcXVlcmllcyBmb3IgZG9jdW1lbnQgdGhhdCBkb24ndCBleGlzdCBjYW4gcHJvZHVjZSBhbiBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgc2V0LiBUbyB1cGRhdGUgb3VyIGxvY2FsIGNhY2hlLCB3ZSBzeW50aGVzaXplIGEgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGlmIHdlIGhhdmUgbm90IHByZXZpb3VzbHkgcmVjZWl2ZWQgdGhlIGRvY3VtZW50LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBsaW1ibyBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIHJlbW92aW5nIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gbGltYm9Eb2N1bWVudFJlZnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWRlYWxseSB3ZSB3b3VsZCBoYXZlIGFuIGV4cGxpY2l0IGxvb2t1cCB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCByZXN1bHRpbmcgaW4gYW4gZXhwbGljaXQgZGVsZXRlIG1lc3NhZ2UgYW5kIHdlIGNvdWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGlzIHNwZWNpYWwgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgRG9jdW1lbnRLZXkoaS50YXJnZXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHRoaXMuJGUuZ2V0KHQpIHx8IHRoaXMudXQociwgdCkgfHwgdGhpcy5qZShyLCB0LCBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudCh0LCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG4uRmUgJiYgKHQuc2V0KHIsIG4ueGUoKSksIG4uT2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xuICAgICAgICAvLyBjbGllbnQuXG4gICAgICAgICAgICAgICAgdGhpcy5VZS5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHIgPSAhMDtcbiAgICAgICAgICAgIHQuZm9yRWFjaFdoaWxlKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5ldChlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXQgfHwgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gPT09IHQucHVycG9zZSB8fCAociA9ICExLCBcbiAgICAgICAgICAgICAgICAhMSk7XG4gICAgICAgICAgICB9KSksIHIgJiYgKG4gPSBuLmFkZChlKSk7XG4gICAgICAgIH0pKSwgdGhpcy4kZS5mb3JFYWNoKCgodCwgbikgPT4gbi5zZXRSZWFkVGltZShlKSkpO1xuICAgICAgICBjb25zdCByID0gbmV3IFJlbW90ZUV2ZW50KGUsIHQsIHRoaXMuV2UsIHRoaXMuJGUsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy4kZSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgdGhpcy5VZSA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCgpLCBcbiAgICAgICAgdGhpcy5XZSA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICB6ZShlLCB0KSB7XG4gICAgICAgIGlmICghdGhpcy5ZZShlKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gdGhpcy51dChlLCB0LmtleSkgPyAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi87XG4gICAgICAgIHRoaXMuSmUoZSkuTmUodC5rZXksIG4pLCB0aGlzLiRlID0gdGhpcy4kZS5pbnNlcnQodC5rZXksIHQpLCB0aGlzLlVlID0gdGhpcy5VZS5pbnNlcnQodC5rZXksIHRoaXMuY3QodC5rZXkpLmFkZChlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGplKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLlllKGUpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLkplKGUpO1xuICAgICAgICB0aGlzLnV0KGUsIHQpID8gci5OZSh0LCAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICByLkJlKHQpLCB0aGlzLlVlID0gdGhpcy5VZS5pbnNlcnQodCwgdGhpcy5jdCh0KS5kZWxldGUoZSkpLCBuICYmICh0aGlzLiRlID0gdGhpcy4kZS5pbnNlcnQodCwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLktlLmRlbGV0ZShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgdHQoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5KZShlKS54ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5RZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUpLnNpemUgKyB0LmFkZGVkRG9jdW1lbnRzLnNpemUgLSB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaCBiZWZvcmUgd2UgY2FuIGNvbnNpZGVyIHRoZVxuICAgICAqIHNlcnZlciB0byBiZSAnaW4tc3luYycgd2l0aCB0aGUgY2xpZW50J3MgYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIExlKGUpIHtcbiAgICAgICAgdGhpcy5KZShlKS5MZSgpO1xuICAgIH1cbiAgICBKZShlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5LZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IF9fUFJJVkFURV9UYXJnZXRTdGF0ZSwgdGhpcy5LZS5zZXQoZSwgdCkpLCB0O1xuICAgIH1cbiAgICBjdChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5VZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIHRoaXMuVWUgPSB0aGlzLlVlLmluc2VydChlLCB0KSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICBZZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBudWxsICE9PSB0aGlzLmV0KGUpO1xuICAgICAgICByZXR1cm4gdCB8fCBfX1BSSVZBVEVfbG9nRGVidWcoXCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3JcIiwgXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIiwgZSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICBldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLktlLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHQgJiYgdC52ZSA/IG51bGwgOiB0aGlzLlFlLmx0KGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0IHRvIGl0cyBpbml0aWFsIHN0YXRlIChlLmcuIHNldHNcbiAgICAgKiAnY3VycmVudCcgdG8gZmFsc2UsIGNsZWFycyB0aGUgcmVzdW1lIHRva2VuIGFuZCByZW1vdmVzIGl0cyB0YXJnZXQgbWFwcGluZ1xuICAgICAqIGZyb20gYWxsIGRvY3VtZW50cykuXG4gICAgICovICAgIFplKGUpIHtcbiAgICAgICAgdGhpcy5LZS5zZXQoZSwgbmV3IF9fUFJJVkFURV9UYXJnZXRTdGF0ZSk7XG4gICAgICAgIHRoaXMuUWUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuamUoZSwgdCwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICB1dChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSkuaGFzKHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwKCkge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwKCkge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xufVxuXG5jb25zdCBoZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgZSA9IHtcbiAgICAgICAgYXNjOiBcIkFTQ0VORElOR1wiLFxuICAgICAgICBkZXNjOiBcIkRFU0NFTkRJTkdcIlxuICAgIH07XG4gICAgcmV0dXJuIGU7XG59KSgpLCBQZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgZSA9IHtcbiAgICAgICAgXCI8XCI6IFwiTEVTU19USEFOXCIsXG4gICAgICAgIFwiPD1cIjogXCJMRVNTX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI+XCI6IFwiR1JFQVRFUl9USEFOXCIsXG4gICAgICAgIFwiPj1cIjogXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI9PVwiOiBcIkVRVUFMXCIsXG4gICAgICAgIFwiIT1cIjogXCJOT1RfRVFVQUxcIixcbiAgICAgICAgXCJhcnJheS1jb250YWluc1wiOiBcIkFSUkFZX0NPTlRBSU5TXCIsXG4gICAgICAgIGluOiBcIklOXCIsXG4gICAgICAgIFwibm90LWluXCI6IFwiTk9UX0lOXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnMtYW55XCI6IFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCJcbiAgICB9O1xuICAgIHJldHVybiBlO1xufSkoKSwgSWUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIGFuZDogXCJBTkRcIixcbiAgICAgICAgb3I6IFwiT1JcIlxuICAgIH07XG4gICAgcmV0dXJuIGU7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgSnNvblByb3RvU2VyaWFsaXplciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLnVzZVByb3RvM0pzb24gPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIChvciBudWxsKSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG9cbiAqIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXG4gKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwibnVtYmVyXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxuICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBJbnQzMlZhbHVlIG11c3QgYmUuIEJ1dCBHUlBDIGFjdHVhbGx5XG4gKiBleHBlY3RzIGEgeyB2YWx1ZTogPG51bWJlcj4gfSBzdHJ1Y3QuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0ludDMyUHJvdG8oZSwgdCkge1xuICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gfHwgX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKHQpID8gdCA6IHtcbiAgICAgICAgdmFsdWU6IHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBudW1iZXIgKG9yIG51bGwpIGZyb20gYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqL1xuZnVuY3Rpb24gdG9UaW1lc3RhbXAoZSwgdCkge1xuICAgIGlmIChlLnVzZVByb3RvM0pzb24pIHtcbiAgICAgICAgcmV0dXJuIGAke25ldyBEYXRlKDFlMyAqIHQuc2Vjb25kcykudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLywgXCJcIikucmVwbGFjZShcIlpcIiwgXCJcIil9LiR7KFwiMDAwMDAwMDAwXCIgKyB0Lm5hbm9zZWNvbmRzKS5zbGljZSgtOSl9WmA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IFwiXCIgKyB0LnNlY29uZHMsXG4gICAgICAgIG5hbm9zOiB0Lm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGJ5dGVzIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW4gYSBwcm90by5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9CeXRlcyhlLCB0KSB7XG4gICAgcmV0dXJuIGUudXNlUHJvdG8zSnNvbiA/IHQudG9CYXNlNjQoKSA6IHQudG9VaW50OEFycmF5KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEJ5dGVTdHJpbmcgYmFzZWQgb24gdGhlIHByb3RvIHN0cmluZyB2YWx1ZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9WZXJzaW9uKGUsIHQpIHtcbiAgICByZXR1cm4gdG9UaW1lc3RhbXAoZSwgdC50b1RpbWVzdGFtcCgpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21WZXJzaW9uKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoISFlKSwgU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAoZnVuY3Rpb24gZnJvbVRpbWVzdGFtcChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpO1xuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcCh0LnNlY29uZHMsIHQubmFub3MpO1xuICAgIH0oZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZnVsbHlRdWFsaWZpZWRQcmVmaXhQYXRoKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoWyBcInByb2plY3RzXCIsIGUucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCBlLmRhdGFiYXNlIF0pO1xuICAgIH0oZSkuY2hpbGQoXCJkb2N1bWVudHNcIikuY2hpbGQodCkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUmVzb3VyY2VOYW1lKGUpIHtcbiAgICBjb25zdCB0ID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KF9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lKHQpKSwgdDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvTmFtZShlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV90b1Jlc291cmNlTmFtZShlLmRhdGFiYXNlSWQsIHQucGF0aCk7XG59XG5cbmZ1bmN0aW9uIGZyb21OYW1lKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Zyb21SZXNvdXJjZU5hbWUodCk7XG4gICAgaWYgKG4uZ2V0KDEpICE9PSBlLmRhdGFiYXNlSWQucHJvamVjdElkKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBwcm9qZWN0OiBcIiArIG4uZ2V0KDEpICsgXCIgdnMgXCIgKyBlLmRhdGFiYXNlSWQucHJvamVjdElkKTtcbiAgICBpZiAobi5nZXQoMykgIT09IGUuZGF0YWJhc2VJZC5kYXRhYmFzZSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2U6IFwiICsgbi5nZXQoMykgKyBcIiB2cyBcIiArIGUuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShfX1BSSVZBVEVfZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUobikpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9RdWVyeVBhdGgoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZS5kYXRhYmFzZUlkLCB0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21RdWVyeVBhdGgoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbVJlc291cmNlTmFtZShlKTtcbiAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXG4gICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcbiAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXG4gICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIDQgPT09IHQubGVuZ3RoID8gUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpIDogX19QUklWQVRFX2V4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQoZSkge1xuICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKFsgXCJwcm9qZWN0c1wiLCBlLmRhdGFiYXNlSWQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCBlLmRhdGFiYXNlSWQuZGF0YWJhc2UgXSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUubGVuZ3RoID4gNCAmJiBcImRvY3VtZW50c1wiID09PSBlLmdldCg0KSksIGUucG9wRmlyc3QoNSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgRG9jdW1lbnQgcHJvdG8gZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LCBuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogX19QUklWQVRFX3RvTmFtZShlLCB0KSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBmcm9tTmFtZShlLCB0Lm5hbWUpLCBpID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQudXBkYXRlVGltZSksIHMgPSB0LmNyZWF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5jcmVhdGVUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgbyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IHQuZmllbGRzXG4gICAgICAgIH1cbiAgICB9KSwgXyA9IE11dGFibGVEb2N1bWVudC5uZXdGb3VuZERvY3VtZW50KHIsIGksIHMsIG8pO1xuICAgIHJldHVybiBuICYmIF8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyBfLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogXztcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21CYXRjaEdldERvY3VtZW50c1Jlc3BvbnNlKGUsIHQpIHtcbiAgICByZXR1cm4gXCJmb3VuZFwiIGluIHQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZvdW5kKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoISF0LmZvdW5kKSwgdC5mb3VuZC5uYW1lLCB0LmZvdW5kLnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IG4gPSBmcm9tTmFtZShlLCB0LmZvdW5kLm5hbWUpLCByID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQuZm91bmQudXBkYXRlVGltZSksIGkgPSB0LmZvdW5kLmNyZWF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5mb3VuZC5jcmVhdGVUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgcyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogdC5mb3VuZC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBNdXRhYmxlRG9jdW1lbnQubmV3Rm91bmREb2N1bWVudChuLCByLCBpLCBzKTtcbiAgICB9KGUsIHQpIDogXCJtaXNzaW5nXCIgaW4gdCA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tTWlzc2luZyhlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhdC5taXNzaW5nKSwgX19QUklWQVRFX2hhcmRBc3NlcnQoISF0LnJlYWRUaW1lKTtcbiAgICAgICAgY29uc3QgbiA9IGZyb21OYW1lKGUsIHQubWlzc2luZyksIHIgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5yZWFkVGltZSk7XG4gICAgICAgIHJldHVybiBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChuLCByKTtcbiAgICB9KGUsIHQpIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdhdGNoQ2hhbmdlKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoXCJ0YXJnZXRDaGFuZ2VcIiBpbiB0KSB7XG4gICAgICAgIHQudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcbiAgICAgICAgLy8gaWYgdW5zZXRcbiAgICAgICAgY29uc3QgciA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZShlKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJOT19DSEFOR0VcIiA9PT0gZSA/IDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6IFwiQUREXCIgPT09IGUgPyAxIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSBlID8gMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOiBcIkNVUlJFTlRcIiA9PT0gZSA/IDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDogXCJSRVNFVFwiID09PSBlID8gNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDogZmFpbCgpO1xuICAgICAgICB9KHQudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSB0LnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUJ5dGVzKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gPyAoX19QUklWQVRFX2hhcmRBc3NlcnQodm9pZCAwID09PSB0IHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpLCBcbiAgICAgICAgICAgIEJ5dGVTdHJpbmcuZnJvbUJhc2U2NFN0cmluZyh0IHx8IFwiXCIpKSA6IChfX1BSSVZBVEVfaGFyZEFzc2VydCh2b2lkIDAgPT09IHQgfHwgdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpLCBcbiAgICAgICAgICAgIEJ5dGVTdHJpbmcuZnJvbVVpbnQ4QXJyYXkodCB8fCBuZXcgVWludDhBcnJheSkpO1xuICAgICAgICB9KGUsIHQudGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKSwgbyA9IHQudGFyZ2V0Q2hhbmdlLmNhdXNlLCBfID0gbyAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVJwY1N0YXR1cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdm9pZCAwID09PSBlLmNvZGUgPyBELlVOS05PV04gOiBfX1BSSVZBVEVfbWFwQ29kZUZyb21ScGNDb2RlKGUuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKHQsIGUubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgfShvKTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2UociwgaSwgcywgXyB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiB0KSB7XG4gICAgICAgIHQuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHIgPSB0LmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICByLmRvY3VtZW50LCByLmRvY3VtZW50Lm5hbWUsIHIuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9IGZyb21OYW1lKGUsIHIuZG9jdW1lbnQubmFtZSksIHMgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5kb2N1bWVudC51cGRhdGVUaW1lKSwgbyA9IHIuZG9jdW1lbnQuY3JlYXRlVGltZSA/IF9fUFJJVkFURV9mcm9tVmVyc2lvbihyLmRvY3VtZW50LmNyZWF0ZVRpbWUpIDogU25hcHNob3RWZXJzaW9uLm1pbigpLCBfID0gbmV3IE9iamVjdFZhbHVlKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiByLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgYSA9IE11dGFibGVEb2N1bWVudC5uZXdGb3VuZERvY3VtZW50KGksIHMsIG8sIF8pLCB1ID0gci50YXJnZXRJZHMgfHwgW10sIGMgPSByLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UodSwgYywgYS5rZXksIGEpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudERlbGV0ZVwiIGluIHQpIHtcbiAgICAgICAgdC5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgY29uc3QgciA9IHQuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIHIuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50KSwgcyA9IHIucmVhZFRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5yZWFkVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG8gPSBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChpLCBzKSwgXyA9IHIucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgXywgby5rZXksIG8pO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudFJlbW92ZVwiIGluIHQpIHtcbiAgICAgICAgdC5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgY29uc3QgciA9IHQuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIHIuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50KSwgcyA9IHIucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgcywgaSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEoXCJmaWx0ZXJcIiBpbiB0KSkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAge1xuICAgICAgICAgICAgdC5maWx0ZXI7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5maWx0ZXI7XG4gICAgICAgICAgICBlLnRhcmdldElkO1xuICAgICAgICAgICAgY29uc3Qge2NvdW50OiByID0gMCwgdW5jaGFuZ2VkTmFtZXM6IGl9ID0gZSwgcyA9IG5ldyBFeGlzdGVuY2VGaWx0ZXIociwgaSksIG8gPSBlLnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKG8sIHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiB0b011dGF0aW9uKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAodCBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXRNdXRhdGlvbikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBfX1BSSVZBVEVfdG9NdXRhdGlvbkRvY3VtZW50KGUsIHQua2V5LCB0LnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIGRlbGV0ZTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSlcbiAgICB9OyBlbHNlIGlmICh0IGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LmtleSwgdC5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogX19QUklWQVRFX3RvRG9jdW1lbnRNYXNrKHQuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKSkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgbiA9IHtcbiAgICAgICAgICAgIHZlcmlmeTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHQuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IHQuZmllbGRUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWVsZFRyYW5zZm9ybShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogXCJSRVFVRVNUX1RJTUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24pIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4uVGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH0oMCwgZSkpKSksIHQucHJlY29uZGl0aW9uLmlzTm9uZSB8fCAobi5jdXJyZW50RG9jdW1lbnQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9QcmVjb25kaXRpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBfX1BSSVZBVEVfdG9WZXJzaW9uKGUsIHQudXBkYXRlVGltZSlcbiAgICAgICAgfSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyB7XG4gICAgICAgICAgICBleGlzdHM6IHQuZXhpc3RzXG4gICAgICAgIH0gOiBmYWlsKCk7XG4gICAgfShlLCB0LnByZWNvbmRpdGlvbikpLCBuO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5jdXJyZW50RG9jdW1lbnQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVByZWNvbmRpdGlvbihlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUudXBkYXRlVGltZSA/IFByZWNvbmRpdGlvbi51cGRhdGVUaW1lKF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gZS5leGlzdHMgPyBQcmVjb25kaXRpb24uZXhpc3RzKGUuZXhpc3RzKSA6IFByZWNvbmRpdGlvbi5ub25lKCk7XG4gICAgfSh0LmN1cnJlbnREb2N1bWVudCkgOiBQcmVjb25kaXRpb24ubm9uZSgpLCByID0gdC51cGRhdGVUcmFuc2Zvcm1zID8gdC51cGRhdGVUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkVHJhbnNmb3JtKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICBpZiAoXCJzZXRUb1NlcnZlclZhbHVlXCIgaW4gdCkgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJSRVFVRVNUX1RJTUVcIiA9PT0gdC5zZXRUb1NlcnZlclZhbHVlKSwgXG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybTsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlKTtcbiAgICAgICAgfSBlbHNlIFwiaW5jcmVtZW50XCIgaW4gdCA/IG4gPSBuZXcgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdC5pbmNyZW1lbnQpIDogZmFpbCgpO1xuICAgICAgICBjb25zdCByID0gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdCh0LmZpZWxkUGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0ociwgbik7XG4gICAgfShlLCB0KSkpIDogW107XG4gICAgaWYgKHQudXBkYXRlKSB7XG4gICAgICAgIHQudXBkYXRlLm5hbWU7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCB0LnVwZGF0ZS5uYW1lKSwgcyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogdC51cGRhdGUuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodC51cGRhdGVNYXNrKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Eb2N1bWVudE1hc2soZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpZWxkUGF0aHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2sodC5tYXAoKGUgPT4gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdChlKSkpKTtcbiAgICAgICAgICAgIH0odC51cGRhdGVNYXNrKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oaSwgcywgZSwgbiwgcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2V0TXV0YXRpb24oaSwgcywgbiwgcik7XG4gICAgfVxuICAgIGlmICh0LmRlbGV0ZSkge1xuICAgICAgICBjb25zdCByID0gZnJvbU5hbWUoZSwgdC5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihyLCBuKTtcbiAgICB9XG4gICAgaWYgKHQudmVyaWZ5KSB7XG4gICAgICAgIGNvbnN0IHIgPSBmcm9tTmFtZShlLCB0LnZlcmlmeSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKHIsIG4pO1xuICAgIH1cbiAgICByZXR1cm4gZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdyaXRlUmVzdWx0cyhlLCB0KSB7XG4gICAgcmV0dXJuIGUgJiYgZS5sZW5ndGggPiAwID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHZvaWQgMCAhPT0gdCksIGUubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHQoZSwgdCkge1xuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cbiAgICAgICAgbGV0IG4gPSBlLnVwZGF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS51cGRhdGVUaW1lKSA6IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0KTtcbiAgICAgICAgcmV0dXJuIG4uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpICYmIChcbiAgICAgICAgLy8gVGhlIEZpcmVzdG9yZSBFbXVsYXRvciBjdXJyZW50bHkgcmV0dXJucyBhbiB1cGRhdGUgdGltZSBvZiAwIGZvclxuICAgICAgICAvLyBkZWxldGVzIG9mIG5vbi1leGlzdGluZyBkb2N1bWVudHMgKHJhdGhlciB0aGFuIG51bGwpLiBUaGlzIGJyZWFrcyB0aGVcbiAgICAgICAgLy8gdGVzdCBcImdldCBkZWxldGVkIGRvYyB3aGlsZSBvZmZsaW5lIHdpdGggc291cmNlPWNhY2hlXCIgYXMgTm9Eb2N1bWVudHNcbiAgICAgICAgLy8gd2l0aCB2ZXJzaW9uIDAgYXJlIGZpbHRlcmVkIGJ5IEluZGV4ZWREYidzIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gICAgICAgIC8vIFRPRE8oIzIxNDkpOiBSZW1vdmUgdGhpcyB3aGVuIEVtdWxhdG9yIGlzIGZpeGVkXG4gICAgICAgIG4gPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odCkpLCBuZXcgTXV0YXRpb25SZXN1bHQobiwgZS50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KGUsIHQpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RvY3VtZW50c1RhcmdldChlLCB0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiBbIF9fUFJJVkFURV90b1F1ZXJ5UGF0aChlLCB0LnBhdGgpIF1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9RdWVyeVRhcmdldChlLCB0KSB7XG4gICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cbiAgICBjb25zdCBuID0ge1xuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHt9XG4gICAgfSwgciA9IHQucGF0aDtcbiAgICBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IChuLnBhcmVudCA9IF9fUFJJVkFURV90b1F1ZXJ5UGF0aChlLCByKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHQuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gX19QUklWQVRFX3RvUXVlcnlQYXRoKGUsIHIucG9wTGFzdCgpKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHIubGFzdFNlZ21lbnQoKVxuICAgIH0gXSk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0ZpbHRlcnMoZSkge1xuICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90b0ZpbHRlcihDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGUsIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKSk7XG4gICAgfSh0LmZpbHRlcnMpO1xuICAgIGkgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LndoZXJlID0gaSk7XG4gICAgY29uc3QgcyA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b09yZGVyKGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiBlLm1hcCgoZSA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Qcm9wZXJ0eU9yZGVyKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IF9fUFJJVkFURV90b0RpcmVjdGlvbihlLmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpKTtcbiAgICB9KHQub3JkZXJCeSk7XG4gICAgcyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHMpO1xuICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQubGltaXQpO1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCB0LnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9TdGFydEF0Q3Vyc29yKGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogZS5pbmNsdXNpdmUsXG4gICAgICAgICAgICB2YWx1ZXM6IGUucG9zaXRpb25cbiAgICAgICAgfTtcbiAgICB9KHQuc3RhcnRBdCkpLCB0LmVuZEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5lbmRBdCA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0VuZEF0Q3Vyc29yKGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogIWUuaW5jbHVzaXZlLFxuICAgICAgICAgICAgdmFsdWVzOiBlLnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfSh0LmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0UXVlcnlUYXJnZXRUb1F1ZXJ5KGUpIHtcbiAgICBsZXQgdCA9IF9fUFJJVkFURV9mcm9tUXVlcnlQYXRoKGUucGFyZW50KTtcbiAgICBjb25zdCBuID0gZS5zdHJ1Y3R1cmVkUXVlcnksIHIgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHIgPiAwKSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IHIpO1xuICAgICAgICBjb25zdCBlID0gbi5mcm9tWzBdO1xuICAgICAgICBlLmFsbERlc2NlbmRhbnRzID8gaSA9IGUuY29sbGVjdGlvbklkIDogdCA9IHQuY2hpbGQoZS5jb2xsZWN0aW9uSWQpO1xuICAgIH1cbiAgICBsZXQgcyA9IFtdO1xuICAgIG4ud2hlcmUgJiYgKHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpbHRlcnMoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21GaWx0ZXIoZSk7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbih0KSkgcmV0dXJuIHQuZ2V0RmlsdGVycygpO1xuICAgICAgICByZXR1cm4gWyB0IF07XG4gICAgfShuLndoZXJlKSk7XG4gICAgbGV0IG8gPSBbXTtcbiAgICBuLm9yZGVyQnkgJiYgKG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU9yZGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIGUubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUHJvcGVydHlPcmRlcihlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9yZGVyQnkoX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksIFxuICAgICAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EaXJlY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICAgICAoZS5kaXJlY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIChlKSkpO1xuICAgIH0obi5vcmRlckJ5KSk7XG4gICAgbGV0IF8gPSBudWxsO1xuICAgIG4ubGltaXQgJiYgKF8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUludDMyUHJvdG8oZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgcmV0dXJuIHQgPSBcIm9iamVjdFwiID09IHR5cGVvZiBlID8gZS52YWx1ZSA6IGUsIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0KSA/IG51bGwgOiB0O1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVN0YXJ0QXRDdXJzb3IoZSkge1xuICAgICAgICBjb25zdCB0ID0gISFlLmJlZm9yZSwgbiA9IGUudmFsdWVzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG4sIHQpO1xuICAgIH0obi5zdGFydEF0KSk7XG4gICAgbGV0IHUgPSBudWxsO1xuICAgIHJldHVybiBuLmVuZEF0ICYmICh1ID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21FbmRBdEN1cnNvcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAhZS5iZWZvcmUsIG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChuLCB0KTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIChuLmVuZEF0KSksIF9fUFJJVkFURV9uZXdRdWVyeSh0LCBpLCBvLCBzLCBfLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gLCBhLCB1KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvTGlzdGVuUmVxdWVzdExhYmVscyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0xhYmVsKGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbVwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoLWJsb29tXCI7XG5cbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUxpbWJvUmVzb2x1dGlvblwiIC8qIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImxpbWJvLWRvY3VtZW50XCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgfVxuICAgIH0odC5wdXJwb3NlKTtcbiAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHtcbiAgICAgICAgXCJnb29nLWxpc3Rlbi10YWdzXCI6IG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpbHRlcihlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51bmFyeUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tVW5hcnlGaWx0ZXIoZSkge1xuICAgICAgICBzd2l0Y2ggKGUudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKHQsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKG4sIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OT1RfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKHIsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUoaSwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICB9XG4gICAgfShlKSA6IHZvaWQgMCAhPT0gZS5maWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRmllbGRGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKF9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGRGaWx0ZXIuZmllbGQpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU9wZXJhdG9yTmFtZShlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkVRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTk9UX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJJTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIk5PVF9JTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShlLmZpZWxkRmlsdGVyLm9wKSwgZS5maWVsZEZpbHRlci52YWx1ZSk7XG4gICAgfShlKSA6IHZvaWQgMCAhPT0gZS5jb21wb3NpdGVGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUNvbXBvc2l0ZUZpbHRlcihlKSB7XG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGUuY29tcG9zaXRlRmlsdGVyLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9mcm9tRmlsdGVyKGUpKSksIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQ29tcG9zaXRlT3BlcmF0b3JOYW1lKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiQU5EXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJPUlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KGUuY29tcG9zaXRlRmlsdGVyLm9wKSk7XG4gICAgfShlKSA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRGlyZWN0aW9uKGUpIHtcbiAgICByZXR1cm4gaGVbZV07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b09wZXJhdG9yTmFtZShlKSB7XG4gICAgcmV0dXJuIFBlW2VdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9Db21wb3NpdGVPcGVyYXRvck5hbWUoZSkge1xuICAgIHJldHVybiBJZVtlXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IGUuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlKSB7XG4gICAgcmV0dXJuIEZpZWxkUGF0aCQxLmZyb21TZXJ2ZXJGb3JtYXQoZS5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWx0ZXIoZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9VbmFyeU9yRmllbGRGaWx0ZXIoZSkge1xuICAgICAgICBpZiAoXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovID09PSBlLm9wKSB7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzTmFuVmFsdWUoZS52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc051bGxWYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IGUub3ApIHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNOYW5WYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc051bGxWYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTlVMTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgIG9wOiBfX1BSSVZBVEVfdG9PcGVyYXRvck5hbWUoZS5vcCksXG4gICAgICAgICAgICAgICAgdmFsdWU6IGUudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUpIDogZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV90b0NvbXBvc2l0ZUZpbHRlcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmdldEZpbHRlcnMoKS5tYXAoKGUgPT4gX19QUklWQVRFX3RvRmlsdGVyKGUpKSk7XG4gICAgICAgIGlmICgxID09PSB0Lmxlbmd0aCkgcmV0dXJuIHRbMF07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb21wb3NpdGVGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBvcDogX19QUklWQVRFX3RvQ29tcG9zaXRlT3BlcmF0b3JOYW1lKGUub3ApLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUpIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb2N1bWVudE1hc2soZSkge1xuICAgIGNvbnN0IHQgPSBbXTtcbiAgICByZXR1cm4gZS5maWVsZHMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZS5jYW5vbmljYWxTdHJpbmcoKSkpKSwge1xuICAgICAgICBmaWVsZFBhdGhzOiB0XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2lzVmFsaWRSZXNvdXJjZU5hbWUoZSkge1xuICAgIC8vIFJlc291cmNlIG5hbWVzIGhhdmUgYXQgbGVhc3QgNCBjb21wb25lbnRzIChwcm9qZWN0IElELCBkYXRhYmFzZSBJRClcbiAgICByZXR1cm4gZS5sZW5ndGggPj0gNCAmJiBcInByb2plY3RzXCIgPT09IGUuZ2V0KDApICYmIFwiZGF0YWJhc2VzXCIgPT09IGUuZ2V0KDIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXG4gKi8gY2xhc3MgVGFyZ2V0RGF0YSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gU25hcHNob3RWZXJzaW9uLm1pbigpXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cbiAgICAgKi8gLCBzID0gU25hcHNob3RWZXJzaW9uLm1pbigpXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi8gLCBvID0gQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgbGFzdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgcmVzdW1lIHRva2VuIG9yXG4gICAgICogcmVhZCB0aW1lLiBEb2N1bWVudHMgYXJlIGNvdW50ZWQgb25seSB3aGVuIG1ha2luZyBhIGxpc3RlbiByZXF1ZXN0IHdpdGhcbiAgICAgKiByZXN1bWUgdG9rZW4gb3IgcmVhZCB0aW1lLCBvdGhlcndpc2UsIGtlZXAgaXQgbnVsbC5cbiAgICAgKi8gLCBfID0gbnVsbCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IGUsIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnB1cnBvc2UgPSBuLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gciwgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBpLCBcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gcywgdGhpcy5yZXN1bWVUb2tlbiA9IG8sIHRoaXMuZXhwZWN0ZWRDb3VudCA9IF87XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovICAgIHdpdGhTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCBlLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuLCB0aGlzLmV4cGVjdGVkQ291bnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCByZXN1bWUgdG9rZW4gYW5kXG4gICAgICogc25hcHNob3QgdmVyc2lvbi5cbiAgICAgKi8gICAgd2l0aFJlc3VtZVRva2VuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIHQsIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgZSwgXG4gICAgICAgIC8qIGV4cGVjdGVkQ291bnQ9ICovIG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBleHBlY3RlZCBjb3VudC5cbiAgICAgKi8gICAgd2l0aEV4cGVjdGVkQ291bnQoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbiwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxuICAgICAqLyAgICB3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgZSwgdGhpcy5yZXN1bWVUb2tlbiwgdGhpcy5leHBlY3RlZENvdW50KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogU2VyaWFsaXplciBmb3IgdmFsdWVzIHN0b3JlZCBpbiB0aGUgTG9jYWxTdG9yZS4gKi8gY2xhc3MgX19QUklWQVRFX0xvY2FsU2VyaWFsaXplciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmh0ID0gZTtcbiAgICB9XG59XG5cbi8qKiBEZWNvZGVzIGEgcmVtb3RlIGRvY3VtZW50IGZyb20gc3RvcmFnZSBsb2NhbGx5IHRvIGEgRG9jdW1lbnQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJSZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgbGV0IG47XG4gICAgaWYgKHQuZG9jdW1lbnQpIG4gPSBfX1BSSVZBVEVfZnJvbURvY3VtZW50KGUuaHQsIHQuZG9jdW1lbnQsICEhdC5oYXNDb21taXR0ZWRNdXRhdGlvbnMpOyBlbHNlIGlmICh0Lm5vRG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgZSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyh0Lm5vRG9jdW1lbnQucGF0aCksIHIgPSBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKHQubm9Eb2N1bWVudC5yZWFkVGltZSk7XG4gICAgICAgIG4gPSBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChlLCByKSwgdC5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiYgbi5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXQudW5rbm93bkRvY3VtZW50KSByZXR1cm4gZmFpbCgpO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHQudW5rbm93bkRvY3VtZW50LnBhdGgpLCByID0gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcCh0LnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgICAgIG4gPSBNdXRhYmxlRG9jdW1lbnQubmV3VW5rbm93bkRvY3VtZW50KGUsIHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0LnJlYWRUaW1lICYmIG4uc2V0UmVhZFRpbWUoZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcEtleShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgVGltZXN0YW1wKGVbMF0sIGVbMV0pO1xuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodCk7XG4gICAgfSh0LnJlYWRUaW1lKSksIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJSZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQua2V5LCByID0ge1xuICAgICAgICBwcmVmaXhQYXRoOiBuLmdldENvbGxlY3Rpb25QYXRoKCkucG9wTGFzdCgpLnRvQXJyYXkoKSxcbiAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgZG9jdW1lbnRJZDogbi5wYXRoLmxhc3RTZWdtZW50KCksXG4gICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleSh0LnJlYWRUaW1lKSxcbiAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0Lmhhc0NvbW1pdHRlZE11dGF0aW9uc1xuICAgIH07XG4gICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIHIuZG9jdW1lbnQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBfX1BSSVZBVEVfdG9OYW1lKGUsIHQua2V5KSxcbiAgICAgICAgICAgIGZpZWxkczogdC5kYXRhLnZhbHVlLm1hcFZhbHVlLmZpZWxkcyxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHRvVGltZXN0YW1wKGUsIHQudmVyc2lvbi50b1RpbWVzdGFtcCgpKSxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IHRvVGltZXN0YW1wKGUsIHQuY3JlYXRlVGltZS50b1RpbWVzdGFtcCgpKVxuICAgICAgICB9O1xuICAgIH0oZS5odCwgdCk7IGVsc2UgaWYgKHQuaXNOb0RvY3VtZW50KCkpIHIubm9Eb2N1bWVudCA9IHtcbiAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHQudmVyc2lvbilcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0LmlzVW5rbm93bkRvY3VtZW50KCkpIHJldHVybiBmYWlsKCk7XG4gICAgICAgIHIudW5rbm93bkRvY3VtZW50ID0ge1xuICAgICAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHZlcnNpb246IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHQudmVyc2lvbilcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KGUpIHtcbiAgICBjb25zdCB0ID0gZS50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIHQuc2Vjb25kcywgdC5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcChlKSB7XG4gICAgY29uc3QgdCA9IGUudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiB0LnNlY29uZHMsXG4gICAgICAgIG5hbm9zZWNvbmRzOiB0Lm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlKSB7XG4gICAgY29uc3QgdCA9IG5ldyBUaW1lc3RhbXAoZS5zZWNvbmRzLCBlLm5hbm9zZWNvbmRzKTtcbiAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodCk7XG59XG5cbi8qKiBFbmNvZGVzIGEgYmF0Y2ggb2YgbXV0YXRpb25zIGludG8gYSBEYk11dGF0aW9uQmF0Y2ggZm9yIGxvY2FsIHN0b3JhZ2UuICovXG4vKiogRGVjb2RlcyBhIERiTXV0YXRpb25CYXRjaCBpbnRvIGEgTXV0YXRpb25CYXRjaCAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgIGNvbnN0IG4gPSAodC5iYXNlTXV0YXRpb25zIHx8IFtdKS5tYXAoKHQgPT4gX19QUklWQVRFX2Zyb21NdXRhdGlvbihlLmh0LCB0KSkpO1xuICAgIC8vIFNxdWFzaCBvbGQgdHJhbnNmb3JtIG11dGF0aW9ucyBpbnRvIGV4aXN0aW5nIHBhdGNoIG9yIHNldCBtdXRhdGlvbnMuXG4gICAgLy8gVGhlIHJlcGxhY2VtZW50IG9mIHJlcHJlc2VudGluZyBgdHJhbnNmb3Jtc2Agd2l0aCBgdXBkYXRlX3RyYW5zZm9ybXNgXG4gICAgLy8gb24gdGhlIFNESyBtZWFucyB0aGF0IG9sZCBgdHJhbnNmb3JtYCBtdXRhdGlvbnMgc3RvcmVkIGluIEluZGV4ZWREQiBuZWVkXG4gICAgLy8gdG8gYmUgdXBkYXRlZCB0byBgdXBkYXRlX3RyYW5zZm9ybXNgLlxuICAgIC8vIFRPRE8oYi8xNzQ2MDgzNzQpOiBSZW1vdmUgdGhpcyBjb2RlIG9uY2Ugd2UgcGVyZm9ybSBhIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5tdXRhdGlvbnMubGVuZ3RoIC0gMTsgKytlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm11dGF0aW9uc1tlXTtcbiAgICAgICAgaWYgKGUgKyAxIDwgdC5tdXRhdGlvbnMubGVuZ3RoICYmIHZvaWQgMCAhPT0gdC5tdXRhdGlvbnNbZSArIDFdLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgciA9IHQubXV0YXRpb25zW2UgKyAxXTtcbiAgICAgICAgICAgIG4udXBkYXRlVHJhbnNmb3JtcyA9IHIudHJhbnNmb3JtLmZpZWxkVHJhbnNmb3JtcywgdC5tdXRhdGlvbnMuc3BsaWNlKGUgKyAxLCAxKSwgXG4gICAgICAgICAgICArK2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgciA9IHQubXV0YXRpb25zLm1hcCgodCA9PiBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUuaHQsIHQpKSksIGkgPSBUaW1lc3RhbXAuZnJvbU1pbGxpcyh0LmxvY2FsV3JpdGVUaW1lTXMpO1xuICAgIHJldHVybiBuZXcgTXV0YXRpb25CYXRjaCh0LmJhdGNoSWQsIGksIG4sIHIpO1xufVxuXG4vKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLnJlYWRUaW1lKSwgbiA9IHZvaWQgMCAhPT0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID8gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIDogU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgIGxldCByO1xuICAgIHJldHVybiByID0gXG4gICAgLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZmlndXJpbmcgb3V0IHdoYXQga2luZCBvZiBxdWVyeSBoYXMgYmVlbiBzdG9yZWQuXG4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEb2N1bWVudFF1ZXJ5KGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZS5kb2N1bWVudHM7XG4gICAgfVxuICAgIC8qKiBFbmNvZGVzIGEgRGJCdW5kbGUgdG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovIChlLnF1ZXJ5KSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRG9jdW1lbnRzVGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IGUuZG9jdW1lbnRzLmxlbmd0aCksIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoX19QUklWQVRFX2Zyb21RdWVyeVBhdGgoZS5kb2N1bWVudHNbMF0pKSk7XG4gICAgfShlLnF1ZXJ5KSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoZSkpO1xuICAgIH0oZS5xdWVyeSksIG5ldyBUYXJnZXREYXRhKHIsIGUudGFyZ2V0SWQsIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovICwgZS5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIHQsIG4sIEJ5dGVTdHJpbmcuZnJvbUJhc2U2NFN0cmluZyhlLnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC5zbmFwc2hvdFZlcnNpb24pLCByID0gX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQodC50YXJnZXQpID8gX19QUklWQVRFX3RvRG9jdW1lbnRzVGFyZ2V0KGUuaHQsIHQudGFyZ2V0KSA6IF9fUFJJVkFURV90b1F1ZXJ5VGFyZ2V0KGUuaHQsIHQudGFyZ2V0KTtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgcyA9IHQucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFyZ2V0SWQ6IHQudGFyZ2V0SWQsXG4gICAgICAgIGNhbm9uaWNhbElkOiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQodC50YXJnZXQpLFxuICAgICAgICByZWFkVGltZTogbixcbiAgICAgICAgcmVzdW1lVG9rZW46IHMsXG4gICAgICAgIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogdC5zZXF1ZW5jZU51bWJlcixcbiAgICAgICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbjogcixcbiAgICAgICAgcXVlcnk6IGlcbiAgICB9O1xufVxuXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoe1xuICAgICAgICBwYXJlbnQ6IGUucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IGUuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSBlLmxpbWl0VHlwZSA/IF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCh0LCB0LmxpbWl0LCBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLykgOiB0O1xufVxuXG4vKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgcHJvdG8gb2JqZWN0IHRvIGEgTmFtZWRRdWVyeSBtb2RlbCBvYmplY3QuICovXG4vKiogRW5jb2RlcyBhIERiRG9jdW1lbnRPdmVybGF5IG9iamVjdCB0byBhbiBPdmVybGF5IG1vZGVsIG9iamVjdC4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkoZSwgdCkge1xuICAgIHJldHVybiBuZXcgT3ZlcmxheSh0Lmxhcmdlc3RCYXRjaElkLCBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUuaHQsIHQub3ZlcmxheU11dGF0aW9uKSk7XG59XG5cbi8qKiBEZWNvZGVzIGFuIE92ZXJsYXkgbW9kZWwgb2JqZWN0IGludG8gYSBEYkRvY3VtZW50T3ZlcmxheSBvYmplY3QuICovXG4vKipcbiAqIFJldHVybnMgdGhlIERiRG9jdW1lbnRPdmVybGF5S2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHVzZXIgYW5kXG4gKiBkb2N1bWVudCBrZXkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5S2V5KGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgcmV0dXJuIFsgZSwgX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgucG9wTGFzdCgpKSwgbiBdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EYkluZGV4U3RhdGUoZSwgdCwgbiwgcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4SWQ6IGUsXG4gICAgICAgIHVpZDogdC51aWQgfHwgXCJcIixcbiAgICAgICAgc2VxdWVuY2VOdW1iZXI6IG4sXG4gICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcChyLnJlYWRUaW1lKSxcbiAgICAgICAgZG9jdW1lbnRLZXk6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoci5kb2N1bWVudEtleS5wYXRoKSxcbiAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IHIubGFyZ2VzdEJhdGNoSWRcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiQnVuZGxlQ2FjaGUge1xuICAgIGdldEJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9idW5kbGVzU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKGUpIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiQnVuZGxlKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZDogZS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBCdW5kbGVNZXRhZGF0YSB0byBhIERiQnVuZGxlLiAqLyAoZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9idW5kbGVzU3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiQnVuZGxlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYnVuZGxlSWQ6IGUuaWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoX19QUklWQVRFX2Zyb21WZXJzaW9uKGUuY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvKiogRW5jb2RlcyBhIERiTmFtZWRRdWVyeSB0byBhIE5hbWVkUXVlcnkuICovICh0KSk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25hbWVkUXVlcmllc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYk5hbWVkUXVlcnkoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAoZS5yZWFkVGltZSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IGZyb20gYSBidW5kbGUgcHJvdG8gdG8gYSBEYk5hbWVkUXVlcnkuICovIChlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmFtZWRRdWVyaWVzU3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiTmFtZWRRdWVyeShlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoX19QUklWQVRFX2Zyb21WZXJzaW9uKGUucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IGUuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYnVuZGxlc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiYnVuZGxlc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25hbWVkUXVlcmllc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwibmFtZWRRdWVyaWVzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBEb2N1bWVudE92ZXJsYXlDYWNoZSB1c2luZyBJbmRleGVkRGIuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYkRvY3VtZW50T3ZlcmxheUNhY2hlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICAgICAqIEBwYXJhbSB1c2VySWQgLSBUaGUgdXNlcklkIGZvciB3aGljaCB3ZSBhcmUgYWNjZXNzaW5nIG92ZXJsYXlzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZSwgdGhpcy51c2VySWQgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgUHQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC51aWQgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiRG9jdW1lbnRPdmVybGF5Q2FjaGUoZSwgbik7XG4gICAgfVxuICAgIGdldE92ZXJsYXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLmdldChfX1BSSVZBVEVfdG9EYkRvY3VtZW50T3ZlcmxheUtleSh0aGlzLnVzZXJJZCwgdCkpLm5leHQoKGUgPT4gZSA/IF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkodGhpcy5zZXJpYWxpemVyLCBlKSA6IG51bGwpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHRoaXMuZ2V0T3ZlcmxheShlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIG51bGwgIT09IGUgJiYgbi5zZXQodCwgZSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgc2F2ZU92ZXJsYXlzKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBPdmVybGF5KHQsIGkpO1xuICAgICAgICAgICAgci5wdXNoKHRoaXMuSXQoZSwgcykpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpO1xuICAgIH1cbiAgICByZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IFNldDtcbiAgICAgICAgLy8gR2V0IHRoZSBzZXQgb2YgdW5pcXVlIGNvbGxlY3Rpb24gcGF0aHMuXG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKChlID0+IHIuYWRkKF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZS5nZXRDb2xsZWN0aW9uUGF0aCgpKSkpKTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCB0LCBuIF0sIFsgdGhpcy51c2VySWQsIHQsIG4gKyAxIF0sIFxuICAgICAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICAgICAgaS5wdXNoKF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKS5KKFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgcikpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSwgaSA9IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBpLCBuIF0sIFsgdGhpcy51c2VySWQsIGksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLkcoXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCBzKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgICAgICByLnNldChlLmdldEtleSgpLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICAvLyBXZSB3YW50IGJhdGNoIElEcyBsYXJnZXIgdGhhbiBgc2luY2VCYXRjaElkYCwgYW5kIHNvIHRoZSBsb3dlciBib3VuZFxuICAgICAgICAvLyBpcyBub3QgaW5jbHVzaXZlLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCB0LCBuIF0sIFsgdGhpcy51c2VySWQsIHQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogb1xuICAgICAgICB9LCAoKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIHJldHVybiBwYXJ0aWFsIGJhdGNoIG92ZXJsYXlzLCBldmVuIGlmIHRoZSBzaXplXG4gICAgICAgICAgICAvLyBvZiB0aGUgcmVzdWx0IHNldCBleGNlZWRzIHRoZSBnaXZlbiBgY291bnRgIGFyZ3VtZW50LiBUaGVyZWZvcmUsIHdlXG4gICAgICAgICAgICAvLyBjb250aW51ZSB0byBhZ2dyZWdhdGUgcmVzdWx0cyBldmVuIGFmdGVyIHRoZSByZXN1bHQgc2l6ZSBleGNlZWRzXG4gICAgICAgICAgICAvLyBgY291bnRgIGlmIHRoZXJlIGFyZSBtb3JlIG92ZXJsYXlzIGZyb20gdGhlIGBjdXJyZW50QmF0Y2hJZGAuXG4gICAgICAgICAgICBjb25zdCBvID0gX19QUklWQVRFX2Zyb21EYkRvY3VtZW50T3ZlcmxheSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICAgICAgaS5zaXplKCkgPCByIHx8IG8ubGFyZ2VzdEJhdGNoSWQgPT09IHMgPyAoaS5zZXQoby5nZXRLZXkoKSwgbyksIHMgPSBvLmxhcmdlc3RCYXRjaElkKSA6IG4uZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBJdChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5KGUsIHQsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IFtyLCBpLCBzXSA9IF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5S2V5KHQsIG4ubXV0YXRpb24ua2V5KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXNlcklkOiB0LFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25QYXRoOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IHMsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLm11dGF0aW9uLmtleS5nZXRDb2xsZWN0aW9uR3JvdXAoKSxcbiAgICAgICAgICAgICAgICBsYXJnZXN0QmF0Y2hJZDogbi5sYXJnZXN0QmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBvdmVybGF5TXV0YXRpb246IHRvTXV0YXRpb24oZS5odCwgbi5tdXRhdGlvbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCB0aGlzLnVzZXJJZCwgdCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IG92ZXJsYXkgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImRvY3VtZW50T3ZlcmxheXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBOb3RlOiBUaGlzIGNvZGUgaXMgY29waWVkIGZyb20gdGhlIGJhY2tlbmQuIENvZGUgdGhhdCBpcyBub3QgdXNlZCBieVxuLy8gRmlyZXN0b3JlIHdhcyByZW1vdmVkLlxuLyoqIEZpcmVzdG9yZSBpbmRleCB2YWx1ZSB3cml0ZXIuICAqL1xuY2xhc3MgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge31cbiAgICAvLyBUaGUgd3JpdGUgbWV0aG9kcyBiZWxvdyBzaG9ydC1jaXJjdWl0IHdyaXRpbmcgdGVybWluYXRvcnMgZm9yIHZhbHVlc1xuICAgIC8vIGNvbnRhaW5pbmcgYSAodGVybWluYXRpbmcpIHRydW5jYXRlZCB2YWx1ZS5cbiAgICAvLyBBcyBhbiBleGFtcGxlLCBjb25zaWRlciB0aGUgcmVzdWx0aW5nIGVuY29kaW5nIGZvcjpcbiAgICAvLyBbXCJiYXJcIiwgWzIsIFwiZm9vXCJdXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRFUk0sIFRFUk0sIFRFUk0pXG4gICAgLy8gW1wiYmFyXCIsIFsyLCB0cnVuY2F0ZWQoXCJmb29cIildXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRSVU5DKVxuICAgIC8vIFtcImJhclwiLCB0cnVuY2F0ZWQoW1wiZm9vXCJdKV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVkuIFNUUklORywgXCJmb29cIiwgVEVSTSwgVFJVTkMpXG4gICAgLyoqIFdyaXRlcyBhbiBpbmRleCB2YWx1ZS4gICovXG4gICAgZHQoZSwgdCkge1xuICAgICAgICB0aGlzLlR0KGUsIHQpLCBcbiAgICAgICAgLy8gV3JpdGUgc2VwYXJhdG9yIHRvIHNwbGl0IGluZGV4IHZhbHVlc1xuICAgICAgICAvLyAoc2VlIGdvL2ZpcmVzdG9yZS1zdG9yYWdlLWZvcm1hdCNlbmNvZGluZ3MpLlxuICAgICAgICB0LkV0KCk7XG4gICAgfVxuICAgIFR0KGUsIHQpIHtcbiAgICAgICAgaWYgKFwibnVsbFZhbHVlXCIgaW4gZSkgdGhpcy5BdCh0LCA1KTsgZWxzZSBpZiAoXCJib29sZWFuVmFsdWVcIiBpbiBlKSB0aGlzLkF0KHQsIDEwKSwgXG4gICAgICAgIHQuUnQoZS5ib29sZWFuVmFsdWUgPyAxIDogMCk7IGVsc2UgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gZSkgdGhpcy5BdCh0LCAxNSksIHQuUnQoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSkpOyBlbHNlIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICBpc05hTihuKSA/IHRoaXMuQXQodCwgMTMpIDogKHRoaXMuQXQodCwgMTUpLCBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8obikgPyBcbiAgICAgICAgICAgIC8vIC0wLjAsIDAgYW5kIDAuMCBhcmUgYWxsIGNvbnNpZGVyZWQgdGhlIHNhbWVcbiAgICAgICAgICAgIHQuUnQoMCkgOiB0LlJ0KG4pKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICB0aGlzLkF0KHQsIDIwKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiA/IHQuVnQobikgOiAodC5WdChgJHtuLnNlY29uZHMgfHwgXCJcIn1gKSwgdC5SdChuLm5hbm9zIHx8IDApKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInN0cmluZ1ZhbHVlXCIgaW4gZSkgdGhpcy5mdChlLnN0cmluZ1ZhbHVlLCB0KSwgdGhpcy5ndCh0KTsgZWxzZSBpZiAoXCJieXRlc1ZhbHVlXCIgaW4gZSkgdGhpcy5BdCh0LCAzMCksIFxuICAgICAgICB0Lnl0KF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUuYnl0ZXNWYWx1ZSkpLCB0aGlzLmd0KHQpOyBlbHNlIGlmIChcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSkgdGhpcy53dChlLnJlZmVyZW5jZVZhbHVlLCB0KTsgZWxzZSBpZiAoXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZ2VvUG9pbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuQXQodCwgNDUpLCB0LlJ0KG4ubGF0aXR1ZGUgfHwgMCksIHQuUnQobi5sb25naXR1ZGUgfHwgMCk7XG4gICAgICAgIH0gZWxzZSBcIm1hcFZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9pc01heFZhbHVlKGUpID8gdGhpcy5BdCh0LCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgOiAodGhpcy5TdChlLm1hcFZhbHVlLCB0KSwgXG4gICAgICAgIHRoaXMuZ3QodCkpIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/ICh0aGlzLmJ0KGUuYXJyYXlWYWx1ZSwgdCksIHRoaXMuZ3QodCkpIDogZmFpbCgpO1xuICAgIH1cbiAgICBmdChlLCB0KSB7XG4gICAgICAgIHRoaXMuQXQodCwgMjUpLCB0aGlzLkR0KGUsIHQpO1xuICAgIH1cbiAgICBEdChlLCB0KSB7XG4gICAgICAgIHQuVnQoZSk7XG4gICAgfVxuICAgIFN0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IGUuZmllbGRzIHx8IHt9O1xuICAgICAgICB0aGlzLkF0KHQsIDU1KTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIE9iamVjdC5rZXlzKG4pKSB0aGlzLmZ0KGUsIHQpLCB0aGlzLlR0KG5bZV0sIHQpO1xuICAgIH1cbiAgICBidChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5BdCh0LCA1MCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSB0aGlzLlR0KGUsIHQpO1xuICAgIH1cbiAgICB3dChlLCB0KSB7XG4gICAgICAgIHRoaXMuQXQodCwgMzcpO1xuICAgICAgICBEb2N1bWVudEtleS5mcm9tTmFtZShlKS5wYXRoLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5BdCh0LCA2MCksIHRoaXMuRHQoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgQXQoZSwgdCkge1xuICAgICAgICBlLlJ0KHQpO1xuICAgIH1cbiAgICBndChlKSB7XG4gICAgICAgIC8vIFdoaWxlIHRoZSBTREsgZG9lcyBub3QgaW1wbGVtZW50IHRydW5jYXRpb24sIHRoZSB0cnVuY2F0aW9uIG1hcmtlciBpc1xuICAgICAgICAvLyB1c2VkIHRvIHRlcm1pbmF0ZSBhbGwgdmFyaWFibGUgbGVuZ3RoIHZhbHVlcyAod2hpY2ggYXJlIHN0cmluZ3MsIGJ5dGVzLFxuICAgICAgICAvLyByZWZlcmVuY2VzLCBhcnJheXMgYW5kIG1hcHMpLlxuICAgICAgICBlLlJ0KDIpO1xuICAgIH1cbn1cblxuX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuQ3QgPSBuZXcgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXI7XG5cbi8qKlxuICogQ291bnRzIHRoZSBudW1iZXIgb2YgemVyb3MgaW4gYSBieXRlLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9udW1iZXJPZkxlYWRpbmdaZXJvc0luQnl0ZShlKSB7XG4gICAgaWYgKDAgPT09IGUpIHJldHVybiA4O1xuICAgIGxldCB0ID0gMDtcbiAgICByZXR1cm4gZSA+PiA0ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIGZpcnN0IGZvdXIgYml0cyBhcmUgemVyby5cbiAgICB0ICs9IDQsIGUgPDw9IDQpLCBlID4+IDYgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgZmlyc3QgdHdvIChvciBuZXh0IHR3bykgYml0cyBhcmUgemVyby5cbiAgICB0ICs9IDIsIGUgPDw9IDIpLCBlID4+IDcgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgcmVtYWluaW5nIGJpdCBpcyB6ZXJvLlxuICAgIHQgKz0gMSksIHQ7XG59XG5cbi8qKiBDb3VudHMgdGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zIGluIHRoZSBnaXZlbiBieXRlIGFycmF5LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVxdWlyZWQgdG8gc3RvcmUgXCJ2YWx1ZVwiLiBMZWFkaW5nIHplcm8gYnl0ZXNcbiAqIGFyZSBza2lwcGVkLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdW5zaWduZWROdW1MZW5ndGgoZSkge1xuICAgIC8vIFRoaXMgaXMganVzdCB0aGUgbnVtYmVyIG9mIGJ5dGVzIGZvciB0aGUgdW5zaWduZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG51bWJlci5cbiAgICBjb25zdCB0ID0gNjQgLSBmdW5jdGlvbiBfX1BSSVZBVEVfbnVtYmVyT2ZMZWFkaW5nWmVyb3MoZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgODsgKytuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX251bWJlck9mTGVhZGluZ1plcm9zSW5CeXRlKDI1NSAmIGVbbl0pO1xuICAgICAgICAgICAgaWYgKHQgKz0gciwgOCAhPT0gcikgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfShlKTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKHQgLyA4KTtcbn1cblxuLyoqXG4gKiBPcmRlcmVkQ29kZVdyaXRlciBpcyBhIG1pbmltYWwtYWxsb2NhdGlvbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgd3JpdGluZ1xuICogYmVoYXZpb3IgZGVmaW5lZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgY29kZSBpcyBwb3J0ZWQgZnJvbSBpdHMgSmF2YSBjb3VudGVycGFydC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDEwMjQpLCB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgdnQoZSkge1xuICAgICAgICBjb25zdCB0ID0gZVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGxldCBuID0gdC5uZXh0KCk7XG4gICAgICAgIGZvciAoOyFuLmRvbmU7ICkgdGhpcy5GdChuLnZhbHVlKSwgbiA9IHQubmV4dCgpO1xuICAgICAgICB0aGlzLk10KCk7XG4gICAgfVxuICAgIHh0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IHQubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuT3Qobi52YWx1ZSksIG4gPSB0Lm5leHQoKTtcbiAgICAgICAgdGhpcy5OdCgpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIHV0ZjggYnl0ZXMgaW50byB0aGlzIGJ5dGUgc2VxdWVuY2UsIGFzY2VuZGluZy4gKi8gICAgQnQoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGlmIChlIDwgMTI4KSB0aGlzLkZ0KGUpOyBlbHNlIGlmIChlIDwgMjA0OCkgdGhpcy5GdCg5NjAgfCBlID4+PiA2KSwgdGhpcy5GdCgxMjggfCA2MyAmIGUpOyBlbHNlIGlmICh0IDwgXCJcXHVkODAwXCIgfHwgXCJcXHVkYmZmXCIgPCB0KSB0aGlzLkZ0KDQ4MCB8IGUgPj4+IDEyKSwgXG4gICAgICAgICAgICB0aGlzLkZ0KDEyOCB8IDYzICYgZSA+Pj4gNiksIHRoaXMuRnQoMTI4IHwgNjMgJiBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZVBvaW50QXQoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5GdCgyNDAgfCBlID4+PiAxOCksIHRoaXMuRnQoMTI4IHwgNjMgJiBlID4+PiAxMiksIHRoaXMuRnQoMTI4IHwgNjMgJiBlID4+PiA2KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5GdCgxMjggfCA2MyAmIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuTXQoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBkZXNjZW5kaW5nICovICAgIEx0KGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAoZSA8IDEyOCkgdGhpcy5PdChlKTsgZWxzZSBpZiAoZSA8IDIwNDgpIHRoaXMuT3QoOTYwIHwgZSA+Pj4gNiksIHRoaXMuT3QoMTI4IHwgNjMgJiBlKTsgZWxzZSBpZiAodCA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgdCkgdGhpcy5PdCg0ODAgfCBlID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5PdCgxMjggfCA2MyAmIGUgPj4+IDYpLCB0aGlzLk90KDEyOCB8IDYzICYgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuT3QoMjQwIHwgZSA+Pj4gMTgpLCB0aGlzLk90KDEyOCB8IDYzICYgZSA+Pj4gMTIpLCB0aGlzLk90KDEyOCB8IDYzICYgZSA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuT3QoMTI4IHwgNjMgJiBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLk50KCk7XG4gICAgfVxuICAgIGt0KGUpIHtcbiAgICAgICAgLy8gVmFsdWVzIGFyZSBlbmNvZGVkIHdpdGggYSBzaW5nbGUgYnl0ZSBsZW5ndGggcHJlZml4LCBmb2xsb3dlZCBieSB0aGVcbiAgICAgICAgLy8gYWN0dWFsIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnF0KGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLlF0KDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IDI1NSAmIG47XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiB0W2VdO1xuICAgIH1cbiAgICBLdChlKSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGludmVydGVkIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnF0KGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLlF0KDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgbik7XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+KDI1NSAmIHRbZV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYWZ0ZXIgYWxsIG90aGVyIGJ5dGVcbiAgICAgKiBzZXF1ZW5jZXMgd3JpdHRlbiBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgICR0KCkge1xuICAgICAgICB0aGlzLlV0KDI1NSksIHRoaXMuVXQoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBcImluZmluaXR5XCIgYnl0ZSBzZXF1ZW5jZSB0aGF0IHNvcnRzIGJlZm9yZSBhbGwgb3RoZXIgYnl0ZVxuICAgICAqIHNlcXVlbmNlcyB3cml0dGVuIGluIGRlc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIFd0KCkge1xuICAgICAgICB0aGlzLkd0KDI1NSksIHRoaXMuR3QoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBidWZmZXIgc3VjaCB0aGF0IGl0IGlzIHRoZSBzYW1lIGFzIHdoZW4gaXQgd2FzIG5ld2x5XG4gICAgICogY29uc3RydWN0ZWQuXG4gICAgICovICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgc2VlZChlKSB7XG4gICAgICAgIHRoaXMuUXQoZS5sZW5ndGgpLCB0aGlzLmJ1ZmZlci5zZXQoZSwgdGhpcy5wb3NpdGlvbiksIHRoaXMucG9zaXRpb24gKz0gZS5sZW5ndGg7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGVuY29kZWQgYnl0ZXMgaW4gdGhpcyBidWZmZXIuICAqLyAgICB6dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMucG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGB2YWxgIGludG8gYW4gZW5jb2Rpbmcgc28gdGhhdCB0aGUgb3JkZXIgbWF0Y2hlcyB0aGUgSUVFRSA3NTRcbiAgICAgKiBmbG9hdGluZy1wb2ludCBjb21wYXJpc29uIHJlc3VsdHMgd2l0aCB0aGUgZm9sbG93aW5nIGV4Y2VwdGlvbnM6XG4gICAgICogICAtMC4wIDwgMC4wXG4gICAgICogICBhbGwgbm9uLU5hTiA8IE5hTlxuICAgICAqICAgTmFOID0gTmFOXG4gICAgICovICAgIHF0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAvKiogQ29udmVydHMgYSBKYXZhU2NyaXB0IG51bWJlciB0byBhIGJ5dGUgYXJyYXkgKHVzaW5nIGJpZyBlbmRpYW4gZW5jb2RpbmcpLiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZG91YmxlVG9Mb25nQml0cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSk7XG4gICAgICAgICAgICByZXR1cm4gdC5zZXRGbG9hdDY0KDAsIGUsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITEpLCBuZXcgVWludDhBcnJheSh0LmJ1ZmZlcik7XG4gICAgICAgIH0oZSksIG4gPSAwICE9ICgxMjggJiB0WzBdKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGJpdCBpcyBzZXQuIFdlIHVzZSBhIGJpdCBtYXNrIHNpbmNlIHZhbHVlWzBdIGlzXG4gICAgICAgIC8vIGVuY29kZWQgYXMgYSBudW1iZXIgZnJvbSAwIHRvIDI1NS5cbiAgICAgICAgICAgICAgICAvLyBSZXZlcnQgdGhlIHR3byBjb21wbGVtZW50IHRvIGdldCBuYXR1cmFsIG9yZGVyaW5nXG4gICAgICAgIHRbMF0gXj0gbiA/IDI1NSA6IDEyODtcbiAgICAgICAgZm9yIChsZXQgZSA9IDE7IGUgPCB0Lmxlbmd0aDsgKytlKSB0W2VdIF49IG4gPyAyNTUgOiAwO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGFzY2VuZGluZyB0byB0aGUgYnVmZmVyLiAqLyAgICBGdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAyNTUgJiBlO1xuICAgICAgICAwID09PSB0ID8gKHRoaXMuVXQoMCksIHRoaXMuVXQoMjU1KSkgOiAyNTUgPT09IHQgPyAodGhpcy5VdCgyNTUpLCB0aGlzLlV0KDApKSA6IHRoaXMuVXQodCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBzaW5nbGUgYnl0ZSBkZXNjZW5kaW5nIHRvIHRoZSBidWZmZXIuICAqLyAgICBPdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAyNTUgJiBlO1xuICAgICAgICAwID09PSB0ID8gKHRoaXMuR3QoMCksIHRoaXMuR3QoMjU1KSkgOiAyNTUgPT09IHQgPyAodGhpcy5HdCgyNTUpLCB0aGlzLkd0KDApKSA6IHRoaXMuR3QoZSk7XG4gICAgfVxuICAgIE10KCkge1xuICAgICAgICB0aGlzLlV0KDApLCB0aGlzLlV0KDEpO1xuICAgIH1cbiAgICBOdCgpIHtcbiAgICAgICAgdGhpcy5HdCgwKSwgdGhpcy5HdCgxKTtcbiAgICB9XG4gICAgVXQoZSkge1xuICAgICAgICB0aGlzLlF0KDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gZTtcbiAgICB9XG4gICAgR3QoZSkge1xuICAgICAgICB0aGlzLlF0KDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfmU7XG4gICAgfVxuICAgIFF0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUgKyB0aGlzLnBvc2l0aW9uO1xuICAgICAgICBpZiAodCA8PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgLy8gVHJ5IGRvdWJsaW5nLlxuICAgICAgICAgICAgICAgIGxldCBuID0gMiAqIHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgLy8gU3RpbGwgbm90IGJpZyBlbm91Z2g/IEp1c3QgYWxsb2NhdGUgdGhlIHJpZ2h0IHNpemUuXG4gICAgICAgICAgICAgICAgbiA8IHQgJiYgKG4gPSB0KTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgYnVmZmVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgVWludDhBcnJheShuKTtcbiAgICAgICAgci5zZXQodGhpcy5idWZmZXIpLCAvLyBjb3B5IG9sZCBkYXRhXG4gICAgICAgIHRoaXMuYnVmZmVyID0gcjtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9Bc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuanQgPSBlO1xuICAgIH1cbiAgICB5dChlKSB7XG4gICAgICAgIHRoaXMuanQudnQoZSk7XG4gICAgfVxuICAgIFZ0KGUpIHtcbiAgICAgICAgdGhpcy5qdC5CdChlKTtcbiAgICB9XG4gICAgUnQoZSkge1xuICAgICAgICB0aGlzLmp0Lmt0KGUpO1xuICAgIH1cbiAgICBFdCgpIHtcbiAgICAgICAgdGhpcy5qdC4kdCgpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0Rlc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuanQgPSBlO1xuICAgIH1cbiAgICB5dChlKSB7XG4gICAgICAgIHRoaXMuanQueHQoZSk7XG4gICAgfVxuICAgIFZ0KGUpIHtcbiAgICAgICAgdGhpcy5qdC5MdChlKTtcbiAgICB9XG4gICAgUnQoZSkge1xuICAgICAgICB0aGlzLmp0Lkt0KGUpO1xuICAgIH1cbiAgICBFdCgpIHtcbiAgICAgICAgdGhpcy5qdC5XdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGBEaXJlY3Rpb25hbEluZGV4Qnl0ZUVuY29kZXJgIHVzaW5nIGBPcmRlcmVkQ29kZVdyaXRlcmAgZm9yIHRoZVxuICogYWN0dWFsIGVuY29kaW5nLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5qdCA9IG5ldyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIsIHRoaXMuSHQgPSBuZXcgX19QUklWQVRFX0FzY2VuZGluZ0luZGV4Qnl0ZUVuY29kZXIodGhpcy5qdCksIFxuICAgICAgICB0aGlzLkp0ID0gbmV3IF9fUFJJVkFURV9EZXNjZW5kaW5nSW5kZXhCeXRlRW5jb2Rlcih0aGlzLmp0KTtcbiAgICB9XG4gICAgc2VlZChlKSB7XG4gICAgICAgIHRoaXMuanQuc2VlZChlKTtcbiAgICB9XG4gICAgWXQoZSkge1xuICAgICAgICByZXR1cm4gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBlID8gdGhpcy5IdCA6IHRoaXMuSnQ7XG4gICAgfVxuICAgIHp0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qdC56dCgpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5qdC5yZXNldCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBSZXByZXNlbnRzIGFuIGluZGV4IGVudHJ5IHNhdmVkIGJ5IHRoZSBTREsgaW4gcGVyc2lzdGVkIHN0b3JhZ2UuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuaW5kZXhJZCA9IGUsIHRoaXMuZG9jdW1lbnRLZXkgPSB0LCB0aGlzLmFycmF5VmFsdWUgPSBuLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIEluZGV4RW50cnkgZW50cnkgdGhhdCBzb3J0cyBpbW1lZGlhdGVseSBhZnRlciB0aGUgY3VycmVudFxuICAgICAqIGRpcmVjdGlvbmFsIHZhbHVlLlxuICAgICAqLyAgICBadCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGlyZWN0aW9uYWxWYWx1ZS5sZW5ndGgsIHQgPSAwID09PSBlIHx8IDI1NSA9PT0gdGhpcy5kaXJlY3Rpb25hbFZhbHVlW2UgLSAxXSA/IGUgKyAxIDogZSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgICAgICByZXR1cm4gbi5zZXQodGhpcy5kaXJlY3Rpb25hbFZhbHVlLCAwKSwgdCAhPT0gZSA/IG4uc2V0KFsgMCBdLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUubGVuZ3RoKSA6ICsrbltuLmxlbmd0aCAtIDFdLCBcbiAgICAgICAgbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KHRoaXMuaW5kZXhJZCwgdGhpcy5kb2N1bWVudEtleSwgdGhpcy5hcnJheVZhbHVlLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCB0KSB7XG4gICAgbGV0IG4gPSBlLmluZGV4SWQgLSB0LmluZGV4SWQ7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBfX1BSSVZBVEVfY29tcGFyZUJ5dGVBcnJheXMoZS5hcnJheVZhbHVlLCB0LmFycmF5VmFsdWUpLCBcbiAgICAwICE9PSBuID8gbiA6IChuID0gX19QUklWQVRFX2NvbXBhcmVCeXRlQXJyYXlzKGUuZGlyZWN0aW9uYWxWYWx1ZSwgdC5kaXJlY3Rpb25hbFZhbHVlKSwgXG4gICAgMCAhPT0gbiA/IG4gOiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUuZG9jdW1lbnRLZXksIHQuZG9jdW1lbnRLZXkpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQnl0ZUFycmF5cyhlLCB0KSB7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aCAmJiBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICBjb25zdCByID0gZVtuXSAtIHRbbl07XG4gICAgICAgIGlmICgwICE9PSByKSByZXR1cm4gcjtcbiAgICB9XG4gICAgcmV0dXJuIGUubGVuZ3RoIC0gdC5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbGlnaHQgcXVlcnkgcGxhbm5lciBmb3IgRmlyZXN0b3JlLlxuICpcbiAqIFRoaXMgY2xhc3MgbWF0Y2hlcyBhIGBGaWVsZEluZGV4YCBhZ2FpbnN0IGEgRmlyZXN0b3JlIFF1ZXJ5IGBUYXJnZXRgLiBJdFxuICogZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaW5kZXggY2FuIGJlIHVzZWQgdG8gc2VydmUgdGhlIHNwZWNpZmllZCB0YXJnZXQuXG4gKlxuICogVGhlIGZvbGxvd2luZyB0YWJsZSBzaG93Y2FzZXMgc29tZSBwb3NzaWJsZSBpbmRleCBjb25maWd1cmF0aW9uczpcbiAqXG4gKiBRdWVyeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJbmRleFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDLCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykgICAgICAgICAgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScsICdkZXNjJykgICAgICAgICAgfCBhIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDLCBiIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKS5vcmRlckJ5KCdiJykgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJ2FycmF5LWNvbnRhaW5zJywgJ2EnKS5vcmRlckJ5KCdiJykgICAgICB8IGEgQ09OVEFJTlMsIGIgQVNDRU5ESU5HXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TXG4gKi8gY2xhc3MgX19QUklWQVRFX1RhcmdldEluZGV4TWF0Y2hlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IG51bGwgIT0gZS5jb2xsZWN0aW9uR3JvdXAgPyBlLmNvbGxlY3Rpb25Hcm91cCA6IGUucGF0aC5sYXN0U2VnbWVudCgpLCBcbiAgICAgICAgdGhpcy5YdCA9IGUub3JkZXJCeSwgdGhpcy5lbiA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5maWx0ZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgICAgIGUuaXNJbmVxdWFsaXR5KCkgPyB0aGlzLnRuID0gZSA6IHRoaXMuZW4ucHVzaChlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGluZGV4IGNhbiBiZSB1c2VkIHRvIHNlcnZlIHRoZSBUYXJnZXRJbmRleE1hdGNoZXInc1xuICAgICAqIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEFuIGluZGV4IGlzIGNvbnNpZGVyZWQgY2FwYWJsZSBvZiBzZXJ2aW5nIHRoZSB0YXJnZXQgd2hlbjpcbiAgICAgKiAtIFRoZSB0YXJnZXQgdXNlcyBhbGwgaW5kZXggc2VnbWVudHMgZm9yIGl0cyBmaWx0ZXJzIGFuZCBvcmRlckJ5IGNsYXVzZXMuXG4gICAgICogICBUaGUgdGFyZ2V0IGNhbiBoYXZlIGFkZGl0aW9uYWwgZmlsdGVyIGFuZCBvcmRlckJ5IGNsYXVzZXMsIGJ1dCBub3RcbiAgICAgKiAgIGZld2VyLlxuICAgICAqIC0gSWYgYW4gQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55ZmlsdGVyIGlzIHVzZWQsIHRoZSBpbmRleCBtdXN0IGFsc29cbiAgICAgKiAgIGhhdmUgYSBjb3JyZXNwb25kaW5nIGBDT05UQUlOU2Agc2VnbWVudC5cbiAgICAgKiAtIEFsbCBkaXJlY3Rpb25hbCBpbmRleCBzZWdtZW50cyBjYW4gYmUgbWFwcGVkIHRvIHRoZSB0YXJnZXQgYXMgYSBzZXJpZXMgb2ZcbiAgICAgKiAgIGVxdWFsaXR5IGZpbHRlcnMsIGEgc2luZ2xlIGluZXF1YWxpdHkgZmlsdGVyIGFuZCBhIHNlcmllcyBvZiBvcmRlckJ5XG4gICAgICogICBjbGF1c2VzLlxuICAgICAqIC0gVGhlIHNlZ21lbnRzIHRoYXQgcmVwcmVzZW50IHRoZSBlcXVhbGl0eSBmaWx0ZXJzIG1heSBhcHBlYXIgb3V0IG9mIG9yZGVyLlxuICAgICAqIC0gVGhlIG9wdGlvbmFsIHNlZ21lbnQgZm9yIHRoZSBpbmVxdWFsaXR5IGZpbHRlciBtdXN0IGFwcGVhciBhZnRlciBhbGxcbiAgICAgKiAgIGVxdWFsaXR5IHNlZ21lbnRzLlxuICAgICAqIC0gVGhlIHNlZ21lbnRzIHRoYXQgcmVwcmVzZW50IHRoYXQgb3JkZXJCeSBjbGF1c2Ugb2YgdGhlIHRhcmdldCBtdXN0IGFwcGVhclxuICAgICAqICAgaW4gb3JkZXIgYWZ0ZXIgYWxsIGVxdWFsaXR5IGFuZCBpbmVxdWFsaXR5IHNlZ21lbnRzLiBTaW5nbGUgb3JkZXJCeVxuICAgICAqICAgY2xhdXNlcyBjYW5ub3QgYmUgc2tpcHBlZCwgYnV0IGEgY29udGludW91cyBvcmRlckJ5IHN1ZmZpeCBtYXkgYmVcbiAgICAgKiAgIG9taXR0ZWQuXG4gICAgICovICAgIG5uKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5jb2xsZWN0aW9uR3JvdXAgPT09IHRoaXMuY29sbGVjdGlvbklkKTtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gYXJyYXkgZWxlbWVudCwgZmluZCBhIG1hdGNoaW5nIGZpbHRlci5cbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9maWVsZEluZGV4R2V0QXJyYXlTZWdtZW50KGUpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0ICYmICF0aGlzLnJuKHQpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSk7XG4gICAgICAgIGxldCByID0gbmV3IFNldCwgaSA9IDAsIHMgPSAwO1xuICAgICAgICAvLyBQcm9jZXNzIGFsbCBlcXVhbGl0aWVzIGZpcnN0LiBFcXVhbGl0aWVzIGNhbiBhcHBlYXIgb3V0IG9mIG9yZGVyLlxuICAgICAgICBmb3IgKDtpIDwgbi5sZW5ndGggJiYgdGhpcy5ybihuW2ldKTsgKytpKSByID0gci5hZGQobltpXS5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgcHJvY2Vzc2VkIGFsbCBzZWdtZW50cywgYWxsIHNlZ21lbnRzIGFyZSB1c2VkIHRvIHNlcnZlXG4gICAgICAgIC8vIHRoZSBlcXVhbGl0eSBmaWx0ZXJzIGFuZCB3ZSBkbyBub3QgbmVlZCB0byBtYXAgYW55IHNlZ21lbnRzIHRvIHRoZVxuICAgICAgICAvLyB0YXJnZXQncyBpbmVxdWFsaXR5IGFuZCBvcmRlckJ5IGNsYXVzZXMuXG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IG4ubGVuZ3RoKSByZXR1cm4gITA7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMudG4pIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGluZXF1YWxpdHkgZmlsdGVyIGFuZCB0aGUgZmllbGQgd2FzIG5vdCBpbiBvbmUgb2YgdGhlXG4gICAgICAgICAgICAvLyBlcXVhbGl0eSBmaWx0ZXJzIGFib3ZlLCB0aGUgbmV4dCBzZWdtZW50IG11c3QgbWF0Y2ggYm90aCB0aGUgZmlsdGVyXG4gICAgICAgICAgICAvLyBhbmQgdGhlIGZpcnN0IG9yZGVyQnkgY2xhdXNlLlxuICAgICAgICAgICAgaWYgKCFyLmhhcyh0aGlzLnRuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuW2ldO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zbih0aGlzLnRuLCBlKSB8fCAhdGhpcy5vbih0aGlzLlh0W3MrK10sIGUpKSByZXR1cm4gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2k7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWxsIHJlbWFpbmluZyBzZWdtZW50cyBuZWVkIHRvIHJlcHJlc2VudCB0aGUgcHJlZml4IG9mIHRoZSB0YXJnZXQnc1xuICAgICAgICAvLyBvcmRlckJ5LlxuICAgICAgICAgICAgICAgIGZvciAoO2kgPCBuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbltpXTtcbiAgICAgICAgICAgIGlmIChzID49IHRoaXMuWHQubGVuZ3RoIHx8ICF0aGlzLm9uKHRoaXMuWHRbcysrXSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgZnVsbCBtYXRjaGVkIGZpZWxkIGluZGV4IGZvciB0aGlzIHRhcmdldC4gKi8gICAgX24oKSB7XG4gICAgICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIG9ubHkgb25lIHNlZ21lbnQgY3JlYXRlZCBmb3Igb25lIGZpZWxkLiBGb3IgZXhhbXBsZSxcbiAgICAgICAgLy8gaW4gY2FzZSBsaWtlIGEgPT0gMyBhbmQgYSA+IDIsIEluZGV4IHthIEFTQ0VORElOR30gd2lsbCBvbmx5IGJlIGNyZWF0ZWRcbiAgICAgICAgLy8gb25jZS5cbiAgICAgICAgbGV0IGUgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpO1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0aGlzLmVuKSB7XG4gICAgICAgICAgICBpZiAobi5maWVsZC5pc0tleUZpZWxkKCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gbi5vcCB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gbi5vcCkgdC5wdXNoKG5ldyBJbmRleFNlZ21lbnQobi5maWVsZCwgMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8pKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuaGFzKG4uZmllbGQpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQobi5maWVsZCksIHQucHVzaChuZXcgSW5kZXhTZWdtZW50KG4uZmllbGQsIDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE5vdGU6IFdlIGRvIG5vdCBleHBsaWNpdGx5IGNoZWNrIGB0aGlzLmluZXF1YWxpdHlGaWx0ZXJgIGJ1dCByYXRoZXIgcmVseVxuICAgICAgICAvLyBvbiB0aGUgdGFyZ2V0IGRlZmluaW5nIGFuIGFwcHJvcHJpYXRlIFwib3JkZXIgYnlcIiB0byBlbnN1cmUgdGhhdCB0aGVcbiAgICAgICAgLy8gcmVxdWlyZWQgaW5kZXggc2VnbWVudCBpcyBhZGRlZC4gVGhlIHF1ZXJ5IGVuZ2luZSB3b3VsZCByZWplY3QgYSBxdWVyeVxuICAgICAgICAvLyB3aXRoIGFuIGluZXF1YWxpdHkgZmlsdGVyIHRoYXQgbGFja3MgdGhlIHJlcXVpcmVkIG9yZGVyLWJ5IGNsYXVzZS5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5YdCkgXG4gICAgICAgIC8vIFN0b3AgYWRkaW5nIG1vcmUgc2VnbWVudHMgaWYgd2Ugc2VlIGEgb3JkZXItYnkgb24ga2V5LiBUeXBpY2FsbHkgdGhpc1xuICAgICAgICAvLyBpcyB0aGUgZGVmYXVsdCBpbXBsaWNpdCBvcmRlci1ieSB3aGljaCBpcyBjb3ZlcmVkIGluIHRoZSBpbmRleF9lbnRyeVxuICAgICAgICAvLyB0YWJsZSBhcyBhIHNlcGFyYXRlIGNvbHVtbi4gSWYgaXQgaXMgbm90IHRoZSBkZWZhdWx0IG9yZGVyLWJ5LCB0aGVcbiAgICAgICAgLy8gZ2VuZXJhdGVkIGluZGV4IHdpbGwgYmUgbWlzc2luZyBzb21lIHNlZ21lbnRzIG9wdGltaXplZCBmb3Igb3JkZXItYnlzLFxuICAgICAgICAvLyB3aGljaCBpcyBwcm9iYWJseSBmaW5lLlxuICAgICAgICBuLmZpZWxkLmlzS2V5RmllbGQoKSB8fCBlLmhhcyhuLmZpZWxkKSB8fCAoZSA9IGUuYWRkKG4uZmllbGQpLCB0LnB1c2gobmV3IEluZGV4U2VnbWVudChuLmZpZWxkLCBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gPT09IG4uZGlyID8gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovIDogMSAvKiBJbmRleEtpbmQuREVTQ0VORElORyAqLykpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZEluZGV4KEZpZWxkSW5kZXguVU5LTk9XTl9JRCwgdGhpcy5jb2xsZWN0aW9uSWQsIHQsIEluZGV4U3RhdGUuZW1wdHkoKSk7XG4gICAgfVxuICAgIHJuKGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuZW4pIGlmICh0aGlzLnNuKHQsIGUpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgc24oZSwgdCkge1xuICAgICAgICBpZiAodm9pZCAwID09PSBlIHx8ICFlLmZpZWxkLmlzRXF1YWwodC5maWVsZFBhdGgpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IGUub3AgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IGUub3A7XG4gICAgICAgIHJldHVybiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyA9PT0gdC5raW5kID09PSBuO1xuICAgIH1cbiAgICBvbihlLCB0KSB7XG4gICAgICAgIHJldHVybiAhIWUuZmllbGQuaXNFcXVhbCh0LmZpZWxkUGF0aCkgJiYgKDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gdC5raW5kICYmIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA9PT0gZS5kaXIgfHwgMSAvKiBJbmRleEtpbmQuREVTQ0VORElORyAqLyA9PT0gdC5raW5kICYmIFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovID09PSBlLmRpcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyB1dGlsaXR5IGZ1bmN0aW9ucyB0aGF0IGhlbHAgd2l0aCBib29sZWFuIGxvZ2ljIHRyYW5zZm9ybWF0aW9ucyBuZWVkZWQgZm9yIGhhbmRsaW5nXG4gKiBjb21wbGV4IGZpbHRlcnMgdXNlZCBpbiBxdWVyaWVzLlxuICovXG4vKipcbiAqIFRoZSBgaW5gIGZpbHRlciBpcyBvbmx5IGEgc3ludGFjdGljIHN1Z2FyIG92ZXIgYSBkaXNqdW5jdGlvbiBvZiBlcXVhbGl0aWVzLiBGb3IgaW5zdGFuY2U6IGBhIGluXG4gKiBbMSwyLDNdYCBpcyBpbiBmYWN0IGBhPT0xIHx8IGE9PTIgfHwgYT09M2AuIFRoaXMgbWV0aG9kIGV4cGFuZHMgYW55IGBpbmAgZmlsdGVyIGluIHRoZSBnaXZlblxuICogaW5wdXQgaW50byBhIGRpc2p1bmN0aW9uIG9mIGVxdWFsaXR5IGZpbHRlcnMgYW5kIHJldHVybnMgdGhlIGV4cGFuZGVkIGZpbHRlci5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcHV0ZUluRXhwYW5zaW9uKGUpIHtcbiAgICB2YXIgdCwgbjtcbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfSW5GaWx0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSAobnVsbCA9PT0gKG4gPSBudWxsID09PSAodCA9IGUudmFsdWUuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC52YWx1ZXMpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4ubWFwKCh0ID0+IEZpZWxkRmlsdGVyLmNyZWF0ZShlLmZpZWxkLCBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gLCB0KSkpKSB8fCBbXTtcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKHIsIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgaGF2ZSByZWFjaGVkIG90aGVyIGtpbmRzIG9mIGZpZWxkIGZpbHRlcnMuXG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvLyBXZSBoYXZlIGEgY29tcG9zaXRlIGZpbHRlci5cbiAgICAgICAgY29uc3QgciA9IGUuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2NvbXB1dGVJbkV4cGFuc2lvbihlKSkpO1xuICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKHIsIGUub3ApO1xufVxuXG4vKipcbiAqIEdpdmVuIGEgY29tcG9zaXRlIGZpbHRlciwgcmV0dXJucyB0aGUgbGlzdCBvZiB0ZXJtcyBpbiBpdHMgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0uXG4gKlxuICogPHA+RWFjaCBlbGVtZW50IGluIHRoZSByZXR1cm4gdmFsdWUgaXMgb25lIHRlcm0gb2YgdGhlIHJlc3VsdGluZyBETkYuIEZvciBpbnN0YW5jZTogRm9yIHRoZVxuICogaW5wdXQ6IChBIHx8IEIpICYmIEMsIHRoZSBETkYgZm9ybSBpczogKEEgJiYgQykgfHwgKEIgJiYgQyksIGFuZCB0aGUgcmV0dXJuIHZhbHVlIGlzIGEgbGlzdFxuICogd2l0aCB0d28gZWxlbWVudHM6IGEgY29tcG9zaXRlIGZpbHRlciB0aGF0IHBlcmZvcm1zIChBICYmIEMpLCBhbmQgYSBjb21wb3NpdGUgZmlsdGVyIHRoYXRcbiAqIHBlcmZvcm1zIChCICYmIEMpLlxuICpcbiAqIEBwYXJhbSBmaWx0ZXIgdGhlIGNvbXBvc2l0ZSBmaWx0ZXIgdG8gY2FsY3VsYXRlIERORiB0cmFuc2Zvcm0gZm9yLlxuICogQHJldHVybiB0aGUgdGVybXMgaW4gdGhlIERORiB0cmFuc2Zvcm0uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2dldERuZlRlcm1zKGUpIHtcbiAgICBpZiAoMCA9PT0gZS5nZXRGaWx0ZXJzKCkubGVuZ3RoKSByZXR1cm4gW107XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jb21wdXRlRGlzdHJpYnV0ZWROb3JtYWxGb3JtKF9fUFJJVkFURV9jb21wdXRlSW5FeHBhbnNpb24oZSkpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChfX1BSSVZBVEVfaXNEaXNqdW5jdGl2ZU5vcm1hbEZvcm0odCkpLCBfX1BSSVZBVEVfaXNTaW5nbGVGaWVsZEZpbHRlcih0KSB8fCBfX1BSSVZBVEVfaXNGbGF0Q29uanVuY3Rpb24odCkgPyBbIHQgXSA6IHQuZ2V0RmlsdGVycygpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgYSBzaW5nbGUgZmllbGQgZmlsdGVyLiBlLmcuIChhID09IDEwKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzU2luZ2xlRmllbGRGaWx0ZXIoZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXI7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgdGhlIGNvbmp1bmN0aW9uIG9mIG9uZSBvciBtb3JlIGZpZWxkIGZpbHRlcnMuIGUuZy4gKGEgPT0gMTBcbiAqICYmIGIgPT0gMjApXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzRmxhdENvbmp1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0Q29uanVuY3Rpb24oZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gZmlsdGVyIGlzIGluIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpLlxuICpcbiAqIDxwPkluIGJvb2xlYW4gbG9naWMsIGEgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikgaXMgYSBjYW5vbmljYWwgbm9ybWFsIGZvcm0gb2YgYSBsb2dpY2FsXG4gKiBmb3JtdWxhIGNvbnNpc3Rpbmcgb2YgYSBkaXNqdW5jdGlvbiBvZiBjb25qdW5jdGlvbnM7IGl0IGNhbiBhbHNvIGJlIGRlc2NyaWJlZCBhcyBhbiBPUiBvZiBBTkRzLlxuICpcbiAqIDxwPkZvciBtb3JlIGluZm8sIHZpc2l0OiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EaXNqdW5jdGl2ZV9ub3JtYWxfZm9ybVxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0Rpc2p1bmN0aXZlTm9ybWFsRm9ybShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9pc1NpbmdsZUZpZWxkRmlsdGVyKGUpIHx8IF9fUFJJVkFURV9pc0ZsYXRDb25qdW5jdGlvbihlKSB8fCBcbiAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZmlsdGVyIGlzIHRoZSBkaXNqdW5jdGlvbiBvZiBvbmUgb3IgbW9yZSBcImZsYXQgY29uanVuY3Rpb25zXCIgYW5kXG4gKiBmaWVsZCBmaWx0ZXJzLiBlLmcuIChhID09IDEwKSB8fCAoYj09MjAgJiYgYz09MzApXG4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEaXNqdW5jdGlvbk9mRmllbGRGaWx0ZXJzQW5kRmxhdENvbmp1bmN0aW9ucyhlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Rpc2p1bmN0aW9uKGUpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5nZXRGaWx0ZXJzKCkpIGlmICghX19QUklWQVRFX2lzU2luZ2xlRmllbGRGaWx0ZXIodCkgJiYgIV9fUFJJVkFURV9pc0ZsYXRDb25qdW5jdGlvbih0KSkgcmV0dXJuICExO1xuICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9KGUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcHV0ZURpc3RyaWJ1dGVkTm9ybWFsRm9ybShlKSB7XG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSByZXR1cm4gZTtcbiAgICBpZiAoMSA9PT0gZS5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuIF9fUFJJVkFURV9jb21wdXRlRGlzdHJpYnV0ZWROb3JtYWxGb3JtKGUuZmlsdGVyc1swXSk7XG4gICAgLy8gQ29tcHV0ZSBETkYgZm9yIGVhY2ggb2YgdGhlIHN1YmZpbHRlcnMgZmlyc3RcbiAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2NvbXB1dGVEaXN0cmlidXRlZE5vcm1hbEZvcm0oZSkpKTtcbiAgICBsZXQgbiA9IENvbXBvc2l0ZUZpbHRlci5jcmVhdGUodCwgZS5vcCk7XG4gICAgcmV0dXJuIG4gPSBfX1BSSVZBVEVfYXBwbHlBc3NvY2lhdGlvbihuKSwgX19QUklWQVRFX2lzRGlzanVuY3RpdmVOb3JtYWxGb3JtKG4pID8gbiA6IChfX1BSSVZBVEVfaGFyZEFzc2VydChuIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQoX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24obikpLCBfX1BSSVZBVEVfaGFyZEFzc2VydChuLmZpbHRlcnMubGVuZ3RoID4gMSksIFxuICAgIG4uZmlsdGVycy5yZWR1Y2UoKChlLCB0KSA9PiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb24oZSwgdCkpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbihlLCB0KSB7XG4gICAgbGV0IG47XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQodCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IHQgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICAvLyBGaWVsZEZpbHRlciBGaWVsZEZpbHRlclxuICAgIG4gPSBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyB0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25GaWVsZEZpbHRlcnMoZSwgdCkge1xuICAgICAgICAvLyBDb25qdW5jdGlvbiBkaXN0cmlidXRpb24gZm9yIHR3byBmaWVsZCBmaWx0ZXJzIGlzIHRoZSBjb25qdW5jdGlvbiBvZiB0aGVtLlxuICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShbIGUsIHQgXSwgXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8pO1xuICAgIH0oZSwgdCkgOiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25GaWVsZEFuZENvbXBvc2l0ZUZpbHRlcnMoZSwgdCkgOiB0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25GaWVsZEFuZENvbXBvc2l0ZUZpbHRlcnModCwgZSkgOiBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25Db21wb3NpdGVGaWx0ZXJzKGUsIHQpIHtcbiAgICAgICAgLy8gVGhlcmUgYXJlIGZvdXIgY2FzZXM6XG4gICAgICAgIC8vIChBICYgQikgJiAoQyAmIEQpIC0tPiAoQSAmIEIgJiBDICYgRClcbiAgICAgICAgLy8gKEEgJiBCKSAmIChDIHwgRCkgLS0+IChBICYgQiAmIEMpIHwgKEEgJiBCICYgRClcbiAgICAgICAgLy8gKEEgfCBCKSAmIChDICYgRCkgLS0+IChDICYgRCAmIEEpIHwgKEMgJiBEICYgQilcbiAgICAgICAgLy8gKEEgfCBCKSAmIChDIHwgRCkgLS0+IChBICYgQykgfCAoQSAmIEQpIHwgKEIgJiBDKSB8IChCICYgRClcbiAgICAgICAgLy8gQ2FzZSAxIGlzIGEgbWVyZ2UuXG4gICAgICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlLmZpbHRlcnMubGVuZ3RoID4gMCAmJiB0LmZpbHRlcnMubGVuZ3RoID4gMCksIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKGUpICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKHQpKSByZXR1cm4gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcldpdGhBZGRlZEZpbHRlcnMoZSwgdC5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICAvLyBDYXNlIDIsMyw0IGFsbCBoYXZlIGF0IGxlYXN0IG9uZSBzaWRlIChsaHMgb3IgcmhzKSB0aGF0IGlzIGEgZGlzanVuY3Rpb24uIEluIGFsbCB0aHJlZSBjYXNlc1xuICAgICAgICAvLyB3ZSBzaG91bGQgdGFrZSBlYWNoIGVsZW1lbnQgb2YgdGhlIGRpc2p1bmN0aW9uIGFuZCBkaXN0cmlidXRlIGl0IG92ZXIgdGhlIG90aGVyIHNpZGUsIGFuZFxuICAgICAgICAvLyByZXR1cm4gdGhlIGRpc2p1bmN0aW9uIG9mIHRoZSBkaXN0cmlidXRpb24gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRGlzanVuY3Rpb24oZSkgPyBlIDogdCwgciA9IF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Rpc2p1bmN0aW9uKGUpID8gdCA6IGUsIGkgPSBuLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbihlLCByKSkpO1xuICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShpLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgIH0oZSwgdCksIF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKG4pO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25GaWVsZEFuZENvbXBvc2l0ZUZpbHRlcnMoZSwgdCkge1xuICAgIC8vIFRoZXJlIGFyZSB0d28gY2FzZXM6XG4gICAgLy8gQSAmIChCICYgQykgLS0+IChBICYgQiAmIEMpXG4gICAgLy8gQSAmIChCIHwgQykgLS0+IChBICYgQikgfCAoQSAmIEMpXG4gICAgaWYgKF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKHQpKSBcbiAgICAvLyBDYXNlIDFcbiAgICByZXR1cm4gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcldpdGhBZGRlZEZpbHRlcnModCwgZS5nZXRGaWx0ZXJzKCkpO1xuICAgIHtcbiAgICAgICAgLy8gQ2FzZSAyXG4gICAgICAgIGNvbnN0IG4gPSB0LmZpbHRlcnMubWFwKCh0ID0+IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbihlLCB0KSkpO1xuICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShuLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoZSBhc3NvY2lhdGl2aXR5IHByb3BlcnR5IHRvIHRoZSBnaXZlbiBmaWx0ZXIgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBmaWx0ZXIuXG4gKlxuICogPHVsPlxuICogICA8bGk+QSB8IChCIHwgQykgPT0gKEEgfCBCKSB8IEMgPT0gKEEgfCBCIHwgQylcbiAqICAgPGxpPkEgJiAoQiAmIEMpID09IChBICYgQikgJiBDID09IChBICYgQiAmIEMpXG4gKiA8L3VsPlxuICpcbiAqIDxwPkZvciBtb3JlIGluZm8sIHZpc2l0OiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Bc3NvY2lhdGl2ZV9wcm9wZXJ0eSNQcm9wb3NpdGlvbmFsX2xvZ2ljXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24oZSkge1xuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgfHwgZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciksIFxuICAgIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikgcmV0dXJuIGU7XG4gICAgY29uc3QgdCA9IGUuZ2V0RmlsdGVycygpO1xuICAgIC8vIElmIHRoZSBjb21wb3NpdGUgZmlsdGVyIG9ubHkgY29udGFpbnMgMSBmaWx0ZXIsIGFwcGx5IGFzc29jaWF0aXZpdHkgdG8gaXQuXG4gICAgICAgIGlmICgxID09PSB0Lmxlbmd0aCkgcmV0dXJuIF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKHRbMF0pO1xuICAgIC8vIEFzc29jaWF0aXZpdHkgYXBwbGllZCB0byBhIGZsYXQgY29tcG9zaXRlIGZpbHRlciByZXN1bHRzIGlzIGl0c2VsZi5cbiAgICAgICAgaWYgKF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQoZSkpIHJldHVybiBlO1xuICAgIC8vIEZpcnN0IGFwcGx5IGFzc29jaWF0aXZpdHkgdG8gYWxsIHN1YmZpbHRlcnMuIFRoaXMgd2lsbCBpbiB0dXJuIHJlY3Vyc2l2ZWx5IGFwcGx5XG4gICAgLy8gYXNzb2NpYXRpdml0eSB0byBhbGwgbmVzdGVkIGNvbXBvc2l0ZSBmaWx0ZXJzIGFuZCBmaWVsZCBmaWx0ZXJzLlxuICAgICAgICBjb25zdCBuID0gdC5tYXAoKGUgPT4gX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24oZSkpKSwgciA9IFtdO1xuICAgIC8vIEZvciBjb21wb3NpdGUgc3ViZmlsdGVycyB0aGF0IHBlcmZvcm0gdGhlIHNhbWUga2luZCBvZiBsb2dpY2FsIG9wZXJhdGlvbiBhcyBgY29tcG9zaXRlRmlsdGVyYFxuICAgIC8vIHRha2Ugb3V0IHRoZWlyIGZpbHRlcnMgYW5kIGFkZCB0aGVtIHRvIGBjb21wb3NpdGVGaWx0ZXJgLiBGb3IgZXhhbXBsZTpcbiAgICAvLyBjb21wb3NpdGVGaWx0ZXIgPSAoQSB8IChCIHwgQyB8IEQpKVxuICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlciA9IChCIHwgQyB8IEQpXG4gICAgLy8gUmVzdWx0OiAoQSB8IEIgfCBDIHwgRClcbiAgICAvLyBOb3RlIHRoYXQgdGhlIGBjb21wb3NpdGVTdWJmaWx0ZXJgIGhhcyBiZWVuIGVsaW1pbmF0ZWQsIGFuZCBpdHMgZmlsdGVycyAoQiwgQywgRCkgaGF2ZSBiZWVuXG4gICAgLy8gYWRkZWQgdG8gdGhlIHRvcC1sZXZlbCBcImNvbXBvc2l0ZUZpbHRlclwiLlxuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gci5wdXNoKHQpIDogdCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiAodC5vcCA9PT0gZS5vcCA/IFxuICAgICAgICAvLyBjb21wb3NpdGVGaWx0ZXI6IChBIHwgKEIgfCBDKSlcbiAgICAgICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyOiAoQiB8IEMpXG4gICAgICAgIC8vIFJlc3VsdDogKEEgfCBCIHwgQylcbiAgICAgICAgci5wdXNoKC4uLnQuZmlsdGVycykgOiBcbiAgICAgICAgLy8gY29tcG9zaXRlRmlsdGVyOiAoQSB8IChCICYgQykpXG4gICAgICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlcjogKEIgJiBDKVxuICAgICAgICAvLyBSZXN1bHQ6IChBIHwgKEIgJiBDKSlcbiAgICAgICAgci5wdXNoKHQpKTtcbiAgICB9KSksIDEgPT09IHIubGVuZ3RoID8gclswXSA6IENvbXBvc2l0ZUZpbHRlci5jcmVhdGUociwgZS5vcCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeUluZGV4TWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYW4gPSBuZXcgX19QUklWQVRFX01lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleDtcbiAgICB9XG4gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbi5hZGQodCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuYW4uZ2V0RW50cmllcyh0KSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBkZWxldGVBbGxGaWVsZEluZGV4ZXMoZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgY3JlYXRlVGFyZ2V0SW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldChlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhUeXBlKGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKDAgLyogSW5kZXhUeXBlLk5PTkUgKi8pO1xuICAgIH1cbiAgICBnZXRGaWVsZEluZGV4ZXMoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cbiAgICBnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUoZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldChlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShJbmRleE9mZnNldC5taW4oKSk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoSW5kZXhPZmZzZXQubWluKCkpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbikge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cbiAqIEFsc28gdXNlZCBmb3IgaW4tbWVtb3J5IGNhY2hpbmcgYnkgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIGFuZCBpbml0aWFsIGluZGV4IHBvcHVsYXRpb25cbiAqIGluIGluZGV4ZWRkYl9zY2hlbWEudHNcbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IHt9O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBlbnRyeSBhbHJlYWR5IGV4aXN0ZWQuXG4gICAgYWRkKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubGFzdFNlZ21lbnQoKSwgbiA9IGUucG9wTGFzdCgpLCByID0gdGhpcy5pbmRleFt0XSB8fCBuZXcgU29ydGVkU2V0KFJlc291cmNlUGF0aC5jb21wYXJhdG9yKSwgaSA9ICFyLmhhcyhuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhbdF0gPSByLmFkZChuKSwgaTtcbiAgICB9XG4gICAgaGFzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubGFzdFNlZ21lbnQoKSwgbiA9IGUucG9wTGFzdCgpLCByID0gdGhpcy5pbmRleFt0XTtcbiAgICAgICAgcmV0dXJuIHIgJiYgci5oYXMobik7XG4gICAgfVxuICAgIGdldEVudHJpZXMoZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaW5kZXhbZV0gfHwgbmV3IFNvcnRlZFNldChSZXNvdXJjZVBhdGguY29tcGFyYXRvcikpLnRvQXJyYXkoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IGRlID0gbmV3IFVpbnQ4QXJyYXkoMCk7XG5cbi8qKlxuICogQSBwZXJzaXN0ZWQgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVW5saWtlIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdlYiBTREsgZG9lcyBub3QgbWVtb2l6ZSBpbmRleFxuICogZGF0YSBhcyBpdCBzdXBwb3J0cyBtdWx0aS10YWIgYWNjZXNzLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiSW5kZXhNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMuZGF0YWJhc2VJZCA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcbiAgICAgICAgICogbGF1bmNoZWQuIFVzZWQgdG8gYXZvaWQgcmUtd3JpdGluZyB0aGUgc2FtZSBlbnRyeSByZXBlYXRlZGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmVcbiAgICAgICAgICogdXNlZCB0byBzYXRpc2Z5IHJlYWRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51biA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgZnJvbSBhIHRhcmdldCB0byBpdHMgZXF1aXZhbGVudCBsaXN0IG9mIHN1Yi10YXJnZXRzLiBFYWNoIHN1Yi10YXJnZXRcbiAgICAgICAgICogY29udGFpbnMgb25seSBvbmUgdGVybSBmcm9tIHRoZSB0YXJnZXQncyBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY24gPSBuZXcgT2JqZWN0TWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldChlKSksICgoZSwgdCkgPT4gX19QUklWQVRFX3RhcmdldEVxdWFscyhlLCB0KSkpLCBcbiAgICAgICAgdGhpcy51aWQgPSBlLnVpZCB8fCBcIlwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBjb2xsZWN0aW9uIHBhcmVudCBpbmRleC5cbiAgICAgKlxuICAgICAqIFJlcGVhdGVkIGNhbGxzIGZvciB0aGUgc2FtZSBjb2xsZWN0aW9uUGF0aCBzaG91bGQgYmUgYXZvaWRlZCB3aXRoaW4gYVxuICAgICAqIHRyYW5zYWN0aW9uIGFzIEluZGV4ZWREYkluZGV4TWFuYWdlciBvbmx5IGNhY2hlcyB3cml0ZXMgb25jZSBhIHRyYW5zYWN0aW9uXG4gICAgICogaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAqLyAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCB0KSB7XG4gICAgICAgIGlmICghdGhpcy51bi5oYXModCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0Lmxhc3RTZWdtZW50KCksIHIgPSB0LnBvcExhc3QoKTtcbiAgICAgICAgICAgIGUuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sbGVjdGlvbiB0byB0aGUgaW4gbWVtb3J5IGNhY2hlIG9ubHkgaWYgdGhlIHRyYW5zYWN0aW9uIHdhc1xuICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQuXG4gICAgICAgICAgICAgICAgdGhpcy51bi5hZGQodCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogbixcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgocilcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbGxlY3Rpb25QYXJlbnRzU3RvcmUoZSkucHV0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdCwgXCJcIiBdLCBbIF9fUFJJVkFURV9pbW1lZGlhdGVTdWNjZXNzb3IodCksIFwiXCIgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbGxlY3Rpb25QYXJlbnRzU3RvcmUoZSkuRyhyKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiBlKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2xsZWN0aW9uSWQgZ3VhcmQgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSAoYW5kIGlzbid0IGFzIGxvbmdcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleGVkZGJzaGltIHRoYXQgYnJlYWtzIG91ciByYW5nZSBpbiBvdXIgdGVzdHMgcnVubmluZyBpbiBub2RlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbS9pc3N1ZXMvMzM0XG4gICAgICAgICAgICAgICAgaWYgKHIuY29sbGVjdGlvbklkICE9PSB0KSBicmVhaztcbiAgICAgICAgICAgICAgICBuLnB1c2goX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChyLnBhcmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYWRkRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBWZXJpZnkgdGhhdCB0aGUgYXV0by1pbmNyZW1lbnRpbmcgaW5kZXggSUQgd29ya3MgaW5cbiAgICAgICAgLy8gU2FmYXJpICYgRmlyZWZveC5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSwgciA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiSW5kZXhDb25maWd1cmF0aW9uKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaW5kZXhJZDogZS5pbmRleElkLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogZS5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmZpZWxkcy5tYXAoKGUgPT4gWyBlLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgZS5raW5kIF0pKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgZGVsZXRlIHIuaW5kZXhJZDtcbiAgICAgICAgLy8gYGluZGV4SWRgIGlzIGF1dG8tcG9wdWxhdGVkIGJ5IEluZGV4ZWREYlxuICAgICAgICBjb25zdCBpID0gbi5hZGQocik7XG4gICAgICAgIGlmICh0LmluZGV4U3RhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIGkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgbi5wdXQoX19QUklWQVRFX3RvRGJJbmRleFN0YXRlKGUsIHRoaXMudXNlciwgdC5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyLCB0LmluZGV4U3RhdGUub2Zmc2V0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGkubmV4dCgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSwgciA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSksIGkgPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZSh0LmluZGV4SWQpLm5leHQoKCgpID0+IHIuZGVsZXRlKElEQktleVJhbmdlLmJvdW5kKFsgdC5pbmRleElkIF0sIFsgdC5pbmRleElkICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCkpKSkubmV4dCgoKCkgPT4gaS5kZWxldGUoSURCS2V5UmFuZ2UuYm91bmQoWyB0LmluZGV4SWQgXSwgWyB0LmluZGV4SWQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSkpKTtcbiAgICB9XG4gICAgZGVsZXRlQWxsRmllbGRJbmRleGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSwgbiA9IF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKSwgciA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0LkooKS5uZXh0KCgoKSA9PiBuLkooKSkpLm5leHQoKCgpID0+IHIuSigpKSk7XG4gICAgfVxuICAgIGNyZWF0ZVRhcmdldEluZGV4ZXMoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5sbih0KSwgKHQgPT4gdGhpcy5nZXRJbmRleFR5cGUoZSwgdCkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICBpZiAoMCAvKiBJbmRleFR5cGUuTk9ORSAqLyA9PT0gbiB8fCAxIC8qIEluZGV4VHlwZS5QQVJUSUFMICovID09PSBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0SW5kZXhNYXRjaGVyKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZEZpZWxkSW5kZXgoZSwgbi5fbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKTtcbiAgICAgICAgbGV0IHIgPSAhMDtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0aGlzLmxuKHQpLCAodCA9PiB0aGlzLmhuKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgciAmJiAociA9ICEhZSksIGkuc2V0KHQsIGUpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgICAgIGxldCBlID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChpLCAoKGksIHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyXCIsIGBVc2luZyBpbmRleCAke2Z1bmN0aW9uIF9fUFJJVkFURV9maWVsZEluZGV4VG9TdHJpbmcoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBpZD0ke2UuaW5kZXhJZH18Y2c9JHtlLmNvbGxlY3Rpb25Hcm91cH18Zj0ke2UuZmllbGRzLm1hcCgoZSA9PiBgJHtlLmZpZWxkUGF0aH06JHtlLmtpbmR9YCkpLmpvaW4oXCIsXCIpfWA7XG4gICAgICAgICAgICAgICAgICAgIH0oaSl9IHRvIGV4ZWN1dGUgJHtfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQodCl9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0QXJyYXlWYWx1ZXMoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9maWVsZEluZGV4R2V0QXJyYXlTZWdtZW50KHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgX19QUklWQVRFX3RhcmdldEdldEZpZWxkRmlsdGVyc0ZvclBhdGgoZSwgbi5maWVsZFBhdGgpKSBzd2l0Y2ggKHQub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudmFsdWUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIHQudmFsdWUgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1haW5pbmcgZmlsdGVycyBhcmUgbm90IGFycmF5IGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdGhlIGxpc3Qgb2YgdmFsdWVzIHRoYXQgYXJlIHVzZWQgaW4gIT0gb3IgTk9UX0lOIGZpbHRlcnMuIFJldHVybnNcbiAqIGBudWxsYCBpZiB0aGVyZSBhcmUgbm8gc3VjaCBmaWx0ZXJzLlxuICovIChzLCBpKSwgXyA9IGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXROb3RJblZhbHVlcyhlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHModCkpIGZvciAoY29uc3QgdCBvZiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCByLmZpZWxkUGF0aCkpIHN3aXRjaCAodC5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbmNvZGUgZXF1YWxpdHkgcHJlZml4LCB3aGljaCBpcyBlbmNvZGVkIGluIHRoZSBpbmRleCB2YWx1ZSBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaW5lcXVhbGl0eSAoZS5nLiBgYSA9PSAnYScgJiYgYiAhPSAnYidgIGlzIGVuY29kZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBgdmFsdWUgIT0gJ2FiJ2ApLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2V0KHIuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCB0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RJbi9Ob3RFcXVhbCBpcyBhbHdheXMgYSBzdWZmaXguIFRoZXJlIGNhbm5vdCBiZSBhbnkgcmVtYWluaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VnbWVudHMgYW5kIGhlbmNlIHdlIGNhbiByZXR1cm4gZWFybHkgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5zZXQoci5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIHQudmFsdWUpLCBBcnJheS5mcm9tKG4udmFsdWVzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGNhbm5vdCBiZSB1c2VkIGFzIG5vdEluIGJvdW5kcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhIGxvd2VyIGJvdW5kIG9mIGZpZWxkIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgc3RhcnRpbmcgcG9pbnQgdG9cbiAqIHNjYW4gdGhlIGluZGV4IGRlZmluZWQgYnkgYGZpZWxkSW5kZXhgLiBSZXR1cm5zIGBNSU5fVkFMVUVgIGlmIG5vIGxvd2VyIGJvdW5kXG4gKiBleGlzdHMuXG4gKi8gKHMsIGkpLCBhID0gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldExvd2VyQm91bmQoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHIgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBlYWNoIHNlZ21lbnQsIHJldHJpZXZlIGEgbG93ZXIgYm91bmQgaWYgdGhlcmUgaXMgYSBzdWl0YWJsZSBmaWx0ZXIgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0QXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gaS5raW5kID8gX19QUklWQVRFX3RhcmdldEdldEFzY2VuZGluZ0JvdW5kKGUsIGkuZmllbGRQYXRoLCBlLnN0YXJ0QXQpIDogX19QUklWQVRFX3RhcmdldEdldERlc2NlbmRpbmdCb3VuZChlLCBpLmZpZWxkUGF0aCwgZS5zdGFydEF0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2godC52YWx1ZSksIHIgJiYgKHIgPSB0LmluY2x1c2l2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG4sIHIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhbiB1cHBlciBib3VuZCBvZiBmaWVsZCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCBhcyBhbiBlbmRpbmcgcG9pbnRcbiAqIHdoZW4gc2Nhbm5pbmcgdGhlIGluZGV4IGRlZmluZWQgYnkgYGZpZWxkSW5kZXhgLiBSZXR1cm5zIGBNQVhfVkFMVUVgIGlmIG5vXG4gKiB1cHBlciBib3VuZCBleGlzdHMuXG4gKi8gKHMsIGkpLCB1ID0gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldFVwcGVyQm91bmQoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHIgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBlYWNoIHNlZ21lbnQsIHJldHJpZXZlIGFuIHVwcGVyIGJvdW5kIGlmIHRoZXJlIGlzIGEgc3VpdGFibGUgZmlsdGVyIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmRBdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHModCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBpLmtpbmQgPyBfX1BSSVZBVEVfdGFyZ2V0R2V0RGVzY2VuZGluZ0JvdW5kKGUsIGkuZmllbGRQYXRoLCBlLmVuZEF0KSA6IF9fUFJJVkFURV90YXJnZXRHZXRBc2NlbmRpbmdCb3VuZChlLCBpLmZpZWxkUGF0aCwgZS5lbmRBdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQudmFsdWUpLCByICYmIChyID0gdC5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChuLCByKTtcbiAgICAgICAgICAgICAgICAgICAgfShzLCBpKSwgYyA9IHRoaXMuUG4oaSwgcywgYSksIGwgPSB0aGlzLlBuKGksIHMsIHUpLCBoID0gdGhpcy5JbihpLCBzLCBfKSwgUCA9IHRoaXMuZG4oaS5pbmRleElkLCBvLCBjLCBhLmluY2x1c2l2ZSwgbCwgdS5pbmNsdXNpdmUsIGgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goUCwgKGkgPT4gbi5IKGksIHQubGltaXQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHQuZG9jdW1lbnRLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaGFzKG4pIHx8IChlID0gZS5hZGQobiksIHIucHVzaChuKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiByKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbG4oZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY24uZ2V0KGUpO1xuICAgICAgICBpZiAodCkgcmV0dXJuIHQ7XG4gICAgICAgIGlmICgwID09PSBlLmZpbHRlcnMubGVuZ3RoKSB0ID0gWyBlIF07IGVsc2Uge1xuICAgICAgICAgICAgdCA9IF9fUFJJVkFURV9nZXREbmZUZXJtcyhDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGUuZmlsdGVycywgXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8pKS5tYXAoKHQgPT4gX19QUklWQVRFX25ld1RhcmdldChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLm9yZGVyQnksIHQuZ2V0RmlsdGVycygpLCBlLmxpbWl0LCBlLnN0YXJ0QXQsIGUuZW5kQXQpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY24uc2V0KGUsIHQpLCB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEga2V5IHJhbmdlIHF1ZXJ5IG9uIGBEYkluZGV4RW50cnlTdG9yZWAgdGhhdCB1bmlvbnMgYWxsXG4gICAgICogYm91bmRzLlxuICAgICAqLyAgICBkbihlLCB0LCBuLCByLCBpLCBzLCBvKSB7XG4gICAgICAgIC8vIFRoZSBudW1iZXIgb2YgdG90YWwgaW5kZXggc2NhbnMgd2UgdW5pb24gdG9nZXRoZXIuIFRoaXMgaXMgc2ltaWxhciB0byBhXG4gICAgICAgIC8vIGRpc3RyaWJ1dGVkIG5vcm1hbCBmb3JtLCBidXQgYWRhcHRlZCBmb3IgYXJyYXkgdmFsdWVzLiBXZSBjcmVhdGUgYSBzaW5nbGVcbiAgICAgICAgLy8gaW5kZXggcmFuZ2UgcGVyIHZhbHVlIGluIGFuIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWSBmaWx0ZXJcbiAgICAgICAgLy8gY29tYmluZWQgd2l0aCB0aGUgdmFsdWVzIGZyb20gdGhlIHF1ZXJ5IGJvdW5kcy5cbiAgICAgICAgY29uc3QgXyA9IChudWxsICE9IHQgPyB0Lmxlbmd0aCA6IDEpICogTWF0aC5tYXgobi5sZW5ndGgsIGkubGVuZ3RoKSwgYSA9IF8gLyAobnVsbCAhPSB0ID8gdC5sZW5ndGggOiAxKSwgdSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IF87ICsrYykge1xuICAgICAgICAgICAgY29uc3QgXyA9IHQgPyB0aGlzLlRuKHRbYyAvIGFdKSA6IGRlLCBsID0gdGhpcy5FbihlLCBfLCBuW2MgJSBhXSwgciksIGggPSB0aGlzLkFuKGUsIF8sIGlbYyAlIGFdLCBzKSwgUCA9IG8ubWFwKCh0ID0+IHRoaXMuRW4oZSwgXywgdCwgXG4gICAgICAgICAgICAvKiBpbmNsdXNpdmU9ICovICEwKSkpO1xuICAgICAgICAgICAgdS5wdXNoKC4uLnRoaXMuY3JlYXRlUmFuZ2UobCwgaCwgUCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1O1xuICAgIH1cbiAgICAvKiogR2VuZXJhdGVzIHRoZSBsb3dlciBib3VuZCBmb3IgYGFycmF5VmFsdWVgIGFuZCBgZGlyZWN0aW9uYWxWYWx1ZWAuICovICAgIEVuKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfSW5kZXhFbnRyeShlLCBEb2N1bWVudEtleS5lbXB0eSgpLCB0LCBuKTtcbiAgICAgICAgcmV0dXJuIHIgPyBpIDogaS5adCgpO1xuICAgIH1cbiAgICAvKiogR2VuZXJhdGVzIHRoZSB1cHBlciBib3VuZCBmb3IgYGFycmF5VmFsdWVgIGFuZCBgZGlyZWN0aW9uYWxWYWx1ZWAuICovICAgIEFuKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfSW5kZXhFbnRyeShlLCBEb2N1bWVudEtleS5lbXB0eSgpLCB0LCBuKTtcbiAgICAgICAgcmV0dXJuIHIgPyBpLlp0KCkgOiBpO1xuICAgIH1cbiAgICBobihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX1RhcmdldEluZGV4TWF0Y2hlcih0KSwgciA9IG51bGwgIT0gdC5jb2xsZWN0aW9uR3JvdXAgPyB0LmNvbGxlY3Rpb25Hcm91cCA6IHQucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXMoZSwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIGluZGV4IHdpdGggdGhlIG1vc3QgbnVtYmVyIG9mIHNlZ21lbnRzLlxuICAgICAgICAgICAgbGV0IHQgPSBudWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIGUpIHtcbiAgICAgICAgICAgICAgICBuLm5uKHIpICYmICghdCB8fCByLmZpZWxkcy5sZW5ndGggPiB0LmZpZWxkcy5sZW5ndGgpICYmICh0ID0gcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRJbmRleFR5cGUoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IDIgLyogSW5kZXhUeXBlLkZVTEwgKi87XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmxuKHQpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gociwgKHQgPT4gdGhpcy5obihlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUgPyAwIC8qIEluZGV4VHlwZS5OT05FICovICE9PSBuICYmIGUuZmllbGRzLmxlbmd0aCA8IGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRTZWdtZW50Q291bnQoZSkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGgkMS5jb21wYXJhdG9yKSwgbiA9ICExO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiBlLmZpbHRlcnMpIGZvciAoY29uc3QgZSBvZiByLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkgXG4gICAgICAgICAgICAgICAgLy8gX19uYW1lX18gaXMgbm90IGFuIGV4cGxpY2l0IHNlZ21lbnQgb2YgYW55IGluZGV4LCBzbyB3ZSBkb24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gY291bnQgaXQuXG4gICAgICAgICAgICAgICAgZS5maWVsZC5pc0tleUZpZWxkKCkgfHwgKFxuICAgICAgICAgICAgICAgIC8vIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWSBmaWx0ZXJzIG11c3QgYmUgY291bnRlZCBzZXBhcmF0ZWx5LlxuICAgICAgICAgICAgICAgIC8vIEZvciBpbnN0YW5jZSwgaXQgaXMgcG9zc2libGUgdG8gaGF2ZSBhbiBpbmRleCBmb3IgXCJhIEFSUkFZIGEgQVNDXCIuIEV2ZW5cbiAgICAgICAgICAgICAgICAvLyB0aG91Z2ggdGhlc2UgYXJlIG9uIHRoZSBzYW1lIGZpZWxkLCB0aGV5IHNob3VsZCBiZSBjb3VudGVkIGFzIHR3b1xuICAgICAgICAgICAgICAgIC8vIHNlcGFyYXRlIHNlZ21lbnRzIGluIGFuIGluZGV4LlxuICAgICAgICAgICAgICAgIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gZS5vcCB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gZS5vcCA/IG4gPSAhMCA6IHQgPSB0LmFkZChlLmZpZWxkKSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIGUub3JkZXJCeSkgXG4gICAgICAgICAgICAgICAgLy8gX19uYW1lX18gaXMgbm90IGFuIGV4cGxpY2l0IHNlZ21lbnQgb2YgYW55IGluZGV4LCBzbyB3ZSBkb24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gY291bnQgaXQuXG4gICAgICAgICAgICAgICAgbi5maWVsZC5pc0tleUZpZWxkKCkgfHwgKHQgPSB0LmFkZChuLmZpZWxkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuc2l6ZSArIChuID8gMSA6IDApO1xuICAgICAgICAgICAgfSh0KSAmJiAobiA9IDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8pIDogbiA9IDAgLyogSW5kZXhUeXBlLk5PTkUgKi87XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IFxuICAgICAgICAvLyBPUiBxdWVyaWVzIGhhdmUgbW9yZSB0aGFuIG9uZSBzdWItdGFyZ2V0IChvbmUgc3ViLXRhcmdldCBwZXIgRE5GIHRlcm0pLiBXZSBjdXJyZW50bHkgY29uc2lkZXJcbiAgICAgICAgLy8gT1IgcXVlcmllcyB0aGF0IGhhdmUgYSBgbGltaXRgIHRvIGhhdmUgYSBwYXJ0aWFsIGluZGV4LiBGb3Igc3VjaCBxdWVyaWVzIHdlIHBlcmZvcm0gc29ydGluZ1xuICAgICAgICAvLyBhbmQgYXBwbHkgdGhlIGxpbWl0IGluIG1lbW9yeSBhcyBhIHBvc3QtcHJvY2Vzc2luZyBzdGVwLlxuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0SGFzTGltaXQoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09IGUubGltaXQ7XG4gICAgICAgIH0odCkgJiYgci5sZW5ndGggPiAxICYmIDIgLyogSW5kZXhUeXBlLkZVTEwgKi8gPT09IG4gPyAxIC8qIEluZGV4VHlwZS5QQVJUSUFMICovIDogbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBieXRlIGVuY29kZWQgZm9ybSBvZiB0aGUgZGlyZWN0aW9uYWwgdmFsdWVzIGluIHRoZSBmaWVsZCBpbmRleC5cbiAgICAgKiBSZXR1cm5zIGBudWxsYCBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgaGF2ZSBhbGwgZmllbGRzIHNwZWNpZmllZCBpbiB0aGVcbiAgICAgKiBpbmRleC5cbiAgICAgKi8gICAgUm4oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHIuZmllbGRQYXRoKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uWXQoci5raW5kKTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLkN0LmR0KGUsIGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuLnp0KCk7XG4gICAgfVxuICAgIC8qKiBFbmNvZGVzIGEgc2luZ2xlIHZhbHVlIHRvIHRoZSBhc2NlbmRpbmcgaW5kZXggZm9ybWF0LiAqLyAgICBUbihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXI7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlci5DdC5kdChlLCB0Lll0KDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLykpLCBcbiAgICAgICAgdC56dCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVuY29kZWQgZm9ybSBvZiB0aGUgZG9jdW1lbnQga2V5IHRoYXQgc29ydHMgYmFzZWQgb24gdGhlIGtleVxuICAgICAqIG9yZGVyaW5nIG9mIHRoZSBmaWVsZCBpbmRleC5cbiAgICAgKi8gICAgVm4oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuQ3QuZHQoX19QUklWQVRFX3JlZlZhbHVlKHRoaXMuZGF0YWJhc2VJZCwgdCksIG4uWXQoZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRLZXlPcmRlcihlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKGUpO1xuICAgICAgICAgICAgcmV0dXJuIDAgPT09IHQubGVuZ3RoID8gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovIDogdFt0Lmxlbmd0aCAtIDFdLmtpbmQ7XG4gICAgICAgIH0oZSkpKSwgbi56dCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBnaXZlbiBmaWVsZCB2YWx1ZXMgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9uIGluIGB0YXJnZXRgLlxuICAgICAqIEZvciBJTiBxdWVyaWVzLCBhIGxpc3Qgb2YgcG9zc2libGUgdmFsdWVzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBJbihlLCB0LCBuKSB7XG4gICAgICAgIGlmIChudWxsID09PSBuKSByZXR1cm4gW107XG4gICAgICAgIGxldCByID0gW107XG4gICAgICAgIHIucHVzaChuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXIpO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuW2krK107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgcikgaWYgKHRoaXMubW4odCwgcy5maWVsZFBhdGgpICYmIGlzQXJyYXkoZSkpIHIgPSB0aGlzLmZuKHIsIHMsIGUpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5ZdChzLmtpbmQpO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLkN0LmR0KGUsIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmduKHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBnaXZlbiBib3VuZHMgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9uIGluIGB0YXJnZXRgLiBGb3IgSU5cbiAgICAgKiBxdWVyaWVzLCBhIGxpc3Qgb2YgcG9zc2libGUgdmFsdWVzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBQbihlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkluKGUsIHQsIG4ucG9zaXRpb24pO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgYnl0ZSByZXByZXNlbnRhdGlvbiBmb3IgdGhlIHByb3ZpZGVkIGVuY29kZXJzLiAqLyAgICBnbihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgKytuKSB0W25dID0gZVtuXS56dCgpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNlcGFyYXRlIGVuY29kZXIgZm9yIGVhY2ggZWxlbWVudCBvZiBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIFRoZSBtZXRob2QgYXBwZW5kcyBlYWNoIHZhbHVlIHRvIGFsbCBleGlzdGluZyBlbmNvZGVycyAoZS5nLiBmaWx0ZXIoXCJhXCIsXG4gICAgICogXCI9PVwiLCBcImExXCIpLmZpbHRlcihcImJcIiwgXCJpblwiLCBbXCJiMVwiLCBcImIyXCJdKSBiZWNvbWVzIFtcImExLGIxXCIsIFwiYTEsYjJcIl0pLiBBXG4gICAgICogbGlzdCBvZiBuZXcgZW5jb2RlcnMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGZuKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IFsgLi4uZSBdLCBpID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKSBmb3IgKGNvbnN0IG4gb2Ygcikge1xuICAgICAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2RlcjtcbiAgICAgICAgICAgIHIuc2VlZChuLnp0KCkpLCBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlci5DdC5kdChlLCByLll0KHQua2luZCkpLCBpLnB1c2gocik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIG1uKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuICEhZS5maWx0ZXJzLmZpbmQoKGUgPT4gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyICYmIGUuZmllbGQuaXNFcXVhbCh0KSAmJiAoXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBlLm9wIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSBlLm9wKSkpO1xuICAgIH1cbiAgICBnZXRGaWVsZEluZGV4ZXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpLCByID0gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuICh0ID8gbi5HKFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgSURCS2V5UmFuZ2UuYm91bmQodCwgdCkpIDogbi5HKCkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGUsIChlID0+IHIuZ2V0KFsgZS5pbmRleElkLCB0aGlzLnVpZCBdKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICB0LnB1c2goZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYkluZGV4Q29uZmlndXJhdGlvbihlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0ID8gbmV3IEluZGV4U3RhdGUodC5zZXF1ZW5jZU51bWJlciwgbmV3IEluZGV4T2Zmc2V0KF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAodC5yZWFkVGltZSksIG5ldyBEb2N1bWVudEtleShfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHQuZG9jdW1lbnRLZXkpKSwgdC5sYXJnZXN0QmF0Y2hJZCkpIDogSW5kZXhTdGF0ZS5lbXB0eSgpLCByID0gZS5maWVsZHMubWFwKCgoW2UsIHRdKSA9PiBuZXcgSW5kZXhTZWdtZW50KEZpZWxkUGF0aCQxLmZyb21TZXJ2ZXJGb3JtYXQoZSksIHQpKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGRJbmRleChlLmluZGV4SWQsIGUuY29sbGVjdGlvbkdyb3VwLCByLCBuKTtcbiAgICAgICAgICAgICAgICB9KGUsIG4pKTtcbiAgICAgICAgICAgIH0pKSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXMoZSkubmV4dCgoZSA9PiAwID09PSBlLmxlbmd0aCA/IG51bGwgOiAoZS5zb3J0KCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlciAtIHQuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlcjtcbiAgICAgICAgICAgIHJldHVybiAwICE9PSBuID8gbiA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuY29sbGVjdGlvbkdyb3VwLCB0LmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgICAgIH0pKSwgZVswXS5jb2xsZWN0aW9uR3JvdXApKSk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIGkgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5wbihlKS5uZXh0KChlID0+IHIuRyhcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIElEQktleVJhbmdlLmJvdW5kKHQsIHQpKS5uZXh0KCh0ID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IGkucHV0KF9fUFJJVkFURV90b0RiSW5kZXhTdGF0ZSh0LmluZGV4SWQsIHRoaXMudXNlciwgZSwgbikpKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVJbmRleEVudHJpZXMoZSwgdCkge1xuICAgICAgICAvLyBQb3J0aW5nIE5vdGU6IGBnZXRGaWVsZEluZGV4ZXMoKWAgb24gV2ViIGRvZXMgbm90IGNhY2hlIGluZGV4IGxvb2t1cHMgYXNcbiAgICAgICAgLy8gaXQgY291bGQgYmUgdXNlZCBhY3Jvc3MgZGlmZmVyZW50IEluZGV4ZWREQiB0cmFuc2FjdGlvbnMuIEFzIGFueSBjYWNoZWRcbiAgICAgICAgLy8gZGF0YSBtaWdodCBiZSBpbnZhbGlkYXRlZCBieSBvdGhlciBtdWx0aS10YWIgY2xpZW50cywgd2UgY2FuIG9ubHkgdHJ1c3RcbiAgICAgICAgLy8gZGF0YSB3aXRoaW4gYSBzaW5nbGUgSW5kZXhlZERCIHRyYW5zYWN0aW9uLiBXZSB0aGVyZWZvcmUgYWRkIGEgY2FjaGVcbiAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAoKHQsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmdldCh0LmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgICAgICAgICByZXR1cm4gKGkgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShpKSA6IHRoaXMuZ2V0RmllbGRJbmRleGVzKGUsIHQuY29sbGVjdGlvbkdyb3VwKSkubmV4dCgoaSA9PiAobi5zZXQodC5jb2xsZWN0aW9uR3JvdXAsIGkpLCBcbiAgICAgICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGksIChuID0+IHRoaXMueW4oZSwgdCwgbikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMud24ociwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuaXNFcXVhbChpKSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiB0aGlzLlNuKGUsIHIsIG4sIHQsIGkpO1xuICAgICAgICAgICAgfSkpKSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYm4oZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpLnB1dCh7XG4gICAgICAgICAgICBpbmRleElkOiByLmluZGV4SWQsXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxuICAgICAgICAgICAgYXJyYXlWYWx1ZTogci5hcnJheVZhbHVlLFxuICAgICAgICAgICAgZGlyZWN0aW9uYWxWYWx1ZTogci5kaXJlY3Rpb25hbFZhbHVlLFxuICAgICAgICAgICAgb3JkZXJlZERvY3VtZW50S2V5OiB0aGlzLlZuKG4sIHQua2V5KSxcbiAgICAgICAgICAgIGRvY3VtZW50S2V5OiB0LmtleS5wYXRoLnRvQXJyYXkoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgRG4oZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpLmRlbGV0ZShbIHIuaW5kZXhJZCwgdGhpcy51aWQsIHIuYXJyYXlWYWx1ZSwgci5kaXJlY3Rpb25hbFZhbHVlLCB0aGlzLlZuKG4sIHQua2V5KSwgdC5rZXkucGF0aC50b0FycmF5KCkgXSk7XG4gICAgfVxuICAgIHluKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKTtcbiAgICAgICAgbGV0IGkgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiByLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLm9ubHkoWyBuLmluZGV4SWQsIHRoaXMudWlkLCB0aGlzLlZuKG4sIHQpIF0pXG4gICAgICAgIH0sICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKG5ldyBfX1BSSVZBVEVfSW5kZXhFbnRyeShuLmluZGV4SWQsIHQsIHIuYXJyYXlWYWx1ZSwgci5kaXJlY3Rpb25hbFZhbHVlKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIHRoZSBpbmRleCBlbnRyaWVzIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovICAgIHduKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcik7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLlJuKHQsIGUpO1xuICAgICAgICBpZiAobnVsbCA9PSByKSByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9maWVsZEluZGV4R2V0QXJyYXlTZWdtZW50KHQpO1xuICAgICAgICBpZiAobnVsbCAhPSBpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5kYXRhLmZpZWxkKGkuZmllbGRQYXRoKTtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KHMpKSBmb3IgKGNvbnN0IGkgb2Ygcy5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkgbiA9IG4uYWRkKG5ldyBfX1BSSVZBVEVfSW5kZXhFbnRyeSh0LmluZGV4SWQsIGUua2V5LCB0aGlzLlRuKGkpLCByKSk7XG4gICAgICAgIH0gZWxzZSBuID0gbi5hZGQobmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KHQuaW5kZXhJZCwgZS5rZXksIGRlLCByKSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBpbmRleCBlbnRyaWVzIGZvciB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgYnkgZGVsZXRpbmcgZW50cmllc1xuICAgICAqIHRoYXQgYXJlIG5vIGxvbmdlciByZWZlcmVuY2VkIGluIGBuZXdFbnRyaWVzYCBhbmQgYWRkaW5nIGFsbCBuZXdseSBhZGRlZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIFNuKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyXCIsIFwiVXBkYXRpbmcgaW5kZXggZW50cmllcyBmb3IgZG9jdW1lbnQgJyVzJ1wiLCB0LmtleSk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9kaWZmU29ydGVkU2V0cyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5nZXRJdGVyYXRvcigpLCBvID0gdC5nZXRJdGVyYXRvcigpO1xuICAgICAgICAgICAgbGV0IF8gPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKHMpLCBhID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihvKTtcbiAgICAgICAgICAgIC8vIFdhbGsgdGhyb3VnaCB0aGUgdHdvIHNldHMgYXQgdGhlIHNhbWUgdGltZSwgdXNpbmcgdGhlIG9yZGVyaW5nIGRlZmluZWQgYnlcbiAgICAgICAgICAgIC8vIGBjb21wYXJhdG9yYC5cbiAgICAgICAgICAgIGZvciAoO18gfHwgYTsgKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSAhMSwgdCA9ICExO1xuICAgICAgICAgICAgICAgIGlmIChfICYmIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4oXywgYSk7XG4gICAgICAgICAgICAgICAgICAgIHIgPCAwID8gXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyByZW1vdmVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICAgICAgdCA9ICEwIDogciA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgYWRkZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZCB3YWxrdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBvbmx5IGluIGBhZnRlcmAuXG4gICAgICAgICAgICAgICAgICAgIGUgPSAhMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG51bGwgIT0gXyA/IHQgPSAhMCA6IGUgPSAhMDtcbiAgICAgICAgICAgICAgICBlID8gKHIoYSksIGEgPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKG8pKSA6IHQgPyAoaShfKSwgXyA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IocykpIDogKF8gPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKHMpLCBcbiAgICAgICAgICAgICAgICBhID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0ociwgaSwgX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yLCAoXG4gICAgICAgIC8qIG9uQWRkPSAqLyByID0+IHtcbiAgICAgICAgICAgIHMucHVzaCh0aGlzLmJuKGUsIHQsIG4sIHIpKTtcbiAgICAgICAgfSksIChcbiAgICAgICAgLyogb25SZW1vdmU9ICovIHIgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKHRoaXMuRG4oZSwgdCwgbiwgcikpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICBwbihlKSB7XG4gICAgICAgIGxldCB0ID0gMTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSkuWih7XG4gICAgICAgICAgICBpbmRleDogXCJzZXF1ZW5jZU51bWJlckluZGV4XCIsXG4gICAgICAgICAgICByZXZlcnNlOiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51aWQsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIF0pXG4gICAgICAgIH0sICgoZSwgbiwgcikgPT4ge1xuICAgICAgICAgICAgci5kb25lKCksIHQgPSBuLnNlcXVlbmNlTnVtYmVyICsgMTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBzZXQgb2YgSURCIHJhbmdlcyB0aGF0IHNwbGl0cyB0aGUgZXhpc3RpbmcgcmFuZ2UgYW5kIGV4Y2x1ZGVzXG4gICAgICogYW55IHZhbHVlcyB0aGF0IG1hdGNoIHRoZSBgbm90SW5WYWx1ZWAgZnJvbSB0aGVzZSByYW5nZXMuIEFzIGFuIGV4YW1wbGUsXG4gICAgICogJ1tmb28gPiAyICYmIGZvbyAhPSAzXWAgYmVjb21lcyAgYFtmb28gPiAyICYmIDwgMywgZm9vID4gM11gLlxuICAgICAqLyAgICBjcmVhdGVSYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIFRoZSBub3RJbiB2YWx1ZXMgbmVlZCB0byBiZSBzb3J0ZWQgYW5kIHVuaXF1ZSBzbyB0aGF0IHdlIGNhbiByZXR1cm4gYVxuICAgICAgICAvLyBzb3J0ZWQgc2V0IG9mIG5vbi1vdmVybGFwcGluZyByYW5nZXMuXG4gICAgICAgIG4gPSBuLnNvcnQoKChlLCB0KSA9PiBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoZSwgdCkpKS5maWx0ZXIoKChlLCB0LCBuKSA9PiAhdCB8fCAwICE9PSBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoZSwgblt0IC0gMV0pKSk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgci5wdXNoKGUpO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2Ygbikge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihpLCBlKSwgcyA9IF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihpLCB0KTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCBpcyB0aGUgbG93ZXIgYm91bmQuIFdlIHRoZXJlZm9yZSBuZWVkIHRvIHJhaXNlIHRoZSBib3VuZFxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgdmFsdWUuXG4gICAgICAgICAgICByWzBdID0gZS5adCgpOyBlbHNlIGlmIChuID4gMCAmJiBzIDwgMCkgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgaXMgaW4gdGhlIG1pZGRsZSBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICAgIHIucHVzaChpKSwgci5wdXNoKGkuWnQoKSk7IGVsc2UgaWYgKHMgPiAwKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCAoYW5kIGFsbCBmb2xsb3dpbmcgdmFsdWVzKSBhcmUgb3V0IG9mIHRoZSByYW5nZVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgci5sZW5ndGg7IGUgKz0gMikge1xuICAgICAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyIHR3byBib3VuZHMgdGhhdCB3aWxsIGNyZWF0ZSBhbiB1bm1hdGNoYWJsZSBrZXkgcmFuZ2UsXG4gICAgICAgICAgICAvLyB0aGVuIHdlIHJldHVybiBhbiBlbXB0eSBzZXQgb2Yga2V5IHJhbmdlcy5cbiAgICAgICAgICAgIGlmICh0aGlzLkNuKHJbZV0sIHJbZSArIDFdKSkgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY29uc3QgdCA9IFsgcltlXS5pbmRleElkLCB0aGlzLnVpZCwgcltlXS5hcnJheVZhbHVlLCByW2VdLmRpcmVjdGlvbmFsVmFsdWUsIGRlLCBbXSBdLCBuID0gWyByW2UgKyAxXS5pbmRleElkLCB0aGlzLnVpZCwgcltlICsgMV0uYXJyYXlWYWx1ZSwgcltlICsgMV0uZGlyZWN0aW9uYWxWYWx1ZSwgZGUsIFtdIF07XG4gICAgICAgICAgICBpLnB1c2goSURCS2V5UmFuZ2UuYm91bmQodCwgbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBDbihlLCB0KSB7XG4gICAgICAgIC8vIElmIGxvd2VyIGJvdW5kIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdXBwZXIgYm91bmQsIHRoZW4gdGhlIGtleVxuICAgICAgICAvLyByYW5nZSBjYW4gbmV2ZXIgYmUgbWF0Y2hlZC5cbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCB0KSA+IDA7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXMoZSwgdCkubmV4dChfX1BSSVZBVEVfZ2V0TWluT2Zmc2V0RnJvbUZpZWxkSW5kZXhlcyk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldChlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UubWFwQXJyYXkodGhpcy5sbih0KSwgKHQgPT4gdGhpcy5obihlLCB0KS5uZXh0KChlID0+IGUgfHwgZmFpbCgpKSkpKS5uZXh0KF9fUFJJVkFURV9nZXRNaW5PZmZzZXRGcm9tRmllbGRJbmRleGVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xuICogZG9jdW1lbnQgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbGxlY3Rpb25QYXJlbnRzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJjb2xsZWN0aW9uUGFyZW50c1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IGVudHJ5IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJpbmRleEVudHJpZXNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBjb25maWd1cmF0aW9uIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJpbmRleENvbmZpZ3VyYXRpb25cIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBzdGF0ZSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImluZGV4U3RhdGVcIik7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRNaW5PZmZzZXRGcm9tRmllbGRJbmRleGVzKGUpIHtcbiAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgwICE9PSBlLmxlbmd0aCk7XG4gICAgbGV0IHQgPSBlWzBdLmluZGV4U3RhdGUub2Zmc2V0LCBuID0gdC5sYXJnZXN0QmF0Y2hJZDtcbiAgICBmb3IgKGxldCByID0gMTsgciA8IGUubGVuZ3RoOyByKyspIHtcbiAgICAgICAgY29uc3QgaSA9IGVbcl0uaW5kZXhTdGF0ZS5vZmZzZXQ7XG4gICAgICAgIF9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IoaSwgdCkgPCAwICYmICh0ID0gaSksIG4gPCBpLmxhcmdlc3RCYXRjaElkICYmIChuID0gaS5sYXJnZXN0QmF0Y2hJZCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQodC5yZWFkVGltZSwgdC5kb2N1bWVudEtleSwgbik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFRlID0ge1xuICAgIGRpZFJ1bjogITEsXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcbn07XG5cbmNsYXNzIExydVBhcmFtcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gV2hlbiB3ZSBhdHRlbXB0IHRvIGNvbGxlY3QsIHdlIHdpbGwgb25seSBkbyBzbyBpZiB0aGUgY2FjaGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gdGhpc1xuICAgIC8vIHRocmVzaG9sZC4gUGFzc2luZyBgQ09MTEVDVElPTl9ESVNBQkxFRGAgaGVyZSB3aWxsIGNhdXNlIGNvbGxlY3Rpb24gdG8gYWx3YXlzIGJlIHNraXBwZWQuXG4gICAgZSwgXG4gICAgLy8gVGhlIHBlcmNlbnRhZ2Ugb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdlIHdpbGwgYXR0ZW1wdCB0byBjb2xsZWN0XG4gICAgdCwgXG4gICAgLy8gQSBjYXAgb24gdGhlIHRvdGFsIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2lsbCBiZSBjb2xsZWN0ZWQuIFRoaXMgcHJldmVudHNcbiAgICAvLyB1cyBmcm9tIGNvbGxlY3RpbmcgYSBodWdlIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIGlmIHRoZSBjYWNoZSBoYXMgZ3Jvd24gdmVyeSBsYXJnZS5cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA9IGUsIHRoaXMucGVyY2VudGlsZVRvQ29sbGVjdCA9IHQsIHRoaXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IG47XG4gICAgfVxuICAgIHN0YXRpYyB3aXRoQ2FjaGVTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMcnVQYXJhbXMoZSwgTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBMcnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERlbGV0ZSBhIG11dGF0aW9uIGJhdGNoIGFuZCB0aGUgYXNzb2NpYXRlZCBkb2N1bWVudCBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBBIFBlcnNpc3RlbmNlUHJvbWlzZSBvZiB0aGUgZG9jdW1lbnQgbXV0YXRpb25zIHRoYXQgd2VyZSByZW1vdmVkLlxuICovXG5mdW5jdGlvbiByZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gZS5zdG9yZShcIm11dGF0aW9uc1wiKSwgaSA9IGUuc3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKSwgcyA9IFtdLCBvID0gSURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpO1xuICAgIGxldCBfID0gMDtcbiAgICBjb25zdCBhID0gci5aKHtcbiAgICAgICAgcmFuZ2U6IG9cbiAgICB9LCAoKGUsIHQsIG4pID0+IChfKyssIG4uZGVsZXRlKCkpKSk7XG4gICAgcy5wdXNoKGEubmV4dCgoKCkgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgxID09PSBfKTtcbiAgICB9KSkpO1xuICAgIGNvbnN0IHUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGUgb2Ygbi5tdXRhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25LZXkodCwgZS5rZXkucGF0aCwgbi5iYXRjaElkKTtcbiAgICAgICAgcy5wdXNoKGkuZGVsZXRlKHIpKSwgdS5wdXNoKGUua2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHMpLm5leHQoKCgpID0+IHUpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFwcHJveGltYXRlIHNpemUgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUoZSkge1xuICAgIGlmICghZSkgcmV0dXJuIDA7XG4gICAgbGV0IHQ7XG4gICAgaWYgKGUuZG9jdW1lbnQpIHQgPSBlLmRvY3VtZW50OyBlbHNlIGlmIChlLnVua25vd25Eb2N1bWVudCkgdCA9IGUudW5rbm93bkRvY3VtZW50OyBlbHNlIHtcbiAgICAgICAgaWYgKCFlLm5vRG9jdW1lbnQpIHRocm93IGZhaWwoKTtcbiAgICAgICAgdCA9IGUubm9Eb2N1bWVudDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIG11dGF0aW9uIHF1ZXVlIGZvciBhIHNwZWNpZmljIHVzZXIsIGJhY2tlZCBieSBJbmRleGVkREIuICovIExydVBhcmFtcy5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSA9IDEwLCBcbkxydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QgPSAxZTMsIExydVBhcmFtcy5ERUZBVUxUID0gbmV3IExydVBhcmFtcyg0MTk0MzA0MCwgTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBMcnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKSwgXG5McnVQYXJhbXMuRElTQUJMRUQgPSBuZXcgTHJ1UGFyYW1zKC0xLCAwLCAwKTtcblxuY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYk11dGF0aW9uUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXJJZCAoZS5nLiBudWxsIFVJRCA9PiBcIlwiIHVzZXJJZCkgdXNlZCB0byBzdG9yZSAvXG4gICAgICogcmV0cmlldmUgbXV0YXRpb25zLlxuICAgICAqL1xuICAgIGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSB0LCB0aGlzLmluZGV4TWFuYWdlciA9IG4sIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSByLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cbiAgICAgICAgICogaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIEluZGV4ZWREYiwgdGhlIGNhY2hlZCB2YWx1ZSBtYXkgY29udGludWUgdG9cbiAgICAgICAgICogYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYmF0Y2gncyBkb2N1bWVudCBrZXlzLiBUbyByZW1vdmUgYSBjYWNoZWQgdmFsdWVcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcbiAgICAgICAgICogb3IgdGhyb3VnaCBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcbiAgICAgICAgICogdGhpcyBjYWNoZSBpcyB1c2VkIGJ5IHNlY29uZGFyeSBjbGllbnRzIHRvIGludmFsaWRhdGUgdGhlIGxvY2FsXG4gICAgICAgICAqIHZpZXcgb2YgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZmZlY3RlZCBieSB0aGUgbXV0YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICB0aGlzLnZuID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyLlxuICAgICAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHdoZW4gcGVyc2lzdGluZyB0byBJbmRleGVkRGIuXG4gICAgICovICAgIHN0YXRpYyBQdChlLCB0LCBuLCByKSB7XG4gICAgICAgIC8vIFRPRE8obWNnKTogRmlndXJlIG91dCB3aGF0IGNvbnN0cmFpbnRzIHRoZXJlIGFyZSBvbiB1c2VySURzXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xuICAgICAgICAvLyBGb3IgdGhlIG1vbWVudCBzdG9yZSB0aGVzZSB0b2dldGhlciBpbiB0aGUgc2FtZSBtdXRhdGlvbnMgdGFibGUgYXNzdW1pbmdcbiAgICAgICAgLy8gdGhhdCBlbXB0eSB1c2VySURzIGFyZW4ndCBhbGxvd2VkLlxuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChcIlwiICE9PSBlLnVpZCk7XG4gICAgICAgIGNvbnN0IGkgPSBlLmlzQXV0aGVudGljYXRlZCgpID8gZS51aWQgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJNdXRhdGlvblF1ZXVlKGksIHQsIG4sIHIpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KGUpIHtcbiAgICAgICAgbGV0IHQgPSAhMDtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuWih7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgIH0sICgoZSwgbiwgcikgPT4ge1xuICAgICAgICAgICAgdCA9ICExLCByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaChlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKSwgcyA9IF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKTtcbiAgICAgICAgLy8gVGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBpbiBDaHJvbWUgKGFuZCBGaXJlZm94KSBkb2VzIG5vdCBoYW5kbGVcbiAgICAgICAgLy8gY29tcG91bmQgaW5kaWNlcyB0aGF0IGluY2x1ZGUgYXV0by1nZW5lcmF0ZWQga2V5cyBjb3JyZWN0bHkuIFRvIGVuc3VyZVxuICAgICAgICAvLyB0aGF0IHRoZSBpbmRleCBlbnRyeSBpcyBhZGRlZCBjb3JyZWN0bHkgaW4gYWxsIGJyb3dzZXJzLCB3ZSBwZXJmb3JtIHR3b1xuICAgICAgICAvLyB3cml0ZXM6IFRoZSBmaXJzdCB3cml0ZSBpcyB1c2VkIHRvIHJldHJpZXZlIHRoZSBuZXh0IGF1dG8tZ2VuZXJhdGVkIEJhdGNoXG4gICAgICAgIC8vIElELCBhbmQgdGhlIHNlY29uZCB3cml0ZSBwb3B1bGF0ZXMgdGhlIGluZGV4IGFuZCBzdG9yZXMgdGhlIGFjdHVhbFxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03MDE5NzJcbiAgICAgICAgLy8gV2Ugd3JpdGUgYW4gZW1wdHkgb2JqZWN0IHRvIG9idGFpbiBrZXlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHMuYWRkKHt9KS5uZXh0KChvID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwibnVtYmVyXCIgPT0gdHlwZW9mIG8pO1xuICAgICAgICAgICAgY29uc3QgXyA9IG5ldyBNdXRhdGlvbkJhdGNoKG8sIHQsIG4sIHIpLCBhID0gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJNdXRhdGlvbkJhdGNoKGUsIHQsIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbi5iYXNlTXV0YXRpb25zLm1hcCgodCA9PiB0b011dGF0aW9uKGUuaHQsIHQpKSksIGkgPSBuLm11dGF0aW9ucy5tYXAoKHQgPT4gdG9NdXRhdGlvbihlLmh0LCB0KSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdCxcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hJZDogbi5iYXRjaElkLFxuICAgICAgICAgICAgICAgICAgICBsb2NhbFdyaXRlVGltZU1zOiBuLmxvY2FsV3JpdGVUaW1lLnRvTWlsbGlzKCksXG4gICAgICAgICAgICAgICAgICAgIGJhc2VNdXRhdGlvbnM6IHIsXG4gICAgICAgICAgICAgICAgICAgIG11dGF0aW9uczogaVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHRoaXMuc2VyaWFsaXplciwgdGhpcy51c2VySWQsIF8pLCB1ID0gW107XG4gICAgICAgICAgICBsZXQgYyA9IG5ldyBTb3J0ZWRTZXQoKChlLCB0KSA9PiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNhbm9uaWNhbFN0cmluZygpLCB0LmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvbktleSh0aGlzLnVzZXJJZCwgZS5rZXkucGF0aCwgbyk7XG4gICAgICAgICAgICAgICAgYyA9IGMuYWRkKGUua2V5LnBhdGgucG9wTGFzdCgpKSwgdS5wdXNoKHMucHV0KGEpKSwgdS5wdXNoKGkucHV0KHQsIHgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHUucHVzaCh0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCB0KSk7XG4gICAgICAgICAgICB9KSksIGUuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudm5bb10gPSBfLmtleXMoKTtcbiAgICAgICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IodSkubmV4dCgoKCkgPT4gXykpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IGUgPyAoX19QUklWQVRFX2hhcmRBc3NlcnQoZS51c2VySWQgPT09IHRoaXMudXNlcklkKSwgXG4gICAgICAgIF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkpIDogbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBrZXlzIGZvciB0aGUgbXV0YXRpb24gYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZC5cbiAgICAgKiBGb3IgcHJpbWFyeSBjbGllbnRzLCB0aGlzIG1ldGhvZCByZXR1cm5zIGBudWxsYCBhZnRlclxuICAgICAqIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAgaGFzIGJlZW4gY2FsbGVkLiBTZWNvbmRhcnkgY2xpZW50cyByZXR1cm4gYVxuICAgICAqIGNhY2hlZCByZXN1bHQgdW50aWwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBpcyBpbnZva2VkLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgRm4oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy52blt0XSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMudm5bdF0pIDogdGhpcy5sb29rdXBNdXRhdGlvbkJhdGNoKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5rZXlzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudm5bdF0gPSBuLCBuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdCArIDEsIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFsgdGhpcy51c2VySWQsIG4gXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKChlLCB0LCByKSA9PiB7XG4gICAgICAgICAgICB0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQgJiYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHQuYmF0Y2hJZCA+PSBuKSwgaSA9IF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgdCkpLCBcbiAgICAgICAgICAgIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgbiA9IC0xO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogdCxcbiAgICAgICAgICAgIHJldmVyc2U6ICEwXG4gICAgICAgIH0sICgoZSwgdCwgcikgPT4ge1xuICAgICAgICAgICAgbiA9IHQuYmF0Y2hJZCwgci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCAtMSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuRyhcInVzZXJNdXRhdGlvbnNJbmRleFwiLCB0KS5uZXh0KChlID0+IGUubWFwKChlID0+IF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkpKSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleShlLCB0KSB7XG4gICAgICAgIC8vIFNjYW4gdGhlIGRvY3VtZW50LW11dGF0aW9uIGluZGV4IHN0YXJ0aW5nIHdpdGggYSBwcmVmaXggc3RhcnRpbmcgd2l0aFxuICAgICAgICAvLyB0aGUgZ2l2ZW4gZG9jdW1lbnRLZXkuXG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uUHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgdC5wYXRoKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQobiksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKChuLCByLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbbywgXywgYV0gPSBuLCB1ID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChfKTtcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHRoaXMudXNlcklkICYmIHQucGF0aC5pc0VxdWFsKHUpKSBcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuZ2V0KGEpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZSkgdGhyb3cgZmFpbCgpO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUudXNlcklkID09PSB0aGlzLnVzZXJJZCksIGkucHVzaChfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIGUpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCB0LnBhdGgpLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKSwgbyA9IF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgICAgICB9LCAoKGUsIHIsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbcywgbywgX10gPSBlLCBhID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChvKTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9PT0gdGhpcy51c2VySWQgJiYgdC5wYXRoLmlzRXF1YWwoYSkgPyBuID0gbi5hZGQoXykgOiBpLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHIucHVzaChvKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKS5uZXh0KCgoKSA9PiB0aGlzLk1uKGUsIG4pKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQucGF0aCwgciA9IG4ubGVuZ3RoICsgMSwgaSA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCBuKSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSk7XG4gICAgICAgIC8vIENvbGxlY3QgdXAgdW5pcXVlIGJhdGNoSURzIGVuY291bnRlcmVkIGR1cmluZyBhIHNjYW4gb2YgdGhlIGluZGV4LiBVc2UgYVxuICAgICAgICAvLyBTb3J0ZWRTZXQgdG8gYWNjdW11bGF0ZSBiYXRjaCBJRHMgc28gdGhleSBjYW4gYmUgdHJhdmVyc2VkIGluIG9yZGVyIGluIGFcbiAgICAgICAgLy8gc2NhbiBvZiB0aGUgbWFpbiB0YWJsZS5cbiAgICAgICAgbGV0IG8gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChlLCB0LCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbcywgXywgYV0gPSBlLCB1ID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChfKTtcbiAgICAgICAgICAgIHMgPT09IHRoaXMudXNlcklkICYmIG4uaXNQcmVmaXhPZih1KSA/IFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxuICAgICAgICAgICAgLy8gcXVlcnkgcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnXG4gICAgICAgICAgICAvLyBjYW4ndCBtYXRjaCB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIHUubGVuZ3RoID09PSByICYmIChvID0gby5hZGQoYSkpIDogaS5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLk1uKGUsIG8pKSk7XG4gICAgfVxuICAgIE1uKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCByID0gW107XG4gICAgICAgIC8vIFRPRE8ocm9ja3dvb2QpOiBJbXBsZW1lbnQgdGhpcyB1c2luZyBpdGVyYXRlLlxuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHIucHVzaChfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBlKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS51c2VySWQgPT09IHRoaXMudXNlcklkKSwgbi5wdXNoKF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICByZXR1cm4gcmVtb3ZlTXV0YXRpb25CYXRjaChlLnVlLCB0aGlzLnVzZXJJZCwgdCkubmV4dCgobiA9PiAoZS5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnhuKHQuYmF0Y2hJZCk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gobiwgKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhY2hlZCBrZXlzIGZvciBhIG11dGF0aW9uIGJhdGNoLiBUaGlzIG1ldGhvZCBzaG91bGQgYmVcbiAgICAgKiBjYWxsZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgYWZ0ZXIgdGhleSBwcm9jZXNzIG11dGF0aW9uIHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBub3QgaGF2ZSB0byBiZSBjYWxsZWQgZnJvbSBwcmltYXJ5IGNsaWVudHMgYXNcbiAgICAgKiB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBlbnRyaWVzIGFyZSBjbGVhcmVkIHdoZW4gYW4gYWNrbm93bGVkZ2VkIG9yXG4gICAgICogcmVqZWN0ZWQgYmF0Y2ggaXMgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgeG4oZSkge1xuICAgICAgICBkZWxldGUgdGhpcy52bltlXTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2soZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VtcHR5KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZXJlIGFyZSBubyBlbnRyaWVzIGluIHRoZSBkb2N1bWVudE11dGF0aW9ucyBpbmRleCBpZlxuICAgICAgICAgICAgLy8gdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoXG4gICAgICAgICAgICAvKipcbiAqIENyZWF0ZXMgYSBbdXNlcklkXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleCB0byBpdGVyYXRlXG4gKiBvdmVyIGFsbCBvZiBhIHVzZXIncyBkb2N1bWVudCBtdXRhdGlvbnMuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JVc2VyKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWyBlIF07XG4gICAgICAgICAgICB9KHRoaXMudXNlcklkKSksIHIgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgICAgICByYW5nZTogblxuICAgICAgICAgICAgfSwgKChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVbMF0gPT09IHRoaXMudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKGVbMV0pO1xuICAgICAgICAgICAgICAgICAgICByLnB1c2godCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG4uZG9uZSgpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgwID09PSByLmxlbmd0aCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uUXVldWVDb250YWluc0tleShlLCB0aGlzLnVzZXJJZCwgdCk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkgKHN0YXRlIGlzIGhlbGQgaW4gbWVtb3J5IGluIG90aGVyIGNsaWVudHMpLlxuICAgIC8qKiBSZXR1cm5zIHRoZSBtdXRhdGlvbiBxdWV1ZSdzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLiAqL1xuICAgIE9uKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlc1N0b3JlKGUpLmdldCh0aGlzLnVzZXJJZCkubmV4dCgoZSA9PiBlIHx8IHtcbiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsXG4gICAgICAgICAgICBsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZDogLTEsXG4gICAgICAgICAgICBsYXN0U3RyZWFtVG9rZW46IFwiXCJcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIgY29udGFpbnMgYSBwZW5kaW5nXG4gKiAgICAgICAgIG11dGF0aW9uIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uUHJlZml4Rm9yUGF0aCh0LCBuLnBhdGgpLCBpID0gclsxXSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQocik7XG4gICAgbGV0IG8gPSAhMTtcbiAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuWih7XG4gICAgICAgIHJhbmdlOiBzLFxuICAgICAgICBZOiAhMFxuICAgIH0sICgoZSwgbiwgcikgPT4ge1xuICAgICAgICBjb25zdCBbcywgXywgLypiYXRjaElEKi8gYV0gPSBlO1xuICAgICAgICBzID09PSB0ICYmIF8gPT09IGkgJiYgKG8gPSAhMCksIHIuZG9uZSgpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBvKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJtdXRhdGlvbnNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJkb2N1bWVudE11dGF0aW9uc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZXNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcIm11dGF0aW9uUXVldWVzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIE9mZnNldCB0byBlbnN1cmUgbm9uLW92ZXJsYXBwaW5nIHRhcmdldCBpZHMuICovXG4vKipcbiAqIEdlbmVyYXRlcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgdGFyZ2V0IElEcyBmb3Igc2VuZGluZyB0YXJnZXRzIHRvIHRoZVxuICogd2F0Y2ggc3RyZWFtLlxuICpcbiAqIFRoZSBjbGllbnQgY29uc3RydWN0cyB0d28gZ2VuZXJhdG9ycywgb25lIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBhbmQgb25lIGZvclxuICogZm9yIHRoZSBzeW5jIGVuZ2luZSAodG8gZ2VuZXJhdGUgbGltYm8gZG9jdW1lbnRzIHRhcmdldHMpLiBUaGVzZVxuICogZ2VuZXJhdG9ycyBwcm9kdWNlIG5vbi1vdmVybGFwcGluZyBJRHMgKGJ5IHVzaW5nIGV2ZW4gYW5kIG9kZCBJRHNcbiAqIHJlc3BlY3RpdmVseSkuXG4gKlxuICogQnkgc2VwYXJhdGluZyB0aGUgdGFyZ2V0IElEIHNwYWNlLCB0aGUgcXVlcnkgY2FjaGUgY2FuIGdlbmVyYXRlIHRhcmdldCBJRHNcbiAqIHRoYXQgcGVyc2lzdCBhY3Jvc3MgY2xpZW50IHJlc3RhcnRzLCB3aGlsZSBzeW5jIGVuZ2luZSBjYW4gaW5kZXBlbmRlbnRseVxuICogZ2VuZXJhdGUgaW4tbWVtb3J5IHRhcmdldCBJRHMgdGhhdCBhcmUgdHJhbnNpZW50IGFuZCBjYW4gYmUgcmV1c2VkIGFmdGVyIGFcbiAqIHJlc3RhcnQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLk5uID0gZTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTm4gKz0gMiwgdGhpcy5ObjtcbiAgICB9XG4gICAgc3RhdGljIEJuKCkge1xuICAgICAgICAvLyBUaGUgdGFyZ2V0IGNhY2hlIGdlbmVyYXRvciBtdXN0IHJldHVybiAnMicgaW4gaXRzIGZpcnN0IGNhbGwgdG8gYG5leHQoKWBcbiAgICAgICAgLy8gYXMgdGhlcmUgaXMgbm8gZGlmZmVyZW50aWF0aW9uIGluIHRoZSBwcm90b2NvbCBsYXllciBiZXR3ZWVuIGFuIHVuc2V0XG4gICAgICAgIC8vIG51bWJlciBhbmQgdGhlIG51bWJlciAnMCcuIElmIHdlIHdlcmUgdG8gc2VudCBhIHRhcmdldCB3aXRoIHRhcmdldCBJRFxuICAgICAgICAvLyAnMCcsIHRoZSBiYWNrZW5kIHdvdWxkIGNvbnNpZGVyIGl0IHVuc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggaXRzIG93biBJRC5cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IoMCk7XG4gICAgfVxuICAgIHN0YXRpYyBMbigpIHtcbiAgICAgICAgLy8gU3luYyBlbmdpbmUgYXNzaWducyB0YXJnZXQgSURzIGZvciBsaW1ibyBkb2N1bWVudCBkZXRlY3Rpb24uXG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yKC0xKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJUYXJnZXRDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gZSwgdGhpcy5zZXJpYWxpemVyID0gdDtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCBjYWNoZSBnbG9iYWwgbWV0YWRhdGEgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIHNpbmNlXG4gICAgLy8gc29tZSBvZiBpdCAoaW4gcGFydGljdWxhciBgaGlnaGVzdFRhcmdldElkYCkgY2FuIGJlIG1vZGlmaWVkIGJ5IHNlY29uZGFyeVxuICAgIC8vIHRhYnMuIFdlIGNvdWxkIHBlcmhhcHMgYmUgbW9yZSBncmFudWxhciAoYW5kIGUuZy4gc3RpbGwgY2FjaGVcbiAgICAvLyBgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbmAgaW4gbWVtb3J5KSBidXQgZm9yIHNpbXBsaWNpdHkgd2UgY3VycmVudGx5IGdvXG4gICAgLy8gdG8gSW5kZXhlZERiIHdoZW5ldmVyIHdlIG5lZWQgdG8gcmVhZCBtZXRhZGF0YS4gV2UgY2FuIHJldmlzaXQgaWYgaXQgdHVybnNcbiAgICAvLyBvdXQgdG8gaGF2ZSBhIG1lYW5pbmdmdWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgIGFsbG9jYXRlVGFyZ2V0SWQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rbihlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yKHQuaGlnaGVzdFRhcmdldElkKTtcbiAgICAgICAgICAgIHJldHVybiB0LmhpZ2hlc3RUYXJnZXRJZCA9IG4ubmV4dCgpLCB0aGlzLnFuKGUsIHQpLm5leHQoKCgpID0+IHQuaGlnaGVzdFRhcmdldElkKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtuKGUpLm5leHQoKGUgPT4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAobmV3IFRpbWVzdGFtcChlLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24uc2Vjb25kcywgZS5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLm5hbm9zZWNvbmRzKSkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua24oZSkubmV4dCgoZSA9PiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5rbihlKS5uZXh0KChyID0+IChyLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IHQsIG4gJiYgKHIubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4udG9UaW1lc3RhbXAoKSksIFxuICAgICAgICB0ID4gci5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKHIuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdCksIHRoaXMucW4oZSwgcikpKSk7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5RbihlLCB0KS5uZXh0KCgoKSA9PiB0aGlzLmtuKGUpLm5leHQoKG4gPT4gKG4udGFyZ2V0Q291bnQgKz0gMSwgdGhpcy5Lbih0LCBuKSwgXG4gICAgICAgIHRoaXMucW4oZSwgbikpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFuKGUsIHQpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdC50YXJnZXRJZCkubmV4dCgoKCkgPT4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5kZWxldGUodC50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiB0aGlzLmtuKGUpKSkubmV4dCgodCA9PiAoX19QUklWQVRFX2hhcmRBc3NlcnQodC50YXJnZXRDb3VudCA+IDApLCBcbiAgICAgICAgdC50YXJnZXRDb3VudCAtPSAxLCB0aGlzLnFuKGUsIHQpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEcm9wcyBhbnkgdGFyZ2V0cyB3aXRoIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kLCBleGNlcHRpbmcgdGhvc2VcbiAgICAgKiBwcmVzZW50IGluIGBhY3RpdmVUYXJnZXRJZHNgLiBEb2N1bWVudCBhc3NvY2lhdGlvbnMgZm9yIHRoZSByZW1vdmVkIHRhcmdldHMgYXJlIGFsc28gcmVtb3ZlZC5cbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGFyZ2V0cyByZW1vdmVkLlxuICAgICAqLyAgICByZW1vdmVUYXJnZXRzKGUsIHQsIG4pIHtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLlooKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBfID0gX19QUklWQVRFX2Zyb21EYlRhcmdldChvKTtcbiAgICAgICAgICAgIF8uc2VxdWVuY2VOdW1iZXIgPD0gdCAmJiBudWxsID09PSBuLmdldChfLnRhcmdldElkKSAmJiAocisrLCBpLnB1c2godGhpcy5yZW1vdmVUYXJnZXREYXRhKGUsIF8pKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKSkpLm5leHQoKCgpID0+IHIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5aKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobik7XG4gICAgICAgICAgICB0KHIpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGtuKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nbG9iYWxUYXJnZXRTdG9yZShlKS5nZXQoXCJ0YXJnZXRHbG9iYWxLZXlcIikubmV4dCgoZSA9PiAoX19QUklWQVRFX2hhcmRBc3NlcnQobnVsbCAhPT0gZSksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICBxbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZ2xvYmFsVGFyZ2V0U3RvcmUoZSkucHV0KFwidGFyZ2V0R2xvYmFsS2V5XCIsIHQpO1xuICAgIH1cbiAgICBRbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLnB1dChfX1BSSVZBVEVfdG9EYlRhcmdldCh0aGlzLnNlcmlhbGl6ZXIsIHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4tcGxhY2UgdXBkYXRlcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEgdG8gYWNjb3VudCBmb3IgdmFsdWVzIGluIHRoZSBnaXZlblxuICAgICAqIFRhcmdldERhdGEuIFNhdmluZyBpcyBkb25lIHNlcGFyYXRlbHkuIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSB3ZXJlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxuICAgICAqLyAgICBLbihlLCB0KSB7XG4gICAgICAgIGxldCBuID0gITE7XG4gICAgICAgIHJldHVybiBlLnRhcmdldElkID4gdC5oaWdoZXN0VGFyZ2V0SWQgJiYgKHQuaGlnaGVzdFRhcmdldElkID0gZS50YXJnZXRJZCwgbiA9ICEwKSwgXG4gICAgICAgIGUuc2VxdWVuY2VOdW1iZXIgPiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAodC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlLnNlcXVlbmNlTnVtYmVyLCBcbiAgICAgICAgbiA9ICEwKSwgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rbihlKS5uZXh0KChlID0+IGUudGFyZ2V0Q291bnQpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcbiAgICAgICAgLy8gY2Fub25pY2FsSWQgdmFsdWVzIGFyZSBub3QgcmVxdWlyZWQgdG8gYmUgdW5pcXVlIHBlciB0YXJnZXQuIFRoaXMgcXVlcnlcbiAgICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4IHRvIGJlIGVmZmljaWVudC5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldCh0KSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgbiwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgbiwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgcmFuZ2U6IHIsXG4gICAgICAgICAgICBpbmRleDogXCJxdWVyeVRhcmdldHNJbmRleFwiXG4gICAgICAgIH0sICgoZSwgbiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobik7XG4gICAgICAgICAgICAvLyBBZnRlciBmaW5kaW5nIGEgcG90ZW50aWFsIG1hdGNoLCBjaGVjayB0aGF0IHRoZSB0YXJnZXQgaXNcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX3RhcmdldEVxdWFscyh0LCBzLnRhcmdldCkgJiYgKGkgPSBzLCByLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyhlLCB0LCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCByID0gW10sIGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgpO1xuICAgICAgICAgICAgci5wdXNoKGkucHV0KHtcbiAgICAgICAgICAgICAgICB0YXJnZXRJZDogbixcbiAgICAgICAgICAgICAgICBwYXRoOiBzXG4gICAgICAgICAgICB9KSksIHIucHVzaCh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZShlLCBuLCB0KSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3Iocik7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyhlLCB0LCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKFsgci5kZWxldGUoWyBuLCBpIF0pLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZShlLCBuLCB0KSBdKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdCBdLCBbIHQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHIpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIHQgXSwgWyB0ICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCksIHIgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKTtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHIuWih7XG4gICAgICAgICAgICByYW5nZTogbixcbiAgICAgICAgICAgIFk6ICEwXG4gICAgICAgIH0sICgoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoZVsxXSksIHMgPSBuZXcgRG9jdW1lbnRLZXkocik7XG4gICAgICAgICAgICBpID0gaS5hZGQocyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodC5wYXRoKSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgbiBdLCBbIF9fUFJJVkFURV9pbW1lZGlhdGVTdWNjZXNzb3IobikgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50VGFyZ2V0c0luZGV4XCIsXG4gICAgICAgICAgICBZOiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgoW2UsIHRdLCBuLCByKSA9PiB7XG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xuICAgICAgICAgICAgLy8gRm9yIHRoZSB0YXJnZXQgY2FjaGUsIGNvbnRhaW5pbmcgdGhlIGRvY3VtZW50IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBwYXJ0IG9mIHNvbWVcbiAgICAgICAgICAgIC8vIHRhcmdldC5cbiAgICAgICAgICAgIDAgIT09IGUgJiYgKGkrKywgci5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSA+IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBUYXJnZXREYXRhIGVudHJ5IGJ5IHRhcmdldCBJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXQgSUQgb2YgdGhlIFRhcmdldERhdGEgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIFRhcmdldERhdGEgZW50cnksIG9yIG51bGwgaWYgdGhlIGNhY2hlIGhhcyBubyBlbnRyeSBmb3JcbiAgICAgKiB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgbHQoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5nZXQodCkubmV4dCgoZSA9PiBlID8gX19QUklWQVRFX2Zyb21EYlRhcmdldChlKSA6IG51bGwpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBxdWVyaWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwidGFyZ2V0c1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHRhcmdldCBnbG9iYWxzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZ2xvYmFsVGFyZ2V0U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJ0YXJnZXRHbG9iYWxcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCB0YXJnZXQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwidGFyZ2V0RG9jdW1lbnRzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYnVmZmVyRW50cnlDb21wYXJhdG9yKFtlLCB0XSwgW24sIHJdKSB7XG4gICAgY29uc3QgaSA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUsIG4pO1xuICAgIHJldHVybiAwID09PSBpID8gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodCwgcikgOiBpO1xufVxuXG4vKipcbiAqIFVzZWQgdG8gY2FsY3VsYXRlIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLiBLZWVwcyBhIHJvbGxpbmcgYnVmZmVyIG9mIHRoZVxuICogbG93ZXN0IG4gdmFsdWVzIHBhc3NlZCB0byBgYWRkRWxlbWVudGAsIGFuZCBmaW5hbGx5IHJlcG9ydHMgdGhlIGxhcmdlc3Qgb2ZcbiAqIHRoZW0gaW4gYG1heFZhbHVlYC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuJG4gPSBlLCB0aGlzLmJ1ZmZlciA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX2J1ZmZlckVudHJ5Q29tcGFyYXRvciksIHRoaXMuVW4gPSAwO1xuICAgIH1cbiAgICBXbigpIHtcbiAgICAgICAgcmV0dXJuICsrdGhpcy5VbjtcbiAgICB9XG4gICAgR24oZSkge1xuICAgICAgICBjb25zdCB0ID0gWyBlLCB0aGlzLlduKCkgXTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnNpemUgPCB0aGlzLiRuKSB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmFkZCh0KTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5idWZmZXIubGFzdCgpO1xuICAgICAgICAgICAgX19QUklWQVRFX2J1ZmZlckVudHJ5Q29tcGFyYXRvcih0LCBlKSA8IDAgJiYgKHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuZGVsZXRlKGUpLmFkZCh0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICAvLyBHdWFyYW50ZWVkIHRvIGJlIG5vbi1lbXB0eS4gSWYgd2UgZGVjaWRlIHdlIGFyZSBub3QgY29sbGVjdGluZyBhbnlcbiAgICAgICAgLy8gc2VxdWVuY2UgbnVtYmVycywgbnRoU2VxdWVuY2VOdW1iZXIgYmVsb3cgc2hvcnQtY2lyY3VpdHMuIElmIHdlIGhhdmVcbiAgICAgICAgLy8gZGVjaWRlZCB0aGF0IHdlIGFyZSBjb2xsZWN0aW5nIG4gc2VxdWVuY2UgbnVtYmVycywgaXQncyBiZWNhdXNlIG4gaXMgc29tZVxuICAgICAgICAvLyBwZXJjZW50YWdlIG9mIHRoZSBleGlzdGluZyBzZXF1ZW5jZSBudW1iZXJzLiBUaGF0IG1lYW5zIHdlIHNob3VsZCBuZXZlclxuICAgICAgICAvLyBiZSBpbiBhIHNpdHVhdGlvbiB3aGVyZSB3ZSBhcmUgY29sbGVjdGluZyBzZXF1ZW5jZSBudW1iZXJzIGJ1dCBkb24ndFxuICAgICAgICAvLyBhY3R1YWxseSBoYXZlIGFueS5cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxhc3QoKVswXTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gSXQgaGFuZGxlcyBjaGVja2luZ1xuICogd2hldGhlciBvciBub3QgR0MgaXMgZW5hYmxlZCwgYXMgd2VsbCBhcyB3aGljaCBkZWxheSB0byB1c2UgYmVmb3JlIHRoZSBuZXh0IHJ1bi5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTHJ1U2NoZWR1bGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IGUsIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMubG9jYWxTdG9yZSA9IG4sIHRoaXMuem4gPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgLTEgIT09IHRoaXMuZ2FyYmFnZUNvbGxlY3Rvci5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCAmJiB0aGlzLmpuKDZlNCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuem4gJiYgKHRoaXMuem4uY2FuY2VsKCksIHRoaXMuem4gPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLnpuO1xuICAgIH1cbiAgICBqbihlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBzY2hlZHVsZWQgaW4gJHtlfW1zYCksIFxuICAgICAgICB0aGlzLnpuID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwibHJ1X2dhcmJhZ2VfY29sbGVjdGlvblwiIC8qIFRpbWVySWQuTHJ1R2FyYmFnZUNvbGxlY3Rpb24gKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy56biA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9jYWxTdG9yZS5jb2xsZWN0R2FyYmFnZSh0aGlzLmdhcmJhZ2VDb2xsZWN0b3IpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkgPyBfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiSWdub3JpbmcgSW5kZXhlZERCIGVycm9yIGR1cmluZyBnYXJiYWdlIGNvbGxlY3Rpb246IFwiLCBlKSA6IGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmpuKDNlNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8gY2xhc3MgX19QUklWQVRFX0xydUdhcmJhZ2VDb2xsZWN0b3JJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuSG4gPSBlLCB0aGlzLnBhcmFtcyA9IHQ7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVRhcmdldENvdW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSG4uSm4oZSkubmV4dCgoZSA9PiBNYXRoLmZsb29yKHQgLyAxMDAgKiBlKSkpO1xuICAgIH1cbiAgICBudGhTZXF1ZW5jZU51bWJlcihlLCB0KSB7XG4gICAgICAgIGlmICgwID09PSB0KSByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5Ibi5mb3JFYWNoVGFyZ2V0KGUsIChlID0+IG4uR24oZS5zZXF1ZW5jZU51bWJlcikpKS5uZXh0KCgoKSA9PiB0aGlzLkhuLlluKGUsIChlID0+IG4uR24oZSkpKSkpLm5leHQoKCgpID0+IG4ubWF4VmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhuLnJlbW92ZVRhcmdldHMoZSwgdCwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSG4ucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCk7XG4gICAgfVxuICAgIGNvbGxlY3QoZSwgdCkge1xuICAgICAgICByZXR1cm4gLTEgPT09IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZFwiKSwgXG4gICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKFRlKSkgOiB0aGlzLmdldENhY2hlU2l6ZShlKS5uZXh0KChuID0+IG4gPCB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBDYWNoZSBzaXplICR7bn0gaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgJHt0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkfWApLCBcbiAgICAgICAgVGUpIDogdGhpcy5abihlLCB0KSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Ibi5nZXRDYWNoZVNpemUoZSk7XG4gICAgfVxuICAgIFpuKGUsIHQpIHtcbiAgICAgICAgbGV0IG4sIHIsIGksIHMsIG8sIGEsIHU7XG4gICAgICAgIGNvbnN0IGMgPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudChlLCB0aGlzLnBhcmFtcy5wZXJjZW50aWxlVG9Db2xsZWN0KS5uZXh0KCh0ID0+IChcbiAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxuICAgICAgICB0ID4gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBDYXBwaW5nIHNlcXVlbmNlIG51bWJlcnMgdG8gY29sbGVjdCBkb3duIHRvIHRoZSBtYXhpbXVtIG9mICR7dGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdH0gZnJvbSAke3R9YCksIFxuICAgICAgICByID0gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCkgOiByID0gdCwgcyA9IERhdGUubm93KCksIHRoaXMubnRoU2VxdWVuY2VOdW1iZXIoZSwgcikpKSkubmV4dCgociA9PiAobiA9IHIsIFxuICAgICAgICBvID0gRGF0ZS5ub3coKSwgdGhpcy5yZW1vdmVUYXJnZXRzKGUsIG4sIHQpKSkpLm5leHQoKHQgPT4gKGkgPSB0LCBhID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHRoaXMucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgbikpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAodSA9IERhdGUubm93KCksIF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiAke3MgLSBjfW1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkICR7cn0gaW4gYCArIChvIC0gcykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2l9IHRhcmdldHMgaW4gYCArIChhIC0gbykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2V9IGRvY3VtZW50cyBpbiBgICsgKHUgLSBhKSArIFwibXNcXG5cIiArIGBUb3RhbCBEdXJhdGlvbjogJHt1IC0gY31tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBkaWRSdW46ICEwLFxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogcixcbiAgICAgICAgICAgICAgICB0YXJnZXRzUmVtb3ZlZDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudHNSZW1vdmVkOiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld0xydUdhcmJhZ2VDb2xsZWN0b3IoZSwgdCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xydUdhcmJhZ2VDb2xsZWN0b3JJbXBsKGUsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJMcnVEZWxlZ2F0ZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5kYiA9IGUsIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IF9fUFJJVkFURV9uZXdMcnVHYXJiYWdlQ29sbGVjdG9yKHRoaXMsIHQpO1xuICAgIH1cbiAgICBKbihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLlhuKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KGUpLm5leHQoKGUgPT4gdC5uZXh0KCh0ID0+IGUgKyB0KSkpKTtcbiAgICB9XG4gICAgWG4oZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLlluKGUsIChlID0+IHtcbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldChlLCB0KTtcbiAgICB9XG4gICAgWW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcihlLCAoKGUsIG4pID0+IHQobikpKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIG4pO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHMoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHMoZSwgdCwgbik7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55dGhpbmcgd291bGQgcHJldmVudCB0aGlzIGRvY3VtZW50IGZyb20gYmVpbmcgZ2FyYmFnZVxuICAgICAqIGNvbGxlY3RlZCwgZ2l2ZW4gdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaXMgbm90IHByZXNlbnQgaW4gYW55XG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXG4gICAgICogdGhlIGNvbGxlY3Rpb24gcnVuLlxuICAgICAqLyAgICB0cihlLCB0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZXNDb250YWluS2V5KGUsIHQpIHtcbiAgICAgICAgICAgIGxldCBuID0gITE7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uUXVldWVzU3RvcmUoZSkuWCgociA9PiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5KGUsIHIsIHQpLm5leHQoKGUgPT4gKGUgJiYgKG4gPSAhMCksIFxuICAgICAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoIWUpKSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgICAgICB9KGUsIHQpO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKSwgciA9IFtdO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLmVyKGUsICgocywgbykgPT4ge1xuICAgICAgICAgICAgaWYgKG8gPD0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnRyKGUsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXQpIFxuICAgICAgICAgICAgICAgICAgICAvLyBPdXIgc2l6ZSBhY2NvdW50aW5nIHJlcXVpcmVzIHVzIHRvIHJlYWQgYWxsIGRvY3VtZW50cyBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZpbmcgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkrKywgbi5nZXRFbnRyeShlLCBzKS5uZXh0KCgoKSA9PiAobi5yZW1vdmVFbnRyeShzLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpLCBcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSkuZGVsZXRlKGZ1bmN0aW9uIF9fUFJJVkFURV9zZW50aW5lbEtleSQxKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZS5wYXRoKSBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogQHJldHVybnMgQSB2YWx1ZSBzdWl0YWJsZSBmb3Igd3JpdGluZyBhIHNlbnRpbmVsIHJvdyBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50XG4gKiBzdG9yZS5cbiAqLyAocykpKSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByLnB1c2godCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKSkpLm5leHQoKCgpID0+IG4uYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LndpdGhTZXF1ZW5jZU51bWJlcihlLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JpdGVTZW50aW5lbEtleShlLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZWFjaCBkb2N1bWVudCBpbiB0aGUgY2FjaGUgdGhhdCBpcyAnb3JwaGFuZWQnLiBPcnBoYW5lZFxuICAgICAqIG1lYW5zIG5vdCBhIHBhcnQgb2YgYW55IHRhcmdldCwgc28gdGhlIG9ubHkgZW50cnkgaW4gdGhlIHRhcmdldC1kb2N1bWVudCBpbmRleCBmb3JcbiAgICAgKiB0aGF0IGRvY3VtZW50IHdpbGwgYmUgdGhlIHNlbnRpbmVsIHJvdyAodGFyZ2V0SWQgMCksIHdoaWNoIHdpbGwgYWxzbyBoYXZlIHRoZSBzZXF1ZW5jZVxuICAgICAqIG51bWJlciBmb3IgdGhlIGxhc3QgdGltZSB0aGUgZG9jdW1lbnQgd2FzIGFjY2Vzc2VkLlxuICAgICAqLyAgICBlcihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKTtcbiAgICAgICAgbGV0IHIsIGkgPSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWU7XG4gICAgICAgIHJldHVybiBuLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIlxuICAgICAgICB9LCAoKFtlLCBuXSwge3BhdGg6IHMsIHNlcXVlbmNlTnVtYmVyOiBvfSkgPT4ge1xuICAgICAgICAgICAgMCA9PT0gZSA/IChcbiAgICAgICAgICAgIC8vIGlmIG5leHRUb1JlcG9ydCBpcyB2YWxpZCwgcmVwb3J0IGl0LCB0aGlzIGlzIGEgbmV3IGtleSBzbyB0aGVcbiAgICAgICAgICAgIC8vIGxhc3Qgb25lIG11c3Qgbm90IGJlIGEgbWVtYmVyIG9mIGFueSB0YXJnZXRzLlxuICAgICAgICAgICAgaSAhPT0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlICYmIHQobmV3IERvY3VtZW50S2V5KF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgocikpLCBpKSwgXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIHRoaXMgc2VxdWVuY2UgbnVtYmVyLiBJdCdzIHRoZSBuZXh0IG9uZSB3ZVxuICAgICAgICAgICAgLy8gbWlnaHQgcmVwb3J0LCBpZiB3ZSBkb24ndCBmaW5kIGFueSB0YXJnZXRzIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBzZXF1ZW5jZSBudW1iZXIgbXVzdCBiZSBkZWZpbmVkIHdoZW4gdGhlIHRhcmdldElkXG4gICAgICAgICAgICAvLyBpcyAwLlxuICAgICAgICAgICAgaSA9IG8sIHIgPSBzKSA6IFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSBpbnZhbGlkLCB3ZSBrbm93IHdlIGRvbid0IG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAvLyB0aGlzIG9uZSBzaW5jZSB3ZSBmb3VuZCBhIHRhcmdldCBmb3IgaXQuXG4gICAgICAgICAgICBpID0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2luY2Ugd2UgcmVwb3J0IHNlcXVlbmNlIG51bWJlcnMgYWZ0ZXIgZ2V0dGluZyB0byB0aGUgbmV4dCBrZXksIHdlXG4gICAgICAgICAgICAvLyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBsYXN0IGtleSB3ZSBpdGVyYXRlZCBvdmVyIHdhcyBhbiBvcnBoYW5lZFxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgYW5kIHJlcG9ydCBpdC5cbiAgICAgICAgICAgIGkgIT09IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSAmJiB0KG5ldyBEb2N1bWVudEtleShfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHIpKSwgaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUoZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfd3JpdGVTZW50aW5lbEtleShlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpLnB1dChmdW5jdGlvbiBfX1BSSVZBVEVfc2VudGluZWxSb3coZSwgdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICBwYXRoOiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUucGF0aCksXG4gICAgICAgICAgICBzZXF1ZW5jZU51bWJlcjogdFxuICAgICAgICB9O1xuICAgIH0odCwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGJ1ZmZlciBvZiBlbnRyaWVzIHRvIGJlIHdyaXR0ZW4gdG8gYSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICogSXQgY2FuIGJlIHVzZWQgdG8gYmF0Y2ggdXAgYSBzZXQgb2YgY2hhbmdlcyB0byBiZSB3cml0dGVuIHRvIHRoZSBjYWNoZSwgYnV0XG4gKiBhZGRpdGlvbmFsbHkgc3VwcG9ydHMgcmVhZGluZyBlbnRyaWVzIGJhY2sgd2l0aCB0aGUgYGdldEVudHJ5KClgIG1ldGhvZCxcbiAqIGZhbGxpbmcgYmFjayB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlIGlmIG5vIGVudHJ5IGlzXG4gKiBidWZmZXJlZC5cbiAqXG4gKiBFbnRyaWVzIGFkZGVkIHRvIHRoZSBjYWNoZSAqbXVzdCogYmUgcmVhZCBmaXJzdC4gVGhpcyBpcyB0byBmYWNpbGl0YXRlXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZSBkZWx0YSBvZiB0aGUgcGVuZGluZyBjaGFuZ2VzLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBjbGFzcyB3YXMgaW1wbGVtZW50ZWQgdGhlbiByZW1vdmVkIGZyb20gb3RoZXIgcGxhdGZvcm1zLlxuICogSWYgYnl0ZS1jb3VudGluZyBlbmRzIHVwIGJlaW5nIG5lZWRlZCBvbiB0aGUgb3RoZXIgcGxhdGZvcm1zLCBjb25zaWRlclxuICogcG9ydGluZyB0aGlzIGNsYXNzIGFzIHBhcnQgb2YgdGhhdCBpbXBsZW1lbnRhdGlvbiB3b3JrLlxuICovIGNsYXNzIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleSB0byB0aGUgbmV3IGNhY2hlIGVudHJ5IHRoYXQgc2hvdWxkIGJlIHdyaXR0ZW4uXG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IG5ldyBPYmplY3RNYXAoKGUgPT4gZS50b1N0cmluZygpKSwgKChlLCB0KSA9PiBlLmlzRXF1YWwodCkpKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUuYWRkRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSBtb2RpZnkgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIGFkZEVudHJ5KGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQoZS5rZXksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KGUsIHQpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQoZSwgTXV0YWJsZURvY3VtZW50Lm5ld0ludmFsaWREb2N1bWVudChlKS5zZXRSZWFkVGltZSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS4gVGhlIGJ1ZmZlcmVkIGNoYW5nZXMgd2lsbCBmaXJzdCBiZSBjaGVja2VkLFxuICAgICAqIGFuZCBpZiBubyBidWZmZXJlZCBjaGFuZ2UgYXBwbGllcywgdGhpcyB3aWxsIGZvcndhcmQgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmIHdlIGhhdmUgbm90aGluZ1xuICAgICAqIGNhY2hlZC5cbiAgICAgKi8gICAgZ2V0RW50cnkoZSwgdCkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY2hhbmdlcy5nZXQodCk7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IG4gPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKSA6IHRoaXMuZ2V0RnJvbUNhY2hlKGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBmb3J3YXJkaW5nIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBjYWNoZWQgZG9jdW1lbnRzLCBpbmRleGVkIGJ5IGtleS4gSWYgYW4gZW50cnkgY2Fubm90IGJlXG4gICAgICogICAgIGZvdW5kLCB0aGUgY29ycmVzcG9uZGluZyBrZXkgd2lsbCBiZSBtYXBwZWQgdG8gYW4gaW52YWxpZCBkb2N1bWVudC5cbiAgICAgKi8gICAgZ2V0RW50cmllcyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbEZyb21DYWNoZShlLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBidWZmZXJlZCBjaGFuZ2VzIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUsIHVzaW5nXG4gICAgICogdGhlIHByb3ZpZGVkIHRyYW5zYWN0aW9uLlxuICAgICAqLyAgICBhcHBseShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICEwLCB0aGlzLmFwcGx5Q2hhbmdlcyhlKTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBhc3NlcnQgdGhpcy5jaGFuZ2VzIGlzIG5vdCBudWxsICAqLyAgICBhc3NlcnROb3RBcHBsaWVkKCkge31cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBlO1xuICAgIH1cbiAgICBzZXRJbmRleE1hbmFnZXIoZSkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJpZXMgdG8gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIGFkZEVudHJ5KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5wdXQobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBkb2N1bWVudCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLmRlbGV0ZShcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgdmlhIHRoZSBwcmltYXJ5IGtleSBvZlxuICogdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9kYlJlYWRUaW1lS2V5KGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnBhdGgudG9BcnJheSgpO1xuICAgICAgICAgICAgcmV0dXJuIFsgXG4gICAgICAgICAgICAvKiBwcmVmaXggcGF0aCAqLyBuLnNsaWNlKDAsIG4ubGVuZ3RoIC0gMiksIFxuICAgICAgICAgICAgLyogY29sbGVjdGlvbiBpZCAqLyBuW24ubGVuZ3RoIC0gMl0sIF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KHQpLCBcbiAgICAgICAgICAgIC8qIGRvY3VtZW50IGlkICovIG5bbi5sZW5ndGggLSAxXSBdO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIG9uIHRoZVxuICogYERiUmVtb3RlRG9jdW1lbnREb2N1bWVudENvbGxlY3Rpb25Hcm91cEluZGV4YCBpbmRleC5cbiAqLyAodCwgbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjdXJyZW50IGNhY2hlIHNpemUuXG4gICAgICpcbiAgICAgKiBDYWxsZXJzIHRvIGBhZGRFbnRyeSgpYCBhbmQgYHJlbW92ZUVudHJ5KClgICptdXN0KiBjYWxsIHRoaXMgYWZ0ZXJ3YXJkcyB0byB1cGRhdGUgdGhlXG4gICAgICogY2FjaGUncyBtZXRhZGF0YS5cbiAgICAgKi8gICAgdXBkYXRlTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YShlKS5uZXh0KChuID0+IChuLmJ5dGVTaXplICs9IHQsIHRoaXMubnIoZSwgbikpKSk7XG4gICAgfVxuICAgIGdldEVudHJ5KGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KHQpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLm9ubHkoX19QUklWQVRFX2RiS2V5KHQpKVxuICAgICAgICB9LCAoKGUsIHIpID0+IHtcbiAgICAgICAgICAgIG4gPSB0aGlzLnJyKHQsIHIpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgZW50cnkgYW5kIGl0cyBzaXplLlxuICAgICAqLyAgICBpcihlLCB0KSB7XG4gICAgICAgIGxldCBuID0ge1xuICAgICAgICAgICAgc2l6ZTogMCxcbiAgICAgICAgICAgIGRvY3VtZW50OiBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KHQpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuWih7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShfX1BSSVZBVEVfZGJLZXkodCkpXG4gICAgICAgIH0sICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbiA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogdGhpcy5ycih0LCByKSxcbiAgICAgICAgICAgICAgICBzaXplOiBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUocilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3IoZSwgdCwgKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5ycihlLCB0KTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydChlLCByKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUgc2V0IG9mIGtleXMgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGRvY3VtZW50cyBpbmRleGVkIGJ5IGtleSBhbmQgYSBtYXAgb2Ygc2l6ZXMgaW5kZXhlZCBieVxuICAgICAqICAgICBrZXkgKHplcm8gaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0KS5cbiAgICAgKi8gICAgX3IoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgciA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0aGlzLnNyKGUsIHQsICgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMucnIoZSwgdCk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQoZSwgaSksIHIgPSByLmluc2VydChlLCBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUodCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIGFyOiByXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIHNyKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKHQuaXNFbXB0eSgpKSByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgbGV0IHIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9kYktleUNvbXBhcmF0b3IpO1xuICAgICAgICB0LmZvckVhY2goKGUgPT4gciA9IHIuYWRkKGUpKSk7XG4gICAgICAgIGNvbnN0IGkgPSBJREJLZXlSYW5nZS5ib3VuZChfX1BSSVZBVEVfZGJLZXkoci5maXJzdCgpKSwgX19QUklWQVRFX2RiS2V5KHIubGFzdCgpKSksIHMgPSByLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCBvID0gcy5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuWih7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogaVxuICAgICAgICB9LCAoKGUsIHQsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMoWyAuLi50LnByZWZpeFBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmRvY3VtZW50SWQgXSk7XG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7byAmJiBfX1BSSVZBVEVfZGJLZXlDb21wYXJhdG9yKG8sIGkpIDwgMDsgKSBuKG8sIG51bGwpLCBvID0gcy5nZXROZXh0KCk7XG4gICAgICAgICAgICBvICYmIG8uaXNFcXVhbChpKSAmJiAoXG4gICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICBuKG8sIHQpLCBvID0gcy5oYXNOZXh0KCkgPyBzLmdldE5leHQoKSA6IG51bGwpLCBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxuICAgICAgICAgICAgbyA/IHIuVyhfX1BSSVZBVEVfZGJLZXkobykpIDogci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGUgcmVzdCBvZiB0aGUga2V5cyBhcmUgbm90IGluIHRoZSBjYWNoZS4gT25lIGNhc2Ugd2hlcmUgYGl0ZXJhdGVgXG4gICAgICAgICAgICAvLyBhYm92ZSB3b24ndCBnbyB0aHJvdWdoIHRoZW0gaXMgd2hlbiB0aGUgY2FjaGUgaXMgZW1wdHkuXG4gICAgICAgICAgICBmb3IgKDtvOyApIG4obywgbnVsbCksIG8gPSBzLmhhc05leHQoKSA/IHMuZ2V0TmV4dCgpIDogbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHQucGF0aCwgbyA9IFsgcy5wb3BMYXN0KCkudG9BcnJheSgpLCBzLmxhc3RTZWdtZW50KCksIF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KG4ucmVhZFRpbWUpLCBuLmRvY3VtZW50S2V5LnBhdGguaXNFbXB0eSgpID8gXCJcIiA6IG4uZG9jdW1lbnRLZXkucGF0aC5sYXN0U2VnbWVudCgpIF0sIF8gPSBbIHMucG9wTGFzdCgpLnRvQXJyYXkoKSwgcy5sYXN0U2VnbWVudCgpLCBbIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBdLCBcIlwiIF07XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuRyhJREJLZXlSYW5nZS5ib3VuZChvLCBfLCAhMCkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgbnVsbCA9PSBpIHx8IGkuaW5jcmVtZW50RG9jdW1lbnRSZWFkQ291bnQoZS5sZW5ndGgpO1xuICAgICAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnJyKERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhpLnByZWZpeFBhdGguY29uY2F0KGkuY29sbGVjdGlvbkdyb3VwLCBpLmRvY3VtZW50SWQpKSwgaSk7XG4gICAgICAgICAgICAgICAgZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyh0LCBlKSB8fCByLmhhcyhlLmtleSkpICYmIChcbiAgICAgICAgICAgICAgICAvLyBFaXRoZXIgdGhlIGRvY3VtZW50IG1hdGNoZXMgdGhlIGdpdmVuIHF1ZXJ5LCBvciBpdCBpcyBtdXRhdGVkLlxuICAgICAgICAgICAgICAgIG4gPSBuLmluc2VydChlLmtleSwgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2RiQ29sbGVjdGlvbkdyb3VwS2V5KHQsIG4pLCBvID0gX19QUklWQVRFX2RiQ29sbGVjdGlvbkdyb3VwS2V5KHQsIEluZGV4T2Zmc2V0Lm1heCgpKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2UuYm91bmQocywgbywgITApXG4gICAgICAgIH0sICgoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMucnIoRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHQucHJlZml4UGF0aC5jb25jYXQodC5jb2xsZWN0aW9uR3JvdXAsIHQuZG9jdW1lbnRJZCkpLCB0KTtcbiAgICAgICAgICAgIGkgPSBpLmluc2VydChzLmtleSwgcyksIGkuc2l6ZSA9PT0gciAmJiBuLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIodGhpcywgISFlICYmIGUudHJhY2tSZW1vdmFscyk7XG4gICAgfVxuICAgIGdldFNpemUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YShlKS5uZXh0KChlID0+IGUuYnl0ZVNpemUpKTtcbiAgICB9XG4gICAgZ2V0TWV0YWRhdGEoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50R2xvYmFsU3RvcmUoZSkuZ2V0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIikubmV4dCgoZSA9PiAoX19QUklWQVRFX2hhcmRBc3NlcnQoISFlKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIG5yKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudEdsb2JhbFN0b3JlKGUpLnB1dChcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGBkYlJlbW90ZURvY2AgYW5kIHJldHVybnMgdGhlIGRvY3VtZW50IChvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmXG4gICAgICogdGhlIGRvY3VtZW50IGNvcnJlc3BvbmRzIHRvIHRoZSBmb3JtYXQgdXNlZCBmb3Igc2VudGluZWwgZGVsZXRlcykuXG4gICAgICovICAgIHJyKGUsIHQpIHtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZnJvbURiUmVtb3RlRG9jdW1lbnQodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIGEgc2VudGluZWwgcmVtb3ZhbCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGVcbiAgICAgICAgICAgIC8vIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGUuaXNOb0RvY3VtZW50KCkgJiYgZS52ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkpIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KGUpO1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGVJbXBsKGUpO1xufVxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgZXh0ZW5kcyBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnVyID0gZSwgdGhpcy50cmFja1JlbW92YWxzID0gdCwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIGFuZCByZWFkIHRpbWVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluXG4gICAgICAgIC8vIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLmNyID0gbmV3IE9iamVjdE1hcCgoZSA9PiBlLnRvU3RyaW5nKCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpO1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBuID0gMCwgciA9IG5ldyBTb3J0ZWRTZXQoKChlLCB0KSA9PiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNhbm9uaWNhbFN0cmluZygpLCB0LmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChpLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy5jci5nZXQoaSk7XG4gICAgICAgICAgICBpZiAodC5wdXNoKHRoaXMudXIucmVtb3ZlRW50cnkoZSwgaSwgby5yZWFkVGltZSkpLCBzLmlzVmFsaWREb2N1bWVudCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IF9fUFJJVkFURV90b0RiUmVtb3RlRG9jdW1lbnQodGhpcy51ci5zZXJpYWxpemVyLCBzKTtcbiAgICAgICAgICAgICAgICByID0gci5hZGQoaS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZShfKTtcbiAgICAgICAgICAgICAgICBuICs9IGEgLSBvLnNpemUsIHQucHVzaCh0aGlzLnVyLmFkZEVudHJ5KGUsIGksIF8pKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLnNpemUsIHRoaXMudHJhY2tSZW1vdmFscykge1xuICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBlbnRyeSBpcyByZXByZXNlbnRlZCBieSBhIE5vRG9jdW1lbnRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgdmVyc2lvbiBvZiAwIGFuZCBpZ25vcmVkIGJ5IGBtYXliZURlY29kZURvY3VtZW50KClgIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdG9EYlJlbW90ZURvY3VtZW50KHRoaXMudXIuc2VyaWFsaXplciwgcy5jb252ZXJ0VG9Ob0RvY3VtZW50KFNuYXBzaG90VmVyc2lvbi5taW4oKSkpO1xuICAgICAgICAgICAgICAgIHQucHVzaCh0aGlzLnVyLmFkZEVudHJ5KGUsIGksIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCByLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5wdXNoKHRoaXMudXIuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIG4pKTtcbiAgICAgICAgfSkpLCB0LnB1c2godGhpcy51ci51cGRhdGVNZXRhZGF0YShlLCBuKSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHQpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLnVyLmlyKGUsIHQpLm5leHQoKGUgPT4gKHRoaXMuY3Iuc2V0KHQsIHtcbiAgICAgICAgICAgIHNpemU6IGUuc2l6ZSxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlLmRvY3VtZW50LnJlYWRUaW1lXG4gICAgICAgIH0pLCBlLmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLnVyLl9yKGUsIHQpLm5leHQoKCh7ZG9jdW1lbnRzOiBlLCBhcjogdH0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3Iuc2V0KHQsIHtcbiAgICAgICAgICAgICAgICBzaXplOiBuLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBlLmdldCh0KS5yZWFkVGltZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgZSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudEdsb2JhbFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSByZW1vdGVEb2N1bWVudHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcInJlbW90ZURvY3VtZW50c1YxNFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgb24gdGhlXG4gKiBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50S2V5SW5kZXhgIGluZGV4LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kYktleShlKSB7XG4gICAgY29uc3QgdCA9IGUucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogcHJlZml4IHBhdGggKi8gdC5zbGljZSgwLCB0Lmxlbmd0aCAtIDIpLCBcbiAgICAvKiBjb2xsZWN0aW9uIGlkICovIHRbdC5sZW5ndGggLSAyXSwgXG4gICAgLyogZG9jdW1lbnQgaWQgKi8gdFt0Lmxlbmd0aCAtIDFdIF07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kYkNvbGxlY3Rpb25Hcm91cEtleShlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQuZG9jdW1lbnRLZXkucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyBlLCBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleSh0LnJlYWRUaW1lKSwgXG4gICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyBuLmxlbmd0aCA+IDAgPyBuW24ubGVuZ3RoIC0gMV0gOiBcIlwiIF07XG59XG5cbi8qKlxuICogQ29tcGFyYXRvciB0aGF0IGNvbXBhcmVzIGRvY3VtZW50IGtleXMgYWNjb3JkaW5nIHRvIHRoZSBwcmltYXJ5IGtleSBzb3J0aW5nXG4gKiB1c2VkIGJ5IHRoZSBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50YCBzdG9yZSAoYnkgcHJlZml4IHBhdGgsIGNvbGxlY3Rpb24gaWRcbiAqIGFuZCB0aGVuIGRvY3VtZW50IElEKS5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kYktleUNvbXBhcmF0b3IoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBlLnBhdGgudG9BcnJheSgpLCByID0gdC5wYXRoLnRvQXJyYXkoKTtcbiAgICAvLyBUaGUgb3JkZXJpbmcgaXMgYmFzZWQgb24gaHR0cHM6Ly9jaHJvbWl1bS5nb29nbGVzb3VyY2UuY29tL2Nocm9taXVtL2JsaW5rLysvZmU1YzIxZmVmOTRkYWU3MWMxYzMzNDQ3NzViOGQ4YTdmN2U2ZDllYy9Tb3VyY2UvbW9kdWxlcy9pbmRleGVkZGIvSURCS2V5LmNwcCM3NFxuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IG4ubGVuZ3RoIC0gMiAmJiBlIDwgci5sZW5ndGggLSAyOyArK2UpIGlmIChpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IobltlXSwgcltlXSksIFxuICAgIGkpIHJldHVybiBpO1xuICAgIHJldHVybiBpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5sZW5ndGgsIHIubGVuZ3RoKSwgaSB8fCAoaSA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG5bbi5sZW5ndGggLSAyXSwgcltyLmxlbmd0aCAtIDJdKSwgXG4gICAgaSB8fCBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuW24ubGVuZ3RoIC0gMV0sIHJbci5sZW5ndGggLSAxXSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTY2hlbWEgVmVyc2lvbiBmb3IgdGhlIFdlYiBjbGllbnQ6XG4gKiAxLiAgSW5pdGlhbCB2ZXJzaW9uIGluY2x1ZGluZyBNdXRhdGlvbiBRdWV1ZSwgUXVlcnkgQ2FjaGUsIGFuZCBSZW1vdGVcbiAqICAgICBEb2N1bWVudCBDYWNoZVxuICogMi4gIFVzZWQgdG8gZW5zdXJlIGEgdGFyZ2V0R2xvYmFsIG9iamVjdCBleGlzdHMgYW5kIGFkZCB0YXJnZXRDb3VudCB0byBpdC4gTm9cbiAqICAgICBsb25nZXIgcmVxdWlyZWQgYmVjYXVzZSBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICogMy4gIERyb3BwZWQgYW5kIHJlLWNyZWF0ZWQgUXVlcnkgQ2FjaGUgdG8gZGVhbCB3aXRoIGNhY2hlIGNvcnJ1cHRpb24gcmVsYXRlZFxuICogICAgIHRvIGxpbWJvIHJlc29sdXRpb24uIEFkZHJlc3Nlc1xuICogICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1pb3Mtc2RrL2lzc3Vlcy8xNTQ4XG4gKiA0LiAgTXVsdGktVGFiIFN1cHBvcnQuXG4gKiA1LiAgUmVtb3ZhbCBvZiBoZWxkIHdyaXRlIGFja3MuXG4gKiA2LiAgQ3JlYXRlIGRvY3VtZW50IGdsb2JhbCBmb3IgdHJhY2tpbmcgZG9jdW1lbnQgY2FjaGUgc2l6ZS5cbiAqIDcuICBFbnN1cmUgZXZlcnkgY2FjaGVkIGRvY3VtZW50IGhhcyBhIHNlbnRpbmVsIHJvdyB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLlxuICogOC4gIEFkZCBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBmb3IgQ29sbGVjdGlvbiBHcm91cCBxdWVyaWVzLlxuICogOS4gIENoYW5nZSBSZW1vdGVEb2N1bWVudENoYW5nZXMgc3RvcmUgdG8gYmUga2V5ZWQgYnkgcmVhZFRpbWUgcmF0aGVyIHRoYW5cbiAqICAgICBhbiBhdXRvLWluY3JlbWVudGluZyBJRC4gVGhpcyBpcyByZXF1aXJlZCBmb3IgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICogMTAuIFJld3JpdGUgdGhlIGNhbm9uaWNhbCBJRHMgdG8gdGhlIGV4cGxpY2l0IFByb3RvYnVmLWJhc2VkIGZvcm1hdC5cbiAqIDExLiBBZGQgYnVuZGxlcyBhbmQgbmFtZWRfcXVlcmllcyBmb3IgYnVuZGxlIHN1cHBvcnQuXG4gKiAxMi4gQWRkIGRvY3VtZW50IG92ZXJsYXlzLlxuICogMTMuIFJld3JpdGUgdGhlIGtleXMgb2YgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSB0byBhbGxvdyBmb3IgZWZmaWNpZW50XG4gKiAgICAgZG9jdW1lbnQgbG9va3VwIHZpYSBgZ2V0QWxsKClgLlxuICogMTQuIEFkZCBvdmVybGF5cy5cbiAqIDE1LiBBZGQgaW5kZXhpbmcgc3VwcG9ydC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsIHZpZXcgKG92ZXJsYXkpIG9mIGEgZG9jdW1lbnQsIGFuZCB0aGUgZmllbGRzIHRoYXQgYXJlXG4gKiBsb2NhbGx5IG11dGF0ZWQuXG4gKi9cbmNsYXNzIE92ZXJsYXllZERvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGRzIHRoYXQgYXJlIGxvY2FsbHkgbXV0YXRlZCBieSBwYXRjaCBtdXRhdGlvbnMuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgb3ZlcmxheWVkXHRkb2N1bWVudCBpcyBmcm9tIHNldCBvciBkZWxldGUgbXV0YXRpb25zLCB0aGlzIGlzIGBudWxsYC5cbiAgICAgKiBJZiB0aGVyZSBpcyBubyBvdmVybGF5IChtdXRhdGlvbikgZm9yIHRoZSBkb2N1bWVudCwgdGhpcyBpcyBhbiBlbXB0eSBgRmllbGRNYXNrYC5cbiAgICAgKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMub3ZlcmxheWVkRG9jdW1lbnQgPSBlLCB0aGlzLm11dGF0ZWRGaWVsZHMgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqLyBjbGFzcyBMb2NhbERvY3VtZW50c1ZpZXcge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gZSwgdGhpcy5tdXRhdGlvblF1ZXVlID0gdCwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSA9IG4sIFxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgaWRlbnRpZmllZCBieSBga2V5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIExvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IG9yIG51bGwgaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgY2FjaGVkXG4gICAgICogc3RhdGUgZm9yIGl0LlxuICAgICAqLyAgICBnZXREb2N1bWVudChlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheShlLCB0KS5uZXh0KChyID0+IChuID0gciwgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KGUsIHQpKSkpLm5leHQoKGUgPT4gKG51bGwgIT09IG4gJiYgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhuLm11dGF0aW9uLCBlLCBGaWVsZE1hc2suZW1wdHkoKSwgVGltZXN0YW1wLm5vdygpKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBpZGVudGlmaWVkIGJ5IGBrZXlzYC5cbiAgICAgKlxuICAgICAqIElmIHdlIGRvbid0IGhhdmUgY2FjaGVkIHN0YXRlIGZvciBhIGRvY3VtZW50IGluIGBrZXlzYCwgYSBOb0RvY3VtZW50IHdpbGxcbiAgICAgKiBiZSBzdG9yZWQgZm9yIHRoYXQga2V5IGluIHRoZSByZXN1bHRpbmcgc2V0LlxuICAgICAqLyAgICBnZXREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXMoZSwgdCkubmV4dCgodCA9PiB0aGlzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKGUsIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKS5uZXh0KCgoKSA9PiB0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byBgZ2V0RG9jdW1lbnRzYCwgYnV0IGNyZWF0ZXMgdGhlIGxvY2FsIHZpZXcgZnJvbSB0aGUgZ2l2ZW5cbiAgICAgKiBgYmFzZURvY3NgIHdpdGhvdXQgcmV0cmlldmluZyBkb2N1bWVudHMgZnJvbSB0aGUgbG9jYWwgc3RvcmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gdGhpcyBvcGVyYXRpb24gaXMgc2NvcGVkIHRvLlxuICAgICAqIEBwYXJhbSBkb2NzIC0gVGhlIGRvY3VtZW50cyB0byBhcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gZ2V0IHRoZSBsb2NhbCB2aWV3cy5cbiAgICAgKiBAcGFyYW0gZXhpc3RlbmNlU3RhdGVDaGFuZ2VkIC0gVGhlIHNldCBvZiBkb2N1bWVudCBrZXlzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZVxuICAgICAqICAgaXMgY2hhbmdlZC4gVGhpcyBpcyB1c2VmdWwgdG8gZGV0ZXJtaW5lIGlmIHNvbWUgZG9jdW1lbnRzIG92ZXJsYXkgbmVlZHNcbiAgICAgKiAgIHRvIGJlIHJlY2FsY3VsYXRlZC5cbiAgICAgKi8gICAgZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgdCwgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKGUsIHIsIHQpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKGUsIHQsIHIsIG4pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgbGV0IHQgPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0ID0gdC5pbnNlcnQoZSwgbi5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICB9KSksIHQ7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvdmVybGF5ZWQgZG9jdW1lbnRzIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQgbWFwLCB3aGljaCB3aWxsIGluY2x1ZGVcbiAgICAgKiB0aGUgbG9jYWwgdmlldyBvZiB0aG9zZSBkb2N1bWVudHMgYW5kIGEgYEZpZWxkTWFza2AgaW5kaWNhdGluZyB3aGljaCBmaWVsZHNcbiAgICAgKiBhcmUgbXV0YXRlZCBsb2NhbGx5LCBgbnVsbGAgaWYgb3ZlcmxheSBpcyBhIFNldCBvciBEZWxldGUgbXV0YXRpb24uXG4gICAgICovICAgIGdldE92ZXJsYXllZERvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKGUsIG4sIHQpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKGUsIHQsIG4sIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBvdmVybGF5cyBmb3Ige0Bjb2RlIGRvY3N9IGFuZCBhZGRzIHRoZW0gdG8gcHJvdmlkZWQgb3ZlcmxheSBtYXBcbiAgICAgKiBpZiB0aGUgbWFwIGRvZXMgbm90IGFscmVhZHkgY29udGFpbiBhbiBlbnRyeSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50IGtleS5cbiAgICAgKi8gICAgcG9wdWxhdGVPdmVybGF5cyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LmhhcyhlKSB8fCByLnB1c2goZSk7XG4gICAgICAgIH0pKSwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5cyhlLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0LnNldChlLCBuKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgdGhlIGdpdmVuIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2NzIC0gVGhlIGRvY3VtZW50cyB0byBjb21wdXRlIHZpZXdzIGZvci4gSXQgYWxzbyBoYXMgdGhlIGJhc2VcbiAgICAgKiAgIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gb3ZlcmxheXMgLSBUaGUgb3ZlcmxheXMgdGhhdCBuZWVkIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGdpdmVuIGJhc2VcbiAgICAgKiAgIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gZXhpc3RlbmNlU3RhdGVDaGFuZ2VkIC0gQSBzZXQgb2YgZG9jdW1lbnRzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZXNcbiAgICAgKiAgIG1pZ2h0IGhhdmUgY2hhbmdlZC4gVGhpcyBpcyB1c2VkIHRvIGRldGVybWluZSBpZiB3ZSBuZWVkIHRvIHJlLWNhbGN1bGF0ZVxuICAgICAqICAgb3ZlcmxheXMgZnJvbSBtdXRhdGlvbiBxdWV1ZXMuXG4gICAgICogQHJldHVybiBBIG1hcCByZXByZXNlbnRzIHRoZSBsb2NhbCBkb2N1bWVudHMgdmlldy5cbiAgICAgKi8gICAgY29tcHV0ZVZpZXdzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKSwgbyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdPdmVybGF5ZWREb2N1bWVudE1hcCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKTtcbiAgICAgICAgfSgpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG4uZ2V0KHQua2V5KTtcbiAgICAgICAgICAgIC8vIFJlY2FsY3VsYXRlIGFuIG92ZXJsYXkgaWYgdGhlIGRvY3VtZW50J3MgZXhpc3RlbmNlIHN0YXRlIGNoYW5nZWQgZHVlIHRvXG4gICAgICAgICAgICAvLyBhIHJlbW90ZSBldmVudCAqYW5kKiB0aGUgb3ZlcmxheSBpcyBhIFBhdGNoTXV0YXRpb24uIFRoaXMgaXMgYmVjYXVzZVxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgZXhpc3RlbmNlIHN0YXRlIGNhbiBjaGFuZ2UgaWYgc29tZSBwYXRjaCBtdXRhdGlvbidzXG4gICAgICAgICAgICAvLyBwcmVjb25kaXRpb25zIGFyZSBtZXQuXG4gICAgICAgICAgICAvLyBOT1RFOiB3ZSByZWNhbGN1bGF0ZSB3aGVuIGBvdmVybGF5YCBpcyB1bmRlZmluZWQgYXMgd2VsbCwgYmVjYXVzZSB0aGVyZVxuICAgICAgICAgICAgLy8gbWlnaHQgYmUgYSBwYXRjaCBtdXRhdGlvbiB3aG9zZSBwcmVjb25kaXRpb24gZG9lcyBub3QgbWF0Y2ggYmVmb3JlIHRoZVxuICAgICAgICAgICAgLy8gY2hhbmdlIChoZW5jZSBvdmVybGF5IGlzIHVuZGVmaW5lZCksIGJ1dCB3b3VsZCBub3cgbWF0Y2guXG4gICAgICAgICAgICAgICAgICAgICAgICByLmhhcyh0LmtleSkgJiYgKHZvaWQgMCA9PT0gbyB8fCBvLm11dGF0aW9uIGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24pID8gaSA9IGkuaW5zZXJ0KHQua2V5LCB0KSA6IHZvaWQgMCAhPT0gbyA/IChzLnNldCh0LmtleSwgby5tdXRhdGlvbi5nZXRGaWVsZE1hc2soKSksIFxuICAgICAgICAgICAgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhvLm11dGF0aW9uLCB0LCBvLm11dGF0aW9uLmdldEZpZWxkTWFzaygpLCBUaW1lc3RhbXAubm93KCkpKSA6IFxuICAgICAgICAgICAgLy8gbm8gb3ZlcmxheSBleGlzdHNcbiAgICAgICAgICAgIC8vIFVzaW5nIEVNUFRZIHRvIGluZGljYXRlIHRoZXJlIGlzIG5vIG92ZXJsYXkgZm9yIHRoZSBkb2N1bWVudC5cbiAgICAgICAgICAgIHMuc2V0KHQua2V5LCBGaWVsZE1hc2suZW1wdHkoKSk7XG4gICAgICAgIH0pKSwgdGhpcy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyhlLCBpKS5uZXh0KChlID0+IChlLmZvckVhY2goKChlLCB0KSA9PiBzLnNldChlLCB0KSkpLCBcbiAgICAgICAgdC5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICByZXR1cm4gby5zZXQoZSwgbmV3IE92ZXJsYXllZERvY3VtZW50KHQsIG51bGwgIT09IChuID0gcy5nZXQoZSkpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsKSk7XG4gICAgICAgIH0pKSwgbykpKTtcbiAgICB9XG4gICAgcmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwKCk7XG4gICAgICAgIC8vIEEgcmV2ZXJzZSBsb29rdXAgbWFwIGZyb20gYmF0Y2ggaWQgdG8gdGhlIGRvY3VtZW50cyB3aXRoaW4gdGhhdCBiYXRjaC5cbiAgICAgICAgICAgICAgICBsZXQgciA9IG5ldyBTb3J0ZWRNYXAoKChlLCB0KSA9PiBlIC0gdCkpLCBpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIGkua2V5cygpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0LmdldChlKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gcykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGxldCBvID0gbi5nZXQoZSkgfHwgRmllbGRNYXNrLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgbyA9IGkuYXBwbHlUb0xvY2FsVmlldyhzLCBvKSwgbi5zZXQoZSwgbyk7XG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IChyLmdldChpLmJhdGNoSWQpIHx8IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKS5hZGQoZSk7XG4gICAgICAgICAgICAgICAgciA9IHIuaW5zZXJ0KGkuYmF0Y2hJZCwgXyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gW10sIG8gPSByLmdldFJldmVyc2VJdGVyYXRvcigpO1xuICAgICAgICAgICAgLy8gSXRlcmF0ZSBpbiBkZXNjZW5kaW5nIG9yZGVyIG9mIGJhdGNoIElEcywgYW5kIHNraXAgZG9jdW1lbnRzIHRoYXQgYXJlXG4gICAgICAgICAgICAvLyBhbHJlYWR5IHNhdmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7by5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBvLmdldE5leHQoKSwgXyA9IHIua2V5LCBhID0gci52YWx1ZSwgdSA9IF9fUFJJVkFURV9uZXdNdXRhdGlvbk1hcCgpO1xuICAgICAgICAgICAgICAgIGEuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaS5oYXMoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfY2FsY3VsYXRlT3ZlcmxheU11dGF0aW9uKHQuZ2V0KGUpLCBuLmdldChlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSByICYmIHUuc2V0KGUsIHIpLCBpID0gaS5hZGQoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSksIHMucHVzaCh0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLnNhdmVPdmVybGF5cyhlLCBfLCB1KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3Iocyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY2FsY3VsYXRlcyBvdmVybGF5cyBieSByZWFkaW5nIHRoZSBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGVcbiAgICAgKiBmaXJzdCwgYW5kIHNhdmVzIHRoZW0gYWZ0ZXIgdGhleSBhcmUgY2FsY3VsYXRlZC5cbiAgICAgKi8gICAgcmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXMoZSwgdCkubmV4dCgodCA9PiB0aGlzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgdmlldyBvZiBhbGwgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB0byBtYXRjaCBkb2N1bWVudHMgYWdhaW5zdC5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gUmVhZCB0aW1lIGFuZCBrZXkgdG8gc3RhcnQgc2Nhbm5pbmcgYnkgKGV4Y2x1c2l2ZSkuXG4gICAgICogQHBhcmFtIGNvbnRleHQgLSBBIG9wdGlvbmFsIHRyYWNrZXIgdG8ga2VlcCBhIHJlY29yZCBvZiBpbXBvcnRhbnQgZGV0YWlsc1xuICAgICAqICAgZHVyaW5nIGRhdGFiYXNlIGxvY2FsIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgc2luZ2xlIGRvY3VtZW50IGJ5IHBhdGggKHJhdGhlciB0aGFuIGFcbiAqIGNvbGxlY3Rpb24pLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEb2N1bWVudFF1ZXJ5JDEoZSkge1xuICAgICAgICAgICAgcmV0dXJuIERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZS5wYXRoKSAmJiBudWxsID09PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSBlLmZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB9KHQpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkoZSwgdC5wYXRoKSA6IF9fUFJJVkFURV9pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHQpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KGUsIHQsIG4sIHIpIDogdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeShlLCB0LCBuLCByKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBjb2xsZWN0aW9uIGdyb3VwLCByZXR1cm5zIHRoZSBuZXh0IGRvY3VtZW50cyB0aGF0IGZvbGxvdyB0aGUgcHJvdmlkZWQgb2Zmc2V0LCBhbG9uZ1xuICAgICAqIHdpdGggYW4gdXBkYXRlZCBiYXRjaCBJRC5cbiAgICAgKlxuICAgICAqIDxwPlRoZSBkb2N1bWVudHMgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgYXJlIG9yZGVyZWQgYnkgcmVtb3RlIHZlcnNpb24gZnJvbSB0aGUgcHJvdmlkZWRcbiAgICAgKiBvZmZzZXQuIElmIHRoZXJlIGFyZSBubyBtb3JlIHJlbW90ZSBkb2N1bWVudHMgYWZ0ZXIgdGhlIHByb3ZpZGVkIG9mZnNldCwgZG9jdW1lbnRzIHdpdGhcbiAgICAgKiBtdXRhdGlvbnMgaW4gb3JkZXIgb2YgYmF0Y2ggaWQgZnJvbSB0aGUgb2Zmc2V0IGFyZSByZXR1cm5lZC4gU2luY2UgYWxsIGRvY3VtZW50cyBpbiBhIGJhdGNoIGFyZVxuICAgICAqIHJldHVybmVkIHRvZ2V0aGVyLCB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyByZXR1cm5lZCBjYW4gZXhjZWVkIHtAY29kZSBjb3VudH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25cbiAgICAgKiBAcGFyYW0gY29sbGVjdGlvbkdyb3VwIFRoZSBjb2xsZWN0aW9uIGdyb3VwIGZvciB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIG9mZnNldCB0byBpbmRleCBpbnRvLlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0byByZXR1cm5cbiAgICAgKiBAcmV0dXJuIEEgTG9jYWxXcml0ZVJlc3VsdCB3aXRoIHRoZSBkb2N1bWVudHMgdGhhdCBmb2xsb3cgdGhlIHByb3ZpZGVkIG9mZnNldCBhbmQgdGhlIGxhc3QgcHJvY2Vzc2VkIGJhdGNoIGlkLlxuICAgICAqLyAgICBnZXROZXh0RG9jdW1lbnRzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHIgLSBpLnNpemUgPiAwID8gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cChlLCB0LCBuLmxhcmdlc3RCYXRjaElkLCByIC0gaS5zaXplKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCkpO1xuICAgICAgICAgICAgLy8gVGhlIGNhbGxzaXRlIHdpbGwgdXNlIHRoZSBsYXJnZXN0IGJhdGNoIElEIHRvZ2V0aGVyIHdpdGggdGhlIGxhdGVzdCByZWFkIHRpbWUgdG8gY3JlYXRlXG4gICAgICAgICAgICAvLyBhIG5ldyBpbmRleCBvZmZzZXQuIFNpbmNlIHdlIG9ubHkgcHJvY2VzcyBiYXRjaCBJRHMgaWYgYWxsIHJlbW90ZSBkb2N1bWVudHMgaGF2ZSBiZWVuIHJlYWQsXG4gICAgICAgICAgICAvLyBubyBvdmVybGF5IHdpbGwgaW5jcmVhc2UgdGhlIG92ZXJhbGwgcmVhZCB0aW1lLiBUaGlzIGlzIHdoeSB3ZSBvbmx5IG5lZWQgdG8gc3BlY2lhbCBjYXNlXG4gICAgICAgICAgICAvLyB0aGUgYmF0Y2ggaWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IC0xLCBfID0gaTtcbiAgICAgICAgICAgIHJldHVybiBzLm5leHQoKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKCh0LCBuKSA9PiAobyA8IG4ubGFyZ2VzdEJhdGNoSWQgJiYgKG8gPSBuLmxhcmdlc3RCYXRjaElkKSwgXG4gICAgICAgICAgICBpLmdldCh0KSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgXyA9IF8uaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgfSkpKSkpLm5leHQoKCgpID0+IHRoaXMucG9wdWxhdGVPdmVybGF5cyhlLCB0LCBpKSkpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKGUsIF8sIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSkpLm5leHQoKGUgPT4gKHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiBvLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IF9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwKGUpXG4gICAgICAgICAgICB9KSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXG4gICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50KGUsIG5ldyBEb2N1bWVudEtleSh0KSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBsZXQgdCA9IGRvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAodCA9IHQuaW5zZXJ0KGUua2V5LCBlKSksIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmNvbGxlY3Rpb25Hcm91cDtcbiAgICAgICAgbGV0IHMgPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0Q29sbGVjdGlvblBhcmVudHMoZSwgaSkubmV4dCgobyA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChvLCAobyA9PiB7XG4gICAgICAgICAgICBjb25zdCBfID0gZnVuY3Rpb24gX19QUklWQVRFX2FzQ29sbGVjdGlvblF1ZXJ5QXRQYXRoKGUsIHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwodCwgXG4gICAgICAgICAgICAgICAgLypjb2xsZWN0aW9uR3JvdXA9Ki8gbnVsbCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xuICAgICAgICAgICAgfSh0LCBvLmNoaWxkKGkpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KGUsIF8sIG4sIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KGUsIHQpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cbiAgICAgICAgbGV0IGk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbihlLCB0LnBhdGgsIG4ubGFyZ2VzdEJhdGNoSWQpLm5leHQoKHMgPT4gKGkgPSBzLCBcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiwgaSwgcikpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAvLyBBcyBkb2N1bWVudHMgbWlnaHQgbWF0Y2ggdGhlIHF1ZXJ5IGJlY2F1c2Ugb2YgdGhlaXIgb3ZlcmxheSB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBpbmNsdWRlIGRvY3VtZW50cyBmb3IgYWxsIG92ZXJsYXlzIGluIHRoZSBpbml0aWFsIGRvY3VtZW50IHNldC5cbiAgICAgICAgICAgIGkuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbi5nZXRLZXkoKTtcbiAgICAgICAgICAgICAgICBudWxsID09PSBlLmdldChyKSAmJiAoZSA9IGUuaW5zZXJ0KHIsIE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQocikpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBvdmVybGF5cyBhbmQgbWF0Y2ggYWdhaW5zdCB0aGUgcXVlcnkuXG4gICAgICAgICAgICBsZXQgbiA9IGRvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBpLmdldChlKTtcbiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHMgJiYgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhzLm11dGF0aW9uLCByLCBGaWVsZE1hc2suZW1wdHkoKSwgVGltZXN0YW1wLm5vdygpKSwgXG4gICAgICAgICAgICAgICAgLy8gRmluYWxseSwgaW5zZXJ0IHRoZSBkb2N1bWVudHMgdGhhdCBzdGlsbCBtYXRjaCB0aGUgcXVlcnlcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKHQsIHIpICYmIChuID0gbi5pbnNlcnQoZSwgcikpO1xuICAgICAgICAgICAgfSkpLCBuO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5QnVuZGxlQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZSwgdGhpcy5sciA9IG5ldyBNYXAsIHRoaXMuaHIgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmxyLmdldCh0KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxyLnNldCh0LmlkLCBcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUJ1bmRsZU1ldGFkYXRhKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGUuaWQsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogZS52ZXJzaW9uLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLmNyZWF0ZVRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmhyLmdldCh0KSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHIuc2V0KHQubmFtZSwgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Qcm90b05hbWVkUXVlcnkoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBlLm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX19QUklWQVRFX2Zyb21WZXJzaW9uKGUucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBEb2N1bWVudE92ZXJsYXlDYWNoZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5RG9jdW1lbnRPdmVybGF5Q2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcCBzb3J0ZWQgYnkgRG9jdW1lbnRLZXksIHdob3NlIHZhbHVlIGlzIGEgcGFpciBvZiB0aGUgbGFyZ2VzdCBiYXRjaCBpZFxuICAgICAgICAvLyBmb3IgdGhlIG92ZXJsYXkgYW5kIHRoZSBvdmVybGF5IGl0c2VsZi5cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvciksIHRoaXMuUHIgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRPdmVybGF5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMub3ZlcmxheXMuZ2V0KHQpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHRoaXMuZ2V0T3ZlcmxheShlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIG51bGwgIT09IGUgJiYgbi5zZXQodCwgZSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgc2F2ZU92ZXJsYXlzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuSXQoZSwgdCwgcik7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuUHIuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSByICYmIChyLmZvckVhY2goKGUgPT4gdGhpcy5vdmVybGF5cyA9IHRoaXMub3ZlcmxheXMucmVtb3ZlKGUpKSksIFxuICAgICAgICB0aGlzLlByLmRlbGV0ZShuKSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbihlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpLCBpID0gdC5sZW5ndGggKyAxLCBzID0gbmV3IERvY3VtZW50S2V5KHQuY2hpbGQoXCJcIikpLCBvID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvckZyb20ocyk7XG4gICAgICAgIGZvciAoO28uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldE5leHQoKS52YWx1ZSwgcyA9IGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAoIXQuaXNQcmVmaXhPZihzLnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIC8vIERvY3VtZW50cyBmcm9tIHN1Yi1jb2xsZWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgcy5wYXRoLmxlbmd0aCA9PT0gaSAmJiAoZS5sYXJnZXN0QmF0Y2hJZCA+IG4gJiYgci5zZXQoZS5nZXRLZXkoKSwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IG5ldyBTb3J0ZWRNYXAoKChlLCB0KSA9PiBlIC0gdCkpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtzLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcy5nZXROZXh0KCkudmFsdWU7XG4gICAgICAgICAgICBpZiAoZS5nZXRLZXkoKS5nZXRDb2xsZWN0aW9uR3JvdXAoKSA9PT0gdCAmJiBlLmxhcmdlc3RCYXRjaElkID4gbikge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gaS5nZXQoZS5sYXJnZXN0QmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gdCAmJiAodCA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCksIGkgPSBpLmluc2VydChlLmxhcmdlc3RCYXRjaElkLCB0KSksIFxuICAgICAgICAgICAgICAgIHQuc2V0KGUuZ2V0S2V5KCksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpLCBfID0gaS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtfLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoXy5nZXROZXh0KCkudmFsdWUuZm9yRWFjaCgoKGUsIHQpID0+IG8uc2V0KGUsIHQpKSksIG8uc2l6ZSgpID49IHIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShvKTtcbiAgICB9XG4gICAgSXQoZSwgdCwgbikge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGFzc29jaWF0aW9uIG9mIHRoZSBvdmVybGF5IHRvIGl0cyBiYXRjaCBpZC5cbiAgICAgICAgY29uc3QgciA9IHRoaXMub3ZlcmxheXMuZ2V0KG4ua2V5KTtcbiAgICAgICAgaWYgKG51bGwgIT09IHIpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLlByLmdldChyLmxhcmdlc3RCYXRjaElkKS5kZWxldGUobi5rZXkpO1xuICAgICAgICAgICAgdGhpcy5Qci5zZXQoci5sYXJnZXN0QmF0Y2hJZCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IHRoaXMub3ZlcmxheXMuaW5zZXJ0KG4ua2V5LCBuZXcgT3ZlcmxheSh0LCBuKSk7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYXNzb2NpYXRpb24gb2YgdGhpcyBvdmVybGF5IHRvIHRoZSBnaXZlbiBsYXJnZXN0QmF0Y2hJZC5cbiAgICAgICAgbGV0IGkgPSB0aGlzLlByLmdldCh0KTtcbiAgICAgICAgdm9pZCAwID09PSBpICYmIChpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHRoaXMuUHIuc2V0KHQsIGkpKSwgdGhpcy5Qci5zZXQodCwgaS5hZGQobi5rZXkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29sbGVjdGlvbiBvZiByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgZnJvbSBzb21lIGtpbmQgb2YgbnVtYmVyZWQgZW50aXR5XG4gKiAoZWl0aGVyIGEgdGFyZ2V0IElEIG9yIGJhdGNoIElEKS4gQXMgcmVmZXJlbmNlcyBhcmUgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tXG4gKiB0aGUgc2V0IGNvcnJlc3BvbmRpbmcgZXZlbnRzIGFyZSBlbWl0dGVkIHRvIGEgcmVnaXN0ZXJlZCBnYXJiYWdlIGNvbGxlY3Rvci5cbiAqXG4gKiBFYWNoIHJlZmVyZW5jZSBpcyByZXByZXNlbnRlZCBieSBhIERvY3VtZW50UmVmZXJlbmNlIG9iamVjdC4gRWFjaCBvZiB0aGVtXG4gKiBjb250YWlucyBlbm91Z2ggaW5mb3JtYXRpb24gdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhlIHJlZmVyZW5jZS4gVGhleSBhcmUgYWxsXG4gKiBzdG9yZWQgcHJpbWFyaWx5IGluIGEgc2V0IHNvcnRlZCBieSBrZXkuIEEgZG9jdW1lbnQgaXMgY29uc2lkZXJlZCBnYXJiYWdlIGlmXG4gKiB0aGVyZSdzIG5vIHJlZmVyZW5jZXMgaW4gdGhhdCBzZXQgKHRoaXMgY2FuIGJlIGVmZmljaWVudGx5IGNoZWNrZWQgdGhhbmtzIHRvXG4gKiBzb3J0aW5nIGJ5IGtleSkuXG4gKlxuICogUmVmZXJlbmNlU2V0IGFsc28ga2VlcHMgYSBzZWNvbmRhcnkgc2V0IHRoYXQgY29udGFpbnMgcmVmZXJlbmNlcyBzb3J0ZWQgYnlcbiAqIElEcy4gVGhpcyBvbmUgaXMgdXNlZCB0byBlZmZpY2llbnRseSBpbXBsZW1lbnQgcmVtb3ZhbCBvZiBhbGwgcmVmZXJlbmNlcyBieVxuICogc29tZSB0YXJnZXQgSUQuXG4gKi8gY2xhc3MgX19QUklWQVRFX1JlZmVyZW5jZVNldCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLklyID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfRG9jUmVmZXJlbmNlLmRyKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLlRyID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfRG9jUmVmZXJlbmNlLkVyKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jci5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKGUsIHQpO1xuICAgICAgICB0aGlzLklyID0gdGhpcy5Jci5hZGQobiksIHRoaXMuVHIgPSB0aGlzLlRyLmFkZChuKTtcbiAgICB9XG4gICAgLyoqIEFkZCByZWZlcmVuY2VzIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXlzIGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIEFyKGUsIHQpIHtcbiAgICAgICAgZS5mb3JFYWNoKChlID0+IHRoaXMuYWRkUmVmZXJlbmNlKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXG4gICAgICogSUQuXG4gICAgICovICAgIHJlbW92ZVJlZmVyZW5jZShlLCB0KSB7XG4gICAgICAgIHRoaXMuUnIobmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgdCkpO1xuICAgIH1cbiAgICBWcihlLCB0KSB7XG4gICAgICAgIGUuZm9yRWFjaCgoZSA9PiB0aGlzLnJlbW92ZVJlZmVyZW5jZShlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgYWxsIHJlZmVyZW5jZXMgd2l0aCBhIGdpdmVuIElELiBDYWxscyByZW1vdmVSZWYoKSBmb3IgZWFjaCBrZXlcbiAgICAgKiByZW1vdmVkLlxuICAgICAqLyAgICBtcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgRG9jdW1lbnRLZXkobmV3IFJlc291cmNlUGF0aChbXSkpLCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgZSksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBlICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVHIuZm9yRWFjaEluUmFuZ2UoWyBuLCByIF0sIChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuUnIoZSksIGkucHVzaChlLmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgZ3IoKSB7XG4gICAgICAgIHRoaXMuSXIuZm9yRWFjaCgoZSA9PiB0aGlzLlJyKGUpKSk7XG4gICAgfVxuICAgIFJyKGUpIHtcbiAgICAgICAgdGhpcy5JciA9IHRoaXMuSXIuZGVsZXRlKGUpLCB0aGlzLlRyID0gdGhpcy5Uci5kZWxldGUoZSk7XG4gICAgfVxuICAgIHByKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBEb2N1bWVudEtleShuZXcgUmVzb3VyY2VQYXRoKFtdKSksIG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBlKSwgciA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIGUgKyAxKTtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVHIuZm9yRWFjaEluUmFuZ2UoWyBuLCByIF0sIChlID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZChlLmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgMCksIG4gPSB0aGlzLklyLmZpcnN0QWZ0ZXJPckVxdWFsKHQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gbiAmJiBlLmlzRXF1YWwobi5rZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0RvY1JlZmVyZW5jZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmtleSA9IGUsIHRoaXMueXIgPSB0O1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBrZXkgdGhlbiBieSBJRCAqLyAgICBzdGF0aWMgZHIoZSwgdCkge1xuICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdC5rZXkpIHx8IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUueXIsIHQueXIpO1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBJRCB0aGVuIGJ5IGtleSAqLyAgICBzdGF0aWMgRXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS55ciwgdC55cikgfHwgRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdC5rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeU11dGF0aW9uUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBlLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2V0IG9mIGFsbCBtdXRhdGlvbnMgdGhhdCBoYXZlIGJlZW4gc2VudCBidXQgbm90IHlldCBiZWVuIGFwcGxpZWQgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBbXSwgXG4gICAgICAgIC8qKiBOZXh0IHZhbHVlIHRvIHVzZSB3aGVuIGFzc2lnbmluZyBzZXF1ZW50aWFsIElEcyB0byBlYWNoIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICB0aGlzLndyID0gMSwgXG4gICAgICAgIC8qKiBBbiBvcmRlcmVkIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSBtdXRhdGlvbnMgYmF0Y2ggSURzLiAqL1xuICAgICAgICB0aGlzLlNyID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfRG9jUmVmZXJlbmNlLmRyKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eShlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaChlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLndyO1xuICAgICAgICB0aGlzLndyKyssIHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMubXV0YXRpb25RdWV1ZVt0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgTXV0YXRpb25CYXRjaChpLCB0LCBuLCByKTtcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLnB1c2gocyk7XG4gICAgICAgIC8vIFRyYWNrIHJlZmVyZW5jZXMgYnkgZG9jdW1lbnQga2V5IGFuZCBpbmRleCBjb2xsZWN0aW9uIHBhcmVudHMuXG4gICAgICAgIGZvciAoY29uc3QgdCBvZiByKSB0aGlzLlNyID0gdGhpcy5Tci5hZGQobmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodC5rZXksIGkpKSwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIHQua2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHMpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuYnIodCkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ICsgMSwgciA9IHRoaXMuRHIobiksIGkgPSByIDwgMCA/IDAgOiByO1xuICAgICAgICAvLyBUaGUgcmVxdWVzdGVkIGJhdGNoSWQgbWF5IHN0aWxsIGJlIG91dCBvZiByYW5nZSBzbyBub3JtYWxpemUgaXQgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IGkgPyB0aGlzLm11dGF0aW9uUXVldWVbaV0gOiBudWxsKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCgpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPyAtMSA6IHRoaXMud3IgLSAxKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5zbGljZSgpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgMCksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLlNyLmZvckVhY2hJblJhbmdlKFsgbiwgciBdLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5icihlLnlyKTtcbiAgICAgICAgICAgIGkucHVzaCh0KTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgMCksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICAgICAgdGhpcy5Tci5mb3JFYWNoSW5SYW5nZShbIHQsIHIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgICAgIG4gPSBuLmFkZChlLnlyKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLkNyKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkoZSwgdCkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IHQucGF0aCwgciA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShuZXcgRG9jdW1lbnRLZXkoaSksIDApO1xuICAgICAgICAvLyBGaW5kIHVuaXF1ZSBiYXRjaElEcyByZWZlcmVuY2VkIGJ5IGFsbCBkb2N1bWVudHMgcG90ZW50aWFsbHkgbWF0Y2hpbmcgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGxldCBvID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0aGlzLlNyLmZvckVhY2hXaGlsZSgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZih0KSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgdC5sZW5ndGggPT09IHIgJiYgKG8gPSBvLmFkZChlLnlyKSksICEwKTtcbiAgICAgICAgfSksIHMpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLkNyKG8pKTtcbiAgICB9XG4gICAgQ3IoZSkge1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYW4gYXJyYXkgb2YgbWF0Y2hpbmcgYmF0Y2hlcywgc29ydGVkIGJ5IGJhdGNoSUQgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgLy8gbXVsdGlwbGUgbXV0YXRpb25zIGFmZmVjdGluZyB0aGUgc2FtZSBkb2N1bWVudCBrZXkgYXJlIGFwcGxpZWQgaW4gb3JkZXIuXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5icihlKTtcbiAgICAgICAgICAgIG51bGwgIT09IG4gJiYgdC5wdXNoKG4pO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgwID09PSB0aGlzLnZyKHQuYmF0Y2hJZCwgXCJyZW1vdmVkXCIpKSwgdGhpcy5tdXRhdGlvblF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGxldCBuID0gdGhpcy5TcjtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQubXV0YXRpb25zLCAociA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2Uoci5rZXksIHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICByZXR1cm4gbiA9IG4uZGVsZXRlKGkpLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHIua2V5KTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuU3IgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHhuKGUpIHtcbiAgICAgICAgLy8gTm8tb3Agc2luY2UgdGhlIG1lbW9yeSBtdXRhdGlvbiBxdWV1ZSBkb2VzIG5vdCBtYWludGFpbiBhIHNlcGFyYXRlIGNhY2hlLlxuICAgIH1cbiAgICBjb250YWluc0tleShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCAwKSwgciA9IHRoaXMuU3IuZmlyc3RBZnRlck9yRXF1YWwobik7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0LmlzRXF1YWwociAmJiByLmtleSkpO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCBhc3NlcnRzIHRoYXRcbiAgICAgKiB0aGUgcmVzdWx0aW5nIGluZGV4IGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIGJhdGNoSWQgdG8gc2VhcmNoIGZvclxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBBIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhlIGNhbGxlciBpcyBkb2luZywgcGhyYXNlZCBpbiBwYXNzaXZlXG4gICAgICogZm9ybSAoZS5nLiBcImFja25vd2xlZGdlZFwiIGluIGEgcm91dGluZSB0aGF0IGFja25vd2xlZGdlcyBiYXRjaGVzKS5cbiAgICAgKi8gICAgdnIoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5EcihlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZS4gVGhpcyBvcGVyYXRpb25cbiAgICAgKiBpcyBPKDEpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNvbXB1dGVkIGluZGV4IG9mIHRoZSBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLCBiYXNlZCBvblxuICAgICAqIHRoZSBzdGF0ZSBvZiB0aGUgcXVldWUuIE5vdGUgdGhpcyBpbmRleCBjYW4gYmUgbmVnYXRpdmUgaWYgdGhlIHJlcXVlc3RlZFxuICAgICAqIGJhdGNoSWQgaGFzIGFscmVhZHkgYmVlbiByZW12b2VkIGZyb20gdGhlIHF1ZXVlIG9yIHBhc3QgdGhlIGVuZCBvZiB0aGVcbiAgICAgKiBxdWV1ZSBpZiB0aGUgYmF0Y2hJZCBpcyBsYXJnZXIgdGhhbiB0aGUgbGFzdCBhZGRlZCBiYXRjaC5cbiAgICAgKi8gICAgRHIoZSkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUgLSB0aGlzLm11dGF0aW9uUXVldWVbMF0uYmF0Y2hJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGxvb2t1cE11dGF0aW9uQmF0Y2ggdGhhdCBkb2Vzbid0IHJldHVybiBhIHByb21pc2UsIHRoaXMgbWFrZXNcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cbiAgICAgKi8gICAgYnIoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5EcihlKTtcbiAgICAgICAgaWYgKHQgPCAwIHx8IHQgPj0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWVbdF07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlSW1wbCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gICAgICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gICAgICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLkZyID0gZSwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50RW50cnlNYXAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgfSgpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIHNldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cnkgdG8gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIGFkZEVudHJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQua2V5LCByID0gdGhpcy5kb2NzLmdldChuKSwgaSA9IHIgPyByLnNpemUgOiAwLCBzID0gdGhpcy5Gcih0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5pbnNlcnQobiwge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IHQubXV0YWJsZUNvcHkoKSxcbiAgICAgICAgICAgIHNpemU6IHNcbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSBzIC0gaSwgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgbi5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBlbnRyeSBmcm9tIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHQgJiYgKHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5yZW1vdmUoZSksIHRoaXMuc2l6ZSAtPSB0LnNpemUpO1xuICAgIH1cbiAgICBnZXRFbnRyeShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobiA/IG4uZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQoZSwgdCA/IHQuZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQucGF0aCwgbyA9IG5ldyBEb2N1bWVudEtleShzLmNoaWxkKFwiXCIpKSwgXyA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20obyk7XG4gICAgICAgIGZvciAoO18uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHtrZXk6IGUsIHZhbHVlOiB7ZG9jdW1lbnQ6IG99fSA9IF8uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFzLmlzUHJlZml4T2YoZS5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICBlLnBhdGgubGVuZ3RoID4gcy5sZW5ndGggKyAxIHx8IChfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yKF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudChvKSwgbikgPD0gMCB8fCAoci5oYXMoby5rZXkpIHx8IF9fUFJJVkFURV9xdWVyeU1hdGNoZXModCwgbykpICYmIChpID0gaS5pbnNlcnQoby5rZXksIG8ubXV0YWJsZUNvcHkoKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB0aGUgSW5kZXhCYWNrZmlsbGVyIGlmIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIGlzIGVuYWJsZWQuXG4gICAgICAgIGZhaWwoKTtcbiAgICB9XG4gICAgTXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5kb2NzLCAoZSA9PiB0KGUpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcihlKSB7XG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcih0aGlzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZShlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnNpemUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciBleHRlbmRzIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudXIgPSBlO1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHIuaXNWYWxpZERvY3VtZW50KCkgPyB0LnB1c2godGhpcy51ci5hZGRFbnRyeShlLCByKSkgOiB0aGlzLnVyLnJlbW92ZUVudHJ5KG4pO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHQpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy51ci5nZXRFbnRyeShlLCB0KTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXIuZ2V0RW50cmllcyhlLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlUYXJnZXRDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0IHRvIHRoZSBkYXRhIGFib3V0IHRoYXQgdGFyZ2V0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk9yID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQoZSkpLCBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKSwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZWNlaXZlZCBzbmFwc2hvdCB2ZXJzaW9uLiAqL1xuICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLk5yID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkJyID0gbmV3IF9fUFJJVkFURV9SZWZlcmVuY2VTZXQsIHRoaXMudGFyZ2V0Q291bnQgPSAwLCB0aGlzLkxyID0gX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yLkJuKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Pci5mb3JFYWNoKCgoZSwgbikgPT4gdChuKSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbik7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLk5yKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuTHIubmV4dCgpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuICYmICh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuKSwgdCA+IHRoaXMuTnIgJiYgKHRoaXMuTnIgPSB0KSwgXG4gICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIFFuKGUpIHtcbiAgICAgICAgdGhpcy5Pci5zZXQoZS50YXJnZXQsIGUpO1xuICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRJZDtcbiAgICAgICAgdCA+IHRoaXMuaGlnaGVzdFRhcmdldElkICYmICh0aGlzLkxyID0gbmV3IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvcih0KSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0KSwgXG4gICAgICAgIGUuc2VxdWVuY2VOdW1iZXIgPiB0aGlzLk5yICYmICh0aGlzLk5yID0gZS5zZXF1ZW5jZU51bWJlcik7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Rbih0KSwgdGhpcy50YXJnZXRDb3VudCArPSAxLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUW4odCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Pci5kZWxldGUodC50YXJnZXQpLCB0aGlzLkJyLm1yKHQudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKGUsIHQsIG4pIHtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLk9yLmZvckVhY2goKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBvLnNlcXVlbmNlTnVtYmVyIDw9IHQgJiYgbnVsbCA9PT0gbi5nZXQoby50YXJnZXRJZCkgJiYgKHRoaXMuT3IuZGVsZXRlKHMpLCBpLnB1c2godGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCBvLnRhcmdldElkKSksIFxuICAgICAgICAgICAgcisrKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKS5uZXh0KCgoKSA9PiByKSk7XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuT3IuZ2V0KHQpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQnIuQXIodCwgbiksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyhlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuQnIuVnIodCwgbik7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLCBpID0gW107XG4gICAgICAgIHJldHVybiByICYmIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBpLnB1c2goci5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQnIubXIodCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuQnIucHIodCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5Cci5jb250YWluc0tleSh0KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZSB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIGFjY2VwdHMgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBhIHJlZmVyZW5jZSBkZWxlZ2F0ZS4gVGhpc1xuICAgICAqIGFsbG93cyBib3RoIHRoZSBkZWxlZ2F0ZSBhbmQgdGhpcyBpbnN0YW5jZSB0byBoYXZlIHN0cm9uZyByZWZlcmVuY2VzIHRvXG4gICAgICogZWFjaCBvdGhlciB3aXRob3V0IGhhdmluZyBudWxsYWJsZSBmaWVsZHMgdGhhdCB3b3VsZCB0aGVuIG5lZWQgdG8gYmVcbiAgICAgKiBjaGVja2VkIG9yIGFzc2VydGVkIG9uIGV2ZXJ5IGFjY2Vzcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMua3IgPSB7fSwgdGhpcy5vdmVybGF5cyA9IHt9LCB0aGlzLnFyID0gbmV3IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZSgwKSwgdGhpcy5RciA9ICExLCBcbiAgICAgICAgdGhpcy5RciA9ICEwLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gZSh0aGlzKSwgdGhpcy5LciA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5VGFyZ2V0Q2FjaGUodGhpcyk7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gbmV3IF9fUFJJVkFURV9NZW1vcnlJbmRleE1hbmFnZXIsIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGVJbXBsKGUpO1xuICAgICAgICB9KChlID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuJHIoZSkpKSwgdGhpcy5zZXJpYWxpemVyID0gbmV3IF9fUFJJVkFURV9Mb2NhbFNlcmlhbGl6ZXIodCksIFxuICAgICAgICB0aGlzLlVyID0gbmV3IF9fUFJJVkFURV9NZW1vcnlCdW5kbGVDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxuICAgICAgICByZXR1cm4gdGhpcy5RciA9ICExLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFyO1xuICAgIH1cbiAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE5ldHdvcmtFbmFibGVkKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKGUpIHtcbiAgICAgICAgLy8gV2UgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IGluZGljZXMgZm9yIG1lbW9yeSBwZXJzaXN0ZW5jZSwgc28gd2UgY2FuXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2FtZSBzaGFyZWQgaW5zdGFuY2Ugb2YgdGhlIG1lbW9yeSBpbmRleCBtYW5hZ2VyLlxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXI7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLm92ZXJsYXlzW2UudG9LZXkoKV07XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IF9fUFJJVkFURV9NZW1vcnlEb2N1bWVudE92ZXJsYXlDYWNoZSwgdGhpcy5vdmVybGF5c1tlLnRvS2V5KCldID0gdCksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmtyW2UudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBuIHx8IChuID0gbmV3IF9fUFJJVkFURV9NZW1vcnlNdXRhdGlvblF1ZXVlKHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpLCB0aGlzLmtyW2UudG9LZXkoKV0gPSBuKSwgXG4gICAgICAgIG47XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5LcjtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlVyO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbihlLCB0LCBuKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIk1lbW9yeVBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIGUpO1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9NZW1vcnlUcmFuc2FjdGlvbih0aGlzLnFyLm5leHQoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLldyKCksIG4ocikubmV4dCgoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLkdyKHIpLm5leHQoKCgpID0+IGUpKSkpLnRvUHJvbWlzZSgpLnRoZW4oKGUgPT4gKHIucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICB6cihlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoT2JqZWN0LnZhbHVlcyh0aGlzLmtyKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleShlLCB0KSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlUcmFuc2FjdGlvbiBleHRlbmRzIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IGUsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLmpyID0gbmV3IF9fUFJJVkFURV9SZWZlcmVuY2VTZXQsIFxuICAgICAgICAvKiogVGhlIGxpc3Qgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIHBvdGVudGlhbGx5IEdDZWQgYWZ0ZXIgZWFjaCB0cmFuc2FjdGlvbi4gKi9cbiAgICAgICAgdGhpcy5IciA9IG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyBKcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUoZSk7XG4gICAgfVxuICAgIGdldCBZcigpIHtcbiAgICAgICAgaWYgKHRoaXMuSHIpIHJldHVybiB0aGlzLkhyO1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpyLmFkZFJlZmVyZW5jZShuLCB0KSwgdGhpcy5Zci5kZWxldGUobi50b1N0cmluZygpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuanIucmVtb3ZlUmVmZXJlbmNlKG4sIHQpLCB0aGlzLllyLmFkZChuLnRvU3RyaW5nKCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLllyLmFkZCh0LnRvU3RyaW5nKCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSwgdCkge1xuICAgICAgICB0aGlzLmpyLm1yKHQudGFyZ2V0SWQpLmZvckVhY2goKGUgPT4gdGhpcy5Zci5hZGQoZS50b1N0cmluZygpKSkpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gbi5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0LnRhcmdldElkKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUuZm9yRWFjaCgoZSA9PiB0aGlzLllyLmFkZChlLnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLnJlbW92ZVRhcmdldERhdGEoZSwgdCkpKTtcbiAgICB9XG4gICAgV3IoKSB7XG4gICAgICAgIHRoaXMuSHIgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBHcihlKSB7XG4gICAgICAgIC8vIFJlbW92ZSBuZXdseSBvcnBoYW5lZCBkb2N1bWVudHMuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuWXIsIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBEb2N1bWVudEtleS5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlpyKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUgfHwgdC5yZW1vdmVFbnRyeShyLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHRoaXMuSHIgPSBudWxsLCB0LmFwcGx5KGUpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWnIoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlID8gdGhpcy5Zci5kZWxldGUodC50b1N0cmluZygpKSA6IHRoaXMuWXIuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgJHIoZSkge1xuICAgICAgICAvLyBGb3IgZWFnZXIgR0MsIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIGRvY3VtZW50IHNpemUsIHRoZXJlIGFyZSBubyBzaXplIHRocmVzaG9sZHMuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBacihlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoWyAoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmpyLmNvbnRhaW5zS2V5KHQpKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KGUsIHQpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLnpyKGUsIHQpIF0pO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBlLCB0aGlzLlhyID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUucGF0aCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpLCBcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gX19QUklWQVRFX25ld0xydUdhcmJhZ2VDb2xsZWN0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIHN0YXRpYyBKcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlKGUsIHQpO1xuICAgIH1cbiAgICAvLyBOby1vcHMsIHByZXNlbnQgc28gbWVtb3J5IHBlcnNpc3RlbmNlIGRvZXNuJ3QgaGF2ZSB0byBjYXJlIHdoaWNoIGRlbGVnYXRlXG4gICAgLy8gaXQgaGFzLlxuICAgIFdyKCkge31cbiAgICBHcihlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KGUsIHQpO1xuICAgIH1cbiAgICBKbihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLlhuKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KGUpLm5leHQoKGUgPT4gdC5uZXh0KCh0ID0+IGUgKyB0KSkpKTtcbiAgICB9XG4gICAgWG4oZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLlluKGUsIChlID0+IHtcbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgWW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5YciwgKChuLCByKSA9PiB0aGlzLnRyKGUsIG4sIHIpLm5leHQoKGUgPT4gZSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiB0KHIpKSkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgaSA9IHIubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiByLk1yKGUsIChyID0+IHRoaXMudHIoZSwgciwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlIHx8IChuKyssIGkucmVtb3ZlRW50cnkociwgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IGkuYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWHIuc2V0KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQud2l0aFNlcXVlbmNlTnVtYmVyKGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKGUsIG4pO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Yci5zZXQobiwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Yci5zZXQobiwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWHIuc2V0KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgJHIoZSkge1xuICAgICAgICBsZXQgdCA9IGUua2V5LnRvU3RyaW5nKCkubGVuZ3RoO1xuICAgICAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAodCArPSBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZShlLmRhdGEudmFsdWUpKSwgdDtcbiAgICB9XG4gICAgdHIoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKFsgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS56cihlLCB0KSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KGUsIHQpLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Yci5nZXQodCk7XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodm9pZCAwICE9PSBlICYmIGUgPiBuKTtcbiAgICAgICAgfSBdKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovIGNsYXNzIF9fUFJJVkFURV9TY2hlbWFDb252ZXJ0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBpbiBwcm9kdWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IGV2ZXIgdXNlZCB0byB1cGdyYWRlIHRoZSBzY2hlbWFcbiAgICAgKiB0byBTQ0hFTUFfVkVSU0lPTi4gRGlmZmVyZW50IHZhbHVlcyBvZiB0b1ZlcnNpb24gYXJlIG9ubHkgdXNlZCBmb3IgdGVzdGluZ1xuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxuICAgICAqLyAgICBCKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbihcImNyZWF0ZU9yVXBncmFkZVwiLCB0KTtcbiAgICAgICAgbiA8IDEgJiYgciA+PSAxICYmICghZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVByaW1hcnlDbGllbnRTdG9yZShlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwib3duZXJcIik7XG4gICAgICAgIH0oZSksIGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVNdXRhdGlvblF1ZXVlKGUpIHtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvblF1ZXVlc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJ1c2VySWRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJhdGNoSWRcIixcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgTSwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgIH0pLCBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBVcGdyYWRlIGZ1bmN0aW9uIHRvIG1pZ3JhdGUgdGhlICdtdXRhdGlvbnMnIHN0b3JlIGZyb20gVjEgdG8gVjMuIExvYWRzXG4gKiBhbmQgcmV3cml0ZXMgYWxsIGRhdGEuXG4gKi8gKGUpLCBfX1BSSVZBVEVfY3JlYXRlUXVlcnlDYWNoZShlKSwgZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUxlZ2FjeVJlbW90ZURvY3VtZW50Q2FjaGUoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1wiKTtcbiAgICAgICAgfShlKSk7XG4gICAgICAgIC8vIE1pZ3JhdGlvbiAyIHRvIHBvcHVsYXRlIHRoZSB0YXJnZXRHbG9iYWwgb2JqZWN0IG5vIGxvbmdlciBuZWVkZWQgc2luY2VcbiAgICAgICAgLy8gbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAgICAgICAgICAgICAgICBsZXQgcyA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHJldHVybiBuIDwgMyAmJiByID49IDMgJiYgKFxuICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxuICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cbiAgICAgICAgMCAhPT0gbiAmJiAoIWZ1bmN0aW9uIF9fUFJJVkFURV9kcm9wUXVlcnlDYWNoZShlKSB7XG4gICAgICAgICAgICBlLmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIpLCBlLmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0c1wiKSwgZS5kZWxldGVPYmplY3RTdG9yZShcInRhcmdldEdsb2JhbFwiKTtcbiAgICAgICAgfShlKSwgX19QUklWQVRFX2NyZWF0ZVF1ZXJ5Q2FjaGUoZSkpLCBzID0gcy5uZXh0KCgoKSA9PiBcbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIHRoZSB0YXJnZXQgZ2xvYmFsIHNpbmdsZXRvbiByb3cuXG4gKlxuICogQHBhcmFtIHR4biAtIFRoZSB2ZXJzaW9uIHVwZ3JhZGUgdHJhbnNhY3Rpb24gZm9yIGluZGV4ZWRkYlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV93cml0ZUVtcHR5VGFyZ2V0R2xvYmFsRW50cnkoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoXCJ0YXJnZXRHbG9iYWxcIiksIG4gPSB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdFRhcmdldElkOiAwLFxuICAgICAgICAgICAgICAgIGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogMCxcbiAgICAgICAgICAgICAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uOiBTbmFwc2hvdFZlcnNpb24ubWluKCkudG9UaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRDb3VudDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0LnB1dChcInRhcmdldEdsb2JhbEtleVwiLCBuKTtcbiAgICAgICAgfShpKSkpKSwgbiA8IDQgJiYgciA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICBzID0gcy5uZXh0KCgoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfdXBncmFkZU11dGF0aW9uQmF0Y2hTY2hlbWFBbmRNaWdyYXRlRGF0YShlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gdC5zdG9yZShcIm11dGF0aW9uc1wiKS5HKCkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgZS5kZWxldGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJiYXRjaElkXCIsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgTSwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIiksIGkgPSBuLm1hcCgoZSA9PiByLnB1dChlKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfShlLCBpKSkpKSwgcyA9IHMubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVDbGllbnRNZXRhZGF0YVN0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiY2xpZW50TWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImNsaWVudElkXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHIgPj0gNSAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy5laShpKSkpKSwgbiA8IDYgJiYgciA+PSA2ICYmIChzID0gcy5uZXh0KCgoKSA9PiAoZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpO1xuICAgICAgICB9KGUpLCB0aGlzLnRpKGkpKSkpKSwgbiA8IDcgJiYgciA+PSA3ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLm5pKGkpKSkpLCBuIDwgOCAmJiByID49IDggJiYgKHMgPSBzLm5leHQoKCgpID0+IHRoaXMucmkoZSwgaSkpKSksIFxuICAgICAgICBuIDwgOSAmJiByID49IDkgJiYgKHMgPSBzLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIE11bHRpLVRhYiB1c2VkIHRvIG1hbmFnZSBpdHMgb3duIGNoYW5nZWxvZywgYnV0IHRoaXMgaGFzIGJlZW4gbW92ZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZSBpdHNlbGYuIFNpbmNlIHRoZSBwcmV2aW91cyBjaGFuZ2VcbiAgICAgICAgICAgIC8vIGxvZyBvbmx5IGNvbnRhaW5lZCB0cmFuc2llbnQgZGF0YSwgd2UgY2FuIGRyb3AgaXRzIG9iamVjdCBzdG9yZS5cbiAgICAgICAgICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfZHJvcFJlbW90ZURvY3VtZW50Q2hhbmdlc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgZS5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgICAgICAvLyBOb3RlOiBTY2hlbWEgdmVyc2lvbiA5IHVzZWQgdG8gY3JlYXRlIGEgcmVhZCB0aW1lIGluZGV4IGZvciB0aGVcbiAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgaXMgbm93IGRvbmUgd2l0aCBzY2hlbWEgdmVyc2lvbiAxMy5cbiAgICAgICAgICAgICAgICB9KSkpLCBuIDwgMTAgJiYgciA+PSAxMCAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy5paShpKSkpKSwgbiA8IDExICYmIHIgPj0gMTEgJiYgKHMgPSBzLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlQnVuZGxlc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiYnVuZGxlc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYnVuZGxlSWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKSwgZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZU5hbWVkUXVlcmllc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibmFtZWRRdWVyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJuYW1lXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCAxMiAmJiByID49IDEyICYmIChzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZURvY3VtZW50T3ZlcmxheVN0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5jcmVhdGVPYmplY3RTdG9yZShcImRvY3VtZW50T3ZlcmxheXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBHXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHosIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pLCB0LmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsIGosIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKTtcbiAgICAgICAgfSkpKSwgbiA8IDEzICYmIHIgPj0gMTMgJiYgKHMgPSBzLm5leHQoKCgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVSZW1vdGVEb2N1bWVudENhY2hlKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBPXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlSW5kZXgoXCJkb2N1bWVudEtleUluZGV4XCIsIE4pLCB0LmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgQik7XG4gICAgICAgIH0oZSkpKS5uZXh0KCgoKSA9PiB0aGlzLnNpKGUsIGkpKSkubmV4dCgoKCkgPT4gZS5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1wiKSkpKSwgXG4gICAgICAgIG4gPCAxNCAmJiByID49IDE0ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLm9pKGUsIGkpKSkpLCBuIDwgMTUgJiYgciA+PSAxNSAmJiAocyA9IHMubmV4dCgoKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUZpZWxkSW5kZXgoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4Q29uZmlndXJhdGlvblwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJpbmRleElkXCIsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4U3RhdGVcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IEtcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwic2VxdWVuY2VOdW1iZXJJbmRleFwiLCAkLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhFbnRyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBVXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcImRvY3VtZW50S2V5SW5kZXhcIiwgVywge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KGUpKSkpLCBzO1xuICAgIH1cbiAgICB0aShlKSB7XG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikuWigoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQgKz0gX19QUklWQVRFX2RiRG9jdW1lbnRTaXplKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgICAgICBieXRlU2l6ZTogdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIikucHV0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIiwgbik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZWkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShcIm11dGF0aW9uUXVldWVzXCIpLCBuID0gZS5zdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgcmV0dXJuIHQuRygpLm5leHQoKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdC51c2VySWQsIC0xIF0sIFsgdC51c2VySWQsIHQubGFzdEFja25vd2xlZGdlZEJhdGNoSWQgXSk7XG4gICAgICAgICAgICByZXR1cm4gbi5HKFwidXNlck11dGF0aW9uc0luZGV4XCIsIHIpLm5leHQoKG4gPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gobiwgKG4gPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG4udXNlcklkID09PSB0LnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdC51c2VySWQsIHIpLm5leHQoKCgpID0+IHt9KSk7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCBldmVyeSBkb2N1bWVudCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIGhhcyBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93XG4gICAgICogd2l0aCBhIHNlcXVlbmNlIG51bWJlci4gTWlzc2luZyByb3dzIGFyZSBnaXZlbiB0aGUgbW9zdCByZWNlbnRseSB1c2VkIHNlcXVlbmNlIG51bWJlci5cbiAgICAgKi8gICAgbmkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShcInRhcmdldERvY3VtZW50c1wiKSwgbiA9IGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIHJldHVybiBlLnN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLlooKChuLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBSZXNvdXJjZVBhdGgobiksIG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfc2VudGluZWxLZXkoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyAwLCBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUpIF07XG4gICAgICAgICAgICAgICAgfShzKTtcbiAgICAgICAgICAgICAgICByLnB1c2godC5nZXQobykubmV4dCgobiA9PiBuID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSA6IChuID0+IHQucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgobiksXG4gICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlclxuICAgICAgICAgICAgICAgIH0pKShzKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJpKGUsIHQpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbmRleC5cbiAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImNvbGxlY3Rpb25QYXJlbnRzXCIsIHtcbiAgICAgICAgICAgIGtleVBhdGg6IFFcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG4gPSB0LnN0b3JlKFwiY29sbGVjdGlvblBhcmVudHNcIiksIHIgPSBuZXcgX19QUklWQVRFX01lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCwgYWRkRW50cnkgPSBlID0+IHtcbiAgICAgICAgICAgIGlmIChyLmFkZChlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmxhc3RTZWdtZW50KCksIHIgPSBlLnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IHQsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChyKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBIZWxwZXIgdG8gYWRkIGFuIGluZGV4IGVudHJ5IGlmZiB3ZSBoYXZlbid0IGFscmVhZHkgd3JpdHRlbiBpdC5cbiAgICAgICAgICAgICAgICAvLyBJbmRleCBleGlzdGluZyByZW1vdGUgZG9jdW1lbnRzLlxuICAgICAgICByZXR1cm4gdC5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKS5aKHtcbiAgICAgICAgICAgIFk6ICEwXG4gICAgICAgIH0sICgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBSZXNvdXJjZVBhdGgoZSk7XG4gICAgICAgICAgICByZXR1cm4gYWRkRW50cnkobi5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdC5zdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpLlooe1xuICAgICAgICAgICAgWTogITBcbiAgICAgICAgfSwgKChbZSwgdCwgbl0sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGFkZEVudHJ5KGkucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIGlpKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoXCJ0YXJnZXRzXCIpO1xuICAgICAgICByZXR1cm4gdC5aKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobiksIGkgPSBfX1BSSVZBVEVfdG9EYlRhcmdldCh0aGlzLnNlcmlhbGl6ZXIsIHIpO1xuICAgICAgICAgICAgcmV0dXJuIHQucHV0KGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNpKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIiksIHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uWigoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpLCBzID0gZnVuY3Rpb24gX19QUklWQVRFX2V4dHJhY3RLZXkoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmRvY3VtZW50ID8gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUuZG9jdW1lbnQubmFtZSkucG9wRmlyc3QoNSkpIDogZS5ub0RvY3VtZW50ID8gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSA6IGUudW5rbm93bkRvY3VtZW50ID8gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKGUudW5rbm93bkRvY3VtZW50LnBhdGgpIDogZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4pLnBhdGgudG9BcnJheSgpLCBvID0ge1xuICAgICAgICAgICAgICAgIHByZWZpeFBhdGg6IHMuc2xpY2UoMCwgcy5sZW5ndGggLSAyKSxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IHNbcy5sZW5ndGggLSAyXSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkOiBzW3MubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IG4ucmVhZFRpbWUgfHwgWyAwLCAwIF0sXG4gICAgICAgICAgICAgICAgdW5rbm93bkRvY3VtZW50OiBuLnVua25vd25Eb2N1bWVudCxcbiAgICAgICAgICAgICAgICBub0RvY3VtZW50OiBuLm5vRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IG4uZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiAhIW4uaGFzQ29tbWl0dGVkTXV0YXRpb25zXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgci5wdXNoKGkucHV0KG8pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpKSk7XG4gICAgfVxuICAgIG9pKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIiksIHIgPSBfX1BSSVZBVEVfbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpLCBpID0gbmV3IF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZShfX1BSSVZBVEVfTWVtb3J5RWFnZXJEZWxlZ2F0ZS5KciwgdGhpcy5zZXJpYWxpemVyLmh0KTtcbiAgICAgICAgcmV0dXJuIG4uRygpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgICAgICBsZXQgciA9IG51bGwgIT09ICh0ID0gbi5nZXQoZS51c2VySWQpKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKS5rZXlzKCkuZm9yRWFjaCgoZSA9PiByID0gci5hZGQoZSkpKSwgXG4gICAgICAgICAgICAgICAgbi5zZXQoZS51c2VySWQsIHIpO1xuICAgICAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChuLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IFVzZXIobiksIG8gPSBfX1BSSVZBVEVfSW5kZXhlZERiRG9jdW1lbnRPdmVybGF5Q2FjaGUuUHQodGhpcy5zZXJpYWxpemVyLCBzKSwgXyA9IGkuZ2V0SW5kZXhNYW5hZ2VyKHMpLCBhID0gX19QUklWQVRFX0luZGV4ZWREYk11dGF0aW9uUXVldWUuUHQocywgdGhpcy5zZXJpYWxpemVyLCBfLCBpLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExvY2FsRG9jdW1lbnRzVmlldyhyLCBhLCBvLCBfKS5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uKHQsIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSksIGUpLm5leHQoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVF1ZXJ5Q2FjaGUoZSkge1xuICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBrXG4gICAgfSkuY3JlYXRlSW5kZXgoXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCBxLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KTtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIHVuaXF1ZSBvbmx5IGJlY2F1c2UgdGhlIFRhcmdldElkIGlzIHRoZSBzdWZmaXguXG4gICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBcInRhcmdldElkXCJcbiAgICB9KS5jcmVhdGVJbmRleChcInF1ZXJ5VGFyZ2V0c0luZGV4XCIsIEwsIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pLCBlLmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpO1xufVxuXG5jb25zdCBFZSA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiUGVyc2lzdGVuY2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gc3luY2hyb25pemUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiBtdWx0aXBsZSB0YWJzIGFuZCBzaGFyZVxuICAgICAqIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAgICAgKi9cbiAgICBlLCB0LCBuLCByLCBpLCBzLCBvLCBfLCBhLCBcbiAgICAvKipcbiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgZm9yY2VmdWxseSBvYnRhaW5zIGRhdGFiYXNlIGFjY2Vzcy4gRXhpc3RpbmcgdGFicyB3aWxsXG4gICAgICogbm8gbG9uZ2VyIGJlIGFibGUgdG8gYWNjZXNzIEluZGV4ZWREQi5cbiAgICAgKi9cbiAgICB1LCBjID0gMTUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gdCwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLl9pID0gaSwgdGhpcy53aW5kb3cgPSBzLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5haSA9IGEsIHRoaXMudWkgPSB1LCB0aGlzLmNpID0gYywgXG4gICAgICAgIHRoaXMucXIgPSBudWxsLCB0aGlzLlFyID0gITEsIHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMubmV0d29ya0VuYWJsZWQgPSAhMCwgXG4gICAgICAgIC8qKiBPdXIgd2luZG93LnVubG9hZCBoYW5kbGVyLCBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLmxpID0gbnVsbCwgdGhpcy5pbkZvcmVncm91bmQgPSAhMSwgXG4gICAgICAgIC8qKiBPdXIgJ3Zpc2liaWxpdHljaGFuZ2UnIGxpc3RlbmVyIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMuaGkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBjbGllbnQgbWV0YWRhdGEgcmVmcmVzaCB0YXNrLiAqL1xuICAgICAgICB0aGlzLlBpID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCB0aW1lIHdlIGdhcmJhZ2UgY29sbGVjdGVkIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLiAqL1xuICAgICAgICB0aGlzLklpID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBcbiAgICAgICAgLyoqIEEgbGlzdGVuZXIgdG8gbm90aWZ5IG9uIHByaW1hcnkgc3RhdGUgY2hhbmdlcy4gKi9cbiAgICAgICAgdGhpcy5kaSA9IGUgPT4gUHJvbWlzZS5yZXNvbHZlKCksICFfX1BSSVZBVEVfSW5kZXhlZERiUGVyc2lzdGVuY2UuQygpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTklNUExFTUVOVEVELCBcIlRoaXMgcGxhdGZvcm0gaXMgZWl0aGVyIG1pc3NpbmcgSW5kZXhlZERCIG9yIGlzIGtub3duIHRvIGhhdmUgYW4gaW5jb21wbGV0ZSBpbXBsZW1lbnRhdGlvbi4gT2ZmbGluZSBwZXJzaXN0ZW5jZSBoYXMgYmVlbiBkaXNhYmxlZC5cIik7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYkxydURlbGVnYXRlSW1wbCh0aGlzLCByKSwgdGhpcy5UaSA9IHQgKyBcIm1haW5cIiwgXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IG5ldyBfX1BSSVZBVEVfTG9jYWxTZXJpYWxpemVyKF8pLCB0aGlzLkVpID0gbmV3IF9fUFJJVkFURV9TaW1wbGVEYih0aGlzLlRpLCB0aGlzLmNpLCBuZXcgX19QUklWQVRFX1NjaGVtYUNvbnZlcnRlcih0aGlzLnNlcmlhbGl6ZXIpKSwgXG4gICAgICAgIHRoaXMuS3IgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRhcmdldENhY2hlKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUsIHRoaXMuc2VyaWFsaXplciksIFxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBfX1BSSVZBVEVfbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpLCBcbiAgICAgICAgdGhpcy5VciA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiQnVuZGxlQ2FjaGUsIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuQWkgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5BaSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gdSAmJiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZS4gQXMgYSByZXN1bHQsIHBlcnNpc3RlbmNlIG1heSBub3Qgd29yayByZWxpYWJseS4gSW4gcGFydGljdWxhciBlbmFibGVQZXJzaXN0ZW5jZSgpIGNvdWxkIGZhaWwgaW1tZWRpYXRlbHkgYWZ0ZXIgcmVmcmVzaGluZyB0aGUgcGFnZS5cIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIHN0YXJ0IEluZGV4ZWREYiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgcGVyc2lzdGVuY2Ugd2FzIGVuYWJsZWQuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICAvLyBOT1RFOiBUaGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgc29tZXRpbWVzIChpbiB0aGUgY2FzZSBvZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBhbHJlYWR5IGhhdmluZyB0aGUgcGVyc2lzdGVuY2UgbG9jayksIHNvIGl0J3MgdGhlIGZpcnN0IHRoaW5nIHdlIHNob3VsZFxuICAgICAgICAvLyBkby5cbiAgICAgICAgcmV0dXJuIHRoaXMuUmkoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgIC8vIEZhaWwgYHN0YXJ0KClgIGlmIGBzeW5jaHJvbml6ZVRhYnNgIGlzIGRpc2FibGVkIGFuZCB3ZSBjYW5ub3RcbiAgICAgICAgICAgIC8vIG9idGFpbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIEVlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlZpKCksIHRoaXMubWkoKSwgdGhpcy5maSgpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gdGhpcy5Lci5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIoZSkpKTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5xciA9IG5ldyBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UoZSwgdGhpcy5haSk7XG4gICAgICAgIH0pKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlFyID0gITA7XG4gICAgICAgIH0pKS5jYXRjaCgoZSA9PiAodGhpcy5FaSAmJiB0aGlzLkVpLmNsb3NlKCksIFByb21pc2UucmVqZWN0KGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIHByaW1hcnkgc3RhdGUgb2YgdGhlXG4gICAgICogaW5zdGFuY2UgY2hhbmdlcy4gVXBvbiByZWdpc3RlcmluZywgdGhpcyBsaXN0ZW5lciBpcyBpbnZva2VkIGltbWVkaWF0ZWx5XG4gICAgICogd2l0aCB0aGUgY3VycmVudCBwcmltYXJ5IHN0YXRlLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgZ2koZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaSA9IGFzeW5jIHQgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkgcmV0dXJuIGUodCk7XG4gICAgICAgIH0sIGUodGhpcy5pc1ByaW1hcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIGRhdGFiYXNlIHJlY2VpdmVzIGFcbiAgICAgKiB2ZXJzaW9uIGNoYW5nZSBldmVudCBpbmRpY2F0aW5nIHRoYXQgaXQgaGFzIGRlbGV0ZWQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMuRWkuaygoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gZGVsZXRlIEluZGV4ZWREQi5cbiAgICAgICAgICAgIG51bGwgPT09IHQubmV3VmVyc2lvbiAmJiBhd2FpdCBlKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRqdXN0cyB0aGUgY3VycmVudCBuZXR3b3JrIHN0YXRlIGluIHRoZSBjbGllbnQncyBtZXRhZGF0YSwgcG90ZW50aWFsbHlcbiAgICAgKiBhZmZlY3RpbmcgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXROZXR3b3JrRW5hYmxlZChlKSB7XG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgIT09IGUgJiYgKHRoaXMubmV0d29ya0VuYWJsZWQgPSBlLCBcbiAgICAgICAgLy8gU2NoZWR1bGUgYSBwcmltYXJ5IGxlYXNlIHJlZnJlc2ggZm9yIGltbWVkaWF0ZSBleGVjdXRpb24uIFRoZSBldmVudHVhbFxuICAgICAgICAvLyBsZWFzZSB1cGRhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHZpYSBgcHJpbWFyeVN0YXRlTGlzdGVuZXJgLlxuICAgICAgICB0aGlzLl9pLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCAmJiBhd2FpdCB0aGlzLlJpKCk7XG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNsaWVudCBtZXRhZGF0YSBpbiBJbmRleGVkRGIgYW5kIGF0dGVtcHRzIHRvIGVpdGhlciBvYnRhaW4gb3JcbiAgICAgKiBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIEFzeW5jaHJvbm91c2x5IG5vdGlmaWVzIHRoZVxuICAgICAqIHByaW1hcnkgc3RhdGUgbGlzdGVuZXIgaWYgdGhlIGNsaWVudCBlaXRoZXIgbmV3bHkgb2J0YWluZWQgb3IgcmVsZWFzZWQgaXRzXG4gICAgICogcHJpbWFyeSBsZWFzZS5cbiAgICAgKi8gICAgUmkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwidXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5XCIsIFwicmVhZHdyaXRlXCIsIChlID0+IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLnB1dCh7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5ldHdvcmtFbmFibGVkOiB0aGlzLm5ldHdvcmtFbmFibGVkLFxuICAgICAgICAgICAgaW5Gb3JlZ3JvdW5kOiB0aGlzLmluRm9yZWdyb3VuZFxuICAgICAgICB9KS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHJldHVybiB0aGlzLnBpKGUpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUgfHwgKHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMuX2kuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5kaSghMSkpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLnlpKGUpKSkubmV4dCgodCA9PiB0aGlzLmlzUHJpbWFyeSAmJiAhdCA/IHRoaXMud2koZSkubmV4dCgoKCkgPT4gITEpKSA6ICEhdCAmJiB0aGlzLlNpKGUpLm5leHQoKCgpID0+ICEwKSkpKSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBleHRlbmQgb3duZXIgbGVhc2U6IFwiLCBlKSwgXG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgdGhyb3cgZTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCBlKSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gZSAmJiB0aGlzLl9pLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuZGkoZSkpKSwgdGhpcy5pc1ByaW1hcnkgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHBpKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFwib3duZXJcIikubmV4dCgoZSA9PiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmJpKGUpKSkpO1xuICAgIH1cbiAgICBEaShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY2xpZW50TWV0YWRhdGFTdG9yZShlKS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBDaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLnZpKHRoaXMuSWksIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLklpID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImNsaWVudE1ldGFkYXRhXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0LkcoKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuRmkoZSwgMThlNSksIHIgPSBlLmZpbHRlcigoZSA9PiAtMSA9PT0gbi5pbmRleE9mKGUpKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBtZXRhZGF0YSBmb3IgY2xpZW50cyB0aGF0IGFyZSBubyBsb25nZXIgY29uc2lkZXJlZCBhY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyLCAoZSA9PiB0LmRlbGV0ZShlLmNsaWVudElkKSkpLm5leHQoKCgpID0+IHIpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKCgpID0+IFtdKSk7XG4gICAgICAgICAgICAvLyBEZWxldGUgcG90ZW50aWFsIGxlZnRvdmVyIGVudHJpZXMgdGhhdCBtYXkgY29udGludWUgdG8gbWFyayB0aGVcbiAgICAgICAgICAgIC8vIGluYWN0aXZlIGNsaWVudHMgYXMgem9tYmllZCBpbiBMb2NhbFN0b3JhZ2UuXG4gICAgICAgICAgICAvLyBJZGVhbGx5IHdlJ2QgZGVsZXRlIHRoZSBJbmRleGVkRGIgYW5kIExvY2FsU3RvcmFnZSB6b21iaWUgZW50cmllcyBmb3JcbiAgICAgICAgICAgIC8vIHRoZSBjbGllbnQgYXRvbWljYWxseSwgYnV0IHdlIGNhbid0LiBTbyB3ZSBvcHQgdG8gZGVsZXRlIHRoZSBJbmRleGVkRGJcbiAgICAgICAgICAgIC8vIGVudHJpZXMgZmlyc3QgdG8gYXZvaWQgcG90ZW50aWFsbHkgcmV2aXZpbmcgYSB6b21iaWVkIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLkFpKSBmb3IgKGNvbnN0IHQgb2YgZSkgdGhpcy5BaS5yZW1vdmVJdGVtKHRoaXMuTWkodC5jbGllbnRJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHJlY3VycmluZyB0aW1lciB0byB1cGRhdGUgdGhlIGNsaWVudCBtZXRhZGF0YSBhbmQgdG8gZWl0aGVyXG4gICAgICogZXh0ZW5kIG9yIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgaWYgdGhlIGNsaWVudCBpcyBlbGlnaWJsZS5cbiAgICAgKi8gICAgZmkoKSB7XG4gICAgICAgIHRoaXMuUGkgPSB0aGlzLl9pLmVucXVldWVBZnRlckRlbGF5KFwiY2xpZW50X21ldGFkYXRhX3JlZnJlc2hcIiAvKiBUaW1lcklkLkNsaWVudE1ldGFkYXRhUmVmcmVzaCAqLyAsIDRlMywgKCgpID0+IHRoaXMuUmkoKS50aGVuKCgoKSA9PiB0aGlzLkNpKCkpKS50aGVuKCgoKSA9PiB0aGlzLmZpKCkpKSkpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi8gICAgYmkoZSkge1xuICAgICAgICByZXR1cm4gISFlICYmIGUub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXG4gICAgICogY2xpZW50IGlzIG9yIGNhbiBhY3QgYXMgdGhlIGhvbGRlciBvZiB0aGUgcHJpbWFyeSBsZWFzZS4gUmV0dXJucyB3aGV0aGVyXG4gICAgICogdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIGxlYXNlLCBidXQgZG9lcyBub3QgYWN0dWFsbHkgYWNxdWlyZSBpdC5cbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcbiAgICAgKiAoZm9yZWdyb3VuZCkgY2xpZW50IHNob3VsZCBiZWNvbWUgbGVhc2Vob2xkZXIgaW5zdGVhZC5cbiAgICAgKi8gICAgeWkoZSkge1xuICAgICAgICBpZiAodGhpcy51aSkgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCEwKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFwib3duZXJcIikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAvLyBBIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIHByaW1hcnkgbGVhc2UgaWY6XG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpblxuICAgICAgICAgICAgLy8gICB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gdGhlIGBmb3JjZU93bmluZ1RhYmAgc2V0dGluZyB3YXMgcGFzc2VkIGluLlxuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy52aSh0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMueGkodC5vd25lcklkKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJpKHQpICYmIHRoaXMubmV0d29ya0VuYWJsZWQpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYmkodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCB0aGUgYGNhbkFjdEFzUHJpbWFyeWAgY2hlY2sgaWYgdGhlIGN1cnJlbnQgbGVhc2Vob2xkZXIgaGFzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uIElmIHRoaXMgaGFwcGVucyBhdFxuICAgICAgICAgICAgICAgICAgICAvLyBjbGllbnQgc3RhcnR1cCwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIHJldHVybmVkIGJ5XG4gICAgICAgICAgICAgICAgICAgIC8vIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCBhbmQgdGhlIHVzZXIgY2FuIGNvbnRpbnVlIHRvIHVzZSBGaXJlc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgZHVyaW5nIGEgbGVhc2UgcmVmcmVzaCwgd2Ugd2lsbCBpbnN0ZWFkIGJsb2NrIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIGZyb20gZXhlY3V0aW5nIGZ1cnRoZXIgb3BlcmF0aW9ucy4gTm90ZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBtaXhpbmcgJiBtYXRjaGluZyBkaWZmZXJlbnQgYHN5bmNocm9uaXplVGFic2BcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciBiZSB0dXJuZWQgb2ZmLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBFZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gISghdGhpcy5uZXR3b3JrRW5hYmxlZCB8fCAhdGhpcy5pbkZvcmVncm91bmQpIHx8IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLkcoKS5uZXh0KChlID0+IHZvaWQgMCA9PT0gdGhpcy5GaShlLCA1ZTMpLmZpbmQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudElkICE9PSBlLmNsaWVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAhdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiBlLm5ldHdvcmtFbmFibGVkLCBuID0gIXRoaXMuaW5Gb3JlZ3JvdW5kICYmIGUuaW5Gb3JlZ3JvdW5kLCByID0gdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gZS5uZXR3b3JrRW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgfHwgbiAmJiByKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkubmV4dCgoZSA9PiAodGhpcy5pc1ByaW1hcnkgIT09IGUgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAke2UgPyBcImlzXCIgOiBcImlzIG5vdFwifSBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLmApLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXG4gICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cbiAgICAgICAgdGhpcy5RciA9ICExLCB0aGlzLk9pKCksIHRoaXMuUGkgJiYgKHRoaXMuUGkuY2FuY2VsKCksIHRoaXMuUGkgPSBudWxsKSwgdGhpcy5OaSgpLCBcbiAgICAgICAgdGhpcy5CaSgpLCBcbiAgICAgICAgLy8gVXNlIGBTaW1wbGVEYi5ydW5UcmFuc2FjdGlvbmAgZGlyZWN0bHkgdG8gYXZvaWQgZmFpbGluZyBpZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBoYXMgb2J0YWluZWQgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgIGF3YWl0IHRoaXMuRWkucnVuVHJhbnNhY3Rpb24oXCJzaHV0ZG93blwiLCBcInJlYWR3cml0ZVwiLCBbIFwib3duZXJcIiwgXCJjbGllbnRNZXRhZGF0YVwiIF0sIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uKGUsIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53aSh0KS5uZXh0KCgoKSA9PiB0aGlzLkRpKHQpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5FaS5jbG9zZSgpLCBcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBtYXJraW5nIHRoZSBjbGllbnQgYXMgem9tYmllZCBmcm9tIExvY2FsU3RvcmFnZSBzaW5jZVxuICAgICAgICAvLyB3ZSBzdWNjZXNzZnVsbHkgZGVsZXRlZCBpdHMgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuXG4gICAgICAgIHRoaXMuTGkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjbGllbnRzIHRoYXQgYXJlIG5vdCB6b21iaWVkIGFuZCBoYXZlIGFuIHVwZGF0ZVRpbWUgd2l0aGluIHRoZVxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cbiAgICAgKi8gICAgRmkoZSwgdCkge1xuICAgICAgICByZXR1cm4gZS5maWx0ZXIoKGUgPT4gdGhpcy52aShlLnVwZGF0ZVRpbWVNcywgdCkgJiYgIXRoaXMueGkoZS5jbGllbnRJZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuIElmIG11bHRpLXRhYlxuICAgICAqIGlzIG5vdCBzdXBwb3J0ZWQsIHJldHVybnMgYW4gYXJyYXkgdGhhdCBvbmx5IGNvbnRhaW5zIHRoZSBsb2NhbCBjbGllbnQnc1xuICAgICAqIElELlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAga2koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0QWN0aXZlQ2xpZW50c1wiLCBcInJlYWRvbmx5XCIsIChlID0+IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLkcoKS5uZXh0KChlID0+IHRoaXMuRmkoZSwgMThlNSkubWFwKChlID0+IGUuY2xpZW50SWQpKSkpKSk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5RcjtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5QdChlLCB0aGlzLnNlcmlhbGl6ZXIsIHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuS3I7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYkluZGV4TWFuYWdlcihlLCB0aGlzLnNlcmlhbGl6ZXIuaHQuZGF0YWJhc2VJZCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9JbmRleGVkRGJEb2N1bWVudE92ZXJsYXlDYWNoZS5QdCh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVXI7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKGUsIHQsIG4pIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgZSk7XG4gICAgICAgIGNvbnN0IHIgPSBcInJlYWRvbmx5XCIgPT09IHQgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBpID0gXG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBvYmplY3Qgc3RvcmVzIGZvciB0aGUgcHJvdmlkZWQgc2NoZW1hLiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0T2JqZWN0U3RvcmVzKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAxNSA9PT0gZSA/IFggOiAxNCA9PT0gZSA/IFogOiAxMyA9PT0gZSA/IFkgOiAxMiA9PT0gZSA/IEogOiAxMSA9PT0gZSA/IEggOiB2b2lkIGZhaWwoKTtcbiAgICAgICAgfSh0aGlzLmNpKTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIC8vIERvIGFsbCB0cmFuc2FjdGlvbnMgYXMgcmVhZHdyaXRlIGFnYWluc3QgYWxsIG9iamVjdCBzdG9yZXMsIHNpbmNlIHdlXG4gICAgICAgIC8vIGFyZSB0aGUgb25seSByZWFkZXIvd3JpdGVyLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkVpLnJ1blRyYW5zYWN0aW9uKGUsIHIsIGksIChyID0+IChzID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbihyLCB0aGlzLnFyID8gdGhpcy5xci5uZXh0KCkgOiBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWUpLCBcbiAgICAgICAgXCJyZWFkd3JpdGUtcHJpbWFyeVwiID09PSB0ID8gdGhpcy5waShzKS5uZXh0KChlID0+ICEhZSB8fCB0aGlzLnlpKHMpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAoIXQpIHRocm93IF9fUFJJVkFURV9sb2dFcnJvcihgRmFpbGVkIHRvIG9idGFpbiBwcmltYXJ5IGxlYXNlIGZvciBhY3Rpb24gJyR7ZX0nLmApLCBcbiAgICAgICAgICAgIHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMuX2kuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5kaSghMSkpKSwgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgdik7XG4gICAgICAgICAgICByZXR1cm4gbihzKTtcbiAgICAgICAgfSkpLm5leHQoKGUgPT4gdGhpcy5TaShzKS5uZXh0KCgoKSA9PiBlKSkpKSA6IHRoaXMucWkocykubmV4dCgoKCkgPT4gbihzKSkpKSkpLnRoZW4oKGUgPT4gKHMucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSBjdXJyZW50IHRhYiBpcyB0aGUgcHJpbWFyeSBsZWFzZWhvbGRlciBvciBhbHRlcm5hdGl2ZWx5XG4gICAgICogdGhhdCB0aGUgbGVhc2Vob2xkZXIgaGFzIG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW4gbm8gbG9uZ2VyXG4gICAgLy8gYmUgdHVybmVkIG9mZi5cbiAgICBxaShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpLmdldChcIm93bmVyXCIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUgJiYgdGhpcy52aShlLmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMueGkoZS5vd25lcklkKSAmJiAhdGhpcy5iaShlKSAmJiAhKHRoaXMudWkgfHwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiAmJiBlLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgRWUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9idGFpbnMgb3IgZXh0ZW5kcyB0aGUgbmV3IHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIFRoaXNcbiAgICAgKiBtZXRob2QgZG9lcyBub3QgdmVyaWZ5IHRoYXQgdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhpcyBsZWFzZS5cbiAgICAgKi8gICAgU2koZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgb3duZXJJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGFsbG93VGFiU3luY2hyb25pemF0aW9uOiB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uLFxuICAgICAgICAgICAgbGVhc2VUaW1lc3RhbXBNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1hcnlDbGllbnRTdG9yZShlKS5wdXQoXCJvd25lclwiLCB0KTtcbiAgICB9XG4gICAgc3RhdGljIEMoKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfU2ltcGxlRGIuQygpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHRoZSBwcmltYXJ5IGxlYXNlIGFuZCByZW1vdmVzIGl0IGlmIHdlIGFyZSB0aGUgY3VycmVudCBwcmltYXJ5LiAqLyAgICB3aShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5nZXQoXCJvd25lclwiKS5uZXh0KChlID0+IHRoaXMuYmkoZSkgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICB0LmRlbGV0ZShcIm93bmVyXCIpKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgLyoqIFZlcmlmaWVzIHRoYXQgYHVwZGF0ZVRpbWVNc2AgaXMgd2l0aGluIGBtYXhBZ2VNc2AuICovICAgIHZpKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiAhKGUgPCBuIC0gdCkgJiYgKCEoZSA+IG4pIHx8IChfX1BSSVZBVEVfbG9nRXJyb3IoYERldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogJHtlfSA+ICR7bn1gKSwgXG4gICAgICAgICExKSk7XG4gICAgfVxuICAgIFZpKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmRvY3VtZW50ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICh0aGlzLmhpID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUsIFxuICAgICAgICAgICAgdGhpcy5SaSgpKSkpO1xuICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuaGkpLCB0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7XG4gICAgfVxuICAgIE5pKCkge1xuICAgICAgICB0aGlzLmhpICYmICh0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuaGkpLCB0aGlzLmhpID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcbiAgICAgKiBoYW5kbGVyLlxuICAgICAqLyAgICBtaSgpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKG51bGwgPT09IChlID0gdGhpcy53aW5kb3cpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWRkRXZlbnRMaXN0ZW5lcikgJiYgKHRoaXMubGkgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy5PaSgpO1xuICAgICAgICAgICAgY29uc3QgZSA9IC8oPzpWZXJzaW9ufE1vYmlsZSlcXC8xWzQ1Nl0vO1xuICAgICAgICAgICAgaXNTYWZhcmkoKSAmJiAobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goZSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChlKSkgJiYgXG4gICAgICAgICAgICAvLyBPbiBTYWZhcmkgMTQsIDE1LCBhbmQgMTYsIHdlIGRvIG5vdCBydW4gYW55IGNsZWFudXAgYWN0aW9ucyBhcyBpdCBtaWdodFxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhIGJ1ZyB0aGF0IHByZXZlbnRzIFNhZmFyaSBmcm9tIHJlLW9wZW5pbmcgSW5kZXhlZERCIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlIG5leHQgcGFnZSBsb2FkLlxuICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMjY1NDdcbiAgICAgICAgICAgIHRoaXMuX2kuZW50ZXJSZXN0cmljdGVkTW9kZSgvKiBwdXJnZUV4aXN0aW5nVGFza3M9ICovICEwKSwgdGhpcy5faS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLnNodXRkb3duKCkpKTtcbiAgICAgICAgfSwgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMubGkpKTtcbiAgICB9XG4gICAgQmkoKSB7XG4gICAgICAgIHRoaXMubGkgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLmxpKSwgdGhpcy5saSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBjbGllbnQgaXMgXCJ6b21iaWVkXCIgYmFzZWQgb24gaXRzIExvY2FsU3RvcmFnZSBlbnRyeS5cbiAgICAgKiBDbGllbnRzIGJlY29tZSB6b21iaWVkIHdoZW4gdGhlaXIgdGFiIGNsb3NlcyB3aXRob3V0IHJ1bm5pbmcgYWxsIG9mIHRoZVxuICAgICAqIGNsZWFudXAgbG9naWMgaW4gYHNodXRkb3duKClgLlxuICAgICAqLyAgICB4aShlKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbiA9IG51bGwgIT09IChudWxsID09PSAodCA9IHRoaXMuQWkpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZ2V0SXRlbSh0aGlzLk1pKGUpKSk7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAnJHtlfScgJHtuID8gXCJpc1wiIDogXCJpcyBub3RcIn0gem9tYmllZCBpbiBMb2NhbFN0b3JhZ2VgKSwgXG4gICAgICAgICAgICBuO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBnZXQgem9tYmllZCBjbGllbnQgaWQuXCIsIGUpLCBcbiAgICAgICAgICAgICExO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZCBjbGllbnQgYXMgem9tYmllZCAoYSBjbGllbnQgdGhhdCBoYWQgaXRzIHRhYiBjbG9zZWQpLiBab21iaWVkXG4gICAgICogY2xpZW50cyBhcmUgaWdub3JlZCBkdXJpbmcgcHJpbWFyeSB0YWIgc2VsZWN0aW9uLlxuICAgICAqLyAgICBPaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuQWkpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLkFpLnNldEl0ZW0odGhpcy5NaSh0aGlzLmNsaWVudElkKSwgU3RyaW5nKERhdGUubm93KCkpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IGF2YWlsYWJsZSAvIHdvcmtpbmcuXG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRXJyb3IoXCJGYWlsZWQgdG8gc2V0IHpvbWJpZSBjbGllbnQgaWQuXCIsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBSZW1vdmVzIHRoZSB6b21iaWVkIGNsaWVudCBlbnRyeSBpZiBpdCBleGlzdHMuICovICAgIExpKCkge1xuICAgICAgICBpZiAodGhpcy5BaSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuQWkucmVtb3ZlSXRlbSh0aGlzLk1pKHRoaXMuY2xpZW50SWQpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgIH1cbiAgICB9XG4gICAgTWkoZSkge1xuICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV96b21iaWVfJHt0aGlzLnBlcnNpc3RlbmNlS2V5fV8ke2V9YDtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBwcmltYXJ5IGNsaWVudCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ByaW1hcnlDbGllbnRTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcIm93bmVyXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY2xpZW50TWV0YWRhdGFTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImNsaWVudE1ldGFkYXRhXCIpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcbiAqIExvY2FsU3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhlZERiU3RvcmFnZVByZWZpeChlLCB0KSB7XG4gICAgLy8gVXNlIHR3byBkaWZmZXJlbnQgcHJlZml4IGZvcm1hdHM6XG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxuICAgIC8vIHByb2plY3RJRHMgYXJlIEROUy1jb21wYXRpYmxlIG5hbWVzIGFuZCBjYW5ub3QgY29udGFpbiBkb3RzXG4gICAgLy8gc28gdGhlcmUncyBubyBkYW5nZXIgb2YgY29sbGlzaW9ucy5cbiAgICBsZXQgbiA9IGUucHJvamVjdElkO1xuICAgIHJldHVybiBlLmlzRGVmYXVsdERhdGFiYXNlIHx8IChuICs9IFwiLlwiICsgZS5kYXRhYmFzZSksIFwiZmlyZXN0b3JlL1wiICsgdCArIFwiL1wiICsgbiArIFwiL1wiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHNldCBvZiBjaGFuZ2VzIHRvIHdoYXQgZG9jdW1lbnRzIGFyZSBjdXJyZW50bHkgaW4gdmlldyBhbmQgb3V0IG9mIHZpZXcgZm9yXG4gKiBhIGdpdmVuIHF1ZXJ5LiBUaGVzZSBjaGFuZ2VzIGFyZSBzZW50IHRvIHRoZSBMb2NhbFN0b3JlIGJ5IHRoZSBWaWV3ICh2aWFcbiAqIHRoZSBTeW5jRW5naW5lKSBhbmQgYXJlIHVzZWQgdG8gcGluIC8gdW5waW4gZG9jdW1lbnRzIGFzIGFwcHJvcHJpYXRlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfTG9jYWxWaWV3Q2hhbmdlcyB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gZSwgdGhpcy5mcm9tQ2FjaGUgPSB0LCB0aGlzLlFpID0gbiwgdGhpcy5LaSA9IHI7XG4gICAgfVxuICAgIHN0YXRpYyAkaShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHIgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQuZG9jQ2hhbmdlcykgc3dpdGNoIChlLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICBuID0gbi5hZGQoZS5kb2Mua2V5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICByID0gci5hZGQoZS5kb2Mua2V5KTtcbiAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9Mb2NhbFZpZXdDaGFuZ2VzKGUsIHQuZnJvbUNhY2hlLCBuLCByKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgdHJhY2tlciB0byBrZWVwIGEgcmVjb3JkIG9mIGltcG9ydGFudCBkZXRhaWxzIGR1cmluZyBkYXRhYmFzZSBsb2NhbCBxdWVyeVxuICogZXhlY3V0aW9uLlxuICovIGNsYXNzIFF1ZXJ5Q29udGV4dCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudHMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcGFzc2VkIHRocm91Z2ggZHVyaW5nIGxvY2FsIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2RvY3VtZW50UmVhZENvdW50ID0gMDtcbiAgICB9XG4gICAgZ2V0IGRvY3VtZW50UmVhZENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZG9jdW1lbnRSZWFkQ291bnQ7XG4gICAgfVxuICAgIGluY3JlbWVudERvY3VtZW50UmVhZENvdW50KGUpIHtcbiAgICAgICAgdGhpcy5fZG9jdW1lbnRSZWFkQ291bnQgKz0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBGaXJlc3RvcmUgcXVlcnkgZW5naW5lLlxuICpcbiAqIEZpcmVzdG9yZSBxdWVyaWVzIGNhbiBiZSBleGVjdXRlZCBpbiB0aHJlZSBtb2Rlcy4gVGhlIFF1ZXJ5IEVuZ2luZSBkZXRlcm1pbmVzXG4gKiB3aGF0IG1vZGUgdG8gdXNlIGJhc2VkIG9uIHdoYXQgZGF0YSBpcyBwZXJzaXN0ZWQuIFRoZSBtb2RlIG9ubHkgZGV0ZXJtaW5lc1xuICogdGhlIHJ1bnRpbWUgY29tcGxleGl0eSBvZiB0aGUgcXVlcnkgLSB0aGUgcmVzdWx0IHNldCBpcyBlcXVpdmFsZW50IGFjcm9zcyBhbGxcbiAqIGltcGxlbWVudGF0aW9ucy5cbiAqXG4gKiBUaGUgUXVlcnkgZW5naW5lIHdpbGwgdXNlIGluZGV4ZWQtYmFzZWQgZXhlY3V0aW9uIGlmIGEgdXNlciBoYXMgY29uZmlndXJlZFxuICogYW55IGluZGV4IHRoYXQgY2FuIGJlIHVzZWQgdG8gZXhlY3V0ZSBxdWVyeSAodmlhIGBzZXRJbmRleENvbmZpZ3VyYXRpb24oKWApLlxuICogT3RoZXJ3aXNlLCB0aGUgZW5naW5lIHdpbGwgdHJ5IHRvIG9wdGltaXplIHRoZSBxdWVyeSBieSByZS11c2luZyBhIHByZXZpb3VzbHlcbiAqIHBlcnNpc3RlZCBxdWVyeSByZXN1bHQuIElmIHRoYXQgaXMgbm90IHBvc3NpYmxlLCB0aGUgcXVlcnkgd2lsbCBiZSBleGVjdXRlZFxuICogdmlhIGEgZnVsbCBjb2xsZWN0aW9uIHNjYW4uXG4gKlxuICogSW5kZXgtYmFzZWQgZXhlY3V0aW9uIGlzIHRoZSBkZWZhdWx0IHdoZW4gYXZhaWxhYmxlLiBUaGUgcXVlcnkgZW5naW5lXG4gKiBzdXBwb3J0cyBwYXJ0aWFsIGluZGV4ZWQgZXhlY3V0aW9uIGFuZCBtZXJnZXMgdGhlIHJlc3VsdCBmcm9tIHRoZSBpbmRleFxuICogbG9va3VwIHdpdGggZG9jdW1lbnRzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gaW5kZXhlZC4gVGhlIGluZGV4IGV2YWx1YXRpb25cbiAqIG1hdGNoZXMgdGhlIGJhY2tlbmQncyBmb3JtYXQgYW5kIGFzIHN1Y2gsIHRoZSBTREsgY2FuIHVzZSBpbmRleGluZyBmb3IgYWxsXG4gKiBxdWVyaWVzIHRoYXQgdGhlIGJhY2tlbmQgc3VwcG9ydHMuXG4gKlxuICogSWYgbm8gaW5kZXggZXhpc3RzLCB0aGUgcXVlcnkgZW5naW5lIHRyaWVzIHRvIHRha2UgYWR2YW50YWdlIG9mIHRoZSB0YXJnZXRcbiAqIGRvY3VtZW50IG1hcHBpbmcgaW4gdGhlIFRhcmdldENhY2hlLiBUaGVzZSBtYXBwaW5ncyBleGlzdHMgZm9yIGFsbCBxdWVyaWVzXG4gKiB0aGF0IGhhdmUgYmVlbiBzeW5jZWQgd2l0aCB0aGUgYmFja2VuZCBhdCBsZWFzdCBvbmNlIGFuZCBhbGxvdyB0aGUgcXVlcnlcbiAqIGVuZ2luZSB0byBvbmx5IHJlYWQgZG9jdW1lbnRzIHRoYXQgcHJldmlvdXNseSBtYXRjaGVkIGEgcXVlcnkgcGx1cyBhbnlcbiAqIGRvY3VtZW50cyB0aGF0IHdlcmUgZWRpdGVkIGFmdGVyIHRoZSBxdWVyeSB3YXMgbGFzdCBsaXN0ZW5lZCB0by5cbiAqXG4gKiBUaGVyZSBhcmUgc29tZSBjYXNlcyB3aGVuIHRoaXMgb3B0aW1pemF0aW9uIGlzIG5vdCBndWFyYW50ZWVkIHRvIHByb2R1Y2VcbiAqIHRoZSBzYW1lIHJlc3VsdHMgYXMgZnVsbCBjb2xsZWN0aW9uIHNjYW5zLiBJbiB0aGVzZSBjYXNlcywgcXVlcnlcbiAqIHByb2Nlc3NpbmcgZmFsbHMgYmFjayB0byBmdWxsIHNjYW5zLiBUaGVzZSBjYXNlcyBhcmU6XG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBwcmV2aW91c2x5IG5vIGxvbmdlclxuICogICBtYXRjaGVzIHRoZSBxdWVyeS5cbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCBlZGl0IG1heSBjYXVzZSB0aGUgZG9jdW1lbnQgdG8gc29ydCBiZWxvd1xuICogICBhbm90aGVyIGRvY3VtZW50IHRoYXQgaXMgaW4gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIC0gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgYmVlbiBDVVJSRU5UIG9yIGZyZWUgb2YgbGltYm8gZG9jdW1lbnRzLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlFbmdpbmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLlVpID0gITEsIHRoaXMuV2kgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTREsgb25seSBkZWNpZGVzIHdoZXRoZXIgaXQgc2hvdWxkIGNyZWF0ZSBpbmRleCB3aGVuIGNvbGxlY3Rpb24gc2l6ZSBpc1xuICAgICAgICAgKiBsYXJnZXIgdGhhbiB0aGlzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5HaSA9IDEwMCwgdGhpcy56aSA9IDg7XG4gICAgfVxuICAgIC8qKiBTZXRzIHRoZSBkb2N1bWVudCB2aWV3IHRvIHF1ZXJ5IGFnYWluc3QuICovICAgIGluaXRpYWxpemUoZSwgdCkge1xuICAgICAgICB0aGlzLmppID0gZSwgdGhpcy5pbmRleE1hbmFnZXIgPSB0LCB0aGlzLlVpID0gITA7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFsbCBsb2NhbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBxdWVyeS4gKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIC8vIFN0b3JlcyB0aGUgcmVzdWx0IGZyb20gZXhlY3V0aW5nIHRoZSBxdWVyeTsgdXNpbmcgdGhpcyBvYmplY3QgaXMgbW9yZVxuICAgICAgICAvLyBjb252ZW5pZW50IHRoYW4gcGFzc2luZyB0aGUgcmVzdWx0IGJldHdlZW4gc3RlcHMgb2YgdGhlIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIHRyYW5zYWN0aW9uIGFuZCBpbXByb3ZlcyByZWFkYWJpbGl0eSBjb21wYXJhdGl2ZWx5LlxuICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgcmVzdWx0OiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLkhpKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaS5yZXN1bHQgPSBlO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpLnJlc3VsdCkgcmV0dXJuIHRoaXMuSmkoZSwgdCwgciwgbikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgaS5yZXN1bHQgPSBlO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGkucmVzdWx0KSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IFF1ZXJ5Q29udGV4dDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLllpKGUsIHQsIG4pLm5leHQoKHIgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpLnJlc3VsdCA9IHIsIHRoaXMuV2kpIHJldHVybiB0aGlzLlppKGUsIHQsIG4sIHIuc2l6ZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpLnJlc3VsdCkpO1xuICAgIH1cbiAgICBaaShlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBuLmRvY3VtZW50UmVhZENvdW50IDwgdGhpcy5HaSA/IChfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJRdWVyeUVuZ2luZVwiLCBcIlNESyB3aWxsIG5vdCBjcmVhdGUgY2FjaGUgaW5kZXhlcyBmb3IgcXVlcnk6XCIsIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSwgXCJzaW5jZSBpdCBvbmx5IGNyZWF0ZXMgY2FjaGUgaW5kZXhlcyBmb3IgY29sbGVjdGlvbiBjb250YWluc1wiLCBcIm1vcmUgdGhhbiBvciBlcXVhbCB0b1wiLCB0aGlzLkdpLCBcImRvY3VtZW50c1wiKSwgXG4gICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkpIDogKF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlF1ZXJ5RW5naW5lXCIsIFwiUXVlcnk6XCIsIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSwgXCJzY2Fuc1wiLCBuLmRvY3VtZW50UmVhZENvdW50LCBcImxvY2FsIGRvY3VtZW50cyBhbmQgcmV0dXJuc1wiLCByLCBcImRvY3VtZW50cyBhcyByZXN1bHRzLlwiKSwgXG4gICAgICAgIG4uZG9jdW1lbnRSZWFkQ291bnQgPiB0aGlzLnppICogciA/IChfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJRdWVyeUVuZ2luZVwiLCBcIlRoZSBTREsgZGVjaWRlcyB0byBjcmVhdGUgY2FjaGUgaW5kZXhlcyBmb3IgcXVlcnk6XCIsIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSwgXCJhcyB1c2luZyBjYWNoZSBpbmRleGVzIG1heSBoZWxwIGltcHJvdmUgcGVyZm9ybWFuY2UuXCIpLCBcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIuY3JlYXRlVGFyZ2V0SW5kZXhlcyhlLCBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCh0KSkpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGFuIGluZGV4ZWQgcXVlcnkgdGhhdCBldmFsdWF0ZXMgdGhlIHF1ZXJ5IGJhc2VkIG9uIGEgY29sbGVjdGlvbidzXG4gICAgICogcGVyc2lzdGVkIGluZGV4IHZhbHVlcy4gUmV0dXJucyBgbnVsbGAgaWYgYW4gaW5kZXggaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgKi8gICAgSGkoZSwgdCkge1xuICAgICAgICBpZiAoX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc0FsbERvY3VtZW50cyh0KSkgXG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBtYXRjaCBhbGwgZG9jdW1lbnRzIGRvbid0IGJlbmVmaXQgZnJvbSB1c2luZ1xuICAgICAgICAvLyBrZXktYmFzZWQgbG9va3Vwcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcbiAgICAgICAgLy8gY29sbGVjdGlvbiwgcmF0aGVyIHRoYW4gdG8gcGVyZm9ybSBpbmRpdmlkdWFsIGxvb2t1cHMuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyLmdldEluZGV4VHlwZShlLCBuKS5uZXh0KChyID0+IDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gPT09IHIgPyBudWxsIDogKG51bGwgIT09IHQubGltaXQgJiYgMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLyA9PT0gciAmJiAoXG4gICAgICAgIC8vIFdlIGNhbm5vdCBhcHBseSBhIGxpbWl0IGZvciB0YXJnZXRzIHRoYXQgYXJlIHNlcnZlZCB1c2luZyBhIHBhcnRpYWxcbiAgICAgICAgLy8gaW5kZXguIElmIGEgcGFydGlhbCBpbmRleCB3aWxsIGJlIHVzZWQgdG8gc2VydmUgdGhlIHRhcmdldCwgdGhlXG4gICAgICAgIC8vIHF1ZXJ5IG1heSByZXR1cm4gYSBzdXBlcnNldCBvZiBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgdGFyZ2V0XG4gICAgICAgIC8vIChlLmcuIGlmIHRoZSBpbmRleCBkb2Vzbid0IGluY2x1ZGUgYWxsIHRoZSB0YXJnZXQncyBmaWx0ZXJzKSwgb3JcbiAgICAgICAgLy8gbWF5IHJldHVybiB0aGUgY29ycmVjdCBzZXQgb2YgZG9jdW1lbnRzIGluIHRoZSB3cm9uZyBvcmRlciAoZS5nLiBpZlxuICAgICAgICAvLyB0aGUgaW5kZXggZG9lc24ndCBpbmNsdWRlIGEgc2VnbWVudCBmb3Igb25lIG9mIHRoZSBvcmRlckJ5cykuXG4gICAgICAgIC8vIFRoZXJlZm9yZSwgYSBsaW1pdCBzaG91bGQgbm90IGJlIGFwcGxpZWQgaW4gc3VjaCBjYXNlcy5cbiAgICAgICAgdCA9IF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCh0LCBudWxsLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8pLCBuID0gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpLCBcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQoZSwgbikubmV4dCgociA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KC4uLnIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuamkuZ2V0RG9jdW1lbnRzKGUsIGkpLm5leHQoKHIgPT4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0TWluT2Zmc2V0KGUsIG4pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLlhpKHQsIHIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVzKHQsIHMsIGksIG4ucmVhZFRpbWUpID8gdGhpcy5IaShlLCBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQodCwgbnVsbCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKSkgOiB0aGlzLnRzKGUsIHMsIHQsIG4pO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBiYXNlZCBvbiB0aGUgdGFyZ2V0J3MgcGVyc2lzdGVkIHF1ZXJ5IG1hcHBpbmcuIFJldHVybnNcbiAgICAgKiBgbnVsbGAgaWYgdGhlIG1hcHBpbmcgaXMgbm90IGF2YWlsYWJsZSBvciBjYW5ub3QgYmUgdXNlZC5cbiAgICAgKi8gICAgSmkoZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc0FsbERvY3VtZW50cyh0KSB8fCByLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpIDogdGhpcy5qaS5nZXREb2N1bWVudHMoZSwgbikubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5YaSh0LCBpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVzKHQsIHMsIG4sIHIpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCkgOiAoX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCByLnRvU3RyaW5nKCksIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSksIFxuICAgICAgICAgICAgdGhpcy50cyhlLCBzLCB0LCBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUociwgLTEpKS5uZXh0KChlID0+IGUpKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgc2VlbiBhIHNuYXBzaG90IHdpdGhvdXQgbGltYm8gZnJlZSBkb2N1bWVudHNcbiAgICAgICAgLy8gc2hvdWxkIGFsc28gYmUgcnVuIGFzIGEgZnVsbCBjb2xsZWN0aW9uIHNjYW4uXG4gICAgICAgIH1cbiAgICAvKiogQXBwbGllcyB0aGUgcXVlcnkgZmlsdGVyIGFuZCBzb3J0aW5nIHRvIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuICAqLyAgICBYaShlLCB0KSB7XG4gICAgICAgIC8vIFNvcnQgdGhlIGRvY3VtZW50cyBhbmQgcmUtYXBwbHkgdGhlIHF1ZXJ5IGZpbHRlciBzaW5jZSBwcmV2aW91c2x5XG4gICAgICAgIC8vIG1hdGNoaW5nIGRvY3VtZW50cyBkbyBub3QgbmVjZXNzYXJpbHkgc3RpbGwgbWF0Y2ggdGhlIHF1ZXJ5LlxuICAgICAgICBsZXQgbiA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvcihlKSk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCByKSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKGUsIHIpICYmIChuID0gbi5hZGQocikpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBsaW1pdCBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBmcm9tIGNhY2hlLCBtYWtpbmcgaXRcbiAgICAgKiBpbmVsaWdpYmxlIGZvciBpbmRleC1mcmVlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeS5cbiAgICAgKiBAcGFyYW0gc29ydGVkUHJldmlvdXNSZXN1bHRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHdoZW4gaXRcbiAgICAgKiB3YXMgbGFzdCBzeW5jaHJvbml6ZWQsIHNvcnRlZCBieSB0aGUgcXVlcnkncyBjb21wYXJhdG9yLlxuICAgICAqIEBwYXJhbSByZW1vdGVLZXlzIC0gVGhlIGRvY3VtZW50IGtleXMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgbGFzdFxuICAgICAqIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSBsaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiB0aGUgc25hcHNob3Qgd2hlbiB0aGVcbiAgICAgKiBxdWVyeSB3YXMgbGFzdCBzeW5jaHJvbml6ZWQuXG4gICAgICovICAgIGVzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IGUubGltaXQpIFxuICAgICAgICAvLyBRdWVyaWVzIHdpdGhvdXQgbGltaXRzIGRvIG5vdCBuZWVkIHRvIGJlIHJlZmlsbGVkLlxuICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIGlmIChuLnNpemUgIT09IHQuc2l6ZSkgXG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cbiAgICAgICAgLy8gbG9uZ2VyIG1hdGNoZXMuXG4gICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgLy8gTGltaXQgcXVlcmllcyBhcmUgbm90IGVsaWdpYmxlIGZvciBpbmRleC1mcmVlIHF1ZXJ5IGV4ZWN1dGlvbiBpZiB0aGVyZSBpc1xuICAgICAgICAvLyBhIHBvdGVudGlhbCB0aGF0IGFuIG9sZGVyIGRvY3VtZW50IGZyb20gY2FjaGUgbm93IHNvcnRzIGJlZm9yZSBhIGRvY3VtZW50XG4gICAgICAgIC8vIHRoYXQgd2FzIHByZXZpb3VzbHkgcGFydCBvZiB0aGUgbGltaXQuIFRoaXMsIGhvd2V2ZXIsIGNhbiBvbmx5IGhhcHBlbiBpZlxuICAgICAgICAvLyB0aGUgZG9jdW1lbnQgYXQgdGhlIGVkZ2Ugb2YgdGhlIGxpbWl0IGdvZXMgb3V0IG9mIGxpbWl0LlxuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IHRoYXQgaXMgbm90IHRoZSBsaW1pdCBib3VuZGFyeSBzb3J0cyBkaWZmZXJlbnRseSxcbiAgICAgICAgLy8gdGhlIGJvdW5kYXJ5IG9mIHRoZSBsaW1pdCBpdHNlbGYgZGlkIG5vdCBjaGFuZ2UgYW5kIGRvY3VtZW50cyBmcm9tIGNhY2hlXG4gICAgICAgIC8vIHdpbGwgY29udGludWUgdG8gYmUgXCJyZWplY3RlZFwiIGJ5IHRoaXMgYm91bmRhcnkuIFRoZXJlZm9yZSwgd2UgY2FuIGlnbm9yZVxuICAgICAgICAvLyBhbnkgbW9kaWZpY2F0aW9ucyB0aGF0IGRvbid0IGFmZmVjdCB0aGUgbGFzdCBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSBlLmxpbWl0VHlwZSA/IHQubGFzdCgpIDogdC5maXJzdCgpO1xuICAgICAgICByZXR1cm4gISFpICYmIChpLmhhc1BlbmRpbmdXcml0ZXMgfHwgaS52ZXJzaW9uLmNvbXBhcmVUbyhyKSA+IDApO1xuICAgIH1cbiAgICBZaShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJRdWVyeUVuZ2luZVwiLCBcIlVzaW5nIGZ1bGwgY29sbGVjdGlvbiBzY2FuIHRvIGV4ZWN1dGUgcXVlcnk6XCIsIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSksIFxuICAgICAgICB0aGlzLmppLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgSW5kZXhPZmZzZXQubWluKCksIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0aGUgcmVzdWx0cyBmcm9tIGFuIGluZGV4ZWQgZXhlY3V0aW9uIHdpdGggdGhlIHJlbWFpbmluZyBkb2N1bWVudHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGluZGV4ZWQuXG4gICAgICovICAgIHRzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgYWxsIHJlc3VsdHMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgdXBkYXRlZCBzaW5jZSB0aGUgb2Zmc2V0LlxuICAgICAgICByZXR1cm4gdGhpcy5qaS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIG4sIHIpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBNZXJnZSB3aXRoIGV4aXN0aW5nIHJlc3VsdHNcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUgPSBlLmluc2VydCh0LmtleSwgdCk7XG4gICAgICAgIH0pKSwgZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0xvY2FsU3RvcmVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG4gICAgZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gZSwgdGhpcy5ucyA9IHQsIHRoaXMuc2VyaWFsaXplciA9IHIsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldElEIHRvIGRhdGEgYWJvdXQgaXRzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBXZSBhcmUgdXNpbmcgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIG9uIFdlYiB0byBtYWtlIHJlLXJ1bnNcbiAgICAgICAgICogb2YgYGFwcGx5UmVtb3RlRXZlbnQoKWAgaWRlbXBvdGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucnMgPSBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKiBNYXBzIGEgdGFyZ2V0IHRvIGl0cyB0YXJnZXRJRC4gKi9cbiAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBFdmFsdWF0ZSBpZiBUYXJnZXRJZCBjYW4gYmUgcGFydCBvZiBUYXJnZXQuXG4gICAgICAgIHRoaXMuc3MgPSBuZXcgT2JqZWN0TWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldChlKSksIF9fUFJJVkFURV90YXJnZXRFcXVhbHMpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcGVyIGNvbGxlY3Rpb24gZ3JvdXAgaW5kZXggb2YgdGhlIGxhc3QgcmVhZCB0aW1lIHByb2Nlc3NlZCBieVxuICAgICAgICAgKiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcyA9IG5ldyBNYXAsIHRoaXMuX3MgPSBlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgdGhpcy5LciA9IGUuZ2V0VGFyZ2V0Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMuVXIgPSBlLmdldEJ1bmRsZUNhY2hlKCksIHRoaXMudXMobik7XG4gICAgfVxuICAgIHVzKGUpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IEFkZCBzcGVjIHRlc3RzIHRoYXQgdGVzdCB0aGVzZSBjb21wb25lbnRzIGNoYW5nZSBhZnRlciBhXG4gICAgICAgIC8vIHVzZXIgY2hhbmdlXG4gICAgICAgIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldERvY3VtZW50T3ZlcmxheUNhY2hlKGUpLCB0aGlzLmluZGV4TWFuYWdlciA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKGUpLCBcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRNdXRhdGlvblF1ZXVlKGUsIHRoaXMuaW5kZXhNYW5hZ2VyKSwgdGhpcy5sb2NhbERvY3VtZW50cyA9IG5ldyBMb2NhbERvY3VtZW50c1ZpZXcodGhpcy5fcywgdGhpcy5tdXRhdGlvblF1ZXVlLCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLCB0aGlzLmluZGV4TWFuYWdlciksIFxuICAgICAgICB0aGlzLl9zLnNldEluZGV4TWFuYWdlcih0aGlzLmluZGV4TWFuYWdlciksIHRoaXMubnMuaW5pdGlhbGl6ZSh0aGlzLmxvY2FsRG9jdW1lbnRzLCB0aGlzLmluZGV4TWFuYWdlcik7XG4gICAgfVxuICAgIGNvbGxlY3RHYXJiYWdlKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb2xsZWN0IGdhcmJhZ2VcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiBlLmNvbGxlY3QodCwgdGhpcy5ycykpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdMb2NhbFN0b3JlKFxuLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xuZSwgdCwgbiwgcikge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xvY2FsU3RvcmVJbXBsKGUsIHQsIG4sIHIpO1xufVxuXG4vKipcbiAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXG4gKlxuICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXG4gKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcbi8vIGNoYW5nZS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJIYW5kbGUgdXNlciBjaGFuZ2VcIiwgXCJyZWFkb25seVwiLCAoZSA9PiB7XG4gICAgICAgIC8vIFN3YXAgb3V0IHRoZSBtdXRhdGlvbiBxdWV1ZSwgZ3JhYmJpbmcgdGhlIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlc1xuICAgICAgICAvLyBiZWZvcmUgYW5kIGFmdGVyLlxuICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXMoZSkubmV4dCgoaSA9PiAociA9IGksIG4udXModCksIG4ubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXMoZSkpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gW10sIHMgPSBbXTtcbiAgICAgICAgICAgIC8vIFVuaW9uIHRoZSBvbGQvbmV3IGNoYW5nZWQga2V5cy5cbiAgICAgICAgICAgIGxldCBvID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcikge1xuICAgICAgICAgICAgICAgIGkucHVzaChlLmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLm11dGF0aW9ucykgbyA9IG8uYWRkKHQua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGUuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUubXV0YXRpb25zKSBvID0gby5hZGQodC5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBzZXQgb2YgYWxsIChwb3RlbnRpYWxseSkgY2hhbmdlZCBkb2N1bWVudHMgYW5kIHRoZSBsaXN0XG4gICAgICAgICAgICAvLyBvZiBtdXRhdGlvbiBiYXRjaCBJRHMgdGhhdCB3ZXJlIGFmZmVjdGVkIGJ5IGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyhlLCBvKS5uZXh0KChlID0+ICh7XG4gICAgICAgICAgICAgICAgY3M6IGUsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzOiBpLFxuICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHM6IHNcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKTtcbiAgICB9KSk7XG59XG5cbi8qIEFjY2VwdHMgbG9jYWxseSBnZW5lcmF0ZWQgTXV0YXRpb25zIGFuZCBjb21taXQgdGhlbSB0byBzdG9yYWdlLiAqL1xuLyoqXG4gKiBBY2tub3dsZWRnZXMgdGhlIGdpdmVuIGJhdGNoLlxuICpcbiAqIE9uIHRoZSBoYXBweSBwYXRoIHdoZW4gYSBiYXRjaCBpcyBhY2tub3dsZWRnZWQsIHRoZSBsb2NhbCBzdG9yZSB3aWxsXG4gKlxuICogICsgcmVtb3ZlIHRoZSBiYXRjaCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZTtcbiAqICArIGFwcGx5IHRoZSBjaGFuZ2VzIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGU7XG4gKiAgKyByZWNhbGN1bGF0ZSB0aGUgbGF0ZW5jeSBjb21wZW5zYXRlZCB2aWV3IGltcGxpZWQgYnkgdGhvc2UgY2hhbmdlcyAodGhlcmVcbiAqICAgIG1heSBiZSBtdXRhdGlvbnMgaW4gdGhlIHF1ZXVlIHRoYXQgYWZmZWN0IHRoZSBkb2N1bWVudHMgYnV0IGhhdmVuJ3QgYmVlblxuICogICAgYWNrbm93bGVkZ2VkIHlldCk7IGFuZFxuICogICsgZ2l2ZSB0aGUgY2hhbmdlZCBkb2N1bWVudHMgYmFjayB0aGUgc3luYyBlbmdpbmVcbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIChtb2RpZmllZCkgZG9jdW1lbnRzLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUFja25vd2xlZGdlQmF0Y2goZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQWNrbm93bGVkZ2UgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSB0LmJhdGNoLmtleXMoKSwgaSA9IG4uX3MubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5V3JpdGVUb1JlbW90ZURvY3VtZW50cyhlLCB0LCBuLCByKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5iYXRjaCwgcyA9IGkua2V5cygpO1xuICAgICAgICAgICAgbGV0IG8gPSBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgbyA9IG8ubmV4dCgoKCkgPT4gci5nZXRFbnRyeSh0LCBlKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbi5kb2NWZXJzaW9ucy5nZXQoZSk7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgIT09IHMpLCB0LnZlcnNpb24uY29tcGFyZVRvKHMpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQodCwgbiksIFxuICAgICAgICAgICAgICAgICAgICB0LmlzVmFsaWREb2N1bWVudCgpICYmIChcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSBjb21taXRWZXJzaW9uIGFzIHRoZSByZWFkVGltZSByYXRoZXIgdGhhbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQncyB1cGRhdGVUaW1lIHNpbmNlIHRoZSB1cGRhdGVUaW1lIGlzIG5vdCBhZHZhbmNlZFxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdXBkYXRlcyB0aGF0IGRvIG5vdCBtb2RpZnkgdGhlIHVuZGVybHlpbmcgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIHQuc2V0UmVhZFRpbWUobi5jb21taXRWZXJzaW9uKSwgci5hZGRFbnRyeSh0KSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgby5uZXh0KCgoKSA9PiBlLm11dGF0aW9uUXVldWUucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBpKSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgYSBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4sIGUsIHQsIGkpLm5leHQoKCgpID0+IGkuYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBuLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2soZSkpKS5uZXh0KCgoKSA9PiBuLmRvY3VtZW50T3ZlcmxheUNhY2hlLnJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZChlLCByLCB0LmJhdGNoLmJhdGNoSWQpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhlLCBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0S2V5c1dpdGhUcmFuc2Zvcm1SZXN1bHRzKGUpIHtcbiAgICAgICAgICAgIGxldCB0ID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubXV0YXRpb25SZXN1bHRzLmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICAgICAgZS5tdXRhdGlvblJlc3VsdHNbbl0udHJhbnNmb3JtUmVzdWx0cy5sZW5ndGggPiAwICYmICh0ID0gdC5hZGQoZS5iYXRjaC5tdXRhdGlvbnNbbl0ua2V5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlbW92ZXMgbXV0YXRpb25zIGZyb20gdGhlIE11dGF0aW9uUXVldWUgZm9yIHRoZSBzcGVjaWZpZWQgYmF0Y2g7XG4gKiBMb2NhbERvY3VtZW50cyB3aWxsIGJlIHJlY2FsY3VsYXRlZC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIG1vZGlmaWVkIGRvY3VtZW50cy5cbiAqLyAodCkpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHMoZSwgcikpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHByb2Nlc3NlZCAodXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG9cbiAqIGRldGVybWluZSB3aGV0aGVyIHRvIGJ1ZmZlciBpbmNvbWluZyBzbmFwc2hvdHMgZnJvbSB0aGUgYmFja2VuZCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvblwiLCBcInJlYWRvbmx5XCIsIChlID0+IHQuS3IuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSkpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXG4gKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcbiAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseVJlbW90ZUV2ZW50VG9Mb2NhbENhY2hlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IHQuc25hcHNob3RWZXJzaW9uO1xuICAgIGxldCBpID0gbi5ycztcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IHJlbW90ZSBldmVudFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHtcbiAgICAgICAgY29uc3QgcyA9IG4uX3MubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxuICAgICAgICAgICAgICAgIGkgPSBuLnJzO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIHQudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgocywgXykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYSA9IGkuZ2V0KF8pO1xuICAgICAgICAgICAgaWYgKCFhKSByZXR1cm47XG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgcmVtb3RlIGtleXMgaWYgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUuIFRoaXNcbiAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB3ZSBjYW4gcGVyc2lzdCB0aGUgdXBkYXRlZCB0YXJnZXQgZGF0YSBhbG9uZyB3aXRoXG4gICAgICAgICAgICAvLyB0aGUgdXBkYXRlZCBhc3NpZ25tZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG4uS3IucmVtb3ZlTWF0Y2hpbmdLZXlzKGUsIHMucmVtb3ZlZERvY3VtZW50cywgXykubmV4dCgoKCkgPT4gbi5Lci5hZGRNYXRjaGluZ0tleXMoZSwgcy5hZGRlZERvY3VtZW50cywgXykpKSk7XG4gICAgICAgICAgICBsZXQgdSA9IGEud2l0aFNlcXVlbmNlTnVtYmVyKGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgIG51bGwgIT09IHQudGFyZ2V0TWlzbWF0Y2hlcy5nZXQoXykgPyB1ID0gdS53aXRoUmVzdW1lVG9rZW4oQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORywgU25hcHNob3RWZXJzaW9uLm1pbigpKS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihTbmFwc2hvdFZlcnNpb24ubWluKCkpIDogcy5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwICYmICh1ID0gdS53aXRoUmVzdW1lVG9rZW4ocy5yZXN1bWVUb2tlbiwgcikpLCBcbiAgICAgICAgICAgIGkgPSBpLmluc2VydChfLCB1KSwgXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcbiAgICAgICAgICAgIC8vIHN1ZmZpY2llbnQgdGltZSBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHVwZGF0ZSkuXG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgbmV3VGFyZ2V0RGF0YSBzaG91bGQgYmUgcGVyc2lzdGVkIGR1cmluZyBhbiB1cGRhdGUgb2ZcbiAqIGFuIGFjdGl2ZSB0YXJnZXQuIFRhcmdldERhdGEgc2hvdWxkIGFsd2F5cyBiZSBwZXJzaXN0ZWQgd2hlbiBhIHRhcmdldCBpc1xuICogYmVpbmcgcmVsZWFzZWQgYW5kIHNob3VsZCBub3QgY2FsbCB0aGlzIGZ1bmN0aW9uLlxuICpcbiAqIFdoaWxlIHRoZSB0YXJnZXQgaXMgYWN0aXZlLCBUYXJnZXREYXRhIHVwZGF0ZXMgY2FuIGJlIG9taXR0ZWQgd2hlbiBub3RoaW5nXG4gKiBhYm91dCB0aGUgdGFyZ2V0IGhhcyBjaGFuZ2VkIGV4Y2VwdCBtZXRhZGF0YSBsaWtlIHRoZSByZXN1bWUgdG9rZW4gb3JcbiAqIHNuYXBzaG90IHZlcnNpb24uIE9jY2FzaW9uYWxseSBpdCdzIHdvcnRoIHRoZSBleHRyYSB3cml0ZSB0byBwcmV2ZW50IHRoZXNlXG4gKiB2YWx1ZXMgZnJvbSBnZXR0aW5nIHRvbyBzdGFsZSBhZnRlciBhIGNyYXNoLCBidXQgdGhpcyBkb2Vzbid0IGhhdmUgdG8gYmVcbiAqIHRvbyBmcmVxdWVudC5cbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3Nob3VsZFBlcnNpc3RUYXJnZXREYXRhKGUsIHQsIG4pIHtcbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWxsb3cgcmVzdW1lIHRva2VuIGNoYW5nZXMgdG8gYmUgYnVmZmVyZWQgaW5kZWZpbml0ZWx5LiBUaGlzXG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGJlIHJlYXNvbmFibHkgdXAtdG8tZGF0ZSBhZnRlciBhIGNyYXNoIGFuZCBhdm9pZHMgbmVlZGluZ1xuICAgICAgICAgICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAvLyB3ZSBtYXkgbm90IGdldCB0aW1lIHRvIGRvIGFueXRoaW5nIGludGVyZXN0aW5nIHdoaWxlIHRoZSBjdXJyZW50IHRhYiBpc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpIC0gZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSA+PSAzZTgpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgaWYgdGhlIG9ubHkgdGhpbmcgdGhhdCBoYXMgY2hhbmdlZCBhYm91dCBhIHRhcmdldCBpcyBpdHMgcmVzdW1lXG4gICAgICAgICAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxuICAgICAgICAgICAgICAgIC8vIGluLW1lbW9yeSB2aWV3IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHRhcmdldHMgd2hpY2ggaW5jbHVkZXMgdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAgICAvLyByZXN1bWUgdG9rZW4sIHNvIHN0cmVhbSBmYWlsdXJlIG9yIHVzZXIgY2hhbmdlcyB3aWxsIHN0aWxsIHVzZSBhblxuICAgICAgICAgICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5hZGRlZERvY3VtZW50cy5zaXplICsgbi5tb2RpZmllZERvY3VtZW50cy5zaXplICsgbi5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBOb3RpZmllcyBsb2NhbCBzdG9yZSBvZiB0aGUgY2hhbmdlZCB2aWV3cyB0byBsb2NhbGx5IHBpbiBkb2N1bWVudHMuXG4gKi8gKGEsIHUsIHMpICYmIG8ucHVzaChuLktyLnVwZGF0ZVRhcmdldERhdGEoZSwgdSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBfID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBhID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXG4gICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXG4gICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cbiAgICAgICAgLy8gbGltYm8uXG4gICAgICAgIGlmICh0LmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKChyID0+IHtcbiAgICAgICAgICAgIHQucmVzb2x2ZWRMaW1ib0RvY3VtZW50cy5oYXMocikgJiYgby5wdXNoKG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUudXBkYXRlTGltYm9Eb2N1bWVudChlLCByKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEVhY2ggbG9vcCBpdGVyYXRpb24gb25seSBhZmZlY3RzIGl0cyBcIm93blwiIGRvYywgc28gaXQncyBzYWZlIHRvIGdldCBhbGxcbiAgICAgICAgLy8gdGhlIHJlbW90ZSBkb2N1bWVudHMgaW4gYWR2YW5jZSBpbiBhIHNpbmdsZSBjYWxsLlxuICAgICAgICBvLnB1c2goX19QUklWQVRFX3BvcHVsYXRlRG9jdW1lbnRDaGFuZ2VCdWZmZXIoZSwgcywgdC5kb2N1bWVudFVwZGF0ZXMpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgXyA9IGUubHMsIGEgPSBlLmhzO1xuICAgICAgICB9KSkpLCAhci5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLktyLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZSkubmV4dCgodCA9PiBuLktyLnNldFRhcmdldHNNZXRhZGF0YShlLCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlciwgcikpKTtcbiAgICAgICAgICAgIG8ucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IobykubmV4dCgoKCkgPT4gcy5hcHBseShlKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgXywgYSkpKS5uZXh0KCgoKSA9PiBfKSk7XG4gICAgfSkpLnRoZW4oKGUgPT4gKG4ucnMgPSBpLCBlKSkpO1xufVxuXG4vKipcbiAqIFBvcHVsYXRlcyBkb2N1bWVudCBjaGFuZ2UgYnVmZmVyIHdpdGggZG9jdW1lbnRzIGZyb20gYmFja2VuZCBvciBhIGJ1bmRsZS5cbiAqIFJldHVybnMgdGhlIGRvY3VtZW50IGNoYW5nZXMgcmVzdWx0aW5nIGZyb20gYXBwbHlpbmcgdGhvc2UgZG9jdW1lbnRzLCBhbmRcbiAqIGFsc28gYSBzZXQgb2YgZG9jdW1lbnRzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZSBhcmUgY2hhbmdlZCBhcyBhIHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVHJhbnNhY3Rpb24gdG8gdXNlIHRvIHJlYWQgZXhpc3RpbmcgZG9jdW1lbnRzIGZyb20gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudEJ1ZmZlciAtIERvY3VtZW50IGJ1ZmZlciB0byBjb2xsZWN0IHRoZSByZXN1bHRlZCBjaGFuZ2VzIHRvIGJlXG4gKiAgICAgICAgYXBwbGllZCB0byBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50cyAtIERvY3VtZW50cyB0byBiZSBhcHBsaWVkLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wb3B1bGF0ZURvY3VtZW50Q2hhbmdlQnVmZmVyKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCBpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgcmV0dXJuIG4uZm9yRWFjaCgoZSA9PiByID0gci5hZGQoZSkpKSwgdC5nZXRFbnRyaWVzKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICBsZXQgciA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBlLmdldChuKTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlZSBpZiB0aGVyZSBpcyBhIGV4aXN0ZW5jZSBzdGF0ZSBjaGFuZ2UgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzLmlzRm91bmREb2N1bWVudCgpICE9PSBvLmlzRm91bmREb2N1bWVudCgpICYmIChpID0gaS5hZGQobikpLCBcbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSkgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY2FjaGUuXG4gICAgICAgICAgICBzLmlzTm9Eb2N1bWVudCgpICYmIHMudmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPyAoXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSBhcmUgdXNlZCBpbiBtYW51ZmFjdHVyZWRcbiAgICAgICAgICAgIC8vIGV2ZW50cy4gV2UgcmVtb3ZlIHRoZXNlIGRvY3VtZW50cyBmcm9tIGNhY2hlIHNpbmNlIHdlIGxvc3RcbiAgICAgICAgICAgIC8vIGFjY2Vzcy5cbiAgICAgICAgICAgIHQucmVtb3ZlRW50cnkobiwgcy5yZWFkVGltZSksIHIgPSByLmluc2VydChuLCBzKSkgOiAhby5pc1ZhbGlkRG9jdW1lbnQoKSB8fCBzLnZlcnNpb24uY29tcGFyZVRvKG8udmVyc2lvbikgPiAwIHx8IDAgPT09IHMudmVyc2lvbi5jb21wYXJlVG8oby52ZXJzaW9uKSAmJiBvLmhhc1BlbmRpbmdXcml0ZXMgPyAodC5hZGRFbnRyeShzKSwgXG4gICAgICAgICAgICByID0gci5pbnNlcnQobiwgcykpIDogX19QUklWQVRFX2xvZ0RlYnVnKFwiTG9jYWxTdG9yZVwiLCBcIklnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgXCIsIG4sIFwiLiBDdXJyZW50IHZlcnNpb246XCIsIG8udmVyc2lvbiwgXCIgV2F0Y2ggdmVyc2lvbjpcIiwgcy52ZXJzaW9uKTtcbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICBsczogcixcbiAgICAgICAgICAgIGhzOiBpXG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG11dGF0aW9uIGJhdGNoIGFmdGVyIHRoZSBwYXNzZWQgaW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWVcbiAqIG9yIG51bGwgaWYgZW1wdHkuXG4gKiBAcGFyYW0gYWZ0ZXJCYXRjaElkIC0gSWYgcHJvdmlkZWQsIHRoZSBiYXRjaCB0byBzZWFyY2ggYWZ0ZXIuXG4gKiBAcmV0dXJucyBUaGUgbmV4dCBtdXRhdGlvbiBvciBudWxsIGlmIHRoZXJlIHdhc24ndCBvbmUuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV4dE11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5leHQgbXV0YXRpb24gYmF0Y2hcIiwgXCJyZWFkb25seVwiLCAoZSA9PiAodm9pZCAwID09PSB0ICYmICh0ID0gLTEpLCBcbiAgICBuLm11dGF0aW9uUXVldWUuZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQoZSwgdCkpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XG4gKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXG4gKi9cbi8qKlxuICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xuICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxuICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cbiAqXG4gKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcbiAqIGZvciB0aGF0IGBUYXJnZXRgLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFsbG9jYXRlIHRhcmdldFwiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiB7XG4gICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gbi5Lci5nZXRUYXJnZXREYXRhKGUsIHQpLm5leHQoKGkgPT4gaSA/IChcbiAgICAgICAgLy8gVGhpcyB0YXJnZXQgaGFzIGJlZW4gbGlzdGVuZWQgdG8gcHJldmlvdXNseSwgc28gcmV1c2UgdGhlXG4gICAgICAgIC8vIHByZXZpb3VzIHRhcmdldElELlxuICAgICAgICAvLyBUT0RPKG1jZyk6IGZyZXNoZW4gbGFzdCBhY2Nlc3NlZCBkYXRlP1xuICAgICAgICByID0gaSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocikpIDogbi5Lci5hbGxvY2F0ZVRhcmdldElkKGUpLm5leHQoKGkgPT4gKHIgPSBuZXcgVGFyZ2V0RGF0YSh0LCBpLCBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyAsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgXG4gICAgICAgIG4uS3IuYWRkVGFyZ2V0RGF0YShlLCByKS5uZXh0KCgoKSA9PiByKSkpKSkpKTtcbiAgICB9KSkudGhlbigoZSA9PiB7XG4gICAgICAgIC8vIElmIE11bHRpLVRhYiBpcyBlbmFibGVkLCB0aGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgbWF5IGJlIG5ld2VyIHRoYW5cbiAgICAgICAgLy8gdGhlIGluLW1lbW9yeSBkYXRhXG4gICAgICAgIGNvbnN0IHIgPSBuLnJzLmdldChlLnRhcmdldElkKTtcbiAgICAgICAgcmV0dXJuIChudWxsID09PSByIHx8IGUuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhyLnNuYXBzaG90VmVyc2lvbikgPiAwKSAmJiAobi5ycyA9IG4ucnMuaW5zZXJ0KGUudGFyZ2V0SWQsIGUpLCBcbiAgICAgICAgbi5zcy5zZXQodCwgZS50YXJnZXRJZCkpLCBlO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGFzIHNlZW4gYnkgdGhlIExvY2FsU3RvcmUsIGluY2x1ZGluZyB1cGRhdGVzIHRoYXQgbWF5XG4gKiBoYXZlIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQgdG8gdGhlIFRhcmdldENhY2hlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuLyoqXG4gKiBVbnBpbnMgYWxsIHRoZSBkb2N1bWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiB0YXJnZXQuIElmXG4gKiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIHNldCB0byBmYWxzZSBhbmQgRWFnZXIgR0MgZW5hYmxlZCwgdGhlIG1ldGhvZFxuICogZGlyZWN0bHkgcmVtb3ZlcyB0aGUgYXNzb2NpYXRlZCB0YXJnZXQgZGF0YSBmcm9tIHRoZSB0YXJnZXQgY2FjaGUuXG4gKlxuICogUmVsZWFzaW5nIGEgbm9uLWV4aXN0aW5nIGBUYXJnZXRgIGlzIGEgbm8tb3AuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBtdWx0aS10YWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSByLnJzLmdldCh0KSwgcyA9IG4gPyBcInJlYWR3cml0ZVwiIDogXCJyZWFkd3JpdGUtcHJpbWFyeVwiO1xuICAgIHRyeSB7XG4gICAgICAgIG4gfHwgYXdhaXQgci5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlbGVhc2UgdGFyZ2V0XCIsIHMsIChlID0+IHIucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KGUsIGkpKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIHRocm93IGU7XG4gICAgICAgIC8vIEFsbCBgcmVsZWFzZVRhcmdldGAgZG9lcyBpcyByZWNvcmQgdGhlIGZpbmFsIG1ldGFkYXRhIHN0YXRlIGZvciB0aGVcbiAgICAgICAgLy8gdGFyZ2V0LCBidXQgd2UndmUgYmVlbiByZWNvcmRpbmcgdGhpcyBwZXJpb2RpY2FsbHkgZHVyaW5nIHRhcmdldFxuICAgICAgICAvLyBhY3Rpdml0eS4gSWYgd2UgbG9zZSB0aGlzIHdyaXRlIHRoaXMgY291bGQgY2F1c2UgYSB2ZXJ5IHNsaWdodFxuICAgICAgICAvLyBkaWZmZXJlbmNlIGluIHRoZSBvcmRlciBvZiB0YXJnZXQgZGVsZXRpb24gZHVyaW5nIEdDLCBidXQgd2VcbiAgICAgICAgLy8gZG9uJ3QgZGVmaW5lIGV4YWN0IExSVSBzZW1hbnRpY3Mgc28gdGhpcyBpcyBhY2NlcHRhYmxlLlxuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJMb2NhbFN0b3JlXCIsIGBGYWlsZWQgdG8gdXBkYXRlIHNlcXVlbmNlIG51bWJlcnMgZm9yIHRhcmdldCAke3R9OiAke2V9YCk7XG4gICAgfVxuICAgIHIucnMgPSByLnJzLnJlbW92ZSh0KSwgci5zcy5kZWxldGUoaS50YXJnZXQpO1xufVxuXG4vKipcbiAqIFJ1bnMgdGhlIHNwZWNpZmllZCBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyxcbiAqIHBvdGVudGlhbGx5IHRha2luZyBhZHZhbnRhZ2Ugb2YgcXVlcnkgZGF0YSBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgKHN1Y2hcbiAqIGFzIHRoZSBzZXQgb2YgcmVtb3RlIGtleXMpLlxuICpcbiAqIEBwYXJhbSB1c2VQcmV2aW91c1Jlc3VsdHMgLSBXaGV0aGVyIHJlc3VsdHMgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIGNhblxuICogYmUgdXNlZCB0byBvcHRpbWl6ZSB0aGlzIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbGV0IGkgPSBTbmFwc2hvdFZlcnNpb24ubWluKCksIHMgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICByZXR1cm4gci5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkV4ZWN1dGUgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKC8vIFVzZSByZWFkd3JpdGUgaW5zdGVhZCBvZiByZWFkb25seSBzbyBpbmRleGVzIGNhbiBiZSBjcmVhdGVkXG4gICAgLy8gVXNlIHJlYWR3cml0ZSBpbnN0ZWFkIG9mIHJlYWRvbmx5IHNvIGluZGV4ZXMgY2FuIGJlIGNyZWF0ZWRcbiAgICBlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0VGFyZ2V0RGF0YShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBpID0gci5zcy5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGkgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyLnJzLmdldChpKSkgOiByLktyLmdldFRhcmdldERhdGEodCwgbik7XG4gICAgfShyLCBlLCBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCh0KSkubmV4dCgodCA9PiB7XG4gICAgICAgIGlmICh0KSByZXR1cm4gaSA9IHQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgci5Lci5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0LnRhcmdldElkKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIHMgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfSkpLm5leHQoKCgpID0+IHIubnMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuID8gaSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgbiA/IHMgOiBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkpKS5uZXh0KChlID0+IChfX1BSSVZBVEVfc2V0TWF4UmVhZFRpbWUociwgX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwKHQpLCBlKSwgXG4gICAge1xuICAgICAgICBkb2N1bWVudHM6IGUsXG4gICAgICAgIFBzOiBzXG4gICAgfSkpKSkpO1xufVxuXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXRDYWNoZWRUYXJnZXQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChuLktyKSwgaSA9IG4ucnMuZ2V0KHQpO1xuICAgIHJldHVybiBpID8gUHJvbWlzZS5yZXNvbHZlKGkudGFyZ2V0KSA6IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgdGFyZ2V0IGRhdGFcIiwgXCJyZWFkb25seVwiLCAoZSA9PiByLmx0KGUsIHQpLm5leHQoKGUgPT4gZSA/IGUudGFyZ2V0IDogbnVsbCkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIHNpbmNlIHRoZSBsYXN0IGNhbGwuXG4gKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCByZXR1cm5zIHRoZSBzZXQgb2YgY2hhbmdlcyBzaW5jZSBjbGllbnRcbiAqIGluaXRpYWxpemF0aW9uLiBGdXJ0aGVyIGludm9jYXRpb25zIHdpbGwgcmV0dXJuIGRvY3VtZW50IHRoYXQgaGF2ZSBjaGFuZ2VkXG4gKiBzaW5jZSB0aGUgcHJpb3IgY2FsbC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV3RG9jdW1lbnRDaGFuZ2VzKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IG4ub3MuZ2V0KHQpIHx8IFNuYXBzaG90VmVyc2lvbi5taW4oKTtcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgbWF4aW11bSByZWFkIHRpbWUgZm9yIHRoZSBjb2xsZWN0aW9uLiBUaGlzIHNob3VsZCBhbHdheXNcbiAgICAvLyBleGlzdCwgYnV0IHRvIHJlZHVjZSB0aGUgY2hhbmNlIGZvciByZWdyZXNzaW9ucyB3ZSBkZWZhdWx0IHRvXG4gICAgLy8gU25hcHNob3RWZXJzaW9uLk1pbigpXG4gICAgLy8gVE9ETyhpbmRleGluZyk6IENvbnNpZGVyIHJlbW92aW5nIHRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXcgZG9jdW1lbnQgY2hhbmdlc1wiLCBcInJlYWRvbmx5XCIsIChlID0+IG4uX3MuZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0LCBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUociwgLTEpLCBcbiAgICAvKiBsaW1pdD0gKi8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpKSkudGhlbigoZSA9PiAoX19QUklWQVRFX3NldE1heFJlYWRUaW1lKG4sIHQsIGUpLCBcbiAgICBlKSkpO1xufVxuXG4vKiogU2V0cyB0aGUgY29sbGVjdGlvbiBncm91cCdzIG1heGltdW0gcmVhZCB0aW1lIGZyb20gdGhlIGdpdmVuIGRvY3VtZW50cy4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc2V0TWF4UmVhZFRpbWUoZSwgdCwgbikge1xuICAgIGxldCByID0gZS5vcy5nZXQodCkgfHwgU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgIG4uZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgdC5yZWFkVGltZS5jb21wYXJlVG8ocikgPiAwICYmIChyID0gdC5yZWFkVGltZSk7XG4gICAgfSkpLCBlLm9zLnNldCh0LCByKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhcmdldCB1c2luZyB0aGUgZ2l2ZW4gYnVuZGxlIG5hbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0b1xuICogaG9sZCB0aGUga2V5cyBvZiBhbGwgZG9jdW1lbnRzIGZyb20gdGhlIGJ1bmRsZSBpbiBxdWVyeS1kb2N1bWVudCBtYXBwaW5ncy5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBsb2FkZWQgZG9jdW1lbnRzIGRvIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqIHJpZ2h0IGF3YXkuXG4gKi9cbi8qKlxuICogQXBwbGllcyB0aGUgZG9jdW1lbnRzIGZyb20gYSBidW5kbGUgdG8gdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSlcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUFwcGx5QnVuZGxlZERvY3VtZW50cyhlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbGV0IHMgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgbyA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGUgb2Ygbikge1xuICAgICAgICBjb25zdCBuID0gdC5JcyhlLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICBlLmRvY3VtZW50ICYmIChzID0gcy5hZGQobikpO1xuICAgICAgICBjb25zdCByID0gdC5kcyhlKTtcbiAgICAgICAgci5zZXRSZWFkVGltZSh0LlRzKGUubWV0YWRhdGEucmVhZFRpbWUpKSwgbyA9IG8uaW5zZXJ0KG4sIHIpO1xuICAgIH1cbiAgICBjb25zdCBfID0gaS5fcy5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgIH0pLCBhID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChpLCBmdW5jdGlvbiBfX1BSSVZBVEVfdW1icmVsbGFUYXJnZXQoZSkge1xuICAgICAgICAvLyBJdCBpcyBPSyB0aGF0IHRoZSBwYXRoIHVzZWQgZm9yIHRoZSBxdWVyeSBpcyBub3QgdmFsaWQsIGJlY2F1c2UgdGhpcyB3aWxsXG4gICAgICAgIC8vIG5vdCBiZSByZWFkIGFuZCBxdWVyaWVkLlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhgX19idW5kbGVfXy9kb2NzLyR7ZX1gKSkpO1xuICAgIH0ocikpO1xuICAgIC8vIEFsbG9jYXRlcyBhIHRhcmdldCB0byBob2xkIGFsbCBkb2N1bWVudCBrZXlzIGZyb20gdGhlIGJ1bmRsZSwgc3VjaCB0aGF0XG4gICAgLy8gdGhleSB3aWxsIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWQgcmlnaHQgYXdheS5cbiAgICAgICAgcmV0dXJuIGkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSBidW5kbGUgZG9jdW1lbnRzXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IF9fUFJJVkFURV9wb3B1bGF0ZURvY3VtZW50Q2hhbmdlQnVmZmVyKGUsIF8sIG8pLm5leHQoKHQgPT4gKF8uYXBwbHkoZSksIFxuICAgIHQpKSkubmV4dCgodCA9PiBpLktyLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIGEudGFyZ2V0SWQpLm5leHQoKCgpID0+IGkuS3IuYWRkTWF0Y2hpbmdLZXlzKGUsIHMsIGEudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5sb2NhbERvY3VtZW50cy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyhlLCB0LmxzLCB0LmhzKSkpLm5leHQoKCgpID0+IHQubHMpKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBnaXZlbiBidW5kbGUgaGFzIGFscmVhZHlcbiAqIGJlZW4gbG9hZGVkIGFuZCB0aGUgY3JlYXRlIHRpbWUgaXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCBsb2FkaW5nIGJ1bmRsZS5cbiAqL1xuLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYE5hbWVkUXVlcnlgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVNhdmVOYW1lZFF1ZXJ5KGUsIHQsIG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkge1xuICAgIC8vIEFsbG9jYXRlIGEgdGFyZ2V0IGZvciB0aGUgbmFtZWQgcXVlcnkgc3VjaCB0aGF0IGl0IGNhbiBiZSByZXN1bWVkXG4gICAgLy8gZnJvbSBhc3NvY2lhdGVkIHJlYWQgdGltZSBpZiB1c2VycyB1c2UgaXQgdG8gbGlzdGVuLlxuICAgIC8vIE5PVEU6IHRoaXMgYWxzbyBtZWFucyBpZiBubyBjb3JyZXNwb25kaW5nIHRhcmdldCBleGlzdHMsIHRoZSBuZXcgdGFyZ2V0XG4gICAgLy8gd2lsbCByZW1haW4gYWN0aXZlIGFuZCB3aWxsIG5vdCBnZXQgY29sbGVjdGVkLCB1bmxlc3MgdXNlcnMgaGFwcGVuIHRvXG4gICAgLy8gdW5saXN0ZW4gdGhlIHF1ZXJ5IHNvbWVob3cuXG4gICAgY29uc3QgciA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX2Zyb21CdW5kbGVkUXVlcnkodC5idW5kbGVkUXVlcnkpKSksIGkgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBuYW1lZCBxdWVyeVwiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5yZWFkVGltZSk7XG4gICAgICAgIC8vIFNpbXBseSBzYXZlIHRoZSBxdWVyeSBpdHNlbGYgaWYgaXQgaXMgb2xkZXIgdGhhbiB3aGF0IHRoZSBTREsgYWxyZWFkeVxuICAgICAgICAvLyBoYXMuXG4gICAgICAgICAgICAgICAgaWYgKHIuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhzKSA+PSAwKSByZXR1cm4gaS5Vci5zYXZlTmFtZWRRdWVyeShlLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHRhcmdldCBkYXRhIGJlY2F1c2UgdGhlIHF1ZXJ5IGZyb20gdGhlIGJ1bmRsZSBpcyBuZXdlci5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gci53aXRoUmVzdW1lVG9rZW4oQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORywgcyk7XG4gICAgICAgIHJldHVybiBpLnJzID0gaS5ycy5pbnNlcnQoby50YXJnZXRJZCwgbyksIGkuS3IudXBkYXRlVGFyZ2V0RGF0YShlLCBvKS5uZXh0KCgoKSA9PiBpLktyLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHIudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5Lci5hZGRNYXRjaGluZ0tleXMoZSwgbiwgci50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLlVyLnNhdmVOYW1lZFF1ZXJ5KGUsIHQpKSk7XG4gICAgfSkpO1xufVxuXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleShlLCB0KSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfY2xpZW50c18ke2V9XyR7dH1gO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgbXV0YXRpb24gc3RhdGUgaXM6XG4vLyAgICAgZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+XG4vLyAgICAgKGZvciB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMpXG4vLyBvcjogZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+Xzx1c2VyX3VpZD5cblxuLy8gJ3VzZXJfdWlkJyBpcyBsYXN0IHRvIGF2b2lkIG5lZWRpbmcgdG8gZXNjYXBlICdfJyBjaGFyYWN0ZXJzIHRoYXQgaXQgbWlnaHRcbi8vIGNvbnRhaW4uXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgbXV0YXRpb24gYmF0Y2ggaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZU11dGF0aW9uQmF0Y2hLZXkoZSwgdCwgbikge1xuICAgIGxldCByID0gYGZpcmVzdG9yZV9tdXRhdGlvbnNfJHtlfV8ke259YDtcbiAgICByZXR1cm4gdC5pc0F1dGhlbnRpY2F0ZWQoKSAmJiAociArPSBgXyR7dC51aWR9YCksIHI7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIGEgcXVlcnkgdGFyZ2V0J3MgbWV0YWRhdGEgaXM6XG4vLyAgICAgZmlyZXN0b3JlX3RhcmdldHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPHRhcmdldF9pZD5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBxdWVyeSBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleShlLCB0KSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfdGFyZ2V0c18ke2V9XyR7dH1gO1xufVxuXG4vLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBzdG9yZXMgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlLiBUaGVcbi8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuLy8gICAgIGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfPHBlcnNpc3RlbmNlX3ByZWZpeD5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgbXV0YXRpb24gYmF0Y2gsIGluY2x1ZGluZyBpdHMgdXNlciBJRCwgYmF0Y2ggSUQgYW5kXG4gKiB3aGV0aGVyIHRoZSBiYXRjaCBpcyAncGVuZGluZycsICdhY2tub3dsZWRnZWQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIF9fUFJJVkFURV9NdXRhdGlvbk1ldGFkYXRhIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMuYmF0Y2hJZCA9IHQsIHRoaXMuc3RhdGUgPSBuLCB0aGlzLmVycm9yID0gcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgTXV0YXRpb25NZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIEVzKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IEpTT04ucGFyc2Uobik7XG4gICAgICAgIGxldCBpLCBzID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgciAmJiAtMSAhPT0gWyBcInBlbmRpbmdcIiwgXCJhY2tub3dsZWRnZWRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihyLnN0YXRlKSAmJiAodm9pZCAwID09PSByLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIHIuZXJyb3IpO1xuICAgICAgICByZXR1cm4gcyAmJiByLmVycm9yICYmIChzID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygci5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHIuZXJyb3IuY29kZSwgXG4gICAgICAgIHMgJiYgKGkgPSBuZXcgRmlyZXN0b3JlRXJyb3Ioci5lcnJvci5jb2RlLCByLmVycm9yLm1lc3NhZ2UpKSksIHMgPyBuZXcgX19QUklWQVRFX011dGF0aW9uTWV0YWRhdGEoZSwgdCwgci5zdGF0ZSwgaSkgOiAoX19QUklWQVRFX2xvZ0Vycm9yKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBtdXRhdGlvbiBzdGF0ZSBmb3IgSUQgJyR7dH0nOiAke259YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgQXMoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAoZS5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIHF1ZXJ5IHRhcmdldCwgaW5jbHVkaW5nIGl0cyB0YXJnZXQgSUQgYW5kIHdoZXRoZXIgdGhlXG4gKiB0YXJnZXQgaXMgJ25vdC1jdXJyZW50JywgJ2N1cnJlbnQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnN0YXRlID0gdCwgdGhpcy5lcnJvciA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBFcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICBsZXQgciwgaSA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgLTEgIT09IFsgXCJub3QtY3VycmVudFwiLCBcImN1cnJlbnRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihuLnN0YXRlKSAmJiAodm9pZCAwID09PSBuLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4uZXJyb3IpO1xuICAgICAgICByZXR1cm4gaSAmJiBuLmVycm9yICYmIChpID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IuY29kZSwgXG4gICAgICAgIGkgJiYgKHIgPSBuZXcgRmlyZXN0b3JlRXJyb3Iobi5lcnJvci5jb2RlLCBuLmVycm9yLm1lc3NhZ2UpKSksIGkgPyBuZXcgX19QUklWQVRFX1F1ZXJ5VGFyZ2V0TWV0YWRhdGEoZSwgbi5zdGF0ZSwgcikgOiAoX19QUklWQVRFX2xvZ0Vycm9yKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSB0YXJnZXQgc3RhdGUgZm9yIElEICcke2V9JzogJHt0fWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIEFzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKGUuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIGltbXV0YWJsZSBDbGllbnRTdGF0ZSBmb3IgYSBjbGllbnQgcmVhZCBmcm9tXG4gKiBXZWJTdG9yYWdlLCBjb250YWluaW5nIHRoZSBsaXN0IG9mIGFjdGl2ZSBxdWVyeSB0YXJnZXRzLlxuICovIGNsYXNzIF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gZSwgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBSZW1vdGVDbGllbnRTdGF0ZSBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIEVzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgIGxldCByID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiBuLmFjdGl2ZVRhcmdldElkcyBpbnN0YW5jZW9mIEFycmF5LCBpID0gX19QUklWQVRFX3RhcmdldElkU2V0KCk7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyByICYmIGUgPCBuLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsrZSkgciA9IGlzU2FmZUludGVnZXIobi5hY3RpdmVUYXJnZXRJZHNbZV0pLCBcbiAgICAgICAgaSA9IGkuYWRkKG4uYWN0aXZlVGFyZ2V0SWRzW2VdKTtcbiAgICAgICAgcmV0dXJuIHIgPyBuZXcgX19QUklWQVRFX1JlbW90ZUNsaWVudFN0YXRlKGUsIGkpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgY2xpZW50IGRhdGEgZm9yIGluc3RhbmNlICcke2V9JzogJHt0fWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgb25saW5lIHN0YXRlIGZvciBhbGwgY2xpZW50cyBwYXJ0aWNpcGF0aW5nIGluXG4gKiBtdWx0aS10YWIuIFRoZSBvbmxpbmUgc3RhdGUgaXMgb25seSB3cml0dGVuIHRvIGJ5IHRoZSBwcmltYXJ5IGNsaWVudCwgYW5kXG4gKiB1c2VkIGluIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2hhcmVkT25saW5lU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGUsIHRoaXMub25saW5lU3RhdGUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBTaGFyZWRPbmxpbmVTdGF0ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIEVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiB0ICYmIC0xICE9PSBbIFwiVW5rbm93blwiLCBcIk9ubGluZVwiLCBcIk9mZmxpbmVcIiBdLmluZGV4T2YodC5vbmxpbmVTdGF0ZSkgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC5jbGllbnRJZCA/IG5ldyBfX1BSSVZBVEVfU2hhcmVkT25saW5lU3RhdGUodC5jbGllbnRJZCwgdC5vbmxpbmVTdGF0ZSkgOiAoX19QUklWQVRFX2xvZ0Vycm9yKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBvbmxpbmUgc3RhdGU6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZXRhZGF0YSBzdGF0ZSBvZiB0aGUgbG9jYWwgY2xpZW50LiBVbmxpa2UgYFJlbW90ZUNsaWVudFN0YXRlYCwgdGhpcyBjbGFzcyBpc1xuICogbXV0YWJsZSBhbmQga2VlcHMgdHJhY2sgb2YgYWxsIHBlbmRpbmcgbXV0YXRpb25zLCB3aGljaCBhbGxvd3MgdXMgdG9cbiAqIHVwZGF0ZSB0aGUgcmFuZ2Ugb2YgcGVuZGluZyBtdXRhdGlvbiBiYXRjaCBJRHMgYXMgbmV3IG11dGF0aW9ucyBhcmUgYWRkZWQgb3JcbiAqIHJlbW92ZWQuXG4gKlxuICogVGhlIGRhdGEgaW4gYExvY2FsQ2xpZW50U3RhdGVgIGlzIG5vdCByZWFkIGZyb20gV2ViU3RvcmFnZSBhbmQgaW5zdGVhZFxuICogdXBkYXRlZCB2aWEgaXRzIGluc3RhbmNlIG1ldGhvZHMuIFRoZSB1cGRhdGVkIHN0YXRlIGNhbiBiZSBzZXJpYWxpemVkIHZpYVxuICogYHRvV2ViU3RvcmFnZUpTT04oKWAuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG5jbGFzcyBfX1BSSVZBVEVfTG9jYWxDbGllbnRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gX19QUklWQVRFX3RhcmdldElkU2V0KCk7XG4gICAgfVxuICAgIFJzKGUpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5hZGQoZSk7XG4gICAgfVxuICAgIFZzKGUpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5kZWxldGUoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgZW50cnkgaW50byBhIEpTT04tZW5jb2RlZCBmb3JtYXQgd2UgY2FuIHVzZSBmb3IgV2ViU3RvcmFnZS5cbiAgICAgKiBEb2VzIG5vdCBlbmNvZGUgYGNsaWVudElkYCBhcyBpdCBpcyBwYXJ0IG9mIHRoZSBrZXkgaW4gV2ViU3RvcmFnZS5cbiAgICAgKi8gICAgQXMoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBhY3RpdmVUYXJnZXRJZHM6IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIHVzZXMgV2ViU3RvcmFnZSAod2luZG93LmxvY2FsU3RvcmFnZSkgYXMgdGhlXG4gKiBiYWNraW5nIHN0b3JlIGZvciB0aGUgU2hhcmVkQ2xpZW50U3RhdGUuIEl0IGtlZXBzIHRyYWNrIG9mIGFsbCBhY3RpdmVcbiAqIGNsaWVudHMgYW5kIHN1cHBvcnRzIG1vZGlmaWNhdGlvbnMgb2YgdGhlIGxvY2FsIGNsaWVudCdzIGRhdGEuXG4gKi8gY2xhc3MgX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IGUsIHRoaXMuX2kgPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5mcyA9IHIsIHRoaXMuc3luY0VuZ2luZSA9IG51bGwsIFxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbCwgdGhpcy5ncyA9IHRoaXMucHMuYmluZCh0aGlzKSwgXG4gICAgICAgIHRoaXMueXMgPSBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKSwgdGhpcy5zdGFydGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FwdHVyZXMgV2ViU3RvcmFnZSBldmVudHMgdGhhdCBvY2N1ciBiZWZvcmUgYHN0YXJ0KClgIGlzIGNhbGxlZC4gVGhlc2VcbiAgICAgICAgICogZXZlbnRzIGFyZSByZXBsYXllZCBvbmNlIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIGlzIHN0YXJ0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndzID0gW107XG4gICAgICAgIC8vIEVzY2FwZSB0aGUgc3BlY2lhbCBjaGFyYWN0ZXJzIG1lbnRpb25lZCBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnNcbiAgICAgICAgY29uc3QgcyA9IG4ucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UsIHRoaXMuY3VycmVudFVzZXIgPSBpLCB0aGlzLlNzID0gY3JlYXRlV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuZnMpLCBcbiAgICAgICAgdGhpcy5icyA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBjdXJyZW50IHNlcXVlbmNlIG51bWJlci4gKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyS2V5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl8ke2V9YDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMueXMgPSB0aGlzLnlzLmluc2VydCh0aGlzLmZzLCBuZXcgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUpLCBcbiAgICAgICAgdGhpcy5EcyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfY2xpZW50c18ke3N9XyhbXl9dKikkYCksIHRoaXMuQ3MgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX211dGF0aW9uc18ke3N9XyhcXFxcZCspKD86XyguKikpPyRgKSwgXG4gICAgICAgIHRoaXMudnMgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX3RhcmdldHNfJHtzfV8oXFxcXGQrKSRgKSwgdGhpcy5GcyA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIHByaW1hcnkgdGFiLiAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlT25saW5lU3RhdGVLZXkoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfb25saW5lX3N0YXRlXyR7ZX1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHBsYXlzIGFzIGEgZXZlbnQgdG8gaW5kaWNhdGUgdGhlIHJlbW90ZSBkb2N1bWVudHNcbiAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkIGR1ZSB0byBzb21lIHNlY29uZGFyeSB0YWJzIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICAgIC8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuICAgICAgICAvLyAgICAgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfdjJfPHBlcnNpc3RlbmNlS2V5PlxuICAgICAgICAvLyBUaGUgdmVyc2lvbiBlbmRpbmcgd2l0aCBcInYyXCIgc3RvcmVzIHRoZSBsaXN0IG9mIG1vZGlmaWVkIGNvbGxlY3Rpb24gZ3JvdXBzLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMuTXMgPSBmdW5jdGlvbiBjcmVhdGVCdW5kbGVMb2FkZWRLZXkoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF92Ml8ke2V9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBrZXkgcHJlZml4IGZvciB0aGUga2V5IHRoYXQgc3RvcmVzIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhbGxvY2F0ZWQuIFRoZSBrZXlcbiAgICAgICAgLy8gbG9va3MgbGlrZSAnZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl88cGVyc2lzdGVuY2VfcHJlZml4PicuXG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgXG4gICAgICAgIC8vIFJhdGhlciB0aGFuIGFkZGluZyB0aGUgc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgc3RhcnQoKSwgd2UgYWRkIHRoZVxuICAgICAgICAvLyBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBpbml0aWFsaXphdGlvbi4gVGhpcyBlbnN1cmVzIHRoYXQgd2UgY29sbGVjdFxuICAgICAgICAvLyBldmVudHMgYmVmb3JlIG90aGVyIGNvbXBvbmVudHMgcG9wdWxhdGUgdGhlaXIgaW5pdGlhbCBzdGF0ZSAoZHVyaW5nIHRoZWlyXG4gICAgICAgIC8vIHJlc3BlY3RpdmUgc3RhcnQoKSBjYWxscykuIE90aGVyd2lzZSwgd2UgbWlnaHQgZm9yIGV4YW1wbGUgbWlzcyBhXG4gICAgICAgIC8vIG11dGF0aW9uIHRoYXQgaXMgYWRkZWQgYWZ0ZXIgTG9jYWxTdG9yZSdzIHN0YXJ0KCkgcHJvY2Vzc2VkIHRoZSBleGlzdGluZ1xuICAgICAgICAvLyBtdXRhdGlvbnMgYnV0IGJlZm9yZSB3ZSBvYnNlcnZlIFdlYlN0b3JhZ2UgZXZlbnRzLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLmdzKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmIFdlYlN0b3JhZ2UgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgQyhlKSB7XG4gICAgICAgIHJldHVybiAhKCFlIHx8ICFlLmxvY2FsU3RvcmFnZSk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBleGlzdGluZyBjbGllbnRzIHRvIGJhY2tmaWxsIHRoZSBkYXRhIGluXG4gICAgICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5zeW5jRW5naW5lLmtpKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBpZiAodCA9PT0gdGhpcy5mcykgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5nZXRJdGVtKGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfUmVtb3RlQ2xpZW50U3RhdGUuRXModCwgZSk7XG4gICAgICAgICAgICAgICAgbiAmJiAodGhpcy55cyA9IHRoaXMueXMuaW5zZXJ0KG4uY2xpZW50SWQsIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnhzKCk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIG9ubGluZSBzdGF0ZSBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgaGFuZGxlclxuICAgICAgICAvLyBpZiBhcHBsaWNhYmxlLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy5Gcyk7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Pcyh0KTtcbiAgICAgICAgICAgIGUgJiYgdGhpcy5OcyhlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy53cykgdGhpcy5wcyhlKTtcbiAgICAgICAgdGhpcy53cyA9IFtdLCBcbiAgICAgICAgLy8gUmVnaXN0ZXIgYSB3aW5kb3cgdW5sb2FkIGhvb2sgdG8gcmVtb3ZlIHRoZSBjbGllbnQgbWV0YWRhdGEgZW50cnkgZnJvbVxuICAgICAgICAvLyBXZWJTdG9yYWdlIGV2ZW4gaWYgYHNodXRkb3duKClgIHdhcyBub3QgY2FsbGVkLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpLCB0aGlzLnN0YXJ0ZWQgPSAhMDtcbiAgICB9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLmJzLCBKU09OLnN0cmluZ2lmeShlKSk7XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQnModGhpcy55cyk7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICBsZXQgdCA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy55cy5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgci5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpICYmICh0ID0gITApO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbihlKSB7XG4gICAgICAgIHRoaXMuTHMoZSwgXCJwZW5kaW5nXCIpO1xuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5McyhlLCB0LCBuKSwgXG4gICAgICAgIC8vIE9uY2UgYSBmaW5hbCBtdXRhdGlvbiByZXN1bHQgaXMgb2JzZXJ2ZWQgYnkgb3RoZXIgY2xpZW50cywgdGhleSBubyBsb25nZXJcbiAgICAgICAgLy8gYWNjZXNzIHRoZSBtdXRhdGlvbidzIG1ldGFkYXRhIGVudHJ5LiBTaW5jZSBXZWJTdG9yYWdlIHJlcGxheXMgZXZlbnRzXG4gICAgICAgIC8vIGluIG9yZGVyLCBpdCBpcyBzYWZlIHRvIGRlbGV0ZSB0aGUgZW50cnkgcmlnaHQgYWZ0ZXIgdXBkYXRpbmcgaXQuXG4gICAgICAgIHRoaXMua3MoZSk7XG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICBsZXQgdCA9IFwibm90LWN1cnJlbnRcIjtcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBieSBhbm90aGVyIHRhYlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSk7XG4gICAgICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YS5FcyhlLCBuKTtcbiAgICAgICAgICAgICAgICByICYmICh0ID0gci5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXMuUnMoZSksIHRoaXMueHMoKSwgdDtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIHRoaXMucXMuVnMoZSksIHRoaXMueHMoKTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXMuYWN0aXZlVGFyZ2V0SWRzLmhhcyhlKTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKGUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIGUpKTtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuUXMoZSwgdCwgbik7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UoZSwgdCwgbikge1xuICAgICAgICB0LmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5rcyhlKTtcbiAgICAgICAgfSkpLCB0aGlzLmN1cnJlbnRVc2VyID0gZSwgbi5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkUGVuZGluZ011dGF0aW9uKGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKGUpIHtcbiAgICAgICAgdGhpcy5LcyhlKTtcbiAgICB9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKGUpIHtcbiAgICAgICAgdGhpcy4kcyhlKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuc3RhcnRlZCAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5ncyksIHRoaXMucmVtb3ZlSXRlbSh0aGlzLlNzKSwgXG4gICAgICAgIHRoaXMuc3RhcnRlZCA9ICExKTtcbiAgICB9XG4gICAgZ2V0SXRlbShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiUkVBRFwiLCBlLCB0KSwgdDtcbiAgICB9XG4gICAgc2V0SXRlbShlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiU0VUXCIsIGUsIHQpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShlLCB0KTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbShlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiUkVNT1ZFXCIsIGUpLCB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShlKTtcbiAgICB9XG4gICAgcHMoZSkge1xuICAgICAgICAvLyBOb3RlOiBUaGUgZnVuY3Rpb24gaXMgdHlwZWQgdG8gdGFrZSBFdmVudCB0byBiZSBpbnRlcmZhY2UtY29tcGF0aWJsZSB3aXRoXG4gICAgICAgIC8vIGBXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcmAuXG4gICAgICAgIGNvbnN0IHQgPSBlO1xuICAgICAgICBpZiAodC5zdG9yYWdlQXJlYSA9PT0gdGhpcy5zdG9yYWdlKSB7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJFVkVOVFwiLCB0LmtleSwgdC5uZXdWYWx1ZSksIHQua2V5ID09PSB0aGlzLlNzKSByZXR1cm4gdm9pZCBfX1BSSVZBVEVfbG9nRXJyb3IoXCJSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlIGdhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuX2kuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQua2V5KSBpZiAodGhpcy5Ecy50ZXN0KHQua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLlVzKHQua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5XcyhlLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Hcyh0LmtleSwgdC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiB0aGlzLldzKGUuY2xpZW50SWQsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuQ3MudGVzdCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0Lm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuenModC5rZXksIHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5qcyhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnZzLnRlc3QodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkhzKHQua2V5LCB0Lm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIHRoaXMuSnMoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodC5rZXkgPT09IHRoaXMuRnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0Lm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuT3ModC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiB0aGlzLk5zKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHQua2V5ID09PSB0aGlzLmJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21XZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ID0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGUpIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChcIm51bWJlclwiID09IHR5cGVvZiBuKSwgdCA9IG47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRXJyb3IoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkZhaWxlZCB0byByZWFkIHNlcXVlbmNlIG51bWJlciBmcm9tIFdlYlN0b3JhZ2VcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGVgIGlzIGEgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIFNoYXJlZENsaWVudFN0YXRlIGZvclxuICogY2xpZW50cyB1c2luZyBtZW1vcnkgcGVyc2lzdGVuY2UuIFRoZSBzdGF0ZSBpbiB0aGlzIGNsYXNzIHJlbWFpbnMgZnVsbHlcbiAqIGlzb2xhdGVkIGFuZCBubyBzeW5jaHJvbml6YXRpb24gaXMgcGVyZm9ybWVkLlxuICovICh0Lm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUgIT09IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSAmJiB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0LmtleSA9PT0gdGhpcy5Ncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuWXModC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChlLm1hcCgoZSA9PiB0aGlzLnN5bmNFbmdpbmUuWnMoZSkpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy53cy5wdXNoKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBxcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueXMuZ2V0KHRoaXMuZnMpO1xuICAgIH1cbiAgICB4cygpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuU3MsIHRoaXMucXMuQXMoKSk7XG4gICAgfVxuICAgIExzKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YSh0aGlzLmN1cnJlbnRVc2VyLCBlLCB0LCBuKSwgaSA9IGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIGUpO1xuICAgICAgICB0aGlzLnNldEl0ZW0oaSwgci5BcygpKTtcbiAgICB9XG4gICAga3MoZSkge1xuICAgICAgICBjb25zdCB0ID0gY3JlYXRlV2ViU3RvcmFnZU11dGF0aW9uQmF0Y2hLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgZSk7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbSh0KTtcbiAgICB9XG4gICAgS3MoZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuZnMsXG4gICAgICAgICAgICBvbmxpbmVTdGF0ZTogZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLkZzLCBKU09OLnN0cmluZ2lmeSh0KSk7XG4gICAgfVxuICAgIFFzKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IGNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIGUpLCBpID0gbmV3IF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhKGUsIHQsIG4pO1xuICAgICAgICB0aGlzLnNldEl0ZW0ociwgaS5BcygpKTtcbiAgICB9XG4gICAgJHMoZSkge1xuICAgICAgICBjb25zdCB0ID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbShlKSk7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLk1zLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGtleSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zIG51bGwgaWYgdGhlIGtleSBkb2VzIG5vdFxuICAgICAqIG1hdGNoIHRoZSBleHBlY3RlZCBrZXkgZm9ybWF0LlxuICAgICAqLyAgICBVcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkRzLmV4ZWMoZSk7XG4gICAgICAgIHJldHVybiB0ID8gdFsxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWUgY291bGQgbm90XG4gICAgICogYmUgcGFyc2VkLlxuICAgICAqLyAgICBHcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLlVzKGUpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1JlbW90ZUNsaWVudFN0YXRlLkVzKG4sIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBtdXRhdGlvbiBiYXRjaCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICB6cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkNzLmV4ZWMoZSksIHIgPSBOdW1iZXIoblsxXSksIGkgPSB2b2lkIDAgIT09IG5bMl0gPyBuWzJdIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9NdXRhdGlvbk1ldGFkYXRhLkVzKG5ldyBVc2VyKGkpLCByLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgcXVlcnkgdGFyZ2V0IHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgSHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy52cy5leGVjKGUpLCByID0gTnVtYmVyKG5bMV0pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1F1ZXJ5VGFyZ2V0TWV0YWRhdGEuRXMociwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbiBvbmxpbmUgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBPcyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfU2hhcmVkT25saW5lU3RhdGUuRXMoZSk7XG4gICAgfVxuICAgIFlzKGUpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZSk7XG4gICAgfVxuICAgIGFzeW5jIGpzKGUpIHtcbiAgICAgICAgaWYgKGUudXNlci51aWQgPT09IHRoaXMuY3VycmVudFVzZXIudWlkKSByZXR1cm4gdGhpcy5zeW5jRW5naW5lLlhzKGUuYmF0Y2hJZCwgZS5zdGF0ZSwgZS5lcnJvcik7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyICR7ZS51c2VyLnVpZH1gKTtcbiAgICB9XG4gICAgSnMoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmVvKGUudGFyZ2V0SWQsIGUuc3RhdGUsIGUuZXJyb3IpO1xuICAgIH1cbiAgICBXcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ID8gdGhpcy55cy5pbnNlcnQoZSwgdCkgOiB0aGlzLnlzLnJlbW92ZShlKSwgciA9IHRoaXMuQnModGhpcy55cyksIGkgPSB0aGlzLkJzKG4pLCBzID0gW10sIG8gPSBbXTtcbiAgICAgICAgcmV0dXJuIGkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICByLmhhcyhlKSB8fCBzLnB1c2goZSk7XG4gICAgICAgIH0pKSwgci5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGkuaGFzKGUpIHx8IG8ucHVzaChlKTtcbiAgICAgICAgfSkpLCB0aGlzLnN5bmNFbmdpbmUubm8ocywgbykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy55cyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgTnMoZSkge1xuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxuICAgICAgICB0aGlzLnlzLmdldChlLmNsaWVudElkKSAmJiB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcihlLm9ubGluZVN0YXRlKTtcbiAgICB9XG4gICAgQnMoZSkge1xuICAgICAgICBsZXQgdCA9IF9fUFJJVkFURV90YXJnZXRJZFNldCgpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdCA9IHQudW5pb25XaXRoKG4uYWN0aXZlVGFyZ2V0SWRzKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeVNoYXJlZENsaWVudFN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ybyA9IG5ldyBfX1BSSVZBVEVfTG9jYWxDbGllbnRTdGF0ZSwgdGhpcy5pbyA9IHt9LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIFxuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbihlKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yby5ScyhlKSwgdGhpcy5pb1tlXSB8fCBcIm5vdC1jdXJyZW50XCI7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmlvW2VdID0gdDtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIHRoaXMucm8uVnMoZSk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvLmFjdGl2ZVRhcmdldElkcy5oYXMoZSk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZShlKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmlvW2VdO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvLmFjdGl2ZVRhcmdldElkcztcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvLmFjdGl2ZVRhcmdldElkcy5oYXMoZSk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ybyA9IG5ldyBfX1BSSVZBVEVfTG9jYWxDbGllbnRTdGF0ZSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UoZSwgdCwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUoZSkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIoZSkge31cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQoZSkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9Ob29wQ29ubmVjdGl2aXR5TW9uaXRvciB7XG4gICAgc28oZSkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vLW9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFJlZmVyZW5jZXMgdG8gYHdpbmRvd2AgYXJlIGd1YXJkZWQgYnkgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IuaXNBdmFpbGFibGUoKVxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKipcbiAqIEJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgQ29ubmVjdGl2aXR5TW9uaXRvci5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0Jyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbyA9ICgpID0+IHRoaXMuX28oKSwgdGhpcy5hbyA9ICgpID0+IHRoaXMudW8oKSwgdGhpcy5jbyA9IFtdLCB0aGlzLmxvKCk7XG4gICAgfVxuICAgIHNvKGUpIHtcbiAgICAgICAgdGhpcy5jby5wdXNoKGUpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5vbyksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLmFvKTtcbiAgICB9XG4gICAgbG8oKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMub28pLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5hbyk7XG4gICAgfVxuICAgIF9vKCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5jbykgZSgwIC8qIE5ldHdvcmtTdGF0dXMuQVZBSUxBQkxFICovKTtcbiAgICB9XG4gICAgdW8oKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuY28pIGUoMSAvKiBOZXR3b3JrU3RhdHVzLlVOQVZBSUxBQkxFICovKTtcbiAgICB9XG4gICAgLy8gVE9ETyhjaGVuYnJpYW4pOiBDb25zaWRlciBwYXNzaW5nIGluIHdpbmRvdyBlaXRoZXIgaW50byB0aGlzIGNvbXBvbmVudCBvclxuICAgIC8vIGhlcmUgZm9yIHRlc3RpbmcgdmlhIEZha2VXaW5kb3cuXG4gICAgLyoqIENoZWNrcyB0aGF0IGFsbCB1c2VkIGF0dHJpYnV0ZXMgb2Ygd2luZG93IGFyZSBhdmFpbGFibGUuICovXG4gICAgc3RhdGljIEMoKSB7XG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgJiYgdm9pZCAwICE9PSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAmJiB2b2lkIDAgIT09IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIG1vc3QgcmVjZW50IGludm9jYXRpb24gb2ZcbiAqIGBnZW5lcmF0ZVVuaXF1ZURlYnVnSWQoKWAsIG9yIG51bGwgaWYgaXQgaGFzIG5ldmVyIGJlZW4gaW52b2tlZC5cbiAqLyBsZXQgQWUgPSBudWxsO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhbiBpbml0aWFsIHZhbHVlIGZvciBgbGFzdFVuaXF1ZURlYnVnSWRgLlxuICpcbiAqIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyByYW5kb21seSBzZWxlY3RlZCBmcm9tIGEgcmFuZ2Ugb2YgaW50ZWdlcnMgdGhhdCBhcmVcbiAqIHJlcHJlc2VudGVkIGFzIDggaGV4YWRlY2ltYWwgZGlnaXRzLiBUaGlzIG1lYW5zIHRoYXQgKHdpdGhpbiByZWFzb24pIGFueVxuICogbnVtYmVycyBnZW5lcmF0ZWQgYnkgaW5jcmVtZW50aW5nIHRoZSByZXR1cm5lZCBudW1iZXIgYnkgMSB3aWxsIGFsc28gYmVcbiAqIHJlcHJlc2VudGVkIGJ5IDggaGV4YWRlY2ltYWwgZGlnaXRzLiBUaGlzIGxlYWRzIHRvIGFsbCBcIklEc1wiIGhhdmluZyB0aGUgc2FtZVxuICogbGVuZ3RoIHdoZW4gY29udmVydGVkIHRvIGEgaGV4YWRlY2ltYWwgc3RyaW5nLCBtYWtpbmcgcmVhZGluZyBsb2dzIGNvbnRhaW5pbmdcbiAqIHRoZXNlIElEcyBlYXNpZXIgdG8gZm9sbG93LiBBbmQgc2luY2UgdGhlIHJldHVybiB2YWx1ZSBpcyByYW5kb21seSBzZWxlY3RlZFxuICogaXQgd2lsbCBoZWxwIHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlbiBsb2dzIGZyb20gZGlmZmVyZW50IGV4ZWN1dGlvbnMuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGFuZCByZXR1cm5zIGEgdW5pcXVlIElEIGFzIGEgaGV4YWRlY2ltYWwgc3RyaW5nLlxuICpcbiAqIFRoZSByZXR1cm5lZCBJRCBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIGluIGRlYnVnIGxvZ2dpbmcgbWVzc2FnZXMgdG8gaGVscFxuICogY29ycmVsYXRlIGxvZyBtZXNzYWdlcyB0aGF0IG1heSBiZSBzcGF0aWFsbHkgc2VwYXJhdGVkIGluIHRoZSBsb2dzLCBidXRcbiAqIGxvZ2ljYWxseSByZWxhdGVkLiBGb3IgZXhhbXBsZSwgYSBuZXR3b3JrIGNvbm5lY3Rpb24gY291bGQgaW5jbHVkZSB0aGUgc2FtZVxuICogXCJkZWJ1ZyBJRFwiIHN0cmluZyBpbiBhbGwgb2YgaXRzIGxvZyBtZXNzYWdlcyB0byBoZWxwIHRyYWNlIGEgc3BlY2lmaWNcbiAqIGNvbm5lY3Rpb24gb3ZlciB0aW1lLlxuICpcbiAqIEByZXR1cm4gdGhlIDEwLWNoYXJhY3RlciBnZW5lcmF0ZWQgSUQgKGUuZy4gXCIweGExYjJjM2Q0XCIpLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKCkge1xuICAgIHJldHVybiBudWxsID09PSBBZSA/IEFlID0gZnVuY3Rpb24gX19QUklWQVRFX2dlbmVyYXRlSW5pdGlhbFVuaXF1ZURlYnVnSWQoKSB7XG4gICAgICAgIHJldHVybiAyNjg0MzU0NTYgKyBNYXRoLnJvdW5kKDIxNDc0ODM2NDggKiBNYXRoLnJhbmRvbSgpKTtcbiAgICB9KCkgOiBBZSsrLCBcIjB4XCIgKyBBZS50b1N0cmluZygxNik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFJlID0ge1xuICAgIEJhdGNoR2V0RG9jdW1lbnRzOiBcImJhdGNoR2V0XCIsXG4gICAgQ29tbWl0OiBcImNvbW1pdFwiLFxuICAgIFJ1blF1ZXJ5OiBcInJ1blF1ZXJ5XCIsXG4gICAgUnVuQWdncmVnYXRpb25RdWVyeTogXCJydW5BZ2dyZWdhdGlvblF1ZXJ5XCJcbn07XG5cbi8qKlxuICogTWFwcyBSUEMgbmFtZXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgUkVTVCBlbmRwb2ludCBuYW1lLlxuICpcbiAqIFdlIHVzZSBhcnJheSBub3RhdGlvbiB0byBhdm9pZCBtYW5nbGluZy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzaW1wbGUgaGVscGVyIGNsYXNzIHRoYXQgaW1wbGVtZW50cyB0aGUgU3RyZWFtIGludGVyZmFjZSB0b1xuICogYnJpZGdlIHRvIG90aGVyIGltcGxlbWVudGF0aW9ucyB0aGF0IGFyZSBzdHJlYW1zIGJ1dCBkbyBub3QgaW1wbGVtZW50IHRoZVxuICogaW50ZXJmYWNlLiBUaGUgc3RyZWFtIGNhbGxiYWNrcyBhcmUgaW52b2tlZCB3aXRoIHRoZSBjYWxsT24uLi4gbWV0aG9kcy5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1N0cmVhbUJyaWRnZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmhvID0gZS5obywgdGhpcy5QbyA9IGUuUG87XG4gICAgfVxuICAgIElvKGUpIHtcbiAgICAgICAgdGhpcy5UbyA9IGU7XG4gICAgfVxuICAgIEVvKGUpIHtcbiAgICAgICAgdGhpcy5BbyA9IGU7XG4gICAgfVxuICAgIG9uTWVzc2FnZShlKSB7XG4gICAgICAgIHRoaXMuUm8gPSBlO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5QbygpO1xuICAgIH1cbiAgICBzZW5kKGUpIHtcbiAgICAgICAgdGhpcy5obyhlKTtcbiAgICB9XG4gICAgVm8oKSB7XG4gICAgICAgIHRoaXMuVG8oKTtcbiAgICB9XG4gICAgbW8oZSkge1xuICAgICAgICB0aGlzLkFvKGUpO1xuICAgIH1cbiAgICBmbyhlKSB7XG4gICAgICAgIHRoaXMuUm8oZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBWZSA9IFwiV2ViQ2hhbm5lbENvbm5lY3Rpb25cIjtcblxuY2xhc3MgX19QUklWQVRFX1dlYkNoYW5uZWxDb25uZWN0aW9uIGV4dGVuZHMgXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBSZXN0LWJhc2VkIGNvbm5lY3Rpb25zIHRvIHRoZSBiYWNrZW5kIChXZWJDaGFubmVsIGFuZFxuICogSFRUUCkuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9SZXN0Q29ubmVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSW5mbyA9IGUsIHRoaXMuZGF0YWJhc2VJZCA9IGUuZGF0YWJhc2VJZDtcbiAgICAgICAgY29uc3QgdCA9IGUuc3NsID8gXCJodHRwc1wiIDogXCJodHRwXCIsIG4gPSBlbmNvZGVVUklDb21wb25lbnQodGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCksIHIgPSBlbmNvZGVVUklDb21wb25lbnQodGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlKTtcbiAgICAgICAgdGhpcy5wbyA9IHQgKyBcIjovL1wiICsgZS5ob3N0LCB0aGlzLnlvID0gYHByb2plY3RzLyR7bn0vZGF0YWJhc2VzLyR7cn1gLCB0aGlzLndvID0gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlID8gYHByb2plY3RfaWQ9JHtufWAgOiBgcHJvamVjdF9pZD0ke259JmRhdGFiYXNlX2lkPSR7cn1gO1xuICAgIH1cbiAgICBnZXQgU28oKSB7XG4gICAgICAgIC8vIEJvdGggYGludm9rZVJQQygpYCBhbmQgYGludm9rZVN0cmVhbWluZ1JQQygpYCB1c2UgdGhlaXIgYHBhdGhgIGFyZ3VtZW50cyB0byBkZXRlcm1pbmVcbiAgICAgICAgLy8gd2hlcmUgdG8gcnVuIHRoZSBxdWVyeSwgYW5kIGV4cGVjdCB0aGUgYHJlcXVlc3RgIHRvIE5PVCBzcGVjaWZ5IHRoZSBcInBhdGhcIi5cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBibyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKCksIG8gPSB0aGlzLkRvKGUsIHQpO1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJSZXN0Q29ubmVjdGlvblwiLCBgU2VuZGluZyBSUEMgJyR7ZX0nICR7c306YCwgbywgbik7XG4gICAgICAgIGNvbnN0IF8gPSB7XG4gICAgICAgICAgICBcImdvb2dsZS1jbG91ZC1yZXNvdXJjZS1wcmVmaXhcIjogdGhpcy55byxcbiAgICAgICAgICAgIFwieC1nb29nLXJlcXVlc3QtcGFyYW1zXCI6IHRoaXMud29cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ28oXywgciwgaSksIHRoaXMudm8oZSwgbywgXywgbikudGhlbigodCA9PiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVzdENvbm5lY3Rpb25cIiwgYFJlY2VpdmVkIFJQQyAnJHtlfScgJHtzfTogYCwgdCksIFxuICAgICAgICB0KSksICh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IF9fUFJJVkFURV9sb2dXYXJuKFwiUmVzdENvbm5lY3Rpb25cIiwgYFJQQyAnJHtlfScgJHtzfSBmYWlsZWQgd2l0aCBlcnJvcjogYCwgdCwgXCJ1cmw6IFwiLCBvLCBcInJlcXVlc3Q6XCIsIG4pLCBcbiAgICAgICAgICAgIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRm8oZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICAvLyBUaGUgUkVTVCBBUEkgYXV0b21hdGljYWxseSBhZ2dyZWdhdGVzIGFsbCBvZiB0aGUgc3RyZWFtZWQgcmVzdWx0cywgc28gd2VcbiAgICAgICAgLy8gY2FuIGp1c3QgdXNlIHRoZSBub3JtYWwgaW52b2tlKCkgbWV0aG9kLlxuICAgICAgICByZXR1cm4gdGhpcy5ibyhlLCB0LCBuLCByLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgdGhlIGhlYWRlcnMgZm9yIGEgcmVxdWVzdCwgYWRkaW5nIGFueSBhdXRob3JpemF0aW9uIHRva2VuIGlmXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXG4gICAgICovICAgIENvKGUsIHQsIG4pIHtcbiAgICAgICAgZVtcIlgtR29vZy1BcGktQ2xpZW50XCJdID0gXG4gICAgICAgIC8vIFNES19WRVJTSU9OIGlzIHVwZGF0ZWQgdG8gZGlmZmVyZW50IHZhbHVlIGF0IHJ1bnRpbWUgZGVwZW5kaW5nIG9uIHRoZSBlbnRyeSBwb2ludCxcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBnZXQgaXRzIHZhbHVlIHdoZW4gd2UgbmVlZCBpdCBpbiBhIGZ1bmN0aW9uLlxuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0R29vZ0FwaUNsaWVudFZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiZ2wtanMvIGZpcmUvXCIgKyBTO1xuICAgICAgICB9KCksIFxuICAgICAgICAvLyBDb250ZW50LVR5cGU6IHRleHQvcGxhaW4gd2lsbCBhdm9pZCBwcmVmbGlnaHQgcmVxdWVzdHMgd2hpY2ggbWlnaHRcbiAgICAgICAgLy8gbWVzcyB3aXRoIENPUlMgYW5kIHJlZGlyZWN0cyBieSBwcm94aWVzLiBJZiB3ZSBhZGQgY3VzdG9tIGhlYWRlcnNcbiAgICAgICAgLy8gd2Ugd2lsbCBuZWVkIHRvIGNoYW5nZSB0aGlzIGNvZGUgdG8gcG90ZW50aWFsbHkgdXNlIHRoZSAkaHR0cE92ZXJ3cml0ZVxuICAgICAgICAvLyBwYXJhbWV0ZXIgc3VwcG9ydGVkIGJ5IEVTRiB0byBhdm9pZCB0cmlnZ2VyaW5nIHByZWZsaWdodCByZXF1ZXN0cy5cbiAgICAgICAgZVtcIkNvbnRlbnQtVHlwZVwiXSA9IFwidGV4dC9wbGFpblwiLCB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCAmJiAoZVtcIlgtRmlyZWJhc2UtR01QSURcIl0gPSB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCksIFxuICAgICAgICB0ICYmIHQuaGVhZGVycy5mb3JFYWNoKCgodCwgbikgPT4gZVtuXSA9IHQpKSwgbiAmJiBuLmhlYWRlcnMuZm9yRWFjaCgoKHQsIG4pID0+IGVbbl0gPSB0KSk7XG4gICAgfVxuICAgIERvKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFJlW2VdO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5wb30vdjEvJHt0fToke259YDtcbiAgICB9XG59IHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKGUpLCB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSBlLmZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gZS5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGUudXNlRmV0Y2hTdHJlYW1zLCB0aGlzLmxvbmdQb2xsaW5nT3B0aW9ucyA9IGUubG9uZ1BvbGxpbmdPcHRpb25zO1xuICAgIH1cbiAgICB2byhlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKHMsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBuZXcgWGhySW87XG4gICAgICAgICAgICBfLnNldFdpdGhDcmVkZW50aWFscyghMCksIF8ubGlzdGVuT25jZShFdmVudFR5cGUuQ09NUExFVEUsICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfLmdldExhc3RFcnJvckNvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLk5PX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBYSFIgZm9yIFJQQyAnJHtlfScgJHtpfSByZWNlaXZlZDpgLCBKU09OLnN0cmluZ2lmeSh0KSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgcyh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuVElNRU9VVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgJHtpfSB0aW1lZCBvdXRgKSwgbyhuZXcgRmlyZXN0b3JlRXJyb3IoRC5ERUFETElORV9FWENFRURFRCwgXCJSZXF1ZXN0IHRpbWUgb3V0XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuSFRUUF9FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfLmdldFN0YXR1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgJHtpfSBmYWlsZWQgd2l0aCBzdGF0dXM6YCwgbiwgXCJyZXNwb25zZSB0ZXh0OlwiLCBfLmdldFJlc3BvbnNlVGV4dCgpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBuID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gXy5nZXRSZXNwb25zZUpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KGUpICYmIChlID0gZVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgdC5zdGF0dXMgJiYgdC5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbWFwQ29kZUZyb21IdHRwUmVzcG9uc2VFcnJvclN0YXR1cyhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywgXCItXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoRCkuaW5kZXhPZih0KSA+PSAwID8gdCA6IEQuVU5LTk9XTjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0LnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8obmV3IEZpcmVzdG9yZUVycm9yKGUsIHQubWVzc2FnZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBvKG5ldyBGaXJlc3RvcmVFcnJvcihELlVOS05PV04sIFwiU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBcIiArIF8uZ2V0U3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICBvKG5ldyBGaXJlc3RvcmVFcnJvcihELlVOQVZBSUxBQkxFLCBcIkNvbm5lY3Rpb24gZmFpbGVkLlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nICR7aX0gY29tcGxldGVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBKU09OLnN0cmluZ2lmeShyKTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgJHtpfSBzZW5kaW5nIHJlcXVlc3Q6YCwgciksIF8uc2VuZCh0LCBcIlBPU1RcIiwgYSwgbiwgMTUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIE1vKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9nZW5lcmF0ZVVuaXF1ZURlYnVnSWQoKSwgaSA9IFsgdGhpcy5wbywgXCIvXCIsIFwiZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmVcIiwgXCIvXCIsIGUsIFwiL2NoYW5uZWxcIiBdLCBzID0gY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCgpLCBvID0gZ2V0U3RhdEV2ZW50VGFyZ2V0KCksIF8gPSB7XG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgYmFja2VuZCBzdGlja2luZXNzLCByb3V0aW5nIGJlaGF2aW9yIGlzIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgICAgIC8vIHBhcmFtZXRlci5cbiAgICAgICAgICAgIGh0dHBTZXNzaW9uSWRQYXJhbTogXCJnc2Vzc2lvbmlkXCIsXG4gICAgICAgICAgICBpbml0TWVzc2FnZUhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgbWVzc2FnZVVybFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgcGFyYW0gaXMgdXNlZCB0byBpbXByb3ZlIHJvdXRpbmcgYW5kIHByb2plY3QgaXNvbGF0aW9uIGJ5IHRoZVxuICAgICAgICAgICAgICAgIC8vIGJhY2tlbmQgYW5kIG11c3QgYmUgaW5jbHVkZWQgaW4gZXZlcnkgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogYHByb2plY3RzLyR7dGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlfWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZW5kUmF3SnNvbjogITAsXG4gICAgICAgICAgICBzdXBwb3J0c0Nyb3NzRG9tYWluWGhyOiAhMCxcbiAgICAgICAgICAgIGludGVybmFsQ2hhbm5lbFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHRpbWVvdXQgKHJhbmRvbWl6ZWQgYmV0d2VlbiAxMC0yMCBzZWNvbmRzKSBzaW5jZVxuICAgICAgICAgICAgICAgIC8vIGEgbGFyZ2Ugd3JpdGUgYmF0Y2ggb24gYSBzbG93IGludGVybmV0IGNvbm5lY3Rpb24gbWF5IHRha2UgYSBsb25nXG4gICAgICAgICAgICAgICAgLy8gdGltZSB0byBzZW5kIHRvIHRoZSBiYWNrZW5kLiBSYXRoZXIgdGhhbiBoYXZlIFdlYkNoYW5uZWwgaW1wb3NlIGFcbiAgICAgICAgICAgICAgICAvLyB0aWdodCB0aW1lb3V0IHdoaWNoIGNvdWxkIGxlYWQgdG8gaW5maW5pdGUgdGltZW91dHMgYW5kIHJldHJpZXMsIHdlXG4gICAgICAgICAgICAgICAgLy8gc2V0IGl0IHZlcnkgbGFyZ2UgKDUtMTAgbWludXRlcykgYW5kIHJlbHkgb24gdGhlIGJyb3dzZXIncyBidWlsdGluXG4gICAgICAgICAgICAgICAgLy8gdGltZW91dHMgdG8ga2ljayBpbiBpZiB0aGUgcmVxdWVzdCBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgICAgIGZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNczogNmU1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9yY2VMb25nUG9sbGluZzogdGhpcy5mb3JjZUxvbmdQb2xsaW5nLFxuICAgICAgICAgICAgZGV0ZWN0QnVmZmVyaW5nUHJveHk6IHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nXG4gICAgICAgIH0sIGEgPSB0aGlzLmxvbmdQb2xsaW5nT3B0aW9ucy50aW1lb3V0U2Vjb25kcztcbiAgICAgICAgdm9pZCAwICE9PSBhICYmIChfLmxvbmdQb2xsaW5nVGltZW91dCA9IE1hdGgucm91bmQoMWUzICogYSkpLCB0aGlzLnVzZUZldGNoU3RyZWFtcyAmJiAoXy51c2VGZXRjaFN0cmVhbXMgPSAhMCksIFxuICAgICAgICB0aGlzLkNvKF8uaW5pdE1lc3NhZ2VIZWFkZXJzLCB0LCBuKSwgXG4gICAgICAgIC8vIFNlbmRpbmcgdGhlIGN1c3RvbSBoZWFkZXJzIHdlIGp1c3QgYWRkZWQgdG8gcmVxdWVzdC5pbml0TWVzc2FnZUhlYWRlcnNcbiAgICAgICAgLy8gKEF1dGhvcml6YXRpb24sIGV0Yy4pIHdpbGwgdHJpZ2dlciB0aGUgYnJvd3NlciB0byBtYWtlIGEgQ09SUyBwcmVmbGlnaHRcbiAgICAgICAgLy8gcmVxdWVzdCBiZWNhdXNlIHRoZSBYSFIgd2lsbCBubyBsb25nZXIgbWVldCB0aGUgY3JpdGVyaWEgZm9yIGEgXCJzaW1wbGVcIlxuICAgICAgICAvLyBDT1JTIHJlcXVlc3Q6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvQ09SUyNTaW1wbGVfcmVxdWVzdHNcbiAgICAgICAgLy8gVGhlcmVmb3JlIHRvIGF2b2lkIHRoZSBDT1JTIHByZWZsaWdodCByZXF1ZXN0IChhbiBleHRyYSBuZXR3b3JrXG4gICAgICAgIC8vIHJvdW5kdHJpcCksIHdlIHVzZSB0aGUgZW5jb2RlSW5pdE1lc3NhZ2VIZWFkZXJzIG9wdGlvbiB0byBzcGVjaWZ5IHRoYXRcbiAgICAgICAgLy8gdGhlIGhlYWRlcnMgc2hvdWxkIGluc3RlYWQgYmUgZW5jb2RlZCBpbiB0aGUgcmVxdWVzdCdzIFBPU1QgcGF5bG9hZCxcbiAgICAgICAgLy8gd2hpY2ggaXMgcmVjb2duaXplZCBieSB0aGUgd2ViY2hhbm5lbCBiYWNrZW5kLlxuICAgICAgICBfLmVuY29kZUluaXRNZXNzYWdlSGVhZGVycyA9ICEwO1xuICAgICAgICBjb25zdCB1ID0gaS5qb2luKFwiXCIpO1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBDcmVhdGluZyBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9OiAke3V9YCwgXyk7XG4gICAgICAgIGNvbnN0IGMgPSBzLmNyZWF0ZVdlYkNoYW5uZWwodSwgXyk7XG4gICAgICAgIC8vIFdlYkNoYW5uZWwgc3VwcG9ydHMgc2VuZGluZyB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBoYW5kc2hha2UgLSBzYXZpbmdcbiAgICAgICAgLy8gYSBuZXR3b3JrIHJvdW5kIHRyaXAuIEhvd2V2ZXIsIGl0IHdpbGwgaGF2ZSB0byBjYWxsIHNlbmQgaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XG4gICAgICAgIC8vIG9wZW5pbmcgdGhlIFdlYkNoYW5uZWwgdW50aWwgc2VuZCBpcyBjYWxsZWQuIFdoZXRoZXIgd2UgaGF2ZSBjYWxsZWRcbiAgICAgICAgLy8gb3BlbiBpcyB0cmFja2VkIHdpdGggdGhpcyB2YXJpYWJsZS5cbiAgICAgICAgICAgICAgICBsZXQgbCA9ICExLCBoID0gITE7XG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3QgUCA9IG5ldyBfX1BSSVZBVEVfU3RyZWFtQnJpZGdlKHtcbiAgICAgICAgICAgIGhvOiB0ID0+IHtcbiAgICAgICAgICAgICAgICBoID8gX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgTm90IHNlbmRpbmcgYmVjYXVzZSBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IGlzIGNsb3NlZDpgLCB0KSA6IChsIHx8IChfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBPcGVuaW5nIFJQQyAnJHtlfScgc3RyZWFtICR7cn0gdHJhbnNwb3J0LmApLCBcbiAgICAgICAgICAgICAgICBjLm9wZW4oKSwgbCA9ICEwKSwgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBzZW5kaW5nOmAsIHQpLCBcbiAgICAgICAgICAgICAgICBjLnNlbmQodCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFBvOiAoKSA9PiBjLmNsb3NlKClcbiAgICAgICAgfSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbiA9IChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IGNsb3N1cmUgdHlwaW5nIHNlZW1zIGJyb2tlbiBiZWNhdXNlIFdlYkNoYW5uZWwgZG9lc1xuICAgICAgICAgICAgLy8gbm90IGltcGxlbWVudCBnb29nLmV2ZW50cy5MaXN0ZW5hYmxlXG4gICAgICAgICAgICBlLmxpc3Rlbih0LCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbihlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIENsb3N1cmUgZXZlbnRzIGFyZSBndWFyZGVkIGFuZCBleGNlcHRpb25zIGFyZSBzd2FsbG93ZWQsIHNvIGNhdGNoIGFueVxuICAgICAgICAvLyBleGNlcHRpb24gYW5kIHJldGhyb3cgdXNpbmcgYSBzZXRUaW1lb3V0IHNvIHRoZXkgYmVjb21lIHZpc2libGUgYWdhaW4uXG4gICAgICAgIC8vIE5vdGUgdGhhdCBldmVudHVhbGx5IHRoaXMgZnVuY3Rpb24gY291bGQgZ28gYXdheSBpZiB3ZSBhcmUgY29uZmlkZW50XG4gICAgICAgIC8vIGVub3VnaCB0aGUgY29kZSBpcyBleGNlcHRpb24gZnJlZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sICgoKSA9PiB7XG4gICAgICAgICAgICBoIHx8IF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gdHJhbnNwb3J0IG9wZW5lZC5gKTtcbiAgICAgICAgfSkpLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4oYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuQ0xPU0UsICgoKSA9PiB7XG4gICAgICAgICAgICBoIHx8IChoID0gITAsIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gdHJhbnNwb3J0IGNsb3NlZGApLCBcbiAgICAgICAgICAgIFAubW8oKSk7XG4gICAgICAgIH0pKSwgX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkVSUk9SLCAodCA9PiB7XG4gICAgICAgICAgICBoIHx8IChoID0gITAsIF9fUFJJVkFURV9sb2dXYXJuKFZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSB0cmFuc3BvcnQgZXJyb3JlZDpgLCB0KSwgXG4gICAgICAgICAgICBQLm1vKG5ldyBGaXJlc3RvcmVFcnJvcihELlVOQVZBSUxBQkxFLCBcIlRoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZFwiKSkpO1xuICAgICAgICB9KSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5NRVNTQUdFLCAodCA9PiB7XG4gICAgICAgICAgICB2YXIgbjtcbiAgICAgICAgICAgIGlmICghaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0LmRhdGFbMF07XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoISFpKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMzUxNDM4OTEpOiBUaGVyZSBpcyBhIGJ1ZyBpbiBPbmUgUGxhdGZvcm0gdGhhdCBjYXVzZWQgZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gKGFuZCBvbmx5IGVycm9ycykgdG8gYmUgd3JhcHBlZCBpbiBhbiBleHRyYSBhcnJheS4gVG8gYmUgZm9yd2FyZFxuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgYnVnIHdlIG5lZWQgdG8gY2hlY2sgZWl0aGVyIGNvbmRpdGlvbi4gVGhlIGxhdHRlclxuICAgICAgICAgICAgICAgIC8vIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGZpeCBoYXMgYmVlbiByb2xsZWQgb3V0LlxuICAgICAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSBtc2dEYXRhLmVycm9yIGlzIG5vdCB0eXBlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gaSwgbyA9IHMuZXJyb3IgfHwgKG51bGwgPT09IChuID0gc1swXSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5lcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSByZWNlaXZlZCBlcnJvcjpgLCBvKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3Iuc3RhdHVzIHdpbGwgYmUgYSBzdHJpbmcgbGlrZSAnT0snIG9yICdOT1RfRk9VTkQnLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuID0gXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gYSBHUlBDIHN0YXR1cyBpZGVudGlmaWVyIGxpa2UgJ05PVF9GT1VORCcuXG4gKlxuICogQHJldHVybnMgVGhlIENvZGUgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gc3RhdHVzIHN0cmluZyBvciB1bmRlZmluZWQgaWZcbiAqICAgICB0aGVyZSBpcyBubyBtYXRjaC5cbiAqL1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfbWFwQ29kZUZyb21ScGNTdGF0dXMoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9va3VwIGJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhZVtlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQpIHJldHVybiBfX1BSSVZBVEVfbWFwQ29kZUZyb21ScGNDb2RlKHQpO1xuICAgICAgICAgICAgICAgICAgICB9KHQpLCBpID0gby5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSBELklOVEVSTkFMLCBpID0gXCJVbmtub3duIGVycm9yIHN0YXR1czogXCIgKyB0ICsgXCIgd2l0aCBtZXNzYWdlIFwiICsgby5tZXNzYWdlKSwgXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgY2xvc2VkIHNvIG5vIGZ1cnRoZXIgZXZlbnRzIGFyZSBwcm9wYWdhdGVkXG4gICAgICAgICAgICAgICAgICAgIGggPSAhMCwgUC5tbyhuZXcgRmlyZXN0b3JlRXJyb3IobiwgaSkpLCBjLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gcmVjZWl2ZWQ6YCwgaSksIFAuZm8oaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuKG8sIEV2ZW50LlNUQVRfRVZFTlQsICh0ID0+IHtcbiAgICAgICAgICAgIHQuc3RhdCA9PT0gU3RhdC5QUk9YWSA/IF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gZGV0ZWN0ZWQgYnVmZmVyaW5nIHByb3h5YCkgOiB0LnN0YXQgPT09IFN0YXQuTk9QUk9YWSAmJiBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IGRldGVjdGVkIG5vIGJ1ZmZlcmluZyBwcm94eWApO1xuICAgICAgICB9KSksIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5IHdlIGNvdWxkL3Nob3VsZCB3YWl0IGZvciB0aGUgV2ViQ2hhbm5lbCBvcGVuZWQgZXZlbnQsXG4gICAgICAgICAgICAvLyBidXQgYmVjYXVzZSB3ZSB3YW50IHRvIHNlbmQgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgV2ViQ2hhbm5lbFxuICAgICAgICAgICAgLy8gaGFuZHNoYWtlIHdlIHByZXRlbmQgdGhlIGNoYW5uZWwgb3BlbmVkIGhlcmUgKGFzeW5jaHJvbm91c2x5KSwgYW5kXG4gICAgICAgICAgICAvLyB0aGVuIGRlbGF5IHRoZSBhY3R1YWwgb3BlbiB1bnRpbCB0aGUgZmlyc3QgbWVzc2FnZSBpcyBzZW50LlxuICAgICAgICAgICAgUC5WbygpO1xuICAgICAgICB9KSwgMCksIFA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEluaXRpYWxpemVzIHRoZSBXZWJDaGFubmVsQ29ubmVjdGlvbiBmb3IgdGhlIGJyb3dzZXIuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFRoZSBQbGF0Zm9ybSdzICd3aW5kb3cnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRXaW5kb3coKSB7XG4gICAgLy8gYHdpbmRvd2AgaXMgbm90IGFsd2F5cyBhdmFpbGFibGUsIGUuZy4gaW4gUmVhY3ROYXRpdmUgYW5kIFdlYldvcmtlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiBudWxsO1xufVxuXG4vKiogVGhlIFBsYXRmb3JtJ3MgJ2RvY3VtZW50JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovIGZ1bmN0aW9uIGdldERvY3VtZW50KCkge1xuICAgIC8vIGBkb2N1bWVudGAgaXMgbm90IGFsd2F5cyBhdmFpbGFibGUsIGUuZy4gaW4gUmVhY3ROYXRpdmUgYW5kIFdlYldvcmtlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBkb2N1bWVudCA/IGRvY3VtZW50IDogbnVsbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1NlcmlhbGl6ZXIoZSkge1xuICAgIHJldHVybiBuZXcgSnNvblByb3RvU2VyaWFsaXplcihlLCAvKiB1c2VQcm90bzNKc29uPSAqLyAhMCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXG4gKlxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhICsvLSA1MCUgXCJqaXR0ZXJcIiB0aGF0IGlzIGNhbGN1bGF0ZWQgYW5kIGFkZGVkIHRvIHRoZVxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcbiAqIGRlbGF5cyBjYXVzaW5nIHNwaWtlcyBvZiBsb2FkIHRvIHRoZSBiYWNrZW5kLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfRXhwb25lbnRpYWxCYWNrb2ZmIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgQXN5bmNRdWV1ZSB0byBydW4gYmFja29mZiBvcGVyYXRpb25zIG9uLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCB0byB1c2Ugd2hlbiBzY2hlZHVsaW5nIGJhY2tvZmYgb3BlcmF0aW9ucyBvbiB0aGUgQXN5bmNRdWV1ZS5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgaW5pdGlhbCBkZWxheSAodXNlZCBhcyB0aGUgYmFzZSBkZWxheSBvbiB0aGUgZmlyc3QgcmV0cnkgYXR0ZW1wdCkuXG4gICAgICogTm90ZSB0aGF0IGppdHRlciB3aWxsIHN0aWxsIGJlIGFwcGxpZWQsIHNvIHRoZSBhY3R1YWwgZGVsYXkgY291bGQgYmUgYXNcbiAgICAgKiBsaXR0bGUgYXMgMC41KmluaXRpYWxEZWxheU1zLlxuICAgICAqL1xuICAgIG4gPSAxZTNcbiAgICAvKipcbiAgICAgKiBUaGUgbXVsdGlwbGllciB0byB1c2UgdG8gZGV0ZXJtaW5lIHRoZSBleHRlbmRlZCBiYXNlIGRlbGF5IGFmdGVyIGVhY2hcbiAgICAgKiBhdHRlbXB0LlxuICAgICAqLyAsIHIgPSAxLjVcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBiYXNlIGRlbGF5IGFmdGVyIHdoaWNoIG5vIGZ1cnRoZXIgYmFja29mZiBpcyBwZXJmb3JtZWQuXG4gICAgICogTm90ZSB0aGF0IGppdHRlciB3aWxsIHN0aWxsIGJlIGFwcGxpZWQsIHNvIHRoZSBhY3R1YWwgZGVsYXkgY291bGQgYmUgYXNcbiAgICAgKiBtdWNoIGFzIDEuNSptYXhEZWxheU1zLlxuICAgICAqLyAsIGkgPSA2ZTQpIHtcbiAgICAgICAgdGhpcy5faSA9IGUsIHRoaXMudGltZXJJZCA9IHQsIHRoaXMueG8gPSBuLCB0aGlzLk9vID0gciwgdGhpcy5ObyA9IGksIHRoaXMuQm8gPSAwLCBcbiAgICAgICAgdGhpcy5MbyA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGxhc3QgYmFja29mZiBhdHRlbXB0LCBhcyBlcG9jaCBtaWxsaXNlY29uZHMuICovXG4gICAgICAgIHRoaXMua28gPSBEYXRlLm5vdygpLCB0aGlzLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheS5cbiAgICAgKlxuICAgICAqIFRoZSB2ZXJ5IG5leHQgYmFja29mZkFuZFdhaXQoKSB3aWxsIGhhdmUgbm8gZGVsYXkuIElmIGl0IGlzIGNhbGxlZCBhZ2FpblxuICAgICAqIChpLmUuIGR1ZSB0byBhbiBlcnJvciksIGluaXRpYWxEZWxheU1zIChwbHVzIGppdHRlcikgd2lsbCBiZSB1c2VkLCBhbmRcbiAgICAgKiBzdWJzZXF1ZW50IG9uZXMgd2lsbCBpbmNyZWFzZSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tvZmZGYWN0b3IuXG4gICAgICovICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLkJvID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5IHRvIHRoZSBtYXhpbXVtIGRlbGF5IChlLmcuIGZvciB1c2UgYWZ0ZXIgYVxuICAgICAqIFJFU09VUkNFX0VYSEFVU1RFRCBlcnJvcikuXG4gICAgICovICAgIHFvKCkge1xuICAgICAgICB0aGlzLkJvID0gdGhpcy5ObztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBjdXJyZW50RGVsYXlNcywgYW5kIGluY3JlYXNlcyB0aGVcbiAgICAgKiBkZWxheSBmb3IgYW55IHN1YnNlcXVlbnQgYXR0ZW1wdHMuIElmIHRoZXJlIHdhcyBhIHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb25cbiAgICAgKiBhbHJlYWR5LCBpdCB3aWxsIGJlIGNhbmNlbGVkLlxuICAgICAqLyAgICBRbyhlKSB7XG4gICAgICAgIC8vIENhbmNlbCBhbnkgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvbi5cbiAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICAgICAgLy8gRmlyc3Qgc2NoZWR1bGUgdXNpbmcgdGhlIGN1cnJlbnQgYmFzZSAod2hpY2ggbWF5IGJlIDAgYW5kIHNob3VsZCBiZVxuICAgICAgICAvLyBob25vcmVkIGFzIHN1Y2gpLlxuICAgICAgICBjb25zdCB0ID0gTWF0aC5mbG9vcih0aGlzLkJvICsgdGhpcy5LbygpKSwgbiA9IE1hdGgubWF4KDAsIERhdGUubm93KCkgLSB0aGlzLmtvKSwgciA9IE1hdGgubWF4KDAsIHQgLSBuKTtcbiAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBsYXN0QXR0ZW1wdFRpbWUgYmVpbmcgaW4gdGhlIGZ1dHVyZSBkdWUgdG8gYSBjbG9jayBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgciA+IDAgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiRXhwb25lbnRpYWxCYWNrb2ZmXCIsIGBCYWNraW5nIG9mZiBmb3IgJHtyfSBtcyAoYmFzZSBkZWxheTogJHt0aGlzLkJvfSBtcywgZGVsYXkgd2l0aCBqaXR0ZXI6ICR7dH0gbXMsIGxhc3QgYXR0ZW1wdDogJHtufSBtcyBhZ28pYCksIFxuICAgICAgICB0aGlzLkxvID0gdGhpcy5faS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnRpbWVySWQsIHIsICgoKSA9PiAodGhpcy5rbyA9IERhdGUubm93KCksIFxuICAgICAgICBlKCkpKSksIFxuICAgICAgICAvLyBBcHBseSBiYWNrb2ZmIGZhY3RvciB0byBkZXRlcm1pbmUgbmV4dCBkZWxheSBhbmQgZW5zdXJlIGl0IGlzIHdpdGhpblxuICAgICAgICAvLyBib3VuZHMuXG4gICAgICAgIHRoaXMuQm8gKj0gdGhpcy5PbywgdGhpcy5CbyA8IHRoaXMueG8gJiYgKHRoaXMuQm8gPSB0aGlzLnhvKSwgdGhpcy5CbyA+IHRoaXMuTm8gJiYgKHRoaXMuQm8gPSB0aGlzLk5vKTtcbiAgICB9XG4gICAgJG8oKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuTG8gJiYgKHRoaXMuTG8uc2tpcERlbGF5KCksIHRoaXMuTG8gPSBudWxsKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLkxvICYmICh0aGlzLkxvLmNhbmNlbCgpLCB0aGlzLkxvID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHZhbHVlIGluIHRoZSByYW5nZSBbLWN1cnJlbnRCYXNlTXMvMiwgY3VycmVudEJhc2VNcy8yXSAqLyAgICBLbygpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpIC0gLjUpICogdGhpcy5CbztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN0cmVhbWluZyBSUENcbiAqIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZC4gSXQncyBidWlsdCBvbiB0b3Agb2YgdGhlIGNvbm5lY3Rpb25zIG93biBzdXBwb3J0XG4gKiBmb3Igc3RyZWFtaW5nIFJQQ3MsIGFuZCBhZGRzIHNldmVyYWwgY3JpdGljYWwgZmVhdHVyZXMgZm9yIG91ciBjbGllbnRzOlxuICpcbiAqICAgLSBFeHBvbmVudGlhbCBiYWNrb2ZmIG9uIGZhaWx1cmVcbiAqICAgLSBBdXRoZW50aWNhdGlvbiB2aWEgQ3JlZGVudGlhbHNQcm92aWRlclxuICogICAtIERpc3BhdGNoaW5nIGFsbCBjYWxsYmFja3MgaW50byB0aGUgc2hhcmVkIHdvcmtlciBxdWV1ZVxuICogICAtIENsb3NpbmcgaWRsZSBzdHJlYW1zIGFmdGVyIDYwIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICpcbiAqIFN1YmNsYXNzZXMgb2YgUGVyc2lzdGVudFN0cmVhbSBpbXBsZW1lbnQgc2VyaWFsaXphdGlvbiBvZiBtb2RlbHMgdG8gYW5kXG4gKiBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm90b2NvbCBidWZmZXJzIGZvciBhIHNwZWNpZmljXG4gKiBzdHJlYW1pbmcgUlBDLlxuICpcbiAqICMjIFN0YXJ0aW5nIGFuZCBTdG9wcGluZ1xuICpcbiAqIFN0cmVhbWluZyBSUENzIGFyZSBzdGF0ZWZ1bCBhbmQgbmVlZCB0byBiZSBzdGFydCgpZWQgYmVmb3JlIG1lc3NhZ2VzIGNhblxuICogYmUgc2VudCBhbmQgcmVjZWl2ZWQuIFRoZSBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgb25PcGVuKCkgZnVuY3Rpb25cbiAqIG9mIHRoZSBsaXN0ZW5lciBvbmNlIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IHJlcXVlc3RzLlxuICpcbiAqIFNob3VsZCBhIHN0YXJ0KCkgZmFpbCwgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIHJlZ2lzdGVyZWQgb25DbG9zZSgpXG4gKiBsaXN0ZW5lciB3aXRoIGEgRmlyZXN0b3JlRXJyb3IgaW5kaWNhdGluZyB3aGF0IHdlbnQgd3JvbmcuXG4gKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBzdGFydGVkIGFuZCBzdG9wcGVkIHJlcGVhdGVkbHkuXG4gKlxuICogR2VuZXJpYyB0eXBlczpcbiAqICBTZW5kVHlwZTogVGhlIHR5cGUgb2YgdGhlIG91dGdvaW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgUmVjZWl2ZVR5cGU6IFRoZSB0eXBlIG9mIHRoZSBpbmNvbWluZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIExpc3RlbmVyVHlwZTogVGhlIHR5cGUgb2YgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBjYWxsYmFja3NcbiAqL1xuY2xhc3MgX19QUklWQVRFX1BlcnNpc3RlbnRTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMsIG8sIF8pIHtcbiAgICAgICAgdGhpcy5faSA9IGUsIHRoaXMuVW8gPSBuLCB0aGlzLldvID0gciwgdGhpcy5jb25uZWN0aW9uID0gaSwgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlciA9IHMsIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlciA9IG8sIHRoaXMubGlzdGVuZXIgPSBfLCB0aGlzLnN0YXRlID0gMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjbG9zZSBjb3VudCB0aGF0J3MgaW5jcmVtZW50ZWQgZXZlcnkgdGltZSB0aGUgc3RyZWFtIGlzIGNsb3NlZDsgdXNlZCBieVxuICAgICAgICAgKiBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKCkgdG8gaW52YWxpZGF0ZSBjYWxsYmFja3MgdGhhdCBoYXBwZW4gYWZ0ZXJcbiAgICAgICAgICogY2xvc2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkdvID0gMCwgdGhpcy56byA9IG51bGwsIHRoaXMuam8gPSBudWxsLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuSG8gPSBuZXcgX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZihlLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcbiAgICAgKiBpbmRpY2F0ZXMgdGhlIHN0cmVhbSBpcyBvcGVuIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcgKHdoaWNoXG4gICAgICogZW5jb21wYXNzZXMgcmVzcGVjdGluZyBiYWNrb2ZmLCBnZXR0aW5nIGF1dGggdG9rZW5zLCBhbmQgc3RhcnRpbmcgdGhlXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcbiAgICAgKiBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgSm8oKSB7XG4gICAgICAgIHJldHVybiAxIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZyAqLyA9PT0gdGhpcy5zdGF0ZSB8fCA1IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5CYWNrb2ZmICovID09PSB0aGlzLnN0YXRlIHx8IHRoaXMuWW8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB1bmRlcmx5aW5nIFJQQyBpcyBvcGVuICh0aGUgb25PcGVuKCkgbGlzdGVuZXIgaGFzIGJlZW5cbiAgICAgKiBjYWxsZWQpIGFuZCB0aGUgc3RyZWFtIGlzIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgWW8oKSB7XG4gICAgICAgIHJldHVybiAyIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuICovID09PSB0aGlzLnN0YXRlIHx8IDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8gPT09IHRoaXMuc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgUlBDLiBPbmx5IGFsbG93ZWQgaWYgaXNTdGFydGVkKCkgcmV0dXJucyBmYWxzZS4gVGhlIHN0cmVhbSBpc1xuICAgICAqIG5vdCBpbW1lZGlhdGVseSByZWFkeSBmb3IgdXNlOiBvbk9wZW4oKSB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgUlBDIGlzXG4gICAgICogcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLCBhdCB3aGljaCBwb2ludCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqXG4gICAgICogV2hlbiBzdGFydCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gIT09IHRoaXMuc3RhdGUgPyB0aGlzLmF1dGgoKSA6IHRoaXMuWm8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIFJQQy4gVGhpcyBjYWxsIGlzIGlkZW1wb3RlbnQgYW5kIGFsbG93ZWQgcmVnYXJkbGVzcyBvZiB0aGVcbiAgICAgKiBjdXJyZW50IGlzU3RhcnRlZCgpIHN0YXRlLlxuICAgICAqXG4gICAgICogV2hlbiBzdG9wIHJldHVybnMsIGlzU3RhcnRlZCgpIGFuZCBpc09wZW4oKSB3aWxsIGJvdGggcmV0dXJuIGZhbHNlLlxuICAgICAqLyAgICBhc3luYyBzdG9wKCkge1xuICAgICAgICB0aGlzLkpvKCkgJiYgYXdhaXQgdGhpcy5jbG9zZSgwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWZ0ZXIgYW4gZXJyb3IgdGhlIHN0cmVhbSB3aWxsIHVzdWFsbHkgYmFjayBvZmYgb24gdGhlIG5leHQgYXR0ZW1wdCB0b1xuICAgICAqIHN0YXJ0IGl0LiBJZiB0aGUgZXJyb3Igd2FycmFudHMgYW4gaW1tZWRpYXRlIHJlc3RhcnQgb2YgdGhlIHN0cmVhbSwgdGhlXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxuICAgICAqXG4gICAgICogRWFjaCBlcnJvciB3aWxsIGNhbGwgdGhlIG9uQ2xvc2UoKSBsaXN0ZW5lci4gVGhhdCBmdW5jdGlvbiBjYW4gZGVjaWRlIHRvXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxuICAgICAqLyAgICBYbygpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8gLCB0aGlzLkhvLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoaXMgc3RyZWFtIGFzIGlkbGUuIElmIG5vIGZ1cnRoZXIgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIG9uIHRoZVxuICAgICAqIHN0cmVhbSBmb3Igb25lIG1pbnV0ZSwgdGhlIHN0cmVhbSB3aWxsIGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRzZWxmIGFuZFxuICAgICAqIG5vdGlmeSB0aGUgc3RyZWFtJ3Mgb25DbG9zZSgpIGhhbmRsZXIgd2l0aCBTdGF0dXMuT0suIFRoZSBzdHJlYW0gd2lsbCB0aGVuXG4gICAgICogYmUgaW4gYSAhaXNTdGFydGVkKCkgc3RhdGUsIHJlcXVpcmluZyB0aGUgY2FsbGVyIHRvIHN0YXJ0IHRoZSBzdHJlYW0gYWdhaW5cbiAgICAgKiBiZWZvcmUgZnVydGhlciB1c2UuXG4gICAgICpcbiAgICAgKiBPbmx5IHN0cmVhbXMgdGhhdCBhcmUgaW4gc3RhdGUgJ09wZW4nIGNhbiBiZSBtYXJrZWQgaWRsZSwgYXMgYWxsIG90aGVyXG4gICAgICogc3RhdGVzIGltcGx5IHBlbmRpbmcgbmV0d29yayBvcGVyYXRpb25zLlxuICAgICAqLyAgICBlXygpIHtcbiAgICAgICAgLy8gU3RhcnRzIHRoZSBpZGxlIHRpbWUgaWYgd2UgYXJlIGluIHN0YXRlICdPcGVuJyBhbmQgYXJlIG5vdCB5ZXQgYWxyZWFkeVxuICAgICAgICAvLyBydW5uaW5nIGEgdGltZXIgKGluIHdoaWNoIGNhc2UgdGhlIHByZXZpb3VzIGlkbGUgdGltZW91dCBzdGlsbCBhcHBsaWVzKS5cbiAgICAgICAgdGhpcy5ZbygpICYmIG51bGwgPT09IHRoaXMuem8gJiYgKHRoaXMuem8gPSB0aGlzLl9pLmVucXVldWVBZnRlckRlbGF5KHRoaXMuVW8sIDZlNCwgKCgpID0+IHRoaXMudF8oKSkpKTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uICovICAgIG5fKGUpIHtcbiAgICAgICAgdGhpcy5yXygpLCB0aGlzLnN0cmVhbS5zZW5kKGUpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIGJ5IHRoZSBpZGxlIHRpbWVyIHdoZW4gdGhlIHN0cmVhbSBzaG91bGQgY2xvc2UgZHVlIHRvIGluYWN0aXZpdHkuICovICAgIGFzeW5jIHRfKCkge1xuICAgICAgICBpZiAodGhpcy5ZbygpKSBcbiAgICAgICAgLy8gV2hlbiB0aW1pbmcgb3V0IGFuIGlkbGUgc3RyZWFtIHRoZXJlJ3Mgbm8gcmVhc29uIHRvIGZvcmNlIHRoZSBzdHJlYW0gaW50byBiYWNrb2ZmIHdoZW5cbiAgICAgICAgLy8gaXQgcmVzdGFydHMgc28gc2V0IHRoZSBzdHJlYW0gc3RhdGUgdG8gSW5pdGlhbCBpbnN0ZWFkIG9mIEVycm9yLlxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqIE1hcmtzIHRoZSBzdHJlYW0gYXMgYWN0aXZlIGFnYWluLiAqLyAgICByXygpIHtcbiAgICAgICAgdGhpcy56byAmJiAodGhpcy56by5jYW5jZWwoKSwgdGhpcy56byA9IG51bGwpO1xuICAgIH1cbiAgICAvKiogQ2FuY2VscyB0aGUgaGVhbHRoIGNoZWNrIGRlbGF5ZWQgb3BlcmF0aW9uLiAqLyAgICBpXygpIHtcbiAgICAgICAgdGhpcy5qbyAmJiAodGhpcy5qby5jYW5jZWwoKSwgdGhpcy5qbyA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIHN0cmVhbSBhbmQgY2xlYW5zIHVwIGFzIG5lY2Vzc2FyeTpcbiAgICAgKlxuICAgICAqICogY2xvc2VzIHRoZSB1bmRlcmx5aW5nIEdSUEMgc3RyZWFtO1xuICAgICAqICogY2FsbHMgdGhlIG9uQ2xvc2UgaGFuZGxlciB3aXRoIHRoZSBnaXZlbiAnZXJyb3InO1xuICAgICAqICogc2V0cyBpbnRlcm5hbCBzdHJlYW0gc3RhdGUgdG8gJ2ZpbmFsU3RhdGUnO1xuICAgICAqICogYWRqdXN0cyB0aGUgYmFja29mZiB0aW1lciBiYXNlZCBvbiB0aGUgZXJyb3JcbiAgICAgKlxuICAgICAqIEEgbmV3IHN0cmVhbSBjYW4gYmUgb3BlbmVkIGJ5IGNhbGxpbmcgc3RhcnQoKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaW5hbFN0YXRlIC0gdGhlIGludGVuZGVkIHN0YXRlIG9mIHRoZSBzdHJlYW0gYWZ0ZXIgY2xvc2luZy5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSB0aGUgZXJyb3IgdGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCB3aXRoLlxuICAgICAqLyAgICBhc3luYyBjbG9zZShlLCB0KSB7XG4gICAgICAgIC8vIENhbmNlbCBhbnkgb3V0c3RhbmRpbmcgdGltZXJzICh0aGV5J3JlIGd1YXJhbnRlZWQgbm90IHRvIGV4ZWN1dGUpLlxuICAgICAgICB0aGlzLnJfKCksIHRoaXMuaV8oKSwgdGhpcy5Iby5jYW5jZWwoKSwgXG4gICAgICAgIC8vIEludmFsaWRhdGVzIGFueSBzdHJlYW0tcmVsYXRlZCBjYWxsYmFja3MgKGUuZy4gZnJvbSBhdXRoIG9yIHRoZVxuICAgICAgICAvLyB1bmRlcmx5aW5nIHN0cmVhbSksIGd1YXJhbnRlZWluZyB0aGV5IHdvbid0IGV4ZWN1dGUuXG4gICAgICAgIHRoaXMuR28rKywgNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gIT09IGUgPyBcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxuICAgICAgICB0aGlzLkhvLnJlc2V0KCkgOiB0ICYmIHQuY29kZSA9PT0gRC5SRVNPVVJDRV9FWEhBVVNURUQgPyAoXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IuIChQcm9iYWJseSBlaXRoZXIgJ3F1b3RhIGV4Y2VlZGVkJyBvciAnbWF4IHF1ZXVlIGxlbmd0aCByZWFjaGVkJy4pXG4gICAgICAgIF9fUFJJVkFURV9sb2dFcnJvcih0LnRvU3RyaW5nKCkpLCBfX1BSSVZBVEVfbG9nRXJyb3IoXCJVc2luZyBtYXhpbXVtIGJhY2tvZmYgZGVsYXkgdG8gcHJldmVudCBvdmVybG9hZGluZyB0aGUgYmFja2VuZC5cIiksIFxuICAgICAgICB0aGlzLkhvLnFvKCkpIDogdCAmJiB0LmNvZGUgPT09IEQuVU5BVVRIRU5USUNBVEVEICYmIDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8gIT09IHRoaXMuc3RhdGUgJiYgKFxuICAgICAgICAvLyBcInVuYXV0aGVudGljYXRlZFwiIGVycm9yIG1lYW5zIHRoZSB0b2tlbiB3YXMgcmVqZWN0ZWQuIFRoaXMgc2hvdWxkIHJhcmVseVxuICAgICAgICAvLyBoYXBwZW4gc2luY2UgYm90aCBBdXRoIGFuZCBBcHBDaGVjayBlbnN1cmUgYSBzdWZmaWNpZW50IFRUTCB3aGVuIHdlXG4gICAgICAgIC8vIHJlcXVlc3QgYSB0b2tlbi4gSWYgYSB1c2VyIG1hbnVhbGx5IHJlc2V0cyB0aGVpciBzeXN0ZW0gY2xvY2sgdGhpcyBjYW5cbiAgICAgICAgLy8gZmFpbCwgaG93ZXZlci4gSW4gdGhpcyBjYXNlLCB3ZSBzaG91bGQgZ2V0IGEgQ29kZS5VTkFVVEhFTlRJQ0FURUQgZXJyb3JcbiAgICAgICAgLy8gYmVmb3JlIHdlIHJlY2VpdmVkIHRoZSBmaXJzdCBtZXNzYWdlIGFuZCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgdGhlIHRva2VuXG4gICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHdlIGZldGNoIGEgbmV3IHRva2VuLlxuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKSksIFxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgdW5kZXJseWluZyBzdHJlYW0gYmVjYXVzZSB3ZSBhcmUgbm8gbG9uZ2VyIGludGVyZXN0ZWQgaW4gZXZlbnRzLlxuICAgICAgICBudWxsICE9PSB0aGlzLnN0cmVhbSAmJiAodGhpcy5zXygpLCB0aGlzLnN0cmVhbS5jbG9zZSgpLCB0aGlzLnN0cmVhbSA9IG51bGwpLCBcbiAgICAgICAgLy8gVGhpcyBzdGF0ZSBtdXN0IGJlIGFzc2lnbmVkIGJlZm9yZSBjYWxsaW5nIG9uQ2xvc2UoKSB0byBhbGxvdyB0aGUgY2FsbGJhY2sgdG9cbiAgICAgICAgLy8gaW5oaWJpdCBiYWNrb2ZmIG9yIG90aGVyd2lzZSBtYW5pcHVsYXRlIHRoZSBzdGF0ZSBpbiBpdHMgbm9uLXN0YXJ0ZWQgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhdGUgPSBlLCBcbiAgICAgICAgLy8gTm90aWZ5IHRoZSBsaXN0ZW5lciB0aGF0IHRoZSBzdHJlYW0gY2xvc2VkLlxuICAgICAgICBhd2FpdCB0aGlzLmxpc3RlbmVyLkVvKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgb3ZlcnJpZGRlbiB0byBwZXJmb3JtIGFkZGl0aW9uYWwgY2xlYW51cCBiZWZvcmUgdGhlIHN0cmVhbSBpcyBjbG9zZWQuXG4gICAgICogQ2FsbGluZyBzdXBlci50ZWFyRG93bigpIGlzIG5vdCByZXF1aXJlZC5cbiAgICAgKi8gICAgc18oKSB7fVxuICAgIGF1dGgoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAxIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZyAqLztcbiAgICAgICAgY29uc3QgZSA9IHRoaXMub18odGhpcy5HbyksIHQgPSB0aGlzLkdvO1xuICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWQsIGJ1dCBzZWUgVE9ETyBiZWxvdy5cbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW2UsIG5dKSA9PiB7XG4gICAgICAgICAgICAvLyBTdHJlYW0gY2FuIGJlIHN0b3BwZWQgd2hpbGUgd2FpdGluZyBmb3IgYXV0aGVudGljYXRpb24uXG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IFdlIHJlYWxseSBzaG91bGQganVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZFxuICAgICAgICAgICAgLy8gYW5kIGxldCB0aGlzIGRpc3BhdGNoIG9udG8gdGhlIHF1ZXVlLCBidXQgdGhhdCBvcGVuZWQgYSBzcGVjIHRlc3QgY2FuXG4gICAgICAgICAgICAvLyBvZiB3b3JtcyB0aGF0IEkgZG9uJ3Qgd2FudCB0byBkZWFsIHdpdGggaW4gdGhpcyBQUi5cbiAgICAgICAgICAgIHRoaXMuR28gPT09IHQgJiYgXG4gICAgICAgICAgICAvLyBOb3JtYWxseSB3ZSdkIGhhdmUgdG8gc2NoZWR1bGUgdGhlIGNhbGxiYWNrIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhlIGZvbGxvd2luZyBjYWxscyBhcmUgc2FmZSB0byBiZSBjYWxsZWQgb3V0c2lkZSB0aGVcbiAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgc2luY2UgdGhleSBkb24ndCBjaGFpbiBhc3luY2hyb25vdXMgY2FsbHNcbiAgICAgICAgICAgIHRoaXMuX18oZSwgbik7XG4gICAgICAgIH0pLCAodCA9PiB7XG4gICAgICAgICAgICBlKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBGaXJlc3RvcmVFcnJvcihELlVOS05PV04sIFwiRmV0Y2hpbmcgYXV0aCB0b2tlbiBmYWlsZWQ6IFwiICsgdC5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hXyhlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBfXyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9fKHRoaXMuR28pO1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHRoaXMudV8oZSwgdCksIHRoaXMuc3RyZWFtLklvKCgoKSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiAodGhpcy5zdGF0ZSA9IDIgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLk9wZW4gKi8gLCB0aGlzLmpvID0gdGhpcy5faS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLldvLCAxZTQsICgoKSA9PiAodGhpcy5ZbygpICYmICh0aGlzLnN0YXRlID0gMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSksIHRoaXMubGlzdGVuZXIuSW8oKSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5FbygoZSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLmFfKGUpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0ub25NZXNzYWdlKChlID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMub25NZXNzYWdlKGUpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgWm8oKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSA1IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5CYWNrb2ZmICovICwgdGhpcy5Iby5RbygoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8gLCB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdHNcbiAgICBhXyhlKSB7XG4gICAgICAgIC8vIEluIHRoZW9yeSB0aGUgc3RyZWFtIGNvdWxkIGNsb3NlIGNsZWFubHksIGhvd2V2ZXIsIGluIG91ciBjdXJyZW50IG1vZGVsXG4gICAgICAgIC8vIHdlIG5ldmVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWNhdXNlIGlmIHdlIHN0b3AgYSBzdHJlYW0gb3Vyc2VsdmVzLFxuICAgICAgICAvLyB0aGlzIGNhbGxiYWNrIHdpbGwgbmV2ZXIgYmUgY2FsbGVkLiBUbyBwcmV2ZW50IGNhc2VzIHdoZXJlIHdlIHJldHJ5XG4gICAgICAgIC8vIHdpdGhvdXQgYSBiYWNrb2ZmIGFjY2lkZW50YWxseSwgd2Ugc2V0IHRoZSBzdHJlYW0gdG8gZXJyb3IgaW4gYWxsIGNhc2VzLlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHtlfWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIFxuICAgICAgICB0aGlzLmNsb3NlKDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBcImRpc3BhdGNoZXJcIiBmdW5jdGlvbiB0aGF0IGRpc3BhdGNoZXMgb3BlcmF0aW9ucyBvbnRvIHRoZVxuICAgICAqIEFzeW5jUXVldWUgYnV0IG9ubHkgcnVucyB0aGVtIGlmIGNsb3NlQ291bnQgcmVtYWlucyB1bmNoYW5nZWQuIFRoaXMgYWxsb3dzXG4gICAgICogdXMgdG8gdHVybiBhdXRoIC8gc3RyZWFtIGNhbGxiYWNrcyBpbnRvIG5vLW9wcyBpZiB0aGUgc3RyZWFtIGlzIGNsb3NlZCAvXG4gICAgICogcmUtb3BlbmVkLCBldGMuXG4gICAgICovICAgIG9fKGUpIHtcbiAgICAgICAgcmV0dXJuIHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5faS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLkdvID09PSBlID8gdCgpIDogKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlBlcnNpc3RlbnRTdHJlYW1cIiwgXCJzdHJlYW0gY2FsbGJhY2sgc2tpcHBlZCBieSBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyLlwiKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgTGlzdGVuIFJQQy5cbiAqXG4gKiBPbmNlIHRoZSBMaXN0ZW4gc3RyZWFtIGhhcyBjYWxsZWQgdGhlIG9uT3BlbigpIGxpc3RlbmVyLCBhbnkgbnVtYmVyIG9mXG4gKiBsaXN0ZW4oKSBhbmQgdW5saXN0ZW4oKSBjYWxscyBjYW4gYmUgbWFkZSB0byBjb250cm9sIHdoYXQgY2hhbmdlcyB3aWxsIGJlXG4gKiBzZW50IGZyb20gdGhlIHNlcnZlciBmb3IgTGlzdGVuUmVzcG9uc2VzLlxuICovIGNsYXNzIF9fUFJJVkFURV9QZXJzaXN0ZW50TGlzdGVuU3RyZWFtIGV4dGVuZHMgX19QUklWQVRFX1BlcnNpc3RlbnRTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJsaXN0ZW5fc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFRpbWVySWQuTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIFRpbWVySWQuTGlzdGVuU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBUaW1lcklkLkhlYWx0aENoZWNrVGltZW91dCAqLyAsIHQsIG4sIHIsIHMpLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gaTtcbiAgICB9XG4gICAgdV8oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLk1vKFwiTGlzdGVuXCIsIGUsIHQpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoZSkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMuSG8ucmVzZXQoKTtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tV2F0Y2hDaGFuZ2UodGhpcy5zZXJpYWxpemVyLCBlKSwgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV92ZXJzaW9uRnJvbUxpc3RlblJlc3BvbnNlKGUpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcbiAgICAgICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxuICAgICAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cbiAgICAgICAgICAgIGlmICghKFwidGFyZ2V0Q2hhbmdlXCIgaW4gZSkpIHJldHVybiBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gdC50YXJnZXRJZHMgJiYgdC50YXJnZXRJZHMubGVuZ3RoID8gU25hcHNob3RWZXJzaW9uLm1pbigpIDogdC5yZWFkVGltZSA/IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LnJlYWRUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKTtcbiAgICAgICAgfShlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY18odCwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIGxfKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgICB0LmRhdGFiYXNlID0gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKHRoaXMuc2VyaWFsaXplciksIHQuYWRkVGFyZ2V0ID0gZnVuY3Rpb24gX19QUklWQVRFX3RvVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgY29uc3QgciA9IHQudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKG4gPSBfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldChyKSA/IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IF9fUFJJVkFURV90b0RvY3VtZW50c1RhcmdldChlLCByKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogX19QUklWQVRFX3RvUXVlcnlUYXJnZXQoZSwgcilcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSB0LnRhcmdldElkLCB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBuLnJlc3VtZVRva2VuID0gX19QUklWQVRFX3RvQnl0ZXMoZSwgdC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV90b0ludDMyUHJvdG8oZSwgdC5leHBlY3RlZENvdW50KTtcbiAgICAgICAgICAgICAgICBudWxsICE9PSByICYmIChuLmV4cGVjdGVkQ291bnQgPSByKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodC5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBDb25zaWRlciByZW1vdmluZyBhYm92ZSBjaGVjayBiZWNhdXNlIGl0IGlzIG1vc3QgbGlrZWx5IHRydWUuXG4gICAgICAgICAgICAgICAgLy8gUmlnaHQgbm93LCBtYW55IHRlc3RzIGRlcGVuZCBvbiB0aGlzIGJlaGF2aW91ciB0aG91Z2ggKGxlYXZpbmcgbWluKCkgb3V0XG4gICAgICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICAgICAgbi5yZWFkVGltZSA9IHRvVGltZXN0YW1wKGUsIHQuc25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQuZXhwZWN0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gciAmJiAobi5leHBlY3RlZENvdW50ID0gcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3RvTGlzdGVuUmVxdWVzdExhYmVscyh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICBuICYmICh0LmxhYmVscyA9IG4pLCB0aGlzLm5fKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiBnaXZlbiB0YXJnZXRJZC5cbiAgICAgKi8gICAgaF8oZSkge1xuICAgICAgICBjb25zdCB0ID0ge307XG4gICAgICAgIHQuZGF0YWJhc2UgPSBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQodGhpcy5zZXJpYWxpemVyKSwgdC5yZW1vdmVUYXJnZXQgPSBlLCBcbiAgICAgICAgdGhpcy5uXyh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXG4gKlxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XG4gKiByZXF1ZXN0LlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cbiAqXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcbiAqLyBjbGFzcyBfX1BSSVZBVEVfUGVyc2lzdGVudFdyaXRlU3RyZWFtIGV4dGVuZHMgX19QUklWQVRFX1BlcnNpc3RlbnRTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJ3cml0ZV9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogVGltZXJJZC5Xcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFRpbWVySWQuV3JpdGVTdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIFRpbWVySWQuSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgdCwgbiwgciwgcyksIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBpLCB0aGlzLlBfID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGV0aGVyIG9yIG5vdCBhIGhhbmRzaGFrZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZXhjaGFuZ2VkIGFuZFxuICAgICAqIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IG11dGF0aW9ucy5cbiAgICAgKi8gICAgZ2V0IElfKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5QXztcbiAgICB9XG4gICAgLy8gT3ZlcnJpZGUgb2YgUGVyc2lzdGVudFN0cmVhbS5zdGFydFxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLlBfID0gITEsIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdm9pZCAwLCBzdXBlci5zdGFydCgpO1xuICAgIH1cbiAgICBzXygpIHtcbiAgICAgICAgdGhpcy5QXyAmJiB0aGlzLmRfKFtdKTtcbiAgICB9XG4gICAgdV8oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLk1vKFwiV3JpdGVcIiwgZSwgdCk7XG4gICAgfVxuICAgIG9uTWVzc2FnZShlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIWUuc3RyZWFtVG9rZW4pLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IGUuc3RyZWFtVG9rZW4sIHRoaXMuUF8pIHtcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCBmaXJzdCB3cml0ZSByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHksXG4gICAgICAgICAgICAvLyBOb3RlLCB0aGF0IHdlIGNvdWxkIGNvbnNpZGVyIGEgc3VjY2Vzc2Z1bCBoYW5kc2hha2UgaGVhbHRoeSwgaG93ZXZlcixcbiAgICAgICAgICAgIC8vIHRoZSB3cml0ZSBpdHNlbGYgbWlnaHQgYmUgY2F1c2luZyBhbiBlcnJvciB3ZSB3YW50IHRvIGJhY2sgb2ZmIGZyb20uXG4gICAgICAgICAgICB0aGlzLkhvLnJlc2V0KCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21Xcml0ZVJlc3VsdHMoZS53cml0ZVJlc3VsdHMsIGUuY29tbWl0VGltZSksIG4gPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS5jb21taXRUaW1lKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLlRfKG4sIHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBmaXJzdCByZXNwb25zZSBpcyBhbHdheXMgdGhlIGhhbmRzaGFrZSByZXNwb25zZVxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoIWUud3JpdGVSZXN1bHRzIHx8IDAgPT09IGUud3JpdGVSZXN1bHRzLmxlbmd0aCksIHRoaXMuUF8gPSAhMCwgXG4gICAgICAgIHRoaXMubGlzdGVuZXIuRV8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYW4gaW5pdGlhbCBzdHJlYW1Ub2tlbiB0byB0aGUgc2VydmVyLCBwZXJmb3JtaW5nIHRoZSBoYW5kc2hha2VcbiAgICAgKiByZXF1aXJlZCB0byBtYWtlIHRoZSBTdHJlYW1pbmdXcml0ZSBSUEMgd29yay4gU3Vic2VxdWVudFxuICAgICAqIGNhbGxzIHNob3VsZCB3YWl0IHVudGlsIG9uSGFuZHNoYWtlQ29tcGxldGUgd2FzIGNhbGxlZC5cbiAgICAgKi8gICAgQV8oKSB7XG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogU3VwcG9ydCBzdHJlYW0gcmVzdW1wdGlvbi4gV2UgaW50ZW50aW9uYWxseSBkbyBub3Qgc2V0IHRoZVxuICAgICAgICAvLyBzdHJlYW0gdG9rZW4gb24gdGhlIGhhbmRzaGFrZSwgaWdub3JpbmcgYW55IHN0cmVhbSB0b2tlbiB3ZSBtaWdodCBoYXZlLlxuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQodGhpcy5zZXJpYWxpemVyKSwgdGhpcy5uXyhlKTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgZ3JvdXAgb2YgbXV0YXRpb25zIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZCB0byBhcHBseS4gKi8gICAgZF8oZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RyZWFtVG9rZW46IHRoaXMubGFzdFN0cmVhbVRva2VuLFxuICAgICAgICAgICAgd3JpdGVzOiBlLm1hcCgoZSA9PiB0b011dGF0aW9uKHRoaXMuc2VyaWFsaXplciwgZSkpKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm5fKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGF0YXN0b3JlIGFuZCBpdHMgcmVsYXRlZCBtZXRob2RzIGFyZSBhIHdyYXBwZXIgYXJvdW5kIHRoZSBleHRlcm5hbCBHb29nbGVcbiAqIENsb3VkIERhdGFzdG9yZSBncnBjIEFQSSwgd2hpY2ggcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRoYXQgaXMgbW9yZSBjb252ZW5pZW50XG4gKiBmb3IgdGhlIHJlc3Qgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlIHRvIGNvbnN1bWUuXG4gKi9cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgRGF0YXN0b3JlIHRoYXQgZXhwb3NlcyBhZGRpdGlvbmFsIHN0YXRlIGZvciBpbnRlcm5hbFxuICogY29uc3VtcHRpb24uXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9EYXRhc3RvcmVJbXBsIGV4dGVuZHMgY2xhc3MgRGF0YXN0b3JlIHt9IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gZSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gdCwgdGhpcy5jb25uZWN0aW9uID0gbiwgXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHIsIHRoaXMuUl8gPSAhMTtcbiAgICB9XG4gICAgVl8oKSB7XG4gICAgICAgIGlmICh0aGlzLlJfKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgYm8oZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5WXygpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbciwgaV0pID0+IHRoaXMuY29ubmVjdGlvbi5ibyhlLCB0LCBuLCByLCBpKSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSBlLm5hbWUgPyAoZS5jb2RlID09PSBELlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgZSkgOiBuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTktOT1dOLCBlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzIHdpdGggYXV0aCBhbmQgQXBwQ2hlY2sgdG9rZW5zLiAqLyAgICBGbyhlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlZfKCksIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmdldFRva2VuKCkgXSkudGhlbigoKFtpLCBzXSkgPT4gdGhpcy5jb25uZWN0aW9uLkZvKGUsIHQsIG4sIGksIHMsIHIpKSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgXCJGaXJlYmFzZUVycm9yXCIgPT09IGUubmFtZSA/IChlLmNvZGUgPT09IEQuVU5BVVRIRU5USUNBVEVEICYmICh0aGlzLmF1dGhDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCkpLCBlKSA6IG5ldyBGaXJlc3RvcmVFcnJvcihELlVOS05PV04sIGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLlJfID0gITA7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZXhwKTogTWFrZSBzdXJlIHRoZXJlIGlzIG9ubHkgb25lIERhdGFzdG9yZSBpbnN0YW5jZSBwZXJcbi8vIGZpcmVzdG9yZS1leHAgY2xpZW50LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2ludm9rZVJ1bkFnZ3JlZ2F0aW9uUXVlcnlScGMoZSwgdCwgbikge1xuICAgIHZhciByO1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCB7cmVxdWVzdDogcywgbV86IG99ID0gZnVuY3Rpb24gX19QUklWQVRFX3RvUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3QoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3RvUXVlcnlUYXJnZXQoZSwgdCksIGkgPSB7fSwgcyA9IFtdO1xuICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgLy8gTWFwIGFsbCBjbGllbnQtc2lkZSBhbGlhc2VzIHRvIGEgdW5pcXVlIHNob3J0LWZvcm1cbiAgICAgICAgICAgIC8vIGFsaWFzLiBUaGlzIGF2b2lkcyBpc3N1ZXMgd2l0aCBjbGllbnQtc2lkZSBhbGlhc2VzIHRoYXRcbiAgICAgICAgICAgIC8vIGV4Y2VlZCB0aGUgMTUwMC1ieXRlIHN0cmluZyBzaXplIGxpbWl0LlxuICAgICAgICAgICAgY29uc3QgdCA9IFwiYWdncmVnYXRlX1wiICsgbysrO1xuICAgICAgICAgICAgaVt0XSA9IGUuYWxpYXMsIFwiY291bnRcIiA9PT0gZS5FZSA/IHMucHVzaCh7XG4gICAgICAgICAgICAgICAgYWxpYXM6IHQsXG4gICAgICAgICAgICAgICAgY291bnQ6IHt9XG4gICAgICAgICAgICB9KSA6IFwiYXZnXCIgPT09IGUuRWUgPyBzLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiB0LFxuICAgICAgICAgICAgICAgIGF2Zzoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGRQYXRoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pIDogXCJzdW1cIiA9PT0gZS5FZSAmJiBzLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiB0LFxuICAgICAgICAgICAgICAgIHN1bToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGRQYXRoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIHJlcXVlc3Q6IHtcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeToge1xuICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGlvbnM6IHMsXG4gICAgICAgICAgICAgICAgICAgIHN0cnVjdHVyZWRRdWVyeTogci5zdHJ1Y3R1cmVkUXVlcnlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhcmVudDogci5wYXJlbnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtXzogaVxuICAgICAgICB9O1xuICAgIH0oaS5zZXJpYWxpemVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlUb0FnZ3JlZ2F0ZVRhcmdldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICByZXR1cm4gdC5kZSB8fCAoXG4gICAgICAgIC8vIERvIG5vdCBpbmNsdWRlIGltcGxpY2l0IG9yZGVyLWJ5cyBmb3IgYWdncmVnYXRlIHF1ZXJpZXMuXG4gICAgICAgIHQuZGUgPSBfX1BSSVZBVEVfX3F1ZXJ5VG9UYXJnZXQodCwgZS5leHBsaWNpdE9yZGVyQnkpKSwgdC5kZTtcbiAgICB9KHQpLCBuKSwgXyA9IHMucGFyZW50O1xuICAgIGkuY29ubmVjdGlvbi5TbyB8fCBkZWxldGUgcy5wYXJlbnQ7XG4gICAgY29uc3QgYSA9IChhd2FpdCBpLkZvKFwiUnVuQWdncmVnYXRpb25RdWVyeVwiLCBfLCBzLCAvKmV4cGVjdGVkUmVzcG9uc2VDb3VudD0qLyAxKSkuZmlsdGVyKChlID0+ICEhZS5yZXN1bHQpKTtcbiAgICAvLyBPbWl0IFJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXNwb25zZSB0aGF0IG9ubHkgY29udGFpbiByZWFkVGltZXMuXG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IGEubGVuZ3RoKTtcbiAgICAvLyBSZW1hcCB0aGUgc2hvcnQtZm9ybSBhbGlhc2VzIHRoYXQgd2VyZSBzZW50IHRvIHRoZSBzZXJ2ZXJcbiAgICAvLyB0byB0aGUgY2xpZW50LXNpZGUgYWxpYXNlcy4gVXNlcnMgd2lsbCBhY2Nlc3MgdGhlIHJlc3VsdHNcbiAgICAvLyB1c2luZyB0aGUgY2xpZW50LXNpZGUgYWxpYXMuXG4gICAgY29uc3QgdSA9IG51bGwgPT09IChyID0gYVswXS5yZXN1bHQpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuYWdncmVnYXRlRmllbGRzO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh1KS5yZWR1Y2UoKChlLCB0KSA9PiAoZVtvW3RdXSA9IHVbdF0sIGUpKSwge30pO1xufVxuXG4vKipcbiAqIEEgY29tcG9uZW50IHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvIHRyYWNrIHRoZSBPbmxpbmVTdGF0ZSAodGhhdCBpcyxcbiAqIHdoZXRoZXIgb3Igbm90IHRoZSBjbGllbnQgYXMgYSB3aG9sZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0byBiZSBvbmxpbmUgb3JcbiAqIG9mZmxpbmUpLCBpbXBsZW1lbnRpbmcgdGhlIGFwcHJvcHJpYXRlIGhldXJpc3RpY3MuXG4gKlxuICogSW4gcGFydGljdWxhciwgd2hlbiB0aGUgY2xpZW50IGlzIHRyeWluZyB0byBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLCB3ZVxuICogYWxsb3cgdXAgdG8gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB3aXRoaW4gT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMgZm9yXG4gKiBhIGNvbm5lY3Rpb24gdG8gc3VjY2VlZC4gSWYgd2UgaGF2ZSB0b28gbWFueSBmYWlsdXJlcyBvciB0aGUgdGltZW91dCBlbGFwc2VzLFxuICogdGhlbiB3ZSBzZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUsIGFuZCB0aGUgY2xpZW50IHdpbGwgYmVoYXZlIGFzIGlmXG4gKiBpdCBpcyBvZmZsaW5lIChnZXQoKXMgd2lsbCByZXR1cm4gY2FjaGVkIGRhdGEsIGV0Yy4pLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfT25saW5lU3RhdGVUcmFja2VyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gdCwgXG4gICAgICAgIC8qKiBUaGUgY3VycmVudCBPbmxpbmVTdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY291bnQgb2YgY29uc2VjdXRpdmUgZmFpbHVyZXMgdG8gb3BlbiB0aGUgc3RyZWFtLiBJZiBpdCByZWFjaGVzIHRoZVxuICAgICAgICAgKiBtYXhpbXVtIGRlZmluZWQgYnkgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUywgd2UnbGwgc2V0IHRoZSBPbmxpbmVTdGF0ZSB0b1xuICAgICAgICAgKiBPZmZsaW5lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mXyA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXG4gICAgICAgICAqIHRyYW5zaXRpb24gZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9ubGluZVN0YXRlLk9mZmxpbmUgd2l0aG91dCB3YWl0aW5nXG4gICAgICAgICAqIGZvciB0aGUgc3RyZWFtIHRvIGFjdHVhbGx5IGZhaWwgKE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgdGltZXMpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nXyA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgY2xpZW50IHNob3VsZCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcbiAgICAgICAgICogbG9nZ2VkIHRoZSBtZXNzYWdlIGFscmVhZHkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wXyA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgUmVtb3RlU3RvcmUgd2hlbiBhIHdhdGNoIHN0cmVhbSBpcyBzdGFydGVkIChpbmNsdWRpbmcgb24gZWFjaFxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhdHRlbXB0LCBpdCBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIGFuZCBzdGFydHNcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cbiAgICAgKi8gICAgeV8oKSB7XG4gICAgICAgIDAgPT09IHRoaXMuZl8gJiYgKHRoaXMud18oXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIHRoaXMuZ18gPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJvbmxpbmVfc3RhdGVfdGltZW91dFwiIC8qIFRpbWVySWQuT25saW5lU3RhdGVUaW1lb3V0ICovICwgMWU0LCAoKCkgPT4gKHRoaXMuZ18gPSBudWxsLCBcbiAgICAgICAgdGhpcy5TXyhcIkJhY2tlbmQgZGlkbid0IHJlc3BvbmQgd2l0aGluIDEwIHNlY29uZHMuXCIpLCB0aGlzLndfKFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIG91ciBPbmxpbmVTdGF0ZSBhcyBhcHByb3ByaWF0ZSBhZnRlciB0aGUgd2F0Y2ggc3RyZWFtIHJlcG9ydHMgYVxuICAgICAqIGZhaWx1cmUuIFRoZSBmaXJzdCBmYWlsdXJlIG1vdmVzIHVzIHRvIHRoZSAnVW5rbm93bicgc3RhdGUuIFdlIHRoZW4gbWF5XG4gICAgICogYWxsb3cgbXVsdGlwbGUgZmFpbHVyZXMgKGJhc2VkIG9uIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMpIGJlZm9yZSB3ZVxuICAgICAqIGFjdHVhbGx5IHRyYW5zaXRpb24gdG8gdGhlICdPZmZsaW5lJyBzdGF0ZS5cbiAgICAgKi8gICAgYl8oZSkge1xuICAgICAgICBcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyA9PT0gdGhpcy5zdGF0ZSA/IHRoaXMud18oXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykgOiAodGhpcy5mXysrLCBcbiAgICAgICAgdGhpcy5mXyA+PSAxICYmICh0aGlzLkRfKCksIHRoaXMuU18oYENvbm5lY3Rpb24gZmFpbGVkIDEgdGltZXMuIE1vc3QgcmVjZW50IGVycm9yOiAke2UudG9TdHJpbmcoKX1gKSwgXG4gICAgICAgIHRoaXMud18oXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwbGljaXRseSBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byB0aGUgc3BlY2lmaWVkIHN0YXRlLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgcmVzZXRzIG91ciB0aW1lcnMgLyBmYWlsdXJlIGNvdW50ZXJzLCBldGMuIHVzZWQgYnkgb3VyXG4gICAgICogT2ZmbGluZSBoZXVyaXN0aWNzLCBzbyBtdXN0IG5vdCBiZSB1c2VkIGluIHBsYWNlIG9mXG4gICAgICogaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCgpIGFuZCBoYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoKS5cbiAgICAgKi8gICAgc2V0KGUpIHtcbiAgICAgICAgdGhpcy5EXygpLCB0aGlzLmZfID0gMCwgXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8gPT09IGUgJiYgKFxuICAgICAgICAvLyBXZSd2ZSBjb25uZWN0ZWQgdG8gd2F0Y2ggYXQgbGVhc3Qgb25jZS4gRG9uJ3Qgd2FybiB0aGUgZGV2ZWxvcGVyXG4gICAgICAgIC8vIGFib3V0IGJlaW5nIG9mZmxpbmUgZ29pbmcgZm9yd2FyZC5cbiAgICAgICAgdGhpcy5wXyA9ICExKSwgdGhpcy53XyhlKTtcbiAgICB9XG4gICAgd18oZSkge1xuICAgICAgICBlICE9PSB0aGlzLnN0YXRlICYmICh0aGlzLnN0YXRlID0gZSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIoZSkpO1xuICAgIH1cbiAgICBTXyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBgQ291bGQgbm90IHJlYWNoIENsb3VkIEZpcmVzdG9yZSBiYWNrZW5kLiAke2V9XFxuVGhpcyB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgeW91ciBkZXZpY2UgZG9lcyBub3QgaGF2ZSBhIGhlYWx0aHkgSW50ZXJuZXQgY29ubmVjdGlvbiBhdCB0aGUgbW9tZW50LiBUaGUgY2xpZW50IHdpbGwgb3BlcmF0ZSBpbiBvZmZsaW5lIG1vZGUgdW50aWwgaXQgaXMgYWJsZSB0byBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byB0aGUgYmFja2VuZC5gO1xuICAgICAgICB0aGlzLnBfID8gKF9fUFJJVkFURV9sb2dFcnJvcih0KSwgdGhpcy5wXyA9ICExKSA6IF9fUFJJVkFURV9sb2dEZWJ1ZyhcIk9ubGluZVN0YXRlVHJhY2tlclwiLCB0KTtcbiAgICB9XG4gICAgRF8oKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuZ18gJiYgKHRoaXMuZ18uY2FuY2VsKCksIHRoaXMuZ18gPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9SZW1vdGVTdG9yZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCBzdG9yZSwgdXNlZCB0byBmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG91dGJvdW5kIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGNsaWVudC1zaWRlIHByb3h5IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBiYWNrZW5kLiAqL1xuICAgIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5kYXRhc3RvcmUgPSB0LCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLnJlbW90ZVN5bmNlciA9IHt9LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB1cCB0byBNQVhfUEVORElOR19XUklURVMgd3JpdGVzIHRoYXQgd2UgaGF2ZSBmZXRjaGVkIGZyb20gdGhlXG4gICAgICAgICAqIExvY2FsU3RvcmUgdmlhIGZpbGxXcml0ZVBpcGVsaW5lKCkgYW5kIGhhdmUgb3Igd2lsbCBzZW5kIHRvIHRoZSB3cml0ZVxuICAgICAgICAgKiBzdHJlYW0uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW5ldmVyIHdyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCB0aGUgUmVtb3RlU3RvcmUgd2lsbCBhdHRlbXB0IHRvIHN0YXJ0IG9yXG4gICAgICAgICAqIHJlc3RhcnQgdGhlIHdyaXRlIHN0cmVhbS4gV2hlbiB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkIHRoZSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAqIHBpcGVsaW5lIHdpbGwgYmUgc2VudCBpbiBvcmRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGVzIHJlbWFpbiBpbiB3cml0ZVBpcGVsaW5lIHVudGlsIHRoZXkgYXJlIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZFxuICAgICAgICAgKiBhbmQgdGh1cyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcmUtc2VudCBpZiB0aGUgc3RyZWFtIGlzIGludGVycnVwdGVkIC9cbiAgICAgICAgICogcmVzdGFydGVkIGJlZm9yZSB0aGV5J3JlIGFja25vd2xlZGdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGUgcmVzcG9uc2VzIGZyb20gdGhlIGJhY2tlbmQgYXJlIGxpbmtlZCB0byB0aGVpciBvcmlnaW5hdGluZyByZXF1ZXN0XG4gICAgICAgICAqIHB1cmVseSBiYXNlZCBvbiBvcmRlciwgYW5kIHNvIHdlIGNhbiBqdXN0IHNoaWZ0KCkgd3JpdGVzIGZyb20gdGhlIGZyb250IG9mXG4gICAgICAgICAqIHRoZSB3cml0ZVBpcGVsaW5lIGFzIHdlIHJlY2VpdmUgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5DXyA9IFtdLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiB3YXRjaGVkIHRhcmdldHMgdGhhdCB0aGUgY2xpZW50IGNhcmVzIGFib3V0IHRyYWNraW5nIGFuZCB0aGVcbiAgICAgICAgICogdXNlciBoYXMgZXhwbGljaXRseSBjYWxsZWQgYSAnbGlzdGVuJyBmb3IgdGhpcyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIHRhcmdldHMgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNlbnQgdG8gb3IgYWNrbm93bGVkZ2VkIGJ5IHRoZVxuICAgICAgICAgKiBzZXJ2ZXIuIE9uIHJlLWVzdGFibGlzaGluZyB0aGUgbGlzdGVuIHN0cmVhbSwgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgc2VudFxuICAgICAgICAgKiB0byB0aGUgc2VydmVyLiBUaGUgdGFyZ2V0cyByZW1vdmVkIHdpdGggdW5saXN0ZW5zIGFyZSByZW1vdmVkIGVhZ2VybHlcbiAgICAgICAgICogd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgbGlzdGVuIHN0cmVhbS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudl8gPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIHJlYXNvbnMgZm9yIHdoeSB0aGUgUmVtb3RlU3RvcmUgbWF5IGJlIG9mZmxpbmUuIElmIGVtcHR5LCB0aGVcbiAgICAgICAgICogUmVtb3RlU3RvcmUgbWF5IHN0YXJ0IGl0cyBuZXR3b3JrIGNvbm5lY3Rpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GXyA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlcnMgdGhhdCBnZXQgY2FsbGVkIHdoZW4gdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgb3IgZW5hYmxlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgb24gdGhlIFdlYiBjbGllbnQgdG8gY3JlYXRlIHRoZVxuICAgICAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbXMgKHRvIHN1cHBvcnQgdHJlZS1zaGFrZWFibGUgc3RyZWFtcykuIE9uIEFuZHJvaWQgYW5kIGlPUyxcbiAgICAgICAgICogdGhlIHN0cmVhbXMgYXJlIGNyZWF0ZWQgZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTV8gPSBbXSwgdGhpcy54XyA9IGksIHRoaXMueF8uc28oKGUgPT4ge1xuICAgICAgICAgICAgbi5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBVbmxpa2UgaU9TLCBgcmVzdGFydE5ldHdvcmsoKWAgaXMgY2FsbGVkIGV2ZW4gd2hlbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIGJlY29tZXMgdW5yZWFjaGFibGUgYXMgd2UgZG9uJ3QgaGF2ZSBhbnkgb3RoZXIgd2F5IHRvIHRlYXJcbiAgICAgICAgICAgICAgICAvLyBkb3duIG91ciBzdHJlYW1zLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKHRoaXMpICYmIChfX1BSSVZBVEVfbG9nRGVidWcoXCJSZW1vdGVTdG9yZVwiLCBcIlJlc3RhcnRpbmcgc3RyZWFtcyBmb3IgbmV0d29yayByZWFjaGFiaWxpdHkgY2hhbmdlLlwiKSwgXG4gICAgICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3Jlc3RhcnROZXR3b3JrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIHQuRl8uYWRkKDQgLyogT2ZmbGluZUNhdXNlLkNvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKHQpLCBcbiAgICAgICAgICAgICAgICAgICAgdC5PXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIHQuRl8uZGVsZXRlKDQgLyogT2ZmbGluZUNhdXNlLkNvbm5lY3Rpdml0eUNoYW5nZSAqLyksIFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKHQpO1xuICAgICAgICAgICAgICAgIH0odGhpcykpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSksIHRoaXMuT18gPSBuZXcgX19QUklWQVRFX09ubGluZVN0YXRlVHJhY2tlcihuLCByKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwoZSkge1xuICAgIGlmIChfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSkgZm9yIChjb25zdCB0IG9mIGUuTV8pIGF3YWl0IHQoLyogZW5hYmxlZD0gKi8gITApO1xufVxuXG4vKipcbiAqIFRlbXBvcmFyaWx5IGRpc2FibGVzIHRoZSBuZXR3b3JrLiBUaGUgbmV0d29yayBjYW4gYmUgcmUtZW5hYmxlZCB1c2luZ1xuICogZW5hYmxlTmV0d29yaygpLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKGUpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5NXykgYXdhaXQgdCgvKiBlbmFibGVkPSAqLyAhMSk7XG59XG5cbi8qKlxuICogU3RhcnRzIG5ldyBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXQuIFVzZXMgcmVzdW1lIHRva2VuIGlmIHByb3ZpZGVkLiBJdFxuICogaXMgYSBuby1vcCBpZiB0aGUgdGFyZ2V0IG9mIGdpdmVuIGBUYXJnZXREYXRhYCBpcyBhbHJlYWR5IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVMaXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIG4udl8uaGFzKHQudGFyZ2V0SWQpIHx8IChcbiAgICAvLyBNYXJrIHRoaXMgYXMgc29tZXRoaW5nIHRoZSBjbGllbnQgaXMgY3VycmVudGx5IGxpc3RlbmluZyBmb3IuXG4gICAgbi52Xy5zZXQodC50YXJnZXRJZCwgdCksIF9fUFJJVkFURV9zaG91bGRTdGFydFdhdGNoU3RyZWFtKG4pID8gXG4gICAgLy8gVGhlIGxpc3RlbiB3aWxsIGJlIHNlbnQgaW4gb25XYXRjaFN0cmVhbU9wZW5cbiAgICBfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbShuKSA6IF9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShuKS5ZbygpICYmIF9fUFJJVkFURV9zZW5kV2F0Y2hSZXF1ZXN0KG4sIHQpKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBsaXN0ZW4gZnJvbSBzZXJ2ZXIuIEl0IGlzIGEgbm8tb3AgaWYgdGhlIGdpdmVuIHRhcmdldCBpZCBpc1xuICogbm90IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShuKTtcbiAgICBuLnZfLmRlbGV0ZSh0KSwgci5ZbygpICYmIF9fUFJJVkFURV9zZW5kVW53YXRjaFJlcXVlc3QobiwgdCksIDAgPT09IG4udl8uc2l6ZSAmJiAoci5ZbygpID8gci5lXygpIDogX19QUklWQVRFX2NhblVzZU5ldHdvcmsobikgJiYgXG4gICAgLy8gUmV2ZXJ0IHRvIE9ubGluZVN0YXRlLlVua25vd24gaWYgdGhlIHdhdGNoIHN0cmVhbSBpcyBub3Qgb3BlbiBhbmQgd2VcbiAgICAvLyBoYXZlIG5vIGxpc3RlbmVycywgc2luY2Ugd2l0aG91dCBhbnkgbGlzdGVucyB0byBzZW5kIHdlIGNhbm5vdFxuICAgIC8vIGNvbmZpcm0gaWYgdGhlIHN0cmVhbSBpcyBoZWFsdGh5IGFuZCB1cGdyYWRlIHRvIE9ubGluZVN0YXRlLk9ubGluZS5cbiAgICBuLk9fLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSBhY2sgdG8gcHJvY2VzcyBhbnkgbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdChlLCB0KSB7XG4gICAgaWYgKGUuTl8uTGUodC50YXJnZXRJZCksIHQucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCB8fCB0LnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8oU25hcHNob3RWZXJzaW9uLm1pbigpKSA+IDApIHtcbiAgICAgICAgY29uc3QgbiA9IGUucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodC50YXJnZXRJZCkuc2l6ZTtcbiAgICAgICAgdCA9IHQud2l0aEV4cGVjdGVkQ291bnQobik7XG4gICAgfVxuICAgIF9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShlKS5sXyh0KTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgcmVtb3ZhbCBvbiB0aGUgc2VydmVyIGJlZm9yZSB3ZSBwcm9jZXNzIGFueVxuICogbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc2VuZFVud2F0Y2hSZXF1ZXN0KGUsIHQpIHtcbiAgICBlLk5fLkxlKHQpLCBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkuaF8odCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zdGFydFdhdGNoU3RyZWFtKGUpIHtcbiAgICBlLk5fID0gbmV3IF9fUFJJVkFURV9XYXRjaENoYW5nZUFnZ3JlZ2F0b3Ioe1xuICAgICAgICBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0OiB0ID0+IGUucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCksXG4gICAgICAgIGx0OiB0ID0+IGUudl8uZ2V0KHQpIHx8IG51bGwsXG4gICAgICAgIHN0OiAoKSA9PiBlLmRhdGFzdG9yZS5zZXJpYWxpemVyLmRhdGFiYXNlSWRcbiAgICB9KSwgX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpLnN0YXJ0KCksIGUuT18ueV8oKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHdhdGNoIHN0cmVhbSBzaG91bGQgYmUgc3RhcnRlZCBiZWNhdXNlIGl0J3MgbmVjZXNzYXJ5XG4gKiBhbmQgaGFzIG5vdCB5ZXQgYmVlbiBzdGFydGVkLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zaG91bGRTdGFydFdhdGNoU3RyZWFtKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2NhblVzZU5ldHdvcmsoZSkgJiYgIV9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShlKS5KbygpICYmIGUudl8uc2l6ZSA+IDA7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpIHtcbiAgICByZXR1cm4gMCA9PT0gX19QUklWQVRFX2RlYnVnQ2FzdChlKS5GXy5zaXplO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2xlYW5VcFdhdGNoU3RyZWFtU3RhdGUoZSkge1xuICAgIGUuTl8gPSB2b2lkIDA7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldhdGNoU3RyZWFtT3BlbihlKSB7XG4gICAgZS52Xy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdChlLCB0KTtcbiAgICB9KSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2xvc2UoZSwgdCkge1xuICAgIF9fUFJJVkFURV9jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZShlKSwgXG4gICAgLy8gSWYgd2Ugc3RpbGwgbmVlZCB0aGUgd2F0Y2ggc3RyZWFtLCByZXRyeSB0aGUgY29ubmVjdGlvbi5cbiAgICBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShlKSA/IChlLk9fLmJfKHQpLCBfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbShlKSkgOiBcbiAgICAvLyBObyBuZWVkIHRvIHJlc3RhcnQgd2F0Y2ggc3RyZWFtIGJlY2F1c2UgdGhlcmUgYXJlIG5vIGFjdGl2ZSB0YXJnZXRzLlxuICAgIC8vIFRoZSBvbmxpbmUgc3RhdGUgaXMgc2V0IHRvIHVua25vd24gYmVjYXVzZSB0aGVyZSBpcyBubyBhY3RpdmUgYXR0ZW1wdFxuICAgIC8vIGF0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb25cbiAgICBlLk9fLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DaGFuZ2UoZSwgdCwgbikge1xuICAgIGlmIChcbiAgICAvLyBNYXJrIHRoZSBjbGllbnQgYXMgb25saW5lIHNpbmNlIHdlIGdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyXG4gICAgZS5PXy5zZXQoXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8pLCB0IGluc3RhbmNlb2YgX19QUklWQVRFX1dhdGNoVGFyZ2V0Q2hhbmdlICYmIDIgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkICovID09PSB0LnN0YXRlICYmIHQuY2F1c2UpIFxuICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XG4gICAgLy8gdG8gcmFpc2UgZXZlbnRzXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKiBIYW5kbGVzIGFuIGVycm9yIG9uIGEgdGFyZ2V0ICovXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9oYW5kbGVUYXJnZXRFcnJvcihlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5jYXVzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiB0LnRhcmdldElkcykgXG4gICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICBlLnZfLmhhcyhyKSAmJiAoYXdhaXQgZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuKHIsIG4pLCBlLnZfLmRlbGV0ZShyKSwgZS5OXy5yZW1vdmVUYXJnZXQocikpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cbiAqXG4gKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcbiAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cbiAqXG4gKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gKi8gKGUsIHQpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmVtb3ZlIHRhcmdldHMgJXM6ICVzIFwiLCB0LnRhcmdldElkcy5qb2luKFwiLFwiKSwgbiksIFxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIG4pO1xuICAgIH0gZWxzZSBpZiAodCBpbnN0YW5jZW9mIF9fUFJJVkFURV9Eb2N1bWVudFdhdGNoQ2hhbmdlID8gZS5OXy5HZSh0KSA6IHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlID8gZS5OXy5YZSh0KSA6IGUuTl8uSGUodCksIFxuICAgICFuLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlLmxvY2FsU3RvcmUpO1xuICAgICAgICBuLmNvbXBhcmVUbyh0KSA+PSAwICYmIFxuICAgICAgICAvLyBXZSBoYXZlIHJlY2VpdmVkIGEgdGFyZ2V0IGNoYW5nZSB3aXRoIGEgZ2xvYmFsIHNuYXBzaG90IGlmIHRoZSBzbmFwc2hvdFxuICAgICAgICAvLyB2ZXJzaW9uIGlzIG5vdCBlcXVhbCB0byBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKipcbiAqIFRha2VzIGEgYmF0Y2ggb2YgY2hhbmdlcyBmcm9tIHRoZSBEYXRhc3RvcmUsIHJlcGFja2FnZXMgdGhlbSBhcyBhXG4gKiBSZW1vdGVFdmVudCwgYW5kIHBhc3NlcyB0aGF0IG9uIHRvIHRoZSBsaXN0ZW5lciwgd2hpY2ggaXMgdHlwaWNhbGx5IHRoZVxuICogU3luY0VuZ2luZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfcmFpc2VXYXRjaFNuYXBzaG90KGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLk5fLl90KHQpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGluLW1lbW9yeSByZXN1bWUgdG9rZW5zLiBMb2NhbFN0b3JlIHdpbGwgdXBkYXRlIHRoZVxuICAgICAgICAgICAgLy8gcGVyc2lzdGVudCB2aWV3IG9mIHRoZXNlIHdoZW4gYXBwbHlpbmcgdGhlIGNvbXBsZXRlZCBSZW1vdGVFdmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobi5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBlLnZfLmdldChyKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgZS52Xy5zZXQociwgaS53aXRoUmVzdW1lVG9rZW4obi5yZXN1bWVUb2tlbiwgdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKSwgXG4gICAgICAgICAgICAvLyBSZS1lc3RhYmxpc2ggbGlzdGVucyBmb3IgdGhlIHRhcmdldHMgdGhhdCBoYXZlIGJlZW4gaW52YWxpZGF0ZWQgYnlcbiAgICAgICAgICAgIC8vIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgIG4udGFyZ2V0TWlzbWF0Y2hlcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBlLnZfLmdldCh0KTtcbiAgICAgICAgICAgICAgICBpZiAoIXIpIFxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHJlc3VtZSB0b2tlbiBmb3IgdGhlIHRhcmdldCwgc2luY2Ugd2UncmUgaW4gYSBrbm93biBtaXNtYXRjaFxuICAgICAgICAgICAgICAgIC8vIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnZfLnNldCh0LCByLndpdGhSZXN1bWVUb2tlbihCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HLCByLnNuYXBzaG90VmVyc2lvbikpLCBcbiAgICAgICAgICAgICAgICAvLyBDYXVzZSBhIGhhcmQgcmVzZXQgYnkgdW53YXRjaGluZyBhbmQgcmV3YXRjaGluZyBpbW1lZGlhdGVseSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfc2VuZFVud2F0Y2hSZXF1ZXN0KGUsIHQpO1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIHRhcmdldCB3ZSBzZW5kIGFzIGJlaW5nIG9uIGJlaGFsZiBvZiBhbiBleGlzdGVuY2UgZmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gbWlzbWF0Y2gsIGJ1dCBkb24ndCBhY3R1YWxseSByZXRhaW4gdGhhdCBpbiBsaXN0ZW5UYXJnZXRzLiBUaGlzIGVuc3VyZXNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGZsYWcgdGhlIGZpcnN0IHJlLWxpc3RlbiB0aGlzIHdheSB3aXRob3V0IGltcGFjdGluZyBmdXR1cmVcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5zIG9mIHRoaXMgdGFyZ2V0ICh0aGF0IG1pZ2h0IGhhcHBlbiBlLmcuIG9uIHJlY29ubmVjdCkuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBUYXJnZXREYXRhKHIudGFyZ2V0LCB0LCBuLCByLnNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdChlLCBpKTtcbiAgICAgICAgICAgIH0pKSwgZS5yZW1vdGVTeW5jZXIuYXBwbHlSZW1vdGVFdmVudChuKTtcbiAgICAgICAgfShlLCBuKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJhaXNlIHNuYXBzaG90OlwiLCB0KSwgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeShlLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb3ZlcnkgbG9naWMgZm9yIEluZGV4ZWREQiBlcnJvcnMgdGhhdCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsXG4gKiBgb3BgIHN1Y2NlZWRzLiBSZXRyaWVzIGFyZSBzY2hlZHVsZWQgd2l0aCBiYWNrb2ZmIHVzaW5nXG4gKiBgZW5xdWV1ZVJldHJ5YWJsZSgpYC4gSWYgYG9wKClgIGlzIG5vdCBwcm92aWRlZCwgSW5kZXhlZERCIGFjY2VzcyBpc1xuICogdmFsaWRhdGVkIHZpYSBhIGdlbmVyaWMgb3BlcmF0aW9uLlxuICpcbiAqIFRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIGJlZm9yZVxuICogYW55IHJldHJ5IGF0dGVtcHQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeShlLCB0LCBuKSB7XG4gICAgaWYgKCFfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKHQpKSB0aHJvdyB0O1xuICAgIGUuRl8uYWRkKDEgLyogT2ZmbGluZUNhdXNlLkluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgIC8vIERpc2FibGUgbmV0d29yayBhbmQgcmFpc2Ugb2ZmbGluZSBzbmFwc2hvdHNcbiAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbChlKSwgZS5PXy5zZXQoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyksIFxuICAgIG4gfHwgKFxuICAgIC8vIFVzZSBhIHNpbXBsZSByZWFkIG9wZXJhdGlvbiB0byBkZXRlcm1pbmUgaWYgSW5kZXhlZERCIHJlY292ZXJlZC5cbiAgICAvLyBJZGVhbGx5LCB3ZSB3b3VsZCBleHBvc2UgYSBoZWFsdGggY2hlY2sgZGlyZWN0bHkgb24gU2ltcGxlRGIsIGJ1dFxuICAgIC8vIFJlbW90ZVN0b3JlIG9ubHkgaGFzIGFjY2VzcyB0byBwZXJzaXN0ZW5jZSB0aHJvdWdoIExvY2FsU3RvcmUuXG4gICAgbiA9ICgpID0+IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlLmxvY2FsU3RvcmUpKSwgXG4gICAgLy8gUHJvYmUgSW5kZXhlZERCIHBlcmlvZGljYWxseSBhbmQgcmUtZW5hYmxlIG5ldHdvcmtcbiAgICBlLmFzeW5jUXVldWUuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJSZW1vdGVTdG9yZVwiLCBcIlJldHJ5aW5nIEluZGV4ZWREQiBhY2Nlc3NcIiksIGF3YWl0IG4oKSwgZS5GXy5kZWxldGUoMSAvKiBPZmZsaW5lQ2F1c2UuSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwoZSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGBvcGAuIElmIGBvcGAgZmFpbHMsIHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWwgYG9wYFxuICogc3VjY2VlZHMuIFJldHVybnMgYWZ0ZXIgdGhlIGZpcnN0IGF0dGVtcHQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2V4ZWN1dGVXaXRoUmVjb3ZlcnkoZSwgdCkge1xuICAgIHJldHVybiB0KCkuY2F0Y2goKG4gPT4gX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeShlLCBuLCB0KSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBuID0gX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKHQpO1xuICAgIGxldCByID0gdC5DXy5sZW5ndGggPiAwID8gdC5DX1t0LkNfLmxlbmd0aCAtIDFdLmJhdGNoSWQgOiAtMTtcbiAgICBmb3IgKDtfX1BSSVZBVEVfY2FuQWRkVG9Xcml0ZVBpcGVsaW5lKHQpOyApIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5leHRNdXRhdGlvbkJhdGNoKHQubG9jYWxTdG9yZSwgcik7XG4gICAgICAgIGlmIChudWxsID09PSBlKSB7XG4gICAgICAgICAgICAwID09PSB0LkNfLmxlbmd0aCAmJiBuLmVfKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByID0gZS5iYXRjaElkLCBfX1BSSVZBVEVfYWRkVG9Xcml0ZVBpcGVsaW5lKHQsIGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeSh0LCBlKTtcbiAgICB9XG4gICAgX19QUklWQVRFX3Nob3VsZFN0YXJ0V3JpdGVTdHJlYW0odCkgJiYgX19QUklWQVRFX3N0YXJ0V3JpdGVTdHJlYW0odCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHdlIGNhbiBhZGQgdG8gdGhlIHdyaXRlIHBpcGVsaW5lIChpLmUuIHRoZSBuZXR3b3JrIGlzXG4gKiBlbmFibGVkIGFuZCB0aGUgd3JpdGUgcGlwZWxpbmUgaXMgbm90IGZ1bGwpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5BZGRUb1dyaXRlUGlwZWxpbmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSAmJiBlLkNfLmxlbmd0aCA8IDEwO1xufVxuXG4vKipcbiAqIFF1ZXVlcyBhZGRpdGlvbmFsIHdyaXRlcyB0byBiZSBzZW50IHRvIHRoZSB3cml0ZSBzdHJlYW0sIHNlbmRpbmcgdGhlbVxuICogaW1tZWRpYXRlbHkgaWYgdGhlIHdyaXRlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYWRkVG9Xcml0ZVBpcGVsaW5lKGUsIHQpIHtcbiAgICBlLkNfLnB1c2godCk7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKTtcbiAgICBuLllvKCkgJiYgbi5JXyAmJiBuLmRfKHQubXV0YXRpb25zKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3Nob3VsZFN0YXJ0V3JpdGVTdHJlYW0oZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSAmJiAhX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLkpvKCkgJiYgZS5DXy5sZW5ndGggPiAwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3RhcnRXcml0ZVN0cmVhbShlKSB7XG4gICAgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldyaXRlU3RyZWFtT3BlbihlKSB7XG4gICAgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLkFfKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSk7XG4gICAgLy8gU2VuZCB0aGUgd3JpdGUgcGlwZWxpbmUgbm93IHRoYXQgdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuQ18pIHQuZF8obi5tdXRhdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25NdXRhdGlvblJlc3VsdChlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IGUuQ18uc2hpZnQoKSwgaSA9IE11dGF0aW9uQmF0Y2hSZXN1bHQuZnJvbShyLCB0LCBuKTtcbiAgICBhd2FpdCBfX1BSSVZBVEVfZXhlY3V0ZVdpdGhSZWNvdmVyeShlLCAoKCkgPT4gZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUoaSkpKSwgXG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvbiBhbm90aGVyXG4gICAgLy8gc2xvdCBoYXMgZnJlZWQgdXAuXG4gICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbUNsb3NlKGUsIHQpIHtcbiAgICAvLyBJZiB0aGUgd3JpdGUgc3RyZWFtIGNsb3NlZCBhZnRlciB0aGUgd3JpdGUgaGFuZHNoYWtlIGNvbXBsZXRlcywgYSB3cml0ZVxuICAgIC8vIG9wZXJhdGlvbiBmYWlsZWQgYW5kIHdlIGZhaWwgdGhlIHBlbmRpbmcgb3BlcmF0aW9uLlxuICAgIHQgJiYgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLklfICYmIFxuICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxuICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9oYW5kbGVXcml0ZUVycm9yKGUsIHQpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgcGVybWFuZW50IGVycm9ycyBoZXJlLiBJZiBpdCdzIHRyYW5zaWVudCwganVzdCBsZXQgdGhlIHJldHJ5XG4gICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXG4gICAgICAgIGlmIChmdW5jdGlvbiBfX1BSSVZBVEVfaXNQZXJtYW5lbnRXcml0ZUVycm9yKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfaXNQZXJtYW5lbnRFcnJvcihlKSAmJiBlICE9PSBELkFCT1JURUQ7XG4gICAgICAgIH0odC5jb2RlKSkge1xuICAgICAgICAgICAgLy8gVGhpcyB3YXMgYSBwZXJtYW5lbnQgZXJyb3IsIHRoZSByZXF1ZXN0IGl0c2VsZiB3YXMgdGhlIHByb2JsZW1cbiAgICAgICAgICAgIC8vIHNvIGl0J3Mgbm90IGdvaW5nIHRvIHN1Y2NlZWQgaWYgd2UgcmVzZW5kIGl0LlxuICAgICAgICAgICAgY29uc3QgbiA9IGUuQ18uc2hpZnQoKTtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSBpdCdzIGFsc28gdW5saWtlbHkgdGhhdCB0aGUgc2VydmVyIGl0c2VsZiBpcyBtZWx0aW5nXG4gICAgICAgICAgICAvLyBkb3duIC0tIHRoaXMgd2FzIGp1c3QgYSBiYWQgcmVxdWVzdCBzbyBpbmhpYml0IGJhY2tvZmYgb24gdGhlIG5leHRcbiAgICAgICAgICAgIC8vIHJlc3RhcnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkuWG8oKSwgYXdhaXQgX19QUklWQVRFX2V4ZWN1dGVXaXRoUmVjb3ZlcnkoZSwgKCgpID0+IGUucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlKG4uYmF0Y2hJZCwgdCkpKSwgXG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uXG4gICAgICAgICAgICAvLyBhbm90aGVyIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGUpO1xuICAgICAgICB9XG4gICAgfShlLCB0KSwgXG4gICAgLy8gVGhlIHdyaXRlIHN0cmVhbSBtaWdodCBoYXZlIGJlZW4gc3RhcnRlZCBieSByZWZpbGxpbmcgdGhlIHdyaXRlXG4gICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcbiAgICBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXcml0ZVN0cmVhbShlKSAmJiBfX1BSSVZBVEVfc3RhcnRXcml0ZVN0cmVhbShlKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlSGFuZGxlQ3JlZGVudGlhbENoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbi5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSwgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKG4pO1xuICAgIC8vIFRlYXIgZG93biBhbmQgcmUtY3JlYXRlIG91ciBuZXR3b3JrIHN0cmVhbXMuIFRoaXMgd2lsbCBlbnN1cmUgd2UgZ2V0IGFcbiAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAvLyBuZXcgbXV0YXRpb25zIGZyb20gdGhlIExvY2FsU3RvcmUgKHNpbmNlIG11dGF0aW9ucyBhcmUgcGVyLXVzZXIpLlxuICAgICAgICBuLkZfLmFkZCgzIC8qIE9mZmxpbmVDYXVzZS5DcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwobiksIFxuICAgIHIgJiYgXG4gICAgLy8gRG9uJ3Qgc2V0IHRoZSBuZXR3b3JrIHN0YXR1cyB0byBVbmtub3duIGlmIHdlIGFyZSBvZmZsaW5lLlxuICAgIG4uT18uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCBhd2FpdCBuLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHQpLCBcbiAgICBuLkZfLmRlbGV0ZSgzIC8qIE9mZmxpbmVDYXVzZS5DcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChuKTtcbn1cblxuLyoqXG4gKiBUb2dnbGVzIHRoZSBuZXR3b3JrIHN0YXRlIHdoZW4gdGhlIGNsaWVudCBnYWlucyBvciBsb3NlcyBpdHMgcHJpbWFyeSBsZWFzZS5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVBcHBseVByaW1hcnlTdGF0ZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgdCA/IChuLkZfLmRlbGV0ZSgyIC8qIE9mZmxpbmVDYXVzZS5Jc1NlY29uZGFyeSAqLyksIGF3YWl0IF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwobikpIDogdCB8fCAobi5GXy5hZGQoMiAvKiBPZmZsaW5lQ2F1c2UuSXNTZWNvbmRhcnkgKi8pLCBcbiAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbChuKSwgbi5PXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV2F0Y2hTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdhdGNoU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpIHtcbiAgICByZXR1cm4gZS5CXyB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIGUuQl8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UGVyc2lzdGVudFdhdGNoU3RyZWFtKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgIHJldHVybiByLlZfKCksIG5ldyBfX1BSSVZBVEVfUGVyc2lzdGVudExpc3RlblN0cmVhbSh0LCByLmNvbm5lY3Rpb24sIHIuYXV0aENyZWRlbnRpYWxzLCByLmFwcENoZWNrQ3JlZGVudGlhbHMsIHIuc2VyaWFsaXplciwgbik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChlLmRhdGFzdG9yZSwgZS5hc3luY1F1ZXVlLCB7XG4gICAgICAgIElvOiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbU9wZW4uYmluZChudWxsLCBlKSxcbiAgICAgICAgRW86IF9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2xvc2UuYmluZChudWxsLCBlKSxcbiAgICAgICAgY186IF9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2hhbmdlLmJpbmQobnVsbCwgZSlcbiAgICB9KSwgZS5NXy5wdXNoKChhc3luYyB0ID0+IHtcbiAgICAgICAgdCA/IChlLkJfLlhvKCksIF9fUFJJVkFURV9zaG91bGRTdGFydFdhdGNoU3RyZWFtKGUpID8gX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0oZSkgOiBlLk9fLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSkgOiAoYXdhaXQgZS5CXy5zdG9wKCksIFxuICAgICAgICBfX1BSSVZBVEVfY2xlYW5VcFdhdGNoU3RyZWFtU3RhdGUoZSkpO1xuICAgIH0pKSksIGUuQl87XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXcml0ZVN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV3JpdGVTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkge1xuICAgIHJldHVybiBlLkxfIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgZS5MXyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdQZXJzaXN0ZW50V3JpdGVTdHJlYW0oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgcmV0dXJuIHIuVl8oKSwgbmV3IF9fUFJJVkFURV9QZXJzaXN0ZW50V3JpdGVTdHJlYW0odCwgci5jb25uZWN0aW9uLCByLmF1dGhDcmVkZW50aWFscywgci5hcHBDaGVja0NyZWRlbnRpYWxzLCByLnNlcmlhbGl6ZXIsIG4pO1xuICAgIH0oZS5kYXRhc3RvcmUsIGUuYXN5bmNRdWV1ZSwge1xuICAgICAgICBJbzogX19QUklWQVRFX29uV3JpdGVTdHJlYW1PcGVuLmJpbmQobnVsbCwgZSksXG4gICAgICAgIEVvOiBfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbUNsb3NlLmJpbmQobnVsbCwgZSksXG4gICAgICAgIEVfOiBfX1BSSVZBVEVfb25Xcml0ZUhhbmRzaGFrZUNvbXBsZXRlLmJpbmQobnVsbCwgZSksXG4gICAgICAgIFRfOiBfX1BSSVZBVEVfb25NdXRhdGlvblJlc3VsdC5iaW5kKG51bGwsIGUpXG4gICAgfSksIGUuTV8ucHVzaCgoYXN5bmMgdCA9PiB7XG4gICAgICAgIHQgPyAoZS5MXy5YbygpLCBcbiAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoZSkpIDogKGF3YWl0IGUuTF8uc3RvcCgpLCBlLkNfLmxlbmd0aCA+IDAgJiYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIGBTdG9wcGluZyB3cml0ZSBzdHJlYW0gd2l0aCAke2UuQ18ubGVuZ3RofSBwZW5kaW5nIHdyaXRlc2ApLCBcbiAgICAgICAgZS5DXyA9IFtdKSk7XG4gICAgfSkpKSwgZS5MXztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBvcGVyYXRpb24gc2NoZWR1bGVkIHRvIGJlIHJ1biBpbiB0aGUgZnV0dXJlIG9uIGFuIEFzeW5jUXVldWUuXG4gKlxuICogSXQgaXMgY3JlYXRlZCB2aWEgRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSgpLlxuICpcbiAqIFN1cHBvcnRzIGNhbmNlbGxhdGlvbiAodmlhIGNhbmNlbCgpKSBhbmQgZWFybHkgZXhlY3V0aW9uICh2aWEgc2tpcERlbGF5KCkpLlxuICpcbiAqIE5vdGU6IFdlIGltcGxlbWVudCBgUHJvbWlzZUxpa2VgIGluc3RlYWQgb2YgYFByb21pc2VgLCBhcyB0aGUgYFByb21pc2VgIHR5cGVcbiAqIGluIG5ld2VyIHZlcnNpb25zIG9mIFR5cGVTY3JpcHQgZGVmaW5lcyBgZmluYWxseWAsIHdoaWNoIGlzIG5vdCBhdmFpbGFibGUgaW5cbiAqIElFLlxuICovXG5jbGFzcyBEZWxheWVkT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMudGltZXJJZCA9IHQsIHRoaXMudGFyZ2V0VGltZU1zID0gbiwgdGhpcy5vcCA9IHIsIHRoaXMucmVtb3ZhbENhbGxiYWNrID0gaSwgXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkLCB0aGlzLnRoZW4gPSB0aGlzLmRlZmVycmVkLnByb21pc2UudGhlbi5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSksIFxuICAgICAgICAvLyBJdCdzIG5vcm1hbCBmb3IgdGhlIGRlZmVycmVkIHByb21pc2UgdG8gYmUgY2FuY2VsZWQgKGR1ZSB0byBjYW5jZWxsYXRpb24pXG4gICAgICAgIC8vIGFuZCBzbyB3ZSBhdHRhY2ggYSBkdW1teSBjYXRjaCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAvLyAnVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbldhcm5pbmcnIGxvZyBzcGFtLlxuICAgICAgICB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2goKGUgPT4ge30pKTtcbiAgICB9XG4gICAgZ2V0IHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBEZWxheWVkT3BlcmF0aW9uIHRoYXQgaGFzIGJlZW4gc2NoZWR1bGVkIHRvIGJlXG4gICAgICogZXhlY3V0ZWQgb24gdGhlIHByb3ZpZGVkIGFzeW5jUXVldWUgYWZ0ZXIgdGhlIHByb3ZpZGVkIGRlbGF5TXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXN5bmNRdWV1ZSAtIFRoZSBxdWV1ZSB0byBzY2hlZHVsZSB0aGUgb3BlcmF0aW9uIG9uLlxuICAgICAqIEBwYXJhbSBpZCAtIEEgVGltZXIgSUQgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2Ygb3BlcmF0aW9uIHRoaXMgaXMuXG4gICAgICogQHBhcmFtIGRlbGF5TXMgLSBUaGUgZGVsYXkgKG1zKSBiZWZvcmUgdGhlIG9wZXJhdGlvbiBzaG91bGQgYmUgc2NoZWR1bGVkLlxuICAgICAqIEBwYXJhbSBvcCAtIFRoZSBvcGVyYXRpb24gdG8gcnVuLlxuICAgICAqIEBwYXJhbSByZW1vdmFsQ2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IG9uY2UgdGhlXG4gICAgICogICBvcGVyYXRpb24gaXMgZXhlY3V0ZWQgb3IgY2FuY2VsZWQsIG5vdGlmeWluZyB0aGUgQXN5bmNRdWV1ZSB0byByZW1vdmUgaXRcbiAgICAgKiAgIGZyb20gaXRzIGRlbGF5ZWRPcGVyYXRpb25zIGxpc3QuXG4gICAgICogICBQT1JUSU5HIE5PVEU6IFRoaXMgZXhpc3RzIHRvIHByZXZlbnQgbWFraW5nIHJlbW92ZURlbGF5ZWRPcGVyYXRpb24oKSBhbmRcbiAgICAgKiAgIHRoZSBEZWxheWVkT3BlcmF0aW9uIGNsYXNzIHB1YmxpYy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZUFuZFNjaGVkdWxlKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IERhdGUubm93KCkgKyBuLCBvID0gbmV3IERlbGF5ZWRPcGVyYXRpb24oZSwgdCwgcywgciwgaSk7XG4gICAgICAgIHJldHVybiBvLnN0YXJ0KG4pLCBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHRpbWVyLiBUaGlzIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciBjb25zdHJ1Y3Rpb24gYnlcbiAgICAgKiBjcmVhdGVBbmRTY2hlZHVsZSgpLlxuICAgICAqLyAgICBzdGFydChlKSB7XG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBzZXRUaW1lb3V0KCgoKSA9PiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXVlcyB0aGUgb3BlcmF0aW9uIHRvIHJ1biBpbW1lZGlhdGVseSAoaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBydW4gb3JcbiAgICAgKiBjYW5jZWxlZCkuXG4gICAgICovICAgIHNraXBEZWxheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIG9wZXJhdGlvbiBpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLiBUaGVcbiAgICAgKiBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXG4gICAgICpcbiAgICAgKiBBcyBsb25nIGFzIHRoZSBvcGVyYXRpb24gaGFzIG5vdCB5ZXQgYmVlbiBydW4sIGNhbGxpbmcgY2FuY2VsKCkgcHJvdmlkZXMgYVxuICAgICAqIGd1YXJhbnRlZSB0aGF0IHRoZSBvcGVyYXRpb24gd2lsbCBub3QgYmUgcnVuLlxuICAgICAqLyAgICBjYW5jZWwoZSkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLmNsZWFyVGltZW91dCgpLCB0aGlzLmRlZmVycmVkLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoRC5DQU5DRUxMRUQsIFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiICsgKGUgPyBcIjogXCIgKyBlIDogXCJcIikpKSk7XG4gICAgfVxuICAgIGhhbmRsZURlbGF5RWxhcHNlZCgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgPyAodGhpcy5jbGVhclRpbWVvdXQoKSwgXG4gICAgICAgIHRoaXMub3AoKS50aGVuKChlID0+IHRoaXMuZGVmZXJyZWQucmVzb2x2ZShlKSkpKSA6IFByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5yZW1vdmFsQ2FsbGJhY2sodGhpcyksIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySGFuZGxlKSwgXG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpcmVzdG9yZUVycm9yIHRoYXQgY2FuIGJlIHN1cmZhY2VkIHRvIHRoZSB1c2VyIGlmIHRoZSBwcm92aWRlZFxuICogZXJyb3IgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gUmUtdGhyb3dzIHRoZSBlcnJvciBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgdCkge1xuICAgIGlmIChfX1BSSVZBVEVfbG9nRXJyb3IoXCJBc3luY1F1ZXVlXCIsIGAke3R9OiAke2V9YCksIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIHJldHVybiBuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTkFWQUlMQUJMRSwgYCR7dH06ICR7ZX1gKTtcbiAgICB0aHJvdyBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBkb2N1bWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci4gV2UgYWx3YXlzIGFkZCBhIGRvY3VtZW50IGtleVxuICogY29tcGFyYXRvciBvbiB0b3Agb2Ygd2hhdCBpcyBwcm92aWRlZCB0byBndWFyYW50ZWUgZG9jdW1lbnQgZXF1YWxpdHkgYmFzZWQgb25cbiAqIHRoZSBrZXkuXG4gKi8gY2xhc3MgRG9jdW1lbnRTZXQge1xuICAgIC8qKiBUaGUgZGVmYXVsdCBvcmRlcmluZyBpcyBieSBrZXkgaWYgdGhlIGNvbXBhcmF0b3IgaXMgb21pdHRlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBkb2N1bWVudCBrZXkgY29tcGFyYXRvciB0byB0aGUgZW5kIGFzIGl0J3MgdGhlIG9ubHlcbiAgICAgICAgLy8gZ3VhcmFudGVlZCB1bmlxdWUgcHJvcGVydHkgb2YgYSBkb2N1bWVudC5cbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gZSA/ICh0LCBuKSA9PiBlKHQsIG4pIHx8IERvY3VtZW50S2V5LmNvbXBhcmF0b3IodC5rZXksIG4ua2V5KSA6IChlLCB0KSA9PiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUua2V5LCB0LmtleSksIFxuICAgICAgICB0aGlzLmtleWVkTWFwID0gZG9jdW1lbnRNYXAoKSwgdGhpcy5zb3J0ZWRTZXQgPSBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW1wdHkgY29weSBvZiB0aGUgZXhpc3RpbmcgRG9jdW1lbnRTZXQsIHVzaW5nIHRoZSBzYW1lXG4gICAgICogY29tcGFyYXRvci5cbiAgICAgKi8gICAgc3RhdGljIGVtcHR5U2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNldChlLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXMoZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLmtleWVkTWFwLmdldChlKTtcbiAgICB9XG4gICAgZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ZWRNYXAuZ2V0KGUpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWF4S2V5KCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBwcm92aWRlZCBrZXkgaW4gdGhlIGRvY3VtZW50IHNldCwgb3IgLTEgaWYgdGhlXG4gICAgICogZG9jdW1lbnQga2V5IGlzIG5vdCBwcmVzZW50IGluIHRoZSBzZXQ7XG4gICAgICovICAgIGluZGV4T2YoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5rZXllZE1hcC5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy5zb3J0ZWRTZXQuaW5kZXhPZih0KSA6IC0xO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LnNpemU7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBkb2N1bWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgdGhpcy5zb3J0ZWRTZXQuaW5vcmRlclRyYXZlcnNhbCgoKHQsIG4pID0+IChlKHQpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUga2V5ICovICAgIGFkZChlKSB7XG4gICAgICAgIC8vIEZpcnN0IHJlbW92ZSB0aGUgZWxlbWVudCBpZiB3ZSBoYXZlIGl0LlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5kZWxldGUoZS5rZXkpO1xuICAgICAgICByZXR1cm4gdC5jb3B5KHQua2V5ZWRNYXAuaW5zZXJ0KGUua2V5LCBlKSwgdC5zb3J0ZWRTZXQuaW5zZXJ0KGUsIG51bGwpKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYSBkb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5ICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHQgPyB0aGlzLmNvcHkodGhpcy5rZXllZE1hcC5yZW1vdmUoZSksIHRoaXMuc29ydGVkU2V0LnJlbW92ZSh0KSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIERvY3VtZW50U2V0KSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSBlLnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCksIG4gPSBlLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDt0Lmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5nZXROZXh0KCkua2V5LCByID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKCFlLmlzRXF1YWwocikpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgMCA9PT0gZS5sZW5ndGggPyBcIkRvY3VtZW50U2V0ICgpXCIgOiBcIkRvY3VtZW50U2V0IChcXG4gIFwiICsgZS5qb2luKFwiICBcXG5cIikgKyBcIlxcbilcIjtcbiAgICB9XG4gICAgY29weShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRG9jdW1lbnRTZXQ7XG4gICAgICAgIHJldHVybiBuLmNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3IsIG4ua2V5ZWRNYXAgPSBlLCBuLnNvcnRlZFNldCA9IHQsIG47XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudENoYW5nZVNldCBrZWVwcyB0cmFjayBvZiBhIHNldCBvZiBjaGFuZ2VzIHRvIGRvY3MgaW4gYSBxdWVyeSwgbWVyZ2luZ1xuICogZHVwbGljYXRlIGV2ZW50cyBmb3IgdGhlIHNhbWUgZG9jLlxuICovIGNsYXNzIF9fUFJJVkFURV9Eb2N1bWVudENoYW5nZVNldCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua18gPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICB0cmFjayhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRvYy5rZXksIG4gPSB0aGlzLmtfLmdldCh0KTtcbiAgICAgICAgbiA/IFxuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IGNoYW5nZSB3aXRoIHRoZSBleGlzdGluZyBjaGFuZ2UuXG4gICAgICAgIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAhPT0gZS50eXBlICYmIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA9PT0gbi50eXBlID8gdGhpcy5rXyA9IHRoaXMua18uaW5zZXJ0KHQsIGUpIDogMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovID09PSBlLnR5cGUgJiYgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gIT09IG4udHlwZSA/IHRoaXMua18gPSB0aGlzLmtfLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiBuLnR5cGUsXG4gICAgICAgICAgICBkb2M6IGUuZG9jXG4gICAgICAgIH0pIDogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBlLnR5cGUgJiYgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLmtfID0gdGhpcy5rXy5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogZS5kb2NcbiAgICAgICAgfSkgOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IGUudHlwZSAmJiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMua18gPSB0aGlzLmtfLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBlLmRvY1xuICAgICAgICB9KSA6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovID09PSBlLnR5cGUgJiYgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLmtfID0gdGhpcy5rXy5yZW1vdmUodCkgOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA9PT0gZS50eXBlICYmIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5rXyA9IHRoaXMua18uaW5zZXJ0KHQsIHtcbiAgICAgICAgICAgIHR5cGU6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICxcbiAgICAgICAgICAgIGRvYzogbi5kb2NcbiAgICAgICAgfSkgOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gPT09IGUudHlwZSAmJiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5rXyA9IHRoaXMua18uaW5zZXJ0KHQsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IGUuZG9jXG4gICAgICAgIH0pIDogXG4gICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgdGhlc2UgY2FzZXMsIHdoaWNoIGRvbid0IG1ha2Ugc2Vuc2U6XG4gICAgICAgIC8vIEFkZGVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5SZW1vdmVkXG4gICAgICAgIC8vIE1vZGlmaWVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5Nb2RpZmllZFxuICAgICAgICAvLyBNZXRhZGF0YS0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TWV0YWRhdGFcbiAgICAgICAgZmFpbCgpIDogdGhpcy5rXyA9IHRoaXMua18uaW5zZXJ0KHQsIGUpO1xuICAgIH1cbiAgICBxXygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5rXy5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKG4pO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxufVxuXG5jbGFzcyBWaWV3U25hcHNob3Qge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMsIG8sIF8sIGEpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMuZG9jcyA9IHQsIHRoaXMub2xkRG9jcyA9IG4sIHRoaXMuZG9jQ2hhbmdlcyA9IHIsIHRoaXMubXV0YXRlZEtleXMgPSBpLCBcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSBzLCB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPSBvLCB0aGlzLmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzID0gXywgXG4gICAgICAgIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyA9IGE7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiBhbGwgZG9jdW1lbnRzIGluIHRoZSBzbmFwc2hvdCB3ZXJlIGFkZGVkLiAqLyAgICBzdGF0aWMgZnJvbUluaXRpYWxEb2N1bWVudHMoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgbmV3IFZpZXdTbmFwc2hvdChlLCB0LCBEb2N1bWVudFNldC5lbXB0eVNldCh0KSwgcywgbiwgciwgXG4gICAgICAgIC8qIHN5bmNTdGF0ZUNoYW5nZWQ9ICovICEwLCBcbiAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExLCBpKTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5tdXRhdGVkS2V5cy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICBpZiAoISh0aGlzLmZyb21DYWNoZSA9PT0gZS5mcm9tQ2FjaGUgJiYgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID09PSBlLmhhc0NhY2hlZFJlc3VsdHMgJiYgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID09PSBlLnN5bmNTdGF0ZUNoYW5nZWQgJiYgdGhpcy5tdXRhdGVkS2V5cy5pc0VxdWFsKGUubXV0YXRlZEtleXMpICYmIF9fUFJJVkFURV9xdWVyeUVxdWFscyh0aGlzLnF1ZXJ5LCBlLnF1ZXJ5KSAmJiB0aGlzLmRvY3MuaXNFcXVhbChlLmRvY3MpICYmIHRoaXMub2xkRG9jcy5pc0VxdWFsKGUub2xkRG9jcykpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRvY0NoYW5nZXMsIG4gPSBlLmRvY0NoYW5nZXM7XG4gICAgICAgIGlmICh0Lmxlbmd0aCAhPT0gbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgZSsrKSBpZiAodFtlXS50eXBlICE9PSBuW2VdLnR5cGUgfHwgIXRbZV0uZG9jLmlzRXF1YWwobltlXS5kb2MpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvbGRzIHRoZSBsaXN0ZW5lcnMgYW5kIHRoZSBsYXN0IHJlY2VpdmVkIFZpZXdTbmFwc2hvdCBmb3IgYSBxdWVyeSBiZWluZ1xuICogdHJhY2tlZCBieSBFdmVudE1hbmFnZXIuXG4gKi8gY2xhc3MgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXJzSW5mbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuUV8gPSB2b2lkIDAsIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRXZlbnRNYW5hZ2VySW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkoZSkpLCBfX1BSSVZBVEVfcXVlcnlFcXVhbHMpLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCB0aGlzLktfID0gbmV3IFNldDtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gdC5xdWVyeTtcbiAgICBsZXQgaSA9ICExLCBzID0gbi5xdWVyaWVzLmdldChyKTtcbiAgICBpZiAocyB8fCAoaSA9ICEwLCBzID0gbmV3IF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyc0luZm8pLCBpKSB0cnkge1xuICAgICAgICBzLlFfID0gYXdhaXQgbi5vbkxpc3RlbihyKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfd3JhcEluVXNlckVycm9ySWZSZWNvdmVyYWJsZShlLCBgSW5pdGlhbGl6YXRpb24gb2YgcXVlcnkgJyR7X19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KHQucXVlcnkpfScgZmFpbGVkYCk7XG4gICAgICAgIHJldHVybiB2b2lkIHQub25FcnJvcihuKTtcbiAgICB9XG4gICAgaWYgKG4ucXVlcmllcy5zZXQociwgcyksIHMubGlzdGVuZXJzLnB1c2godCksIFxuICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgIHQuVV8obi5vbmxpbmVTdGF0ZSksIHMuUV8pIHtcbiAgICAgICAgdC5XXyhzLlFfKSAmJiBfX1BSSVZBVEVfcmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudChuKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9ldmVudE1hbmFnZXJVbmxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSB0LnF1ZXJ5O1xuICAgIGxldCBpID0gITE7XG4gICAgY29uc3QgcyA9IG4ucXVlcmllcy5nZXQocik7XG4gICAgaWYgKHMpIHtcbiAgICAgICAgY29uc3QgZSA9IHMubGlzdGVuZXJzLmluZGV4T2YodCk7XG4gICAgICAgIGUgPj0gMCAmJiAocy5saXN0ZW5lcnMuc3BsaWNlKGUsIDEpLCBpID0gMCA9PT0gcy5saXN0ZW5lcnMubGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGkpIHJldHVybiBuLnF1ZXJpZXMuZGVsZXRlKHIpLCBuLm9uVW5saXN0ZW4ocik7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9ldmVudE1hbmFnZXJPbldhdGNoQ2hhbmdlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBsZXQgciA9ICExO1xuICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLnF1ZXJ5LCBpID0gbi5xdWVyaWVzLmdldCh0KTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBpLmxpc3RlbmVycykgdC5XXyhlKSAmJiAociA9ICEwKTtcbiAgICAgICAgICAgIGkuUV8gPSBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHIgJiYgX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQobik7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9ldmVudE1hbmFnZXJPbldhdGNoRXJyb3IoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBpID0gci5xdWVyaWVzLmdldCh0KTtcbiAgICBpZiAoaSkgZm9yIChjb25zdCBlIG9mIGkubGlzdGVuZXJzKSBlLm9uRXJyb3Iobik7XG4gICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMuIE5PVEU6IFdlIGRvbid0IG5lZWQgdG8gY2FsbCBzeW5jRW5naW5lLnVubGlzdGVuKClcbiAgICAvLyBhZnRlciBhbiBlcnJvci5cbiAgICAgICAgci5xdWVyaWVzLmRlbGV0ZSh0KTtcbn1cblxuLy8gQ2FsbCBhbGwgZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBzZXQuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudChlKSB7XG4gICAgZS5LXy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgZS5uZXh0KCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFF1ZXJ5TGlzdGVuZXIgdGFrZXMgYSBzZXJpZXMgb2YgaW50ZXJuYWwgdmlldyBzbmFwc2hvdHMgYW5kIGRldGVybWluZXNcbiAqIHdoZW4gdG8gcmFpc2UgdGhlIGV2ZW50LlxuICpcbiAqIEl0IHVzZXMgYW4gT2JzZXJ2ZXIgdG8gZGlzcGF0Y2ggZXZlbnRzLlxuICovIGNsYXNzIF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBlLCB0aGlzLkdfID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsIHNuYXBzaG90cyAoZS5nLiBmcm9tIGNhY2hlKSBtYXkgbm90IGJlIHByb3BhZ2F0ZWQgdG8gdGhlIHdyYXBwZWRcbiAgICAgICAgICogb2JzZXJ2ZXIuIFRoaXMgZmxhZyBpcyBzZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIGFjdHVhbGx5IHJhaXNlZCBhbiBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuel8gPSAhMSwgdGhpcy5qXyA9IG51bGwsIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG4gfHwge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIG5ldyBWaWV3U25hcHNob3QgdG8gdGhpcyBsaXN0ZW5lciwgcmFpc2luZyBhIHVzZXItZmFjaW5nIGV2ZW50XG4gICAgICogaWYgYXBwbGljYWJsZSAoZGVwZW5kaW5nIG9uIHdoYXQgY2hhbmdlZCwgd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgaW50b1xuICAgICAqIG1ldGFkYXRhLW9ubHkgY2hhbmdlcywgZXRjLikuIFJldHVybnMgdHJ1ZSBpZiBhIHVzZXItZmFjaW5nIGV2ZW50IHdhc1xuICAgICAqIGluZGVlZCByYWlzZWQuXG4gICAgICovICAgIFdfKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcykge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBtZXRhZGF0YSBvbmx5IGNoYW5nZXMuXG4gICAgICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5kb2NDaGFuZ2VzKSAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gIT09IG4udHlwZSAmJiB0LnB1c2gobik7XG4gICAgICAgICAgICBlID0gbmV3IFZpZXdTbmFwc2hvdChlLnF1ZXJ5LCBlLmRvY3MsIGUub2xkRG9jcywgdCwgZS5tdXRhdGVkS2V5cywgZS5mcm9tQ2FjaGUsIGUuc3luY1N0YXRlQ2hhbmdlZCwgXG4gICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITAsIGUuaGFzQ2FjaGVkUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuel8gPyB0aGlzLkhfKGUpICYmICh0aGlzLkdfLm5leHQoZSksIHQgPSAhMCkgOiB0aGlzLkpfKGUsIHRoaXMub25saW5lU3RhdGUpICYmICh0aGlzLllfKGUpLCBcbiAgICAgICAgdCA9ICEwKSwgdGhpcy5qXyA9IGUsIHQ7XG4gICAgfVxuICAgIG9uRXJyb3IoZSkge1xuICAgICAgICB0aGlzLkdfLmVycm9yKGUpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi8gICAgVV8oZSkge1xuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gZTtcbiAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMual8gJiYgIXRoaXMuel8gJiYgdGhpcy5KXyh0aGlzLmpfLCBlKSAmJiAodGhpcy5ZXyh0aGlzLmpfKSwgdCA9ICEwKSwgXG4gICAgICAgIHQ7XG4gICAgfVxuICAgIEpfKGUsIHQpIHtcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxuICAgICAgICBpZiAoIWUuZnJvbUNhY2hlKSByZXR1cm4gITA7XG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovICE9PSB0O1xuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICghdGhpcy5vcHRpb25zLlpfIHx8ICFuKSAmJiAoIWUuZG9jcy5pc0VtcHR5KCkgfHwgZS5oYXNDYWNoZWRSZXN1bHRzIHx8IFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IHQpO1xuICAgICAgICAvLyBSYWlzZSBkYXRhIGZyb20gY2FjaGUgaWYgd2UgaGF2ZSBhbnkgZG9jdW1lbnRzLCBoYXZlIGNhY2hlZCByZXN1bHRzIGJlZm9yZSxcbiAgICAgICAgLy8gb3Igd2UgYXJlIG9mZmxpbmUuXG4gICAgICAgIH1cbiAgICBIXyhlKSB7XG4gICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gaGFuZGxlIGluY2x1ZGVEb2N1bWVudE1ldGFkYXRhQ2hhbmdlcyBoZXJlIGJlY2F1c2VcbiAgICAgICAgLy8gdGhlIE1ldGFkYXRhIG9ubHkgY2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBzdHJpcHBlZCBvdXQgaWYgbmVlZGVkLlxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHRoZSBvbmx5IGNoYW5nZXMgd2Ugd2lsbCBzZWUgYXJlIHRoZSBvbmVzIHdlIHNob3VsZFxuICAgICAgICAvLyBwcm9wYWdhdGUuXG4gICAgICAgIGlmIChlLmRvY0NoYW5nZXMubGVuZ3RoID4gMCkgcmV0dXJuICEwO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5qXyAmJiB0aGlzLmpfLmhhc1BlbmRpbmdXcml0ZXMgIT09IGUuaGFzUGVuZGluZ1dyaXRlcztcbiAgICAgICAgcmV0dXJuICEoIWUuc3luY1N0YXRlQ2hhbmdlZCAmJiAhdCkgJiYgITAgPT09IHRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICAvLyBHZW5lcmFsbHkgd2Ugc2hvdWxkIGhhdmUgaGl0IG9uZSBvZiB0aGUgY2FzZXMgYWJvdmUsIGJ1dCBpdCdzIHBvc3NpYmxlXG4gICAgICAgIC8vIHRvIGdldCBoZXJlIGlmIHRoZXJlIHdlcmUgb25seSBtZXRhZGF0YSBkb2NDaGFuZ2VzIGFuZCB0aGV5IGdvdFxuICAgICAgICAvLyBzdHJpcHBlZCBvdXQuXG4gICAgICAgIH1cbiAgICBZXyhlKSB7XG4gICAgICAgIGUgPSBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHMoZS5xdWVyeSwgZS5kb2NzLCBlLm11dGF0ZWRLZXlzLCBlLmZyb21DYWNoZSwgZS5oYXNDYWNoZWRSZXN1bHRzKSwgXG4gICAgICAgIHRoaXMuel8gPSAhMCwgdGhpcy5HXy5uZXh0KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb21wbGV0ZSBlbGVtZW50IGluIHRoZSBidW5kbGUgc3RyZWFtLCB0b2dldGhlciB3aXRoIHRoZSBieXRlIGxlbmd0aCBpdFxuICogb2NjdXBpZXMgaW4gdGhlIHN0cmVhbS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2l6ZWRCdW5kbGVFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvLyBIb3cgbWFueSBieXRlcyB0aGlzIGVsZW1lbnQgdGFrZXMgdG8gc3RvcmUgaW4gdGhlIGJ1bmRsZS5cbiAgICB0KSB7XG4gICAgICAgIHRoaXMuWF8gPSBlLCB0aGlzLmJ5dGVMZW5ndGggPSB0O1xuICAgIH1cbiAgICBlYSgpIHtcbiAgICAgICAgcmV0dXJuIFwibWV0YWRhdGFcIiBpbiB0aGlzLlhfO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgb2JqZWN0cyBmcm9tIGJ1bmRsZXMgdG8gbW9kZWwgb2JqZWN0cyBpbiB0aGUgU0RLLlxuICovIGNsYXNzIF9fUFJJVkFURV9CdW5kbGVDb252ZXJ0ZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGU7XG4gICAgfVxuICAgIElzKGUpIHtcbiAgICAgICAgcmV0dXJuIGZyb21OYW1lKHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgQnVuZGxlRG9jdW1lbnQgdG8gYSBNdXRhYmxlRG9jdW1lbnQuXG4gICAgICovICAgIGRzKGUpIHtcbiAgICAgICAgcmV0dXJuIGUubWV0YWRhdGEuZXhpc3RzID8gX19QUklWQVRFX2Zyb21Eb2N1bWVudCh0aGlzLnNlcmlhbGl6ZXIsIGUuZG9jdW1lbnQsICExKSA6IE11dGFibGVEb2N1bWVudC5uZXdOb0RvY3VtZW50KHRoaXMuSXMoZS5tZXRhZGF0YS5uYW1lKSwgdGhpcy5UcyhlLm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIFRzKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9mcm9tVmVyc2lvbihlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyB0byBwcm9jZXNzIHRoZSBlbGVtZW50cyBmcm9tIGEgYnVuZGxlLCBsb2FkIHRoZW0gaW50byBsb2NhbFxuICogc3RvcmFnZSBhbmQgcHJvdmlkZSBwcm9ncmVzcyB1cGRhdGUgd2hpbGUgbG9hZGluZy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQnVuZGxlTG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMudGEgPSBlLCB0aGlzLmxvY2FsU3RvcmUgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSBuLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgcXVlcmllcyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5xdWVyaWVzID0gW10sIFxuICAgICAgICAvKiogQmF0Y2hlZCBkb2N1bWVudHMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMuZG9jdW1lbnRzID0gW10sIFxuICAgICAgICAvKiogVGhlIGNvbGxlY3Rpb24gZ3JvdXBzIGFmZmVjdGVkIGJ5IHRoaXMgYnVuZGxlLiAqL1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cHMgPSBuZXcgU2V0LCB0aGlzLnByb2dyZXNzID0gX19QUklWQVRFX2J1bmRsZUluaXRpYWxQcm9ncmVzcyhlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBlbGVtZW50IGZyb20gdGhlIGJ1bmRsZSB0byB0aGUgbG9hZGVyLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIG5ldyBwcm9ncmVzcyBpZiBhZGRpbmcgdGhlIGVsZW1lbnQgbGVhZHMgdG8gYSBuZXcgcHJvZ3Jlc3MsXG4gICAgICogb3RoZXJ3aXNlIHJldHVybnMgbnVsbC5cbiAgICAgKi8gICAgbmEoZSkge1xuICAgICAgICB0aGlzLnByb2dyZXNzLmJ5dGVzTG9hZGVkICs9IGUuYnl0ZUxlbmd0aDtcbiAgICAgICAgbGV0IHQgPSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZDtcbiAgICAgICAgaWYgKGUuWF8ubmFtZWRRdWVyeSkgdGhpcy5xdWVyaWVzLnB1c2goZS5YXy5uYW1lZFF1ZXJ5KTsgZWxzZSBpZiAoZS5YXy5kb2N1bWVudE1ldGFkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogZS5YXy5kb2N1bWVudE1ldGFkYXRhXG4gICAgICAgICAgICB9KSwgZS5YXy5kb2N1bWVudE1ldGFkYXRhLmV4aXN0cyB8fCArK3Q7XG4gICAgICAgICAgICBjb25zdCBuID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZS5YXy5kb2N1bWVudE1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXBzLmFkZChuLmdldChuLmxlbmd0aCAtIDIpKTtcbiAgICAgICAgfSBlbHNlIGUuWF8uZG9jdW1lbnQgJiYgKHRoaXMuZG9jdW1lbnRzW3RoaXMuZG9jdW1lbnRzLmxlbmd0aCAtIDFdLmRvY3VtZW50ID0gZS5YXy5kb2N1bWVudCwgXG4gICAgICAgICsrdCk7XG4gICAgICAgIHJldHVybiB0ICE9PSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA/ICh0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA9IHQsIFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2dyZXNzKSkgOiBudWxsO1xuICAgIH1cbiAgICByYShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgTWFwLCBuID0gbmV3IF9fUFJJVkFURV9CdW5kbGVDb252ZXJ0ZXJJbXBsKHRoaXMuc2VyaWFsaXplcik7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBlKSBpZiAoci5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbi5JcyhyLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHIubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSAodC5nZXQobikgfHwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpLmFkZChlKTtcbiAgICAgICAgICAgICAgICB0LnNldChuLCByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBwcm9ncmVzcyB0byAnU3VjY2VzcycgYW5kIHJldHVybiB0aGUgdXBkYXRlZCBwcm9ncmVzcy5cbiAgICAgKi8gICAgYXN5bmMgY29tcGxldGUoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFwcGx5QnVuZGxlZERvY3VtZW50cyh0aGlzLmxvY2FsU3RvcmUsIG5ldyBfX1BSSVZBVEVfQnVuZGxlQ29udmVydGVySW1wbCh0aGlzLnNlcmlhbGl6ZXIpLCB0aGlzLmRvY3VtZW50cywgdGhpcy50YS5pZCksIHQgPSB0aGlzLnJhKHRoaXMuZG9jdW1lbnRzKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMucXVlcmllcykgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVTYXZlTmFtZWRRdWVyeSh0aGlzLmxvY2FsU3RvcmUsIGUsIHQuZ2V0KGUubmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcy50YXNrU3RhdGUgPSBcIlN1Y2Nlc3NcIiwge1xuICAgICAgICAgICAgcHJvZ3Jlc3M6IHRoaXMucHJvZ3Jlc3MsXG4gICAgICAgICAgICBpYTogdGhpcy5jb2xsZWN0aW9uR3JvdXBzLFxuICAgICAgICAgICAgc2E6IGVcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIGluaXRpYWwgcHJvZ3Jlc3Mgb2ZcbiAqIGxvYWRpbmcgYSBidW5kbGUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2J1bmRsZUluaXRpYWxQcm9ncmVzcyhlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGFza1N0YXRlOiBcIlJ1bm5pbmdcIixcbiAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiAwLFxuICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgdG90YWxEb2N1bWVudHM6IGUudG90YWxEb2N1bWVudHMsXG4gICAgICAgIHRvdGFsQnl0ZXM6IGUudG90YWxCeXRlc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRoYXQgdGhlIGxvYWRpbmdcbiAqIGhhcyBzdWNjZWVkZWQuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfQWRkZWRMaW1ib0RvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9SZW1vdmVkTGltYm9Eb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtleSA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXQgZG9jcyBhcmUgaW5cbiAqIGEgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzIHRvIGRvY3MsIGFuZCBhcHBsaWVzXG4gKiB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0IHBvc3NpYmxlIHJlc3VsdHMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1ZpZXcge1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8qKiBEb2N1bWVudHMgaW5jbHVkZWQgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBlLCB0aGlzLm9hID0gdCwgdGhpcy5fYSA9IG51bGwsIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB3aGV0aGVyIHRoZSB2aWV3IGlzIGN1cnJlbnQgd2l0aCB0aGUgYmFja2VuZC4gQSB2aWV3IGlzIGNvbnNpZGVyZWRcbiAgICAgICAgICogY3VycmVudCBhZnRlciBpdCBoYXMgc2VlbiB0aGUgY3VycmVudCBmbGFnIGZyb20gdGhlIGJhY2tlbmQgYW5kIGRpZCBub3RcbiAgICAgICAgICogbG9zZSBjb25zaXN0ZW5jeSB3aXRoaW4gdGhlIHdhdGNoIHN0cmVhbSAoZS5nLiBiZWNhdXNlIG9mIGFuIGV4aXN0ZW5jZVxuICAgICAgICAgKiBmaWx0ZXIgbWlzbWF0Y2gpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIFxuICAgICAgICAvKiogRG9jdW1lbnRzIGluIHRoZSB2aWV3IGJ1dCBub3QgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICAgICAgdGhpcy5hYSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCBcbiAgICAgICAgLyoqIERvY3VtZW50IEtleXMgdGhhdCBoYXZlIGxvY2FsIGNoYW5nZXMgKi9cbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCB0aGlzLnVhID0gX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvcihlKSwgXG4gICAgICAgIHRoaXMuY2EgPSBuZXcgRG9jdW1lbnRTZXQodGhpcy51YSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcmVtb3RlIGRvY3VtZW50cyB0aGF0IHRoZSBzZXJ2ZXIgaGFzIHRvbGQgdXMgYmVsb25ncyB0byB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aFxuICAgICAqIHRoaXMgdmlldy5cbiAgICAgKi8gICAgZ2V0IGxhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHNldCBvZiBkb2MgY2hhbmdlcywgYXBwbGllcyB0aGUgcXVlcnkgbGltaXQsIGFuZCBjb21wdXRlc1xuICAgICAqIHdoYXQgdGhlIG5ldyByZXN1bHRzIHNob3VsZCBiZSwgd2hhdCB0aGUgY2hhbmdlcyB3ZXJlLCBhbmQgd2hldGhlciB3ZSBtYXlcbiAgICAgKiBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGxvY2FsIGNhY2hlIGZvciBtb3JlIHJlc3VsdHMuIERvZXMgbm90IG1ha2UgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBkb2MgY2hhbmdlcyB0byBhcHBseSB0byB0aGlzIHZpZXcuXG4gICAgICogQHBhcmFtIHByZXZpb3VzQ2hhbmdlcyAtIElmIHRoaXMgaXMgYmVpbmcgY2FsbGVkIHdpdGggYSByZWZpbGwsIHRoZW4gc3RhcnRcbiAgICAgKiAgICAgICAgd2l0aCB0aGlzIHNldCBvZiBkb2NzIGFuZCBjaGFuZ2VzIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAgICAgKiBAcmV0dXJucyBhIG5ldyBzZXQgb2YgZG9jcywgY2hhbmdlcywgYW5kIHJlZmlsbCBmbGFnLlxuICAgICAqLyAgICBoYShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ID8gdC5QYSA6IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRDaGFuZ2VTZXQsIHIgPSB0ID8gdC5jYSA6IHRoaXMuY2E7XG4gICAgICAgIGxldCBpID0gdCA/IHQubXV0YXRlZEtleXMgOiB0aGlzLm11dGF0ZWRLZXlzLCBzID0gciwgbyA9ICExO1xuICAgICAgICAvLyBUcmFjayB0aGUgbGFzdCBkb2MgaW4gYSAoZnVsbCkgbGltaXQuIFRoaXMgaXMgbmVjZXNzYXJ5LCBiZWNhdXNlIHNvbWVcbiAgICAgICAgLy8gdXBkYXRlIChhIGRlbGV0ZSwgb3IgYW4gdXBkYXRlIG1vdmluZyBhIGRvYyBwYXN0IHRoZSBvbGQgbGltaXQpIG1pZ2h0XG4gICAgICAgIC8vIG1lYW4gdGhlcmUgaXMgc29tZSBvdGhlciBkb2N1bWVudCBpbiB0aGUgbG9jYWwgY2FjaGUgdGhhdCBlaXRoZXIgc2hvdWxkXG4gICAgICAgIC8vIGNvbWUgKDEpIGJldHdlZW4gdGhlIG9sZCBsYXN0IGxpbWl0IGRvYyBhbmQgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGVcbiAgICAgICAgLy8gY2FzZSBvZiB1cGRhdGVzLCBvciAoMikgYWZ0ZXIgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGUgY2FzZSBvZlxuICAgICAgICAvLyBkZWxldGVzLiBTbyB3ZSBrZWVwIHRoaXMgZG9jIGF0IHRoZSBvbGQgbGltaXQgdG8gY29tcGFyZSB0aGUgdXBkYXRlcyB0by5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG5ldmVyIGdldCB1c2VkIGluIGEgcmVmaWxsICh3aGVuIHByZXZpb3VzQ2hhbmdlcyBpc1xuICAgICAgICAvLyBzZXQpLCBiZWNhdXNlIHRoZXJlIHdpbGwgb25seSBiZSBhZGRzIC0tIG5vIGRlbGV0ZXMgb3IgdXBkYXRlcy5cbiAgICAgICAgY29uc3QgXyA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyA9PT0gdGhpcy5xdWVyeS5saW1pdFR5cGUgJiYgci5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gci5sYXN0KCkgOiBudWxsLCBhID0gXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlICYmIHIuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHIuZmlyc3QoKSA6IG51bGw7XG4gICAgICAgIC8vIERyb3AgZG9jdW1lbnRzIG91dCB0byBtZWV0IGxpbWl0L2xpbWl0VG9MYXN0IHJlcXVpcmVtZW50LlxuICAgICAgICBpZiAoZS5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9IHIuZ2V0KGUpLCBjID0gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyh0aGlzLnF1ZXJ5LCB0KSA/IHQgOiBudWxsLCBsID0gISF1ICYmIHRoaXMubXV0YXRlZEtleXMuaGFzKHUua2V5KSwgaCA9ICEhYyAmJiAoYy5oYXNMb2NhbE11dGF0aW9ucyB8fCBcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgY29uc2lkZXIgY29tbWl0dGVkIG11dGF0aW9ucyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZVxuICAgICAgICAgICAgLy8gbXV0YXRlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgdGhpcy5tdXRhdGVkS2V5cy5oYXMoYy5rZXkpICYmIGMuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcbiAgICAgICAgICAgIGxldCBQID0gITE7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodSAmJiBjKSB7XG4gICAgICAgICAgICAgICAgdS5kYXRhLmlzRXF1YWwoYy5kYXRhKSA/IGwgIT09IGggJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGNcbiAgICAgICAgICAgICAgICB9KSwgUCA9ICEwKSA6IHRoaXMuSWEodSwgYykgfHwgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGNcbiAgICAgICAgICAgICAgICB9KSwgUCA9ICEwLCAoXyAmJiB0aGlzLnVhKGMsIF8pID4gMCB8fCBhICYmIHRoaXMudWEoYywgYSkgPCAwKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBkb2MgbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGxpbWl0IHRvIG91dHNpZGUgdGhlIGxpbWl0LlxuICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICB9IGVsc2UgIXUgJiYgYyA/IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogY1xuICAgICAgICAgICAgfSksIFAgPSAhMCkgOiB1ICYmICFjICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB1XG4gICAgICAgICAgICB9KSwgUCA9ICEwLCAoXyB8fCBhKSAmJiAoXG4gICAgICAgICAgICAvLyBBIGRvYyB3YXMgcmVtb3ZlZCBmcm9tIGEgZnVsbCBsaW1pdCBxdWVyeS4gV2UnbGwgbmVlZCB0b1xuICAgICAgICAgICAgLy8gcmVxdWVyeSBmcm9tIHRoZSBsb2NhbCBjYWNoZSB0byBzZWUgaWYgd2Uga25vdyBhYm91dCBzb21lIG90aGVyXG4gICAgICAgICAgICAvLyBkb2MgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHJlc3VsdHMuXG4gICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIFAgJiYgKGMgPyAocyA9IHMuYWRkKGMpLCBpID0gaCA/IGkuYWRkKGUpIDogaS5kZWxldGUoZSkpIDogKHMgPSBzLmRlbGV0ZShlKSwgaSA9IGkuZGVsZXRlKGUpKSk7XG4gICAgICAgIH0pKSwgbnVsbCAhPT0gdGhpcy5xdWVyeS5saW1pdCkgZm9yICg7cy5zaXplID4gdGhpcy5xdWVyeS5saW1pdDsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSA/IHMubGFzdCgpIDogcy5maXJzdCgpO1xuICAgICAgICAgICAgcyA9IHMuZGVsZXRlKGUua2V5KSwgaSA9IGkuZGVsZXRlKGUua2V5KSwgbi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhOiBzLFxuICAgICAgICAgICAgUGE6IG4sXG4gICAgICAgICAgICBlczogbyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiBpXG4gICAgICAgIH07XG4gICAgfVxuICAgIElhKGUsIHQpIHtcbiAgICAgICAgLy8gV2Ugc3VwcHJlc3MgdGhlIGluaXRpYWwgY2hhbmdlIGV2ZW50IGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIG1vZGlmaWVkIGFzXG4gICAgICAgIC8vIHBhcnQgb2YgYSB3cml0ZSBhY2tub3dsZWRnbWVudCAoZS5nLiB3aGVuIHRoZSB2YWx1ZSBvZiBhIHNlcnZlciB0cmFuc2Zvcm1cbiAgICAgICAgLy8gaXMgYXBwbGllZCkgYXMgV2F0Y2ggd2lsbCBzZW5kIHVzIHRoZSBzYW1lIGRvY3VtZW50IGFnYWluLlxuICAgICAgICAvLyBCeSBzdXBwcmVzc2luZyB0aGUgZXZlbnQsIHdlIG9ubHkgcmFpc2UgdHdvIHVzZXIgdmlzaWJsZSBldmVudHMgKG9uZSB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkgaW5zdGVhZCBvZiB0aHJlZVxuICAgICAgICAvLyAob25lIHdpdGggYGhhc1BlbmRpbmdXcml0ZXNgLCB0aGUgbW9kaWZpZWQgZG9jdW1lbnQgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpLlxuICAgICAgICByZXR1cm4gZS5oYXNMb2NhbE11dGF0aW9ucyAmJiB0Lmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiAhdC5oYXNMb2NhbE11dGF0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBWaWV3RG9jdW1lbnRDaGFuZ2VzIGFuZCBvcHRpb25hbGx5IHVwZGF0ZXNcbiAgICAgKiBsaW1ibyBkb2NzIGFuZCBzeW5jIHN0YXRlIGZyb20gdGhlIHByb3ZpZGVkIHRhcmdldCBjaGFuZ2UuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgc2V0IG9mIGNoYW5nZXMgdG8gbWFrZSB0byB0aGUgdmlldydzIGRvY3MuXG4gICAgICogQHBhcmFtIHVwZGF0ZUxpbWJvRG9jdW1lbnRzIC0gV2hldGhlciB0byB1cGRhdGUgbGltYm8gZG9jdW1lbnRzIGJhc2VkIG9uXG4gICAgICogICAgICAgIHRoaXMgY2hhbmdlLlxuICAgICAqIEBwYXJhbSB0YXJnZXRDaGFuZ2UgLSBBIHRhcmdldCBjaGFuZ2UgdG8gYXBwbHkgZm9yIGNvbXB1dGluZyBsaW1ibyBkb2NzIGFuZFxuICAgICAqICAgICAgICBzeW5jIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFZpZXdDaGFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gZG9jcywgY2hhbmdlcywgYW5kIHN5bmMgc3RhdGUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGUgaU9TL0FuZHJvaWQgY2xpZW50cyBhbHdheXMgY29tcHV0ZSBsaW1ibyBkb2N1bWVudCBjaGFuZ2VzLlxuICAgIGFwcGx5Q2hhbmdlcyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmNhO1xuICAgICAgICB0aGlzLmNhID0gZS5jYSwgdGhpcy5tdXRhdGVkS2V5cyA9IGUubXV0YXRlZEtleXM7XG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXG4gICAgICAgIGNvbnN0IGkgPSBlLlBhLnFfKCk7XG4gICAgICAgIGkuc29ydCgoKGUsIHQpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQ2hhbmdlVHlwZShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gOlxuICAgICAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gb3JkZXIoZSkgLSBvcmRlcih0KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAoZS50eXBlLCB0LnR5cGUpIHx8IHRoaXMudWEoZS5kb2MsIHQuZG9jKSkpLCB0aGlzLmRhKG4pO1xuICAgICAgICBjb25zdCBzID0gdCA/IHRoaXMuVGEoKSA6IFtdLCBvID0gMCA9PT0gdGhpcy5hYS5zaXplICYmIHRoaXMuY3VycmVudCA/IDEgLyogU3luY1N0YXRlLlN5bmNlZCAqLyA6IDAgLyogU3luY1N0YXRlLkxvY2FsICovICwgXyA9IG8gIT09IHRoaXMuX2E7XG4gICAgICAgIGlmICh0aGlzLl9hID0gbywgMCAhPT0gaS5sZW5ndGggfHwgXykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzbmFwc2hvdDogbmV3IFZpZXdTbmFwc2hvdCh0aGlzLnF1ZXJ5LCBlLmNhLCByLCBpLCBlLm11dGF0ZWRLZXlzLCAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyA9PT0gbywgXywgXG4gICAgICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExLCAhIW4gJiYgbi5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSxcbiAgICAgICAgICAgICAgICBFYTogc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBjaGFuZ2VzXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBFYTogc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgdmlldywgcG90ZW50aWFsbHkgZ2VuZXJhdGluZyBhXG4gICAgICogVmlld0NoYW5nZSBpZiB0aGUgdmlldydzIHN5bmNTdGF0ZSBjaGFuZ2VzIGFzIGEgcmVzdWx0LlxuICAgICAqLyAgICBVXyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyA9PT0gZSA/IChcbiAgICAgICAgLy8gSWYgd2UncmUgb2ZmbGluZSwgc2V0IGBjdXJyZW50YCB0byBmYWxzZSBhbmQgdGhlbiBjYWxsIGFwcGx5Q2hhbmdlcygpXG4gICAgICAgIC8vIHRvIHJlZnJlc2ggb3VyIHN5bmNTdGF0ZSBhbmQgZ2VuZXJhdGUgYSBWaWV3Q2hhbmdlIGFzIGFwcHJvcHJpYXRlLiBXZVxuICAgICAgICAvLyBhcmUgZ3VhcmFudGVlZCB0byBnZXQgYSBuZXcgVGFyZ2V0Q2hhbmdlIHRoYXQgc2V0cyBgY3VycmVudGAgYmFjayB0b1xuICAgICAgICAvLyB0cnVlIG9uY2UgdGhlIGNsaWVudCBpcyBiYWNrIG9ubGluZS5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIHRoaXMuYXBwbHlDaGFuZ2VzKHtcbiAgICAgICAgICAgIGNhOiB0aGlzLmNhLFxuICAgICAgICAgICAgUGE6IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRDaGFuZ2VTZXQsXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogdGhpcy5tdXRhdGVkS2V5cyxcbiAgICAgICAgICAgIGVzOiAhMVxuICAgICAgICB9LCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKSkgOiB7XG4gICAgICAgICAgICBFYTogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxuICAgICAqLyAgICBBYShlKSB7XG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxuICAgICAgICByZXR1cm4gIXRoaXMub2EuaGFzKGUpICYmIChcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxuICAgICAgICAhIXRoaXMuY2EuaGFzKGUpICYmICF0aGlzLmNhLmdldChlKS5oYXNMb2NhbE11dGF0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cbiAgICAgKi8gICAgZGEoZSkge1xuICAgICAgICBlICYmIChlLmFkZGVkRG9jdW1lbnRzLmZvckVhY2goKGUgPT4gdGhpcy5vYSA9IHRoaXMub2EuYWRkKGUpKSksIGUubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaCgoZSA9PiB7fSkpLCBcbiAgICAgICAgZS5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goKGUgPT4gdGhpcy5vYSA9IHRoaXMub2EuZGVsZXRlKGUpKSksIHRoaXMuY3VycmVudCA9IGUuY3VycmVudCk7XG4gICAgfVxuICAgIFRhKCkge1xuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSByZXR1cm4gW107XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5hYTtcbiAgICAgICAgdGhpcy5hYSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCB0aGlzLmNhLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5BYShlLmtleSkgJiYgKHRoaXMuYWEgPSB0aGlzLmFhLmFkZChlLmtleSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIERpZmYgdGhlIG5ldyBsaW1ibyBkb2NzIHdpdGggdGhlIG9sZCBsaW1ibyBkb2NzLlxuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hYS5oYXMoZSkgfHwgdC5wdXNoKG5ldyBfX1BSSVZBVEVfUmVtb3ZlZExpbWJvRG9jdW1lbnQoZSkpO1xuICAgICAgICB9KSksIHRoaXMuYWEuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBlLmhhcyhuKSB8fCB0LnB1c2gobmV3IF9fUFJJVkFURV9BZGRlZExpbWJvRG9jdW1lbnQobikpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcgd2l0aCB0aGUgc3RhdGUgcmVhZCBmcm9tXG4gICAgICogcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBXZSB1cGRhdGUgdGhlIHF1ZXJ5IHZpZXcgd2hlbmV2ZXIgYSBjbGllbnQncyBwcmltYXJ5IHN0YXR1cyBjaGFuZ2VzOlxuICAgICAqIC0gV2hlbiBhIGNsaWVudCB0cmFuc2l0aW9ucyBmcm9tIHByaW1hcnkgdG8gc2Vjb25kYXJ5LCBpdCBjYW4gbWlzc1xuICAgICAqICAgTG9jYWxTdG9yYWdlIHVwZGF0ZXMgYW5kIGl0cyBxdWVyeSB2aWV3cyBtYXkgdGVtcG9yYXJpbHkgbm90IGJlXG4gICAgICogICBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgKiAtIEZvciBzZWNvbmRhcnkgdG8gcHJpbWFyeSB0cmFuc2l0aW9ucywgdGhlIGNsaWVudCBuZWVkcyB0byB1cGRhdGUgdGhlIGxpc3RcbiAgICAgKiAgIG9mIGBzeW5jZWREb2N1bWVudHNgIHNpbmNlIHNlY29uZGFyeSBjbGllbnRzIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3c1xuICAgICAqICAgYmFzZWQgcHVyZWx5IG9uIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5kb2N1bWVudHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5IGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBMb2NhbFN0b3JlLlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZVxuICAgICAqIHF1ZXJ5IGFjY29yZGluZyB0byB0aGUgYmFja2VuZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBWaWV3Q2hhbmdlIHRoYXQgcmVzdWx0ZWQgZnJvbSB0aGlzIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIFJhKGUpIHtcbiAgICAgICAgdGhpcy5vYSA9IGUuUHMsIHRoaXMuYWEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuaGEoZS5kb2N1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXModCwgLyp1cGRhdGVMaW1ib0RvY3VtZW50cz0qLyAhMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIHRoaXMgcXVlcnkgd2FzIGp1c3QgbGlzdGVuZWQgdG8uIENvbnRhaW5zXG4gICAgICogYSBkb2N1bWVudCBhZGQgZm9yIGV2ZXJ5IGV4aXN0aW5nIGRvY3VtZW50IGFuZCB0aGUgYGZyb21DYWNoZWAgYW5kXG4gICAgICogYGhhc1BlbmRpbmdXcml0ZXNgIHN0YXR1cyBvZiB0aGUgYWxyZWFkeSBlc3RhYmxpc2hlZCB2aWV3LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgVmEoKSB7XG4gICAgICAgIHJldHVybiBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy5jYSwgdGhpcy5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IHRoaXMuX2EsIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyk7XG4gICAgfVxufVxuXG4vKipcbiAqIFF1ZXJ5VmlldyBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgdGhhdCBTeW5jRW5naW5lIG5lZWRzIHRvIGtlZXAgdHJhY2sgb2YgZm9yXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9RdWVyeVZpZXcge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBpdHNlbGYuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBudW1iZXIgY3JlYXRlZCBieSB0aGUgY2xpZW50IHRoYXQgaXMgdXNlZCBpbiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0gdG8gaWRlbnRpZnkgdGhpcyBxdWVyeS5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgdmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdFxuICAgICAqIGRvY3MgYXJlIGluIHRoZSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMsXG4gICAgICogYW5kIGFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdFxuICAgICAqIHBvc3NpYmxlIHJlc3VsdHMuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gZSwgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMudmlldyA9IG47XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIGEgbGltYm8gcmVzb2x1dGlvbi4gKi8gY2xhc3MgTGltYm9SZXNvbHV0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGEgZG9jdW1lbnQuIFRoaXMgaXMgdXNlZCBpblxuICAgICAgICAgKiBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KCkgYW5kIHVsdGltYXRlbHkgdXNlZCBieSBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgdG9cbiAgICAgICAgICogZGVjaWRlIHdoZXRoZXIgaXQgbmVlZHMgdG8gbWFudWZhY3R1cmUgYSBkZWxldGUgZXZlbnQgZm9yIHRoZSB0YXJnZXQgb25jZVxuICAgICAgICAgKiB0aGUgdGFyZ2V0IGlzIENVUlJFTlQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1hID0gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBTeW5jRW5naW5lYCBjb29yZGluYXRpbmcgd2l0aCBvdGhlciBwYXJ0cyBvZiBTREsuXG4gKlxuICogVGhlIHBhcnRzIG9mIFN5bmNFbmdpbmUgdGhhdCBhY3QgYXMgYSBjYWxsYmFjayB0byBSZW1vdGVTdG9yZSBuZWVkIHRvIGJlXG4gKiByZWdpc3RlcmVkIGluZGl2aWR1YWxseS4gVGhpcyBpcyBkb25lIGluIGBzeW5jRW5naW5lV3JpdGUoKWAgYW5kXG4gKiBgc3luY0VuZ2luZUxpc3RlbigpYCAoYXMgd2VsbCBhcyBgYXBwbHlQcmltYXJ5U3RhdGUoKWApIGFzIHRoZXNlIG1ldGhvZHNcbiAqIHNlcnZlIGFzIGVudHJ5IHBvaW50cyB0byBSZW1vdGVTdG9yZSdzIGZ1bmN0aW9uYWxpdHkuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi8gY2xhc3MgX19QUklWQVRFX1N5bmNFbmdpbmVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgciwgaSwgcykge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLnJlbW90ZVN0b3JlID0gdCwgdGhpcy5ldmVudE1hbmFnZXIgPSBuLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gciwgXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBpLCB0aGlzLm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zID0gcywgdGhpcy5mYSA9IHt9LCB0aGlzLmdhID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlRdWVyeShlKSksIF9fUFJJVkFURV9xdWVyeUVxdWFscyksIFxuICAgICAgICB0aGlzLnBhID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUga2V5cyBvZiBkb2N1bWVudHMgdGhhdCBhcmUgaW4gbGltYm8gZm9yIHdoaWNoIHdlIGhhdmVuJ3QgeWV0IHN0YXJ0ZWQgYVxuICAgICAgICAgKiBsaW1ibyByZXNvbHV0aW9uIHF1ZXJ5LiBUaGUgc3RyaW5ncyBpbiB0aGlzIHNldCBhcmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICAgICAqIGBrZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKWAgd2hlcmUgYGtleWAgaXMgYSBgRG9jdW1lbnRLZXlgIG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGBTZXRgIHR5cGUgd2FzIGNob3NlbiBiZWNhdXNlIGl0IHByb3ZpZGVzIGVmZmljaWVudCBsb29rdXAgYW5kIHJlbW92YWxcbiAgICAgICAgICogb2YgYXJiaXRyYXJ5IGVsZW1lbnRzIGFuZCBpdCBhbHNvIG1haW50YWlucyBpbnNlcnRpb24gb3JkZXIsIHByb3ZpZGluZyB0aGVcbiAgICAgICAgICogZGVzaXJlZCBxdWV1ZS1saWtlIEZJRk8gc2VtYW50aWNzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55YSA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIHRhcmdldCBJRCBmb3IgZWFjaCBkb2N1bWVudCB0aGF0IGlzIGluIGxpbWJvIHdpdGggYW5cbiAgICAgICAgICogYWN0aXZlIHRhcmdldC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2EgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBpbmZvcm1hdGlvbiBhYm91dCBhbiBhY3RpdmUgbGltYm8gcmVzb2x1dGlvbiBmb3IgZWFjaFxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0IElEIHRoYXQgd2FzIHN0YXJ0ZWQgZm9yIHRoZSBwdXJwb3NlIG9mIGxpbWJvIHJlc29sdXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlNhID0gbmV3IE1hcCwgdGhpcy5iYSA9IG5ldyBfX1BSSVZBVEVfUmVmZXJlbmNlU2V0LCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNvbXBsZXRpb24gaGFuZGxlcnMsIGluZGV4ZWQgYnkgVXNlciBhbmQgQmF0Y2hJZC4gKi9cbiAgICAgICAgdGhpcy5EYSA9IHt9LCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBhbGwgcGVuZGluZyB3cml0ZXMgdG8gYmUgYWNrbm93bGVkZ2VkLiAqL1xuICAgICAgICB0aGlzLkNhID0gbmV3IE1hcCwgdGhpcy52YSA9IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvci5MbigpLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICAvLyBUaGUgcHJpbWFyeSBzdGF0ZSBpcyBzZXQgdG8gYHRydWVgIG9yIGBmYWxzZWAgaW1tZWRpYXRlbHkgYWZ0ZXIgRmlyZXN0b3JlXG4gICAgICAgIC8vIHN0YXJ0dXAuIEluIHRoZSBpbnRlcmltLCBhIGNsaWVudCBzaG91bGQgb25seSBiZSBjb25zaWRlcmVkIHByaW1hcnkgaWZcbiAgICAgICAgLy8gYGlzUHJpbWFyeWAgaXMgdHJ1ZS5cbiAgICAgICAgdGhpcy5GYSA9IHZvaWQgMDtcbiAgICB9XG4gICAgZ2V0IGlzUHJpbWFyeUNsaWVudCgpIHtcbiAgICAgICAgcmV0dXJuICEwID09PSB0aGlzLkZhO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWF0ZXMgdGhlIG5ldyBsaXN0ZW4sIHJlc29sdmVzIHByb21pc2Ugd2hlbiBsaXN0ZW4gZW5xdWV1ZWQgdG8gdGhlXG4gKiBzZXJ2ZXIuIEFsbCB0aGUgc3Vic2VxdWVudCB2aWV3IHNuYXBzaG90cyBvciBlcnJvcnMgYXJlIHNlbnQgdG8gdGhlXG4gKiBzdWJzY3JpYmVkIGhhbmRsZXJzLiBSZXR1cm5zIHRoZSBpbml0aWFsIHNuYXBzaG90LlxuICovXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKTtcbiAgICBsZXQgciwgaTtcbiAgICBjb25zdCBzID0gbi5nYS5nZXQodCk7XG4gICAgaWYgKHMpIFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2l0aCBNdWx0aS1UYWIgV2ViLCBpdCBpcyBwb3NzaWJsZSB0aGF0IGEgcXVlcnkgdmlld1xuICAgIC8vIGFscmVhZHkgZXhpc3RzIHdoZW4gRXZlbnRNYW5hZ2VyIGNhbGxzIHVzIGZvciB0aGUgZmlyc3QgdGltZS4gVGhpc1xuICAgIC8vIGhhcHBlbnMgd2hlbiB0aGUgcHJpbWFyeSB0YWIgaXMgYWxyZWFkeSBsaXN0ZW5pbmcgdG8gdGhpcyBxdWVyeSBvblxuICAgIC8vIGJlaGFsZiBvZiBhbm90aGVyIHRhYiBhbmQgdGhlIHVzZXIgb2YgdGhlIHByaW1hcnkgYWxzbyBzdGFydHMgbGlzdGVuaW5nXG4gICAgLy8gdG8gdGhlIHF1ZXJ5LiBFdmVudE1hbmFnZXIgd2lsbCBub3QgaGF2ZSBhbiBhc3NpZ25lZCB0YXJnZXQgSUQgaW4gdGhpc1xuICAgIC8vIGNhc2UgYW5kIGNhbGxzIGBsaXN0ZW5gIHRvIG9idGFpbiB0aGlzIElELlxuICAgIHIgPSBzLnRhcmdldElkLCBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQociksIGkgPSBzLnZpZXcuVmEoKTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KG4ubG9jYWxTdG9yZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpLCBzID0gbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KGUudGFyZ2V0SWQpO1xuICAgICAgICByID0gZS50YXJnZXRJZCwgaSA9IGF3YWl0IF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChuLCB0LCByLCBcImN1cnJlbnRcIiA9PT0gcywgZS5yZXN1bWVUb2tlbiksIFxuICAgICAgICBuLmlzUHJpbWFyeUNsaWVudCAmJiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVMaXN0ZW4obi5yZW1vdGVTdG9yZSwgZSk7XG4gICAgfVxuICAgIHJldHVybiBpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHZpZXcgZm9yIGEgcHJldmlvdXNseSB1bmtub3duIHF1ZXJ5IGFuZCBjb21wdXRlcyBpdHMgaW5pdGlhbFxuICogc25hcHNob3QuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE9uIFdlYiBvbmx5LCB3ZSBpbmplY3QgdGhlIGNvZGUgdGhhdCByZWdpc3RlcnMgbmV3IExpbWJvXG4gICAgLy8gdGFyZ2V0cyBiYXNlZCBvbiB2aWV3IGNoYW5nZXMuIFRoaXMgYWxsb3dzIHVzIHRvIG9ubHkgZGVwZW5kIG9uIExpbWJvXG4gICAgLy8gY2hhbmdlcyB3aGVuIHVzZXIgY29kZSBpbmNsdWRlcyBxdWVyaWVzLlxuICAgIGUuTWEgPSAodCwgbiwgcikgPT4gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RG9jQ2hhbmdlcyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gdC52aWV3LmhhKG4pO1xuICAgICAgICBpLmVzICYmIChcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IGhhcyBhIGxpbWl0IGFuZCBzb21lIGRvY3Mgd2VyZSByZW1vdmVkLCBzbyB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJlLXJ1biB0aGUgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgdG8gbWFrZSBzdXJlIHdlXG4gICAgICAgIC8vIGRpZG4ndCBsb3NlIGFueSBnb29kIGRvY3MgdGhhdCBoYWQgYmVlbiBwYXN0IHRoZSBsaW1pdC5cbiAgICAgICAgaSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5KGUubG9jYWxTdG9yZSwgdC5xdWVyeSwgXG4gICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITEpLnRoZW4oKCh7ZG9jdW1lbnRzOiBlfSkgPT4gdC52aWV3LmhhKGUsIGkpKSkpO1xuICAgICAgICBjb25zdCBzID0gciAmJiByLnRhcmdldENoYW5nZXMuZ2V0KHQudGFyZ2V0SWQpLCBvID0gdC52aWV3LmFwcGx5Q2hhbmdlcyhpLCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIGUuaXNQcmltYXJ5Q2xpZW50LCBzKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zKGUsIHQudGFyZ2V0SWQsIG8uRWEpLCBvLnNuYXBzaG90O1xuICAgIH0oZSwgdCwgbiwgcik7XG4gICAgY29uc3QgcyA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5KGUubG9jYWxTdG9yZSwgdCwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIG8gPSBuZXcgX19QUklWQVRFX1ZpZXcodCwgcy5QcyksIF8gPSBvLmhhKHMuZG9jdW1lbnRzKSwgYSA9IFRhcmdldENoYW5nZS5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UobiwgciAmJiBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovICE9PSBlLm9ubGluZVN0YXRlLCBpKSwgdSA9IG8uYXBwbHlDaGFuZ2VzKF8sIFxuICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyBlLmlzUHJpbWFyeUNsaWVudCwgYSk7XG4gICAgX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MoZSwgbiwgdS5FYSk7XG4gICAgY29uc3QgYyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlWaWV3KHQsIG4sIG8pO1xuICAgIHJldHVybiBlLmdhLnNldCh0LCBjKSwgZS5wYS5oYXMobikgPyBlLnBhLmdldChuKS5wdXNoKHQpIDogZS5wYS5zZXQobiwgWyB0IF0pLCB1LnNuYXBzaG90O1xufVxuXG4vKiogU3RvcHMgbGlzdGVuaW5nIHRvIHRoZSBxdWVyeS4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVVbmxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLmdhLmdldCh0KSwgaSA9IG4ucGEuZ2V0KHIudGFyZ2V0SWQpO1xuICAgIGlmIChpLmxlbmd0aCA+IDEpIHJldHVybiBuLnBhLnNldChyLnRhcmdldElkLCBpLmZpbHRlcigoZSA9PiAhX19QUklWQVRFX3F1ZXJ5RXF1YWxzKGUsIHQpKSkpLCBcbiAgICB2b2lkIG4uZ2EuZGVsZXRlKHQpO1xuICAgIC8vIE5vIG90aGVyIHF1ZXJpZXMgYXJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0LCBjbGVhbiB1cCB0aGUgcXVlcnkgYW5kIHRoZSB0YXJnZXQuXG4gICAgICAgIGlmIChuLmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHJlbW92ZSB0aGUgbG9jYWwgcXVlcnkgdGFyZ2V0IGZpcnN0IHRvIGFsbG93IHVzIHRvIHZlcmlmeVxuICAgICAgICAvLyB3aGV0aGVyIGFueSBvdGhlciBjbGllbnQgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldC5cbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHIudGFyZ2V0SWQpO1xuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzQWN0aXZlUXVlcnlUYXJnZXQoci50YXJnZXRJZCkgfHwgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KG4ubG9jYWxTdG9yZSwgci50YXJnZXRJZCwgXG4gICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuY2xlYXJRdWVyeVN0YXRlKHIudGFyZ2V0SWQpLCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihuLnJlbW90ZVN0b3JlLCByLnRhcmdldElkKSwgXG4gICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChuLCByLnRhcmdldElkKTtcbiAgICAgICAgfSkpLmNhdGNoKF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpO1xuICAgIH0gZWxzZSBfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChuLCByLnRhcmdldElkKSwgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KG4ubG9jYWxTdG9yZSwgci50YXJnZXRJZCwgXG4gICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCk7XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSB3cml0ZSBvZiBsb2NhbCBtdXRhdGlvbiBiYXRjaCB3aGljaCBpbnZvbHZlcyBhZGRpbmcgdGhlXG4gKiB3cml0ZXMgdG8gdGhlIG11dGF0aW9uIHF1ZXVlLCBub3RpZnlpbmcgdGhlIHJlbW90ZSBzdG9yZSBhYm91dCBuZXdcbiAqIG11dGF0aW9ucyBhbmQgcmFpc2luZyBldmVudHMgZm9yIGFueSBjaGFuZ2VzIHRoaXMgd3JpdGUgY2F1c2VkLlxuICpcbiAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgY2FsbCBpcyByZXNvbHZlZCB3aGVuIHRoZSBhYm92ZSBzdGVwc1xuICogaGF2ZSBjb21wbGV0ZWQsICpub3QqIHdoZW4gdGhlIHdyaXRlIHdhcyBhY2tlZCBieSB0aGUgYmFja2VuZC4gVGhlXG4gKiB1c2VyQ2FsbGJhY2sgaXMgcmVzb2x2ZWQgb25jZSB0aGUgd3JpdGUgd2FzIGFja2VkL3JlamVjdGVkIGJ5IHRoZVxuICogYmFja2VuZCAob3IgZmFpbGVkIGxvY2FsbHkgZm9yIGFueSBvdGhlciByZWFzb24pLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lV3JpdGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKGUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVdyaXRlTG9jYWxseShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IFRpbWVzdGFtcC5ub3coKSwgaSA9IHQucmVkdWNlKCgoZSwgdCkgPT4gZS5hZGQodC5rZXkpKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpO1xuICAgICAgICAgICAgbGV0IHMsIG87XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvY2FsbHkgd3JpdGUgbXV0YXRpb25zXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IHtcbiAgICAgICAgICAgICAgICAvLyBGaWd1cmUgb3V0IHdoaWNoIGtleXMgZG8gbm90IGhhdmUgYSByZW1vdGUgdmVyc2lvbiBpbiB0aGUgY2FjaGUsIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBpcyBuZWVkZWQgdG8gY3JlYXRlIHRoZSByaWdodCBvdmVybGF5IG11dGF0aW9uOiBpZiBubyByZW1vdGUgdmVyc2lvblxuICAgICAgICAgICAgICAgIC8vIHByZXNlbnRzLCB3ZSBkbyBub3QgbmVlZCB0byBjcmVhdGUgb3ZlcmxheXMgYXMgcGF0Y2ggbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIC8vIFRPRE8oT3ZlcmxheSk6IElzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBkZXRlcm1pbmUgdGhpcz8gVXNpbmcgdGhlXG4gICAgICAgICAgICAgICAgLy8gIGRvY3VtZW50IHZlcnNpb24gZG9lcyBub3Qgd29yayBiZWNhdXNlIGxvY2FsIG11dGF0aW9ucyBzZXQgdGhlbSBiYWNrXG4gICAgICAgICAgICAgICAgLy8gIHRvIDAuXG4gICAgICAgICAgICAgICAgbGV0IF8gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIGEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5fcy5nZXRFbnRyaWVzKGUsIGkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfID0gZSwgXy5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5pc1ZhbGlkRG9jdW1lbnQoKSB8fCAoYSA9IGEuYWRkKGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldE92ZXJsYXllZERvY3VtZW50cyhlLCBfKSkpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzID0gaTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1pZGVtcG90ZW50IG11dGF0aW9ucyAoc3VjaCBhcyBgRmllbGRWYWx1ZS5pbmNyZW1lbnQoKWApLFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBsYXRlciB1c2VkIHRvIGd1YXJhbnRlZSBjb25zaXN0ZW50IHZhbHVlcyBhbmQgcHJldmVudHMgZmxpY2tlclxuICAgICAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSBiYWNrZW5kIHNlbmRzIHVzIGFuIHVwZGF0ZSB0aGF0IGFscmVhZHkgaW5jbHVkZXMgb3VyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9tdXRhdGlvbkV4dHJhY3RCYXNlVmFsdWUoZSwgcy5nZXQoZS5rZXkpLm92ZXJsYXllZERvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gdCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoZSBiYXNlIHN0YXRlIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgaWYgdGhlcmUncyBzb21lXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBkb2N1bWVudCB0byBvdmVycmlkZSwgc28gdXNlIGEgUHJlY29uZGl0aW9uIG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleGlzdHM9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLmtleSwgdCwgX19QUklWQVRFX2V4dHJhY3RGaWVsZE1hc2sodC52YWx1ZS5tYXBWYWx1ZSksIFByZWNvbmRpdGlvbi5leGlzdHMoITApKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5hZGRNdXRhdGlvbkJhdGNoKGUsIHIsIG8sIHQpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbyA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0LmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHMsIGEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5zYXZlT3ZlcmxheXMoZSwgdC5iYXRjaElkLCByKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkudGhlbigoKCkgPT4gKHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiBvLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgY2hhbmdlczogX19QUklWQVRFX2NvbnZlcnRPdmVybGF5ZWREb2N1bWVudE1hcFRvRG9jdW1lbnRNYXAocylcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0oci5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgci5zaGFyZWRDbGllbnRTdGF0ZS5hZGRQZW5kaW5nTXV0YXRpb24oZS5iYXRjaElkKSwgZnVuY3Rpb24gX19QUklWQVRFX2FkZE11dGF0aW9uQ2FsbGJhY2soZSwgdCwgbikge1xuICAgICAgICAgICAgbGV0IHIgPSBlLkRhW2UuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgICAgICAgICByIHx8IChyID0gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcikpO1xuICAgICAgICAgICAgciA9IHIuaW5zZXJ0KHQsIG4pLCBlLkRhW2UuY3VycmVudFVzZXIudG9LZXkoKV0gPSByO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXG4gKiBpdC5cbiAqLyAociwgZS5iYXRjaElkLCBuKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKHIsIGUuY2hhbmdlcyksIFxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoci5yZW1vdGVTdG9yZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwZXJzaXN0IHRoZSBtdXRhdGlvbiwgd2UgcmVqZWN0IHRoZSB1c2VyIGNhbGxiYWNrIGFuZFxuICAgICAgICAvLyBkb24ndCBzZW5kIHRoZSBtdXRhdGlvbi4gVGhlIHVzZXIgY2FuIHRoZW4gcmV0cnkgdGhlIHdyaXRlLlxuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgXCJGYWlsZWQgdG8gcGVyc2lzdCB3cml0ZVwiKTtcbiAgICAgICAgbi5yZWplY3QodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgb25lIHJlbW90ZSBldmVudCB0byB0aGUgc3luYyBlbmdpbmUsIG5vdGlmeWluZyBhbnkgdmlld3Mgb2YgdGhlXG4gKiBjaGFuZ2VzLCBhbmQgcmVsZWFzaW5nIGFueSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMgdGhhdCB3b3VsZCBiZWNvbWVcbiAqIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgc25hcHNob3QgdmVyc2lvbiB0aGUgcmVtb3RlIGV2ZW50IGNvbnRhaW5zLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlSZW1vdGVFdmVudChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlSZW1vdGVFdmVudFRvTG9jYWxDYWNoZShuLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cbiAgICAgICAgICAgICAgICB0LnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuLlNhLmdldCh0KTtcbiAgICAgICAgICAgIHIgJiYgKFxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBhIGxpbWJvIHJlc29sdXRpb24gbG9va3VwLCBpdCdzIGZvciBhIHNpbmdsZSBkb2N1bWVudFxuICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxuICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5hZGRlZERvY3VtZW50cy5zaXplICsgZS5tb2RpZmllZERvY3VtZW50cy5zaXplICsgZS5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD0gMSksIFxuICAgICAgICAgICAgZS5hZGRlZERvY3VtZW50cy5zaXplID4gMCA/IHIubWEgPSAhMCA6IGUubW9kaWZpZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBfX1BSSVZBVEVfaGFyZEFzc2VydChyLm1hKSA6IGUucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMCAmJiAoX19QUklWQVRFX2hhcmRBc3NlcnQoci5tYSksIFxuICAgICAgICAgICAgci5tYSA9ICExKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUsIHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcbiAqIHRoZSBjaGFuZ2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseU9ubGluZVN0YXRlQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xuICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcbiAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXG4gICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGlmIChyLmlzUHJpbWFyeUNsaWVudCAmJiAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovID09PSBuIHx8ICFyLmlzUHJpbWFyeUNsaWVudCAmJiAxIC8qIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlICovID09PSBuKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgci5nYS5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHIudmlldy5VXyh0KTtcbiAgICAgICAgICAgIGkuc25hcHNob3QgJiYgZS5wdXNoKGkuc25hcHNob3QpO1xuICAgICAgICB9KSksIGZ1bmN0aW9uIF9fUFJJVkFURV9ldmVudE1hbmFnZXJPbk9ubGluZVN0YXRlQ2hhbmdlKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgbi5vbmxpbmVTdGF0ZSA9IHQ7XG4gICAgICAgICAgICBsZXQgciA9ICExO1xuICAgICAgICAgICAgbi5xdWVyaWVzLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG4ubGlzdGVuZXJzKSBcbiAgICAgICAgICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICAgICAgICAgICAgICBlLlVfKHQpICYmIChyID0gITApO1xuICAgICAgICAgICAgfSkpLCByICYmIF9fUFJJVkFURV9yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KG4pO1xuICAgICAgICB9KHIuZXZlbnRNYW5hZ2VyLCB0KSwgZS5sZW5ndGggJiYgci5mYS5jXyhlKSwgci5vbmxpbmVTdGF0ZSA9IHQsIHIuaXNQcmltYXJ5Q2xpZW50ICYmIHIuc2hhcmVkQ2xpZW50U3RhdGUuc2V0T25saW5lU3RhdGUodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlamVjdHMgdGhlIGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldElELiBUaGlzIGNhbiBiZSB0cmlnZ2VyZWQgYnkgdGhlXG4gKiBiYWNrZW5kIGZvciBhbnkgYWN0aXZlIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXRJRCBjb3JyZXNwb25kcyB0byBvbmUgcHJldmlvdXNseSBpbml0aWF0ZWQgYnkgdGhlXG4gKiB1c2VyIGFzIHBhcnQgb2YgVGFyZ2V0RGF0YSBwYXNzZWQgdG8gbGlzdGVuKCkgb24gUmVtb3RlU3RvcmUuXG4gKiBAcGFyYW0gZXJyIC0gQSBkZXNjcmlwdGlvbiBvZiB0aGUgY29uZGl0aW9uIHRoYXQgaGFzIGZvcmNlZCB0aGUgcmVqZWN0aW9uLlxuICogTmVhcmx5IGFsd2F5cyB0aGlzIHdpbGwgYmUgYW4gaW5kaWNhdGlvbiB0aGF0IHRoZSB1c2VyIGlzIG5vIGxvbmdlclxuICogYXV0aG9yaXplZCB0byBzZWUgdGhlIGRhdGEgbWF0Y2hpbmcgdGhlIHRhcmdldC5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVJlamVjdExpc3RlbihlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgci5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKHQsIFwicmVqZWN0ZWRcIiwgbik7XG4gICAgY29uc3QgaSA9IHIuU2EuZ2V0KHQpLCBzID0gaSAmJiBpLmtleTtcbiAgICBpZiAocykge1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogV2UgcmVhbGx5IG9ubHkgc2hvdWxkIGRvIHRoZSBmb2xsb3dpbmcgb24gcGVybWlzc2lvblxuICAgICAgICAvLyBkZW5pZWQgZXJyb3JzLCBidXQgd2UgZG9uJ3QgaGF2ZSB0aGUgY2F1c2UgY29kZSBoZXJlLlxuICAgICAgICAvLyBJdCdzIGEgbGltYm8gZG9jLiBDcmVhdGUgYSBzeW50aGV0aWMgZXZlbnQgc2F5aW5nIGl0IHdhcyBkZWxldGVkLlxuICAgICAgICAvLyBUaGlzIGlzIGtpbmQgb2YgYSBoYWNrLiBJZGVhbGx5LCB3ZSB3b3VsZCBoYXZlIGEgbWV0aG9kIGluIHRoZSBsb2NhbFxuICAgICAgICAvLyBzdG9yZSB0byBwdXJnZSBhIGRvY3VtZW50LiBIb3dldmVyLCBpdCB3b3VsZCBiZSB0cmlja3kgdG8ga2VlcCBhbGwgb2ZcbiAgICAgICAgLy8gdGhlIGxvY2FsIHN0b3JlJ3MgaW52YXJpYW50cyB3aXRoIGFub3RoZXIgbWV0aG9kLlxuICAgICAgICBsZXQgZSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG4gICAgICAgIC8vIFRPRE8oYi8yMTcxODkyMTYpOiBUaGlzIGxpbWJvIGRvY3VtZW50IHNob3VsZCBpZGVhbGx5IGhhdmUgYSByZWFkIHRpbWUsXG4gICAgICAgIC8vIHNvIHRoYXQgaXQgaXMgcGlja2VkIHVwIGJ5IGFueSByZWFkLXRpbWUgYmFzZWQgc2NhbnMuIFRoZSBiYWNrZW5kLFxuICAgICAgICAvLyBob3dldmVyLCBkb2VzIG5vdCBzZW5kIGEgcmVhZCB0aW1lIGZvciB0YXJnZXQgcmVtb3ZhbHMuXG4gICAgICAgICAgICAgICAgZSA9IGUuaW5zZXJ0KHMsIE11dGFibGVEb2N1bWVudC5uZXdOb0RvY3VtZW50KHMsIFNuYXBzaG90VmVyc2lvbi5taW4oKSkpO1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkuYWRkKHMpLCBpID0gbmV3IFJlbW90ZUV2ZW50KFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIHRhcmdldENoYW5nZXM9ICovIG5ldyBNYXAsIFxuICAgICAgICAvKiB0YXJnZXRNaXNtYXRjaGVzPSAqLyBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKSwgZSwgbik7XG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlSZW1vdGVFdmVudChyLCBpKSwgXG4gICAgICAgIC8vIFNpbmNlIHRoaXMgcXVlcnkgZmFpbGVkLCB3ZSB3b24ndCB3YW50IHRvIG1hbnVhbGx5IHVubGlzdGVuIHRvIGl0LlxuICAgICAgICAvLyBXZSBvbmx5IHJlbW92ZSBpdCBmcm9tIGJvb2trZWVwaW5nIGFmdGVyIHdlIHN1Y2Nlc3NmdWxseSBhcHBsaWVkIHRoZVxuICAgICAgICAvLyBSZW1vdGVFdmVudC4gSWYgYGFwcGx5UmVtb3RlRXZlbnQoKWAgdGhyb3dzLCB3ZSB3YW50IHRvIHJlLWxpc3RlbiB0b1xuICAgICAgICAvLyB0aGlzIHF1ZXJ5IHdoZW4gdGhlIFJlbW90ZVN0b3JlIHJlc3RhcnRzIHRoZSBXYXRjaCBzdHJlYW0sIHdoaWNoIHNob3VsZFxuICAgICAgICAvLyByZS10cmlnZ2VyIHRoZSB0YXJnZXQgZmFpbHVyZS5cbiAgICAgICAgci53YSA9IHIud2EucmVtb3ZlKHMpLCByLlNhLmRlbGV0ZSh0KSwgX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMocik7XG4gICAgfSBlbHNlIGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChyLmxvY2FsU3RvcmUsIHQsIFxuICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiBfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChyLCB0LCBuKSkpLmNhdGNoKF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5U3VjY2Vzc2Z1bFdyaXRlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IHQuYmF0Y2guYmF0Y2hJZDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBY2tub3dsZWRnZUJhdGNoKG4ubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0XG4gICAgICAgIC8vIHVwKSwgc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW5cbiAgICAgICAgLy8gYmVmb3JlIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX3Byb2Nlc3NVc2VyQ2FsbGJhY2sobiwgciwgLyplcnJvcj0qLyBudWxsKSwgX19QUklWQVRFX3RyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKG4sIHIpLCBcbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKHIsIFwiYWNrbm93bGVkZ2VkXCIpLCBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUobiwgZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGUpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RGYWlsZWRXcml0ZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVqZWN0QmF0Y2goZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlamVjdCBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5tdXRhdGlvblF1ZXVlLmxvb2t1cE11dGF0aW9uQmF0Y2goZSwgdCkubmV4dCgodCA9PiAoX19QUklWQVRFX2hhcmRBc3NlcnQobnVsbCAhPT0gdCksIFxuICAgICAgICAgICAgICAgIHIgPSB0LmtleXMoKSwgbi5tdXRhdGlvblF1ZXVlLnJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCkpKSkubmV4dCgoKCkgPT4gbi5tdXRhdGlvblF1ZXVlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKGUpKSkubmV4dCgoKCkgPT4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5yZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQoZSwgciwgdCkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzKGUsIHIpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHMoZSwgcikpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdGhlIGxhcmdlc3QgKGxhdGVzdCkgYmF0Y2ggaWQgaW4gbXV0YXRpb24gcXVldWUgdGhhdCBpcyBwZW5kaW5nXG4gKiBzZXJ2ZXIgcmVzcG9uc2UuXG4gKlxuICogUmV0dXJucyBgQkFUQ0hJRF9VTktOT1dOYCBpZiB0aGUgcXVldWUgaXMgZW1wdHkuXG4gKi8gKHIubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0IHVwKSxcbiAgICAgICAgLy8gc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW4gYmVmb3JlXG4gICAgICAgIC8vIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX3Byb2Nlc3NVc2VyQ2FsbGJhY2sociwgdCwgbiksIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhyLCB0KSwgXG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBcInJlamVjdGVkXCIsIG4pLCBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUociwgZSk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB1c2VyIGNhbGxiYWNrIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgcGVuZGluZyBtdXRhdGlvbnMgYXQgdGhlIG1vbWVudCBvZiBjYWxsaW5nXG4gKiBhcmUgYWNrbm93bGVkZ2VkIC5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVJlZ2lzdGVyUGVuZGluZ1dyaXRlc0NhbGxiYWNrKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhuLnJlbW90ZVN0b3JlKSB8fCBfX1BSSVZBVEVfbG9nRGVidWcoXCJTeW5jRW5naW5lXCIsIFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHJldHVybiB0LnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGhpZ2hlc3QgdW5hY2tub3dsZWRnZWQgYmF0Y2ggaWRcIiwgXCJyZWFkb25seVwiLCAoZSA9PiB0Lm11dGF0aW9uUXVldWUuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZChlKSkpO1xuICAgICAgICB9KG4ubG9jYWxTdG9yZSk7XG4gICAgICAgIGlmICgtMSA9PT0gZSkgXG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrIHJpZ2h0IGF3YXkgaWYgdGhlcmUgaXMgbm8gcGVuZGluZyB3cml0ZXMgYXQgdGhlIG1vbWVudC5cbiAgICAgICAgcmV0dXJuIHZvaWQgdC5yZXNvbHZlKCk7XG4gICAgICAgIGNvbnN0IHIgPSBuLkNhLmdldChlKSB8fCBbXTtcbiAgICAgICAgci5wdXNoKHQpLCBuLkNhLnNldChlLCByKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfd3JhcEluVXNlckVycm9ySWZSZWNvdmVyYWJsZShlLCBcIkluaXRpYWxpemF0aW9uIG9mIHdhaXRGb3JQZW5kaW5nV3JpdGVzKCkgb3BlcmF0aW9uIGZhaWxlZFwiKTtcbiAgICAgICAgdC5yZWplY3Qobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBjYWxsYmFja3MgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhpcyBiYXRjaCBpZCB0byBnZXQgYWNrbm93bGVkZ2VkIGJ5IHNlcnZlcixcbiAqIGlmIHRoZXJlIGFyZSBhbnkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGUsIHQpIHtcbiAgICAoZS5DYS5nZXQodCkgfHwgW10pLmZvckVhY2goKGUgPT4ge1xuICAgICAgICBlLnJlc29sdmUoKTtcbiAgICB9KSksIGUuQ2EuZGVsZXRlKHQpO1xufVxuXG4vKiogUmVqZWN0IGFsbCBvdXRzdGFuZGluZyBjYWxsYmFja3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgdG8gY29tcGxldGUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBsZXQgaSA9IHIuRGFbci5jdXJyZW50VXNlci50b0tleSgpXTtcbiAgICAvLyBOT1RFOiBNdXRhdGlvbnMgcmVzdG9yZWQgZnJvbSBwZXJzaXN0ZW5jZSB3b24ndCBoYXZlIGNhbGxiYWNrcywgc28gaXQnc1xuICAgIC8vIG9rYXkgZm9yIHRoZXJlIHRvIGJlIG5vIGNhbGxiYWNrIGZvciB0aGlzIElELlxuICAgICAgICBpZiAoaSkge1xuICAgICAgICBjb25zdCBlID0gaS5nZXQodCk7XG4gICAgICAgIGUgJiYgKG4gPyBlLnJlamVjdChuKSA6IGUucmVzb2x2ZSgpLCBpID0gaS5yZW1vdmUodCkpLCByLkRhW3IuY3VycmVudFVzZXIudG9LZXkoKV0gPSBpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQoZSwgdCwgbiA9IG51bGwpIHtcbiAgICBlLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCk7XG4gICAgZm9yIChjb25zdCByIG9mIGUucGEuZ2V0KHQpKSBlLmdhLmRlbGV0ZShyKSwgbiAmJiBlLmZhLnhhKHIsIG4pO1xuICAgIGlmIChlLnBhLmRlbGV0ZSh0KSwgZS5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgZS5iYS5tcih0KS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUuYmEuY29udGFpbnNLZXkodCkgfHwgXG4gICAgICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgICAgIF9fUFJJVkFURV9yZW1vdmVMaW1ib1RhcmdldChlLCB0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3JlbW92ZUxpbWJvVGFyZ2V0KGUsIHQpIHtcbiAgICBlLnlhLmRlbGV0ZSh0LnBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB0aGUgdGFyZ2V0IGFscmVhZHkgZ290IHJlbW92ZWQgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLiBJbiB0aGF0IGNhc2UsXG4gICAgLy8gdGhlIGtleSB3b24ndCBleGlzdCBpbiBgbGltYm9UYXJnZXRzQnlLZXlgLiBPbmx5IGRvIHRoZSBjbGVhbnVwIGlmIHdlIHN0aWxsIGhhdmUgdGhlIHRhcmdldC5cbiAgICBjb25zdCBuID0gZS53YS5nZXQodCk7XG4gICAgbnVsbCAhPT0gbiAmJiAoX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4oZS5yZW1vdGVTdG9yZSwgbiksIGUud2EgPSBlLndhLnJlbW92ZSh0KSwgXG4gICAgZS5TYS5kZWxldGUobiksIF9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zKGUpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MoZSwgdCwgbikge1xuICAgIGZvciAoY29uc3QgciBvZiBuKSBpZiAociBpbnN0YW5jZW9mIF9fUFJJVkFURV9BZGRlZExpbWJvRG9jdW1lbnQpIGUuYmEuYWRkUmVmZXJlbmNlKHIua2V5LCB0KSwgXG4gICAgX19QUklWQVRFX3RyYWNrTGltYm9DaGFuZ2UoZSwgcik7IGVsc2UgaWYgKHIgaW5zdGFuY2VvZiBfX1BSSVZBVEVfUmVtb3ZlZExpbWJvRG9jdW1lbnQpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIkRvY3VtZW50IG5vIGxvbmdlciBpbiBsaW1ibzogXCIgKyByLmtleSksIGUuYmEucmVtb3ZlUmVmZXJlbmNlKHIua2V5LCB0KTtcbiAgICAgICAgZS5iYS5jb250YWluc0tleShyLmtleSkgfHwgXG4gICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICBfX1BSSVZBVEVfcmVtb3ZlTGltYm9UYXJnZXQoZSwgci5rZXkpO1xuICAgIH0gZWxzZSBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90cmFja0xpbWJvQ2hhbmdlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5rZXksIHIgPSBuLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgZS53YS5nZXQobikgfHwgZS55YS5oYXMocikgfHwgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJOZXcgZG9jdW1lbnQgaW4gbGltYm86IFwiICsgbiksIFxuICAgIGUueWEuYWRkKHIpLCBfX1BSSVZBVEVfcHVtcEVucXVldWVkTGltYm9SZXNvbHV0aW9ucyhlKSk7XG59XG5cbi8qKlxuICogU3RhcnRzIGxpc3RlbnMgZm9yIGRvY3VtZW50cyBpbiBsaW1ibyB0aGF0IGFyZSBlbnF1ZXVlZCBmb3IgcmVzb2x1dGlvbixcbiAqIHN1YmplY3QgdG8gYSBtYXhpbXVtIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLlxuICpcbiAqIFdpdGhvdXQgYm91bmRpbmcgdGhlIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLCB0aGUgc2VydmVyIGNhbiBmYWlsXG4gKiB3aXRoIFwicmVzb3VyY2UgZXhoYXVzdGVkXCIgZXJyb3JzIHdoaWNoIGNhbiBsZWFkIHRvIHBhdGhvbG9naWNhbCBjbGllbnRcbiAqIGJlaGF2aW9yIGFzIHNlZW4gaW4gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvMjY4My5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcHVtcEVucXVldWVkTGltYm9SZXNvbHV0aW9ucyhlKSB7XG4gICAgZm9yICg7ZS55YS5zaXplID4gMCAmJiBlLndhLnNpemUgPCBlLm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOyApIHtcbiAgICAgICAgY29uc3QgdCA9IGUueWEudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICBlLnlhLmRlbGV0ZSh0KTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBEb2N1bWVudEtleShSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0KSksIHIgPSBlLnZhLm5leHQoKTtcbiAgICAgICAgZS5TYS5zZXQociwgbmV3IExpbWJvUmVzb2x1dGlvbihuKSksIGUud2EgPSBlLndhLmluc2VydChuLCByKSwgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKGUucmVtb3RlU3RvcmUsIG5ldyBUYXJnZXREYXRhKF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgobi5wYXRoKSksIHIsIFwiVGFyZ2V0UHVycG9zZUxpbWJvUmVzb2x1dGlvblwiIC8qIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uICovICwgX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlKSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBpID0gW10sIHMgPSBbXSwgbyA9IFtdO1xuICAgIHIuZ2EuaXNFbXB0eSgpIHx8IChyLmdhLmZvckVhY2goKChlLCBfKSA9PiB7XG4gICAgICAgIG8ucHVzaChyLk1hKF8sIHQsIG4pLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHZpZXdzIGlmIHRoZXJlIGFyZSBhY3R1YWwgY2hhbmdlcy5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBjaGFuZ2VzLCBvciB3ZSBhcmUgaGFuZGxpbmcgYSBnbG9iYWwgc25hcHNob3QsIG5vdGlmeVxuICAgICAgICAgICAgLy8gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHF1ZXJ5IHN0YXRlLlxuICAgICAgICAgICAgKGUgfHwgbikgJiYgci5pc1ByaW1hcnlDbGllbnQgJiYgci5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKF8udGFyZ2V0SWQsIChudWxsID09IGUgPyB2b2lkIDAgOiBlLmZyb21DYWNoZSkgPyBcIm5vdC1jdXJyZW50XCIgOiBcImN1cnJlbnRcIiksIFxuICAgICAgICAgICAgZSkge1xuICAgICAgICAgICAgICAgIGkucHVzaChlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX0xvY2FsVmlld0NoYW5nZXMuJGkoXy50YXJnZXRJZCwgZSk7XG4gICAgICAgICAgICAgICAgcy5wdXNoKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpO1xuICAgIH0pKSwgYXdhaXQgUHJvbWlzZS5hbGwobyksIHIuZmEuY18oaSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlTm90aWZ5TG9jYWxWaWV3Q2hhbmdlcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIm5vdGlmeUxvY2FsVmlld0NoYW5nZXNcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godC5RaSwgKHIgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UoZSwgdC50YXJnZXRJZCwgcikpKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LktpLCAociA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZShlLCB0LnRhcmdldElkLCByKSkpKSkpKSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIHRocm93IGU7XG4gICAgICAgICAgICAvLyBJZiBgbm90aWZ5TG9jYWxWaWV3Q2hhbmdlc2AgZmFpbHMsIHdlIGRpZCBub3QgYWR2YW5jZSB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIC8vIG51bWJlciBmb3IgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdHJpZ2dlciB0aGVtIHRvIGJlIGRlbGV0ZWQgZWFybGllciB0aGFuIHRoZXkgb3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyB3b3VsZCBoYXZlLCBidXQgaXQgc2hvdWxkIG5vdCBpbnZhbGlkYXRlIHRoZSBpbnRlZ3JpdHkgb2YgdGhlIGRhdGEuXG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJMb2NhbFN0b3JlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzOiBcIiArIGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRJZDtcbiAgICAgICAgICAgIGlmICghZS5mcm9tQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbi5ycy5nZXQodCksIHIgPSBlLnNuYXBzaG90VmVyc2lvbiwgaSA9IGUud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24ocik7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgbGFzdCBsaW1ibyBmcmVlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5ycyA9IG4ucnMuaW5zZXJ0KHQsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfShyLmxvY2FsU3RvcmUsIHMpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAoIW4uY3VycmVudFVzZXIuaXNFcXVhbCh0KSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTeW5jRW5naW5lXCIsIFwiVXNlciBjaGFuZ2UuIE5ldyB1c2VyOlwiLCB0LnRvS2V5KCkpO1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVIYW5kbGVVc2VyQ2hhbmdlKG4ubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgIG4uY3VycmVudFVzZXIgPSB0LCBcbiAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9yZWplY3RPdXRzdGFuZGluZ1BlbmRpbmdXcml0ZXNDYWxsYmFja3MoZSwgdCkge1xuICAgICAgICAgICAgZS5DYS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoRC5DQU5DRUxMRUQsIHQpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIGUuQ2EuY2xlYXIoKTtcbiAgICAgICAgfShuLCBcIid3YWl0Rm9yUGVuZGluZ1dyaXRlcycgcHJvbWlzZSBpcyByZWplY3RlZCBkdWUgdG8gYSB1c2VyIGNoYW5nZS5cIiksIFxuICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UodCwgZS5yZW1vdmVkQmF0Y2hJZHMsIGUuYWRkZWRCYXRjaElkcyksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShuLCBlLmNzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLlNhLmdldCh0KTtcbiAgICBpZiAociAmJiByLm1hKSByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkuYWRkKHIua2V5KTtcbiAgICB7XG4gICAgICAgIGxldCBlID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIGNvbnN0IHIgPSBuLnBhLmdldCh0KTtcbiAgICAgICAgaWYgKCFyKSByZXR1cm4gZTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuLmdhLmdldCh0KTtcbiAgICAgICAgICAgIGUgPSBlLnVuaW9uV2l0aChyLnZpZXcubGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvbmNpbGUgdGhlIGxpc3Qgb2Ygc3luY2VkIGRvY3VtZW50cyBpbiBhbiBleGlzdGluZyB2aWV3IHdpdGggdGhvc2VcbiAqIGZyb20gcGVyc2lzdGVuY2UuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNocm9uaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShuLmxvY2FsU3RvcmUsIHQucXVlcnksIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gdC52aWV3LlJhKHIpO1xuICAgIHJldHVybiBuLmlzUHJpbWFyeUNsaWVudCAmJiBfX1BSSVZBVEVfdXBkYXRlVHJhY2tlZExpbWJvcyhuLCB0LnRhcmdldElkLCBpLkVhKSwgXG4gICAgaTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgbmV3bHkgY2hhbmdlZCBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgYW5kIHJhaXNlc1xuICogc25hcHNob3RzIGlmIG5lZWRlZC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lU3luY2hyb25pemVXaXRoQ2hhbmdlZERvY3VtZW50cyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV3RG9jdW1lbnRDaGFuZ2VzKG4ubG9jYWxTdG9yZSwgdCkudGhlbigoZSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUobiwgZSkpKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBtdXRhdGlvbiBzdGF0ZSB0byBhbiBleGlzdGluZyBiYXRjaC4gICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseUJhdGNoU3RhdGUoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBzID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVMb29rdXBNdXRhdGlvbkRvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChuLm11dGF0aW9uUXVldWUpO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvb2t1cCBtdXRhdGlvbiBkb2N1bWVudHNcIiwgXCJyZWFkb25seVwiLCAoZSA9PiByLkZuKGUsIHQpLm5leHQoKHQgPT4gdCA/IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKGUsIHQpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCkpKSkpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIHQpO1xuICAgIG51bGwgIT09IHMgPyAoXCJwZW5kaW5nXCIgPT09IG4gPyBcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcbiAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXG4gICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cbiAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoaS5yZW1vdGVTdG9yZSkgOiBcImFja25vd2xlZGdlZFwiID09PSBuIHx8IFwicmVqZWN0ZWRcIiA9PT0gbiA/IChcbiAgICAvLyBOT1RFOiBCb3RoIHRoZXNlIG1ldGhvZHMgYXJlIG5vLW9wcyBmb3IgYmF0Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgZnJvbVxuICAgIC8vIG90aGVyIGNsaWVudHMuXG4gICAgX19QUklWQVRFX3Byb2Nlc3NVc2VyQ2FsbGJhY2soaSwgdCwgciB8fCBudWxsKSwgX19QUklWQVRFX3RyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGksIHQpLCBcbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbW92ZUNhY2hlZE11dGF0aW9uQmF0Y2hNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9kZWJ1Z0Nhc3QoX19QUklWQVRFX2RlYnVnQ2FzdChlKS5tdXRhdGlvblF1ZXVlKS54bih0KTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCB0KSkgOiBmYWlsKCksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShpLCBzKSkgOiBcbiAgICAvLyBBIHRocm90dGxlZCB0YWIgbWF5IG5vdCBoYXZlIHNlZW4gdGhlIG11dGF0aW9uIGJlZm9yZSBpdCB3YXMgY29tcGxldGVkXG4gICAgLy8gYW5kIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUsIGluIHdoaWNoIGNhc2Ugd2Ugd29uJ3QgaGF2ZSBjYWNoZWRcbiAgICAvLyB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzLiBJbiB0aGlzIGNhc2Ugd2UgY2FuIHNhZmVseSBpZ25vcmUgdGhlIHVwZGF0ZVxuICAgIC8vIHNpbmNlIHRoYXQgbWVhbnMgd2UgZGlkbid0IGFwcGx5IHRoZSBtdXRhdGlvbiBsb2NhbGx5IGF0IGFsbCAoaWYgd2VcbiAgICAvLyBoYWQsIHdlIHdvdWxkIGhhdmUgY2FjaGVkIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMpLCBhbmQgc28gd2Ugd2lsbCBqdXN0XG4gICAgLy8gc2VlIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcyB2aWEgbm9ybWFsIHJlbW90ZSBkb2N1bWVudCB1cGRhdGVzXG4gICAgLy8gYXMgYXBwbGljYWJsZS5cbiAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTeW5jRW5naW5lXCIsIFwiQ2Fubm90IGFwcGx5IG11dGF0aW9uIGJhdGNoIHdpdGggaWQ6IFwiICsgdCk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UHJpbWFyeVN0YXRlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAoX19QUklWQVRFX2Vuc3VyZVdhdGNoQ2FsbGJhY2tzKG4pLCBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKG4pLCBcbiAgICAhMCA9PT0gdCAmJiAhMCAhPT0gbi5GYSkge1xuICAgICAgICAvLyBTZWNvbmRhcnkgdGFicyBvbmx5IG1haW50YWluIFZpZXdzIGZvciB0aGVpciBsb2NhbCBsaXN0ZW5lcnMgYW5kIHRoZVxuICAgICAgICAvLyBWaWV3cyBpbnRlcm5hbCBzdGF0ZSBtYXkgbm90IGJlIDEwMCUgcG9wdWxhdGVkIChpbiBwYXJ0aWN1bGFyXG4gICAgICAgIC8vIHNlY29uZGFyeSB0YWJzIGRvbid0IHRyYWNrIHN5bmNlZERvY3VtZW50cywgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhlXG4gICAgICAgIC8vIHNlcnZlciBjb25zaWRlcnMgdG8gYmUgaW4gdGhlIHRhcmdldCkuIFNvIHdoZW4gYSBzZWNvbmRhcnkgYmVjb21lc1xuICAgICAgICAvLyBwcmltYXJ5LCB3ZSBuZWVkIHRvIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHZpZXdzIGZvciBhbGwgdGFyZ2V0c1xuICAgICAgICAvLyBtYXRjaCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgICAgY29uc3QgZSA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCksIHQgPSBhd2FpdCBfX1BSSVZBVEVfc3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMobiwgZS50b0FycmF5KCkpO1xuICAgICAgICBuLkZhID0gITAsIGF3YWl0IF9fUFJJVkFURV9yZW1vdGVTdG9yZUFwcGx5UHJpbWFyeVN0YXRlKG4ucmVtb3RlU3RvcmUsICEwKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIF9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbihuLnJlbW90ZVN0b3JlLCBlKTtcbiAgICB9IGVsc2UgaWYgKCExID09PSB0ICYmICExICE9PSBuLkZhKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IHQgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgbi5wYS5mb3JFYWNoKCgociwgaSkgPT4ge1xuICAgICAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0xvY2FsUXVlcnlUYXJnZXQoaSkgPyBlLnB1c2goaSkgOiB0ID0gdC50aGVuKCgoKSA9PiAoX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQobiwgaSksIFxuICAgICAgICAgICAgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KG4ubG9jYWxTdG9yZSwgaSwgXG4gICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKSkpKSwgX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4obi5yZW1vdGVTdG9yZSwgaSk7XG4gICAgICAgIH0pKSwgYXdhaXQgdCwgYXdhaXQgX19QUklWQVRFX3N5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKG4sIGUpLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3Jlc2V0TGltYm9Eb2N1bWVudHMoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICB0LlNhLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4odC5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgICAgICB9KSksIHQuYmEuZ3IoKSwgdC5TYSA9IG5ldyBNYXAsIHQud2EgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVjb25jaWxlIHRoZSBxdWVyeSB2aWV3cyBvZiB0aGUgcHJvdmlkZWQgcXVlcnkgdGFyZ2V0cyB3aXRoIHRoZSBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS4gUmFpc2VzIHNuYXBzaG90cyBmb3IgYW55IGNoYW5nZXMgdGhhdCBhZmZlY3QgdGhlIGxvY2FsXG4gKiBjbGllbnQgYW5kIHJldHVybnMgdGhlIHVwZGF0ZWQgc3RhdGUgb2YgYWxsIHRhcmdldCdzIHF1ZXJ5IGRhdGEuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb25cbiAqIEBwYXJhbSB0YXJnZXRzIC0gdGhlIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIHZpZXdzIHRoYXQgbmVlZCB0byBiZSByZWNvbXB1dGVkXG4gKiBAcGFyYW0gdHJhbnNpdGlvblRvUHJpbWFyeSAtIGB0cnVlYCBpZmYgdGhlIHRhYiB0cmFuc2l0aW9ucyBmcm9tIGEgc2Vjb25kYXJ5XG4gKiB0YWIgdG8gYSBwcmltYXJ5IHRhYlxuICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuKSwgbi5GYSA9ICExLCBhd2FpdCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVBcHBseVByaW1hcnlTdGF0ZShuLnJlbW90ZVN0b3JlLCAhMSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBpID0gW10sIHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgY29uc3QgbiA9IHIucGEuZ2V0KGUpO1xuICAgICAgICBpZiAobiAmJiAwICE9PSBuLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgZmV0Y2ggdGhlaXIgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgLy8gZnJvbSBMb2NhbFN0b3JlIChhcyB0aGUgcmVzdW1lIHRva2VuIGFuZCB0aGUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxuICAgICAgICAgICAgLy8gc3RhdGUgKHRoZSBsaXN0IG9mIHN5bmNlZERvY3VtZW50cyBtYXkgaGF2ZSBnb3R0ZW4gb3V0IG9mIHN5bmMpLlxuICAgICAgICAgICAgdCA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoci5sb2NhbFN0b3JlLCBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChuWzBdKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSByLmdhLmdldChlKSwgbiA9IGF3YWl0IF9fUFJJVkFURV9zeW5jaHJvbml6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QociwgdCk7XG4gICAgICAgICAgICAgICAgbi5zbmFwc2hvdCAmJiBzLnB1c2gobi5zbmFwc2hvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IG5ldmVyIGV4ZWN1dGVkIG9uIHRoaXMgY2xpZW50LCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBhbGxvY2F0ZSB0aGUgdGFyZ2V0IGluIExvY2FsU3RvcmUgYW5kIGluaXRpYWxpemUgYSBuZXcgVmlldy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldENhY2hlZFRhcmdldChyLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAgICAgdCA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoci5sb2NhbFN0b3JlLCBuKSwgYXdhaXQgX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHIsIF9fUFJJVkFURV9zeW50aGVzaXplVGFyZ2V0VG9RdWVyeShuKSwgZSwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEsIHQucmVzdW1lVG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGkucHVzaCh0KTtcbiAgICB9XG4gICAgcmV0dXJuIHIuZmEuY18ocyksIGk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGBRdWVyeWAgb2JqZWN0IGZyb20gdGhlIHNwZWNpZmllZCBgVGFyZ2V0YC4gVGhlcmUgaXMgbm8gd2F5IHRvXG4gKiBvYnRhaW4gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIHNvIHdlIHN5bnRoZXNpemUgYSBgUXVlcnlgIGZyb20gdGhlIGBUYXJnZXRgXG4gKiBvYmplY3QuXG4gKlxuICogVGhlIHN5bnRoZXNpemVkIHJlc3VsdCBtaWdodCBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgYnV0XG4gKiBzaW5jZSB0aGUgc3ludGhlc2l6ZWQgYFF1ZXJ5YCBzaG91bGQgcmV0dXJuIHRoZSBzYW1lIHJlc3VsdHMgYXMgdGhlXG4gKiBvcmlnaW5hbCBvbmUgKG9ubHkgdGhlIHByZXNlbnRhdGlvbiBvZiByZXN1bHRzIG1pZ2h0IGRpZmZlciksIHRoZSBwb3RlbnRpYWxcbiAqIGRpZmZlcmVuY2Ugd2lsbCBub3QgY2F1c2UgaXNzdWVzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gX19QUklWQVRFX3N5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5KGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX25ld1F1ZXJ5KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUub3JkZXJCeSwgZS5maWx0ZXJzLCBlLmxpbWl0LCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xufVxuXG4vKiogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVHZXRBY3RpdmVDbGllbnRzKGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXRBY3RpdmVDbGllbnRzKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kZWJ1Z0Nhc3QoX19QUklWQVRFX2RlYnVnQ2FzdChlKS5wZXJzaXN0ZW5jZSkua2koKTtcbiAgICB9KF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkubG9jYWxTdG9yZSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5VGFyZ2V0U3RhdGUoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGlmIChpLkZhKSBcbiAgICAvLyBJZiB3ZSByZWNlaXZlIGEgdGFyZ2V0IHN0YXRlIG5vdGlmaWNhdGlvbiB2aWEgV2ViU3RvcmFnZSwgd2UgYXJlXG4gICAgLy8gZWl0aGVyIGFscmVhZHkgc2Vjb25kYXJ5IG9yIGFub3RoZXIgdGFiIGhhcyB0YWtlbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICByZXR1cm4gdm9pZCBfX1BSSVZBVEVfbG9nRGVidWcoXCJTeW5jRW5naW5lXCIsIFwiSWdub3JpbmcgdW5leHBlY3RlZCBxdWVyeSBzdGF0ZSBub3RpZmljYXRpb24uXCIpO1xuICAgIGNvbnN0IHMgPSBpLnBhLmdldCh0KTtcbiAgICBpZiAocyAmJiBzLmxlbmd0aCA+IDApIHN3aXRjaCAobikge1xuICAgICAgY2FzZSBcImN1cnJlbnRcIjpcbiAgICAgIGNhc2UgXCJub3QtY3VycmVudFwiOlxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXROZXdEb2N1bWVudENoYW5nZXMoaS5sb2NhbFN0b3JlLCBfX1BSSVZBVEVfcXVlcnlDb2xsZWN0aW9uR3JvdXAoc1swXSkpLCByID0gUmVtb3RlRXZlbnQuY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UodCwgXCJjdXJyZW50XCIgPT09IG4sIEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkcpO1xuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGksIGUsIHIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChpLmxvY2FsU3RvcmUsIHQsIFxuICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMCksIF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KGksIHQsIHIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZmFpbCgpO1xuICAgIH1cbn1cblxuLyoqIEFkZHMgb3IgcmVtb3ZlcyBXYXRjaCB0YXJnZXRzIGZvciBxdWVyaWVzIGZyb20gZGlmZmVyZW50IHRhYnMuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlBY3RpdmVUYXJnZXRzQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2Vuc3VyZVdhdGNoQ2FsbGJhY2tzKGUpO1xuICAgIGlmIChyLkZhKSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBpZiAoci5wYS5oYXMoZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBBIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gYWRkZWQgaW4gYSBwcmV2aW91cyBhdHRlbXB0XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIkFkZGluZyBhbiBhbHJlYWR5IGFjdGl2ZSB0YXJnZXQgXCIgKyBlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldENhY2hlZFRhcmdldChyLmxvY2FsU3RvcmUsIGUpLCBuID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChyLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHIsIF9fUFJJVkFURV9zeW50aGVzaXplVGFyZ2V0VG9RdWVyeSh0KSwgbi50YXJnZXRJZCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEsIG4ucmVzdW1lVG9rZW4pLCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVMaXN0ZW4oci5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIFxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlIHNpbmNlIHRoZSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuXG4gICAgICAgIC8vIHJlbW92ZWQgaWYgaXQgaGFzIGJlZW4gcmVqZWN0ZWQgYnkgdGhlIGJhY2tlbmQuXG4gICAgICAgIHIucGEuaGFzKGUpICYmIFxuICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoci5sb2NhbFN0b3JlLCBlLCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKHIucmVtb3RlU3RvcmUsIGUpLCBfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChyLCBlKTtcbiAgICAgICAgfSkpLmNhdGNoKF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Vuc3VyZVdhdGNoQ2FsbGJhY2tzKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlSZW1vdGVFdmVudCA9IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlSZW1vdGVFdmVudC5iaW5kKG51bGwsIHQpLCBcbiAgICB0LnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gX19QUklWQVRFX3N5bmNFbmdpbmVHZXRSZW1vdGVLZXlzRm9yVGFyZ2V0LmJpbmQobnVsbCwgdCksIFxuICAgIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbiA9IF9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0TGlzdGVuLmJpbmQobnVsbCwgdCksIFxuICAgIHQuZmEuY18gPSBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaENoYW5nZS5iaW5kKG51bGwsIHQuZXZlbnRNYW5hZ2VyKSwgdC5mYS54YSA9IF9fUFJJVkFURV9ldmVudE1hbmFnZXJPbldhdGNoRXJyb3IuYmluZChudWxsLCB0LmV2ZW50TWFuYWdlciksIFxuICAgIHQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lRW5zdXJlV3JpdGVDYWxsYmFja3MoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiB0LnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZSA9IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlTdWNjZXNzZnVsV3JpdGUuYmluZChudWxsLCB0KSwgXG4gICAgdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUgPSBfX1BSSVZBVEVfc3luY0VuZ2luZVJlamVjdEZhaWxlZFdyaXRlLmJpbmQobnVsbCwgdCksIFxuICAgIHQ7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIFNESy4gVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGJ1bmRsZSBmaW5pc2hlZCBsb2FkaW5nLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gU3luY0VuZ2luZSB0byB1c2UuXG4gKiBAcGFyYW0gYnVuZGxlUmVhZGVyIC0gQnVuZGxlIHRvIGxvYWQgaW50byB0aGUgU0RLLlxuICogQHBhcmFtIHRhc2sgLSBMb2FkQnVuZGxlVGFzayB1c2VkIHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyB0byBwdWJsaWMgQVBJLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lTG9hZEJ1bmRsZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICAoXG4gICAgLyoqIExvYWRzIGEgYnVuZGxlIGFuZCByZXR1cm5zIHRoZSBsaXN0IG9mIGFmZmVjdGVkIGNvbGxlY3Rpb24gZ3JvdXBzLiAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2FkQnVuZGxlSW1wbChlLCB0LCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByID0gYXdhaXQgdC5nZXRNZXRhZGF0YSgpO1xuICAgICAgICAgICAgaWYgKGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlSGFzTmV3ZXJCdW5kbGUoZSwgdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQuY3JlYXRlVGltZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJoYXNOZXdlckJ1bmRsZVwiLCBcInJlYWRvbmx5XCIsIChlID0+IG4uVXIuZ2V0QnVuZGxlTWV0YWRhdGEoZSwgdC5pZCkpKS50aGVuKChlID0+ICEhZSAmJiBlLmNyZWF0ZVRpbWUuY29tcGFyZVRvKHIpID49IDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBCdW5kbGVNZXRhZGF0YWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi8gKGUubG9jYWxTdG9yZSwgcikpIHJldHVybiBhd2FpdCB0LmNsb3NlKCksIG4uX2NvbXBsZXRlV2l0aChmdW5jdGlvbiBfX1BSSVZBVEVfYnVuZGxlU3VjY2Vzc1Byb2dyZXNzKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXNrU3RhdGU6IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IGUudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiBlLnRvdGFsQnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiBlLnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiBlLnRvdGFsQnl0ZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfShyKSksIFByb21pc2UucmVzb2x2ZShuZXcgU2V0KTtcbiAgICAgICAgICAgIG4uX3VwZGF0ZVByb2dyZXNzKF9fUFJJVkFURV9idW5kbGVJbml0aWFsUHJvZ3Jlc3MocikpO1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfQnVuZGxlTG9hZGVyKHIsIGUubG9jYWxTdG9yZSwgdC5zZXJpYWxpemVyKTtcbiAgICAgICAgICAgIGxldCBzID0gYXdhaXQgdC5PYSgpO1xuICAgICAgICAgICAgZm9yICg7czsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IGkubmEocyk7XG4gICAgICAgICAgICAgICAgZSAmJiBuLl91cGRhdGVQcm9ncmVzcyhlKSwgcyA9IGF3YWl0IHQuT2EoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG8gPSBhd2FpdCBpLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGUsIG8uc2EsIFxuICAgICAgICAgICAgLyogcmVtb3RlRXZlbnQgKi8gdm9pZCAwKSwgXG4gICAgICAgICAgICAvLyBTYXZlIG1ldGFkYXRhLCBzbyBsb2FkaW5nIHRoZSBzYW1lIGJ1bmRsZSB3aWxsIHNraXAuXG4gICAgICAgICAgICBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVNhdmVCdW5kbGUoZSwgdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBidW5kbGVcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4gbi5Vci5zYXZlQnVuZGxlTWV0YWRhdGEoZSwgdCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBgTmFtZWRRdWVyeWAgYXNzb2NpYXRlZCB3aXRoIGdpdmVuIHF1ZXJ5IG5hbWUuIFByb21pc2VcbiAqIHJlc29sdmVzIHRvIHVuZGVmaW5lZCBpZiBubyBwZXJzaXN0ZWQgZGF0YSBjYW4gYmUgZm91bmQuXG4gKi8gKGUubG9jYWxTdG9yZSwgciksIG4uX2NvbXBsZXRlV2l0aChvLnByb2dyZXNzKSwgUHJvbWlzZS5yZXNvbHZlKG8uaWEpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ1dhcm4oXCJTeW5jRW5naW5lXCIsIGBMb2FkaW5nIGJ1bmRsZSBmYWlsZWQgd2l0aCAke2V9YCksIG4uX2ZhaWxXaXRoKGUpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShuZXcgU2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gKiBVc2VzIEVhZ2VyR0MgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICovKShyLCB0LCBuKS50aGVuKChlID0+IHtcbiAgICAgICAgci5zaGFyZWRDbGllbnRTdGF0ZS5ub3RpZnlCdW5kbGVMb2FkZWQoZSk7XG4gICAgfSkpO1xufVxuXG5jbGFzcyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN5bmNocm9uaXplVGFicyA9ICExO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gX19QUklWQVRFX25ld1NlcmlhbGl6ZXIoZS5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0aGlzLmNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKGUpLCBcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHRoaXMuY3JlYXRlUGVyc2lzdGVuY2UoZSksIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc3RhcnQoKSwgdGhpcy5sb2NhbFN0b3JlID0gdGhpcy5jcmVhdGVMb2NhbFN0b3JlKGUpLCBcbiAgICAgICAgdGhpcy5nY1NjaGVkdWxlciA9IHRoaXMuY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIoZSwgdGhpcy5sb2NhbFN0b3JlKSwgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIgPSB0aGlzLmNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlcihlLCB0aGlzLmxvY2FsU3RvcmUpO1xuICAgIH1cbiAgICBjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjcmVhdGVJbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY3JlYXRlTG9jYWxTdG9yZShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmV3TG9jYWxTdG9yZSh0aGlzLnBlcnNpc3RlbmNlLCBuZXcgX19QUklWQVRFX1F1ZXJ5RW5naW5lLCBlLmluaXRpYWxVc2VyLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlKF9fUFJJVkFURV9NZW1vcnlFYWdlckRlbGVnYXRlLkpyLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVNoYXJlZENsaWVudFN0YXRlO1xuICAgIH1cbiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgJiYgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCksIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2h1dGRvd24oKSwgXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc2h1dGRvd24oKTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9McnVHY01lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlciBleHRlbmRzIE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCh0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlIGluc3RhbmNlb2YgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTHJ1U2NoZWR1bGVyKG4sIGUuYXN5bmNRdWV1ZSwgdCk7XG4gICAgfVxuICAgIGNyZWF0ZVBlcnNpc3RlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHZvaWQgMCAhPT0gdGhpcy5jYWNoZVNpemVCeXRlcyA/IExydVBhcmFtcy53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogTHJ1UGFyYW1zLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlKChlID0+IF9fUFJJVkFURV9NZW1vcnlMcnVEZWxlZ2F0ZS5KcihlLCB0KSksIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggSW5kZXhlZERCIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgZXh0ZW5kcyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5OYSA9IGUsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LCB0aGlzLmZvcmNlT3duZXJzaGlwID0gbiwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUoZSksIGF3YWl0IHRoaXMuTmEuaW5pdGlhbGl6ZSh0aGlzLCBlKSwgXG4gICAgICAgIC8vIEVucXVldWUgd3JpdGVzIGZyb20gYSBwcmV2aW91cyBzZXNzaW9uXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW5zdXJlV3JpdGVDYWxsYmFja3ModGhpcy5OYS5zeW5jRW5naW5lKSwgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKHRoaXMuTmEucmVtb3RlU3RvcmUpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5naSgoKCkgPT4gKHRoaXMuZ2NTY2hlZHVsZXIgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KCksIFxuICAgICAgICB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciAmJiAhdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydCgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsU3RvcmUoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25ld0xvY2FsU3RvcmUodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IF9fUFJJVkFURV9RdWVyeUVuZ2luZSwgZS5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5nYXJiYWdlQ29sbGVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9McnVTY2hlZHVsZXIobiwgZS5hc3luY1F1ZXVlLCB0KTtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCYWNrZmlsbGVyKHQsIHRoaXMucGVyc2lzdGVuY2UpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIoZS5hc3luY1F1ZXVlLCBuKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2luZGV4ZWREYlN0b3JhZ2VQcmVmaXgoZS5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgZS5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpLCBuID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gTHJ1UGFyYW1zLndpdGhDYWNoZVNpemUodGhpcy5jYWNoZVNpemVCeXRlcykgOiBMcnVQYXJhbXMuREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiUGVyc2lzdGVuY2UodGhpcy5zeW5jaHJvbml6ZVRhYnMsIHQsIGUuY2xpZW50SWQsIG4sIGUuYXN5bmNRdWV1ZSwgX19QUklWQVRFX2dldFdpbmRvdygpLCBnZXREb2N1bWVudCgpLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsICEhdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxuICAgIGNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggbXVsdGktdGFiIEluZGV4ZWREQlxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogSW4gdGhlIGxlZ2FjeSBjbGllbnQsIHRoaXMgcHJvdmlkZXIgaXMgdXNlZCB0byBwcm92aWRlIGJvdGggbXVsdGktdGFiIGFuZFxuICogbm9uLW11bHRpLXRhYiBwZXJzaXN0ZW5jZSBzaW5jZSB3ZSBjYW5ub3QgdGVsbCBhdCBidWlsZCB0aW1lIHdoZXRoZXJcbiAqIGBzeW5jaHJvbml6ZVRhYnNgIHdpbGwgYmUgZW5hYmxlZC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTXVsdGlUYWJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgZXh0ZW5kcyBfX1BSSVZBVEVfSW5kZXhlZERiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIHQsIC8qIGZvcmNlT3duZXJzaGlwPSAqLyAhMSksIHRoaXMuTmEgPSBlLCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdCwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMDtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUoZSk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLk5hLnN5bmNFbmdpbmU7XG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlICYmICh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB7XG4gICAgICAgICAgICBYczogX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseUJhdGNoU3RhdGUuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIGVvOiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5VGFyZ2V0U3RhdGUuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIG5vOiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5QWN0aXZlVGFyZ2V0c0NoYW5nZS5iaW5kKG51bGwsIHQpLFxuICAgICAgICAgICAga2k6IF9fUFJJVkFURV9zeW5jRW5naW5lR2V0QWN0aXZlQ2xpZW50cy5iaW5kKG51bGwsIHQpLFxuICAgICAgICAgICAgWnM6IF9fUFJJVkFURV9zeW5jRW5naW5lU3luY2hyb25pemVXaXRoQ2hhbmdlZERvY3VtZW50cy5iaW5kKG51bGwsIHQpXG4gICAgICAgIH0sIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLmdpKChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlQcmltYXJ5U3RhdGUodGhpcy5OYS5zeW5jRW5naW5lLCBlKSwgdGhpcy5nY1NjaGVkdWxlciAmJiAoZSAmJiAhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkID8gdGhpcy5nY1NjaGVkdWxlci5zdGFydCgpIDogZSB8fCB0aGlzLmdjU2NoZWR1bGVyLnN0b3AoKSksIFxuICAgICAgICAgICAgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIgJiYgKGUgJiYgIXRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0ZWQgPyB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydCgpIDogZSB8fCB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdG9wKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLkModCkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELlVOSU1QTEVNRU5URUQsIFwiSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLlwiKTtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIGUuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlKHQsIGUuYXN5bmNRdWV1ZSwgbiwgZS5jbGllbnRJZCwgZS5pbml0aWFsVXNlcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGFuZCB3aXJlcyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSBuZWVkZWQgdG8gaW50ZXJmYWNlIHdpdGggdGhlXG4gKiBuZXR3b3JrLlxuICovIGNsYXNzIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBhc3luYyBpbml0aWFsaXplKGUsIHQpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlIHx8ICh0aGlzLmxvY2FsU3RvcmUgPSBlLmxvY2FsU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBlLnNoYXJlZENsaWVudFN0YXRlLCBcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLmNyZWF0ZURhdGFzdG9yZSh0KSwgdGhpcy5yZW1vdGVTdG9yZSA9IHRoaXMuY3JlYXRlUmVtb3RlU3RvcmUodCksIFxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IHRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKHQpLCB0aGlzLnN5bmNFbmdpbmUgPSB0aGlzLmNyZWF0ZVN5bmNFbmdpbmUodCwgXG4gICAgICAgIC8qIHN0YXJ0QXNQcmltYXJ5PSovICFlLnN5bmNocm9uaXplVGFicyksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gZSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5T25saW5lU3RhdGVDaGFuZ2UodGhpcy5zeW5jRW5naW5lLCBlLCAxIC8qIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlICovKSwgXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UuYmluZChudWxsLCB0aGlzLnN5bmNFbmdpbmUpLCBcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUodGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5zeW5jRW5naW5lLmlzUHJpbWFyeUNsaWVudCkpO1xuICAgIH1cbiAgICBjcmVhdGVFdmVudE1hbmFnZXIoZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld0V2ZW50TWFuYWdlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0V2ZW50TWFuYWdlckltcGw7XG4gICAgICAgIH0oKTtcbiAgICB9XG4gICAgY3JlYXRlRGF0YXN0b3JlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCBuID0gZnVuY3Rpb24gX19QUklWQVRFX25ld0Nvbm5lY3Rpb24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfV2ViQ2hhbm5lbENvbm5lY3Rpb24oZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybiB0aGUgUGxhdGZvcm0tc3BlY2lmaWMgY29ubmVjdGl2aXR5IG1vbml0b3IuICovIChlLmRhdGFiYXNlSW5mbyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3RGF0YXN0b3JlKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0RhdGFzdG9yZUltcGwoZSwgdCwgbiwgcik7XG4gICAgICAgIH0oZS5hdXRoQ3JlZGVudGlhbHMsIGUuYXBwQ2hlY2tDcmVkZW50aWFscywgbiwgdCk7XG4gICAgfVxuICAgIGNyZWF0ZVJlbW90ZVN0b3JlKGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdSZW1vdGVTdG9yZShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9SZW1vdGVTdG9yZUltcGwoZSwgdCwgbiwgciwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJlLWVuYWJsZXMgdGhlIG5ldHdvcmsuIElkZW1wb3RlbnQuICovICh0aGlzLmxvY2FsU3RvcmUsIHRoaXMuZGF0YXN0b3JlLCBlLmFzeW5jUXVldWUsIChlID0+IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSh0aGlzLnN5bmNFbmdpbmUsIGUsIDAgLyogT25saW5lU3RhdGVTb3VyY2UuUmVtb3RlU3RvcmUgKi8pKSwgZnVuY3Rpb24gX19QUklWQVRFX25ld0Nvbm5lY3Rpdml0eU1vbml0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX0Jyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLkMoKSA/IG5ldyBfX1BSSVZBVEVfQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IgOiBuZXcgX19QUklWQVRFX05vb3BDb25uZWN0aXZpdHlNb25pdG9yO1xuICAgICAgICB9KCkpO1xuICAgIH1cbiAgICBjcmVhdGVTeW5jRW5naW5lKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdTeW5jRW5naW5lKGUsIHQsIG4sIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgICAgIHIsIGksIHMsIG8pIHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBuZXcgX19QUklWQVRFX1N5bmNFbmdpbmVJbXBsKGUsIHQsIG4sIHIsIGksIHMpO1xuICAgICAgICAgICAgcmV0dXJuIG8gJiYgKF8uRmEgPSAhMCksIF87XG4gICAgICAgIH0odGhpcy5sb2NhbFN0b3JlLCB0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLmV2ZW50TWFuYWdlciwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSwgZS5pbml0aWFsVXNlciwgZS5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucywgdCk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZVNodXRkb3duKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSBzaHV0dGluZyBkb3duLlwiKSwgdC5GXy5hZGQoNSAvKiBPZmZsaW5lQ2F1c2UuU2h1dGRvd24gKi8pLCBcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKHQpLCB0LnhfLnNodXRkb3duKCksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIChyYXRoZXIgdGhhbiBPZmZsaW5lKSB0byBhdm9pZCBwb3RlbnRpYWxseVxuICAgICAgICAgICAgLy8gdHJpZ2dlcmluZyBzcHVyaW91cyBsaXN0ZW5lciBldmVudHMgd2l0aCBjYWNoZWQgZGF0YSwgZXRjLlxuICAgICAgICAgICAgdC5PXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyk7XG4gICAgICAgIH0odGhpcy5yZW1vdGVTdG9yZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIb3cgbWFueSBieXRlcyB0byByZWFkIGVhY2ggdGltZSB3aGVuIGBSZWFkYWJsZVN0cmVhbVJlYWRlci5yZWFkKClgIGlzXG4gKiBjYWxsZWQuIE9ubHkgYXBwbGljYWJsZSBmb3IgYnl0ZSBzdHJlYW1zIHRoYXQgd2UgY29udHJvbCAoZS5nLiB0aG9zZSBiYWNrZWRcbiAqIGJ5IGFuIFVJbnQ4QXJyYXkpLlxuICovXG4vKipcbiAqIEJ1aWxkcyBhIGBCeXRlU3RyZWFtUmVhZGVyYCBmcm9tIGEgVUludDhBcnJheS5cbiAqIEBwYXJhbSBzb3VyY2UgLSBUaGUgZGF0YSBzb3VyY2UgdG8gdXNlLlxuICogQHBhcmFtIGJ5dGVzUGVyUmVhZCAtIEhvdyBtYW55IGJ5dGVzIGVhY2ggYHJlYWQoKWAgZnJvbSB0aGUgcmV0dXJuZWQgcmVhZGVyXG4gKiAgICAgICAgd2lsbCByZWFkLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9CeXRlU3RyZWFtUmVhZGVySGVscGVyKGUsIHQgPSAxMDI0MCkge1xuICAgIGxldCBuID0gMDtcbiAgICAvLyBUaGUgVHlwZVNjcmlwdCBkZWZpbml0aW9uIGZvciBSZWFkYWJsZVN0cmVhbVJlYWRlciBjaGFuZ2VkLiBXZSB1c2VcbiAgICAvLyBgYW55YCBoZXJlIHRvIGFsbG93IHRoaXMgY29kZSB0byBjb21waWxlIHdpdGggZGlmZmVyZW50IHZlcnNpb25zLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzQyOTcwXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXN5bmMgcmVhZCgpIHtcbiAgICAgICAgICAgIGlmIChuIDwgZS5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGUuc2xpY2UobiwgbiArIHQpLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gKz0gdCwgcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNhbmNlbCgpIHt9LFxuICAgICAgICByZWxlYXNlTG9jaygpIHt9LFxuICAgICAgICBjbG9zZWQ6IFByb21pc2UucmVzb2x2ZSgpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogT24gd2ViLCBhIGBSZWFkYWJsZVN0cmVhbWAgaXMgd3JhcHBlZCBhcm91bmQgYnkgYSBgQnl0ZVN0cmVhbVJlYWRlcmAuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKlxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcbiAqIGFzeW5jaHJvbm91c2x5LiBUbyBhbGxvdyBpbW1lZGlhdGUgc2lsZW5jaW5nLCBhIG11dGUgY2FsbCBpcyBhZGRlZCB3aGljaFxuICogY2F1c2VzIGV2ZW50cyBzY2hlZHVsZWQgdG8gbm8gbG9uZ2VyIGJlIHJhaXNlZC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxuICAgICAgICAgKiBhc3luYyBkZXRhY2htZW50IG9mIGxpc3RlbmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRlZCA9ICExO1xuICAgIH1cbiAgICBuZXh0KGUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5uZXh0ICYmIHRoaXMuQmEodGhpcy5vYnNlcnZlci5uZXh0LCBlKTtcbiAgICB9XG4gICAgZXJyb3IoZSkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLmVycm9yID8gdGhpcy5CYSh0aGlzLm9ic2VydmVyLmVycm9yLCBlKSA6IF9fUFJJVkFURV9sb2dFcnJvcihcIlVuY2F1Z2h0IEVycm9yIGluIHNuYXBzaG90IGxpc3RlbmVyOlwiLCBlLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBMYSgpIHtcbiAgICAgICAgdGhpcy5tdXRlZCA9ICEwO1xuICAgIH1cbiAgICBCYShlLCB0KSB7XG4gICAgICAgIHRoaXMubXV0ZWQgfHwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tdXRlZCB8fCBlKHQpO1xuICAgICAgICB9KSwgMCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGJ1bmRsZS5cbiAqXG4gKiBUYWtlcyBhIGJ1bmRsZSBzdHJlYW0gb3IgYnVmZmVyLCBhbmQgcHJlc2VudHMgYWJzdHJhY3Rpb25zIHRvIHJlYWQgYnVuZGxlZFxuICogZWxlbWVudHMgb3V0IG9mIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQuXG4gKi8gY2xhc3MgX19QUklWQVRFX0J1bmRsZVJlYWRlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgcmVhZGVyIHRvIHJlYWQgZnJvbSB1bmRlcmx5aW5nIGJpbmFyeSBidW5kbGUgZGF0YSBzb3VyY2UuICovXG4gICAgZSwgdCkge1xuICAgICAgICB0aGlzLmthID0gZSwgdGhpcy5zZXJpYWxpemVyID0gdCwgXG4gICAgICAgIC8qKiBDYWNoZWQgYnVuZGxlIG1ldGFkYXRhLiAqL1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCBidWZmZXIgdG8gaG9sZCBidW5kbGUgY29udGVudCwgYWNjdW11bGF0aW5nIGluY29tcGxldGUgZWxlbWVudFxuICAgICAgICAgKiBjb250ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSwgdGhpcy5xYSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdUZXh0RGVjb2RlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKTtcbiAgICAgICAgfSgpLCBcbiAgICAgICAgLy8gUmVhZCB0aGUgbWV0YWRhdGEgKHdoaWNoIGlzIHRoZSBmaXJzdCBlbGVtZW50KS5cbiAgICAgICAgdGhpcy5RYSgpLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgZSAmJiBlLmVhKCkgPyB0aGlzLm1ldGFkYXRhLnJlc29sdmUoZS5YXy5tZXRhZGF0YSkgOiB0aGlzLm1ldGFkYXRhLnJlamVjdChuZXcgRXJyb3IoYFRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBidW5kbGUgaXMgbm90IGEgbWV0YWRhdGEsIGl0IGlzXFxuICAgICAgICAgICAgICR7SlNPTi5zdHJpbmdpZnkobnVsbCA9PSBlID8gdm9pZCAwIDogZS5YXyl9YCkpO1xuICAgICAgICB9KSwgKGUgPT4gdGhpcy5tZXRhZGF0YS5yZWplY3QoZSkpKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmthLmNhbmNlbCgpO1xuICAgIH1cbiAgICBhc3luYyBnZXRNZXRhZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEucHJvbWlzZTtcbiAgICB9XG4gICAgYXN5bmMgT2EoKSB7XG4gICAgICAgIC8vIE1ha2VzIHN1cmUgbWV0YWRhdGEgaXMgcmVhZCBiZWZvcmUgcHJvY2VlZGluZy5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TWV0YWRhdGEoKSwgdGhpcy5RYSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBoZWFkIG9mIGludGVybmFsIGJ1ZmZlciwgYW5kIHB1bGxpbmcgbW9yZSBkYXRhIGZyb21cbiAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbSBpZiBhIGNvbXBsZXRlIGVsZW1lbnQgY2Fubm90IGJlIGZvdW5kLCB1bnRpbCBhblxuICAgICAqIGVsZW1lbnQoaW5jbHVkaW5nIHRoZSBwcmVmaXhlZCBsZW5ndGggYW5kIHRoZSBKU09OIHN0cmluZykgaXMgZm91bmQuXG4gICAgICpcbiAgICAgKiBPbmNlIGEgY29tcGxldGUgZWxlbWVudCBpcyByZWFkLCBpdCBpcyBkcm9wcGVkIGZyb20gaW50ZXJuYWwgYnVmZmVyLlxuICAgICAqXG4gICAgICogUmV0dXJucyBlaXRoZXIgdGhlIGJ1bmRsZWQgZWxlbWVudCwgb3IgbnVsbCBpZiB3ZSBoYXZlIHJlYWNoZWQgdGhlIGVuZCBvZlxuICAgICAqIHRoZSBzdHJlYW0uXG4gICAgICovICAgIGFzeW5jIFFhKCkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5LYSgpO1xuICAgICAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnFhLmRlY29kZShlKSwgbiA9IE51bWJlcih0KTtcbiAgICAgICAgaXNOYU4obikgJiYgdGhpcy4kYShgbGVuZ3RoIHN0cmluZyAoJHt0fSkgaXMgbm90IHZhbGlkIG51bWJlcmApO1xuICAgICAgICBjb25zdCByID0gYXdhaXQgdGhpcy5VYShuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2l6ZWRCdW5kbGVFbGVtZW50KEpTT04ucGFyc2UociksIGUubGVuZ3RoICsgbik7XG4gICAgfVxuICAgIC8qKiBGaXJzdCBpbmRleCBvZiAneycgZnJvbSB0aGUgdW5kZXJseWluZyBidWZmZXIuICovICAgIFdhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuZmluZEluZGV4KChlID0+IGUgPT09IFwie1wiLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIsIHVudGlsIHRoZSBmaXJzdCAneycsIGFuZFxuICAgICAqIHJldHVybiB0aGUgY29udGVudC5cbiAgICAgKlxuICAgICAqIElmIHJlYWNoZWQgZW5kIG9mIHRoZSBzdHJlYW0sIHJldHVybnMgYSBudWxsLlxuICAgICAqLyAgICBhc3luYyBLYSgpIHtcbiAgICAgICAgZm9yICg7dGhpcy5XYSgpIDwgMDsgKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5HYSgpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGFuZCB0aGVyZVxuICAgICAgICAvLyBoYXBwZW5zIHRvIGJlIG5vIG1vcmUgZGF0YSB0byBwcm9jZXNzLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5XYSgpO1xuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGJ1dCBzdGlsbFxuICAgICAgICAvLyBjYW5ub3QgZmluZCBhbiBvcGVuIGJyYWNrZXQuXG4gICAgICAgICAgICAgICAgZSA8IDAgJiYgdGhpcy4kYShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBhIGxlbmd0aCBzdHJpbmcgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgZSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQgbGVuZ3RoLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKGUpLCB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIGEgc3BlY2lmaWVkIHBvc2l0aW9uIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciwgZm9yIGEgc3BlY2lmaWVkXG4gICAgICogbnVtYmVyIG9mIGJ5dGVzLCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpZiBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIGRlY29kZWQgZnJvbSB0aGUgcmVhZCBieXRlcy5cbiAgICAgKi8gICAgYXN5bmMgVWEoZSkge1xuICAgICAgICBmb3IgKDt0aGlzLmJ1ZmZlci5sZW5ndGggPCBlOyApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuR2EoKSAmJiB0aGlzLiRhKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIG1vcmUgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnFhLmRlY29kZSh0aGlzLmJ1ZmZlci5zbGljZSgwLCBlKSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQganNvbiBzdHJpbmcuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoZSksIHQ7XG4gICAgfVxuICAgICRhKGUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aHJvdyB0aGlzLmthLmNhbmNlbCgpLCBuZXcgRXJyb3IoYEludmFsaWQgYnVuZGxlIGZvcm1hdDogJHtlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWxscyBtb3JlIGRhdGEgZnJvbSB1bmRlcmx5aW5nIHN0cmVhbSB0byBpbnRlcm5hbCBidWZmZXIuXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQuXG4gICAgICovICAgIGFzeW5jIEdhKCkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5rYS5yZWFkKCk7XG4gICAgICAgIGlmICghZS5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIubGVuZ3RoICsgZS52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgdC5zZXQodGhpcy5idWZmZXIpLCB0LnNldChlLnZhbHVlLCB0aGlzLmJ1ZmZlci5sZW5ndGgpLCB0aGlzLmJ1ZmZlciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUuZG9uZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEludGVybmFsIHRyYW5zYWN0aW9uIG9iamVjdCByZXNwb25zaWJsZSBmb3IgYWNjdW11bGF0aW5nIHRoZSBtdXRhdGlvbnMgdG9cbiAqIHBlcmZvcm0gYW5kIHRoZSBiYXNlIHZlcnNpb25zIGZvciBhbnkgZG9jdW1lbnRzIHJlYWQuXG4gKi9cbmNsYXNzIFRyYW5zYWN0aW9uJDIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSBlLCBcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IG5ldyBNYXAsIHRoaXMubXV0YXRpb25zID0gW10sIHRoaXMuY29tbWl0dGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZWZlcnJlZCB1c2FnZSBlcnJvciB0aGF0IG9jY3VycmVkIHByZXZpb3VzbHkgaW4gdGhpcyB0cmFuc2FjdGlvbiB0aGF0XG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGluIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgd3JpdGUgdG8gdGhlIHNhbWUga2V5IGluIGEgdHJhbnNhY3Rpb24sIGFueVxuICAgICAgICAgKiB3cml0ZXMgYWZ0ZXIgdGhlIGZpcnN0IGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIGFzeW5jIGxvb2t1cChlKSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5sZW5ndGggPiAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkZpcmVzdG9yZSB0cmFuc2FjdGlvbnMgcmVxdWlyZSBhbGwgcmVhZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCB3cml0ZXMuXCIpO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2ludm9rZUJhdGNoR2V0RG9jdW1lbnRzUnBjKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKG4uc2VyaWFsaXplcikgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IHQubWFwKChlID0+IF9fUFJJVkFURV90b05hbWUobi5zZXJpYWxpemVyLCBlKSkpXG4gICAgICAgICAgICB9LCBzID0gYXdhaXQgbi5GbyhcIkJhdGNoR2V0RG9jdW1lbnRzXCIsIHIsIGksIHQubGVuZ3RoKSwgbyA9IG5ldyBNYXA7XG4gICAgICAgICAgICBzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbUJhdGNoR2V0RG9jdW1lbnRzUmVzcG9uc2Uobi5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgICAgICAgICBvLnNldCh0LmtleS50b1N0cmluZygpLCB0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0LmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBvLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhdCksIF8ucHVzaCh0KTtcbiAgICAgICAgICAgIH0pKSwgXztcbiAgICAgICAgfSh0aGlzLmRhdGFzdG9yZSwgZSk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKGUgPT4gdGhpcy5yZWNvcmRWZXJzaW9uKGUpKSksIHQ7XG4gICAgfVxuICAgIHNldChlLCB0KSB7XG4gICAgICAgIHRoaXMud3JpdGUodC50b011dGF0aW9uKGUsIHRoaXMucHJlY29uZGl0aW9uKGUpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKGUudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHVwZGF0ZShlLCB0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlKHQudG9NdXRhdGlvbihlLCB0aGlzLnByZWNvbmRpdGlvbkZvclVwZGF0ZShlKSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RXcml0ZUVycm9yID0gZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBkZWxldGUoZSkge1xuICAgICAgICB0aGlzLndyaXRlKG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24oZSwgdGhpcy5wcmVjb25kaXRpb24oZSkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQoZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgYXN5bmMgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5sYXN0V3JpdGVFcnJvcikgdGhyb3cgdGhpcy5sYXN0V3JpdGVFcnJvcjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zO1xuICAgICAgICAvLyBGb3IgZWFjaCBtdXRhdGlvbiwgbm90ZSB0aGF0IHRoZSBkb2Mgd2FzIHdyaXR0ZW4uXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLmRlbGV0ZSh0LmtleS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRm9yIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBidXQgbm90IHdyaXR0ZW4gdG8sIHdlIHdhbnQgdG8gcGVyZm9ybVxuICAgICAgICAvLyBhIGB2ZXJpZnlgIG9wZXJhdGlvbi5cbiAgICAgICAgZS5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IERvY3VtZW50S2V5LmZyb21QYXRoKHQpO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMucHVzaChuZXcgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKG4sIHRoaXMucHJlY29uZGl0aW9uKG4pKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2ludm9rZUNvbW1pdFJwYyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZChuLnNlcmlhbGl6ZXIpICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgd3JpdGVzOiB0Lm1hcCgoZSA9PiB0b011dGF0aW9uKG4uc2VyaWFsaXplciwgZSkpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IG4uYm8oXCJDb21taXRcIiwgciwgaSk7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHRoaXMubXV0YXRpb25zKSwgdGhpcy5jb21taXR0ZWQgPSAhMDtcbiAgICB9XG4gICAgcmVjb3JkVmVyc2lvbihlKSB7XG4gICAgICAgIGxldCB0O1xuICAgICAgICBpZiAoZS5pc0ZvdW5kRG9jdW1lbnQoKSkgdCA9IGUudmVyc2lvbjsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWUuaXNOb0RvY3VtZW50KCkpIHRocm93IGZhaWwoKTtcbiAgICAgICAgICAgIC8vIFJlcHJlc2VudCBhIGRlbGV0ZWQgZG9jIHVzaW5nIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAgICAgICAgICAgIHQgPSBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLmtleS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGlmICghdC5pc0VxdWFsKG4pKSBcbiAgICAgICAgICAgIC8vIFRoaXMgdHJhbnNhY3Rpb24gd2lsbCBmYWlsIG5vIG1hdHRlciB3aGF0LlxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuQUJPUlRFRCwgXCJEb2N1bWVudCB2ZXJzaW9uIGNoYW5nZWQgYmV0d2VlbiB0d28gcmVhZHMuXCIpO1xuICAgICAgICB9IGVsc2UgdGhpcy5yZWFkVmVyc2lvbnMuc2V0KGUua2V5LnRvU3RyaW5nKCksIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIG9mIHRoaXMgZG9jdW1lbnQgd2hlbiBpdCB3YXMgcmVhZCBpbiB0aGlzIHRyYW5zYWN0aW9uLFxuICAgICAqIGFzIGEgcHJlY29uZGl0aW9uLCBvciBubyBwcmVjb25kaXRpb24gaWYgaXQgd2FzIG5vdCByZWFkLlxuICAgICAqLyAgICBwcmVjb25kaXRpb24oZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KGUudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiAhdGhpcy53cml0dGVuRG9jcy5oYXMoZS50b1N0cmluZygpKSAmJiB0ID8gdC5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPyBQcmVjb25kaXRpb24uZXhpc3RzKCExKSA6IFByZWNvbmRpdGlvbi51cGRhdGVUaW1lKHQpIDogUHJlY29uZGl0aW9uLm5vbmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcHJlY29uZGl0aW9uIGZvciBhIGRvY3VtZW50IGlmIHRoZSBvcGVyYXRpb24gaXMgYW4gdXBkYXRlLlxuICAgICAqLyAgICBwcmVjb25kaXRpb25Gb3JVcGRhdGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KGUudG9TdHJpbmcoKSk7XG4gICAgICAgIC8vIFRoZSBmaXJzdCB0aW1lIGEgZG9jdW1lbnQgaXMgd3JpdHRlbiwgd2Ugd2FudCB0byB0YWtlIGludG8gYWNjb3VudCB0aGVcbiAgICAgICAgLy8gcmVhZCB0aW1lIGFuZCBleGlzdGVuY2VcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMud3JpdHRlbkRvY3MuaGFzKGUudG9TdHJpbmcoKSkgJiYgdCkge1xuICAgICAgICAgICAgaWYgKHQuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpKSBcbiAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBzbyBmYWlsIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIHZhbGlkYXRlZCBsb2NhbGx5IGJlY2F1c2UgeW91IGNhbid0IHNlbmQgYVxuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9uIHRoYXQgYSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAgICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBiYWNrZW5kIHdyaXRlIHRvIGJlIGFuIGluc2VydC4gVGhpcyBpcyB0aGUgcmV2ZXJzZVxuICAgICAgICAgICAgLy8gb2Ygd2hhdCB3ZSB3YW50LCBzaW5jZSB3ZSB3YW50IHRvIGFzc2VydCB0aGF0IHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBleGlzdCBidXQgdGhlbiBzZW5kIHRoZSB1cGRhdGUgYW5kIGhhdmUgaXQgZmFpbC4gU2luY2Ugd2UgY2FuJ3RcbiAgICAgICAgICAgIC8vIGV4cHJlc3MgdGhhdCB0byB0aGUgYmFja2VuZCwgd2UgaGF2ZSB0byB2YWxpZGF0ZSBsb2NhbGx5LlxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBjYW4gY2hhbmdlIG9uY2Ugd2UgY2FuIHNlbmQgc2VwYXJhdGUgdmVyaWZ5IHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCB1cGRhdGUgYSBkb2N1bWVudCB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZXhpc3RzLCBiYXNlIHByZWNvbmRpdGlvbiBvbiBkb2N1bWVudCB1cGRhdGUgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb2N1bWVudCB3YXMgbm90IHJlYWQsIHNvIHdlIGp1c3QgdXNlIHRoZSBwcmVjb25kaXRpb25zIGZvciBhIGJsaW5kXG4gICAgICAgIC8vIHVwZGF0ZS5cbiAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbi5leGlzdHMoITApO1xuICAgIH1cbiAgICB3cml0ZShlKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubXV0YXRpb25zLnB1c2goZSk7XG4gICAgfVxuICAgIGVuc3VyZUNvbW1pdE5vdENhbGxlZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXG4gKiB3aXRoIGJhY2tvZmYuXG4gKi8gY2xhc3MgX19QUklWQVRFX1RyYW5zYWN0aW9uUnVubmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMuZGF0YXN0b3JlID0gdCwgdGhpcy5vcHRpb25zID0gbiwgdGhpcy51cGRhdGVGdW5jdGlvbiA9IHIsIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gaSwgdGhpcy56YSA9IG4ubWF4QXR0ZW1wdHMsIHRoaXMuSG8gPSBuZXcgX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZih0aGlzLmFzeW5jUXVldWUsIFwidHJhbnNhY3Rpb25fcmV0cnlcIiAvKiBUaW1lcklkLlRyYW5zYWN0aW9uUmV0cnkgKi8pO1xuICAgIH1cbiAgICAvKiogUnVucyB0aGUgdHJhbnNhY3Rpb24gYW5kIHNldHMgdGhlIHJlc3VsdCBvbiBkZWZlcnJlZC4gKi8gICAgcnVuKCkge1xuICAgICAgICB0aGlzLnphIC09IDEsIHRoaXMuamEoKTtcbiAgICB9XG4gICAgamEoKSB7XG4gICAgICAgIHRoaXMuSG8uUW8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVHJhbnNhY3Rpb24kMih0aGlzLmRhdGFzdG9yZSksIHQgPSB0aGlzLkhhKGUpO1xuICAgICAgICAgICAgdCAmJiB0LnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBlLmNvbW1pdCgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHQpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuSmEoZSk7XG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuSmEoZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgSGEoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudXBkYXRlRnVuY3Rpb24oZSk7XG4gICAgICAgICAgICByZXR1cm4gIV9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0KSAmJiB0LmNhdGNoICYmIHQudGhlbiA/IHQgOiAodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLCBcbiAgICAgICAgICAgIG51bGwpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucmVqZWN0KGUpLCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIEphKGUpIHtcbiAgICAgICAgdGhpcy56YSA+IDAgJiYgdGhpcy5ZYShlKSA/ICh0aGlzLnphIC09IDEsIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5qYSgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpIDogdGhpcy5kZWZlcnJlZC5yZWplY3QoZSk7XG4gICAgfVxuICAgIFlhKGUpIHtcbiAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSBlLm5hbWUpIHtcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgICAgICAgIC8vIG5vbi1tYXRjaGluZyBkb2N1bWVudCB2ZXJzaW9ucyB3aXRoIEFCT1JURUQuIFRoZXNlIGVycm9ycyBzaG91bGQgYmUgcmV0cmllZC5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNvZGU7XG4gICAgICAgICAgICByZXR1cm4gXCJhYm9ydGVkXCIgPT09IHQgfHwgXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIgPT09IHQgfHwgXCJhbHJlYWR5LWV4aXN0c1wiID09PSB0IHx8ICFfX1BSSVZBVEVfaXNQZXJtYW5lbnRFcnJvcih0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBGaXJlc3RvcmVDbGllbnQgaXMgYSB0b3AtbGV2ZWwgY2xhc3MgdGhhdCBjb25zdHJ1Y3RzIGFuZCBvd25zIGFsbCBvZiB0aGUgLy9cbiAqIHBpZWNlcyBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgLy9cbiAqIGFzeW5jIHF1ZXVlIHRoYXQgaXMgc2hhcmVkIGJ5IGFsbCBvZiB0aGUgb3RoZXIgY29tcG9uZW50cyBpbiB0aGUgc3lzdGVtLiAvL1xuICovXG5jbGFzcyBGaXJlc3RvcmVDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIFxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cbiAgICAgKi9cbiAgICBuLCByKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gZSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5kYXRhYmFzZUluZm8gPSByLCBcbiAgICAgICAgdGhpcy51c2VyID0gVXNlci5VTkFVVEhFTlRJQ0FURUQsIHRoaXMuY2xpZW50SWQgPSBfX1BSSVZBVEVfQXV0b0lkLlYoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIHRoaXMuYXV0aENyZWRlbnRpYWxzLnN0YXJ0KG4sIChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlJlY2VpdmVkIHVzZXI9XCIsIGUudWlkKSwgYXdhaXQgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyKGUpLCBcbiAgICAgICAgICAgIHRoaXMudXNlciA9IGU7XG4gICAgICAgIH0pKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLnN0YXJ0KG4sIChlID0+IChfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCBuZXcgYXBwIGNoZWNrIHRva2VuPVwiLCBlKSwgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIoZSwgdGhpcy51c2VyKSkpKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q29uZmlndXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFzeW5jUXVldWU6IHRoaXMuYXN5bmNRdWV1ZSxcbiAgICAgICAgICAgIGRhdGFiYXNlSW5mbzogdGhpcy5kYXRhYmFzZUluZm8sXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1dGhDcmVkZW50aWFsczogdGhpcy5hdXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBhcHBDaGVja0NyZWRlbnRpYWxzOiB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBpbml0aWFsVXNlcjogdGhpcy51c2VyLFxuICAgICAgICAgICAgbWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM6IDEwMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIoZSkge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIgPSBlO1xuICAgIH1cbiAgICBzZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIoZSkge1xuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb24gLy9cbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLiAvL1xuICAgICAqLyAgICB2ZXJpZnlOb3RUZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW50ZXJSZXN0cmljdGVkTW9kZSgpO1xuICAgICAgICBjb25zdCBlID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMuX29ubGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIHRoaXMuX29mZmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMuX29mZmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCBcbiAgICAgICAgICAgICAgICAvLyBUaGUgY3JlZGVudGlhbHMgcHJvdmlkZXIgbXVzdCBiZSB0ZXJtaW5hdGVkIGFmdGVyIHNodXR0aW5nIGRvd24gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlU3RvcmUgYXMgaXQgd2lsbCBwcmV2ZW50IHRoZSBSZW1vdGVTdG9yZSBmcm9tIHJldHJpZXZpbmcgYXV0aFxuICAgICAgICAgICAgICAgIC8vIHRva2Vucy5cbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc2h1dGRvd24oKSwgZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKHQsIFwiRmFpbGVkIHRvIHNodXRkb3duIHBlcnNpc3RlbmNlXCIpO1xuICAgICAgICAgICAgICAgIGUucmVqZWN0KG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIGUucHJvbWlzZTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgdCkge1xuICAgIGUuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgY29uc3QgbiA9IGF3YWl0IGUuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgIGF3YWl0IHQuaW5pdGlhbGl6ZShuKTtcbiAgICBsZXQgciA9IG4uaW5pdGlhbFVzZXI7XG4gICAgZS5zZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIoKGFzeW5jIGUgPT4ge1xuICAgICAgICByLmlzRXF1YWwoZSkgfHwgKGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZSh0LmxvY2FsU3RvcmUsIGUpLCByID0gZSk7XG4gICAgfSkpLCBcbiAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcbiAgICAvLyBuZWVkIHRvIGJlIHRlcm1pbmF0ZWQgdG8gYWxsb3cgdGhlIGRlbGV0ZSB0byBzdWNjZWVkLlxuICAgIHQucGVyc2lzdGVuY2Uuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKCgpID0+IGUudGVybWluYXRlKCkpKSwgZS5fb2ZmbGluZUNvbXBvbmVudHMgPSB0O1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgdCkge1xuICAgIGUuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCk7XG4gICAgY29uc3QgbiA9IGF3YWl0IF9fUFJJVkFURV9lbnN1cmVPZmZsaW5lQ29tcG9uZW50cyhlKTtcbiAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgY29uc3QgciA9IGF3YWl0IGUuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgIGF3YWl0IHQuaW5pdGlhbGl6ZShuLCByKSwgXG4gICAgLy8gVGhlIENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciBvZiB0aGUgb25saW5lIGNvbXBvbmVudCBwcm92aWRlciB0YWtlc1xuICAgIC8vIHByZWNlZGVuY2Ugb3ZlciB0aGUgb2ZmbGluZSBjb21wb25lbnQgcHJvdmlkZXIuXG4gICAgZS5zZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIoKGUgPT4gX19QUklWQVRFX3JlbW90ZVN0b3JlSGFuZGxlQ3JlZGVudGlhbENoYW5nZSh0LnJlbW90ZVN0b3JlLCBlKSkpLCBcbiAgICBlLnNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lcigoKGUsIG4pID0+IF9fUFJJVkFURV9yZW1vdGVTdG9yZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UodC5yZW1vdGVTdG9yZSwgbikpKSwgXG4gICAgZS5fb25saW5lQ29tcG9uZW50cyA9IHQ7XG59XG5cbi8qKlxuICogRGVjaWRlcyB3aGV0aGVyIHRoZSBwcm92aWRlZCBlcnJvciBhbGxvd3MgdXMgdG8gZ3JhY2VmdWxseSBkaXNhYmxlXG4gKiBwZXJzaXN0ZW5jZSAoYXMgb3Bwb3NlZCB0byBjcmFzaGluZyB0aGUgY2xpZW50KS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY2FuRmFsbGJhY2tGcm9tSW5kZXhlZERiRXJyb3IoZSkge1xuICAgIHJldHVybiBcIkZpcmViYXNlRXJyb3JcIiA9PT0gZS5uYW1lID8gZS5jb2RlID09PSBELkZBSUxFRF9QUkVDT05ESVRJT04gfHwgZS5jb2RlID09PSBELlVOSU1QTEVNRU5URUQgOiAhKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIERPTUV4Y2VwdGlvbiAmJiBlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSB8fCAoXG4gICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgMjIgPT09IGUuY29kZSB8fCAyMCA9PT0gZS5jb2RlIHx8IFxuICAgIC8vIEZpcmVmb3ggUHJpdmF0ZSBCcm93c2luZyBtb2RlIGRpc2FibGVzIEluZGV4ZWREYiBhbmQgcmV0dXJuc1xuICAgIC8vIElOVkFMSURfU1RBVEUgZm9yIGFueSB1c2FnZS5cbiAgICAxMSA9PT0gZS5jb2RlKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2Vuc3VyZU9mZmxpbmVDb21wb25lbnRzKGUpIHtcbiAgICBpZiAoIWUuX29mZmxpbmVDb21wb25lbnRzKSBpZiAoZS5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyB1c2VyIHByb3ZpZGVkIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgZS5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlci5fb2ZmbGluZSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0O1xuICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfY2FuRmFsbGJhY2tGcm9tSW5kZXhlZERiRXJyb3IobikpIHRocm93IG47XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nV2FybihcIkVycm9yIHVzaW5nIHVzZXIgcHJvdmlkZWQgY2FjaGUuIEZhbGxpbmcgYmFjayB0byBtZW1vcnkgY2FjaGU6IFwiICsgbiksIFxuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlLCBuZXcgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyBkZWZhdWx0IE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQgX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlLCBuZXcgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKTtcbiAgICByZXR1cm4gZS5fb2ZmbGluZUNvbXBvbmVudHM7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpIHtcbiAgICByZXR1cm4gZS5fb25saW5lQ29tcG9uZW50cyB8fCAoZS5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyB1c2VyIHByb3ZpZGVkIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgZS5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlci5fb25saW5lKSkgOiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQgX19QUklWQVRFX3NldE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlcikpKSwgZS5fb25saW5lQ29tcG9uZW50cztcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldFBlcnNpc3RlbmNlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Vuc3VyZU9mZmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5wZXJzaXN0ZW5jZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPZmZsaW5lQ29tcG9uZW50cyhlKS50aGVuKChlID0+IGUubG9jYWxTdG9yZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0UmVtb3RlU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKS50aGVuKChlID0+IGUucmVtb3RlU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldFN5bmNFbmdpbmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKS50aGVuKChlID0+IGUuc3luY0VuZ2luZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0RGF0YXN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Vuc3VyZU9ubGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLmRhdGFzdG9yZSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpIHtcbiAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2Vuc3VyZU9ubGluZUNvbXBvbmVudHMoZSksIG4gPSB0LmV2ZW50TWFuYWdlcjtcbiAgICByZXR1cm4gbi5vbkxpc3RlbiA9IF9fUFJJVkFURV9zeW5jRW5naW5lTGlzdGVuLmJpbmQobnVsbCwgdC5zeW5jRW5naW5lKSwgbi5vblVubGlzdGVuID0gX19QUklWQVRFX3N5bmNFbmdpbmVVbmxpc3Rlbi5iaW5kKG51bGwsIHQuc3luY0VuZ2luZSksIFxuICAgIG47XG59XG5cbi8qKiBFbmFibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24gYW5kIHJlLWVucXVldWVzIGFsbCBwZW5kaW5nIG9wZXJhdGlvbnMuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRFbmFibGVOZXR3b3JrKGUpIHtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IF9fUFJJVkFURV9nZXRQZXJzaXN0ZW5jZShlKSwgbiA9IGF3YWl0IF9fUFJJVkFURV9nZXRSZW1vdGVTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHQuc2V0TmV0d29ya0VuYWJsZWQoITApLCBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVFbmFibGVOZXR3b3JrKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIHQuRl8uZGVsZXRlKDAgLyogT2ZmbGluZUNhdXNlLlVzZXJEaXNhYmxlZCAqLyksIF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwodCk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKiogRGlzYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbi4gUGVuZGluZyBvcGVyYXRpb25zIHdpbGwgbm90IGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RGlzYWJsZU5ldHdvcmsoZSkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2dldFBlcnNpc3RlbmNlKGUpLCBuID0gYXdhaXQgX19QUklWQVRFX2dldFJlbW90ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5zZXROZXR3b3JrRW5hYmxlZCghMSksIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZURpc2FibGVOZXR3b3JrKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgdC5GXy5hZGQoMCAvKiBPZmZsaW5lQ2F1c2UuVXNlckRpc2FibGVkICovKSwgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwodCksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxuICAgICAgICAgICAgdC5PXy5zZXQoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lXG4gKiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudFxuICogY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlIG9yIHJlamVjdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRGcm9tTG9jYWxDYWNoZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVhZERvY3VtZW50RnJvbUNhY2hlKGUsIHQsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlYWREb2N1bWVudChlLCB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJyZWFkIGRvY3VtZW50XCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudChlLCB0KSkpO1xuICAgICAgICAgICAgfShlLCB0KTtcbiAgICAgICAgICAgIHIuaXNGb3VuZERvY3VtZW50KCkgPyBuLnJlc29sdmUocikgOiByLmlzTm9Eb2N1bWVudCgpID8gbi5yZXNvbHZlKG51bGwpIDogbi5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKEQuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIGNhY2hlLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBtYXkgZXhpc3Qgb24gdGhlIHNlcnZlci4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyAnc291cmNlJyBpbiB0aGUgR2V0T3B0aW9ucyB0byBhdHRlbXB0IHRvIHJldHJpZXZlIHRoZSBkb2N1bWVudCBmcm9tIHRoZSBzZXJ2ZXIuKVwiKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfd3JhcEluVXNlckVycm9ySWZSZWNvdmVyYWJsZShlLCBgRmFpbGVkIHRvIGdldCBkb2N1bWVudCAnJHt0fSBmcm9tIGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgZG9jdW1lbnQgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSksIHQsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50VmlhU25hcHNob3RMaXN0ZW5lcihlLCB0LCBuID0ge30pIHtcbiAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9yZWFkRG9jdW1lbnRWaWFTbmFwc2hvdExpc3RlbmVyKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBfX1BSSVZBVEVfQXN5bmNPYnNlcnZlcih7XG4gICAgICAgICAgICBuZXh0OiBzID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICB0LmVucXVldWVBbmRGb3JnZXQoKCgpID0+IF9fUFJJVkFURV9ldmVudE1hbmFnZXJVbmxpc3RlbihlLCBvKSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF8gPSBzLmRvY3MuaGFzKG4pO1xuICAgICAgICAgICAgICAgICFfICYmIHMuZnJvbUNhY2hlID8gXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZiB3ZSdyZSBvbmxpbmUgYW5kIHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAgICAgLy8gZXhpc3QgdGhlbiB3ZSByZXNvbHZlIHdpdGggYSBkb2MuZXhpc3RzIHNldCB0byBmYWxzZS4gSWZcbiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBvZmZsaW5lIGhvd2V2ZXIsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGlzXG4gICAgICAgICAgICAgICAgLy8gY2FzZS4gVHdvIG9wdGlvbnM6IDEpIENhY2hlIHRoZSBuZWdhdGl2ZSByZXNwb25zZSBmcm9tXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlciBzbyB3ZSBjYW4gZGVsaXZlciB0aGF0IGV2ZW4gd2hlbiB5b3UncmVcbiAgICAgICAgICAgICAgICAvLyBvZmZsaW5lIDIpIEFjdHVhbGx5IHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGUgb25saW5lIGNhc2VcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgICAgICAgICAgICBpLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGJlY2F1c2UgdGhlIGNsaWVudCBpcyBvZmZsaW5lLlwiKSkgOiBfICYmIHMuZnJvbUNhY2hlICYmIHIgJiYgXCJzZXJ2ZXJcIiA9PT0gci5zb3VyY2UgPyBpLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKSA6IGkucmVzb2x2ZShzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZSA9PiBpLnJlamVjdChlKVxuICAgICAgICB9KSwgbyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcihfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKG4ucGF0aCksIHMsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgWl86ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2V2ZW50TWFuYWdlckxpc3RlbihlLCBvKTtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIGUuYXN5bmNRdWV1ZSwgdCwgbiwgcikpKSwgci5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzRnJvbUxvY2FsQ2FjaGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2V4ZWN1dGVRdWVyeUZyb21DYWNoZShlLCB0LCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVFeGVjdXRlUXVlcnkoZSwgdCwgXG4gICAgICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgaSA9IG5ldyBfX1BSSVZBVEVfVmlldyh0LCByLlBzKSwgcyA9IGkuaGEoci5kb2N1bWVudHMpLCBvID0gaS5hcHBseUNoYW5nZXMocywgXG4gICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gITEpO1xuICAgICAgICAgICAgbi5yZXNvbHZlKG8uc25hcHNob3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgYEZhaWxlZCB0byBleGVjdXRlIHF1ZXJ5ICcke3R9IGFnYWluc3QgY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBxdWVyeSBzbmFwc2hvdCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lcihlLCB0LCBuID0ge30pIHtcbiAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9leGVjdXRlUXVlcnlWaWFTbmFwc2hvdExpc3RlbmVyKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBfX1BSSVZBVEVfQXN5bmNPYnNlcnZlcih7XG4gICAgICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICB0LmVucXVldWVBbmRGb3JnZXQoKCgpID0+IF9fUFJJVkFURV9ldmVudE1hbmFnZXJVbmxpc3RlbihlLCBvKSkpLCBuLmZyb21DYWNoZSAmJiBcInNlcnZlclwiID09PSByLnNvdXJjZSA/IGkucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihELlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSBkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpIDogaS5yZXNvbHZlKG4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBlID0+IGkucmVqZWN0KGUpXG4gICAgICAgIH0pLCBvID0gbmV3IF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyKG4sIHMsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgWl86ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2V2ZW50TWFuYWdlckxpc3RlbihlLCBvKTtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIGUuYXN5bmNRdWV1ZSwgdCwgbiwgcikpKSwgci5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50QWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIodCk7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLktfLmFkZCh0KSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICB0Lm5leHQoKTtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIG4pKSksICgpID0+IHtcbiAgICAgICAgbi5MYSgpLCBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX3JlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyKGUsIHQpIHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkuS18uZGVsZXRlKHQpO1xuICAgICAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIG4pKSk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBUYWtlcyBhbiB1cGRhdGVGdW5jdGlvbiBpbiB3aGljaCBhIHNldCBvZiByZWFkcyBhbmQgd3JpdGVzIGNhbiBiZSBwZXJmb3JtZWRcbiAqIGF0b21pY2FsbHkuIEluIHRoZSB1cGRhdGVGdW5jdGlvbiwgdGhlIGNsaWVudCBjYW4gcmVhZCBhbmQgd3JpdGUgdmFsdWVzXG4gKiB1c2luZyB0aGUgc3VwcGxpZWQgdHJhbnNhY3Rpb24gb2JqZWN0LiBBZnRlciB0aGUgdXBkYXRlRnVuY3Rpb24sIGFsbFxuICogY2hhbmdlcyB3aWxsIGJlIGNvbW1pdHRlZC4gSWYgYSByZXRyeWFibGUgZXJyb3Igb2NjdXJzIChleDogc29tZSBvdGhlclxuICogY2xpZW50IGhhcyBjaGFuZ2VkIGFueSBvZiB0aGUgZGF0YSByZWZlcmVuY2VkKSwgdGhlbiB0aGUgdXBkYXRlRnVuY3Rpb25cbiAqIHdpbGwgYmUgY2FsbGVkIGFnYWluIGFmdGVyIGEgYmFja29mZi4gSWYgdGhlIHVwZGF0ZUZ1bmN0aW9uIHN0aWxsIGZhaWxzXG4gKiBhZnRlciBhbGwgcmV0cmllcywgdGhlbiB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSByZWplY3RlZC5cbiAqXG4gKiBUaGUgdHJhbnNhY3Rpb24gb2JqZWN0IHBhc3NlZCB0byB0aGUgdXBkYXRlRnVuY3Rpb24gY29udGFpbnMgbWV0aG9kcyBmb3JcbiAqIGFjY2Vzc2luZyBkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zLiBVbmxpa2Ugb3RoZXIgZGF0YXN0b3JlIGFjY2VzcywgZGF0YVxuICogYWNjZXNzZWQgd2l0aCB0aGUgdHJhbnNhY3Rpb24gd2lsbCBub3QgcmVmbGVjdCBsb2NhbCBjaGFuZ2VzIHRoYXQgaGF2ZSBub3RcbiAqIGJlZW4gY29tbWl0dGVkLiBGb3IgdGhpcyByZWFzb24sIGl0IGlzIHJlcXVpcmVkIHRoYXQgYWxsIHJlYWRzIGFyZVxuICogcGVyZm9ybWVkIGJlZm9yZSBhbnkgd3JpdGVzLiBUcmFuc2FjdGlvbnMgbXVzdCBiZSBwZXJmb3JtZWQgd2hpbGUgb25saW5lLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRMb2FkQnVuZGxlKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUJ1bmRsZVJlYWRlcihlLCB0KSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBuID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IF9fUFJJVkFURV9uZXdUZXh0RW5jb2RlcigpLmVuY29kZShlKSA6IGU7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3QnVuZGxlUmVhZGVyKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0J1bmRsZVJlYWRlckltcGwoZSwgdCk7XG4gICAgICAgIH0oZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlcihlLCB0KSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBfX1BSSVZBVEVfdG9CeXRlU3RyZWFtUmVhZGVySGVscGVyKGUsIHQpO1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgcmV0dXJuIF9fUFJJVkFURV90b0J5dGVTdHJlYW1SZWFkZXJIZWxwZXIobmV3IFVpbnQ4QXJyYXkoZSksIHQpO1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSkgcmV0dXJuIGUuZ2V0UmVhZGVyKCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2Ugb2YgYHRvQnl0ZVN0cmVhbVJlYWRlcmAgaGFzIHRvIGJlIGEgQXJyYXlCdWZmZXIgb3IgUmVhZGFibGVTdHJlYW1cIik7XG4gICAgICAgIH0obiksIHQpO1xuICAgIH0obiwgX19QUklWQVRFX25ld1NlcmlhbGl6ZXIodCkpO1xuICAgIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgIF9fUFJJVkFURV9zeW5jRW5naW5lTG9hZEJ1bmRsZShhd2FpdCBfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZShlKSwgaSwgcik7XG4gICAgfSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0TmFtZWRRdWVyeShlLCB0KSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLlVyLmdldE5hbWVkUXVlcnkoZSwgdCkpKTtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpLCB0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50U2V0SW5kZXhDb25maWd1cmF0aW9uKGUsIHQpIHtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlQ29uZmlndXJlRmllbGRJbmRleGVzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLmluZGV4TWFuYWdlciwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkNvbmZpZ3VyZSBpbmRleGVzXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IHIuZ2V0RmllbGRJbmRleGVzKGUpLm5leHQoKG4gPT4gXG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8qKlxuICogQ29tcGFyZXMgdHdvIGFycmF5IGZvciBlcXVhbGl0eSB1c2luZyBjb21wYXJhdG9yLiBUaGUgbWV0aG9kIGNvbXB1dGVzIHRoZVxuICogaW50ZXJzZWN0aW9uIGFuZCBpbnZva2VzIGBvbkFkZGAgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBpbiBgYWZ0ZXJgIGJ1dCBub3RcbiAqIGBiZWZvcmVgLiBgb25SZW1vdmVgIGlzIGludm9rZWQgZm9yIGV2ZXJ5IGVsZW1lbnQgaW4gYGJlZm9yZWAgYnV0IG1pc3NpbmdcbiAqIGZyb20gYGFmdGVyYC5cbiAqXG4gKiBUaGUgbWV0aG9kIGNyZWF0ZXMgYSBjb3B5IG9mIGJvdGggYGJlZm9yZWAgYW5kIGBhZnRlcmAgYW5kIHJ1bnMgaW4gTyhuIGxvZ1xuICogbiksIHdoZXJlIG4gaXMgdGhlIHNpemUgb2YgdGhlIHR3byBsaXN0cy5cbiAqXG4gKiBAcGFyYW0gYmVmb3JlIC0gVGhlIGVsZW1lbnRzIHRoYXQgZXhpc3QgaW4gdGhlIG9yaWdpbmFsIGFycmF5LlxuICogQHBhcmFtIGFmdGVyIC0gVGhlIGVsZW1lbnRzIHRvIGRpZmYgYWdhaW5zdCB0aGUgb3JpZ2luYWwgYXJyYXkuXG4gKiBAcGFyYW0gY29tcGFyYXRvciAtIFRoZSBjb21wYXJhdG9yIGZvciB0aGUgZWxlbWVudHMgaW4gYmVmb3JlIGFuZCBhZnRlci5cbiAqIEBwYXJhbSBvbkFkZCAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZiBgXG4gKiBhZnRlcmAgYnV0IG5vdCBgYmVmb3JlYC5cbiAqIEBwYXJhbSBvblJlbW92ZSAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZlxuICogYGJlZm9yZWAgYnV0IG5vdCBgYWZ0ZXJgLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9kaWZmQXJyYXlzKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgICAgIGUgPSBbIC4uLmUgXSwgdCA9IFsgLi4udCBdLCBlLnNvcnQobiksIHQuc29ydChuKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmxlbmd0aCwgbyA9IHQubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IF8gPSAwLCBhID0gMDtcbiAgICAgICAgICAgIGZvciAoO18gPCBvICYmIGEgPCBzOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbihlW2FdLCB0W19dKTtcbiAgICAgICAgICAgICAgICBzIDwgMCA/IFxuICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyByZW1vdmVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWRcbiAgICAgICAgICAgICAgICAvLyB3YWxrdGhyb3VnaCBpcyBvbmx5IGluIGBiZWZvcmVgLlxuICAgICAgICAgICAgICAgIGkoZVthKytdKSA6IHMgPiAwID8gXG4gICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWQgd2Fsa3Rocm91Z2hcbiAgICAgICAgICAgICAgICAvLyBpcyBvbmx5IGluIGBhZnRlcmAuXG4gICAgICAgICAgICAgICAgcih0W18rK10pIDogKF8rKywgYSsrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoO18gPCBvOyApIHIodFtfKytdKTtcbiAgICAgICAgICAgIGZvciAoO2EgPCBzOyApIGkoZVthKytdKTtcbiAgICAgICAgfShuLCB0LCBfX1BSSVZBVEVfZmllbGRJbmRleFNlbWFudGljQ29tcGFyYXRvciwgKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHIuYWRkRmllbGRJbmRleChlLCB0KSk7XG4gICAgICAgIH0pLCAodCA9PiB7XG4gICAgICAgICAgICBpLnB1c2goci5kZWxldGVGaWVsZEluZGV4KGUsIHQpKTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSkpKSkpO1xuICAgIH0oYXdhaXQgX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSksIHQpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRTZXRQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbkVuYWJsZWQoZSwgdCkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVTZXRJbmRleEF1dG9DcmVhdGlvbkVuYWJsZWQoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLm5zLldpID0gdDtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpLCB0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RGVsZXRlQWxsRmllbGRJbmRleGVzKGUpIHtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlRGVsZXRlQWxsRmllbGRJbmRleGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIG4gPSB0LmluZGV4TWFuYWdlcjtcbiAgICAgICAgcmV0dXJuIHQucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJEZWxldGUgQWxsIEluZGV4ZXNcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4gbi5kZWxldGVBbGxGaWVsZEluZGV4ZXMoZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvLyBUaGUgZm9ybWF0IG9mIHRoZSBMb2NhbFN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBjbGllbnQgc3RhdGUgaXM6XG4gICAgLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG4gICAgKGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb21wYXJlcyB0d28gYEV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9uc2Agb2JqZWN0cyBmb3IgZXF1YWxpdHkuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBgRXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zYCB3aXRoIHRoZSBzYW1lXG4gKiBvcHRpb24gdmFsdWVzIGFzIHRoZSBnaXZlbiBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2Nsb25lTG9uZ1BvbGxpbmdPcHRpb25zKGUpIHtcbiAgICBjb25zdCB0ID0ge307XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gZS50aW1lb3V0U2Vjb25kcyAmJiAodC50aW1lb3V0U2Vjb25kcyA9IGUudGltZW91dFNlY29uZHMpLCB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBtZSA9IG5ldyBNYXA7XG5cbi8qKlxuICogQW4gaW5zdGFuY2UgbWFwIHRoYXQgZW5zdXJlcyBvbmx5IG9uZSBEYXRhc3RvcmUgZXhpc3RzIHBlciBGaXJlc3RvcmVcbiAqIGluc3RhbmNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlTm9uRW1wdHlBcmd1bWVudChlLCB0LCBuKSB7XG4gICAgaWYgKCFuKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBhbiBlbXB0eSAke3R9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHR3byBib29sZWFuIG9wdGlvbnMgYXJlIG5vdCBzZXQgYXQgdGhlIHNhbWUgdGltZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyKGUsIHQsIG4sIHIpIHtcbiAgICBpZiAoITAgPT09IHQgJiYgITAgPT09IHIpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGAke2V9IGFuZCAke259IGNhbm5vdCBiZSB1c2VkIHRvZ2V0aGVyLmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBkb2N1bWVudCAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0IGNvbnRhaW5zXG4gKiBhbiBldmVuIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZURvY3VtZW50UGF0aChlKSB7XG4gICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KGUpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50IHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHtlfSBoYXMgJHtlLmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdFxuICogY29udGFpbnMgYW4gb2RkIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZUNvbGxlY3Rpb25QYXRoKGUpIHtcbiAgICBpZiAoRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgY29sbGVjdGlvbiByZWZlcmVuY2UuIENvbGxlY3Rpb24gcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7ZX0gaGFzICR7ZS5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBpdCdzIGEgbm9uLW51bGwgb2JqZWN0IHdpdGhvdXQgYSBjdXN0b20gcHJvdG90eXBlXG4gKiAoaS5lLiBleGNsdWRlcyBBcnJheSwgRGF0ZSwgZXRjLikuXG4gKi9cbi8qKiBSZXR1cm5zIGEgc3RyaW5nIGRlc2NyaWJpbmcgdGhlIHR5cGUgLyB2YWx1ZSBvZiB0aGUgcHJvdmlkZWQgaW5wdXQuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihlKSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBcIm51bGxcIjtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkgcmV0dXJuIGUubGVuZ3RoID4gMjAgJiYgKGUgPSBgJHtlLnN1YnN0cmluZygwLCAyMCl9Li4uYCksIFxuICAgIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiBlIHx8IFwiYm9vbGVhblwiID09IHR5cGVvZiBlKSByZXR1cm4gXCJcIiArIGU7XG4gICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIFwiYW4gYXJyYXlcIjtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAgICAgLyoqIHRyeSB0byBnZXQgdGhlIGNvbnN0cnVjdG9yIG5hbWUgZm9yIGFuIG9iamVjdC4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV90cnlHZXRDdXN0b21PYmplY3RUeXBlKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5jb25zdHJ1Y3RvcikgcmV0dXJuIGUuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLCBvcHRpb25hbGx5IHVud3JhcHBpbmcgQ29tcGF0IHR5cGVzIHRvIGV4cG9zZSB0aGVcbiAqIHVuZGVybHlpbmcgaW5zdGFuY2UuIFRocm93cyBpZiAgYG9iamAgaXMgbm90IGFuIGluc3RhbmNlIG9mIGBUYC5cbiAqXG4gKiBUaGlzIGNhc3QgaXMgdXNlZCBpbiB0aGUgTGl0ZSBhbmQgRnVsbCBTREsgdG8gdmVyaWZ5IGluc3RhbmNlIHR5cGVzIGZvclxuICogYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgcHVibGljIEFQSS5cbiAqIEBpbnRlcm5hbFxuICovIChlKTtcbiAgICAgICAgICAgIHJldHVybiB0ID8gYGEgY3VzdG9tICR7dH0gb2JqZWN0YCA6IFwiYW4gb2JqZWN0XCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZSA/IFwiYSBmdW5jdGlvblwiIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2FzdChlLCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG50KSB7XG4gICAgaWYgKFwiX2RlbGVnYXRlXCIgaW4gZSAmJiAoXG4gICAgLy8gVW53cmFwIENvbXBhdCB0eXBlc1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZSA9IGUuX2RlbGVnYXRlKSwgIShlIGluc3RhbmNlb2YgdCkpIHtcbiAgICAgICAgaWYgKHQubmFtZSA9PT0gZS5jb25zdHJ1Y3Rvci5uYW1lKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlR5cGUgZG9lcyBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGluc3RhbmNlLiBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgU0RLP1wiKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV92YWx1ZURlc2NyaXB0aW9uKGUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEV4cGVjdGVkIHR5cGUgJyR7dC5uYW1lfScsIGJ1dCBpdCB3YXM6ICR7bn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlUG9zaXRpdmVOdW1iZXIoZSwgdCkge1xuICAgIGlmICh0IDw9IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgcmVxdWlyZXMgYSBwb3NpdGl2ZSBudW1iZXIsIGJ1dCBpdCB3YXM6ICR7dH0uYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBzZXR0aW5ncygpIGRlZmF1bHRzOlxuLyoqXG4gKiBBIGNvbmNyZXRlIHR5cGUgZGVzY3JpYmluZyBhbGwgdGhlIHZhbHVlcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHZpYSBhXG4gKiB1c2VyLXN1cHBsaWVkIGBGaXJlc3RvcmVTZXR0aW5nc2Agb2JqZWN0LiBUaGlzIGlzIGEgc2VwYXJhdGUgdHlwZSBzbyB0aGF0XG4gKiBkZWZhdWx0cyBjYW4gYmUgc3VwcGxpZWQgYW5kIHRoZSB2YWx1ZSBjYW4gYmUgY2hlY2tlZCBmb3IgZXF1YWxpdHkuXG4gKi9cbmNsYXNzIEZpcmVzdG9yZVNldHRpbmdzSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB2YXIgdCwgbjtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZS5ob3N0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlLnNzbCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIsIHRoaXMuc3NsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaG9zdCA9IGUuaG9zdCwgdGhpcy5zc2wgPSBudWxsID09PSAodCA9IGUuc3NsKSB8fCB2b2lkIDAgPT09IHQgfHwgdDtcbiAgICAgICAgaWYgKHRoaXMuY3JlZGVudGlhbHMgPSBlLmNyZWRlbnRpYWxzLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSAhIWUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IGUubG9jYWxDYWNoZSwgdm9pZCAwID09PSBlLmNhY2hlU2l6ZUJ5dGVzKSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gNDE5NDMwNDA7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKC0xICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIGUuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLmNhY2hlU2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIF9fUFJJVkFURV92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyKFwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZ1wiLCBlLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIFwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nXCIsIGUuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKSwgXG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9ICEhZS5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPyB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICExIDogdm9pZCAwID09PSBlLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA/IHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gdHJ1ZSA6IFxuICAgICAgICAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIGNvZXJjZSB0aGUgdmFsdWUgdG8gYm9vbGVhbiBldmVuIHRob3VnaFxuICAgICAgICAvLyB0aGUgVHlwZVNjcmlwdCBjb21waWxlciBoYXMgbmFycm93ZWQgdGhlIHR5cGUgdG8gYm9vbGVhbiBhbHJlYWR5LlxuICAgICAgICAvLyBub2luc3BlY3Rpb24gUG9pbnRsZXNzQm9vbGVhbkV4cHJlc3Npb25KU1xuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhZS5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyA9IF9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyhudWxsICE9PSAobiA9IGUuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zKSAmJiB2b2lkIDAgIT09IG4gPyBuIDoge30pLCBcbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlTG9uZ1BvbGxpbmdPcHRpb25zKGUpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUudGltZW91dFNlY29uZHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZS50aW1lb3V0U2Vjb25kcykpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBpbnZhbGlkIGxvbmcgcG9sbGluZyB0aW1lb3V0OiAke2UudGltZW91dFNlY29uZHN9IChtdXN0IG5vdCBiZSBOYU4pYCk7XG4gICAgICAgICAgICAgICAgaWYgKGUudGltZW91dFNlY29uZHMgPCA1KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgaW52YWxpZCBsb25nIHBvbGxpbmcgdGltZW91dDogJHtlLnRpbWVvdXRTZWNvbmRzfSAobWluaW11bSBhbGxvd2VkIHZhbHVlIGlzIDUpYCk7XG4gICAgICAgICAgICAgICAgaWYgKGUudGltZW91dFNlY29uZHMgPiAzMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7ZS50aW1lb3V0U2Vjb25kc30gKG1heGltdW0gYWxsb3dlZCB2YWx1ZSBpcyAzMClgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqLyAodGhpcy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhZS51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0ID09PSBlLmhvc3QgJiYgdGhpcy5zc2wgPT09IGUuc3NsICYmIHRoaXMuY3JlZGVudGlhbHMgPT09IGUuY3JlZGVudGlhbHMgJiYgdGhpcy5jYWNoZVNpemVCeXRlcyA9PT0gZS5jYWNoZVNpemVCeXRlcyAmJiB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPT09IGUuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyAmJiB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9PT0gZS5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgJiYgZnVuY3Rpb24gX19QUklWQVRFX2xvbmdQb2xsaW5nT3B0aW9uc0VxdWFsKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnRpbWVvdXRTZWNvbmRzID09PSB0LnRpbWVvdXRTZWNvbmRzO1xuICAgICAgICB9KHRoaXMuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zLCBlLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucykgJiYgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID09PSBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgJiYgdGhpcy51c2VGZXRjaFN0cmVhbXMgPT09IGUudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbn1cblxuY2xhc3MgRmlyZXN0b3JlJDEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSBlLCB0aGlzLl9hcHBDaGVja0NyZWRlbnRpYWxzID0gdCwgdGhpcy5fZGF0YWJhc2VJZCA9IG4sIFxuICAgICAgICB0aGlzLl9hcHAgPSByLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIEZpcmVzdG9yZSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlLWxpdGVcIiwgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBcIihsaXRlKVwiLCB0aGlzLl9zZXR0aW5ncyA9IG5ldyBGaXJlc3RvcmVTZXR0aW5nc0ltcGwoe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSB3YXMgbm90IGluaXRpYWxpemVkIHVzaW5nIHRoZSBGaXJlYmFzZSBTREsuICdhcHAnIGlzIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHA7XG4gICAgfVxuICAgIGdldCBfaW5pdGlhbGl6ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbjtcbiAgICB9XG4gICAgZ2V0IF90ZXJtaW5hdGVkKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICBfc2V0U2V0dGluZ3MoZSkge1xuICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3NGcm96ZW4pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgaXRzIHNldHRpbmdzIGNhbiBubyBsb25nZXIgYmUgY2hhbmdlZC4gWW91IGNhbiBvbmx5IG1vZGlmeSBzZXR0aW5ncyBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBGaXJlc3RvcmVTZXR0aW5nc0ltcGwoZSksIHZvaWQgMCAhPT0gZS5jcmVkZW50aWFscyAmJiAodGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24gX19QUklWQVRFX21ha2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihlKSB7XG4gICAgICAgICAgICBpZiAoIWUpIHJldHVybiBuZXcgX19QUklWQVRFX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXI7XG4gICAgICAgICAgICBzd2l0Y2ggKGUudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiZmlyc3RQYXJ0eVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0ZpcnN0UGFydHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihlLnNlc3Npb25JbmRleCB8fCBcIjBcIiwgZS5pYW1Ub2tlbiB8fCBudWxsLCBlLmF1dGhUb2tlbkZhY3RvcnkgfHwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInByb3ZpZGVyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuY2xpZW50O1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJtYWtlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShlLmNyZWRlbnRpYWxzKSk7XG4gICAgfVxuICAgIF9nZXRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZnJlZXplU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICEwLCB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2RlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rlcm1pbmF0ZVRhc2sgfHwgKHRoaXMuX3Rlcm1pbmF0ZVRhc2sgPSB0aGlzLl90ZXJtaW5hdGUoKSksIHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgRmlyZXN0b3JlYCBpbnN0YW5jZS4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXBwOiB0aGlzLl9hcHAsXG4gICAgICAgICAgICBkYXRhYmFzZUlkOiB0aGlzLl9kYXRhYmFzZUlkLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuX3NldHRpbmdzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZXMgYWxsIGNvbXBvbmVudHMgdXNlZCBieSB0aGlzIGNsaWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB0byBjbGVhbiB1cCB0aGVpciBvd24gZGVwZW5kZW5jaWVzLCBidXQgbXVzdCBhbHNvIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIE9ubHkgZXZlciBjYWxsZWQgb25jZS5cbiAgICAgKi8gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIGFsbCBjb21wb25lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgaW5zdGFuY2UuIE11c3QgYmUgY2FsbGVkXG4gKiB3aGVuIHRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyB0ZXJtaW5hdGVkLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3ZlQ29tcG9uZW50cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbWUuZ2V0KGUpO1xuICAgICAgICAgICAgdCAmJiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiQ29tcG9uZW50UHJvdmlkZXJcIiwgXCJSZW1vdmluZyBEYXRhc3RvcmVcIiksIG1lLmRlbGV0ZShlKSwgXG4gICAgICAgICAgICB0LnRlcm1pbmF0ZSgpKTtcbiAgICAgICAgfSh0aGlzKSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1vZGlmeSB0aGlzIGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIENsb3VkIEZpcmVzdG9yZSBlbXVsYXRvci5cbiAqXG4gKiBOb3RlOiBUaGlzIG11c3QgYmUgY2FsbGVkIGJlZm9yZSB0aGlzIGluc3RhbmNlIGhhcyBiZWVuIHVzZWQgdG8gZG8gYW55XG4gKiBvcGVyYXRpb25zLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgdG8gY29uZmlndXJlIHRvIGNvbm5lY3QgdG8gdGhlXG4gKiBlbXVsYXRvci5cbiAqIEBwYXJhbSBob3N0IC0gdGhlIGVtdWxhdG9yIGhvc3QgKGV4OiBsb2NhbGhvc3QpLlxuICogQHBhcmFtIHBvcnQgLSB0aGUgZW11bGF0b3IgcG9ydCAoZXg6IDkwMDApLlxuICogQHBhcmFtIG9wdGlvbnMubW9ja1VzZXJUb2tlbiAtIHRoZSBtb2NrIGF1dGggdG9rZW4gdG8gdXNlIGZvciB1bml0IHRlc3RpbmdcbiAqIFNlY3VyaXR5IFJ1bGVzLlxuICovIGZ1bmN0aW9uIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcihlLCB0LCBuLCByID0ge30pIHtcbiAgICB2YXIgaTtcbiAgICBjb25zdCBzID0gKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUkMSkpLl9nZXRTZXR0aW5ncygpLCBvID0gYCR7dH06JHtufWA7XG4gICAgaWYgKFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIgIT09IHMuaG9zdCAmJiBzLmhvc3QgIT09IG8gJiYgX19QUklWQVRFX2xvZ1dhcm4oXCJIb3N0IGhhcyBiZWVuIHNldCBpbiBib3RoIHNldHRpbmdzKCkgYW5kIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcigpLCBlbXVsYXRvciBob3N0IHdpbGwgYmUgdXNlZC5cIiksIFxuICAgIGUuX3NldFNldHRpbmdzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcyksIHtcbiAgICAgICAgaG9zdDogbyxcbiAgICAgICAgc3NsOiAhMVxuICAgIH0pKSwgci5tb2NrVXNlclRva2VuKSB7XG4gICAgICAgIGxldCB0LCBuO1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2Ygci5tb2NrVXNlclRva2VuKSB0ID0gci5tb2NrVXNlclRva2VuLCBuID0gVXNlci5NT0NLX1VTRVI7IGVsc2Uge1xuICAgICAgICAgICAgLy8gTGV0IGNyZWF0ZU1vY2tVc2VyVG9rZW4gdmFsaWRhdGUgZmlyc3QgKGNhdGNoZXMgY29tbW9uIG1pc3Rha2VzIGxpa2VcbiAgICAgICAgICAgIC8vIGludmFsaWQgZmllbGQgXCJ1aWRcIiBhbmQgbWlzc2luZyBmaWVsZCBcInN1YlwiIC8gXCJ1c2VyX2lkXCIuKVxuICAgICAgICAgICAgdCA9IGNyZWF0ZU1vY2tVc2VyVG9rZW4oci5tb2NrVXNlclRva2VuLCBudWxsID09PSAoaSA9IGUuX2FwcCkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5vcHRpb25zLnByb2plY3RJZCk7XG4gICAgICAgICAgICBjb25zdCBzID0gci5tb2NrVXNlclRva2VuLnN1YiB8fCByLm1vY2tVc2VyVG9rZW4udXNlcl9pZDtcbiAgICAgICAgICAgIGlmICghcykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICAgICAgICAgICAgbiA9IG5ldyBVc2VyKHMpO1xuICAgICAgICB9XG4gICAgICAgIGUuX2F1dGhDcmVkZW50aWFscyA9IG5ldyBfX1BSSVZBVEVfRW11bGF0b3JBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihuZXcgX19QUklWQVRFX09BdXRoVG9rZW4odCwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgUXVlcnlgIHJlZmVycyB0byBhIHF1ZXJ5IHdoaWNoIHlvdSBjYW4gcmVhZCBvciBsaXN0ZW4gdG8uIFlvdSBjYW4gYWxzb1xuICogY29uc3RydWN0IHJlZmluZWQgYFF1ZXJ5YCBvYmplY3RzIGJ5IGFkZGluZyBmaWx0ZXJzIGFuZCBvcmRlcmluZy5cbiAqLyBjbGFzcyBRdWVyeSB7XG4gICAgLy8gVGhpcyBpcyB0aGUgbGl0ZSB2ZXJzaW9uIG9mIHRoZSBRdWVyeSBjbGFzcyBpbiB0aGUgbWFpbiBTREsuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgdCwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IHQsIHRoaXMuX3F1ZXJ5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwicXVlcnlcIiwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgZSwgdGhpcy5fcXVlcnkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBEb2N1bWVudFJlZmVyZW5jZWAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgbG9jYXRpb24gaW4gYSBGaXJlc3RvcmUgZGF0YWJhc2VcbiAqIGFuZCBjYW4gYmUgdXNlZCB0byB3cml0ZSwgcmVhZCwgb3IgbGlzdGVuIHRvIHRoZSBsb2NhdGlvbi4gVGhlIGRvY3VtZW50IGF0XG4gKiB0aGUgcmVmZXJlbmNlZCBsb2NhdGlvbiBtYXkgb3IgbWF5IG5vdCBleGlzdC5cbiAqLyBjbGFzcyBEb2N1bWVudFJlZmVyZW5jZSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICB0LCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gdCwgdGhpcy5fa2V5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZG9jdW1lbnRcIiwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICBnZXQgX3BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRvY3VtZW50J3MgaWRlbnRpZmllciB3aXRoaW4gaXRzIGNvbGxlY3Rpb24uXG4gICAgICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudCAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgYmVsb25ncyB0by5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCB0aGlzLmNvbnZlcnRlciwgdGhpcy5fa2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGUsIHRoaXMuX2tleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYENvbGxlY3Rpb25SZWZlcmVuY2VgIG9iamVjdCBjYW4gYmUgdXNlZCBmb3IgYWRkaW5nIGRvY3VtZW50cywgZ2V0dGluZ1xuICogZG9jdW1lbnQgcmVmZXJlbmNlcywgYW5kIHF1ZXJ5aW5nIGZvciBkb2N1bWVudHMgKHVzaW5nIHtAbGluayAocXVlcnk6MSl9KS5cbiAqLyBjbGFzcyBDb2xsZWN0aW9uUmVmZXJlbmNlIGV4dGVuZHMgUXVlcnkge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcihlLCB0LCBfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKG4pKSwgdGhpcy5fcGF0aCA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImNvbGxlY3Rpb25cIjtcbiAgICB9XG4gICAgLyoqIFRoZSBjb2xsZWN0aW9uJ3MgaWRlbnRpZmllci4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgY29sbGVjdGlvbiAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBjb250YWluaW5nIGBEb2N1bWVudFJlZmVyZW5jZWAgaWYgdGhpcyBpcyBhXG4gICAgICogc3ViY29sbGVjdGlvbi4gSWYgdGhpcyBpc24ndCBhIHN1YmNvbGxlY3Rpb24sIHRoZSByZWZlcmVuY2UgaXMgbnVsbC5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3BhdGgucG9wTGFzdCgpO1xuICAgICAgICByZXR1cm4gZS5pc0VtcHR5KCkgPyBudWxsIDogbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgRG9jdW1lbnRLZXkoZSkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBlLCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3Rpb24oZSwgdCwgLi4ubikge1xuICAgIGlmIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCBfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50KFwiY29sbGVjdGlvblwiLCBcInBhdGhcIiwgdCksIGUgaW5zdGFuY2VvZiBGaXJlc3RvcmUkMSkge1xuICAgICAgICBjb25zdCByID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCwgLi4ubik7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVDb2xsZWN0aW9uUGF0aChyKSwgbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UoZSwgLyogY29udmVydGVyPSAqLyBudWxsLCByKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHIgPSBlLl9wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHQsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZUNvbGxlY3Rpb25QYXRoKHIpLCBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZShlLmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcik7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWxpdGUpOiBDb25zaWRlciB1c2luZyBFcnJvckZhY3RvcnkgLVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iLzAxMzFlMWYvcGFja2FnZXMvdXRpbC9zcmMvZXJyb3JzLnRzI0wxMDZcbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBgUXVlcnlgIGluc3RhbmNlIHRoYXQgaW5jbHVkZXMgYWxsIGRvY3VtZW50cyBpbiB0aGVcbiAqIGRhdGFiYXNlIHRoYXQgYXJlIGNvbnRhaW5lZCBpbiBhIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoZVxuICogZ2l2ZW4gYGNvbGxlY3Rpb25JZGAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSByb290IGBGaXJlc3RvcmVgIGluc3RhbmNlLlxuICogQHBhcmFtIGNvbGxlY3Rpb25JZCAtIElkZW50aWZpZXMgdGhlIGNvbGxlY3Rpb25zIHRvIHF1ZXJ5IG92ZXIuIEV2ZXJ5XG4gKiBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGlzIElEIGFzIHRoZSBsYXN0IHNlZ21lbnQgb2YgaXRzIHBhdGhcbiAqIHdpbGwgYmUgaW5jbHVkZWQuIENhbm5vdCBjb250YWluIGEgc2xhc2guXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBgUXVlcnlgLlxuICovIGZ1bmN0aW9uIGNvbGxlY3Rpb25Hcm91cChlLCB0KSB7XG4gICAgaWYgKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUkMSksIF9fUFJJVkFURV92YWxpZGF0ZU5vbkVtcHR5QXJndW1lbnQoXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJjb2xsZWN0aW9uIGlkXCIsIHQpLCBcbiAgICB0LmluZGV4T2YoXCIvXCIpID49IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gSUQgJyR7dH0nIHBhc3NlZCB0byBmdW5jdGlvbiBjb2xsZWN0aW9uR3JvdXAoKS4gQ29sbGVjdGlvbiBJRHMgbXVzdCBub3QgY29udGFpbiAnLycuYCk7XG4gICAgcmV0dXJuIG5ldyBRdWVyeShlLCBcbiAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUZvckNvbGxlY3Rpb25Hcm91cChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChSZXNvdXJjZVBhdGguZW1wdHlQYXRoKCksIGUpO1xuICAgIH0odCkpO1xufVxuXG5mdW5jdGlvbiBkb2MoZSwgdCwgLi4ubikge1xuICAgIGlmIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCBcbiAgICAvLyBXZSBhbGxvdyBvbWlzc2lvbiBvZiAncGF0aFN0cmluZycgYnV0IGV4cGxpY2l0bHkgcHJvaGliaXQgcGFzc2luZyBpbiBib3RoXG4gICAgLy8gJ3VuZGVmaW5lZCcgYW5kICdudWxsJy5cbiAgICAxID09PSBhcmd1bWVudHMubGVuZ3RoICYmICh0ID0gX19QUklWQVRFX0F1dG9JZC5WKCkpLCBfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50KFwiZG9jXCIsIFwicGF0aFwiLCB0KSwgXG4gICAgZSBpbnN0YW5jZW9mIEZpcmVzdG9yZSQxKSB7XG4gICAgICAgIGNvbnN0IHIgPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0LCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZURvY3VtZW50UGF0aChyKSwgbmV3IERvY3VtZW50UmVmZXJlbmNlKGUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBEb2N1bWVudEtleShyKSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCByID0gZS5fcGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0LCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVEb2N1bWVudFBhdGgociksIG5ldyBEb2N1bWVudFJlZmVyZW5jZShlLmZpcmVzdG9yZSwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UgPyBlLmNvbnZlcnRlciA6IG51bGwsIG5ldyBEb2N1bWVudEtleShyKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlcyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiByZWZFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIChlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpICYmICh0IGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgdCBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpICYmIChlLmZpcmVzdG9yZSA9PT0gdC5maXJlc3RvcmUgJiYgZS5wYXRoID09PSB0LnBhdGggJiYgZS5jb252ZXJ0ZXIgPT09IHQuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBxdWVyeUVxdWFsKGUsIHQpIHtcbiAgICByZXR1cm4gZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSBpbnN0YW5jZW9mIFF1ZXJ5ICYmIHQgaW5zdGFuY2VvZiBRdWVyeSAmJiAoZS5maXJlc3RvcmUgPT09IHQuZmlyZXN0b3JlICYmIF9fUFJJVkFURV9xdWVyeUVxdWFscyhlLl9xdWVyeSwgdC5fcXVlcnkpICYmIGUuY29udmVydGVyID09PSB0LmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9Bc3luY1F1ZXVlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHByb21pc2UgaW4gdGhlIHF1ZXVlLlxuICAgICAgICB0aGlzLlphID0gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICAvLyBBIGxpc3Qgb2YgcmV0cnlhYmxlIG9wZXJhdGlvbnMuIFJldHJ5YWJsZSBvcGVyYXRpb25zIGFyZSBydW4gaW4gb3JkZXIgYW5kXG4gICAgICAgIC8vIHJldHJpZWQgd2l0aCBiYWNrb2ZmLlxuICAgICAgICB0aGlzLlhhID0gW10sIFxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBPbmNlIGl0IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIG5vdFxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxuICAgICAgICB0aGlzLmV1ID0gITEsIFxuICAgICAgICAvLyBPcGVyYXRpb25zIHNjaGVkdWxlZCB0byBiZSBxdWV1ZWQgaW4gdGhlIGZ1dHVyZS4gT3BlcmF0aW9ucyBhcmVcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cbiAgICAgICAgdGhpcy50dSA9IFtdLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICB0aGlzLm51ID0gbnVsbCwgXG4gICAgICAgIC8vIEZsYWcgc2V0IHdoaWxlIHRoZXJlJ3MgYW4gb3V0c3RhbmRpbmcgQXN5bmNRdWV1ZSBvcGVyYXRpb24sIHVzZWQgZm9yXG4gICAgICAgIC8vIGFzc2VydGlvbiBzYW5pdHktY2hlY2tzLlxuICAgICAgICB0aGlzLnJ1ID0gITEsIFxuICAgICAgICAvLyBFbmFibGVkIGR1cmluZyBzaHV0ZG93biBvbiBTYWZhcmkgdG8gcHJldmVudCBmdXR1cmUgYWNjZXNzIHRvIEluZGV4ZWREQi5cbiAgICAgICAgdGhpcy5pdSA9ICExLCBcbiAgICAgICAgLy8gTGlzdCBvZiBUaW1lcklkcyB0byBmYXN0LWZvcndhcmQgZGVsYXlzIGZvci5cbiAgICAgICAgdGhpcy5zdSA9IFtdLCBcbiAgICAgICAgLy8gQmFja29mZiB0aW1lciB1c2VkIHRvIHNjaGVkdWxlIHJldHJpZXMgZm9yIHJldHJ5YWJsZSBvcGVyYXRpb25zXG4gICAgICAgIHRoaXMuSG8gPSBuZXcgX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZih0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogVGltZXJJZC5Bc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLm91ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGdldERvY3VtZW50KCk7XG4gICAgICAgICAgICBlICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkFzeW5jUXVldWVcIiwgXCJWaXNpYmlsaXR5IHN0YXRlIGNoYW5nZWQgdG8gXCIgKyBlLnZpc2liaWxpdHlTdGF0ZSksIFxuICAgICAgICAgICAgdGhpcy5Iby4kbygpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgICAgZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUuYWRkRXZlbnRMaXN0ZW5lciAmJiBlLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMub3UpO1xuICAgIH1cbiAgICBnZXQgaXNTaHV0dGluZ0Rvd24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV1O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAoaS5lLlxuICAgICAqIHdlIGlnbm9yZSB0aGUgUHJvbWlzZSByZXN1bHQpLlxuICAgICAqLyAgICBlbnF1ZXVlQW5kRm9yZ2V0KGUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLmVucXVldWUoZSk7XG4gICAgfVxuICAgIGVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKGUpIHtcbiAgICAgICAgdGhpcy5fdSgpLCBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLmF1KGUpO1xuICAgIH1cbiAgICBlbnRlclJlc3RyaWN0ZWRNb2RlKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmV1KSB7XG4gICAgICAgICAgICB0aGlzLmV1ID0gITAsIHRoaXMuaXUgPSBlIHx8ICExO1xuICAgICAgICAgICAgY29uc3QgdCA9IGdldERvY3VtZW50KCk7XG4gICAgICAgICAgICB0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5yZW1vdmVFdmVudExpc3RlbmVyICYmIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5vdSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5xdWV1ZShlKSB7XG4gICAgICAgIGlmICh0aGlzLl91KCksIHRoaXMuZXUpIFxuICAgICAgICAvLyBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIG5ldmVyIHJlc29sdmVzLlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCgpID0+IHt9KSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIGRlZmVycmVkIFByb21pc2UgdGhhdCB3ZSBjYW4gcmV0dXJuIHRvIHRoZSBjYWxsZWUuIFRoaXNcbiAgICAgICAgLy8gYWxsb3dzIHVzIHRvIHJldHVybiBhIFwiaGFuZ2luZyBQcm9taXNlXCIgb25seSB0byB0aGUgY2FsbGVlIGFuZCBzdGlsbFxuICAgICAgICAvLyBhZHZhbmNlIHRoZSBxdWV1ZSBldmVuIHdoZW4gdGhlIG9wZXJhdGlvbiBpcyBub3QgcnVuLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gdGhpcy5hdSgoKCkgPT4gdGhpcy5ldSAmJiB0aGlzLml1ID8gUHJvbWlzZS5yZXNvbHZlKCkgOiAoZSgpLnRoZW4odC5yZXNvbHZlLCB0LnJlamVjdCksIFxuICAgICAgICB0LnByb21pc2UpKSkudGhlbigoKCkgPT4gdC5wcm9taXNlKSk7XG4gICAgfVxuICAgIGVucXVldWVSZXRyeWFibGUoZSkge1xuICAgICAgICB0aGlzLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLlhhLnB1c2goZSksIHRoaXMudXUoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgbmV4dCBvcGVyYXRpb24gZnJvbSB0aGUgcmV0cnlhYmxlIHF1ZXVlLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLFxuICAgICAqIHJlc2NoZWR1bGVzIHdpdGggYmFja29mZi5cbiAgICAgKi8gICAgYXN5bmMgdXUoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLlhhLmxlbmd0aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLlhhWzBdKCksIHRoaXMuWGEuc2hpZnQoKSwgdGhpcy5Iby5yZXNldCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSkgdGhyb3cgZTtcbiAvLyBGYWlsdXJlIHdpbGwgYmUgaGFuZGxlZCBieSBBc3luY1F1ZXVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkFzeW5jUXVldWVcIiwgXCJPcGVyYXRpb24gZmFpbGVkIHdpdGggcmV0cnlhYmxlIGVycm9yOiBcIiArIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5YYS5sZW5ndGggPiAwICYmIFxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGFkZGl0aW9uYWwgb3BlcmF0aW9ucywgd2UgcmUtc2NoZWR1bGUgYHJldHJ5TmV4dE9wKClgLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gcnVuIHJldHJ5YWJsZSBvcGVyYXRpb25zIHRoYXQgZmFpbGVkIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlaXIgaW5pdGlhbCBhdHRlbXB0IHNpbmNlIHdlIGRvbid0IGtub3cgd2hldGhlciB0aGV5IGFyZSBhbHJlYWR5XG4gICAgICAgICAgICAvLyBlbnF1ZXVlZC4gSWYsIGZvciBleGFtcGxlLCBgb3AxYCwgYG9wMmAsIGBvcDNgIGFyZSBlbnF1ZXVlZCBhbmQgYG9wMWBcbiAgICAgICAgICAgIC8vIG5lZWRzIHRvICBiZSByZS1ydW4sIHdlIHdpbGwgcnVuIGBvcDFgLCBgb3AxYCwgYG9wMmAgdXNpbmcgdGhlXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGVucXVldWVkIGNhbGxzIHRvIGByZXRyeU5leHRPcCgpYC4gYG9wMygpYCB3aWxsIHRoZW4gcnVuIGluIHRoZVxuICAgICAgICAgICAgLy8gY2FsbCBzY2hlZHVsZWQgaGVyZS5cbiAgICAgICAgICAgIC8vIFNpbmNlIGBiYWNrb2ZmQW5kUnVuKClgIGNhbmNlbHMgYW4gZXhpc3RpbmcgYmFja29mZiBhbmQgc2NoZWR1bGVzIGFcbiAgICAgICAgICAgIC8vIG5ldyBiYWNrb2ZmIG9uIGV2ZXJ5IGNhbGwsIHRoZXJlIGlzIG9ubHkgZXZlciBhIHNpbmdsZSBhZGRpdGlvbmFsXG4gICAgICAgICAgICAvLyBvcGVyYXRpb24gaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgdGhpcy5Iby5RbygoKCkgPT4gdGhpcy51dSgpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5aYS50aGVuKCgoKSA9PiAodGhpcy5ydSA9ICEwLCBlKCkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5udSA9IGUsIHRoaXMucnUgPSAhMTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgICAgIC8qKlxuICogQ2hyb21lIGluY2x1ZGVzIEVycm9yLm1lc3NhZ2UgaW4gRXJyb3Iuc3RhY2suIE90aGVyIGJyb3dzZXJzIGRvIG5vdC5cbiAqIFRoaXMgcmV0dXJucyBleHBlY3RlZCBvdXRwdXQgb2YgbWVzc2FnZSArIHN0YWNrIHdoZW4gYXZhaWxhYmxlLlxuICogQHBhcmFtIGVycm9yIC0gRXJyb3Igb3IgRmlyZXN0b3JlRXJyb3JcbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2dldE1lc3NhZ2VPclN0YWNrKGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IGUubWVzc2FnZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIGUuc3RhY2sgJiYgKHQgPSBlLnN0YWNrLmluY2x1ZGVzKGUubWVzc2FnZSkgPyBlLnN0YWNrIDogZS5tZXNzYWdlICsgXCJcXG5cIiArIGUuc3RhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKGUpO1xuICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxuICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXG4gICAgICAgICAgICB0aHJvdyBfX1BSSVZBVEVfbG9nRXJyb3IoXCJJTlRFUk5BTCBVTkhBTkRMRUQgRVJST1I6IFwiLCB0KSwgZTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4gKHRoaXMucnUgPSAhMSwgZSkpKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuWmEgPSB0LCB0O1xuICAgIH1cbiAgICBlbnF1ZXVlQWZ0ZXJEZWxheShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuX3UoKSwgXG4gICAgICAgIC8vIEZhc3QtZm9yd2FyZCBkZWxheXMgZm9yIHRpbWVySWRzIHRoYXQgaGF2ZSBiZWVuIG92ZXJyaWRlbi5cbiAgICAgICAgdGhpcy5zdS5pbmRleE9mKGUpID4gLTEgJiYgKHQgPSAwKTtcbiAgICAgICAgY29uc3QgciA9IERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgZSwgdCwgbiwgKGUgPT4gdGhpcy5jdShlKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy50dS5wdXNoKHIpLCByO1xuICAgIH1cbiAgICBfdSgpIHtcbiAgICAgICAgdGhpcy5udSAmJiBmYWlsKCk7XG4gICAgfVxuICAgIHZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSB7fVxuICAgIC8qKlxuICAgICAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcXVldWVkIHRhc2tzIGFyZSBmaW5pc2hlZCBleGVjdXRpbmcuIERlbGF5ZWRcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxuICAgICAqLyAgICBhc3luYyBsdSgpIHtcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBpbiB0aGUgcXVldWUgcHJpb3IgdG8gZHJhaW5pbmcgbWF5IGhhdmUgZW5xdWV1ZWQgYWRkaXRpb25hbFxuICAgICAgICAvLyBvcGVyYXRpb25zLiBLZWVwIGRyYWluaW5nIHRoZSBxdWV1ZSB1bnRpbCB0aGUgdGFpbCBpcyBubyBsb25nZXIgYWR2YW5jZWQsXG4gICAgICAgIC8vIHdoaWNoIGluZGljYXRlcyB0aGF0IG5vIG1vcmUgbmV3IG9wZXJhdGlvbnMgd2VyZSBlbnF1ZXVlZCBhbmQgdGhhdCBhbGxcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB3ZXJlIGV4ZWN1dGVkLlxuICAgICAgICBsZXQgZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgZSA9IHRoaXMuWmEsIGF3YWl0IGU7XG4gICAgICAgIH0gd2hpbGUgKGUgIT09IHRoaXMuWmEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IERldGVybWluZSBpZiBhIGRlbGF5ZWQgb3BlcmF0aW9uIHdpdGggYSBwYXJ0aWN1bGFyIFRpbWVySWRcbiAgICAgKiBleGlzdHMuXG4gICAgICovICAgIGh1KGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMudHUpIGlmICh0LnRpbWVySWQgPT09IGUpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhc3RUaW1lcklkIC0gRGVsYXllZCBvcGVyYXRpb25zIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhpcyBUaW1lcklkXG4gICAgICogd2lsbCBiZSBkcmFpbmVkLiBQYXNzIFRpbWVySWQuQWxsIHRvIHJ1biBhbGwgZGVsYXllZCBvcGVyYXRpb25zLlxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKi8gICAgUHUoZSkge1xuICAgICAgICAvLyBOb3RlIHRoYXQgZHJhaW5pbmcgbWF5IGdlbmVyYXRlIG1vcmUgZGVsYXllZCBvcHMsIHNvIHdlIGRvIHRoYXQgZmlyc3QuXG4gICAgICAgIHJldHVybiB0aGlzLmx1KCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgLy8gUnVuIG9wcyBpbiB0aGUgc2FtZSBvcmRlciB0aGV5J2QgcnVuIGlmIHRoZXkgcmFuIG5hdHVyYWxseS5cbiAgICAgICAgICAgIHRoaXMudHUuc29ydCgoKGUsIHQpID0+IGUudGFyZ2V0VGltZU1zIC0gdC50YXJnZXRUaW1lTXMpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnR1KSBpZiAodC5za2lwRGVsYXkoKSwgXCJhbGxcIiAvKiBUaW1lcklkLkFsbCAqLyAhPT0gZSAmJiB0LnRpbWVySWQgPT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubHUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICBJdShlKSB7XG4gICAgICAgIHRoaXMuc3UucHVzaChlKTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIGN1KGUpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnR1LmluZGV4T2YoZSk7XG4gICAgICAgIHRoaXMudHUuc3BsaWNlKHQsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKGUpIHtcbiAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYW4gb2JqZWN0IGFuZCBjb250YWlucyBhdCBsZWFzdCBvbmUgb2YgdGhlIHNwZWNpZmllZFxuICogbWV0aG9kcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfaW1wbGVtZW50c0FueU1ldGhvZHMoZSwgdCkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBlO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkgaWYgKGUgaW4gbiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG5bZV0pIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUmVwcmVzZW50cyB0aGUgdGFzayBvZiBsb2FkaW5nIGEgRmlyZXN0b3JlIGJ1bmRsZS4gSXQgcHJvdmlkZXMgcHJvZ3Jlc3Mgb2YgYnVuZGxlXG4gKiBsb2FkaW5nLCBhcyB3ZWxsIGFzIHRhc2sgY29tcGxldGlvbiBhbmQgZXJyb3IgZXZlbnRzLlxuICpcbiAqIFRoZSBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyAoZSwgWyBcIm5leHRcIiwgXCJlcnJvclwiLCBcImNvbXBsZXRlXCIgXSk7XG59XG5cbmNsYXNzIExvYWRCdW5kbGVUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHt9LCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgXG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiAwLFxuICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IDAsXG4gICAgICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgZnVuY3Rpb25zIHRvIGxpc3RlbiB0byBidW5kbGUgbG9hZGluZyBwcm9ncmVzcyBldmVudHMuXG4gICAgICogQHBhcmFtIG5leHQgLSBDYWxsZWQgd2hlbiB0aGVyZSBpcyBhIHByb2dyZXNzIHVwZGF0ZSBmcm9tIGJ1bmRsZSBsb2FkaW5nLiBUeXBpY2FsbHkgYG5leHRgIGNhbGxzIG9jY3VyXG4gICAgICogICBlYWNoIHRpbWUgYSBGaXJlc3RvcmUgZG9jdW1lbnQgaXMgbG9hZGVkIGZyb20gdGhlIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLiBUaGUgdGFzayBhYm9ydHMgYWZ0ZXIgcmVwb3J0aW5nIHRoZVxuICAgICAqICAgZXJyb3IsIGFuZCB0aGVyZSBzaG91bGQgYmUgbm8gbW9yZSB1cGRhdGVzIGFmdGVyIHRoaXMuXG4gICAgICogQHBhcmFtIGNvbXBsZXRlIC0gQ2FsbGVkIHdoZW4gdGhlIGxvYWRpbmcgdGFzayBpcyBjb21wbGV0ZS5cbiAgICAgKi8gICAgb25Qcm9ncmVzcyhlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiBlLFxuICAgICAgICAgICAgZXJyb3I6IHQsXG4gICAgICAgICAgICBjb21wbGV0ZTogblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi5jYXRjaGAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UuY2F0Y2goZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LnRoZW5gIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIENhbGxlZCBvbiB0aGUgY29tcGxldGlvbiBvZiB0aGUgbG9hZGluZyB0YXNrIHdpdGggYSBmaW5hbCBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgdXBkYXRlLlxuICAgICAqICAgVGhlIHVwZGF0ZSB3aWxsIGFsd2F5cyBoYXZlIGl0cyBgdGFza1N0YXRlYCBzZXQgdG8gYFwiU3VjY2Vzc1wiYC5cbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIHRoZW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4oZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgY29tcGxldGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2NvbXBsZXRlV2l0aChlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKGUpLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUoKSwgXG4gICAgICAgIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBmYWlsZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBFcnJvcmAgYXMgdGhlIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9mYWlsV2l0aChlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcy50YXNrU3RhdGUgPSBcIkVycm9yXCIsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodGhpcy5fbGFzdFByb2dyZXNzKSwgXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvcihlKSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGEgcHJvZ3Jlc3MgdXBkYXRlIG9mIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gVGhlIG5ldyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF91cGRhdGVQcm9ncmVzcyhlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IGUsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb25zdGFudCB1c2VkIHRvIGluZGljYXRlIHRoZSBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uIHNob3VsZCBiZSBkaXNhYmxlZC5cbiAqIFNldCB0aGlzIHZhbHVlIGFzIHRoZSBgY2FjaGVTaXplQnl0ZXNgIG9uIHRoZSBzZXR0aW5ncyBwYXNzZWQgdG8gdGhlXG4gKiB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBjb25zdCBmZSA9IC0xO1xuXG4vKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqLyBjbGFzcyBGaXJlc3RvcmUgZXh0ZW5kcyBGaXJlc3RvcmUkMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHN1cGVyKGUsIHQsIG4sIHIpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3QXN5bmNRdWV1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0FzeW5jUXVldWVJbXBsO1xuICAgICAgICB9KCksIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gKG51bGwgPT0gciA/IHZvaWQgMCA6IHIubmFtZSkgfHwgXCJbREVGQVVMVF1cIjtcbiAgICB9XG4gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCB8fCBcbiAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRpYWxpemVkIHRvIGVuc3VyZSB0aGF0IGFsbCBzdWJzZXF1ZW50IEFQSVxuICAgICAgICAvLyB1c2FnZSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICBfX1BSSVZBVEVfY29uZmlndXJlRmlyZXN0b3JlKHRoaXMpLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBGaXJlc3RvcmV9IHdpdGggdGhlIHByb3ZpZGVkIHNldHRpbmdzLlxuICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb24sIGluY2x1ZGluZ1xuICoge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LiBJZiB0aGUgY3VzdG9tIHNldHRpbmdzIGFyZSBlbXB0eSwgdGhpcyBmdW5jdGlvbiBpc1xuICogZXF1aXZhbGVudCB0byBjYWxsaW5nIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB3aXRoIHdoaWNoIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHNldHRpbmdzIC0gQSBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIG5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHJldHVybnMgQSBuZXdseSBpbml0aWFsaXplZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBmdW5jdGlvbiBpbml0aWFsaXplRmlyZXN0b3JlKGUsIHQsIG4pIHtcbiAgICBuIHx8IChuID0gXCIoZGVmYXVsdClcIik7XG4gICAgY29uc3QgciA9IF9nZXRQcm92aWRlcihlLCBcImZpcmVzdG9yZVwiKTtcbiAgICBpZiAoci5pc0luaXRpYWxpemVkKG4pKSB7XG4gICAgICAgIGNvbnN0IGUgPSByLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICBpZGVudGlmaWVyOiBuXG4gICAgICAgIH0pLCBpID0gci5nZXRPcHRpb25zKG4pO1xuICAgICAgICBpZiAoZGVlcEVxdWFsKGksIHQpKSByZXR1cm4gZTtcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJpbml0aWFsaXplRmlyZXN0b3JlKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplRmlyZXN0b3JlKCkgd2l0aCB0aGUgc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEZpcmVzdG9yZSgpIHRvIHJldHVybiB0aGUgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS5cIik7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdm9pZCAwICE9PSB0LmxvY2FsQ2FjaGUpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGUgYW5kIGNhY2hlU2l6ZUJ5dGVzIGNhbm5vdCBiZSBzcGVjaWZpZWQgYXQgdGhlIHNhbWUgdGltZSBhcyBjYWNoZVNpemVCeXRlcyB3aWxsYmUgZGVwcmVjYXRlZC4gSW5zdGVhZCwgc3BlY2lmeSB0aGUgY2FjaGUgc2l6ZSBpbiB0aGUgY2FjaGUgb2JqZWN0XCIpO1xuICAgIGlmICh2b2lkIDAgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgLTEgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdC5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgIHJldHVybiByLmluaXRpYWxpemUoe1xuICAgICAgICBvcHRpb25zOiB0LFxuICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0RmlyZXN0b3JlKHQsIG4pIHtcbiAgICBjb25zdCByID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQgOiBnZXRBcHAoKSwgaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyB0IDogbiB8fCBcIihkZWZhdWx0KVwiLCBzID0gX2dldFByb3ZpZGVyKHIsIFwiZmlyZXN0b3JlXCIpLmdldEltbWVkaWF0ZSh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlcbiAgICB9KTtcbiAgICBpZiAoIXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIGNvbnN0IGUgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQoXCJmaXJlc3RvcmVcIik7XG4gICAgICAgIGUgJiYgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yKHMsIC4uLmUpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpIHtcbiAgICByZXR1cm4gZS5fZmlyZXN0b3JlQ2xpZW50IHx8IF9fUFJJVkFURV9jb25maWd1cmVGaXJlc3RvcmUoZSksIGUuX2ZpcmVzdG9yZUNsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCksIFxuICAgIGUuX2ZpcmVzdG9yZUNsaWVudDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbmZpZ3VyZUZpcmVzdG9yZShlKSB7XG4gICAgdmFyIHQsIG4sIHI7XG4gICAgY29uc3QgaSA9IGUuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbWFrZURhdGFiYXNlSW5mbyhlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJbmZvKGUsIHQsIG4sIHIuaG9zdCwgci5zc2wsIHIuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgci5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIF9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyhyLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyksIHIudXNlRmV0Y2hTdHJlYW1zKTtcbiAgICB9KGUuX2RhdGFiYXNlSWQsIChudWxsID09PSAodCA9IGUuX2FwcCkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5vcHRpb25zLmFwcElkKSB8fCBcIlwiLCBlLl9wZXJzaXN0ZW5jZUtleSwgaSk7XG4gICAgZS5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IEZpcmVzdG9yZUNsaWVudChlLl9hdXRoQ3JlZGVudGlhbHMsIGUuX2FwcENoZWNrQ3JlZGVudGlhbHMsIGUuX3F1ZXVlLCBzKSwgXG4gICAgKG51bGwgPT09IChuID0gaS5sb2NhbENhY2hlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIpICYmIChudWxsID09PSAociA9IGkubG9jYWxDYWNoZSkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIpICYmIChlLl9maXJlc3RvcmVDbGllbnQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgPSB7XG4gICAgICAgIF9vZmZsaW5lS2luZDogaS5sb2NhbENhY2hlLmtpbmQsXG4gICAgICAgIF9vZmZsaW5lOiBpLmxvY2FsQ2FjaGUuX29mZmxpbmVDb21wb25lbnRQcm92aWRlcixcbiAgICAgICAgX29ubGluZTogaS5sb2NhbENhY2hlLl9vbmxpbmVDb21wb25lbnRQcm92aWRlclxuICAgIH0pO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLlxuICpcbiAqIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb25zIChvdGhlciB0aGFuXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUZpcmVzdG9yZX0sIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfSBvclxuICoge0BsaW5rIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2V9LlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZSBpdFxuICogcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogUGVyc2lzdGVuY2UgY2Fubm90IGJlIHVzZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIG1ham9yIHJlbGVhc2UuIEluc3RlYWQsIHNldFxuICogYEZpcmVzdG9yZVNldHRpbmdzLmxvY2FsQ2FjaGVgIHRvIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50TG9jYWxDYWNoZWAgdG9cbiAqIHR1cm4gb24gSW5kZXhlZERiIGNhY2hlLiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2hlbiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWBcbiAqIGlzIGFscmVhZHkgc3BlY2lmaWVkIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uLlxuICovIGZ1bmN0aW9uIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKGUsIHQpIHtcbiAgICBfX1BSSVZBVEVfdmVyaWZ5Tm90SW5pdGlhbGl6ZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpO1xuICAgIGNvbnN0IG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpO1xuICAgIGlmIChuLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlNESyBjYWNoZSBpcyBhbHJlYWR5IHNwZWNpZmllZC5cIik7XG4gICAgX19QUklWQVRFX2xvZ1dhcm4oXCJlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLCB5b3UgY2FuIHVzZSBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIGluc3RlYWQuXCIpO1xuICAgIGNvbnN0IHIgPSBlLl9mcmVlemVTZXR0aW5ncygpLCBpID0gbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIHJldHVybiBfX1BSSVZBVEVfc2V0UGVyc2lzdGVuY2VQcm92aWRlcnMobiwgaSwgbmV3IF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoaSwgci5jYWNoZVNpemVCeXRlcywgbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5mb3JjZU93bmVyc2hpcCkpO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBtdWx0aS10YWIgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS4gSWYgZW5hYmxlZFxuICogYWNyb3NzIGFsbCB0YWJzLCBhbGwgb3BlcmF0aW9ucyBzaGFyZSBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UsIGluY2x1ZGluZ1xuICogc2hhcmVkIGV4ZWN1dGlvbiBvZiBxdWVyaWVzIGFuZCBsYXRlbmN5LWNvbXBlbnNhdGVkIGxvY2FsIGRvY3VtZW50IHVwZGF0ZXNcbiAqIGFjcm9zcyBhbGwgY29ubmVjdGVkIGluc3RhbmNlcy5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZVxuICogaXQgcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiIGFuZFxuICogICAgIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZC5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudFxuICogc3RvcmFnZS5cbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIG1ham9yIHJlbGVhc2UuIEluc3RlYWQsIHNldFxuICogYEZpcmVzdG9yZVNldHRpbmdzLmxvY2FsQ2FjaGVgIHRvIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50TG9jYWxDYWNoZWAgdG9cbiAqIHR1cm4gb24gaW5kZXhlZGRiIGNhY2hlLiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2hlbiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWBcbiAqIGlzIGFscmVhZHkgc3BlY2lmaWVkIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uLlxuICovIGZ1bmN0aW9uIGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoZSkge1xuICAgIF9fUFJJVkFURV92ZXJpZnlOb3RJbml0aWFsaXplZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSk7XG4gICAgY29uc3QgdCA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSk7XG4gICAgaWYgKHQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiU0RLIGNhY2hlIGlzIGFscmVhZHkgc3BlY2lmaWVkLlwiKTtcbiAgICBfX1BSSVZBVEVfbG9nV2FybihcImVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gdGhlIGZ1dHVyZSwgeW91IGNhbiB1c2UgYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCBpbnN0ZWFkLlwiKTtcbiAgICBjb25zdCBuID0gZS5fZnJlZXplU2V0dGluZ3MoKSwgciA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlcjtcbiAgICByZXR1cm4gX19QUklWQVRFX3NldFBlcnNpc3RlbmNlUHJvdmlkZXJzKHQsIHIsIG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIociwgbi5jYWNoZVNpemVCeXRlcykpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBib3RoIHRoZSBgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyYCBhbmQgYE9ubGluZUNvbXBvbmVudFByb3ZpZGVyYC5cbiAqIElmIHRoZSBvcGVyYXRpb24gZmFpbHMgd2l0aCBhIHJlY292ZXJhYmxlIGVycm9yIChzZWVcbiAqIGBjYW5SZWNvdmVyRnJvbUluZGV4ZWREYkVycm9yKClgIGJlbG93KSwgdGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVqZWN0ZWRcbiAqIGJ1dCB0aGUgY2xpZW50IHJlbWFpbnMgdXNhYmxlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRQZXJzaXN0ZW5jZVByb3ZpZGVycyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIG4pLCBhd2FpdCBfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgdCksIFxuICAgICAgICAgICAgci5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlO1xuICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfY2FuRmFsbGJhY2tGcm9tSW5kZXhlZERiRXJyb3IodCkpIHRocm93IHQ7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nV2FybihcIkVycm9yIGVuYWJsaW5nIGluZGV4ZWRkYiBjYWNoZS4gRmFsbGluZyBiYWNrIHRvIG1lbW9yeSBjYWNoZTogXCIgKyB0KSwgXG4gICAgICAgICAgICByLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH0pKS50aGVuKCgoKSA9PiByLnByb21pc2UpKTtcbn1cblxuLyoqXG4gKiBDbGVhcnMgdGhlIHBlcnNpc3RlbnQgc3RvcmFnZS4gVGhpcyBpbmNsdWRlcyBwZW5kaW5nIHdyaXRlcyBhbmQgY2FjaGVkXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgd2hpbGUgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGlzIG5vdCBzdGFydGVkIChhZnRlciB0aGUgYXBwIGlzXG4gKiB0ZXJtaW5hdGVkIG9yIHdoZW4gdGhlIGFwcCBpcyBmaXJzdCBpbml0aWFsaXplZCkuIE9uIHN0YXJ0dXAsIHRoaXMgZnVuY3Rpb25cbiAqIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW4ge0BsaW5rXG4gKiBpbml0aWFsaXplRmlyZXN0b3JlfSBvciB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0pKS4gSWYgdGhlIHtAbGluayBGaXJlc3RvcmV9XG4gKiBpbnN0YW5jZSBpcyBzdGlsbCBydW5uaW5nLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGggdGhlIGVycm9yIGNvZGVcbiAqIG9mIGBmYWlsZWQtcHJlY29uZGl0aW9uYC5cbiAqXG4gKiBOb3RlOiBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBpcyBwcmltYXJpbHkgaW50ZW5kZWQgdG8gaGVscCB3cml0ZVxuICogcmVsaWFibGUgdGVzdHMgdGhhdCB1c2UgQ2xvdWQgRmlyZXN0b3JlLiBJdCB1c2VzIGFuIGVmZmljaWVudCBtZWNoYW5pc20gZm9yXG4gKiBkcm9wcGluZyBleGlzdGluZyBkYXRhIGJ1dCBkb2VzIG5vdCBhdHRlbXB0IHRvIHNlY3VyZWx5IG92ZXJ3cml0ZSBvclxuICogb3RoZXJ3aXNlIG1ha2UgY2FjaGVkIGRhdGEgdW5yZWNvdmVyYWJsZS4gRm9yIGFwcGxpY2F0aW9ucyB0aGF0IGFyZSBzZW5zaXRpdmVcbiAqIHRvIHRoZSBkaXNjbG9zdXJlIG9mIGNhY2hlZCBkYXRhIGluIGJldHdlZW4gdXNlciBzZXNzaW9ucywgd2Ugc3Ryb25nbHlcbiAqIHJlY29tbWVuZCBub3QgZW5hYmxpbmcgcGVyc2lzdGVuY2UgYXQgYWxsLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gY2xlYXIgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBwZXJzaXN0ZW50IHN0b3JhZ2UgaXNcbiAqIGNsZWFyZWQuIE90aGVyd2lzZSwgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCBhbiBlcnJvci5cbiAqLyBmdW5jdGlvbiBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKGUpIHtcbiAgICBpZiAoZS5faW5pdGlhbGl6ZWQgJiYgIWUuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7XG4gICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuX3F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhlZERiQ2xlYXJQZXJzaXN0ZW5jZShlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfU2ltcGxlRGIuQygpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUgKyBcIm1haW5cIjtcbiAgICAgICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfU2ltcGxlRGIuZGVsZXRlKHQpO1xuICAgICAgICAgICAgfShfX1BSSVZBVEVfaW5kZXhlZERiU3RvcmFnZVByZWZpeChlLl9kYXRhYmFzZUlkLCBlLl9wZXJzaXN0ZW5jZUtleSkpLCB0LnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdC5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9KSksIHQucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGZvciB0aGUgYWN0aXZlIHVzZXIgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgaW1tZWRpYXRlbHkgaWYgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHdyaXRlcy5cbiAqIE90aGVyd2lzZSwgdGhlIHByb21pc2Ugd2FpdHMgZm9yIGFsbCBwcmV2aW91c2x5IGlzc3VlZCB3cml0ZXMgKGluY2x1ZGluZ1xuICogdGhvc2Ugd3JpdHRlbiBpbiBhIHByZXZpb3VzIGFwcCBzZXNzaW9uKSwgYnV0IGl0IGRvZXMgbm90IHdhaXQgZm9yIHdyaXRlc1xuICogdGhhdCB3ZXJlIGFkZGVkIGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIElmIHlvdSB3YW50IHRvIHdhaXQgZm9yXG4gKiBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgYWdhaW4uXG4gKlxuICogQW55IG91dHN0YW5kaW5nIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgZHVyaW5nIHVzZXJcbiAqIGNoYW5nZXMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIHdhaXRGb3JQZW5kaW5nV3JpdGVzKGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFdhaXRGb3JQZW5kaW5nV3JpdGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVSZWdpc3RlclBlbmRpbmdXcml0ZXNDYWxsYmFjayhhd2FpdCBfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZShlKSwgdCkpKSwgXG4gICAgICAgIHQucHJvbWlzZTtcbiAgICB9KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpKTtcbn1cblxuLyoqXG4gKiBSZS1lbmFibGVzIHVzZSBvZiB0aGUgbmV0d29yayBmb3IgdGhpcyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBhZnRlciBhIHByaW9yXG4gKiBjYWxsIHRvIHtAbGluayBkaXNhYmxlTmV0d29ya30uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGVuYWJsZWQuXG4gKi8gZnVuY3Rpb24gZW5hYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRFbmFibGVOZXR3b3JrKGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpKTtcbn1cblxuLyoqXG4gKiBEaXNhYmxlcyBuZXR3b3JrIHVzYWdlIGZvciB0aGlzIGluc3RhbmNlLiBJdCBjYW4gYmUgcmUtZW5hYmxlZCB2aWEge0BsaW5rXG4gKiBlbmFibGVOZXR3b3JrfS4gV2hpbGUgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQsIGFueSBzbmFwc2hvdCBsaXN0ZW5lcnMsXG4gKiBgZ2V0RG9jKClgIG9yIGBnZXREb2NzKClgIGNhbGxzIHdpbGwgcmV0dXJuIHJlc3VsdHMgZnJvbSBjYWNoZSwgYW5kIGFueSB3cml0ZVxuICogb3BlcmF0aW9ucyB3aWxsIGJlIHF1ZXVlZCB1bnRpbCB0aGUgbmV0d29yayBpcyByZXN0b3JlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZGlzYWJsZWQuXG4gKi8gZnVuY3Rpb24gZGlzYWJsZU5ldHdvcmsoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RGlzYWJsZU5ldHdvcmsoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSkpO1xufVxuXG4vKipcbiAqIFRlcm1pbmF0ZXMgdGhlIHByb3ZpZGVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBvbmx5IHRoZSBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBmdW5jdGlvblxuICogbWF5IGJlIHVzZWQuIEFueSBvdGhlciBmdW5jdGlvbiB3aWxsIHRocm93IGEgYEZpcmVzdG9yZUVycm9yYC5cbiAqXG4gKiBUbyByZXN0YXJ0IGFmdGVyIHRlcm1pbmF0aW9uLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgRmlyZWJhc2VGaXJlc3RvcmUgd2l0aFxuICoge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LlxuICpcbiAqIFRlcm1pbmF0aW9uIGRvZXMgbm90IGNhbmNlbCBhbnkgcGVuZGluZyB3cml0ZXMsIGFuZCBhbnkgcHJvbWlzZXMgdGhhdCBhcmVcbiAqIGF3YWl0aW5nIGEgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHdpbGwgbm90IGJlIHJlc29sdmVkLiBJZiB5b3UgaGF2ZVxuICogcGVyc2lzdGVuY2UgZW5hYmxlZCwgdGhlIG5leHQgdGltZSB5b3Ugc3RhcnQgdGhpcyBpbnN0YW5jZSwgaXQgd2lsbCByZXN1bWVcbiAqIHNlbmRpbmcgdGhlc2Ugd3JpdGVzIHRvIHRoZSBzZXJ2ZXIuXG4gKlxuICogTm90ZTogVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBpcyBub3QgcmVxdWlyZWQuIFRoaXNcbiAqIGZ1bmN0aW9uIGlzIHVzZWZ1bCBvbmx5IHdoZW4geW91IHdhbnQgdG8gZm9yY2UgdGhpcyBpbnN0YW5jZSB0byByZWxlYXNlIGFsbFxuICogb2YgaXRzIHJlc291cmNlcyBvciBpbiBjb21iaW5hdGlvbiB3aXRoIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHRvXG4gKiBlbnN1cmUgdGhhdCBhbGwgbG9jYWwgc3RhdGUgaXMgZGVzdHJveWVkIGJldHdlZW4gdGVzdCBydW5zLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgaW5zdGFuY2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiB0ZXJtaW5hdGVkLlxuICovIGZ1bmN0aW9uIHRlcm1pbmF0ZShlKSB7XG4gICAgcmV0dXJuIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoZS5hcHAsIFwiZmlyZXN0b3JlXCIsIGUuX2RhdGFiYXNlSWQuZGF0YWJhc2UpLCBlLl9kZWxldGUoKTtcbn1cblxuLyoqXG4gKiBMb2FkcyBhIEZpcmVzdG9yZSBidW5kbGUgaW50byB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBsb2FkIGJ1bmRsZXMgZm9yLlxuICogQHBhcmFtIGJ1bmRsZURhdGEgLSBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBidW5kbGUgdG8gYmUgbG9hZGVkLiBWYWxpZFxuICogb2JqZWN0cyBhcmUgYEFycmF5QnVmZmVyYCwgYFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+YCBvciBgc3RyaW5nYC5cbiAqXG4gKiBAcmV0dXJucyBBIGBMb2FkQnVuZGxlVGFza2Agb2JqZWN0LCB3aGljaCBub3RpZmllcyBjYWxsZXJzIHdpdGggcHJvZ3Jlc3NcbiAqIHVwZGF0ZXMsIGFuZCBjb21wbGV0aW9uIG9yIGVycm9yIGV2ZW50cy4gSXQgY2FuIGJlIHVzZWQgYXMgYVxuICogYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz5gLlxuICovIGZ1bmN0aW9uIGxvYWRCdW5kbGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSwgciA9IG5ldyBMb2FkQnVuZGxlVGFzaztcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudExvYWRCdW5kbGUobiwgZS5fZGF0YWJhc2VJZCwgdCwgciksIHI7XG59XG5cbi8qKlxuICogUmVhZHMgYSBGaXJlc3RvcmUge0BsaW5rIFF1ZXJ5fSBmcm9tIGxvY2FsIGNhY2hlLCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlblxuICogbmFtZS5cbiAqXG4gKiBUaGUgbmFtZWQgcXVlcmllcyBhcmUgcGFja2FnZWQgIGludG8gYnVuZGxlcyBvbiB0aGUgc2VydmVyIHNpZGUgKGFsb25nXG4gKiB3aXRoIHJlc3VsdGluZyBkb2N1bWVudHMpLCBhbmQgbG9hZGVkIHRvIGxvY2FsIGNhY2hlIHVzaW5nIGBsb2FkQnVuZGxlYC4gT25jZVxuICogaW4gbG9jYWwgY2FjaGUsIHVzZSB0aGlzIG1ldGhvZCB0byBleHRyYWN0IGEge0BsaW5rIFF1ZXJ5fSBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gcmVhZCB0aGUgcXVlcnkgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aXRoIHRoZSBRdWVyeSBvciBgbnVsbGAuXG4gKi8gZnVuY3Rpb24gbmFtZWRRdWVyeShlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXROYW1lZFF1ZXJ5KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpLCB0KS50aGVuKCh0ID0+IHQgPyBuZXcgUXVlcnkoZSwgbnVsbCwgdC5xdWVyeSkgOiBudWxsKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92ZXJpZnlOb3RJbml0aWFsaXplZChlKSB7XG4gICAgaWYgKGUuX2luaXRpYWxpemVkIHx8IGUuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgcGVyc2lzdGVuY2UgY2FuIG5vIGxvbmdlciBiZSBlbmFibGVkLiBZb3UgY2FuIG9ubHkgZW5hYmxlIHBlcnNpc3RlbmNlIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC5cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGFnZ3JlZ2F0aW9uIHRoYXQgY2FuIGJlIHBlcmZvcm1lZCBieSBGaXJlc3RvcmUuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbmNsYXNzIEFnZ3JlZ2F0ZUZpZWxkIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQWdncmVnYXRlRmllbGQ8VD5cbiAgICAgKiBAcGFyYW0gX2FnZ3JlZ2F0ZVR5cGUgU3BlY2lmaWVzIHRoZSB0eXBlIG9mIGFnZ3JlZ2F0aW9uIG9wZXJhdGlvbiB0byBwZXJmb3JtLlxuICAgICAqIEBwYXJhbSBfaW50ZXJuYWxGaWVsZFBhdGggT3B0aW9uYWxseSBzcGVjaWZpZXMgdGhlIGZpZWxkIHRoYXQgaXMgYWdncmVnYXRlZC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBUT0RPIChzdW0vYXZnKSBtYWtlIGFnZ3JlZ2F0ZVR5cGUgcHVibGljIHdoZW4gdGhlIGZlYXR1cmUgaXMgc3VwcG9ydGVkXG4gICAgZSA9IFwiY291bnRcIiwgdCkge1xuICAgICAgICB0aGlzLl9hZ2dyZWdhdGVUeXBlID0gZSwgdGhpcy5faW50ZXJuYWxGaWVsZFBhdGggPSB0LCBcbiAgICAgICAgLyoqIEEgdHlwZSBzdHJpbmcgdG8gdW5pcXVlbHkgaWRlbnRpZnkgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiQWdncmVnYXRlRmllbGRcIjtcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIHJlc3VsdHMgb2YgZXhlY3V0aW5nIGFuIGFnZ3JlZ2F0aW9uIHF1ZXJ5LlxuICovIGNsYXNzIEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3Qge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IHQsIHRoaXMuX2RhdGEgPSBuLCBcbiAgICAgICAgLyoqIEEgdHlwZSBzdHJpbmcgdG8gdW5pcXVlbHkgaWRlbnRpZnkgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiQWdncmVnYXRlUXVlcnlTbmFwc2hvdFwiLCB0aGlzLnF1ZXJ5ID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcmVzdWx0cyBvZiB0aGUgYWdncmVnYXRpb25zIHBlcmZvcm1lZCBvdmVyIHRoZSB1bmRlcmx5aW5nXG4gICAgICogcXVlcnkuXG4gICAgICpcbiAgICAgKiBUaGUga2V5cyBvZiB0aGUgcmV0dXJuZWQgb2JqZWN0IHdpbGwgYmUgdGhlIHNhbWUgYXMgdGhvc2Ugb2YgdGhlXG4gICAgICogYEFnZ3JlZ2F0ZVNwZWNgIG9iamVjdCBzcGVjaWZpZWQgdG8gdGhlIGFnZ3JlZ2F0aW9uIG1ldGhvZCwgYW5kIHRoZSB2YWx1ZXNcbiAgICAgKiB3aWxsIGJlIHRoZSBjb3JyZXNwb25kaW5nIGFnZ3JlZ2F0aW9uIHJlc3VsdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSByZXN1bHRzIG9mIHRoZSBhZ2dyZWdhdGlvbnMgcGVyZm9ybWVkIG92ZXIgdGhlIHVuZGVybHlpbmdcbiAgICAgKiBxdWVyeS5cbiAgICAgKi8gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRPYmplY3RNYXAodGhpcy5fZGF0YSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhcnJheSBvZiBieXRlcy5cbiAqLyBjbGFzcyBCeXRlcyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuX2J5dGVTdHJpbmcgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIEJhc2U2NCBzdHJpbmcsIGNvbnZlcnRpbmcgaXQgdG9cbiAgICAgKiBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNlNjQgLSBUaGUgQmFzZTY0IHN0cmluZyB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnl0ZXMoQnl0ZVN0cmluZy5mcm9tQmFzZTY0U3RyaW5nKGUpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gY29uc3RydWN0IGRhdGEgZnJvbSBCYXNlNjQgc3RyaW5nOiBcIiArIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gVWludDhBcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSBVaW50OEFycmF5IHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21VaW50OEFycmF5KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlcyhCeXRlU3RyaW5nLmZyb21VaW50OEFycmF5KGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBhcyBhIEJhc2U2NC1lbmNvZGVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmcgY3JlYXRlZCBmcm9tIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvQmFzZTY0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgYnl0ZXMgaW4gYSBuZXcgYFVpbnQ4QXJyYXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFVpbnQ4QXJyYXkgY3JlYXRlZCBmcm9tIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b1VpbnQ4QXJyYXkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJCeXRlcyhiYXNlNjQ6IFwiICsgdGhpcy50b0Jhc2U2NCgpICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEJ5dGVzYCBvYmplY3QgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgQnl0ZXNgIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcuaXNFcXVhbChlLl9ieXRlU3RyaW5nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqLyBjbGFzcyBGaWVsZFBhdGgge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgRmllbGRQYXRoYCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLmUpIHtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLmxlbmd0aDsgKyt0KSBpZiAoMCA9PT0gZVt0XS5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBmaWVsZCBuYW1lIGF0IGFyZ3VtZW50ICQoaSArIDEpLiBGaWVsZCBuYW1lcyBtdXN0IG5vdCBiZSBlbXB0eS5cIik7XG4gICAgICAgIHRoaXMuX2ludGVybmFsUGF0aCA9IG5ldyBGaWVsZFBhdGgkMShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgRmllbGRQYXRoYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxQYXRoLmlzRXF1YWwoZS5faW50ZXJuYWxQYXRoKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgc2VudGluZWwgYEZpZWxkUGF0aGAgdG8gcmVmZXIgdG8gdGhlIElEIG9mIGEgZG9jdW1lbnQuXG4gKiBJdCBjYW4gYmUgdXNlZCBpbiBxdWVyaWVzIHRvIHNvcnQgb3IgZmlsdGVyIGJ5IHRoZSBkb2N1bWVudCBJRC5cbiAqLyBmdW5jdGlvbiBkb2N1bWVudElkKCkge1xuICAgIHJldHVybiBuZXcgRmllbGRQYXRoKFwiX19uYW1lX19cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNlbnRpbmVsIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIHdoZW4gd3JpdGluZyBkb2N1bWVudCBmaWVsZHMgd2l0aCBgc2V0KClgXG4gKiBvciBgdXBkYXRlKClgLlxuICovIGNsYXNzIEZpZWxkVmFsdWUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWMgQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyB0aGlzIGNsYXNzLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBsYXRpdHVkZS9sb25naXR1ZGUgcGFpci5cbiAqXG4gKiBMYXRpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTkwLCA5MF0uXG4gKiBMb25naXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy0xODAsIDE4MF0uXG4gKi8gY2xhc3MgR2VvUG9pbnQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGBHZW9Qb2ludGAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGxhdGl0dWRlIGFuZFxuICAgICAqIGxvbmdpdHVkZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSAtIFRoZSBsb25naXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShlKSB8fCBlIDwgLTkwIHx8IGUgPiA5MCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJMYXRpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MCwgYnV0IHdhczogXCIgKyBlKTtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0KSB8fCB0IDwgLTE4MCB8fCB0ID4gMTgwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkxvbmdpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLCBidXQgd2FzOiBcIiArIHQpO1xuICAgICAgICB0aGlzLl9sYXQgPSBlLCB0aGlzLl9sb25nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhdGl0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxhdGl0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9uZ2l0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxvbmdpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgR2VvUG9pbnRgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdCA9PT0gZS5fbGF0ICYmIHRoaXMuX2xvbmcgPT09IGUuX2xvbmc7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBHZW9Qb2ludC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IHRoaXMuX2xhdCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5fbG9uZ1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3R1YWxseSBwcml2YXRlIHRvIEpTIGNvbnN1bWVycyBvZiBvdXIgQVBJLCBzbyB0aGlzIGZ1bmN0aW9uIGlzIHByZWZpeGVkXG4gICAgICogd2l0aCBhbiB1bmRlcnNjb3JlLlxuICAgICAqLyAgICBfY29tcGFyZVRvKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuX2xhdCwgZS5fbGF0KSB8fCBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLl9sb25nLCBlLl9sb25nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IGdlID0gL15fXy4qX18kLztcblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBkb2N1bWVudCBkYXRhIChlLmcuIGZvciBhIHNldERhdGEgY2FsbCkuICovIGNsYXNzIFBhcnNlZFNldERhdGEge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZSwgdGhpcy5maWVsZE1hc2sgPSB0LCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5maWVsZE1hc2sgPyBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oZSwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgdCwgdGhpcy5maWVsZFRyYW5zZm9ybXMpIDogbmV3IF9fUFJJVkFURV9TZXRNdXRhdGlvbihlLCB0aGlzLmRhdGEsIHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgXCJ1cGRhdGVcIiBkYXRhIChpLmUuIGZvciBhbiB1cGRhdGVEYXRhIGNhbGwpLiAqLyBjbGFzcyBQYXJzZWRVcGRhdGVEYXRhIHtcbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvLyBUaGUgZmllbGRNYXNrIGRvZXMgbm90IGluY2x1ZGUgZG9jdW1lbnQgdHJhbnNmb3Jtcy5cbiAgICB0LCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGUsIHRoaXMuZmllbGRNYXNrID0gdCwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCB0LCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaXNXcml0ZShlKSB7XG4gICAgc3dpdGNoIChlKSB7XG4gICAgICBjYXNlIDAgLyogVXNlckRhdGFTb3VyY2UuU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovIDpcbiAgICAgIGNhc2UgNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovIDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxufVxuXG4vKiogQSBcImNvbnRleHRcIiBvYmplY3QgcGFzc2VkIGFyb3VuZCB3aGlsZSBwYXJzaW5nIHVzZXIgZGF0YS4gKi8gY2xhc3MgX19QUklWQVRFX1BhcnNlQ29udGV4dEltcGwge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUGFyc2VDb250ZXh0IHdpdGggdGhlIGdpdmVuIHNvdXJjZSBhbmQgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZXR0aW5ncyAtIFRoZSBzZXR0aW5ncyBmb3IgdGhlIHBhcnNlci5cbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSBJRCBvZiB0aGUgRmlyZXN0b3JlIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHRvIGdlbmVyYXRlIHRoZSBWYWx1ZSBwcm90by5cbiAgICAgKiBAcGFyYW0gaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAtIFdoZXRoZXIgdG8gaWdub3JlIHVuZGVmaW5lZCBwcm9wZXJ0aWVzXG4gICAgICogcmF0aGVyIHRoYW4gdGhyb3cuXG4gICAgICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHRyYW5zZm9ybXMgZW5jb3VudGVyZWRcbiAgICAgKiB3aGlsZSBwYXJzaW5nIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBmaWVsZE1hc2sgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCBwYXRocyBlbmNvdW50ZXJlZCB3aGlsZSBwYXJzaW5nXG4gICAgICogdGhlIGRhdGEuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdywgc28gcGF0aCBjYW4gYmVcbiAgICAgKiBudWxsIHRvIGluZGljYXRlIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgYW55IGxvY2F0aW9uIHdpdGhpbiBhbiBhcnJheSAoaW5cbiAgICAgKiB3aGljaCBjYXNlIGNlcnRhaW4gZmVhdHVyZXMgd2lsbCBub3Qgd29yayBhbmQgZXJyb3JzIHdpbGwgYmUgc29tZXdoYXRcbiAgICAgKiBjb21wcm9taXNlZCkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gZSwgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5zZXJpYWxpemVyID0gbiwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gciwgXG4gICAgICAgIC8vIE1pbm9yIGhhY2s6IElmIGZpZWxkVHJhbnNmb3JtcyBpcyB1bmRlZmluZWQsIHdlIGFzc3VtZSB0aGlzIGlzIGFuXG4gICAgICAgIC8vIGV4dGVybmFsIGNhbGwgYW5kIHdlIG5lZWQgdG8gdmFsaWRhdGUgdGhlIGVudGlyZSBwYXRoLlxuICAgICAgICB2b2lkIDAgPT09IGkgJiYgdGhpcy5kdSgpLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGkgfHwgW10sIHRoaXMuZmllbGRNYXNrID0gcyB8fCBbXTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnBhdGg7XG4gICAgfVxuICAgIGdldCBUdSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuVHU7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbmV3IGNvbnRleHQgd2l0aCB0aGUgc3BlY2lmaWVkIHNldHRpbmdzIG92ZXJ3cml0dGVuLiAqLyAgICBFdShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhcnNlQ29udGV4dEltcGwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNldHRpbmdzKSwgZSksIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XG4gICAgfVxuICAgIEF1KGUpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAodCA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5jaGlsZChlKSwgciA9IHRoaXMuRXUoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIFJ1OiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHIuVnUoZSksIHI7XG4gICAgfVxuICAgIG11KGUpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAodCA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5jaGlsZChlKSwgciA9IHRoaXMuRXUoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIFJ1OiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHIuZHUoKSwgcjtcbiAgICB9XG4gICAgZnUoZSkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdzsgc28gbWFrZSBwYXRoXG4gICAgICAgIC8vIHVuZGVmaW5lZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuRXUoe1xuICAgICAgICAgICAgcGF0aDogdm9pZCAwLFxuICAgICAgICAgICAgUnU6ICEwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBndShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoZSwgdGhpcy5zZXR0aW5ncy5tZXRob2ROYW1lLCB0aGlzLnNldHRpbmdzLnB1IHx8ICExLCB0aGlzLnBhdGgsIHRoaXMuc2V0dGluZ3MueXUpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgJ2ZpZWxkUGF0aCcgd2FzIHRyYXZlcnNlZCB3aGVuIGNyZWF0aW5nIHRoaXMgY29udGV4dC4gKi8gICAgY29udGFpbnMoZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmZpZWxkTWFzay5maW5kKCh0ID0+IGUuaXNQcmVmaXhPZih0KSkpIHx8IHZvaWQgMCAhPT0gdGhpcy5maWVsZFRyYW5zZm9ybXMuZmluZCgodCA9PiBlLmlzUHJlZml4T2YodC5maWVsZCkpKTtcbiAgICB9XG4gICAgZHUoKSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFJlbW92ZSBudWxsIGNoZWNrIG9uY2Ugd2UgaGF2ZSBwcm9wZXIgcGF0aHMgZm9yIGZpZWxkc1xuICAgICAgICAvLyB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAodGhpcy5wYXRoKSBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMucGF0aC5sZW5ndGg7IGUrKykgdGhpcy5WdSh0aGlzLnBhdGguZ2V0KGUpKTtcbiAgICB9XG4gICAgVnUoZSkge1xuICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHRocm93IHRoaXMuZ3UoXCJEb2N1bWVudCBmaWVsZHMgbXVzdCBub3QgYmUgZW1wdHlcIik7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfaXNXcml0ZSh0aGlzLlR1KSAmJiBnZS50ZXN0KGUpKSB0aHJvdyB0aGlzLmd1KCdEb2N1bWVudCBmaWVsZHMgY2Fubm90IGJlZ2luIGFuZCBlbmQgd2l0aCBcIl9fXCInKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZvciBwYXJzaW5nIHJhdyB1c2VyIGlucHV0IChwcm92aWRlZCB2aWEgdGhlIEFQSSkgaW50byBpbnRlcm5hbCBtb2RlbFxuICogY2xhc3Nlcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfVXNlckRhdGFSZWFkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gZSwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gdCwgdGhpcy5zZXJpYWxpemVyID0gbiB8fCBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdG9wLWxldmVsIHBhcnNlIGNvbnRleHQuICovICAgIHd1KGUsIHQsIG4sIHIgPSAhMSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsKHtcbiAgICAgICAgICAgIFR1OiBlLFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogdCxcbiAgICAgICAgICAgIHl1OiBuLFxuICAgICAgICAgICAgcGF0aDogRmllbGRQYXRoJDEuZW1wdHlQYXRoKCksXG4gICAgICAgICAgICBSdTogITEsXG4gICAgICAgICAgICBwdTogclxuICAgICAgICB9LCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuc2VyaWFsaXplciwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlKSB7XG4gICAgY29uc3QgdCA9IGUuX2ZyZWV6ZVNldHRpbmdzKCksIG4gPSBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlLl9kYXRhYmFzZUlkKTtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9Vc2VyRGF0YVJlYWRlcihlLl9kYXRhYmFzZUlkLCAhIXQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgbik7XG59XG5cbi8qKiBQYXJzZSBkb2N1bWVudCBkYXRhIGZyb20gYSBzZXQoKSBjYWxsLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKGUsIHQsIG4sIHIsIGksIHMgPSB7fSkge1xuICAgIGNvbnN0IG8gPSBlLnd1KHMubWVyZ2UgfHwgcy5tZXJnZUZpZWxkcyA/IDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gOiAwIC8qIFVzZXJEYXRhU291cmNlLlNldCAqLyAsIHQsIG4sIGkpO1xuICAgIF9fUFJJVkFURV92YWxpZGF0ZVBsYWluT2JqZWN0KFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgbywgcik7XG4gICAgY29uc3QgXyA9IF9fUFJJVkFURV9wYXJzZU9iamVjdChyLCBvKTtcbiAgICBsZXQgYSwgdTtcbiAgICBpZiAocy5tZXJnZSkgYSA9IG5ldyBGaWVsZE1hc2soby5maWVsZE1hc2spLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7IGVsc2UgaWYgKHMubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2Ygcy5tZXJnZUZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMSh0LCByLCBuKTtcbiAgICAgICAgICAgIGlmICghby5jb250YWlucyhpKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEZpZWxkICcke2l9JyBpcyBzcGVjaWZpZWQgaW4geW91ciBmaWVsZCBtYXNrIGJ1dCBtaXNzaW5nIGZyb20geW91ciBpbnB1dCBkYXRhLmApO1xuICAgICAgICAgICAgX19QUklWQVRFX2ZpZWxkTWFza0NvbnRhaW5zKGUsIGkpIHx8IGUucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICBhID0gbmV3IEZpZWxkTWFzayhlKSwgdSA9IG8uZmllbGRUcmFuc2Zvcm1zLmZpbHRlcigoZSA9PiBhLmNvdmVycyhlLmZpZWxkKSkpO1xuICAgIH0gZWxzZSBhID0gbnVsbCwgdSA9IG8uZmllbGRUcmFuc2Zvcm1zO1xuICAgIHJldHVybiBuZXcgUGFyc2VkU2V0RGF0YShuZXcgT2JqZWN0VmFsdWUoXyksIGEsIHUpO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfRGVsZXRlRmllbGRWYWx1ZUltcGwgZXh0ZW5kcyBGaWVsZFZhbHVlIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybShlKSB7XG4gICAgICAgIGlmICgyIC8qIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0ICovICE9PSBlLlR1KSB0aHJvdyAxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyA9PT0gZS5UdSA/IGUuZ3UoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCBvZiB5b3VyIHVwZGF0ZSBkYXRhYCkgOiBlLmd1KGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3Mge21lcmdlOnRydWV9YCk7XG4gICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXG4gICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXG4gICAgICAgIHJldHVybiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCksIG51bGw7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbDtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNoaWxkIGNvbnRleHQgZm9yIHBhcnNpbmcgU2VyaWFsaXphYmxlRmllbGRWYWx1ZXMuXG4gKlxuICogVGhpcyBpcyBkaWZmZXJlbnQgdGhhbiBjYWxsaW5nIGBQYXJzZUNvbnRleHQuY29udGV4dFdpdGhgIGJlY2F1c2UgaXQga2VlcHNcbiAqIHRoZSBmaWVsZFRyYW5zZm9ybXMgYW5kIGZpZWxkTWFzayBzZXBhcmF0ZS5cbiAqXG4gKiBUaGUgY3JlYXRlZCBjb250ZXh0IGhhcyBpdHMgYGRhdGFTb3VyY2VgIHNldCB0byBgVXNlckRhdGFTb3VyY2UuQXJndW1lbnRgLlxuICogQWx0aG91Z2ggdGhlc2UgdmFsdWVzIGFyZSB1c2VkIHdpdGggd3JpdGVzLCBhbnkgZWxlbWVudHMgaW4gdGhlc2UgRmllbGRWYWx1ZXNcbiAqIGFyZSBub3QgY29uc2lkZXJlZCB3cml0ZXMgc2luY2UgdGhleSBjYW5ub3QgY29udGFpbiBhbnkgRmllbGRWYWx1ZSBzZW50aW5lbHMsXG4gKiBldGMuXG4gKlxuICogQHBhcmFtIGZpZWxkVmFsdWUgLSBUaGUgc2VudGluZWwgRmllbGRWYWx1ZSBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgY2hpbGRcbiAqICAgICBjb250ZXh0LlxuICogQHBhcmFtIGNvbnRleHQgLSBUaGUgcGFyZW50IGNvbnRleHQuXG4gKiBAcGFyYW0gYXJyYXlFbGVtZW50IC0gV2hldGhlciBvciBub3QgdGhlIEZpZWxkVmFsdWUgaGFzIGFuIGFycmF5LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVTZW50aW5lbENoaWxkQ29udGV4dChlLCB0LCBuKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGFyc2VDb250ZXh0SW1wbCh7XG4gICAgICAgIFR1OiAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovICxcbiAgICAgICAgeXU6IHQuc2V0dGluZ3MueXUsXG4gICAgICAgIG1ldGhvZE5hbWU6IGUuX21ldGhvZE5hbWUsXG4gICAgICAgIFJ1OiBuXG4gICAgfSwgdC5kYXRhYmFzZUlkLCB0LnNlcmlhbGl6ZXIsIHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFRyYW5zZm9ybShlLnBhdGgsIG5ldyBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0FycmF5VW5pb25GaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSksIHRoaXMuU3UgPSB0O1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY3JlYXRlU2VudGluZWxDaGlsZENvbnRleHQodGhpcywgZSwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy5TdS5tYXAoKGUgPT4gX19QUklWQVRFX3BhcnNlRGF0YShlLCB0KSkpLCByID0gbmV3IF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgcik7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gZTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9BcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5TdSA9IHQ7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jcmVhdGVTZW50aW5lbENoaWxkQ29udGV4dCh0aGlzLCBlLCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlN1Lm1hcCgoZSA9PiBfX1BSSVZBVEVfcGFyc2VEYXRhKGUsIHQpKSksIHIgPSBuZXcgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgcik7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gZTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwgZXh0ZW5kcyBGaWVsZFZhbHVlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUpLCB0aGlzLmJ1ID0gdDtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0oZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKGUuc2VyaWFsaXplciwgdG9OdW1iZXIoZS5zZXJpYWxpemVyLCB0aGlzLmJ1KSk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0oZS5wYXRoLCB0KTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSBlO1xuICAgIH1cbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYW4gdXBkYXRlKCkgY2FsbC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YShlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IGUud3UoMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gLCB0LCBuKTtcbiAgICBfX1BSSVZBVEVfdmFsaWRhdGVQbGFpbk9iamVjdChcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIGksIHIpO1xuICAgIGNvbnN0IHMgPSBbXSwgbyA9IE9iamVjdFZhbHVlLmVtcHR5KCk7XG4gICAgZm9yRWFjaChyLCAoKGUsIHIpID0+IHtcbiAgICAgICAgY29uc3QgXyA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKHQsIGUsIG4pO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgciA9IGdldE1vZHVsYXJJbnN0YW5jZShyKTtcbiAgICAgICAgY29uc3QgYSA9IGkubXUoXyk7XG4gICAgICAgIGlmIChyIGluc3RhbmNlb2YgX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsKSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHMucHVzaChfKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX3BhcnNlRGF0YShyLCBhKTtcbiAgICAgICAgICAgIG51bGwgIT0gZSAmJiAocy5wdXNoKF8pLCBvLnNldChfLCBlKSk7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgY29uc3QgXyA9IG5ldyBGaWVsZE1hc2socyk7XG4gICAgcmV0dXJuIG5ldyBQYXJzZWRVcGRhdGVEYXRhKG8sIF8sIGkuZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYSBsaXN0IG9mIGZpZWxkL3ZhbHVlIGFyZ3VtZW50cy4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlVXBkYXRlVmFyYXJncyhlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgY29uc3QgbyA9IGUud3UoMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gLCB0LCBuKSwgXyA9IFsgX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKHQsIHIsIG4pIF0sIGEgPSBbIGkgXTtcbiAgICBpZiAocy5sZW5ndGggJSAyICE9IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzIHRoYXQgYWx0ZXJuYXRlIGJldHdlZW4gZmllbGQgbmFtZXMgYW5kIHZhbHVlcy5gKTtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHMubGVuZ3RoOyBlICs9IDIpIF8ucHVzaChfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEodCwgc1tlXSkpLCBcbiAgICBhLnB1c2goc1tlICsgMV0pO1xuICAgIGNvbnN0IHUgPSBbXSwgYyA9IE9iamVjdFZhbHVlLmVtcHR5KCk7XG4gICAgLy8gV2UgaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIHRvIHBpY2sgdGhlIGxhc3QgdmFsdWUgZm9yIGEgZmllbGQgaWYgdGhlXG4gICAgLy8gdXNlciBzcGVjaWZpZWQgdGhlIGZpZWxkIG11bHRpcGxlIHRpbWVzLlxuICAgIGZvciAobGV0IGUgPSBfLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSBpZiAoIV9fUFJJVkFURV9maWVsZE1hc2tDb250YWlucyh1LCBfW2VdKSkge1xuICAgICAgICBjb25zdCB0ID0gX1tlXTtcbiAgICAgICAgbGV0IG4gPSBhW2VdO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKTtcbiAgICAgICAgY29uc3QgciA9IG8ubXUodCk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsKSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHUucHVzaCh0KTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX3BhcnNlRGF0YShuLCByKTtcbiAgICAgICAgICAgIG51bGwgIT0gZSAmJiAodS5wdXNoKHQpLCBjLnNldCh0LCBlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbCA9IG5ldyBGaWVsZE1hc2sodSk7XG4gICAgcmV0dXJuIG5ldyBQYXJzZWRVcGRhdGVEYXRhKGMsIGwsIG8uZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIFwicXVlcnkgdmFsdWVcIiAoZS5nLiB2YWx1ZSBpbiBhIHdoZXJlIGZpbHRlciBvciBhIHZhbHVlIGluIGEgY3Vyc29yXG4gKiBib3VuZCkuXG4gKlxuICogQHBhcmFtIGFsbG93QXJyYXlzIC0gV2hldGhlciB0aGUgcXVlcnkgdmFsdWUgaXMgYW4gYXJyYXkgdGhhdCBtYXkgZGlyZWN0bHlcbiAqIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlUXVlcnlWYWx1ZShlLCB0LCBuLCByID0gITEpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3BhcnNlRGF0YShuLCBlLnd1KHIgPyA0IC8qIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgKi8gOiAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovICwgdCkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB1c2VyIGRhdGEgdG8gUHJvdG9idWYgVmFsdWVzLlxuICpcbiAqIEBwYXJhbSBpbnB1dCAtIERhdGEgdG8gYmUgcGFyc2VkLlxuICogQHBhcmFtIGNvbnRleHQgLSBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcbiAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlLCBvciBudWxsIGlmIHRoZSB2YWx1ZSB3YXMgYSBGaWVsZFZhbHVlIHNlbnRpbmVsXG4gKiB0aGF0IHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBwYXJzZWQgZGF0YS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VEYXRhKGUsIHQpIHtcbiAgICBpZiAoX19QUklWQVRFX2xvb2tzTGlrZUpzb25PYmplY3QoXG4gICAgLy8gVW53cmFwIHRoZSBBUEkgdHlwZSBmcm9tIHRoZSBDb21wYXQgU0RLLiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBBUEkgdHlwZVxuICAgIC8vIGZyb20gZmlyZXN0b3JlLWV4cC5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSkgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZVBsYWluT2JqZWN0KFwiVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6XCIsIHQsIGUpLCBcbiAgICBfX1BSSVZBVEVfcGFyc2VPYmplY3QoZSwgdCk7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBGaWVsZFZhbHVlKSBcbiAgICAvLyBGaWVsZFZhbHVlcyB1c3VhbGx5IHBhcnNlIGludG8gdHJhbnNmb3JtcyAoZXhjZXB0IGRlbGV0ZUZpZWxkKCkpXG4gICAgLy8gaW4gd2hpY2ggY2FzZSB3ZSBkbyBub3Qgd2FudCB0byBpbmNsdWRlIHRoaXMgZmllbGQgaW4gb3VyIHBhcnNlZCBkYXRhXG4gICAgLy8gKGFzIGRvaW5nIHNvIHdpbGwgb3ZlcndyaXRlIHRoZSBmaWVsZCBkaXJlY3RseSBwcmlvciB0byB0aGUgdHJhbnNmb3JtXG4gICAgLy8gdHJ5aW5nIHRvIHRyYW5zZm9ybSBpdCkuIFNvIHdlIGRvbid0IGFkZCB0aGlzIGxvY2F0aW9uIHRvXG4gICAgLy8gY29udGV4dC5maWVsZE1hc2sgYW5kIHdlIHJldHVybiBudWxsIGFzIG91ciBwYXJzaW5nIHJlc3VsdC5cbiAgICAvKipcbiAqIFwiUGFyc2VzXCIgdGhlIHByb3ZpZGVkIEZpZWxkVmFsdWVJbXBsLCBhZGRpbmcgYW55IG5lY2Vzc2FyeSB0cmFuc2Zvcm1zIHRvXG4gKiBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VTZW50aW5lbEZpZWxkVmFsdWUoZSwgdCkge1xuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICghX19QUklWQVRFX2lzV3JpdGUodC5UdSkpIHRocm93IHQuZ3UoYCR7ZS5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpYCk7XG4gICAgICAgIGlmICghdC5wYXRoKSB0aHJvdyB0Lmd1KGAke2UuX21ldGhvZE5hbWV9KCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c2ApO1xuICAgICAgICBjb25zdCBuID0gZS5fdG9GaWVsZFRyYW5zZm9ybSh0KTtcbiAgICAgICAgbiAmJiB0LmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlXG4gKi8gKGUsIHQpLCBudWxsO1xuICAgIGlmICh2b2lkIDAgPT09IGUgJiYgdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKSBcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkIGl0IGNhbiBuZXZlciBwYXJ0aWNpcGF0ZSBpbiB0aGUgZmllbGRNYXNrLCBzb1xuICAgIC8vIGRvbid0IGhhbmRsZSB0aGlzIGJlbG93LiBJZiBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AgaXMgZmFsc2UsXG4gICAgLy8gYHBhcnNlU2NhbGFyVmFsdWVgIHdpbGwgcmVqZWN0IGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoXG4gICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXG4gICAgdC5wYXRoICYmIHQuZmllbGRNYXNrLnB1c2godC5wYXRoKSwgZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXG4gICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XG4gICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcbiAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cbiAgICAgICAgaWYgKHQuc2V0dGluZ3MuUnUgJiYgNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovICE9PSB0LlR1KSB0aHJvdyB0Lmd1KFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZUFycmF5KGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgIGxldCByID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSBfX1BSSVZBVEVfcGFyc2VEYXRhKGksIHQuZnUocikpO1xuICAgICAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gSnVzdCBpbmNsdWRlIG51bGxzIGluIHRoZSBhcnJheSBmb3IgZmllbGRzIGJlaW5nIHJlcGxhY2VkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIHNlbnRpbmVsLlxuICAgICAgICAgICAgICAgIGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgICAgICAgICB9KSwgbi5wdXNoKGUpLCByKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVNjYWxhclZhbHVlKGUsIHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIGUpIHJldHVybiB0b051bWJlcih0LnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICBpZiAoXCJib29sZWFuXCIgPT0gdHlwZW9mIGUpIHJldHVybiB7XG4gICAgICAgICAgICBib29sZWFuVmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiB7XG4gICAgICAgICAgICBzdHJpbmdWYWx1ZTogZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBUaW1lc3RhbXAuZnJvbURhdGUoZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB0b1RpbWVzdGFtcCh0LnNlcmlhbGl6ZXIsIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAvLyBGaXJlc3RvcmUgYmFja2VuZCB0cnVuY2F0ZXMgcHJlY2lzaW9uIGRvd24gdG8gbWljcm9zZWNvbmRzLiBUbyBlbnN1cmVcbiAgICAgICAgICAgIC8vIG9mZmxpbmUgbW9kZSB3b3JrcyB0aGUgc2FtZSB3aXRoIHJlZ2FyZHMgdG8gdHJ1bmNhdGlvbiwgcGVyZm9ybSB0aGVcbiAgICAgICAgICAgIC8vIHRydW5jYXRpb24gaW1tZWRpYXRlbHkgd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgYmFja2VuZCB0byBkbyB0aGF0LlxuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBUaW1lc3RhbXAoZS5zZWNvbmRzLCAxZTMgKiBNYXRoLmZsb29yKGUubmFub3NlY29uZHMgLyAxZTMpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHRvVGltZXN0YW1wKHQuc2VyaWFsaXplciwgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBHZW9Qb2ludCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogZS5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGUubG9uZ2l0dWRlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQnl0ZXMpIHJldHVybiB7XG4gICAgICAgICAgICBieXRlc1ZhbHVlOiBfX1BSSVZBVEVfdG9CeXRlcyh0LnNlcmlhbGl6ZXIsIGUuX2J5dGVTdHJpbmcpXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmRhdGFiYXNlSWQsIHIgPSBlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZDtcbiAgICAgICAgICAgIGlmICghci5pc0VxdWFsKG4pKSB0aHJvdyB0Lmd1KGBEb2N1bWVudCByZWZlcmVuY2UgaXMgZm9yIGRhdGFiYXNlICR7ci5wcm9qZWN0SWR9LyR7ci5kYXRhYmFzZX0gYnV0IHNob3VsZCBiZSBmb3IgZGF0YWJhc2UgJHtuLnByb2plY3RJZH0vJHtuLmRhdGFiYXNlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VWYWx1ZTogX19QUklWQVRFX3RvUmVzb3VyY2VOYW1lKGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkIHx8IHQuZGF0YWJhc2VJZCwgZS5fa2V5LnBhdGgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IHQuZ3UoYFVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOiAke19fUFJJVkFURV92YWx1ZURlc2NyaXB0aW9uKGUpfWApO1xuICAgIH1cbiAgICAvKipcbiAqIENoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBsb29rcyBsaWtlIGEgSlNPTiBvYmplY3QgdGhhdCBzaG91bGQgYmUgY29udmVydGVkXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcbiAqIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJ1Y3QgdmFsdWUuIEFycmF5cywgRGF0ZXMsXG4gKiBHZW9Qb2ludHMsIGV0Yy4gYXJlIG5vdCBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZSBKU09OIG9iamVjdHMgc2luY2UgdGhleSBtYXBcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cbiAqLyAoZSwgdCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZU9iamVjdChlLCB0KSB7XG4gICAgY29uc3QgbiA9IHt9O1xuICAgIHJldHVybiBpc0VtcHR5KGUpID8gXG4gICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgZXhwbGljaXRseSBhZGQgaXQgdG8gdGhlIHVwZGF0ZVxuICAgIC8vIG1hc2sgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBjcmVhdGVzIGEgbWFwIGVudHJ5LlxuICAgIHQucGF0aCAmJiB0LnBhdGgubGVuZ3RoID4gMCAmJiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCkgOiBmb3JFYWNoKGUsICgoZSwgcikgPT4ge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX3BhcnNlRGF0YShyLCB0LkF1KGUpKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChuW2VdID0gaSk7XG4gICAgfSkpLCB7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb29rc0xpa2VKc29uT2JqZWN0KGUpIHtcbiAgICByZXR1cm4gIShcIm9iamVjdFwiICE9IHR5cGVvZiBlIHx8IG51bGwgPT09IGUgfHwgZSBpbnN0YW5jZW9mIEFycmF5IHx8IGUgaW5zdGFuY2VvZiBEYXRlIHx8IGUgaW5zdGFuY2VvZiBUaW1lc3RhbXAgfHwgZSBpbnN0YW5jZW9mIEdlb1BvaW50IHx8IGUgaW5zdGFuY2VvZiBCeXRlcyB8fCBlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgZSBpbnN0YW5jZW9mIEZpZWxkVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVQbGFpbk9iamVjdChlLCB0LCBuKSB7XG4gICAgaWYgKCFfX1BSSVZBVEVfbG9va3NMaWtlSnNvbk9iamVjdChuKSB8fCAhZnVuY3Rpb24gX19QUklWQVRFX2lzUGxhaW5PYmplY3QoZSkge1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSAmJiBudWxsICE9PSBlICYmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkgPT09IE9iamVjdC5wcm90b3R5cGUgfHwgbnVsbCA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKTtcbiAgICB9KG4pKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihuKTtcbiAgICAgICAgdGhyb3cgXCJhbiBvYmplY3RcIiA9PT0gciA/IHQuZ3UoZSArIFwiIGEgY3VzdG9tIG9iamVjdFwiKSA6IHQuZ3UoZSArIFwiIFwiICsgcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKSBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEoZSwgdCwgbikge1xuICAgIGlmICgoXG4gICAgLy8gSWYgcmVxdWlyZWQsIHJlcGxhY2UgdGhlIEZpZWxkUGF0aCBDb21wYXQgY2xhc3Mgd2l0aCB3aXRoIHRoZSBmaXJlc3RvcmUtZXhwXG4gICAgLy8gRmllbGRQYXRoLlxuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpIGluc3RhbmNlb2YgRmllbGRQYXRoKSByZXR1cm4gdC5faW50ZXJuYWxQYXRoO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoZSwgdCk7XG4gICAgdGhyb3cgX19QUklWQVRFX2NyZWF0ZUVycm9yKFwiRmllbGQgcGF0aCBhcmd1bWVudHMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZyBvciBcIiwgZSwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbn1cblxuLyoqXG4gKiBNYXRjaGVzIGFueSBjaGFyYWN0ZXJzIGluIGEgZmllbGQgcGF0aCBzdHJpbmcgdGhhdCBhcmUgcmVzZXJ2ZWQuXG4gKi8gY29uc3QgcGUgPSBuZXcgUmVnRXhwKFwiW35cXFxcKi9cXFxcW1xcXFxdXVwiKTtcblxuLyoqXG4gKiBXcmFwcyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nIHdpdGggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCB0aGUgbWV0aG9kIHRoYXRcbiAqIHdhcyB0aHJvd24uXG4gKiBAcGFyYW0gbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWNseSB2aXNpYmxlIG1ldGhvZCBuYW1lXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBkb3Qtc2VwYXJhdGVkIHN0cmluZyBmb3JtIG9mIGEgZmllbGQgcGF0aCB3aGljaCB3aWxsIGJlXG4gKiBzcGxpdCBvbiBkb3RzLlxuICogQHBhcmFtIHRhcmdldERvYyAtIFRoZSBkb2N1bWVudCBhZ2FpbnN0IHdoaWNoIHRoZSBmaWVsZCBwYXRoIHdpbGwgYmVcbiAqIGV2YWx1YXRlZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhlLCB0LCBuKSB7XG4gICAgaWYgKHQuc2VhcmNoKHBlKSA+PSAwKSB0aHJvdyBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoYEludmFsaWQgZmllbGQgcGF0aCAoJHt0fSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gJ34nLCAnKicsICcvJywgJ1snLCBvciAnXSdgLCBlLCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoKC4uLnQuc3BsaXQoXCIuXCIpKS5faW50ZXJuYWxQYXRoO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgdGhyb3cgX19QUklWQVRFX2NyZWF0ZUVycm9yKGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7dH0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCwgZSwgXG4gICAgICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgICAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUVycm9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICBjb25zdCBzID0gciAmJiAhci5pc0VtcHR5KCksIG8gPSB2b2lkIDAgIT09IGk7XG4gICAgbGV0IF8gPSBgRnVuY3Rpb24gJHt0fSgpIGNhbGxlZCB3aXRoIGludmFsaWQgZGF0YWA7XG4gICAgbiAmJiAoXyArPSBcIiAodmlhIGB0b0ZpcmVzdG9yZSgpYClcIiksIF8gKz0gXCIuIFwiO1xuICAgIGxldCBhID0gXCJcIjtcbiAgICByZXR1cm4gKHMgfHwgbykgJiYgKGEgKz0gXCIgKGZvdW5kXCIsIHMgJiYgKGEgKz0gYCBpbiBmaWVsZCAke3J9YCksIG8gJiYgKGEgKz0gYCBpbiBkb2N1bWVudCAke2l9YCksIFxuICAgIGEgKz0gXCIpXCIpLCBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBfICsgZSArIGEpO1xufVxuXG4vKiogQ2hlY2tzIGBoYXlzdGFja2AgaWYgRmllbGRQYXRoIGBuZWVkbGVgIGlzIHByZXNlbnQuIFJ1bnMgaW4gTyhuKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkTWFza0NvbnRhaW5zKGUsIHQpIHtcbiAgICByZXR1cm4gZS5zb21lKChlID0+IGUuaXNFcXVhbCh0KSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIERvY3VtZW50U25hcHNob3QkMSB7XG4gICAgLy8gTm90ZTogVGhpcyBjbGFzcyBpcyBzdHJpcHBlZCBkb3duIHZlcnNpb24gb2YgdGhlIERvY3VtZW50U25hcHNob3QgaW5cbiAgICAvLyB0aGUgbGVnYWN5IFNESy4gVGhlIGNoYW5nZXMgYXJlOlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RNZXRhZGF0YS5cbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90T3B0aW9ucy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gdCwgdGhpcy5fa2V5ID0gbiwgdGhpcy5fZG9jdW1lbnQgPSByLCBcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gaTtcbiAgICB9XG4gICAgLyoqIFByb3BlcnR5IG9mIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwcm92aWRlcyB0aGUgZG9jdW1lbnQncyBJRC4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGBEb2N1bWVudFJlZmVyZW5jZWAgZm9yIHRoZSBkb2N1bWVudCBpbmNsdWRlZCBpbiB0aGUgYERvY3VtZW50U25hcHNob3RgLlxuICAgICAqLyAgICBnZXQgcmVmKCkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyLCB0aGlzLl9rZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaWduYWxzIHdoZXRoZXIgb3Igbm90IHRoZSBkb2N1bWVudCBhdCB0aGUgc25hcHNob3QncyBsb2NhdGlvbiBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuX2RvY3VtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGBcbiAgICAgKiBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90JDEodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZmllbGQgc3BlY2lmaWVkIGJ5IGBmaWVsZFBhdGhgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IG9yIGZpZWxkIGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgZSkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQpIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBRdWVyeURvY3VtZW50U25hcHNob3QkMSBleHRlbmRzIERvY3VtZW50U25hcHNob3QkMSB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpYCBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50KGUsIHQpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKGUsIHQpIDogdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IHQuX2ludGVybmFsUGF0aCA6IHQuX2RlbGVnYXRlLl9pbnRlcm5hbFBhdGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0KGUpIHtcbiAgICBpZiAoXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8gPT09IGUubGltaXRUeXBlICYmIDAgPT09IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuVU5JTVBMRU1FTlRFRCwgXCJsaW1pdFRvTGFzdCgpIHF1ZXJpZXMgcmVxdWlyZSBzcGVjaWZ5aW5nIGF0IGxlYXN0IG9uZSBvcmRlckJ5KCkgY2xhdXNlXCIpO1xufVxuXG4vKipcbiAqIEFuIGBBcHBsaWFibGVDb25zdHJhaW50YCBpcyBhbiBhYnN0cmFjdGlvbiBvZiBhIGNvbnN0cmFpbnQgdGhhdCBjYW4gYmUgYXBwbGllZFxuICogdG8gYSBGaXJlc3RvcmUgcXVlcnkuXG4gKi8gY2xhc3MgQXBwbGlhYmxlQ29uc3RyYWludCB7fVxuXG4vKipcbiAqIEEgYFF1ZXJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnkgYVxuICogRmlyZXN0b3JlIHF1ZXJ5LiBgUXVlcnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIHdoZXJlfSxcbiAqIHtAbGluayBvcmRlckJ5fSwge0BsaW5rIChzdGFydEF0OjEpfSwge0BsaW5rIChzdGFydEFmdGVyOjEpfSwge0BsaW5rXG4gKiAoZW5kQmVmb3JlOjEpfSwge0BsaW5rIChlbmRBdDoxKX0sIHtAbGluayBsaW1pdH0sIHtAbGluayBsaW1pdFRvTGFzdH0gYW5kXG4gKiBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXRcbiAqIGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUNvbnN0cmFpbnQgZXh0ZW5kcyBBcHBsaWFibGVDb25zdHJhaW50IHt9XG5cbmZ1bmN0aW9uIHF1ZXJ5KGUsIHQsIC4uLm4pIHtcbiAgICBsZXQgciA9IFtdO1xuICAgIHQgaW5zdGFuY2VvZiBBcHBsaWFibGVDb25zdHJhaW50ICYmIHIucHVzaCh0KSwgciA9IHIuY29uY2F0KG4pLCBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVRdWVyeUNvbnN0cmFpbnRBcnJheShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcigoZSA9PiBlIGluc3RhbmNlb2YgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50KSkubGVuZ3RoLCBuID0gZS5maWx0ZXIoKGUgPT4gZSBpbnN0YW5jZW9mIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50KSkubGVuZ3RoO1xuICAgICAgICBpZiAodCA+IDEgfHwgdCA+IDAgJiYgbiA+IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZFF1ZXJ5LiBXaGVuIHVzaW5nIGNvbXBvc2l0ZSBmaWx0ZXJzLCB5b3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lIGZpbHRlciBhdCB0aGUgdG9wIGxldmVsLiBDb25zaWRlciBuZXN0aW5nIHRoZSBtdWx0aXBsZSBmaWx0ZXJzIHdpdGhpbiBhbiBgYW5kKC4uLilgIHN0YXRlbWVudC4gRm9yIGV4YW1wbGU6IGNoYW5nZSBgcXVlcnkocXVlcnksIHdoZXJlKC4uLiksIG9yKC4uLikpYCB0byBgcXVlcnkocXVlcnksIGFuZCh3aGVyZSguLi4pLCBvciguLi4pKSlgLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIENvbnZlcnRzIEZpcmVzdG9yZSdzIGludGVybmFsIHR5cGVzIHRvIHRoZSBKYXZhU2NyaXB0IHR5cGVzIHRoYXQgd2UgZXhwb3NlXG4gKiB0byB0aGUgdXNlci5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyAocik7XG4gICAgZm9yIChjb25zdCB0IG9mIHIpIGUgPSB0Ll9hcHBseShlKTtcbiAgICByZXR1cm4gZTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnlcbiAqIGEgRmlyZXN0b3JlIHF1ZXJ5IGJ5IGZpbHRlcmluZyBvbiBvbmUgb3IgbW9yZSBkb2N1bWVudCBmaWVsZHMuXG4gKiBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9IGFuZCBjYW4gdGhlblxuICogYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnNcbiAqIHRoaXMgYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLl9maWVsZCA9IGUsIHRoaXMuX29wID0gdCwgdGhpcy5fdmFsdWUgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIndoZXJlXCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludChlLCB0LCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX3BhcnNlKGUpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlTmV3RmllbGRGaWx0ZXIoZS5fcXVlcnksIHQpLCBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRGaWx0ZXIoZS5fcXVlcnksIHQpKTtcbiAgICB9XG4gICAgX3BhcnNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlLmZpcmVzdG9yZSksIG4gPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlGaWx0ZXIoZSwgdCwgbiwgciwgaSwgcywgbykge1xuICAgICAgICAgICAgbGV0IF87XG4gICAgICAgICAgICBpZiAoaS5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBzIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBzKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJyR7c30nIHF1ZXJpZXMgb24gZG9jdW1lbnRJZCgpLmApO1xuICAgICAgICAgICAgICAgIGlmIChcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHMgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHMpIHtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX3ZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyhvLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbykgdC5wdXNoKF9fUFJJVkFURV9wYXJzZURvY3VtZW50SWRWYWx1ZShyLCBlLCBuKSk7XG4gICAgICAgICAgICAgICAgICAgIF8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB0XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIF8gPSBfX1BSSVZBVEVfcGFyc2VEb2N1bWVudElkVmFsdWUociwgZSwgbyk7XG4gICAgICAgICAgICB9IGVsc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICE9PSBzICYmIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICE9PSBzICYmIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovICE9PSBzIHx8IF9fUFJJVkFURV92YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHMobywgcyksIFxuICAgICAgICAgICAgXyA9IF9fUFJJVkFURV9wYXJzZVF1ZXJ5VmFsdWUobiwgdCwgbywgXG4gICAgICAgICAgICAvKiBhbGxvd0FycmF5cz0gKi8gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBzIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSBzKTtcbiAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUoaSwgcywgXyk7XG4gICAgICAgIH0oZS5fcXVlcnksIFwid2hlcmVcIiwgdCwgZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHRoaXMuX2ZpZWxkLCB0aGlzLl9vcCwgdGhpcy5fdmFsdWUpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH0gdGhhdCBlbmZvcmNlcyB0aGF0IGRvY3VtZW50c1xuICogbXVzdCBjb250YWluIHRoZSBzcGVjaWZpZWQgZmllbGQgYW5kIHRoYXQgdGhlIHZhbHVlIHNob3VsZCBzYXRpc2Z5IHRoZVxuICogcmVsYXRpb24gY29uc3RyYWludCBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggdG8gY29tcGFyZVxuICogQHBhcmFtIG9wU3RyIC0gVGhlIG9wZXJhdGlvbiBzdHJpbmcgKGUuZyBcIiZsdDtcIiwgXCImbHQ7PVwiLCBcIj09XCIsIFwiJmx0O1wiLFxuICogICBcIiZsdDs9XCIsIFwiIT1cIikuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgZm9yIGNvbXBhcmlzb25cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gd2hlcmUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSB0LCBpID0gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChcIndoZXJlXCIsIGUpO1xuICAgIHJldHVybiBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludC5fY3JlYXRlKGksIHIsIG4pO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHNcbiAqIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5IGJ5IHBlcmZvcm1pbmcgdGhlIGxvZ2ljYWwgT1Igb3IgQU5EIG9mIG11bHRpcGxlXG4gKiB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9cyBvciB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fXMuXG4gKiBgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIG9yfSBvclxuICoge0BsaW5rIGFuZH0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnlcbiAqIGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGUgYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50IGV4dGVuZHMgQXBwbGlhYmxlQ29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fcXVlcnlDb25zdHJhaW50cyA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQoZSwgdCk7XG4gICAgfVxuICAgIF9wYXJzZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9xdWVyeUNvbnN0cmFpbnRzLm1hcCgodCA9PiB0Ll9wYXJzZShlKSkpLmZpbHRlcigoZSA9PiBlLmdldEZpbHRlcnMoKS5sZW5ndGggPiAwKSk7XG4gICAgICAgIHJldHVybiAxID09PSB0Lmxlbmd0aCA/IHRbMF0gOiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKHQsIHRoaXMuX2dldE9wZXJhdG9yKCkpO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGFyc2UoZSk7XG4gICAgICAgIHJldHVybiAwID09PSB0LmdldEZpbHRlcnMoKS5sZW5ndGggPyBlIDogKGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZU5ld0ZpbHRlcihlLCB0KSB7XG4gICAgICAgICAgICBsZXQgbiA9IGU7XG4gICAgICAgICAgICBjb25zdCByID0gdC5nZXRGbGF0dGVuZWRGaWx0ZXJzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcikgX19QUklWQVRFX3ZhbGlkYXRlTmV3RmllbGRGaWx0ZXIobiwgZSksIG4gPSBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRGaWx0ZXIobiwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2tzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgZmlsdGVyIG9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIGdpdmVuIGxpc3Qgb2YgZmlsdGVycyBhbmRcbiAgICAgICAgLy8gcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXG4gICAgICAgIChlLl9xdWVyeSwgdCksIG5ldyBRdWVyeShlLmZpcmVzdG9yZSwgZS5jb252ZXJ0ZXIsIF9fUFJJVkFURV9xdWVyeVdpdGhBZGRlZEZpbHRlcihlLl9xdWVyeSwgdCkpKTtcbiAgICB9XG4gICAgX2dldFF1ZXJ5Q29uc3RyYWludHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeUNvbnN0cmFpbnRzO1xuICAgIH1cbiAgICBfZ2V0T3BlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBcImFuZFwiID09PSB0aGlzLnR5cGUgPyBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyA6IFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLztcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fSB0aGF0IGlzIGEgZGlzanVuY3Rpb24gb2ZcbiAqIHRoZSBnaXZlbiBmaWx0ZXIgY29uc3RyYWludHMuIEEgZGlzanVuY3Rpb24gZmlsdGVyIGluY2x1ZGVzIGEgZG9jdW1lbnQgaWYgaXRcbiAqIHNhdGlzZmllcyBhbnkgb2YgdGhlIGdpdmVuIGZpbHRlcnMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5Q29uc3RyYWludHMgLSBPcHRpb25hbC4gVGhlIGxpc3Qgb2ZcbiAqIHtAbGluayBRdWVyeUZpbHRlckNvbnN0cmFpbnR9cyB0byBwZXJmb3JtIGEgZGlzanVuY3Rpb24gZm9yLiBUaGVzZSBtdXN0IGJlXG4gKiBjcmVhdGVkIHdpdGggY2FsbHMgdG8ge0BsaW5rIHdoZXJlfSwge0BsaW5rIG9yfSwgb3Ige0BsaW5rIGFuZH0uXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBvciguLi5lKSB7XG4gICAgLy8gT25seSBzdXBwb3J0IFF1ZXJ5RmlsdGVyQ29uc3RyYWludHNcbiAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IF9fUFJJVkFURV92YWxpZGF0ZVF1ZXJ5RmlsdGVyQ29uc3RyYWludChcIm9yXCIsIGUpKSksIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludC5fY3JlYXRlKFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyAsIGUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0gdGhhdCBpcyBhIGNvbmp1bmN0aW9uIG9mXG4gKiB0aGUgZ2l2ZW4gZmlsdGVyIGNvbnN0cmFpbnRzLiBBIGNvbmp1bmN0aW9uIGZpbHRlciBpbmNsdWRlcyBhIGRvY3VtZW50IGlmIGl0XG4gKiBzYXRpc2ZpZXMgYWxsIG9mIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICpcbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gT3B0aW9uYWwuIFRoZSBsaXN0IG9mXG4gKiB7QGxpbmsgUXVlcnlGaWx0ZXJDb25zdHJhaW50fXMgdG8gcGVyZm9ybSBhIGNvbmp1bmN0aW9uIGZvci4gVGhlc2UgbXVzdCBiZVxuICogY3JlYXRlZCB3aXRoIGNhbGxzIHRvIHtAbGluayB3aGVyZX0sIHtAbGluayBvcn0sIG9yIHtAbGluayBhbmR9LlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gYW5kKC4uLmUpIHtcbiAgICAvLyBPbmx5IHN1cHBvcnQgUXVlcnlGaWx0ZXJDb25zdHJhaW50c1xuICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4gX19QUklWQVRFX3ZhbGlkYXRlUXVlcnlGaWx0ZXJDb25zdHJhaW50KFwiYW5kXCIsIGUpKSksIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludC5fY3JlYXRlKFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovICwgZSk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBzb3J0IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZ1xuICoge0BsaW5rIG9yZGVyQnl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5XG4gKiBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGAuXG4gKlxuICogTm90ZTogRG9jdW1lbnRzIHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIG9yZGVyQnkgZmllbGQgd2lsbCBub3QgYmUgcHJlc2VudCBpblxuICogdGhlIHF1ZXJ5IHJlc3VsdC5cbiAqLyBjbGFzcyBRdWVyeU9yZGVyQnlDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuX2ZpZWxkID0gZSwgdGhpcy5fZGlyZWN0aW9uID0gdCwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJvcmRlckJ5XCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeU9yZGVyQnlDb25zdHJhaW50KGUsIHQpO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5T3JkZXJCeShlLCB0LCBuKSB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5zdGFydEF0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIHN0YXJ0QXQoKSBvciBzdGFydEFmdGVyKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlLmVuZEF0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIGVuZEF0KCkgb3IgZW5kQmVmb3JlKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgT3JkZXJCeSh0LCBuKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVOZXdPcmRlckJ5KGUsIHQpIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gX19QUklWQVRFX2dldEZpcnN0T3JkZXJCeUZpZWxkKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IG9yZGVyIGJ5LiBJdCBtdXN0IG1hdGNoIGFueSBpbmVxdWFsaXR5LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2dldEluZXF1YWxpdHlGaWx0ZXJGaWVsZChlKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBfX1BSSVZBVEVfdmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoKGUsIG4sIHQuZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0oZSwgciksIHI7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGUgYSBgQm91bmRgIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIGBCb3VuZGAgd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUga2V5IG9mIHRoZSBkb2N1bWVudFxuICogYW5kIHNvIG9ubHkgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHdpbGwgY29tcGFyZSBlcXVhbCB0byB0aGUgcmV0dXJuZWRcbiAqIHBvc2l0aW9uLlxuICpcbiAqIFdpbGwgdGhyb3cgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYWxsIGZpZWxkcyBvZiB0aGUgb3JkZXIgYnlcbiAqIG9mIHRoZSBxdWVyeSBvciBpZiBhbnkgb2YgdGhlIGZpZWxkcyBpbiB0aGUgb3JkZXIgYnkgYXJlIGFuIHVuY29tbWl0dGVkXG4gKiBzZXJ2ZXIgdGltZXN0YW1wLlxuICovIChlLl9xdWVyeSwgdGhpcy5fZmllbGQsIHRoaXMuX2RpcmVjdGlvbik7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRPcmRlckJ5KGUsIHQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGUgdGhhdCBvcmRlckJ5IGRvZXMgbm90IGxpc3QgdGhlIHNhbWUga2V5IHR3aWNlLlxuICAgICAgICAgICAgY29uc3QgbiA9IGUuZXhwbGljaXRPcmRlckJ5LmNvbmNhdChbIHQgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgbiwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xuICAgICAgICB9KGUuX3F1ZXJ5LCB0KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlPcmRlckJ5Q29uc3RyYWludH0gdGhhdCBzb3J0cyB0aGUgcXVlcnkgcmVzdWx0IGJ5IHRoZVxuICogc3BlY2lmaWVkIGZpZWxkLCBvcHRpb25hbGx5IGluIGRlc2NlbmRpbmcgb3JkZXIgaW5zdGVhZCBvZiBhc2NlbmRpbmcuXG4gKlxuICogTm90ZTogRG9jdW1lbnRzIHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCBmaWVsZCB3aWxsIG5vdCBiZSBwcmVzZW50XG4gKiBpbiB0aGUgcXVlcnkgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgZmllbGQgdG8gc29ydCBieS5cbiAqIEBwYXJhbSBkaXJlY3Rpb25TdHIgLSBPcHRpb25hbCBkaXJlY3Rpb24gdG8gc29ydCBieSAoJ2FzYycgb3IgJ2Rlc2MnKS4gSWZcbiAqIG5vdCBzcGVjaWZpZWQsIG9yZGVyIHdpbGwgYmUgYXNjZW5kaW5nLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIG9yZGVyQnkoZSwgdCA9IFwiYXNjXCIpIHtcbiAgICBjb25zdCBuID0gdCwgciA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoXCJvcmRlckJ5XCIsIGUpO1xuICAgIHJldHVybiBRdWVyeU9yZGVyQnlDb25zdHJhaW50Ll9jcmVhdGUociwgbik7XG59XG5cbi8qKlxuICogQSBgUXVlcnlMaW1pdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbGltaXQgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnlcbiAqIGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5TGltaXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIGxpbWl0fSBvclxuICoge0BsaW5rIGxpbWl0VG9MYXN0fSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ld1xuICogcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5TGltaXRDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUxpbWl0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fbGltaXQgPSB0LCB0aGlzLl9saW1pdFR5cGUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlMaW1pdENvbnN0cmFpbnQoZSwgdCwgbik7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQoZS5fcXVlcnksIHRoaXMuX2xpbWl0LCB0aGlzLl9saW1pdFR5cGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nXG4gKiBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gbGltaXQoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVQb3NpdGl2ZU51bWJlcihcImxpbWl0XCIsIGUpLCBRdWVyeUxpbWl0Q29uc3RyYWludC5fY3JlYXRlKFwibGltaXRcIiwgZSwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgbGFzdCBtYXRjaGluZ1xuICogZG9jdW1lbnRzLlxuICpcbiAqIFlvdSBtdXN0IHNwZWNpZnkgYXQgbGVhc3Qgb25lIGBvcmRlckJ5YCBjbGF1c2UgZm9yIGBsaW1pdFRvTGFzdGAgcXVlcmllcyxcbiAqIG90aGVyd2lzZSBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24gZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBsaW1pdFRvTGFzdChlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKFwibGltaXRUb0xhc3RcIiwgZSksIFF1ZXJ5TGltaXRDb25zdHJhaW50Ll9jcmVhdGUoXCJsaW1pdFRvTGFzdFwiLCBlLCBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAgaXMgdXNlZCB0byBleGNsdWRlIGRvY3VtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhXG4gKiByZXN1bHQgc2V0IHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKHN0YXJ0QXQ6MSl9IG9yXG4gKiB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGFcbiAqIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlTdGFydEF0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fZG9jT3JGaWVsZHMgPSB0LCB0aGlzLl9pbmNsdXNpdmUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlTdGFydEF0Q29uc3RyYWludChlLCB0LCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzKGUsIHRoaXMudHlwZSwgdGhpcy5fZG9jT3JGaWVsZHMsIHRoaXMuX2luY2x1c2l2ZSk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoU3RhcnRBdChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCB0LCBlLmVuZEF0KTtcbiAgICAgICAgfShlLl9xdWVyeSwgdCkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3RhcnRBdCguLi5lKSB7XG4gICAgcmV0dXJuIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQuX2NyZWF0ZShcInN0YXJ0QXRcIiwgZSwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiBzdGFydEFmdGVyKC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlTdGFydEF0Q29uc3RyYWludC5fY3JlYXRlKFwic3RhcnRBZnRlclwiLCBlLCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlFbmRBdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gZXhjbHVkZSBkb2N1bWVudHMgZnJvbSB0aGUgZW5kIG9mIGFcbiAqIHJlc3VsdCBzZXQgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlFbmRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKGVuZEF0OjEpfSBvclxuICoge0BsaW5rIChlbmRCZWZvcmU6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3XG4gKiBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlFbmRBdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5RW5kQXRDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSBlLCB0aGlzLl9kb2NPckZpZWxkcyA9IHQsIHRoaXMuX2luY2x1c2l2ZSA9IG47XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUVuZEF0Q29uc3RyYWludChlLCB0LCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzKGUsIHRoaXMudHlwZSwgdGhpcy5fZG9jT3JGaWVsZHMsIHRoaXMuX2luY2x1c2l2ZSk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoRW5kQXQoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIGUuZmlsdGVycy5zbGljZSgpLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgZS5zdGFydEF0LCB0KTtcbiAgICAgICAgfShlLl9xdWVyeSwgdCkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZW5kQmVmb3JlKC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlFbmRBdENvbnN0cmFpbnQuX2NyZWF0ZShcImVuZEJlZm9yZVwiLCBlLCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbmZ1bmN0aW9uIGVuZEF0KC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlFbmRBdENvbnN0cmFpbnQuX2NyZWF0ZShcImVuZEF0XCIsIGUsIFxuICAgIC8qaW5jbHVzaXZlPSovICEwKTtcbn1cblxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBib3VuZCBmcm9tIGEgZG9jdW1lbnQgb3IgZmllbGRzICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzKGUsIHQsIG4sIHIpIHtcbiAgICBpZiAoblswXSA9IGdldE1vZHVsYXJJbnN0YW5jZShuWzBdKSwgblswXSBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QkMSkgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY3VtZW50KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgaWYgKCFyKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5OT1RfRk9VTkQsIGBDYW4ndCB1c2UgYSBEb2N1bWVudFNuYXBzaG90IHRoYXQgZG9lc24ndCBleGlzdCBmb3IgJHtufSgpLmApO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIC8vIEJlY2F1c2UgcGVvcGxlIGV4cGVjdCB0byBjb250aW51ZS9lbmQgYSBxdWVyeSBhdCB0aGUgZXhhY3QgZG9jdW1lbnRcbiAgICAgICAgLy8gcHJvdmlkZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBpbXBsaWNpdCBzb3J0IG9yZGVyIHJhdGhlciB0aGFuIHRoZSBleHBsaWNpdFxuICAgICAgICAvLyBzb3J0IG9yZGVyLCBiZWNhdXNlIGl0J3MgZ3VhcmFudGVlZCB0byBjb250YWluIHRoZSBkb2N1bWVudCBrZXkuIFRoYXQgd2F5XG4gICAgICAgIC8vIHRoZSBwb3NpdGlvbiBiZWNvbWVzIHVuYW1iaWd1b3VzIGFuZCB0aGUgcXVlcnkgY29udGludWVzL2VuZHMgZXhhY3RseSBhdFxuICAgICAgICAvLyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuIFdpdGhvdXQgdGhlIGtleSAoYnkgdXNpbmcgdGhlIGV4cGxpY2l0IHNvcnRcbiAgICAgICAgLy8gb3JkZXJzKSwgbXVsdGlwbGUgZG9jdW1lbnRzIGNvdWxkIG1hdGNoIHRoZSBwb3NpdGlvbiwgeWllbGRpbmcgZHVwbGljYXRlXG4gICAgICAgIC8vIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV9xdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KGUpKSBpZiAobi5maWVsZC5pc0tleUZpZWxkKCkpIHMucHVzaChfX1BSSVZBVEVfcmVmVmFsdWUodCwgci5rZXkpKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gci5kYXRhLmZpZWxkKG4uZmllbGQpO1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcChlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCBcIicgKyBuLmZpZWxkICsgJ1wiIGlzIGFuIHVuY29tbWl0dGVkIHNlcnZlciB0aW1lc3RhbXAuIChTaW5jZSB0aGUgdmFsdWUgb2YgdGhpcyBmaWVsZCBpcyB1bmtub3duLCB5b3UgY2Fubm90IHN0YXJ0L2VuZCBhIHF1ZXJ5IHdpdGggaXQuKScpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbi5maWVsZC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkICcke2V9JyAodXNlZCBhcyB0aGUgb3JkZXJCeSkgZG9lcyBub3QgZXhpc3QuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChzLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDb252ZXJ0cyBhIGxpc3Qgb2YgZmllbGQgdmFsdWVzIHRvIGEgYEJvdW5kYCBmb3IgdGhlIGdpdmVuIHF1ZXJ5LlxuICovIChlLl9xdWVyeSwgZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHQsIG5bMF0uX2RvY3VtZW50LCByKTtcbiAgICB7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZS5maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Qm91bmRGcm9tRmllbGRzKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgICAgIC8vIFVzZSBleHBsaWNpdCBvcmRlciBieSdzIGJlY2F1c2UgaXQgaGFzIHRvIG1hdGNoIHRoZSBxdWVyeSB0aGUgdXNlciBtYWRlXG4gICAgICAgICAgICBjb25zdCBvID0gZS5leHBsaWNpdE9yZGVyQnk7XG4gICAgICAgICAgICBpZiAoaS5sZW5ndGggPiBvLmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYFRvbyBtYW55IGFyZ3VtZW50cyBwcm92aWRlZCB0byAke3J9KCkuIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBudW1iZXIgb2Ygb3JkZXJCeSgpIGNsYXVzZXNgKTtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgaS5sZW5ndGg7IHMrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBpW3NdO1xuICAgICAgICAgICAgICAgIGlmIChvW3NdLmZpZWxkLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgYSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiAke3J9KCksIGJ1dCBnb3QgYSAke3R5cGVvZiBhfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KGUpICYmIC0xICE9PSBhLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3J9KCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7YX0nIGNvbnRhaW5zIGEgc2xhc2guYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLnBhdGguY2hpbGQoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoYSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIURvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkobikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7cn0oKSBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtufScgaXMgbm90IGJlY2F1c2UgaXQgY29udGFpbnMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cy5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBEb2N1bWVudEtleShuKTtcbiAgICAgICAgICAgICAgICAgICAgXy5wdXNoKF9fUFJJVkFURV9yZWZWYWx1ZSh0LCBpKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9wYXJzZVF1ZXJ5VmFsdWUobiwgciwgYSk7XG4gICAgICAgICAgICAgICAgICAgIF8ucHVzaChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kKF8sIHMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUGFyc2VzIHRoZSBnaXZlbiBgZG9jdW1lbnRJZFZhbHVlYCBpbnRvIGEgYFJlZmVyZW5jZVZhbHVlYCwgdGhyb3dpbmdcbiAqIGFwcHJvcHJpYXRlIGVycm9ycyBpZiB0aGUgdmFsdWUgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBhIGBEb2N1bWVudFJlZmVyZW5jZWBcbiAqIG9yIGBzdHJpbmdgLCBvciBpZiB0aGUgc3RyaW5nIGlzIG1hbGZvcm1lZC5cbiAqLyAoZS5fcXVlcnksIGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBpLCB0LCBuLCByKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZURvY3VtZW50SWRWYWx1ZShlLCB0LCBuKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIChuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pKSkge1xuICAgICAgICBpZiAoXCJcIiA9PT0gbikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgZG9jdW1lbnQgSUQsIGJ1dCBpdCB3YXMgYW4gZW1wdHkgc3RyaW5nLlwiKTtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSh0KSAmJiAtMSAhPT0gbi5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGJ5IGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7bn0nIGNvbnRhaW5zIGEgJy8nIGNoYXJhY3Rlci5gKTtcbiAgICAgICAgY29uc3QgciA9IHQucGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhuKSk7XG4gICAgICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShyKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHByb3ZpZGVkIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke3J9JyBpcyBub3QgYmVjYXVzZSBpdCBoYXMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cyAoJHtyLmxlbmd0aH0pLmApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlZlZhbHVlKGUsIG5ldyBEb2N1bWVudEtleShyKSk7XG4gICAgfVxuICAgIGlmIChuIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpIHJldHVybiBfX1BSSVZBVEVfcmVmVmFsdWUoZSwgbi5fa2V5KTtcbiAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIHN0cmluZyBvciBhIERvY3VtZW50UmVmZXJlbmNlLCBidXQgaXQgd2FzOiAke19fUFJJVkFURV92YWx1ZURlc2NyaXB0aW9uKG4pfS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgcGFzc2VkIGludG8gYSBkaXNqdW5jdGl2ZSBmaWx0ZXIgc2F0aXNmaWVzIGFsbFxuICogYXJyYXkgcmVxdWlyZW1lbnRzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHMoZSwgdCkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShlKSB8fCAwID09PSBlLmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIEEgbm9uLWVtcHR5IGFycmF5IGlzIHJlcXVpcmVkIGZvciAnJHt0LnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xufVxuXG4vKipcbiAqIEdpdmVuIGFuIG9wZXJhdG9yLCByZXR1cm5zIHRoZSBzZXQgb2Ygb3BlcmF0b3JzIHRoYXQgY2Fubm90IGJlIHVzZWQgd2l0aCBpdC5cbiAqXG4gKiBUaGlzIGlzIG5vdCBhIGNvbXByZWhlbnNpdmUgY2hlY2ssIGFuZCB0aGlzIGZ1bmN0aW9uIHNob3VsZCBiZSByZW1vdmVkIGluIHRoZVxuICogbG9uZyB0ZXJtLiBWYWxpZGF0aW9ucyBzaG91bGQgb2NjdXIgaW4gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLlxuICpcbiAqIE9wZXJhdG9ycyBpbiBhIHF1ZXJ5IG11c3QgYWRoZXJlIHRvIHRoZSBmb2xsb3dpbmcgc2V0IG9mIHJ1bGVzOlxuICogMS4gT25seSBvbmUgaW5lcXVhbGl0eSBwZXIgcXVlcnkuXG4gKiAyLiBgTk9UX0lOYCBjYW5ub3QgYmUgdXNlZCB3aXRoIGFycmF5LCBkaXNqdW5jdGl2ZSwgb3IgYE5PVF9FUVVBTGAgb3BlcmF0b3JzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZU5ld0ZpZWxkRmlsdGVyKGUsIHQpIHtcbiAgICBpZiAodC5pc0luZXF1YWxpdHkoKSkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2dldEluZXF1YWxpdHlGaWx0ZXJGaWVsZChlKSwgciA9IHQuZmllbGQ7XG4gICAgICAgIGlmIChudWxsICE9PSBuICYmICFuLmlzRXF1YWwocikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBBbGwgd2hlcmUgZmlsdGVycyB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgbXVzdCBiZSBvbiB0aGUgc2FtZSBmaWVsZC4gQnV0IHlvdSBoYXZlIGluZXF1YWxpdHkgZmlsdGVycyBvbiAnJHtuLnRvU3RyaW5nKCl9JyBhbmQgJyR7ci50b1N0cmluZygpfSdgKTtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9nZXRGaXJzdE9yZGVyQnlGaWVsZChlKTtcbiAgICAgICAgbnVsbCAhPT0gaSAmJiBfX1BSSVZBVEVfdmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoKGUsIHIsIGkpO1xuICAgIH1cbiAgICBjb25zdCBuID0gZnVuY3Rpb24gX19QUklWQVRFX2ZpbmRPcEluc2lkZUZpbHRlcnMoZSwgdCkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZSkgZm9yIChjb25zdCBlIG9mIG4uZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBpZiAodC5pbmRleE9mKGUub3ApID49IDApIHJldHVybiBlLm9wO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9KGUuZmlsdGVycywgZnVuY3Rpb24gX19QUklWQVRFX2NvbmZsaWN0aW5nT3BzKGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXTtcblxuICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gXTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICB9KHQub3ApKTtcbiAgICBpZiAobnVsbCAhPT0gbikgXG4gICAgLy8gU3BlY2lhbCBjYXNlIHdoZW4gaXQncyBhIGR1cGxpY2F0ZSBvcCB0byBnaXZlIGEgc2xpZ2h0bHkgY2xlYXJlciBlcnJvciBtZXNzYWdlLlxuICAgIHRocm93IG4gPT09IHQub3AgPyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSAnJHt0Lm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXIuYCkgOiBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgJyR7dC5vcC50b1N0cmluZygpfScgZmlsdGVycyB3aXRoICcke24udG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZU9yZGVyQnlBbmRJbmVxdWFsaXR5TWF0Y2goZSwgdCwgbikge1xuICAgIGlmICghbi5pc0VxdWFsKHQpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGhhdmUgYSB3aGVyZSBmaWx0ZXIgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG9uIGZpZWxkICcke3QudG9TdHJpbmcoKX0nIGFuZCBzbyB5b3UgbXVzdCBhbHNvIHVzZSAnJHt0LnRvU3RyaW5nKCl9JyBhcyB5b3VyIGZpcnN0IGFyZ3VtZW50IHRvIG9yZGVyQnkoKSwgYnV0IHlvdXIgZmlyc3Qgb3JkZXJCeSgpIGlzIG9uIGZpZWxkICcke24udG9TdHJpbmcoKX0nIGluc3RlYWQuYCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVF1ZXJ5RmlsdGVyQ29uc3RyYWludChlLCB0KSB7XG4gICAgaWYgKCEodCBpbnN0YW5jZW9mIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50IHx8IHQgaW5zdGFuY2VvZiBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIHJlcXVpcmVzIEFwcGxpYWJsZUNvbnN0cmFpbnRzIGNyZWF0ZWQgd2l0aCBhIGNhbGwgdG8gJ3doZXJlKC4uLiknLCAnb3IoLi4uKScsIG9yICdhbmQoLi4uKScuYCk7XG59XG5cbmNsYXNzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIge1xuICAgIGNvbnZlcnRWYWx1ZShlLCB0ID0gXCJub25lXCIpIHtcbiAgICAgICAgc3dpdGNoIChfX1BSSVZBVEVfdHlwZU9yZGVyKGUpKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZS5ib29sZWFuVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKGUudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0U2VydmVyVGltZXN0YW1wKGUsIHQpO1xuXG4gICAgICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZS5zdHJpbmdWYWx1ZTtcblxuICAgICAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRCeXRlcyhfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlLmJ5dGVzVmFsdWUpKTtcblxuICAgICAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFJlZmVyZW5jZShlLnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0R2VvUG9pbnQoZS5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0QXJyYXkoZS5hcnJheVZhbHVlLCB0KTtcblxuICAgICAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRPYmplY3QoZS5tYXBWYWx1ZSwgdCk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRPYmplY3QoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0TWFwKGUuZmllbGRzLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIGNvbnZlcnRPYmplY3RNYXAoZSwgdCA9IFwibm9uZVwiKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7fTtcbiAgICAgICAgcmV0dXJuIGZvckVhY2goZSwgKChlLCByKSA9PiB7XG4gICAgICAgICAgICBuW2VdID0gdGhpcy5jb252ZXJ0VmFsdWUociwgdCk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgY29udmVydEdlb1BvaW50KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHZW9Qb2ludChfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubGF0aXR1ZGUpLCBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubG9uZ2l0dWRlKSk7XG4gICAgfVxuICAgIGNvbnZlcnRBcnJheShlLCB0KSB7XG4gICAgICAgIHJldHVybiAoZS52YWx1ZXMgfHwgW10pLm1hcCgoZSA9PiB0aGlzLmNvbnZlcnRWYWx1ZShlLCB0KSkpO1xuICAgIH1cbiAgICBjb252ZXJ0U2VydmVyVGltZXN0YW1wKGUsIHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcInByZXZpb3VzXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUoZSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHRoaXMuY29udmVydFZhbHVlKG4sIHQpO1xuXG4gICAgICAgICAgY2FzZSBcImVzdGltYXRlXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZShlKSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydFRpbWVzdGFtcChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpO1xuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcCh0LnNlY29uZHMsIHQubmFub3MpO1xuICAgIH1cbiAgICBjb252ZXJ0RG9jdW1lbnRLZXkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZSk7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KF9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lKG4pKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBEYXRhYmFzZUlkKG4uZ2V0KDEpLCBuLmdldCgzKSksIGkgPSBuZXcgRG9jdW1lbnRLZXkobi5wb3BGaXJzdCg1KSk7XG4gICAgICAgIHJldHVybiByLmlzRXF1YWwodCkgfHwgXG4gICAgICAgIC8vIFRPRE8oYi82NDEzMDIwMik6IFNvbWVob3cgc3VwcG9ydCBmb3JlaWduIHJlZmVyZW5jZXMuXG4gICAgICAgIF9fUFJJVkFURV9sb2dFcnJvcihgRG9jdW1lbnQgJHtpfSBjb250YWlucyBhIGRvY3VtZW50IHJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKCR7ci5wcm9qZWN0SWR9LyR7ci5kYXRhYmFzZX0pIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBkYXRhYmFzZSAoJHt0LnByb2plY3RJZH0vJHt0LmRhdGFiYXNlfSkgaW5zdGVhZC5gKSwgXG4gICAgICAgIGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIGBEb2N1bWVudERhdGFgIGJ5IGFwcGx5aW5nIHRoZVxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBgRG9jdW1lbnREYXRhYFxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxuICogdGhlaXIgYHNldCgpYCBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSBgdG9GaXJlc3RvcmUoKWBcbiAqIGNhbGwuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihlLCB0LCBuKSB7XG4gICAgbGV0IHI7XG4gICAgLy8gQ2FzdCB0byBgYW55YCBpbiBvcmRlciB0byBzYXRpc2Z5IHRoZSB1bmlvbiB0eXBlIGNvbnN0cmFpbnQgb25cbiAgICAvLyB0b0ZpcmVzdG9yZSgpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcmV0dXJuIHIgPSBlID8gbiAmJiAobi5tZXJnZSB8fCBuLm1lcmdlRmllbGRzKSA/IGUudG9GaXJlc3RvcmUodCwgbikgOiBlLnRvRmlyZXN0b3JlKHQpIDogdCwgXG4gICAgcjtcbn1cblxuY2xhc3MgX19QUklWQVRFX0xpdGVVc2VyRGF0YVdyaXRlciBleHRlbmRzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKGUpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KGUsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBzdW0gb2ZcbiAqIGEgc3BlY2lmaWVkIGZpZWxkIG92ZXIgYSByYW5nZSBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIHN1bSBhY3Jvc3MgdGhlIHJlc3VsdCBzZXQuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gc3VtKGUpIHtcbiAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUZpZWxkKFwic3VtXCIsIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMShcInN1bVwiLCBlKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGF2ZXJhZ2Ugb2ZcbiAqIGEgc3BlY2lmaWVkIGZpZWxkIG92ZXIgYSByYW5nZSBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIGF2ZXJhZ2UgYWNyb3NzIHRoZSByZXN1bHQgc2V0LlxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIGF2ZXJhZ2UoZSkge1xuICAgIHJldHVybiBuZXcgQWdncmVnYXRlRmllbGQoXCJhdmdcIiwgX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKFwiYXZlcmFnZVwiLCBlKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGNvdW50IG9mXG4gKiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBjb3VudCgpIHtcbiAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUZpZWxkKFwiY291bnRcIik7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvICdBZ2dyZWdhdGVGaWVsZGAgaW5zdGFuY2VzIGZvciBlcXVhbGl0eS5cbiAqXG4gKiBAcGFyYW0gbGVmdCBDb21wYXJlIHRoaXMgQWdncmVnYXRlRmllbGQgdG8gdGhlIGByaWdodGAuXG4gKiBAcGFyYW0gcmlnaHQgQ29tcGFyZSB0aGlzIEFnZ3JlZ2F0ZUZpZWxkIHRvIHRoZSBgbGVmdGAuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gYWdncmVnYXRlRmllbGRFcXVhbChlLCB0KSB7XG4gICAgdmFyIG4sIHI7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBBZ2dyZWdhdGVGaWVsZCAmJiB0IGluc3RhbmNlb2YgQWdncmVnYXRlRmllbGQgJiYgZS5fYWdncmVnYXRlVHlwZSA9PT0gdC5fYWdncmVnYXRlVHlwZSAmJiAobnVsbCA9PT0gKG4gPSBlLl9pbnRlcm5hbEZpZWxkUGF0aCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5jYW5vbmljYWxTdHJpbmcoKSkgPT09IChudWxsID09PSAociA9IHQuX2ludGVybmFsRmllbGRQYXRoKSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLmNhbm9uaWNhbFN0cmluZygpKTtcbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0d28gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIGluc3RhbmNlcyBmb3IgZXF1YWxpdHkuXG4gKlxuICogVHdvIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgXCJlcXVhbFwiIGlmIHRoZXkgaGF2ZVxuICogdW5kZXJseWluZyBxdWVyaWVzIHRoYXQgY29tcGFyZSBlcXVhbCwgYW5kIHRoZSBzYW1lIGRhdGEuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBUaGUgZmlyc3QgYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBUaGUgc2Vjb25kIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCB0byBjb21wYXJlLlxuICpcbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgXCJlcXVhbFwiLCBhcyBkZWZpbmVkIGFib3ZlLCBvciBgZmFsc2VgXG4gKiBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gYWdncmVnYXRlUXVlcnlTbmFwc2hvdEVxdWFsKGUsIHQpIHtcbiAgICByZXR1cm4gcXVlcnlFcXVhbChlLnF1ZXJ5LCB0LnF1ZXJ5KSAmJiBkZWVwRXF1YWwoZS5kYXRhKCksIHQuZGF0YSgpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTWV0YWRhdGEgYWJvdXQgYSBzbmFwc2hvdCwgZGVzY3JpYmluZyB0aGUgc3RhdGUgb2YgdGhlIHNuYXBzaG90LlxuICovIGNsYXNzIFNuYXBzaG90TWV0YWRhdGEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPSBlLCB0aGlzLmZyb21DYWNoZSA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBTbmFwc2hvdE1ldGFkYXRhYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9PT0gZS5oYXNQZW5kaW5nV3JpdGVzICYmIHRoaXMuZnJvbUNhY2hlID09PSBlLmZyb21DYWNoZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBEb2N1bWVudFNuYXBzaG90IGV4dGVuZHMgRG9jdW1lbnRTbmFwc2hvdCQxIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgIHN1cGVyKGUsIHQsIG4sIHIsIHMpLCB0aGlzLl9maXJlc3RvcmUgPSBlLCB0aGlzLl9maXJlc3RvcmVJbXBsID0gZSwgdGhpcy5tZXRhZGF0YSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGRhdGEgZXhpc3RzLiBUcnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4aXN0cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YShlID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIHRoaXMubWV0YWRhdGEsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKHQsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlLCBlLnNlcnZlclRpbWVzdGFtcHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZmllbGQgc3BlY2lmaWVkIGJ5IGBmaWVsZFBhdGhgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IG9yIGZpZWxkIGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBhIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdGhhdCBoYXMgbm90IHlldCBiZWVuIHNldCB0b1xuICAgICAqIGl0cyBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZSB0aGlzIGJ5XG4gICAgICogcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IHRoZSBmaWVsZCBpcyByZXRyaWV2ZWRcbiAgICAgKiBmcm9tIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzXG4gICAgICogdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KGUsIHQgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCBlKSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbikgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShuLCB0LnNlcnZlclRpbWVzdGFtcHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgUXVlcnlEb2N1bWVudFNuYXBzaG90IGV4dGVuZHMgRG9jdW1lbnRTbmFwc2hvdCB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKGUgPSB7fSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlTbmFwc2hvdGAgY29udGFpbnMgemVybyBvciBtb3JlIGBEb2N1bWVudFNuYXBzaG90YCBvYmplY3RzXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWNjZXNzZWQgYXMgYW5cbiAqIGFycmF5IHZpYSB0aGUgYGRvY3NgIHByb3BlcnR5IG9yIGVudW1lcmF0ZWQgdXNpbmcgdGhlIGBmb3JFYWNoYCBtZXRob2QuIFRoZVxuICogbnVtYmVyIG9mIGRvY3VtZW50cyBjYW4gYmUgZGV0ZXJtaW5lZCB2aWEgdGhlIGBlbXB0eWAgYW5kIGBzaXplYFxuICogcHJvcGVydGllcy5cbiAqLyBjbGFzcyBRdWVyeVNuYXBzaG90IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSB0LCB0aGlzLl9zbmFwc2hvdCA9IHIsIHRoaXMubWV0YWRhdGEgPSBuZXcgU25hcHNob3RNZXRhZGF0YShyLmhhc1BlbmRpbmdXcml0ZXMsIHIuZnJvbUNhY2hlKSwgXG4gICAgICAgIHRoaXMucXVlcnkgPSBuO1xuICAgIH1cbiAgICAvKiogQW4gYXJyYXkgb2YgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGRvY3MoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgodCA9PiBlLnB1c2godCkpKSwgZTtcbiAgICB9XG4gICAgLyoqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc25hcHNob3QuZG9jcy5zaXplO1xuICAgIH1cbiAgICAvKiogVHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW51bWVyYXRlcyBhbGwgb2YgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2l0aCBhIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGZvclxuICAgICAqIGVhY2ggZG9jdW1lbnQgaW4gdGhlIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSB0aGlzQXJnIC0gVGhlIGB0aGlzYCBiaW5kaW5nIGZvciB0aGUgY2FsbGJhY2suXG4gICAgICovICAgIGZvckVhY2goZSwgdCkge1xuICAgICAgICB0aGlzLl9zbmFwc2hvdC5kb2NzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5jYWxsKHQsIG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgbi5rZXksIG4sIG5ldyBTbmFwc2hvdE1ldGFkYXRhKHRoaXMuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmtleSksIHRoaXMuX3NuYXBzaG90LmZyb21DYWNoZSksIHRoaXMucXVlcnkuY29udmVydGVyKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZG9jdW1lbnRzIGNoYW5nZXMgc2luY2UgdGhlIGxhc3Qgc25hcHNob3QuIElmIHRoaXNcbiAgICAgKiBpcyB0aGUgZmlyc3Qgc25hcHNob3QsIGFsbCBkb2N1bWVudHMgd2lsbCBiZSBpbiB0aGUgbGlzdCBhcyAnYWRkZWQnXG4gICAgICogY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYFNuYXBzaG90TGlzdGVuT3B0aW9uc2AgdGhhdCBjb250cm9sIHdoZXRoZXIgbWV0YWRhdGEtb25seVxuICAgICAqIGNoYW5nZXMgKGkuZS4gb25seSBgRG9jdW1lbnRTbmFwc2hvdC5tZXRhZGF0YWAgY2hhbmdlZCkgc2hvdWxkIHRyaWdnZXJcbiAgICAgKiBzbmFwc2hvdCBldmVudHMuXG4gICAgICovICAgIGRvY0NoYW5nZXMoZSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHQgPSAhIWUuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgaWYgKHQgJiYgdGhpcy5fc25hcHNob3QuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiVG8gaW5jbHVkZSBtZXRhZGF0YSBjaGFuZ2VzIHdpdGggeW91ciBkb2N1bWVudCBjaGFuZ2VzLCB5b3UgbXVzdCBhbHNvIHBhc3MgeyBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOnRydWUgfSB0byBvblNuYXBzaG90KCkuXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkQ2hhbmdlcyAmJiB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9PT0gdCB8fCAodGhpcy5fY2FjaGVkQ2hhbmdlcyA9IFxuICAgICAgICAvKiogQ2FsY3VsYXRlcyB0aGUgYXJyYXkgb2YgYERvY3VtZW50Q2hhbmdlYHMgZm9yIGEgZ2l2ZW4gYFZpZXdTbmFwc2hvdGAuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9jaGFuZ2VzRnJvbVNuYXBzaG90KGUsIHQpIHtcbiAgICAgICAgICAgIGlmIChlLl9zbmFwc2hvdC5vbGREb2NzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5fc25hcHNob3QuZG9jQ2hhbmdlcy5tYXAoKG4gPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdChlLl9maXJlc3RvcmUsIGUuX3VzZXJEYXRhV3JpdGVyLCBuLmRvYy5rZXksIG4uZG9jLCBuZXcgU25hcHNob3RNZXRhZGF0YShlLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5kb2Mua2V5KSwgZS5fc25hcHNob3QuZnJvbUNhY2hlKSwgZS5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kb2MsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiB0KytcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQSBgRG9jdW1lbnRTZXRgIHRoYXQgaXMgdXBkYXRlZCBpbmNyZW1lbnRhbGx5IGFzIGNoYW5nZXMgYXJlIGFwcGxpZWQgdG8gdXNlXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9va3VwIHRoZSBpbmRleCBvZiBhIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGxldCBuID0gZS5fc25hcHNob3Qub2xkRG9jcztcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5fc25hcHNob3QuZG9jQ2hhbmdlcy5maWx0ZXIoKGUgPT4gdCB8fCAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gIT09IGUudHlwZSkpLm1hcCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KGUuX2ZpcmVzdG9yZSwgZS5fdXNlckRhdGFXcml0ZXIsIHQuZG9jLmtleSwgdC5kb2MsIG5ldyBTbmFwc2hvdE1ldGFkYXRhKGUuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyh0LmRvYy5rZXkpLCBlLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLCBlLnF1ZXJ5LmNvbnZlcnRlcik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gLTEsIHMgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAhPT0gdC50eXBlICYmIChpID0gbi5pbmRleE9mKHQuZG9jLmtleSksIG4gPSBuLmRlbGV0ZSh0LmRvYy5rZXkpKSwgXG4gICAgICAgICAgICAgICAgICAgIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICE9PSB0LnR5cGUgJiYgKG4gPSBuLmFkZCh0LmRvYyksIHMgPSBuLmluZGV4T2YodC5kb2Mua2V5KSksIFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBfX1BSSVZBVEVfcmVzdWx0Q2hhbmdlVHlwZSh0LnR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiByLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IGksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogc1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0aGlzLCB0KSwgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPSB0KSwgdGhpcy5fY2FjaGVkQ2hhbmdlcztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZXN1bHRDaGFuZ2VUeXBlKGUpIHtcbiAgICBzd2l0Y2ggKGUpIHtcbiAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgcmV0dXJuIFwiYWRkZWRcIjtcblxuICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgY2FzZSAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gOlxuICAgICAgICByZXR1cm4gXCJtb2RpZmllZFwiO1xuXG4gICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgcmV0dXJuIFwicmVtb3ZlZFwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVleHApOiBBZGQgdGVzdHMgZm9yIHNuYXBzaG90RXF1YWwgd2l0aCBkaWZmZXJlbnQgc25hcHNob3Rcbi8vIG1ldGFkYXRhXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKi8gZnVuY3Rpb24gc25hcHNob3RFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBEb2N1bWVudFNuYXBzaG90ICYmIHQgaW5zdGFuY2VvZiBEb2N1bWVudFNuYXBzaG90ID8gZS5fZmlyZXN0b3JlID09PSB0Ll9maXJlc3RvcmUgJiYgZS5fa2V5LmlzRXF1YWwodC5fa2V5KSAmJiAobnVsbCA9PT0gZS5fZG9jdW1lbnQgPyBudWxsID09PSB0Ll9kb2N1bWVudCA6IGUuX2RvY3VtZW50LmlzRXF1YWwodC5fZG9jdW1lbnQpKSAmJiBlLl9jb252ZXJ0ZXIgPT09IHQuX2NvbnZlcnRlciA6IGUgaW5zdGFuY2VvZiBRdWVyeVNuYXBzaG90ICYmIHQgaW5zdGFuY2VvZiBRdWVyeVNuYXBzaG90ICYmIChlLl9maXJlc3RvcmUgPT09IHQuX2ZpcmVzdG9yZSAmJiBxdWVyeUVxdWFsKGUucXVlcnksIHQucXVlcnkpICYmIGUubWV0YWRhdGEuaXNFcXVhbCh0Lm1ldGFkYXRhKSAmJiBlLl9zbmFwc2hvdC5pc0VxdWFsKHQuX3NuYXBzaG90KSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogTm90ZTogYGdldERvYygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5IHdhaXRpbmdcbiAqIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZiB5b3UgYXJlXG4gKiBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsIGludm9rZVxuICoge0BsaW5rIGdldERvY0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0byBmZXRjaC5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGdldERvYyhlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgZS5fa2V5KS50aGVuKChuID0+IF9fUFJJVkFURV9jb252ZXJ0VG9Eb2NTbmFwc2hvdCh0LCBlLCBuKSkpO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIgZXh0ZW5kcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlcyhlKTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleShlLCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jRnJvbUNhY2hlKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRG9jdW1lbnRSZWZlcmVuY2UpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRGcm9tTG9jYWxDYWNoZShuLCBlLl9rZXkpLnRoZW4oKG4gPT4gbmV3IERvY3VtZW50U25hcHNob3QodCwgciwgZS5fa2V5LCBuLCBuZXcgU25hcHNob3RNZXRhZGF0YShudWxsICE9PSBuICYmIG4uaGFzTG9jYWxNdXRhdGlvbnMsIFxuICAgIC8qIGZyb21DYWNoZT0gKi8gITApLCBlLmNvbnZlcnRlcikpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gdGhlIHNlcnZlci5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGdldERvY0Zyb21TZXJ2ZXIoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRWaWFTbmFwc2hvdExpc3RlbmVyKGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIGUuX2tleSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IF9fUFJJVkFURV9jb252ZXJ0VG9Eb2NTbmFwc2hvdCh0LCBlLCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YC5cbiAqXG4gKiBOb3RlOiBgZ2V0RG9jcygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5XG4gKiB3YWl0aW5nIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZlxuICogeW91IGFyZSBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsXG4gKiBpbnZva2Uge0BsaW5rIGdldERvY3NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NzRnJvbVNlcnZlcn0uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGdldERvY3MoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBRdWVyeSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBuID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodCk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0KGUuX3F1ZXJ5KSwgX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIobiwgZS5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IFF1ZXJ5U25hcHNob3QodCwgciwgZSwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZW1wdHkgcmVzdWx0IHNldCBpZiBubyBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHF1ZXJ5IGFyZSBjdXJyZW50bHlcbiAqIGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jc0Zyb21DYWNoZShlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIFF1ZXJ5KTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c0Zyb21Mb2NhbENhY2hlKG4sIGUuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBRdWVyeVNuYXBzaG90KHQsIHIsIGUsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgIGZyb20gdGhlXG4gKiBzZXJ2ZXIuIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jc0Zyb21TZXJ2ZXIoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBRdWVyeSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBuID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodCk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNWaWFTbmFwc2hvdExpc3RlbmVyKG4sIGUuX3F1ZXJ5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gbmV3IFF1ZXJ5U25hcHNob3QodCwgciwgZSwgbikpKTtcbn1cblxuZnVuY3Rpb24gc2V0RG9jKGUsIHQsIG4pIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRG9jdW1lbnRSZWZlcmVuY2UpO1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgaSA9IF9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoZS5jb252ZXJ0ZXIsIHQsIG4pO1xuICAgIHJldHVybiBleGVjdXRlV3JpdGUociwgWyBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihyKSwgXCJzZXREb2NcIiwgZS5fa2V5LCBpLCBudWxsICE9PSBlLmNvbnZlcnRlciwgbikudG9NdXRhdGlvbihlLl9rZXksIFByZWNvbmRpdGlvbi5ub25lKCkpIF0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVEb2MoZSwgdCwgbiwgLi4ucikge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgaSA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBzID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGkpO1xuICAgIGxldCBvO1xuICAgIG8gPSBcInN0cmluZ1wiID09IHR5cGVvZiAoXG4gICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgfHwgdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3MocywgXCJ1cGRhdGVEb2NcIiwgZS5fa2V5LCB0LCBuLCByKSA6IF9fUFJJVkFURV9wYXJzZVVwZGF0ZURhdGEocywgXCJ1cGRhdGVEb2NcIiwgZS5fa2V5LCB0KTtcbiAgICByZXR1cm4gZXhlY3V0ZVdyaXRlKGksIFsgby50b011dGF0aW9uKGUuX2tleSwgUHJlY29uZGl0aW9uLmV4aXN0cyghMCkpIF0pO1xufVxuXG4vKipcbiAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBzcGVjaWZpZWQgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGRlbGV0ZS5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCBvbmNlIHRoZSBkb2N1bWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIGRlbGV0ZWQgZnJvbSB0aGUgYmFja2VuZCAobm90ZSB0aGF0IGl0IHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIGRlbGV0ZURvYyhlKSB7XG4gICAgcmV0dXJuIGV4ZWN1dGVXcml0ZShfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgWyBuZXcgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uKGUuX2tleSwgUHJlY29uZGl0aW9uLm5vbmUoKSkgXSk7XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGRvY3VtZW50IHRvIHNwZWNpZmllZCBgQ29sbGVjdGlvblJlZmVyZW5jZWAgd2l0aCB0aGUgZ2l2ZW4gZGF0YSxcbiAqIGFzc2lnbmluZyBpdCBhIGRvY3VtZW50IElEIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjb2xsZWN0aW9uIHRvIGFkZCB0aGlzIGRvY3VtZW50IHRvLlxuICogQHBhcmFtIGRhdGEgLSBBbiBPYmplY3QgY29udGFpbmluZyB0aGUgZGF0YSBmb3IgdGhlIG5ldyBkb2N1bWVudC5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRSZWZlcmVuY2VgIHBvaW50aW5nIHRvIHRoZVxuICogbmV3bHkgY3JlYXRlZCBkb2N1bWVudCBhZnRlciBpdCBoYXMgYmVlbiB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIChOb3RlIHRoYXQgaXRcbiAqIHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIGFkZERvYyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCByID0gZG9jKGUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihlLmNvbnZlcnRlciwgdCk7XG4gICAgcmV0dXJuIGV4ZWN1dGVXcml0ZShuLCBbIF9fUFJJVkFURV9wYXJzZVNldERhdGEoX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUuZmlyZXN0b3JlKSwgXCJhZGREb2NcIiwgci5fa2V5LCBpLCBudWxsICE9PSBlLmNvbnZlcnRlciwge30pLnRvTXV0YXRpb24oci5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKCExKSkgXSkudGhlbigoKCkgPT4gcikpO1xufVxuXG5mdW5jdGlvbiBvblNuYXBzaG90KGUsIC4uLnQpIHtcbiAgICB2YXIgbiwgciwgaTtcbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpO1xuICAgIGxldCBzID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMVxuICAgIH0sIG8gPSAwO1xuICAgIFwib2JqZWN0XCIgIT0gdHlwZW9mIHRbb10gfHwgX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKHRbb10pIHx8IChzID0gdFtvXSwgbysrKTtcbiAgICBjb25zdCBfID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiBzLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXNcbiAgICB9O1xuICAgIGlmIChfX1BSSVZBVEVfaXNQYXJ0aWFsT2JzZXJ2ZXIodFtvXSkpIHtcbiAgICAgICAgY29uc3QgZSA9IHRbb107XG4gICAgICAgIHRbb10gPSBudWxsID09PSAobiA9IGUubmV4dCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5iaW5kKGUpLCB0W28gKyAxXSA9IG51bGwgPT09IChyID0gZS5lcnJvcikgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5iaW5kKGUpLCBcbiAgICAgICAgdFtvICsgMl0gPSBudWxsID09PSAoaSA9IGUuY29tcGxldGUpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuYmluZChlKTtcbiAgICB9XG4gICAgbGV0IGEsIHUsIGM7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSkgdSA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBcbiAgICBjID0gX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChlLl9rZXkucGF0aCksIGEgPSB7XG4gICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgdFtvXSAmJiB0W29dKF9fUFJJVkFURV9jb252ZXJ0VG9Eb2NTbmFwc2hvdCh1LCBlLCBuKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiB0W28gKyAxXSxcbiAgICAgICAgY29tcGxldGU6IHRbbyArIDJdXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY2FzdChlLCBRdWVyeSk7XG4gICAgICAgIHUgPSBfX1BSSVZBVEVfY2FzdChuLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgYyA9IG4uX3F1ZXJ5O1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih1KTtcbiAgICAgICAgYSA9IHtcbiAgICAgICAgICAgIG5leHQ6IGUgPT4ge1xuICAgICAgICAgICAgICAgIHRbb10gJiYgdFtvXShuZXcgUXVlcnlTbmFwc2hvdCh1LCByLCBuLCBlKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IHRbbyArIDFdLFxuICAgICAgICAgICAgY29tcGxldGU6IHRbbyArIDJdXG4gICAgICAgIH0sIF9fUFJJVkFURV92YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0KGUuX3F1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRMaXN0ZW4oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9Bc3luY09ic2VydmVyKHIpLCBzID0gbmV3IF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyKHQsIGksIG4pO1xuICAgICAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oYXdhaXQgX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSwgcykpKSwgXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIGkuTGEoKSwgZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IF9fUFJJVkFURV9ldmVudE1hbmFnZXJVbmxpc3Rlbihhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBzKSkpO1xuICAgICAgICB9O1xuICAgIH0oZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh1KSwgYywgXywgYSk7XG59XG5cbmZ1bmN0aW9uIG9uU25hcHNob3RzSW5TeW5jKGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEFkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyKGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpLCBfX1BSSVZBVEVfaXNQYXJ0aWFsT2JzZXJ2ZXIodCkgPyB0IDoge1xuICAgICAgICBuZXh0OiB0XG4gICAgfSk7XG59XG5cbi8qKlxuICogTG9jYWxseSB3cml0ZXMgYG11dGF0aW9uc2Agb24gdGhlIGFzeW5jIHF1ZXVlLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gZXhlY3V0ZVdyaXRlKGUsIHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFdyaXRlKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVXcml0ZShhd2FpdCBfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZShlKSwgdCwgbikpKSwgXG4gICAgICAgIG4ucHJvbWlzZTtcbiAgICB9KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSksIHQpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEge0BsaW5rIFZpZXdTbmFwc2hvdH0gdGhhdCBjb250YWlucyB0aGUgc2luZ2xlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcmVmYFxuICogdG8gYSB7QGxpbmsgRG9jdW1lbnRTbmFwc2hvdH0uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbnZlcnRUb0RvY1NuYXBzaG90KGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gbi5kb2NzLmdldCh0Ll9rZXkpLCBpID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcihlKTtcbiAgICByZXR1cm4gbmV3IERvY3VtZW50U25hcHNob3QoZSwgaSwgdC5fa2V5LCByLCBuZXcgU25hcHNob3RNZXRhZGF0YShuLmhhc1BlbmRpbmdXcml0ZXMsIG4uZnJvbUNhY2hlKSwgdC5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIHRoZSBnaXZlbiBxdWVyeSxcbiAqIHdpdGhvdXQgYWN0dWFsbHkgZG93bmxvYWRpbmcgdGhlIGRvY3VtZW50cy5cbiAqXG4gKiBVc2luZyB0aGlzIGZ1bmN0aW9uIHRvIGNvdW50IHRoZSBkb2N1bWVudHMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seSB0aGVcbiAqIGZpbmFsIGNvdW50LCBub3QgdGhlIGRvY3VtZW50cycgZGF0YSwgaXMgZG93bmxvYWRlZC4gVGhpcyBmdW5jdGlvbiBjYW4gZXZlblxuICogY291bnQgdGhlIGRvY3VtZW50cyBpZiB0aGUgcmVzdWx0IHNldCB3b3VsZCBiZSBwcm9oaWJpdGl2ZWx5IGxhcmdlIHRvXG4gKiBkb3dubG9hZCBlbnRpcmVseSAoZS5nLiB0aG91c2FuZHMgb2YgZG9jdW1lbnRzKS5cbiAqXG4gKiBUaGUgcmVzdWx0IHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlciBpcyBwcmVzZW50ZWQsIHVuYWx0ZXJlZCwgd2l0aG91dFxuICogY29uc2lkZXJpbmcgYW55IGxvY2FsIHN0YXRlLiBUaGF0IGlzLCBkb2N1bWVudHMgaW4gdGhlIGxvY2FsIGNhY2hlIGFyZSBub3RcbiAqIHRha2VuIGludG8gY29uc2lkZXJhdGlvbiwgbmVpdGhlciBhcmUgbG9jYWwgbW9kaWZpY2F0aW9ucyBub3QgeWV0XG4gKiBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc2VydmVyLiBQcmV2aW91c2x5LWRvd25sb2FkZWQgcmVzdWx0cywgaWYgYW55LCBhcmUgbm90XG4gKiB1c2VkOiBldmVyeSByZXF1ZXN0IHVzaW5nIHRoaXMgc291cmNlIG5lY2Vzc2FyaWx5IGludm9sdmVzIGEgcm91bmQgdHJpcCB0b1xuICogdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgd2hvc2UgcmVzdWx0IHNldCBzaXplIHRvIGNhbGN1bGF0ZS5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgY291bnQ7IHRoZSBjb3VudCBjYW4gYmVcbiAqIHJldHJpZXZlZCBmcm9tIGBzbmFwc2hvdC5kYXRhKCkuY291bnRgLCB3aGVyZSBgc25hcHNob3RgIGlzIHRoZVxuICogYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIHRvIHdoaWNoIHRoZSByZXR1cm5lZCBQcm9taXNlIHJlc29sdmVzLlxuICovIGZ1bmN0aW9uIGdldENvdW50RnJvbVNlcnZlcihlKSB7XG4gICAgcmV0dXJuIGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIoZSwge1xuICAgICAgICBjb3VudDogY291bnQoKVxuICAgIH0pO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNwZWNpZmllZCBhZ2dyZWdhdGlvbnMgb3ZlciB0aGUgZG9jdW1lbnRzIGluIHRoZSByZXN1bHRcbiAqIHNldCBvZiB0aGUgZ2l2ZW4gcXVlcnksIHdpdGhvdXQgYWN0dWFsbHkgZG93bmxvYWRpbmcgdGhlIGRvY3VtZW50cy5cbiAqXG4gKiBVc2luZyB0aGlzIGZ1bmN0aW9uIHRvIHBlcmZvcm0gYWdncmVnYXRpb25zIGlzIGVmZmljaWVudCBiZWNhdXNlIG9ubHkgdGhlXG4gKiBmaW5hbCBhZ2dyZWdhdGlvbiB2YWx1ZXMsIG5vdCB0aGUgZG9jdW1lbnRzJyBkYXRhLCBpcyBkb3dubG9hZGVkLiBUaGlzXG4gKiBmdW5jdGlvbiBjYW4gZXZlbiBwZXJmb3JtIGFnZ3JlZ2F0aW9ucyBvZiB0aGUgZG9jdW1lbnRzIGlmIHRoZSByZXN1bHQgc2V0XG4gKiB3b3VsZCBiZSBwcm9oaWJpdGl2ZWx5IGxhcmdlIHRvIGRvd25sb2FkIGVudGlyZWx5IChlLmcuIHRob3VzYW5kcyBvZiBkb2N1bWVudHMpLlxuICpcbiAqIFRoZSByZXN1bHQgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGlzIHByZXNlbnRlZCwgdW5hbHRlcmVkLCB3aXRob3V0XG4gKiBjb25zaWRlcmluZyBhbnkgbG9jYWwgc3RhdGUuIFRoYXQgaXMsIGRvY3VtZW50cyBpbiB0aGUgbG9jYWwgY2FjaGUgYXJlIG5vdFxuICogdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLCBuZWl0aGVyIGFyZSBsb2NhbCBtb2RpZmljYXRpb25zIG5vdCB5ZXRcbiAqIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzZXJ2ZXIuIFByZXZpb3VzbHktZG93bmxvYWRlZCByZXN1bHRzLCBpZiBhbnksIGFyZSBub3RcbiAqIHVzZWQ6IGV2ZXJ5IHJlcXVlc3QgdXNpbmcgdGhpcyBzb3VyY2UgbmVjZXNzYXJpbHkgaW52b2x2ZXMgYSByb3VuZCB0cmlwIHRvXG4gKiB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgd2hvc2UgcmVzdWx0IHNldCB0byBhZ2dyZWdhdGUgb3Zlci5cbiAqIEBwYXJhbSBhZ2dyZWdhdGVTcGVjIEFuIGBBZ2dyZWdhdGVTcGVjYCBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIGFnZ3JlZ2F0ZXNcbiAqIHRvIHBlcmZvcm0gb3ZlciB0aGUgcmVzdWx0IHNldC4gVGhlIEFnZ3JlZ2F0ZVNwZWMgc3BlY2lmaWVzIGFsaWFzZXMgZm9yIGVhY2hcbiAqIGFnZ3JlZ2F0ZSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGFnZ3JlZ2F0ZSByZXN1bHQuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgYWdncmVnYXRlU25hcHNob3QgPSBhd2FpdCBnZXRBZ2dyZWdhdGVGcm9tU2VydmVyKHF1ZXJ5LCB7XG4gKiAgIGNvdW50T2ZEb2NzOiBjb3VudCgpLFxuICogICB0b3RhbEhvdXJzOiBzdW0oJ2hvdXJzJyksXG4gKiAgIGF2ZXJhZ2VTY29yZTogYXZlcmFnZSgnc2NvcmUnKVxuICogfSk7XG4gKlxuICogY29uc3QgY291bnRPZkRvY3M6IG51bWJlciA9IGFnZ3JlZ2F0ZVNuYXBzaG90LmRhdGEoKS5jb3VudE9mRG9jcztcbiAqIGNvbnN0IHRvdGFsSG91cnM6IG51bWJlciA9IGFnZ3JlZ2F0ZVNuYXBzaG90LmRhdGEoKS50b3RhbEhvdXJzO1xuICogY29uc3QgYXZlcmFnZVNjb3JlOiBudW1iZXIgfCBudWxsID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLmF2ZXJhZ2VTY29yZTtcbiAqIGBgYFxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgciA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQobiksIGkgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbWFwVG9BcnJheShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCByIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCByKSAmJiBuLnB1c2godChlW3JdLCByLCBlKSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH0odCwgKChlLCB0KSA9PiBuZXcgX19QUklWQVRFX0FnZ3JlZ2F0ZUltcGwodCwgZS5fYWdncmVnYXRlVHlwZSwgZS5faW50ZXJuYWxGaWVsZFBhdGgpKSk7XG4gICAgLy8gUnVuIHRoZSBhZ2dyZWdhdGlvbiBhbmQgY29udmVydCB0aGUgcmVzdWx0c1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50UnVuQWdncmVnYXRlUXVlcnkoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPIChzdW0vYXZnKSBzaG91bGQgd2UgdXBkYXRlIHRoaXMgdG8gdXNlIHRoZSBldmVudCBtYW5hZ2VyP1xuICAgICAgICAgICAgLy8gSW1wbGVtZW50IGFuZCBjYWxsIGV4ZWN1dGVBZ2dyZWdhdGVRdWVyeVZpYVNuYXBzaG90TGlzdGVuZXIsIHNpbWlsYXJcbiAgICAgICAgICAgIC8vIHRvIHRoZSBpbXBsZW1lbnRhdGlvbiBpbiBmaXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNWaWFTbmFwc2hvdExpc3RlbmVyXG4gICAgICAgICAgICAvLyBhYm92ZVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMjc3NjI4Mzg0KTogY2hlY2sgYGNhblVzZU5ldHdvcmsoKWAgYW5kIGhhbmRsZSBtdWx0aS10YWIuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGF3YWl0IF9fUFJJVkFURV9nZXREYXRhc3RvcmUoZSk7XG4gICAgICAgICAgICAgICAgci5yZXNvbHZlKF9fUFJJVkFURV9pbnZva2VSdW5BZ2dyZWdhdGlvblF1ZXJ5UnBjKGksIHQsIG4pKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByLnJlamVjdChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCByLnByb21pc2U7XG4gICAgfShyLCBlLl9xdWVyeSwgaSkudGhlbigodCA9PiBcbiAgICAvKipcbiAqIENvbnZlcnRzIHRoZSBjb3JlIGFnZ3JlZ3JhdGlvbiByZXN1bHQgdG8gYW4gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgXG4gKiB0aGF0IGNhbiBiZSByZXR1cm5lZCB0byB0aGUgY29uc3VtZXIuXG4gKiBAcGFyYW0gcXVlcnlcbiAqIEBwYXJhbSBhZ2dyZWdhdGVSZXN1bHQgQ29yZSBhZ2dyZWdhdGlvbiByZXN1bHRcbiAqIEBpbnRlcm5hbFxuICovXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2NvbnZlcnRUb0FnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3QoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcihlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90KHQsIHIsIG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAobiwgZSwgdCkpKTtcbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUxvY2FsQ2FjaGVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwibWVtb3J5XCIsIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyLCBcbiAgICAgICAgKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZ2FyYmFnZUNvbGxlY3RvcikgPyB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBlLmdhcmJhZ2VDb2xsZWN0b3IuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA6IHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX1BlcnNpc3RlbnRMb2NhbENhY2hlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgdGhpcy5raW5kID0gXCJwZXJzaXN0ZW50XCIsIChudWxsID09IGUgPyB2b2lkIDAgOiBlLnRhYk1hbmFnZXIpID8gKGUudGFiTWFuYWdlci5faW5pdGlhbGl6ZShlKSwgXG4gICAgICAgIHQgPSBlLnRhYk1hbmFnZXIpIDogKHQgPSBwZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlcih2b2lkIDApLCB0Ll9pbml0aWFsaXplKGUpKSwgXG4gICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gdC5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IHQuX29mZmxpbmVDb21wb25lbnRQcm92aWRlcjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5RWFnZXJHYWJhZ2VDb2xsZWN0b3JJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJtZW1vcnlFYWdlclwiLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlMcnVHYWJhZ2VDb2xsZWN0b3JJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwibWVtb3J5THJ1XCIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBfX1BSSVZBVEVfTHJ1R2NNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBNZW1vcnlFYWdlckdhcmJhZ2VDb2xsZWN0b3JgLiBUaGlzIGlzIGFsc28gdGhlXG4gKiBkZWZhdWx0IGdhcmJhZ2UgY29sbGVjdG9yIHVubGVzcyBpdCBpcyBleHBsaWNpdGx5IHNwZWNpZmllZCBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gbWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yKCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUVhZ2VyR2FiYWdlQ29sbGVjdG9ySW1wbDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBNZW1vcnlMcnVHYXJiYWdlQ29sbGVjdG9yYC5cbiAqXG4gKiBBIHRhcmdldCBzaXplIGNhbiBiZSBzcGVjaWZpZWQgYXMgcGFydCBvZiB0aGUgc2V0dGluZyBwYXJhbWV0ZXIuIFRoZVxuICogY29sbGVjdG9yIHdpbGwgc3RhcnQgZGVsZXRpbmcgZG9jdW1lbnRzIG9uY2UgdGhlIGNhY2hlIHNpemUgZXhjZWVkc1xuICogdGhlIGdpdmVuIHNpemUuIFRoZSBkZWZhdWx0IGNhY2hlIHNpemUgaXMgNDBNQiAoNDAgKiAxMDI0ICogMTAyNCBieXRlcykuXG4gKi8gZnVuY3Rpb24gbWVtb3J5THJ1R2FyYmFnZUNvbGxlY3RvcihlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5THJ1R2FiYWdlQ29sbGVjdG9ySW1wbChudWxsID09IGUgPyB2b2lkIDAgOiBlLmNhY2hlU2l6ZUJ5dGVzKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBNZW1vcnlMb2NhbENhY2hlYC4gVGhlIGluc3RhbmNlIGNhbiBiZSBzZXQgdG9cbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgdG8gdGVsbCB0aGUgU0RLIHdoaWNoIGNhY2hlIGxheWVyIHRvIHVzZS5cbiAqLyBmdW5jdGlvbiBtZW1vcnlMb2NhbENhY2hlKGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlMb2NhbENhY2hlSW1wbChlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50TG9jYWxDYWNoZWAuIFRoZSBpbnN0YW5jZSBjYW4gYmUgc2V0IHRvXG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIHRlbGwgdGhlIFNESyB3aGljaCBjYWNoZSBsYXllciB0byB1c2UuXG4gKlxuICogUGVyc2lzdGVudCBjYWNoZSBjYW5ub3QgYmUgdXNlZCBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQuXG4gKi8gZnVuY3Rpb24gcGVyc2lzdGVudExvY2FsQ2FjaGUoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BlcnNpc3RlbnRMb2NhbENhY2hlSW1wbChlKTtcbn1cblxuY2xhc3MgX19QUklWQVRFX1NpbmdsZVRhYk1hbmFnZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZm9yY2VPd25lcnNoaXAgPSBlLCB0aGlzLmtpbmQgPSBcInBlcnNpc3RlbnRTaW5nbGVUYWJcIjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqLyAgICBfaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYk9mZmxpbmVDb21wb25lbnRQcm92aWRlcih0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciwgbnVsbCA9PSBlID8gdm9pZCAwIDogZS5jYWNoZVNpemVCeXRlcywgdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTXVsdGlUYWJNYW5hZ2VySW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwiUGVyc2lzdGVudE11bHRpcGxlVGFiXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgX2luaXRpYWxpemUoZSkge1xuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlciwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IF9fUFJJVkFURV9NdWx0aVRhYk9mZmxpbmVDb21wb25lbnRQcm92aWRlcih0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciwgbnVsbCA9PSBlID8gdm9pZCAwIDogZS5jYWNoZVNpemVCeXRlcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyYC5cbiAqXG4gKiBAcGFyYW0gc2V0dGluZ3MgQ29uZmlndXJlcyB0aGUgY3JlYXRlZCB0YWIgbWFuYWdlci5cbiAqLyBmdW5jdGlvbiBwZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlcihlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2luZ2xlVGFiTWFuYWdlckltcGwobnVsbCA9PSBlID8gdm9pZCAwIDogZS5mb3JjZU93bmVyc2hpcCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudE11bHRpcGxlVGFiTWFuYWdlcmAuXG4gKi8gZnVuY3Rpb24gcGVyc2lzdGVudE11bHRpcGxlVGFiTWFuYWdlcigpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NdWx0aVRhYk1hbmFnZXJJbXBsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB5ZSA9IHtcbiAgICBtYXhBdHRlbXB0czogNVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB3cml0ZSBiYXRjaCwgdXNlZCB0byBwZXJmb3JtIG11bHRpcGxlIHdyaXRlcyBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAqXG4gKiBBIGBXcml0ZUJhdGNoYCBvYmplY3QgY2FuIGJlIGFjcXVpcmVkIGJ5IGNhbGxpbmcge0BsaW5rIHdyaXRlQmF0Y2h9LiBJdFxuICogcHJvdmlkZXMgbWV0aG9kcyBmb3IgYWRkaW5nIHdyaXRlcyB0byB0aGUgd3JpdGUgYmF0Y2guIE5vbmUgb2YgdGhlIHdyaXRlc1xuICogd2lsbCBiZSBjb21taXR0ZWQgKG9yIHZpc2libGUgbG9jYWxseSkgdW50aWwge0BsaW5rIFdyaXRlQmF0Y2guY29tbWl0fSBpc1xuICogY2FsbGVkLlxuICovXG5jbGFzcyBXcml0ZUJhdGNoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gZSwgdGhpcy5fY29tbWl0SGFuZGxlciA9IHQsIHRoaXMuX211dGF0aW9ucyA9IFtdLCB0aGlzLl9jb21taXR0ZWQgPSAhMSwgXG4gICAgICAgIHRoaXMuX2RhdGFSZWFkZXIgPSBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZSk7XG4gICAgfVxuICAgIHNldChlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBfX1BSSVZBVEVfYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKHIuY29udmVydGVyLCB0LCBuKSwgcyA9IF9fUFJJVkFURV9wYXJzZVNldERhdGEodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnNldFwiLCByLl9rZXksIGksIG51bGwgIT09IHIuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucy5wdXNoKHMudG9NdXRhdGlvbihyLl9rZXksIFByZWNvbmRpdGlvbi5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKGUsIHQsIG4sIC4uLnIpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gcyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSB8fCB0IGluc3RhbmNlb2YgRmllbGRQYXRoID8gX19QUklWQVRFX3BhcnNlVXBkYXRlVmFyYXJncyh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgdCwgbiwgcikgOiBfX1BSSVZBVEVfcGFyc2VVcGRhdGVEYXRhKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCB0KSwgXG4gICAgICAgIHRoaXMuX211dGF0aW9ucy5wdXNoKHMudG9NdXRhdGlvbihpLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHMoITApKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgV3JpdGVCYXRjaGAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucyA9IHRoaXMuX211dGF0aW9ucy5jb25jYXQobmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbih0Ll9rZXksIFByZWNvbmRpdGlvbi5ub25lKCkpKSwgXG4gICAgICAgIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbW1pdHMgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhpcyB3cml0ZSBiYXRjaCBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHQgb2YgdGhlc2Ugd3JpdGVzIHdpbGwgb25seSBiZSByZWZsZWN0ZWQgaW4gZG9jdW1lbnQgcmVhZHMgdGhhdFxuICAgICAqIG9jY3VyIGFmdGVyIHRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzLiBJZiB0aGUgY2xpZW50IGlzIG9mZmxpbmUsIHRoZVxuICAgICAqIHdyaXRlIGZhaWxzLiBJZiB5b3Ugd291bGQgbGlrZSB0byBzZWUgbG9jYWwgbW9kaWZpY2F0aW9ucyBvciBidWZmZXIgd3JpdGVzXG4gICAgICogdW50aWwgdGhlIGNsaWVudCBpcyBvbmxpbmUsIHVzZSB0aGUgZnVsbCBGaXJlc3RvcmUgU0RLLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgb25jZSBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGUgYmF0Y2ggaGF2ZSBiZWVuXG4gICAgICogc3VjY2Vzc2Z1bGx5IHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgYXMgYW4gYXRvbWljIHVuaXQgKG5vdGUgdGhhdCBpdCB3b24ndFxuICAgICAqIHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICAgICAqLyAgICBjb21taXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKSwgdGhpcy5fY29tbWl0dGVkID0gITAsIHRoaXMuX211dGF0aW9ucy5sZW5ndGggPiAwID8gdGhpcy5fY29tbWl0SGFuZGxlcih0aGlzLl9tdXRhdGlvbnMpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIF92ZXJpZnlOb3RDb21taXR0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb21taXR0ZWQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSB3cml0ZSBiYXRjaCBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgYWZ0ZXIgY29tbWl0KCkgaGFzIGJlZW4gY2FsbGVkLlwiKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0KSB7XG4gICAgaWYgKChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKS5maXJlc3RvcmUgIT09IHQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiUHJvdmlkZWQgZG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIGluc3RhbmNlLlwiKTtcbiAgICByZXR1cm4gZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRPRE8obXJzY2htaWR0KSBDb25zaWRlciB1c2luZyBgQmFzZVRyYW5zYWN0aW9uYCBhcyB0aGUgYmFzZSBjbGFzcyBpbiB0aGVcbi8vIGxlZ2FjeSBTREsuXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovXG5jbGFzcyBUcmFuc2FjdGlvbiBleHRlbmRzIGNsYXNzIFRyYW5zYWN0aW9uJDEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBlLCB0aGlzLl90cmFuc2FjdGlvbiA9IHQsIHRoaXMuX2RhdGFSZWFkZXIgPSBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgX19QUklWQVRFX0xpdGVVc2VyRGF0YVdyaXRlcih0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24ubG9va3VwKFsgdC5fa2V5IF0pLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlIHx8IDEgIT09IGUubGVuZ3RoKSByZXR1cm4gZmFpbCgpO1xuICAgICAgICAgICAgY29uc3QgciA9IGVbMF07XG4gICAgICAgICAgICBpZiAoci5pc0ZvdW5kRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBEb2N1bWVudFNuYXBzaG90JDEodGhpcy5fZmlyZXN0b3JlLCBuLCByLmtleSwgciwgdC5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgaWYgKHIuaXNOb0RvY3VtZW50KCkpIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZSwgbiwgdC5fa2V5LCBudWxsLCB0LmNvbnZlcnRlcik7XG4gICAgICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0KGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihyLmNvbnZlcnRlciwgdCwgbiksIHMgPSBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24uc2V0XCIsIHIuX2tleSwgaSwgbnVsbCAhPT0gci5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uc2V0KHIuX2tleSwgcyksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZShlLCB0LCBuLCAuLi5yKSB7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gcyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSB8fCB0IGluc3RhbmNlb2YgRmllbGRQYXRoID8gX19QUklWQVRFX3BhcnNlVXBkYXRlVmFyYXJncyh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIHQsIG4sIHIpIDogX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIHQpLCBcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24udXBkYXRlKGkuX2tleSwgcyksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgVHJhbnNhY3Rpb25gIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZSh0Ll9rZXkpLCB0aGlzO1xuICAgIH1cbn0ge1xuICAgIC8vIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgVHJhbnNhY3Rpb24gQVBJIGluIHRoZSBMaXRlIFNES1xuICAgIC8vIGJ1dCBpcyBzdWJjbGFzc2VkIGluIG9yZGVyIHRvIHJldHVybiBpdHMgb3duIERvY3VtZW50U25hcHNob3QgdHlwZXMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIHQpLCB0aGlzLl9maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0KGUpLnRoZW4oKGUgPT4gbmV3IERvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBuLCB0Ll9rZXksIGUuX2RvY3VtZW50LCBuZXcgU25hcHNob3RNZXRhZGF0YShcbiAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gITEsIFxuICAgICAgICAvKiBmcm9tQ2FjaGU9ICovICExKSwgdC5jb252ZXJ0ZXIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBnaXZlbiBgdXBkYXRlRnVuY3Rpb25gIGFuZCB0aGVuIGF0dGVtcHRzIHRvIGNvbW1pdCB0aGUgY2hhbmdlc1xuICogYXBwbGllZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uLiBJZiBhbnkgZG9jdW1lbnQgcmVhZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBoYXMgY2hhbmdlZCwgQ2xvdWQgRmlyZXN0b3JlIHJldHJpZXMgdGhlIGB1cGRhdGVGdW5jdGlvbmAuIElmIGl0IGZhaWxzIHRvXG4gKiBjb21taXQgYWZ0ZXIgNSBhdHRlbXB0cywgdGhlIHRyYW5zYWN0aW9uIGZhaWxzLlxuICpcbiAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB0cmFuc2FjdGlvbiBpcyA1MDAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBGaXJlc3RvcmUgZGF0YWJhc2UgdG8gcnVuIHRoaXNcbiAqIHRyYW5zYWN0aW9uIGFnYWluc3QuXG4gKiBAcGFyYW0gdXBkYXRlRnVuY3Rpb24gLSBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBjb250ZXh0LlxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgbWF4aW11bSBudW1iZXIgb2YgYXR0ZW1wdHMgdG9cbiAqIGNvbW1pdC5cbiAqIEByZXR1cm5zIElmIHRoZSB0cmFuc2FjdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IG9yIHdhcyBleHBsaWNpdGx5IGFib3J0ZWRcbiAqICh0aGUgYHVwZGF0ZUZ1bmN0aW9uYCByZXR1cm5lZCBhIGZhaWxlZCBwcm9taXNlKSwgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlXG4gKiBgdXBkYXRlRnVuY3Rpb24gYGlzIHJldHVybmVkIGhlcmUuIE90aGVyd2lzZSwgaWYgdGhlIHRyYW5zYWN0aW9uIGZhaWxlZCwgYVxuICogcmVqZWN0ZWQgcHJvbWlzZSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGZhaWx1cmUgZXJyb3IgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gcnVuVHJhbnNhY3Rpb24oZSwgdCwgbikge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpO1xuICAgIGNvbnN0IHIgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHllKSwgbik7XG4gICAgIWZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVRyYW5zYWN0aW9uT3B0aW9ucyhlKSB7XG4gICAgICAgIGlmIChlLm1heEF0dGVtcHRzIDwgMSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJNYXggYXR0ZW1wdHMgbXVzdCBiZSBhdCBsZWFzdCAxXCIpO1xuICAgIH0ocik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRUcmFuc2FjdGlvbihlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBhd2FpdCBfX1BSSVZBVEVfZ2V0RGF0YXN0b3JlKGUpO1xuICAgICAgICAgICAgbmV3IF9fUFJJVkFURV9UcmFuc2FjdGlvblJ1bm5lcihlLmFzeW5jUXVldWUsIGksIG4sIHQsIHIpLnJ1bigpO1xuICAgICAgICB9KSksIHIucHJvbWlzZTtcbiAgICB9KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSksIChuID0+IHQobmV3IFRyYW5zYWN0aW9uKGUsIG4pKSksIHIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgZm9yIHVzZSB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gb3JcbiAqIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gd2l0aCBge21lcmdlOiB0cnVlfWAgdG8gbWFyayBhIGZpZWxkIGZvciBkZWxldGlvbi5cbiAqLyBmdW5jdGlvbiBkZWxldGVGaWVsZCgpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbChcImRlbGV0ZUZpZWxkXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRvXG4gKiBpbmNsdWRlIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAqLyBmdW5jdGlvbiBzZXJ2ZXJUaW1lc3RhbXAoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwoXCJzZXJ2ZXJUaW1lc3RhbXBcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHVuaW9uIHRoZSBnaXZlbiBlbGVtZW50cyB3aXRoIGFueSBhcnJheVxuICogdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBFYWNoIHNwZWNpZmllZCBlbGVtZW50IHRoYXQgZG9lc24ndFxuICogYWxyZWFkeSBleGlzdCBpbiB0aGUgYXJyYXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgZW5kLiBJZiB0aGUgZmllbGQgYmVpbmdcbiAqIG1vZGlmaWVkIGlzIG5vdCBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBhcnJheVxuICogY29udGFpbmluZyBleGFjdGx5IHRoZSBzcGVjaWZpZWQgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHVuaW9uIGludG8gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgLlxuICovIGZ1bmN0aW9uIGFycmF5VW5pb24oLi4uZSkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsKFwiYXJyYXlVbmlvblwiLCBlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIChzZXREb2M6MSl9IG9yIHtAbGlua1xuICogdXBkYXRlRG9jOjF9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byByZW1vdmUgdGhlIGdpdmVuIGVsZW1lbnRzIGZyb20gYW55XG4gKiBhcnJheSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEFsbCBpbnN0YW5jZXMgb2YgZWFjaCBlbGVtZW50XG4gKiBzcGVjaWZpZWQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90XG4gKiBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gYXJyYXlSZW1vdmUoLi4uZSkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbChcImFycmF5UmVtb3ZlXCIsIGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIGZpZWxkJ3MgY3VycmVudCB2YWx1ZSBieVxuICogdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIElmIGVpdGhlciB0aGUgb3BlcmFuZCBvciB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSB1c2VzIGZsb2F0aW5nIHBvaW50XG4gKiBwcmVjaXNpb24sIGFsbCBhcml0aG1ldGljIGZvbGxvd3MgSUVFRSA3NTQgc2VtYW50aWNzLiBJZiBib3RoIHZhbHVlcyBhcmVcbiAqIGludGVnZXJzLCB2YWx1ZXMgb3V0c2lkZSBvZiBKYXZhU2NyaXB0J3Mgc2FmZSBudW1iZXIgcmFuZ2VcbiAqIChgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJgIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmApIGFyZSBhbHNvIHN1YmplY3QgdG9cbiAqIHByZWNpc2lvbiBsb3NzLiBGdXJ0aGVybW9yZSwgb25jZSBwcm9jZXNzZWQgYnkgdGhlIEZpcmVzdG9yZSBiYWNrZW5kLCBhbGxcbiAqIGludGVnZXIgb3BlcmF0aW9ucyBhcmUgY2FwcGVkIGJldHdlZW4gLTJeNjMgYW5kIDJeNjMtMS5cbiAqXG4gKiBJZiB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBgbnVtYmVyYCwgb3IgaWYgdGhlIGZpZWxkIGRvZXMgbm90XG4gKiB5ZXQgZXhpc3QsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzZXRzIHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogQHBhcmFtIG4gLSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gaW5jcmVtZW50KGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwoXCJpbmNyZW1lbnRcIiwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB3cml0ZSBiYXRjaCwgdXNlZCBmb3IgcGVyZm9ybWluZyBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGVcbiAqIGF0b21pYyBvcGVyYXRpb24uIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB7QGxpbmsgV3JpdGVCYXRjaH1cbiAqIGlzIDUwMC5cbiAqXG4gKiBVbmxpa2UgdHJhbnNhY3Rpb25zLCB3cml0ZSBiYXRjaGVzIGFyZSBwZXJzaXN0ZWQgb2ZmbGluZSBhbmQgdGhlcmVmb3JlIGFyZVxuICogcHJlZmVyYWJsZSB3aGVuIHlvdSBkb24ndCBuZWVkIHRvIGNvbmRpdGlvbiB5b3VyIHdyaXRlcyBvbiByZWFkIGRhdGEuXG4gKlxuICogQHJldHVybnMgQSB7QGxpbmsgV3JpdGVCYXRjaH0gdGhhdCBjYW4gYmUgdXNlZCB0byBhdG9taWNhbGx5IGV4ZWN1dGUgbXVsdGlwbGVcbiAqIHdyaXRlcy5cbiAqLyBmdW5jdGlvbiB3cml0ZUJhdGNoKGUpIHtcbiAgICByZXR1cm4gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSksIG5ldyBXcml0ZUJhdGNoKGUsICh0ID0+IGV4ZWN1dGVXcml0ZShlLCB0KSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBzZXRJbmRleENvbmZpZ3VyYXRpb24oZSwgdCkge1xuICAgIHZhciBuO1xuICAgIGNvbnN0IHIgPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKTtcbiAgICBpZiAoIXIuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgfHwgXCJtZW1vcnlcIiA9PT0gKG51bGwgPT09IChuID0gci5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5fb2ZmbGluZUtpbmQpKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IHJldHVybiBhbiBlcnJvciBpZiB0aGUgdXNlciBoYXMgbm90IGVuYWJsZWRcbiAgICAvLyBwZXJzaXN0ZW5jZSBzaW5jZSBgZW5hYmxlSW5kZXhlZGRiUGVyc2lzdGVuY2UoKWAgY2FuIGZhaWwgb24gdGhlIFdlYi5cbiAgICByZXR1cm4gX19QUklWQVRFX2xvZ1dhcm4oXCJDYW5ub3QgZW5hYmxlIGluZGV4ZXMgd2hlbiBwZXJzaXN0ZW5jZSBpcyBkaXNhYmxlZFwiKSwgXG4gICAgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZUluZGV4ZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV90cnlQYXJzZUpzb24oZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkZhaWxlZCB0byBwYXJzZSBKU09OOiBcIiArIChudWxsID09IGUgPyB2b2lkIDAgOiBlLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShlKSA6IGUsIG4gPSBbXTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodC5pbmRleGVzKSkgZm9yIChjb25zdCBlIG9mIHQuaW5kZXhlcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV90cnlHZXRTdHJpbmcoZSwgXCJjb2xsZWN0aW9uR3JvdXBcIiksIHIgPSBbXTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUuZmllbGRzKSkgZm9yIChjb25zdCB0IG9mIGUuZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKFwic2V0SW5kZXhDb25maWd1cmF0aW9uXCIsIF9fUFJJVkFURV90cnlHZXRTdHJpbmcodCwgXCJmaWVsZFBhdGhcIikpO1xuICAgICAgICAgICAgICAgIFwiQ09OVEFJTlNcIiA9PT0gdC5hcnJheUNvbmZpZyA/IHIucHVzaChuZXcgSW5kZXhTZWdtZW50KGUsIDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovKSkgOiBcIkFTQ0VORElOR1wiID09PSB0Lm9yZGVyID8gci5wdXNoKG5ldyBJbmRleFNlZ21lbnQoZSwgMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovKSkgOiBcIkRFU0NFTkRJTkdcIiA9PT0gdC5vcmRlciAmJiByLnB1c2gobmV3IEluZGV4U2VnbWVudChlLCAxIC8qIEluZGV4S2luZC5ERVNDRU5ESU5HICovKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuLnB1c2gobmV3IEZpZWxkSW5kZXgoRmllbGRJbmRleC5VTktOT1dOX0lELCB0LCByLCBJbmRleFN0YXRlLmVtcHR5KCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9KHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50U2V0SW5kZXhDb25maWd1cmF0aW9uKHIsIGkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdHJ5R2V0U3RyaW5nKGUsIHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgZVt0XSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJNaXNzaW5nIHN0cmluZyB2YWx1ZSBmb3I6IFwiICsgdCk7XG4gICAgcmV0dXJuIGVbdF07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcmAgZm9yIGNvbmZpZ3VyaW5nIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyB1c2VkXG4gKiBmb3IgbG9jYWwgcXVlcnkgZXhlY3V0aW9uLlxuICpcbiAqIFRvIHVzZSwgY2FsbCBgZ2V0UGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyKClgIHRvIGdldCBhbiBpbnN0YW5jZS5cbiAqLyBjbGFzcyBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXIge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLl9jbGllbnQgPSBlLCBcbiAgICAgICAgLyoqIEEgdHlwZSBzdHJpbmcgdG8gdW5pcXVlbHkgaWRlbnRpZnkgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiUGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIFBlcnNpc3RlbnRDYWNoZSBJbmRleCBNYW5hZ2VyIHVzZWQgYnkgdGhlIGdpdmVuIGBGaXJlc3RvcmVgXG4gKiBvYmplY3QuXG4gKlxuICogQHJldHVybiBUaGUgYFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcmAgaW5zdGFuY2UsIG9yIGBudWxsYCBpZiBsb2NhbFxuICogcGVyc2lzdGVudCBzdG9yYWdlIGlzIG5vdCBpbiB1c2UuXG4gKi8gZnVuY3Rpb24gZ2V0UGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyKGUpIHtcbiAgICB2YXIgdDtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKTtcbiAgICBjb25zdCBuID0gd2UuZ2V0KGUpO1xuICAgIGlmIChuKSByZXR1cm4gbjtcbiAgICBjb25zdCByID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKTtcbiAgICBpZiAoXCJwZXJzaXN0ZW50XCIgIT09IChudWxsID09PSAodCA9IHIuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuX29mZmxpbmVLaW5kKSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgaSA9IG5ldyBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXIocik7XG4gICAgcmV0dXJuIHdlLnNldChlLCBpKSwgaTtcbn1cblxuLyoqXG4gKiBFbmFibGVzIHRoZSBTREsgdG8gY3JlYXRlIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyBhdXRvbWF0aWNhbGx5IGZvciBsb2NhbFxuICogcXVlcnkgZXhlY3V0aW9uIHdoZW4gdGhlIFNESyBiZWxpZXZlcyBjYWNoZSBpbmRleGVzIGNhbiBoZWxwIGltcHJvdmVcbiAqIHBlcmZvcm1hbmNlLlxuICpcbiAqIFRoaXMgZmVhdHVyZSBpcyBkaXNhYmxlZCBieSBkZWZhdWx0LlxuICovIGZ1bmN0aW9uIGVuYWJsZVBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uKGUpIHtcbiAgICBfX1BSSVZBVEVfc2V0UGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUsICEwKTtcbn1cblxuLyoqXG4gKiBTdG9wcyBjcmVhdGluZyBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMgYXV0b21hdGljYWxseSBmb3IgbG9jYWwgcXVlcnlcbiAqIGV4ZWN1dGlvbi4gVGhlIGluZGV4ZXMgd2hpY2ggaGF2ZSBiZWVuIGNyZWF0ZWQgYnkgY2FsbGluZ1xuICogYGVuYWJsZVBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uKClgIHN0aWxsIHRha2UgZWZmZWN0LlxuICovIGZ1bmN0aW9uIGRpc2FibGVQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbihlKSB7XG4gICAgX19QUklWQVRFX3NldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLCAhMSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgcGVyc2lzdGVudCBjYWNoZSBpbmRleGVzLlxuICpcbiAqIFBsZWFzZSBub3RlIHRoaXMgZnVuY3Rpb24gd2lsbCBhbHNvIGRlbGV0ZXMgaW5kZXhlcyBnZW5lcmF0ZWQgYnlcbiAqIGBzZXRJbmRleENvbmZpZ3VyYXRpb24oKWAsIHdoaWNoIGlzIGRlcHJlY2F0ZWQuXG4gKi8gZnVuY3Rpb24gZGVsZXRlQWxsUGVyc2lzdGVudENhY2hlSW5kZXhlcyhlKSB7XG4gICAgZS5fY2xpZW50LnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcbiAgICBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RGVsZXRlQWxsRmllbGRJbmRleGVzKGUuX2NsaWVudCkudGhlbigoZSA9PiBfX1BSSVZBVEVfbG9nRGVidWcoXCJkZWxldGluZyBhbGwgcGVyc2lzdGVudCBjYWNoZSBpbmRleGVzIHN1Y2NlZWRlZFwiKSkpLmNhdGNoKChlID0+IF9fUFJJVkFURV9sb2dXYXJuKFwiZGVsZXRpbmcgYWxsIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyBmYWlsZWRcIiwgZSkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3NldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLCB0KSB7XG4gICAgZS5fY2xpZW50LnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcbiAgICBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50U2V0UGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUuX2NsaWVudCwgdCkudGhlbigoZSA9PiBfX1BSSVZBVEVfbG9nRGVidWcoYHNldHRpbmcgcGVyc2lzdGVudCBjYWNoZSBpbmRleCBhdXRvIGNyZWF0aW9uIGlzRW5hYmxlZD0ke3R9IHN1Y2NlZWRlZGApKSkuY2F0Y2goKGUgPT4gX19QUklWQVRFX2xvZ1dhcm4oYHNldHRpbmcgcGVyc2lzdGVudCBjYWNoZSBpbmRleCBhdXRvIGNyZWF0aW9uIGlzRW5hYmxlZD0ke3R9IGZhaWxlZGAsIGUpKSk7XG59XG5cbi8qKlxuICogTWFwcyBgRmlyZXN0b3JlYCBpbnN0YW5jZXMgdG8gdGhlaXIgY29ycmVzcG9uZGluZ1xuICogYFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcmAgaW5zdGFuY2VzLlxuICpcbiAqIFVzZSBhIGBXZWFrTWFwYCBzbyB0aGF0IHRoZSBtYXBwaW5nIHdpbGwgYmUgYXV0b21hdGljYWxseSBkcm9wcGVkIHdoZW4gdGhlXG4gKiBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyBnYXJiYWdlIGNvbGxlY3RlZC4gVGhpcyBlbXVsYXRlcyBhIHByaXZhdGUgbWVtYmVyXG4gKiBhcyBkZXNjcmliZWQgaW4gaHR0cHM6Ly9nb28uZ2xlLzQ1NHl2dWcuXG4gKi8gY29uc3Qgd2UgPSBuZXcgV2Vha01hcDtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGVzdGluZyBob29rcyBmb3IgdXNlIGJ5IEZpcmVzdG9yZSdzIGludGVncmF0aW9uIHRlc3Qgc3VpdGUgdG8gcmVhY2ggaW50byB0aGVcbiAqIFNESyBpbnRlcm5hbHMgdG8gdmFsaWRhdGUgbG9naWMgYW5kIGJlaGF2aW9yIHRoYXQgaXMgbm90IHZpc2libGUgZnJvbSB0aGVcbiAqIHB1YmxpYyBBUEkgc3VyZmFjZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBUZXN0aW5nSG9va3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBzaG91bGQgbm90IGJlIGNyZWF0ZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIG5vdGlmaWVkIHdoZW4gYW4gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaFxuICAgICAqIG9jY3VycyBpbiB0aGUgV2F0Y2ggbGlzdGVuIHN0cmVhbS5cbiAgICAgKlxuICAgICAqIFRoZSByZWxhdGl2ZSBvcmRlciBpbiB3aGljaCBjYWxsYmFja3MgYXJlIG5vdGlmaWVkIGlzIHVuc3BlY2lmaWVkOyBkbyBub3RcbiAgICAgKiByZWx5IG9uIGFueSBwYXJ0aWN1bGFyIG9yZGVyaW5nLiBJZiBhIGdpdmVuIGNhbGxiYWNrIGlzIHJlZ2lzdGVyZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aGVuIGl0IHdpbGwgYmUgbm90aWZpZWQgbXVsdGlwbGUgdGltZXMsIG9uY2UgcGVyIHJlZ2lzdHJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gaW52b2tlIHVwb24gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgdW5yZWdpc3RlcnMgdGhlIGdpdmVuIGNhbGxiYWNrOyBvbmx5XG4gICAgICogdGhlIGZpcnN0IGludm9jYXRpb24gb2YgdGhlIHJldHVybmVkIGZ1bmN0aW9uIGRvZXMgYW55dGhpbmc7IGFsbCBzdWJzZXF1ZW50XG4gICAgICogaW52b2NhdGlvbnMgZG8gbm90aGluZy5cbiAgICAgKi8gICAgc3RhdGljIG9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2goZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1Rlc3RpbmdIb29rc1NwaUltcGwuaW5zdGFuY2Uub25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIGltcGxlbWVudGF0aW9uIG9mIGBUZXN0aW5nSG9va3NTcGlgLlxuICovIGNsYXNzIF9fUFJJVkFURV9UZXN0aW5nSG9va3NTcGlJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5EdSA9IG5ldyBNYXA7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBTZSB8fCAoU2UgPSBuZXcgX19QUklWQVRFX1Rlc3RpbmdIb29rc1NwaUltcGwsIGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRUZXN0aW5nSG9va3NTcGkoZSkge1xuICAgICAgICAgICAgaWYgKGNlKSB0aHJvdyBuZXcgRXJyb3IoXCJhIFRlc3RpbmdIb29rc1NwaSBpbnN0YW5jZSBpcyBhbHJlYWR5IHNldFwiKTtcbiAgICAgICAgICAgIGNlID0gZTtcbiAgICAgICAgfShTZSkpLCBTZTtcbiAgICB9XG4gICAgaXQoZSkge1xuICAgICAgICB0aGlzLkR1LmZvckVhY2goKHQgPT4gdChlKSkpO1xuICAgIH1cbiAgICBvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFN5bWJvbCgpLCBuID0gdGhpcy5EdTtcbiAgICAgICAgcmV0dXJuIG4uc2V0KHQsIGUpLCAoKSA9PiBuLmRlbGV0ZSh0KTtcbiAgICB9XG59XG5cbmxldCBTZSA9IG51bGw7XG5cbi8qKlxuICogQ2xvdWQgRmlyZXN0b3JlXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi8gIWZ1bmN0aW9uIF9fUFJJVkFURV9yZWdpc3RlckZpcmVzdG9yZShlLCB0ID0gITApIHtcbiAgICAhZnVuY3Rpb24gX19QUklWQVRFX3NldFNES1ZlcnNpb24oZSkge1xuICAgICAgICBTID0gZTtcbiAgICB9KFNES19WRVJTSU9OKSwgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJmaXJlc3RvcmVcIiwgKChlLCB7aW5zdGFuY2VJZGVudGlmaWVyOiBuLCBvcHRpb25zOiByfSkgPT4ge1xuICAgICAgICBjb25zdCBpID0gZS5nZXRQcm92aWRlcihcImFwcFwiKS5nZXRJbW1lZGlhdGUoKSwgcyA9IG5ldyBGaXJlc3RvcmUobmV3IF9fUFJJVkFURV9GaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyKGUuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIpKSwgbmV3IF9fUFJJVkFURV9GaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlcihlLmdldFByb3ZpZGVyKFwiYXBwLWNoZWNrLWludGVybmFsXCIpKSwgZnVuY3Rpb24gX19QUklWQVRFX2RhdGFiYXNlSWRGcm9tQXBwKGUsIHQpIHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5hcHBseShlLm9wdGlvbnMsIFsgXCJwcm9qZWN0SWRcIiBdKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlSWQoZS5vcHRpb25zLnByb2plY3RJZCwgdCk7XG4gICAgICAgIH0oaSwgbiksIGkpO1xuICAgICAgICByZXR1cm4gciA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdXNlRmV0Y2hTdHJlYW1zOiB0XG4gICAgICAgIH0sIHIpLCBzLl9zZXRTZXR0aW5ncyhyKSwgcztcbiAgICB9KSwgXCJQVUJMSUNcIikuc2V0TXVsdGlwbGVJbnN0YW5jZXMoITApKSwgcmVnaXN0ZXJWZXJzaW9uKHcsIFwiNC4yLjBcIiwgZSksIFxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXG4gICAgcmVnaXN0ZXJWZXJzaW9uKHcsIFwiNC4yLjBcIiwgXCJlc20yMDE3XCIpO1xufSgpO1xuXG5leHBvcnQgeyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyLCBBZ2dyZWdhdGVGaWVsZCwgQWdncmVnYXRlUXVlcnlTbmFwc2hvdCwgQnl0ZXMsIGZlIGFzIENBQ0hFX1NJWkVfVU5MSU1JVEVELCBDb2xsZWN0aW9uUmVmZXJlbmNlLCBEb2N1bWVudFJlZmVyZW5jZSwgRG9jdW1lbnRTbmFwc2hvdCwgRmllbGRQYXRoLCBGaWVsZFZhbHVlLCBGaXJlc3RvcmUsIEZpcmVzdG9yZUVycm9yLCBHZW9Qb2ludCwgTG9hZEJ1bmRsZVRhc2ssIFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlciwgUXVlcnksIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCwgUXVlcnlDb25zdHJhaW50LCBRdWVyeURvY3VtZW50U25hcHNob3QsIFF1ZXJ5RW5kQXRDb25zdHJhaW50LCBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCwgUXVlcnlMaW1pdENvbnN0cmFpbnQsIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnQsIFF1ZXJ5U25hcHNob3QsIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQsIFNuYXBzaG90TWV0YWRhdGEsIFRpbWVzdGFtcCwgVHJhbnNhY3Rpb24sIFdyaXRlQmF0Y2gsIEJ5dGVTdHJpbmcgYXMgX0J5dGVTdHJpbmcsIERhdGFiYXNlSWQgYXMgX0RhdGFiYXNlSWQsIERvY3VtZW50S2V5IGFzIF9Eb2N1bWVudEtleSwgX19QUklWQVRFX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyIGFzIF9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciwgX19QUklWQVRFX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgYXMgX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIsIEZpZWxkUGF0aCQxIGFzIF9GaWVsZFBhdGgsIFRlc3RpbmdIb29rcyBhcyBfVGVzdGluZ0hvb2tzLCBfX1BSSVZBVEVfY2FzdCBhcyBfY2FzdCwgX19QUklWQVRFX2RlYnVnQXNzZXJ0IGFzIF9kZWJ1Z0Fzc2VydCwgX19QUklWQVRFX2lzQmFzZTY0QXZhaWxhYmxlIGFzIF9pc0Jhc2U2NEF2YWlsYWJsZSwgX19QUklWQVRFX2xvZ1dhcm4gYXMgX2xvZ1dhcm4sIF9fUFJJVkFURV92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyIGFzIF92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyLCBhZGREb2MsIGFnZ3JlZ2F0ZUZpZWxkRXF1YWwsIGFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RFcXVhbCwgYW5kLCBhcnJheVJlbW92ZSwgYXJyYXlVbmlvbiwgYXZlcmFnZSwgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgY29sbGVjdGlvbiwgY29sbGVjdGlvbkdyb3VwLCBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IsIGNvdW50LCBkZWxldGVBbGxQZXJzaXN0ZW50Q2FjaGVJbmRleGVzLCBkZWxldGVEb2MsIGRlbGV0ZUZpZWxkLCBkaXNhYmxlTmV0d29yaywgZGlzYWJsZVBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uLCBkb2MsIGRvY3VtZW50SWQsIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCBlbmFibGVOZXR3b3JrLCBlbmFibGVQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbiwgZW5kQXQsIGVuZEJlZm9yZSwgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgZXhlY3V0ZVdyaXRlLCBnZXRBZ2dyZWdhdGVGcm9tU2VydmVyLCBnZXRDb3VudEZyb21TZXJ2ZXIsIGdldERvYywgZ2V0RG9jRnJvbUNhY2hlLCBnZXREb2NGcm9tU2VydmVyLCBnZXREb2NzLCBnZXREb2NzRnJvbUNhY2hlLCBnZXREb2NzRnJvbVNlcnZlciwgZ2V0RmlyZXN0b3JlLCBnZXRQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXIsIGluY3JlbWVudCwgaW5pdGlhbGl6ZUZpcmVzdG9yZSwgbGltaXQsIGxpbWl0VG9MYXN0LCBsb2FkQnVuZGxlLCBtZW1vcnlFYWdlckdhcmJhZ2VDb2xsZWN0b3IsIG1lbW9yeUxvY2FsQ2FjaGUsIG1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3IsIG5hbWVkUXVlcnksIG9uU25hcHNob3QsIG9uU25hcHNob3RzSW5TeW5jLCBvciwgb3JkZXJCeSwgcGVyc2lzdGVudExvY2FsQ2FjaGUsIHBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXIsIHBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyLCBxdWVyeSwgcXVlcnlFcXVhbCwgcmVmRXF1YWwsIHJ1blRyYW5zYWN0aW9uLCBzZXJ2ZXJUaW1lc3RhbXAsIHNldERvYywgc2V0SW5kZXhDb25maWd1cmF0aW9uLCBzZXRMb2dMZXZlbCwgc25hcHNob3RFcXVhbCwgc3RhcnRBZnRlciwgc3RhcnRBdCwgc3VtLCB0ZXJtaW5hdGUsIHVwZGF0ZURvYywgd2FpdEZvclBlbmRpbmdXcml0ZXMsIHdoZXJlLCB3cml0ZUJhdGNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiMTAuNC4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5GSVJFQkFTRV9URVNUX0FQSV9LRVksXG4gIGF1dGhEb21haW46IFwidGhlLWFnZ3JlZ2F0b3ItdGVzdC5maXJlYmFzZWFwcC5jb21cIixcbiAgcHJvamVjdElkOiBcInRoZS1hZ2dyZWdhdG9yLXRlc3RcIixcbiAgc3RvcmFnZUJ1Y2tldDogXCJ0aGUtYWdncmVnYXRvci10ZXN0LmFwcHNwb3QuY29tXCIsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjkzNTU3NzEwMDk4M1wiLFxuICBhcHBJZDogXCIxOjkzNTU3NzEwMDk4Mzp3ZWI6NmFiYTFkMzc0MWY3NzMwMTBjZTMzMlwiLFxufTtcblxuY29uc3QgdGVzdEFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuY29uc3QgdGVzdERiID0gZ2V0RmlyZXN0b3JlKHRlc3RBcHApO1xuXG5leHBvcnQgeyB0ZXN0QXBwLCB0ZXN0RGIgfTtcbiIsImltcG9ydCB7XG4gIGNvbGxlY3Rpb24sXG4gIGdldERvY3MsXG4gIGxpbWl0LFxuICBvcmRlckJ5LFxuICBxdWVyeSxcbiAgc3RhcnRBZnRlcixcbiAgd2hlcmUsXG59IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IHRlc3REYiB9IGZyb20gXCIuL2ZpcmViYXNlLXRlc3RcIjtcblxuY29uc3QgZmlyZWJhc2UgPSAoKCkgPT4ge1xuICBmdW5jdGlvbiBnZXRMYXN0VmlzaWJsZShxdWVyeVNuYXBzaG90KSB7XG4gICAgaWYgKHF1ZXJ5U25hcHNob3QpIHJldHVybiBxdWVyeVNuYXBzaG90LmRvY3NbcXVlcnlTbmFwc2hvdC5kb2NzLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SG9tZVF1ZXJ5KGRhdGFiYXNlLCBxdWVyeVNuYXBzaG90ID0gbnVsbCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25SZWYgPSBjb2xsZWN0aW9uKGRhdGFiYXNlLCBcImFsbC1pdGVtc1wiKTtcbiAgICBjb25zdCBsYXN0VmlzaWJsZSA9IGdldExhc3RWaXNpYmxlKHF1ZXJ5U25hcHNob3QpO1xuXG4gICAgbGV0IHEgPSBxdWVyeShjb2xsZWN0aW9uUmVmLCBvcmRlckJ5KFwidGltZXN0YW1wXCIsIFwiZGVzY1wiKSwgbGltaXQoMTApKTtcblxuICAgIGlmIChsYXN0VmlzaWJsZSkge1xuICAgICAgcSA9IHF1ZXJ5KFxuICAgICAgICBjb2xsZWN0aW9uUmVmLFxuICAgICAgICBvcmRlckJ5KFwidGltZXN0YW1wXCIsIFwiZGVzY1wiKSxcbiAgICAgICAgbGltaXQoMTApLFxuICAgICAgICBzdGFydEFmdGVyKGxhc3RWaXNpYmxlKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0RG9jcyhxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENhdGVnb3J5UXVlcnkoZGF0YWJhc2UsIGNhdGVnb3J5LCBxdWVyeVNuYXBzaG90ID0gbnVsbCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25SZWYgPSBjb2xsZWN0aW9uKGRhdGFiYXNlLCBcImFsbC1pdGVtc1wiKTtcbiAgICBjb25zdCBsYXN0VmlzaWJsZSA9IGdldExhc3RWaXNpYmxlKHF1ZXJ5U25hcHNob3QpO1xuXG4gICAgbGV0IHEgPSBxdWVyeShcbiAgICAgIGNvbGxlY3Rpb25SZWYsXG4gICAgICBvcmRlckJ5KFwidGltZXN0YW1wXCIsIFwiZGVzY1wiKSxcbiAgICAgIGxpbWl0KDEwKSxcbiAgICAgIHdoZXJlKFwiY2F0ZWdvcnlcIiwgXCI9PVwiLCBjYXRlZ29yeSlcbiAgICApO1xuXG4gICAgaWYgKGxhc3RWaXNpYmxlKSB7XG4gICAgICBxID0gcXVlcnkoXG4gICAgICAgIGNvbGxlY3Rpb25SZWYsXG4gICAgICAgIG9yZGVyQnkoXCJ0aW1lc3RhbXBcIiwgXCJkZXNjXCIpLFxuICAgICAgICBsaW1pdCgxMCksXG4gICAgICAgIHdoZXJlKFwiY2F0ZWdvcnlcIiwgXCI9PVwiLCBjYXRlZ29yeSksXG4gICAgICAgIHN0YXJ0QWZ0ZXIobGFzdFZpc2libGUpXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBnZXREb2NzKHEpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRIb21lUXVlcnksXG4gICAgZ2V0Q2F0ZWdvcnlRdWVyeSxcbiAgfTtcbn0pKCk7XG5cbmZpcmViYXNlXG4gIC5nZXRDYXRlZ29yeVF1ZXJ5KHRlc3REYiwgXCJhaVwiLCBudWxsKVxuICAudGhlbigocXVlcnlTbmFwc2hvdCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiRmlyc3Q6IFwiKTtcbiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gY29uc29sZS5sb2coZG9jLmRhdGEoKS50aXRsZSkpO1xuICAgIHJldHVybiBmaXJlYmFzZS5nZXRDYXRlZ29yeVF1ZXJ5KHRlc3REYiwgXCJhaVwiLCBxdWVyeVNuYXBzaG90KTtcbiAgfSlcbiAgLnRoZW4oKHF1ZXJ5U25hcHNob3QpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIlNlY29uZDogXCIpO1xuICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiBjb25zb2xlLmxvZyhkb2MuZGF0YSgpLnRpdGxlKSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsInN0ciIsIm91dCIsInAiLCJpIiwibGVuZ3RoIiwiYyIsImNoYXJDb2RlQXQiLCJiYXNlNjQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvciIsImluaXRfIiwiYnl0ZVRvQ2hhck1hcCIsIm91dHB1dCIsImJ5dGUxIiwiaGF2ZUJ5dGUyIiwiYnl0ZTIiLCJoYXZlQnl0ZTMiLCJieXRlMyIsIm91dEJ5dGUxIiwib3V0Qnl0ZTIiLCJvdXRCeXRlMyIsIm91dEJ5dGU0IiwicHVzaCIsImpvaW4iLCJlbmNvZGVTdHJpbmciLCJidG9hIiwiZGVjb2RlU3RyaW5nIiwiYnl0ZXMiLCJwb3MiLCJjMSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImMyIiwidSIsImMzIiwiYnl0ZUFycmF5VG9TdHJpbmciLCJkZWNvZGVTdHJpbmdUb0J5dGVBcnJheSIsImNoYXJUb0J5dGVNYXAiLCJjaGFyQXQiLCJieXRlNCIsIkRlY29kZUJhc2U2NFN0cmluZ0Vycm9yIiwiY29uc3RydWN0b3IiLCJzdXBlciIsImFyZ3VtZW50cyIsIm5hbWUiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsInJlcGxhY2UiLCJnZXREZWZhdWx0cyIsInNlbGYiLCJnZXRHbG9iYWwiLCJfX0ZJUkVCQVNFX0RFRkFVTFRTX18iLCJwcm9jZXNzIiwiZGVmYXVsdHNKc29uU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwiZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUiLCJkb2N1bWVudCIsIm1hdGNoIiwiY29va2llIiwiZGVjb2RlZCIsImNvbnNvbGUiLCJlcnJvciIsImJhc2U2NERlY29kZSIsImdldERlZmF1bHRzRnJvbUNvb2tpZSIsImluZm8iLCJnZXREZWZhdWx0QXBwQ29uZmlnIiwiX2EiLCJjb25maWciLCJEZWZlcnJlZCIsInJlamVjdCIsInJlc29sdmUiLCJwcm9taXNlIiwiUHJvbWlzZSIsIndyYXBDYWxsYmFjayIsImNhbGxiYWNrIiwidmFsdWUiLCJjYXRjaCIsIkZpcmViYXNlRXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImN1c3RvbURhdGEiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhcHR1cmVTdGFja1RyYWNlIiwiRXJyb3JGYWN0b3J5IiwiY3JlYXRlIiwic2VydmljZSIsInNlcnZpY2VOYW1lIiwiZXJyb3JzIiwiZGF0YSIsImZ1bGxDb2RlIiwidGVtcGxhdGUiLCJQQVRURVJOIiwiXyIsImtleSIsInJlcGxhY2VUZW1wbGF0ZSIsImZ1bGxNZXNzYWdlIiwiYSIsImIiLCJhS2V5cyIsImtleXMiLCJiS2V5cyIsImsiLCJpbmNsdWRlcyIsImFQcm9wIiwiYlByb3AiLCJpc09iamVjdCIsInRoaW5nIiwiX2RlbGVnYXRlIiwiQ29tcG9uZW50IiwiaW5zdGFuY2VGYWN0b3J5IiwidHlwZSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJvbkluc3RhbmNlQ3JlYXRlZCIsInNldEluc3RhbnRpYXRpb25Nb2RlIiwibW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIkRFRkFVTFRfRU5UUllfTkFNRSIsIlByb3ZpZGVyIiwiY29udGFpbmVyIiwiY29tcG9uZW50IiwiaW5zdGFuY2VzIiwiTWFwIiwiaW5zdGFuY2VzRGVmZXJyZWQiLCJpbnN0YW5jZXNPcHRpb25zIiwib25Jbml0Q2FsbGJhY2tzIiwiZ2V0IiwiaWRlbnRpZmllciIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpc0luaXRpYWxpemVkIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25zIiwib3B0aW9uYWwiLCJnZXRDb21wb25lbnQiLCJzZXRDb21wb25lbnQiLCJpc0NvbXBvbmVudEVhZ2VyIiwiaW5zdGFuY2VEZWZlcnJlZCIsImVudHJpZXMiLCJjbGVhckluc3RhbmNlIiwiZGVsZXRlIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwibWFwIiwiSU5URVJOQUwiLCJfZGVsZXRlIiwiaXNDb21wb25lbnRTZXQiLCJnZXRPcHRpb25zIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJvbkluaXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsIlNldCIsImFkZCIsImV4aXN0aW5nSW5zdGFuY2UiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJjYWxsYmFja3MiLCJ1bmRlZmluZWQiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJhZGRDb21wb25lbnQiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwiYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJnZXRQcm92aWRlcnMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiREVCVUciLCJWRVJCT1NFIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIlNJTEVOVCIsImRlZmF1bHRMb2dMZXZlbCIsIkNvbnNvbGVNZXRob2QiLCJkZWZhdWx0TG9nSGFuZGxlciIsImxvZ1R5cGUiLCJhcmdzIiwibG9nTGV2ZWwiLCJub3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRob2QiLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJsb2ciLCJ3YXJuIiwiaW5zdGFuY2VPZkFueSIsIm9iamVjdCIsImNvbnN0cnVjdG9ycyIsInNvbWUiLCJpZGJQcm94eWFibGVUeXBlcyIsImN1cnNvckFkdmFuY2VNZXRob2RzIiwiY3Vyc29yUmVxdWVzdE1hcCIsIldlYWtNYXAiLCJ0cmFuc2FjdGlvbkRvbmVNYXAiLCJ0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAiLCJ0cmFuc2Zvcm1DYWNoZSIsInJldmVyc2VUcmFuc2Zvcm1DYWNoZSIsImlkYlByb3h5VHJhcHMiLCJ0YXJnZXQiLCJwcm9wIiwicmVjZWl2ZXIiLCJJREJUcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJvYmplY3RTdG9yZSIsInRyYW5zZm9ybUNhY2hhYmxlVmFsdWUiLCJmdW5jIiwiSURCRGF0YWJhc2UiLCJ0cmFuc2FjdGlvbiIsIklEQkN1cnNvciIsImFkdmFuY2UiLCJjb250aW51ZSIsImNvbnRpbnVlUHJpbWFyeUtleSIsImFwcGx5IiwidW53cmFwIiwic3RvcmVOYW1lcyIsInR4IiwiY2FsbCIsInNvcnQiLCJkb25lIiwidW5saXN0ZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29tcGxldGUiLCJET01FeGNlcHRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uIiwiSURCT2JqZWN0U3RvcmUiLCJJREJJbmRleCIsIlByb3h5IiwiSURCUmVxdWVzdCIsInJlcXVlc3QiLCJzdWNjZXNzIiwicmVzdWx0IiwidGhlbiIsInByb21pc2lmeVJlcXVlc3QiLCJuZXdWYWx1ZSIsInJlYWRNZXRob2RzIiwid3JpdGVNZXRob2RzIiwiY2FjaGVkTWV0aG9kcyIsImdldE1ldGhvZCIsInRhcmdldEZ1bmNOYW1lIiwidXNlSW5kZXgiLCJpc1dyaXRlIiwiYXN5bmMiLCJzdG9yZU5hbWUiLCJzdG9yZSIsImluZGV4Iiwic2hpZnQiLCJvbGRUcmFwcyIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJsaWJyYXJ5IiwidmVyc2lvbiIsImxvZ1N0cmluZyIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiYXNzaWduIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsImlzRGVsZXRlZCIsImFwcE5hbWUiLCJpbml0aWFsaXplQXBwIiwicmF3Q29uZmlnIiwiZXhpc3RpbmdBcHAiLCJuZXdBcHAiLCJyZWdpc3RlclZlcnNpb24iLCJsaWJyYXJ5S2V5T3JOYW1lIiwidmFyaWFudCIsImxpYnJhcnlNaXNtYXRjaCIsInZlcnNpb25NaXNtYXRjaCIsIndhcm5pbmciLCJEQl9OQU1FIiwiREJfVkVSU0lPTiIsIlNUT1JFX05BTUUiLCJkYlByb21pc2UiLCJnZXREYlByb21pc2UiLCJibG9ja2VkIiwidXBncmFkZSIsImJsb2NraW5nIiwidGVybWluYXRlZCIsImluZGV4ZWREQiIsIm9wZW4iLCJvcGVuUHJvbWlzZSIsImV2ZW50Iiwib2xkVmVyc2lvbiIsIm5ld1ZlcnNpb24iLCJkYiIsIm9wZW5EQiIsImNyZWF0ZU9iamVjdFN0b3JlIiwib3JpZ2luYWxFcnJvck1lc3NhZ2UiLCJ3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQiIsImhlYXJ0YmVhdE9iamVjdCIsInB1dCIsImNvbXB1dGVLZXkiLCJpZGJHZXRFcnJvciIsImFwcElkIiwiSGVhcnRiZWF0U2VydmljZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlIiwiX3N0b3JhZ2UiLCJIZWFydGJlYXRTdG9yYWdlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlIiwicmVhZCIsInRyaWdnZXJIZWFydGJlYXQiLCJhZ2VudCIsImRhdGUiLCJnZXRVVENEYXRlU3RyaW5nIiwibGFzdFNlbnRIZWFydGJlYXREYXRlIiwiaGVhcnRiZWF0cyIsInNpbmdsZURhdGVIZWFydGJlYXQiLCJoYlRpbWVzdGFtcCIsInZhbHVlT2YiLCJvdmVyd3JpdGUiLCJnZXRIZWFydGJlYXRzSGVhZGVyIiwiaGVhcnRiZWF0c1RvU2VuZCIsInVuc2VudEVudHJpZXMiLCJoZWFydGJlYXRzQ2FjaGUiLCJtYXhTaXplIiwic2xpY2UiLCJoZWFydGJlYXRFbnRyeSIsImZpbmQiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwic3RyaW5naWZ5Iiwic3Vic3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwicHJlRXhpc3QiLCJEQl9DSEVDS19OQU1FIiwib25zdWNjZXNzIiwiY2xvc2UiLCJkZWxldGVEYXRhYmFzZSIsIm9udXBncmFkZW5lZWRlZCIsIm9uZXJyb3IiLCJpZGJIZWFydGJlYXRPYmplY3QiLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWwiLCJlc20iLCJnb29nIiwibCIsImFhIiwiY2EiLCJNYXRoIiwicmFuZG9tIiwiZGEiLCJlYSIsImJpbmQiLCJmYSIsImQiLCJ1bnNoaWZ0IiwicSIsInRvU3RyaW5nIiwiaW5kZXhPZiIsImhhIiwiciIsIiQiLCJhYyIsImYiLCJoIiwibiIsInYiLCJzIiwibyIsInNhIiwiTiIsImhhc093blByb3BlcnR5Iiwia2EiLCJtYSIsIm5hIiwidyIsImRlZmF1bHRQcmV2ZW50ZWQiLCJvYSIsImRlZmluZVByb3BlcnR5IiwieCIsInRlc3QiLCJwYSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInkiLCJxYSIsInphIiwiRGEiLCJ0YSIsInoiLCJ1YSIsInZhIiwid2EiLCJ0b0xvd2VyQ2FzZSIsInhhIiwieWEiLCJkb2N1bWVudE1vZGUiLCJBYSIsIkJhIiwiZXhlYyIsIkNhIiwicGFyc2VGbG9hdCIsInBhcnNlSW50IiwiRmEiLCJBIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbiIsInNjcmVlblkiLCJzY3JlZW5YIiwiY2xpZW50WSIsImNsaWVudFgiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJjdHJsS2V5Iiwic3RhdGUiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiR2EiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiSGEiLCJJYSIsIkphIiwibGlzdGVuZXIiLCJwcm94eSIsInNyYyIsImNhcHR1cmUiLCJsYSIsImlhIiwiS2EiLCJOYSIsIlBhIiwiUWEiLCJzcGxpdCIsIlJhIiwiU2EiLCJVYSIsInNwbGljZSIsIlRhIiwiVmEiLCJXYSIsIllhIiwib25jZSIsIlphIiwiJGEiLCJPIiwiYWIiLCJiYiIsImViIiwiY2IiLCJhdHRhY2hFdmVudCIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJQIiwiZmIiLCJnYiIsImRldGFjaEV2ZW50IiwiaGFuZGxlRXZlbnQiLCJCIiwiUyIsIkoiLCJDIiwiaWIiLCJjb25jYXQiLCJ0IiwiamIiLCJsYiIsIm1iIiwibmV4dCIsIm9iIiwiaiIsInBiIiwicmVzZXQiLCJxYiIsInJiIiwic2V0VGltZW91dCIsInNiIiwidGIiLCJ2YiIsInViIiwid2IiLCJ4YiIsImdhIiwiVCIsImNsZWFyVGltZW91dCIsInliIiwiTnVtYmVyIiwiemIiLCJtIiwic3RhcnQiLCJBYiIsIkJiIiwiQ2IiLCJEYiIsIkZiIiwiR2IiLCJEIiwiSmIiLCJFYSIsIkUiLCJMYiIsIk1iIiwiTmIiLCJPYiIsIlBiIiwiU1RBVF9FVkVOVCIsInN0YXQiLCJGIiwiUWIiLCJzaXplIiwiUmIiLCJTYiIsIk5PX0VSUk9SIiwiRWIiLCJUSU1FT1VUIiwiSWIiLCJUYiIsIktiIiwiJGIiLCJVYiIsIlZiIiwiV2IiLCJYYiIsIk9QRU4iLCJIYiIsIlliIiwiWmIiLCJiYyIsIlciLCJVIiwiY2MiLCJWIiwiSSIsIkwiLCJHIiwiWSIsIk0iLCJiYSIsIksiLCJkYyIsIlhNTEh0dHBSZXF1ZXN0IiwiZWMiLCJmYyIsImdjIiwiaGMiLCJpYyIsImpjIiwia2MiLCJsYyIsIm5iIiwib2MiLCJyYyIsInVjIiwicWMiLCJ2YyIsInBjIiwiaXNOYU4iLCJ3YyIsIm5jIiwiSCIsInNjIiwiYWJvcnQiLCJ4YyIsInljIiwiemMiLCJBYyIsIkJjIiwicmEiLCJMYSIsIk1hIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJDYyIsIkRjIiwiRWMiLCJGYyIsIkdjIiwiSGMiLCJLYyIsImZvckVhY2giLCJaIiwiSmMiLCJJYyIsImphIiwibWMiLCJUZXh0RGVjb2RlciIsImRlY29kZSIsInN0cmVhbSIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInRyaW0iLCJPYSIsInRjIiwiY2FuY2VsIiwiTGMiLCJSZWdFeHAiLCJOYyIsIk9jIiwiUGMiLCJRYyIsIlJjIiwiJGMiLCJYYyIsIlNjIiwiWWMiLCJmbG9vciIsImFicyIsImRlY29kZVVSSSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSSIsIlpjIiwiVGMiLCJlbmNvZGVVUklDb21wb25lbnQiLCJVYyIsIlZjIiwiV2MiLCJNYyIsImFkIiwiY2QiLCJkZCIsIlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllc0J5VHlwZSIsIm5leHRIb3BQcm90b2NvbCIsImVkIiwiZmQiLCJjbGVhciIsImdkIiwiaGQiLCJpZCIsImtkIiwib25sb2FkIiwib25hYm9ydCIsIm9udGltZW91dCIsImxkIiwibWQiLCJyZWFkeVN0YXRlIiwibmQiLCJzdGF0dXMiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZSIsInN0YXR1c1RleHQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJIZWFkZXJzIiwicWQiLCJYYSIsInBkIiwib2QiLCJzZW5kIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJib2R5IiwiZmV0Y2giLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJSZWFkYWJsZVN0cmVhbSIsImdldFJlYWRlciIsInRleHQiLCJVaW50OEFycmF5Iiwic2V0UmVxdWVzdEhlYWRlciIsImFwcGVuZCIsInJkIiwic2QiLCJ0ZCIsInVkIiwidmQiLCJ5ZCIsInpkIiwiQWQiLCJsb2NhdGlvbiIsInByb3RvY29sIiwid2QiLCJtb3pSZXNwb25zZUFycmF5QnVmZmVyIiwiQmQiLCJDZCIsIkRkIiwiaW50ZXJuYWxDaGFubmVsUGFyYW1zIiwiRWQiLCJ4bWxIdHRwRmFjdG9yeSIsInVzZUZldGNoU3RyZWFtcyIsInN1cHBvcnRzQ3Jvc3NEb21haW5YaHIiLCJjb25jdXJyZW50UmVxdWVzdExpbWl0IiwiZmFzdEhhbmRzaGFrZSIsImVuY29kZUluaXRNZXNzYWdlSGVhZGVycyIsImZvcmNlTG9uZ1BvbGxpbmciLCJkZXRlY3RCdWZmZXJpbmdQcm94eSIsImxvbmdQb2xsaW5nVGltZW91dCIsIkZkIiwiR2QiLCJzZW5kQmVhY29uIiwiSW1hZ2UiLCJIZCIsIkxkIiwiS2QiLCJyb3VuZCIsIm1pbiIsIm1heCIsIkpkIiwiTWQiLCJJZCIsImlzQWN0aXZlIiwiamQiLCJob3N0bmFtZSIsInBvcnQiLCJOZCIsIk9kIiwiUSIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJtZXNzYWdlSGVhZGVycyIsImNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQiLCJpbml0TWVzc2FnZUhlYWRlcnMiLCJtZXNzYWdlQ29udGVudFR5cGUiLCJzZW5kUmF3SnNvbiIsImh0dHBTZXNzaW9uSWRQYXJhbSIsIlIiLCJQZCIsIl9faGVhZGVyc19fIiwic3RhdHVzQ29kZSIsIl9fc3RhdHVzX18iLCJfX3NtX18iLCJRZCIsImJsb2NrU2l6ZSIsIlNkIiwidG9VcHBlckNhc2UiLCJnZXRQcm90b3R5cGVPZiIsIkZvcm1EYXRhIiwid2l0aENyZWRlbnRpYWxzIiwidGltZW91dCIsInhkIiwia2IiLCJfX2RhdGFfXyIsIlRkIiwiaXNGaW5pdGUiLCJVZCIsIldkIiwiWGQiLCJYIiwiWmQiLCIkZCIsImFlIiwiWWQiLCJiZSIsImNlaWwiLCJMTjIiLCJwb3ciLCJhbmQiLCJvciIsInhvciIsImNyZWF0ZVdlYkNoYW5uZWwiLCJIVFRQX0VSUk9SIiwiQ09NUExFVEUiLCJFdmVudFR5cGUiLCJDTE9TRSIsIk1FU1NBR0UiLCJsaXN0ZW4iLCJsaXN0ZW5PbmNlIiwiZ2V0TGFzdEVycm9yIiwiZ2V0TGFzdEVycm9yQ29kZSIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlSnNvbiIsImdldFJlc3BvbnNlVGV4dCIsInNldFdpdGhDcmVkZW50aWFscyIsImRpZ2VzdCIsInVwZGF0ZSIsIm11bHRpcGx5IiwibW9kdWxvIiwiY29tcGFyZSIsInRvTnVtYmVyIiwiZ2V0Qml0cyIsImZyb21OdW1iZXIiLCJmcm9tU3RyaW5nIiwiVmQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiZ2V0U3RhdEV2ZW50VGFyZ2V0IiwiRXJyb3JDb2RlIiwiRXZlbnQiLCJTdGF0IiwiUFJPWFkiLCJOT1BST1hZIiwiV2ViQ2hhbm5lbCIsIkZldGNoWG1sSHR0cEZhY3RvcnkiLCJYaHJJbyIsIk1kNSIsIkludGVnZXIiLCJVc2VyIiwidWlkIiwiaXNBdXRoZW50aWNhdGVkIiwidG9LZXkiLCJpc0VxdWFsIiwiVU5BVVRIRU5USUNBVEVEIiwiR09PR0xFX0NSRURFTlRJQUxTIiwiRklSU1RfUEFSVFkiLCJNT0NLX1VTRVIiLCJfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwiLCJfX1BSSVZBVEVfbG9nRGVidWciLCJfX1BSSVZBVEVfYXJnVG9TdHJpbmciLCJfX1BSSVZBVEVfbG9nRXJyb3IiLCJfX1BSSVZBVEVfbG9nV2FybiIsImZhaWwiLCJfX1BSSVZBVEVfaGFyZEFzc2VydCIsIl9fUFJJVkFURV9kZWJ1Z0Nhc3QiLCJPSyIsIkNBTkNFTExFRCIsIlVOS05PV04iLCJJTlZBTElEX0FSR1VNRU5UIiwiREVBRExJTkVfRVhDRUVERUQiLCJOT1RfRk9VTkQiLCJBTFJFQURZX0VYSVNUUyIsIlBFUk1JU1NJT05fREVOSUVEIiwiUkVTT1VSQ0VfRVhIQVVTVEVEIiwiRkFJTEVEX1BSRUNPTkRJVElPTiIsIkFCT1JURUQiLCJPVVRfT0ZfUkFOR0UiLCJVTklNUExFTUVOVEVEIiwiVU5BVkFJTEFCTEUiLCJEQVRBX0xPU1MiLCJGaXJlc3RvcmVFcnJvciIsIl9fUFJJVkFURV9EZWZlcnJlZCIsIl9fUFJJVkFURV9PQXV0aFRva2VuIiwidXNlciIsIl9fUFJJVkFURV9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiZ2V0VG9rZW4iLCJpbnZhbGlkYXRlVG9rZW4iLCJlbnF1ZXVlUmV0cnlhYmxlIiwic2h1dGRvd24iLCJfX1BSSVZBVEVfRW11bGF0b3JBdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsInRva2VuIiwiY2hhbmdlTGlzdGVuZXIiLCJfX1BSSVZBVEVfRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsImN1cnJlbnRVc2VyIiwiZm9yY2VSZWZyZXNoIiwiYXV0aCIsIl9fUFJJVkFURV9ndWFyZGVkQ2hhbmdlTGlzdGVuZXIiLCJfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4iLCJfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoIiwiYWRkQXV0aFRva2VuTGlzdGVuZXIiLCJhY2Nlc3NUb2tlbiIsInJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyIiwiZ2V0VWlkIiwiX19QUklWQVRFX0ZpcnN0UGFydHlUb2tlbiIsIl9fUFJJVkFURV9GaXJzdFBhcnR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIiLCJBcHBDaGVja1Rva2VuIiwiX19QUklWQVRFX0ZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyIiwiYXBwQ2hlY2siLCJvblRva2VuQ2hhbmdlZCIsIl9fUFJJVkFURV9yZWdpc3RlckFwcENoZWNrIiwiYWRkVG9rZW5MaXN0ZW5lciIsInJlbW92ZVRva2VuTGlzdGVuZXIiLCJfX1BSSVZBVEVfcmFuZG9tQnl0ZXMiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsIl9fUFJJVkFURV9BdXRvSWQiLCJfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciIsIl9fUFJJVkFURV9hcnJheUVxdWFscyIsImV2ZXJ5IiwiVGltZXN0YW1wIiwic2Vjb25kcyIsIm5hbm9zZWNvbmRzIiwiZnJvbU1pbGxpcyIsImZyb21EYXRlIiwiZ2V0VGltZSIsInRvRGF0ZSIsInRvTWlsbGlzIiwiX2NvbXBhcmVUbyIsInRvSlNPTiIsInBhZFN0YXJ0IiwiU25hcHNob3RWZXJzaW9uIiwidGltZXN0YW1wIiwiZnJvbVRpbWVzdGFtcCIsImNvbXBhcmVUbyIsInRvTWljcm9zZWNvbmRzIiwidG9UaW1lc3RhbXAiLCJCYXNlUGF0aCIsInNlZ21lbnRzIiwib2Zmc2V0IiwibGVuIiwiY29tcGFyYXRvciIsImNoaWxkIiwibGltaXQiLCJjb25zdHJ1Y3QiLCJwb3BGaXJzdCIsInBvcExhc3QiLCJmaXJzdFNlZ21lbnQiLCJsYXN0U2VnbWVudCIsImlzRW1wdHkiLCJpc1ByZWZpeE9mIiwiaXNJbW1lZGlhdGVQYXJlbnRPZiIsInRvQXJyYXkiLCJSZXNvdXJjZVBhdGgiLCJjYW5vbmljYWxTdHJpbmciLCJlbXB0eVBhdGgiLCJGaWVsZFBhdGgkMSIsImlzVmFsaWRJZGVudGlmaWVyIiwiaXNLZXlGaWVsZCIsImtleUZpZWxkIiwiZnJvbVNlcnZlckZvcm1hdCIsIl9fUFJJVkFURV9hZGRDdXJyZW50U2VnbWVudCIsIkRvY3VtZW50S2V5IiwicGF0aCIsImZyb21QYXRoIiwiZnJvbU5hbWUiLCJlbXB0eSIsImNvbGxlY3Rpb25Hcm91cCIsImhhc0NvbGxlY3Rpb25JZCIsImdldENvbGxlY3Rpb25Hcm91cCIsImdldENvbGxlY3Rpb25QYXRoIiwiaXNEb2N1bWVudEtleSIsImZyb21TZWdtZW50cyIsIl9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudCIsIkluZGV4T2Zmc2V0IiwicmVhZFRpbWUiLCJkb2N1bWVudEtleSIsImxhcmdlc3RCYXRjaElkIiwiX19QUklWQVRFX2luZGV4T2Zmc2V0Q29tcGFyYXRvciIsIlBlcnNpc3RlbmNlVHJhbnNhY3Rpb24iLCJvbkNvbW1pdHRlZExpc3RlbmVycyIsImFkZE9uQ29tbWl0dGVkTGlzdGVuZXIiLCJyYWlzZU9uQ29tbWl0dGVkRXZlbnQiLCJfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzIiwiUGVyc2lzdGVuY2VQcm9taXNlIiwibmV4dENhbGxiYWNrIiwiY2F0Y2hDYWxsYmFjayIsImlzRG9uZSIsImNhbGxiYWNrQXR0YWNoZWQiLCJ3cmFwRmFpbHVyZSIsIndyYXBTdWNjZXNzIiwidG9Qcm9taXNlIiwid3JhcFVzZXJGdW5jdGlvbiIsIndhaXRGb3IiLCJtYXBBcnJheSIsImRvV2hpbGUiLCJfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yIiwiX19QUklWQVRFX0xpc3RlblNlcXVlbmNlIiwicHJldmlvdXNWYWx1ZSIsInNlcXVlbmNlTnVtYmVySGFuZGxlciIsIm9lIiwiX2UiLCJ3cml0ZVNlcXVlbmNlTnVtYmVyIiwiX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkIiwiX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvIiwiX19QUklWQVRFX29iamVjdFNpemUiLCJTb3J0ZWRNYXAiLCJyb290IiwiTExSQk5vZGUiLCJFTVBUWSIsImluc2VydCIsImNvcHkiLCJCTEFDSyIsInJlbW92ZSIsImxlZnQiLCJyaWdodCIsIm1pbktleSIsIm1heEtleSIsImlub3JkZXJUcmF2ZXJzYWwiLCJyZXZlcnNlVHJhdmVyc2FsIiwiZ2V0SXRlcmF0b3IiLCJTb3J0ZWRNYXBJdGVyYXRvciIsImdldEl0ZXJhdG9yRnJvbSIsImdldFJldmVyc2VJdGVyYXRvciIsImdldFJldmVyc2VJdGVyYXRvckZyb20iLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJnZXROZXh0IiwiaGFzTmV4dCIsInBlZWsiLCJjb2xvciIsIlJFRCIsImZpeFVwIiwicmVtb3ZlTWluIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInJvdGF0ZVJpZ2h0IiwibW92ZVJlZFJpZ2h0Iiwicm90YXRlTGVmdCIsImNvbG9yRmxpcCIsImNoZWNrTWF4RGVwdGgiLCJjaGVjayIsIlNvcnRlZFNldCIsImZpcnN0IiwibGFzdCIsImZvckVhY2hJblJhbmdlIiwiZm9yRWFjaFdoaWxlIiwiZmlyc3RBZnRlck9yRXF1YWwiLCJTb3J0ZWRTZXRJdGVyYXRvciIsInVuaW9uV2l0aCIsIml0ZXIiLCJGaWVsZE1hc2siLCJmaWVsZHMiLCJjb3ZlcnMiLCJfX1BSSVZBVEVfQmFzZTY0RGVjb2RlRXJyb3IiLCJCeXRlU3RyaW5nIiwiYmluYXJ5U3RyaW5nIiwiZnJvbUJhc2U2NFN0cmluZyIsImZyb21VaW50OEFycmF5IiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJ0b0Jhc2U2NCIsInRvVWludDhBcnJheSIsImFwcHJveGltYXRlQnl0ZVNpemUiLCJFTVBUWV9CWVRFX1NUUklORyIsImVlIiwiX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcCIsInN1YnN0ciIsIm5hbm9zIiwiX19QUklWQVRFX25vcm1hbGl6ZU51bWJlciIsIl9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nIiwiX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wIiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwiX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUiLCJfX2xvY2FsX3dyaXRlX3RpbWVfXyIsInRpbWVzdGFtcFZhbHVlIiwiRGF0YWJhc2VJbmZvIiwiZGF0YWJhc2VJZCIsInBlcnNpc3RlbmNlS2V5IiwiaG9zdCIsInNzbCIsImF1dG9EZXRlY3RMb25nUG9sbGluZyIsImxvbmdQb2xsaW5nT3B0aW9ucyIsIkRhdGFiYXNlSWQiLCJwcm9qZWN0SWQiLCJkYXRhYmFzZSIsImlzRGVmYXVsdERhdGFiYXNlIiwidGUiLCJfX1BSSVZBVEVfdHlwZU9yZGVyIiwiX19QUklWQVRFX2lzTWF4VmFsdWUiLCJfX1BSSVZBVEVfdmFsdWVFcXVhbHMiLCJib29sZWFuVmFsdWUiLCJieXRlc1ZhbHVlIiwicmVmZXJlbmNlVmFsdWUiLCJnZW9Qb2ludFZhbHVlIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJpbnRlZ2VyVmFsdWUiLCJkb3VibGVWYWx1ZSIsImFycmF5VmFsdWUiLCJfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zIiwiX19QUklWQVRFX3ZhbHVlQ29tcGFyZSIsIl9fUFJJVkFURV9jb21wYXJlVGltZXN0YW1wcyIsImNhbm9uaWNhbElkIiwiX19QUklWQVRFX2Nhbm9uaWZ5VmFsdWUiLCJfX1BSSVZBVEVfcmVmVmFsdWUiLCJpc0ludGVnZXIiLCJfX1BSSVZBVEVfaXNOdWxsVmFsdWUiLCJfX1BSSVZBVEVfaXNOYW5WYWx1ZSIsIl9fUFJJVkFURV9pc01hcFZhbHVlIiwiX19QUklWQVRFX2RlZXBDbG9uZSIsIk9iamVjdFZhbHVlIiwiZmllbGQiLCJnZXRGaWVsZHNNYXAiLCJzZXRBbGwiLCJhcHBseUNoYW5nZXMiLCJjbG9uZSIsIk11dGFibGVEb2N1bWVudCIsImRvY3VtZW50VHlwZSIsImNyZWF0ZVRpbWUiLCJkb2N1bWVudFN0YXRlIiwibmV3SW52YWxpZERvY3VtZW50IiwibmV3Rm91bmREb2N1bWVudCIsIm5ld05vRG9jdW1lbnQiLCJuZXdVbmtub3duRG9jdW1lbnQiLCJjb252ZXJ0VG9Gb3VuZERvY3VtZW50IiwiY29udmVydFRvTm9Eb2N1bWVudCIsImNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCIsInNldEhhc0NvbW1pdHRlZE11dGF0aW9ucyIsInNldEhhc0xvY2FsTXV0YXRpb25zIiwic2V0UmVhZFRpbWUiLCJoYXNMb2NhbE11dGF0aW9ucyIsImhhc0NvbW1pdHRlZE11dGF0aW9ucyIsImhhc1BlbmRpbmdXcml0ZXMiLCJpc1ZhbGlkRG9jdW1lbnQiLCJpc0ZvdW5kRG9jdW1lbnQiLCJpc05vRG9jdW1lbnQiLCJpc1Vua25vd25Eb2N1bWVudCIsIm11dGFibGVDb3B5IiwiQm91bmQiLCJwb3NpdGlvbiIsImluY2x1c2l2ZSIsIl9fUFJJVkFURV9ib3VuZENvbXBhcmVUb0RvY3VtZW50IiwiZGlyIiwiX19QUklWQVRFX2JvdW5kRXF1YWxzIiwiT3JkZXJCeSIsIl9fUFJJVkFURV9vcmRlckJ5RXF1YWxzIiwiRmlsdGVyIiwiRmllbGRGaWx0ZXIiLCJvcCIsImNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIiLCJfX1BSSVZBVEVfS2V5RmllbGRGaWx0ZXIiLCJfX1BSSVZBVEVfQXJyYXlDb250YWluc0ZpbHRlciIsIl9fUFJJVkFURV9JbkZpbHRlciIsIl9fUFJJVkFURV9Ob3RJbkZpbHRlciIsIl9fUFJJVkFURV9BcnJheUNvbnRhaW5zQW55RmlsdGVyIiwiX19QUklWQVRFX0tleUZpZWxkSW5GaWx0ZXIiLCJfX1BSSVZBVEVfS2V5RmllbGROb3RJbkZpbHRlciIsIm1hdGNoZXMiLCJtYXRjaGVzQ29tcGFyaXNvbiIsImlzSW5lcXVhbGl0eSIsImdldEZsYXR0ZW5lZEZpbHRlcnMiLCJnZXRGaWx0ZXJzIiwiZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQiLCJDb21wb3NpdGVGaWx0ZXIiLCJmaWx0ZXJzIiwiY2UiLCJfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbiIsInJlZHVjZSIsImxlIiwiX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdENvbmp1bmN0aW9uIiwiX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdCIsIl9fUFJJVkFURV9jYW5vbmlmeUZpbHRlciIsIl9fUFJJVkFURV9maWx0ZXJFcXVhbHMiLCJfX1BSSVZBVEVfc3RyaW5naWZ5RmlsdGVyIiwiX19QUklWQVRFX2V4dHJhY3REb2N1bWVudEtleXNGcm9tQXJyYXlWYWx1ZSIsIm51bGxWYWx1ZSIsIl9fUFJJVkFURV9UYXJnZXRJbXBsIiwib3JkZXJCeSIsInN0YXJ0QXQiLCJlbmRBdCIsImhlIiwiX19QUklWQVRFX25ld1RhcmdldCIsIl9fUFJJVkFURV9jYW5vbmlmeVRhcmdldCIsIl9fUFJJVkFURV90YXJnZXRFcXVhbHMiLCJfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldCIsIl9fUFJJVkFURV9RdWVyeUltcGwiLCJleHBsaWNpdE9yZGVyQnkiLCJsaW1pdFR5cGUiLCJQZSIsIkllIiwiZGUiLCJfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoIiwiX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc0FsbERvY3VtZW50cyIsIl9fUFJJVkFURV9nZXRGaXJzdE9yZGVyQnlGaWVsZCIsIl9fUFJJVkFURV9nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQiLCJfX1BSSVZBVEVfaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSIsIl9fUFJJVkFURV9xdWVyeU5vcm1hbGl6ZWRPcmRlckJ5IiwiX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQiLCJfX1BSSVZBVEVfX3F1ZXJ5VG9UYXJnZXQiLCJfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRGaWx0ZXIiLCJfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQiLCJfX1BSSVZBVEVfcXVlcnlFcXVhbHMiLCJfX1BSSVZBVEVfY2Fub25pZnlRdWVyeSIsIl9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSIsIl9fUFJJVkFURV9xdWVyeU1hdGNoZXMiLCJfX1BSSVZBVEVfbmV3UXVlcnlDb21wYXJhdG9yIiwiX19QUklWQVRFX2NvbXBhcmVEb2NzIiwiT2JqZWN0TWFwIiwibWFwS2V5Rm4iLCJlcXVhbHNGbiIsImlubmVyIiwiaW5uZXJTaXplIiwicmUiLCJfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwIiwiaWUiLCJkb2N1bWVudE1hcCIsIl9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwIiwib3ZlcmxheWVkRG9jdW1lbnQiLCJfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCIsIl9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCIsIl9fUFJJVkFURV9uZXdNdXRhdGlvbk1hcCIsIl9fUFJJVkFURV9kb2N1bWVudEtleVNldCIsIl9fUFJJVkFURV90b0RvdWJsZSIsInVzZVByb3RvM0pzb24iLCJfX1BSSVZBVEVfdG9JbnRlZ2VyIiwiTUFYX1NBRkVfSU5URUdFUiIsIk1JTl9TQUZFX0lOVEVHRVIiLCJpc1NhZmVJbnRlZ2VyIiwiVHJhbnNmb3JtT3BlcmF0aW9uIiwiX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9Mb2NhbFZpZXciLCJfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtIiwiX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfYXBwbHlBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIiwiX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uIiwiX19QUklWQVRFX2FwcGx5QXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiIsIl9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlIiwiYXNOdW1iZXIiLCJUZSIsInNlcmlhbGl6ZXIiLCJfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub1JlbW90ZURvY3VtZW50IiwiZWxlbWVudHMiLCJfX1BSSVZBVEVfY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkiLCJQcmVjb25kaXRpb24iLCJ1cGRhdGVUaW1lIiwiZXhpc3RzIiwibm9uZSIsImlzTm9uZSIsIl9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQiLCJNdXRhdGlvbiIsIl9fUFJJVkFURV9jYWxjdWxhdGVPdmVybGF5TXV0YXRpb24iLCJfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24iLCJfX1BSSVZBVEVfU2V0TXV0YXRpb24iLCJfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbiIsIl9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudCIsIl9fUFJJVkFURV9zZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzIiwiZmllbGRUcmFuc2Zvcm1zIiwidHJhbnNmb3JtUmVzdWx0cyIsInByZWNvbmRpdGlvbiIsIl9fUFJJVkFURV9nZXRQYXRjaCIsIl9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXciLCJfX1BSSVZBVEVfbG9jYWxUcmFuc2Zvcm1SZXN1bHRzIiwiZmllbGRNYXNrIiwiX19QUklWQVRFX211dGF0aW9uRXF1YWxzIiwidHJhbnNmb3JtIiwiX19QUklWQVRFX2ZpZWxkVHJhbnNmb3JtRXF1YWxzIiwiZ2V0RmllbGRNYXNrIiwiTXV0YXRpb25CYXRjaCIsImJhdGNoSWQiLCJsb2NhbFdyaXRlVGltZSIsImJhc2VNdXRhdGlvbnMiLCJtdXRhdGlvbnMiLCJhcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJtdXRhdGlvblJlc3VsdHMiLCJhcHBseVRvTG9jYWxWaWV3IiwiYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQiLCJtdXRhdGVkRmllbGRzIiwiT3ZlcmxheSIsIm11dGF0aW9uIiwiZ2V0S2V5IiwiRXhpc3RlbmNlRmlsdGVyIiwiY291bnQiLCJ1bmNoYW5nZWROYW1lcyIsInVlIiwiX19QUklWQVRFX21hcENvZGVGcm9tUnBjQ29kZSIsIl9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsIl9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzIiwiRGF0YVZpZXciLCJidWZmZXIiLCJnZXRVaW50MzIiLCJCbG9vbUZpbHRlciIsImJpdG1hcCIsInBhZGRpbmciLCJoYXNoQ291bnQiLCJfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciIsIkFlIiwiUmUiLCJWZSIsIm1lIiwibWlnaHRDb250YWluIiwiZmUiLCJSZW1vdGVFdmVudCIsInNuYXBzaG90VmVyc2lvbiIsInRhcmdldENoYW5nZXMiLCJ0YXJnZXRNaXNtYXRjaGVzIiwiZG9jdW1lbnRVcGRhdGVzIiwicmVzb2x2ZWRMaW1ib0RvY3VtZW50cyIsImNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlIiwiVGFyZ2V0Q2hhbmdlIiwiY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlIiwicmVzdW1lVG9rZW4iLCJjdXJyZW50IiwiYWRkZWREb2N1bWVudHMiLCJtb2RpZmllZERvY3VtZW50cyIsInJlbW92ZWREb2N1bWVudHMiLCJfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZSIsImdlIiwicmVtb3ZlZFRhcmdldElkcyIsInBlIiwiX19QUklWQVRFX0V4aXN0ZW5jZUZpbHRlckNoYW5nZSIsInRhcmdldElkIiwieWUiLCJfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2UiLCJ0YXJnZXRJZHMiLCJjYXVzZSIsIl9fUFJJVkFURV9UYXJnZXRTdGF0ZSIsIndlIiwiU2UiLCJfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwIiwiRGUiLCJDZSIsInZlIiwiRmUiLCJNZSIsInhlIiwiT2UiLCJOZSIsIkJlIiwiTGUiLCJrZSIsInFlIiwiX19QUklWQVRFX1dhdGNoQ2hhbmdlQWdncmVnYXRvciIsIlFlIiwiS2UiLCIkZSIsIlVlIiwiX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwIiwiV2UiLCJHZSIsInplIiwiamUiLCJIZSIsImZvckVhY2hUYXJnZXQiLCJKZSIsIlllIiwicmVtb3ZlVGFyZ2V0IiwiWmUiLCJYZSIsImV0IiwidHQiLCJudCIsInJ0IiwiYml0cyIsIm90IiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsInN0IiwiX3QiLCJ1dCIsInB1cnBvc2UiLCJjdCIsImx0IiwiYXNjIiwiZGVzYyIsImluIiwiSnNvblByb3RvU2VyaWFsaXplciIsIl9fUFJJVkFURV90b0ludDMyUHJvdG8iLCJfX1BSSVZBVEVfdG9CeXRlcyIsIl9fUFJJVkFURV9mcm9tVmVyc2lvbiIsIl9fUFJJVkFURV90b1Jlc291cmNlTmFtZSIsIl9fUFJJVkFURV9mcm9tUmVzb3VyY2VOYW1lIiwiX19QUklWQVRFX2lzVmFsaWRSZXNvdXJjZU5hbWUiLCJfX1BSSVZBVEVfZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUiLCJfX1BSSVZBVEVfdG9RdWVyeVBhdGgiLCJfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQiLCJfX1BSSVZBVEVfdG9Eb2N1bWVudHNUYXJnZXQiLCJkb2N1bWVudHMiLCJfX1BSSVZBVEVfdG9RdWVyeVRhcmdldCIsInN0cnVjdHVyZWRRdWVyeSIsInBhcmVudCIsImNvbGxlY3Rpb25JZCIsImFsbERlc2NlbmRhbnRzIiwiX19QUklWQVRFX3RvRmlsdGVyIiwid2hlcmUiLCJfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UiLCJkaXJlY3Rpb24iLCJfX1BSSVZBVEVfdG9EaXJlY3Rpb24iLCJiZWZvcmUiLCJfX1BSSVZBVEVfY29udmVydFF1ZXJ5VGFyZ2V0VG9RdWVyeSIsIl9fUFJJVkFURV9mcm9tUXVlcnlQYXRoIiwiX19QUklWQVRFX2Zyb21GaWx0ZXIiLCJfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZSIsIl9fUFJJVkFURV9uZXdRdWVyeSIsInVuYXJ5RmlsdGVyIiwiTmFOIiwiZmllbGRGaWx0ZXIiLCJjb21wb3NpdGVGaWx0ZXIiLCJfX1BSSVZBVEVfdG9PcGVyYXRvck5hbWUiLCJfX1BSSVZBVEVfdG9Db21wb3NpdGVPcGVyYXRvck5hbWUiLCJmaWVsZFBhdGgiLCJUYXJnZXREYXRhIiwic2VxdWVuY2VOdW1iZXIiLCJsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiZXhwZWN0ZWRDb3VudCIsIndpdGhTZXF1ZW5jZU51bWJlciIsIndpdGhSZXN1bWVUb2tlbiIsIndpdGhFeHBlY3RlZENvdW50Iiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJfX1BSSVZBVEVfTG9jYWxTZXJpYWxpemVyIiwiaHQiLCJfX1BSSVZBVEVfZnJvbUJ1bmRsZWRRdWVyeSIsIl9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyIiwiZHQiLCJUdCIsIkV0IiwiQXQiLCJSdCIsIlZ0IiwiZnQiLCJndCIsInl0Iiwid3QiLCJTdCIsImJ0IiwiRHQiLCJDdCIsIl9fUFJJVkFURV9NZW1vcnlJbmRleE1hbmFnZXIiLCJhbiIsIl9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgiLCJhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCIsImdldENvbGxlY3Rpb25QYXJlbnRzIiwiZ2V0RW50cmllcyIsImFkZEZpZWxkSW5kZXgiLCJkZWxldGVGaWVsZEluZGV4IiwiZGVsZXRlQWxsRmllbGRJbmRleGVzIiwiY3JlYXRlVGFyZ2V0SW5kZXhlcyIsImdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0IiwiZ2V0SW5kZXhUeXBlIiwiZ2V0RmllbGRJbmRleGVzIiwiZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlIiwiZ2V0TWluT2Zmc2V0IiwiZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cCIsInVwZGF0ZUNvbGxlY3Rpb25Hcm91cCIsInVwZGF0ZUluZGV4RW50cmllcyIsIkxydVBhcmFtcyIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIndpdGhDYWNoZVNpemUiLCJERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSIsIkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCIsIkRFRkFVTFQiLCJESVNBQkxFRCIsIl9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvciIsIk5uIiwiQm4iLCJMbiIsIlJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIiwiY2hhbmdlcyIsImNoYW5nZXNBcHBsaWVkIiwiYWRkRW50cnkiLCJhc3NlcnROb3RBcHBsaWVkIiwicmVtb3ZlRW50cnkiLCJnZXRFbnRyeSIsImdldEZyb21DYWNoZSIsImdldEFsbEZyb21DYWNoZSIsIk92ZXJsYXllZERvY3VtZW50IiwiTG9jYWxEb2N1bWVudHNWaWV3IiwicmVtb3RlRG9jdW1lbnRDYWNoZSIsIm11dGF0aW9uUXVldWUiLCJkb2N1bWVudE92ZXJsYXlDYWNoZSIsImluZGV4TWFuYWdlciIsImdldERvY3VtZW50IiwiZ2V0T3ZlcmxheSIsImdldERvY3VtZW50cyIsImdldExvY2FsVmlld09mRG9jdW1lbnRzIiwicG9wdWxhdGVPdmVybGF5cyIsImNvbXB1dGVWaWV3cyIsImdldE92ZXJsYXllZERvY3VtZW50cyIsImdldE92ZXJsYXlzIiwicmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXMiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMiLCJzYXZlT3ZlcmxheXMiLCJyZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyIsImdldERvY3VtZW50c01hdGNoaW5nUXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkiLCJnZXROZXh0RG9jdW1lbnRzIiwiZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwIiwiZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uIiwiX19QUklWQVRFX01lbW9yeUJ1bmRsZUNhY2hlIiwibHIiLCJociIsImdldEJ1bmRsZU1ldGFkYXRhIiwic2F2ZUJ1bmRsZU1ldGFkYXRhIiwiZ2V0TmFtZWRRdWVyeSIsInNhdmVOYW1lZFF1ZXJ5IiwicXVlcnkiLCJidW5kbGVkUXVlcnkiLCJfX1BSSVZBVEVfTWVtb3J5RG9jdW1lbnRPdmVybGF5Q2FjaGUiLCJvdmVybGF5cyIsIlByIiwiSXQiLCJyZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQiLCJfX1BSSVZBVEVfUmVmZXJlbmNlU2V0IiwiSXIiLCJfX1BSSVZBVEVfRG9jUmVmZXJlbmNlIiwiZHIiLCJUciIsIkVyIiwiYWRkUmVmZXJlbmNlIiwiQXIiLCJyZW1vdmVSZWZlcmVuY2UiLCJSciIsIlZyIiwibXIiLCJnciIsInByIiwiY29udGFpbnNLZXkiLCJ5ciIsIl9fUFJJVkFURV9NZW1vcnlNdXRhdGlvblF1ZXVlIiwicmVmZXJlbmNlRGVsZWdhdGUiLCJ3ciIsIlNyIiwiY2hlY2tFbXB0eSIsImFkZE11dGF0aW9uQmF0Y2giLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwiYnIiLCJnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCIsIkRyIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsImdldEFsbE11dGF0aW9uQmF0Y2hlcyIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5IiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJDciIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwicmVtb3ZlTXV0YXRpb25CYXRjaCIsInZyIiwibWFya1BvdGVudGlhbGx5T3JwaGFuZWQiLCJ4biIsInBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrIiwiX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGVJbXBsIiwiRnIiLCJkb2NzIiwic2V0SW5kZXhNYW5hZ2VyIiwiTXIiLCJuZXdDaGFuZ2VCdWZmZXIiLCJfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIiLCJnZXRTaXplIiwidXIiLCJfX1BSSVZBVEVfTWVtb3J5VGFyZ2V0Q2FjaGUiLCJwZXJzaXN0ZW5jZSIsIk9yIiwibGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImhpZ2hlc3RUYXJnZXRJZCIsIk5yIiwiQnIiLCJ0YXJnZXRDb3VudCIsIkxyIiwiZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJRbiIsImFkZFRhcmdldERhdGEiLCJ1cGRhdGVUYXJnZXREYXRhIiwicmVtb3ZlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldHMiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsImdldFRhcmdldENvdW50IiwiZ2V0VGFyZ2V0RGF0YSIsImFkZE1hdGNoaW5nS2V5cyIsInJlbW92ZU1hdGNoaW5nS2V5cyIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlIiwia3IiLCJxciIsIlFyIiwiS3IiLCIkciIsIlVyIiwic3RhcnRlZCIsInNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyIiwic2V0TmV0d29ya0VuYWJsZWQiLCJnZXRJbmRleE1hbmFnZXIiLCJnZXREb2N1bWVudE92ZXJsYXlDYWNoZSIsImdldE11dGF0aW9uUXVldWUiLCJnZXRUYXJnZXRDYWNoZSIsImdldFJlbW90ZURvY3VtZW50Q2FjaGUiLCJnZXRCdW5kbGVDYWNoZSIsInJ1blRyYW5zYWN0aW9uIiwiX19QUklWQVRFX01lbW9yeVRyYW5zYWN0aW9uIiwiV3IiLCJHciIsInpyIiwiY3VycmVudFNlcXVlbmNlTnVtYmVyIiwiX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUiLCJqciIsIkhyIiwiSnIiLCJZciIsIlpyIiwidXBkYXRlTGltYm9Eb2N1bWVudCIsIl9fUFJJVkFURV9Mb2NhbFZpZXdDaGFuZ2VzIiwiZnJvbUNhY2hlIiwiUWkiLCJLaSIsIiRpIiwiZG9jQ2hhbmdlcyIsImRvYyIsIlF1ZXJ5Q29udGV4dCIsIl9kb2N1bWVudFJlYWRDb3VudCIsImRvY3VtZW50UmVhZENvdW50IiwiaW5jcmVtZW50RG9jdW1lbnRSZWFkQ291bnQiLCJfX1BSSVZBVEVfUXVlcnlFbmdpbmUiLCJVaSIsIldpIiwiR2kiLCJ6aSIsImppIiwiSGkiLCJKaSIsIllpIiwiWmkiLCJYaSIsImVzIiwidHMiLCJfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUiLCJfX1BSSVZBVEVfTG9jYWxTdG9yZUltcGwiLCJucyIsInJzIiwic3MiLCJvcyIsIl9zIiwidXMiLCJsb2NhbERvY3VtZW50cyIsImNvbGxlY3RHYXJiYWdlIiwiY29sbGVjdCIsIl9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZSIsImNzIiwicmVtb3ZlZEJhdGNoSWRzIiwiYWRkZWRCYXRjaElkcyIsIl9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsIl9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldCIsIl9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5IiwiX19QUklWQVRFX3NldE1heFJlYWRUaW1lIiwiX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwIiwiUHMiLCJfX1BSSVZBVEVfTG9jYWxDbGllbnRTdGF0ZSIsImFjdGl2ZVRhcmdldElkcyIsIlJzIiwiVnMiLCJBcyIsInVwZGF0ZVRpbWVNcyIsIl9fUFJJVkFURV9NZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSIsInJvIiwiaW8iLCJvbmxpbmVTdGF0ZUhhbmRsZXIiLCJhZGRQZW5kaW5nTXV0YXRpb24iLCJ1cGRhdGVNdXRhdGlvblN0YXRlIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsInVwZGF0ZVF1ZXJ5U3RhdGUiLCJyZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0IiwiaXNMb2NhbFF1ZXJ5VGFyZ2V0IiwiY2xlYXJRdWVyeVN0YXRlIiwiZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzIiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImhhbmRsZVVzZXJDaGFuZ2UiLCJzZXRPbmxpbmVTdGF0ZSIsIm5vdGlmeUJ1bmRsZUxvYWRlZCIsIl9fUFJJVkFURV9Ob29wQ29ubmVjdGl2aXR5TW9uaXRvciIsInNvIiwiX19QUklWQVRFX0Jyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yIiwib28iLCJfbyIsImFvIiwidW8iLCJjbyIsImxvIiwiX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCIsIkJhdGNoR2V0RG9jdW1lbnRzIiwiQ29tbWl0IiwiUnVuUXVlcnkiLCJSdW5BZ2dyZWdhdGlvblF1ZXJ5IiwiX19QUklWQVRFX1N0cmVhbUJyaWRnZSIsImhvIiwiUG8iLCJJbyIsIlRvIiwiRW8iLCJBbyIsIm9uTWVzc2FnZSIsIlJvIiwiVm8iLCJtbyIsImZvIiwiX19QUklWQVRFX1dlYkNoYW5uZWxDb25uZWN0aW9uIiwiZGF0YWJhc2VJbmZvIiwicG8iLCJ5byIsIndvIiwiU28iLCJibyIsIkRvIiwiQ28iLCJ2byIsIkZvIiwiTW8iLCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXMiLCJ0aW1lb3V0U2Vjb25kcyIsIl9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbiIsIl9fUFJJVkFURV9uZXdTZXJpYWxpemVyIiwiX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZiIsIl9pIiwidGltZXJJZCIsInhvIiwiT28iLCJObyIsIkJvIiwiTG8iLCJrbyIsInFvIiwiUW8iLCJLbyIsImVucXVldWVBZnRlckRlbGF5IiwiJG8iLCJza2lwRGVsYXkiLCJfX1BSSVZBVEVfUGVyc2lzdGVudFN0cmVhbSIsIlVvIiwiV28iLCJjb25uZWN0aW9uIiwiYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIiLCJhcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIiLCJHbyIsInpvIiwiam8iLCJIbyIsIkpvIiwiWW8iLCJabyIsInN0b3AiLCJYbyIsImVfIiwidF8iLCJuXyIsInJfIiwiaV8iLCJzXyIsIm9fIiwiX18iLCJhXyIsInVfIiwiZW5xdWV1ZUFuZEZvcmdldCIsIl9fUFJJVkFURV9QZXJzaXN0ZW50TGlzdGVuU3RyZWFtIiwidGFyZ2V0Q2hhbmdlIiwidGFyZ2V0Q2hhbmdlVHlwZSIsImRvY3VtZW50Q2hhbmdlIiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsIl9fUFJJVkFURV9mcm9tV2F0Y2hDaGFuZ2UiLCJjXyIsImxfIiwiYWRkVGFyZ2V0IiwiX19QUklWQVRFX3RvTGlzdGVuUmVxdWVzdExhYmVscyIsImxhYmVscyIsImhfIiwiX19QUklWQVRFX0RhdGFzdG9yZUltcGwiLCJhdXRoQ3JlZGVudGlhbHMiLCJhcHBDaGVja0NyZWRlbnRpYWxzIiwiUl8iLCJWXyIsInRlcm1pbmF0ZSIsIl9fUFJJVkFURV9PbmxpbmVTdGF0ZVRyYWNrZXIiLCJhc3luY1F1ZXVlIiwiZl8iLCJnXyIsInBfIiwieV8iLCJ3XyIsIlNfIiwiYl8iLCJEXyIsIl9fUFJJVkFURV9SZW1vdGVTdG9yZUltcGwiLCJsb2NhbFN0b3JlIiwiZGF0YXN0b3JlIiwicmVtb3RlU3luY2VyIiwiQ18iLCJ2XyIsIkZfIiwiTV8iLCJ4XyIsIl9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrIiwiX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwiLCJPXyIsIl9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwiLCJfX1BSSVZBVEVfcmVtb3RlU3RvcmVMaXN0ZW4iLCJfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSIsIl9fUFJJVkFURV9zdGFydFdhdGNoU3RyZWFtIiwiX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtIiwiX19QUklWQVRFX3NlbmRXYXRjaFJlcXVlc3QiLCJfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbiIsIl9fUFJJVkFURV9zZW5kVW53YXRjaFJlcXVlc3QiLCJOXyIsIl9fUFJJVkFURV9jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZSIsIl9fUFJJVkFURV9vbldhdGNoU3RyZWFtT3BlbiIsIl9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2xvc2UiLCJfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNoYW5nZSIsInJlamVjdExpc3RlbiIsIl9fUFJJVkFURV9kaXNhYmxlTmV0d29ya1VudGlsUmVjb3ZlcnkiLCJhcHBseVJlbW90ZUV2ZW50IiwiX19QUklWQVRFX3JlbW90ZVN0b3JlSGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJoYW5kbGVDcmVkZW50aWFsQ2hhbmdlIiwiQl8iLCJEZWxheWVkT3BlcmF0aW9uIiwidGFyZ2V0VGltZU1zIiwicmVtb3ZhbENhbGxiYWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJ0aW1lckhhbmRsZSIsImhhbmRsZURlbGF5RWxhcHNlZCIsIl9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlIiwiRG9jdW1lbnRTZXQiLCJrZXllZE1hcCIsInNvcnRlZFNldCIsImVtcHR5U2V0IiwiX19QUklWQVRFX0RvY3VtZW50Q2hhbmdlU2V0Iiwia18iLCJ0cmFjayIsInFfIiwiVmlld1NuYXBzaG90Iiwib2xkRG9jcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiaGFzQ2FjaGVkUmVzdWx0cyIsImZyb21Jbml0aWFsRG9jdW1lbnRzIiwiX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXJzSW5mbyIsIlFfIiwibGlzdGVuZXJzIiwiX19QUklWQVRFX0V2ZW50TWFuYWdlckltcGwiLCJxdWVyaWVzIiwib25saW5lU3RhdGUiLCJLXyIsIl9fUFJJVkFURV9ldmVudE1hbmFnZXJPbldhdGNoQ2hhbmdlIiwiV18iLCJfX1BSSVZBVEVfcmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudCIsIl9fUFJJVkFURV9ldmVudE1hbmFnZXJPbldhdGNoRXJyb3IiLCJvbkVycm9yIiwiX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIiLCJHXyIsInpfIiwial8iLCJpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiSF8iLCJKXyIsIllfIiwiVV8iLCJaXyIsIl9fUFJJVkFURV9BZGRlZExpbWJvRG9jdW1lbnQiLCJfX1BSSVZBVEVfUmVtb3ZlZExpbWJvRG9jdW1lbnQiLCJfX1BSSVZBVEVfVmlldyIsIm9yZGVyIiwic25hcHNob3QiLCJfX1BSSVZBVEVfUXVlcnlWaWV3IiwidmlldyIsIkxpbWJvUmVzb2x1dGlvbiIsIl9fUFJJVkFURV9TeW5jRW5naW5lSW1wbCIsInJlbW90ZVN0b3JlIiwiZXZlbnRNYW5hZ2VyIiwic2hhcmVkQ2xpZW50U3RhdGUiLCJtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyIsImlzUHJpbWFyeUNsaWVudCIsIl9fUFJJVkFURV9zeW5jRW5naW5lTGlzdGVuIiwiX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVJlbW90ZUV2ZW50IiwiX19QUklWQVRFX3N5bmNFbmdpbmVHZXRSZW1vdGVLZXlzRm9yVGFyZ2V0IiwiX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RMaXN0ZW4iLCJfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MiLCJfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0IiwiX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MiLCJfX1BSSVZBVEVfaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QiLCJfX1BSSVZBVEVfc3luY0VuZ2luZVVubGlzdGVuIiwiX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQiLCJ0cmFja1JlbW92YWxzIiwibHMiLCJocyIsIl9fUFJJVkFURV9wb3B1bGF0ZURvY3VtZW50Q2hhbmdlQnVmZmVyIiwiX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseVJlbW90ZUV2ZW50VG9Mb2NhbENhY2hlIiwiX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlIiwiX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseU9ubGluZVN0YXRlQ2hhbmdlIiwiX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMiLCJfX1BSSVZBVEVfcmVtb3ZlTGltYm9UYXJnZXQiLCJfX1BSSVZBVEVfdHJhY2tMaW1ib0NoYW5nZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lSGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIk1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlciIsInN5bmNocm9uaXplVGFicyIsImNyZWF0ZVNoYXJlZENsaWVudFN0YXRlIiwiY3JlYXRlUGVyc2lzdGVuY2UiLCJjcmVhdGVMb2NhbFN0b3JlIiwiZ2NTY2hlZHVsZXIiLCJjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlciIsImluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsImNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsIl9fUFJJVkFURV9uZXdMb2NhbFN0b3JlIiwiaW5pdGlhbFVzZXIiLCJPbmxpbmVDb21wb25lbnRQcm92aWRlciIsImNyZWF0ZURhdGFzdG9yZSIsImNyZWF0ZVJlbW90ZVN0b3JlIiwiY3JlYXRlRXZlbnRNYW5hZ2VyIiwic3luY0VuZ2luZSIsImNyZWF0ZVN5bmNFbmdpbmUiLCJfX1BSSVZBVEVfcmVtb3RlU3RvcmVBcHBseVByaW1hcnlTdGF0ZSIsIl9fUFJJVkFURV9Bc3luY09ic2VydmVyIiwib2JzZXJ2ZXIiLCJtdXRlZCIsIkZpcmVzdG9yZUNsaWVudCIsImNsaWVudElkIiwiYXV0aENyZWRlbnRpYWxMaXN0ZW5lciIsImFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyIiwiZ2V0Q29uZmlndXJhdGlvbiIsInNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciIsInNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lciIsInZlcmlmeU5vdFRlcm1pbmF0ZWQiLCJpc1NodXR0aW5nRG93biIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCIsIl9vbmxpbmVDb21wb25lbnRzIiwiX29mZmxpbmVDb21wb25lbnRzIiwiX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlciIsIl9fUFJJVkFURV9zZXRPbmxpbmVDb21wb25lbnRQcm92aWRlciIsIl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyIiwiX29mZmxpbmUiLCJfX1BSSVZBVEVfY2FuRmFsbGJhY2tGcm9tSW5kZXhlZERiRXJyb3IiLCJfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMiLCJfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyIiwiX29ubGluZSIsIl9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzIiwib25MaXN0ZW4iLCJvblVubGlzdGVuIiwiX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIiLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4iLCJzb3VyY2UiLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuIiwiX19QUklWQVRFX2Nsb25lTG9uZ1BvbGxpbmdPcHRpb25zIiwiX19QUklWQVRFX3ZhbGlkYXRlQ29sbGVjdGlvblBhdGgiLCJfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbiIsIl9fUFJJVkFURV9jYXN0IiwiRmlyZXN0b3JlU2V0dGluZ3NJbXBsIiwiaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyIsImxvY2FsQ2FjaGUiLCJjYWNoZVNpemVCeXRlcyIsIl9fUFJJVkFURV92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyIsIkZpcmVzdG9yZSQxIiwiX2F1dGhDcmVkZW50aWFscyIsIl9hcHBDaGVja0NyZWRlbnRpYWxzIiwiX2RhdGFiYXNlSWQiLCJfYXBwIiwiX3BlcnNpc3RlbmNlS2V5IiwiX3NldHRpbmdzIiwiX3NldHRpbmdzRnJvemVuIiwiX2luaXRpYWxpemVkIiwiX3Rlcm1pbmF0ZWQiLCJfdGVybWluYXRlVGFzayIsIl9zZXRTZXR0aW5ncyIsInNlc3Npb25JbmRleCIsImlhbVRva2VuIiwiYXV0aFRva2VuRmFjdG9yeSIsImNsaWVudCIsIl9nZXRTZXR0aW5ncyIsIl9mcmVlemVTZXR0aW5ncyIsIl90ZXJtaW5hdGUiLCJzZXR0aW5ncyIsIlF1ZXJ5IiwiY29udmVydGVyIiwiX3F1ZXJ5IiwiZmlyZXN0b3JlIiwid2l0aENvbnZlcnRlciIsIkRvY3VtZW50UmVmZXJlbmNlIiwiX2tleSIsIl9wYXRoIiwiQ29sbGVjdGlvblJlZmVyZW5jZSIsImNvbGxlY3Rpb24iLCJfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50IiwiX19QUklWQVRFX0FzeW5jUXVldWVJbXBsIiwiZXUiLCJ0dSIsIm51IiwicnUiLCJpdSIsInN1Iiwib3UiLCJ2aXNpYmlsaXR5U3RhdGUiLCJlbnF1ZXVlIiwiX3UiLCJhdSIsInV1Iiwic3RhY2siLCJjdSIsImx1IiwiaHUiLCJQdSIsIkl1IiwiRmlyZXN0b3JlIiwiX3F1ZXVlIiwiX2ZpcmVzdG9yZUNsaWVudCIsIl9fUFJJVkFURV9jb25maWd1cmVGaXJlc3RvcmUiLCJfb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX29ubGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX29mZmxpbmVLaW5kIiwia2luZCIsIkJ5dGVzIiwiX2J5dGVTdHJpbmciLCJGaWVsZFBhdGgiLCJfaW50ZXJuYWxQYXRoIiwiRmllbGRWYWx1ZSIsIl9tZXRob2ROYW1lIiwiR2VvUG9pbnQiLCJfbGF0IiwiX2xvbmciLCJfX1BSSVZBVEVfaXNXcml0ZSIsIl9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsIiwiZHUiLCJUdSIsIkV1IiwiQXUiLCJSdSIsIlZ1IiwibXUiLCJmdSIsImd1IiwiX19QUklWQVRFX2NyZWF0ZUVycm9yIiwibWV0aG9kTmFtZSIsInB1IiwieXUiLCJjb250YWlucyIsIl9fUFJJVkFURV9Vc2VyRGF0YVJlYWRlciIsInd1IiwiX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyIiwiX19QUklWQVRFX3BhcnNlUXVlcnlWYWx1ZSIsIl9fUFJJVkFURV9wYXJzZURhdGEiLCJfX1BSSVZBVEVfbG9va3NMaWtlSnNvbk9iamVjdCIsIl9fUFJJVkFURV92YWxpZGF0ZVBsYWluT2JqZWN0IiwiX19QUklWQVRFX3BhcnNlT2JqZWN0IiwiX3RvRmllbGRUcmFuc2Zvcm0iLCJEb2N1bWVudFNuYXBzaG90JDEiLCJfZmlyZXN0b3JlIiwiX3VzZXJEYXRhV3JpdGVyIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsInJlZiIsIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxIiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsIl9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQiLCJzZWFyY2giLCJfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyIsIkFwcGxpYWJsZUNvbnN0cmFpbnQiLCJRdWVyeUNvbnN0cmFpbnQiLCJRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQiLCJRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCIsIl9hcHBseSIsIl9maWVsZCIsIl9vcCIsIl92YWx1ZSIsIl9jcmVhdGUiLCJfcGFyc2UiLCJfX1BSSVZBVEVfdmFsaWRhdGVOZXdGaWVsZEZpbHRlciIsIl9fUFJJVkFURV92YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHMiLCJfX1BSSVZBVEVfcGFyc2VEb2N1bWVudElkVmFsdWUiLCJfcXVlcnlDb25zdHJhaW50cyIsIl9nZXRPcGVyYXRvciIsIl9nZXRRdWVyeUNvbnN0cmFpbnRzIiwiUXVlcnlPcmRlckJ5Q29uc3RyYWludCIsIl9kaXJlY3Rpb24iLCJfX1BSSVZBVEVfdmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoIiwiUXVlcnlMaW1pdENvbnN0cmFpbnQiLCJfbGltaXQiLCJfbGltaXRUeXBlIiwiX19QUklWQVRFX3ZhbGlkYXRlUG9zaXRpdmVOdW1iZXIiLCJRdWVyeVN0YXJ0QXRDb25zdHJhaW50IiwiX2RvY09yRmllbGRzIiwiX2luY2x1c2l2ZSIsIl9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzIiwic3RhcnRBZnRlciIsIkFic3RyYWN0VXNlckRhdGFXcml0ZXIiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0IiwiY29udmVydE9iamVjdE1hcCIsImNvbnZlcnREb2N1bWVudEtleSIsIlNuYXBzaG90TWV0YWRhdGEiLCJEb2N1bWVudFNuYXBzaG90IiwiX2ZpcmVzdG9yZUltcGwiLCJtZXRhZGF0YSIsIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCIsInNlcnZlclRpbWVzdGFtcHMiLCJRdWVyeVNuYXBzaG90IiwiX3NuYXBzaG90IiwiX2NhY2hlZENoYW5nZXMiLCJfY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMiLCJvbGRJbmRleCIsIm5ld0luZGV4IiwiX19QUklWQVRFX3Jlc3VsdENoYW5nZVR5cGUiLCJfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIiLCJnZXREb2NzIiwiZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCIsIl9fUFJJVkFURV92YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0IiwidGVzdERiIiwiaGVhcnRiZWF0Q29udHJvbGxlciIsImdldEFwcCIsInByb2R1Y3ROYW1lIiwiX2IiLCJlbXVsYXRvckhvc3RzIiwiZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCIsInNlcGFyYXRvckluZGV4IiwibGFzdEluZGV4T2YiLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQiLCJtb2NrVXNlclRva2VuIiwicHJvamVjdCIsImlhdCIsInN1YiIsInVzZXJfaWQiLCJwYXlsb2FkIiwiaXNzIiwiYXVkIiwiZXhwIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduX2luX3Byb3ZpZGVyIiwiaWRlbnRpdGllcyIsImFsZyIsImNyZWF0ZU1vY2tVc2VyVG9rZW4iLCJjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IiLCJnZXRGaXJlc3RvcmUiLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiZ2V0TGFzdFZpc2libGUiLCJxdWVyeVNuYXBzaG90IiwiZ2V0SG9tZVF1ZXJ5IiwiY29sbGVjdGlvblJlZiIsImxhc3RWaXNpYmxlIiwiZ2V0Q2F0ZWdvcnlRdWVyeSIsImNhdGVnb3J5IiwidGl0bGUiXSwic291cmNlUm9vdCI6IiJ9