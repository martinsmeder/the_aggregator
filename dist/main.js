/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,h=a?t[e+2]:0,c=i>>2,u=(3&i)<<4|o>>4;let l=(15&o)<<2|h>>6,d=63&h;a||(d=64,s||(l=64)),r.push(n[c],n[u],n[l],n[d])}return r.join("")},encodeString(t,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(t):this.encodeByteArray(e(t),n)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const h=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==o||null==a||null==h)throw new r;const c=s<<2|o>>4;if(i.push(c),64!==a){const t=o<<4&240|a>>2;if(i.push(t),64!==h){const t=a<<6&192|h;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i=function(t){return function(t){const r=e(t);return n.encodeByteArray(r,!0)}(t).replace(/\./g,"")},s=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const t="MISSING_ENV_VAR".__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return n.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},o=()=>{var t;return null===(t=s())||void 0===t?void 0:t.config};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}class h extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c.prototype.create)}}class c{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(u,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new h(r,o,n)}}const u=/\{\$([^}]+)}/g;function l(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(d(n)&&d(s)){if(!l(n,s))return!1}else if(n!==s)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function d(t){return null!==t&&"object"==typeof t}class f{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const g="[DEFAULT]";class p{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new a;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:g})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=g){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=g){return this.instances.has(t)}getOptions(t=g){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===g?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=g){return this.component?this.component.multipleInstances?t:g:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class m{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new p(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const y=[];var v,w;(w=v||(v={}))[w.DEBUG=0]="DEBUG",w[w.VERBOSE=1]="VERBOSE",w[w.INFO=2]="INFO",w[w.WARN=3]="WARN",w[w.ERROR=4]="ERROR",w[w.SILENT=5]="SILENT";const E={debug:v.DEBUG,verbose:v.VERBOSE,info:v.INFO,warn:v.WARN,error:v.ERROR,silent:v.SILENT},b=v.INFO,_={[v.DEBUG]:"log",[v.VERBOSE]:"log",[v.INFO]:"info",[v.WARN]:"warn",[v.ERROR]:"error"},T=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=_[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class C{constructor(t){this.name=t,this._logLevel=b,this._logHandler=T,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in v))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?E[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,v.DEBUG,...t),this._logHandler(this,v.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,v.VERBOSE,...t),this._logHandler(this,v.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,v.INFO,...t),this._logHandler(this,v.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,v.WARN,...t),this._logHandler(this,v.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,v.ERROR,...t),this._logHandler(this,v.ERROR,...t)}}const I=(t,e)=>e.some((e=>t instanceof e));let S,A;const D=new WeakMap,k=new WeakMap,N=new WeakMap,R=new WeakMap,L=new WeakMap;let x={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return k.get(t);if("objectStoreNames"===e)return t.objectStoreNames||N.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return M(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function O(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(A||(A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(P(this),t),M(D.get(this))}:function(...t){return M(e.apply(P(this),t))}:function(t,...n){const r=e.call(P(this),t,...n);return N.set(r,t.sort?t.sort():[t]),M(r)}:(t instanceof IDBTransaction&&function(t){if(k.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));k.set(t,e)}(t),I(t,S||(S=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,x):t);var e}function M(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(M(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&D.set(e,t)})).catch((()=>{})),L.set(e,t),e}(t);if(R.has(t))return R.get(t);const e=O(t);return e!==t&&(R.set(t,e),L.set(e,t)),e}const P=t=>L.get(t),F=["get","getKey","getAll","getAllKeys","count"],V=["put","add","delete","clear"],U=new Map;function B(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(U.get(e))return U.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=V.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!F.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return U.set(e,s),s}var j;j=x,x={...j,get:(t,e,n)=>B(t,e)||j.get(t,e,n),has:(t,e)=>!!B(t,e)||j.has(t,e)};class q{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const $="@firebase/app",z="0.9.15",K=new C("@firebase/app"),H="[DEFAULT]",G={[$]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Q=new Map,W=new Map;function X(t,e){try{t.container.addComponent(e)}catch(n){K.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function J(t){const e=t.name;if(W.has(e))return K.debug(`There were multiple attempts to register component ${e}.`),!1;W.set(e,t);for(const e of Q.values())X(e,t);return!0}const Y=new c("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Z{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new f("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Y.create("app-deleted",{appName:this._name})}}function tt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:H,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Y.create("bad-app-name",{appName:String(i)});if(n||(n=o()),!n)throw Y.create("no-options");const s=Q.get(i);if(s){if(l(n,s.options)&&l(r,s.config))return s;throw Y.create("duplicate-app",{appName:i})}const a=new m(i);for(const t of W.values())a.addComponent(t);const h=new Z(n,r,a);return Q.set(i,h),h}function et(t,e,n){var r;let i=null!==(r=G[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void K.warn(t.join(" "))}J(new f(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const nt="firebase-heartbeat-database",rt=1,it="firebase-heartbeat-store";let st=null;function ot(){return st||(st=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=M(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(M(o.result),t.oldVersion,t.newVersion,M(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(nt,rt,{upgrade:(t,e)=>{0===e&&t.createObjectStore(it)}}).catch((t=>{throw Y.create("idb-open",{originalErrorMessage:t.message})}))),st}async function at(t,e){try{const n=(await ot()).transaction(it,"readwrite"),r=n.objectStore(it);await r.put(e,ht(t)),await n.done}catch(t){if(t instanceof h)K.warn(t.message);else{const e=Y.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});K.warn(e.message)}}}function ht(t){return`${t.name}!${t.options.appId}`}class ct{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new lt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=ut();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=ut(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),dt(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dt(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=i(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ut(){return(new Date).toISOString().substring(0,10)}class lt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await ot();return await e.transaction(it).objectStore(it).get(ht(t))}catch(t){if(t instanceof h)K.warn(t.message);else{const e=Y.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});K.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return at(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return at(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function dt(t){return i(JSON.stringify({version:2,heartbeats:t})).length}J(new f("platform-logger",(t=>new q(t)),"PRIVATE")),J(new f("heartbeat",(t=>new ct(t)),"PRIVATE")),et($,z,""),et($,z,"esm2017"),et("fire-js",""),et("firebase","10.1.0","app");var ft,gt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pt={},mt=mt||{},yt=gt||self;function vt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function wt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Et="closure_uid_"+(1e9*Math.random()>>>0),bt=0;function _t(t,e,n){return t.call.apply(t.bind,arguments)}function Tt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ct(t,e,n){return(Ct=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_t:Tt).apply(null,arguments)}function It(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function St(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function At(){this.s=this.s,this.o=this.o}At.prototype.s=!1,At.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Et)&&t[Et]||(t[Et]=++bt))},At.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function kt(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Nt(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(vt(n)){const e=t.length||0,r=n.length||0;t.length=e+r;for(let i=0;i<r;i++)t[e+i]=n[i]}else t.push(n)}}function Rt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var Lt=function(){if(!yt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{yt.addEventListener("test",(()=>{}),e),yt.removeEventListener("test",(()=>{}),e)}catch(t){}return t}();function xt(t){return/^[\s\xa0]*$/.test(t)}function Ot(){var t=yt.navigator;return t&&(t=t.userAgent)?t:""}function Mt(t){return-1!=Ot().indexOf(t)}function Pt(t){return Pt[" "](t),t}Pt[" "]=function(){};var Ft,Vt,Ut,Bt=Mt("Opera"),jt=Mt("Trident")||Mt("MSIE"),qt=Mt("Edge"),$t=qt||jt,zt=Mt("Gecko")&&!(-1!=Ot().toLowerCase().indexOf("webkit")&&!Mt("Edge"))&&!(Mt("Trident")||Mt("MSIE"))&&!Mt("Edge"),Kt=-1!=Ot().toLowerCase().indexOf("webkit")&&!Mt("Edge");function Ht(){var t=yt.document;return t?t.documentMode:void 0}t:{var Gt="",Qt=(Vt=Ot(),zt?/rv:([^\);]+)(\)|;)/.exec(Vt):qt?/Edge\/([\d\.]+)/.exec(Vt):jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Kt?/WebKit\/(\S+)/.exec(Vt):Bt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Qt&&(Gt=Qt?Qt[1]:""),jt){var Wt=Ht();if(null!=Wt&&Wt>parseFloat(Gt)){Ft=String(Wt);break t}}Ft=Gt}yt.document&&jt?Ut=Ht()||parseInt(Ft,10)||void 0:Ut=void 0;var Xt=Ut;function Jt(t,e){if(Rt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(zt){t:{try{Pt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Yt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Jt.$.h.call(this)}}St(Jt,Rt);var Yt={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),te=0;function ee(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++te,this.fa=this.ia=!1}function ne(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function re(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function ie(t){const e={};for(const n in t)e[n]=t[n];return e}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<se.length;e++)n=se[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ae(t){this.src=t,this.g={},this.h=0}function he(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Dt(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ne(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ce(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}ae.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=ce(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new ee(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var ue="closure_lm_"+(1e6*Math.random()|0),le={};function de(t,e,n,r,i){if(r&&r.once)return ge(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)de(t,e[s],n,r,i);return null}return n=be(n),t&&t[Zt]?t.O(e,n,wt(r)?!!r.capture:!!r,i):fe(t,e,n,!1,r,i)}function fe(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=wt(i)?!!i.capture:!!i,a=we(t);if(a||(t[ue]=a=new ae(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){const t=ve;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Lt||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ye(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ge(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ge(t,e[s],n,r,i);return null}return n=be(n),t&&t[Zt]?t.P(e,n,wt(r)?!!r.capture:!!r,i):fe(t,e,n,!0,r,i)}function pe(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)pe(t,e[s],n,r,i);else r=wt(r)?!!r.capture:!!r,n=be(n),t&&t[Zt]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=ce(s=t.g[e],n,r,i))&&(ne(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=we(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ce(e,n,r,i)),(n=-1<t?e[t]:null)&&me(n))}function me(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Zt])he(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ye(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=we(e))?(he(n,t),0==n.h&&(n.src=null,e[ue]=null)):ne(t)}}}function ye(t){return t in le?le[t]:le[t]="on"+t}function ve(t,e){if(t.fa)t=!0;else{e=new Jt(e,this);var n=t.listener,r=t.la||t.src;t.ia&&me(t),t=n.call(r,e)}return t}function we(t){return(t=t[ue])instanceof ae?t:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(t){return"function"==typeof t?t:(t[Ee]||(t[Ee]=function(e){return t.handleEvent(e)}),t[Ee])}function _e(){At.call(this),this.i=new ae(this),this.S=this,this.J=null}function Te(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Rt(e,t);else if(e instanceof Rt)e.target=e.target||t;else{var i=e;oe(e=new Rt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Ce(o,r,!0,e)&&i}if(i=Ce(o=e.g=t,r,!0,e)&&i,i=Ce(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Ce(o=e.g=n[s],r,!1,e)&&i}function Ce(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,h=o.la||o.src;o.ia&&he(t.i,o),i=!1!==a.call(h,r)&&i}}return i&&!r.defaultPrevented}St(_e,At),_e.prototype[Zt]=!0,_e.prototype.removeEventListener=function(t,e,n,r){pe(this,t,e,n,r)},_e.prototype.N=function(){if(_e.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ne(n[r]);delete e.g[t],e.h--}}this.J=null},_e.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},_e.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ie=yt.JSON.stringify;function Se(){var t=xe;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ae=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new De),(t=>t.reset()));class De{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ke(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Ne(t){yt.setTimeout((()=>{throw t}),0)}let Re,Le=!1,xe=new class{constructor(){this.h=this.g=null}add(t,e){const n=Ae.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Oe=()=>{const t=yt.Promise.resolve(void 0);Re=()=>{t.then(Me)}};var Me=()=>{for(var t;t=Se();){try{t.h.call(t.g)}catch(t){Ne(t)}var e=Ae;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Le=!1};function Pe(t,e){_e.call(this),this.h=t||1,this.g=e||yt,this.j=Ct(this.qb,this),this.l=Date.now()}function Fe(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Ve(t,e,n){if("function"==typeof t)n&&(t=Ct(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ct(t.handleEvent,t)}return 2147483647<Number(e)?-1:yt.setTimeout(t,e||0)}function Ue(t){t.g=Ve((()=>{t.g=null,t.i&&(t.i=!1,Ue(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}St(Pe,_e),(ft=Pe.prototype).ga=!1,ft.T=null,ft.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Te(this,"tick"),this.ga&&(Fe(this),this.start()))}},ft.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.N=function(){Pe.$.N.call(this),Fe(this),delete this.g};class Be extends At{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(t){At.call(this),this.h=t,this.g={}}St(je,At);var qe=[];function $e(t,e,n,r){Array.isArray(n)||(n&&(qe[0]=n.toString()),n=qe);for(var i=0;i<n.length;i++){var s=de(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ze(t){re(t.g,(function(t,e){this.g.hasOwnProperty(e)&&me(t)}),t),t.g={}}function Ke(){this.g=!0}function He(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ie(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}je.prototype.N=function(){je.$.N.call(this),ze(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ke.prototype.Ea=function(){this.g=!1},Ke.prototype.info=function(){};var Ge={},Qe=null;function We(){return Qe=Qe||new _e}function Xe(t){Rt.call(this,Ge.Ta,t)}function Je(t){const e=We();Te(e,new Xe(e))}function Ye(t,e){Rt.call(this,Ge.STAT_EVENT,t),this.stat=e}function Ze(t){const e=We();Te(e,new Ye(e,t))}function tn(t,e){Rt.call(this,Ge.Ua,t),this.size=e}function en(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return yt.setTimeout((function(){t()}),e)}Ge.Ta="serverreachability",St(Xe,Rt),Ge.STAT_EVENT="statevent",St(Ye,Rt),Ge.Ua="timingevent",St(tn,Rt);var nn={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},rn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function sn(){}function on(t){return t.h||(t.h=t.i())}function an(){}sn.prototype.h=null;var hn,cn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function un(){Rt.call(this,"d")}function ln(){Rt.call(this,"c")}function dn(){}function fn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new je(this),this.P=pn,t=$t?125:void 0,this.V=new Pe(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gn}function gn(){this.i=null,this.g="",this.h=!1}St(un,Rt),St(ln,Rt),St(dn,sn),dn.prototype.g=function(){return new XMLHttpRequest},dn.prototype.i=function(){return{}},hn=new dn;var pn=45e3,mn={},yn={};function vn(t,e,n){t.L=1,t.v=Fn(Ln(e)),t.s=n,t.S=!0,wn(t,null)}function wn(t,e){t.G=Date.now(),Tn(t),t.A=Ln(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Xn(n.i,"t",r),t.C=0,n=t.l.J,t.h=new gn,t.g=Wr(t.l,n?e:null,!t.s),0<t.O&&(t.M=new Be(Ct(t.Pa,t,t.g),t.O)),$e(t.U,t.g,"readystatechange",t.nb),e=t.I?ie(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Je(),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),h=0;h<a.length;h++){var c=a[h].split("=");if(1<c.length){var u=c[0];c=c[1];var l=u.split("_");o=2<=l.length&&"type"==l[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.W,t.s)}function En(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function bn(t,e,n){let r,i=!0;for(;!t.J&&t.C<n.length;){if(r=_n(t,n),r==yn){4==e&&(t.o=4,Ze(14),i=!1),He(t.j,t.m,null,"[Incomplete Response]");break}if(r==mn){t.o=4,Ze(15),He(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}He(t.j,t.m,r,null),Dn(t,r)}En(t)&&r!=yn&&r!=mn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ze(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),jr(e),e.M=!0,Ze(11))):(He(t.j,t.m,n,"[Invalid Chunked Response]"),An(t),Sn(t))}function _n(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?yn:(n=Number(e.substring(n,r)),isNaN(n)?mn:(r+=1)+n>e.length?yn:(e=e.slice(r,r+n),t.C=r+n,e))}function Tn(t){t.Y=Date.now()+t.P,Cn(t,t.P)}function Cn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=en(Ct(t.lb,t),e)}function In(t){t.B&&(yt.clearTimeout(t.B),t.B=null)}function Sn(t){0==t.l.H||t.J||zr(t.l,t)}function An(t){In(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Fe(t.V),ze(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Dn(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||nr(n.i,t)))if(!t.K&&nr(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;$r(n),xr(n)}Br(n),Ze(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=en(Ct(n.ib,n),6e3));if(1>=er(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Hr(n,11)}else if((t.K||n.g==t)&&$r(n),!xt(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const e=c[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const l=t.g;if(l){const t=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(rr(s,s.h),s.h=null))}if(r.F){const t=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.Da=t,Pn(r.I,r.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Qr(r,r.J?r.pa:null,r.Y),o.K){ir(r.i,o);var a=o,h=r.L;h&&a.setTimeout(h),a.B&&(In(a),Tn(a)),r.g=o}else Ur(r);0<n.j.length&&Mr(n)}else"stop"!=c[0]&&"close"!=c[0]||Hr(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Hr(n,7):Lr(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Je()}catch(t){}}function kn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(vt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(vt(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(vt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(ft=fn.prototype).setTimeout=function(t){this.P=t},ft.nb=function(t){t=t.target;const e=this.M;e&&3==Sr(t)?e.l():this.Pa(t)},ft.Pa=function(t){try{if(t==this.g)t:{const u=Sr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||$t||this.g&&(this.h.h||this.g.ja()||Ar(this.g)))){this.J||4!=u||7==e||Je(),In(this);var n=this.g.da();this.ca=n;e:if(En(this)){var r=Ar(this.g);t="";var i=r.length,s=4==Sr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){An(this),Sn(this);var o="";break e}this.h.i=new yt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,h=this.g;if((a=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xt(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ze(12),An(this),Sn(this);break t}He(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dn(this,n)}this.S?(bn(this,u,o),$t&&this.i&&3==u&&($e(this.U,this.V,"tick",this.mb),this.V.start())):(He(this.j,this.m,o,null),Dn(this,o)),4==u&&An(this),this.i&&!this.J&&(4==u?zr(this.l,this):(this.i=!1,Tn(this)))}else(function(t){const e={};t=(t.g&&2<=Sr(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(xt(t[r]))continue;var n=ke(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ze(12)):(this.o=0,Ze(13)),An(this),Sn(this)}}}catch(t){}},ft.mb=function(){if(this.g){var t=Sr(this.g),e=this.g.ja();this.C<e.length&&(In(this),bn(this,t,e),this.i&&4!=t&&Tn(this))}},ft.cancel=function(){this.J=!0,An(this)},ft.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.L&&(Je(),Ze(17)),An(this),this.o=2,Sn(this)):Cn(this,this.Y-t)};var Nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rn(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Rn){this.h=t.h,xn(this,t.j),this.s=t.s,this.g=t.g,On(this,t.m),this.l=t.l;var e=t.i,n=new Hn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Mn(this,n),this.o=t.o}else t&&(e=String(t).match(Nn))?(this.h=!1,xn(this,e[1]||"",!0),this.s=Vn(e[2]||""),this.g=Vn(e[3]||"",!0),On(this,e[4]),this.l=Vn(e[5]||"",!0),Mn(this,e[6]||"",!0),this.o=Vn(e[7]||"")):(this.h=!1,this.i=new Hn(null,this.h))}function Ln(t){return new Rn(t)}function xn(t,e,n){t.j=n?Vn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function On(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Mn(t,e,n){e instanceof Hn?(t.i=e,function(t,e){e&&!t.j&&(Gn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qn(this,e),Xn(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Un(e,zn)),t.i=new Hn(e,t.h))}function Pn(t,e,n){t.i.set(e,n)}function Fn(t){return Pn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Un(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Un(e,jn,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Un(e,jn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Un(n,"/"==n.charAt(0)?$n:qn,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Un(n,Kn)),t.join("")};var jn=/[#\/\?@]/g,qn=/[#\?:]/g,$n=/[#\?]/g,zn=/[#\?@]/g,Kn=/#/g;function Hn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Gn(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qn(t,e){Gn(t),e=Jn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Wn(t,e){return Gn(t),e=Jn(t,e),t.g.has(e)}function Xn(t,e,n){Qn(t,e),0<n.length&&(t.i=null,t.g.set(Jn(t,e),kt(n)),t.h+=n.length)}function Jn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Yn(t){this.l=t||Zn,t=yt.PerformanceNavigationTiming?0<(t=yt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(yt.g&&yt.g.Ka&&yt.g.Ka()&&yt.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=Hn.prototype).add=function(t,e){Gn(this),this.i=null,t=Jn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ft.forEach=function(t,e){Gn(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},ft.ta=function(){Gn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},ft.Z=function(t){Gn(this);let e=[];if("string"==typeof t)Wn(this,t)&&(e=e.concat(this.g.get(Jn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},ft.set=function(t,e){return Gn(this),this.i=null,Wn(this,t=Jn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ft.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var Zn=10;function tr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function er(t){return t.h?1:t.g?t.g.size:0}function nr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function rr(t,e){t.g?t.g.add(e):t.h=e}function ir(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function sr(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return kt(t.i)}Yn.prototype.cancel=function(){if(this.i=sr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var or=class{stringify(t){return yt.JSON.stringify(t,void 0)}parse(t){return yt.JSON.parse(t,void 0)}};function ar(){this.g=new or}function hr(t,e,n){const r=n||"";try{kn(t,(function(t,n){let i=t;wt(t)&&(i=Ie(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function cr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function ur(t){this.l=t.fc||null,this.j=t.ob||!1}function lr(t,e){_e.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=dr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}St(ur,sn),ur.prototype.g=function(){return new lr(this.l,this.j)},ur.prototype.i=function(t){return function(){return t}}({}),St(lr,_e);var dr=0;function fr(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function gr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,pr(t)}function pr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ft=lr.prototype).open=function(t,e){if(this.readyState!=dr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,pr(this)},ft.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||yt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gr(this)),this.readyState=dr},ft.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==yt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fr(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},ft.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?gr(this):pr(this),3==this.readyState&&fr(this)}},ft.Za=function(t){this.g&&(this.response=this.responseText=t,gr(this))},ft.Ya=function(t){this.g&&(this.response=t,gr(this))},ft.ka=function(){this.g&&gr(this)},ft.setRequestHeader=function(t,e){this.v.append(t,e)},ft.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(lr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var mr=yt.JSON.parse;function yr(t){_e.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vr,this.L=this.M=!1}St(yr,_e);var vr="",wr=/^https?$/i,Er=["POST","PUT"];function br(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,_r(t),Cr(t)}function _r(t){t.F||(t.F=!0,Te(t,"complete"),Te(t,"error"))}function Tr(t){if(t.h&&void 0!==mt&&(!t.C[1]||4!=Sr(t)||2!=t.da()))if(t.v&&4==Sr(t))Ve(t.La,0,t);else if(Te(t,"readystatechange"),4==Sr(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(Nn)[1]||null;!i&&yt.self&&yt.self.location&&(i=yt.self.location.protocol.slice(0,-1)),r=!wr.test(i?i.toLowerCase():"")}n=r}if(n)Te(t,"complete"),Te(t,"success");else{t.m=6;try{var s=2<Sr(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",_r(t)}}finally{Cr(t)}}}function Cr(t,e){if(t.g){Ir(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Te(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ir(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(yt.clearTimeout(t.A),t.A=null)}function Sr(t){return t.g?t.g.readyState:0}function Ar(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case vr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Dr(t){let e="";return re(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function kr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Dr(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Pn(t,e,n))}function Nr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Rr(t){this.Ga=0,this.j=[],this.l=new Ke,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Nr("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Nr("baseRetryDelayMs",5e3,t),this.hb=Nr("retryDelaySeedMs",1e4,t),this.eb=Nr("forwardChannelMaxRetries",2,t),this.xa=Nr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Yn(t&&t.concurrentRequestLimit),this.Ja=new ar,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Lr(t){if(Or(t),3==t.H){var e=t.W++,n=Ln(t.I);if(Pn(n,"SID",t.K),Pn(n,"RID",e),Pn(n,"TYPE","terminate"),Fr(t,n),(e=new fn(t,t.l,e)).L=2,e.v=Fn(Ln(n)),n=!1,yt.navigator&&yt.navigator.sendBeacon)try{n=yt.navigator.sendBeacon(e.v.toString(),"")}catch(t){}!n&&yt.Image&&((new Image).src=e.v,n=!0),n||(e.g=Wr(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Tn(e)}Gr(t)}function xr(t){t.g&&(jr(t),t.g.cancel(),t.g=null)}function Or(t){xr(t),t.u&&(yt.clearTimeout(t.u),t.u=null),$r(t),t.i.cancel(),t.m&&("number"==typeof t.m&&yt.clearTimeout(t.m),t.m=null)}function Mr(t){if(!tr(t.i)&&!t.m){t.m=!0;var e=t.Na;Re||Oe(),Le||(Re(),Le=!0),xe.add(e,t),t.C=0}}function Pr(t,e){var n;n=e?e.m:t.W++;const r=Ln(t.I);Pn(r,"SID",t.K),Pn(r,"RID",n),Pn(r,"AID",t.V),Fr(t,r),t.o&&t.s&&kr(r,t.o,t.s),n=new fn(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Vr(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),rr(t.i,n),vn(n,r,e)}function Fr(t,e){t.na&&re(t.na,(function(t,n){Pn(e,n,t)})),t.h&&kn({},(function(t,n){Pn(e,n,t)}))}function Vr(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ct(t.h.Va,t.h,t):null;t:{var i=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=e,0>n)e=Math.max(0,i[o].g-100),s=!1;else try{hr(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,r}function Ur(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Re||Oe(),Le||(Re(),Le=!0),xe.add(e,t),t.A=0}}function Br(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=en(Ct(t.Ma,t),Kr(t,t.A)),t.A++,0))}function jr(t){null!=t.B&&(yt.clearTimeout(t.B),t.B=null)}function qr(t){t.g=new fn(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ln(t.wa);Pn(e,"RID","rpc"),Pn(e,"SID",t.K),Pn(e,"AID",t.V),Pn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Pn(e,"TO",t.qa),Pn(e,"TYPE","xmlhttp"),Fr(t,e),t.o&&t.s&&kr(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Fn(Ln(e)),n.s=null,n.S=!0,wn(n,t)}function $r(t){null!=t.v&&(yt.clearTimeout(t.v),t.v=null)}function zr(t,e){var n=null;if(t.g==e){$r(t),jr(t),t.g=null;var r=2}else{if(!nr(t.i,e))return;n=e.F,ir(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Te(r=We(),new tn(r,n)),Mr(t)}else Ur(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function(t,e){return!(er(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=en(Ct(t.Na,t,e),Kr(t,t.C)),t.C++,0)))}(t,e)||2==r&&Br(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Hr(t,5);break;case 4:Hr(t,10);break;case 3:Hr(t,6);break;default:Hr(t,2)}}function Kr(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hr(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Ct(t.pb,t);n||(n=new Rn("//www.google.com/images/cleardot.gif"),yt.location&&"http"==yt.location.protocol||xn(n,"https"),Fn(n)),function(t,e){const n=new Ke;if(yt.Image){const r=new Image;r.onload=It(cr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=It(cr,n,r,"TestLoadImage: error",!1,e),r.onabort=It(cr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=It(cr,n,r,"TestLoadImage: timeout",!1,e),yt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ze(2);t.H=0,t.h&&t.h.za(e),Gr(t),Or(t)}function Gr(t){if(t.H=0,t.ma=[],t.h){const e=sr(t.i);0==e.length&&0==t.j.length||(Nt(t.ma,e),Nt(t.ma,t.j),t.i.i.length=0,kt(t.j),t.j.length=0),t.h.ya()}}function Qr(t,e,n){var r=n instanceof Rn?Ln(n):new Rn(n);if(""!=r.g)e&&(r.g=e+"."+r.g),On(r,r.m);else{var i=yt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Rn(null);r&&xn(s,r),e&&(s.g=e),i&&On(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Pn(r,n,e),Pn(r,"VER",t.ra),Fr(t,r),r}function Wr(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ha&&!t.va?new yr(new ur({ob:!0})):new yr(t.va)).Oa(t.J),e}function Xr(){}function Jr(){if(jt&&!(10<=Number(Xt)))throw Error("Environmental error: no available transport.")}function Yr(t,e){_e.call(this),this.g=new Rr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!xt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xt(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ei(this)}function Zr(t){un.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ti(){ln.call(this),this.status=1}function ei(t){this.g=t}function ni(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ri(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function ii(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(ft=yr.prototype).Oa=function(t){this.M=t},ft.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hn.g(),this.C=this.u?on(this.u):on(hn),this.g.onreadystatechange=Ct(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void br(this,t)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),i=yt.FormData&&t instanceof yt.FormData,!(0<=Dt(Er,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ir(this),0<this.B&&((this.L=function(t){return jt&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ct(this.ua,this)):this.A=Ve(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){br(this,t)}},ft.ua=function(){void 0!==mt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Te(this,"timeout"),this.abort(8))},ft.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Te(this,"complete"),Te(this,"abort"),Cr(this))},ft.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cr(this,!0)),yr.$.N.call(this)},ft.La=function(){this.s||(this.G||this.v||this.l?Tr(this):this.kb())},ft.kb=function(){Tr(this)},ft.isActive=function(){return!!this.g},ft.da=function(){try{return 2<Sr(this)?this.g.status:-1}catch(t){return-1}},ft.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},ft.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),mr(e)}},ft.Ia=function(){return this.m},ft.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=Rr.prototype).ra=8,ft.H=1,ft.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new fn(this,this.l,t);let s=this.s;if(this.U&&(s?(s=ie(s),oe(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Vr(this,i,e),Pn(n=Ln(this.I),"RID",t),Pn(n,"CVER",22),this.F&&Pn(n,"X-HTTP-Session-Id",this.F),Fr(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Dr(s)))+"&"+e:this.o&&kr(n,this.o,s)),rr(this.i,i),this.bb&&Pn(n,"TYPE","init"),this.P?(Pn(n,"$req",e),Pn(n,"SID","null"),i.aa=!0,vn(i,n,null)):vn(i,n,e),this.H=2}}else 3==this.H&&(t?Pr(this,t):0==this.j.length||tr(this.i)||Pr(this))},ft.Ma=function(){if(this.u=null,qr(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=en(Ct(this.jb,this),t)}},ft.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ze(10),xr(this),qr(this))},ft.ib=function(){null!=this.v&&(this.v=null,xr(this),Br(this),Ze(19))},ft.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ze(2)):(this.l.info("Failed to ping google.com"),Ze(1))},ft.isActive=function(){return!!this.h&&this.h.isActive(this)},(ft=Xr.prototype).Ba=function(){},ft.Aa=function(){},ft.za=function(){},ft.ya=function(){},ft.isActive=function(){return!0},ft.Va=function(){},Jr.prototype.g=function(t,e){return new Yr(t,e)},St(Yr,_e),Yr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ze(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Qr(t,null,t.Y),Mr(t)},Yr.prototype.close=function(){Lr(this.g)},Yr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Ie(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Mr(e)},Yr.prototype.N=function(){this.g.h=null,delete this.j,Lr(this.g),delete this.g,Yr.$.N.call(this)},St(Zr,un),St(ti,ln),St(ei,Xr),ei.prototype.Ba=function(){Te(this.g,"a")},ei.prototype.Aa=function(t){Te(this.g,new Zr(t))},ei.prototype.za=function(t){Te(this.g,new ti)},ei.prototype.ya=function(){Te(this.g,"b")},St(ni,(function(){this.blockSize=-1})),ni.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ni.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)ri(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ri(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ri(this,r),i=0;break}}this.h=i,this.i+=e},ni.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var si={};function oi(t){return-128<=t&&128>t?function(t,e){var n=si;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new ii([0|t],0>t?-1:0)}(t)}(t):new ii([0|t],0>t?-1:0)}function ai(t){if(isNaN(t)||!isFinite(t))return ci;if(0>t)return gi(ai(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=hi;return new ii(e,0)}var hi=4294967296,ci=oi(0),ui=oi(1),li=oi(16777216);function di(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function fi(t){return-1==t.h}function gi(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ii(n,~t.h).add(ui)}function pi(t,e){return t.add(gi(e))}function mi(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function yi(t,e){this.g=t,this.h=e}function vi(t,e){if(di(e))throw Error("division by zero");if(di(t))return new yi(ci,ci);if(fi(t))return e=vi(gi(t),e),new yi(gi(e.g),gi(e.h));if(fi(e))return e=vi(t,gi(e)),new yi(gi(e.g),e.h);if(30<t.g.length){if(fi(t)||fi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ui,r=e;0>=r.X(t);)n=wi(n),r=wi(r);var i=Ei(n,1),s=Ei(r,1);for(r=Ei(r,2),n=Ei(n,2);!di(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ei(r,1),n=Ei(n,1)}return e=pi(t,i.R(e)),new yi(i,e)}for(i=ci;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ai(n)).R(e);fi(o)||0<o.X(t);)o=(s=ai(n-=r)).R(e);di(s)&&(s=ui),i=i.add(s),t=pi(t,o)}return new yi(i,t)}function wi(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ii(n,t.h)}function Ei(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ii(i,t.h)}(ft=ii.prototype).ea=function(){if(fi(this))return-gi(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:hi+r)*e,e*=hi}return t},ft.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(di(this))return"0";if(fi(this))return"-"+gi(this).toString(t);for(var e=ai(Math.pow(t,6)),n=this,r="";;){var i=vi(n,e).g,s=((0<(n=pi(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(di(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ft.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},ft.X=function(t){return fi(t=pi(this,t))?-1:di(t)?0:1},ft.abs=function(){return fi(this)?gi(this):this},ft.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ii(n,-2147483648&n[n.length-1]?-1:0)},ft.R=function(t){if(di(this)||di(t))return ci;if(fi(this))return fi(t)?gi(this).R(gi(t)):gi(gi(this).R(t));if(fi(t))return gi(this.R(gi(t)));if(0>this.X(li)&&0>t.X(li))return ai(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,h=65535&t.D(i);n[2*r+2*i]+=o*h,mi(n,2*r+2*i),n[2*r+2*i+1]+=s*h,mi(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,mi(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,mi(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ii(n,0)},ft.gb=function(t){return vi(this,t).h},ft.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ii(n,this.h&t.h)},ft.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ii(n,this.h|t.h)},ft.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ii(n,this.h^t.h)},Jr.prototype.createWebChannel=Jr.prototype.g,Yr.prototype.send=Yr.prototype.u,Yr.prototype.open=Yr.prototype.m,Yr.prototype.close=Yr.prototype.close,nn.NO_ERROR=0,nn.TIMEOUT=8,nn.HTTP_ERROR=6,rn.COMPLETE="complete",an.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",_e.prototype.listen=_e.prototype.O,yr.prototype.listenOnce=yr.prototype.P,yr.prototype.getLastError=yr.prototype.Sa,yr.prototype.getLastErrorCode=yr.prototype.Ia,yr.prototype.getStatus=yr.prototype.da,yr.prototype.getResponseJson=yr.prototype.Wa,yr.prototype.getResponseText=yr.prototype.ja,yr.prototype.send=yr.prototype.ha,yr.prototype.setWithCredentials=yr.prototype.Oa,ni.prototype.digest=ni.prototype.l,ni.prototype.reset=ni.prototype.reset,ni.prototype.update=ni.prototype.j,ii.prototype.add=ii.prototype.add,ii.prototype.multiply=ii.prototype.R,ii.prototype.modulo=ii.prototype.gb,ii.prototype.compare=ii.prototype.X,ii.prototype.toNumber=ii.prototype.ea,ii.prototype.toString=ii.prototype.toString,ii.prototype.getBits=ii.prototype.D,ii.fromNumber=ai,ii.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return gi(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ai(Math.pow(n,8)),i=ci,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=ai(Math.pow(n,o)),i=i.R(o).add(ai(a))):i=(i=i.R(r)).add(ai(a))}return i};var bi=pt.createWebChannelTransport=function(){return new Jr},_i=pt.getStatEventTarget=function(){return We()},Ti=pt.ErrorCode=nn,Ci=pt.EventType=rn,Ii=pt.Event=Ge,Si=pt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ai=pt.FetchXmlHttpFactory=ur,Di=pt.WebChannel=an,ki=pt.XhrIo=yr,Ni=pt.Md5=ni,Ri=pt.Integer=ii;const Li="@firebase/firestore";class xi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");let Oi="10.1.0";const Mi=new C("@firebase/firestore");function Pi(){return Mi.logLevel}function Fi(t,...e){if(Mi.logLevel<=v.DEBUG){const n=e.map(Bi);Mi.debug(`Firestore (${Oi}): ${t}`,...n)}}function Vi(t,...e){if(Mi.logLevel<=v.ERROR){const n=e.map(Bi);Mi.error(`Firestore (${Oi}): ${t}`,...n)}}function Ui(t,...e){if(Mi.logLevel<=v.WARN){const n=e.map(Bi);Mi.warn(`Firestore (${Oi}): ${t}`,...n)}}function Bi(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function ji(t="Unexpected state"){const e=`FIRESTORE (${Oi}) INTERNAL ASSERTION FAILED: `+t;throw Vi(e),new Error(e)}function qi(t,e){t||ji()}function $i(t,e){return t}const zi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ki extends h{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hi{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Gi{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Qi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(xi.UNAUTHENTICATED)))}shutdown(){}}class Wi{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Xi{constructor(t){this.t=t,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hi,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{Fi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Fi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hi)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Fi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(qi("string"==typeof e.accessToken),new Gi(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return qi(null===t||"string"==typeof t),new xi(t)}}class Ji{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Yi{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Ji(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(xi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ts{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Fi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Fi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{Fi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):Fi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(qi("string"==typeof t.token),this.R=t.token,new Zi(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function es(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class ns{static V(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=es(40);for(let r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return e}}function rs(t,e){return t<e?-1:t>e?1:0}function is(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class ss{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ss.fromMillis(Date.now())}static fromDate(t){return ss.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new ss(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?rs(this.nanoseconds,t.nanoseconds):rs(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class os{constructor(t){this.timestamp=t}static fromTimestamp(t){return new os(t)}static min(){return new os(new ss(0,0))}static max(){return new os(new ss(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class as{constructor(t,e,n){void 0===e?e=0:e>t.length&&ji(),void 0===n?n=t.length-e:n>t.length-e&&ji(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===as.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof as?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class hs extends as{construct(t,e,n){return new hs(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Ki(zi.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new hs(e)}static emptyPath(){return new hs([])}}const cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class us extends as{construct(t,e,n){return new us(t,e,n)}static isValidIdentifier(t){return cs.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),us.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new us(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ki(zi.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Ki(zi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Ki(zi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new Ki(zi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new us(e)}static emptyPath(){return new us([])}}class ls{constructor(t){this.path=t}static fromPath(t){return new ls(hs.fromString(t))}static fromName(t){return new ls(hs.fromString(t).popFirst(5))}static empty(){return new ls(hs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===hs.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return hs.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ls(new hs(t.slice()))}}function ds(t){return new fs(t.readTime,t.key,-1)}class fs{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new fs(os.min(),ls.empty(),-1)}static max(){return new fs(os.max(),ls.empty(),-1)}}function gs(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ls.comparator(t.documentKey,e.documentKey),0!==n?n:rs(t.largestBatchId,e.largestBatchId))}const ps="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ms{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function ys(t){if(t.code!==zi.FAILED_PRECONDITION||t.message!==ps)throw t;Fi("LocalStore","Unexpectedly lost primary lease")}class vs{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ji(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new vs(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof vs?e:vs.resolve(e)}catch(t){return vs.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):vs.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):vs.reject(e)}static resolve(t){return new vs(((e,n)=>{e(t)}))}static reject(t){return new vs(((e,n)=>{n(t)}))}static waitFor(t){return new vs(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=vs.resolve(!1);for(const n of t)e=e.next((t=>t?vs.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new vs(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const h=a;e(t[h]).next((t=>{s[h]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new vs(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}function ws(t){return"IndexedDbTransactionError"===t.name}class Es{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.oe(t),this._e=t=>e.writeSequenceNumber(t))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}function bs(t){return null==t}function _s(t){return 0===t&&1/t==-1/0}Es.ae=-1;function Ts(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}class Is{constructor(t,e){this.comparator=t,this.root=e||As.EMPTY}insert(t,e){return new Is(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,As.BLACK,null,null))}remove(t){return new Is(this.comparator,this.root.remove(t,this.comparator).copy(null,null,As.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ss(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ss(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ss(this.root,t,this.comparator,!0)}}class Ss{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class As{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:As.RED,this.left=null!=r?r:As.EMPTY,this.right=null!=i?i:As.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new As(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return As.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return As.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,As.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,As.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ji();if(this.right.isRed())throw ji();const t=this.left.check();if(t!==this.right.check())throw ji();return t+(this.isRed()?0:1)}}As.EMPTY=null,As.RED=!0,As.BLACK=!1,As.EMPTY=new class{constructor(){this.size=0}get key(){throw ji()}get value(){throw ji()}get color(){throw ji()}get left(){throw ji()}get right(){throw ji()}copy(t,e,n,r,i){return this}insert(t,e,n){return new As(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ds{constructor(t){this.comparator=t,this.data=new Is(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ks(this.data.getIterator())}getIteratorFrom(t){return new ks(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Ds))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ds(this.comparator);return e.data=t,e}}class ks{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ns{constructor(t){this.fields=t,t.sort(us.comparator)}static empty(){return new Ns([])}unionWith(t){let e=new Ds(us.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Ns(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return is(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Rs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ls{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Rs("Invalid base64 string: "+t):t}}(t);return new Ls(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Ls(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rs(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ls.EMPTY_BYTE_STRING=new Ls("");const xs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(t){if(qi(!!t),"string"==typeof t){let e=0;const n=xs.exec(t);if(qi(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ms(t.seconds),nanos:Ms(t.nanos)}}function Ms(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ps(t){return"string"==typeof t?Ls.fromBase64String(t):Ls.fromUint8Array(t)}function Fs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vs(t){const e=t.mapValue.fields.__previous_value__;return Fs(e)?Vs(e):e}function Us(t){const e=Os(t.mapValue.fields.__local_write_time__.timestampValue);return new ss(e.seconds,e.nanos)}class Bs{constructor(t,e,n,r,i,s,o,a,h){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=h}}class js{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new js("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof js&&t.projectId===this.projectId&&t.database===this.database}}const qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fs(t)?4:no(t)?9007199254740991:10:ji()}function zs(t,e){if(t===e)return!0;const n=$s(t);if(n!==$s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Us(t).isEqual(Us(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Os(t.timestampValue),r=Os(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ps(t.bytesValue).isEqual(Ps(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ms(t.geoPointValue.latitude)===Ms(e.geoPointValue.latitude)&&Ms(t.geoPointValue.longitude)===Ms(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ms(t.integerValue)===Ms(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ms(t.doubleValue),r=Ms(e.doubleValue);return n===r?_s(n)===_s(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return is(t.arrayValue.values||[],e.arrayValue.values||[],zs);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ts(n)!==Ts(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!zs(n[t],r[t])))return!1;return!0}(t,e);default:return ji()}}function Ks(t,e){return void 0!==(t.values||[]).find((t=>zs(t,e)))}function Hs(t,e){if(t===e)return 0;const n=$s(t),r=$s(e);if(n!==r)return rs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rs(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ms(t.integerValue||t.doubleValue),r=Ms(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Gs(t.timestampValue,e.timestampValue);case 4:return Gs(Us(t),Us(e));case 5:return rs(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Ps(t),r=Ps(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=rs(n[t],r[t]);if(0!==e)return e}return rs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=rs(Ms(t.latitude),Ms(e.latitude));return 0!==n?n:rs(Ms(t.longitude),Ms(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=Hs(n[t],r[t]);if(e)return e}return rs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===qs.mapValue&&e===qs.mapValue)return 0;if(t===qs.mapValue)return 1;if(e===qs.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=rs(r[t],s[t]);if(0!==e)return e;const o=Hs(n[r[t]],i[s[t]]);if(0!==o)return o}return rs(r.length,s.length)}(t.mapValue,e.mapValue);default:throw ji()}}function Gs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rs(t,e);const n=Os(t),r=Os(e),i=rs(n.seconds,r.seconds);return 0!==i?i:rs(n.nanos,r.nanos)}function Qs(t){return Ws(t)}function Ws(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Os(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Ps(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return ls.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Ws(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${Ws(t.fields[i])}`;return n+"}"}(t.mapValue):ji()}function Xs(t){return!!t&&"integerValue"in t}function Js(t){return!!t&&"arrayValue"in t}function Ys(t){return!!t&&"nullValue"in t}function Zs(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function to(t){return!!t&&"mapValue"in t}function eo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=eo(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function no(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class ro{constructor(t){this.value=t}static empty(){return new ro({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!to(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=eo(e)}setAll(t){let e=us.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=eo(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());to(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return zs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];to(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Cs(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new ro(eo(this.value))}}class io{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new io(t,0,os.min(),os.min(),os.min(),ro.empty(),0)}static newFoundDocument(t,e,n,r){return new io(t,1,e,os.min(),n,r,0)}static newNoDocument(t,e){return new io(t,2,e,os.min(),os.min(),ro.empty(),0)}static newUnknownDocument(t,e){return new io(t,3,e,os.min(),os.min(),ro.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(os.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ro.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ro.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=os.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof io&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new io(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class so{constructor(t,e){this.position=t,this.inclusive=e}}function oo(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ls.comparator(ls.fromName(o.referenceValue),n.key):Hs(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ao(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zs(t.position[n],e.position[n]))return!1;return!0}class ho{constructor(t,e="asc"){this.field=t,this.dir=e}}function co(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class uo{}class lo extends uo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new wo(t,e,n):"array-contains"===e?new To(t,n):"in"===e?new Co(t,n):"not-in"===e?new Io(t,n):"array-contains-any"===e?new So(t,n):new lo(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Eo(t,n):new bo(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Hs(e,this.value)):null!==e&&$s(this.value)===$s(e)&&this.matchesComparison(Hs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ji()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class fo extends uo{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new fo(t,e)}matches(t){return go(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.le((t=>t.isInequality()));return null!==t?t.field:null}le(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function go(t){return"and"===t.op}function po(t){return function(t){for(const e of t.filters)if(e instanceof fo)return!1;return!0}(t)&&go(t)}function mo(t){if(t instanceof lo)return t.field.canonicalString()+t.op.toString()+Qs(t.value);if(po(t))return t.filters.map((t=>mo(t))).join(",");{const e=t.filters.map((t=>mo(t))).join(",");return`${t.op}(${e})`}}function yo(t,e){return t instanceof lo?function(t,e){return e instanceof lo&&t.op===e.op&&t.field.isEqual(e.field)&&zs(t.value,e.value)}(t,e):t instanceof fo?function(t,e){return e instanceof fo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&yo(n,e.filters[r])),!0)}(t,e):void ji()}function vo(t){return t instanceof lo?function(t){return`${t.field.canonicalString()} ${t.op} ${Qs(t.value)}`}(t):t instanceof fo?function(t){return t.op.toString()+" {"+t.getFilters().map(vo).join(" ,")+"}"}(t):"Filter"}class wo extends lo{constructor(t,e,n){super(t,e,n),this.key=ls.fromName(n.referenceValue)}matches(t){const e=ls.comparator(t.key,this.key);return this.matchesComparison(e)}}class Eo extends lo{constructor(t,e){super(t,"in",e),this.keys=_o(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class bo extends lo{constructor(t,e){super(t,"not-in",e),this.keys=_o(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function _o(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>ls.fromName(t.referenceValue)))}class To extends lo{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Js(e)&&Ks(e.arrayValue,this.value)}}class Co extends lo{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Ks(this.value.arrayValue,e)}}class Io extends lo{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ks(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Ks(this.value.arrayValue,e)}}class So extends lo{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Js(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Ks(this.value.arrayValue,t)))}}class Ao{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.he=null}}function Do(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Ao(t,e,n,r,i,s,o)}function ko(t){const e=$i(t);if(null===e.he){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>mo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),bs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Qs(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Qs(t))).join(",")),e.he=t}return e.he}function No(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!co(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yo(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ao(t.startAt,e.startAt)&&ao(t.endAt,e.endAt)}function Ro(t){return ls.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Lo{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Pe=null,this.Ie=null,this.startAt,this.endAt}}function xo(t){return new Lo(t)}function Oo(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Mo(t){const e=$i(t);if(null===e.Pe){e.Pe=[];const t=function(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.Pe.push(new ho(t)),e.Pe.push(new ho(us.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.Pe.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new ho(us.keyField(),t))}}}return e.Pe}function Po(t){const e=$i(t);if(!e.Ie)if("F"===e.limitType)e.Ie=Do(e.path,e.collectionGroup,Mo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Mo(e)){const e="desc"===n.dir?"asc":"desc";t.push(new ho(n.field,e))}const n=e.endAt?new so(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new so(e.startAt.position,e.startAt.inclusive):null;e.Ie=Do(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.Ie}function Fo(t,e,n){return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vo(t,e){return No(Po(t),Po(e))&&t.limitType===e.limitType}function Uo(t){return`${ko(Po(t))}|lt:${t.limitType}`}function Bo(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>vo(t))).join(", ")}]`),bs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Qs(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Qs(t))).join(",")),`Target(${e})`}(Po(t))}; limitType=${t.limitType})`}function jo(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ls.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Mo(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=oo(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Mo(t),e)||t.endAt&&!function(t,e,n){const r=oo(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Mo(t),e))}(t,e)}function qo(t){return(e,n)=>{let r=!1;for(const i of Mo(t)){const t=$o(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function $o(t,e,n){const r=t.field.isKeyField()?ls.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Hs(r,i):ji()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ji()}}class zo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Cs(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const Ko=new Is(ls.comparator);function Ho(){return Ko}const Go=new Is(ls.comparator);function Qo(...t){let e=Go;for(const n of t)e=e.insert(n.key,n);return e}function Wo(t){let e=Go;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Xo(){return Yo()}function Jo(){return Yo()}function Yo(){return new zo((t=>t.toString()),((t,e)=>t.isEqual(e)))}new Is(ls.comparator);const Zo=new Ds(ls.comparator);function ta(...t){let e=Zo;for(const n of t)e=e.add(n);return e}const ea=new Ds(rs);class na{constructor(){this._=void 0}}function ra(t,e,n){return t instanceof sa?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Fs(e)&&(e=Vs(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof oa?aa(t,e):t instanceof ha?ca(t,e):function(t,e){const n=function(t,e){return t instanceof ua?function(t){return Xs(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}(t,e),r=la(n)+la(t.Te);return Xs(n)&&Xs(t.Te)?function(t){return{integerValue:""+t}}(r):function(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_s(e)?"-0":e}}(t.serializer,r)}(t,e)}function ia(t,e,n){return t instanceof oa?aa(t,e):t instanceof ha?ca(t,e):n}class sa extends na{}class oa extends na{constructor(t){super(),this.elements=t}}function aa(t,e){const n=da(e);for(const e of t.elements)n.some((t=>zs(t,e)))||n.push(e);return{arrayValue:{values:n}}}class ha extends na{constructor(t){super(),this.elements=t}}function ca(t,e){let n=da(e);for(const e of t.elements)n=n.filter((t=>!zs(t,e)));return{arrayValue:{values:n}}}class ua extends na{constructor(t,e){super(),this.serializer=t,this.Te=e}}function la(t){return Ms(t.integerValue||t.doubleValue)}function da(t){return Js(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class fa{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new fa}static exists(t){return new fa(void 0,t)}static updateTime(t){return new fa(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ga(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class pa{}function ma(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Ia(t.key,fa.none()):new Ea(t.key,t.data,fa.none());{const n=t.data,r=ro.empty();let i=new Ds(us.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new ba(t.key,r,new Ns(i.toArray()),fa.none())}}function ya(t,e,n){t instanceof Ea?function(t,e,n){const r=t.value.clone(),i=Ta(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ba?function(t,e,n){if(!ga(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Ta(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(_a(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function va(t,e,n,r){return t instanceof Ea?function(t,e,n,r){if(!ga(t.precondition,e))return n;const i=t.value.clone(),s=Ca(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof ba?function(t,e,n,r){if(!ga(t.precondition,e))return n;const i=Ca(t.fieldTransforms,r,e),s=e.data;return s.setAll(_a(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return ga(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function wa(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&is(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof oa&&e instanceof oa||t instanceof ha&&e instanceof ha?is(t.elements,e.elements,zs):t instanceof ua&&e instanceof ua?zs(t.Te,e.Te):t instanceof sa&&e instanceof sa}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ea extends pa{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ba extends pa{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _a(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ta(t,e,n){const r=new Map;qi(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ia(o,a,n[i]))}return r}function Ca(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,ra(t,s,e))}return r}class Ia extends pa{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sa{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&ya(r,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=va(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=va(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Jo();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=ma(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(os.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ta())}isEqual(t){return this.batchId===t.batchId&&is(this.mutations,t.mutations,((t,e)=>wa(t,e)))&&is(this.baseMutations,t.baseMutations,((t,e)=>wa(t,e)))}}class Aa{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Da{constructor(t,e){this.count=t,this.unchangedNames=e}}var ka,Na;function Ra(t){if(void 0===t)return Vi("GRPC error has no .code"),zi.UNKNOWN;switch(t){case ka.OK:return zi.OK;case ka.CANCELLED:return zi.CANCELLED;case ka.UNKNOWN:return zi.UNKNOWN;case ka.DEADLINE_EXCEEDED:return zi.DEADLINE_EXCEEDED;case ka.RESOURCE_EXHAUSTED:return zi.RESOURCE_EXHAUSTED;case ka.INTERNAL:return zi.INTERNAL;case ka.UNAVAILABLE:return zi.UNAVAILABLE;case ka.UNAUTHENTICATED:return zi.UNAUTHENTICATED;case ka.INVALID_ARGUMENT:return zi.INVALID_ARGUMENT;case ka.NOT_FOUND:return zi.NOT_FOUND;case ka.ALREADY_EXISTS:return zi.ALREADY_EXISTS;case ka.PERMISSION_DENIED:return zi.PERMISSION_DENIED;case ka.FAILED_PRECONDITION:return zi.FAILED_PRECONDITION;case ka.ABORTED:return zi.ABORTED;case ka.OUT_OF_RANGE:return zi.OUT_OF_RANGE;case ka.UNIMPLEMENTED:return zi.UNIMPLEMENTED;case ka.DATA_LOSS:return zi.DATA_LOSS;default:return ji()}}(Na=ka||(ka={}))[Na.OK=0]="OK",Na[Na.CANCELLED=1]="CANCELLED",Na[Na.UNKNOWN=2]="UNKNOWN",Na[Na.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Na[Na.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Na[Na.NOT_FOUND=5]="NOT_FOUND",Na[Na.ALREADY_EXISTS=6]="ALREADY_EXISTS",Na[Na.PERMISSION_DENIED=7]="PERMISSION_DENIED",Na[Na.UNAUTHENTICATED=16]="UNAUTHENTICATED",Na[Na.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Na[Na.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Na[Na.ABORTED=10]="ABORTED",Na[Na.OUT_OF_RANGE=11]="OUT_OF_RANGE",Na[Na.UNIMPLEMENTED=12]="UNIMPLEMENTED",Na[Na.INTERNAL=13]="INTERNAL",Na[Na.UNAVAILABLE=14]="UNAVAILABLE",Na[Na.DATA_LOSS=15]="DATA_LOSS";class La{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return xa}static getOrCreateInstance(){return null===xa&&(xa=new La),xa}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach((e=>e(t)))}}let xa=null;const Oa=new Ri([4294967295,4294967295],0);function Ma(t){const e=(new TextEncoder).encode(t),n=new Ni;return n.update(e),new Uint8Array(n.digest())}function Pa(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([i,s],0)]}class Fa{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Va(`Invalid padding: ${e}`);if(n<0)throw new Va(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Va(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Va(`Invalid padding when bitmap length is 0: ${e}`);this.de=8*t.length-e,this.Ae=Ri.fromNumber(this.de)}Re(t,e,n){let r=t.add(e.multiply(Ri.fromNumber(n)));return 1===r.compare(Oa)&&(r=new Ri([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}Ve(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.de)return!1;const e=Ma(t),[n,r]=Pa(e);for(let t=0;t<this.hashCount;t++){const e=this.Re(n,r,t);if(!this.Ve(e))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new Fa(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.de)return;const e=Ma(t),[n,r]=Pa(e);for(let t=0;t<this.hashCount;t++){const e=this.Re(n,r,t);this.me(e)}}me(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ua{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,Ba.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Ua(os.min(),r,new Is(rs),Ho(),ta())}}class Ba{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Ba(n,e,ta(),ta(),ta())}}class ja{constructor(t,e,n,r){this.fe=t,this.removedTargetIds=e,this.key=n,this.ge=r}}class qa{constructor(t,e){this.targetId=t,this.pe=e}}class $a{constructor(t,e,n=Ls.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class za{constructor(){this.ye=0,this.we=Ga(),this.Se=Ls.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}get current(){return this.be}get resumeToken(){return this.Se}get ve(){return 0!==this.ye}get Ce(){return this.De}Fe(t){t.approximateByteSize()>0&&(this.De=!0,this.Se=t)}Me(){let t=ta(),e=ta(),n=ta();return this.we.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ji()}})),new Ba(this.Se,this.be,t,e,n)}xe(){this.De=!1,this.we=Ga()}Oe(t,e){this.De=!0,this.we=this.we.insert(t,e)}Ne(t){this.De=!0,this.we=this.we.remove(t)}Be(){this.ye+=1}Le(){this.ye-=1}ke(){this.De=!0,this.be=!0}}class Ka{constructor(t){this.qe=t,this.Qe=new Map,this.Ke=Ho(),this.$e=Ha(),this.Ue=new Is(rs)}We(t){for(const e of t.fe)t.ge&&t.ge.isFoundDocument()?this.Ge(e,t.ge):this.ze(e,t.key,t.ge);for(const e of t.removedTargetIds)this.ze(e,t.key,t.ge)}je(t){this.forEachTarget(t,(e=>{const n=this.He(e);switch(t.state){case 0:this.Je(e)&&n.Fe(t.resumeToken);break;case 1:n.Le(),n.ve||n.xe(),n.Fe(t.resumeToken);break;case 2:n.Le(),n.ve||this.removeTarget(e);break;case 3:this.Je(e)&&(n.ke(),n.Fe(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),n.Fe(t.resumeToken));break;default:ji()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qe.forEach(((t,n)=>{this.Je(n)&&e(n)}))}Ze(t){var e,n;const r=t.targetId,i=t.pe.count,s=this.Xe(r);if(s){const o=s.target;if(Ro(o))if(0===i){const t=new ls(o.path);this.ze(r,t,io.newNoDocument(t,os.min()))}else qi(1===i);else{const s=this.et(r);if(s!==i){const i=this.tt(t,s);if(0!==i.status){this.Ye(r);const t=2===i.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,t)}null===(e=La.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(t,e,n,r){var i,s,o,a,h,c;const u={localCacheCount:n,existenceFilterCount:r.count},l=r.unchangedNames;return l&&(u.bloomFilter={applied:0===t,hashCount:null!==(i=null==l?void 0:l.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(a=null===(o=null===(s=null==l?void 0:l.bits)||void 0===s?void 0:s.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(c=null===(h=null==l?void 0:l.bits)||void 0===h?void 0:h.padding)&&void 0!==c?c:0},e&&(u.bloomFilter.mightContain=e)),u}(i.status,null!==(n=i.nt)&&void 0!==n?n:null,s,t.pe))}}}}tt(t,e){const{unchangedNames:n,count:r}=t.pe;if(!n||!n.bits)return{status:1};const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,h;try{a=Ps(i).toUint8Array()}catch(t){if(t instanceof Rs)return Ui("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw t}try{h=new Fa(a,s,o)}catch(t){return Ui(t instanceof Va?"BloomFilter error: ":"Applying bloom filter failed: ",t),{status:1}}const c=t=>{const e=this.qe.rt();return h.mightContain(`projects/${e.projectId}/databases/${e.database}/documents/${t}`)};return 0===h.de?{status:1}:{status:r===e-this.it(t.targetId,c)?0:2,nt:c}}it(t,e){const n=this.qe.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{e(n.path.canonicalString())||(this.ze(t,n,null),r++)})),r}st(t){const e=new Map;this.Qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&Ro(i.target)){const e=new ls(i.target.path);null!==this.Ke.get(e)||this.ot(r,e)||this.ze(r,e,io.newNoDocument(e,t))}n.Ce&&(e.set(r,n.Me()),n.xe())}}));let n=ta();this.$e.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Xe(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.Ke.forEach(((e,n)=>n.setReadTime(t)));const r=new Ua(t,e,this.Ue,this.Ke,n);return this.Ke=Ho(),this.$e=Ha(),this.Ue=new Is(rs),r}Ge(t,e){if(!this.Je(t))return;const n=this.ot(t,e.key)?2:0;this.He(t).Oe(e.key,n),this.Ke=this.Ke.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t))}ze(t,e,n){if(!this.Je(t))return;const r=this.He(t);this.ot(t,e)?r.Oe(e,1):r.Ne(e),this.$e=this.$e.insert(e,this._t(e).delete(t)),n&&(this.Ke=this.Ke.insert(e,n))}removeTarget(t){this.Qe.delete(t)}et(t){const e=this.He(t).Me();return this.qe.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Be(t){this.He(t).Be()}He(t){let e=this.Qe.get(t);return e||(e=new za,this.Qe.set(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Ds(rs),this.$e=this.$e.insert(t,e)),e}Je(t){const e=null!==this.Xe(t);return e||Fi("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.Qe.get(t);return e&&e.ve?null:this.qe.ut(t)}Ye(t){this.Qe.set(t,new za),this.qe.getRemoteKeysForTarget(t).forEach((e=>{this.ze(t,e,null)}))}ot(t,e){return this.qe.getRemoteKeysForTarget(t).has(e)}}function Ha(){return new Is(ls.comparator)}function Ga(){return new Is(ls.comparator)}const Qa={asc:"ASCENDING",desc:"DESCENDING"},Wa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xa={and:"AND",or:"OR"};class Ja{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ya(t,e){return t.useProto3Json||bs(e)?e:{value:e}}function Za(t){return qi(!!t),os.fromTimestamp(function(t){const e=Os(t);return new ss(e.seconds,e.nanos)}(t))}function th(t){const e=hs.fromString(t);return qi(ph(e)),e}function eh(t,e){const n=th(e);if(n.get(1)!==t.databaseId.projectId)throw new Ki(zi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ki(zi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ls(ih(n))}function nh(t,e){return function(t,e){return function(t){return new hs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}(t.databaseId,e)}function rh(t){return new hs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ih(t){return qi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function sh(t,e){return{documents:[nh(t,e.path)]}}function oh(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=nh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=nh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0!==t.length)return gh(fo.create(t,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:dh(t.field),direction:ch(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Ya(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function ah(t){let e=function(t){const e=th(t);return 4===e.length?hs.emptyPath():ih(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){qi(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=hh(t);return e instanceof fo&&po(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new ho(fh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,bs(e)?null:e}(n.limit));let h=null;n.startAt&&(h=function(t){const e=!!t.before,n=t.values||[];return new so(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new so(n,e)}(n.endAt)),function(t,e,n,r,i,s,o,a){return new Lo(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",h,c)}function hh(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=fh(t.unaryFilter.field);return lo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=fh(t.unaryFilter.field);return lo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fh(t.unaryFilter.field);return lo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=fh(t.unaryFilter.field);return lo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ji()}}(t):void 0!==t.fieldFilter?function(t){return lo.create(fh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ji()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return fo.create(t.compositeFilter.filters.map((t=>hh(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ji()}}(t.compositeFilter.op))}(t):ji()}function ch(t){return Qa[t]}function uh(t){return Wa[t]}function lh(t){return Xa[t]}function dh(t){return{fieldPath:t.canonicalString()}}function fh(t){return us.fromServerFormat(t.fieldPath)}function gh(t){return t instanceof lo?function(t){if("=="===t.op){if(Zs(t.value))return{unaryFilter:{field:dh(t.field),op:"IS_NAN"}};if(Ys(t.value))return{unaryFilter:{field:dh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Zs(t.value))return{unaryFilter:{field:dh(t.field),op:"IS_NOT_NAN"}};if(Ys(t.value))return{unaryFilter:{field:dh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dh(t.field),op:uh(t.op),value:t.value}}}(t):t instanceof fo?function(t){const e=t.getFilters().map((t=>gh(t)));return 1===e.length?e[0]:{compositeFilter:{op:lh(t.op),filters:e}}}(t):ji()}function ph(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class mh{constructor(t,e,n,r,i=os.min(),s=os.min(),o=Ls.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new mh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class yh{constructor(t){this.ct=t}}function vh(t){const e=ah({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Fo(e,e.limit,"L"):e}class wh{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(Ms(t.integerValue));else if("doubleValue"in t){const n=Ms(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),_s(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(Ps(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?no(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):ji()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),ls.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}wh.bt=new wh;class Eh{constructor(){this.sn=new bh}addToCollectionParentIndex(t,e){return this.sn.add(e),vs.resolve()}getCollectionParents(t,e){return vs.resolve(this.sn.getEntries(e))}addFieldIndex(t,e){return vs.resolve()}deleteFieldIndex(t,e){return vs.resolve()}getDocumentsMatchingTarget(t,e){return vs.resolve(null)}getIndexType(t,e){return vs.resolve(0)}getFieldIndexes(t,e){return vs.resolve([])}getNextCollectionGroupToUpdate(t){return vs.resolve(null)}getMinOffset(t,e){return vs.resolve(fs.min())}getMinOffsetFromCollectionGroup(t,e){return vs.resolve(fs.min())}updateCollectionGroup(t,e,n){return vs.resolve()}updateIndexEntries(t,e){return vs.resolve()}}class bh{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ds(hs.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Ds(hs.comparator)).toArray()}}new Uint8Array(0);class _h{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new _h(t,_h.DEFAULT_COLLECTION_PERCENTILE,_h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}_h.DEFAULT_COLLECTION_PERCENTILE=10,_h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_h.DEFAULT=new _h(41943040,_h.DEFAULT_COLLECTION_PERCENTILE,_h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_h.DISABLED=new _h(-1,0,0);class Th{constructor(t){this.Mn=t}next(){return this.Mn+=2,this.Mn}static xn(){return new Th(0)}static On(){return new Th(-1)}}class Ch{constructor(){this.changes=new zo((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,io.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?vs.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Ih{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Sh{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&va(n.mutation,t,Ns.empty(),ss.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,ta()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=ta()){const r=Xo();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=Qo();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Xo();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,ta())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=Ho();const s=Yo(),o=Yo();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof ba)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),va(o.mutation,e,o.mutation.getFieldMask(),ss.now())):s.set(e.key,Ns.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Ih(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Yo();let r=new Is(((t,e)=>t-e)),i=ta();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Ns.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||ta()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,h=r.value,c=Jo();h.forEach((t=>{if(!i.has(t)){const r=ma(e.get(t),n.get(t));null!==r&&c.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return vs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return ls.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):vs.resolve(Xo());let o=-1,a=i;return s.next((e=>vs.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?vs.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,ta()))).next((t=>({batchId:o,changes:Wo(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ls(e)).next((t=>{let e=Qo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const r=e.collectionGroup;let i=Qo();return this.indexManager.getCollectionParents(t,r).next((s=>vs.forEach(s,(s=>{const o=function(t,e){return new Lo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(t,e,n){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r)))).next((t=>{r.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,io.newInvalidDocument(r)))}));let n=Qo();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&va(s.mutation,i,Ns.empty(),ss.now()),jo(e,i)&&(n=n.insert(t,i))})),n}))}}class Ah{constructor(t){this.serializer=t,this.ar=new Map,this.ur=new Map}getBundleMetadata(t,e){return vs.resolve(this.ar.get(e))}saveBundleMetadata(t,e){return this.ar.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Za(t.createTime)}}(e)),vs.resolve()}getNamedQuery(t,e){return vs.resolve(this.ur.get(e))}saveNamedQuery(t,e){return this.ur.set(e.name,function(t){return{name:t.name,query:vh(t.bundledQuery),readTime:Za(t.readTime)}}(e)),vs.resolve()}}class Dh{constructor(){this.overlays=new Is(ls.comparator),this.cr=new Map}getOverlay(t,e){return vs.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Xo();return vs.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.ht(t,e,r)})),vs.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.cr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.cr.delete(n)),vs.resolve()}getOverlaysForCollection(t,e,n){const r=Xo(),i=e.length+1,s=new ls(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return vs.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new Is(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=Xo(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Xo(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return vs.resolve(o)}ht(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Aa(e,n));let i=this.cr.get(e);void 0===i&&(i=ta(),this.cr.set(e,i)),this.cr.set(e,i.add(n.key))}}class kh{constructor(){this.lr=new Ds(Nh.hr),this.Pr=new Ds(Nh.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(t,e){const n=new Nh(t,e);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}Tr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Er(new Nh(t,e))}dr(t,e){t.forEach((t=>this.removeReference(t,e)))}Ar(t){const e=new ls(new hs([])),n=new Nh(e,t),r=new Nh(e,t+1),i=[];return this.Pr.forEachInRange([n,r],(t=>{this.Er(t),i.push(t.key)})),i}Rr(){this.lr.forEach((t=>this.Er(t)))}Er(t){this.lr=this.lr.delete(t),this.Pr=this.Pr.delete(t)}Vr(t){const e=new ls(new hs([])),n=new Nh(e,t),r=new Nh(e,t+1);let i=ta();return this.Pr.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new Nh(t,0),n=this.lr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Nh{constructor(t,e){this.key=t,this.mr=e}static hr(t,e){return ls.comparator(t.key,e.key)||rs(t.mr,e.mr)}static Ir(t,e){return rs(t.mr,e.mr)||ls.comparator(t.key,e.key)}}class Rh{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.gr=1,this.pr=new Ds(Nh.hr)}checkEmpty(t){return vs.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Sa(i,e,n,r);this.mutationQueue.push(s);for(const e of r)this.pr=this.pr.add(new Nh(e.key,i)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return vs.resolve(s)}lookupMutationBatch(t,e){return vs.resolve(this.yr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.wr(n),i=r<0?0:r;return vs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return vs.resolve(0===this.mutationQueue.length?-1:this.gr-1)}getAllMutationBatches(t){return vs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Nh(e,0),r=new Nh(e,Number.POSITIVE_INFINITY),i=[];return this.pr.forEachInRange([n,r],(t=>{const e=this.yr(t.mr);i.push(e)})),vs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ds(rs);return e.forEach((t=>{const e=new Nh(t,0),r=new Nh(t,Number.POSITIVE_INFINITY);this.pr.forEachInRange([e,r],(t=>{n=n.add(t.mr)}))})),vs.resolve(this.Sr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;ls.isDocumentKey(i)||(i=i.child(""));const s=new Nh(new ls(i),0);let o=new Ds(rs);return this.pr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.mr)),!0)}),s),vs.resolve(this.Sr(o))}Sr(t){const e=[];return t.forEach((t=>{const n=this.yr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){qi(0===this.br(e.batchId,"removed")),this.mutationQueue.shift();let n=this.pr;return vs.forEach(e.mutations,(r=>{const i=new Nh(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.pr=n}))}Cn(t){}containsKey(t,e){const n=new Nh(e,0),r=this.pr.firstAfterOrEqual(n);return vs.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,vs.resolve()}br(t,e){return this.wr(t)}wr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}yr(t){const e=this.wr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Lh{constructor(t){this.Dr=t,this.docs=new Is(ls.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.Dr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return vs.resolve(n?n.document.mutableCopy():io.newInvalidDocument(e))}getEntries(t,e){let n=Ho();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():io.newInvalidDocument(t))})),vs.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=Ho();const s=e.path,o=new ls(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||gs(ds(o),n)<=0||(r.has(o.key)||jo(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return vs.resolve(i)}getAllFromCollectionGroup(t,e,n,r){ji()}vr(t,e){return vs.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new xh(this)}getSize(t){return vs.resolve(this.size)}}class xh extends Ch{constructor(t){super(),this.sr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.sr.addEntry(t,r)):this.sr.removeEntry(n)})),vs.waitFor(e)}getFromCache(t,e){return this.sr.getEntry(t,e)}getAllFromCache(t,e){return this.sr.getEntries(t,e)}}class Oh{constructor(t){this.persistence=t,this.Cr=new zo((t=>ko(t)),No),this.lastRemoteSnapshotVersion=os.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new kh,this.targetCount=0,this.Or=Th.xn()}forEachTarget(t,e){return this.Cr.forEach(((t,n)=>e(n))),vs.resolve()}getLastRemoteSnapshotVersion(t){return vs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return vs.resolve(this.Fr)}allocateTargetId(t){return this.highestTargetId=this.Or.next(),vs.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Fr&&(this.Fr=e),vs.resolve()}Ln(t){this.Cr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Or=new Th(e),this.highestTargetId=e),t.sequenceNumber>this.Fr&&(this.Fr=t.sequenceNumber)}addTargetData(t,e){return this.Ln(e),this.targetCount+=1,vs.resolve()}updateTargetData(t,e){return this.Ln(e),vs.resolve()}removeTargetData(t,e){return this.Cr.delete(e.target),this.Mr.Ar(e.targetId),this.targetCount-=1,vs.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Cr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Cr.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),vs.waitFor(i).next((()=>r))}getTargetCount(t){return vs.resolve(this.targetCount)}getTargetData(t,e){const n=this.Cr.get(e)||null;return vs.resolve(n)}addMatchingKeys(t,e,n){return this.Mr.Tr(e,n),vs.resolve()}removeMatchingKeys(t,e,n){this.Mr.dr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),vs.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Mr.Ar(e),vs.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Mr.Vr(e);return vs.resolve(n)}containsKey(t,e){return vs.resolve(this.Mr.containsKey(e))}}class Mh{constructor(t,e){this.Nr={},this.overlays={},this.Br=new Es(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new Oh(this),this.indexManager=new Eh,this.remoteDocumentCache=function(t){return new Lh(t)}((t=>this.referenceDelegate.qr(t))),this.serializer=new yh(e),this.Qr=new Ah(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Dh,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Nr[t.toKey()];return n||(n=new Rh(e,this.referenceDelegate),this.Nr[t.toKey()]=n),n}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(t,e,n){Fi("MemoryPersistence","Starting transaction:",t);const r=new Ph(this.Br.next());return this.referenceDelegate.Kr(),n(r).next((t=>this.referenceDelegate.$r(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Ur(t,e){return vs.or(Object.values(this.Nr).map((n=>()=>n.containsKey(t,e))))}}class Ph extends ms{constructor(t){super(),this.currentSequenceNumber=t}}class Fh{constructor(t){this.persistence=t,this.Wr=new kh,this.Gr=null}static zr(t){return new Fh(t)}get jr(){if(this.Gr)return this.Gr;throw ji()}addReference(t,e,n){return this.Wr.addReference(n,e),this.jr.delete(n.toString()),vs.resolve()}removeReference(t,e,n){return this.Wr.removeReference(n,e),this.jr.add(n.toString()),vs.resolve()}markPotentiallyOrphaned(t,e){return this.jr.add(e.toString()),vs.resolve()}removeTarget(t,e){this.Wr.Ar(e.targetId).forEach((t=>this.jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Kr(){this.Gr=new Set}$r(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vs.forEach(this.jr,(n=>{const r=ls.fromPath(n);return this.Hr(t,r).next((t=>{t||e.removeEntry(r,os.min())}))})).next((()=>(this.Gr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Hr(t,e).next((t=>{t?this.jr.delete(e.toString()):this.jr.add(e.toString())}))}qr(t){return 0}Hr(t,e){return vs.or([()=>vs.resolve(this.Wr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ur(t,e)])}}class Vh{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Li=n,this.ki=r}static qi(t,e){let n=ta(),r=ta();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new Vh(t,e.fromCache,n,r)}}class Uh{constructor(){this.Qi=!1}initialize(t,e){this.Ki=t,this.indexManager=e,this.Qi=!0}getDocumentsMatchingQuery(t,e,n,r){return this.$i(t,e).next((i=>i||this.Ui(t,e,r,n))).next((n=>n||this.Wi(t,e)))}$i(t,e){if(Oo(e))return vs.resolve(null);let n=Po(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=Fo(e,null,"F"),n=Po(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=ta(...r);return this.Ki.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Gi(e,r);return this.zi(e,s,i,n.readTime)?this.$i(t,Fo(e,null,"F")):this.ji(t,s,e,n)}))))})))))}Ui(t,e,n,r){return Oo(e)||r.isEqual(os.min())?this.Wi(t,e):this.Ki.getDocuments(t,n).next((i=>{const s=this.Gi(e,i);return this.zi(e,s,n,r)?this.Wi(t,e):(Pi()<=v.DEBUG&&Fi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bo(e)),this.ji(t,s,e,function(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=os.fromTimestamp(1e9===r?new ss(n+1,0):new ss(n,r));return new fs(i,ls.empty(),e)}(r,-1)))}))}Gi(t,e){let n=new Ds(qo(t));return e.forEach(((e,r)=>{jo(t,r)&&(n=n.add(r))})),n}zi(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Wi(t,e){return Pi()<=v.DEBUG&&Fi("QueryEngine","Using full collection scan to execute query:",Bo(e)),this.Ki.getDocumentsMatchingQuery(t,e,fs.min())}ji(t,e,n,r){return this.Ki.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Bh{constructor(t,e,n,r){this.persistence=t,this.Hi=e,this.serializer=r,this.Ji=new Is(rs),this.Yi=new zo((t=>ko(t)),No),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(n)}es(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Sh(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ji)))}}async function jh(t,e){const n=$i(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.es(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=ta();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({ts:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function qh(t){const e=$i(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.kr.getLastRemoteSnapshotVersion(t)))}async function $h(t,e,n){const r=$i(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!ws(t))throw t;Fi("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function zh(t,e,n){const r=$i(t);let i=os.min(),s=ta();return r.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const r=$i(t),i=r.Yi.get(n);return void 0!==i?vs.resolve(r.Ji.get(i)):r.kr.getTargetData(e,n)}(r,t,Po(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.Hi.getDocumentsMatchingQuery(t,e,n?i:os.min(),n?s:ta()))).next((t=>(function(t,e,n){let r=t.Zi.get(e)||os.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.Zi.set(e,r)}(r,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,ss:s})))))}class Kh{constructor(){this.activeTargetIds=ea}hs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ps(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ls(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Hh{constructor(){this.Hs=new Kh,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Hs.hs(t),this.Js[t]||"not-current"}updateQueryState(t,e,n){this.Js[t]=e}removeLocalQueryTarget(t){this.Hs.Ps(t)}isLocalQueryTarget(t){return this.Hs.activeTargetIds.has(t)}clearQueryState(t){delete this.Js[t]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(t){return this.Hs.activeTargetIds.has(t)}start(){return this.Hs=new Kh,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Gh{Ys(t){}shutdown(){}}class Qh{constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(t){this.ro.push(t)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){Fi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ro)t(0)}no(){Fi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ro)t(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Wh=null;function Xh(){return null===Wh?Wh=268435456+Math.round(2147483648*Math.random()):Wh++,"0x"+Wh.toString(16)}const Jh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yh{constructor(t){this.so=t.so,this.oo=t.oo}_o(t){this.ao=t}uo(t){this.co=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.so(t)}ho(){this.ao()}Po(t){this.co(t)}Io(t){this.lo(t)}}const Zh="WebChannelConnection";class tc extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.To=e+"://"+t.host,this.Eo=`projects/${n}/databases/${r}`,this.Ao="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Ro(){return!1}Vo(t,e,n,r,i){const s=Xh(),o=this.mo(t,e);Fi("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(a,r,i),this.po(t,o,a,n).then((e=>(Fi("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Ui("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}yo(t,e,n,r,i,s){return this.Vo(t,e,n,r,i)}fo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Oi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}mo(t,e){const n=Jh[t];return`${this.To}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}po(t,e,n,r){const i=Xh();return new Promise(((s,o)=>{const a=new ki;a.setWithCredentials(!0),a.listenOnce(Ci.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ti.NO_ERROR:const e=a.getResponseJson();Fi(Zh,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case Ti.TIMEOUT:Fi(Zh,`RPC '${t}' ${i} timed out`),o(new Ki(zi.DEADLINE_EXCEEDED,"Request time out"));break;case Ti.HTTP_ERROR:const n=a.getStatus();if(Fi(Zh,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(zi).indexOf(e)>=0?e:zi.UNKNOWN}(e.status);o(new Ki(t,e.message))}else o(new Ki(zi.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ki(zi.UNAVAILABLE,"Connection failed."));break;default:ji()}}finally{Fi(Zh,`RPC '${t}' ${i} completed.`)}}));const h=JSON.stringify(r);Fi(Zh,`RPC '${t}' ${i} sending request:`,r),a.send(e,"POST",h,n,15)}))}wo(t,e,n){const r=Xh(),i=[this.To,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=bi(),o=_i(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;void 0!==h&&(a.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(a.xmlHttpFactory=new Ai({})),this.fo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Fi(Zh,`Creating RPC '${t}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let l=!1,d=!1;const f=new Yh({so:e=>{d?Fi(Zh,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(l||(Fi(Zh,`Opening RPC '${t}' stream ${r} transport.`),u.open(),l=!0),Fi(Zh,`RPC '${t}' stream ${r} sending:`,e),u.send(e))},oo:()=>u.close()}),g=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return g(u,Di.EventType.OPEN,(()=>{d||Fi(Zh,`RPC '${t}' stream ${r} transport opened.`)})),g(u,Di.EventType.CLOSE,(()=>{d||(d=!0,Fi(Zh,`RPC '${t}' stream ${r} transport closed`),f.Po())})),g(u,Di.EventType.ERROR,(e=>{d||(d=!0,Ui(Zh,`RPC '${t}' stream ${r} transport errored:`,e),f.Po(new Ki(zi.UNAVAILABLE,"The operation could not be completed")))})),g(u,Di.EventType.MESSAGE,(e=>{var n;if(!d){const i=e.data[0];qi(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Fi(Zh,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=ka[t];if(void 0!==e)return Ra(e)}(e),i=o.message;void 0===n&&(n=zi.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),d=!0,f.Po(new Ki(n,i)),u.close()}else Fi(Zh,`RPC '${t}' stream ${r} received:`,i),f.Io(i)}})),g(o,Ii.STAT_EVENT,(e=>{e.stat===Si.PROXY?Fi(Zh,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===Si.NOPROXY&&Fi(Zh,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.ho()}),0),f}}function ec(){return"undefined"!=typeof document?document:null}function nc(t){return new Ja(t,!0)}class rc{constructor(t,e,n=1e3,r=1.5,i=6e4){this.ii=t,this.timerId=e,this.So=n,this.bo=r,this.Do=i,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}reset(){this.vo=0}Mo(){this.vo=this.Do}xo(t){this.cancel();const e=Math.floor(this.vo+this.Oo()),n=Math.max(0,Date.now()-this.Fo),r=Math.max(0,e-n);r>0&&Fi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.vo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Co=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Fo=Date.now(),t()))),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}No(){null!==this.Co&&(this.Co.skipDelay(),this.Co=null)}cancel(){null!==this.Co&&(this.Co.cancel(),this.Co=null)}Oo(){return(Math.random()-.5)*this.vo}}class ic{constructor(t,e,n,r,i,s,o,a){this.ii=t,this.Bo=n,this.Lo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new rc(t,e)}$o(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Wo()}async stop(){this.$o()&&await this.close(0)}Go(){this.state=0,this.Ko.reset()}zo(){this.Uo()&&null===this.qo&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,(()=>this.jo())))}Ho(t){this.Jo(),this.stream.send(t)}async jo(){if(this.Uo())return this.close(0)}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}async close(t,e){this.Jo(),this.Yo(),this.Ko.cancel(),this.ko++,4!==t?this.Ko.reset():e&&e.code===zi.RESOURCE_EXHAUSTED?(Vi(e.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),this.Ko.Mo()):e&&e.code===zi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Zo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.uo(e)}Zo(){}auth(){this.state=1;const t=this.Xo(this.ko),e=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.ko===e&&this.e_(t,n)}),(e=>{t((()=>{const t=new Ki(zi.UNKNOWN,"Fetching auth token failed: "+e.message);return this.t_(t)}))}))}e_(t,e){const n=this.Xo(this.ko);this.stream=this.n_(t,e),this.stream._o((()=>{n((()=>(this.state=2,this.Qo=this.ii.enqueueAfterDelay(this.Lo,1e4,(()=>(this.Uo()&&(this.state=3),Promise.resolve()))),this.listener._o())))})),this.stream.uo((t=>{n((()=>this.t_(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Wo(){this.state=5,this.Ko.xo((async()=>{this.state=0,this.start()}))}t_(t){return Fi("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget((()=>this.ko===t?e():(Fi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sc extends ic{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}n_(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.Ko.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ji()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(qi(void 0===e||"string"==typeof e),Ls.fromBase64String(e||"")):(qi(void 0===e||e instanceof Uint8Array),Ls.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?zi.UNKNOWN:Ra(t.code);return new Ki(e,t.message||"")}(o);n=new $a(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=eh(t,r.document.name),s=Za(r.document.updateTime),o=r.document.createTime?Za(r.document.createTime):os.min(),a=new ro({mapValue:{fields:r.document.fields}}),h=io.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ja(c,u,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=eh(t,r.document),s=r.readTime?Za(r.readTime):os.min(),o=io.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ja([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=eh(t,r.document),s=r.removedTargetIds||[];n=new ja([],s,i,null)}else{if(!("filter"in e))return ji();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new Da(r,i),o=t.targetId;n=new qa(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return os.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?os.min():e.readTime?Za(e.readTime):os.min()}(t);return this.listener.r_(e,n)}i_(t){const e={};e.database=rh(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=Ro(r)?{documents:sh(t,r)}:{query:oh(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=function(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}(t,e.resumeToken);const r=Ya(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(os.min())>0){n.readTime=function(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(t,e.snapshotVersion.toTimestamp());const r=Ya(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ji()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.Ho(e)}s_(t){const e={};e.database=rh(this.serializer),e.removeTarget=t,this.Ho(e)}}class oc extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.h_=!1}P_(){if(this.h_)throw new Ki(zi.FAILED_PRECONDITION,"The client has already been terminated.")}Vo(t,e,n){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.Vo(t,e,n,r,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ki(zi.UNKNOWN,t.toString())}))}yo(t,e,n,r){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.yo(t,e,n,i,s,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ki(zi.UNKNOWN,t.toString())}))}terminate(){this.h_=!0}}class ac{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}A_(){0===this.T_&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.E_=null,this.V_("Backend didn't respond within 10 seconds."),this.R_("Offline"),Promise.resolve()))))}m_(t){"Online"===this.state?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.R_("Offline")))}set(t){this.f_(),this.T_=0,"Online"===t&&(this.d_=!1),this.R_(t)}R_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}V_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.d_?(Vi(e),this.d_=!1):Fi("OnlineStateTracker",e)}f_(){null!==this.E_&&(this.E_.cancel(),this.E_=null)}}class hc{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=i,this.S_.Ys((t=>{n.enqueueAndForget((async()=>{yc(this)&&(Fi("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=$i(t);e.y_.add(4),await uc(e),e.b_.set("Unknown"),e.y_.delete(4),await cc(e)}(this))}))})),this.b_=new ac(n,r)}}async function cc(t){if(yc(t))for(const e of t.w_)await e(!0)}async function uc(t){for(const e of t.w_)await e(!1)}function lc(t,e){const n=$i(t);n.p_.has(e.targetId)||(n.p_.set(e.targetId,e),mc(n)?pc(n):Cc(n).Uo()&&fc(n,e))}function dc(t,e){const n=$i(t),r=Cc(n);n.p_.delete(e),r.Uo()&&gc(n,e),0===n.p_.size&&(r.Uo()?r.zo():yc(n)&&n.b_.set("Unknown"))}function fc(t,e){if(t.D_.Be(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(os.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cc(t).i_(e)}function gc(t,e){t.D_.Be(e),Cc(t).s_(e)}function pc(t){t.D_=new Ka({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.p_.get(e)||null,rt:()=>t.datastore.serializer.databaseId}),Cc(t).start(),t.b_.A_()}function mc(t){return yc(t)&&!Cc(t).$o()&&t.p_.size>0}function yc(t){return 0===$i(t).y_.size}function vc(t){t.D_=void 0}async function wc(t){t.p_.forEach(((e,n)=>{fc(t,e)}))}async function Ec(t,e){vc(t),mc(t)?(t.b_.m_(e),pc(t)):t.b_.set("Unknown")}async function bc(t,e,n){if(t.b_.set("Online"),e instanceof $a&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.p_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.p_.delete(r),t.D_.removeTarget(r))}(t,e)}catch(n){Fi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await _c(t,n)}else if(e instanceof ja?t.D_.We(e):e instanceof qa?t.D_.Ze(e):t.D_.je(e),!n.isEqual(os.min()))try{const e=await qh(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.D_.st(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.p_.get(r);i&&t.p_.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.p_.get(e);if(!r)return;t.p_.set(e,r.withResumeToken(Ls.EMPTY_BYTE_STRING,r.snapshotVersion)),gc(t,e);const i=new mh(r.target,e,n,r.sequenceNumber);fc(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Fi("RemoteStore","Failed to raise snapshot:",e),await _c(t,e)}}async function _c(t,e,n){if(!ws(e))throw e;t.y_.add(1),await uc(t),t.b_.set("Offline"),n||(n=()=>qh(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Fi("RemoteStore","Retrying IndexedDB access"),await n(),t.y_.delete(1),await cc(t)}))}async function Tc(t,e){const n=$i(t);n.asyncQueue.verifyOperationInProgress(),Fi("RemoteStore","RemoteStore received new credentials");const r=yc(n);n.y_.add(3),await uc(n),r&&n.b_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.y_.delete(3),await cc(n)}function Cc(t){return t.v_||(t.v_=function(t,e,n){const r=$i(t);return r.P_(),new sc(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{_o:wc.bind(null,t),uo:Ec.bind(null,t),r_:bc.bind(null,t)}),t.w_.push((async e=>{e?(t.v_.Go(),mc(t)?pc(t):t.b_.set("Unknown")):(await t.v_.stop(),vc(t))}))),t.v_}class Ic{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new Ic(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ki(zi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sc(t,e){if(Vi("AsyncQueue",`${e}: ${t}`),ws(t))return new Ki(zi.UNAVAILABLE,`${e}: ${t}`);throw t}class Ac{constructor(t){this.comparator=t?(e,n)=>t(e,n)||ls.comparator(e.key,n.key):(t,e)=>ls.comparator(t.key,e.key),this.keyedMap=Qo(),this.sortedSet=new Is(this.comparator)}static emptySet(t){return new Ac(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ac))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Ac;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Dc{constructor(){this.F_=new Is(ls.comparator)}track(t){const e=t.doc.key,n=this.F_.get(e);n?0!==t.type&&3===n.type?this.F_=this.F_.insert(e,t):3===t.type&&1!==n.type?this.F_=this.F_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.F_=this.F_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.F_=this.F_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.F_=this.F_.remove(e):1===t.type&&2===n.type?this.F_=this.F_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.F_=this.F_.insert(e,{type:2,doc:t.doc}):ji():this.F_=this.F_.insert(e,t)}M_(){const t=[];return this.F_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class kc{constructor(t,e,n,r,i,s,o,a,h){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=h}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new kc(t,e,Ac.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class Nc{constructor(){this.x_=void 0,this.listeners=[]}}class Rc{constructor(){this.queries=new zo((t=>Uo(t)),Vo),this.onlineState="Unknown",this.O_=new Set}}function Lc(t,e){const n=$i(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.B_(t)&&(r=!0);i.x_=t}}r&&Oc(n)}function xc(t,e,n){const r=$i(t),i=r.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);r.queries.delete(e)}function Oc(t){t.O_.forEach((t=>{t.next()}))}class Mc{constructor(t,e,n){this.query=t,this.L_=e,this.k_=!1,this.q_=null,this.onlineState="Unknown",this.options=n||{}}B_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new kc(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.k_?this.Q_(t)&&(this.L_.next(t),e=!0):this.K_(t,this.onlineState)&&(this.U_(t),e=!0),this.q_=t,e}onError(t){this.L_.error(t)}N_(t){this.onlineState=t;let e=!1;return this.q_&&!this.k_&&this.K_(this.q_,t)&&(this.U_(this.q_),e=!0),e}K_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.W_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Q_(t){if(t.docChanges.length>0)return!0;const e=this.q_&&this.q_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}U_(t){t=kc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.k_=!0,this.L_.next(t)}}class Pc{constructor(t){this.key=t}}class Fc{constructor(t){this.key=t}}class Vc{constructor(t,e){this.query=t,this.X_=e,this.ea=null,this.hasCachedResults=!1,this.current=!1,this.ta=ta(),this.mutatedKeys=ta(),this.na=qo(t),this.ra=new Ac(this.na)}get ia(){return this.X_}sa(t,e){const n=e?e.oa:new Dc,r=e?e.ra:this.ra;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,h="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const c=r.get(t),u=jo(this.query,e)?e:null,l=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?l!==d&&(n.track({type:3,doc:u}),f=!0):this._a(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.na(u,a)>0||h&&this.na(u,h)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||h)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{ra:s,oa:n,zi:o,mutatedKeys:i}}_a(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.ra;this.ra=t.ra,this.mutatedKeys=t.mutatedKeys;const i=t.oa.M_();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ji()}};return n(t)-n(e)}(t.type,e.type)||this.na(t.doc,e.doc))),this.aa(n);const s=e?this.ua():[],o=0===this.ta.size&&this.current?1:0,a=o!==this.ea;return this.ea=o,0!==i.length||a?{snapshot:new kc(this.query,t.ra,r,i,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),ca:s}:{ca:s}}N_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ra:this.ra,oa:new Dc,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ca:[]}}la(t){return!this.X_.has(t)&&!!this.ra.has(t)&&!this.ra.get(t).hasLocalMutations}aa(t){t&&(t.addedDocuments.forEach((t=>this.X_=this.X_.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.X_=this.X_.delete(t))),this.current=t.current)}ua(){if(!this.current)return[];const t=this.ta;this.ta=ta(),this.ra.forEach((t=>{this.la(t.key)&&(this.ta=this.ta.add(t.key))}));const e=[];return t.forEach((t=>{this.ta.has(t)||e.push(new Fc(t))})),this.ta.forEach((n=>{t.has(n)||e.push(new Pc(n))})),e}ha(t){this.X_=t.ss,this.ta=ta();const e=this.sa(t.documents);return this.applyChanges(e,!0)}Pa(){return kc.fromInitialDocuments(this.query,this.ra,this.mutatedKeys,0===this.ea,this.hasCachedResults)}}class Uc{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Bc{constructor(t){this.key=t,this.Ia=!1}}class jc{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ta={},this.Ea=new zo((t=>Uo(t)),Vo),this.da=new Map,this.Aa=new Set,this.Ra=new Is(ls.comparator),this.Va=new Map,this.ma=new kh,this.fa={},this.ga=new Map,this.pa=Th.On(),this.onlineState="Unknown",this.ya=void 0}get isPrimaryClient(){return!0===this.ya}}async function qc(t,e){const n=function(t){const e=$i(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hc.bind(null,e),e.Ta.r_=Lc.bind(null,e.eventManager),e.Ta.Sa=xc.bind(null,e.eventManager),e}(t);let r,i;const s=n.Ea.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Pa();else{const t=await function(t,e){const n=$i(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.kr.getTargetData(t,e).next((i=>i?(r=i,vs.resolve(r)):n.kr.allocateTargetId(t).next((i=>(r=new mh(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.kr.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.Ji.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(t.targetId,t),n.Yi.set(e,t.targetId)),t}))}(n.localStore,Po(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await async function(t,e,n,r,i){t.wa=(e,n,r)=>async function(t,e,n,r){let i=e.view.sa(n);i.zi&&(i=await zh(t.localStore,e.query,!1).then((({documents:t})=>e.view.sa(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return Wc(t,e.targetId,o.ca),o.snapshot}(t,e,n,r);const s=await zh(t.localStore,e,!0),o=new Vc(e,s.ss),a=o.sa(s.documents),h=Ba.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,h);Wc(t,n,c.ca);const u=new Uc(e,n,o);return t.Ea.set(e,u),t.da.has(n)?t.da.get(n).push(e):t.da.set(n,[e]),c.snapshot}(n,e,r,"current"===s,t.resumeToken),n.isPrimaryClient&&lc(n.remoteStore,t)}return i}async function $c(t,e){const n=$i(t),r=n.Ea.get(e),i=n.da.get(r.targetId);if(i.length>1)return n.da.set(r.targetId,i.filter((t=>!Vo(t,e)))),void n.Ea.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await $h(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),dc(n.remoteStore,r.targetId),Gc(n,r.targetId)})).catch(ys)):(Gc(n,r.targetId),await $h(n.localStore,r.targetId,!0))}async function zc(t,e){const n=$i(t);try{const t=await function(t,e){const n=$i(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];e.targetChanges.forEach(((s,a)=>{const h=i.get(a);if(!h)return;o.push(n.kr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.kr.addMatchingKeys(t,s.addedDocuments,a))));let c=h.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?c=c.withResumeToken(Ls.EMPTY_BYTE_STRING,os.min()).withLastLimboFreeSnapshotVersion(os.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(h,c,s)&&o.push(n.kr.updateTargetData(t,c))}));let a=Ho(),h=ta();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n){let r=ta(),i=ta();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=Ho();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(os.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):Fi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{ns:r,rs:i}}))}(t,s,e.documentUpdates).next((t=>{a=t.ns,h=t.rs}))),!r.isEqual(os.min())){const e=n.kr.getLastRemoteSnapshotVersion(t).next((e=>n.kr.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return vs.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,h))).next((()=>a))})).then((t=>(n.Ji=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Va.get(e);r&&(qi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Ia=!0:t.modifiedDocuments.size>0?qi(r.Ia):t.removedDocuments.size>0&&(qi(r.Ia),r.Ia=!1))})),await Yc(n,t,e)}catch(t){await ys(t)}}function Kc(t,e,n){const r=$i(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.Ea.forEach(((n,r)=>{const i=r.view.N_(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=$i(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.N_(e)&&(r=!0)})),r&&Oc(n)}(r.eventManager,e),t.length&&r.Ta.r_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Hc(t,e,n){const r=$i(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Va.get(e),s=i&&i.key;if(s){let t=new Is(ls.comparator);t=t.insert(s,io.newNoDocument(s,os.min()));const n=ta().add(s),i=new Ua(os.min(),new Map,new Is(rs),t,n);await zc(r,i),r.Ra=r.Ra.remove(s),r.Va.delete(e),Jc(r)}else await $h(r.localStore,e,!1).then((()=>Gc(r,e,n))).catch(ys)}function Gc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.da.get(e))t.Ea.delete(r),n&&t.Ta.Sa(r,n);t.da.delete(e),t.isPrimaryClient&&t.ma.Ar(e).forEach((e=>{t.ma.containsKey(e)||Qc(t,e)}))}function Qc(t,e){t.Aa.delete(e.path.canonicalString());const n=t.Ra.get(e);null!==n&&(dc(t.remoteStore,n),t.Ra=t.Ra.remove(e),t.Va.delete(n),Jc(t))}function Wc(t,e,n){for(const r of n)r instanceof Pc?(t.ma.addReference(r.key,e),Xc(t,r)):r instanceof Fc?(Fi("SyncEngine","Document no longer in limbo: "+r.key),t.ma.removeReference(r.key,e),t.ma.containsKey(r.key)||Qc(t,r.key)):ji()}function Xc(t,e){const n=e.key,r=n.path.canonicalString();t.Ra.get(n)||t.Aa.has(r)||(Fi("SyncEngine","New document in limbo: "+n),t.Aa.add(r),Jc(t))}function Jc(t){for(;t.Aa.size>0&&t.Ra.size<t.maxConcurrentLimboResolutions;){const e=t.Aa.values().next().value;t.Aa.delete(e);const n=new ls(hs.fromString(e)),r=t.pa.next();t.Va.set(r,new Bc(n)),t.Ra=t.Ra.insert(n,r),lc(t.remoteStore,new mh(Po(xo(n.path)),r,"TargetPurposeLimboResolution",Es.ae))}}async function Yc(t,e,n){const r=$i(t),i=[],s=[],o=[];r.Ea.isEmpty()||(r.Ea.forEach(((t,a)=>{o.push(r.wa(a,e,n).then((t=>{if((t||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){i.push(t);const e=Vh.qi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.Ta.r_(i),await async function(t,e){const n=$i(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>vs.forEach(e,(e=>vs.forEach(e.Li,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>vs.forEach(e.ki,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!ws(t))throw t;Fi("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function Zc(t,e){const n=$i(t);if(!n.currentUser.isEqual(e)){Fi("SyncEngine","User change. New user:",e.toKey());const t=await jh(n.localStore,e);n.currentUser=e,function(t,e){t.ga.forEach((t=>{t.forEach((t=>{t.reject(new Ki(zi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ga.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Yc(n,t.ts)}}function tu(t,e){const n=$i(t),r=n.Va.get(e);if(r&&r.Ia)return ta().add(r.key);{let t=ta();const r=n.da.get(e);if(!r)return t;for(const e of r){const r=n.Ea.get(e);t=t.unionWith(r.view.ia)}return t}}class eu{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=nc(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,r){return new Bh(t,e,n,r)}(this.persistence,new Uh,t.initialUser,this.serializer)}createPersistence(t){return new Mh(Fh.zr,this.serializer)}createSharedClientState(t){return new Hh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class nu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Kc(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zc.bind(null,this.syncEngine),await async function(t,e){const n=$i(t);e?(n.y_.delete(2),await cc(n)):e||(n.y_.add(2),await uc(n),n.b_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Rc}createDatastore(t){const e=nc(t.databaseInfo.databaseId),n=function(t){return new tc(t)}(t.databaseInfo);return function(t,e,n,r){return new oc(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new hc(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>Kc(this.syncEngine,t,0)),Qh.v()?new Qh:new Gh)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new jc(t,e,n,r,i,s);return o&&(a.ya=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=$i(t);Fi("RemoteStore","RemoteStore shutting down."),e.y_.add(5),await uc(e),e.S_.shutdown(),e.b_.set("Unknown")}(this.remoteStore)}}class ru{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.va(this.observer.next,t)}error(t){this.observer.error?this.va(this.observer.error,t):Vi("Uncaught Error in snapshot listener:",t.toString())}Ca(){this.muted=!0}va(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class iu{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=xi.UNAUTHENTICATED,this.clientId=ns.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Fi("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Fi("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ki(zi.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Sc(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function su(t,e){t.asyncQueue.verifyOperationInProgress(),Fi("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await jh(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function ou(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Fi("FirestoreClient","Using user provided OfflineComponentProvider");try{await su(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===zi.FAILED_PRECONDITION||t.code===zi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Ui("Error using user provided cache. Falling back to memory cache: "+n),await su(t,new eu)}}else Fi("FirestoreClient","Using default OfflineComponentProvider"),await su(t,new eu);return t._offlineComponents}(t);Fi("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>Tc(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Tc(e.remoteStore,n))),t._onlineComponents=e}async function au(t){const e=await async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Fi("FirestoreClient","Using user provided OnlineComponentProvider"),await ou(t,t._uninitializedComponentsProvider._online)):(Fi("FirestoreClient","Using default OnlineComponentProvider"),await ou(t,new nu))),t._onlineComponents}(t),n=e.eventManager;return n.onListen=qc.bind(null,e.syncEngine),n.onUnlisten=$c.bind(null,e.syncEngine),n}function hu(t,e,n={}){const r=new Hi;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new ru({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=$i(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(t,o))),n.fromCache&&"server"===r.source?i.reject(new Ki(zi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Mc(n,s,{includeMetadataChanges:!0,W_:!0});return async function(t,e){const n=$i(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Nc),i)try{s.x_=await n.onListen(r)}catch(t){const n=Sc(t,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.N_(n.onlineState),s.x_&&e.B_(s.x_)&&Oc(n)}(t,o)}(await au(t),t.asyncQueue,e,n,r))),r.promise}function cu(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const uu=new Map;function lu(t){if(ls.isDocumentKey(t))throw new Ki(zi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function du(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ki(zi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=function(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ji()}(t);throw new Ki(zi.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class fu{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Ki(zi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ki(zi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new Ki(zi.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cu(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Ki(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Ki(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Ki(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class gu{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ki(zi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ki(zi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fu(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Qi;switch(t.type){case"firstParty":return new Yi(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ki(zi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=uu.get(t);e&&(Fi("ComponentProvider","Removing Datastore"),uu.delete(t),e.terminate())}(this),Promise.resolve()}}class pu{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new pu(this.firestore,t,this._query)}}class mu{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new mu(this.firestore,t,this._key)}}class yu extends pu{constructor(t,e,n){super(t,e,xo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new mu(this.firestore,null,new ls(t))}withConverter(t){return new yu(this.firestore,t,this._path)}}class vu{constructor(){this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new rc(this,"async_queue_retry"),this.Xa=()=>{const t=ec();t&&Fi("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ko.No()};const t=ec();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xa)}get isShuttingDown(){return this.za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.eu(),this.tu(t)}enterRestrictedMode(t){if(!this.za){this.za=!0,this.Ya=t||!1;const e=ec();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xa)}}enqueue(t){if(this.eu(),this.za)return new Promise((()=>{}));const e=new Hi;return this.tu((()=>this.za&&this.Ya?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Ga.push(t),this.nu())))}async nu(){if(0!==this.Ga.length){try{await this.Ga[0](),this.Ga.shift(),this.Ko.reset()}catch(t){if(!ws(t))throw t;Fi("AsyncQueue","Operation failed with retryable error: "+t)}this.Ga.length>0&&this.Ko.xo((()=>this.nu()))}}tu(t){const e=this.Wa.then((()=>(this.Ja=!0,t().catch((t=>{this.Ha=t,this.Ja=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Vi("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Ja=!1,t))))));return this.Wa=e,e}enqueueAfterDelay(t,e,n){this.eu(),this.Za.indexOf(t)>-1&&(e=0);const r=Ic.createAndSchedule(this,t,e,n,(t=>this.ru(t)));return this.ja.push(r),r}eu(){this.Ha&&ji()}verifyOperationInProgress(){}async iu(){let t;do{t=this.Wa,await t}while(t!==this.Wa)}su(t){for(const e of this.ja)if(e.timerId===t)return!0;return!1}ou(t){return this.iu().then((()=>{this.ja.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.ja)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.iu()}))}_u(t){this.Za.push(t)}ru(t){const e=this.ja.indexOf(t);this.ja.splice(e,1)}}class wu extends gu{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new vu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Eu(this),this._firestoreClient.terminate()}}function Eu(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new Bs(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,cu(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new iu(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class bu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new bu(Ls.fromBase64String(t))}catch(t){throw new Ki(zi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new bu(Ls.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class _u{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ki(zi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new us(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Tu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ki(zi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ki(zi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return rs(this._lat,t._lat)||rs(this._long,t._long)}}const Cu=new RegExp("[~\\*/\\[\\]]");function Iu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let h="";return(s||o)&&(h+=" (found",s&&(h+=` in field ${r}`),o&&(h+=` in document ${i}`),h+=")"),new Ki(zi.INVALID_ARGUMENT,a+t+h)}class Su{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Au(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Du("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Au extends Su{data(){return super.data()}}function Du(t,e){return"string"==typeof e?function(t,e,n){if(e.search(Cu)>=0)throw Iu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _u(...e.split("."))._internalPath}catch(r){throw Iu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e):e instanceof _u?e._internalPath:e._delegate._internalPath}class ku{convertValue(t,e="none"){switch($s(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ms(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ps(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ji()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Cs(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Tu(Ms(t.latitude),Ms(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Vs(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Us(t));default:return null}}convertTimestamp(t){const e=Os(t);return new ss(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=hs.fromString(t);qi(ph(n));const r=new js(n.get(1),n.get(3)),i=new ls(n.popFirst(5));return r.isEqual(e)||Vi(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}class Nu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ru extends Su{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Du("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Lu extends Ru{data(t={}){return super.data(t)}}class xu{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Nu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Lu(this._firestore,this._userDataWriter,n.key,n,new Nu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ki(zi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new Lu(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Nu(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new Lu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Nu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Ou(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ou(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ji()}}class Mu extends ku{constructor(t){super(),this.firestore=t}convertBytes(t){return new bu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new mu(this.firestore,null,e)}}!function(t,e=!0){Oi="10.1.0",J(new f("firestore",((t,{instanceIdentifier:n,options:r})=>{const i=t.getProvider("app").getImmediate(),s=new wu(new Xi(t.getProvider("auth-internal")),new ts(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ki(zi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new js(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),et(Li,"4.1.0",t),et(Li,"4.1.0","esm2017")}();const Pu=function(t,e){const n="string"==typeof t?t:"(default)",r=function(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}("object"==typeof t?t:function(t=H){const e=Q.get(t);if(!e&&t===H&&o())return tt();if(!e)throw Y.create("no-app",{appName:t});return e}(),"firestore").getImmediate({identifier:n});if(!r._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=s())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");t&&function(t,e,n,r={}){var s;const o=(t=du(t,gu))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&Ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=xi.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i(JSON.stringify({alg:"none",type:"JWT"})),i(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Ki(zi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new xi(o)}t._authCredentials=new Wi(new Gi(e,n))}}(r,...t)}return r}(tt({apiKey:"AIzaSyAES8iOsxtgQhNved5dltrilIt8X5fxHL0",authDomain:"the-aggregator-b51bd.firebaseapp.com",projectId:"the-aggregator-b51bd",storageBucket:"the-aggregator-b51bd.appspot.com",messagingSenderId:"280028868322",appId:"1:280028868322:web:f654a928da9628d6c378bb",measurementId:"G-408NCFQLCF"})),Fu=function(){return function(t){t=du(t,pu);const e=du(t.firestore,wu),n=function(t){return t._firestoreClient||Eu(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(e),r=new Mu(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Ki(zi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),hu(n,t._query).then((n=>new xu(e,r,t,n)))}(function(t,e,...n){if(t=(r=t)&&r._delegate?r._delegate:r,function(t,e,n){if(!n)throw new Ki(zi.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}("collection","path",e),t instanceof gu){const r=hs.fromString(e,...n);return lu(r),new yu(t,null,r)}var r;{if(!(t instanceof mu||t instanceof yu))throw new Ki(zi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(hs.fromString(e,...n));return lu(r),new yu(t.firestore,null,r)}}(Pu,"ai")).then((t=>{const e=[];return t.forEach((t=>{e.push(t.data().title)})),console.log(e),e})).catch((t=>{throw console.error("Error getting existing titles:",t),t}))};(function(t){fetch(`https://rss-to-json-serverless-api.vercel.app/api?feedURL=${t}`).then((t=>t.json())).then((t=>{console.log(t);const e=function(t){return t.items.map((e=>({title:e.title,link:e.link,description:e.description||"No description available",source:t.title,date:new Date(e.published)})))}(t);return console.log(e),e})).catch((t=>{throw console.error("An error occurred while fetching data:",t),t}))})("https://openai.com/blog/rss.xml"),Fu()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiO21CQUNBLElBQUlBLEVBQXNCLENBQUMsRUNEM0JBLEVBQW9CQyxFQUFJLFdBQ3ZCLEdBQTBCLGlCQUFmQyxXQUF5QixPQUFPQSxXQUMzQyxJQUNDLE9BQU9DLE1BQVEsSUFBSUMsU0FBUyxjQUFiLEVBQ2hCLENBQUUsTUFBT0MsR0FDUixHQUFzQixpQkFBWEMsT0FBcUIsT0FBT0EsTUFDeEMsQ0FDQSxDQVB1QixHQ21CeEIsTUFpRU1DLEVBQXNCLFNBQVVDLEdBRWxDLE1BQU1DLEVBQU0sR0FDWixJQUFJQyxFQUFJLEVBQ1IsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlILEVBQUlJLE9BQVFELElBQUssQ0FDakMsSUFBSUUsRUFBSUwsRUFBSU0sV0FBV0gsR0FDbkJFLEVBQUksSUFDSkosRUFBSUMsS0FBT0csRUFFTkEsRUFBSSxNQUNUSixFQUFJQyxLQUFRRyxHQUFLLEVBQUssSUFDdEJKLEVBQUlDLEtBQVksR0FBSkcsRUFBVSxLQUVBLFFBQVosTUFBSkEsSUFDTkYsRUFBSSxFQUFJSCxFQUFJSSxRQUN5QixRQUFaLE1BQXhCSixFQUFJTSxXQUFXSCxFQUFJLEtBRXBCRSxFQUFJLFFBQWdCLEtBQUpBLElBQWUsS0FBNkIsS0FBdEJMLEVBQUlNLGFBQWFILElBQ3ZERixFQUFJQyxLQUFRRyxHQUFLLEdBQU0sSUFDdkJKLEVBQUlDLEtBQVNHLEdBQUssR0FBTSxHQUFNLElBQzlCSixFQUFJQyxLQUFTRyxHQUFLLEVBQUssR0FBTSxJQUM3QkosRUFBSUMsS0FBWSxHQUFKRyxFQUFVLE1BR3RCSixFQUFJQyxLQUFRRyxHQUFLLEdBQU0sSUFDdkJKLEVBQUlDLEtBQVNHLEdBQUssRUFBSyxHQUFNLElBQzdCSixFQUFJQyxLQUFZLEdBQUpHLEVBQVUsSUFFOUIsQ0FDQSxPQUFPSixDQUNYLEVBeUNNTSxFQUFTLENBSVhDLGVBQWdCLEtBSWhCQyxlQUFnQixLQUtoQkMsc0JBQXVCLEtBS3ZCQyxzQkFBdUIsS0FLdkJDLGtCQUFtQixpRUFJbkIsZ0JBQUlDLEdBQ0EsT0FBT2xCLEtBQUtpQixrQkFBb0IsS0FDcEMsRUFJQSx3QkFBSUUsR0FDQSxPQUFPbkIsS0FBS2lCLGtCQUFvQixLQUNwQyxFQVFBRyxtQkFBb0MsbUJBQVRDLEtBVTNCLGVBQUFDLENBQWdCQyxFQUFPQyxHQUNuQixJQUFLQyxNQUFNQyxRQUFRSCxHQUNmLE1BQU1JLE1BQU0saURBRWhCM0IsS0FBSzRCLFFBQ0wsTUFBTUMsRUFBZ0JMLEVBQ2hCeEIsS0FBS2Usc0JBQ0xmLEtBQUthLGVBQ0xpQixFQUFTLEdBQ2YsSUFBSyxJQUFJdEIsRUFBSSxFQUFHQSxFQUFJZSxFQUFNZCxPQUFRRCxHQUFLLEVBQUcsQ0FDdEMsTUFBTXVCLEVBQVFSLEVBQU1mLEdBQ2R3QixFQUFZeEIsRUFBSSxFQUFJZSxFQUFNZCxPQUMxQndCLEVBQVFELEVBQVlULEVBQU1mLEVBQUksR0FBSyxFQUNuQzBCLEVBQVkxQixFQUFJLEVBQUllLEVBQU1kLE9BQzFCMEIsRUFBUUQsRUFBWVgsRUFBTWYsRUFBSSxHQUFLLEVBQ25DNEIsRUFBV0wsR0FBUyxFQUNwQk0sR0FBcUIsRUFBUk4sSUFBaUIsRUFBTUUsR0FBUyxFQUNuRCxJQUFJSyxHQUFxQixHQUFSTCxJQUFpQixFQUFNRSxHQUFTLEVBQzdDSSxFQUFtQixHQUFSSixFQUNWRCxJQUNESyxFQUFXLEdBQ05QLElBQ0RNLEVBQVcsS0FHbkJSLEVBQU9VLEtBQUtYLEVBQWNPLEdBQVdQLEVBQWNRLEdBQVdSLEVBQWNTLEdBQVdULEVBQWNVLEdBQ3pHLENBQ0EsT0FBT1QsRUFBT1csS0FBSyxHQUN2QixFQVNBLFlBQUFDLENBQWFuQixFQUFPQyxHQUdoQixPQUFJeEIsS0FBS29CLHFCQUF1QkksRUFDckJtQixLQUFLcEIsR0FFVHZCLEtBQUtzQixnQkFBZ0JsQixFQUFvQm1CLEdBQVFDLEVBQzVELEVBU0EsWUFBQW9CLENBQWFyQixFQUFPQyxHQUdoQixPQUFJeEIsS0FBS29CLHFCQUF1QkksRUFDckJILEtBQUtFLEdBaEpFLFNBQVVzQixHQUVoQyxNQUFNdkMsRUFBTSxHQUNaLElBQUl3QyxFQUFNLEVBQUdwQyxFQUFJLEVBQ2pCLEtBQU9vQyxFQUFNRCxFQUFNcEMsUUFBUSxDQUN2QixNQUFNc0MsRUFBS0YsRUFBTUMsS0FDakIsR0FBSUMsRUFBSyxJQUNMekMsRUFBSUksS0FBT3NDLE9BQU9DLGFBQWFGLFFBRTlCLEdBQUlBLEVBQUssS0FBT0EsRUFBSyxJQUFLLENBQzNCLE1BQU1HLEVBQUtMLEVBQU1DLEtBQ2pCeEMsRUFBSUksS0FBT3NDLE9BQU9DLGNBQW9CLEdBQUxGLElBQVksRUFBVyxHQUFMRyxFQUN2RCxNQUNLLEdBQUlILEVBQUssS0FBT0EsRUFBSyxJQUFLLENBRTNCLE1BR01JLElBQVksRUFBTEosSUFBVyxJQUFhLEdBSDFCRixFQUFNQyxPQUcyQixJQUFhLEdBRjlDRCxFQUFNQyxPQUUrQyxFQUFXLEdBRGhFRCxFQUFNQyxNQUViLE1BQ0p4QyxFQUFJSSxLQUFPc0MsT0FBT0MsYUFBYSxPQUFVRSxHQUFLLEtBQzlDN0MsRUFBSUksS0FBT3NDLE9BQU9DLGFBQWEsT0FBYyxLQUFKRSxHQUM3QyxLQUNLLENBQ0QsTUFBTUQsRUFBS0wsRUFBTUMsS0FDWE0sRUFBS1AsRUFBTUMsS0FDakJ4QyxFQUFJSSxLQUFPc0MsT0FBT0MsY0FBb0IsR0FBTEYsSUFBWSxJQUFhLEdBQUxHLElBQVksRUFBVyxHQUFMRSxFQUMzRSxDQUNKLENBQ0EsT0FBTzlDLEVBQUltQyxLQUFLLEdBQ3BCLENBb0hlWSxDQUFrQnJELEtBQUtzRCx3QkFBd0IvQixFQUFPQyxHQUNqRSxFQWdCQSx1QkFBQThCLENBQXdCL0IsRUFBT0MsR0FDM0J4QixLQUFLNEIsUUFDTCxNQUFNMkIsRUFBZ0IvQixFQUNoQnhCLEtBQUtnQixzQkFDTGhCLEtBQUtjLGVBQ0xnQixFQUFTLEdBQ2YsSUFBSyxJQUFJdEIsRUFBSSxFQUFHQSxFQUFJZSxFQUFNZCxRQUFTLENBQy9CLE1BQU1zQixFQUFRd0IsRUFBY2hDLEVBQU1pQyxPQUFPaEQsTUFFbkN5QixFQURZekIsRUFBSWUsRUFBTWQsT0FDRjhDLEVBQWNoQyxFQUFNaUMsT0FBT2hELElBQU0sSUFDekRBLEVBQ0YsTUFDTTJCLEVBRFkzQixFQUFJZSxFQUFNZCxPQUNGOEMsRUFBY2hDLEVBQU1pQyxPQUFPaEQsSUFBTSxLQUN6REEsRUFDRixNQUNNaUQsRUFEWWpELEVBQUllLEVBQU1kLE9BQ0Y4QyxFQUFjaEMsRUFBTWlDLE9BQU9oRCxJQUFNLEdBRTNELEtBREVBLEVBQ1csTUFBVHVCLEdBQTBCLE1BQVRFLEdBQTBCLE1BQVRFLEdBQTBCLE1BQVRzQixFQUNuRCxNQUFNLElBQUlDLEVBRWQsTUFBTXRCLEVBQVlMLEdBQVMsRUFBTUUsR0FBUyxFQUUxQyxHQURBSCxFQUFPVSxLQUFLSixHQUNFLEtBQVZELEVBQWMsQ0FDZCxNQUFNRSxFQUFhSixHQUFTLEVBQUssSUFBU0UsR0FBUyxFQUVuRCxHQURBTCxFQUFPVSxLQUFLSCxHQUNFLEtBQVZvQixFQUFjLENBQ2QsTUFBTW5CLEVBQWFILEdBQVMsRUFBSyxJQUFRc0IsRUFDekMzQixFQUFPVSxLQUFLRixFQUNoQixDQUNKLENBQ0osQ0FDQSxPQUFPUixDQUNYLEVBTUEsS0FBQUYsR0FDSSxJQUFLNUIsS0FBS2EsZUFBZ0IsQ0FDdEJiLEtBQUthLGVBQWlCLENBQUMsRUFDdkJiLEtBQUtjLGVBQWlCLENBQUMsRUFDdkJkLEtBQUtlLHNCQUF3QixDQUFDLEVBQzlCZixLQUFLZ0Isc0JBQXdCLENBQUMsRUFFOUIsSUFBSyxJQUFJUixFQUFJLEVBQUdBLEVBQUlSLEtBQUtrQixhQUFhVCxPQUFRRCxJQUMxQ1IsS0FBS2EsZUFBZUwsR0FBS1IsS0FBS2tCLGFBQWFzQyxPQUFPaEQsR0FDbERSLEtBQUtjLGVBQWVkLEtBQUthLGVBQWVMLElBQU1BLEVBQzlDUixLQUFLZSxzQkFBc0JQLEdBQUtSLEtBQUttQixxQkFBcUJxQyxPQUFPaEQsR0FDakVSLEtBQUtnQixzQkFBc0JoQixLQUFLZSxzQkFBc0JQLElBQU1BLEVBRXhEQSxHQUFLUixLQUFLaUIsa0JBQWtCUixTQUM1QlQsS0FBS2MsZUFBZWQsS0FBS21CLHFCQUFxQnFDLE9BQU9oRCxJQUFNQSxFQUMzRFIsS0FBS2dCLHNCQUFzQmhCLEtBQUtrQixhQUFhc0MsT0FBT2hELElBQU1BLEVBR3RFLENBQ0osR0FLSixNQUFNa0QsVUFBZ0MvQixNQUNsQyxXQUFBZ0MsR0FDSUMsU0FBU0MsV0FDVDdELEtBQUs4RCxLQUFPLHlCQUNoQixFQUtKLE1BUU1DLEVBQWdDLFNBQVUxRCxHQUU1QyxPQVZpQixTQUFVQSxHQUMzQixNQUFNMkQsRUFBWTVELEVBQW9CQyxHQUN0QyxPQUFPTyxFQUFPVSxnQkFBZ0IwQyxHQUFXLEVBQzdDLENBT1dDLENBQWE1RCxHQUFLNkQsUUFBUSxNQUFPLEdBQzVDLEVBdUxNQyxFQUFjLEtBQ2hCLElBQ0ksT0F4RVIsV0FDSSxHQUFvQixvQkFBVEMsS0FDUCxPQUFPQSxLQUVYLEdBQXNCLG9CQUFYakUsT0FDUCxPQUFPQSxPQUVYLFFBQXNCLElBQVgsRUFBQUwsRUFDUCxPQUFPLEVBQUFBLEVBRVgsTUFBTSxJQUFJNkIsTUFBTSxrQ0FDcEIsQ0FrQm9DMEMsR0FBWUMsdUJBU2IsTUFDL0IsR0FBdUIsb0JBQVpDLFFBQ1AsT0FFSixNQUFNQyxFQUFxQixrQkFBWUYsc0JBQ3ZDLE9BQUlFLEVBQ09DLEtBQUtDLE1BQU1GLFFBRHRCLENBRUEsRUE0QlFHLElBMUJrQixNQUMxQixHQUF3QixvQkFBYkMsU0FDUCxPQUVKLElBQUlDLEVBQ0osSUFDSUEsRUFBUUQsU0FBU0UsT0FBT0QsTUFBTSxnQ0FDbEMsQ0FDQSxNQUFPM0UsR0FHSCxNQUNKLENBQ0EsTUFBTTZFLEVBQVVGLEdBbktDLFNBQVV4RSxHQUMzQixJQUNJLE9BQU9PLEVBQU9nQyxhQUFhdkMsR0FBSyxFQUNwQyxDQUNBLE1BQU9ILEdBQ0g4RSxRQUFRQyxNQUFNLHdCQUF5Qi9FLEVBQzNDLENBQ0EsT0FBTyxJQUNYLENBMko2QmdGLENBQWFMLEVBQU0sSUFDNUMsT0FBT0UsR0FBV04sS0FBS0MsTUFBTUssRUFBUSxFQWE3QkksRUFDUixDQUNBLE1BQU9qRixHQVFILFlBREE4RSxRQUFRSSxLQUFLLCtDQUErQ2xGLElBRWhFLEdBc0NFbUYsRUFBc0IsS0FBUSxJQUFJQyxFQUFJLE9BQWdDLFFBQXhCQSxFQUFLbkIsV0FBa0MsSUFBUG1CLE9BQWdCLEVBQVNBLEVBQUdDLE1BQU0sRUF3QnRILE1BQU1DLEVBQ0YsV0FBQTdCLEdBQ0kzRCxLQUFLeUYsT0FBUyxPQUNkekYsS0FBSzBGLFFBQVUsT0FDZjFGLEtBQUsyRixRQUFVLElBQUlDLFNBQVEsQ0FBQ0YsRUFBU0QsS0FDakN6RixLQUFLMEYsUUFBVUEsRUFDZjFGLEtBQUt5RixPQUFTQSxDQUFNLEdBRTVCLENBTUEsWUFBQUksQ0FBYUMsR0FDVCxNQUFPLENBQUNiLEVBQU9jLEtBQ1BkLEVBQ0FqRixLQUFLeUYsT0FBT1IsR0FHWmpGLEtBQUswRixRQUFRSyxHQUVPLG1CQUFiRCxJQUdQOUYsS0FBSzJGLFFBQVFLLE9BQU0sU0FHSyxJQUFwQkYsRUFBU3JGLE9BQ1RxRixFQUFTYixHQUdUYSxFQUFTYixFQUFPYyxHQUV4QixDQUVSLEVBd1JKLE1BQU1FLFVBQXNCdEUsTUFDeEIsV0FBQWdDLENBRUF1QyxFQUFNQyxFQUVOQyxHQUNJeEMsTUFBTXVDLEdBQ05uRyxLQUFLa0csS0FBT0EsRUFDWmxHLEtBQUtvRyxXQUFhQSxFQUVsQnBHLEtBQUs4RCxLQWJNLGdCQWdCWHVDLE9BQU9DLGVBQWV0RyxLQUFNaUcsRUFBY00sV0FHdEM1RSxNQUFNNkUsbUJBQ043RSxNQUFNNkUsa0JBQWtCeEcsS0FBTXlHLEVBQWFGLFVBQVVHLE9BRTdELEVBRUosTUFBTUQsRUFDRixXQUFBOUMsQ0FBWWdELEVBQVNDLEVBQWFDLEdBQzlCN0csS0FBSzJHLFFBQVVBLEVBQ2YzRyxLQUFLNEcsWUFBY0EsRUFDbkI1RyxLQUFLNkcsT0FBU0EsQ0FDbEIsQ0FDQSxNQUFBSCxDQUFPUixLQUFTWSxHQUNaLE1BQU1WLEVBQWFVLEVBQUssSUFBTSxDQUFDLEVBQ3pCQyxFQUFXLEdBQUcvRyxLQUFLMkcsV0FBV1QsSUFDOUJjLEVBQVdoSCxLQUFLNkcsT0FBT1gsR0FDdkJDLEVBQVVhLEVBT3hCLFNBQXlCQSxFQUFVRixHQUMvQixPQUFPRSxFQUFTOUMsUUFBUStDLEdBQVMsQ0FBQ0MsRUFBR0MsS0FDakMsTUFBTXBCLEVBQVFlLEVBQUtLLEdBQ25CLE9BQWdCLE1BQVRwQixFQUFnQi9DLE9BQU8rQyxHQUFTLElBQUlvQixLQUFPLEdBRTFELENBWm1DQyxDQUFnQkosRUFBVVosR0FBYyxRQUU3RGlCLEVBQWMsR0FBR3JILEtBQUs0RyxnQkFBZ0JULE1BQVlZLE1BRXhELE9BRGMsSUFBSWQsRUFBY2MsRUFBVU0sRUFBYWpCLEVBRTNELEVBUUosTUFBTWEsRUFBVSxnQkFrTWhCLFNBQVMsRUFBVUssRUFBR0MsR0FDbEIsR0FBSUQsSUFBTUMsRUFDTixPQUFPLEVBRVgsTUFBTUMsRUFBUW5CLE9BQU9vQixLQUFLSCxHQUNwQkksRUFBUXJCLE9BQU9vQixLQUFLRixHQUMxQixJQUFLLE1BQU1JLEtBQUtILEVBQU8sQ0FDbkIsSUFBS0UsRUFBTUUsU0FBU0QsR0FDaEIsT0FBTyxFQUVYLE1BQU1FLEVBQVFQLEVBQUVLLEdBQ1ZHLEVBQVFQLEVBQUVJLEdBQ2hCLEdBQUlJLEVBQVNGLElBQVVFLEVBQVNELElBQzVCLElBQUssRUFBVUQsRUFBT0MsR0FDbEIsT0FBTyxPQUdWLEdBQUlELElBQVVDLEVBQ2YsT0FBTyxDQUVmLENBQ0EsSUFBSyxNQUFNSCxLQUFLRCxFQUNaLElBQUtGLEVBQU1JLFNBQVNELEdBQ2hCLE9BQU8sRUFHZixPQUFPLENBQ1gsQ0FDQSxTQUFTSSxFQUFTQyxHQUNkLE9BQWlCLE9BQVZBLEdBQW1DLGlCQUFWQSxDQUNwQyxDQ3JyQ0EsTUFBTUMsRUFPRixXQUFBdEUsQ0FBWUcsRUFBTW9FLEVBQWlCQyxHQUMvQm5JLEtBQUs4RCxLQUFPQSxFQUNaOUQsS0FBS2tJLGdCQUFrQkEsRUFDdkJsSSxLQUFLbUksS0FBT0EsRUFDWm5JLEtBQUtvSSxtQkFBb0IsRUFJekJwSSxLQUFLcUksYUFBZSxDQUFDLEVBQ3JCckksS0FBS3NJLGtCQUFvQixPQUN6QnRJLEtBQUt1SSxrQkFBb0IsSUFDN0IsQ0FDQSxvQkFBQUMsQ0FBcUJDLEdBRWpCLE9BREF6SSxLQUFLc0ksa0JBQW9CRyxFQUNsQnpJLElBQ1gsQ0FDQSxvQkFBQTBJLENBQXFCTixHQUVqQixPQURBcEksS0FBS29JLGtCQUFvQkEsRUFDbEJwSSxJQUNYLENBQ0EsZUFBQTJJLENBQWdCQyxHQUVaLE9BREE1SSxLQUFLcUksYUFBZU8sRUFDYjVJLElBQ1gsQ0FDQSwwQkFBQTZJLENBQTJCL0MsR0FFdkIsT0FEQTlGLEtBQUt1SSxrQkFBb0J6QyxFQUNsQjlGLElBQ1gsRUFtQkosTUFBTThJLEVBQXFCLFlBc0IzQixNQUFNQyxFQUNGLFdBQUFwRixDQUFZRyxFQUFNa0YsR0FDZGhKLEtBQUs4RCxLQUFPQSxFQUNaOUQsS0FBS2dKLFVBQVlBLEVBQ2pCaEosS0FBS2lKLFVBQVksS0FDakJqSixLQUFLa0osVUFBWSxJQUFJQyxJQUNyQm5KLEtBQUtvSixrQkFBb0IsSUFBSUQsSUFDN0JuSixLQUFLcUosaUJBQW1CLElBQUlGLElBQzVCbkosS0FBS3NKLGdCQUFrQixJQUFJSCxHQUMvQixDQUtBLEdBQUFJLENBQUlDLEdBRUEsTUFBTUMsRUFBdUJ6SixLQUFLMEosNEJBQTRCRixHQUM5RCxJQUFLeEosS0FBS29KLGtCQUFrQk8sSUFBSUYsR0FBdUIsQ0FDbkQsTUFBTUcsRUFBVyxJQUFJcEUsRUFFckIsR0FEQXhGLEtBQUtvSixrQkFBa0JTLElBQUlKLEVBQXNCRyxHQUM3QzVKLEtBQUs4SixjQUFjTCxJQUNuQnpKLEtBQUsrSix1QkFFTCxJQUNJLE1BQU1DLEVBQVdoSyxLQUFLaUssdUJBQXVCLENBQ3pDQyxtQkFBb0JULElBRXBCTyxHQUNBSixFQUFTbEUsUUFBUXNFLEVBRXpCLENBQ0EsTUFBTzlKLEdBR1AsQ0FFUixDQUNBLE9BQU9GLEtBQUtvSixrQkFBa0JHLElBQUlFLEdBQXNCOUQsT0FDNUQsQ0FDQSxZQUFBd0UsQ0FBYUMsR0FDVCxJQUFJOUUsRUFFSixNQUFNbUUsRUFBdUJ6SixLQUFLMEosNEJBQTRCVSxhQUF5QyxFQUFTQSxFQUFRWixZQUNsSGEsRUFBeUYsUUFBN0UvRSxFQUFLOEUsYUFBeUMsRUFBU0EsRUFBUUMsZ0JBQTZCLElBQVAvRSxHQUFnQkEsRUFDdkgsSUFBSXRGLEtBQUs4SixjQUFjTCxLQUNuQnpKLEtBQUsrSix1QkFlSixDQUVELEdBQUlNLEVBQ0EsT0FBTyxLQUdQLE1BQU0xSSxNQUFNLFdBQVczQixLQUFLOEQsd0JBRXBDLENBdEJJLElBQ0ksT0FBTzlELEtBQUtpSyx1QkFBdUIsQ0FDL0JDLG1CQUFvQlQsR0FFNUIsQ0FDQSxNQUFPdkosR0FDSCxHQUFJbUssRUFDQSxPQUFPLEtBR1AsTUFBTW5LLENBRWQsQ0FXUixDQUNBLFlBQUFvSyxHQUNJLE9BQU90SyxLQUFLaUosU0FDaEIsQ0FDQSxZQUFBc0IsQ0FBYXRCLEdBQ1QsR0FBSUEsRUFBVW5GLE9BQVM5RCxLQUFLOEQsS0FDeEIsTUFBTW5DLE1BQU0seUJBQXlCc0gsRUFBVW5GLHFCQUFxQjlELEtBQUs4RCxTQUU3RSxHQUFJOUQsS0FBS2lKLFVBQ0wsTUFBTXRILE1BQU0saUJBQWlCM0IsS0FBSzhELGtDQUl0QyxHQUZBOUQsS0FBS2lKLFVBQVlBLEVBRVpqSixLQUFLK0osdUJBQVYsQ0FJQSxHQXdLUixTQUEwQmQsR0FDdEIsTUFBdUMsVUFBaENBLEVBQVVYLGlCQUNyQixDQTFLWWtDLENBQWlCdkIsR0FDakIsSUFDSWpKLEtBQUtpSyx1QkFBdUIsQ0FBRUMsbUJBQW9CcEIsR0FDdEQsQ0FDQSxNQUFPNUksR0FLUCxDQUtKLElBQUssTUFBT2dLLEVBQW9CTyxLQUFxQnpLLEtBQUtvSixrQkFBa0JzQixVQUFXLENBQ25GLE1BQU1qQixFQUF1QnpKLEtBQUswSiw0QkFBNEJRLEdBQzlELElBRUksTUFBTUYsRUFBV2hLLEtBQUtpSyx1QkFBdUIsQ0FDekNDLG1CQUFvQlQsSUFFeEJnQixFQUFpQi9FLFFBQVFzRSxFQUM3QixDQUNBLE1BQU85SixHQUdQLENBQ0osQ0E3QkEsQ0E4QkosQ0FDQSxhQUFBeUssQ0FBY25CLEVBQWFWLEdBQ3ZCOUksS0FBS29KLGtCQUFrQndCLE9BQU9wQixHQUM5QnhKLEtBQUtxSixpQkFBaUJ1QixPQUFPcEIsR0FDN0J4SixLQUFLa0osVUFBVTBCLE9BQU9wQixFQUMxQixDQUdBLFlBQU0sR0FDRixNQUFNcUIsRUFBV3BKLE1BQU1xSixLQUFLOUssS0FBS2tKLFVBQVU2QixnQkFDckNuRixRQUFRb0YsSUFBSSxJQUNYSCxFQUNFSSxRQUFPdEUsR0FBVyxhQUFjQSxJQUVoQ3VFLEtBQUl2RSxHQUFXQSxFQUFRd0UsU0FBU1AsY0FDbENDLEVBQ0VJLFFBQU90RSxHQUFXLFlBQWFBLElBRS9CdUUsS0FBSXZFLEdBQVdBLEVBQVF5RSxhQUVwQyxDQUNBLGNBQUFDLEdBQ0ksT0FBeUIsTUFBbEJyTCxLQUFLaUosU0FDaEIsQ0FDQSxhQUFBYSxDQUFjTixFQUFhVixHQUN2QixPQUFPOUksS0FBS2tKLFVBQVVTLElBQUlILEVBQzlCLENBQ0EsVUFBQThCLENBQVc5QixFQUFhVixHQUNwQixPQUFPOUksS0FBS3FKLGlCQUFpQkUsSUFBSUMsSUFBZSxDQUFDLENBQ3JELENBQ0EsVUFBQStCLENBQVdDLEVBQU8sQ0FBQyxHQUNmLE1BQU0sUUFBRXBCLEVBQVUsQ0FBQyxHQUFNb0IsRUFDbkIvQixFQUF1QnpKLEtBQUswSiw0QkFBNEI4QixFQUFLdEIsb0JBQ25FLEdBQUlsSyxLQUFLOEosY0FBY0wsR0FDbkIsTUFBTTlILE1BQU0sR0FBRzNCLEtBQUs4RCxRQUFRMkYsbUNBRWhDLElBQUt6SixLQUFLcUwsaUJBQ04sTUFBTTFKLE1BQU0sYUFBYTNCLEtBQUs4RCxvQ0FFbEMsTUFBTWtHLEVBQVdoSyxLQUFLaUssdUJBQXVCLENBQ3pDQyxtQkFBb0JULEVBQ3BCVyxZQUdKLElBQUssTUFBT0YsRUFBb0JPLEtBQXFCekssS0FBS29KLGtCQUFrQnNCLFVBRXBFakIsSUFEaUN6SixLQUFLMEosNEJBQTRCUSxJQUVsRU8sRUFBaUIvRSxRQUFRc0UsR0FHakMsT0FBT0EsQ0FDWCxDQVNBLE1BQUF5QixDQUFPM0YsRUFBVTBELEdBQ2IsSUFBSWxFLEVBQ0osTUFBTW1FLEVBQXVCekosS0FBSzBKLDRCQUE0QkYsR0FDeERrQyxFQUE4RSxRQUF6RHBHLEVBQUt0RixLQUFLc0osZ0JBQWdCQyxJQUFJRSxVQUEwQyxJQUFQbkUsRUFBZ0JBLEVBQUssSUFBSXFHLElBQ3JIRCxFQUFrQkUsSUFBSTlGLEdBQ3RCOUYsS0FBS3NKLGdCQUFnQk8sSUFBSUosRUFBc0JpQyxHQUMvQyxNQUFNRyxFQUFtQjdMLEtBQUtrSixVQUFVSyxJQUFJRSxHQUk1QyxPQUhJb0MsR0FDQS9GLEVBQVMrRixFQUFrQnBDLEdBRXhCLEtBQ0hpQyxFQUFrQmQsT0FBTzlFLEVBQVMsQ0FFMUMsQ0FLQSxxQkFBQWdHLENBQXNCOUIsRUFBVVIsR0FDNUIsTUFBTXVDLEVBQVkvTCxLQUFLc0osZ0JBQWdCQyxJQUFJQyxHQUMzQyxHQUFLdUMsRUFHTCxJQUFLLE1BQU1qRyxLQUFZaUcsRUFDbkIsSUFDSWpHLEVBQVNrRSxFQUFVUixFQUN2QixDQUNBLE1BQU9sRSxHQUVQLENBRVIsQ0FDQSxzQkFBQTJFLEVBQXVCLG1CQUFFQyxFQUFrQixRQUFFRSxFQUFVLENBQUMsSUFDcEQsSUFBSUosRUFBV2hLLEtBQUtrSixVQUFVSyxJQUFJVyxHQUNsQyxJQUFLRixHQUFZaEssS0FBS2lKLFlBQ2xCZSxFQUFXaEssS0FBS2lKLFVBQVVmLGdCQUFnQmxJLEtBQUtnSixVQUFXLENBQ3REa0Isb0JBeUN1QlYsRUF6QzJCVSxFQTBDdkRWLElBQWVWLE9BQXFCa0QsRUFBWXhDLEdBekMzQ1ksWUFFSnBLLEtBQUtrSixVQUFVVyxJQUFJSyxFQUFvQkYsR0FDdkNoSyxLQUFLcUosaUJBQWlCUSxJQUFJSyxFQUFvQkUsR0FNOUNwSyxLQUFLOEwsc0JBQXNCOUIsRUFBVUUsR0FNakNsSyxLQUFLaUosVUFBVVYsbUJBQ2YsSUFDSXZJLEtBQUtpSixVQUFVVixrQkFBa0J2SSxLQUFLZ0osVUFBV2tCLEVBQW9CRixFQUN6RSxDQUNBLE1BQU8xRSxHQUVQLENBbUJoQixJQUF1Q2tFLEVBaEIvQixPQUFPUSxHQUFZLElBQ3ZCLENBQ0EsMkJBQUFOLENBQTRCRixFQUFhVixHQUNyQyxPQUFJOUksS0FBS2lKLFVBQ0VqSixLQUFLaUosVUFBVWIsa0JBQW9Cb0IsRUFBYVYsRUFHaERVLENBRWYsQ0FDQSxvQkFBQU8sR0FDSSxRQUFVL0osS0FBS2lKLFdBQzBCLGFBQXJDakosS0FBS2lKLFVBQVVYLGlCQUN2QixFQTZCSixNQUFNMkQsRUFDRixXQUFBdEksQ0FBWUcsR0FDUjlELEtBQUs4RCxLQUFPQSxFQUNaOUQsS0FBS2tNLFVBQVksSUFBSS9DLEdBQ3pCLENBVUEsWUFBQWdELENBQWFsRCxHQUNULE1BQU1tRCxFQUFXcE0sS0FBS3FNLFlBQVlwRCxFQUFVbkYsTUFDNUMsR0FBSXNJLEVBQVNmLGlCQUNULE1BQU0sSUFBSTFKLE1BQU0sYUFBYXNILEVBQVVuRix5Q0FBeUM5RCxLQUFLOEQsUUFFekZzSSxFQUFTN0IsYUFBYXRCLEVBQzFCLENBQ0EsdUJBQUFxRCxDQUF3QnJELEdBQ0hqSixLQUFLcU0sWUFBWXBELEVBQVVuRixNQUMvQnVILGtCQUVUckwsS0FBS2tNLFVBQVV0QixPQUFPM0IsRUFBVW5GLE1BRXBDOUQsS0FBS21NLGFBQWFsRCxFQUN0QixDQVFBLFdBQUFvRCxDQUFZdkksR0FDUixHQUFJOUQsS0FBS2tNLFVBQVV2QyxJQUFJN0YsR0FDbkIsT0FBTzlELEtBQUtrTSxVQUFVM0MsSUFBSXpGLEdBRzlCLE1BQU1zSSxFQUFXLElBQUlyRCxFQUFTakYsRUFBTTlELE1BRXBDLE9BREFBLEtBQUtrTSxVQUFVckMsSUFBSS9GLEVBQU1zSSxHQUNsQkEsQ0FDWCxDQUNBLFlBQUFHLEdBQ0ksT0FBTzlLLE1BQU1xSixLQUFLOUssS0FBS2tNLFVBQVVuQixTQUNyQyxFQ2pZSixNQUFNN0IsRUFBWSxHQVlsQixJQUFJLEVBQ09zRCxLQU9SLElBQWEsRUFBVyxDQUFDLElBTmZBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBa0IsUUFBSSxHQUFLLFVBQ3BDQSxFQUFTQSxFQUFlLEtBQUksR0FBSyxPQUNqQ0EsRUFBU0EsRUFBZSxLQUFJLEdBQUssT0FDakNBLEVBQVNBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBaUIsT0FBSSxHQUFLLFNBRXZDLE1BQU1DLEVBQW9CLENBQ3RCLE1BQVMsRUFBU0MsTUFDbEIsUUFBVyxFQUFTQyxRQUNwQixLQUFRLEVBQVNDLEtBQ2pCLEtBQVEsRUFBU0MsS0FDakIsTUFBUyxFQUFTQyxNQUNsQixPQUFVLEVBQVNDLFFBS2pCQyxFQUFrQixFQUFTSixLQU8zQkssRUFBZ0IsQ0FDbEIsQ0FBQyxFQUFTUCxPQUFRLE1BQ2xCLENBQUMsRUFBU0MsU0FBVSxNQUNwQixDQUFDLEVBQVNDLE1BQU8sT0FDakIsQ0FBQyxFQUFTQyxNQUFPLE9BQ2pCLENBQUMsRUFBU0MsT0FBUSxTQU9oQkksRUFBb0IsQ0FBQ2xELEVBQVVtRCxLQUFZQyxLQUM3QyxHQUFJRCxFQUFVbkQsRUFBU3FELFNBQ25CLE9BRUosTUFBTUMsR0FBTSxJQUFJQyxNQUFPQyxjQUNqQkMsRUFBU1IsRUFBY0UsR0FDN0IsSUFBSU0sRUFJQSxNQUFNLElBQUk5TCxNQUFNLDhEQUE4RHdMLE1BSDlFbkksUUFBUXlJLEdBQVEsSUFBSUgsT0FBU3RELEVBQVNsRyxXQUFZc0osRUFJdEQsRUFFSixNQUFNTSxFQU9GLFdBQUEvSixDQUFZRyxHQUNSOUQsS0FBSzhELEtBQU9BLEVBSVo5RCxLQUFLMk4sVUFBWVgsRUFLakJoTixLQUFLNE4sWUFBY1YsRUFJbkJsTixLQUFLNk4sZ0JBQWtCLEtBSXZCM0UsRUFBVTFHLEtBQUt4QyxLQUNuQixDQUNBLFlBQUlxTixHQUNBLE9BQU9yTixLQUFLMk4sU0FDaEIsQ0FDQSxZQUFJTixDQUFTUyxHQUNULEtBQU1BLEtBQU8sR0FDVCxNQUFNLElBQUlDLFVBQVUsa0JBQWtCRCwrQkFFMUM5TixLQUFLMk4sVUFBWUcsQ0FDckIsQ0FFQSxXQUFBRSxDQUFZRixHQUNSOU4sS0FBSzJOLFVBQTJCLGlCQUFSRyxFQUFtQnJCLEVBQWtCcUIsR0FBT0EsQ0FDeEUsQ0FDQSxjQUFJRyxHQUNBLE9BQU9qTyxLQUFLNE4sV0FDaEIsQ0FDQSxjQUFJSyxDQUFXSCxHQUNYLEdBQW1CLG1CQUFSQSxFQUNQLE1BQU0sSUFBSUMsVUFBVSxxREFFeEIvTixLQUFLNE4sWUFBY0UsQ0FDdkIsQ0FDQSxrQkFBSUksR0FDQSxPQUFPbE8sS0FBSzZOLGVBQ2hCLENBQ0Esa0JBQUlLLENBQWVKLEdBQ2Y5TixLQUFLNk4sZ0JBQWtCQyxDQUMzQixDQUlBLEtBQUFLLElBQVNmLEdBQ0xwTixLQUFLNk4saUJBQW1CN04sS0FBSzZOLGdCQUFnQjdOLEtBQU0sRUFBUzBNLFNBQVVVLEdBQ3RFcE4sS0FBSzROLFlBQVk1TixLQUFNLEVBQVMwTSxTQUFVVSxFQUM5QyxDQUNBLEdBQUFnQixJQUFPaEIsR0FDSHBOLEtBQUs2TixpQkFDRDdOLEtBQUs2TixnQkFBZ0I3TixLQUFNLEVBQVMyTSxXQUFZUyxHQUNwRHBOLEtBQUs0TixZQUFZNU4sS0FBTSxFQUFTMk0sV0FBWVMsRUFDaEQsQ0FDQSxJQUFBaEksSUFBUWdJLEdBQ0pwTixLQUFLNk4saUJBQW1CN04sS0FBSzZOLGdCQUFnQjdOLEtBQU0sRUFBUzRNLFFBQVNRLEdBQ3JFcE4sS0FBSzROLFlBQVk1TixLQUFNLEVBQVM0TSxRQUFTUSxFQUM3QyxDQUNBLElBQUFpQixJQUFRakIsR0FDSnBOLEtBQUs2TixpQkFBbUI3TixLQUFLNk4sZ0JBQWdCN04sS0FBTSxFQUFTNk0sUUFBU08sR0FDckVwTixLQUFLNE4sWUFBWTVOLEtBQU0sRUFBUzZNLFFBQVNPLEVBQzdDLENBQ0EsS0FBQW5JLElBQVNtSSxHQUNMcE4sS0FBSzZOLGlCQUFtQjdOLEtBQUs2TixnQkFBZ0I3TixLQUFNLEVBQVM4TSxTQUFVTSxHQUN0RXBOLEtBQUs0TixZQUFZNU4sS0FBTSxFQUFTOE0sU0FBVU0sRUFDOUMsRUNqS0osTUFBTWtCLEVBQWdCLENBQUNDLEVBQVFDLElBQWlCQSxFQUFhQyxNQUFNL04sR0FBTTZOLGFBQWtCN04sSUFFM0YsSUFBSWdPLEVBQ0FDLEVBcUJKLE1BQU1DLEVBQW1CLElBQUlDLFFBQ3ZCQyxFQUFxQixJQUFJRCxRQUN6QkUsRUFBMkIsSUFBSUYsUUFDL0JHLEVBQWlCLElBQUlILFFBQ3JCSSxFQUF3QixJQUFJSixRQTBEbEMsSUFBSUssRUFBZ0IsQ0FDaEIsR0FBQTNGLENBQUk0RixFQUFRQyxFQUFNQyxHQUNkLEdBQUlGLGFBQWtCRyxlQUFnQixDQUVsQyxHQUFhLFNBQVRGLEVBQ0EsT0FBT04sRUFBbUJ2RixJQUFJNEYsR0FFbEMsR0FBYSxxQkFBVEMsRUFDQSxPQUFPRCxFQUFPSSxrQkFBb0JSLEVBQXlCeEYsSUFBSTRGLEdBR25FLEdBQWEsVUFBVEMsRUFDQSxPQUFPQyxFQUFTRSxpQkFBaUIsUUFDM0J2RCxFQUNBcUQsRUFBU0csWUFBWUgsRUFBU0UsaUJBQWlCLEdBRTdELENBRUEsT0FBTyxFQUFLSixFQUFPQyxHQUN2QixFQUNBdkYsSUFBRyxDQUFDc0YsRUFBUUMsRUFBTXJKLEtBQ2RvSixFQUFPQyxHQUFRckosR0FDUixHQUVYNEQsSUFBRyxDQUFDd0YsRUFBUUMsSUFDSkQsYUFBa0JHLGlCQUNSLFNBQVRGLEdBQTRCLFVBQVRBLElBR2pCQSxLQUFRRCxHQXFDdkIsU0FBU00sRUFBdUIxSixHQUM1QixNQUFxQixtQkFBVkEsR0FoQ08ySixFQWlDTTNKLEtBN0JYNEosWUFBWXBKLFVBQVVxSixhQUM3QixxQkFBc0JOLGVBQWUvSSxXQTdHbkNvSSxJQUNIQSxFQUF1QixDQUNwQmtCLFVBQVV0SixVQUFVdUosUUFDcEJELFVBQVV0SixVQUFVd0osU0FDcEJGLFVBQVV0SixVQUFVeUosc0JBcUhFcEksU0FBUzhILEdBQzVCLFlBQWF0QyxHQUloQixPQURBc0MsRUFBS08sTUFBTUMsRUFBT2xRLE1BQU9vTixHQUNsQixFQUFLd0IsRUFBaUJyRixJQUFJdkosTUFDckMsRUFFRyxZQUFhb04sR0FHaEIsT0FBTyxFQUFLc0MsRUFBS08sTUFBTUMsRUFBT2xRLE1BQU9vTixHQUN6QyxFQXZCVyxTQUFVK0MsS0FBZS9DLEdBQzVCLE1BQU1nRCxFQUFLVixFQUFLVyxLQUFLSCxFQUFPbFEsTUFBT21RLEtBQWUvQyxHQUVsRCxPQURBMkIsRUFBeUJsRixJQUFJdUcsRUFBSUQsRUFBV0csS0FBT0gsRUFBV0csT0FBUyxDQUFDSCxJQUNqRSxFQUFLQyxFQUNoQixHQTBCQXJLLGFBQWlCdUosZ0JBaEd6QixTQUF3Q2MsR0FFcEMsR0FBSXRCLEVBQW1CbkYsSUFBSXlHLEdBQ3ZCLE9BQ0osTUFBTUcsRUFBTyxJQUFJM0ssU0FBUSxDQUFDRixFQUFTRCxLQUMvQixNQUFNK0ssRUFBVyxLQUNiSixFQUFHSyxvQkFBb0IsV0FBWUMsR0FDbkNOLEVBQUdLLG9CQUFvQixRQUFTeEwsR0FDaENtTCxFQUFHSyxvQkFBb0IsUUFBU3hMLEVBQU0sRUFFcEN5TCxFQUFXLEtBQ2JoTCxJQUNBOEssR0FBVSxFQUVSdkwsRUFBUSxLQUNWUSxFQUFPMkssRUFBR25MLE9BQVMsSUFBSTBMLGFBQWEsYUFBYyxlQUNsREgsR0FBVSxFQUVkSixFQUFHUSxpQkFBaUIsV0FBWUYsR0FDaENOLEVBQUdRLGlCQUFpQixRQUFTM0wsR0FDN0JtTCxFQUFHUSxpQkFBaUIsUUFBUzNMLEVBQU0sSUFHdkM2SixFQUFtQmpGLElBQUl1RyxFQUFJRyxFQUMvQixDQXlFUU0sQ0FBK0I5SyxHQUMvQnVJLEVBQWN2SSxFQXpKVjJJLElBQ0hBLEVBQW9CLENBQ2pCaUIsWUFDQW1CLGVBQ0FDLFNBQ0FsQixVQUNBUCxrQkFvSkcsSUFBSTBCLE1BQU1qTCxFQUFPbUosR0FFckJuSixHQXpDWCxJQUFzQjJKLENBMEN0QixDQUNBLFNBQVMsRUFBSzNKLEdBR1YsR0FBSUEsYUFBaUJrTCxXQUNqQixPQTNJUixTQUEwQkMsR0FDdEIsTUFBTXZMLEVBQVUsSUFBSUMsU0FBUSxDQUFDRixFQUFTRCxLQUNsQyxNQUFNK0ssRUFBVyxLQUNiVSxFQUFRVCxvQkFBb0IsVUFBV1UsR0FDdkNELEVBQVFULG9CQUFvQixRQUFTeEwsRUFBTSxFQUV6Q2tNLEVBQVUsS0FDWnpMLEVBQVEsRUFBS3dMLEVBQVFFLFNBQ3JCWixHQUFVLEVBRVJ2TCxFQUFRLEtBQ1ZRLEVBQU95TCxFQUFRak0sT0FDZnVMLEdBQVUsRUFFZFUsRUFBUU4saUJBQWlCLFVBQVdPLEdBQ3BDRCxFQUFRTixpQkFBaUIsUUFBUzNMLEVBQU0sSUFlNUMsT0FiQVUsRUFDSzBMLE1BQU10TCxJQUdIQSxhQUFpQjhKLFdBQ2pCakIsRUFBaUIvRSxJQUFJOUQsRUFBT21MLEVBQ2hDLElBR0NsTCxPQUFNLFNBR1hpSixFQUFzQnBGLElBQUlsRSxFQUFTdUwsR0FDNUJ2TCxDQUNYLENBNEdlMkwsQ0FBaUJ2TCxHQUc1QixHQUFJaUosRUFBZXJGLElBQUk1RCxHQUNuQixPQUFPaUosRUFBZXpGLElBQUl4RCxHQUM5QixNQUFNd0wsRUFBVzlCLEVBQXVCMUosR0FPeEMsT0FKSXdMLElBQWF4TCxJQUNiaUosRUFBZW5GLElBQUk5RCxFQUFPd0wsR0FDMUJ0QyxFQUFzQnBGLElBQUkwSCxFQUFVeEwsSUFFakN3TCxDQUNYLENBQ0EsTUFBTXJCLEVBQVVuSyxHQUFVa0osRUFBc0IxRixJQUFJeEQsR0NySTlDeUwsRUFBYyxDQUFDLE1BQU8sU0FBVSxTQUFVLGFBQWMsU0FDeERDLEVBQWUsQ0FBQyxNQUFPLE1BQU8sU0FBVSxTQUN4Q0MsRUFBZ0IsSUFBSXZJLElBQzFCLFNBQVN3SSxFQUFVeEMsRUFBUUMsR0FDdkIsS0FBTUQsYUFBa0JRLGNBQ2xCUCxLQUFRRCxHQUNNLGlCQUFUQyxFQUNQLE9BRUosR0FBSXNDLEVBQWNuSSxJQUFJNkYsR0FDbEIsT0FBT3NDLEVBQWNuSSxJQUFJNkYsR0FDN0IsTUFBTXdDLEVBQWlCeEMsRUFBS2xMLFFBQVEsYUFBYyxJQUM1QzJOLEVBQVd6QyxJQUFTd0MsRUFDcEJFLEVBQVVMLEVBQWE3SixTQUFTZ0ssR0FDdEMsS0FFRUEsS0FBbUJDLEVBQVdkLFNBQVdELGdCQUFnQnZLLGFBQ3JEdUwsSUFBV04sRUFBWTVKLFNBQVNnSyxHQUNsQyxPQUVKLE1BQU1uRSxFQUFTc0UsZUFBZ0JDLEtBQWM1RSxHQUV6QyxNQUFNZ0QsRUFBS3BRLEtBQUs0UCxZQUFZb0MsRUFBV0YsRUFBVSxZQUFjLFlBQy9ELElBQUkzQyxFQUFTaUIsRUFBRzZCLE1BUWhCLE9BUElKLElBQ0ExQyxFQUFTQSxFQUFPK0MsTUFBTTlFLEVBQUsrRSxpQkFNakJ2TSxRQUFRb0YsSUFBSSxDQUN0Qm1FLEVBQU95QyxNQUFtQnhFLEdBQzFCMEUsR0FBVzFCLEVBQUdHLFFBQ2QsRUFDUixFQUVBLE9BREFtQixFQUFjN0gsSUFBSXVGLEVBQU0zQixHQUNqQkEsQ0FDWCxDQUNhLElBQUMyRSxJRCtCZWxELEVBQXpCQSxFQy9CdUIsSUFDcEJrRCxFQUNIN0ksSUFBSyxDQUFDNEYsRUFBUUMsRUFBTUMsSUFBYXNDLEVBQVV4QyxFQUFRQyxJQUFTZ0QsRUFBUzdJLElBQUk0RixFQUFRQyxFQUFNQyxHQUN2RjFGLElBQUssQ0FBQ3dGLEVBQVFDLE1BQVd1QyxFQUFVeEMsRUFBUUMsSUFBU2dELEVBQVN6SSxJQUFJd0YsRUFBUUMsSUNyRTdFLE1BQU1pRCxFQUNGLFdBQUExTyxDQUFZcUYsR0FDUmhKLEtBQUtnSixVQUFZQSxDQUNyQixDQUdBLHFCQUFBc0osR0FJSSxPQUhrQnRTLEtBQUtnSixVQUFVdUQsZUFJNUJyQixLQUFJa0IsSUFDTCxHQW9CWixTQUFrQ0EsR0FDOUIsTUFBTW5ELEVBQVltRCxFQUFTOUIsZUFDM0IsTUFBa0YsYUFBMUVyQixhQUE2QyxFQUFTQSxFQUFVZCxLQUM1RSxDQXZCZ0JvSyxDQUF5Qm5HLEdBQVcsQ0FDcEMsTUFBTXpGLEVBQVV5RixFQUFTakMsZUFDekIsTUFBTyxHQUFHeEQsRUFBUTZMLFdBQVc3TCxFQUFROEwsU0FDekMsQ0FFSSxPQUFPLElBQ1gsSUFFQ3hILFFBQU95SCxHQUFhQSxJQUNwQmpRLEtBQUssSUFDZCxFQWVKLE1BQU1rUSxFQUFTLGdCQUNUQyxFQUFZLFNBa0JaQyxFQUFTLElBQUluRixFQUFPLGlCQXdFcEIsRUFBcUIsWUFDckJvRixFQUFzQixDQUN4QixDQUFDSCxHQUFTLFlBQ1YsdUJBQVUsbUJBQ1Ysc0JBQVUsaUJBQ1YsNkJBQVUsd0JBQ1Ysc0JBQVUsaUJBQ1YsNkJBQVUsd0JBQ1YsaUJBQVUsWUFDVix3QkFBVSxtQkFDVixxQkFBVSxZQUNWLDRCQUFVLG1CQUNWLHNCQUFVLFVBQ1YsNkJBQVUsaUJBQ1YsMEJBQVUsV0FDVixpQ0FBVSxrQkFDVixzQkFBVSxXQUNWLDZCQUFVLGtCQUNWLHdCQUFVLFlBQ1YsK0JBQVUsbUJBQ1YsMEJBQVUsVUFDVixpQ0FBVSxpQkFDVixvQkFBVSxXQUNWLDJCQUFVLGtCQUNWLHNCQUFVLFdBQ1YsNkJBQVUsa0JBQ1YsVUFBVyxVQUNYLFNBQVEsZUFzQk5JLEVBQVEsSUFBSTVKLElBT1o2SixFQUFjLElBQUk3SixJQU14QixTQUFTOEosRUFBY0MsRUFBS2pLLEdBQ3hCLElBQ0lpSyxFQUFJbEssVUFBVW1ELGFBQWFsRCxFQUMvQixDQUNBLE1BQU8vSSxHQUNIMlMsRUFBTzFFLE1BQU0sYUFBYWxGLEVBQVVuRiw0Q0FBNENvUCxFQUFJcFAsT0FBUTVELEVBQ2hHLENBQ0osQ0FlQSxTQUFTaVQsRUFBbUJsSyxHQUN4QixNQUFNbUssRUFBZ0JuSyxFQUFVbkYsS0FDaEMsR0FBSWtQLEVBQVlySixJQUFJeUosR0FFaEIsT0FEQVAsRUFBTzFFLE1BQU0sc0RBQXNEaUYsT0FDNUQsRUFFWEosRUFBWW5KLElBQUl1SixFQUFlbkssR0FFL0IsSUFBSyxNQUFNaUssS0FBT0gsRUFBTWhJLFNBQ3BCa0ksRUFBY0MsRUFBS2pLLEdBRXZCLE9BQU8sQ0FDWCxDQXVEQSxNQWVNb0ssRUFBZ0IsSUFBSTVNLEVBQWEsTUFBTyxXQWYvQixDQUNYLFNBQWtDLDZFQUVsQyxlQUE4QyxnQ0FDOUMsZ0JBQWdELGtGQUNoRCxjQUE0QyxrREFDNUMsYUFBMEMsMEVBQzFDLHVCQUE4RCw2RUFFOUQsdUJBQThELHdEQUM5RCxXQUFzQyxnRkFDdEMsVUFBb0MscUZBQ3BDLFVBQXNDLG1GQUN0QyxhQUEwQyx3RkFvQjlDLE1BQU02TSxFQUNGLFdBQUEzUCxDQUFZeUcsRUFBUzdFLEVBQVF5RCxHQUN6QmhKLEtBQUt1VCxZQUFhLEVBQ2xCdlQsS0FBS3dULFNBQVduTixPQUFPb04sT0FBTyxDQUFDLEVBQUdySixHQUNsQ3BLLEtBQUswVCxRQUFVck4sT0FBT29OLE9BQU8sQ0FBQyxFQUFHbE8sR0FDakN2RixLQUFLMlQsTUFBUXBPLEVBQU96QixLQUNwQjlELEtBQUs0VCxnQ0FDRHJPLEVBQU9zTywrQkFDWDdULEtBQUs4VCxXQUFhOUssRUFDbEJoSixLQUFLZ0osVUFBVW1ELGFBQWEsSUFBSWxFLEVBQVUsT0FBTyxJQUFNakksTUFBTSxVQUNqRSxDQUNBLGtDQUFJNlQsR0FFQSxPQURBN1QsS0FBSytULGlCQUNFL1QsS0FBSzRULCtCQUNoQixDQUNBLGtDQUFJQyxDQUErQi9GLEdBQy9COU4sS0FBSytULGlCQUNML1QsS0FBSzRULGdDQUFrQzlGLENBQzNDLENBQ0EsUUFBSWhLLEdBRUEsT0FEQTlELEtBQUsrVCxpQkFDRS9ULEtBQUsyVCxLQUNoQixDQUNBLFdBQUl2SixHQUVBLE9BREFwSyxLQUFLK1QsaUJBQ0UvVCxLQUFLd1QsUUFDaEIsQ0FDQSxVQUFJak8sR0FFQSxPQURBdkYsS0FBSytULGlCQUNFL1QsS0FBSzBULE9BQ2hCLENBQ0EsYUFBSTFLLEdBQ0EsT0FBT2hKLEtBQUs4VCxVQUNoQixDQUNBLGFBQUlFLEdBQ0EsT0FBT2hVLEtBQUt1VCxVQUNoQixDQUNBLGFBQUlTLENBQVVsRyxHQUNWOU4sS0FBS3VULFdBQWF6RixDQUN0QixDQUtBLGNBQUFpRyxHQUNJLEdBQUkvVCxLQUFLZ1UsVUFDTCxNQUFNWCxFQUFjM00sT0FBTyxjQUEwQyxDQUFFdU4sUUFBU2pVLEtBQUsyVCxPQUU3RixFQXlCSixTQUFTTyxHQUFjVixFQUFVVyxFQUFZLENBQUMsR0FDMUMsSUFBSS9KLEVBQVVvSixFQUNXLGlCQUFkVyxJQUVQQSxFQUFZLENBQUVyUSxLQUREcVEsSUFHakIsTUFBTTVPLEVBQVNjLE9BQU9vTixPQUFPLENBQUUzUCxLQUFNLEVBQW9CK1AsZ0NBQWdDLEdBQVNNLEdBQzVGclEsRUFBT3lCLEVBQU96QixLQUNwQixHQUFvQixpQkFBVEEsSUFBc0JBLEVBQzdCLE1BQU11UCxFQUFjM00sT0FBTyxlQUE0QyxDQUNuRXVOLFFBQVNqUixPQUFPYyxLQUl4QixHQURBc0csSUFBWUEsRUFBVS9FLE1BQ2pCK0UsRUFDRCxNQUFNaUosRUFBYzNNLE9BQU8sY0FFL0IsTUFBTTBOLEVBQWNyQixFQUFNeEosSUFBSXpGLEdBQzlCLEdBQUlzUSxFQUFhLENBRWIsR0FBSSxFQUFVaEssRUFBU2dLLEVBQVloSyxVQUMvQixFQUFVN0UsRUFBUTZPLEVBQVk3TyxRQUM5QixPQUFPNk8sRUFHUCxNQUFNZixFQUFjM00sT0FBTyxnQkFBOEMsQ0FBRXVOLFFBQVNuUSxHQUU1RixDQUNBLE1BQU1rRixFQUFZLElBQUlpRCxFQUFtQm5JLEdBQ3pDLElBQUssTUFBTW1GLEtBQWErSixFQUFZakksU0FDaEMvQixFQUFVbUQsYUFBYWxELEdBRTNCLE1BQU1vTCxFQUFTLElBQUlmLEVBQWdCbEosRUFBUzdFLEVBQVF5RCxHQUVwRCxPQURBK0osRUFBTWxKLElBQUkvRixFQUFNdVEsR0FDVEEsQ0FDWCxDQWtGQSxTQUFTQyxHQUFnQkMsRUFBa0I5QixFQUFTK0IsR0FDaEQsSUFBSWxQLEVBR0osSUFBSWtOLEVBQTJELFFBQWhEbE4sRUFBS3dOLEVBQW9CeUIsVUFBc0MsSUFBUGpQLEVBQWdCQSxFQUFLaVAsRUFDeEZDLElBQ0FoQyxHQUFXLElBQUlnQyxLQUVuQixNQUFNQyxFQUFrQmpDLEVBQVEzTixNQUFNLFNBQ2hDNlAsRUFBa0JqQyxFQUFRNU4sTUFBTSxTQUN0QyxHQUFJNFAsR0FBbUJDLEVBQWlCLENBQ3BDLE1BQU1DLEVBQVUsQ0FDWiwrQkFBK0JuQyxvQkFBMEJDLE9BWTdELE9BVklnQyxHQUNBRSxFQUFRblMsS0FBSyxpQkFBaUJnUSxzREFFOUJpQyxHQUFtQkMsR0FDbkJDLEVBQVFuUyxLQUFLLE9BRWJrUyxHQUNBQyxFQUFRblMsS0FBSyxpQkFBaUJpUSwyREFFbENJLEVBQU94RSxLQUFLc0csRUFBUWxTLEtBQUssS0FFN0IsQ0FDQTBRLEVBQW1CLElBQUlsTCxFQUFVLEdBQUd1SyxhQUFtQixLQUFNLENBQUdBLFVBQVNDLGFBQVksV0FDekYsQ0EyQ0EsTUFBTW1DLEdBQVUsOEJBQ1ZDLEdBQWEsRUFDYkMsR0FBYSwyQkFDbkIsSUFBSUMsR0FBWSxLQUNoQixTQUFTQyxLQW9CTCxPQW5CS0QsS0FDREEsR0Q5a0JSLFNBQWdCalIsRUFBTTJPLEdBQVMsUUFBRXdDLEVBQU8sUUFBRUMsRUFBTyxTQUFFQyxFQUFRLFdBQUVDLEdBQWUsQ0FBQyxHQUN6RSxNQUFNbEUsRUFBVW1FLFVBQVVDLEtBQUt4UixFQUFNMk8sR0FDL0I4QyxFQUFjLEVBQUtyRSxHQW9CekIsT0FuQklnRSxHQUNBaEUsRUFBUU4saUJBQWlCLGlCQUFrQjRFLElBQ3ZDTixFQUFRLEVBQUtoRSxFQUFRRSxRQUFTb0UsRUFBTUMsV0FBWUQsRUFBTUUsV0FBWSxFQUFLeEUsRUFBUXRCLGFBQWM0RixFQUFNLElBR3ZHUCxHQUNBL0QsRUFBUU4saUJBQWlCLFdBQVk0RSxHQUFVUCxFQUUvQ08sRUFBTUMsV0FBWUQsRUFBTUUsV0FBWUYsS0FFeENELEVBQ0tsRSxNQUFNc0UsSUFDSFAsR0FDQU8sRUFBRy9FLGlCQUFpQixTQUFTLElBQU13RSxNQUNuQ0QsR0FDQVEsRUFBRy9FLGlCQUFpQixpQkFBa0I0RSxHQUFVTCxFQUFTSyxFQUFNQyxXQUFZRCxFQUFNRSxXQUFZRixJQUNqRyxJQUVDeFAsT0FBTSxTQUNKdVAsQ0FDWCxDQ3VqQm9CSyxDQUFPaEIsR0FBU0MsR0FBWSxDQUNwQ0ssUUFBUyxDQUFDUyxFQUFJRixLQU9ELElBRERBLEdBRUFFLEVBQUdFLGtCQUFrQmYsR0FDN0IsSUFFTDlPLE9BQU05RixJQUNMLE1BQU1tVCxFQUFjM00sT0FBTyxXQUFvQyxDQUMzRG9QLHFCQUFzQjVWLEVBQUVpRyxTQUMxQixLQUdINE8sRUFDWCxDQXNCQWhELGVBQWVnRSxHQUEyQjdDLEVBQUs4QyxHQUMzQyxJQUNJLE1BQ001RixTQURXNEUsTUFDSHBGLFlBQVlrRixHQUFZLGFBQ2hDdEYsRUFBY1ksRUFBR1osWUFBWXNGLFVBQzdCdEYsRUFBWXlHLElBQUlELEVBQWlCRSxHQUFXaEQsVUFDNUM5QyxFQUFHRyxJQUNiLENBQ0EsTUFBT3JRLEdBQ0gsR0FBSUEsYUFBYStGLEVBQ2I0TSxFQUFPeEUsS0FBS25PLEVBQUVpRyxhQUViLENBQ0QsTUFBTWdRLEVBQWM5QyxFQUFjM00sT0FBTyxVQUFvQyxDQUN6RW9QLHFCQUFzQjVWLGFBQTZCLEVBQVNBLEVBQUVpRyxVQUVsRTBNLEVBQU94RSxLQUFLOEgsRUFBWWhRLFFBQzVCLENBQ0osQ0FDSixDQUNBLFNBQVMrUCxHQUFXaEQsR0FDaEIsTUFBTyxHQUFHQSxFQUFJcFAsUUFBUW9QLEVBQUk5SSxRQUFRZ00sT0FDdEMsQ0FxQkEsTUFBTUMsR0FDRixXQUFBMVMsQ0FBWXFGLEdBQ1JoSixLQUFLZ0osVUFBWUEsRUFVakJoSixLQUFLc1csaUJBQW1CLEtBQ3hCLE1BQU1wRCxFQUFNbFQsS0FBS2dKLFVBQVVxRCxZQUFZLE9BQU9sQyxlQUM5Q25LLEtBQUt1VyxTQUFXLElBQUlDLEdBQXFCdEQsR0FDekNsVCxLQUFLeVcsd0JBQTBCelcsS0FBS3VXLFNBQVNHLE9BQU9yRixNQUFLRCxJQUNyRHBSLEtBQUtzVyxpQkFBbUJsRixFQUNqQkEsSUFFZixDQVFBLHNCQUFNdUYsR0FDRixNQUtNQyxFQUxpQjVXLEtBQUtnSixVQUN2QnFELFlBQVksbUJBQ1psQyxlQUd3Qm1JLHdCQUN2QnVFLEVBQU9DLEtBTWIsR0FMOEIsT0FBMUI5VyxLQUFLc1csbUJBQ0x0VyxLQUFLc1csdUJBQXlCdFcsS0FBS3lXLHlCQUluQ3pXLEtBQUtzVyxpQkFBaUJTLHdCQUEwQkYsSUFDaEQ3VyxLQUFLc1csaUJBQWlCVSxXQUFXdkksTUFBS3dJLEdBQXVCQSxFQUFvQkosT0FBU0EsSUFhOUYsT0FSSTdXLEtBQUtzVyxpQkFBaUJVLFdBQVd4VSxLQUFLLENBQUVxVSxPQUFNRCxVQUdsRDVXLEtBQUtzVyxpQkFBaUJVLFdBQWFoWCxLQUFLc1csaUJBQWlCVSxXQUFXL0wsUUFBT2dNLElBQ3ZFLE1BQU1DLEVBQWMsSUFBSTNKLEtBQUswSixFQUFvQkosTUFBTU0sVUFFdkQsT0FEWTVKLEtBQUtELE1BQ0o0SixHQXJEcUIsTUFxRCtCLElBRTlEbFgsS0FBS3VXLFNBQVNhLFVBQVVwWCxLQUFLc1csaUJBQ3hDLENBUUEseUJBQU1lLEdBS0YsR0FKOEIsT0FBMUJyWCxLQUFLc1csd0JBQ0N0VyxLQUFLeVcsd0JBR2UsT0FBMUJ6VyxLQUFLc1csa0JBQ3VDLElBQTVDdFcsS0FBS3NXLGlCQUFpQlUsV0FBV3ZXLE9BQ2pDLE1BQU8sR0FFWCxNQUFNb1csRUFBT0MsTUFFUCxpQkFBRVEsRUFBZ0IsY0FBRUMsR0F5QmxDLFNBQW9DQyxFQUFpQkMsRUF0RzVCLE1BeUdyQixNQUFNSCxFQUFtQixHQUV6QixJQUFJQyxFQUFnQkMsRUFBZ0JFLFFBQ3BDLElBQUssTUFBTVQsS0FBdUJPLEVBQWlCLENBRS9DLE1BQU1HLEVBQWlCTCxFQUFpQk0sTUFBS0MsR0FBTUEsRUFBR2pCLFFBQVVLLEVBQW9CTCxRQUNwRixHQUFLZSxHQWlCRCxHQUhBQSxFQUFlRyxNQUFNdFYsS0FBS3lVLEVBQW9CSixNQUcxQ2tCLEdBQVdULEdBQW9CRyxFQUFTLENBQ3hDRSxFQUFlRyxNQUFNRSxNQUNyQixLQUNKLE9BZEEsR0FKQVYsRUFBaUI5VSxLQUFLLENBQ2xCb1UsTUFBT0ssRUFBb0JMLE1BQzNCa0IsTUFBTyxDQUFDYixFQUFvQkosUUFFNUJrQixHQUFXVCxHQUFvQkcsRUFBUyxDQUd4Q0gsRUFBaUJVLE1BQ2pCLEtBQ0osQ0FhSlQsRUFBZ0JBLEVBQWNHLE1BQU0sRUFDeEMsQ0FDQSxNQUFPLENBQ0hKLG1CQUNBQyxnQkFFUixDQWhFb0RVLENBQTJCalksS0FBS3NXLGlCQUFpQlUsWUFDdkZrQixFQUFlblUsRUFBOEJVLEtBQUswVCxVQUFVLENBQUUxRixRQUFTLEVBQUd1RSxXQUFZTSxLQWdCNUYsT0FkQXRYLEtBQUtzVyxpQkFBaUJTLHNCQUF3QkYsRUFDMUNVLEVBQWM5VyxPQUFTLEdBRXZCVCxLQUFLc1csaUJBQWlCVSxXQUFhTyxRQUk3QnZYLEtBQUt1VyxTQUFTYSxVQUFVcFgsS0FBS3NXLG9CQUduQ3RXLEtBQUtzVyxpQkFBaUJVLFdBQWEsR0FFOUJoWCxLQUFLdVcsU0FBU2EsVUFBVXBYLEtBQUtzVyxtQkFFL0I0QixDQUNYLEVBRUosU0FBU3BCLEtBR0wsT0FGYyxJQUFJdkosTUFFTEMsY0FBYzRLLFVBQVUsRUFBRyxHQUM1QyxDQXlDQSxNQUFNNUIsR0FDRixXQUFBN1MsQ0FBWXVQLEdBQ1JsVCxLQUFLa1QsSUFBTUEsRUFDWGxULEtBQUtxWSx3QkFBMEJyWSxLQUFLc1ksOEJBQ3hDLENBQ0Esa0NBQU1BLEdBQ0YsUUxBUixXQUNJLElBQ0ksTUFBNEIsaUJBQWRqRCxTQUNsQixDQUNBLE1BQU9uVixHQUNILE9BQU8sQ0FDWCxDQUNKLENLUGEsSUxnQkYsSUFBSTBGLFNBQVEsQ0FBQ0YsRUFBU0QsS0FDekIsSUFDSSxJQUFJOFMsR0FBVyxFQUNmLE1BQU1DLEVBQWdCLDBEQUNoQnRILEVBQVU5TSxLQUFLaVIsVUFBVUMsS0FBS2tELEdBQ3BDdEgsRUFBUXVILFVBQVksS0FDaEJ2SCxFQUFRRSxPQUFPc0gsUUFFVkgsR0FDRG5VLEtBQUtpUixVQUFVc0QsZUFBZUgsR0FFbEM5UyxHQUFRLEVBQUssRUFFakJ3TCxFQUFRMEgsZ0JBQWtCLEtBQ3RCTCxHQUFXLENBQUssRUFFcEJySCxFQUFRMkgsUUFBVSxLQUNkLElBQUl2VCxFQUNKRyxHQUFpQyxRQUF4QkgsRUFBSzRMLEVBQVFqTSxhQUEwQixJQUFQSyxPQUFnQixFQUFTQSxFQUFHYSxVQUFZLEdBQUcsQ0FFNUYsQ0FDQSxNQUFPbEIsR0FDSFEsRUFBT1IsRUFDWCxLS2xDU29NLE1BQUssS0FBTSxJQUNYckwsT0FBTSxLQUFNLEdBRXpCLENBSUEsVUFBTTBRLEdBRUYsU0FEOEIxVyxLQUFLcVksd0JBSTlCLENBQ0QsTUFBTVMsUUFuT2xCL0csZUFBMkNtQixHQUN2QyxJQUNJLE1BQU15QyxRQUFXWCxLQUtqQixhQUpxQlcsRUFDaEIvRixZQUFZa0YsSUFDWnRGLFlBQVlzRixJQUNadkwsSUFBSTJNLEdBQVdoRCxHQUV4QixDQUNBLE1BQU9oVCxHQUNILEdBQUlBLGFBQWErRixFQUNiNE0sRUFBT3hFLEtBQUtuTyxFQUFFaUcsYUFFYixDQUNELE1BQU1nUSxFQUFjOUMsRUFBYzNNLE9BQU8sVUFBa0MsQ0FDdkVvUCxxQkFBc0I1VixhQUE2QixFQUFTQSxFQUFFaUcsVUFFbEUwTSxFQUFPeEUsS0FBSzhILEVBQVloUSxRQUM1QixDQUNKLENBQ0osQ0ErTTZDNFMsQ0FBNEIvWSxLQUFLa1QsS0FDbEUsT0FBTzRGLEdBQXNCLENBQUU5QixXQUFZLEdBQy9DLENBTEksTUFBTyxDQUFFQSxXQUFZLEdBTTdCLENBRUEsZUFBTUksQ0FBVTRCLEdBQ1osSUFBSTFULEVBRUosU0FEOEJ0RixLQUFLcVksd0JBSTlCLENBQ0QsTUFBTVksUUFBaUNqWixLQUFLMFcsT0FDNUMsT0FBT1gsR0FBMkIvVixLQUFLa1QsSUFBSyxDQUN4QzZELHNCQUF5RSxRQUFqRHpSLEVBQUswVCxFQUFpQmpDLDZCQUEwQyxJQUFQelIsRUFBZ0JBLEVBQUsyVCxFQUF5QmxDLHNCQUMvSEMsV0FBWWdDLEVBQWlCaEMsWUFFckMsQ0FDSixDQUVBLFNBQU1wTCxDQUFJb04sR0FDTixJQUFJMVQsRUFFSixTQUQ4QnRGLEtBQUtxWSx3QkFJOUIsQ0FDRCxNQUFNWSxRQUFpQ2paLEtBQUswVyxPQUM1QyxPQUFPWCxHQUEyQi9WLEtBQUtrVCxJQUFLLENBQ3hDNkQsc0JBQXlFLFFBQWpEelIsRUFBSzBULEVBQWlCakMsNkJBQTBDLElBQVB6UixFQUFnQkEsRUFBSzJULEVBQXlCbEMsc0JBQy9IQyxXQUFZLElBQ0xpQyxFQUF5QmpDLGNBQ3pCZ0MsRUFBaUJoQyxhQUdoQyxDQUNKLEVBT0osU0FBU2UsR0FBV1AsR0FFaEIsT0FBT3pULEVBRVBVLEtBQUswVCxVQUFVLENBQUUxRixRQUFTLEVBQUd1RSxXQUFZUSxLQUFvQi9XLE1BQ2pFLENBbUJJMFMsRUFBbUIsSUFBSWxMLEVBQVUsbUJBQW1CZSxHQUFhLElBQUlxSixFQUEwQnJKLElBQVksWUFDM0dtSyxFQUFtQixJQUFJbEwsRUFBVSxhQUFhZSxHQUFhLElBQUlxTixHQUFxQnJOLElBQVksWUFFaEdzTCxHQUFnQjNCLEVBQVFDLEVBYUwsSUFYbkIwQixHQUFnQjNCLEVBQVFDLEVBQVcsV0FFbkMwQixHQUFnQixVQUFXLElDbjRCL0JBLEdBbkJXLFdBQ0csU0FrQmlCLE9DdEIvQixJQVVJM00sR0FWQXVSLEdBQXVDLG9CQUFmblosV0FBNkJBLFdBQStCLG9CQUFYSSxPQUF5QkEsT0FBMkIsb0JBQVhnWixPQUF5QkEsT0FBeUIsb0JBQVQvVSxLQUF1QkEsS0FBTyxDQUFDLEVBRTFMZ1YsR0FBTSxDQUFDLEVBUUxDLEdBQUtBLElBQU0sQ0FBQyxFQUFFQyxHQUFFSixJQUFnQjlVLEtBQUssU0FBU21WLEdBQUdqUyxHQUFHLElBQUlDLFNBQVNELEVBQXNELE1BQU8sVUFBM0RDLEVBQUUsVUFBVUEsRUFBRUEsRUFBRUQsRUFBRTdGLE1BQU1DLFFBQVE0RixHQUFHLFFBQVFDLEVBQUUsU0FBMEIsVUFBVUEsR0FBRyxpQkFBaUJELEVBQUU3RyxNQUFNLENBQUMsU0FBU0YsR0FBRStHLEdBQUcsSUFBSUMsU0FBU0QsRUFBRSxNQUFPLFVBQVVDLEdBQUcsTUFBTUQsR0FBRyxZQUFZQyxDQUFDLENBQXVGLElBQUlpUyxHQUFHLGdCQUFnQixJQUFJQyxLQUFLQyxXQUFXLEdBQUdDLEdBQUcsRUFBRSxTQUFTQyxHQUFHdFMsRUFBRUMsRUFBRTdHLEdBQUcsT0FBTzRHLEVBQUUrSSxLQUFLSixNQUFNM0ksRUFBRXVTLEtBQUtoVyxVQUFVLENBQ2hjLFNBQVNpVyxHQUFHeFMsRUFBRUMsRUFBRTdHLEdBQUcsSUFBSTRHLEVBQUUsTUFBTTNGLFFBQVEsR0FBRyxFQUFFa0MsVUFBVXBELE9BQU8sQ0FBQyxJQUFJc1osRUFBRXRZLE1BQU04RSxVQUFVbVIsTUFBTXJILEtBQUt4TSxVQUFVLEdBQUcsT0FBTyxXQUFXLElBQUkzRCxFQUFFdUIsTUFBTThFLFVBQVVtUixNQUFNckgsS0FBS3hNLFdBQThDLE9BQW5DcEMsTUFBTThFLFVBQVV5VCxRQUFRL0osTUFBTS9QLEVBQUU2WixHQUFVelMsRUFBRTJJLE1BQU0xSSxFQUFFckgsRUFBRSxDQUFDLENBQUMsT0FBTyxXQUFXLE9BQU9vSCxFQUFFMkksTUFBTTFJLEVBQUUxRCxVQUFVLENBQUMsQ0FBQyxTQUFTb1csR0FBRTNTLEVBQUVDLEVBQUU3RyxHQUFvRyxPQUFWdVosR0FBdkZoYSxTQUFTc0csVUFBVXNULE9BQU8sR0FBRzVaLFNBQVNzRyxVQUFVc1QsS0FBS0ssV0FBV0MsUUFBUSxlQUFpQlAsR0FBS0UsSUFBWTdKLE1BQU0sS0FBS3BNLFVBQVUsQ0FDbGEsU0FBU3VXLEdBQUc5UyxFQUFFQyxHQUFHLElBQUk3RyxFQUFFZSxNQUFNOEUsVUFBVW1SLE1BQU1ySCxLQUFLeE0sVUFBVSxHQUFHLE9BQU8sV0FBVyxJQUFJa1csRUFBRXJaLEVBQUVnWCxRQUFrQyxPQUExQnFDLEVBQUV2WCxLQUFLeU4sTUFBTThKLEVBQUVsVyxXQUFrQnlELEVBQUUySSxNQUFNalEsS0FBSytaLEVBQUUsQ0FBQyxDQUFDLFNBQVNNLEdBQUUvUyxFQUFFQyxHQUFHLFNBQVM3RyxJQUFJLENBQUNBLEVBQUU2RixVQUFVZ0IsRUFBRWhCLFVBQVVlLEVBQUVnVCxFQUFFL1MsRUFBRWhCLFVBQVVlLEVBQUVmLFVBQVUsSUFBSTdGLEVBQUU0RyxFQUFFZixVQUFVNUMsWUFBWTJELEVBQUVBLEVBQUVpVCxHQUFHLFNBQVNSLEVBQUU3WixFQUFFc2EsR0FBRyxJQUFJLElBQUlDLEVBQUVoWixNQUFNb0MsVUFBVXBELE9BQU8sR0FBR2lhLEVBQUUsRUFBRUEsRUFBRTdXLFVBQVVwRCxPQUFPaWEsSUFBSUQsRUFBRUMsRUFBRSxHQUFHN1csVUFBVTZXLEdBQUcsT0FBT25ULEVBQUVoQixVQUFVckcsR0FBRytQLE1BQU04SixFQUFFVSxFQUFFLENBQUUsQ0FBQyxTQUFTRSxLQUFJM2EsS0FBSzRhLEVBQUU1YSxLQUFLNGEsRUFBRTVhLEtBQUs2YSxFQUFFN2EsS0FBSzZhLENBQUUsQ0FBVUYsR0FBRXBVLFVBQVVxVSxHQUFFLEVBQUdELEdBQUVwVSxVQUFVdVUsR0FBRyxXQUZwTyxJQUFZeFQsR0FFdU90SCxLQUFLNGEsSUFBSTVhLEtBQUs0YSxHQUFFLEVBQUc1YSxLQUFLK2EsSUFBSSxLQUZuUXpULEVBRThRdEgsS0FGcFFxRyxPQUFPRSxVQUFVeVUsZUFBZTNLLEtBQUsvSSxFQUFFa1MsS0FBS2xTLEVBQUVrUyxNQUFNbFMsRUFBRWtTLE1BQU1HLElBRStNLEVBQUVnQixHQUFFcFUsVUFBVXdVLEVBQUUsV0FBVyxHQUFHL2EsS0FBSzZhLEVBQUUsS0FBSzdhLEtBQUs2YSxFQUFFcGEsUUFBUVQsS0FBSzZhLEVBQUUxSSxPQUFQblMsRUFBaUIsRUFBRSxNQUFNaWIsR0FBR3haLE1BQU04RSxVQUFVNFQsUUFBUSxTQUFTN1MsRUFBRUMsR0FBRyxPQUFPOUYsTUFBTThFLFVBQVU0VCxRQUFROUosS0FBSy9JLEVBQUVDLE9BQUUsRUFBTyxFQUFFLFNBQVNELEVBQUVDLEdBQUcsR0FBRyxpQkFBa0JELEVBQUUsTUFBTyxpQkFBa0JDLEdBQUcsR0FBR0EsRUFBRTlHLFFBQVEsRUFBRTZHLEVBQUU2UyxRQUFRNVMsRUFBRSxHQUFHLElBQUksSUFBSTdHLEVBQUUsRUFBRUEsRUFBRTRHLEVBQUU3RyxPQUFPQyxJQUFJLEdBQUdBLEtBQUs0RyxHQUFHQSxFQUFFNUcsS0FBSzZHLEVBQUUsT0FBTzdHLEVBQUUsT0FBUSxDQUFDLEVBQUUsU0FBU3dhLEdBQUc1VCxHQUFHLE1BQU1DLEVBQUVELEVBQUU3RyxPQUFPLEdBQUcsRUFBRThHLEVBQUUsQ0FBQyxNQUFNN0csRUFBRWUsTUFBTThGLEdBQUcsSUFBSSxJQUFJd1MsRUFBRSxFQUFFQSxFQUFFeFMsRUFBRXdTLElBQUlyWixFQUFFcVosR0FBR3pTLEVBQUV5UyxHQUFHLE9BQU9yWixDQUFDLENBQUMsTUFBTyxFQUFFLENBQ3Y5QixTQUFTeWEsR0FBRzdULEVBQUVDLEdBQUcsSUFBSSxJQUFJN0csRUFBRSxFQUFFQSxFQUFFbUQsVUFBVXBELE9BQU9DLElBQUksQ0FBQyxNQUFNcVosRUFBRWxXLFVBQVVuRCxHQUFHLEdBQUc2WSxHQUFHUSxHQUFHLENBQUMsTUFBTTdaLEVBQUVvSCxFQUFFN0csUUFBUSxFQUFFK1osRUFBRVQsRUFBRXRaLFFBQVEsRUFBRTZHLEVBQUU3RyxPQUFPUCxFQUFFc2EsRUFBRSxJQUFJLElBQUlDLEVBQUUsRUFBRUEsRUFBRUQsRUFBRUMsSUFBSW5ULEVBQUVwSCxFQUFFdWEsR0FBR1YsRUFBRVUsRUFBRyxNQUFNblQsRUFBRTlFLEtBQUt1WCxFQUFHLENBQUMsQ0FBQyxTQUFTcUIsR0FBRTlULEVBQUVDLEdBQUd2SCxLQUFLbUksS0FBS2IsRUFBRXRILEtBQUtGLEVBQUVFLEtBQUttUCxPQUFPNUgsRUFBRXZILEtBQUtxYixrQkFBaUIsQ0FBRyxDQUFDRCxHQUFFN1UsVUFBVWtVLEVBQUUsV0FBV3phLEtBQUtxYixrQkFBaUIsQ0FBRyxFQUFFLElBQUlDLEdBQUcsV0FBVyxJQUFJaEMsR0FBRTFJLG1CQUFtQnZLLE9BQU9rVixlQUFlLE9BQU8sRUFBRyxJQUFJalUsR0FBRSxFQUFHQyxFQUFFbEIsT0FBT2tWLGVBQWUsQ0FBQyxFQUFFLFVBQVUsQ0FBQ2hTLElBQUksV0FBV2pDLEdBQUUsQ0FBRyxJQUFJLElBQUlnUyxHQUFFMUksaUJBQWlCLFFBQU8sUUFBT3JKLEdBQUcrUixHQUFFN0ksb0JBQW9CLFFBQU8sUUFBT2xKLEVBQUcsQ0FBQyxNQUFNN0csR0FBRyxDQUFDLE9BQU80RyxDQUFDLENBQTdPLEdBQWlQLFNBQVNrVSxHQUFFbFUsR0FBRyxNQUFPLGNBQWNtVSxLQUFLblUsRUFBRSxDQUFDLFNBQVNvVSxLQUFLLElBQUlwVSxFQUFFZ1MsR0FBRXFDLFVBQVUsT0FBT3JVLElBQUlBLEVBQUVBLEVBQUVzVSxXQUFXdFUsRUFBRSxFQUFFLENBQUMsU0FBU3VVLEdBQUV2VSxHQUFHLE9BQVEsR0FBR29VLEtBQUt2QixRQUFRN1MsRUFBRSxDQUFDLFNBQVN3VSxHQUFHeFUsR0FBYyxPQUFYd1UsR0FBRyxLQUFLeFUsR0FBVUEsQ0FBQyxDQUFDd1UsR0FBRyxLQUFLLFdBQVcsRUFBNEYsSUFBMlNDLEdBQzdsQ3pVLEdBQThVMFUsR0FEd2VDLEdBQUdKLEdBQUUsU0FBU0ssR0FBRUwsR0FBRSxZQUFZQSxHQUFFLFFBQVFNLEdBQUdOLEdBQUUsUUFBUU8sR0FBR0QsSUFBSUQsR0FBRUcsR0FBR1IsR0FBRSxhQUFhLEdBQUdILEtBQUtZLGNBQWNuQyxRQUFRLFlBQVkwQixHQUFFLFlBQVlBLEdBQUUsWUFBWUEsR0FBRSxXQUFXQSxHQUFFLFFBQVFVLElBQUksR0FBR2IsS0FBS1ksY0FBY25DLFFBQVEsWUFBWTBCLEdBQUUsUUFBUSxTQUFTVyxLQUFLLElBQUlsVixFQUFFZ1MsR0FBRTFVLFNBQVMsT0FBTzBDLEVBQUVBLEVBQUVtVixrQkFBYSxDQUFNLENBQ3ZuQ25WLEVBQUUsQ0FBQyxJQUFJb1YsR0FBRyxHQUFHQyxJQUFrQnJWLEdBQUVvVSxLQUFRVyxHQUFVLHFCQUFxQk8sS0FBS3RWLElBQU02VSxHQUFVLGtCQUFrQlMsS0FBS3RWLElBQU00VSxHQUFTLG1DQUFtQ1UsS0FBS3RWLElBQU1pVixHQUFVLGdCQUFnQkssS0FBS3RWLElBQU0yVSxHQUFVLHlCQUF5QlcsS0FBS3RWLFNBQTNDLEdBQXNFLEdBQXJCcVYsS0FBS0QsR0FBR0MsR0FBR0EsR0FBRyxHQUFHLElBQU9ULEdBQUUsQ0FBQyxJQUFJVyxHQUFHTCxLQUFLLEdBQUcsTUFBTUssSUFBSUEsR0FBR0MsV0FBV0osSUFBSSxDQUFDWCxHQUFHL1ksT0FBTzZaLElBQUksTUFBTXZWLENBQUMsQ0FBQyxDQUFDeVUsR0FBR1csRUFBRyxDQUFXcEQsR0FBRTFVLFVBQVVzWCxHQUFlRixHQUFMUSxNQUFjTyxTQUFTaEIsR0FBRyxVQUFLLEVBQWFDLFFBQUcsRUFBTyxJQUFJZ0IsR0FBR2hCLEdBQUcsU0FBU2lCLEdBQUUzVixFQUFFQyxHQUE2USxHQUExUTZULEdBQUUvSyxLQUFLclEsS0FBS3NILEVBQUVBLEVBQUVhLEtBQUssSUFBSW5JLEtBQUtrZCxjQUFjbGQsS0FBS0YsRUFBRUUsS0FBS21QLE9BQU8sS0FBS25QLEtBQUttZCxPQUFPbmQsS0FBS29kLFFBQVFwZCxLQUFLcWQsUUFBUXJkLEtBQUtzZCxRQUFRdGQsS0FBS3VkLFFBQVEsRUFBRXZkLEtBQUttSCxJQUFJLEdBQUduSCxLQUFLd2QsUUFBUXhkLEtBQUt5ZCxTQUFTemQsS0FBSzBkLE9BQU8xZCxLQUFLMmQsU0FBUSxFQUFHM2QsS0FBSzRkLE1BQU0sS0FBSzVkLEtBQUs2ZCxVQUFVLEVBQUU3ZCxLQUFLOGQsWUFBWSxHQUFHOWQsS0FBS1EsRUFBRSxLQUFROEcsRUFBRSxDQUFDLElBQUk1RyxFQUFFVixLQUFLbUksS0FBS2IsRUFBRWEsS0FBSzRSLEVBQUV6UyxFQUFFeVcsZ0JBQWdCelcsRUFBRXlXLGVBQWV0ZCxPQUFPNkcsRUFBRXlXLGVBQWUsR0FBRyxLQUFpRCxHQUE1Qy9kLEtBQUttUCxPQUFPN0gsRUFBRTZILFFBQVE3SCxFQUFFMFcsV0FBV2hlLEtBQUtGLEVBQUV5SCxFQUFLQSxFQUFFRCxFQUFFNFYsZUFBZSxHQUFHYixHQUFHLENBQUMvVSxFQUFFLENBQUMsSUFBSXdVLEdBQUd2VSxFQUFFMFcsVUFBVSxJQUFJL2QsR0FBRSxFQUFHLE1BQU1vSCxDQUFDLENBQUMsTUFBTWtULEdBQUcsQ0FBQ3RhLEdBQy83QixDQUFHLENBQUNBLElBQUlxSCxFQUFFLEtBQU0sTUFBTyxhQUFhN0csRUFBRTZHLEVBQUVELEVBQUU0VyxZQUFZLFlBQVl4ZCxJQUFJNkcsRUFBRUQsRUFBRTZXLFdBQVduZSxLQUFLa2QsY0FBYzNWLEVBQUV3UyxHQUFHL1osS0FBS3VkLGFBQVEsSUFBU3hELEVBQUV3RCxRQUFReEQsRUFBRXdELFFBQVF4RCxFQUFFcUUsTUFBTXBlLEtBQUtzZCxhQUFRLElBQVN2RCxFQUFFdUQsUUFBUXZELEVBQUV1RCxRQUFRdkQsRUFBRXNFLE1BQU1yZSxLQUFLcWQsUUFBUXRELEVBQUVzRCxTQUFTLEVBQUVyZCxLQUFLb2QsUUFBUXJELEVBQUVxRCxTQUFTLElBQUlwZCxLQUFLdWQsYUFBUSxJQUFTalcsRUFBRWlXLFFBQVFqVyxFQUFFaVcsUUFBUWpXLEVBQUU4VyxNQUFNcGUsS0FBS3NkLGFBQVEsSUFBU2hXLEVBQUVnVyxRQUFRaFcsRUFBRWdXLFFBQVFoVyxFQUFFK1csTUFBTXJlLEtBQUtxZCxRQUFRL1YsRUFBRStWLFNBQVMsRUFBRXJkLEtBQUtvZCxRQUFROVYsRUFBRThWLFNBQVMsR0FBR3BkLEtBQUttZCxPQUFPN1YsRUFBRTZWLE9BQU9uZCxLQUFLbUgsSUFBSUcsRUFBRUgsS0FBSyxHQUFHbkgsS0FBSzJkLFFBQVFyVyxFQUFFcVcsUUFBUTNkLEtBQUswZCxPQUFPcFcsRUFBRW9XLE9BQU8xZCxLQUFLeWQsU0FDemZuVyxFQUFFbVcsU0FBU3pkLEtBQUt3ZCxRQUFRbFcsRUFBRWtXLFFBQVF4ZCxLQUFLNmQsVUFBVXZXLEVBQUV1VyxXQUFXLEVBQUU3ZCxLQUFLOGQsWUFBWSxpQkFBa0J4VyxFQUFFd1csWUFBWXhXLEVBQUV3VyxZQUFZUSxHQUFHaFgsRUFBRXdXLGNBQWMsR0FBRzlkLEtBQUs0ZCxNQUFNdFcsRUFBRXNXLE1BQU01ZCxLQUFLUSxFQUFFOEcsRUFBRUEsRUFBRStULGtCQUFrQjRCLEdBQUUzQyxFQUFFRyxFQUFFcEssS0FBS3JRLEtBQU0sQ0FBQyxDQUFDcWEsR0FBRTRDLEdBQUU3QixJQUFHLElBQUlrRCxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFNBQVNyQixHQUFFMVcsVUFBVWtVLEVBQUUsV0FBV3dDLEdBQUUzQyxFQUFFRyxFQUFFcEssS0FBS3JRLE1BQU0sSUFBSXNILEVBQUV0SCxLQUFLUSxFQUFFOEcsRUFBRWlYLGVBQWVqWCxFQUFFaVgsaUJBQWlCalgsRUFBRWtYLGFBQVksQ0FBRyxFQUFFLElBQUlDLEdBQUcsdUJBQXVCLElBQUloRixLQUFLQyxTQUFTLEdBQU9nRixHQUFHLEVBQUUsU0FBU0MsR0FBR3JYLEVBQUVDLEVBQUU3RyxFQUFFcVosRUFBRTdaLEdBQUdGLEtBQUs0ZSxTQUFTdFgsRUFBRXRILEtBQUs2ZSxNQUFNLEtBQUs3ZSxLQUFLOGUsSUFBSXZYLEVBQUV2SCxLQUFLbUksS0FBS3pILEVBQUVWLEtBQUsrZSxVQUFVaEYsRUFBRS9aLEtBQUtnZixHQUFHOWUsRUFBRUYsS0FBS21ILE1BQU11WCxHQUFHMWUsS0FBSzhaLEdBQUc5WixLQUFLaWYsSUFBRyxDQUFHLENBQUMsU0FBU0MsR0FBRzVYLEdBQUdBLEVBQUV3UyxJQUFHLEVBQUd4UyxFQUFFc1gsU0FBUyxLQUFLdFgsRUFBRXVYLE1BQU0sS0FBS3ZYLEVBQUV3WCxJQUFJLEtBQUt4WCxFQUFFMFgsR0FBRyxJQUFLLENBQUMsU0FBU0csR0FBRzdYLEVBQUVDLEVBQUU3RyxHQUFHLElBQUksTUFBTXFaLEtBQUt6UyxFQUFFQyxFQUFFOEksS0FBSzNQLEVBQUU0RyxFQUFFeVMsR0FBR0EsRUFBRXpTLEVBQUcsQ0FBNEQsU0FBUzhYLEdBQUc5WCxHQUFHLE1BQU1DLEVBQUUsQ0FBQyxFQUFFLElBQUksTUFBTTdHLEtBQUs0RyxFQUFFQyxFQUFFN0csR0FBRzRHLEVBQUU1RyxHQUFHLE9BQU82RyxDQUFDLENBQUMsTUFBTThYLEdBQUcsZ0dBQWdHQyxNQUFNLEtBQUssU0FBU0MsR0FBR2pZLEVBQUVDLEdBQUcsSUFBSTdHLEVBQUVxWixFQUFFLElBQUksSUFBSTdaLEVBQUUsRUFBRUEsRUFBRTJELFVBQVVwRCxPQUFPUCxJQUFJLENBQWdCLElBQUlRLEtBQW5CcVosRUFBRWxXLFVBQVUzRCxHQUFZNlosRUFBRXpTLEVBQUU1RyxHQUFHcVosRUFBRXJaLEdBQUcsSUFBSSxJQUFJOFosRUFBRSxFQUFFQSxFQUFFNkUsR0FBRzVlLE9BQU8rWixJQUFJOVosRUFBRTJlLEdBQUc3RSxHQUFHblUsT0FBT0UsVUFBVXlVLGVBQWUzSyxLQUFLMEosRUFBRXJaLEtBQUs0RyxFQUFFNUcsR0FBR3FaLEVBQUVyWixHQUFJLENBQUMsQ0FBQyxTQUFTOGUsR0FBR2xZLEdBQUd0SCxLQUFLOGUsSUFBSXhYLEVBQUV0SCxLQUFLRixFQUFFLENBQUMsRUFBRUUsS0FBS3lhLEVBQUUsQ0FBRSxDQUF5TSxTQUFTZ0YsR0FBR25ZLEVBQUVDLEdBQUcsSUFBSTdHLEVBQUU2RyxFQUFFWSxLQUFLLEdBQUd6SCxLQUFLNEcsRUFBRXhILEVBQUUsQ0FBQyxJQUF1QjBhLEVBQW5CVCxFQUFFelMsRUFBRXhILEVBQUVZLEdBQUdSLEVBQUUrYSxHQUFHbEIsRUFBRXhTLElBQU1pVCxFQUFFLEdBQUd0YSxJQUFJdUIsTUFBTThFLFVBQVVtWixPQUFPclAsS0FBSzBKLEVBQUU3WixFQUFFLEdBQUdzYSxJQUFJMEUsR0FBRzNYLEdBQUcsR0FBR0QsRUFBRXhILEVBQUVZLEdBQUdELGdCQUFnQjZHLEVBQUV4SCxFQUFFWSxHQUFHNEcsRUFBRW1ULEtBQU0sQ0FBQyxDQUNqZ0QsU0FBU2tGLEdBQUdyWSxFQUFFQyxFQUFFN0csRUFBRXFaLEdBQUcsSUFBSSxJQUFJN1osRUFBRSxFQUFFQSxFQUFFb0gsRUFBRTdHLFNBQVNQLEVBQUUsQ0FBQyxJQUFJc2EsRUFBRWxULEVBQUVwSCxHQUFHLElBQUlzYSxFQUFFVixJQUFJVSxFQUFFb0UsVUFBVXJYLEdBQUdpVCxFQUFFdUUsV0FBV3JlLEdBQUc4WixFQUFFd0UsSUFBSWpGLEVBQUUsT0FBTzdaLENBQUMsQ0FBQyxPQUFRLENBQUMsQ0FEcWhDc2YsR0FBR2paLFVBQVVxRixJQUFJLFNBQVN0RSxFQUFFQyxFQUFFN0csRUFBRXFaLEVBQUU3WixHQUFHLElBQUlzYSxFQUFFbFQsRUFBRTRTLFlBQVc1UyxFQUFFdEgsS0FBS0YsRUFBRTBhLE1BQU9sVCxFQUFFdEgsS0FBS0YsRUFBRTBhLEdBQUcsR0FBR3hhLEtBQUt5YSxLQUFLLElBQUlBLEVBQUVrRixHQUFHclksRUFBRUMsRUFBRXdTLEVBQUU3WixHQUE4RSxPQUExRSxFQUFFdWEsR0FBR2xULEVBQUVELEVBQUVtVCxHQUFHL1osSUFBSTZHLEVBQUUwWCxJQUFHLE1BQU0xWCxFQUFFLElBQUlvWCxHQUFHcFgsRUFBRXZILEtBQUs4ZSxJQUFJdEUsSUFBSVQsRUFBRTdaLElBQUsrZSxHQUFHdmUsRUFBRTRHLEVBQUU5RSxLQUFLK0UsSUFBV0EsQ0FBQyxFQUMxdEMsSUFBSXFZLEdBQUcsZUFBZSxJQUFJbkcsS0FBS0MsU0FBUyxHQUFHbUcsR0FBRyxDQUFDLEVBQUUsU0FBU0MsR0FBR3hZLEVBQUVDLEVBQUU3RyxFQUFFcVosRUFBRTdaLEdBQUcsR0FBRzZaLEdBQUdBLEVBQUVnRyxLQUFLLE9BQU9DLEdBQUcxWSxFQUFFQyxFQUFFN0csRUFBRXFaLEVBQUU3WixHQUFHLEdBQUd1QixNQUFNQyxRQUFRNkYsR0FBRyxDQUFDLElBQUksSUFBSWlULEVBQUUsRUFBRUEsRUFBRWpULEVBQUU5RyxPQUFPK1osSUFBSXNGLEdBQUd4WSxFQUFFQyxFQUFFaVQsR0FBRzlaLEVBQUVxWixFQUFFN1osR0FBRyxPQUFPLElBQUksQ0FBUyxPQUFSUSxFQUFFdWYsR0FBR3ZmLEdBQVU0RyxHQUFHQSxFQUFFbVgsSUFBSW5YLEVBQUU0WSxFQUFFM1ksRUFBRTdHLEVBQUVILEdBQUV3WixLQUFLQSxFQUFFZ0YsVUFBVWhGLEVBQUU3WixHQUFHaWdCLEdBQUc3WSxFQUFFQyxFQUFFN0csR0FBRSxFQUFHcVosRUFBRTdaLEVBQUUsQ0FDL1gsU0FBU2lnQixHQUFHN1ksRUFBRUMsRUFBRTdHLEVBQUVxWixFQUFFN1osRUFBRXNhLEdBQUcsSUFBSWpULEVBQUUsTUFBTTVGLE1BQU0sc0JBQXNCLElBQUk4WSxFQUFFbGEsR0FBRUwsS0FBS0EsRUFBRTZlLFVBQVU3ZSxFQUFFd2EsRUFBRTBGLEdBQUc5WSxHQUE2QyxHQUExQ29ULElBQUlwVCxFQUFFc1ksSUFBSWxGLEVBQUUsSUFBSThFLEdBQUdsWSxLQUFJNUcsRUFBRWdhLEVBQUU5TyxJQUFJckUsRUFBRTdHLEVBQUVxWixFQUFFVSxFQUFFRCxJQUFRcUUsTUFBTSxPQUFPbmUsRUFBd0MsR0FBdENxWixFQUNsSyxXQUE4RCxNQUFNeFMsRUFBRThZLEdBQUcsT0FBM0QsU0FBUy9ZLEVBQUU1RyxHQUFHLE9BQU82RyxFQUFFOEksS0FBSy9JLEVBQUV3WCxJQUFJeFgsRUFBRXNYLFNBQVNsZSxFQUFFLENBQW9CLENBRG1GNGYsR0FBSzVmLEVBQUVtZSxNQUFNOUUsRUFBRUEsRUFBRStFLElBQUl4WCxFQUFFeVMsRUFBRTZFLFNBQVNsZSxFQUFLNEcsRUFBRXNKLGlCQUFpQjBLLEtBQUtwYixFQUFFdWEsUUFBRyxJQUFTdmEsSUFBSUEsR0FBRSxHQUFJb0gsRUFBRXNKLGlCQUFpQnJKLEVBQUUyUyxXQUFXSCxFQUFFN1osUUFBUSxHQUFHb0gsRUFBRWlaLFlBQVlqWixFQUFFaVosWUFBWTVLLEdBQUdwTyxFQUFFMlMsWUFBWUgsT0FBUSxLQUFHelMsRUFBRWtaLGNBQWFsWixFQUFFbVosZUFBcUMsTUFBTTllLE1BQU0scURBQWxDMkYsRUFBRWtaLFlBQVl6RyxFQUF3RSxDQUFDLE9BQU9yWixDQUFDLENBQzdZLFNBQVNzZixHQUFHMVksRUFBRUMsRUFBRTdHLEVBQUVxWixFQUFFN1osR0FBRyxHQUFHdUIsTUFBTUMsUUFBUTZGLEdBQUcsQ0FBQyxJQUFJLElBQUlpVCxFQUFFLEVBQUVBLEVBQUVqVCxFQUFFOUcsT0FBTytaLElBQUl3RixHQUFHMVksRUFBRUMsRUFBRWlULEdBQUc5WixFQUFFcVosRUFBRTdaLEdBQUcsT0FBTyxJQUFJLENBQVMsT0FBUlEsRUFBRXVmLEdBQUd2ZixHQUFVNEcsR0FBR0EsRUFBRW1YLElBQUluWCxFQUFFb1osRUFBRW5aLEVBQUU3RyxFQUFFSCxHQUFFd1osS0FBS0EsRUFBRWdGLFVBQVVoRixFQUFFN1osR0FBR2lnQixHQUFHN1ksRUFBRUMsRUFBRTdHLEdBQUUsRUFBR3FaLEVBQUU3WixFQUFFLENBQzlQLFNBQVN5Z0IsR0FBR3JaLEVBQUVDLEVBQUU3RyxFQUFFcVosRUFBRTdaLEdBQUcsR0FBR3VCLE1BQU1DLFFBQVE2RixHQUFHLElBQUksSUFBSWlULEVBQUUsRUFBRUEsRUFBRWpULEVBQUU5RyxPQUFPK1osSUFBSW1HLEdBQUdyWixFQUFFQyxFQUFFaVQsR0FBRzlaLEVBQUVxWixFQUFFN1osUUFBUzZaLEVBQUV4WixHQUFFd1osS0FBS0EsRUFBRWdGLFVBQVVoRixFQUFFclosRUFBRXVmLEdBQUd2ZixHQUFHNEcsR0FBR0EsRUFBRW1YLEtBQU1uWCxFQUFFQSxFQUFFOUcsR0FBRStHLEVBQUV2RSxPQUFPdUUsR0FBRzJTLGNBQWdCNVMsRUFBRXhILElBQTRCLEdBQWZZLEVBQUVpZixHQUFYbkYsRUFBRWxULEVBQUV4SCxFQUFFeUgsR0FBVTdHLEVBQUVxWixFQUFFN1osTUFBVWdmLEdBQUcxRSxFQUFFOVosSUFBSWUsTUFBTThFLFVBQVVtWixPQUFPclAsS0FBS21LLEVBQUU5WixFQUFFLEdBQUcsR0FBRzhaLEVBQUUvWixnQkFBZ0I2RyxFQUFFeEgsRUFBRXlILEdBQUdELEVBQUVtVCxPQUFRblQsSUFBSUEsRUFBRThZLEdBQUc5WSxNQUFNQyxFQUFFRCxFQUFFeEgsRUFBRXlILEVBQUUyUyxZQUFZNVMsR0FBRyxFQUFFQyxJQUFJRCxFQUFFcVksR0FBR3BZLEVBQUU3RyxFQUFFcVosRUFBRTdaLEtBQUtRLEdBQUcsRUFBRTRHLEVBQUVDLEVBQUVELEdBQUcsT0FBT3NaLEdBQUdsZ0IsR0FBSSxDQUNyWCxTQUFTa2dCLEdBQUd0WixHQUFHLEdBQUcsaUJBQWtCQSxHQUFHQSxJQUFJQSxFQUFFd1MsR0FBRyxDQUFDLElBQUl2UyxFQUFFRCxFQUFFd1gsSUFBSSxHQUFHdlgsR0FBR0EsRUFBRWtYLElBQUlnQixHQUFHbFksRUFBRS9HLEVBQUU4RyxPQUFRLENBQUMsSUFBSTVHLEVBQUU0RyxFQUFFYSxLQUFLNFIsRUFBRXpTLEVBQUV1WCxNQUFNdFgsRUFBRWtKLG9CQUFvQmxKLEVBQUVrSixvQkFBb0IvUCxFQUFFcVosRUFBRXpTLEVBQUV5WCxTQUFTeFgsRUFBRXNaLFlBQVl0WixFQUFFc1osWUFBWWxMLEdBQUdqVixHQUFHcVosR0FBR3hTLEVBQUVpWixhQUFhalosRUFBRWtaLGdCQUFnQmxaLEVBQUVrWixlQUFlMUcsSUFBSXJaLEVBQUUwZixHQUFHN1ksS0FBS2tZLEdBQUcvZSxFQUFFNEcsR0FBRyxHQUFHNUcsRUFBRStaLElBQUkvWixFQUFFb2UsSUFBSSxLQUFLdlgsRUFBRXFZLElBQUksT0FBT1YsR0FBRzVYLEVBQUcsQ0FBQyxDQUFDLENBQUMsU0FBU3FPLEdBQUdyTyxHQUFHLE9BQU9BLEtBQUt1WSxHQUFHQSxHQUFHdlksR0FBR3VZLEdBQUd2WSxHQUFHLEtBQUtBLENBQUMsQ0FBQyxTQUFTK1ksR0FBRy9ZLEVBQUVDLEdBQUcsR0FBR0QsRUFBRXdTLEdBQUd4UyxHQUFFLE1BQVEsQ0FBQ0MsRUFBRSxJQUFJMFYsR0FBRTFWLEVBQUV2SCxNQUFNLElBQUlVLEVBQUU0RyxFQUFFc1gsU0FBUzdFLEVBQUV6UyxFQUFFMFgsSUFBSTFYLEVBQUV3WCxJQUFJeFgsRUFBRTJYLElBQUkyQixHQUFHdFosR0FBR0EsRUFBRTVHLEVBQUUyUCxLQUFLMEosRUFBRXhTLEVBQUcsQ0FBQyxPQUFPRCxDQUFDLENBQ3plLFNBQVM4WSxHQUFHOVksR0FBVyxPQUFSQSxFQUFFQSxFQUFFc1ksZUFBd0JKLEdBQUdsWSxFQUFFLElBQUksQ0FBQyxJQUFJdVEsR0FBRyx3QkFBd0IsSUFBSTRCLEtBQUtDLFdBQVcsR0FBRyxTQUFTdUcsR0FBRzNZLEdBQUcsTUFBRyxtQkFBb0JBLEVBQVNBLEdBQUVBLEVBQUV1USxNQUFNdlEsRUFBRXVRLElBQUksU0FBU3RRLEdBQUcsT0FBT0QsRUFBRXdaLFlBQVl2WixFQUFFLEdBQVVELEVBQUV1USxJQUFHLENBQUMsU0FBU2tKLEtBQUlwRyxHQUFFdEssS0FBS3JRLE1BQU1BLEtBQUtRLEVBQUUsSUFBSWdmLEdBQUd4ZixNQUFNQSxLQUFLZ2hCLEVBQUVoaEIsS0FBS0EsS0FBS2loQixFQUFFLElBQUssQ0FDblMsU0FBU0MsR0FBRTVaLEVBQUVDLEdBQUcsSUFBSTdHLEVBQUVxWixFQUFFelMsRUFBRTJaLEVBQUUsR0FBR2xILEVBQUUsSUFBSXJaLEVBQUUsR0FBR3FaLEVBQUVBLEVBQUVBLEVBQUVrSCxFQUFFdmdCLEVBQUU4QixLQUFLdVgsR0FBcUIsR0FBbEJ6UyxFQUFFQSxFQUFFMFosRUFBRWpILEVBQUV4UyxFQUFFWSxNQUFNWixFQUFLLGlCQUFrQkEsRUFBRUEsRUFBRSxJQUFJNlQsR0FBRTdULEVBQUVELFFBQVEsR0FBR0MsYUFBYTZULEdBQUU3VCxFQUFFNEgsT0FBTzVILEVBQUU0SCxRQUFRN0gsTUFBTyxDQUFDLElBQUlwSCxFQUFFcUgsRUFBZWdZLEdBQWJoWSxFQUFFLElBQUk2VCxHQUFFckIsRUFBRXpTLEdBQVFwSCxFQUFHLENBQU0sR0FBTEEsR0FBRSxFQUFNUSxFQUFFLElBQUksSUFBSThaLEVBQUU5WixFQUFFRCxPQUFPLEVBQUUsR0FBRytaLEVBQUVBLElBQUksQ0FBQyxJQUFJQyxFQUFFbFQsRUFBRXpILEVBQUVZLEVBQUU4WixHQUFHdGEsRUFBRWloQixHQUFHMUcsRUFBRVYsR0FBRSxFQUFHeFMsSUFBSXJILENBQUUsQ0FBNkMsR0FBcENBLEVBQUVpaEIsR0FBVjFHLEVBQUVsVCxFQUFFekgsRUFBRXdILEVBQVN5UyxHQUFFLEVBQUd4UyxJQUFJckgsRUFBRUEsRUFBRWloQixHQUFHMUcsRUFBRVYsR0FBRSxFQUFHeFMsSUFBSXJILEVBQUtRLEVBQUUsSUFBSThaLEVBQUUsRUFBRUEsRUFBRTlaLEVBQUVELE9BQU8rWixJQUFldGEsRUFBRWloQixHQUFiMUcsRUFBRWxULEVBQUV6SCxFQUFFWSxFQUFFOFosR0FBVVQsR0FBRSxFQUFHeFMsSUFBSXJILENBQUUsQ0FFbFgsU0FBU2loQixHQUFHN1osRUFBRUMsRUFBRTdHLEVBQUVxWixHQUFzQixLQUFuQnhTLEVBQUVELEVBQUU5RyxFQUFFVixFQUFFa0QsT0FBT3VFLEtBQVUsT0FBTyxFQUFHQSxFQUFFQSxFQUFFNlosU0FBUyxJQUFJLElBQUlsaEIsR0FBRSxFQUFHc2EsRUFBRSxFQUFFQSxFQUFFalQsRUFBRTlHLFNBQVMrWixFQUFFLENBQUMsSUFBSUMsRUFBRWxULEVBQUVpVCxHQUFHLEdBQUdDLElBQUlBLEVBQUVYLElBQUlXLEVBQUVzRSxTQUFTcmUsRUFBRSxDQUFDLElBQUlnYSxFQUFFRCxFQUFFbUUsU0FBU3lDLEVBQUU1RyxFQUFFdUUsSUFBSXZFLEVBQUVxRSxJQUFJckUsRUFBRXdFLElBQUlRLEdBQUduWSxFQUFFOUcsRUFBRWlhLEdBQUd2YSxHQUFFLElBQUt3YSxFQUFFckssS0FBS2dSLEVBQUV0SCxJQUFJN1osQ0FBRSxDQUFDLENBQUMsT0FBT0EsSUFBSTZaLEVBQUVzQixnQkFBZ0IsQ0FIb0RoQixHQUFFMEcsR0FBRXBHLElBQUdvRyxHQUFFeGEsVUFBVWtZLEtBQUksRUFBR3NDLEdBQUV4YSxVQUFVa0ssb0JBQW9CLFNBQVNuSixFQUFFQyxFQUFFN0csRUFBRXFaLEdBQUc0RyxHQUFHM2dCLEtBQUtzSCxFQUFFQyxFQUFFN0csRUFBRXFaLEVBQUcsRUFFallnSCxHQUFFeGEsVUFBVXdVLEVBQUUsV0FBNEIsR0FBakJnRyxHQUFFekcsRUFBRVMsRUFBRTFLLEtBQUtyUSxNQUFTQSxLQUFLUSxFQUFFLENBQUMsSUFBYUUsRUFBVDRHLEVBQUV0SCxLQUFLUSxFQUFJLElBQUlFLEtBQUs0RyxFQUFFeEgsRUFBRSxDQUFDLElBQUksSUFBSWlhLEVBQUV6UyxFQUFFeEgsRUFBRVksR0FBR1IsRUFBRSxFQUFFQSxFQUFFNlosRUFBRXRaLE9BQU9QLElBQUlnZixHQUFHbkYsRUFBRTdaLFdBQVdvSCxFQUFFeEgsRUFBRVksR0FBRzRHLEVBQUVtVCxHQUFJLENBQUMsQ0FBQ3phLEtBQUtpaEIsRUFBRSxJQUFLLEVBQUVGLEdBQUV4YSxVQUFVMlosRUFBRSxTQUFTNVksRUFBRUMsRUFBRTdHLEVBQUVxWixHQUFHLE9BQU8vWixLQUFLUSxFQUFFb0wsSUFBSTVJLE9BQU9zRSxHQUFHQyxHQUFFLEVBQUc3RyxFQUFFcVosRUFBRSxFQUFFZ0gsR0FBRXhhLFVBQVVtYSxFQUFFLFNBQVNwWixFQUFFQyxFQUFFN0csRUFBRXFaLEdBQUcsT0FBTy9aLEtBQUtRLEVBQUVvTCxJQUFJNUksT0FBT3NFLEdBQUdDLEdBQUUsRUFBRzdHLEVBQUVxWixFQUFFLEVBQzlELElBQUl1SCxHQUFHaEksR0FBRTdVLEtBQUswVCxVQUFvSyxTQUFTb0osS0FBSyxJQUFJamEsRUFBRWthLEdBQUcsSUFBSWphLEVBQUUsS0FBMkQsT0FBdERELEVBQUV4SCxJQUFJeUgsRUFBRUQsRUFBRXhILEVBQUV3SCxFQUFFeEgsRUFBRXdILEVBQUV4SCxFQUFFMmhCLEtBQUtuYSxFQUFFeEgsSUFBSXdILEVBQUVtVCxFQUFFLE1BQU1sVCxFQUFFa2EsS0FBSyxNQUFhbGEsQ0FBQyxDQUEwSCxJQUFJbWEsR0FBRyxJQUEzWCxNQUFTLFdBQUEvZCxDQUFZMkQsRUFBRUMsR0FBR3ZILEtBQUtRLEVBQUU4RyxFQUFFdEgsS0FBSzJoQixFQUFFcGEsRUFBRXZILEtBQUt5YSxFQUFFLEVBQUV6YSxLQUFLRixFQUFFLElBQUssQ0FBQyxHQUFBeUosR0FBTSxJQUFJakMsRUFBb0UsT0FBbEUsRUFBRXRILEtBQUt5YSxHQUFHemEsS0FBS3lhLElBQUluVCxFQUFFdEgsS0FBS0YsRUFBRUUsS0FBS0YsRUFBRXdILEVBQUVtYSxLQUFLbmEsRUFBRW1hLEtBQUssTUFBTW5hLEVBQUV0SCxLQUFLUSxJQUFXOEcsQ0FBQyxJQUEwTyxJQUFJLElBQUlzYSxLQUFHdGEsR0FBR0EsRUFBRXVhLFVBQVMsTUFBTUQsR0FBRyxXQUFBamUsR0FBYzNELEtBQUt5aEIsS0FBS3poQixLQUFLRixFQUFFRSxLQUFLeWEsRUFBRSxJQUFLLENBQUMsR0FBQTVRLENBQUl2QyxFQUFFQyxHQUFHdkgsS0FBS3lhLEVBQUVuVCxFQUFFdEgsS0FBS0YsRUFBRXlILEVBQUV2SCxLQUFLeWhCLEtBQUssSUFBSyxDQUFDLEtBQUFJLEdBQVE3aEIsS0FBS3loQixLQUFLemhCLEtBQUtGLEVBQUVFLEtBQUt5YSxFQUFFLElBQUssRUFBRSxTQUFTcUgsR0FBR3hhLEdBQUcsSUFBSUMsRUFBRSxFQUFFRCxFQUFFQSxFQUFFZ1ksTUFBTSxLQUFLLE1BQU01ZSxFQUFFLEdBQUcsS0FBSyxFQUFFNkcsR0FBR0QsRUFBRTdHLFFBQVFDLEVBQUU4QixLQUFLOEUsRUFBRTZLLFNBQVM1SyxJQUFrQyxPQUE5QkQsRUFBRTdHLFFBQVFDLEVBQUU4QixLQUFLOEUsRUFBRTdFLEtBQUssTUFBYS9CLENBQUMsQ0FBQyxTQUFTcWhCLEdBQUd6YSxHQUFHZ1MsR0FBRTBJLFlBQVcsS0FBSyxNQUFNMWEsQ0FBQyxHQUFHLEVBQUcsQ0FBQyxJQUFJMmEsR0FBR0MsSUFBRyxFQUFHVixHQUFHLElBQXhlLE1BQVMsV0FBQTdkLEdBQWMzRCxLQUFLeWEsRUFBRXphLEtBQUtGLEVBQUUsSUFBSyxDQUFDLEdBQUE4TCxDQUFJdEUsRUFBRUMsR0FBRyxNQUFNN0csRUFBRWdoQixHQUFHblksTUFBTTdJLEVBQUVtSixJQUFJdkMsRUFBRUMsR0FBR3ZILEtBQUt5YSxFQUFFemEsS0FBS3lhLEVBQUVnSCxLQUFLL2dCLEVBQUVWLEtBQUtGLEVBQUVZLEVBQUVWLEtBQUt5YSxFQUFFL1osQ0FBRSxHQUF3WHloQixHQUFHLEtBQUssTUFBTTdhLEVBQUVnUyxHQUFFMVQsUUFBUUYsYUFBUSxHQUFRdWMsR0FBRyxLQUFLM2EsRUFBRStKLEtBQUsrUSxHQUFHLENBQUUsRUFBRyxJQUFJQSxHQUFHLEtBQUssSUFBSSxJQUFJOWEsRUFBRUEsRUFBRWlhLE1BQU0sQ0FBQyxJQUFJamEsRUFBRW1ULEVBQUVwSyxLQUFLL0ksRUFBRXhILEVBQUcsQ0FBQyxNQUFNWSxHQUFHcWhCLEdBQUdyaEIsRUFBRyxDQUFDLElBQUk2RyxFQUFFbWEsR0FBR25hLEVBQUVvYSxFQUFFcmEsR0FBRyxJQUFJQyxFQUFFa1QsSUFBSWxULEVBQUVrVCxJQUFJblQsRUFBRW1hLEtBQUtsYSxFQUFFekgsRUFBRXlILEVBQUV6SCxFQUFFd0gsRUFBRyxDQUFDNGEsSUFBRyxDQUFFLEVBQUcsU0FBU0csR0FBRy9hLEVBQUVDLEdBQUd3WixHQUFFMVEsS0FBS3JRLE1BQU1BLEtBQUt5YSxFQUFFblQsR0FBRyxFQUFFdEgsS0FBS0YsRUFBRXlILEdBQUcrUixHQUFFdFosS0FBSzJoQixFQUFFMUgsR0FBRWphLEtBQUs4aEIsR0FBRzloQixNQUFNQSxLQUFLc1osRUFBRS9MLEtBQUtELEtBQU0sQ0FDaHhDLFNBQVNnVixHQUFHaGIsR0FBR0EsRUFBRWliLElBQUcsRUFBR2piLEVBQUVrYixJQUFJbGIsRUFBRXhILEVBQUUyaUIsYUFBYW5iLEVBQUVrYixHQUFHbGIsRUFBRWtiLEVBQUUsS0FBTSxDQUEyRCxTQUFTRSxHQUFHcGIsRUFBRUMsRUFBRTdHLEdBQUcsR0FBRyxtQkFBb0I0RyxFQUFFNUcsSUFBSTRHLEVBQUUyUyxHQUFFM1MsRUFBRTVHLFFBQVMsS0FBRzRHLEdBQUcsbUJBQW1CQSxFQUFFd1osWUFBc0MsTUFBTW5mLE1BQU0sNkJBQXRDMkYsRUFBRTJTLEdBQUUzUyxFQUFFd1osWUFBWXhaLEVBQWdELENBQUMsT0FBTyxXQUFXcWIsT0FBT3BiLElBQUksRUFBRStSLEdBQUUwSSxXQUFXMWEsRUFBRUMsR0FBRyxFQUFFLENBQUMsU0FBU3FiLEdBQUd0YixHQUFHQSxFQUFFeEgsRUFBRTRpQixJQUFHLEtBQUtwYixFQUFFeEgsRUFBRSxLQUFLd0gsRUFBRTlHLElBQUk4RyxFQUFFOUcsR0FBRSxFQUFHb2lCLEdBQUd0YixHQUFHLEdBQUdBLEVBQUVxYSxHQUFHLE1BQU1wYSxFQUFFRCxFQUFFbVQsRUFBRW5ULEVBQUVtVCxFQUFFLEtBQUtuVCxFQUFFdWIsRUFBRTVTLE1BQU0sS0FBSzFJLEVBQUcsQ0FEczFCOFMsR0FBRWdJLEdBQUd0QixLQUFHcFosR0FBRTBhLEdBQUc5YixXQUFZZ2MsSUFBRyxFQUFHNWEsR0FBRTZhLEVBQUUsS0FBSzdhLEdBQUVtYSxHQUFHLFdBQVcsR0FBRzloQixLQUFLdWlCLEdBQUcsQ0FBQyxJQUFJamIsRUFBRWlHLEtBQUtELE1BQU10TixLQUFLc1osRUFBRSxFQUFFaFMsR0FBR0EsRUFBRSxHQUFHdEgsS0FBS3lhLEVBQUV6YSxLQUFLd2lCLEVBQUV4aUIsS0FBS0YsRUFBRWtpQixXQUFXaGlCLEtBQUsyaEIsRUFBRTNoQixLQUFLeWEsRUFBRW5ULElBQUl0SCxLQUFLd2lCLElBQUl4aUIsS0FBS0YsRUFBRTJpQixhQUFhemlCLEtBQUt3aUIsR0FBR3hpQixLQUFLd2lCLEVBQUUsTUFBTXRCLEdBQUVsaEIsS0FBSyxRQUFRQSxLQUFLdWlCLEtBQUtELEdBQUd0aUIsTUFBTUEsS0FBSzhpQixTQUFVLENBQUMsRUFBRW5iLEdBQUVtYixNQUFNLFdBQVc5aUIsS0FBS3VpQixJQUFHLEVBQUd2aUIsS0FBS3dpQixJQUFJeGlCLEtBQUt3aUIsRUFBRXhpQixLQUFLRixFQUFFa2lCLFdBQVdoaUIsS0FBSzJoQixFQUFFM2hCLEtBQUt5YSxHQUFHemEsS0FBS3NaLEVBQUUvTCxLQUFLRCxNQUFPLEVBQ25qRDNGLEdBQUVvVCxFQUFFLFdBQVdzSCxHQUFHL0gsRUFBRVMsRUFBRTFLLEtBQUtyUSxNQUFNc2lCLEdBQUd0aUIsYUFBYUEsS0FBS0YsQ0FBRSxFQUFzVSxNQUFNaWpCLFdBQVdwSSxHQUFFLFdBQUFoWCxDQUFZMkQsRUFBRUMsR0FBRzNELFFBQVE1RCxLQUFLNmlCLEVBQUV2YixFQUFFdEgsS0FBSzJoQixFQUFFcGEsRUFBRXZILEtBQUt5YSxFQUFFLEtBQUt6YSxLQUFLUSxHQUFFLEVBQUdSLEtBQUtGLEVBQUUsSUFBSyxDQUFDLENBQUF3WixDQUFFaFMsR0FBR3RILEtBQUt5YSxFQUFFNVcsVUFBVTdELEtBQUtGLEVBQUVFLEtBQUtRLEdBQUUsRUFBR29pQixHQUFHNWlCLEtBQU0sQ0FBQyxDQUFBK2EsR0FBSW5YLE1BQU1tWCxJQUFJL2EsS0FBS0YsSUFBSXdaLEdBQUVtSixhQUFhemlCLEtBQUtGLEdBQUdFLEtBQUtGLEVBQUUsS0FBS0UsS0FBS1EsR0FBRSxFQUFHUixLQUFLeWEsRUFBRSxLQUFNLEVBQUUsU0FBU3VJLEdBQUcxYixHQUFHcVQsR0FBRXRLLEtBQUtyUSxNQUFNQSxLQUFLeWEsRUFBRW5ULEVBQUV0SCxLQUFLRixFQUFFLENBQUMsQ0FBRSxDQUFDdWEsR0FBRTJJLEdBQUdySSxJQUFHLElBQUlzSSxHQUFHLEdBQUcsU0FBU0MsR0FBRzViLEVBQUVDLEVBQUU3RyxFQUFFcVosR0FBR3RZLE1BQU1DLFFBQVFoQixLQUFLQSxJQUFJdWlCLEdBQUcsR0FBR3ZpQixFQUFFd1osWUFBWXhaLEVBQUV1aUIsSUFBSSxJQUFJLElBQUkvaUIsRUFBRSxFQUFFQSxFQUFFUSxFQUFFRCxPQUFPUCxJQUFJLENBQUMsSUFBSXNhLEVBQUVzRixHQUFHdlksRUFBRTdHLEVBQUVSLEdBQUc2WixHQUFHelMsRUFBRXdaLGFBQVksRUFBR3haLEVBQUVtVCxHQUFHblQsR0FBRyxJQUFJa1QsRUFBRSxNQUFNbFQsRUFBRXhILEVBQUUwYSxFQUFFclQsS0FBS3FULENBQUUsQ0FBQyxDQUFDLFNBQVMySSxHQUFHN2IsR0FBRzZYLEdBQUc3WCxFQUFFeEgsR0FBRSxTQUFTeUgsRUFBRTdHLEdBQUdWLEtBQUtGLEVBQUVrYixlQUFldGEsSUFBSWtnQixHQUFHclosRUFBRyxHQUFFRCxHQUFHQSxFQUFFeEgsRUFBRSxDQUFDLENBQUUsQ0FBc0osU0FBU3NqQixLQUFLcGpCLEtBQUtGLEdBQUUsQ0FBRyxDQUNuaEMsU0FBU3VqQixHQUFFL2IsRUFBRUMsRUFBRTdHLEVBQUVxWixHQUFHelMsRUFBRWxDLE1BQUssV0FBVyxNQUFPLGlCQUFpQm1DLEVBQUUsTUFDdkwsU0FBWUQsRUFBRUMsR0FBRyxJQUFJRCxFQUFFeEgsRUFBRSxPQUFPeUgsRUFBRSxJQUFJQSxFQUFFLE9BQU8sS0FBSyxJQUFJLElBQUk3RyxFQUFFK0QsS0FBS0MsTUFBTTZDLEdBQUcsR0FBRzdHLEVBQUUsSUFBSTRHLEVBQUUsRUFBRUEsRUFBRTVHLEVBQUVELE9BQU82RyxJQUFJLEdBQUc3RixNQUFNQyxRQUFRaEIsRUFBRTRHLElBQUksQ0FBQyxJQUFJeVMsRUFBRXJaLEVBQUU0RyxHQUFHLEtBQUssRUFBRXlTLEVBQUV0WixRQUFRLENBQUMsSUFBSVAsRUFBRTZaLEVBQUUsR0FBRyxHQUFHdFksTUFBTUMsUUFBUXhCLE1BQU0sRUFBRUEsRUFBRU8sUUFBUSxDQUFDLElBQUkrWixFQUFFdGEsRUFBRSxHQUFHLEdBQUcsUUFBUXNhLEdBQUcsUUFBUUEsR0FBRyxTQUFTQSxFQUFFLElBQUksSUFBSUMsRUFBRSxFQUFFQSxFQUFFdmEsRUFBRU8sT0FBT2dhLElBQUl2YSxFQUFFdWEsR0FBRyxFQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU82RyxHQUFHNWdCLEVBQUUsQ0FBQyxNQUFNZ2EsR0FBRyxPQUFPblQsQ0FBQyxDQUFDLENBRG5JK2IsQ0FBR2hjLEVBQUU1RyxJQUFJcVosRUFBRSxJQUFJQSxFQUFFLEdBQUcsR0FBRyxDQUR5d0JpSixHQUFHemMsVUFBVXdVLEVBQUUsV0FBV2lJLEdBQUcxSSxFQUFFUyxFQUFFMUssS0FBS3JRLE1BQU1takIsR0FBR25qQixLQUFNLEVBQUVnakIsR0FBR3pjLFVBQVV1YSxZQUFZLFdBQVcsTUFBTW5mLE1BQU0sMkNBQTRDLEVBQTJCeWhCLEdBQUc3YyxVQUFVZ2QsR0FBRyxXQUFXdmpCLEtBQUtGLEdBQUUsQ0FBRyxFQUNoNkJzakIsR0FBRzdjLFVBQVVuQixLQUFLLFdBQVcsRUFDb0IsSUFBSW9lLEdBQUUsQ0FBQyxFQUFFQyxHQUFHLEtBQUssU0FBU0MsS0FBSyxPQUFPRCxHQUFHQSxJQUFJLElBQUkxQyxFQUFDLENBQTJCLFNBQVM0QyxHQUFHcmMsR0FBRzhULEdBQUUvSyxLQUFLclEsS0FBS3dqQixHQUFFN0QsR0FBR3JZLEVBQUcsQ0FBUyxTQUFTc2MsR0FBR3RjLEdBQUcsTUFBTUMsRUFBRW1jLEtBQUt4QyxHQUFFM1osRUFBRSxJQUFJb2MsR0FBR3BjLEdBQUksQ0FBMEIsU0FBU3NjLEdBQUd2YyxFQUFFQyxHQUFHNlQsR0FBRS9LLEtBQUtyUSxLQUFLd2pCLEdBQUVNLFdBQVd4YyxHQUFHdEgsS0FBSytqQixLQUFLeGMsQ0FBRSxDQUFTLFNBQVN5YyxHQUFFMWMsR0FBRyxNQUFNQyxFQUFFbWMsS0FBS3hDLEdBQUUzWixFQUFFLElBQUlzYyxHQUFHdGMsRUFBRUQsR0FBSSxDQUFvQixTQUFTMmMsR0FBRzNjLEVBQUVDLEdBQUc2VCxHQUFFL0ssS0FBS3JRLEtBQUt3akIsR0FBRS9ELEdBQUduWSxHQUFHdEgsS0FBS2trQixLQUFLM2MsQ0FBRSxDQUNsckIsU0FBUzRjLEdBQUc3YyxFQUFFQyxHQUFHLEdBQUcsbUJBQW9CRCxFQUFFLE1BQU0zRixNQUFNLDhDQUE4QyxPQUFPMlgsR0FBRTBJLFlBQVcsV0FBVzFhLEdBQUksR0FBRUMsRUFBRSxDQUR5T2ljLEdBQUU3RCxHQUFHLHFCQUF5RHRGLEdBQUVzSixHQUFHdkksSUFBK0NvSSxHQUFFTSxXQUFXLFlBQXNFekosR0FBRXdKLEdBQUd6SSxJQUFnRG9JLEdBQUUvRCxHQUFHLGNBQWdFcEYsR0FBRTRKLEdBQUc3SSxJQUM1aUIsSUFBSWdKLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFdEMsR0FBRyxFQUFFdUMsR0FBRyxFQUFFcEIsR0FBRyxFQUFFUixHQUFHLEVBQUVPLEdBQUcsRUFBRUUsR0FBRyxFQUFFOUQsR0FBRyxFQUFFa0YsUUFBUSxFQUFFQyxHQUFHLEdBQU9DLEdBQUcsQ0FBQ3BDLEdBQUcsV0FBVytCLEdBQUcsVUFBVTdFLEdBQUcsUUFBUUYsR0FBRyxRQUFRcUYsR0FBRyxRQUFRakIsR0FBRyxtQkFBbUJjLFFBQVEsVUFBVW5CLEdBQUcsa0JBQWtCRSxHQUFHLFdBQVdWLEdBQUcsbUJBQW1CK0IsR0FBRyxrQkFBa0IsU0FBU0MsS0FBSyxDQUFxQixTQUFTQyxHQUFHdmQsR0FBRyxPQUFPQSxFQUFFbVQsSUFBSW5ULEVBQUVtVCxFQUFFblQsRUFBRTlHLElBQUksQ0FBQyxTQUFTc2tCLEtBQUssQ0FBekVGLEdBQUdyZSxVQUFVa1UsRUFBRSxLQUEyRCxJQUEySGtLLEdBQXZISSxHQUFHLENBQUNDLEtBQUssSUFBSTdDLEdBQUcsSUFBSTVDLEdBQUcsSUFBSTBGLEdBQUcsS0FBSyxTQUFTQyxLQUFLOUosR0FBRS9LLEtBQUtyUSxLQUFLLElBQUssQ0FBUyxTQUFTbWxCLEtBQUsvSixHQUFFL0ssS0FBS3JRLEtBQUssSUFBSyxDQUFnQixTQUFTdWEsS0FBSyxDQUE4RyxTQUFTNkssR0FBRzlkLEVBQUVDLEVBQUU3RyxFQUFFcVosR0FBRy9aLEtBQUtzWixFQUFFaFMsRUFBRXRILEtBQUsyaEIsRUFBRXBhLEVBQUV2SCxLQUFLNmlCLEVBQUVuaUIsRUFBRVYsS0FBS3FsQixFQUFFdEwsR0FBRyxFQUFFL1osS0FBS3NsQixFQUFFLElBQUl0QyxHQUFHaGpCLE1BQU1BLEtBQUswZ0IsRUFBRTZFLEdBQUdqZSxFQUFFOFUsR0FBRyxTQUFJLEVBQU9wYyxLQUFLd2xCLEVBQUUsSUFBSW5ELEdBQUcvYSxHQUFHdEgsS0FBS3lsQixFQUFFLEtBQUt6bEIsS0FBS1EsR0FBRSxFQUFHUixLQUFLNGEsRUFBRTVhLEtBQUtpZCxFQUFFamQsS0FBSzJhLEVBQUUzYSxLQUFLMGxCLEVBQUUxbEIsS0FBSzJsQixFQUFFM2xCLEtBQUs0bEIsRUFBRTVsQixLQUFLK2dCLEVBQUUsS0FBSy9nQixLQUFLZ2tCLEVBQUUsR0FBR2hrQixLQUFLRixFQUFFLEtBQUtFLEtBQUtraEIsRUFBRSxFQUFFbGhCLEtBQUs2YSxFQUFFN2EsS0FBS21ELEVBQUUsS0FBS25ELEtBQUt3WixJQUFJLEVBQUV4WixLQUFLaWhCLEdBQUUsRUFBR2poQixLQUFLa2dCLEVBQUUsRUFBRWxnQixLQUFLNmxCLEVBQUUsS0FBSzdsQixLQUFLOGxCLEdBQUc5bEIsS0FBSytsQixFQUFFL2xCLEtBQUt1WixHQUFHdlosS0FBS2doQixHQUFFLEVBQUdoaEIsS0FBS3lhLEVBQUUsSUFBSXVMLEVBQUcsQ0FBQyxTQUFTQSxLQUFLaG1CLEtBQUtRLEVBQUUsS0FBS1IsS0FBS0YsRUFBRSxHQUFHRSxLQUFLeWEsR0FBRSxDQUFHLENBQXBqQkosR0FBRTZLLEdBQUc5SixJQUFtQ2YsR0FBRThLLEdBQUcvSixJQUF5QmYsR0FBRUUsR0FBR3FLLElBQUlySyxHQUFHaFUsVUFBVXpHLEVBQUUsV0FBVyxPQUFPLElBQUltbUIsY0FBYyxFQUFFMUwsR0FBR2hVLFVBQVUvRixFQUFFLFdBQVcsTUFBTyxDQUFDLENBQUMsRUFBRW1rQixHQUFHLElBQUlwSyxHQUFxWSxJQUFJZ0wsR0FBRyxLQUFLVyxHQUFHLENBQUMsRUFBRUMsR0FBRyxDQUFDLEVBQ3ZuQyxTQUFTQyxHQUFHOWUsRUFBRUMsRUFBRTdHLEdBQUc0RyxFQUFFb2UsRUFBRSxFQUFFcGUsRUFBRXFULEVBQUUwTCxHQUFHVixHQUFFcGUsSUFBSUQsRUFBRXNULEVBQUVsYSxFQUFFNEcsRUFBRTBaLEdBQUUsRUFBR3NGLEdBQUdoZixFQUFFLEtBQU0sQ0FBQyxTQUFTZ2YsR0FBR2hmLEVBQUVDLEdBQUdELEVBQUVxZSxFQUFFcFksS0FBS0QsTUFBTWlaLEdBQUdqZixHQUFHQSxFQUFFMlYsRUFBRTBJLEdBQUVyZSxFQUFFcVQsR0FBRyxJQUFJamEsRUFBRTRHLEVBQUUyVixFQUFFbEQsRUFBRXpTLEVBQUUrZCxFQUFFNWpCLE1BQU1DLFFBQVFxWSxLQUFLQSxFQUFFLENBQUMvVyxPQUFPK1csS0FBS3lNLEdBQUc5bEIsRUFBRUYsRUFBRSxJQUFJdVosR0FBR3pTLEVBQUU0WixFQUFFLEVBQUV4Z0IsRUFBRTRHLEVBQUVnUyxFQUFFMkgsRUFBRTNaLEVBQUVtVCxFQUFFLElBQUl1TCxHQUFHMWUsRUFBRXhILEVBQUUybUIsR0FBR25mLEVBQUVnUyxFQUFFNVksRUFBRTZHLEVBQUUsTUFBTUQsRUFBRXNULEdBQUcsRUFBRXRULEVBQUU0WSxJQUFJNVksRUFBRXVlLEVBQUUsSUFBSTlDLEdBQUc5SSxHQUFFM1MsRUFBRThYLEdBQUc5WCxFQUFFQSxFQUFFeEgsR0FBR3dILEVBQUU0WSxJQUFJZ0QsR0FBRzViLEVBQUVnZSxFQUFFaGUsRUFBRXhILEVBQUUsbUJBQW1Cd0gsRUFBRW9mLElBQUluZixFQUFFRCxFQUFFbWUsRUFBRXJHLEdBQUc5WCxFQUFFbWUsR0FBRyxDQUFDLEVBQUVuZSxFQUFFc1QsR0FBR3RULEVBQUVuRSxJQUFJbUUsRUFBRW5FLEVBQUUsUUFBUW9FLEVBQUUsZ0JBQWdCLG9DQUFvQ0QsRUFBRXhILEVBQUVzYSxHQUFHOVMsRUFBRTJWLEVBQUUzVixFQUFFbkUsRUFBRW1FLEVBQUVzVCxFQUFFclQsS0FBS0QsRUFBRW5FLEVBQUUsTUFBTW1FLEVBQUV4SCxFQUFFc2EsR0FBRzlTLEVBQUUyVixFQUFFM1YsRUFBRW5FLEVBQUUsS0FBS29FLElBQUlxYyxLQUo0dUIsU0FBWXRjLEVBQUVDLEVBQUU3RyxFQUFFcVosRUFBRTdaLEVBQUVzYSxHQUFHbFQsRUFBRWxDLE1BQUssV0FBVyxHQUFHa0MsRUFBRXhILEVBQUUsR0FBRzBhLEVBQVksSUFBVCxJQUFJQyxFQUFFLEdBQVdDLEVBQUVGLEVBQUU4RSxNQUFNLEtBQUsrQixFQUFFLEVBQUVBLEVBQUUzRyxFQUFFamEsT0FBTzRnQixJQUFJLENBQUMsSUFBSXdCLEVBQUVuSSxFQUFFMkcsR0FBRy9CLE1BQU0sS0FBSyxHQUFHLEVBQUV1RCxFQUFFcGlCLE9BQU8sQ0FBQyxJQUFJMEMsRUFBRTBmLEVBQUUsR0FBR0EsRUFBRUEsRUFBRSxHQUFHLElBQUk2QyxFQUFFdmlCLEVBQUVtYyxNQUFNLEtBQUs3RSxFQUFFLEdBQUdpTCxFQUFFamxCLFFBQVEsUUFBUWlsQixFQUFFLEdBQUdqTCxHQUFHdFgsRUFBRSxLQUFJMGYsRUFBRSxJQUFLcEksR0FBR3RYLEVBQUUsYUFBYyxDQUFDLE1BQU9zWCxFQUFFLFVBQVVBLEVBQUVELEVBQUUsTUFBTyxnQkFBZ0JULEVBQUUsY0FBYzdaLEVBQUUsTUFBTXFILEVBQUUsS0FBSzdHLEVBQUUsS0FBSytaLENBQUMsR0FBRyxDQUlyakN3SyxDQUFHM2QsRUFBRXFhLEVBQUVyYSxFQUFFbkUsRUFBRW1FLEVBQUUyVixFQUFFM1YsRUFBRXViLEVBQUV2YixFQUFFK2QsRUFBRS9kLEVBQUVzVCxFQUFHLENBSXZPLFNBQVMrTCxHQUFHcmYsR0FBRyxRQUFPQSxFQUFFeEgsR0FBRSxPQUFPd0gsRUFBRW5FLEdBQUcsR0FBR21FLEVBQUVvZSxHQUFHcGUsRUFBRWdTLEVBQUVtRixFQUFLLENBQ3ZULFNBQVNtSSxHQUFHdGYsRUFBRUMsRUFBRTdHLEdBQUcsSUFBU1IsRUFBTDZaLEdBQUUsRUFBSyxNQUFNelMsRUFBRTJaLEdBQUczWixFQUFFNFosRUFBRXhnQixFQUFFRCxRQUFRLElBQUdQLEVBQUUybUIsR0FBR3ZmLEVBQUU1RyxHQUFHUixHQUFHaW1CLEdBQUcsQ0FBQyxHQUFHNWUsSUFBSUQsRUFBRXVULEVBQUUsRUFBRW1KLEdBQUUsSUFBSWpLLEdBQUUsR0FBSXNKLEdBQUUvYixFQUFFcWEsRUFBRXJhLEVBQUV1YixFQUFFLEtBQUsseUJBQXlCLEtBQUssQ0FBTSxHQUFHM2lCLEdBQUdnbUIsR0FBRyxDQUFDNWUsRUFBRXVULEVBQUUsRUFBRW1KLEdBQUUsSUFBSVgsR0FBRS9iLEVBQUVxYSxFQUFFcmEsRUFBRXViLEVBQUVuaUIsRUFBRSxtQkFBbUJxWixHQUFFLEVBQUcsS0FBSyxDQUFNc0osR0FBRS9iLEVBQUVxYSxFQUFFcmEsRUFBRXViLEVBQUUzaUIsRUFBRSxNQUFNNG1CLEdBQUd4ZixFQUFFcEgsRUFBRSxDQUFDeW1CLEdBQUdyZixJQUFJcEgsR0FBR2ltQixJQUFJam1CLEdBQUdnbUIsS0FBSzVlLEVBQUVtVCxFQUFFM2EsRUFBRSxHQUFHd0gsRUFBRTRaLEVBQUUsR0FBRyxHQUFHM1osR0FBRyxHQUFHN0csRUFBRUQsUUFBUTZHLEVBQUVtVCxFQUFFQSxJQUFJblQsRUFBRXVULEVBQUUsRUFBRW1KLEdBQUUsSUFBSWpLLEdBQUUsR0FBSXpTLEVBQUU5RyxFQUFFOEcsRUFBRTlHLEdBQUd1WixFQUFFQSxFQUFFLEVBQUVyWixFQUFFRCxTQUFTNkcsRUFBRXdlLEtBQUt4ZSxFQUFFd2UsSUFBRyxHQUFHdmUsRUFBRUQsRUFBRWdTLEdBQUl4WixHQUFHd0gsR0FBR0MsRUFBRWlTLEtBQUtqUyxFQUFFc2UsSUFBSXRlLEVBQUUrUixFQUFFbFUsS0FBSyx1REFBdUQxRSxFQUFFRCxRQUFRc21CLEdBQUd4ZixHQUFHQSxFQUFFc2UsR0FBRSxFQUFHN0IsR0FBRSxPQUFPWCxHQUFFL2IsRUFBRXFhLEVBQUVyYSxFQUFFdWIsRUFDcmZuaUIsRUFBRSw4QkFBOEIra0IsR0FBRW5lLEdBQUcwZixHQUFHMWYsR0FBSSxDQUE2SCxTQUFTdWYsR0FBR3ZmLEVBQUVDLEdBQUcsSUFBSTdHLEVBQUU0RyxFQUFFNFosRUFBRW5ILEVBQUV4UyxFQUFFNFMsUUFBUSxLQUFLelosR0FBRyxPQUFJLEdBQUdxWixFQUFTb00sSUFBR3psQixFQUFFaWlCLE9BQU9wYixFQUFFNlEsVUFBVTFYLEVBQUVxWixJQUFPa04sTUFBTXZtQixHQUFVd2xCLElBQUduTSxHQUFHLEdBQU9yWixFQUFFNkcsRUFBRTlHLE9BQWMwbEIsSUFBRzVlLEVBQUVBLEVBQUVtUSxNQUFNcUMsRUFBRUEsRUFBRXJaLEdBQUc0RyxFQUFFNFosRUFBRW5ILEVBQUVyWixFQUFTNkcsR0FBQyxDQUF5QyxTQUFTZ2YsR0FBR2pmLEdBQUdBLEVBQUVzZSxFQUFFclksS0FBS0QsTUFBTWhHLEVBQUVvWixFQUFFd0csR0FBRzVmLEVBQUVBLEVBQUVvWixFQUFHLENBQ2piLFNBQVN3RyxHQUFHNWYsRUFBRUMsR0FBRyxHQUFHLE1BQU1ELEVBQUV5WixFQUFFLE1BQU1wZixNQUFNLDJCQUEyQjJGLEVBQUV5WixFQUFFb0QsR0FBR2xLLEdBQUUzUyxFQUFFaWEsR0FBR2phLEdBQUdDLEVBQUcsQ0FBQyxTQUFTNGYsR0FBRzdmLEdBQUdBLEVBQUV5WixJQUFJekgsR0FBRW1KLGFBQWFuYixFQUFFeVosR0FBR3paLEVBQUV5WixFQUFFLEtBQU0sQ0FBc0osU0FBU2lHLEdBQUcxZixHQUFHLEdBQUdBLEVBQUVnUyxFQUFFOE4sR0FBRzlmLEVBQUUyWixHQUFHb0csR0FBRy9mLEVBQUVnUyxFQUFFaFMsRUFBRyxDQUFDLFNBQVNtZSxHQUFFbmUsR0FBRzZmLEdBQUc3ZixHQUFHLElBQUlDLEVBQUVELEVBQUV1ZSxFQUFFdGUsR0FBRyxtQkFBbUJBLEVBQUV1VCxJQUFJdlQsRUFBRXVULEtBQUt4VCxFQUFFdWUsRUFBRSxLQUFLdkQsR0FBR2hiLEVBQUVrZSxHQUFHckMsR0FBRzdiLEVBQUVnZSxHQUFHaGUsRUFBRXhILElBQUl5SCxFQUFFRCxFQUFFeEgsRUFBRXdILEVBQUV4SCxFQUFFLEtBQUt5SCxFQUFFK2YsUUFBUS9mLEVBQUV1VCxLQUFNLENBQzdjLFNBQVNnTSxHQUFHeGYsRUFBRUMsR0FBRyxJQUFJLElBQUk3RyxFQUFFNEcsRUFBRWdTLEVBQUUsR0FBRyxHQUFHNVksRUFBRTBtQixJQUFJMW1CLEVBQUVaLEdBQUd3SCxHQUFHaWdCLEdBQUc3bUIsRUFBRUYsRUFBRThHLElBQUksSUFBSUEsRUFBRXllLEdBQUd3QixHQUFHN21CLEVBQUVGLEVBQUU4RyxJQUFJLEdBQUc1RyxFQUFFMG1CLEVBQUUsQ0FBQyxJQUFJLElBQUlyTixFQUFFclosRUFBRWllLEdBQUc3ZSxFQUFFNEUsTUFBTTZDLEVBQUcsQ0FBQyxNQUFNc2IsR0FBRzlJLEVBQUUsSUFBSyxDQUFDLEdBQUd0WSxNQUFNQyxRQUFRcVksSUFBSSxHQUFHQSxFQUFFdFosT0FBTyxDQUFDLElBQUlQLEVBQUU2WixFQUFFLEdBQUcsR0FBRzdaLEVBQUUsSUFBR29ILEVBQUcsSUFBSTVHLEVBQUV5QyxFQUFFLENBQUMsR0FBR3pDLEVBQUVaLEVBQUUsTUFBR1ksRUFBRVosRUFBRTZsQixFQUFFLElBQUlyZSxFQUFFcWUsR0FBbUIsTUFBTXJlLEVBQXZCa2dCLEdBQUc5bUIsR0FBRyttQixHQUFHL21CLEVBQWUsQ0FBQ2duQixHQUFHaG5CLEdBQUdzakIsR0FBRSxHQUFJLE9BQU90akIsRUFBRXNjLEdBQUc5YyxFQUFFLEdBQUcsRUFBRVEsRUFBRXNjLEdBQUd0YyxFQUFFOGtCLEdBQUcsTUFBTXRsQixFQUFFLElBQUlRLEVBQUVpbEIsR0FBRyxHQUFHamxCLEVBQUV1YyxJQUFJdmMsRUFBRWlhLElBQUlqYSxFQUFFaWEsRUFBRXdKLEdBQUdsSyxHQUFFdlosRUFBRXlnQixHQUFHemdCLEdBQUcsTUFBTSxHQUFHLEdBQUdpbkIsR0FBR2puQixFQUFFRixJQUFJRSxFQUFFNGEsR0FBRyxDQUFDLElBQUk1YSxFQUFFNGEsSUFBSyxDQUFDLE1BQU11SCxHQUFHLENBQUNuaUIsRUFBRTRhLFFBQUcsQ0FBTyxDQUFDLE1BQU0yRixHQUFFdmdCLEVBQUUsR0FBSSxNQUFNLElBQUk0RyxFQUFFeWUsR0FBR3JsQixFQUFFWixHQUFHd0gsSUFBSWtnQixHQUFHOW1CLElBQUk4YSxHQUFFalUsR0FBRyxJQUFJckgsRUFBRVEsRUFBRWllLEdBQUc3ZSxFQUFFNEUsTUFBTTZDLEdBQUdBLEVBQUUsRUFBRUEsRUFBRXJILEVBQUVPLE9BQU84RyxJQUFJLENBQUMsSUFBSXNiLEVBQUUzaUIsRUFBRXFILEdBQ3hlLEdBRDJlN0csRUFBRThrQixFQUN6ZjNDLEVBQUUsR0FBR0EsRUFBRUEsRUFBRSxHQUFNLEdBQUduaUIsRUFBRTBtQixFQUFFLEdBQUcsS0FBS3ZFLEVBQUUsR0FBRyxDQUFDbmlCLEVBQUVxbEIsRUFBRWxELEVBQUUsR0FBR25pQixFQUFFZ2IsR0FBR21ILEVBQUUsR0FBRyxNQUFNMWYsRUFBRTBmLEVBQUUsR0FBRyxNQUFNMWYsSUFBSXpDLEVBQUVrbkIsR0FBR3prQixFQUFFekMsRUFBRTRZLEVBQUVsVSxLQUFLLE9BQU8xRSxFQUFFa25CLEtBQUssTUFBTWxDLEVBQUU3QyxFQUFFLEdBQUcsTUFBTTZDLElBQUlobEIsRUFBRTRkLEdBQUdvSCxFQUFFaGxCLEVBQUU0WSxFQUFFbFUsS0FBSyxRQUFRMUUsRUFBRTRkLEtBQUssTUFBTXVKLEVBQUdoRixFQUFFLEdBQUcsTUFBTWdGLEdBQUksaUJBQWtCQSxHQUFJLEVBQUVBLElBQUs5TixFQUFFLElBQUk4TixFQUFHbm5CLEVBQUVnbEIsRUFBRTNMLEVBQUVyWixFQUFFNFksRUFBRWxVLEtBQUssZ0NBQWdDMlUsSUFBSUEsRUFBRXJaLEVBQUUsTUFBTXNlLEVBQUcxWCxFQUFFeEgsRUFBRSxHQUFHa2YsRUFBRyxDQUFDLE1BQU04SSxFQUFHOUksRUFBR2xmLEVBQUVrZixFQUFHbGYsRUFBRWlvQixrQkFBa0IsMEJBQTBCLEtBQUssR0FBR0QsRUFBRyxDQUFDLElBQUl0TixFQUFFVCxFQUFFdlosRUFBRWdhLEVBQUUxYSxJQUFJLEdBQUdnb0IsRUFBRzNOLFFBQVEsVUFBVSxHQUFHMk4sRUFBRzNOLFFBQVEsVUFBVSxHQUFHMk4sRUFBRzNOLFFBQVEsUUFBUUssRUFBRW1ILEVBQUVuSCxFQUFFbEIsRUFBRWtCLEVBQUUxYSxFQUFFLElBQUk2TCxJQUFJNk8sRUFBRUMsSUFBSXVOLEdBQUd4TixFQUFFQSxFQUFFQyxHQUFHRCxFQUFFQyxFQUFFLE1BQU8sQ0FBQyxHQUFHVixFQUFFaUssRUFBRSxDQUFDLE1BQU1NLEVBQzFnQnRGLEVBQUdsZixFQUFFa2YsRUFBR2xmLEVBQUVpb0Isa0JBQWtCLHFCQUFxQixLQUFLekQsSUFBS3ZLLEVBQUVpQyxHQUFHc0ksRUFBR3lCLEdBQUVoTSxFQUFFMEwsRUFBRTFMLEVBQUVpSyxFQUFFTSxHQUFLLENBQUMsQ0FBQzVqQixFQUFFMG1CLEVBQUUsRUFBRTFtQixFQUFFK1osR0FBRy9aLEVBQUUrWixFQUFFa0MsS0FBS2pjLEVBQUU4WSxLQUFLOVksRUFBRXNnQixFQUFFelQsS0FBS0QsTUFBTWhHLEVBQUVxZSxFQUFFamxCLEVBQUU0WSxFQUFFbFUsS0FBSyxrQkFBa0IxRSxFQUFFc2dCLEVBQUUsT0FBVyxJQUFJdkcsRUFBRW5ULEVBQStCLElBQXpDeVMsRUFBRXJaLEdBQVkyYixHQUFHNEwsR0FBR2xPLEVBQUVBLEVBQUVrSCxFQUFFbEgsRUFBRTJCLEdBQUcsS0FBSzNCLEVBQUU2TCxHQUFNbkwsRUFBRXNMLEVBQUUsQ0FBQ21DLEdBQUduTyxFQUFFdlosRUFBRWlhLEdBQUcsSUFBSUMsRUFBRUQsRUFBRTRHLEVBQUV0SCxFQUFFMkwsRUFBRXJFLEdBQUczRyxFQUFFc0gsV0FBV1gsR0FBRzNHLEVBQUVxRyxJQUFJb0csR0FBR3pNLEdBQUc2TCxHQUFHN0wsSUFBSVgsRUFBRWphLEVBQUUyYSxDQUFFLE1BQU0wTixHQUFHcE8sR0FBRyxFQUFFclosRUFBRWloQixFQUFFbGhCLFFBQVEybkIsR0FBRzFuQixFQUFHLEtBQU0sUUFBUW1pQixFQUFFLElBQUksU0FBU0EsRUFBRSxJQUFJNUIsR0FBRXZnQixFQUFFLFFBQVEsR0FBR0EsRUFBRTBtQixJQUFJLFFBQVF2RSxFQUFFLElBQUksU0FBU0EsRUFBRSxHQUFHLFFBQVFBLEVBQUUsR0FBRzVCLEdBQUV2Z0IsRUFBRSxHQUFHMm5CLEdBQUczbkIsR0FBRyxRQUFRbWlCLEVBQUUsSUFBSW5pQixFQUFFK1osR0FBRy9aLEVBQUUrWixFQUFFaUMsR0FBR21HLEdBQUduaUIsRUFBRXVjLEVBQUUsRUFBRyxDQUFDMkcsSUFBTSxDQUFDLE1BQU1mLEdBQUcsQ0FBQyxDQUVqZSxTQUFTeUYsR0FBR2hoQixFQUFFQyxHQUFHLEdBQUdELEVBQUVpaEIsU0FBUyxtQkFBbUJqaEIsRUFBRWloQixRQUFRamhCLEVBQUVpaEIsUUFBUWhoQixPQUFFLFFBQWEsR0FBR2dTLEdBQUdqUyxJQUFJLGlCQUFrQkEsRUFBRTdGLE1BQU04RSxVQUFVZ2lCLFFBQVFsWSxLQUFLL0ksRUFBRUMsT0FBRSxRQUFhLElBQUksSUFBSTdHLEVBRHpLLFNBQVk0RyxHQUFHLEdBQUdBLEVBQUUyVSxJQUFJLG1CQUFtQjNVLEVBQUUyVSxHQUFHLE9BQU8zVSxFQUFFMlUsS0FBSyxJQUFJM1UsRUFBRWtoQixHQUFHLG1CQUFtQmxoQixFQUFFa2hCLEVBQUUsQ0FBQyxHQUFHLG9CQUFxQnJmLEtBQUs3QixhQUFhNkIsSUFBSSxPQUFPMUgsTUFBTXFKLEtBQUt4RCxFQUFFRyxRQUFRLEtBQUssb0JBQXFCa0UsS0FBS3JFLGFBQWFxRSxLQUFLLENBQUMsR0FBRzROLEdBQUdqUyxJQUFJLGlCQUFrQkEsRUFBRSxDQUFDLElBQUlDLEVBQUUsR0FBR0QsRUFBRUEsRUFBRTdHLE9BQU8sSUFBSSxJQUFJQyxFQUFFLEVBQUVBLEVBQUU0RyxFQUFFNUcsSUFBSTZHLEVBQUUvRSxLQUFLOUIsR0FBRyxPQUFPNkcsQ0FBQyxDQUFDQSxFQUFFLEdBQUc3RyxFQUFFLEVBQUUsSUFBSSxNQUFNcVosS0FBS3pTLEVBQUVDLEVBQUU3RyxLQUFLcVosRUFBRSxPQUFPeFMsQ0FBQyxDQUFDLENBQUMsQ0FDdkxraEIsQ0FBR25oQixHQUFHeVMsRUFGaVQsU0FBWXpTLEdBQUcsR0FBR0EsRUFBRWtoQixHQUFHLG1CQUFtQmxoQixFQUFFa2hCLEVBQUUsT0FBT2xoQixFQUFFa2hCLElBQUksR0FBRyxvQkFBcUJyZixLQUFLN0IsYUFBYTZCLEtBQUssb0JBQXFCd0MsS0FBS3JFLGFBQWFxRSxJQUFJLE9BQU9sSyxNQUFNcUosS0FBS3hELEVBQUV5RCxVQUFVLEdBQUcsaUJBQWtCekQsRUFBRSxPQUFPQSxFQUFFZ1ksTUFBTSxJQUFJLEdBQUcvRixHQUFHalMsR0FBRyxDQUFDLElBQUksSUFBSUMsRUFBRSxHQUFHN0csRUFBRTRHLEVBQUU3RyxPQUFPc1osRUFBRSxFQUFFQSxFQUFFclosRUFBRXFaLElBQUl4UyxFQUFFL0UsS0FBSzhFLEVBQUV5UyxJQUFJLE9BQU94UyxDQUFDLENBQVUsSUFBSXdTLEtBQWJ4UyxFQUFFLEdBQUc3RyxFQUFFLEVBQVc0RyxFQUFFQyxFQUFFN0csS0FBSzRHLEVBQUV5UyxHQUFHLE9BQU94UyxDQUFDLENBRXhuQm1oQixDQUFHcGhCLEdBQUdwSCxFQUFFNlosRUFBRXRaLE9BQU8rWixFQUFFLEVBQUVBLEVBQUV0YSxFQUFFc2EsSUFBSWpULEVBQUU4SSxVQUFLLEVBQU8wSixFQUFFUyxHQUFHOVosR0FBR0EsRUFBRThaLEdBQUdsVCxFQUFHLEVBYjI0QkssR0FBRXlkLEdBQUc3ZSxXQUFZeWIsV0FBVyxTQUFTMWEsR0FBR3RILEtBQUswZ0IsRUFBRXBaLENBQUUsRUFFMXFDSyxHQUFFK2UsR0FBRyxTQUFTcGYsR0FBR0EsRUFBRUEsRUFBRTZILE9BQU8sTUFBTTVILEVBQUV2SCxLQUFLNmxCLEVBQUV0ZSxHQUFHLEdBQUc2ZixHQUFFOWYsR0FBR0MsRUFBRStSLElBQUl0WixLQUFLb2YsR0FBRzlYLEVBQUcsRUFDdkVLLEdBQUV5WCxHQUFHLFNBQVM5WCxHQUFHLElBQUksR0FBR0EsR0FBR3RILEtBQUtGLEVBQUV3SCxFQUFFLENBQUMsTUFBTW5FLEVBQUVpa0IsR0FBRXBuQixLQUFLRixHQUFHLElBQUl5SCxFQUFFdkgsS0FBS0YsRUFBRTRlLEtBQXlCLEdBQVoxZSxLQUFLRixFQUFFNlosT0FBVSxFQUFFeFcsS0FBSyxHQUFHQSxHQUFHaVosSUFBSXBjLEtBQUtGLElBQUlFLEtBQUt5YSxFQUFFQSxHQUFHemEsS0FBS0YsRUFBRTZvQixNQUFNQyxHQUFHNW9CLEtBQUtGLEtBQUssQ0FBQ0UsS0FBS2loQixHQUFHLEdBQUc5ZCxHQUFHLEdBQUdvRSxHQUFlcWMsS0FBYXVELEdBQUdubkIsTUFBTSxJQUFJVSxFQUFFVixLQUFLRixFQUFFNlosS0FBSzNaLEtBQUt3WixHQUFHOVksRUFBRTZHLEVBQUUsR0FBR29mLEdBQUczbUIsTUFBTSxDQUFDLElBQUkrWixFQUFFNk8sR0FBRzVvQixLQUFLRixHQUFHd0gsRUFBRSxHQUFHLElBQUlwSCxFQUFFNlosRUFBRXRaLE9BQU8rWixFQUFFLEdBQUc0TSxHQUFFcG5CLEtBQUtGLEdBQUcsSUFBSUUsS0FBS3lhLEVBQUVqYSxFQUFFLENBQUMsR0FBRyxvQkFBcUJxb0IsWUFBWSxDQUFDcEQsR0FBRXpsQixNQUFNZ25CLEdBQUdobkIsTUFBTSxJQUFJeWEsRUFBRSxHQUFHLE1BQU1sVCxDQUFDLENBQUN2SCxLQUFLeWEsRUFBRWphLEVBQUUsSUFBSThZLEdBQUV1UCxXQUFZLENBQUMsSUFBSXRoQixFQUFFLEVBQUVBLEVBQUVySCxFQUFFcUgsSUFBSXZILEtBQUt5YSxFQUFFQSxHQUFFLEVBQUduVCxHQUFHdEgsS0FBS3lhLEVBQUVqYSxFQUFFc29CLE9BQU8vTyxFQUFFeFMsR0FBRyxDQUFDd2hCLE9BQU92TyxHQUFHalQsR0FBR3JILEVBQUUsSUFBSTZaLEVBQUUyRixPQUFPLEVBQ3hmeGYsR0FBR0YsS0FBS3lhLEVBQUUzYSxHQUFHd0gsRUFBRXRILEtBQUtraEIsRUFBRSxFQUFFekcsRUFBRXphLEtBQUt5YSxFQUFFM2EsQ0FBRSxNQUFNMmEsRUFBRXphLEtBQUtGLEVBQUU2b0IsS0FBOEQsR0FBekQzb0IsS0FBS1EsRUFBRSxLQUFLRSxFQU5uRSxTQUFZNEcsRUFBRUMsRUFBRTdHLEVBQUVxWixFQUFFN1osRUFBRXNhLEVBQUVDLEdBQUduVCxFQUFFbEMsTUFBSyxXQUFXLE1BQU8saUJBQWlCMlUsRUFBRSxlQUFlN1osRUFBRSxNQUFNcUgsRUFBRSxLQUFLN0csRUFBRSxLQUFLOFosRUFBRSxJQUFJQyxDQUFDLEdBQUcsQ0FNakQrSixDQUFHeGtCLEtBQUsyaEIsRUFBRTNoQixLQUFLbUQsRUFBRW5ELEtBQUtpZCxFQUFFamQsS0FBSzZpQixFQUFFN2lCLEtBQUtxbEIsRUFBRWxpQixFQUFFekMsR0FBTVYsS0FBS1EsRUFBRSxDQUFDLEdBQUdSLEtBQUt1WixLQUFLdlosS0FBSytsQixFQUFFLENBQUN4ZSxFQUFFLENBQUMsR0FBR3ZILEtBQUtGLEVBQUUsQ0FBQyxJQUFJNGEsRUFBRTJHLEVBQUVyaEIsS0FBS0YsRUFBRSxJQUFJNGEsRUFBRTJHLEVBQUV2aEIsRUFBRXVoQixFQUFFdmhCLEVBQUVpb0Isa0JBQWtCLDJCQUEyQixRQUFRdk0sR0FBRWQsR0FBRyxDQUFDLElBQUltSSxFQUFFbkksRUFBRSxNQUFNblQsQ0FBQyxDQUFDLENBQUNzYixFQUFFLElBQUssQ0FBQyxLQUFHbmlCLEVBQUVtaUIsR0FBd0csQ0FBQzdpQixLQUFLUSxHQUFFLEVBQUdSLEtBQUs2YSxFQUFFLEVBQUVtSixHQUFFLElBQUl5QixHQUFFemxCLE1BQU1nbkIsR0FBR2huQixNQUFNLE1BQU1zSCxDQUFDLENBQXhKK2IsR0FBRXJqQixLQUFLMmhCLEVBQUUzaEIsS0FBSzZpQixFQUFFbmlCLEVBQUUsMERBQTBEVixLQUFLK2xCLEdBQUUsRUFBR2UsR0FBRzltQixLQUFLVSxFQUEyRCxDQUFDVixLQUFLZ2hCLEdBQUc0RixHQUFHNW1CLEtBQUttRCxFQUFFc1gsR0FBRzJCLElBQUlwYyxLQUFLUSxHQUFHLEdBQUcyQyxJQUFJK2YsR0FBR2xqQixLQUFLc2xCLEVBQUV0bEIsS0FBS3dsQixFQUFFLE9BQU94bEIsS0FBS3doQixJQUNyZnhoQixLQUFLd2xCLEVBQUUxQyxXQUFXTyxHQUFFcmpCLEtBQUsyaEIsRUFBRTNoQixLQUFLNmlCLEVBQUVwSSxFQUFFLE1BQU1xTSxHQUFHOW1CLEtBQUt5YSxJQUFJLEdBQUd0WCxHQUFHc2lCLEdBQUV6bEIsTUFBTUEsS0FBS1EsSUFBSVIsS0FBS2loQixJQUFJLEdBQUc5ZCxFQUFFa2tCLEdBQUdybkIsS0FBS3NaLEVBQUV0WixPQUFPQSxLQUFLUSxHQUFFLEVBQUcrbEIsR0FBR3ZtQixPQUFRLE1BK0JqSSxTQUFZc0gsR0FBRyxNQUFNQyxFQUFFLENBQUMsRUFBRUQsR0FBR0EsRUFBRXhILEdBQUcsR0FBR3NuQixHQUFFOWYsSUFBR0EsRUFBRXhILEVBQUVrcEIseUJBQTRCLElBQUkxSixNQUFNLFFBQVEsSUFBSSxJQUFJdkYsRUFBRSxFQUFFQSxFQUFFelMsRUFBRTdHLE9BQU9zWixJQUFJLENBQUMsR0FBR3lCLEdBQUVsVSxFQUFFeVMsSUFBSSxTQUFTLElBQUlyWixFQUFFb2hCLEdBQUd4YSxFQUFFeVMsSUFBSSxNQUFNN1osRUFBRVEsRUFBRSxHQUFVLEdBQUcsaUJBQVZBLEVBQUVBLEVBQUUsSUFBMEIsU0FBU0EsRUFBRUEsRUFBRXVvQixPQUFPLE1BQU16TyxFQUFFalQsRUFBRXJILElBQUksR0FBR3FILEVBQUVySCxHQUFHc2EsRUFBRUEsRUFBRWhZLEtBQUs5QixFQUFHLEVBakQrYixTQUFZNEcsRUFBRUMsR0FBRyxJQUFJLE1BQU03RyxLQUFLNEcsRUFBRUMsRUFBRThJLFVBQUssRUFBTy9JLEVBQUU1RyxHQUFHQSxFQUFFNEcsRUFBRyxDQWlEeGY0aEIsQ0FBRzNoQixHQUFFLFNBQVN3UyxHQUFHLE9BQU9BLEVBQUV0WCxLQUFLLEtBQUssR0FBRyxFQS9CN0owbUIsQ0FBR25wQixLQUFLRixHQUFHLEtBQUtZLEdBQUcsRUFBRStaLEVBQUVOLFFBQVEsZ0JBQWdCbmEsS0FBSzZhLEVBQUUsRUFBRW1KLEdBQUUsTUFBTWhrQixLQUFLNmEsRUFBRSxFQUFFbUosR0FBRSxLQUFLeUIsR0FBRXpsQixNQUFNZ25CLEdBQUdobkIsS0FBTSxDQUFDLENBQUMsQ0FBQyxNQUFNbUQsR0FBRyxDQUFVLEVBRWpOd0UsR0FBRTZaLEdBQUcsV0FBVyxHQUFHeGhCLEtBQUtGLEVBQUUsQ0FBQyxJQUFJd0gsRUFBRThmLEdBQUVwbkIsS0FBS0YsR0FBR3lILEVBQUV2SCxLQUFLRixFQUFFNm9CLEtBQUszb0IsS0FBS2toQixFQUFFM1osRUFBRTlHLFNBQVMwbUIsR0FBR25uQixNQUFNNG1CLEdBQUc1bUIsS0FBS3NILEVBQUVDLEdBQUd2SCxLQUFLUSxHQUFHLEdBQUc4RyxHQUFHaWYsR0FBR3ZtQixNQUFPLENBQUMsRUFBc0wySCxHQUFFeWhCLE9BQU8sV0FBV3BwQixLQUFLaWhCLEdBQUUsRUFBR3dFLEdBQUV6bEIsS0FBTSxFQUNyUDJILEdBQUU0WixHQUFHLFdBQVd2aEIsS0FBSytnQixFQUFFLEtBQUssTUFBTXpaLEVBQUVpRyxLQUFLRCxNQUFNLEdBQUdoRyxFQUFFdEgsS0FBSzRsQixHQVZjLFNBQVl0ZSxFQUFFQyxHQUFHRCxFQUFFbEMsTUFBSyxXQUFXLE1BQU8sWUFBWW1DLENBQUMsR0FBRyxDQVVyRW1kLENBQUcxa0IsS0FBSzJoQixFQUFFM2hCLEtBQUtpZCxHQUFHLEdBQUdqZCxLQUFLMGxCLElBQUk5QixLQUFLSSxHQUFFLEtBQUt5QixHQUFFemxCLE1BQU1BLEtBQUs2YSxFQUFFLEVBQUVtTSxHQUFHaG5CLE9BQU9rbkIsR0FBR2xuQixLQUFLQSxLQUFLNGxCLEVBQUV0ZSxFQUFHLEVBS2xELElBQUkraEIsR0FBR0MsT0FBTyxxSUFBa1csU0FBU3pELEdBQUV2ZSxHQUFrRSxHQUEvRHRILEtBQUtGLEVBQUVFLEtBQUs0YSxFQUFFNWEsS0FBSzJoQixFQUFFLEdBQUczaEIsS0FBSzZpQixFQUFFLEtBQUs3aUIsS0FBSzZhLEVBQUU3YSxLQUFLc1osRUFBRSxHQUFHdFosS0FBS3lhLEdBQUUsRUFBTW5ULGFBQWF1ZSxHQUFFLENBQUM3bEIsS0FBS3lhLEVBQUVuVCxFQUFFbVQsRUFBRThPLEdBQUd2cEIsS0FBS3NILEVBQUVxYSxHQUFHM2hCLEtBQUs0YSxFQUFFdFQsRUFBRXNULEVBQUU1YSxLQUFLRixFQUFFd0gsRUFBRXhILEVBQUUwcEIsR0FBR3hwQixLQUFLc0gsRUFBRXViLEdBQUc3aUIsS0FBS3NaLEVBQUVoUyxFQUFFZ1MsRUFBRSxJQUFJL1IsRUFBRUQsRUFBRTlHLEVBQU1FLEVBQUUsSUFBSStvQixHQUFHL29CLEVBQUVGLEVBQUUrRyxFQUFFL0csRUFBRStHLEVBQUV6SCxJQUFJWSxFQUFFWixFQUFFLElBQUlxSixJQUFJNUIsRUFBRXpILEdBQUdZLEVBQUUrWixFQUFFbFQsRUFBRWtULEdBQUdpUCxHQUFHMXBCLEtBQUtVLEdBQUdWLEtBQUs2YSxFQUFFdlQsRUFBRXVULENBQUUsTUFBTXZULElBQUlDLEVBQUV2RSxPQUFPc0UsR0FBR3pDLE1BQU13a0IsTUFBTXJwQixLQUFLeWEsR0FBRSxFQUFHOE8sR0FBR3ZwQixLQUFLdUgsRUFBRSxJQUFJLElBQUcsR0FBSXZILEtBQUs0YSxFQUFFK08sR0FBR3BpQixFQUFFLElBQUksSUFBSXZILEtBQUtGLEVBQUU2cEIsR0FBR3BpQixFQUFFLElBQUksSUFBRyxHQUFJaWlCLEdBQUd4cEIsS0FBS3VILEVBQUUsSUFBSXZILEtBQUtzWixFQUFFcVEsR0FBR3BpQixFQUFFLElBQUksSUFBRyxHQUFJbWlCLEdBQUcxcEIsS0FBS3VILEVBQUUsSUFBSSxJQUFHLEdBQUl2SCxLQUFLNmEsRUFBRThPLEdBQUdwaUIsRUFBRSxJQUFJLE1BQU12SCxLQUFLeWEsR0FBRSxFQUFHemEsS0FBS1EsRUFBRSxJQUFJaXBCLEdBQUcsS0FBS3pwQixLQUFLeWEsR0FBSSxDQUMxbkIsU0FBU2tMLEdBQUVyZSxHQUFHLE9BQU8sSUFBSXVlLEdBQUV2ZSxFQUFFLENBQy9kLFNBQVNpaUIsR0FBR2ppQixFQUFFQyxFQUFFN0csR0FBRzRHLEVBQUVxYSxFQUFFamhCLEVBQUVpcEIsR0FBR3BpQixHQUFFLEdBQUlBLEVBQUVELEVBQUVxYSxJQUFJcmEsRUFBRXFhLEVBQUVyYSxFQUFFcWEsRUFBRXpkLFFBQVEsS0FBSyxJQUFLLENBQUMsU0FBU3NsQixHQUFHbGlCLEVBQUVDLEdBQUcsR0FBR0EsRUFBRSxDQUFhLEdBQVpBLEVBQUVvYixPQUFPcGIsR0FBTTBmLE1BQU0xZixJQUFJLEVBQUVBLEVBQUUsTUFBTTVGLE1BQU0sbUJBQW1CNEYsR0FBR0QsRUFBRXViLEVBQUV0YixDQUFFLE1BQU1ELEVBQUV1YixFQUFFLElBQUssQ0FBQyxTQUFTNkcsR0FBR3BpQixFQUFFQyxFQUFFN0csR0FBRzZHLGFBQWFraUIsSUFBSW5pQixFQUFFOUcsRUFBRStHLEVBTXpOLFNBQVlELEVBQUVDLEdBQUdBLElBQUlELEVBQUVxYSxJQUFJNUcsR0FBRXpULEdBQUdBLEVBQUU5RyxFQUFFLEtBQUs4RyxFQUFFeEgsRUFBRXlvQixTQUFRLFNBQVM3bkIsRUFBRXFaLEdBQUcsSUFBSTdaLEVBQUU2WixFQUFFdUMsY0FBY3ZDLEdBQUc3WixJQUFJMHBCLEdBQUc1cEIsS0FBSytaLEdBQUd5TSxHQUFHeG1CLEtBQUtFLEVBQUVRLEdBQUksR0FBRTRHLElBQUlBLEVBQUVxYSxFQUFFcGEsQ0FBRSxDQU5zRnNpQixDQUFHdmlCLEVBQUU5RyxFQUFFOEcsRUFBRW1ULEtBQUsvWixJQUFJNkcsRUFBRXVpQixHQUFHdmlCLEVBQUV3aUIsS0FBS3ppQixFQUFFOUcsRUFBRSxJQUFJaXBCLEdBQUdsaUIsRUFBRUQsRUFBRW1ULEdBQUksQ0FBQyxTQUFTc0wsR0FBRXplLEVBQUVDLEVBQUU3RyxHQUFHNEcsRUFBRTlHLEVBQUVxSixJQUFJdEMsRUFBRTdHLEVBQUcsQ0FBQyxTQUFTMmxCLEdBQUcvZSxHQUFzSSxPQUFuSXllLEdBQUV6ZSxFQUFFLEtBQUttUyxLQUFLdVEsTUFBTSxXQUFXdlEsS0FBS0MsVUFBVVEsU0FBUyxJQUFJVCxLQUFLd1EsSUFBSXhRLEtBQUt1USxNQUFNLFdBQVd2USxLQUFLQyxVQUFVbk0sS0FBS0QsT0FBTzRNLFNBQVMsS0FBWTVTLENBQUMsQ0FDdmMsU0FBU3FpQixHQUFHcmlCLEVBQUVDLEdBQUcsT0FBT0QsRUFBRUMsRUFBRTJpQixVQUFVNWlCLEVBQUVwRCxRQUFRLE9BQU8sVUFBVWltQixtQkFBbUI3aUIsR0FBRyxFQUFFLENBQUMsU0FBU3dpQixHQUFHeGlCLEVBQUVDLEVBQUU3RyxHQUFHLE1BQU8saUJBQWtCNEcsR0FBR0EsRUFBRThpQixVQUFVOWlCLEdBQUdwRCxRQUFRcUQsRUFBRThpQixJQUFJM3BCLElBQUk0RyxFQUFFQSxFQUFFcEQsUUFBUSx1QkFBdUIsUUFBUW9ELEdBQUcsSUFBSSxDQUFDLFNBQVMraUIsR0FBRy9pQixHQUFxQixNQUFPLE1BQXpCQSxFQUFFQSxFQUFFM0csV0FBVyxLQUFrQixFQUFFLElBQUl1WixTQUFTLEtBQU8sR0FBRjVTLEdBQU00UyxTQUFTLEdBQUcsQ0FGblQyTCxHQUFFdGYsVUFBVTJULFNBQVMsV0FBVyxJQUFJNVMsRUFBRSxHQUFHQyxFQUFFdkgsS0FBSzJoQixFQUFFcGEsR0FBR0QsRUFBRTlFLEtBQUtzbkIsR0FBR3ZpQixFQUFFK2lCLElBQUcsR0FBSSxLQUFLLElBQUk1cEIsRUFBRVYsS0FBS0YsRUFBdVYsT0FBbFZZLEdBQUcsUUFBUTZHLEtBQUVELEVBQUU5RSxLQUFLLE9BQU8rRSxFQUFFdkgsS0FBSzRhLElBQUl0VCxFQUFFOUUsS0FBS3NuQixHQUFHdmlCLEVBQUUraUIsSUFBRyxHQUFJLEtBQUtoakIsRUFBRTlFLEtBQUsrbkIsbUJBQW1Cdm5CLE9BQU90QyxJQUFJd0QsUUFBUSx1QkFBdUIsUUFBaUIsT0FBVHhELEVBQUVWLEtBQUs2aUIsSUFBV3ZiLEVBQUU5RSxLQUFLLElBQUlRLE9BQU90QyxNQUFPQSxFQUFFVixLQUFLc1osS0FBRXRaLEtBQUtGLEdBQUcsS0FBS1ksRUFBRThDLE9BQU8sSUFBSThELEVBQUU5RSxLQUFLLEtBQUs4RSxFQUFFOUUsS0FBS3NuQixHQUFHcHBCLEVBQUUsS0FBS0EsRUFBRThDLE9BQU8sR0FBR2duQixHQUFHQyxJQUFHLE1BQU0vcEIsRUFBRVYsS0FBS1EsRUFBRTBaLGFBQWE1UyxFQUFFOUUsS0FBSyxJQUFJOUIsSUFBSUEsRUFBRVYsS0FBSzZhLElBQUl2VCxFQUFFOUUsS0FBSyxJQUFJc25CLEdBQUdwcEIsRUFBRWdxQixLQUFZcGpCLEVBQUU3RSxLQUFLLEdBQUcsRUFFNUksSUFBSTZuQixHQUFHLFlBQVlHLEdBQUcsVUFBVUQsR0FBRyxTQUFTVCxHQUFHLFVBQVVXLEdBQUcsS0FBSyxTQUFTakIsR0FBR25pQixFQUFFQyxHQUFHdkgsS0FBS3lhLEVBQUV6YSxLQUFLRixFQUFFLEtBQUtFLEtBQUtRLEVBQUU4RyxHQUFHLEtBQUt0SCxLQUFLMmhCLElBQUlwYSxDQUFFLENBQ25iLFNBQVN3VCxHQUFFelQsR0FBR0EsRUFBRXhILElBQUl3SCxFQUFFeEgsRUFBRSxJQUFJcUosSUFBSTdCLEVBQUVtVCxFQUFFLEVBQUVuVCxFQUFFOUcsR0FKMFYsU0FBWThHLEVBQUVDLEdBQUcsR0FBR0QsRUFBRSxDQUFDQSxFQUFFQSxFQUFFZ1ksTUFBTSxLQUFLLElBQUksSUFBSTVlLEVBQUUsRUFBRUEsRUFBRTRHLEVBQUU3RyxPQUFPQyxJQUFJLENBQUMsSUFBSXFaLEVBQUV6UyxFQUFFNUcsR0FBR3laLFFBQVEsS0FBS2phLEVBQUUsS0FBSyxHQUFHLEdBQUc2WixFQUFFLENBQUMsSUFBSVMsRUFBRWxULEVBQUU1RyxHQUFHMFgsVUFBVSxFQUFFMkIsR0FBRzdaLEVBQUVvSCxFQUFFNUcsR0FBRzBYLFVBQVUyQixFQUFFLEVBQUcsTUFBTVMsRUFBRWxULEVBQUU1RyxHQUFHNkcsRUFBRWlULEVBQUV0YSxFQUFFaXFCLG1CQUFtQmpxQixFQUFFZ0UsUUFBUSxNQUFNLE1BQU0sR0FBSSxDQUFDLENBQUMsQ0FJbmpCeW1CLENBQUdyakIsRUFBRTlHLEdBQUUsU0FBUytHLEVBQUU3RyxHQUFHNEcsRUFBRXNFLElBQUl1ZSxtQkFBbUI1aUIsRUFBRXJELFFBQVEsTUFBTSxNQUFNeEQsRUFBRyxJQUFJLENBQStJLFNBQVNrcEIsR0FBR3RpQixFQUFFQyxHQUFHd1QsR0FBRXpULEdBQUdDLEVBQUUyWSxHQUFFNVksRUFBRUMsR0FBR0QsRUFBRXhILEVBQUU2SixJQUFJcEMsS0FBS0QsRUFBRTlHLEVBQUUsS0FBSzhHLEVBQUVtVCxHQUFHblQsRUFBRXhILEVBQUV5SixJQUFJaEMsR0FBRzlHLE9BQU82RyxFQUFFeEgsRUFBRThLLE9BQU9yRCxHQUFJLENBQUMsU0FBU3FqQixHQUFHdGpCLEVBQUVDLEdBQWlCLE9BQWR3VCxHQUFFelQsR0FBR0MsRUFBRTJZLEdBQUU1WSxFQUFFQyxHQUFVRCxFQUFFeEgsRUFBRTZKLElBQUlwQyxFQUFFLENBRXhMLFNBQVNpZixHQUFHbGYsRUFBRUMsRUFBRTdHLEdBQUdrcEIsR0FBR3RpQixFQUFFQyxHQUFHLEVBQUU3RyxFQUFFRCxTQUFTNkcsRUFBRTlHLEVBQUUsS0FBSzhHLEVBQUV4SCxFQUFFK0osSUFBSXFXLEdBQUU1WSxFQUFFQyxHQUFHMlQsR0FBR3hhLElBQUk0RyxFQUFFbVQsR0FBRy9aLEVBQUVELE9BQVEsQ0FDZ0IsU0FBU3lmLEdBQUU1WSxFQUFFQyxHQUF3QyxPQUFyQ0EsRUFBRXZFLE9BQU91RSxHQUFHRCxFQUFFcWEsSUFBSXBhLEVBQUVBLEVBQUUrVSxlQUFzQi9VLENBQUMsQ0FDak0sU0FBU3NqQixHQUFHdmpCLEdBQUd0SCxLQUFLc1osRUFBRWhTLEdBQUd3akIsR0FBaUZ4akIsRUFBOUVnUyxHQUFFeVIsNEJBQThFLEdBQWpEempCLEVBQUVnUyxHQUFFMFIsWUFBWUMsaUJBQWlCLGVBQW9CeHFCLFNBQVMsTUFBTTZHLEVBQUUsR0FBRzRqQixpQkFBaUIsTUFBTTVqQixFQUFFLEdBQUc0akIsb0JBQXVCNVIsR0FBRXhaLEdBQUd3WixHQUFFeFosRUFBRW9mLElBQUk1RixHQUFFeFosRUFBRW9mLE1BQU01RixHQUFFeFosRUFBRW9mLEtBQUtnSCxJQUFJbG1CLEtBQUsyaEIsRUFBRXJhLEVBQUV0SCxLQUFLc1osRUFBRSxFQUFFdFosS0FBS0YsRUFBRSxLQUFLLEVBQUVFLEtBQUsyaEIsSUFBSTNoQixLQUFLRixFQUFFLElBQUk2TCxLQUFLM0wsS0FBS3lhLEVBQUUsS0FBS3phLEtBQUtRLEVBQUUsRUFBRyxFQUo5V21ILEdBQUU4aEIsR0FBR2xqQixXQUFZcUYsSUFBSSxTQUFTdEUsRUFBRUMsR0FBR3dULEdBQUUvYSxNQUFNQSxLQUFLUSxFQUFFLEtBQUs4RyxFQUFFNFksR0FBRWxnQixLQUFLc0gsR0FBRyxJQUFJNUcsRUFBRVYsS0FBS0YsRUFBRXlKLElBQUlqQyxHQUE2QyxPQUExQzVHLEdBQUdWLEtBQUtGLEVBQUUrSixJQUFJdkMsRUFBRTVHLEVBQUUsSUFBSUEsRUFBRThCLEtBQUsrRSxHQUFHdkgsS0FBS3lhLEdBQUcsRUFBU3phLElBQUksRUFDblEySCxHQUFFNGdCLFFBQVEsU0FBU2poQixFQUFFQyxHQUFHd1QsR0FBRS9hLE1BQU1BLEtBQUtGLEVBQUV5b0IsU0FBUSxTQUFTN25CLEVBQUVxWixHQUFHclosRUFBRTZuQixTQUFRLFNBQVNyb0IsR0FBR29ILEVBQUUrSSxLQUFLOUksRUFBRXJILEVBQUU2WixFQUFFL1osS0FBTSxHQUFFQSxLQUFNLEdBQUVBLEtBQU0sRUFBRTJILEdBQUVzVSxHQUFHLFdBQVdsQixHQUFFL2EsTUFBTSxNQUFNc0gsRUFBRTdGLE1BQU1xSixLQUFLOUssS0FBS0YsRUFBRWlMLFVBQVV4RCxFQUFFOUYsTUFBTXFKLEtBQUs5SyxLQUFLRixFQUFFMkgsUUFBUS9HLEVBQUUsR0FBRyxJQUFJLElBQUlxWixFQUFFLEVBQUVBLEVBQUV4UyxFQUFFOUcsT0FBT3NaLElBQUksQ0FBQyxNQUFNN1osRUFBRW9ILEVBQUV5UyxHQUFHLElBQUksSUFBSVMsRUFBRSxFQUFFQSxFQUFFdGEsRUFBRU8sT0FBTytaLElBQUk5WixFQUFFOEIsS0FBSytFLEVBQUV3UyxHQUFJLENBQUMsT0FBT3JaLENBQUMsRUFBRWlILEdBQUU2Z0IsRUFBRSxTQUFTbGhCLEdBQUd5VCxHQUFFL2EsTUFBTSxJQUFJdUgsRUFBRSxHQUFHLEdBQUcsaUJBQWtCRCxFQUFFc2pCLEdBQUc1cUIsS0FBS3NILEtBQUtDLEVBQUVBLEVBQUU2WixPQUFPcGhCLEtBQUtGLEVBQUV5SixJQUFJMlcsR0FBRWxnQixLQUFLc0gsVUFBVyxDQUFDQSxFQUFFN0YsTUFBTXFKLEtBQUs5SyxLQUFLRixFQUFFaUwsVUFBVSxJQUFJLElBQUlySyxFQUFFLEVBQUVBLEVBQUU0RyxFQUFFN0csT0FBT0MsSUFBSTZHLEVBQUVBLEVBQUU2WixPQUFPOVosRUFBRTVHLEdBQUksQ0FBQyxPQUFPNkcsQ0FBQyxFQUNsZkksR0FBRWtDLElBQUksU0FBU3ZDLEVBQUVDLEdBQTBHLE9BQXZHd1QsR0FBRS9hLE1BQU1BLEtBQUtRLEVBQUUsS0FBaUJvcUIsR0FBRzVxQixLQUFmc0gsRUFBRTRZLEdBQUVsZ0IsS0FBS3NILE1BQWdCdEgsS0FBS3lhLEdBQUd6YSxLQUFLRixFQUFFeUosSUFBSWpDLEdBQUc3RyxRQUFRVCxLQUFLRixFQUFFK0osSUFBSXZDLEVBQUUsQ0FBQ0MsSUFBSXZILEtBQUt5YSxHQUFHLEVBQVN6YSxJQUFJLEVBQUUySCxHQUFFNEIsSUFBSSxTQUFTakMsRUFBRUMsR0FBRyxPQUFJRCxHQUE4QixHQUFuQkEsRUFBRXRILEtBQUt3b0IsRUFBRWxoQixJQUFjN0csT0FBT3VDLE9BQU9zRSxFQUFFLElBQXpDQyxDQUE4QyxFQUN2TkksR0FBRXVTLFNBQVMsV0FBVyxHQUFHbGEsS0FBS1EsRUFBRSxPQUFPUixLQUFLUSxFQUFFLElBQUlSLEtBQUtGLEVBQUUsTUFBTyxHQUFHLE1BQU13SCxFQUFFLEdBQUdDLEVBQUU5RixNQUFNcUosS0FBSzlLLEtBQUtGLEVBQUUySCxRQUFRLElBQUksSUFBSS9HLEVBQUUsRUFBRUEsRUFBRTZHLEVBQUU5RyxPQUFPQyxJQUFJLENBQUMsSUFBSXFaLEVBQUV4UyxFQUFFN0csR0FBRyxNQUFNOFosRUFBRStQLG1CQUFtQnZuQixPQUFPK1csSUFBSVUsRUFBRXphLEtBQUt3b0IsRUFBRXpPLEdBQUcsSUFBSUEsRUFBRSxFQUFFQSxFQUFFVSxFQUFFaGEsT0FBT3NaLElBQUksQ0FBQyxJQUFJN1osRUFBRXNhLEVBQUUsS0FBS0MsRUFBRVYsS0FBSzdaLEdBQUcsSUFBSXFxQixtQkFBbUJ2bkIsT0FBT3lYLEVBQUVWLE1BQU16UyxFQUFFOUUsS0FBS3RDLEVBQUcsQ0FBQyxDQUFDLE9BQU9GLEtBQUtRLEVBQUU4RyxFQUFFN0UsS0FBSyxJQUFJLEVBQ3lLLElBQUlxb0IsR0FBRyxHQUFHLFNBQVNLLEdBQUc3akIsR0FBRyxRQUFPQSxFQUFFbVQsS0FBS25ULEVBQUV4SCxHQUFFd0gsRUFBRXhILEVBQUVva0IsTUFBTTVjLEVBQUVxYSxDQUFJLENBQUMsU0FBU2dHLEdBQUdyZ0IsR0FBRyxPQUFPQSxFQUFFbVQsRUFBRSxFQUFFblQsRUFBRXhILEVBQUV3SCxFQUFFeEgsRUFBRW9rQixLQUFLLENBQUMsQ0FBQyxTQUFTcUQsR0FBR2pnQixFQUFFQyxHQUFHLE9BQU9ELEVBQUVtVCxFQUFFblQsRUFBRW1ULEdBQUdsVCxJQUFFRCxFQUFFeEgsR0FBRXdILEVBQUV4SCxFQUFFNkosSUFBSXBDLEVBQUssQ0FBQyxTQUFTeWdCLEdBQUcxZ0IsRUFBRUMsR0FBR0QsRUFBRXhILEVBQUV3SCxFQUFFeEgsRUFBRThMLElBQUlyRSxHQUFHRCxFQUFFbVQsRUFBRWxULENBQUUsQ0FDeHFCLFNBQVMyZ0IsR0FBRzVnQixFQUFFQyxHQUFHRCxFQUFFbVQsR0FBR25ULEVBQUVtVCxHQUFHbFQsRUFBRUQsRUFBRW1ULEVBQUUsS0FBS25ULEVBQUV4SCxHQUFHd0gsRUFBRXhILEVBQUU2SixJQUFJcEMsSUFBSUQsRUFBRXhILEVBQUU4SyxPQUFPckQsRUFBRyxDQUFtTCxTQUFTNmpCLEdBQUc5akIsR0FBRyxHQUFHLE1BQU1BLEVBQUVtVCxFQUFFLE9BQU9uVCxFQUFFOUcsRUFBRTRnQixPQUFPOVosRUFBRW1ULEVBQUV1SixHQUFHLEdBQUcsTUFBTTFjLEVBQUV4SCxHQUFHLElBQUl3SCxFQUFFeEgsRUFBRW9rQixLQUFLLENBQUMsSUFBSTNjLEVBQUVELEVBQUU5RyxFQUFFLElBQUksTUFBTUUsS0FBSzRHLEVBQUV4SCxFQUFFaUwsU0FBU3hELEVBQUVBLEVBQUU2WixPQUFPMWdCLEVBQUVzakIsR0FBRyxPQUFPemMsQ0FBQyxDQUFDLE9BQU8yVCxHQUFHNVQsRUFBRTlHLEVBQUUsQ0FBaFZxcUIsR0FBR3RrQixVQUFVNmlCLE9BQU8sV0FBMkIsR0FBaEJwcEIsS0FBS1EsRUFBRTRxQixHQUFHcHJCLE1BQVNBLEtBQUt5YSxFQUFFemEsS0FBS3lhLEVBQUUyTyxTQUFTcHBCLEtBQUt5YSxFQUFFLFVBQVUsR0FBR3phLEtBQUtGLEdBQUcsSUFBSUUsS0FBS0YsRUFBRW9rQixLQUFLLENBQUMsSUFBSSxNQUFNNWMsS0FBS3RILEtBQUtGLEVBQUVpTCxTQUFTekQsRUFBRThoQixTQUFTcHBCLEtBQUtGLEVBQUV1ckIsT0FBUSxDQUFDLEVBQWlLLElBQUlDLEdBQUcsTUFBTSxTQUFBblQsQ0FBVTdRLEdBQUcsT0FBT2dTLEdBQUU3VSxLQUFLMFQsVUFBVTdRLE9BQUUsRUFBTyxDQUFDLEtBQUE1QyxDQUFNNEMsR0FBRyxPQUFPZ1MsR0FBRTdVLEtBQUtDLE1BQU00QyxPQUFFLEVBQU8sR0FBRyxTQUFTaWtCLEtBQUt2ckIsS0FBS0YsRUFBRSxJQUFJd3JCLEVBQUcsQ0FBQyxTQUFTRSxHQUFHbGtCLEVBQUVDLEVBQUU3RyxHQUFHLE1BQU1xWixFQUFFclosR0FBRyxHQUFHLElBQUk0bkIsR0FBR2hoQixHQUFFLFNBQVNwSCxFQUFFc2EsR0FBRyxJQUFJQyxFQUFFdmEsRUFBRUssR0FBRUwsS0FBS3VhLEVBQUU2RyxHQUFHcGhCLElBQUlxSCxFQUFFL0UsS0FBS3VYLEVBQUVTLEVBQUUsSUFBSStQLG1CQUFtQjlQLEdBQUksR0FBRyxDQUFDLE1BQU12YSxHQUFHLE1BQU1xSCxFQUFFL0UsS0FBS3VYLEVBQUUsUUFBUXdRLG1CQUFtQixZQUFZcnFCLENBQUUsQ0FBQyxDQUF3VixTQUFTdXJCLEdBQUdua0IsRUFBRUMsRUFBRTdHLEVBQUVxWixFQUFFN1osR0FBRyxJQUFJcUgsRUFBRW1rQixPQUFPLEtBQUtua0IsRUFBRXNSLFFBQVEsS0FBS3RSLEVBQUVva0IsUUFBUSxLQUFLcGtCLEVBQUVxa0IsVUFBVSxLQUFLMXJCLEVBQUU2WixFQUFHLENBQUMsTUFBTVMsR0FBRyxDQUFDLENBQUMsU0FBU3FSLEdBQUd2a0IsR0FBR3RILEtBQUtzWixFQUFFaFMsRUFBRTZlLElBQUksS0FBS25tQixLQUFLMmhCLEVBQUVyYSxFQUFFb2EsS0FBSSxDQUFHLENBQThILFNBQVNvSyxHQUFHeGtCLEVBQUVDLEdBQUd3WixHQUFFMVEsS0FBS3JRLE1BQU1BLEtBQUtna0IsRUFBRTFjLEVBQUV0SCxLQUFLbUQsRUFBRW9FLEVBQUV2SCxLQUFLNmlCLE9BQUUsRUFBTzdpQixLQUFLK3JCLFdBQVdDLEdBQUdoc0IsS0FBS2lzQixPQUFPLEVBQUVqc0IsS0FBS2tzQixhQUFhbHNCLEtBQUttc0IsYUFBYW5zQixLQUFLb3NCLFNBQVNwc0IsS0FBS3FzQixXQUFXLEdBQUdyc0IsS0FBS3NzQixtQkFBbUIsS0FBS3RzQixLQUFLMmEsRUFBRSxJQUFJNFIsUUFBUXZzQixLQUFLeWEsRUFBRSxLQUFLemEsS0FBS2toQixFQUFFLE1BQU1saEIsS0FBSytnQixFQUFFLEdBQUcvZ0IsS0FBS0YsR0FBRSxFQUFHRSxLQUFLaWQsRUFBRWpkLEtBQUsyaEIsRUFBRTNoQixLQUFLc1osRUFBRSxJQUFLLENBQXhaZSxHQUFFd1IsR0FBR2pILElBQUlpSCxHQUFHdGxCLFVBQVV6RyxFQUFFLFdBQVcsT0FBTyxJQUFJZ3NCLEdBQUc5ckIsS0FBS3NaLEVBQUV0WixLQUFLMmhCLEVBQUUsRUFBRWtLLEdBQUd0bEIsVUFBVS9GLEVBQUUsU0FBUzhHLEdBQUcsT0FBTyxXQUFXLE9BQU9BLENBQUMsQ0FBQyxDQUF2QyxDQUF5QyxDQUFDLEdBQStSK1MsR0FBRXlSLEdBQUcvSyxJQUFHLElBQUlpTCxHQUFHLEVBSXYrQyxTQUFTUSxHQUFHbGxCLEdBQUdBLEVBQUVxYSxFQUFFakwsT0FBT3JGLEtBQUsvSixFQUFFbWxCLEdBQUc1UyxLQUFLdlMsSUFBSXRCLE1BQU1zQixFQUFFMlQsR0FBR3BCLEtBQUt2UyxHQUFJLENBQ3pDLFNBQVNvbEIsR0FBR3BsQixHQUFHQSxFQUFFeWtCLFdBQVcsRUFBRXprQixFQUFFZ1MsRUFBRSxLQUFLaFMsRUFBRXFhLEVBQUUsS0FBS3JhLEVBQUUyVixFQUFFLEtBQUswUCxHQUFHcmxCLEVBQUcsQ0FDM0MsU0FBU3FsQixHQUFHcmxCLEdBQUdBLEVBQUVnbEIsb0JBQW9CaGxCLEVBQUVnbEIsbUJBQW1CamMsS0FBSy9JLEVBQUcsRUFOMjNDSyxHQUFFbWtCLEdBQUd2bEIsV0FDcm5EK08sS0FBSyxTQUFTaE8sRUFBRUMsR0FBRyxHQUFHdkgsS0FBSytyQixZQUFZQyxHQUFHLE1BQU1oc0IsS0FBS3NuQixRQUFRM2xCLE1BQU0sZ0NBQWdDM0IsS0FBS2toQixFQUFFNVosRUFBRXRILEtBQUsrZ0IsRUFBRXhaLEVBQUV2SCxLQUFLK3JCLFdBQVcsRUFBRVksR0FBRzNzQixLQUFNLEVBQUUySCxHQUFFaWxCLEtBQUssU0FBU3RsQixHQUFHLEdBQUcsR0FBR3RILEtBQUsrckIsV0FBVyxNQUFNL3JCLEtBQUtzbkIsUUFBUTNsQixNQUFNLCtCQUErQjNCLEtBQUtGLEdBQUUsRUFBRyxNQUFNeUgsRUFBRSxDQUFDc2xCLFFBQVE3c0IsS0FBSzJhLEVBQUVsTixPQUFPek4sS0FBS2toQixFQUFFNEwsWUFBWTlzQixLQUFLNmlCLEVBQUVrSyxXQUFNLEdBQVF6bEIsSUFBSUMsRUFBRXlsQixLQUFLMWxCLElBQUl0SCxLQUFLZ2tCLEdBQUcxSyxJQUFHMlQsTUFBTSxJQUFJQyxRQUFRbHRCLEtBQUsrZ0IsRUFBRXhaLElBQUk4SixLQUFLclIsS0FBS2lnQixHQUFHcEcsS0FBSzdaLE1BQU1BLEtBQUtpYixHQUFHcEIsS0FBSzdaLE1BQU8sRUFDemEySCxHQUFFMmYsTUFBTSxXQUFXdG5CLEtBQUtvc0IsU0FBU3BzQixLQUFLbXNCLGFBQWEsR0FBR25zQixLQUFLMmEsRUFBRSxJQUFJNFIsUUFBUXZzQixLQUFLaXNCLE9BQU8sRUFBRWpzQixLQUFLMmhCLEdBQUczaEIsS0FBSzJoQixFQUFFeUgsT0FBTyx3QkFBd0JwakIsT0FBTSxTQUFRLEdBQUdoRyxLQUFLK3JCLFlBQVkvckIsS0FBS0YsR0FBRyxHQUFHRSxLQUFLK3JCLGFBQWEvckIsS0FBS0YsR0FBRSxFQUFHNHNCLEdBQUcxc0IsT0FBT0EsS0FBSytyQixXQUFXQyxFQUFHLEVBQzNPcmtCLEdBQUVzWSxHQUFHLFNBQVMzWSxHQUFHLEdBQUd0SCxLQUFLRixJQUFJRSxLQUFLc1osRUFBRWhTLEVBQUV0SCxLQUFLeWEsSUFBSXphLEtBQUtpc0IsT0FBT2pzQixLQUFLc1osRUFBRTJTLE9BQU9qc0IsS0FBS3FzQixXQUFXcnNCLEtBQUtzWixFQUFFK1MsV0FBV3JzQixLQUFLeWEsRUFBRW5ULEVBQUV1bEIsUUFBUTdzQixLQUFLK3JCLFdBQVcsRUFBRVksR0FBRzNzQixPQUFPQSxLQUFLRixJQUFJRSxLQUFLK3JCLFdBQVcsRUFBRVksR0FBRzNzQixNQUFNQSxLQUFLRixJQUFJLEdBQUcsZ0JBQWdCRSxLQUFLa3NCLGFBQWE1a0IsRUFBRTZsQixjQUFjOWIsS0FBS3JSLEtBQUs4ZixHQUFHakcsS0FBSzdaLE1BQU1BLEtBQUtpYixHQUFHcEIsS0FBSzdaLFlBQVksUUFBRyxJQUFxQnNaLEdBQUU4VCxnQkFBZ0IsU0FBUzlsQixFQUFFLENBQTJCLEdBQTFCdEgsS0FBSzJoQixFQUFFcmEsRUFBRTBsQixLQUFLSyxZQUFlcnRCLEtBQUttRCxFQUFFLENBQUMsR0FBR25ELEtBQUtrc0IsYUFBYSxNQUFNdnFCLE1BQU0sdUVBQXVFM0IsS0FBS29zQixTQUNuZixFQUFHLE1BQU1wc0IsS0FBS29zQixTQUFTcHNCLEtBQUttc0IsYUFBYSxHQUFHbnNCLEtBQUtpZCxFQUFFLElBQUk0TCxZQUFZMkQsR0FBR3hzQixLQUFNLE1BQU1zSCxFQUFFZ21CLE9BQU9qYyxLQUFLclIsS0FBS2dnQixHQUFHbkcsS0FBSzdaLE1BQU1BLEtBQUtpYixHQUFHcEIsS0FBSzdaLE1BQU8sRUFBb0UySCxHQUFFOGtCLEdBQUcsU0FBU25sQixHQUFHLEdBQUd0SCxLQUFLRixFQUFFLENBQUMsR0FBR0UsS0FBS21ELEdBQUdtRSxFQUFFdkIsTUFBTS9GLEtBQUtvc0IsU0FBUzVwQixLQUFLOEUsRUFBRXZCLFlBQVksSUFBSS9GLEtBQUttRCxFQUFFLENBQUMsSUFBSW9FLEVBQUVELEVBQUV2QixNQUFNdUIsRUFBRXZCLE1BQU0sSUFBSXduQixXQUFXLElBQU1obUIsRUFBRXZILEtBQUtpZCxFQUFFNkwsT0FBT3ZoQixFQUFFLENBQUN3aEIsUUFBUXpoQixFQUFFaUosVUFBT3ZRLEtBQUtvc0IsU0FBU3BzQixLQUFLbXNCLGNBQWM1a0IsRUFBRSxDQUFDRCxFQUFFaUosS0FBS21jLEdBQUcxc0IsTUFBTTJzQixHQUFHM3NCLE1BQU0sR0FBR0EsS0FBSytyQixZQUFZUyxHQUFHeHNCLEtBQU0sQ0FBQyxFQUNqZDJILEdBQUVxWSxHQUFHLFNBQVMxWSxHQUFHdEgsS0FBS0YsSUFBSUUsS0FBS29zQixTQUFTcHNCLEtBQUttc0IsYUFBYTdrQixFQUFFb2xCLEdBQUcxc0IsTUFBTyxFQUFFMkgsR0FBRW1ZLEdBQUcsU0FBU3hZLEdBQUd0SCxLQUFLRixJQUFJRSxLQUFLb3NCLFNBQVM5a0IsRUFBRW9sQixHQUFHMXNCLE1BQU8sRUFBRTJILEdBQUVzVCxHQUFHLFdBQVdqYixLQUFLRixHQUFHNHNCLEdBQUcxc0IsS0FBTSxFQUFrRTJILEdBQUU2bEIsaUJBQWlCLFNBQVNsbUIsRUFBRUMsR0FBR3ZILEtBQUsyYSxFQUFFOFMsT0FBT25tQixFQUFFQyxFQUFHLEVBQUVJLEdBQUVvZ0Isa0JBQWtCLFNBQVN6Z0IsR0FBRyxPQUFPdEgsS0FBS3lhLEdBQUV6YSxLQUFLeWEsRUFBRWxSLElBQUlqQyxFQUFFZ1YsZ0JBQW1CLEVBQUUsRUFDdlczVSxHQUFFcWhCLHNCQUFzQixXQUFXLElBQUlocEIsS0FBS3lhLEVBQUUsTUFBTyxHQUFHLE1BQU1uVCxFQUFFLEdBQUdDLEVBQUV2SCxLQUFLeWEsRUFBRS9QLFVBQVUsSUFBSSxJQUFJaEssRUFBRTZHLEVBQUVrYSxRQUFRL2dCLEVBQUU2UCxNQUFNN1AsRUFBRUEsRUFBRXFGLE1BQU11QixFQUFFOUUsS0FBSzlCLEVBQUUsR0FBRyxLQUFLQSxFQUFFLElBQUlBLEVBQUU2RyxFQUFFa2EsT0FBTyxPQUFPbmEsRUFBRTdFLEtBQUssT0FBTyxFQUFxRTRELE9BQU9rVixlQUFldVEsR0FBR3ZsQixVQUFVLGtCQUFrQixDQUFDZ0QsSUFBSSxXQUFXLE1BQU8sWUFBWXZKLEtBQUs2aUIsQ0FBQyxFQUFFaFosSUFBSSxTQUFTdkMsR0FBR3RILEtBQUs2aUIsRUFBRXZiLEVBQUUsVUFBVSxhQUFjLElBQUksSUFBSW9tQixHQUFHcFUsR0FBRTdVLEtBQUtDLE1BQU0sU0FBU2djLEdBQUVwWixHQUFHeVosR0FBRTFRLEtBQUtyUSxNQUFNQSxLQUFLNnNCLFFBQVEsSUFBSTFqQixJQUFJbkosS0FBS21ELEVBQUVtRSxHQUFHLEtBQUt0SCxLQUFLeWEsR0FBRSxFQUFHemEsS0FBS2toQixFQUFFbGhCLEtBQUtGLEVBQUUsS0FBS0UsS0FBS3lsQixFQUFFLEdBQUd6bEIsS0FBSzZpQixFQUFFLEVBQUU3aUIsS0FBSzJoQixFQUFFLEdBQUczaEIsS0FBS3NaLEVBQUV0WixLQUFLMmxCLEVBQUUzbEIsS0FBSzJhLEVBQUUzYSxLQUFLZ2tCLEdBQUUsRUFBR2hrQixLQUFLK2dCLEVBQUUsRUFBRS9nQixLQUFLaWQsRUFBRSxLQUFLamQsS0FBSytsQixFQUFFNEgsR0FBRzN0QixLQUFLMGxCLEVBQUUxbEIsS0FBSzZsQixHQUFFLENBQUcsQ0FBQ3hMLEdBQUVxRyxHQUFFSyxJQUFHLElBQUk0TSxHQUFHLEdBQUdDLEdBQUcsWUFBWUMsR0FBRyxDQUFDLE9BQU8sT0FHblAsU0FBU0MsR0FBR3htQixFQUFFQyxHQUFHRCxFQUFFbVQsR0FBRSxFQUFHblQsRUFBRXhILElBQUl3SCxFQUFFZ1MsR0FBRSxFQUFHaFMsRUFBRXhILEVBQUV3bkIsUUFBUWhnQixFQUFFZ1MsR0FBRSxHQUFJaFMsRUFBRXFhLEVBQUVwYSxFQUFFRCxFQUFFdWIsRUFBRSxFQUFFa0wsR0FBR3ptQixHQUFHMG1CLEdBQUcxbUIsRUFBRyxDQUNuZixTQUFTeW1CLEdBQUd6bUIsR0FBR0EsRUFBRTBjLElBQUkxYyxFQUFFMGMsR0FBRSxFQUFHOUMsR0FBRTVaLEVBQUUsWUFBWTRaLEdBQUU1WixFQUFFLFNBQVUsQ0FDMUQsU0FBUzJtQixHQUFHM21CLEdBQUcsR0FBR0EsRUFBRW1ULFFBQUcsSUFBb0JwQixNQUFRL1IsRUFBRTRaLEVBQUUsSUFBSSxHQUFHa0csR0FBRTlmLElBQUksR0FBR0EsRUFBRXFTLE1BQU0sR0FBR3JTLEVBQUVxVCxHQUFHLEdBQUd5TSxHQUFFOWYsR0FBR29iLEdBQUdwYixFQUFFdWdCLEdBQUcsRUFBRXZnQixRQUFRLEdBQUc0WixHQUFFNVosRUFBRSxvQkFBb0IsR0FBRzhmLEdBQUU5ZixHQUFHLENBQUNBLEVBQUVtVCxHQUFFLEVBQUcsSUFBSSxNQUFNQSxFQUFFblQsRUFBRXFTLEtBQUtyUyxFQUFFLE9BQU9tVCxHQUFHLEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxJQUFJLEtBQUssS0FBSyxJQUFJbFQsR0FBRSxFQUFHLE1BQU1ELEVBQUUsUUFBUUMsR0FBRSxFQUFJLElBQUk3RyxFQUFFLEtBQUtBLEVBQUU2RyxHQUFHLENBQUMsSUFBSXdTLEVBQUUsR0FBR0EsRUFBRSxJQUFJVSxFQUFFLENBQUMsSUFBSXZhLEVBQUU4QyxPQUFPc0UsRUFBRW1lLEdBQUc1Z0IsTUFBTXdrQixJQUFJLElBQUksTUFBTW5wQixHQUFHb1osR0FBRWxWLE1BQU1rVixHQUFFbFYsS0FBSzhwQixXQUFXaHVCLEVBQUVvWixHQUFFbFYsS0FBSzhwQixTQUFTQyxTQUFTelcsTUFBTSxHQUFHLElBQUlxQyxHQUFHNlQsR0FBR25TLEtBQUt2YixFQUFFQSxFQUFFb2MsY0FBYyxHQUFJLENBQUM1YixFQUFFcVosQ0FBRSxDQUFDLEdBQUdyWixFQUFFd2dCLEdBQUU1WixFQUFFLFlBQVk0WixHQUFFNVosRUFBRSxlQUFnQixDQUFDQSxFQUFFdWIsRUFDM2YsRUFBRSxJQUFJLElBQUlySSxFQUFFLEVBQUU0TSxHQUFFOWYsR0FBR0EsRUFBRXhILEVBQUV1c0IsV0FBVyxFQUFHLENBQUMsTUFBTTNSLEdBQUdGLEVBQUUsRUFBRyxDQUFDbFQsRUFBRXFhLEVBQUVuSCxFQUFFLEtBQUtsVCxFQUFFcVMsS0FBSyxJQUFJb1UsR0FBR3ptQixFQUFHLENBQUMsQ0FBQyxRQUFRMG1CLEdBQUcxbUIsRUFBRyxDQUFDLENBQUMsQ0FBQyxTQUFTMG1CLEdBQUcxbUIsRUFBRUMsR0FBRyxHQUFHRCxFQUFFeEgsRUFBRSxDQUFDc3VCLEdBQUc5bUIsR0FBRyxNQUFNNUcsRUFBRTRHLEVBQUV4SCxFQUFFaWEsRUFBRXpTLEVBQUU0WixFQUFFLEdBQUcsT0FBTyxLQUFLNVosRUFBRXhILEVBQUUsS0FBS3dILEVBQUU0WixFQUFFLEtBQUszWixHQUFHMlosR0FBRTVaLEVBQUUsU0FBUyxJQUFJNUcsRUFBRTRyQixtQkFBbUJ2UyxDQUFFLENBQUMsTUFBTTdaLEdBQUcsQ0FBQyxDQUFDLENBQUMsU0FBU2t1QixHQUFHOW1CLEdBQUdBLEVBQUV4SCxHQUFHd0gsRUFBRW9lLElBQUlwZSxFQUFFeEgsRUFBRThyQixVQUFVLE1BQU10a0IsRUFBRTJWLElBQUkzRCxHQUFFbUosYUFBYW5iLEVBQUUyVixHQUFHM1YsRUFBRTJWLEVBQUUsS0FBTSxDQUF3QyxTQUFTbUssR0FBRTlmLEdBQUcsT0FBT0EsRUFBRXhILEVBQUV3SCxFQUFFeEgsRUFBRWlzQixXQUFXLENBQUMsQ0FDaE4sU0FBU25ELEdBQUd0aEIsR0FBRyxJQUFJLElBQUlBLEVBQUV4SCxFQUFFLE9BQU8sS0FBSyxHQUFHLGFBQWF3SCxFQUFFeEgsRUFBRSxPQUFPd0gsRUFBRXhILEVBQUVzc0IsU0FBUyxPQUFPOWtCLEVBQUV5ZSxHQUFHLEtBQUs0SCxHQUFHLElBQUssT0FBTyxPQUFPcm1CLEVBQUV4SCxFQUFFcXNCLGFBQWEsSUFBSyxjQUFjLEdBQUcsMkJBQTJCN2tCLEVBQUV4SCxFQUFFLE9BQU93SCxFQUFFeEgsRUFBRXV1Qix1QkFBdUIsT0FBTyxJQUFJLENBQUMsTUFBTTltQixHQUFHLE9BQU8sSUFBSSxDQUFDLENBQ3JELFNBQVMrbUIsR0FBR2huQixHQUFHLElBQUlDLEVBQUUsR0FBb0QsT0FBakQ0WCxHQUFHN1gsR0FBRSxTQUFTNUcsRUFBRXFaLEdBQUd4UyxHQUFHd1MsRUFBRXhTLEdBQUcsSUFBSUEsR0FBRzdHLEVBQUU2RyxHQUFHLE1BQU8sSUFBVUEsQ0FBQyxDQUFDLFNBQVNnbkIsR0FBR2puQixFQUFFQyxFQUFFN0csR0FBRzRHLEVBQUUsQ0FBQyxJQUFJeVMsS0FBS3JaLEVBQUUsQ0FBQyxJQUFJcVosR0FBRSxFQUFHLE1BQU16UyxDQUFDLENBQUN5UyxHQUFFLENBQUcsQ0FBQ0EsSUFBSXJaLEVBQUU0dEIsR0FBRzV0QixHQUFHLGlCQUFrQjRHLEVBQUcsTUFBTTVHLEdBQUc2cEIsbUJBQW1Cdm5CLE9BQU90QyxJQUFLcWxCLEdBQUV6ZSxFQUFFQyxFQUFFN0csR0FBSSxDQUFDLFNBQVM4dEIsR0FBR2xuQixFQUFFQyxFQUFFN0csR0FBRyxPQUFPQSxHQUFHQSxFQUFFK3RCLHVCQUFzQi90QixFQUFFK3RCLHNCQUFzQm5uQixJQUFNQyxDQUFDLENBQzlyQixTQUFTbW5CLEdBQUdwbkIsR0FBR3RILEtBQUtzZSxHQUFHLEVBQUV0ZSxLQUFLMmhCLEVBQUUsR0FBRzNoQixLQUFLc1osRUFBRSxJQUFJOEosR0FBR3BqQixLQUFLMGIsR0FBRzFiLEtBQUtxYyxHQUFHcmMsS0FBS3lsQixFQUFFemxCLEtBQUs0bEIsRUFBRTVsQixLQUFLRixFQUFFRSxLQUFLZ2MsR0FBR2hjLEtBQUtna0IsRUFBRWhrQixLQUFLbWIsR0FBR25iLEtBQUs2YSxFQUFFN2EsS0FBS3NsQixFQUFFdGxCLEtBQUs0YSxFQUFFLEtBQUs1YSxLQUFLMmdCLEdBQUczZ0IsS0FBS3FsQixFQUFFLEVBQUVybEIsS0FBS3NnQixHQUFHa08sR0FBRyxZQUFXLEVBQUdsbkIsR0FBR3RILEtBQUsybEIsRUFBRTNsQixLQUFLMmEsRUFBRTNhLEtBQUttRCxFQUFFbkQsS0FBSzZpQixFQUFFN2lCLEtBQUt5YSxFQUFFLEtBQUt6YSxLQUFLdVosSUFBRyxFQUFHdlosS0FBS2dkLEdBQUdoZCxLQUFLd2xCLEdBQUcsRUFBRXhsQixLQUFLOGxCLEdBQUc5bEIsS0FBS2lkLEVBQUVqZCxLQUFLa2hCLEVBQUUsRUFBRWxoQixLQUFLbWdCLEdBQUdxTyxHQUFHLG1CQUFtQixJQUFJbG5CLEdBQUd0SCxLQUFLNlgsR0FBRzJXLEdBQUcsbUJBQW1CLElBQUlsbkIsR0FBR3RILEtBQUtxZ0IsR0FBR21PLEdBQUcsMkJBQTJCLEVBQUVsbkIsR0FBR3RILEtBQUt1YyxHQUFHaVMsR0FBRyxpQ0FBaUMsSUFBSWxuQixHQUFHdEgsS0FBS29jLEdBQUc5VSxHQUFHQSxFQUFFcW5CLHFCQUFnQixFQUFPM3VCLEtBQUt5ZSxHQUFHblgsR0FBR0EsRUFBRTBlLEtBQUksRUFBR2htQixLQUFLMGxCLE9BQ3RmLEVBQU8xbEIsS0FBS2loQixFQUFFM1osR0FBR0EsRUFBRXNuQix5QkFBd0IsRUFBRzV1QixLQUFLK2xCLEVBQUUsR0FBRy9sQixLQUFLUSxFQUFFLElBQUlxcUIsR0FBR3ZqQixHQUFHQSxFQUFFdW5CLHdCQUF3Qjd1QixLQUFLMmUsR0FBRyxJQUFJNE0sR0FBR3ZyQixLQUFLMGdCLEVBQUVwWixHQUFHQSxFQUFFd25CLGdCQUFlLEVBQUc5dUIsS0FBS2tnQixFQUFFNVksR0FBR0EsRUFBRXluQiwyQkFBMEIsRUFBRy91QixLQUFLMGdCLEdBQUcxZ0IsS0FBS2tnQixJQUFJbGdCLEtBQUtrZ0IsR0FBRSxHQUFJbGdCLEtBQUtvZ0IsR0FBRzlZLEdBQUdBLEVBQUU4ZCxLQUFJLEVBQUc5ZCxHQUFHQSxFQUFFaWMsSUFBSXZqQixLQUFLc1osRUFBRWlLLEtBQUtqYyxHQUFHQSxFQUFFMG5CLG1CQUFtQmh2QixLQUFLdVosSUFBRyxHQUFJdlosS0FBS3daLElBQUl4WixLQUFLMGdCLEdBQUcxZ0IsS0FBS3VaLElBQUlqUyxHQUFHQSxFQUFFMm5CLHVCQUFzQixFQUFHanZCLEtBQUs4YixRQUFHLEVBQU94VSxHQUFHQSxFQUFFNG5CLG9CQUFvQixFQUFFNW5CLEVBQUU0bkIscUJBQXFCbHZCLEtBQUs4YixHQUFHeFUsRUFBRTRuQixvQkFBb0JsdkIsS0FBS3NiLFFBQUcsRUFBT3RiLEtBQUtnaEIsRUFBRSxFQUFFaGhCLEtBQUs2bEIsR0FBRSxFQUFHN2xCLEtBQUtrYixHQUFHbGIsS0FBSytnQixFQUFFLElBQUssQ0FDbGUsU0FBU3NILEdBQUcvZ0IsR0FBUyxHQUFONm5CLEdBQUc3bkIsR0FBTSxHQUFHQSxFQUFFOGYsRUFBRSxDQUFDLElBQUk3ZixFQUFFRCxFQUFFK2QsSUFBSTNrQixFQUFFaWxCLEdBQUVyZSxFQUFFbWUsR0FBeUcsR0FBdEdNLEdBQUVybEIsRUFBRSxNQUFNNEcsRUFBRXllLEdBQUdBLEdBQUVybEIsRUFBRSxNQUFNNkcsR0FBR3dlLEdBQUVybEIsRUFBRSxPQUFPLGFBQWEwdUIsR0FBRzluQixFQUFFNUcsSUFBRzZHLEVBQUUsSUFBSTZkLEdBQUc5ZCxFQUFFQSxFQUFFZ1MsRUFBRS9SLElBQUttZSxFQUFFLEVBQUVuZSxFQUFFb1QsRUFBRTBMLEdBQUdWLEdBQUVqbEIsSUFBSUEsR0FBRSxFQUFNNFksR0FBRXFDLFdBQVdyQyxHQUFFcUMsVUFBVTBULFdBQVcsSUFBSTN1QixFQUFFNFksR0FBRXFDLFVBQVUwVCxXQUFXOW5CLEVBQUVvVCxFQUFFVCxXQUFXLEdBQUksQ0FBQyxNQUFNSCxHQUFHLEVBQUVyWixHQUFHNFksR0FBRWdXLFNBQVEsSUFBS0EsT0FBT3hRLElBQUl2WCxFQUFFb1QsRUFBRWphLEdBQUUsR0FBSUEsSUFBSTZHLEVBQUV6SCxFQUFFMm1CLEdBQUdsZixFQUFFK1IsRUFBRSxNQUFNL1IsRUFBRXpILEVBQUVzYSxHQUFHN1MsRUFBRW9ULElBQUlwVCxFQUFFb2UsRUFBRXBZLEtBQUtELE1BQU1pWixHQUFHaGYsRUFBRyxDQUFDZ29CLEdBQUdqb0IsRUFBRyxDQUFDLFNBQVNtZ0IsR0FBR25nQixHQUFHQSxFQUFFeEgsSUFBSWluQixHQUFHemYsR0FBR0EsRUFBRXhILEVBQUVzcEIsU0FBUzloQixFQUFFeEgsRUFBRSxLQUFNLENBQ25hLFNBQVNxdkIsR0FBRzduQixHQUFHbWdCLEdBQUduZ0IsR0FBR0EsRUFBRW5FLElBQUltVyxHQUFFbUosYUFBYW5iLEVBQUVuRSxHQUFHbUUsRUFBRW5FLEVBQUUsTUFBTXFrQixHQUFHbGdCLEdBQUdBLEVBQUU5RyxFQUFFNG9CLFNBQVM5aEIsRUFBRXViLElBQUksaUJBQWtCdmIsRUFBRXViLEdBQUd2SixHQUFFbUosYUFBYW5iLEVBQUV1YixHQUFHdmIsRUFBRXViLEVBQUUsS0FBTSxDQUFDLFNBQVN1RixHQUFHOWdCLEdBQUcsSUFBSTZqQixHQUFHN2pCLEVBQUU5RyxLQUFLOEcsRUFBRXViLEVBQUUsQ0FBQ3ZiLEVBQUV1YixHQUFFLEVBQUcsSUFBSXRiLEVBQUVELEVBQUU2WCxHQUFHOEMsSUFBSUUsS0FBS0QsS0FBS0QsS0FBS0MsSUFBRyxHQUFJVixHQUFHNVYsSUFBSXJFLEVBQUVELEdBQUdBLEVBQUU0WixFQUFFLENBQUUsQ0FBQyxDQUd6TyxTQUFTc08sR0FBR2xvQixFQUFFQyxHQUFHLElBQUk3RyxFQUFJQSxFQUFGNkcsRUFBSUEsRUFBRXNiLEVBQUl2YixFQUFFK2QsSUFBSSxNQUFNdEwsRUFBRTRMLEdBQUVyZSxFQUFFbWUsR0FBR00sR0FBRWhNLEVBQUUsTUFBTXpTLEVBQUV5ZSxHQUFHQSxHQUFFaE0sRUFBRSxNQUFNclosR0FBR3FsQixHQUFFaE0sRUFBRSxNQUFNelMsRUFBRWtlLEdBQUc0SixHQUFHOW5CLEVBQUV5UyxHQUFHelMsRUFBRXVULEdBQUd2VCxFQUFFc1QsR0FBRzJULEdBQUd4VSxFQUFFelMsRUFBRXVULEVBQUV2VCxFQUFFc1QsR0FBR2xhLEVBQUUsSUFBSTBrQixHQUFHOWQsRUFBRUEsRUFBRWdTLEVBQUU1WSxFQUFFNEcsRUFBRTRaLEVBQUUsR0FBRyxPQUFPNVosRUFBRXVULElBQUluYSxFQUFFK2tCLEVBQUVuZSxFQUFFc1QsR0FBR3JULElBQUlELEVBQUVxYSxFQUFFcGEsRUFBRXljLEVBQUU1QyxPQUFPOVosRUFBRXFhLElBQUlwYSxFQUFFa29CLEdBQUdub0IsRUFBRTVHLEVBQUUsS0FBS0EsRUFBRXNoQixXQUFXdkksS0FBS2lXLE1BQU0sR0FBR3BvQixFQUFFaVYsSUFBSTlDLEtBQUtpVyxNQUFNLEdBQUdwb0IsRUFBRWlWLEdBQUc5QyxLQUFLQyxXQUFXc08sR0FBRzFnQixFQUFFOUcsRUFBRUUsR0FBRzBsQixHQUFHMWxCLEVBQUVxWixFQUFFeFMsRUFBRyxDQUFDLFNBQVM2bkIsR0FBRzluQixFQUFFQyxHQUFHRCxFQUFFNlQsSUFBSWdFLEdBQUc3WCxFQUFFNlQsSUFBRyxTQUFTemEsRUFBRXFaLEdBQUdnTSxHQUFFeGUsRUFBRXdTLEVBQUVyWixFQUFHLElBQUc0RyxFQUFFbVQsR0FBRzZOLEdBQUcsQ0FBQyxHQUFFLFNBQVM1bkIsRUFBRXFaLEdBQUdnTSxHQUFFeGUsRUFBRXdTLEVBQUVyWixFQUFHLEdBQUcsQ0FDN1ksU0FBUyt1QixHQUFHbm9CLEVBQUVDLEVBQUU3RyxHQUFHQSxFQUFFK1ksS0FBS2tXLElBQUlyb0IsRUFBRXFhLEVBQUVsaEIsT0FBT0MsR0FBRyxJQUFJcVosRUFBRXpTLEVBQUVtVCxFQUFFUixHQUFFM1MsRUFBRW1ULEVBQUVtRixHQUFHdFksRUFBRW1ULEVBQUVuVCxHQUFHLEtBQUtBLEVBQUUsQ0FBQyxJQUFJcEgsRUFBRW9ILEVBQUVxYSxFQUFFLElBQUluSCxHQUFHLEVBQUUsT0FBTyxDQUFDLE1BQU1DLEVBQUUsQ0FBQyxTQUFTL1osSUFBSSxHQUFHOFosRUFBRSxFQUFFOVosR0FBRzhaLEVBQUV0YSxFQUFFLEdBQUdKLEVBQUUyYSxFQUFFalksS0FBSyxPQUFPZ1ksSUFBSUEsRUFBRSxFQUFFQyxFQUFFalksS0FBSyxPQUFPZ1ksR0FBRyxJQUFJRSxHQUFFLEVBQUcsSUFBSSxJQUFJMkcsRUFBRSxFQUFFQSxFQUFFM2dCLEVBQUUyZ0IsSUFBSSxDQUFDLElBQUl3QixFQUFFM2lCLEVBQUVtaEIsR0FBR3ZoQixFQUFFLE1BQU1xRCxFQUFFakQsRUFBRW1oQixHQUFHblcsSUFBUyxHQUFMMlgsR0FBR3JJLEVBQUssRUFBRXFJLEVBQUVySSxFQUFFZixLQUFLbVcsSUFBSSxFQUFFMXZCLEVBQUVtaEIsR0FBR3ZoQixFQUFFLEtBQUs0YSxHQUFFLE9BQVEsSUFBSThRLEdBQUdyb0IsRUFBRXNYLEVBQUUsTUFBTW9JLEVBQUUsSUFBSyxDQUFDLE1BQU02QyxHQUFHM0wsR0FBR0EsRUFBRTVXLEVBQUcsQ0FBQyxDQUFDLEdBQUd1WCxFQUFFLENBQUNYLEVBQUVVLEVBQUVoWSxLQUFLLEtBQUssTUFBTTZFLENBQUMsQ0FBQyxDQUFDLENBQXlCLE9BQXhCQSxFQUFFQSxFQUFFcWEsRUFBRWpDLE9BQU8sRUFBRWhmLEdBQUc2RyxFQUFFeWMsRUFBRTFjLEVBQVN5UyxDQUFDLENBQUMsU0FBU29PLEdBQUc3Z0IsR0FBRyxJQUFJQSxFQUFFeEgsSUFBSXdILEVBQUVuRSxFQUFFLENBQUNtRSxFQUFFd2UsR0FBRyxFQUFFLElBQUl2ZSxFQUFFRCxFQUFFd2dCLEdBQUc3RixJQUFJRSxLQUFLRCxLQUFLRCxLQUFLQyxJQUFHLEdBQUlWLEdBQUc1VixJQUFJckUsRUFBRUQsR0FBR0EsRUFBRTJWLEVBQUUsQ0FBRSxDQUFDLENBQzVlLFNBQVN5SyxHQUFHcGdCLEdBQUcsUUFBR0EsRUFBRXhILEdBQUd3SCxFQUFFbkUsR0FBRyxHQUFHbUUsRUFBRTJWLElBQVkzVixFQUFFd2UsS0FBS3hlLEVBQUVuRSxFQUFFZ2hCLEdBQUdsSyxHQUFFM1MsRUFBRXdnQixHQUFHeGdCLEdBQUd1b0IsR0FBR3ZvQixFQUFFQSxFQUFFMlYsSUFBSTNWLEVBQUUyVixJQUFXLEdBQUUsQ0FDL0YsU0FBUzhKLEdBQUd6ZixHQUFHLE1BQU1BLEVBQUV5WixJQUFJekgsR0FBRW1KLGFBQWFuYixFQUFFeVosR0FBR3paLEVBQUV5WixFQUFFLEtBQU0sQ0FBQyxTQUFTK08sR0FBR3hvQixHQUFHQSxFQUFFeEgsRUFBRSxJQUFJc2xCLEdBQUc5ZCxFQUFFQSxFQUFFZ1MsRUFBRSxNQUFNaFMsRUFBRXdlLElBQUksT0FBT3hlLEVBQUV1VCxJQUFJdlQsRUFBRXhILEVBQUUybEIsRUFBRW5lLEVBQUVzVCxHQUFHdFQsRUFBRXhILEVBQUVvZ0IsRUFBRSxFQUFFLElBQUkzWSxFQUFFb2UsR0FBRXJlLEVBQUUrVSxJQUFJMEosR0FBRXhlLEVBQUUsTUFBTSxPQUFPd2UsR0FBRXhlLEVBQUUsTUFBTUQsRUFBRXllLEdBQUdBLEdBQUV4ZSxFQUFFLE1BQU1ELEVBQUVrZSxHQUFHTyxHQUFFeGUsRUFBRSxLQUFLRCxFQUFFcWUsRUFBRSxJQUFJLE1BQU1yZSxFQUFFcWUsR0FBR3JlLEVBQUV3VSxJQUFJaUssR0FBRXhlLEVBQUUsS0FBS0QsRUFBRXdVLElBQUlpSyxHQUFFeGUsRUFBRSxPQUFPLFdBQVc2bkIsR0FBRzluQixFQUFFQyxHQUFHRCxFQUFFdVQsR0FBR3ZULEVBQUVzVCxHQUFHMlQsR0FBR2huQixFQUFFRCxFQUFFdVQsRUFBRXZULEVBQUVzVCxHQUFHdFQsRUFBRW9lLEdBQUdwZSxFQUFFeEgsRUFBRWtpQixXQUFXMWEsRUFBRW9lLEdBQUcsSUFBSWhsQixFQUFFNEcsRUFBRXhILEVBQUV3SCxFQUFFQSxFQUFFb1UsR0FBR2hiLEVBQUVnbEIsRUFBRSxFQUFFaGxCLEVBQUVpYSxFQUFFMEwsR0FBR1YsR0FBRXBlLElBQUk3RyxFQUFFa2EsRUFBRSxLQUFLbGEsRUFBRXNnQixHQUFFLEVBQUdzRixHQUFHNWxCLEVBQUU0RyxFQUFHLENBQy9YLFNBQVNrZ0IsR0FBR2xnQixHQUFHLE1BQU1BLEVBQUVxVCxJQUFJckIsR0FBRW1KLGFBQWFuYixFQUFFcVQsR0FBR3JULEVBQUVxVCxFQUFFLEtBQU0sQ0FBQyxTQUFTME0sR0FBRy9mLEVBQUVDLEdBQUcsSUFBSTdHLEVBQUUsS0FBSyxHQUFHNEcsRUFBRXhILEdBQUd5SCxFQUFFLENBQUNpZ0IsR0FBR2xnQixHQUFHeWYsR0FBR3pmLEdBQUdBLEVBQUV4SCxFQUFFLEtBQUssSUFBSWlhLEVBQUUsQ0FBRSxLQUFNLEtBQUd3TixHQUFHamdCLEVBQUU5RyxFQUFFK0csR0FBNEIsT0FBekI3RyxFQUFFNkcsRUFBRXljLEVBQUVrRSxHQUFHNWdCLEVBQUU5RyxFQUFFK0csR0FBR3dTLEVBQUUsQ0FBYSxDQUFDLEdBQUcsR0FBR3pTLEVBQUU4ZixFQUFFLEdBQUc3ZixFQUFFL0csRUFBRSxHQUFHLEdBQUd1WixFQUFFLENBQUNyWixFQUFFNkcsRUFBRXFULEVBQUVyVCxFQUFFcVQsRUFBRW5hLE9BQU8sRUFBRThHLEVBQUVnRyxLQUFLRCxNQUFNL0YsRUFBRW9lLEVBQUUsSUFBSXpsQixFQUFFb0gsRUFBRTRaLEVBQVNBLEdBQVBuSCxFQUFFMkosS0FBUyxJQUFJTyxHQUFHbEssRUFBRXJaLElBQUkwbkIsR0FBRzlnQixFQUFHLE1BQU02Z0IsR0FBRzdnQixRQUFRLEdBQVMsSUFBTnBILEVBQUVxSCxFQUFFc1QsSUFBUSxHQUFHM2EsR0FBRyxFQUFFcUgsRUFBRWlTLE1BQU0sR0FBR08sR0FQaEcsU0FBWXpTLEVBQUVDLEdBQUcsUUFBR29nQixHQUFHcmdCLEVBQUU5RyxJQUFJOEcsRUFBRTlHLEVBQUVtaEIsR0FBR3JhLEVBQUV1YixFQUFFLEVBQUUsS0FBZ0J2YixFQUFFdWIsR0FBU3ZiLEVBQUVxYSxFQUFFcGEsRUFBRXljLEVBQUU1QyxPQUFPOVosRUFBRXFhLEdBQUcsR0FBTSxHQUFHcmEsRUFBRThmLEdBQUcsR0FBRzlmLEVBQUU4ZixHQUFHOWYsRUFBRTRaLElBQUk1WixFQUFFZ1osR0FBRyxFQUFFaFosRUFBRStZLE1BQWMvWSxFQUFFdWIsRUFBRXNCLEdBQUdsSyxHQUFFM1MsRUFBRTZYLEdBQUc3WCxFQUFFQyxHQUFHc29CLEdBQUd2b0IsRUFBRUEsRUFBRTRaLElBQUk1WixFQUFFNFosSUFBVyxJQUFFLENBT3RGNk8sQ0FBR3pvQixFQUFFQyxJQUFJLEdBQUd3UyxHQUFHMk4sR0FBR3BnQixJQUFJLE9BQU81RyxHQUFHLEVBQUVBLEVBQUVELFNBQVM4RyxFQUFFRCxFQUFFOUcsRUFBRStHLEVBQUUvRyxFQUFFK0csRUFBRS9HLEVBQUU0Z0IsT0FBTzFnQixJQUFJUixHQUFHLEtBQUssRUFBRStnQixHQUFFM1osRUFBRSxHQUFHLE1BQU0sS0FBSyxFQUFFMlosR0FBRTNaLEVBQUUsSUFBSSxNQUFNLEtBQUssRUFBRTJaLEdBQUUzWixFQUFFLEdBQUcsTUFBTSxRQUFRMlosR0FBRTNaLEVBQUUsR0FBSSxDQUNuZSxTQUFTdW9CLEdBQUd2b0IsRUFBRUMsR0FBRyxJQUFJN0csRUFBRTRHLEVBQUU2WSxHQUFHMUcsS0FBS3VRLE1BQU12USxLQUFLQyxTQUFTcFMsRUFBRXVRLElBQXlCLE9BQXJCdlEsRUFBRTBvQixhQUFhdHZCLEdBQUcsR0FBVUEsRUFBRTZHLENBQUMsQ0FBQyxTQUFTMFosR0FBRTNaLEVBQUVDLEdBQTZCLEdBQTFCRCxFQUFFZ1MsRUFBRWxVLEtBQUssY0FBY21DLEdBQU0sR0FBR0EsRUFBRSxDQUFDLElBQUk3RyxFQUFFLEtBQUs0RyxFQUFFbVQsSUFBSS9aLEVBQUUsTUFBTSxJQUFJcVosRUFBRUUsR0FBRTNTLEVBQUVzYSxHQUFHdGEsR0FBRzVHLElBQUlBLEVBQUUsSUFBSW1sQixHQUFFLHdDQUF3Q3ZNLEdBQUU0VSxVQUFVLFFBQVE1VSxHQUFFNFUsU0FBU0MsVUFBVTVFLEdBQUc3b0IsRUFBRSxTQUFTMmxCLEdBQUczbEIsSUExQmliLFNBQVk0RyxFQUFFQyxHQUFHLE1BQU03RyxFQUFFLElBQUkwaUIsR0FBRyxHQUFHOUosR0FBRWdXLE1BQU0sQ0FBQyxNQUFNdlYsRUFBRSxJQUFJdVYsTUFBTXZWLEVBQUUyUixPQUFPdFIsR0FBR3FSLEdBQUcvcUIsRUFBRXFaLEVBQUUseUJBQXdCLEVBQUd4UyxHQUFHd1MsRUFBRWxCLFFBQVF1QixHQUFHcVIsR0FBRy9xQixFQUFFcVosRUFBRSx3QkFBdUIsRUFBR3hTLEdBQUd3UyxFQUFFNFIsUUFBUXZSLEdBQUdxUixHQUFHL3FCLEVBQUVxWixFQUFFLHdCQUF1QixFQUFHeFMsR0FBR3dTLEVBQUU2UixVQUFVeFIsR0FBR3FSLEdBQUcvcUIsRUFBRXFaLEVBQUUsMEJBQXlCLEVBQUd4UyxHQUFHK1IsR0FBRTBJLFlBQVcsV0FBY2pJLEVBQUU2UixXQUFVN1IsRUFBRTZSLFdBQVksR0FBRSxLQUFLN1IsRUFBRStFLElBQUl4WCxDQUFFLE1BQU1DLEdBQUUsRUFBSSxDQTBCbndCMG9CLENBQUd2dkIsRUFBRXdaLFdBQVdILEVBQUcsTUFBTWlLLEdBQUUsR0FBRzFjLEVBQUU4ZixFQUFFLEVBQUU5ZixFQUFFbVQsR0FBR25ULEVBQUVtVCxFQUFFc0IsR0FBR3hVLEdBQUdnb0IsR0FBR2pvQixHQUFHNm5CLEdBQUc3bkIsRUFBRyxDQUN4VyxTQUFTaW9CLEdBQUdqb0IsR0FBaUIsR0FBZEEsRUFBRThmLEVBQUUsRUFBRTlmLEVBQUU0VCxHQUFHLEdBQU01VCxFQUFFbVQsRUFBRSxDQUFDLE1BQU1sVCxFQUFFNmpCLEdBQUc5akIsRUFBRTlHLEdBQU0sR0FBRytHLEVBQUU5RyxRQUFRLEdBQUc2RyxFQUFFcWEsRUFBRWxoQixTQUFPMGEsR0FBRzdULEVBQUU0VCxHQUFHM1QsR0FBRzRULEdBQUc3VCxFQUFFNFQsR0FBRzVULEVBQUVxYSxHQUFHcmEsRUFBRTlHLEVBQUVBLEVBQUVDLE9BQU8sRUFBRXlhLEdBQUc1VCxFQUFFcWEsR0FBR3JhLEVBQUVxYSxFQUFFbGhCLE9BQU8sR0FBRTZHLEVBQUVtVCxFQUFFK0IsSUFBSyxDQUFDLENBQUMsU0FBU3lMLEdBQUczZ0IsRUFBRUMsRUFBRTdHLEdBQUcsSUFBSXFaLEVBQUVyWixhQUFhbWxCLEdBQUVGLEdBQUVqbEIsR0FBRyxJQUFJbWxCLEdBQUVubEIsR0FBRyxHQUFHLElBQUlxWixFQUFFamEsRUFBRXlILElBQUl3UyxFQUFFamEsRUFBRXlILEVBQUUsSUFBSXdTLEVBQUVqYSxHQUFHMHBCLEdBQUd6UCxFQUFFQSxFQUFFOEksT0FBUSxDQUFDLElBQUkzaUIsRUFBRW9aLEdBQUU0VSxTQUFTblUsRUFBRTdaLEVBQUVpdUIsU0FBUzVtQixFQUFFQSxFQUFFQSxFQUFFLElBQUlySCxFQUFFZ3dCLFNBQVNod0IsRUFBRWd3QixTQUFTaHdCLEdBQUdBLEVBQUVpd0IsS0FBSyxJQUFJM1YsRUFBRSxJQUFJcUwsR0FBRSxNQUFNOUwsR0FBR3dQLEdBQUcvTyxFQUFFVCxHQUFHeFMsSUFBSWlULEVBQUUxYSxFQUFFeUgsR0FBR3JILEdBQUdzcEIsR0FBR2hQLEVBQUV0YSxHQUFHUSxJQUFJOFosRUFBRWxCLEVBQUU1WSxHQUFHcVosRUFBRVMsQ0FBRSxDQUFxRCxPQUFwRDlaLEVBQUU0RyxFQUFFMGMsRUFBRXpjLEVBQUVELEVBQUUwVSxHQUFHdGIsR0FBRzZHLEdBQUd3ZSxHQUFFaE0sRUFBRXJaLEVBQUU2RyxHQUFHd2UsR0FBRWhNLEVBQUUsTUFBTXpTLEVBQUVzZ0IsSUFBSXdILEdBQUc5bkIsRUFBRXlTLEdBQVVBLENBQUMsQ0FDcmMsU0FBUzBNLEdBQUduZixFQUFFQyxFQUFFN0csR0FBRyxHQUFHNkcsSUFBSUQsRUFBRTJaLEVBQUUsTUFBTXRmLE1BQU0sdURBQXFILE9BQTlENEYsRUFBRTdHLEdBQUc0RyxFQUFFbVgsS0FBS25YLEVBQUU4VSxHQUFHLElBQUlzRSxHQUFFLElBQUltTCxHQUFHLENBQUNuSyxJQUFHLEtBQU0sSUFBSWhCLEdBQUVwWixFQUFFOFUsS0FBTThNLEdBQUc1aEIsRUFBRTJaLEdBQVUxWixDQUFDLENBQStELFNBQVM2b0IsS0FBSyxDQUEySSxTQUFTQyxLQUFLLEdBQUduVSxNQUFLLElBQUl5RyxPQUFPM0YsS0FBSyxNQUFNcmIsTUFBTSwrQ0FBZ0QsQ0FDamUsU0FBUzJ1QixHQUFFaHBCLEVBQUVDLEdBQUd3WixHQUFFMVEsS0FBS3JRLE1BQU1BLEtBQUtGLEVBQUUsSUFBSTR1QixHQUFHbm5CLEdBQUd2SCxLQUFLc1osRUFBRWhTLEVBQUV0SCxLQUFLeWEsRUFBRWxULEdBQUdBLEVBQUVncEIsa0JBQWtCLEtBQUtqcEIsRUFBRUMsR0FBR0EsRUFBRWlwQixnQkFBZ0IsS0FBS2pwQixHQUFHQSxFQUFFa3BCLCtCQUErQm5wQixFQUFFQSxFQUFFLHFCQUFxQixhQUFhQSxFQUFFLENBQUMsb0JBQW9CLGVBQWV0SCxLQUFLRixFQUFFOGEsRUFBRXRULEVBQUVBLEVBQUVDLEdBQUdBLEVBQUVtcEIsb0JBQW9CLEtBQUtucEIsR0FBR0EsRUFBRW9wQixxQkFBcUJycEIsRUFBRUEsRUFBRSw2QkFBNkJDLEVBQUVvcEIsbUJBQW1CcnBCLEVBQUUsQ0FBQyw0QkFBNEJDLEVBQUVvcEIscUJBQXFCcHBCLEdBQUdBLEVBQUVzVixLQUFLdlYsRUFBRUEsRUFBRSwrQkFBK0JDLEVBQUVzVixHQUFHdlYsRUFBRSxDQUFDLDhCQUE4QkMsRUFBRXNWLEtBQUs3YyxLQUFLRixFQUFFd2xCLEVBQ3hmaGUsR0FBR0EsRUFBRUMsR0FBR0EsRUFBRWdlLE1BQU0vSixHQUFFbFUsS0FBS3RILEtBQUtGLEVBQUUrYSxFQUFFdlQsR0FBR3RILEtBQUtpZCxFQUFFMVYsR0FBR0EsRUFBRXFuQix5QkFBd0IsRUFBRzV1QixLQUFLMmEsRUFBRXBULEdBQUdBLEVBQUVxcEIsY0FBYSxHQUFJcnBCLEVBQUVBLEdBQUdBLEVBQUVzcEIsc0JBQXNCclYsR0FBRWpVLEtBQUt2SCxLQUFLRixFQUFFa2tCLEVBQUV6YyxFQUFXLFFBQVRELEVBQUV0SCxLQUFLeWEsSUFBWWxULEtBQUtELEdBQWFDLEtBQVRELEVBQUV0SCxLQUFLeWEsV0FBaUJuVCxFQUFFQyxJQUFLdkgsS0FBSzJoQixFQUFFLElBQUltUCxHQUFFOXdCLEtBQU0sQ0FFcE8sU0FBUyt3QixHQUFHenBCLEdBQUc0ZCxHQUFHN1UsS0FBS3JRLE1BQU1zSCxFQUFFMHBCLGNBQWNoeEIsS0FBSzZzQixRQUFRdmxCLEVBQUUwcEIsWUFBWWh4QixLQUFLaXhCLFdBQVczcEIsRUFBRTRwQixrQkFBa0I1cEIsRUFBRTBwQixtQkFBbUIxcEIsRUFBRTRwQixZQUFZLElBQUkzcEIsRUFBRUQsRUFBRTZwQixPQUFPLEdBQUc1cEIsRUFBRSxDQUFDRCxFQUFFLENBQUMsSUFBSSxNQUFNNUcsS0FBSzZHLEVBQUUsQ0FBQ0QsRUFBRTVHLEVBQUUsTUFBTTRHLENBQUMsQ0FBQ0EsT0FBRSxDQUFPLEVBQUl0SCxLQUFLUSxFQUFFOEcsS0FBRUEsRUFBRXRILEtBQUtRLEVBQUUrRyxFQUFFLE9BQU9BLEdBQUdELEtBQUtDLEVBQUVBLEVBQUVELFFBQUcsR0FBT3RILEtBQUs4RyxLQUFLUyxDQUFFLE1BQU12SCxLQUFLOEcsS0FBS1EsQ0FBRSxDQUFVLFNBQVM4cEIsS0FBS2pNLEdBQUc5VSxLQUFLclEsTUFBTUEsS0FBS2lzQixPQUFPLENBQUUsQ0FBVSxTQUFTNkUsR0FBRXhwQixHQUFHdEgsS0FBS0YsRUFBRXdILENBQUUsQ0FDM1AsU0FBUzBaLEtBQUloaEIsS0FBS3F4QixXQUFXLEVBQUVyeEIsS0FBS3F4QixVQUFVLEdBQUdyeEIsS0FBS0YsRUFBRTJCLE1BQU0sR0FBR3pCLEtBQUs2aUIsRUFBRXBoQixNQUFNekIsS0FBS3F4QixXQUFXcnhCLEtBQUtRLEVBQUVSLEtBQUt5YSxFQUFFLEVBQUV6YSxLQUFLNmhCLE9BQVEsQ0FDdFAsU0FBU3lQLEdBQUdocUIsRUFBRUMsRUFBRTdHLEdBQUdBLElBQUlBLEVBQUUsR0FBRyxJQUFJcVosRUFBRXRZLE1BQU0sSUFBSSxHQUFHLGlCQUFrQjhGLEVBQUUsSUFBSSxJQUFJckgsRUFBRSxFQUFFLEdBQUdBLElBQUlBLEVBQUU2WixFQUFFN1osR0FBR3FILEVBQUU1RyxXQUFXRCxLQUFLNkcsRUFBRTVHLFdBQVdELE1BQU0sRUFBRTZHLEVBQUU1RyxXQUFXRCxNQUFNLEdBQUc2RyxFQUFFNUcsV0FBV0QsTUFBTSxRQUFRLElBQUlSLEVBQUUsRUFBRSxHQUFHQSxJQUFJQSxFQUFFNlosRUFBRTdaLEdBQUdxSCxFQUFFN0csS0FBSzZHLEVBQUU3RyxNQUFNLEVBQUU2RyxFQUFFN0csTUFBTSxHQUFHNkcsRUFBRTdHLE1BQU0sR0FBRzZHLEVBQUVELEVBQUV4SCxFQUFFLEdBQUdZLEVBQUU0RyxFQUFFeEgsRUFBRSxHQUFHSSxFQUFFb0gsRUFBRXhILEVBQUUsR0FBRyxJQUFJMGEsRUFBRWxULEVBQUV4SCxFQUFFLEdBQU8yYSxFQUFFbFQsR0FBR2lULEVBQUU5WixHQUFHUixFQUFFc2EsSUFBSVQsRUFBRSxHQUFHLFdBQVcsV0FTOURVLEdBQXJQL1osR0FEZ2JSLEdBQXhFc2EsR0FBeEVqVCxHQUF4RTdHLEdBQXhFUixHQUF6RXNhLEdBQXZFalQsR0FEb2I3RyxHQUF4RVIsR0FBekVzYSxHQUF2RWpULEdBQXZFN0csR0FBckVSLEdBQXJFc2EsR0FEbWJqVCxHQUFwRTdHLEdBQW5FUixHQUFyRXNhLEdBQXBFalQsR0FBcEU3RyxHQUF0RVIsR0FEd2JzYSxHQUFwRWpULEdBQXBFN0csR0FBdEVSLEdBQXRFc2EsR0FBcEVqVCxHQUFyRTdHLEdBQTFFUixHQURrYnNhLEdBQXhFalQsR0FBMUU3RyxHQUF6RVIsR0FBeEVzYSxHQUF6RWpULEdBRDZhN0csR0FBekVSLEdBQXpFc2EsR0FBdkVqVCxHQUF6RTdHLEdBQXpFUixHQUF4RXNhLEdBRDhhalQsR0FBekU3RyxHQUExRVIsR0FBMUVzYSxHQUF6RWpULEdBQTFFN0csR0FBMUVSLEdBRDJhc2EsR0FBeEVqVCxHQUF6RTdHLEdBQXpFUixHQUF6RXNhLEdBQXhFalQsR0FBekU3RyxHQUQ4YVIsR0FBeEVzYSxHQUF4RWpULEVBQUU3RyxHQUFHK1osR0FBRyxFQUFFLFdBQVdBLElBQUksT0FBSUEsRUFBRUQsR0FBR3RhLEVBQUVxSCxHQUFHN0csRUFBRVIsSUFBSTZaLEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFdmEsR0FBR1EsRUFBRThaLEdBQUdqVCxFQUFFN0csSUFBSXFaLEVBQUUsR0FBRyxVQUFVLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUNuZkEsRUFBRS9aLEdBQUc2RyxFQUFFckgsR0FBR3NhLEVBQUVqVCxJQUFJd1MsRUFBRSxHQUFHLFdBQVcsYUFBbUIsR0FBRyxXQUFXVSxJQUFJLE9BQUlBLEVBQUVsVCxHQUFHaVQsRUFBRTlaLEdBQUdSLEVBQUVzYSxJQUFJVCxFQUFFLEdBQUcsV0FBVyxhQUFtQixFQUFFLFdBQVdVLElBQUksT0FBSUEsRUFBRUQsR0FBR3RhLEVBQUVxSCxHQUFHN0csRUFBRVIsSUFBSTZaLEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFdmEsR0FBR1EsRUFBRThaLEdBQUdqVCxFQUFFN0csSUFBSXFaLEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFL1osR0FBRzZHLEVBQUVySCxHQUFHc2EsRUFBRWpULElBQUl3UyxFQUFFLEdBQUcsV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRWxULEdBQUdpVCxFQUFFOVosR0FBR1IsRUFBRXNhLElBQUlULEVBQUUsR0FBRyxXQUFXLGFBQW1CLEVBQUUsV0FBV1UsSUFBSSxPQUFJQSxFQUFFRCxHQUFHdGEsRUFBRXFILEdBQUc3RyxFQUFFUixJQUFJNlosRUFBRSxHQUFHLFdBQVcsYUFBbUIsR0FBRyxXQUMxZVUsSUFBSSxPQUFJQSxFQUFFdmEsR0FBR1EsRUFBRThaLEdBQUdqVCxFQUFFN0csSUFBSXFaLEVBQUUsSUFBSSxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFL1osR0FBRzZHLEVBQUVySCxHQUFHc2EsRUFBRWpULElBQUl3UyxFQUFFLElBQUksV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRWxULEdBQUdpVCxFQUFFOVosR0FBR1IsRUFBRXNhLElBQUlULEVBQUUsSUFBSSxXQUFXLGFBQW1CLEVBQUUsV0FBV1UsSUFBSSxPQUFJQSxFQUFFRCxHQUFHdGEsRUFBRXFILEdBQUc3RyxFQUFFUixJQUFJNlosRUFBRSxJQUFJLFdBQVcsYUFBbUIsR0FBRyxXQUFXVSxJQUFJLE9BQUlBLEVBQUV2YSxHQUFHUSxFQUFFOFosR0FBR2pULEVBQUU3RyxJQUFJcVosRUFBRSxJQUFJLFdBQVcsYUFBbUIsR0FBRyxXQUFXVSxJQUFJLE9BQUlBLEVBQUUvWixHQUFHNkcsRUFBRXJILEdBQUdzYSxFQUFFalQsSUFBSXdTLEVBQUUsSUFBSSxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFbFQsR0FBR3JILEVBQUVzYSxHQUFHOVosRUFBRVIsSUFBSTZaLEVBQUUsR0FBRyxXQUFXLGFBQ25lLEVBQUUsV0FBV1UsSUFBSSxPQUFJQSxFQUFFRCxHQUFHOVosRUFBRVIsR0FBR3FILEVBQUU3RyxJQUFJcVosRUFBRSxHQUFHLFdBQVcsYUFBbUIsRUFBRSxXQUFXVSxJQUFJLE9BQUlBLEVBQUV2YSxHQUFHcUgsRUFBRTdHLEdBQUc4WixFQUFFalQsSUFBSXdTLEVBQUUsSUFBSSxVQUFVLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFL1osR0FBRzhaLEVBQUVqVCxHQUFHckgsRUFBRXNhLElBQUlULEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFbFQsR0FBR3JILEVBQUVzYSxHQUFHOVosRUFBRVIsSUFBSTZaLEVBQUUsR0FBRyxXQUFXLGFBQW1CLEVBQUUsV0FBV1UsSUFBSSxPQUFJQSxFQUFFRCxHQUFHOVosRUFBRVIsR0FBR3FILEVBQUU3RyxJQUFJcVosRUFBRSxJQUFJLFNBQVMsYUFBbUIsRUFBRSxXQUFXVSxJQUFJLE9BQUlBLEVBQUV2YSxHQUFHcUgsRUFBRTdHLEdBQUc4WixFQUFFalQsSUFBSXdTLEVBQUUsSUFBSSxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFL1osR0FBRzhaLEVBQUVqVCxHQUFHckgsRUFBRXNhLElBQUlULEVBQUUsR0FBRyxXQUFXLGFBQ2xlLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFbFQsR0FBR3JILEVBQUVzYSxHQUFHOVosRUFBRVIsSUFBSTZaLEVBQUUsR0FBRyxVQUFVLGFBQW1CLEVBQUUsV0FBV1UsSUFBSSxPQUFJQSxFQUFFRCxHQUFHOVosRUFBRVIsR0FBR3FILEVBQUU3RyxJQUFJcVosRUFBRSxJQUFJLFdBQVcsYUFBbUIsRUFBRSxXQUFXVSxJQUFJLE9BQUlBLEVBQUV2YSxHQUFHcUgsRUFBRTdHLEdBQUc4WixFQUFFalQsSUFBSXdTLEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFL1osR0FBRzhaLEVBQUVqVCxHQUFHckgsRUFBRXNhLElBQUlULEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFbFQsR0FBR3JILEVBQUVzYSxHQUFHOVosRUFBRVIsSUFBSTZaLEVBQUUsSUFBSSxXQUFXLGFBQW1CLEVBQUUsV0FBV1UsSUFBSSxPQUFJQSxFQUFFRCxHQUFHOVosRUFBRVIsR0FBR3FILEVBQUU3RyxJQUFJcVosRUFBRSxHQUFHLFdBQVcsYUFBbUIsRUFBRSxXQUFXVSxJQUFJLE9BQUlBLEVBQUV2YSxHQUFHcUgsRUFBRTdHLEdBQUc4WixFQUFFalQsSUFBSXdTLEVBQUUsR0FBRyxXQUFXLGFBQ3ZlLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFL1osR0FBRzhaLEVBQUVqVCxHQUFHckgsRUFBRXNhLElBQUlULEVBQUUsSUFBSSxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFbFQsR0FBRzdHLEVBQUVSLEVBQUVzYSxHQUFHVCxFQUFFLEdBQUcsV0FBVyxhQUFtQixFQUFFLFdBQVdVLElBQUksT0FBSUEsRUFBRUQsR0FBR2pULEVBQUU3RyxFQUFFUixHQUFHNlosRUFBRSxHQUFHLFdBQVcsYUFBbUIsR0FBRyxXQUFXVSxJQUFJLE9BQUlBLEVBQUV2YSxHQUFHc2EsRUFBRWpULEVBQUU3RyxHQUFHcVosRUFBRSxJQUFJLFdBQVcsYUFBbUIsR0FBRyxXQUFXVSxJQUFJLE9BQUlBLEVBQUUvWixHQUFHUixFQUFFc2EsRUFBRWpULEdBQUd3UyxFQUFFLElBQUksV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksTUFBR0EsRUFBRWxULEdBQUc3RyxFQUFFUixFQUFFc2EsR0FBR1QsRUFBRSxHQUFHLFdBQVcsYUFBbUIsRUFBRSxXQUFXVSxJQUFJLE9BQUlBLEVBQUVELEdBQUdqVCxFQUFFN0csRUFBRVIsR0FBRzZaLEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FDbGZVLElBQUksT0FBSUEsRUFBRXZhLEdBQUdzYSxFQUFFalQsRUFBRTdHLEdBQUdxWixFQUFFLEdBQUcsV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRS9aLEdBQUdSLEVBQUVzYSxFQUFFalQsR0FBR3dTLEVBQUUsSUFBSSxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxNQUFHQSxFQUFFbFQsR0FBRzdHLEVBQUVSLEVBQUVzYSxHQUFHVCxFQUFFLElBQUksVUFBVSxhQUFtQixFQUFFLFdBQVdVLElBQUksT0FBSUEsRUFBRUQsR0FBR2pULEVBQUU3RyxFQUFFUixHQUFHNlosRUFBRSxHQUFHLFdBQVcsYUFBbUIsR0FBRyxXQUFXVSxJQUFJLE9BQUlBLEVBQUV2YSxHQUFHc2EsRUFBRWpULEVBQUU3RyxHQUFHcVosRUFBRSxHQUFHLFdBQVcsYUFBbUIsR0FBRyxXQUFXVSxJQUFJLE9BQUlBLEVBQUUvWixHQUFHUixFQUFFc2EsRUFBRWpULEdBQUd3UyxFQUFFLEdBQUcsU0FBUyxhQUFtQixHQUFHLFdBQVdVLElBQUksTUFBR0EsRUFBRWxULEdBQUc3RyxFQUFFUixFQUFFc2EsR0FBR1QsRUFBRSxHQUFHLFdBQVcsYUFBbUIsRUFBRSxXQUFXVSxJQUFJLE9BQUlBLEVBQUVELEdBQUdqVCxFQUFFN0csRUFBRVIsR0FBRzZaLEVBQUUsSUFDcGYsV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRXZhLEdBQUdzYSxFQUFFalQsRUFBRTdHLEdBQUdxWixFQUFFLElBQUksVUFBVSxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRS9aLEdBQUdSLEVBQUVzYSxFQUFFalQsR0FBR3dTLEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxNQUFHQSxFQUFFbFQsR0FBR3JILEdBQUdRLEdBQUc4WixJQUFJVCxFQUFFLEdBQUcsV0FBVyxhQUFtQixFQUFFLFdBQVdVLElBQUksT0FBSUEsRUFBRUQsR0FBRzlaLEdBQUc2RyxHQUFHckgsSUFBSTZaLEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFdmEsR0FBR3FILEdBQUdpVCxHQUFHOVosSUFBSXFaLEVBQUUsSUFBSSxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFL1osR0FBRzhaLEdBQUd0YSxHQUFHcUgsSUFBSXdTLEVBQUUsR0FBRyxXQUFXLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxPQUFJQSxFQUFFbFQsR0FBR3JILEdBQUdRLEdBQUc4WixJQUFJVCxFQUFFLElBQUksV0FDbGYsYUFBbUIsRUFBRSxXQUFXVSxJQUFJLE9BQUlBLEVBQUVELEdBQUc5WixHQUFHNkcsR0FBR3JILElBQUk2WixFQUFFLEdBQUcsV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRXZhLEdBQUdxSCxHQUFHaVQsR0FBRzlaLElBQUlxWixFQUFFLElBQUksV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRS9aLEdBQUc4WixHQUFHdGEsR0FBR3FILElBQUl3UyxFQUFFLEdBQUcsV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRWxULEdBQUdySCxHQUFHUSxHQUFHOFosSUFBSVQsRUFBRSxHQUFHLFdBQVcsYUFBbUIsRUFBRSxXQUFXVSxJQUFJLE9BQUlBLEVBQUVELEdBQUc5WixHQUFHNkcsR0FBR3JILElBQUk2WixFQUFFLElBQUksV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRXZhLEdBQUdxSCxHQUFHaVQsR0FBRzlaLElBQUlxWixFQUFFLEdBQUcsV0FBVyxhQUFtQixHQUFHLFdBQVdVLElBQUksT0FBSUEsRUFBRS9aLEdBQUc4WixHQUFHdGEsR0FBR3FILElBQUl3UyxFQUFFLElBQUksV0FDOWUsYUFBbUIsR0FBRyxXQUFXVSxJQUFJLE9BQXNIRCxHQUF4RWpULEVBQUU3RyxJQUE1QytaLEVBQUVsVCxHQUFHckgsR0FBR1EsR0FBRzhaLElBQUlULEVBQUUsR0FBRyxXQUFXLGFBQW1CLEVBQUUsV0FBV1UsSUFBSSxPQUFJQSxFQUFFRCxHQUFHOVosR0FBRzZHLEdBQUdySCxJQUFJNlosRUFBRSxJQUFJLFdBQVcsYUFBbUIsR0FBRyxXQUFXVSxJQUFJLE9BQTZDdmEsRUFBRXNhLElBQTNDQyxFQUFFdmEsR0FBR3FILEdBQUdpVCxHQUFHOVosSUFBSXFaLEVBQUUsR0FBRyxVQUFVLGFBQW1CLEdBQUcsV0FBV1UsSUFBSSxNQUFlbFQsSUFBSXdTLEVBQUUsR0FBRyxXQUFXLFdBQVd6UyxFQUFFeEgsRUFBRSxHQUFHd0gsRUFBRXhILEVBQUUsR0FBR3lILEVBQUUsV0FBV0QsRUFBRXhILEVBQUUsR0FBR3dILEVBQUV4SCxFQUFFLElBQUlJLEdBQUd1YSxHQUFHLEdBQUcsV0FBV0EsSUFBSSxLQUFLLFdBQVduVCxFQUFFeEgsRUFBRSxHQUFHd0gsRUFBRXhILEVBQUUsR0FBR0ksRUFBRSxXQUFXb0gsRUFBRXhILEVBQUUsR0FBR3dILEVBQUV4SCxFQUFFLEdBQUcwYSxFQUFFLFVBQVcsQ0FFMUksU0FBU2dJLEdBQUVsYixFQUFFQyxHQUFHdkgsS0FBS3lhLEVBQUVsVCxFQUFFLElBQUksSUFBSTdHLEVBQUUsR0FBR3FaLEdBQUUsRUFBRzdaLEVBQUVvSCxFQUFFN0csT0FBTyxFQUFFLEdBQUdQLEVBQUVBLElBQUksQ0FBQyxJQUFJc2EsRUFBTyxFQUFMbFQsRUFBRXBILEdBQUs2WixHQUFHUyxHQUFHalQsSUFBSTdHLEVBQUVSLEdBQUdzYSxFQUFFVCxHQUFFLEVBQUksQ0FBQy9aLEtBQUtGLEVBQUVZLENBQUUsRUF2Q29RaUgsR0FBRStZLEdBQUVuYSxXQUFZMmlCLEdBQUcsU0FBUzVoQixHQUFHdEgsS0FBSzZsQixFQUFFdmUsQ0FBRSxFQUNwc0JLLEdBQUV5UyxHQUFHLFNBQVM5UyxFQUFFQyxFQUFFN0csRUFBRXFaLEdBQUcsR0FBRy9aLEtBQUtGLEVBQUUsTUFBTTZCLE1BQU0sMERBQTBEM0IsS0FBS3lsQixFQUFFLFlBQVluZSxHQUFHQyxFQUFFQSxFQUFFQSxFQUFFZ3FCLGNBQWMsTUFBTXZ4QixLQUFLeWxCLEVBQUVuZSxFQUFFdEgsS0FBSzJoQixFQUFFLEdBQUczaEIsS0FBSzZpQixFQUFFLEVBQUU3aUIsS0FBS2drQixHQUFFLEVBQUdoa0IsS0FBS3lhLEdBQUUsRUFBR3phLEtBQUtGLEVBQUVFLEtBQUttRCxFQUFFbkQsS0FBS21ELEVBQUVyRCxJQUFJNmtCLEdBQUc3a0IsSUFBSUUsS0FBS2toQixFQUFFbGhCLEtBQUttRCxFQUFFMGhCLEdBQUc3a0IsS0FBS21ELEdBQUcwaEIsR0FBR0YsSUFBSTNrQixLQUFLRixFQUFFd3NCLG1CQUFtQnJTLEdBQUVqYSxLQUFLNm5CLEdBQUc3bkIsTUFBTSxJQUFJQSxLQUFLMmxCLEdBQUUsRUFBRzNsQixLQUFLRixFQUFFd1YsS0FBSy9OLEVBQUV2RSxPQUFPc0UsSUFBRyxHQUFJdEgsS0FBSzJsQixHQUFFLENBQUcsQ0FBQyxNQUFNbkwsR0FBYyxZQUFYc1QsR0FBRzl0QixLQUFLd2EsRUFBUyxDQUFpQyxHQUFoQ2xULEVBQUU1RyxHQUFHLEdBQUdBLEVBQUUsSUFBSXlJLElBQUluSixLQUFLNnNCLFNBQVk5UyxFQUFFLEdBQUcxVCxPQUFPbXJCLGVBQWV6WCxLQUFLMVQsT0FBT0UsVUFBVSxJQUFJLElBQUlyRyxLQUFLNlosRUFBRXJaLEVBQUVtSixJQUFJM0osRUFBRTZaLEVBQUU3WixRQUFTLElBQUcsbUJBQ25mNlosRUFBRXRTLE1BQU0sbUJBQW9Cc1MsRUFBRXhRLElBQW1ELE1BQU01SCxNQUFNLHVDQUF1Q3FCLE9BQU8rVyxJQUF6RyxJQUFJLE1BQU1TLEtBQUtULEVBQUV0UyxPQUFPL0csRUFBRW1KLElBQUkyUSxFQUFFVCxFQUFFeFEsSUFBSWlSLEdBQXNFLENBQUNULEVBQUV0WSxNQUFNcUosS0FBS3BLLEVBQUUrRyxRQUFRbVEsTUFBSzRDLEdBQUcsZ0JBQWdCQSxFQUFFOEIsZ0JBQWVwYyxFQUFFb1osR0FBRW1ZLFVBQVVucUIsYUFBYWdTLEdBQUVtWSxXQUFXLEdBQUd4VyxHQUFHNFMsR0FBR3RtQixLQUFLd1MsR0FBRzdaLEdBQUdRLEVBQUVtSixJQUFJLGVBQWUsbURBQW1ELElBQUksTUFBTzJRLEVBQUVDLEtBQUsvWixFQUFFVixLQUFLRixFQUFFMHRCLGlCQUFpQmhULEVBQUVDLEdBQUd6YSxLQUFLK2xCLElBQUkvbEIsS0FBS0YsRUFBRW9zQixhQUFhbHNCLEtBQUsrbEIsR0FBRyxvQkFBb0IvbEIsS0FBS0YsR0FBR0UsS0FBS0YsRUFBRTR4QixrQkFBa0IxeEIsS0FBSzZsQixJQUFJN2xCLEtBQUtGLEVBQUU0eEIsZ0JBQ3JmMXhCLEtBQUs2bEIsR0FBRyxJQUFJdUksR0FBR3B1QixNQUFNLEVBQUVBLEtBQUsrZ0IsS0FBSy9nQixLQUFLMGxCLEVBQWtLLFNBQVlwZSxHQUFHLE9BQU80VSxJQUFHLGlCQUFrQjVVLEVBQUVxcUIsY0FBUyxJQUFTcnFCLEVBQUVza0IsU0FBUyxDQUExT2dHLENBQUc1eEIsS0FBS0YsS0FBS0UsS0FBS0YsRUFBRTZ4QixRQUFRM3hCLEtBQUsrZ0IsRUFBRS9nQixLQUFLRixFQUFFOHJCLFVBQVUzUixHQUFFamEsS0FBS21jLEdBQUduYyxPQUFPQSxLQUFLaWQsRUFBRXlGLEdBQUcxaUIsS0FBS21jLEdBQUduYyxLQUFLK2dCLEVBQUUvZ0IsT0FBT0EsS0FBSzJhLEdBQUUsRUFBRzNhLEtBQUtGLEVBQUU4c0IsS0FBS3RsQixHQUFHdEgsS0FBSzJhLEdBQUUsQ0FBRyxDQUFDLE1BQU1ILEdBQUdzVCxHQUFHOXRCLEtBQUt3YSxFQUFHLENBQUMsRUFBNkU3UyxHQUFFd1UsR0FBRyxnQkFBVyxJQUFvQjlDLElBQU1yWixLQUFLRixJQUFJRSxLQUFLMmhCLEVBQUUsbUJBQW1CM2hCLEtBQUsrZ0IsRUFBRSxlQUFlL2dCLEtBQUs2aUIsRUFBRSxFQUFFM0IsR0FBRWxoQixLQUFLLFdBQVdBLEtBQUtzbkIsTUFBTSxHQUFJLEVBQ3JXM2YsR0FBRTJmLE1BQU0sU0FBU2hnQixHQUFHdEgsS0FBS0YsR0FBR0UsS0FBS3lhLElBQUl6YSxLQUFLeWEsR0FBRSxFQUFHemEsS0FBS3NaLEdBQUUsRUFBR3RaLEtBQUtGLEVBQUV3bkIsUUFBUXRuQixLQUFLc1osR0FBRSxFQUFHdFosS0FBSzZpQixFQUFFdmIsR0FBRyxFQUFFNFosR0FBRWxoQixLQUFLLFlBQVlraEIsR0FBRWxoQixLQUFLLFNBQVNndUIsR0FBR2h1QixNQUFPLEVBQUUySCxHQUFFb1QsRUFBRSxXQUFXL2EsS0FBS0YsSUFBSUUsS0FBS3lhLElBQUl6YSxLQUFLeWEsR0FBRSxFQUFHemEsS0FBS3NaLEdBQUUsRUFBR3RaLEtBQUtGLEVBQUV3bkIsUUFBUXRuQixLQUFLc1osR0FBRSxHQUFJMFUsR0FBR2h1QixNQUFLLElBQUswZ0IsR0FBRXBHLEVBQUVTLEVBQUUxSyxLQUFLclEsS0FBTSxFQUFFMkgsR0FBRWtnQixHQUFHLFdBQVc3bkIsS0FBSzRhLElBQUk1YSxLQUFLMmxCLEdBQUczbEIsS0FBSzJhLEdBQUczYSxLQUFLc1osRUFBRTJVLEdBQUdqdUIsTUFBTUEsS0FBSzZ4QixLQUFNLEVBQUVscUIsR0FBRWtxQixHQUFHLFdBQVc1RCxHQUFHanVCLEtBQU0sRUFFckYySCxHQUFFcW9CLFNBQVMsV0FBVyxRQUFTaHdCLEtBQUtGLENBQUMsRUFBNEM2SCxHQUFFZ1MsR0FBRyxXQUFXLElBQUksT0FBTyxFQUFFeU4sR0FBRXBuQixNQUFNQSxLQUFLRixFQUFFbXNCLFFBQVEsQ0FBQyxDQUFDLE1BQU0za0IsR0FBRyxPQUFRLENBQUMsQ0FBQyxFQUMzZEssR0FBRWdoQixHQUFHLFdBQVcsSUFBSSxPQUFPM29CLEtBQUtGLEVBQUVFLEtBQUtGLEVBQUVxc0IsYUFBYSxFQUFFLENBQUMsTUFBTTdrQixHQUFHLE1BQU8sRUFBRSxDQUFDLEVBQUVLLEdBQUVrWSxHQUFHLFNBQVN2WSxHQUFHLEdBQUd0SCxLQUFLRixFQUFFLENBQUMsSUFBSXlILEVBQUV2SCxLQUFLRixFQUFFcXNCLGFBQTJELE9BQTlDN2tCLEdBQUcsR0FBR0MsRUFBRTRTLFFBQVE3UyxLQUFLQyxFQUFFQSxFQUFFNlEsVUFBVTlRLEVBQUU3RyxTQUFnQml0QixHQUFHbm1CLEVBQUUsQ0FBQyxFQUNzR0ksR0FBRStXLEdBQUcsV0FBVyxPQUFPMWUsS0FBSzZpQixDQUFDLEVBQUVsYixHQUFFNlgsR0FBRyxXQUFXLE1BQU8saUJBQWtCeGYsS0FBSzJoQixFQUFFM2hCLEtBQUsyaEIsRUFBRTNlLE9BQU9oRCxLQUFLMmhCLEVBQUUsR0FFdUdoYSxHQUFFK21CLEdBQUdub0IsV0FDbmZxaEIsR0FBRyxFQUFFamdCLEdBQUV5ZixFQUFFLEVBRVh6ZixHQUFFd1gsR0FBRyxTQUFTN1gsR0FBRyxHQUFHdEgsS0FBSzZpQixFQUFFLEdBQUc3aUIsS0FBSzZpQixFQUFFLEtBQUssR0FBRzdpQixLQUFLb25CLEdBQUcsSUFBSTlmLEVBQUUsQ0FBQ3RILEtBQUtxbEIsRUFBRTVMLEtBQUt1USxNQUFNLElBQUl2USxLQUFLQyxVQUFVcFMsRUFBRXRILEtBQUtxbEIsSUFBSSxNQUFNbmxCLEVBQUUsSUFBSWtsQixHQUFHcGxCLEtBQUtBLEtBQUtzWixFQUFFaFMsR0FBRyxJQUFJa1QsRUFBRXhhLEtBQUs0YSxFQUFvRixHQUFsRjVhLEtBQUtzbEIsSUFBSTlLLEdBQUdBLEVBQUU0RSxHQUFHNUUsR0FBRytFLEdBQUcvRSxFQUFFeGEsS0FBS3NsQixJQUFJOUssRUFBRXhhLEtBQUtzbEIsR0FBRyxPQUFPdGxCLEtBQUs2YSxHQUFHN2EsS0FBS2tnQixJQUFJaGdCLEVBQUV1bEIsRUFBRWpMLEVBQUVBLEVBQUUsTUFBU3hhLEtBQUswZ0IsRUFBRXBaLEVBQUUsQ0FBUyxJQUFSLElBQUlDLEVBQUUsRUFBVTdHLEVBQUUsRUFBRUEsRUFBRVYsS0FBSzJoQixFQUFFbGhCLE9BQU9DLElBQUksQ0FBSSxJQUFJcVosRUFBRS9aLEtBQUsyaEIsRUFBRWpoQixHQUErRixRQUFHLEtBQWhDcVosRUFBNUQsYUFBYUEsRUFBRTdPLEtBQXVCLGlCQUFqQjZPLEVBQUVBLEVBQUU3TyxJQUFJNG1CLFVBQWlDL1gsRUFBRXRaLFlBQWlCLEdBQXNCLE1BQVcsR0FBRyxNQUFSOEcsR0FBR3dTLEdBQVksQ0FBQ3hTLEVBQUU3RyxFQUFFLE1BQU00RyxDQUFDLENBQUMsR0FBRyxPQUFPQyxHQUFHN0csSUFBSVYsS0FBSzJoQixFQUFFbGhCLE9BQU8sRUFBRSxDQUFDOEcsRUFBRTdHLEVBQUUsRUFBRSxNQUFNNEcsQ0FBQyxDQUFDLENBQUNDLEVBQUUsR0FBSSxNQUFNQSxFQUMzZixJQUFJQSxFQUFFa29CLEdBQUd6dkIsS0FBS0UsRUFBRXFILEdBQWV3ZSxHQUFacmxCLEVBQUVpbEIsR0FBRTNsQixLQUFLeWxCLEdBQU8sTUFBTW5lLEdBQUd5ZSxHQUFFcmxCLEVBQUUsT0FBTyxJQUFJVixLQUFLZ2tCLEdBQUcrQixHQUFFcmxCLEVBQUUsb0JBQW9CVixLQUFLZ2tCLEdBQUdvTCxHQUFHcHZCLEtBQUtVLEdBQUc4WixJQUFJeGEsS0FBS2tnQixFQUFFM1ksRUFBRSxXQUFXZ2pCLG1CQUFtQnZuQixPQUFPc3JCLEdBQUc5VCxLQUFLLElBQUlqVCxFQUFFdkgsS0FBSzZhLEdBQUcwVCxHQUFHN3RCLEVBQUVWLEtBQUs2YSxFQUFFTCxJQUFJd04sR0FBR2hvQixLQUFLUSxFQUFFTixHQUFHRixLQUFLb2dCLElBQUkyRixHQUFFcmxCLEVBQUUsT0FBTyxRQUFRVixLQUFLMGdCLEdBQUdxRixHQUFFcmxCLEVBQUUsT0FBTzZHLEdBQUd3ZSxHQUFFcmxCLEVBQUUsTUFBTSxRQUFRUixFQUFFcVosSUFBRyxFQUFHNk0sR0FBR2xtQixFQUFFUSxFQUFFLE9BQU8wbEIsR0FBR2xtQixFQUFFUSxFQUFFNkcsR0FBR3ZILEtBQUtvbkIsRUFBRSxDQUFFLE9BQU8sR0FBR3BuQixLQUFLb25CLElBQUk5ZixFQUFFa29CLEdBQUd4dkIsS0FBS3NILEdBQUcsR0FBR3RILEtBQUsyaEIsRUFBRWxoQixRQUFRMHFCLEdBQUduckIsS0FBS1EsSUFBSWd2QixHQUFHeHZCLE1BQU8sRUFHeFMySCxHQUFFbWdCLEdBQUcsV0FBZ0MsR0FBckI5bkIsS0FBS21ELEVBQUUsS0FBSzJzQixHQUFHOXZCLE1BQVNBLEtBQUt3WixNQUFNeFosS0FBSzZsQixHQUFHLE1BQU03bEIsS0FBS0YsR0FBRyxHQUFHRSxLQUFLZ2hCLEdBQUcsQ0FBQyxJQUFJMVosRUFBRSxFQUFFdEgsS0FBS2doQixFQUFFaGhCLEtBQUtzWixFQUFFbFUsS0FBSywrQkFBK0JrQyxHQUFHdEgsS0FBSytnQixFQUFFb0QsR0FBR2xLLEdBQUVqYSxLQUFLc2hCLEdBQUd0aEIsTUFBTXNILEVBQUcsQ0FBQyxFQUFFSyxHQUFFMlosR0FBRyxXQUFXdGhCLEtBQUsrZ0IsSUFBSS9nQixLQUFLK2dCLEVBQUUsS0FBSy9nQixLQUFLc1osRUFBRWxVLEtBQUssaUNBQWlDcEYsS0FBS3NaLEVBQUVsVSxLQUFLLHdEQUF3RHBGLEtBQUsybEIsR0FBRSxFQUFHM2xCLEtBQUs2bEIsR0FBRSxFQUFHN0IsR0FBRSxJQUFJeUQsR0FBR3puQixNQUFNOHZCLEdBQUc5dkIsTUFBTyxFQUNyRjJILEdBQUV3WixHQUFHLFdBQVcsTUFBTW5oQixLQUFLMmEsSUFBSTNhLEtBQUsyYSxFQUFFLEtBQUs4TSxHQUFHem5CLE1BQU0wbkIsR0FBRzFuQixNQUFNZ2tCLEdBQUUsSUFBSyxFQUUzRnJjLEdBQUVpYSxHQUFHLFNBQVN0YSxHQUFHQSxHQUFHdEgsS0FBS3NaLEVBQUVsVSxLQUFLLGtDQUFrQzRlLEdBQUUsS0FBS2hrQixLQUFLc1osRUFBRWxVLEtBQUssNkJBQTZCNGUsR0FBRSxHQUFJLEVBRXpUcmMsR0FBRXFvQixTQUFTLFdBQVcsUUFBU2h3QixLQUFLeWEsR0FBR3phLEtBQUt5YSxFQUFFdVYsU0FBU2h3QixLQUFLLEdBQWlCMkgsR0FBRXlvQixHQUFHN3BCLFdBQVlvVyxHQUFHLFdBQVcsRUFBRWhWLEdBQUUrVSxHQUFHLFdBQVcsRUFBRS9VLEdBQUVvVSxHQUFHLFdBQVcsRUFBRXBVLEdBQUU2VSxHQUFHLFdBQVcsRUFBRTdVLEdBQUVxb0IsU0FBUyxXQUFXLE9BQU8sQ0FBRSxFQUFFcm9CLEdBQUVpWSxHQUFHLFdBQVcsRUFBcUd5USxHQUFHOXBCLFVBQVV6RyxFQUFFLFNBQVN3SCxFQUFFQyxHQUFHLE9BQU8sSUFBSStvQixHQUFFaHBCLEVBQUVDLEVBQUUsRUFFM1M4UyxHQUFFaVcsR0FBRXZQLElBQUd1UCxHQUFFL3BCLFVBQVVzYyxFQUFFLFdBQVc3aUIsS0FBS0YsRUFBRTJhLEVBQUV6YSxLQUFLMmhCLEVBQUUzaEIsS0FBS2lkLElBQUlqZCxLQUFLRixFQUFFbWhCLEdBQUUsR0FBSSxJQUFJM1osRUFBRXRILEtBQUtGLEVBQUV5SCxFQUFFdkgsS0FBS3NaLEVBQUU1WSxFQUFFVixLQUFLeWEsUUFBRyxFQUFPdUosR0FBRSxHQUFHMWMsRUFBRXNlLEVBQUVyZSxFQUFFRCxFQUFFNlQsR0FBR3phLEdBQUcsQ0FBQyxFQUFFNEcsRUFBRXFlLEVBQUVyZSxFQUFFaVMsR0FBR2pTLEVBQUVtZSxFQUFFd0MsR0FBRzNnQixFQUFFLEtBQUtBLEVBQUVzZSxHQUFHd0MsR0FBRzlnQixFQUFHLEVBQUVncEIsR0FBRS9wQixVQUFVbVMsTUFBTSxXQUFXMlAsR0FBR3JvQixLQUFLRixFQUFHLEVBQ3Bid3dCLEdBQUUvcEIsVUFBVXBELEVBQUUsU0FBU21FLEdBQUcsSUFBSUMsRUFBRXZILEtBQUtGLEVBQUUsR0FBRyxpQkFBa0J3SCxFQUFFLENBQUMsSUFBSTVHLEVBQUUsQ0FBQyxFQUFFQSxFQUFFb3hCLFNBQVN4cUIsRUFBRUEsRUFBRTVHLENBQUUsTUFBTVYsS0FBSzJhLEtBQUlqYSxFQUFFLENBQUMsR0FBSW94QixTQUFTeFEsR0FBR2hhLEdBQUdBLEVBQUU1RyxHQUFHNkcsRUFBRW9hLEVBQUVuZixLQUFLLElBaENDLE1BQU0sV0FBQW1CLENBQVkyRCxFQUFFQyxHQUFHdkgsS0FBS0YsRUFBRXdILEVBQUV0SCxLQUFLa0wsSUFBSTNELENBQUUsR0FnQ3JDQSxFQUFFb1osS0FBS3JaLElBQUksR0FBR0MsRUFBRTZmLEdBQUdnQixHQUFHN2dCLEVBQUcsRUFBRStvQixHQUFFL3BCLFVBQVV3VSxFQUFFLFdBQVcvYSxLQUFLRixFQUFFMmEsRUFBRSxZQUFZemEsS0FBSzJoQixFQUFFMEcsR0FBR3JvQixLQUFLRixVQUFVRSxLQUFLRixFQUFFd3dCLEdBQUVoVyxFQUFFUyxFQUFFMUssS0FBS3JRLEtBQU0sRUFDcUJxYSxHQUFFMFcsR0FBRzdMLElBQStDN0ssR0FBRStXLEdBQUdqTSxJQUE0QjlLLEdBQUV5VyxHQUFFVixJQUFJVSxHQUFFdnFCLFVBQVVvVyxHQUFHLFdBQVd1RSxHQUFFbGhCLEtBQUtGLEVBQUUsSUFBSyxFQUFFZ3hCLEdBQUV2cUIsVUFBVW1XLEdBQUcsU0FBU3BWLEdBQUc0WixHQUFFbGhCLEtBQUtGLEVBQUUsSUFBSWl4QixHQUFHenBCLEdBQUksRUFDeGR3cEIsR0FBRXZxQixVQUFVd1YsR0FBRyxTQUFTelUsR0FBRzRaLEdBQUVsaEIsS0FBS0YsRUFBRSxJQUFJc3hCLEdBQU0sRUFBRU4sR0FBRXZxQixVQUFVaVcsR0FBRyxXQUFXMEUsR0FBRWxoQixLQUFLRixFQUFFLElBQUssRUFBK0p1YSxHQUFFMkcsSUFBL0osV0FBY2hoQixLQUFLcXhCLFdBQVcsQ0FBRSxJQUFxSXJRLEdBQUV6YSxVQUFVc2IsTUFBTSxXQUFXN2hCLEtBQUtGLEVBQUUsR0FBRyxXQUFXRSxLQUFLRixFQUFFLEdBQUcsV0FBV0UsS0FBS0YsRUFBRSxHQUFHLFdBQVdFLEtBQUtGLEVBQUUsR0FBRyxVQUFVRSxLQUFLUSxFQUFFUixLQUFLeWEsRUFBRSxDQUFFLEVBVy9YdUcsR0FBRXphLFVBQVVvYixFQUFFLFNBQVNyYSxFQUFFQyxRQUFHLElBQVNBLElBQUlBLEVBQUVELEVBQUU3RyxRQUFRLElBQUksSUFBSUMsRUFBRTZHLEVBQUV2SCxLQUFLcXhCLFVBQVV0WCxFQUFFL1osS0FBSzZpQixFQUFFM2lCLEVBQUVGLEtBQUt5YSxFQUFFRCxFQUFFLEVBQUVBLEVBQUVqVCxHQUFHLENBQUMsR0FBRyxHQUFHckgsRUFBRSxLQUFLc2EsR0FBRzlaLEdBQUc0d0IsR0FBR3R4QixLQUFLc0gsRUFBRWtULEdBQUdBLEdBQUd4YSxLQUFLcXhCLFVBQVUsR0FBRyxpQkFBa0IvcEIsR0FBRSxLQUFLa1QsRUFBRWpULEdBQUksR0FBR3dTLEVBQUU3WixLQUFLb0gsRUFBRTNHLFdBQVc2WixLQUFLdGEsR0FBR0YsS0FBS3F4QixVQUFVLENBQUNDLEdBQUd0eEIsS0FBSytaLEdBQUc3WixFQUFFLEVBQUUsS0FBSyxPQUFPLEtBQUtzYSxFQUFFalQsR0FBRyxHQUFHd1MsRUFBRTdaLEtBQUtvSCxFQUFFa1QsS0FBS3RhLEdBQUdGLEtBQUtxeEIsVUFBVSxDQUFDQyxHQUFHdHhCLEtBQUsrWixHQUFHN1osRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDRixLQUFLeWEsRUFBRXZhLEVBQUVGLEtBQUtRLEdBQUcrRyxDQUFFLEVBQ2pXeVosR0FBRXphLFVBQVUrUyxFQUFFLFdBQVcsSUFBSWhTLEVBQUU3RixPQUFPLEdBQUd6QixLQUFLeWEsRUFBRXphLEtBQUtxeEIsVUFBVSxFQUFFcnhCLEtBQUtxeEIsV0FBV3J4QixLQUFLeWEsR0FBR25ULEVBQUUsR0FBRyxJQUFJLElBQUksSUFBSUMsRUFBRSxFQUFFQSxFQUFFRCxFQUFFN0csT0FBTyxJQUFJOEcsRUFBRUQsRUFBRUMsR0FBRyxFQUFFLElBQUk3RyxFQUFFLEVBQUVWLEtBQUtRLEVBQUUsSUFBSStHLEVBQUVELEVBQUU3RyxPQUFPLEVBQUU4RyxFQUFFRCxFQUFFN0csU0FBUzhHLEVBQUVELEVBQUVDLEdBQUssSUFBRjdHLEVBQU1BLEdBQUcsSUFBMEIsSUFBdEJWLEtBQUsyaEIsRUFBRXJhLEdBQUdBLEVBQUU3RixNQUFNLElBQVE4RixFQUFFN0csRUFBRSxFQUFFLEVBQUU2RyxJQUFJQSxFQUFFLElBQUksSUFBSXdTLEVBQUUsRUFBRSxHQUFHQSxFQUFFQSxHQUFHLEVBQUV6UyxFQUFFNUcsS0FBS1YsS0FBS0YsRUFBRXlILEtBQUt3UyxFQUFFLElBQUksT0FBT3pTLENBQUMsRUFBbUgsSUFBSXdULEdBQUcsQ0FBQyxFQUFFLFNBQVNpWCxHQUFHenFCLEdBQUcsT0FBUSxLQUFLQSxHQUFHLElBQUlBLEVBbkZpVCxTQUFZQSxFQUFFQyxHQUFHLElBQUk3RyxFQUFFb2EsR0FBRyxPQUFPelUsT0FBT0UsVUFBVXlVLGVBQWUzSyxLQUFLM1AsRUFBRTRHLEdBQUc1RyxFQUFFNEcsR0FBRzVHLEVBQUU0RyxHQW1GNVgsU0FBU0MsR0FBRyxPQUFPLElBQUlpYixHQUFFLENBQUcsRUFBRmpiLEdBQUssRUFBRUEsR0FBRyxFQUFFLEVBQUUsQ0FuRnVWQSxDQUFFRCxFQUFFLENBbUZ4WXNnQixDQUFHdGdCLEdBQTZDLElBQUlrYixHQUFFLENBQUcsRUFBRmxiLEdBQUssRUFBRUEsR0FBRyxFQUFFLEVBQUUsQ0FBQyxTQUFTZ2UsR0FBRWhlLEdBQUcsR0FBRzJmLE1BQU0zZixLQUFLMHFCLFNBQVMxcUIsR0FBRyxPQUFPa2UsR0FBRSxHQUFHLEVBQUVsZSxFQUFFLE9BQU8rZCxHQUFFQyxJQUFHaGUsSUFBSSxJQUFJLElBQUlDLEVBQUUsR0FBRzdHLEVBQUUsRUFBRXFaLEVBQUUsRUFBRXpTLEdBQUc1RyxFQUFFcVosSUFBSXhTLEVBQUV3UyxHQUFHelMsRUFBRTVHLEVBQUUsRUFBRUEsR0FBR3V4QixHQUFHLE9BQU8sSUFBSXpQLEdBQUVqYixFQUFFLEVBQUUsQ0FFdHBCLElBQUkwcUIsR0FBRyxXQUFXek0sR0FBRXVNLEdBQUcsR0FBR0csR0FBR0gsR0FBRyxHQUFHSSxHQUFHSixHQUFHLFVBQzRWLFNBQVNuTSxHQUFFdGUsR0FBRyxHQUFHLEdBQUdBLEVBQUVtVCxFQUFFLE9BQU8sRUFBRyxJQUFJLElBQUlsVCxFQUFFLEVBQUVBLEVBQUVELEVBQUV4SCxFQUFFVyxPQUFPOEcsSUFBSSxHQUFHLEdBQUdELEVBQUV4SCxFQUFFeUgsR0FBRyxPQUFPLEVBQUcsT0FBTyxDQUFFLENBQ3BlLFNBQVM2cUIsR0FBRTlxQixHQUFHLE9BQVEsR0FBR0EsRUFBRW1ULENBQUMsQ0FBdUQsU0FBUzRLLEdBQUUvZCxHQUFHLElBQUksSUFBSUMsRUFBRUQsRUFBRXhILEVBQUVXLE9BQU9DLEVBQUUsR0FBR3FaLEVBQUUsRUFBRUEsRUFBRXhTLEVBQUV3UyxJQUFJclosRUFBRXFaLElBQUl6UyxFQUFFeEgsRUFBRWlhLEdBQUcsT0FBTyxJQUFLeUksR0FBRTloQixHQUFHNEcsRUFBRW1ULEdBQUk3TyxJQUFJc21CLEdBQUcsQ0FDbEwsU0FBU0csR0FBRy9xQixFQUFFQyxHQUFHLE9BQU9ELEVBQUVzRSxJQUFJeVosR0FBRTlkLEdBQUcsQ0FFNEMsU0FBUytxQixHQUFHaHJCLEVBQUVDLEdBQUcsTUFBVyxNQUFMRCxFQUFFQyxLQUFXRCxFQUFFQyxJQUFJRCxFQUFFQyxFQUFFLElBQUlELEVBQUVDLEtBQUssR0FBR0QsRUFBRUMsSUFBSSxNQUFNQSxHQUFJLENBQUMsU0FBU2dyQixHQUFHanJCLEVBQUVDLEdBQUd2SCxLQUFLRixFQUFFd0gsRUFBRXRILEtBQUt5YSxFQUFFbFQsQ0FBRSxDQUMvTCxTQUFTaXJCLEdBQUdsckIsRUFBRUMsR0FBRyxHQUFHcWUsR0FBRXJlLEdBQUcsTUFBTTVGLE1BQU0sb0JBQW9CLEdBQUdpa0IsR0FBRXRlLEdBQUcsT0FBTyxJQUFJaXJCLEdBQUcvTSxHQUFFQSxJQUFHLEdBQUc0TSxHQUFFOXFCLEdBQUcsT0FBT0MsRUFBRWlyQixHQUFHbk4sR0FBRS9kLEdBQUdDLEdBQUcsSUFBSWdyQixHQUFHbE4sR0FBRTlkLEVBQUV6SCxHQUFHdWxCLEdBQUU5ZCxFQUFFa1QsSUFBSSxHQUFHMlgsR0FBRTdxQixHQUFHLE9BQU9BLEVBQUVpckIsR0FBR2xyQixFQUFFK2QsR0FBRTlkLElBQUksSUFBSWdyQixHQUFHbE4sR0FBRTlkLEVBQUV6SCxHQUFHeUgsRUFBRWtULEdBQUcsR0FBRyxHQUFHblQsRUFBRXhILEVBQUVXLE9BQU8sQ0FBQyxHQUFHMnhCLEdBQUU5cUIsSUFBSThxQixHQUFFN3FCLEdBQUcsTUFBTTVGLE1BQU0sa0RBQWtELElBQUksSUFBSWpCLEVBQUV3eEIsR0FBR25ZLEVBQUV4UyxFQUFFLEdBQUd3UyxFQUFFcVksRUFBRTlxQixJQUFJNUcsRUFBRSt4QixHQUFHL3hCLEdBQUdxWixFQUFFMFksR0FBRzFZLEdBQUcsSUFBSTdaLEVBQUVzb0IsR0FBRTluQixFQUFFLEdBQUc4WixFQUFFZ08sR0FBRXpPLEVBQUUsR0FBWSxJQUFUQSxFQUFFeU8sR0FBRXpPLEVBQUUsR0FBT3JaLEVBQUU4bkIsR0FBRTluQixFQUFFLElBQUlrbEIsR0FBRTdMLElBQUksQ0FBQyxJQUFJVSxFQUFFRCxFQUFFNU8sSUFBSW1PLEdBQUcsR0FBR1UsRUFBRTJYLEVBQUU5cUIsS0FBS3BILEVBQUVBLEVBQUUwTCxJQUFJbEwsR0FBRzhaLEVBQUVDLEdBQUdWLEVBQUV5TyxHQUFFek8sRUFBRSxHQUFHclosRUFBRThuQixHQUFFOW5CLEVBQUUsRUFBRyxDQUFnQixPQUFmNkcsRUFBRThxQixHQUFHL3FCLEVBQUVwSCxFQUFFNHdCLEVBQUV2cEIsSUFBVyxJQUFJZ3JCLEdBQUdyeUIsRUFBRXFILEVBQUUsQ0FBQyxJQUFJckgsRUFBRXNsQixHQUFFLEdBQUdsZSxFQUFFOHFCLEVBQUU3cUIsSUFBSSxDQUN6WixJQUQwWjdHLEVBQUUrWSxLQUFLbVcsSUFBSSxFQUFFblcsS0FBS3VRLE1BQU0xaUIsRUFBRXNTLEtBQ2pnQnJTLEVBQUVxUyxPQUF5Q0csRUFBRSxLQUFwQ0EsRUFBRU4sS0FBS2laLEtBQUtqWixLQUFLckwsSUFBSTFOLEdBQUcrWSxLQUFLa1osTUFBYSxFQUFFbFosS0FBS21aLElBQUksRUFBRTdZLEVBQUUsSUFBZVUsR0FBWEQsRUFBRThLLEdBQUU1a0IsSUFBV293QixFQUFFdnBCLEdBQUc2cUIsR0FBRTNYLElBQUksRUFBRUEsRUFBRTJYLEVBQUU5cUIsSUFBZ0JtVCxHQUFQRCxFQUFFOEssR0FBUDVrQixHQUFHcVosSUFBYStXLEVBQUV2cEIsR0FBR3FlLEdBQUVwTCxLQUFLQSxFQUFFMFgsSUFBSWh5QixFQUFFQSxFQUFFMEwsSUFBSTRPLEdBQUdsVCxFQUFFK3FCLEdBQUcvcUIsRUFBRW1ULEVBQUcsQ0FBQyxPQUFPLElBQUk4WCxHQUFHcnlCLEVBQUVvSCxFQUFFLENBQ2xELFNBQVNtckIsR0FBR25yQixHQUFHLElBQUksSUFBSUMsRUFBRUQsRUFBRXhILEVBQUVXLE9BQU8sRUFBRUMsRUFBRSxHQUFHcVosRUFBRSxFQUFFQSxFQUFFeFMsRUFBRXdTLElBQUlyWixFQUFFcVosR0FBR3pTLEVBQUUrYixFQUFFdEosSUFBSSxFQUFFelMsRUFBRStiLEVBQUV0SixFQUFFLEtBQUssR0FBRyxPQUFPLElBQUl5SSxHQUFFOWhCLEVBQUU0RyxFQUFFbVQsRUFBRSxDQUFDLFNBQVMrTixHQUFFbGhCLEVBQUVDLEdBQUcsSUFBSTdHLEVBQUU2RyxHQUFHLEVBQUVBLEdBQUcsR0FBRyxJQUFJLElBQUl3UyxFQUFFelMsRUFBRXhILEVBQUVXLE9BQU9DLEVBQUVSLEVBQUUsR0FBR3NhLEVBQUUsRUFBRUEsRUFBRVQsRUFBRVMsSUFBSXRhLEVBQUVzYSxHQUFHLEVBQUVqVCxFQUFFRCxFQUFFK2IsRUFBRTdJLEVBQUU5WixLQUFLNkcsRUFBRUQsRUFBRStiLEVBQUU3SSxFQUFFOVosRUFBRSxJQUFJLEdBQUc2RyxFQUFFRCxFQUFFK2IsRUFBRTdJLEVBQUU5WixHQUFHLE9BQU8sSUFBSThoQixHQUFFdGlCLEVBQUVvSCxFQUFFbVQsRUFBRSxFQVJuVTlTLEdBQUU2YSxHQUFFamMsV0FBWXFULEdBQUcsV0FBVyxHQUFHd1ksR0FBRXB5QixNQUFNLE9BQVFxbEIsR0FBRXJsQixNQUFNNFosS0FBSyxJQUFJLElBQUl0UyxFQUFFLEVBQUVDLEVBQUUsRUFBRTdHLEVBQUUsRUFBRUEsRUFBRVYsS0FBS0YsRUFBRVcsT0FBT0MsSUFBSSxDQUFDLElBQUlxWixFQUFFL1osS0FBS3FqQixFQUFFM2lCLEdBQUc0RyxJQUFJLEdBQUd5UyxFQUFFQSxFQUFFa1ksR0FBR2xZLEdBQUd4UyxFQUFFQSxHQUFHMHFCLEVBQUcsQ0FBQyxPQUFPM3FCLENBQUMsRUFDNU1LLEdBQUV1UyxTQUFTLFNBQVM1UyxHQUFXLEdBQUcsR0FBWEEsRUFBRUEsR0FBRyxLQUFXLEdBQUdBLEVBQUUsTUFBTTNGLE1BQU0sdUJBQXVCMkYsR0FBRyxHQUFHc2UsR0FBRTVsQixNQUFNLE1BQU8sSUFBSSxHQUFHb3lCLEdBQUVweUIsTUFBTSxNQUFPLElBQUlxbEIsR0FBRXJsQixNQUFNa2EsU0FBUzVTLEdBQUcsSUFBSSxJQUFJQyxFQUFFK2QsR0FBRTdMLEtBQUttWixJQUFJdHJCLEVBQUUsSUFBSTVHLEVBQUVWLEtBQUsrWixFQUFFLEtBQUssQ0FBQyxJQUFJN1osRUFBRXN5QixHQUFHOXhCLEVBQUU2RyxHQUFHekgsRUFBcUIwYSxJQUFJLEdBQXZCOVosRUFBRTJ4QixHQUFHM3hCLEVBQUVSLEVBQUU0d0IsRUFBRXZwQixLQUFnQnpILEVBQUVXLE9BQU9DLEVBQUVaLEVBQUUsR0FBR1ksRUFBRStaLEtBQUssR0FBR1AsU0FBUzVTLEdBQU8sR0FBR3NlLEdBQVBsbEIsRUFBRVIsR0FBVSxPQUFPc2EsRUFBRVQsRUFBRSxLQUFLLEVBQUVTLEVBQUUvWixRQUFRK1osRUFBRSxJQUFJQSxFQUFFVCxFQUFFUyxFQUFFVCxDQUFFLENBQUMsRUFBRXBTLEdBQUUwYixFQUFFLFNBQVMvYixHQUFHLE9BQU8sRUFBRUEsRUFBRSxFQUFFQSxFQUFFdEgsS0FBS0YsRUFBRVcsT0FBT1QsS0FBS0YsRUFBRXdILEdBQUd0SCxLQUFLeWEsQ0FBQyxFQUN0VzlTLEdBQUV5cUIsRUFBRSxTQUFTOXFCLEdBQWdCLE9BQU84cUIsR0FBcEI5cUIsRUFBRStxQixHQUFHcnlCLEtBQUtzSCxLQUFnQixFQUFFc2UsR0FBRXRlLEdBQUcsRUFBRSxDQUFDLEVBQWtHSyxHQUFFc2lCLElBQUksV0FBVyxPQUFPbUksR0FBRXB5QixNQUFNcWxCLEdBQUVybEIsTUFBTUEsSUFBSSxFQUFFMkgsR0FBRWlFLElBQUksU0FBU3RFLEdBQUcsSUFBSSxJQUFJQyxFQUFFa1MsS0FBS21XLElBQUk1dkIsS0FBS0YsRUFBRVcsT0FBTzZHLEVBQUV4SCxFQUFFVyxRQUFRQyxFQUFFLEdBQUdxWixFQUFFLEVBQUU3WixFQUFFLEVBQUVBLEdBQUdxSCxFQUFFckgsSUFBSSxDQUFDLElBQUlzYSxFQUFFVCxHQUFhLE1BQVYvWixLQUFLcWpCLEVBQUVuakIsS0FBa0IsTUFBUG9ILEVBQUUrYixFQUFFbmpCLElBQVV1YSxHQUFHRCxJQUFJLEtBQUt4YSxLQUFLcWpCLEVBQUVuakIsS0FBSyxLQUFLb0gsRUFBRStiLEVBQUVuakIsS0FBSyxJQUFJNlosRUFBRVUsSUFBSSxHQUFHRCxHQUFHLE1BQU1DLEdBQUcsTUFBTS9aLEVBQUVSLEdBQUd1YSxHQUFHLEdBQUdELENBQUUsQ0FBQyxPQUFPLElBQUlnSSxHQUFFOWhCLEdBQWlCLFdBQWZBLEVBQUVBLEVBQUVELE9BQU8sSUFBZ0IsRUFBRSxFQUFFLEVBRWpla0gsR0FBRW1wQixFQUFFLFNBQVN4cEIsR0FBRyxHQUFHc2UsR0FBRTVsQixPQUFPNGxCLEdBQUV0ZSxHQUFHLE9BQU9rZSxHQUFFLEdBQUc0TSxHQUFFcHlCLE1BQU0sT0FBT295QixHQUFFOXFCLEdBQUcrZCxHQUFFcmxCLE1BQU04d0IsRUFBRXpMLEdBQUUvZCxJQUFJK2QsR0FBRUEsR0FBRXJsQixNQUFNOHdCLEVBQUV4cEIsSUFBSSxHQUFHOHFCLEdBQUU5cUIsR0FBRyxPQUFPK2QsR0FBRXJsQixLQUFLOHdCLEVBQUV6TCxHQUFFL2QsS0FBSyxHQUFHLEVBQUV0SCxLQUFLb3lCLEVBQUVELEtBQUssRUFBRTdxQixFQUFFOHFCLEVBQUVELElBQUksT0FBTzdNLEdBQUV0bEIsS0FBSzRaLEtBQUt0UyxFQUFFc1MsTUFBTSxJQUFJLElBQUlyUyxFQUFFdkgsS0FBS0YsRUFBRVcsT0FBTzZHLEVBQUV4SCxFQUFFVyxPQUFPQyxFQUFFLEdBQUdxWixFQUFFLEVBQUVBLEVBQUUsRUFBRXhTLEVBQUV3UyxJQUFJclosRUFBRXFaLEdBQUcsRUFBRSxJQUFJQSxFQUFFLEVBQUVBLEVBQUUvWixLQUFLRixFQUFFVyxPQUFPc1osSUFBSSxJQUFJLElBQUk3WixFQUFFLEVBQUVBLEVBQUVvSCxFQUFFeEgsRUFBRVcsT0FBT1AsSUFBSSxDQUFDLElBQUlzYSxFQUFFeGEsS0FBS3FqQixFQUFFdEosS0FBSyxHQUFHVSxFQUFZLE1BQVZ6YSxLQUFLcWpCLEVBQUV0SixHQUFTVyxFQUFFcFQsRUFBRStiLEVBQUVuakIsS0FBSyxHQUFHbWhCLEVBQVMsTUFBUC9aLEVBQUUrYixFQUFFbmpCLEdBQVNRLEVBQUUsRUFBRXFaLEVBQUUsRUFBRTdaLElBQUl1YSxFQUFFNEcsRUFBRWlSLEdBQUc1eEIsRUFBRSxFQUFFcVosRUFBRSxFQUFFN1osR0FBR1EsRUFBRSxFQUFFcVosRUFBRSxFQUFFN1osRUFBRSxJQUFJc2EsRUFBRTZHLEVBQUVpUixHQUFHNXhCLEVBQUUsRUFBRXFaLEVBQUUsRUFBRTdaLEVBQUUsR0FBR1EsRUFBRSxFQUFFcVosRUFBRSxFQUFFN1osRUFBRSxJQUFJdWEsRUFBRUMsRUFBRTRYLEdBQUc1eEIsRUFBRSxFQUFFcVosRUFBRSxFQUFFN1osRUFBRSxHQUFHUSxFQUFFLEVBQUVxWixFQUFFLEVBQUU3WixFQUFFLElBQUlzYSxFQUFFRSxFQUFFNFgsR0FBRzV4QixFQUFFLEVBQUVxWixFQUFFLEVBQUU3WixFQUFFLEVBQUcsQ0FBQyxJQUFJNlosRUFDMWYsRUFBRUEsRUFBRXhTLEVBQUV3UyxJQUFJclosRUFBRXFaLEdBQUdyWixFQUFFLEVBQUVxWixFQUFFLElBQUksR0FBR3JaLEVBQUUsRUFBRXFaLEdBQUcsSUFBSUEsRUFBRXhTLEVBQUV3UyxFQUFFLEVBQUV4UyxFQUFFd1MsSUFBSXJaLEVBQUVxWixHQUFHLEVBQUUsT0FBTyxJQUFJeUksR0FBRTloQixFQUFFLEVBQUUsRUFFd0dpSCxHQUFFaVosR0FBRyxTQUFTdFosR0FBRyxPQUFPa3JCLEdBQUd4eUIsS0FBS3NILEdBQUdtVCxDQUFDLEVBQUU5UyxHQUFFa3JCLElBQUksU0FBU3ZyQixHQUFHLElBQUksSUFBSUMsRUFBRWtTLEtBQUttVyxJQUFJNXZCLEtBQUtGLEVBQUVXLE9BQU82RyxFQUFFeEgsRUFBRVcsUUFBUUMsRUFBRSxHQUFHcVosRUFBRSxFQUFFQSxFQUFFeFMsRUFBRXdTLElBQUlyWixFQUFFcVosR0FBRy9aLEtBQUtxakIsRUFBRXRKLEdBQUd6UyxFQUFFK2IsRUFBRXRKLEdBQUcsT0FBTyxJQUFJeUksR0FBRTloQixFQUFFVixLQUFLeWEsRUFBRW5ULEVBQUVtVCxFQUFFLEVBQUU5UyxHQUFFbXJCLEdBQUcsU0FBU3hyQixHQUFHLElBQUksSUFBSUMsRUFBRWtTLEtBQUttVyxJQUFJNXZCLEtBQUtGLEVBQUVXLE9BQU82RyxFQUFFeEgsRUFBRVcsUUFBUUMsRUFBRSxHQUFHcVosRUFBRSxFQUFFQSxFQUFFeFMsRUFBRXdTLElBQUlyWixFQUFFcVosR0FBRy9aLEtBQUtxakIsRUFBRXRKLEdBQUd6UyxFQUFFK2IsRUFBRXRKLEdBQUcsT0FBTyxJQUFJeUksR0FBRTloQixFQUFFVixLQUFLeWEsRUFBRW5ULEVBQUVtVCxFQUFFLEVBQzVkOVMsR0FBRW9yQixJQUFJLFNBQVN6ckIsR0FBRyxJQUFJLElBQUlDLEVBQUVrUyxLQUFLbVcsSUFBSTV2QixLQUFLRixFQUFFVyxPQUFPNkcsRUFBRXhILEVBQUVXLFFBQVFDLEVBQUUsR0FBR3FaLEVBQUUsRUFBRUEsRUFBRXhTLEVBQUV3UyxJQUFJclosRUFBRXFaLEdBQUcvWixLQUFLcWpCLEVBQUV0SixHQUFHelMsRUFBRStiLEVBQUV0SixHQUFHLE9BQU8sSUFBSXlJLEdBQUU5aEIsRUFBRVYsS0FBS3lhLEVBQUVuVCxFQUFFbVQsRUFBRSxFQUF1UDRWLEdBQUc5cEIsVUFBVXlzQixpQkFBaUIzQyxHQUFHOXBCLFVBQVV6RyxFQUFFd3dCLEdBQUUvcEIsVUFBVXFtQixLQUFLMEQsR0FBRS9wQixVQUFVcEQsRUFBRW10QixHQUFFL3BCLFVBQVUrTyxLQUFLZ2IsR0FBRS9wQixVQUFVc2MsRUFBRXlOLEdBQUUvcEIsVUFBVW1TLE1BQU00WCxHQUFFL3BCLFVBQVVtUyxNQUFNMEwsR0FBR0MsU0FBUyxFQUFFRCxHQUFHRyxRQUFRLEVBQUVILEdBQUc2TyxXQUFXLEVBQUV4TyxHQUFHeU8sU0FBUyxXQUFXcE8sR0FBR3FPLFVBQVVwTyxHQUFHQSxHQUFHQyxLQUFLLElBQUlELEdBQUdxTyxNQUFNLElBQUlyTyxHQUFHalksTUFBTSxJQUFJaVksR0FBR3NPLFFBQVEsSUFBSXRTLEdBQUV4YSxVQUFVK3NCLE9BQU92UyxHQUFFeGEsVUFBVTJaLEVBQUVRLEdBQUVuYSxVQUFVZ3RCLFdBQVc3UyxHQUFFbmEsVUFBVW1hLEVBQUVBLEdBQUVuYSxVQUFVaXRCLGFBQWE5UyxHQUFFbmEsVUFBVWlaLEdBQUdrQixHQUFFbmEsVUFBVWt0QixpQkFBaUIvUyxHQUFFbmEsVUFBVW1ZLEdBQUdnQyxHQUFFbmEsVUFBVW10QixVQUFVaFQsR0FBRW5hLFVBQVVvVCxHQUFHK0csR0FBRW5hLFVBQVVvdEIsZ0JBQWdCalQsR0FBRW5hLFVBQVVzWixHQUNwM0JhLEdBQUVuYSxVQUFVcXRCLGdCQUFnQmxULEdBQUVuYSxVQUFVb2lCLEdBQUdqSSxHQUFFbmEsVUFBVXFtQixLQUFLbE0sR0FBRW5hLFVBQVU2VCxHQUFHc0csR0FBRW5hLFVBQVVzdEIsbUJBQW1CblQsR0FBRW5hLFVBQVUyaUIsR0FBR2xJLEdBQUV6YSxVQUFVdXRCLE9BQU85UyxHQUFFemEsVUFBVStTLEVBQUUwSCxHQUFFemEsVUFBVXNiLE1BQU1iLEdBQUV6YSxVQUFVc2IsTUFBTWIsR0FBRXphLFVBQVV3dEIsT0FBTy9TLEdBQUV6YSxVQUFVb2IsRUFBRWEsR0FBRWpjLFVBQVVxRixJQUFJNFcsR0FBRWpjLFVBQVVxRixJQUFJNFcsR0FBRWpjLFVBQVV5dEIsU0FBU3hSLEdBQUVqYyxVQUFVdXFCLEVBQUV0TyxHQUFFamMsVUFBVTB0QixPQUFPelIsR0FBRWpjLFVBQVVxYSxHQUFHNEIsR0FBRWpjLFVBQVUydEIsUUFBUTFSLEdBQUVqYyxVQUFVNnJCLEVBQUU1UCxHQUFFamMsVUFBVTR0QixTQUFTM1IsR0FBRWpjLFVBQVVxVCxHQUFHNEksR0FBRWpjLFVBQVUyVCxTQUFTc0ksR0FBRWpjLFVBQVUyVCxTQUFTc0ksR0FBRWpjLFVBQVU2dEIsUUFBUTVSLEdBQUVqYyxVQUFVOGMsRUFBRWIsR0FBRTZSLFdBQVcvTyxHQUFFOUMsR0FBRThSLFdBVnZlLFNBQVNDLEVBQUdqdEIsRUFBRUMsR0FBRyxHQUFHLEdBQUdELEVBQUU3RyxPQUFPLE1BQU1rQixNQUFNLHFDQUE2QyxHQUFHLEdBQVg0RixFQUFFQSxHQUFHLEtBQVcsR0FBR0EsRUFBRSxNQUFNNUYsTUFBTSx1QkFBdUI0RixHQUFHLEdBQUcsS0FBS0QsRUFBRTlELE9BQU8sR0FBRyxPQUFPNmhCLEdBQUVrUCxFQUFHanRCLEVBQUU4USxVQUFVLEdBQUc3USxJQUFJLEdBQUcsR0FBR0QsRUFBRTZTLFFBQVEsS0FBSyxNQUFNeFksTUFBTSwrQ0FBK0MsSUFBSSxJQUFJakIsRUFBRTRrQixHQUFFN0wsS0FBS21aLElBQUlyckIsRUFBRSxJQUFJd1MsRUFBRXlMLEdBQUV0bEIsRUFBRSxFQUFFQSxFQUFFb0gsRUFBRTdHLE9BQU9QLEdBQUcsRUFBRSxDQUFDLElBQUlzYSxFQUFFZixLQUFLa1csSUFBSSxFQUFFcm9CLEVBQUU3RyxPQUFPUCxHQUFHdWEsRUFBRXNDLFNBQVN6VixFQUFFOFEsVUFBVWxZLEVBQUVBLEVBQUVzYSxHQUFHalQsR0FBRyxFQUFFaVQsR0FBR0EsRUFBRThLLEdBQUU3TCxLQUFLbVosSUFBSXJyQixFQUFFaVQsSUFBSVQsRUFBRUEsRUFBRStXLEVBQUV0VyxHQUFHNU8sSUFBSTBaLEdBQUU3SyxLQUFlVixHQUFUQSxFQUFFQSxFQUFFK1csRUFBRXB3QixJQUFPa0wsSUFBSTBaLEdBQUU3SyxHQUFLLENBQUMsT0FBT1YsQ0FBQyxFQVcvYyxJQUFJeWEsR0FBNEJwYixHQUFJb2IsMEJBQTBCLFdBQVcsT0FBTyxJQUFJbkUsRUFBRSxFQUFNb0UsR0FBcUJyYixHQUFJcWIsbUJBQW1CLFdBQVcsT0FBTy9RLElBQUksRUFBTWdSLEdBQVl0YixHQUFJc2IsVUFBVXRRLEdBQU8rTyxHQUFZL1osR0FBSStaLFVBQVUxTyxHQUFPa1EsR0FBUXZiLEdBQUl1YixNQUFNblIsR0FBTW9SLEdBQU94YixHQUFJd2IsS0FBSyxDQUFDdFMsR0FBRyxFQUFFUyxHQUFHLEVBQUVDLEdBQUcsRUFBRTRCLEdBQUcsRUFBRU8sR0FBRyxFQUFFTCxHQUFHLEVBQUVDLEdBQUcsRUFBRUYsR0FBRyxFQUFFSixHQUFHLEVBQUVTLEdBQUcsRUFBRTJQLE1BQU0sR0FBR0MsUUFBUSxHQUFHM1EsR0FBRyxHQUFHUixHQUFHLEdBQUdDLEdBQUcsR0FBR0YsR0FBRyxHQUFHRyxHQUFHLEdBQUdJLEdBQUcsR0FBRy9CLEdBQUcsR0FBR0QsR0FBRyxHQUFHRyxHQUFHLElBQVEyUyxHQUFzQjNiLEdBQUkyYixvQkFBb0JsSixHQUFPbUosR0FBYTViLEdBQUk0YixXQUFXbFEsR0FBT21RLEdBQVE3YixHQUFJNmIsTUFBTXZVLEdBQU13VSxHQUFNOWIsR0FBSThiLElBQUlsVSxHQUFNbVUsR0FBVS9iLEdBQUkrYixRQUFRM1MsR0N0RzFpQixNQUFNLEdBQUksc0JBc0JWLE1BQU00UyxHQUNGLFdBQUF6eEIsQ0FBWXpELEdBQ1JGLEtBQUtxMUIsSUFBTW4xQixDQUNmLENBQ0EsZUFBQW8xQixHQUNJLE9BQU8sTUFBUXQxQixLQUFLcTFCLEdBQ3hCLENBSU8sS0FBQUUsR0FDSCxPQUFPdjFCLEtBQUtzMUIsa0JBQW9CLE9BQVN0MUIsS0FBS3ExQixJQUFNLGdCQUN4RCxDQUNBLE9BQUFHLENBQVF0MUIsR0FDSixPQUFPQSxFQUFFbTFCLE1BQVFyMUIsS0FBS3ExQixHQUMxQixFQUcyQkQsR0FBS0ssZ0JBQWtCLElBQUlMLEdBQUssTUFHL0RBLEdBQUtNLG1CQUFxQixJQUFJTixHQUFLLDBCQUEyQkEsR0FBS08sWUFBYyxJQUFJUCxHQUFLLG1CQUMxRkEsR0FBS1EsVUFBWSxJQUFJUixHQUFLLGFBa0IxQixJQUFJN3RCLEdBQUksU0FrQlIsTUFBTSxHQUFJLElBQUltRyxFQUFPLHVCQUdyQixTQUFTbW9CLEtBQ0wsT0FBTyxHQUFFeG9CLFFBQ2IsQ0FrQkEsU0FBU3lvQixHQUFtQjUxQixLQUFNbWhCLEdBQzlCLEdBQUksR0FBRWhVLFVBQVksRUFBU1gsTUFBTyxDQUM5QixNQUFNZ08sRUFBSTJHLEVBQUVuVyxJQUFJNnFCLElBQ2hCLEdBQUU1bkIsTUFBTSxjQUFjNUcsUUFBT3JILE9BQVF3YSxFQUN6QyxDQUNKLENBRUEsU0FBU3NiLEdBQW1COTFCLEtBQU1taEIsR0FDOUIsR0FBSSxHQUFFaFUsVUFBWSxFQUFTUCxNQUFPLENBQzlCLE1BQU00TixFQUFJMkcsRUFBRW5XLElBQUk2cUIsSUFDaEIsR0FBRTl3QixNQUFNLGNBQWNzQyxRQUFPckgsT0FBUXdhLEVBQ3pDLENBQ0osQ0FJSSxTQUFTdWIsR0FBa0IvMUIsS0FBTW1oQixHQUNqQyxHQUFJLEdBQUVoVSxVQUFZLEVBQVNSLEtBQU0sQ0FDN0IsTUFBTTZOLEVBQUkyRyxFQUFFblcsSUFBSTZxQixJQUNoQixHQUFFMW5CLEtBQUssY0FBYzlHLFFBQU9ySCxPQUFRd2EsRUFDeEMsQ0FDSixDQUlJLFNBQVNxYixHQUFzQjcxQixHQUMvQixHQUFJLGlCQUFtQkEsRUFBRyxPQUFPQSxFQUNqQyxJQWtCSSxPQUFPLFNBQThCQSxHQUNqQyxPQUFPdUUsS0FBSzBULFVBQVVqWSxFQUMxQixDQUZPLENBRUxBLEVBQ04sQ0FBRSxNQUFPbWhCLEdBRUwsT0FBT25oQixDQUNYLENBQ0osQ0F5QkksU0FBU2cyQixHQUFLaDJCLEVBQUksb0JBR2xCLE1BQU1taEIsRUFBSSxjQUFjOVosa0NBQW1DckgsRUFJM0QsTUFBTTgxQixHQUFtQjNVLEdBQUksSUFBSTFmLE1BQU0wZixFQUMzQyxDQU9JLFNBQVM4VSxHQUFxQmoyQixFQUFHbWhCLEdBQ2pDbmhCLEdBQUtnMkIsSUFDVCxDQWtCSSxTQUFTRSxHQUFvQmwyQixFQUVqQ21oQixHQUNJLE9BQU9uaEIsQ0FDWCxDQWlCSSxNQUFNLEdBQUksQ0FJVm0yQixHQUFJLEtBRUpDLFVBQVcsWUFFWEMsUUFBUyxVQU9UQyxpQkFBa0IsbUJBUWxCQyxrQkFBbUIsb0JBRW5CQyxVQUFXLFlBS1hDLGVBQWdCLGlCQVFoQkMsa0JBQW1CLG9CQUtuQm5CLGdCQUFpQixrQkFLakJvQixtQkFBb0IscUJBcUJwQkMsb0JBQXFCLHNCQVFyQkMsUUFBUyxVQWdCVEMsYUFBYyxlQUVkQyxjQUFlLGdCQUtmOXJCLFNBQVUsV0FRVityQixZQUFhLGNBRWJDLFVBQVcsYUFHb0MsTUFBTUMsV0FBdUJueEIsRUFFNUUsV0FBQXRDLENBSUF6RCxFQUlBbWhCLEdBQ0l6ZCxNQUFNMUQsRUFBR21oQixHQUFJcmhCLEtBQUtrRyxLQUFPaEcsRUFBR0YsS0FBS21HLFFBQVVrYixFQUkzQ3JoQixLQUFLa2EsU0FBVyxJQUFNLEdBQUdsYSxLQUFLOEQsZUFBZTlELEtBQUtrRyxVQUFVbEcsS0FBS21HLFNBQ3JFLEVBa0JBLE1BQU1reEIsR0FDTixXQUFBMXpCLEdBQ0kzRCxLQUFLMkYsUUFBVSxJQUFJQyxTQUFRLENBQUUxRixFQUFHbWhCLEtBQzVCcmhCLEtBQUswRixRQUFVeEYsRUFBR0YsS0FBS3lGLE9BQVM0YixDQUNuQyxHQUNMLEVBa0JBLE1BQU1pVyxHQUNOLFdBQUEzekIsQ0FBWXpELEVBQUdtaEIsR0FDWHJoQixLQUFLdTNCLEtBQU9sVyxFQUFHcmhCLEtBQUttSSxLQUFPLFFBQVNuSSxLQUFLNnNCLFFBQVUsSUFBSTFqQixJQUFLbkosS0FBSzZzQixRQUFRaGpCLElBQUksZ0JBQWlCLFVBQVUzSixJQUM1RyxFQU1BLE1BQU1zM0IsR0FDTixRQUFBQyxHQUNJLE9BQU83eEIsUUFBUUYsUUFBUSxLQUMzQixDQUNBLGVBQUFneUIsR0FBbUIsQ0FDbkIsS0FBQTVVLENBQU01aUIsRUFBR21oQixHQUVMbmhCLEVBQUV5M0Isa0JBQWlCLElBQU90VyxFQUFFK1QsR0FBS0ssa0JBQ3JDLENBQ0EsUUFBQW1DLEdBQVksRUFNWixNQUFNQyxHQUNOLFdBQUFsMEIsQ0FBWXpELEdBQ1JGLEtBQUs4M0IsTUFBUTUzQixFQU1iRixLQUFLKzNCLGVBQWlCLElBQzFCLENBQ0EsUUFBQU4sR0FDSSxPQUFPN3hCLFFBQVFGLFFBQVExRixLQUFLODNCLE1BQ2hDLENBQ0EsZUFBQUosR0FBbUIsQ0FDbkIsS0FBQTVVLENBQU01aUIsRUFBR21oQixHQUNMcmhCLEtBQUsrM0IsZUFBaUIxVyxFQUV0Qm5oQixFQUFFeTNCLGtCQUFpQixJQUFPdFcsRUFBRXJoQixLQUFLODNCLE1BQU1QLE9BQzNDLENBQ0EsUUFBQUssR0FDSTUzQixLQUFLKzNCLGVBQWlCLElBQzFCLEVBR0osTUFBTUMsR0FDRixXQUFBcjBCLENBQVl6RCxHQUNSRixLQUFLcWhCLEVBQUluaEIsRUFFVEYsS0FBS2k0QixZQUFjN0MsR0FBS0ssZ0JBS3hCejFCLEtBQUtRLEVBQUksRUFBR1IsS0FBS2s0QixjQUFlLEVBQUlsNEIsS0FBS200QixLQUFPLElBQ3BELENBQ0EsS0FBQXJWLENBQU01aUIsRUFBR21oQixHQUNMLElBQUkzRyxFQUFJMWEsS0FBS1EsRUFFTCxNQUFNNDNCLEVBQWtDbDRCLEdBQUtGLEtBQUtRLElBQU1rYSxHQUFLQSxFQUFJMWEsS0FBS1EsRUFDOUU2Z0IsRUFBRW5oQixJQUFNMEYsUUFBUUYsVUFHUixJQUFJMlUsRUFBSSxJQUFJZ2QsR0FDcEJyM0IsS0FBSzZhLEVBQUksS0FDTDdhLEtBQUtRLElBQUtSLEtBQUtpNEIsWUFBY2o0QixLQUFLbUQsSUFBS2tYLEVBQUUzVSxVQUFXMlUsRUFBSSxJQUFJZ2QsR0FDNURuM0IsRUFBRXkzQixrQkFBaUIsSUFBT1MsRUFBZ0NwNEIsS0FBS2k0QixjQUFjLEVBRWpGLE1BQU1JLEVBQTJCLEtBQzdCLE1BQU1oWCxFQUFJaEgsRUFDVm5hLEVBQUV5M0Isa0JBQWlCLGdCQUNUdFcsRUFBRTFiLGNBQWV5eUIsRUFBZ0NwNEIsS0FBS2k0QixZQUMvRCxHQUFFLEVBQ0pLLEVBQXlCcDRCLElBQ3hCNDFCLEdBQW1CLGtDQUFtQyxpQkFBa0I5MUIsS0FBS200QixLQUFPajRCLEVBQ3BGRixLQUFLbTRCLEtBQUtJLHFCQUFxQnY0QixLQUFLNmEsR0FBSXdkLEdBQTBCLEVBRXRFcjRCLEtBQUtxaEIsRUFBRTVWLFFBQVF2TCxHQUFLbzRCLEVBQXVCcDRCLEtBSTNDOGhCLFlBQVcsS0FDUCxJQUFLaGlCLEtBQUttNEIsS0FBTSxDQUNaLE1BQU1qNEIsRUFBSUYsS0FBS3FoQixFQUFFbFgsYUFBYSxDQUMxQkUsVUFBVSxJQUVkbkssRUFBSW80QixFQUF1QnA0QixJQUUzQjQxQixHQUFtQixrQ0FBbUMseUJBQ3REemIsRUFBRTNVLFVBQVcyVSxFQUFJLElBQUlnZCxHQUN6QixDQUNILEdBQUcsR0FBSWdCLEdBQ1osQ0FDQSxRQUFBWixHQUlJLE1BQU12M0IsRUFBSUYsS0FBS1EsRUFBRzZnQixFQUFJcmhCLEtBQUtrNEIsYUFDM0IsT0FBT2w0QixLQUFLazRCLGNBQWUsRUFBSWw0QixLQUFLbTRCLEtBQU9uNEIsS0FBS200QixLQUFLVixTQUFTcFcsR0FBR2hRLE1BQU1nUSxHQUl2RXJoQixLQUFLUSxJQUFNTixHQUFLNDFCLEdBQW1CLGtDQUFtQyx5Q0FDdEU5MUIsS0FBS3kzQixZQUFjcFcsR0FBSzhVLEdBQXFCLGlCQUFtQjlVLEVBQUVtWCxhQUNsRSxJQUFJbEIsR0FBcUJqVyxFQUFFbVgsWUFBYXg0QixLQUFLaTRCLGNBQWdCLE9BQVNyeUIsUUFBUUYsUUFBUSxLQUMxRixDQUNBLGVBQUFneUIsR0FDSTEzQixLQUFLazRCLGNBQWUsQ0FDeEIsQ0FDQSxRQUFBTixHQUNJNTNCLEtBQUttNEIsTUFBUW40QixLQUFLbTRCLEtBQUtNLHdCQUF3Qno0QixLQUFLNmEsRUFDeEQsQ0FLQSxDQUFBMVgsR0FDSSxNQUFNakQsRUFBSUYsS0FBS200QixNQUFRbjRCLEtBQUttNEIsS0FBS08sU0FDakMsT0FBT3ZDLEdBQXFCLE9BQVNqMkIsR0FBSyxpQkFBbUJBLEdBQUksSUFBSWsxQixHQUFLbDFCLEVBQzlFLEVBU0EsTUFBTXk0QixHQUNOLFdBQUFoMUIsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEdBQ2QxYSxLQUFLc1osRUFBSXBaLEVBQUdGLEtBQUt5YSxFQUFJNEcsRUFBR3JoQixLQUFLMGdCLEVBQUloRyxFQUFHMWEsS0FBS21JLEtBQU8sYUFBY25JLEtBQUt1M0IsS0FBT25DLEdBQUtPLFlBQy9FMzFCLEtBQUt5bEIsRUFBSSxJQUFJdGMsR0FDakIsQ0FJTyxDQUFBcVosR0FDSCxPQUFPeGlCLEtBQUswZ0IsRUFBSTFnQixLQUFLMGdCLElBQU0sSUFDL0IsQ0FDQSxXQUFJbU0sR0FDQTdzQixLQUFLeWxCLEVBQUU1YixJQUFJLGtCQUFtQjdKLEtBQUtzWixHQUVuQyxNQUFNcFosRUFBSUYsS0FBS3dpQixJQUNmLE9BQU90aUIsR0FBS0YsS0FBS3lsQixFQUFFNWIsSUFBSSxnQkFBaUIzSixHQUFJRixLQUFLeWEsR0FBS3phLEtBQUt5bEIsRUFBRTViLElBQUksaUNBQWtDN0osS0FBS3lhLEdBQ3hHemEsS0FBS3lsQixDQUNULEVBT0EsTUFBTW1ULEdBQ04sV0FBQWoxQixDQUFZekQsRUFBR21oQixFQUFHM0csR0FDZDFhLEtBQUtzWixFQUFJcFosRUFBR0YsS0FBS3lhLEVBQUk0RyxFQUFHcmhCLEtBQUswZ0IsRUFBSWhHLENBQ3JDLENBQ0EsUUFBQStjLEdBQ0ksT0FBTzd4QixRQUFRRixRQUFRLElBQUlpekIsR0FBMEIzNEIsS0FBS3NaLEVBQUd0WixLQUFLeWEsRUFBR3phLEtBQUswZ0IsR0FDOUUsQ0FDQSxLQUFBb0MsQ0FBTTVpQixFQUFHbWhCLEdBRUxuaEIsRUFBRXkzQixrQkFBaUIsSUFBT3RXLEVBQUUrVCxHQUFLTyxjQUNyQyxDQUNBLFFBQUFpQyxHQUFZLENBQ1osZUFBQUYsR0FBbUIsRUFHdkIsTUFBTW1CLEdBQ0YsV0FBQWwxQixDQUFZekQsR0FDUkYsS0FBSytGLE1BQVE3RixFQUFHRixLQUFLbUksS0FBTyxXQUFZbkksS0FBSzZzQixRQUFVLElBQUkxakIsSUFBS2pKLEdBQUtBLEVBQUVPLE9BQVMsR0FBS1QsS0FBSzZzQixRQUFRaGpCLElBQUksc0JBQXVCN0osS0FBSytGLE1BQ3RJLEVBR0osTUFBTSt5QixHQUNGLFdBQUFuMUIsQ0FBWXpELEdBQ1JGLEtBQUtpZCxFQUFJL2MsRUFBR0YsS0FBS2s0QixjQUFlLEVBQUlsNEIsS0FBSys0QixTQUFXLEtBQU0vNEIsS0FBSzh3QixFQUFJLElBQ3ZFLENBQ0EsS0FBQWhPLENBQU01aUIsRUFBR21oQixHQUNMLE1BQU0yWCxFQUFpQjk0QixJQUNuQixNQUFRQSxFQUFFK0UsT0FBUzZ3QixHQUFtQixnQ0FBaUMsMEVBQTBFNTFCLEVBQUUrRSxNQUFNa0IsV0FDekosTUFBTXVVLEVBQUl4YSxFQUFFNDNCLFFBQVU5M0IsS0FBSzh3QixFQUMzQixPQUFPOXdCLEtBQUs4d0IsRUFBSTV3QixFQUFFNDNCLE1BQU9oQyxHQUFtQixnQ0FBaUMsWUFBWXBiLEVBQUksTUFBUSxxQkFDckdBLEVBQUkyRyxFQUFFbmhCLEVBQUU0M0IsT0FBU2x5QixRQUFRRixTQUFTLEVBRXRDMUYsS0FBSzZhLEVBQUl3RyxJQUNMbmhCLEVBQUV5M0Isa0JBQWlCLElBQU9xQixFQUFlM1gsSUFBSSxFQUVqRCxNQUFNNFgsRUFBNkIvNEIsSUFDL0I0MUIsR0FBbUIsZ0NBQWlDLHFCQUFzQjkxQixLQUFLKzRCLFNBQVc3NEIsRUFDMUZGLEtBQUsrNEIsU0FBU0csaUJBQWlCbDVCLEtBQUs2YSxFQUFFLEVBRTFDN2EsS0FBS2lkLEVBQUV4UixRQUFRdkwsR0FBSys0QixFQUEyQi80QixLQUcvQzhoQixZQUFXLEtBQ1AsSUFBS2hpQixLQUFLKzRCLFNBQVUsQ0FDaEIsTUFBTTc0QixFQUFJRixLQUFLaWQsRUFBRTlTLGFBQWEsQ0FDMUJFLFVBQVUsSUFFZG5LLEVBQUkrNEIsRUFBMkIvNEIsR0FFL0I0MUIsR0FBbUIsZ0NBQWlDLDRCQUN4RCxDQUNILEdBQUcsRUFDUixDQUNBLFFBQUEyQixHQUNJLE1BQU12M0IsRUFBSUYsS0FBS2s0QixhQUNmLE9BQU9sNEIsS0FBS2s0QixjQUFlLEVBQUlsNEIsS0FBSys0QixTQUFXLzRCLEtBQUsrNEIsU0FBU3RCLFNBQVN2M0IsR0FBR21SLE1BQU1uUixHQUFLQSxHQUFLaTJCLEdBQXFCLGlCQUFtQmoyQixFQUFFNDNCLE9BQ25JOTNCLEtBQUs4d0IsRUFBSTV3QixFQUFFNDNCLE1BQU8sSUFBSWUsR0FBYzM0QixFQUFFNDNCLFFBQVUsT0FBU2x5QixRQUFRRixRQUFRLEtBQzdFLENBQ0EsZUFBQWd5QixHQUNJMTNCLEtBQUtrNEIsY0FBZSxDQUN4QixDQUNBLFFBQUFOLEdBQ0k1M0IsS0FBSys0QixVQUFZLzRCLEtBQUsrNEIsU0FBU0ksb0JBQW9CbjVCLEtBQUs2YSxFQUM1RCxFQXdDSixTQUFTdWUsR0FBc0JsNUIsR0FFM0IsTUFBTW1oQixFQUVOLG9CQUFzQmpkLE9BQVNBLEtBQUtpMUIsUUFBVWoxQixLQUFLazFCLFVBQVc1ZSxFQUFJLElBQUk2UyxXQUFXcnRCLEdBQ2pGLEdBQUltaEIsR0FBSyxtQkFBcUJBLEVBQUVrWSxnQkFBaUJsWSxFQUFFa1ksZ0JBQWdCN2UsUUFFbkUsSUFBSyxJQUFJMkcsRUFBSSxFQUFHQSxFQUFJbmhCLEVBQUdtaEIsSUFBSzNHLEVBQUUyRyxHQUFLNUgsS0FBS3VRLE1BQU0sSUFBTXZRLEtBQUtDLFVBQ3pELE9BQU9nQixDQUNYLENBaUJJLE1BQU04ZSxHQUNOLFFBQU9oVSxHQUVILE1BQTRFbkUsRUFBaUNuaEIsR0FBN0J1WixLQUFLdVEsTUFBTSxJQUFNOXBCLElBRXpGLElBQUl3YSxFQUFJLEdBQ2hCLEtBQU1BLEVBQUVqYSxPQUFTLElBQU0sQ0FDbkIsTUFBTTRaLEVBQUkrZSxHQUFzQixJQUNoQyxJQUFLLElBQUk1NEIsRUFBSSxFQUFHQSxFQUFJNlosRUFBRTVaLFNBQVVELEVBR2hDa2EsRUFBRWphLE9BQVMsSUFBTTRaLEVBQUU3WixHQUFLNmdCLElBQU0zRyxHQVJ4QixpRUFRK0JsWCxPQUFPNlcsRUFBRTdaLEdBQUtOLElBQ3ZELENBQ0EsT0FBT3dhLENBQ1gsRUFHSixTQUFTK2UsR0FBOEJ2NUIsRUFBR21oQixHQUN0QyxPQUFPbmhCLEVBQUltaEIsR0FBSyxFQUFJbmhCLEVBQUltaEIsRUFBSSxFQUFJLENBQ3BDLENBRWlELFNBQVNxWSxHQUFzQng1QixFQUFHbWhCLEVBQUczRyxHQUNsRixPQUFPeGEsRUFBRU8sU0FBVzRnQixFQUFFNWdCLFFBQVVQLEVBQUV5NUIsT0FBTSxDQUFFejVCLEVBQUdtYSxJQUFNSyxFQUFFeGEsRUFBR21oQixFQUFFaEgsS0FDOUQsQ0F5Q0EsTUFBTXVmLEdBWUYsV0FBQWoyQixDQUlBekQsRUFJQW1oQixHQUNJLEdBQUlyaEIsS0FBSzY1QixRQUFVMzVCLEVBQUdGLEtBQUs4NUIsWUFBY3pZLEVBQUdBLEVBQUksRUFBRyxNQUFNLElBQUkrVixHQUFlLEdBQUVaLGlCQUFrQix1Q0FBeUNuVixHQUN6SSxHQUFJQSxHQUFLLElBQUssTUFBTSxJQUFJK1YsR0FBZSxHQUFFWixpQkFBa0IsdUNBQXlDblYsR0FDcEcsR0FBSW5oQixHQUFLLFlBQWEsTUFBTSxJQUFJazNCLEdBQWUsR0FBRVosaUJBQWtCLG1DQUFxQ3QyQixHQUVoRyxHQUFJQSxHQUFLLGFBQWMsTUFBTSxJQUFJazNCLEdBQWUsR0FBRVosaUJBQWtCLG1DQUFxQ3QyQixFQUNySCxDQUtPLFVBQU9vTixHQUNWLE9BQU9zc0IsR0FBVUcsV0FBV3hzQixLQUFLRCxNQUNyQyxDQU9PLGVBQU8wc0IsQ0FBUzk1QixHQUNuQixPQUFPMDVCLEdBQVVHLFdBQVc3NUIsRUFBRSs1QixVQUNsQyxDQVFPLGlCQUFPRixDQUFXNzVCLEdBQ3JCLE1BQU1taEIsRUFBSTVILEtBQUt1USxNQUFNOXBCLEVBQUksS0FBTXdhLEVBQUlqQixLQUFLdVEsTUFBTSxLQUFPOXBCLEVBQUksSUFBTW1oQixJQUMvRCxPQUFPLElBQUl1WSxHQUFVdlksRUFBRzNHLEVBQzVCLENBUU8sTUFBQXdmLEdBQ0gsT0FBTyxJQUFJM3NCLEtBQUt2TixLQUFLbTZCLFdBQ3pCLENBT08sUUFBQUEsR0FDSCxPQUFPLElBQU1uNkIsS0FBSzY1QixRQUFVNzVCLEtBQUs4NUIsWUFBYyxHQUNuRCxDQUNBLFVBQUFNLENBQVdsNkIsR0FDUCxPQUFPRixLQUFLNjVCLFVBQVkzNUIsRUFBRTI1QixRQUFVSixHQUE4Qno1QixLQUFLODVCLFlBQWE1NUIsRUFBRTQ1QixhQUFlTCxHQUE4Qno1QixLQUFLNjVCLFFBQVMzNUIsRUFBRTI1QixRQUN2SixDQU1PLE9BQUFyRSxDQUFRdDFCLEdBQ1gsT0FBT0EsRUFBRTI1QixVQUFZNzVCLEtBQUs2NUIsU0FBVzM1QixFQUFFNDVCLGNBQWdCOTVCLEtBQUs4NUIsV0FDaEUsQ0FDZ0UsUUFBQTVmLEdBQzVELE1BQU8scUJBQXVCbGEsS0FBSzY1QixRQUFVLGlCQUFtQjc1QixLQUFLODVCLFlBQWMsR0FDdkYsQ0FDMEUsTUFBQU8sR0FDdEUsTUFBTyxDQUNIUixRQUFTNzVCLEtBQUs2NUIsUUFDZEMsWUFBYTk1QixLQUFLODVCLFlBRTFCLENBSU8sT0FBQTNpQixHQVFILE1BQU1qWCxFQUFJRixLQUFLNjVCLFVBQVcsWUFHbEIsT0FBTzcyQixPQUFPOUMsR0FBR282QixTQUFTLEdBQUksS0FBTyxJQUFNdDNCLE9BQU9oRCxLQUFLODVCLGFBQWFRLFNBQVMsRUFBRyxJQUM1RixFQXNCQSxNQUFNQyxHQUNOLFdBQUE1MkIsQ0FBWXpELEdBQ1JGLEtBQUt3NkIsVUFBWXQ2QixDQUNyQixDQUNBLG9CQUFPdTZCLENBQWN2NkIsR0FDakIsT0FBTyxJQUFJcTZCLEdBQWdCcjZCLEVBQy9CLENBQ0EsVUFBT3l2QixHQUNILE9BQU8sSUFBSTRLLEdBQWdCLElBQUlYLEdBQVUsRUFBRyxHQUNoRCxDQUNBLFVBQU9oSyxHQUNILE9BQU8sSUFBSTJLLEdBQWdCLElBQUlYLEdBQVUsYUFBYyxXQUMzRCxDQUNBLFNBQUFjLENBQVV4NkIsR0FDTixPQUFPRixLQUFLdzZCLFVBQVVKLFdBQVdsNkIsRUFBRXM2QixVQUN2QyxDQUNBLE9BQUFoRixDQUFRdDFCLEdBQ0osT0FBT0YsS0FBS3c2QixVQUFVaEYsUUFBUXQxQixFQUFFczZCLFVBQ3BDLENBQ2dGLGNBQUFHLEdBRTVFLE9BQU8sSUFBTTM2QixLQUFLdzZCLFVBQVVYLFFBQVU3NUIsS0FBS3c2QixVQUFVVixZQUFjLEdBQ3ZFLENBQ0EsUUFBQTVmLEdBQ0ksTUFBTyxtQkFBcUJsYSxLQUFLdzZCLFVBQVV0Z0IsV0FBYSxHQUM1RCxDQUNBLFdBQUEwZ0IsR0FDSSxPQUFPNTZCLEtBQUt3NkIsU0FDaEIsRUFzQkosTUFBTUssR0FDRixXQUFBbDNCLENBQVl6RCxFQUFHbWhCLEVBQUczRyxRQUNkLElBQVcyRyxFQUFJQSxFQUFJLEVBQUlBLEVBQUluaEIsRUFBRU8sUUFBVXkxQixVQUFRLElBQVd4YixFQUFJQSxFQUFJeGEsRUFBRU8sT0FBUzRnQixFQUFJM0csRUFBSXhhLEVBQUVPLE9BQVM0Z0IsR0FBSzZVLEtBQ3JHbDJCLEtBQUs4NkIsU0FBVzU2QixFQUFHRixLQUFLKzZCLE9BQVMxWixFQUFHcmhCLEtBQUtnN0IsSUFBTXRnQixDQUNuRCxDQUNBLFVBQUlqYSxHQUNBLE9BQU9ULEtBQUtnN0IsR0FDaEIsQ0FDQSxPQUFBeEYsQ0FBUXQxQixHQUNKLE9BQU8sSUFBTTI2QixHQUFTSSxXQUFXajdCLEtBQU1FLEVBQzNDLENBQ0EsS0FBQWc3QixDQUFNaDdCLEdBQ0YsTUFBTW1oQixFQUFJcmhCLEtBQUs4NkIsU0FBU3BqQixNQUFNMVgsS0FBSys2QixPQUFRLzZCLEtBQUttN0IsU0FDaEQsT0FBT2o3QixhQUFhMjZCLEdBQVczNkIsRUFBRXFvQixTQUFTcm9CLElBQ3RDbWhCLEVBQUU3ZSxLQUFLdEMsRUFDVixJQUFLbWhCLEVBQUU3ZSxLQUFLdEMsR0FBSUYsS0FBS283QixVQUFVL1osRUFDcEMsQ0FDOEQsS0FBQThaLEdBQzFELE9BQU9uN0IsS0FBSys2QixPQUFTLzZCLEtBQUtTLE1BQzlCLENBQ0EsUUFBQTQ2QixDQUFTbjdCLEdBQ0wsT0FBT0EsT0FBSSxJQUFXQSxFQUFJLEVBQUlBLEVBQUdGLEtBQUtvN0IsVUFBVXA3QixLQUFLODZCLFNBQVU5NkIsS0FBSys2QixPQUFTNzZCLEVBQUdGLEtBQUtTLE9BQVNQLEVBQ2xHLENBQ0EsT0FBQW83QixHQUNJLE9BQU90N0IsS0FBS283QixVQUFVcDdCLEtBQUs4NkIsU0FBVTk2QixLQUFLKzZCLE9BQVEvNkIsS0FBS1MsT0FBUyxFQUNwRSxDQUNBLFlBQUE4NkIsR0FDSSxPQUFPdjdCLEtBQUs4NkIsU0FBUzk2QixLQUFLKzZCLE9BQzlCLENBQ0EsV0FBQVMsR0FDSSxPQUFPeDdCLEtBQUt1SixJQUFJdkosS0FBS1MsT0FBUyxFQUNsQyxDQUNBLEdBQUE4SSxDQUFJckosR0FDQSxPQUFPRixLQUFLODZCLFNBQVM5NkIsS0FBSys2QixPQUFTNzZCLEVBQ3ZDLENBQ0EsT0FBQXU3QixHQUNJLE9BQU8sSUFBTXo3QixLQUFLUyxNQUN0QixDQUNBLFVBQUFpN0IsQ0FBV3g3QixHQUNQLEdBQUlBLEVBQUVPLE9BQVNULEtBQUtTLE9BQVEsT0FBTyxFQUNuQyxJQUFLLElBQUk0Z0IsRUFBSSxFQUFHQSxFQUFJcmhCLEtBQUtTLE9BQVE0Z0IsSUFBSyxHQUFJcmhCLEtBQUt1SixJQUFJOFgsS0FBT25oQixFQUFFcUosSUFBSThYLEdBQUksT0FBTyxFQUMzRSxPQUFPLENBQ1gsQ0FDQSxtQkFBQXNhLENBQW9CejdCLEdBQ2hCLEdBQUlGLEtBQUtTLE9BQVMsSUFBTVAsRUFBRU8sT0FBUSxPQUFPLEVBQ3pDLElBQUssSUFBSTRnQixFQUFJLEVBQUdBLEVBQUlyaEIsS0FBS1MsT0FBUTRnQixJQUFLLEdBQUlyaEIsS0FBS3VKLElBQUk4WCxLQUFPbmhCLEVBQUVxSixJQUFJOFgsR0FBSSxPQUFPLEVBQzNFLE9BQU8sQ0FDWCxDQUNBLE9BQUFrSCxDQUFRcm9CLEdBQ0osSUFBSyxJQUFJbWhCLEVBQUlyaEIsS0FBSys2QixPQUFRcmdCLEVBQUkxYSxLQUFLbTdCLFFBQVM5WixFQUFJM0csRUFBRzJHLElBQUtuaEIsRUFBRUYsS0FBSzg2QixTQUFTelosR0FDNUUsQ0FDQSxPQUFBdWEsR0FDSSxPQUFPNTdCLEtBQUs4NkIsU0FBU3BqQixNQUFNMVgsS0FBSys2QixPQUFRLzZCLEtBQUttN0IsUUFDakQsQ0FDQSxpQkFBT0YsQ0FBVy82QixFQUFHbWhCLEdBQ2pCLE1BQU0zRyxFQUFJakIsS0FBS2tXLElBQUl6dkIsRUFBRU8sT0FBUTRnQixFQUFFNWdCLFFBQy9CLElBQUssSUFBSTRaLEVBQUksRUFBR0EsRUFBSUssRUFBR0wsSUFBSyxDQUN4QixNQUFNSyxFQUFJeGEsRUFBRXFKLElBQUk4USxHQUFJN1osRUFBSTZnQixFQUFFOVgsSUFBSThRLEdBQzlCLEdBQUlLLEVBQUlsYSxFQUFHLE9BQVEsRUFDbkIsR0FBSWthLEVBQUlsYSxFQUFHLE9BQU8sQ0FDdEIsQ0FDQSxPQUFPTixFQUFFTyxPQUFTNGdCLEVBQUU1Z0IsUUFBVSxFQUFJUCxFQUFFTyxPQUFTNGdCLEVBQUU1Z0IsT0FBUyxFQUFJLENBQ2hFLEVBUUEsTUFBTW83QixXQUFxQmhCLEdBQzNCLFNBQUFPLENBQVVsN0IsRUFBR21oQixFQUFHM0csR0FDWixPQUFPLElBQUltaEIsR0FBYTM3QixFQUFHbWhCLEVBQUczRyxFQUNsQyxDQUNBLGVBQUFvaEIsR0FJSSxPQUFPOTdCLEtBQUs0N0IsVUFBVW41QixLQUFLLElBQy9CLENBQ0EsUUFBQXlYLEdBQ0ksT0FBT2xhLEtBQUs4N0IsaUJBQ2hCLENBS08saUJBQU94SCxJQUFjcDBCLEdBSXhCLE1BQU1taEIsRUFBSSxHQUNWLElBQUssTUFBTTNHLEtBQUt4YSxFQUFHLENBQ2YsR0FBSXdhLEVBQUVQLFFBQVEsT0FBUyxFQUFHLE1BQU0sSUFBSWlkLEdBQWUsR0FBRVosaUJBQWtCLG9CQUFvQjliLDBDQUUvRTJHLEVBQUU3ZSxRQUFRa1ksRUFBRTRFLE1BQU0sS0FBS3JVLFFBQVEvSyxHQUFLQSxFQUFFTyxPQUFTLElBQy9ELENBQ0EsT0FBTyxJQUFJbzdCLEdBQWF4YSxFQUM1QixDQUNBLGdCQUFPMGEsR0FDSCxPQUFPLElBQUlGLEdBQWEsR0FDNUIsRUFHSixNQUFNLEdBQUksMkJBS04sTUFBTUcsV0FBb0JuQixHQUMxQixTQUFBTyxDQUFVbDdCLEVBQUdtaEIsRUFBRzNHLEdBQ1osT0FBTyxJQUFJc2hCLEdBQVk5N0IsRUFBR21oQixFQUFHM0csRUFDakMsQ0FJTyx3QkFBT3VoQixDQUFrQi83QixHQUM1QixPQUFPLEdBQUV1YixLQUFLdmIsRUFDbEIsQ0FDQSxlQUFBNDdCLEdBQ0ksT0FBTzk3QixLQUFLNDdCLFVBQVUxd0IsS0FBS2hMLElBQU1BLEVBQUlBLEVBQUVnRSxRQUFRLE1BQU8sUUFBUUEsUUFBUSxLQUFNLE9BQzVFODNCLEdBQVlDLGtCQUFrQi83QixLQUFPQSxFQUFJLElBQU1BLEVBQUksS0FBTUEsS0FBS3VDLEtBQUssSUFDdkUsQ0FDQSxRQUFBeVgsR0FDSSxPQUFPbGEsS0FBSzg3QixpQkFDaEIsQ0FHTyxVQUFBSSxHQUNILE9BQU8sSUFBTWw4QixLQUFLUyxRQUFVLGFBQWVULEtBQUt1SixJQUFJLEVBQ3hELENBR08sZUFBTzR5QixHQUNWLE9BQU8sSUFBSUgsR0FBWSxDQUFFLFlBQzdCLENBVU8sdUJBQU9JLENBQWlCbDhCLEdBQzNCLE1BQU1taEIsRUFBSSxHQUNWLElBQUkzRyxFQUFJLEdBQUlMLEVBQUksRUFDaEIsTUFBTWdpQixFQUE4QixLQUNoQyxHQUFJLElBQU0zaEIsRUFBRWphLE9BQVEsTUFBTSxJQUFJMjJCLEdBQWUsR0FBRVosaUJBQWtCLHVCQUF1QnQyQiw4RUFDeEZtaEIsRUFBRTdlLEtBQUtrWSxHQUFJQSxFQUFJLEVBQUUsRUFFckIsSUFBSWxhLEdBQUksRUFDUixLQUFNNlosRUFBSW5hLEVBQUVPLFFBQVUsQ0FDbEIsTUFBTTRnQixFQUFJbmhCLEVBQUVtYSxHQUNaLEdBQUksT0FBU2dILEVBQUcsQ0FDWixHQUFJaEgsRUFBSSxJQUFNbmEsRUFBRU8sT0FBUSxNQUFNLElBQUkyMkIsR0FBZSxHQUFFWixpQkFBa0IsdUNBQXlDdDJCLEdBQzlHLE1BQU1taEIsRUFBSW5oQixFQUFFbWEsRUFBSSxHQUNoQixHQUFJLE9BQVNnSCxHQUFLLE1BQVFBLEdBQUssTUFBUUEsRUFBRyxNQUFNLElBQUkrVixHQUFlLEdBQUVaLGlCQUFrQixxQ0FBdUN0MkIsR0FDOUh3YSxHQUFLMkcsRUFBR2hILEdBQUssQ0FDakIsS0FBTyxNQUFRZ0gsR0FBSzdnQixHQUFLQSxFQUFHNlosS0FBTyxNQUFRZ0gsR0FBSzdnQixHQUFLa2EsR0FBSzJHLEVBQUdoSCxNQUFRZ2lCLElBQ3JFaGlCLElBQ0osQ0FDQSxHQUFJZ2lCLElBQStCNzdCLEVBQUcsTUFBTSxJQUFJNDJCLEdBQWUsR0FBRVosaUJBQWtCLDJCQUE2QnQyQixHQUNoSCxPQUFPLElBQUk4N0IsR0FBWTNhLEVBQzNCLENBQ0EsZ0JBQU8wYSxHQUNILE9BQU8sSUFBSUMsR0FBWSxHQUMzQixFQXFCQSxNQUFNTSxHQUNOLFdBQUEzNEIsQ0FBWXpELEdBQ1JGLEtBQUt1OEIsS0FBT3I4QixDQUNoQixDQUNBLGVBQU9zOEIsQ0FBU3Q4QixHQUNaLE9BQU8sSUFBSW84QixHQUFZVCxHQUFhdkgsV0FBV3AwQixHQUNuRCxDQUNBLGVBQU91OEIsQ0FBU3Y4QixHQUNaLE9BQU8sSUFBSW84QixHQUFZVCxHQUFhdkgsV0FBV3AwQixHQUFHbTdCLFNBQVMsR0FDL0QsQ0FDQSxZQUFPcUIsR0FDSCxPQUFPLElBQUlKLEdBQVlULEdBQWFFLFlBQ3hDLENBQ0EsbUJBQUlZLEdBQ0EsT0FBTzM4QixLQUFLdThCLEtBQUtqQixVQUFVRSxhQUMvQixDQUN5RSxlQUFBb0IsQ0FBZ0IxOEIsR0FDckYsT0FBT0YsS0FBS3U4QixLQUFLOTdCLFFBQVUsR0FBS1QsS0FBS3U4QixLQUFLaHpCLElBQUl2SixLQUFLdThCLEtBQUs5N0IsT0FBUyxLQUFPUCxDQUM1RSxDQUM4RixrQkFBQTI4QixHQUMxRixPQUFPNzhCLEtBQUt1OEIsS0FBS2h6QixJQUFJdkosS0FBS3U4QixLQUFLOTdCLE9BQVMsRUFDNUMsQ0FDcUUsaUJBQUFxOEIsR0FDakUsT0FBTzk4QixLQUFLdThCLEtBQUtqQixTQUNyQixDQUNBLE9BQUE5RixDQUFRdDFCLEdBQ0osT0FBTyxPQUFTQSxHQUFLLElBQU0yN0IsR0FBYVosV0FBV2o3QixLQUFLdThCLEtBQU1yOEIsRUFBRXE4QixLQUNwRSxDQUNBLFFBQUFyaUIsR0FDSSxPQUFPbGEsS0FBS3U4QixLQUFLcmlCLFVBQ3JCLENBQ0EsaUJBQU8rZ0IsQ0FBVy82QixFQUFHbWhCLEdBQ2pCLE9BQU93YSxHQUFhWixXQUFXLzZCLEVBQUVxOEIsS0FBTWxiLEVBQUVrYixLQUM3QyxDQUNBLG9CQUFPUSxDQUFjNzhCLEdBQ2pCLE9BQU9BLEVBQUVPLE9BQVMsR0FBSyxDQUMzQixDQU1PLG1CQUFPdThCLENBQWE5OEIsR0FDdkIsT0FBTyxJQUFJbzhCLEdBQVksSUFBSVQsR0FBYTM3QixFQUFFd1gsU0FDOUMsRUFnSXdELFNBQVN1bEIsR0FBcUMvOEIsR0FDdEcsT0FBTyxJQUFJZzlCLEdBQVloOUIsRUFBRWk5QixTQUFVajlCLEVBQUVpSCxLQUFNLEVBQy9DLENBS0ksTUFBTSsxQixHQUNOLFdBQUF2NUIsQ0FLQXpELEVBS0FtaEIsRUFJQTNHLEdBQ0kxYSxLQUFLbTlCLFNBQVdqOUIsRUFBR0YsS0FBS285QixZQUFjL2IsRUFBR3JoQixLQUFLcTlCLGVBQWlCM2lCLENBQ25FLENBQ21FLFVBQU9pVixHQUN0RSxPQUFPLElBQUl1TixHQUFZM0MsR0FBZ0I1SyxNQUFPMk0sR0FBWUksU0FBVSxFQUN4RSxDQUNrRSxVQUFPOU0sR0FDckUsT0FBTyxJQUFJc04sR0FBWTNDLEdBQWdCM0ssTUFBTzBNLEdBQVlJLFNBQVUsRUFDeEUsRUFHSixTQUFTWSxHQUFnQ3A5QixFQUFHbWhCLEdBQ3hDLElBQUkzRyxFQUFJeGEsRUFBRWk5QixTQUFTekMsVUFBVXJaLEVBQUU4YixVQUMvQixPQUFPLElBQU16aUIsRUFBSUEsR0FBS0EsRUFBSTRoQixHQUFZckIsV0FBVy82QixFQUFFazlCLFlBQWEvYixFQUFFK2IsYUFDbEUsSUFBTTFpQixFQUFJQSxFQUFJK2UsR0FBOEJ2NUIsRUFBRW05QixlQUFnQmhjLEVBQUVnYyxnQkFDcEUsQ0FpQkksTUFBTSxHQUFJLDRIQVNWLE1BQU1FLEdBQ04sV0FBQTU1QixHQUNJM0QsS0FBS3c5QixxQkFBdUIsRUFDaEMsQ0FDQSxzQkFBQUMsQ0FBdUJ2OUIsR0FDbkJGLEtBQUt3OUIscUJBQXFCaDdCLEtBQUt0QyxFQUNuQyxDQUNBLHFCQUFBdzlCLEdBQ0kxOUIsS0FBS3c5QixxQkFBcUJqVixTQUFTcm9CLEdBQUtBLEtBQzVDLEVBNEJBNlIsZUFBZTRyQixHQUFtQ3o5QixHQUNsRCxHQUFJQSxFQUFFZ0csT0FBUyxHQUFFNHdCLHFCQUF1QjUyQixFQUFFaUcsVUFBWSxHQUFHLE1BQU1qRyxFQUMvRDQxQixHQUFtQixhQUFjLGtDQUNyQyxDQThCSSxNQUFNOEgsR0FDTixXQUFBajZCLENBQVl6RCxHQUdSRixLQUFLNjlCLGFBQWUsS0FBTTc5QixLQUFLODlCLGNBQWdCLEtBRS9DOTlCLEtBQUtvUixZQUFTLEVBQVFwUixLQUFLaUYsV0FBUSxFQUFRakYsS0FBSys5QixRQUFTLEVBR3pELzlCLEtBQUtnK0Isa0JBQW1CLEVBQUk5OUIsR0FBR0EsSUFDM0JGLEtBQUsrOUIsUUFBUyxFQUFJLzlCLEtBQUtvUixPQUFTbFIsRUFBR0YsS0FBSzY5QixjQUd4Qzc5QixLQUFLNjlCLGFBQWEzOUIsRUFDckIsSUFBSUEsSUFDREYsS0FBSys5QixRQUFTLEVBQUkvOUIsS0FBS2lGLE1BQVEvRSxFQUFHRixLQUFLODlCLGVBQWlCOTlCLEtBQUs4OUIsY0FBYzU5QixFQUM5RSxHQUNMLENBQ0EsTUFBTUEsR0FDRixPQUFPRixLQUFLeWhCLFVBQUssRUFBUXZoQixFQUM3QixDQUNBLElBQUF1aEIsQ0FBS3ZoQixFQUFHbWhCLEdBQ0osT0FBT3JoQixLQUFLZytCLGtCQUFvQjlILEtBQVFsMkIsS0FBS2crQixrQkFBbUIsRUFBSWgrQixLQUFLKzlCLE9BQVMvOUIsS0FBS2lGLE1BQVFqRixLQUFLaStCLFlBQVk1YyxFQUFHcmhCLEtBQUtpRixPQUFTakYsS0FBS2srQixZQUFZaCtCLEVBQUdGLEtBQUtvUixRQUFVLElBQUl3c0IsSUFBbUIsQ0FBRWxqQixFQUFHTCxLQUM1THJhLEtBQUs2OUIsYUFBZXhjLElBQ2hCcmhCLEtBQUtrK0IsWUFBWWgrQixFQUFHbWhCLEdBQUdJLEtBQUsvRyxFQUFHTCxFQUFFLEVBQ2xDcmEsS0FBSzg5QixjQUFnQjU5QixJQUNwQkYsS0FBS2krQixZQUFZNWMsRUFBR25oQixHQUFHdWhCLEtBQUsvRyxFQUFHTCxFQUFFLENBRXhDLEdBQ0wsQ0FDQSxTQUFBOGpCLEdBQ0ksT0FBTyxJQUFJdjRCLFNBQVEsQ0FBRTFGLEVBQUdtaEIsS0FDcEJyaEIsS0FBS3loQixLQUFLdmhCLEVBQUdtaEIsRUFDaEIsR0FDTCxDQUNBLGdCQUFBK2MsQ0FBaUJsK0IsR0FDYixJQUNJLE1BQU1taEIsRUFBSW5oQixJQUNWLE9BQU9taEIsYUFBYXVjLEdBQXFCdmMsRUFBSXVjLEdBQW1CbDRCLFFBQVEyYixFQUM1RSxDQUFFLE1BQU9uaEIsR0FDTCxPQUFPMDlCLEdBQW1CbjRCLE9BQU92RixFQUNyQyxDQUNKLENBQ0EsV0FBQWcrQixDQUFZaCtCLEVBQUdtaEIsR0FDWCxPQUFPbmhCLEVBQUlGLEtBQUtvK0Isa0JBQWlCLElBQU9sK0IsRUFBRW1oQixLQUFPdWMsR0FBbUJsNEIsUUFBUTJiLEVBQ2hGLENBQ0EsV0FBQTRjLENBQVkvOUIsRUFBR21oQixHQUNYLE9BQU9uaEIsRUFBSUYsS0FBS28rQixrQkFBaUIsSUFBT2wrQixFQUFFbWhCLEtBQU91YyxHQUFtQm40QixPQUFPNGIsRUFDL0UsQ0FDQSxjQUFPM2IsQ0FBUXhGLEdBQ1gsT0FBTyxJQUFJMDlCLElBQW1CLENBQUV2YyxFQUFHM0csS0FDL0IyRyxFQUFFbmhCLEVBQ0wsR0FDTCxDQUNBLGFBQU91RixDQUFPdkYsR0FDVixPQUFPLElBQUkwOUIsSUFBbUIsQ0FBRXZjLEVBQUczRyxLQUMvQkEsRUFBRXhhLEVBQ0wsR0FDTCxDQUNBLGNBQU9tK0IsQ0FHUG4rQixHQUNJLE9BQU8sSUFBSTA5QixJQUFtQixDQUFFdmMsRUFBRzNHLEtBQy9CLElBQUlMLEVBQUksRUFBRzdaLEVBQUksRUFBR29hLEdBQUksRUFDdEIxYSxFQUFFcW9CLFNBQVNyb0IsTUFDTG1hLEVBQUduYSxFQUFFdWhCLE1BQUssT0FDTmpoQixFQUFHb2EsR0FBS3BhLElBQU02WixHQUFLZ0gsR0FDeEIsSUFBSW5oQixHQUFLd2EsRUFBRXhhLElBQ2YsSUFBSTBhLEdBQUksRUFBSXBhLElBQU02WixHQUFLZ0gsR0FDM0IsR0FDTCxDQU1PLFNBQU95UixDQUFHNXlCLEdBQ2IsSUFBSW1oQixFQUFJdWMsR0FBbUJsNEIsU0FBUSxHQUNuQyxJQUFLLE1BQU1nVixLQUFLeGEsRUFBR21oQixFQUFJQSxFQUFFSSxNQUFNdmhCLEdBQUtBLEVBQUkwOUIsR0FBbUJsNEIsUUFBUXhGLEdBQUt3YSxNQUN4RSxPQUFPMkcsQ0FDWCxDQUNBLGNBQU9rSCxDQUFRcm9CLEVBQUdtaEIsR0FDZCxNQUFNM0csRUFBSSxHQUNWLE9BQU94YSxFQUFFcW9CLFNBQVEsQ0FBRXJvQixFQUFHbWEsS0FDbEJLLEVBQUVsWSxLQUFLNmUsRUFBRWhSLEtBQUtyUSxLQUFNRSxFQUFHbWEsR0FDMUIsSUFBSXJhLEtBQUtxK0IsUUFBUTNqQixFQUN0QixDQUdPLGVBQU80akIsQ0FBU3ArQixFQUFHbWhCLEdBQ3RCLE9BQU8sSUFBSXVjLElBQW1CLENBQUVsakIsRUFBR0wsS0FDL0IsTUFBTTdaLEVBQUlOLEVBQUVPLE9BQVFtYSxFQUFJLElBQUluWixNQUFNakIsR0FDbEMsSUFBSXFhLEVBQUksRUFDUixJQUFLLElBQUkzVCxFQUFJLEVBQUdBLEVBQUkxRyxFQUFHMEcsSUFBSyxDQUN4QixNQUFNSSxFQUFJSixFQUNWbWEsRUFBRW5oQixFQUFFb0gsSUFBSW1hLE1BQU12aEIsSUFDVjBhLEVBQUV0VCxHQUFLcEgsSUFBSzJhLEVBQUdBLElBQU1yYSxHQUFLa2EsRUFBRUUsRUFDL0IsSUFBSTFhLEdBQUttYSxFQUFFbmEsSUFDaEIsQ0FDSCxHQUNMLENBTU8sY0FBT3ErQixDQUFRcitCLEVBQUdtaEIsR0FDckIsT0FBTyxJQUFJdWMsSUFBbUIsQ0FBRWxqQixFQUFHTCxLQUMvQixNQUFNOVYsRUFBVSxNQUNaLElBQU9yRSxJQUFNbWhCLElBQUlJLE1BQUssS0FDbEJsZCxHQUNILEdBQUc4VixHQUFLSyxHQUFHLEVBRWhCblcsR0FDSCxHQUNMLEVBOFB5RCxTQUFTaTZCLEdBQXNDdCtCLEdBR3hHLE1BQU8sOEJBQWdDQSxFQUFFNEQsSUFDN0MsQ0FpU0ksTUFBTTI2QixHQUNOLFdBQUE5NkIsQ0FBWXpELEVBQUdtaEIsR0FDWHJoQixLQUFLMCtCLGNBQWdCeCtCLEVBQUdtaEIsSUFBTUEsRUFBRXNkLHNCQUF3QnorQixHQUFLRixLQUFLNCtCLEdBQUcxK0IsR0FBSUYsS0FBSzYrQixHQUFLMytCLEdBQUttaEIsRUFBRXlkLG9CQUFvQjUrQixHQUNsSCxDQUNBLEVBQUEwK0IsQ0FBRzErQixHQUNDLE9BQU9GLEtBQUswK0IsY0FBZ0JqbEIsS0FBS21XLElBQUkxdkIsRUFBR0YsS0FBSzArQixlQUFnQjErQixLQUFLMCtCLGFBQ3RFLENBQ0EsSUFBQWpkLEdBQ0ksTUFBTXZoQixJQUFNRixLQUFLMCtCLGNBQ2pCLE9BQU8xK0IsS0FBSzYrQixJQUFNNytCLEtBQUs2K0IsR0FBRzMrQixHQUFJQSxDQUNsQyxFQVFKLFNBQVM2K0IsR0FBNEI3K0IsR0FDakMsT0FBTyxNQUFRQSxDQUNuQixDQUVnRCxTQUFTOCtCLEdBQXlCOStCLEdBRzlFLE9BQU8sSUFBTUEsR0FBSyxFQUFJQSxJQUFLLEdBQy9CLENBYkF1K0IsR0FBeUJsTSxJQUFNLEVBZ08zQixTQUFTME0sR0FBcUIvK0IsR0FDOUIsSUFBSW1oQixFQUFJLEVBQ1IsSUFBSyxNQUFNM0csS0FBS3hhLEVBQUdtRyxPQUFPRSxVQUFVeVUsZUFBZTNLLEtBQUtuUSxFQUFHd2EsSUFBTTJHLElBQ2pFLE9BQU9BLENBQ1gsQ0FFQSxTQUFTa0gsR0FBUXJvQixFQUFHbWhCLEdBQ2hCLElBQUssTUFBTTNHLEtBQUt4YSxFQUFHbUcsT0FBT0UsVUFBVXlVLGVBQWUzSyxLQUFLblEsRUFBR3dhLElBQU0yRyxFQUFFM0csRUFBR3hhLEVBQUV3YSxHQUM1RSxDQXlCQSxNQUFNd2tCLEdBQ0YsV0FBQXY3QixDQUFZekQsRUFBR21oQixHQUNYcmhCLEtBQUtpN0IsV0FBYS82QixFQUFHRixLQUFLbS9CLEtBQU85ZCxHQUFLK2QsR0FBU0MsS0FDbkQsQ0FFQSxNQUFBQyxDQUFPcC9CLEVBQUdtaEIsR0FDTixPQUFPLElBQUk2ZCxHQUFVbC9CLEtBQUtpN0IsV0FBWWo3QixLQUFLbS9CLEtBQUtHLE9BQU9wL0IsRUFBR21oQixFQUFHcmhCLEtBQUtpN0IsWUFBWXNFLEtBQUssS0FBTSxLQUFNSCxHQUFTSSxNQUFPLEtBQU0sTUFDekgsQ0FFQSxNQUFBQyxDQUFPdi9CLEdBQ0gsT0FBTyxJQUFJZy9CLEdBQVVsL0IsS0FBS2k3QixXQUFZajdCLEtBQUttL0IsS0FBS00sT0FBT3YvQixFQUFHRixLQUFLaTdCLFlBQVlzRSxLQUFLLEtBQU0sS0FBTUgsR0FBU0ksTUFBTyxLQUFNLE1BQ3RILENBRUEsR0FBQWoyQixDQUFJckosR0FDQSxJQUFJbWhCLEVBQUlyaEIsS0FBS20vQixLQUNiLE1BQU85ZCxFQUFFb2EsV0FBYSxDQUNsQixNQUFNL2dCLEVBQUkxYSxLQUFLaTdCLFdBQVcvNkIsRUFBR21oQixFQUFFbGEsS0FDL0IsR0FBSSxJQUFNdVQsRUFBRyxPQUFPMkcsRUFBRXRiLE1BQ3RCMlUsRUFBSSxFQUFJMkcsRUFBSUEsRUFBRXFlLEtBQU9obEIsRUFBSSxJQUFNMkcsRUFBSUEsRUFBRXNlLE1BQ3pDLENBQ0EsT0FBTyxJQUNYLENBR0EsT0FBQXhsQixDQUFRamEsR0FFSixJQUFJbWhCLEVBQUksRUFBRzNHLEVBQUkxYSxLQUFLbS9CLEtBQ3BCLE1BQU96a0IsRUFBRStnQixXQUFhLENBQ2xCLE1BQU1waEIsRUFBSXJhLEtBQUtpN0IsV0FBVy82QixFQUFHd2EsRUFBRXZULEtBQy9CLEdBQUksSUFBTWtULEVBQUcsT0FBT2dILEVBQUkzRyxFQUFFZ2xCLEtBQUt4YixLQUMvQjdKLEVBQUksRUFBSUssRUFBSUEsRUFBRWdsQixNQUVkcmUsR0FBSzNHLEVBQUVnbEIsS0FBS3hiLEtBQU8sRUFBR3hKLEVBQUlBLEVBQUVpbEIsTUFDaEMsQ0FFUSxPQUFRLENBQ3BCLENBQ0EsT0FBQWxFLEdBQ0ksT0FBT3o3QixLQUFLbS9CLEtBQUsxRCxTQUNyQixDQUVBLFFBQUl2WCxHQUNBLE9BQU9sa0IsS0FBS20vQixLQUFLamIsSUFDckIsQ0FFQSxNQUFBMGIsR0FDSSxPQUFPNS9CLEtBQUttL0IsS0FBS1MsUUFDckIsQ0FFQSxNQUFBQyxHQUNJLE9BQU83L0IsS0FBS20vQixLQUFLVSxRQUNyQixDQUtBLGdCQUFBQyxDQUFpQjUvQixHQUNiLE9BQU9GLEtBQUttL0IsS0FBS1csaUJBQWlCNS9CLEVBQ3RDLENBQ0EsT0FBQXFvQixDQUFRcm9CLEdBQ0pGLEtBQUs4L0Isa0JBQWlCLENBQUV6ZSxFQUFHM0csS0FBT3hhLEVBQUVtaEIsRUFBRzNHLElBQUksSUFDL0MsQ0FDQSxRQUFBUixHQUNJLE1BQU1oYSxFQUFJLEdBQ1YsT0FBT0YsS0FBSzgvQixrQkFBaUIsQ0FBRXplLEVBQUczRyxLQUFPeGEsRUFBRXNDLEtBQUssR0FBRzZlLEtBQUszRyxNQUFNLEtBQU8sSUFBSXhhLEVBQUV1QyxLQUFLLFFBQ3BGLENBTUEsZ0JBQUFzOUIsQ0FBaUI3L0IsR0FDYixPQUFPRixLQUFLbS9CLEtBQUtZLGlCQUFpQjcvQixFQUN0QyxDQUVBLFdBQUE4L0IsR0FDSSxPQUFPLElBQUlDLEdBQWtCamdDLEtBQUttL0IsS0FBTSxLQUFNbi9CLEtBQUtpN0IsWUFBWSxFQUNuRSxDQUNBLGVBQUFpRixDQUFnQmhnQyxHQUNaLE9BQU8sSUFBSSsvQixHQUFrQmpnQyxLQUFLbS9CLEtBQU1qL0IsRUFBR0YsS0FBS2k3QixZQUFZLEVBQ2hFLENBQ0Esa0JBQUFrRixHQUNJLE9BQU8sSUFBSUYsR0FBa0JqZ0MsS0FBS20vQixLQUFNLEtBQU1uL0IsS0FBS2k3QixZQUFZLEVBQ25FLENBQ0Esc0JBQUFtRixDQUF1QmxnQyxHQUNuQixPQUFPLElBQUkrL0IsR0FBa0JqZ0MsS0FBS20vQixLQUFNai9CLEVBQUdGLEtBQUtpN0IsWUFBWSxFQUNoRSxFQUtKLE1BQU1nRixHQUNGLFdBQUF0OEIsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ2pCcmEsS0FBS3FnQyxVQUFZaG1CLEVBQUdyYSxLQUFLc2dDLFVBQVksR0FDckMsSUFBSTkvQixFQUFJLEVBQ1IsTUFBT04sRUFBRXU3QixXQUFhLEdBQUlqN0IsRUFBSTZnQixFQUFJM0csRUFBRXhhLEVBQUVpSCxJQUFLa2EsR0FBSyxFQUVoREEsR0FBS2hILElBQU03WixJQUFNLEdBQUlBLEVBQUksRUFFekJOLEVBQUlGLEtBQUtxZ0MsVUFBWW5nQyxFQUFFdy9CLEtBQU94L0IsRUFBRXkvQixVQUFZLENBQ3hDLEdBQUksSUFBTW4vQixFQUFHLENBR1RSLEtBQUtzZ0MsVUFBVTk5QixLQUFLdEMsR0FDcEIsS0FDSixDQUdBRixLQUFLc2dDLFVBQVU5OUIsS0FBS3RDLEdBQUlBLEVBQUlGLEtBQUtxZ0MsVUFBWW5nQyxFQUFFeS9CLE1BQVF6L0IsRUFBRXcvQixJQUM3RCxDQUNKLENBQ0EsT0FBQWEsR0FDSSxJQUFJcmdDLEVBQUlGLEtBQUtzZ0MsVUFBVXRvQixNQUN2QixNQUFNcUosRUFBSSxDQUNObGEsSUFBS2pILEVBQUVpSCxJQUNQcEIsTUFBTzdGLEVBQUU2RixPQUViLEdBQUkvRixLQUFLcWdDLFVBQVcsSUFBS25nQyxFQUFJQSxFQUFFdy9CLE1BQU94L0IsRUFBRXU3QixXQUFhejdCLEtBQUtzZ0MsVUFBVTk5QixLQUFLdEMsR0FBSUEsRUFBSUEsRUFBRXkvQixXQUFZLElBQUt6L0IsRUFBSUEsRUFBRXkvQixPQUFRei9CLEVBQUV1N0IsV0FBYXo3QixLQUFLc2dDLFVBQVU5OUIsS0FBS3RDLEdBQ3JKQSxFQUFJQSxFQUFFdy9CLEtBQ04sT0FBT3JlLENBQ1gsQ0FDQSxPQUFBbWYsR0FDSSxPQUFPeGdDLEtBQUtzZ0MsVUFBVTcvQixPQUFTLENBQ25DLENBQ0EsSUFBQWdnQyxHQUNJLEdBQUksSUFBTXpnQyxLQUFLc2dDLFVBQVU3L0IsT0FBUSxPQUFPLEtBQ3hDLE1BQU1QLEVBQUlGLEtBQUtzZ0MsVUFBVXRnQyxLQUFLc2dDLFVBQVU3L0IsT0FBUyxHQUNqRCxNQUFPLENBQ0gwRyxJQUFLakgsRUFBRWlILElBQ1BwQixNQUFPN0YsRUFBRTZGLE1BRWpCLEVBS0osTUFBTXE1QixHQUNGLFdBQUF6N0IsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixHQUNwQlIsS0FBS21ILElBQU1qSCxFQUFHRixLQUFLK0YsTUFBUXNiLEVBQUdyaEIsS0FBSzBnQyxNQUFRLE1BQVFobUIsRUFBSUEsRUFBSTBrQixHQUFTdUIsSUFBSzNnQyxLQUFLMC9CLEtBQU8sTUFBUXJsQixFQUFJQSxFQUFJK2tCLEdBQVNDLE1BQzlHci9CLEtBQUsyL0IsTUFBUSxNQUFRbi9CLEVBQUlBLEVBQUk0K0IsR0FBU0MsTUFBT3IvQixLQUFLa2tCLEtBQU9sa0IsS0FBSzAvQixLQUFLeGIsS0FBTyxFQUFJbGtCLEtBQUsyL0IsTUFBTXpiLElBQzdGLENBRUEsSUFBQXFiLENBQUtyL0IsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEdBQ2IsT0FBTyxJQUFJNCtCLEdBQVMsTUFBUWwvQixFQUFJQSxFQUFJRixLQUFLbUgsSUFBSyxNQUFRa2EsRUFBSUEsRUFBSXJoQixLQUFLK0YsTUFBTyxNQUFRMlUsRUFBSUEsRUFBSTFhLEtBQUswZ0MsTUFBTyxNQUFRcm1CLEVBQUlBLEVBQUlyYSxLQUFLMC9CLEtBQU0sTUFBUWwvQixFQUFJQSxFQUFJUixLQUFLMi9CLE1BQzFKLENBQ0EsT0FBQWxFLEdBQ0ksT0FBTyxDQUNYLENBS0EsZ0JBQUFxRSxDQUFpQjUvQixHQUNiLE9BQU9GLEtBQUswL0IsS0FBS0ksaUJBQWlCNS9CLElBQU1BLEVBQUVGLEtBQUttSCxJQUFLbkgsS0FBSytGLFFBQVUvRixLQUFLMi9CLE1BQU1HLGlCQUFpQjUvQixFQUNuRyxDQUtBLGdCQUFBNi9CLENBQWlCNy9CLEdBQ2IsT0FBT0YsS0FBSzIvQixNQUFNSSxpQkFBaUI3L0IsSUFBTUEsRUFBRUYsS0FBS21ILElBQUtuSCxLQUFLK0YsUUFBVS9GLEtBQUswL0IsS0FBS0ssaUJBQWlCNy9CLEVBQ25HLENBRUEsR0FBQXl2QixHQUNJLE9BQU8zdkIsS0FBSzAvQixLQUFLakUsVUFBWXo3QixLQUFPQSxLQUFLMC9CLEtBQUsvUCxLQUNsRCxDQUVBLE1BQUFpUSxHQUNJLE9BQU81L0IsS0FBSzJ2QixNQUFNeG9CLEdBQ3RCLENBRUEsTUFBQTA0QixHQUNJLE9BQU83L0IsS0FBSzIvQixNQUFNbEUsVUFBWXo3QixLQUFLbUgsSUFBTW5ILEtBQUsyL0IsTUFBTUUsUUFDeEQsQ0FFQSxNQUFBUCxDQUFPcC9CLEVBQUdtaEIsRUFBRzNHLEdBQ1QsSUFBSUwsRUFBSXJhLEtBQ1IsTUFBTVEsRUFBSWthLEVBQUV4YSxFQUFHbWEsRUFBRWxULEtBQ2pCLE9BQU9rVCxFQUFJN1osRUFBSSxFQUFJNlosRUFBRWtsQixLQUFLLEtBQU0sS0FBTSxLQUFNbGxCLEVBQUVxbEIsS0FBS0osT0FBT3AvQixFQUFHbWhCLEVBQUczRyxHQUFJLE1BQVEsSUFBTWxhLEVBQUk2WixFQUFFa2xCLEtBQUssS0FBTWxlLEVBQUcsS0FBTSxLQUFNLE1BQVFoSCxFQUFFa2xCLEtBQUssS0FBTSxLQUFNLEtBQU0sS0FBTWxsQixFQUFFc2xCLE1BQU1MLE9BQU9wL0IsRUFBR21oQixFQUFHM0csSUFDOUtMLEVBQUV1bUIsT0FDTixDQUNBLFNBQUFDLEdBQ0ksR0FBSTdnQyxLQUFLMC9CLEtBQUtqRSxVQUFXLE9BQU8yRCxHQUFTQyxNQUN6QyxJQUFJbi9CLEVBQUlGLEtBQ1IsT0FBT0UsRUFBRXcvQixLQUFLb0IsU0FBVzVnQyxFQUFFdy9CLEtBQUtBLEtBQUtvQixVQUFZNWdDLEVBQUlBLEVBQUU2Z0MsZUFBZ0I3Z0MsRUFBSUEsRUFBRXEvQixLQUFLLEtBQU0sS0FBTSxLQUFNci9CLEVBQUV3L0IsS0FBS21CLFlBQWEsTUFDeEgzZ0MsRUFBRTBnQyxPQUNOLENBRUEsTUFBQW5CLENBQU92L0IsRUFBR21oQixHQUNOLElBQUkzRyxFQUFHTCxFQUFJcmEsS0FDWCxHQUFJcWhCLEVBQUVuaEIsRUFBR21hLEVBQUVsVCxLQUFPLEVBQUdrVCxFQUFFcWxCLEtBQUtqRSxXQUFhcGhCLEVBQUVxbEIsS0FBS29CLFNBQVd6bUIsRUFBRXFsQixLQUFLQSxLQUFLb0IsVUFBWXptQixFQUFJQSxFQUFFMG1CLGVBQ3pGMW1CLEVBQUlBLEVBQUVrbEIsS0FBSyxLQUFNLEtBQU0sS0FBTWxsQixFQUFFcWxCLEtBQUtELE9BQU92L0IsRUFBR21oQixHQUFJLFVBQVksQ0FDMUQsR0FBSWhILEVBQUVxbEIsS0FBS29CLFVBQVl6bUIsRUFBSUEsRUFBRTJtQixlQUFnQjNtQixFQUFFc2xCLE1BQU1sRSxXQUFhcGhCLEVBQUVzbEIsTUFBTW1CLFNBQVd6bUIsRUFBRXNsQixNQUFNRCxLQUFLb0IsVUFBWXptQixFQUFJQSxFQUFFNG1CLGdCQUNwSCxJQUFNNWYsRUFBRW5oQixFQUFHbWEsRUFBRWxULEtBQU0sQ0FDZixHQUFJa1QsRUFBRXNsQixNQUFNbEUsVUFBVyxPQUFPMkQsR0FBU0MsTUFDdkMza0IsRUFBSUwsRUFBRXNsQixNQUFNaFEsTUFBT3RWLEVBQUlBLEVBQUVrbEIsS0FBSzdrQixFQUFFdlQsSUFBS3VULEVBQUUzVSxNQUFPLEtBQU0sS0FBTXNVLEVBQUVzbEIsTUFBTWtCLFlBQ3RFLENBQ0F4bUIsRUFBSUEsRUFBRWtsQixLQUFLLEtBQU0sS0FBTSxLQUFNLEtBQU1sbEIsRUFBRXNsQixNQUFNRixPQUFPdi9CLEVBQUdtaEIsR0FDekQsQ0FDQSxPQUFPaEgsRUFBRXVtQixPQUNiLENBQ0EsS0FBQUUsR0FDSSxPQUFPOWdDLEtBQUswZ0MsS0FDaEIsQ0FFQSxLQUFBRSxHQUNJLElBQUkxZ0MsRUFBSUYsS0FDUixPQUFPRSxFQUFFeS9CLE1BQU1tQixVQUFZNWdDLEVBQUV3L0IsS0FBS29CLFVBQVk1Z0MsRUFBSUEsRUFBRWdoQyxjQUFlaGhDLEVBQUV3L0IsS0FBS29CLFNBQVc1Z0MsRUFBRXcvQixLQUFLQSxLQUFLb0IsVUFBWTVnQyxFQUFJQSxFQUFFOGdDLGVBQ25IOWdDLEVBQUV3L0IsS0FBS29CLFNBQVc1Z0MsRUFBRXkvQixNQUFNbUIsVUFBWTVnQyxFQUFJQSxFQUFFaWhDLGFBQWNqaEMsQ0FDOUQsQ0FDQSxXQUFBNmdDLEdBQ0ksSUFBSTdnQyxFQUFJRixLQUFLbWhDLFlBQ2IsT0FBT2poQyxFQUFFeS9CLE1BQU1ELEtBQUtvQixVQUFZNWdDLEVBQUlBLEVBQUVxL0IsS0FBSyxLQUFNLEtBQU0sS0FBTSxLQUFNci9CLEVBQUV5L0IsTUFBTXFCLGVBQzNFOWdDLEVBQUlBLEVBQUVnaEMsYUFBY2hoQyxFQUFJQSxFQUFFaWhDLGFBQWNqaEMsQ0FDNUMsQ0FDQSxZQUFBK2dDLEdBQ0ksSUFBSS9nQyxFQUFJRixLQUFLbWhDLFlBQ2IsT0FBT2poQyxFQUFFdy9CLEtBQUtBLEtBQUtvQixVQUFZNWdDLEVBQUlBLEVBQUU4Z0MsY0FBZTlnQyxFQUFJQSxFQUFFaWhDLGFBQWNqaEMsQ0FDNUUsQ0FDQSxVQUFBZ2hDLEdBQ0ksTUFBTWhoQyxFQUFJRixLQUFLdS9CLEtBQUssS0FBTSxLQUFNSCxHQUFTdUIsSUFBSyxLQUFNM2dDLEtBQUsyL0IsTUFBTUQsTUFDL0QsT0FBTzEvQixLQUFLMi9CLE1BQU1KLEtBQUssS0FBTSxLQUFNdi9CLEtBQUswZ0MsTUFBT3hnQyxFQUFHLEtBQ3RELENBQ0EsV0FBQThnQyxHQUNJLE1BQU05Z0MsRUFBSUYsS0FBS3UvQixLQUFLLEtBQU0sS0FBTUgsR0FBU3VCLElBQUszZ0MsS0FBSzAvQixLQUFLQyxNQUFPLE1BQy9ELE9BQU8zL0IsS0FBSzAvQixLQUFLSCxLQUFLLEtBQU0sS0FBTXYvQixLQUFLMGdDLE1BQU8sS0FBTXhnQyxFQUN4RCxDQUNBLFNBQUFpaEMsR0FDSSxNQUFNamhDLEVBQUlGLEtBQUswL0IsS0FBS0gsS0FBSyxLQUFNLE1BQU92L0IsS0FBSzAvQixLQUFLZ0IsTUFBTyxLQUFNLE1BQU9yZixFQUFJcmhCLEtBQUsyL0IsTUFBTUosS0FBSyxLQUFNLE1BQU92L0IsS0FBSzIvQixNQUFNZSxNQUFPLEtBQU0sTUFDN0gsT0FBTzFnQyxLQUFLdS9CLEtBQUssS0FBTSxNQUFPdi9CLEtBQUswZ0MsTUFBT3hnQyxFQUFHbWhCLEVBQ2pELENBRUEsYUFBQStmLEdBQ0ksTUFBTWxoQyxFQUFJRixLQUFLcWhDLFFBQ2YsT0FBTzVuQixLQUFLbVosSUFBSSxFQUFHMXlCLElBQU1GLEtBQUtra0IsS0FBTyxDQUN6QyxDQUdBLEtBQUFtZCxHQUNJLEdBQUlyaEMsS0FBSzhnQyxTQUFXOWdDLEtBQUswL0IsS0FBS29CLFFBQVMsTUFBTTVLLEtBQzdDLEdBQUlsMkIsS0FBSzIvQixNQUFNbUIsUUFBUyxNQUFNNUssS0FDOUIsTUFBTWgyQixFQUFJRixLQUFLMC9CLEtBQUsyQixRQUNwQixHQUFJbmhDLElBQU1GLEtBQUsyL0IsTUFBTTBCLFFBQVMsTUFBTW5MLEtBQ3BDLE9BQU9oMkIsR0FBS0YsS0FBSzhnQyxRQUFVLEVBQUksRUFDbkMsRUFNSjFCLEdBQVNDLE1BQVEsS0FBTUQsR0FBU3VCLEtBQU0sRUFBSXZCLEdBQVNJLE9BQVEsRUFHM0RKLEdBQVNDLE1BQVEsSUFFakIsTUFDSSxXQUFBMTdCLEdBQ0kzRCxLQUFLa2tCLEtBQU8sQ0FDaEIsQ0FDQSxPQUFJL2MsR0FDQSxNQUFNK3VCLElBQ1YsQ0FDQSxTQUFJbndCLEdBQ0EsTUFBTW13QixJQUNWLENBQ0EsU0FBSXdLLEdBQ0EsTUFBTXhLLElBQ1YsQ0FDQSxRQUFJd0osR0FDQSxNQUFNeEosSUFDVixDQUNBLFNBQUl5SixHQUNBLE1BQU16SixJQUNWLENBRUEsSUFBQXFKLENBQUtyL0IsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEdBQ2IsT0FBT1IsSUFDWCxDQUVBLE1BQUFzL0IsQ0FBT3AvQixFQUFHbWhCLEVBQUczRyxHQUNULE9BQU8sSUFBSTBrQixHQUFTbC9CLEVBQUdtaEIsRUFDM0IsQ0FFQSxNQUFBb2UsQ0FBT3YvQixFQUFHbWhCLEdBQ04sT0FBT3JoQixJQUNYLENBQ0EsT0FBQXk3QixHQUNJLE9BQU8sQ0FDWCxDQUNBLGdCQUFBcUUsQ0FBaUI1L0IsR0FDYixPQUFPLENBQ1gsQ0FDQSxnQkFBQTYvQixDQUFpQjcvQixHQUNiLE9BQU8sQ0FDWCxDQUNBLE1BQUEwL0IsR0FDSSxPQUFPLElBQ1gsQ0FDQSxNQUFBQyxHQUNJLE9BQU8sSUFDWCxDQUNBLEtBQUFpQixHQUNJLE9BQU8sQ0FDWCxDQUVBLGFBQUFNLEdBQ0ksT0FBTyxDQUNYLENBQ0EsS0FBQUMsR0FDSSxPQUFPLENBQ1gsR0EwQkosTUFBTUMsR0FDRixXQUFBMzlCLENBQVl6RCxHQUNSRixLQUFLaTdCLFdBQWEvNkIsRUFBR0YsS0FBSzhHLEtBQU8sSUFBSW80QixHQUFVbC9CLEtBQUtpN0IsV0FDeEQsQ0FDQSxHQUFBdHhCLENBQUl6SixHQUNBLE9BQU8sT0FBU0YsS0FBSzhHLEtBQUt5QyxJQUFJckosRUFDbEMsQ0FDQSxLQUFBcWhDLEdBQ0ksT0FBT3ZoQyxLQUFLOEcsS0FBSzg0QixRQUNyQixDQUNBLElBQUE0QixHQUNJLE9BQU94aEMsS0FBSzhHLEtBQUsrNEIsUUFDckIsQ0FDQSxRQUFJM2IsR0FDQSxPQUFPbGtCLEtBQUs4RyxLQUFLb2QsSUFDckIsQ0FDQSxPQUFBL0osQ0FBUWphLEdBQ0osT0FBT0YsS0FBSzhHLEtBQUtxVCxRQUFRamEsRUFDN0IsQ0FDNkQsT0FBQXFvQixDQUFRcm9CLEdBQ2pFRixLQUFLOEcsS0FBS2c1QixrQkFBaUIsQ0FBRXplLEVBQUczRyxLQUFPeGEsRUFBRW1oQixJQUFJLElBQ2pELENBQzhFLGNBQUFvZ0IsQ0FBZXZoQyxFQUFHbWhCLEdBQzVGLE1BQU0zRyxFQUFJMWEsS0FBSzhHLEtBQUtvNUIsZ0JBQWdCaGdDLEVBQUUsSUFDdEMsS0FBTXdhLEVBQUU4bEIsV0FBYSxDQUNqQixNQUFNbm1CLEVBQUlLLEVBQUU2bEIsVUFDWixHQUFJdmdDLEtBQUtpN0IsV0FBVzVnQixFQUFFbFQsSUFBS2pILEVBQUUsS0FBTyxFQUFHLE9BQ3ZDbWhCLEVBQUVoSCxFQUFFbFQsSUFDUixDQUNKLENBR08sWUFBQXU2QixDQUFheGhDLEVBQUdtaEIsR0FDbkIsSUFBSTNHLEVBQ0osSUFBS0EsT0FBSSxJQUFXMkcsRUFBSXJoQixLQUFLOEcsS0FBS281QixnQkFBZ0I3ZSxHQUFLcmhCLEtBQUs4RyxLQUFLazVCLGNBQWV0bEIsRUFBRThsQixXQUM5RSxJQUFLdGdDLEVBQUV3YSxFQUFFNmxCLFVBQVVwNUIsS0FBTSxNQUVqQyxDQUNtRSxpQkFBQXc2QixDQUFrQnpoQyxHQUNqRixNQUFNbWhCLEVBQUlyaEIsS0FBSzhHLEtBQUtvNUIsZ0JBQWdCaGdDLEdBQ3BDLE9BQU9taEIsRUFBRW1mLFVBQVluZixFQUFFa2YsVUFBVXA1QixJQUFNLElBQzNDLENBQ0EsV0FBQTY0QixHQUNJLE9BQU8sSUFBSTRCLEdBQWtCNWhDLEtBQUs4RyxLQUFLazVCLGNBQzNDLENBQ0EsZUFBQUUsQ0FBZ0JoZ0MsR0FDWixPQUFPLElBQUkwaEMsR0FBa0I1aEMsS0FBSzhHLEtBQUtvNUIsZ0JBQWdCaGdDLEdBQzNELENBQ3dDLEdBQUEwTCxDQUFJMUwsR0FDeEMsT0FBT0YsS0FBS3UvQixLQUFLdi9CLEtBQUs4RyxLQUFLMjRCLE9BQU92L0IsR0FBR28vQixPQUFPcC9CLEdBQUcsR0FDbkQsQ0FDNkIsT0FBT0EsR0FDaEMsT0FBT0YsS0FBSzJKLElBQUl6SixHQUFLRixLQUFLdS9CLEtBQUt2L0IsS0FBSzhHLEtBQUsyNEIsT0FBT3YvQixJQUFNRixJQUMxRCxDQUNBLE9BQUF5N0IsR0FDSSxPQUFPejdCLEtBQUs4RyxLQUFLMjBCLFNBQ3JCLENBQ0EsU0FBQW9HLENBQVUzaEMsR0FDTixJQUFJbWhCLEVBQUlyaEIsS0FFQSxPQUFPcWhCLEVBQUU2QyxLQUFPaGtCLEVBQUVna0IsT0FBUzdDLEVBQUluaEIsRUFBR0EsRUFBSUYsTUFBT0UsRUFBRXFvQixTQUFTcm9CLElBQzVEbWhCLEVBQUlBLEVBQUV6VixJQUFJMUwsRUFDYixJQUFJbWhCLENBQ1QsQ0FDQSxPQUFBbVUsQ0FBUXQxQixHQUNKLEtBQU1BLGFBQWFvaEMsSUFBWSxPQUFPLEVBQ3RDLEdBQUl0aEMsS0FBS2trQixPQUFTaGtCLEVBQUVna0IsS0FBTSxPQUFPLEVBQ2pDLE1BQU03QyxFQUFJcmhCLEtBQUs4RyxLQUFLazVCLGNBQWV0bEIsRUFBSXhhLEVBQUU0RyxLQUFLazVCLGNBQzlDLEtBQU0zZSxFQUFFbWYsV0FBYSxDQUNqQixNQUFNdGdDLEVBQUltaEIsRUFBRWtmLFVBQVVwNUIsSUFBS2tULEVBQUlLLEVBQUU2bEIsVUFBVXA1QixJQUMzQyxHQUFJLElBQU1uSCxLQUFLaTdCLFdBQVcvNkIsRUFBR21hLEdBQUksT0FBTyxDQUM1QyxDQUNBLE9BQU8sQ0FDWCxDQUNBLE9BQUF1aEIsR0FDSSxNQUFNMTdCLEVBQUksR0FDVixPQUFPRixLQUFLdW9CLFNBQVNsSCxJQUNqQm5oQixFQUFFc0MsS0FBSzZlLEVBQ1YsSUFBSW5oQixDQUNULENBQ0EsUUFBQWdhLEdBQ0ksTUFBTWhhLEVBQUksR0FDVixPQUFPRixLQUFLdW9CLFNBQVNsSCxHQUFLbmhCLEVBQUVzQyxLQUFLNmUsS0FBTSxhQUFlbmhCLEVBQUVnYSxXQUFhLEdBQ3pFLENBQ0EsSUFBQXFsQixDQUFLci9CLEdBQ0QsTUFBTW1oQixFQUFJLElBQUlpZ0IsR0FBVXRoQyxLQUFLaTdCLFlBQzdCLE9BQU81WixFQUFFdmEsS0FBTzVHLEVBQUdtaEIsQ0FDdkIsRUFHSixNQUFNdWdCLEdBQ0YsV0FBQWorQixDQUFZekQsR0FDUkYsS0FBSzhoQyxLQUFPNWhDLENBQ2hCLENBQ0EsT0FBQXFnQyxHQUNJLE9BQU92Z0MsS0FBSzhoQyxLQUFLdkIsVUFBVXA1QixHQUMvQixDQUNBLE9BQUFxNUIsR0FDSSxPQUFPeGdDLEtBQUs4aEMsS0FBS3RCLFNBQ3JCLEVBb0RBLE1BQU11QixHQUNOLFdBQUFwK0IsQ0FBWXpELEdBQ1JGLEtBQUtnaUMsT0FBUzloQyxFQUdkQSxFQUFFb1EsS0FBSzByQixHQUFZZixXQUN2QixDQUNBLFlBQU95QixHQUNILE9BQU8sSUFBSXFGLEdBQVUsR0FDekIsQ0FJTyxTQUFBRixDQUFVM2hDLEdBQ2IsSUFBSW1oQixFQUFJLElBQUlpZ0IsR0FBVXRGLEdBQVlmLFlBQ2xDLElBQUssTUFBTS82QixLQUFLRixLQUFLZ2lDLE9BQVEzZ0IsRUFBSUEsRUFBRXpWLElBQUkxTCxHQUN2QyxJQUFLLE1BQU13YSxLQUFLeGEsRUFBR21oQixFQUFJQSxFQUFFelYsSUFBSThPLEdBQzdCLE9BQU8sSUFBSXFuQixHQUFVMWdCLEVBQUV1YSxVQUMzQixDQU1PLE1BQUFxRyxDQUFPL2hDLEdBQ1YsSUFBSyxNQUFNbWhCLEtBQUtyaEIsS0FBS2dpQyxPQUFRLEdBQUkzZ0IsRUFBRXFhLFdBQVd4N0IsR0FBSSxPQUFPLEVBQ3pELE9BQU8sQ0FDWCxDQUNBLE9BQUFzMUIsQ0FBUXQxQixHQUNKLE9BQU93NUIsR0FBc0IxNUIsS0FBS2dpQyxPQUFROWhDLEVBQUU4aEMsUUFBUSxDQUFFOWhDLEVBQUdtaEIsSUFBTW5oQixFQUFFczFCLFFBQVFuVSxJQUM3RSxFQXFCQSxNQUFNNmdCLFdBQW9DdmdDLE1BQzFDLFdBQUFnQyxHQUNJQyxTQUFTQyxXQUFZN0QsS0FBSzhELEtBQU8sbUJBQ3JDLEVBaURBLE1BQU1xK0IsR0FDTixXQUFBeCtCLENBQVl6RCxHQUNSRixLQUFLb2lDLGFBQWVsaUMsQ0FDeEIsQ0FDQSx1QkFBT21pQyxDQUFpQm5pQyxHQUNwQixNQUFNbWhCLEVBQUksU0FBZ0NuaEIsR0FDdEMsSUFDSSxPQUFPbUIsS0FBS25CLEVBQ2hCLENBQUUsTUFBT0EsR0FJTCxLQUFNLG9CQUFzQnlRLGNBQWdCelEsYUFBYXlRLGFBQWUsSUFBSXV4QixHQUE0QiwwQkFBNEJoaUMsR0FBS0EsQ0FDN0ksQ0FDSixDQVRVLENBVW1EQSxHQUM3RCxPQUFPLElBQUlpaUMsR0FBVzlnQixFQUMxQixDQUNBLHFCQUFPaWhCLENBQWVwaUMsR0FHbEIsTUFBTW1oQixFQUlOLFNBQThDbmhCLEdBQzFDLElBQUltaEIsRUFBSSxHQUNSLElBQUssSUFBSTNHLEVBQUksRUFBR0EsRUFBSXhhLEVBQUVPLFNBQVVpYSxFQUFHMkcsR0FBS3JlLE9BQU9DLGFBQWEvQyxFQUFFd2EsSUFDOUQsT0FBTzJHLENBQ1gsQ0FKQSxDQU9IbmhCLEdBQ0csT0FBTyxJQUFJaWlDLEdBQVc5Z0IsRUFDMUIsQ0FDQSxDQUFDa2hCLE9BQU9DLFlBQ0osSUFBSXRpQyxFQUFJLEVBQ1IsTUFBTyxDQUNIdWhCLEtBQU0sSUFBTXZoQixFQUFJRixLQUFLb2lDLGFBQWEzaEMsT0FBUyxDQUN2Q3NGLE1BQU8vRixLQUFLb2lDLGFBQWF6aEMsV0FBV1QsS0FDcENxUSxNQUFNLEdBQ04sQ0FDQXhLLFdBQU8sRUFDUHdLLE1BQU0sR0FHbEIsQ0FDQSxRQUFBa3lCLEdBQ0ksT0FBdUN2aUMsRUFFckNGLEtBQUtvaUMsYUFESXovQixLQUFLekMsR0FEVCxJQUFnQ0EsQ0FHM0MsQ0FDQSxZQUFBd2lDLEdBQ0ksT0FBTyxTQUE4Q3hpQyxHQUNqRCxNQUFNbWhCLEVBQUksSUFBSWtNLFdBQVdydEIsRUFBRU8sUUFDM0IsSUFBSyxJQUFJaWEsRUFBSSxFQUFHQSxFQUFJeGEsRUFBRU8sT0FBUWlhLElBQUsyRyxFQUFFM0csR0FBS3hhLEVBQUVTLFdBQVcrWixHQUN2RCxPQUFPMkcsQ0FDWCxDQUpPLENBc0JOcmhCLEtBQUtvaUMsYUFDVixDQUNBLG1CQUFBTyxHQUNJLE9BQU8sRUFBSTNpQyxLQUFLb2lDLGFBQWEzaEMsTUFDakMsQ0FDQSxTQUFBaTZCLENBQVV4NkIsR0FDTixPQUFPdTVCLEdBQThCejVCLEtBQUtvaUMsYUFBY2xpQyxFQUFFa2lDLGFBQzlELENBQ0EsT0FBQTVNLENBQVF0MUIsR0FDSixPQUFPRixLQUFLb2lDLGVBQWlCbGlDLEVBQUVraUMsWUFDbkMsRUFHSkQsR0FBV1Msa0JBQW9CLElBQUlULEdBQVcsSUFFOUMsTUFBTVUsR0FBSyxJQUFJdlosT0FBTyxpREFLbEIsU0FBU3daLEdBQTZCNWlDLEdBSXRDLEdBQUlpMkIsS0FBdUJqMkIsR0FBSSxpQkFBbUJBLEVBQUcsQ0FJakQsSUFBSW1oQixFQUFJLEVBQ1IsTUFBTTNHLEVBQUltb0IsR0FBR2ptQixLQUFLMWMsR0FDbEIsR0FBSWkyQixLQUF1QnpiLEdBQUlBLEVBQUUsR0FBSSxDQUVqQyxJQUFJeGEsRUFBSXdhLEVBQUUsR0FDVnhhLEdBQUtBLEVBQUksYUFBYTZpQyxPQUFPLEVBQUcsR0FBSTFoQixFQUFJc0IsT0FBT3ppQixFQUNuRCxDQUVRLE1BQU1tYSxFQUFJLElBQUk5TSxLQUFLck4sR0FDM0IsTUFBTyxDQUNIMjVCLFFBQVNwZ0IsS0FBS3VRLE1BQU0zUCxFQUFFNGYsVUFBWSxLQUNsQytJLE1BQU8zaEIsRUFFZixDQUNBLE1BQU8sQ0FDSHdZLFFBQVNvSixHQUEwQi9pQyxFQUFFMjVCLFNBQ3JDbUosTUFBT0MsR0FBMEIvaUMsRUFBRThpQyxPQUUzQyxDQUtJLFNBQVNDLEdBQTBCL2lDLEdBRW5DLE1BQU8saUJBQW1CQSxFQUFJQSxFQUFJLGlCQUFtQkEsRUFBSXlpQixPQUFPemlCLEdBQUssQ0FDekUsQ0FFc0UsU0FBU2dqQyxHQUE4QmhqQyxHQUN6RyxNQUFPLGlCQUFtQkEsRUFBSWlpQyxHQUFXRSxpQkFBaUJuaUMsR0FBS2lpQyxHQUFXRyxlQUFlcGlDLEVBQzdGLENBbUNJLFNBQVNpakMsR0FBNEJqakMsR0FDckMsSUFBSW1oQixFQUFHM0csRUFDUCxNQUFPLHNCQUF3QixRQUFVQSxJQUFNLFFBQVUyRyxFQUFJLE1BQVFuaEIsT0FBSSxFQUFTQSxFQUFFa2pDLGdCQUFhLElBQVcvaEIsT0FBSSxFQUFTQSxFQUFFMmdCLFNBQVcsQ0FBQyxHQUFHcUIsZ0JBQWEsSUFBVzNvQixPQUFJLEVBQVNBLEVBQUU0b0IsWUFDckwsQ0FXQSxTQUFTQyxHQUEyQnJqQyxHQUNoQyxNQUFNbWhCLEVBQUluaEIsRUFBRWtqQyxTQUFTcEIsT0FBT3dCLG1CQUM1QixPQUFPTCxHQUE0QjloQixHQUFLa2lCLEdBQTJCbGlCLEdBQUtBLENBQzVFLENBSUksU0FBU29pQixHQUE0QnZqQyxHQUNyQyxNQUFNbWhCLEVBQUl5aEIsR0FBNkI1aUMsRUFBRWtqQyxTQUFTcEIsT0FBTzBCLHFCQUFxQkMsZ0JBQzlFLE9BQU8sSUFBSS9KLEdBQVV2WSxFQUFFd1ksUUFBU3hZLEVBQUUyaEIsTUFDdEMsQ0FpQkksTUFBTVksR0FtQk4sV0FBQWpnQyxDQUFZekQsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEVBQUdvYSxFQUFHQyxFQUFHM1QsRUFBR0ksR0FDaEN0SCxLQUFLNmpDLFdBQWEzakMsRUFBR0YsS0FBS29XLE1BQVFpTCxFQUFHcmhCLEtBQUs4akMsZUFBaUJwcEIsRUFBRzFhLEtBQUsrakMsS0FBTzFwQixFQUFHcmEsS0FBS2drQyxJQUFNeGpDLEVBQ3hGUixLQUFLZ3ZCLGlCQUFtQnBVLEVBQUc1YSxLQUFLaWtDLHNCQUF3QnBwQixFQUFHN2EsS0FBS2trQyxtQkFBcUJoOUIsRUFDckZsSCxLQUFLbWtDLGdCQUFrQjc4QixDQUMzQixFQVFKLE1BQU04OEIsR0FDRixXQUFBemdDLENBQVl6RCxFQUFHbWhCLEdBQ1hyaEIsS0FBS3FrQyxVQUFZbmtDLEVBQUdGLEtBQUtza0MsU0FBV2pqQixHQUFLLFdBQzdDLENBQ0EsWUFBT3FiLEdBQ0gsT0FBTyxJQUFJMEgsR0FBVyxHQUFJLEdBQzlCLENBQ0EscUJBQUlHLEdBQ0EsTUFBTyxjQUFnQnZrQyxLQUFLc2tDLFFBQ2hDLENBQ0EsT0FBQTlPLENBQVF0MUIsR0FDSixPQUFPQSxhQUFha2tDLElBQWNsa0MsRUFBRW1rQyxZQUFjcmtDLEtBQUtxa0MsV0FBYW5rQyxFQUFFb2tDLFdBQWF0a0MsS0FBS3NrQyxRQUM1RixFQW1CSixNQUFNRSxHQUFLLENBQ1BwQixTQUFVLENBQ05wQixPQUFRLENBQ0pxQixTQUFVLENBQ05DLFlBQWEsY0FTN0IsU0FBU21CLEdBQW9CdmtDLEdBQ3pCLE1BQU8sY0FBZUEsRUFBSSxFQUE4QixpQkFBa0JBLEVBQUksRUFBaUMsaUJBQWtCQSxHQUFLLGdCQUFpQkEsRUFBSSxFQUFnQyxtQkFBb0JBLEVBQUksRUFBbUMsZ0JBQWlCQSxFQUFJLEVBQWdDLGVBQWdCQSxFQUFJLEVBQThCLG1CQUFvQkEsRUFBSSxFQUE2QixrQkFBbUJBLEVBQUksRUFBa0MsZUFBZ0JBLEVBQUksRUFBK0IsYUFBY0EsRUFBSWlqQyxHQUE0QmpqQyxHQUFLLEVBQXlDd2tDLEdBQXFCeGtDLEdBQUssaUJBQTRDLEdBQWlDZzJCLElBQ3JzQixDQUU2RSxTQUFTeU8sR0FBc0J6a0MsRUFBR21oQixHQUMzRyxHQUFJbmhCLElBQU1taEIsRUFBRyxPQUFPLEVBQ3BCLE1BQU0zRyxFQUFJK3BCLEdBQW9CdmtDLEdBQzlCLEdBQUl3YSxJQUFNK3BCLEdBQW9CcGpCLEdBQUksT0FBTyxFQUN6QyxPQUFRM0csR0FDTixLQUFLLEVBQ0wsS0FBSyxpQkFDSCxPQUFPLEVBRVQsS0FBSyxFQUNILE9BQU94YSxFQUFFMGtDLGVBQWlCdmpCLEVBQUV1akIsYUFFOUIsS0FBSyxFQUNILE9BQU9uQixHQUE0QnZqQyxHQUFHczFCLFFBQVFpTyxHQUE0QnBpQixJQUU1RSxLQUFLLEVBQ0gsT0FBTyxTQUFtQ25oQixFQUFHbWhCLEdBQ3pDLEdBQUksaUJBQW1CbmhCLEVBQUV5akMsZ0JBQWtCLGlCQUFtQnRpQixFQUFFc2lCLGdCQUFrQnpqQyxFQUFFeWpDLGVBQWVsakMsU0FBVzRnQixFQUFFc2lCLGVBQWVsakMsT0FFL0gsT0FBT1AsRUFBRXlqQyxpQkFBbUJ0aUIsRUFBRXNpQixlQUM5QixNQUFNanBCLEVBQUlvb0IsR0FBNkI1aUMsRUFBRXlqQyxnQkFBaUJ0cEIsRUFBSXlvQixHQUE2QnpoQixFQUFFc2lCLGdCQUM3RixPQUFPanBCLEVBQUVtZixVQUFZeGYsRUFBRXdmLFNBQVduZixFQUFFc29CLFFBQVUzb0IsRUFBRTJvQixLQUNwRCxDQU5PLENBTUw5aUMsRUFBR21oQixHQUVQLEtBQUssRUFDSCxPQUFPbmhCLEVBQUVvakMsY0FBZ0JqaUIsRUFBRWlpQixZQUU3QixLQUFLLEVBQ0gsT0FBTyxTQUE4QnBqQyxFQUFHbWhCLEdBQ3BDLE9BQU82aEIsR0FBOEJoakMsRUFBRTJrQyxZQUFZclAsUUFBUTBOLEdBQThCN2hCLEVBQUV3akIsWUFDL0YsQ0FGTyxDQUVMM2tDLEVBQUdtaEIsR0FFUCxLQUFLLEVBQ0gsT0FBT25oQixFQUFFNGtDLGlCQUFtQnpqQixFQUFFeWpCLGVBRWhDLEtBQUssRUFDSCxPQUFPLFNBQWtDNWtDLEVBQUdtaEIsR0FDeEMsT0FBTzRoQixHQUEwQi9pQyxFQUFFNmtDLGNBQWNDLFlBQWMvQixHQUEwQjVoQixFQUFFMGpCLGNBQWNDLFdBQWEvQixHQUEwQi9pQyxFQUFFNmtDLGNBQWNFLGFBQWVoQyxHQUEwQjVoQixFQUFFMGpCLGNBQWNFLFVBQzdOLENBRk8sQ0FFTC9rQyxFQUFHbWhCLEdBRVAsS0FBSyxFQUNILE9BQU8sU0FBZ0NuaEIsRUFBR21oQixHQUN0QyxHQUFJLGlCQUFrQm5oQixHQUFLLGlCQUFrQm1oQixFQUFHLE9BQU80aEIsR0FBMEIvaUMsRUFBRWdsQyxnQkFBa0JqQyxHQUEwQjVoQixFQUFFNmpCLGNBQ2pJLEdBQUksZ0JBQWlCaGxDLEdBQUssZ0JBQWlCbWhCLEVBQUcsQ0FDMUMsTUFBTTNHLEVBQUl1b0IsR0FBMEIvaUMsRUFBRWlsQyxhQUFjOXFCLEVBQUk0b0IsR0FBMEI1aEIsRUFBRThqQixhQUNwRixPQUFPenFCLElBQU1MLEVBQUkya0IsR0FBeUJ0a0IsS0FBT3NrQixHQUF5QjNrQixHQUFLNE0sTUFBTXZNLElBQU11TSxNQUFNNU0sRUFDckcsQ0FDQSxPQUFPLENBQ1gsQ0FQTyxDQU9MbmEsRUFBR21oQixHQUVQLEtBQUssRUFDSCxPQUFPcVksR0FBc0J4NUIsRUFBRWtsQyxXQUFXcjZCLFFBQVUsR0FBSXNXLEVBQUUrakIsV0FBV3I2QixRQUFVLEdBQUk0NUIsSUFFckYsS0FBSyxHQUNILE9BQU8sU0FBZ0N6a0MsRUFBR21oQixHQUN0QyxNQUFNM0csRUFBSXhhLEVBQUVrakMsU0FBU3BCLFFBQVUsQ0FBQyxFQUFHM25CLEVBQUlnSCxFQUFFK2hCLFNBQVNwQixRQUFVLENBQUMsRUFDN0QsR0FBSS9DLEdBQXFCdmtCLEtBQU91a0IsR0FBcUI1a0IsR0FBSSxPQUFPLEVBQ2hFLElBQUssTUFBTW5hLEtBQUt3YSxFQUFHLEdBQUlBLEVBQUVNLGVBQWU5YSxVQUFPLElBQVdtYSxFQUFFbmEsS0FBT3lrQyxHQUFzQmpxQixFQUFFeGEsR0FBSW1hLEVBQUVuYSxLQUFNLE9BQU8sRUFDOUcsT0FBTyxDQUNYLENBTE8sQ0FNZ0VBLEVBQUdtaEIsR0FFNUUsUUFDRSxPQUFPNlUsS0FFZixDQUVBLFNBQVNtUCxHQUE2Qm5sQyxFQUFHbWhCLEdBQ3JDLFlBQU8sS0FBWW5oQixFQUFFNkssUUFBVSxJQUFJNk0sTUFBTTFYLEdBQUt5a0MsR0FBc0J6a0MsRUFBR21oQixJQUMzRSxDQUVBLFNBQVNpa0IsR0FBdUJwbEMsRUFBR21oQixHQUMvQixHQUFJbmhCLElBQU1taEIsRUFBRyxPQUFPLEVBQ3BCLE1BQU0zRyxFQUFJK3BCLEdBQW9CdmtDLEdBQUltYSxFQUFJb3FCLEdBQW9CcGpCLEdBQzFELEdBQUkzRyxJQUFNTCxFQUFHLE9BQU9vZixHQUE4Qi9lLEVBQUdMLEdBQ3JELE9BQVFLLEdBQ04sS0FBSyxFQUNMLEtBQUssaUJBQ0gsT0FBTyxFQUVULEtBQUssRUFDSCxPQUFPK2UsR0FBOEJ2NUIsRUFBRTBrQyxhQUFjdmpCLEVBQUV1akIsY0FFekQsS0FBSyxFQUNILE9BQU8sU0FBa0Mxa0MsRUFBR21oQixHQUN4QyxNQUFNM0csRUFBSXVvQixHQUEwQi9pQyxFQUFFZ2xDLGNBQWdCaGxDLEVBQUVpbEMsYUFBYzlxQixFQUFJNG9CLEdBQTBCNWhCLEVBQUU2akIsY0FBZ0I3akIsRUFBRThqQixhQUN4SCxPQUFPenFCLEVBQUlMLEdBQUssRUFBSUssRUFBSUwsRUFBSSxFQUFJSyxJQUFNTCxFQUFJLEVBRTFDNE0sTUFBTXZNLEdBQUt1TSxNQUFNNU0sR0FBSyxHQUFLLEVBQUksQ0FDbkMsQ0FMTyxDQUtMbmEsRUFBR21oQixHQUVQLEtBQUssRUFDSCxPQUFPa2tCLEdBQTRCcmxDLEVBQUV5akMsZUFBZ0J0aUIsRUFBRXNpQixnQkFFekQsS0FBSyxFQUNILE9BQU80QixHQUE0QjlCLEdBQTRCdmpDLEdBQUl1akMsR0FBNEJwaUIsSUFFakcsS0FBSyxFQUNILE9BQU9vWSxHQUE4QnY1QixFQUFFb2pDLFlBQWFqaUIsRUFBRWlpQixhQUV4RCxLQUFLLEVBQ0gsT0FBTyxTQUFnQ3BqQyxFQUFHbWhCLEdBQ3RDLE1BQU0zRyxFQUFJd29CLEdBQThCaGpDLEdBQUltYSxFQUFJNm9CLEdBQThCN2hCLEdBQzlFLE9BQU8zRyxFQUFFZ2dCLFVBQVVyZ0IsRUFDdkIsQ0FITyxDQUdMbmEsRUFBRTJrQyxXQUFZeGpCLEVBQUV3akIsWUFFcEIsS0FBSyxFQUNILE9BQU8sU0FBcUMza0MsRUFBR21oQixHQUMzQyxNQUFNM0csRUFBSXhhLEVBQUVvZixNQUFNLEtBQU1qRixFQUFJZ0gsRUFBRS9CLE1BQU0sS0FDcEMsSUFBSyxJQUFJcGYsRUFBSSxFQUFHQSxFQUFJd2EsRUFBRWphLFFBQVVQLEVBQUltYSxFQUFFNVosT0FBUVAsSUFBSyxDQUMvQyxNQUFNbWhCLEVBQUlvWSxHQUE4Qi9lLEVBQUV4YSxHQUFJbWEsRUFBRW5hLElBQ2hELEdBQUksSUFBTW1oQixFQUFHLE9BQU9BLENBQ3hCLENBQ0EsT0FBT29ZLEdBQThCL2UsRUFBRWphLE9BQVE0WixFQUFFNVosT0FDckQsQ0FQTyxDQU9MUCxFQUFFNGtDLGVBQWdCempCLEVBQUV5akIsZ0JBRXhCLEtBQUssRUFDSCxPQUFPLFNBQW9DNWtDLEVBQUdtaEIsR0FDMUMsTUFBTTNHLEVBQUkrZSxHQUE4QndKLEdBQTBCL2lDLEVBQUU4a0MsVUFBVy9CLEdBQTBCNWhCLEVBQUUyakIsV0FDM0csT0FBSSxJQUFNdHFCLEVBQVVBLEVBQ2IrZSxHQUE4QndKLEdBQTBCL2lDLEVBQUUra0MsV0FBWWhDLEdBQTBCNWhCLEVBQUU0akIsV0FDN0csQ0FKTyxDQUlML2tDLEVBQUU2a0MsY0FBZTFqQixFQUFFMGpCLGVBRXZCLEtBQUssRUFDSCxPQUFPLFNBQWlDN2tDLEVBQUdtaEIsR0FDdkMsTUFBTTNHLEVBQUl4YSxFQUFFNkssUUFBVSxHQUFJc1AsRUFBSWdILEVBQUV0VyxRQUFVLEdBQzFDLElBQUssSUFBSTdLLEVBQUksRUFBR0EsRUFBSXdhLEVBQUVqYSxRQUFVUCxFQUFJbWEsRUFBRTVaLFNBQVVQLEVBQUcsQ0FDL0MsTUFBTW1oQixFQUFJaWtCLEdBQXVCNXFCLEVBQUV4YSxHQUFJbWEsRUFBRW5hLElBQ3pDLEdBQUltaEIsRUFBRyxPQUFPQSxDQUNsQixDQUNBLE9BQU9vWSxHQUE4Qi9lLEVBQUVqYSxPQUFRNFosRUFBRTVaLE9BQ3JELENBUE8sQ0FPTFAsRUFBRWtsQyxXQUFZL2pCLEVBQUUrakIsWUFFcEIsS0FBSyxHQUNILE9BQU8sU0FBK0JsbEMsRUFBR21oQixHQUNyQyxHQUFJbmhCLElBQU1za0MsR0FBR3BCLFVBQVkvaEIsSUFBTW1qQixHQUFHcEIsU0FBVSxPQUFPLEVBQ25ELEdBQUlsakMsSUFBTXNrQyxHQUFHcEIsU0FBVSxPQUFPLEVBQzlCLEdBQUkvaEIsSUFBTW1qQixHQUFHcEIsU0FBVSxPQUFRLEVBQy9CLE1BQU0xb0IsRUFBSXhhLEVBQUU4aEMsUUFBVSxDQUFDLEVBQUczbkIsRUFBSWhVLE9BQU9vQixLQUFLaVQsR0FBSWxhLEVBQUk2Z0IsRUFBRTJnQixRQUFVLENBQUMsRUFBR3BuQixFQUFJdlUsT0FBT29CLEtBQUtqSCxHQUtsRjZaLEVBQUUvSixPQUFRc0ssRUFBRXRLLE9BQ1osSUFBSyxJQUFJcFEsRUFBSSxFQUFHQSxFQUFJbWEsRUFBRTVaLFFBQVVQLEVBQUkwYSxFQUFFbmEsU0FBVVAsRUFBRyxDQUMvQyxNQUFNbWhCLEVBQUlvWSxHQUE4QnBmLEVBQUVuYSxHQUFJMGEsRUFBRTFhLElBQ2hELEdBQUksSUFBTW1oQixFQUFHLE9BQU9BLEVBQ3BCLE1BQU14RyxFQUFJeXFCLEdBQXVCNXFCLEVBQUVMLEVBQUVuYSxJQUFLTSxFQUFFb2EsRUFBRTFhLEtBQzlDLEdBQUksSUFBTTJhLEVBQUcsT0FBT0EsQ0FDeEIsQ0FDQSxPQUFPNGUsR0FBOEJwZixFQUFFNVosT0FBUW1hLEVBQUVuYSxPQUNyRCxDQWpCTyxDQXFCVlAsRUFBRWtqQyxTQUFVL2hCLEVBQUUraEIsVUFFYixRQUNFLE1BQU1sTixLQUVkLENBRUEsU0FBU3FQLEdBQTRCcmxDLEVBQUdtaEIsR0FDcEMsR0FBSSxpQkFBbUJuaEIsR0FBSyxpQkFBbUJtaEIsR0FBS25oQixFQUFFTyxTQUFXNGdCLEVBQUU1Z0IsT0FBUSxPQUFPZzVCLEdBQThCdjVCLEVBQUdtaEIsR0FDbkgsTUFBTTNHLEVBQUlvb0IsR0FBNkI1aUMsR0FBSW1hLEVBQUl5b0IsR0FBNkJ6aEIsR0FBSTdnQixFQUFJaTVCLEdBQThCL2UsRUFBRW1mLFFBQVN4ZixFQUFFd2YsU0FDL0gsT0FBTyxJQUFNcjVCLEVBQUlBLEVBQUlpNUIsR0FBOEIvZSxFQUFFc29CLE1BQU8zb0IsRUFBRTJvQixNQUNsRSxDQUVBLFNBQVN3QyxHQUFZdGxDLEdBQ2pCLE9BQU91bEMsR0FBd0J2bEMsRUFDbkMsQ0FFQSxTQUFTdWxDLEdBQXdCdmxDLEdBQzdCLE1BQU8sY0FBZUEsRUFBSSxPQUFTLGlCQUFrQkEsRUFBSSxHQUFLQSxFQUFFMGtDLGFBQWUsaUJBQWtCMWtDLEVBQUksR0FBS0EsRUFBRWdsQyxhQUFlLGdCQUFpQmhsQyxFQUFJLEdBQUtBLEVBQUVpbEMsWUFBYyxtQkFBb0JqbEMsRUFBSSxTQUFxQ0EsR0FDOU4sTUFBTW1oQixFQUFJeWhCLEdBQTZCNWlDLEdBQ3ZDLE1BQU8sUUFBUW1oQixFQUFFd1ksV0FBV3hZLEVBQUUyaEIsUUFDbEMsQ0FINkwsQ0FHM0w5aUMsRUFBRXlqQyxnQkFBa0IsZ0JBQWlCempDLEVBQUlBLEVBQUVvakMsWUFBYyxlQUFnQnBqQyxFQUFJLFNBQXNDQSxHQUNqSCxPQUFPZ2pDLEdBQThCaGpDLEdBQUd1aUMsVUFDNUMsQ0FGK0UsQ0FFN0V2aUMsRUFBRTJrQyxZQUFjLG1CQUFvQjNrQyxFQUFJLFNBQXFDQSxHQUMzRSxPQUFPbzhCLEdBQVlHLFNBQVN2OEIsR0FBR2dhLFVBQ25DLENBRjBDLENBRXhDaGEsRUFBRTRrQyxnQkFBa0Isa0JBQW1CNWtDLEVBQUksU0FBb0NBLEdBQzdFLE1BQU8sT0FBT0EsRUFBRThrQyxZQUFZOWtDLEVBQUUra0MsWUFDbEMsQ0FGNkMsQ0FFM0Mva0MsRUFBRTZrQyxlQUFpQixlQUFnQjdrQyxFQUFJLFNBQWlDQSxHQUN0RSxJQUFJbWhCLEVBQUksSUFBSzNHLEdBQUksRUFDakIsSUFBSyxNQUFNTCxLQUFLbmEsRUFBRTZLLFFBQVUsR0FBSTJQLEVBQUlBLEdBQUksRUFBSzJHLEdBQUssSUFBS0EsR0FBS29rQixHQUF3QnByQixHQUNwRixPQUFPZ0gsRUFBSSxHQUNmLENBSnlDLENBV3hDbmhCLEVBQUVrbEMsWUFBYyxhQUFjbGxDLEVBQUksU0FBK0JBLEdBRzlELE1BQU1taEIsRUFBSWhiLE9BQU9vQixLQUFLdkgsRUFBRThoQyxRQUFVLENBQUMsR0FBRzF4QixPQUN0QyxJQUFJb0ssRUFBSSxJQUFLTCxHQUFJLEVBQ2pCLElBQUssTUFBTTdaLEtBQUs2Z0IsRUFBR2hILEVBQUlBLEdBQUksRUFBS0ssR0FBSyxJQUFLQSxHQUFLLEdBQUdsYSxLQUFLaWxDLEdBQXdCdmxDLEVBQUU4aEMsT0FBT3hoQyxNQUN4RixPQUFPa2EsRUFBSSxHQUNmLENBUG1DLENBT2pDeGEsRUFBRWtqQyxVQUFZbE4sSUFDcEIsQ0F5RG9ELFNBQVN3UCxHQUFVeGxDLEdBQ25FLFFBQVNBLEdBQUssaUJBQWtCQSxDQUNwQyxDQUlBLFNBQVN3QixHQUFReEIsR0FDYixRQUFTQSxHQUFLLGVBQWdCQSxDQUNsQyxDQUUrQyxTQUFTeWxDLEdBQXNCemxDLEdBQzFFLFFBQVNBLEdBQUssY0FBZUEsQ0FDakMsQ0FFdUMsU0FBUzBsQyxHQUFxQjFsQyxHQUNqRSxRQUFTQSxHQUFLLGdCQUFpQkEsR0FBSyttQixNQUFNdEUsT0FBT3ppQixFQUFFaWxDLGFBQ3ZELENBRThDLFNBQVNVLEdBQXFCM2xDLEdBQ3hFLFFBQVNBLEdBQUssYUFBY0EsQ0FDaEMsQ0FFd0MsU0FBUzRsQyxHQUFvQjVsQyxHQUNqRSxHQUFJQSxFQUFFNmtDLGNBQWUsTUFBTyxDQUN4QkEsY0FBZTErQixPQUFPb04sT0FBTyxDQUFDLEVBQUd2VCxFQUFFNmtDLGdCQUV2QyxHQUFJN2tDLEVBQUV5akMsZ0JBQWtCLGlCQUFtQnpqQyxFQUFFeWpDLGVBQWdCLE1BQU8sQ0FDaEVBLGVBQWdCdDlCLE9BQU9vTixPQUFPLENBQUMsRUFBR3ZULEVBQUV5akMsaUJBRXhDLEdBQUl6akMsRUFBRWtqQyxTQUFVLENBQ1osTUFBTS9oQixFQUFJLENBQ04raEIsU0FBVSxDQUNOcEIsT0FBUSxDQUFDLElBR2pCLE9BQU96WixHQUFRcm9CLEVBQUVrakMsU0FBU3BCLFFBQVEsQ0FBRTloQyxFQUFHd2EsSUFBTTJHLEVBQUUraEIsU0FBU3BCLE9BQU85aEMsR0FBSzRsQyxHQUFvQnByQixLQUN4RjJHLENBQ0osQ0FDQSxHQUFJbmhCLEVBQUVrbEMsV0FBWSxDQUNkLE1BQU0vakIsRUFBSSxDQUNOK2pCLFdBQVksQ0FDUnI2QixPQUFRLEtBR2hCLElBQUssSUFBSTJQLEVBQUksRUFBR0EsR0FBS3hhLEVBQUVrbEMsV0FBV3I2QixRQUFVLElBQUl0SyxTQUFVaWEsRUFBRzJHLEVBQUUrakIsV0FBV3I2QixPQUFPMlAsR0FBS29yQixHQUFvQjVsQyxFQUFFa2xDLFdBQVdyNkIsT0FBTzJQLElBQzlILE9BQU8yRyxDQUNYLENBQ0EsT0FBT2hiLE9BQU9vTixPQUFPLENBQUMsRUFBR3ZULEVBQzdCLENBRStFLFNBQVN3a0MsR0FBcUJ4a0MsR0FDekcsTUFBTyxlQUFpQkEsRUFBRWtqQyxVQUFZLENBQUMsR0FBR3BCLFFBQVUsQ0FBQyxHQUFHcUIsVUFBWSxDQUFDLEdBQUdDLFdBQzVFLENBaUZJLE1BQU15QyxHQUNOLFdBQUFwaUMsQ0FBWXpELEdBQ1JGLEtBQUsrRixNQUFRN0YsQ0FDakIsQ0FDQSxZQUFPdzhCLEdBQ0gsT0FBTyxJQUFJcUosR0FBWSxDQUNuQjNDLFNBQVUsQ0FBQyxHQUVuQixDQU1PLEtBQUE0QyxDQUFNOWxDLEdBQ1QsR0FBSUEsRUFBRXU3QixVQUFXLE9BQU96N0IsS0FBSytGLE1BQzdCLENBQ0ksSUFBSXNiLEVBQUlyaEIsS0FBSytGLE1BQ2IsSUFBSyxJQUFJMlUsRUFBSSxFQUFHQSxFQUFJeGEsRUFBRU8sT0FBUyxJQUFLaWEsRUFBRyxHQUFJMkcsR0FBS0EsRUFBRStoQixTQUFTcEIsUUFBVSxDQUFDLEdBQUc5aEMsRUFBRXFKLElBQUltUixLQUM5RW1yQixHQUFxQnhrQixHQUFJLE9BQU8sS0FDakMsT0FBT0EsR0FBS0EsRUFBRStoQixTQUFTcEIsUUFBVSxDQUFDLEdBQUc5aEMsRUFBRXM3QixlQUFnQm5hLEdBQUssSUFDaEUsQ0FDSixDQU1PLEdBQUF4WCxDQUFJM0osRUFBR21oQixHQUNWcmhCLEtBQUtpbUMsYUFBYS9sQyxFQUFFbzdCLFdBQVdwN0IsRUFBRXM3QixlQUFpQnNLLEdBQW9CemtCLEVBQzFFLENBS08sTUFBQTZrQixDQUFPaG1DLEdBQ1YsSUFBSW1oQixFQUFJMmEsR0FBWUQsWUFBYXJoQixFQUFJLENBQUMsRUFBR0wsRUFBSSxHQUM3Q25hLEVBQUVxb0IsU0FBUSxDQUFFcm9CLEVBQUdNLEtBQ1gsSUFBSzZnQixFQUFFc2Esb0JBQW9CbjdCLEdBQUksQ0FFM0IsTUFBTU4sRUFBSUYsS0FBS2ltQyxhQUFhNWtCLEdBQzVCcmhCLEtBQUttbUMsYUFBYWptQyxFQUFHd2EsRUFBR0wsR0FBSUssRUFBSSxDQUFDLEVBQUdMLEVBQUksR0FBSWdILEVBQUk3Z0IsRUFBRTg2QixTQUN0RCxDQUNBcDdCLEVBQUl3YSxFQUFFbGEsRUFBRWc3QixlQUFpQnNLLEdBQW9CNWxDLEdBQUttYSxFQUFFN1gsS0FBS2hDLEVBQUVnN0IsY0FDOUQsSUFDRCxNQUFNaDdCLEVBQUlSLEtBQUtpbUMsYUFBYTVrQixHQUM1QnJoQixLQUFLbW1DLGFBQWEzbEMsRUFBR2thLEVBQUdMLEVBQzVCLENBTU8sT0FBT25hLEdBQ1YsTUFBTW1oQixFQUFJcmhCLEtBQUtnbUMsTUFBTTlsQyxFQUFFbzdCLFdBQ3ZCdUssR0FBcUJ4a0IsSUFBTUEsRUFBRStoQixTQUFTcEIsZUFBaUIzZ0IsRUFBRStoQixTQUFTcEIsT0FBTzloQyxFQUFFczdCLGNBQy9FLENBQ0EsT0FBQWhHLENBQVF0MUIsR0FDSixPQUFPeWtDLEdBQXNCM2tDLEtBQUsrRixNQUFPN0YsRUFBRTZGLE1BQy9DLENBSU8sWUFBQWtnQyxDQUFhL2xDLEdBQ2hCLElBQUltaEIsRUFBSXJoQixLQUFLK0YsTUFDYnNiLEVBQUUraEIsU0FBU3BCLFNBQVczZ0IsRUFBRStoQixTQUFXLENBQy9CcEIsT0FBUSxDQUFDLElBRWIsSUFBSyxJQUFJdG5CLEVBQUksRUFBR0EsRUFBSXhhLEVBQUVPLFNBQVVpYSxFQUFHLENBQy9CLElBQUlMLEVBQUlnSCxFQUFFK2hCLFNBQVNwQixPQUFPOWhDLEVBQUVxSixJQUFJbVIsSUFDaENtckIsR0FBcUJ4ckIsSUFBTUEsRUFBRStvQixTQUFTcEIsU0FBVzNuQixFQUFJLENBQ2pEK29CLFNBQVUsQ0FDTnBCLE9BQVEsQ0FBQyxJQUVkM2dCLEVBQUUraEIsU0FBU3BCLE9BQU85aEMsRUFBRXFKLElBQUltUixJQUFNTCxHQUFJZ0gsRUFBSWhILENBQzdDLENBQ0EsT0FBT2dILEVBQUUraEIsU0FBU3BCLE1BQ3RCLENBSU8sWUFBQW1FLENBQWFqbUMsRUFBR21oQixFQUFHM0csR0FDdEI2TixHQUFRbEgsR0FBRyxDQUFFQSxFQUFHM0csSUFBTXhhLEVBQUVtaEIsR0FBSzNHLElBQzdCLElBQUssTUFBTTJHLEtBQUszRyxTQUFVeGEsRUFBRW1oQixFQUNoQyxDQUNBLEtBQUEra0IsR0FDSSxPQUFPLElBQUlMLEdBQVlELEdBQW9COWxDLEtBQUsrRixPQUNwRCxFQWlEQSxNQUFNc2dDLEdBQ04sV0FBQTFpQyxDQUFZekQsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEVBQUdvYSxFQUFHQyxHQUMxQjdhLEtBQUttSCxJQUFNakgsRUFBR0YsS0FBS3NtQyxhQUFlamxCLEVBQUdyaEIsS0FBS3lTLFFBQVVpSSxFQUFHMWEsS0FBS205QixTQUFXOWlCLEVBQUdyYSxLQUFLdW1DLFdBQWEvbEMsRUFDNUZSLEtBQUs4RyxLQUFPOFQsRUFBRzVhLEtBQUt3bUMsY0FBZ0IzckIsQ0FDeEMsQ0FJTyx5QkFBTzRyQixDQUFtQnZtQyxHQUM3QixPQUFPLElBQUltbUMsR0FBZ0JubUMsRUFBRyxFQUNoQnE2QixHQUFnQjVLLE1BQ2Y0SyxHQUFnQjVLLE1BQ2Q0SyxHQUFnQjVLLE1BQU9vVyxHQUFZckosUUFBUyxFQUNqRSxDQUlPLHVCQUFPZ0ssQ0FBaUJ4bUMsRUFBR21oQixFQUFHM0csRUFBR0wsR0FDcEMsT0FBTyxJQUFJZ3NCLEdBQWdCbm1DLEVBQUcsRUFDaEJtaEIsRUFDQ2taLEdBQWdCNUssTUFDZGpWLEVBQUdMLEVBQUcsRUFDM0IsQ0FDa0Ysb0JBQU9zc0IsQ0FBY3ptQyxFQUFHbWhCLEdBQ3RHLE9BQU8sSUFBSWdsQixHQUFnQm5tQyxFQUFHLEVBQ2hCbWhCLEVBQ0NrWixHQUFnQjVLLE1BQ2Q0SyxHQUFnQjVLLE1BQU9vVyxHQUFZckosUUFBUyxFQUNqRSxDQUtPLHlCQUFPa0ssQ0FBbUIxbUMsRUFBR21oQixHQUNoQyxPQUFPLElBQUlnbEIsR0FBZ0JubUMsRUFBRyxFQUNoQm1oQixFQUNDa1osR0FBZ0I1SyxNQUNkNEssR0FBZ0I1SyxNQUFPb1csR0FBWXJKLFFBQVMsRUFDakUsQ0FJTyxzQkFBQW1LLENBQXVCM21DLEVBQUdtaEIsR0FNN0IsT0FBUXJoQixLQUFLdW1DLFdBQVcvUSxRQUFRK0UsR0FBZ0I1SyxRQUFVLElBQXFDM3ZCLEtBQUtzbUMsY0FBZ0IsSUFBaUN0bUMsS0FBS3NtQyxlQUFpQnRtQyxLQUFLdW1DLFdBQWFybUMsR0FDN0xGLEtBQUt5UyxRQUFVdlMsRUFBR0YsS0FBS3NtQyxhQUFlLEVBQXNDdG1DLEtBQUs4RyxLQUFPdWEsRUFDeEZyaEIsS0FBS3dtQyxjQUFnQixFQUErQnhtQyxJQUN4RCxDQUlPLG1CQUFBOG1DLENBQW9CNW1DLEdBQ3ZCLE9BQU9GLEtBQUt5UyxRQUFVdlMsRUFBR0YsS0FBS3NtQyxhQUFlLEVBQzdDdG1DLEtBQUs4RyxLQUFPaS9CLEdBQVlySixRQUFTMThCLEtBQUt3bUMsY0FBZ0IsRUFDdER4bUMsSUFDSixDQUtPLHdCQUFBK21DLENBQXlCN21DLEdBQzVCLE9BQU9GLEtBQUt5UyxRQUFVdlMsRUFBR0YsS0FBS3NtQyxhQUFlLEVBQzdDdG1DLEtBQUs4RyxLQUFPaS9CLEdBQVlySixRQUFTMThCLEtBQUt3bUMsY0FBZ0IsRUFDdER4bUMsSUFDSixDQUNBLHdCQUFBZ25DLEdBQ0ksT0FBT2huQyxLQUFLd21DLGNBQWdCLEVBQWdEeG1DLElBQ2hGLENBQ0Esb0JBQUFpbkMsR0FDSSxPQUFPam5DLEtBQUt3bUMsY0FBZ0IsRUFBNEN4bUMsS0FBS3lTLFFBQVU4bkIsR0FBZ0I1SyxNQUN2RzN2QixJQUNKLENBQ0EsV0FBQWtuQyxDQUFZaG5DLEdBQ1IsT0FBT0YsS0FBS205QixTQUFXajlCLEVBQUdGLElBQzlCLENBQ0EscUJBQUltbkMsR0FDQSxPQUFPLElBQThDbm5DLEtBQUt3bUMsYUFDOUQsQ0FDQSx5QkFBSVksR0FDQSxPQUFPLElBQWtEcG5DLEtBQUt3bUMsYUFDbEUsQ0FDQSxvQkFBSWEsR0FDQSxPQUFPcm5DLEtBQUttbkMsbUJBQXFCbm5DLEtBQUtvbkMscUJBQzFDLENBQ0EsZUFBQUUsR0FDSSxPQUFPLElBQWlDdG5DLEtBQUtzbUMsWUFDakQsQ0FDQSxlQUFBaUIsR0FDSSxPQUFPLElBQXdDdm5DLEtBQUtzbUMsWUFDeEQsQ0FDQSxZQUFBa0IsR0FDSSxPQUFPLElBQXFDeG5DLEtBQUtzbUMsWUFDckQsQ0FDQSxpQkFBQW1CLEdBQ0ksT0FBTyxJQUEwQ3puQyxLQUFLc21DLFlBQzFELENBQ0EsT0FBQTlRLENBQVF0MUIsR0FDSixPQUFPQSxhQUFhbW1DLElBQW1Ccm1DLEtBQUttSCxJQUFJcXVCLFFBQVF0MUIsRUFBRWlILE1BQVFuSCxLQUFLeVMsUUFBUStpQixRQUFRdDFCLEVBQUV1UyxVQUFZelMsS0FBS3NtQyxlQUFpQnBtQyxFQUFFb21DLGNBQWdCdG1DLEtBQUt3bUMsZ0JBQWtCdG1DLEVBQUVzbUMsZUFBaUJ4bUMsS0FBSzhHLEtBQUswdUIsUUFBUXQxQixFQUFFNEcsS0FDL00sQ0FDQSxXQUFBNGdDLEdBQ0ksT0FBTyxJQUFJckIsR0FBZ0JybUMsS0FBS21ILElBQUtuSCxLQUFLc21DLGFBQWN0bUMsS0FBS3lTLFFBQVN6UyxLQUFLbTlCLFNBQVVuOUIsS0FBS3VtQyxXQUFZdm1DLEtBQUs4RyxLQUFLcy9CLFFBQVNwbUMsS0FBS3dtQyxjQUNsSSxDQUNBLFFBQUF0c0IsR0FDSSxNQUFPLFlBQVlsYSxLQUFLbUgsUUFBUW5ILEtBQUt5UyxZQUFZaE8sS0FBSzBULFVBQVVuWSxLQUFLOEcsS0FBS2Ysd0JBQXdCL0YsS0FBS3VtQyxnQ0FBZ0N2bUMsS0FBS3NtQyxtQ0FBbUN0bUMsS0FBS3dtQyxpQkFDeEwsRUFxQ0osTUFBTW1CLEdBQ0YsV0FBQWhrQyxDQUFZekQsRUFBR21oQixHQUNYcmhCLEtBQUs0bkMsU0FBVzFuQyxFQUFHRixLQUFLNm5DLFVBQVl4bUIsQ0FDeEMsRUFHSixTQUFTeW1CLEdBQWlDNW5DLEVBQUdtaEIsRUFBRzNHLEdBQzVDLElBQUlMLEVBQUksRUFDUixJQUFLLElBQUk3WixFQUFJLEVBQUdBLEVBQUlOLEVBQUUwbkMsU0FBU25uQyxPQUFRRCxJQUFLLENBQ3hDLE1BQU1vYSxFQUFJeUcsRUFBRTdnQixHQUFJcWEsRUFBSTNhLEVBQUUwbkMsU0FBU3BuQyxHQUkvQixHQUgwQjZaLEVBQXRCTyxFQUFFb3JCLE1BQU05SixhQUFrQkksR0FBWXJCLFdBQVdxQixHQUFZRyxTQUFTNWhCLEVBQUVpcUIsZ0JBQWlCcHFCLEVBQUV2VCxLQUN2Rm0rQixHQUF1QnpxQixFQUFHSCxFQUFFNVQsS0FBS2svQixNQUFNcHJCLEVBQUVvckIsUUFFN0MsU0FBc0NwckIsRUFBRW10QixNQUFRMXRCLElBQU0sR0FBSSxJQUFNQSxFQUFHLEtBQzNFLENBQ0EsT0FBT0EsQ0FDWCxDQUtJLFNBQVMydEIsR0FBc0I5bkMsRUFBR21oQixHQUNsQyxHQUFJLE9BQVNuaEIsRUFBRyxPQUFPLE9BQVNtaEIsRUFDaEMsR0FBSSxPQUFTQSxFQUFHLE9BQU8sRUFDdkIsR0FBSW5oQixFQUFFMm5DLFlBQWN4bUIsRUFBRXdtQixXQUFhM25DLEVBQUUwbkMsU0FBU25uQyxTQUFXNGdCLEVBQUV1bUIsU0FBU25uQyxPQUFRLE9BQU8sRUFDbkYsSUFBSyxJQUFJaWEsRUFBSSxFQUFHQSxFQUFJeGEsRUFBRTBuQyxTQUFTbm5DLE9BQVFpYSxJQUNuQyxJQUFLaXFCLEdBQXNCemtDLEVBQUUwbkMsU0FBU2x0QixHQUFJMkcsRUFBRXVtQixTQUFTbHRCLElBQUssT0FBTyxFQUVyRSxPQUFPLENBQ1gsQ0FvQkksTUFBTXV0QixHQUNOLFdBQUF0a0MsQ0FBWXpELEVBQUdtaEIsRUFBSSxPQUNmcmhCLEtBQUtnbUMsTUFBUTlsQyxFQUFHRixLQUFLK25DLElBQU0xbUIsQ0FDL0IsRUFHSixTQUFTNm1CLEdBQXdCaG9DLEVBQUdtaEIsR0FDaEMsT0FBT25oQixFQUFFNm5DLE1BQVExbUIsRUFBRTBtQixLQUFPN25DLEVBQUU4bEMsTUFBTXhRLFFBQVFuVSxFQUFFMmtCLE1BQ2hELENBaUJJLE1BQU1tQyxJQUVWLE1BQU1DLFdBQW9CRCxHQUN0QixXQUFBeGtDLENBQVl6RCxFQUFHbWhCLEVBQUczRyxHQUNkOVcsUUFBUzVELEtBQUtnbUMsTUFBUTlsQyxFQUFHRixLQUFLcW9DLEdBQUtobkIsRUFBR3JoQixLQUFLK0YsTUFBUTJVLENBQ3ZELENBR08sYUFBT2hVLENBQU94RyxFQUFHbWhCLEVBQUczRyxHQUN2QixPQUFPeGEsRUFBRWc4QixhQUFlLE9BQTJCN2EsR0FBSyxXQUFtQ0EsRUFBSXJoQixLQUFLc29DLHVCQUF1QnBvQyxFQUFHbWhCLEVBQUczRyxHQUFLLElBQUk2dEIsR0FBeUJyb0MsRUFBR21oQixFQUFHM0csR0FBSyxtQkFBbUQyRyxFQUFJLElBQUltbkIsR0FBOEJ0b0MsRUFBR3dhLEdBQUssT0FBMkIyRyxFQUFJLElBQUlvbkIsR0FBbUJ2b0MsRUFBR3dhLEdBQUssV0FBbUMyRyxFQUFJLElBQUlxbkIsR0FBc0J4b0MsRUFBR3dhLEdBQUssdUJBQTJEMkcsRUFBSSxJQUFJc25CLEdBQWlDem9DLEVBQUd3YSxHQUFLLElBQUkwdEIsR0FBWWxvQyxFQUFHbWhCLEVBQUczRyxFQUM1aEIsQ0FDQSw2QkFBTzR0QixDQUF1QnBvQyxFQUFHbWhCLEVBQUczRyxHQUNoQyxNQUFPLE9BQTJCMkcsRUFBSSxJQUFJdW5CLEdBQTJCMW9DLEVBQUd3YSxHQUFLLElBQUltdUIsR0FBOEIzb0MsRUFBR3dhLEVBQ3RILENBQ0EsT0FBQW91QixDQUFRNW9DLEdBQ0osTUFBTW1oQixFQUFJbmhCLEVBQUU0RyxLQUFLay9CLE1BQU1obUMsS0FBS2dtQyxPQUVwQixNQUFPLE9BQWtDaG1DLEtBQUtxb0MsR0FBSyxPQUFTaG5CLEdBQUtyaEIsS0FBSytvQyxrQkFBa0J6RCxHQUF1QmprQixFQUFHcmhCLEtBQUsrRixRQUFVLE9BQVNzYixHQUFLb2pCLEdBQW9CemtDLEtBQUsrRixTQUFXMCtCLEdBQW9CcGpCLElBQU1yaEIsS0FBSytvQyxrQkFBa0J6RCxHQUF1QmprQixFQUFHcmhCLEtBQUsrRixPQUUzUSxDQUNKLGlCQUFBZ2pDLENBQWtCN29DLEdBQ2QsT0FBUUYsS0FBS3FvQyxJQUNYLElBQUssSUFDSCxPQUFPbm9DLEVBQUksRUFFYixJQUFLLEtBQ0gsT0FBT0EsR0FBSyxFQUVkLElBQUssS0FDSCxPQUFPLElBQU1BLEVBRWYsSUFBSyxLQUNILE9BQU8sSUFBTUEsRUFFZixJQUFLLElBQ0gsT0FBT0EsRUFBSSxFQUViLElBQUssS0FDSCxPQUFPQSxHQUFLLEVBRWQsUUFDRSxPQUFPZzJCLEtBRWYsQ0FDQSxZQUFBOFMsR0FDSSxNQUFPLENBQUUsSUFBK0IsS0FBeUMsSUFBa0MsS0FBNEMsS0FBZ0MsVUFBaUM3dUIsUUFBUW5hLEtBQUtxb0MsS0FBTyxDQUN4UCxDQUNBLG1CQUFBWSxHQUNJLE1BQU8sQ0FBRWpwQyxLQUNiLENBQ0EsVUFBQWtwQyxHQUNJLE1BQU8sQ0FBRWxwQyxLQUNiLENBQ0EsdUJBQUFtcEMsR0FDSSxPQUFPbnBDLEtBQUtncEMsZUFBaUJocEMsS0FBS2dtQyxNQUFRLElBQzlDLEVBR0osTUFBTW9ELFdBQXdCakIsR0FDMUIsV0FBQXhrQyxDQUFZekQsRUFBR21oQixHQUNYemQsUUFBUzVELEtBQUtxcEMsUUFBVW5wQyxFQUFHRixLQUFLcW9DLEdBQUtobkIsRUFBR3JoQixLQUFLc3BDLEdBQUssSUFDdEQsQ0FHTyxhQUFPNWlDLENBQU94RyxFQUFHbWhCLEdBQ3BCLE9BQU8sSUFBSStuQixHQUFnQmxwQyxFQUFHbWhCLEVBQ2xDLENBQ0EsT0FBQXluQixDQUFRNW9DLEdBQ0osT0FBT3FwQyxHQUF1Q3ZwQyxXQUFRLElBQVdBLEtBQUtxcEMsUUFBUXp4QixNQUFNeUosSUFBTUEsRUFBRXluQixRQUFRNW9DLFVBQU8sSUFBV0YsS0FBS3FwQyxRQUFRenhCLE1BQU15SixHQUFLQSxFQUFFeW5CLFFBQVE1b0MsSUFDNUosQ0FDQSxtQkFBQStvQyxHQUNJLE9BQU8sT0FBU2pwQyxLQUFLc3BDLEtBQU90cEMsS0FBS3NwQyxHQUFLdHBDLEtBQUtxcEMsUUFBUUcsUUFBTyxDQUFFdHBDLEVBQUdtaEIsSUFBTW5oQixFQUFFa2hCLE9BQU9DLEVBQUU0bkIsd0JBQXlCLEtBQ3pHanBDLEtBQUtzcEMsRUFDVCxDQUVBLFVBQUFKLEdBQ0ksT0FBTzdpQyxPQUFPb04sT0FBTyxHQUFJelQsS0FBS3FwQyxRQUNsQyxDQUNBLHVCQUFBRixHQUNJLE1BQU1qcEMsRUFBSUYsS0FBS3lwQyxJQUFJdnBDLEdBQUtBLEVBQUU4b0MsaUJBQzFCLE9BQU8sT0FBUzlvQyxFQUFJQSxFQUFFOGxDLE1BQVEsSUFDbEMsQ0FJQSxFQUFBeUQsQ0FBR3ZwQyxHQUNDLElBQUssTUFBTW1oQixLQUFLcmhCLEtBQUtpcEMsc0JBQXVCLEdBQUkvb0MsRUFBRW1oQixHQUFJLE9BQU9BLEVBQzdELE9BQU8sSUFDWCxFQUdKLFNBQVNrb0IsR0FBdUNycEMsR0FDNUMsTUFBTyxRQUFzQ0EsRUFBRW1vQyxFQUNuRCxDQVFJLFNBQVNxQixHQUEyQ3hwQyxHQUNwRCxPQUtBLFNBQXlDQSxHQUN6QyxJQUFLLE1BQU1taEIsS0FBS25oQixFQUFFbXBDLFFBQVMsR0FBSWhvQixhQUFhK25CLEdBQWlCLE9BQU8sRUFDcEUsT0FBTyxDQUNYLENBUldPLENBQWdDenBDLElBQU1xcEMsR0FBdUNycEMsRUFDeEYsQ0FTQSxTQUFTMHBDLEdBQXlCMXBDLEdBQzlCLEdBQUlBLGFBQWFrb0MsR0FJakIsT0FBT2xvQyxFQUFFOGxDLE1BQU1sSyxrQkFBb0I1N0IsRUFBRW1vQyxHQUFHbnVCLFdBQWFzckIsR0FBWXRsQyxFQUFFNkYsT0FDbkUsR0FBSTJqQyxHQUEyQ3hwQyxHQU8vQyxPQUFPQSxFQUFFbXBDLFFBQVFuK0IsS0FBS2hMLEdBQUswcEMsR0FBeUIxcEMsS0FBS3VDLEtBQUssS0FDOUQsQ0FFSSxNQUFNNGUsRUFBSW5oQixFQUFFbXBDLFFBQVFuK0IsS0FBS2hMLEdBQUswcEMsR0FBeUIxcEMsS0FBS3VDLEtBQUssS0FDakUsTUFBTyxHQUFHdkMsRUFBRW1vQyxNQUFNaG5CLElBQ3RCLENBQ0osQ0FFQSxTQUFTd29CLEdBQXVCM3BDLEVBQUdtaEIsR0FDL0IsT0FBT25oQixhQUFha29DLEdBQWMsU0FBcUNsb0MsRUFBR21oQixHQUN0RSxPQUFPQSxhQUFhK21CLElBQWVsb0MsRUFBRW1vQyxLQUFPaG5CLEVBQUVnbkIsSUFBTW5vQyxFQUFFOGxDLE1BQU14USxRQUFRblUsRUFBRTJrQixRQUFVckIsR0FBc0J6a0MsRUFBRTZGLE1BQU9zYixFQUFFdGIsTUFDckgsQ0FGa0MsQ0FFaEM3RixFQUFHbWhCLEdBQUtuaEIsYUFBYWtwQyxHQUFrQixTQUF5Q2xwQyxFQUFHbWhCLEdBQ2pGLE9BQUlBLGFBQWErbkIsSUFBbUJscEMsRUFBRW1vQyxLQUFPaG5CLEVBQUVnbkIsSUFBTW5vQyxFQUFFbXBDLFFBQVE1b0MsU0FBVzRnQixFQUFFZ29CLFFBQVE1b0MsUUFDekVQLEVBQUVtcEMsUUFBUUcsUUFBTyxDQUFFdHBDLEVBQUd3YSxFQUFHTCxJQUFNbmEsR0FBSzJwQyxHQUF1Qm52QixFQUFHMkcsRUFBRWdvQixRQUFRaHZCLE1BQU0sRUFHN0YsQ0FMeUMsQ0FTeENuYSxFQUFHbWhCLFFBQVU2VSxJQUNsQixDQU9pRCxTQUFTNFQsR0FBMEI1cEMsR0FDaEYsT0FBT0EsYUFBYWtvQyxHQUFjLFNBQXdDbG9DLEdBQ3RFLE1BQU8sR0FBR0EsRUFBRThsQyxNQUFNbEsscUJBQXFCNTdCLEVBQUVtb0MsTUFBTTdDLEdBQVl0bEMsRUFBRTZGLFFBQ2pFLENBRmtDLENBRzJCN0YsR0FBS0EsYUFBYWtwQyxHQUFrQixTQUE0Q2xwQyxHQUN6SSxPQUFPQSxFQUFFbW9DLEdBQUdudUIsV0FBYSxLQUFPaGEsRUFBRWdwQyxhQUFhaCtCLElBQUk0K0IsSUFBMkJybkMsS0FBSyxNQUFRLEdBQy9GLENBRmlHLENBRS9GdkMsR0FBSyxRQUNYLENBRUEsTUFBTXFvQyxXQUFpQ0gsR0FDbkMsV0FBQXprQyxDQUFZekQsRUFBR21oQixFQUFHM0csR0FDZDlXLE1BQU0xRCxFQUFHbWhCLEVBQUczRyxHQUFJMWEsS0FBS21ILElBQU1tMUIsR0FBWUcsU0FBUy9oQixFQUFFb3FCLGVBQ3RELENBQ0EsT0FBQWdFLENBQVE1b0MsR0FDSixNQUFNbWhCLEVBQUlpYixHQUFZckIsV0FBVy82QixFQUFFaUgsSUFBS25ILEtBQUttSCxLQUM3QyxPQUFPbkgsS0FBSytvQyxrQkFBa0IxbkIsRUFDbEMsRUFHc0QsTUFBTXVuQixXQUFtQ1IsR0FDL0YsV0FBQXprQyxDQUFZekQsRUFBR21oQixHQUNYemQsTUFBTTFELEVBQUcsS0FBeUJtaEIsR0FBSXJoQixLQUFLeUgsS0FBT3NpQyxHQUE0QyxFQUF5QjFvQixFQUMzSCxDQUNBLE9BQUF5bkIsQ0FBUTVvQyxHQUNKLE9BQU9GLEtBQUt5SCxLQUFLZ0gsTUFBTTRTLEdBQUtBLEVBQUVtVSxRQUFRdDFCLEVBQUVpSCxNQUM1QyxFQUdrRSxNQUFNMGhDLFdBQXNDVCxHQUM5RyxXQUFBemtDLENBQVl6RCxFQUFHbWhCLEdBQ1h6ZCxNQUFNMUQsRUFBRyxTQUFpQ21oQixHQUFJcmhCLEtBQUt5SCxLQUFPc2lDLEdBQTRDLEVBQWlDMW9CLEVBQzNJLENBQ0EsT0FBQXluQixDQUFRNW9DLEdBQ0osT0FBUUYsS0FBS3lILEtBQUtnSCxNQUFNNFMsR0FBS0EsRUFBRW1VLFFBQVF0MUIsRUFBRWlILE1BQzdDLEVBR0osU0FBUzRpQyxHQUE0QzdwQyxFQUFHbWhCLEdBQ3BELElBQUkzRyxFQUNKLFFBQVMsUUFBVUEsRUFBSTJHLEVBQUUrakIsa0JBQWUsSUFBVzFxQixPQUFJLEVBQVNBLEVBQUUzUCxTQUFXLElBQUlHLEtBQUtoTCxHQUFLbzhCLEdBQVlHLFNBQVN2OEIsRUFBRTRrQyxpQkFDdEgsQ0FFNkQsTUFBTTBELFdBQXNDSixHQUNyRyxXQUFBemtDLENBQVl6RCxFQUFHbWhCLEdBQ1h6ZCxNQUFNMUQsRUFBRyxpQkFBaURtaEIsRUFDOUQsQ0FDQSxPQUFBeW5CLENBQVE1b0MsR0FDSixNQUFNbWhCLEVBQUluaEIsRUFBRTRHLEtBQUtrL0IsTUFBTWhtQyxLQUFLZ21DLE9BQzVCLE9BQU90a0MsR0FBUTJmLElBQU1na0IsR0FBNkJoa0IsRUFBRStqQixXQUFZcGxDLEtBQUsrRixNQUN6RSxFQUc2QyxNQUFNMGlDLFdBQTJCTCxHQUM5RSxXQUFBemtDLENBQVl6RCxFQUFHbWhCLEdBQ1h6ZCxNQUFNMUQsRUFBRyxLQUF5Qm1oQixFQUN0QyxDQUNBLE9BQUF5bkIsQ0FBUTVvQyxHQUNKLE1BQU1taEIsRUFBSW5oQixFQUFFNEcsS0FBS2svQixNQUFNaG1DLEtBQUtnbUMsT0FDNUIsT0FBTyxPQUFTM2tCLEdBQUtna0IsR0FBNkJybEMsS0FBSytGLE1BQU1xL0IsV0FBWS9qQixFQUM3RSxFQUdpRCxNQUFNcW5CLFdBQThCTixHQUNyRixXQUFBemtDLENBQVl6RCxFQUFHbWhCLEdBQ1h6ZCxNQUFNMUQsRUFBRyxTQUFpQ21oQixFQUM5QyxDQUNBLE9BQUF5bkIsQ0FBUTVvQyxHQUNKLEdBQUltbEMsR0FBNkJybEMsS0FBSytGLE1BQU1xL0IsV0FBWSxDQUNwRDRFLFVBQVcsZUFDWCxPQUFPLEVBQ1gsTUFBTTNvQixFQUFJbmhCLEVBQUU0RyxLQUFLay9CLE1BQU1obUMsS0FBS2dtQyxPQUM1QixPQUFPLE9BQVMza0IsSUFBTWdrQixHQUE2QnJsQyxLQUFLK0YsTUFBTXEvQixXQUFZL2pCLEVBQzlFLEVBRzZELE1BQU1zbkIsV0FBeUNQLEdBQzVHLFdBQUF6a0MsQ0FBWXpELEVBQUdtaEIsR0FDWHpkLE1BQU0xRCxFQUFHLHFCQUF5RG1oQixFQUN0RSxDQUNBLE9BQUF5bkIsQ0FBUTVvQyxHQUNKLE1BQU1taEIsRUFBSW5oQixFQUFFNEcsS0FBS2svQixNQUFNaG1DLEtBQUtnbUMsT0FDNUIsU0FBVXRrQyxHQUFRMmYsS0FBT0EsRUFBRStqQixXQUFXcjZCLFNBQVdzVyxFQUFFK2pCLFdBQVdyNkIsT0FBTzBELE1BQU12TyxHQUFLbWxDLEdBQTZCcmxDLEtBQUsrRixNQUFNcS9CLFdBQVlsbEMsSUFDeEksRUFvQkosTUFBTStwQyxHQUNGLFdBQUF0bUMsQ0FBWXpELEVBQUdtaEIsRUFBSSxLQUFNM0csRUFBSSxHQUFJTCxFQUFJLEdBQUk3WixFQUFJLEtBQU1vYSxFQUFJLEtBQU1DLEVBQUksTUFDN0Q3YSxLQUFLdThCLEtBQU9yOEIsRUFBR0YsS0FBSzI4QixnQkFBa0J0YixFQUFHcmhCLEtBQUtrcUMsUUFBVXh2QixFQUFHMWEsS0FBS3FwQyxRQUFVaHZCLEVBQUdyYSxLQUFLbTdCLE1BQVEzNkIsRUFDMUZSLEtBQUttcUMsUUFBVXZ2QixFQUFHNWEsS0FBS29xQyxNQUFRdnZCLEVBQUc3YSxLQUFLcXFDLEdBQUssSUFDaEQsRUFVQSxTQUFTQyxHQUFvQnBxQyxFQUFHbWhCLEVBQUksS0FBTTNHLEVBQUksR0FBSUwsRUFBSSxHQUFJN1osRUFBSSxLQUFNb2EsRUFBSSxLQUFNQyxFQUFJLE1BQ2xGLE9BQU8sSUFBSW92QixHQUFxQi9wQyxFQUFHbWhCLEVBQUczRyxFQUFHTCxFQUFHN1osRUFBR29hLEVBQUdDLEVBQ3RELENBRUEsU0FBUzB2QixHQUF5QnJxQyxHQUM5QixNQUFNbWhCLEVBQUkrVSxHQUFvQmwyQixHQUM5QixHQUFJLE9BQVNtaEIsRUFBRWdwQixHQUFJLENBQ2YsSUFBSW5xQyxFQUFJbWhCLEVBQUVrYixLQUFLVCxrQkFDZixPQUFTemEsRUFBRXNiLGtCQUFvQno4QixHQUFLLE9BQVNtaEIsRUFBRXNiLGlCQUFrQno4QixHQUFLLE1BQU9BLEdBQUttaEIsRUFBRWdvQixRQUFRbitCLEtBQUtoTCxHQUFLMHBDLEdBQXlCMXBDLEtBQUt1QyxLQUFLLEtBQ3pJdkMsR0FBSyxPQUFRQSxHQUFLbWhCLEVBQUU2b0IsUUFBUWgvQixLQUFLaEwsR0FBSyxTQUFtQ0EsR0FFckUsT0FBT0EsRUFBRThsQyxNQUFNbEssa0JBQW9CNTdCLEVBQUU2bkMsR0FDekMsQ0FIc0MsQ0FHcEM3bkMsS0FBS3VDLEtBQUssS0FBTXM4QixHQUE0QjFkLEVBQUU4WixTQUFXajdCLEdBQUssTUFBT0EsR0FBS21oQixFQUFFOFosT0FDOUU5WixFQUFFOG9CLFVBQVlqcUMsR0FBSyxPQUFRQSxHQUFLbWhCLEVBQUU4b0IsUUFBUXRDLFVBQVksS0FBTyxLQUFNM25DLEdBQUttaEIsRUFBRThvQixRQUFRdkMsU0FBUzE4QixLQUFLaEwsR0FBS3NsQyxHQUFZdGxDLEtBQUt1QyxLQUFLLE1BQzNINGUsRUFBRStvQixRQUFVbHFDLEdBQUssT0FBUUEsR0FBS21oQixFQUFFK29CLE1BQU12QyxVQUFZLEtBQU8sS0FBTTNuQyxHQUFLbWhCLEVBQUUrb0IsTUFBTXhDLFNBQVMxOEIsS0FBS2hMLEdBQUtzbEMsR0FBWXRsQyxLQUFLdUMsS0FBSyxNQUNySDRlLEVBQUVncEIsR0FBS25xQyxDQUNYLENBQ0EsT0FBT21oQixFQUFFZ3BCLEVBQ2IsQ0FFQSxTQUFTRyxHQUF1QnRxQyxFQUFHbWhCLEdBQy9CLEdBQUluaEIsRUFBRWk3QixRQUFVOVosRUFBRThaLE1BQU8sT0FBTyxFQUNoQyxHQUFJajdCLEVBQUVncUMsUUFBUXpwQyxTQUFXNGdCLEVBQUU2b0IsUUFBUXpwQyxPQUFRLE9BQU8sRUFDbEQsSUFBSyxJQUFJaWEsRUFBSSxFQUFHQSxFQUFJeGEsRUFBRWdxQyxRQUFRenBDLE9BQVFpYSxJQUFLLElBQUt3dEIsR0FBd0Job0MsRUFBRWdxQyxRQUFReHZCLEdBQUkyRyxFQUFFNm9CLFFBQVF4dkIsSUFBSyxPQUFPLEVBQzVHLEdBQUl4YSxFQUFFbXBDLFFBQVE1b0MsU0FBVzRnQixFQUFFZ29CLFFBQVE1b0MsT0FBUSxPQUFPLEVBQ2xELElBQUssSUFBSWlhLEVBQUksRUFBR0EsRUFBSXhhLEVBQUVtcEMsUUFBUTVvQyxPQUFRaWEsSUFBSyxJQUFLbXZCLEdBQXVCM3BDLEVBQUVtcEMsUUFBUTN1QixHQUFJMkcsRUFBRWdvQixRQUFRM3VCLElBQUssT0FBTyxFQUMzRyxPQUFPeGEsRUFBRXk4QixrQkFBb0J0YixFQUFFc2IsbUJBQXNCejhCLEVBQUVxOEIsS0FBSy9HLFFBQVFuVSxFQUFFa2IsU0FBWXlMLEdBQXNCOW5DLEVBQUVpcUMsUUFBUzlvQixFQUFFOG9CLFVBQVluQyxHQUFzQjluQyxFQUFFa3FDLE1BQU8vb0IsRUFBRStvQixNQUN0SyxDQUVBLFNBQVNLLEdBQWlDdnFDLEdBQ3RDLE9BQU9vOEIsR0FBWVMsY0FBYzc4QixFQUFFcThCLE9BQVMsT0FBU3I4QixFQUFFeThCLGlCQUFtQixJQUFNejhCLEVBQUVtcEMsUUFBUTVvQyxNQUM5RixDQXVKQSxNQUFNaXFDLEdBS0YsV0FBQS9tQyxDQUFZekQsRUFBR21oQixFQUFJLEtBQU0zRyxFQUFJLEdBQUlMLEVBQUksR0FBSTdaLEVBQUksS0FBTW9hLEVBQUksSUFBNEJDLEVBQUksS0FBTTNULEVBQUksTUFDN0ZsSCxLQUFLdThCLEtBQU9yOEIsRUFBR0YsS0FBSzI4QixnQkFBa0J0YixFQUFHcmhCLEtBQUsycUMsZ0JBQWtCandCLEVBQUcxYSxLQUFLcXBDLFFBQVVodkIsRUFDbEZyYSxLQUFLbTdCLE1BQVEzNkIsRUFBR1IsS0FBSzRxQyxVQUFZaHdCLEVBQUc1YSxLQUFLbXFDLFFBQVV0dkIsRUFBRzdhLEtBQUtvcUMsTUFBUWxqQyxFQUFHbEgsS0FBSzZxQyxHQUFLLEtBRWhGN3FDLEtBQUs4cUMsR0FBSyxLQUFNOXFDLEtBQUttcUMsUUFBU25xQyxLQUFLb3FDLEtBQ3ZDLEVBT3dFLFNBQVNXLEdBQTBCN3FDLEdBQzNHLE9BQU8sSUFBSXdxQyxHQUFvQnhxQyxFQUNuQyxDQVlBLFNBQVM4cUMsR0FBbUM5cUMsR0FDeEMsT0FBTyxJQUFNQSxFQUFFbXBDLFFBQVE1b0MsUUFBVSxPQUFTUCxFQUFFaTdCLE9BQVMsTUFBUWo3QixFQUFFaXFDLFNBQVcsTUFBUWpxQyxFQUFFa3FDLFFBQVUsSUFBTWxxQyxFQUFFeXFDLGdCQUFnQmxxQyxRQUFVLElBQU1QLEVBQUV5cUMsZ0JBQWdCbHFDLFFBQVVQLEVBQUV5cUMsZ0JBQWdCLEdBQUczRSxNQUFNOUosYUFDak0sQ0E4QkksU0FBUytPLEdBQXVCL3FDLEdBQ2hDLE1BQU1taEIsRUFBSStVLEdBQW9CbDJCLEdBQzlCLEdBQUksT0FBU21oQixFQUFFd3BCLEdBQUksQ0FDZnhwQixFQUFFd3BCLEdBQUssR0FDUCxNQUFNM3FDLEVBNUJkLFNBQTRDQSxHQUN4QyxJQUFLLE1BQU1taEIsS0FBS25oQixFQUFFbXBDLFFBQVMsQ0FDdkIsTUFBTW5wQyxFQUFJbWhCLEVBQUU4bkIsMEJBQ1osR0FBSSxPQUFTanBDLEVBQUcsT0FBT0EsQ0FDM0IsQ0FDQSxPQUFPLElBQ1gsQ0FzQmtCZ3JDLENBQW1DN3BCLEdBQUkzRyxFQWhDekQsU0FBd0N4YSxHQUNwQyxPQUFPQSxFQUFFeXFDLGdCQUFnQmxxQyxPQUFTLEVBQUlQLEVBQUV5cUMsZ0JBQWdCLEdBQUczRSxNQUFRLElBQ3ZFLENBOEI2RG1GLENBQStCOXBCLEdBQ3BGLEdBQUksT0FBU25oQixHQUFLLE9BQVN3YSxFQUkzQnhhLEVBQUVnOEIsY0FBZ0I3YSxFQUFFd3BCLEdBQUdyb0MsS0FBSyxJQUFJeWxDLEdBQVEvbkMsSUFBS21oQixFQUFFd3BCLEdBQUdyb0MsS0FBSyxJQUFJeWxDLEdBQVFqTSxHQUFZRyxXQUFZLFlBQXdDLENBQy9ILElBQUlqOEIsR0FBSSxFQUNSLElBQUssTUFBTXdhLEtBQUsyRyxFQUFFc3BCLGdCQUFpQnRwQixFQUFFd3BCLEdBQUdyb0MsS0FBS2tZLEdBQUlBLEVBQUVzckIsTUFBTTlKLGVBQWlCaDhCLEdBQUksR0FDOUUsSUFBS0EsRUFBRyxDQUdKLE1BQU1BLEVBQUltaEIsRUFBRXNwQixnQkFBZ0JscUMsT0FBUyxFQUFJNGdCLEVBQUVzcEIsZ0JBQWdCdHBCLEVBQUVzcEIsZ0JBQWdCbHFDLE9BQVMsR0FBR3NuQyxJQUFNLE1BQy9GMW1CLEVBQUV3cEIsR0FBR3JvQyxLQUFLLElBQUl5bEMsR0FBUWpNLEdBQVlHLFdBQVlqOEIsR0FDbEQsQ0FDSixDQUNKLENBQ0EsT0FBT21oQixFQUFFd3BCLEVBQ2IsQ0FJSSxTQUFTTyxHQUF3QmxyQyxHQUNqQyxNQUFNbWhCLEVBQUkrVSxHQUFvQmwyQixHQUM5QixJQUFLbWhCLEVBQUV5cEIsR0FBSSxHQUFJLE1BQThCenBCLEVBQUV1cEIsVUFBV3ZwQixFQUFFeXBCLEdBQUtSLEdBQW9CanBCLEVBQUVrYixLQUFNbGIsRUFBRXNiLGdCQUFpQnNPLEdBQXVCNXBCLEdBQUlBLEVBQUVnb0IsUUFBU2hvQixFQUFFOFosTUFBTzlaLEVBQUU4b0IsUUFBUzlvQixFQUFFK29CLFdBQWEsQ0FFckwsTUFBTWxxQyxFQUFJLEdBQ1YsSUFBSyxNQUFNd2EsS0FBS3V3QixHQUF1QjVwQixHQUFJLENBQ3ZDLE1BQU1BLEVBQUksU0FBc0MzRyxFQUFFcXRCLElBQU0sTUFBa0MsT0FDMUY3bkMsRUFBRXNDLEtBQUssSUFBSXlsQyxHQUFRdnRCLEVBQUVzckIsTUFBTzNrQixHQUNoQyxDQUVRLE1BQU0zRyxFQUFJMkcsRUFBRStvQixNQUFRLElBQUl6QyxHQUFNdG1CLEVBQUUrb0IsTUFBTXhDLFNBQVV2bUIsRUFBRStvQixNQUFNdkMsV0FBYSxLQUFNeHRCLEVBQUlnSCxFQUFFOG9CLFFBQVUsSUFBSXhDLEdBQU10bUIsRUFBRThvQixRQUFRdkMsU0FBVXZtQixFQUFFOG9CLFFBQVF0QyxXQUFhLEtBRXhKeG1CLEVBQUV5cEIsR0FBS1IsR0FBb0JqcEIsRUFBRWtiLEtBQU1sYixFQUFFc2IsZ0JBQWlCejhCLEVBQUdtaEIsRUFBRWdvQixRQUFTaG9CLEVBQUU4WixNQUFPemdCLEVBQUdMLEVBQ3BGLENBQ0EsT0FBT2dILEVBQUV5cEIsRUFDYixDQVFBLFNBQVNPLEdBQXlCbnJDLEVBQUdtaEIsRUFBRzNHLEdBQ3BDLE9BQU8sSUFBSWd3QixHQUFvQnhxQyxFQUFFcThCLEtBQU1yOEIsRUFBRXk4QixnQkFBaUJ6OEIsRUFBRXlxQyxnQkFBZ0JqekIsUUFBU3hYLEVBQUVtcEMsUUFBUTN4QixRQUFTMkosRUFBRzNHLEVBQUd4YSxFQUFFaXFDLFFBQVNqcUMsRUFBRWtxQyxNQUMvSCxDQUVBLFNBQVNrQixHQUFzQnByQyxFQUFHbWhCLEdBQzlCLE9BQU9tcEIsR0FBdUJZLEdBQXdCbHJDLEdBQUlrckMsR0FBd0IvcEIsS0FBT25oQixFQUFFMHFDLFlBQWN2cEIsRUFBRXVwQixTQUMvRyxDQUtBLFNBQVNXLEdBQXdCcnJDLEdBQzdCLE1BQU8sR0FBR3FxQyxHQUF5QmEsR0FBd0JsckMsVUFBVUEsRUFBRTBxQyxXQUMzRSxDQUVBLFNBQVNZLEdBQXlCdHJDLEdBQzlCLE1BQU8sZ0JBQWdCLFNBQW1DQSxHQUN0RCxJQUFJbWhCLEVBQUluaEIsRUFBRXE4QixLQUFLVCxrQkFDZixPQUFPLE9BQVM1N0IsRUFBRXk4QixrQkFBb0J0YixHQUFLLG9CQUFzQm5oQixFQUFFeThCLGlCQUNuRXo4QixFQUFFbXBDLFFBQVE1b0MsT0FBUyxJQUFNNGdCLEdBQUssZUFBZW5oQixFQUFFbXBDLFFBQVFuK0IsS0FBS2hMLEdBQUs0cEMsR0FBMEI1cEMsS0FBS3VDLEtBQUssVUFDckdzOEIsR0FBNEI3K0IsRUFBRWk3QixTQUFXOVosR0FBSyxZQUFjbmhCLEVBQUVpN0IsT0FBUWo3QixFQUFFZ3FDLFFBQVF6cEMsT0FBUyxJQUFNNGdCLEdBQUssZUFBZW5oQixFQUFFZ3FDLFFBQVFoL0IsS0FBS2hMLEdBQUssU0FBb0NBLEdBQ3ZLLE1BQU8sR0FBR0EsRUFBRThsQyxNQUFNbEssc0JBQXNCNTdCLEVBQUU2bkMsTUFDOUMsQ0FGdUksQ0FFckk3bkMsS0FBS3VDLEtBQUssVUFBV3ZDLEVBQUVpcUMsVUFBWTlvQixHQUFLLGNBQWVBLEdBQUtuaEIsRUFBRWlxQyxRQUFRdEMsVUFBWSxLQUFPLEtBQzNGeG1CLEdBQUtuaEIsRUFBRWlxQyxRQUFRdkMsU0FBUzE4QixLQUFLaEwsR0FBS3NsQyxHQUFZdGxDLEtBQUt1QyxLQUFLLE1BQU92QyxFQUFFa3FDLFFBQVUvb0IsR0FBSyxZQUNoRkEsR0FBS25oQixFQUFFa3FDLE1BQU12QyxVQUFZLEtBQU8sS0FBTXhtQixHQUFLbmhCLEVBQUVrcUMsTUFBTXhDLFNBQVMxOEIsS0FBS2hMLEdBQUtzbEMsR0FBWXRsQyxLQUFLdUMsS0FBSyxNQUM1RixVQUFVNGUsSUFDZCxDQVZ1QixDQVVyQitwQixHQUF3QmxyQyxrQkFBa0JBLEVBQUUwcUMsWUFDbEQsQ0FFaUUsU0FBU2EsR0FBdUJ2ckMsRUFBR21oQixHQUNoRyxPQUFPQSxFQUFFa21CLG1CQUFxQixTQUFzRHJuQyxFQUFHbWhCLEdBQ25GLE1BQU0zRyxFQUFJMkcsRUFBRWxhLElBQUlvMUIsS0FDaEIsT0FBTyxPQUFTcjhCLEVBQUV5OEIsZ0JBQWtCdGIsRUFBRWxhLElBQUl5MUIsZ0JBQWdCMThCLEVBQUV5OEIsa0JBQW9CejhCLEVBQUVxOEIsS0FBS2IsV0FBV2hoQixHQUFLNGhCLEdBQVlTLGNBQWM3OEIsRUFBRXE4QixNQUFRcjhCLEVBQUVxOEIsS0FBSy9HLFFBQVE5YSxHQUFLeGEsRUFBRXE4QixLQUFLWixvQkFBb0JqaEIsRUFDOUwsQ0FIOEIsQ0FPN0J4YSxFQUFHbWhCLElBQU0sU0FBdUNuaEIsRUFBR21oQixHQU9oRCxJQUFLLE1BQU0zRyxLQUFLdXdCLEdBQXVCL3FDLEdBRXZDLElBQUt3YSxFQUFFc3JCLE1BQU05SixjQUFnQixPQUFTN2EsRUFBRXZhLEtBQUtrL0IsTUFBTXRyQixFQUFFc3JCLE9BQVEsT0FBTyxFQUNwRSxPQUFPLENBQ1gsQ0FYVSxDQVdSOWxDLEVBQUdtaEIsSUFBTSxTQUF1Q25oQixFQUFHbWhCLEdBQ2pELElBQUssTUFBTTNHLEtBQUt4YSxFQUFFbXBDLFFBQVMsSUFBSzN1QixFQUFFb3VCLFFBQVF6bkIsR0FBSSxPQUFPLEVBQ3JELE9BQU8sQ0FDWCxDQUhXLENBSXNEbmhCLEVBQUdtaEIsSUFBTSxTQUFzQ25oQixFQUFHbWhCLEdBQy9HLFFBQUluaEIsRUFBRWlxQyxVQUtOLFNBQTRDanFDLEVBQUdtaEIsRUFBRzNHLEdBQzlDLE1BQU1MLEVBQUl5dEIsR0FBaUM1bkMsRUFBR21oQixFQUFHM0csR0FDakQsT0FBT3hhLEVBQUUybkMsVUFBWXh0QixHQUFLLEVBQUlBLEVBQUksQ0FDdEMsQ0FIQSxDQUdFbmEsRUFBRWlxQyxRQUFTYyxHQUF1Qi9xQyxHQUFJbWhCLElBQ3BDbmhCLEVBQUVrcUMsUUFBVSxTQUEyQ2xxQyxFQUFHbWhCLEVBQUczRyxHQUM3RCxNQUFNTCxFQUFJeXRCLEdBQWlDNW5DLEVBQUdtaEIsRUFBRzNHLEdBQ2pELE9BQU94YSxFQUFFMm5DLFVBQVl4dEIsR0FBSyxFQUFJQSxFQUFJLENBQ3RDLENBSGdCLENBR2RuYSxFQUFFa3FDLE1BQU9hLEdBQXVCL3FDLEdBQUltaEIsR0FFMUMsQ0FmMEUsQ0FxQnpFbmhCLEVBQUdtaEIsRUFDUixDQVNJLFNBQVNxcUIsR0FBNkJ4ckMsR0FDdEMsTUFBTyxDQUFDbWhCLEVBQUczRyxLQUNQLElBQUlMLEdBQUksRUFDUixJQUFLLE1BQU03WixLQUFLeXFDLEdBQXVCL3FDLEdBQUksQ0FDdkMsTUFBTUEsRUFBSXlyQyxHQUFzQm5yQyxFQUFHNmdCLEVBQUczRyxHQUN0QyxHQUFJLElBQU14YSxFQUFHLE9BQU9BLEVBQ3BCbWEsRUFBSUEsR0FBSzdaLEVBQUV3bEMsTUFBTTlKLFlBQ3JCLENBQ0EsT0FBTyxDQUFDLENBRWhCLENBRUEsU0FBU3lQLEdBQXNCenJDLEVBQUdtaEIsRUFBRzNHLEdBQ2pDLE1BQU1MLEVBQUluYSxFQUFFOGxDLE1BQU05SixhQUFlSSxHQUFZckIsV0FBVzVaLEVBQUVsYSxJQUFLdVQsRUFBRXZULEtBQU8sU0FBMkNqSCxFQUFHbWhCLEVBQUczRyxHQUNySCxNQUFNTCxFQUFJZ0gsRUFBRXZhLEtBQUtrL0IsTUFBTTlsQyxHQUFJTSxFQUFJa2EsRUFBRTVULEtBQUtrL0IsTUFBTTlsQyxHQUM1QyxPQUFPLE9BQVNtYSxHQUFLLE9BQVM3WixFQUFJOGtDLEdBQXVCanJCLEVBQUc3WixHQUFLMDFCLElBQ3JFLENBSHdFLENBR3RFaDJCLEVBQUU4bEMsTUFBTzNrQixFQUFHM0csR0FDZCxPQUFReGEsRUFBRTZuQyxLQUNSLElBQUssTUFDSCxPQUFPMXRCLEVBRVQsSUFBSyxPQUNILE9BQVEsRUFBSUEsRUFFZCxRQUNFLE9BQU82YixLQUVmLENBdUJJLE1BQU0wVixHQUNOLFdBQUFqb0MsQ0FBWXpELEVBQUdtaEIsR0FDWHJoQixLQUFLNnJDLFNBQVczckMsRUFBR0YsS0FBSzhyQyxTQUFXenFCLEVBT25DcmhCLEtBQUsrckMsTUFBUSxDQUFDLEVBRWQvckMsS0FBS2dzQyxVQUFZLENBQ3JCLENBQ3VFLEdBQUF6aUMsQ0FBSXJKLEdBQ3ZFLE1BQU1taEIsRUFBSXJoQixLQUFLNnJDLFNBQVMzckMsR0FBSXdhLEVBQUkxYSxLQUFLK3JDLE1BQU0xcUIsR0FDM0MsUUFBSSxJQUFXM0csRUFBRyxJQUFLLE1BQU8yRyxFQUFHaEgsS0FBTUssRUFBRyxHQUFJMWEsS0FBSzhyQyxTQUFTenFCLEVBQUduaEIsR0FBSSxPQUFPbWEsQ0FDOUUsQ0FDQSxHQUFBMVEsQ0FBSXpKLEdBQ0EsWUFBTyxJQUFXRixLQUFLdUosSUFBSXJKLEVBQy9CLENBQzZDLEdBQUEySixDQUFJM0osRUFBR21oQixHQUNoRCxNQUFNM0csRUFBSTFhLEtBQUs2ckMsU0FBUzNyQyxHQUFJbWEsRUFBSXJhLEtBQUsrckMsTUFBTXJ4QixHQUMzQyxRQUFJLElBQVdMLEVBQUcsT0FBT3JhLEtBQUsrckMsTUFBTXJ4QixHQUFLLENBQUUsQ0FBRXhhLEVBQUdtaEIsU0FBWXJoQixLQUFLZ3NDLFlBQ2pFLElBQUssSUFBSXR4QixFQUFJLEVBQUdBLEVBQUlMLEVBQUU1WixPQUFRaWEsSUFBSyxHQUFJMWEsS0FBSzhyQyxTQUFTenhCLEVBQUVLLEdBQUcsR0FBSXhhLEdBRTlELFlBQWFtYSxFQUFFSyxHQUFLLENBQUV4YSxFQUFHbWhCLElBQ3pCaEgsRUFBRTdYLEtBQUssQ0FBRXRDLEVBQUdtaEIsSUFBTXJoQixLQUFLZ3NDLFdBQzNCLENBR08sT0FBTzlyQyxHQUNWLE1BQU1taEIsRUFBSXJoQixLQUFLNnJDLFNBQVMzckMsR0FBSXdhLEVBQUkxYSxLQUFLK3JDLE1BQU0xcUIsR0FDM0MsUUFBSSxJQUFXM0csRUFBRyxPQUFPLEVBQ3pCLElBQUssSUFBSUwsRUFBSSxFQUFHQSxFQUFJSyxFQUFFamEsT0FBUTRaLElBQUssR0FBSXJhLEtBQUs4ckMsU0FBU3B4QixFQUFFTCxHQUFHLEdBQUluYSxHQUFJLE9BQU8sSUFBTXdhLEVBQUVqYSxjQUFnQlQsS0FBSytyQyxNQUFNMXFCLEdBQUszRyxFQUFFZ0YsT0FBT3JGLEVBQUcsR0FDN0hyYSxLQUFLZ3NDLGFBQWEsRUFDbEIsT0FBTyxDQUNYLENBQ0EsT0FBQXpqQixDQUFRcm9CLEdBQ0pxb0IsR0FBUXZvQixLQUFLK3JDLE9BQU8sQ0FBRTFxQixFQUFHM0csS0FDckIsSUFBSyxNQUFPMkcsRUFBR2hILEtBQU1LLEVBQUd4YSxFQUFFbWhCLEVBQUdoSCxFQUNoQyxHQUNMLENBQ0EsT0FBQW9oQixHQUNJLE9BajFFUixTQUFpQnY3QixHQUNiLElBQUssTUFBTW1oQixLQUFLbmhCLEVBQUcsR0FBSW1HLE9BQU9FLFVBQVV5VSxlQUFlM0ssS0FBS25RLEVBQUdtaEIsR0FBSSxPQUFPLEVBQzFFLE9BQU8sQ0FDWCxDQTgwRWUsQ0FBUXJoQixLQUFLK3JDLE1BQ3hCLENBQ0EsSUFBQTduQixHQUNJLE9BQU9sa0IsS0FBS2dzQyxTQUNoQixFQWtCQSxNQUFNQyxHQUFLLElBQUkvTSxHQUFVNUMsR0FBWXJCLFlBRXpDLFNBQVNpUixLQUNMLE9BQU9ELEVBQ1gsQ0FFQSxNQUFNRSxHQUFLLElBQUlqTixHQUFVNUMsR0FBWXJCLFlBRXJDLFNBQVNtUixNQUFlbHNDLEdBQ3BCLElBQUltaEIsRUFBSThxQixHQUNSLElBQUssTUFBTXp4QixLQUFLeGEsRUFBR21oQixFQUFJQSxFQUFFaWUsT0FBTzVrQixFQUFFdlQsSUFBS3VULEdBQ3ZDLE9BQU8yRyxDQUNYLENBRUEsU0FBU2dyQixHQUFtRG5zQyxHQUN4RCxJQUFJbWhCLEVBQUk4cUIsR0FDUixPQUFPanNDLEVBQUVxb0IsU0FBUSxDQUFFcm9CLEVBQUd3YSxJQUFNMkcsRUFBSUEsRUFBRWllLE9BQU9wL0IsRUFBR3dhLEVBQUU0eEIscUJBQXNCanJCLENBQ3hFLENBRUEsU0FBU2tyQixLQUNMLE9BQU9DLElBQ1gsQ0FFQSxTQUFTQyxLQUNMLE9BQU9ELElBQ1gsQ0FFQSxTQUFTQSxLQUNMLE9BQU8sSUFBSVosSUFBVzFyQyxHQUFLQSxFQUFFZ2EsYUFBYSxDQUFFaGEsRUFBR21oQixJQUFNbmhCLEVBQUVzMUIsUUFBUW5VLElBQ25FLENBRVcsSUFBSTZkLEdBQVU1QyxHQUFZckIsWUFBckMsTUFFTTRELEdBQUssSUFBSXlDLEdBQVVoRixHQUFZckIsWUFFckMsU0FBU3lSLE1BQTRCeHNDLEdBQ2pDLElBQUltaEIsRUFBSXdkLEdBQ1IsSUFBSyxNQUFNbmtCLEtBQUt4YSxFQUFHbWhCLEVBQUlBLEVBQUV6VixJQUFJOE8sR0FDN0IsT0FBTzJHLENBQ1gsQ0FFQSxNQUFNLEdBQUssSUFBSWlnQixHQUFVN0gsSUEwRWlDLE1BQU1rVCxHQUM1RCxXQUFBaHBDLEdBR0kzRCxLQUFLa0gsT0FBSSxDQUNiLEVBTUEsU0FBUzBsQyxHQUE2QzFzQyxFQUFHbWhCLEVBQUczRyxHQUM1RCxPQUFPeGEsYUFBYTJzQyxHQUFxQyxTQUEyQjNzQyxFQUFHbWhCLEdBQ25GLE1BQU0zRyxFQUFJLENBQ05zbkIsT0FBUSxDQUNKcUIsU0FBVSxDQUNOQyxZQUFhLG9CQUVqQkkscUJBQXNCLENBQ2xCQyxlQUFnQixDQUNaOUosUUFBUzM1QixFQUFFMjVCLFFBQ1htSixNQUFPOWlDLEVBQUU0NUIsZ0JBYWpCLE9BQU96WSxHQUFLOGhCLEdBQTRCOWhCLEtBQU9BLEVBQUlraUIsR0FBMkJsaUIsSUFDdEZBLElBQU0zRyxFQUFFc25CLE9BQU93QixtQkFBcUJuaUIsR0FBSSxDQUNwQytoQixTQUFVMW9CLEVBRWxCLENBMUJ5RCxDQTBCdkRBLEVBQUcyRyxHQUFLbmhCLGFBQWE0c0MsR0FBeUNDLEdBQTRDN3NDLEVBQUdtaEIsR0FBS25oQixhQUFhOHNDLEdBQTBDQyxHQUE2Qy9zQyxFQUFHbWhCLEdBQUssU0FBc0VuaEIsRUFBR21oQixHQUlyUyxNQUFNM0csRUE2QlYsU0FBc0R4YSxFQUFHbWhCLEdBQ3pELE9BQU9uaEIsYUFBYWd0QyxHQUVwQixTQUE0Qmh0QyxHQUN4QixPQUFPd2xDLEdBQVV4bEMsSUFBTSxTQUE0QkEsR0FDL0MsUUFBU0EsR0FBSyxnQkFBaUJBLENBQ25DLENBRnVCLENBRXJCQSxFQUNOLENBSkEsQ0FJRW1oQixHQUFLQSxFQUFJLENBQ1A2akIsYUFBYyxHQUNkLElBQ1IsQ0F2Q2tCaUksQ0FBNkNqdEMsRUFBR21oQixHQUFJaEgsRUFBSSt5QixHQUFTMXlCLEdBQUsweUIsR0FBU2x0QyxFQUFFbXRDLElBQzNGLE9BQU8zSCxHQUFVaHJCLElBQU1nckIsR0FBVXhsQyxFQUFFbXRDLElBekV2QyxTQUE2Qm50QyxHQUM3QixNQUFPLENBQ0hnbEMsYUFBYyxHQUFLaGxDLEVBRTNCLENBcUVpRG90QyxDQUFvQmp6QixHQTVGakUsU0FBNEJuYSxFQUFHbWhCLEdBQy9CLEdBQUluaEIsRUFBRXF0QyxjQUFlLENBQ2pCLEdBQUl0bUIsTUFBTTVGLEdBQUksTUFBTyxDQUNqQjhqQixZQUFhLE9BRWpCLEdBQUk5akIsSUFBTSxJQUFPLE1BQU8sQ0FDcEI4akIsWUFBYSxZQUVqQixHQUFJOWpCLEtBQU0sSUFBUSxNQUFPLENBQ3JCOGpCLFlBQWEsWUFFckIsQ0FDQSxNQUFPLENBQ0hBLFlBQWFuRyxHQUF5QjNkLEdBQUssS0FBT0EsRUFFMUQsQ0E2RTBFbXNCLENBQW1CdHRDLEVBQUV1dEMsV0FBWXB6QixFQUN2RyxDQU5nTyxDQU05Tm5hLEVBQUdtaEIsRUFDVCxDQUtJLFNBQVNxc0IsR0FBa0R4dEMsRUFBR21oQixFQUFHM0csR0FJakUsT0FBT3hhLGFBQWE0c0MsR0FBeUNDLEdBQTRDN3NDLEVBQUdtaEIsR0FBS25oQixhQUFhOHNDLEdBQTBDQyxHQUE2Qy9zQyxFQUFHbWhCLEdBQUszRyxDQUNqTyxDQTZCQSxNQUFNbXlCLFdBQTJDRixJQUVPLE1BQU1HLFdBQStDSCxHQUN6RyxXQUFBaHBDLENBQVl6RCxHQUNSMEQsUUFBUzVELEtBQUsydEMsU0FBV3p0QyxDQUM3QixFQUdKLFNBQVM2c0MsR0FBNEM3c0MsRUFBR21oQixHQUNwRCxNQUFNM0csRUFBSWt6QixHQUFrQ3ZzQixHQUM1QyxJQUFLLE1BQU1BLEtBQUtuaEIsRUFBRXl0QyxTQUFVanpCLEVBQUVqTSxNQUFNdk8sR0FBS3lrQyxHQUFzQnprQyxFQUFHbWhCLE1BQVEzRyxFQUFFbFksS0FBSzZlLEdBQ2pGLE1BQU8sQ0FDSCtqQixXQUFZLENBQ1JyNkIsT0FBUTJQLEdBR3BCLENBRXlELE1BQU1zeUIsV0FBZ0RMLEdBQzNHLFdBQUFocEMsQ0FBWXpELEdBQ1IwRCxRQUFTNUQsS0FBSzJ0QyxTQUFXenRDLENBQzdCLEVBR0osU0FBUytzQyxHQUE2Qy9zQyxFQUFHbWhCLEdBQ3JELElBQUkzRyxFQUFJa3pCLEdBQWtDdnNCLEdBQzFDLElBQUssTUFBTUEsS0FBS25oQixFQUFFeXRDLFNBQVVqekIsRUFBSUEsRUFBRXpQLFFBQVEvSyxJQUFNeWtDLEdBQXNCemtDLEVBQUdtaEIsS0FDekUsTUFBTyxDQUNIK2pCLFdBQVksQ0FDUnI2QixPQUFRMlAsR0FHcEIsQ0FPSSxNQUFNd3lCLFdBQXFEUCxHQUMzRCxXQUFBaHBDLENBQVl6RCxFQUFHbWhCLEdBQ1h6ZCxRQUFTNUQsS0FBS3l0QyxXQUFhdnRDLEVBQUdGLEtBQUtxdEMsR0FBS2hzQixDQUM1QyxFQUdKLFNBQVMrckIsR0FBU2x0QyxHQUNkLE9BQU8raUMsR0FBMEIvaUMsRUFBRWdsQyxjQUFnQmhsQyxFQUFFaWxDLFlBQ3pELENBRUEsU0FBU3lJLEdBQWtDMXRDLEdBQ3ZDLE9BQU93QixHQUFReEIsSUFBTUEsRUFBRWtsQyxXQUFXcjZCLE9BQVM3SyxFQUFFa2xDLFdBQVdyNkIsT0FBTzJNLFFBQVUsRUFDN0UsQ0E0REksTUFBTW0yQixHQUNOLFdBQUFscUMsQ0FBWXpELEVBQUdtaEIsR0FDWHJoQixLQUFLOHRDLFdBQWE1dEMsRUFBR0YsS0FBSyt0QyxPQUFTMXNCLENBQ3ZDLENBQzRDLFdBQU8yc0IsR0FDL0MsT0FBTyxJQUFJSCxFQUNmLENBQzBELGFBQU9FLENBQU83dEMsR0FDcEUsT0FBTyxJQUFJMnRDLFFBQWEsRUFBUTN0QyxFQUNwQyxDQUM4RSxpQkFBTzR0QyxDQUFXNXRDLEdBQzVGLE9BQU8sSUFBSTJ0QyxHQUFhM3RDLEVBQzVCLENBQ3NELFVBQUkrdEMsR0FDdEQsWUFBTyxJQUFXanVDLEtBQUs4dEMsaUJBQWMsSUFBVzl0QyxLQUFLK3RDLE1BQ3pELENBQ0EsT0FBQXZZLENBQVF0MUIsR0FDSixPQUFPRixLQUFLK3RDLFNBQVc3dEMsRUFBRTZ0QyxTQUFXL3RDLEtBQUs4dEMsYUFBZTV0QyxFQUFFNHRDLFlBQWM5dEMsS0FBSzh0QyxXQUFXdFksUUFBUXQxQixFQUFFNHRDLGFBQWU1dEMsRUFBRTR0QyxXQUN2SCxFQUdzRSxTQUFTSSxHQUF5Q2h1QyxFQUFHbWhCLEdBQzNILFlBQU8sSUFBV25oQixFQUFFNHRDLFdBQWF6c0IsRUFBRWttQixtQkFBcUJsbUIsRUFBRTVPLFFBQVEraUIsUUFBUXQxQixFQUFFNHRDLGlCQUFjLElBQVc1dEMsRUFBRTZ0QyxRQUFVN3RDLEVBQUU2dEMsU0FBVzFzQixFQUFFa21CLGlCQUNwSSxDQTZDSSxNQUFNNEcsSUFNTixTQUFTQyxHQUFtQ2x1QyxFQUFHbWhCLEdBQy9DLElBQUtuaEIsRUFBRWluQyxtQkFBcUI5bEIsR0FBSyxJQUFNQSxFQUFFMmdCLE9BQU92aEMsT0FBUSxPQUFPLEtBRTNELEdBQUksT0FBUzRnQixFQUFHLE9BQU9uaEIsRUFBRXNuQyxlQUFpQixJQUFJNkcsR0FBeUJudUMsRUFBRWlILElBQUswbUMsR0FBYUcsUUFBVSxJQUFJTSxHQUFzQnB1QyxFQUFFaUgsSUFBS2pILEVBQUU0RyxLQUFNK21DLEdBQWFHLFFBQy9KLENBQ0ksTUFBTXR6QixFQUFJeGEsRUFBRTRHLEtBQU11VCxFQUFJMHJCLEdBQVlySixRQUNsQyxJQUFJbDhCLEVBQUksSUFBSThnQyxHQUFVdEYsR0FBWWYsWUFDbEMsSUFBSyxJQUFJLzZCLEtBQUttaEIsRUFBRTJnQixPQUFRLElBQUt4aEMsRUFBRW1KLElBQUl6SixHQUFJLENBQ25DLElBQUltaEIsRUFBSTNHLEVBQUVzckIsTUFBTTlsQyxHQVVKLE9BQVNtaEIsR0FBS25oQixFQUFFTyxPQUFTLElBQU1QLEVBQUlBLEVBQUVvN0IsVUFBV2phLEVBQUkzRyxFQUFFc3JCLE1BQU05bEMsSUFBSyxPQUFTbWhCLEVBQUloSCxFQUFFelAsT0FBTzFLLEdBQUttYSxFQUFFeFEsSUFBSTNKLEVBQUdtaEIsR0FDakg3Z0IsRUFBSUEsRUFBRW9MLElBQUkxTCxFQUNkLENBQ0EsT0FBTyxJQUFJcXVDLEdBQXdCcnVDLEVBQUVpSCxJQUFLa1QsRUFBRyxJQUFJMG5CLEdBQVV2aEMsRUFBRW83QixXQUFZaVMsR0FBYUcsT0FDMUYsQ0FDSixDQWFJLFNBQVNRLEdBQXdDdHVDLEVBQUdtaEIsRUFBRzNHLEdBQ3ZEeGEsYUFBYW91QyxHQUF3QixTQUFvRHB1QyxFQUFHbWhCLEVBQUczRyxHQUkzRixNQUFNTCxFQUFJbmEsRUFBRTZGLE1BQU1xZ0MsUUFBUzVsQyxFQUFJaXVDLEdBQWlDdnVDLEVBQUV3dUMsZ0JBQWlCcnRCLEVBQUczRyxFQUFFaTBCLGtCQUN4RnQwQixFQUFFNnJCLE9BQU8xbEMsR0FBSTZnQixFQUFFd2xCLHVCQUF1Qm5zQixFQUFFakksUUFBUzRILEdBQUcyc0IsMEJBQ3hELENBTnFDLENBTW5DOW1DLEVBQUdtaEIsRUFBRzNHLEdBQUt4YSxhQUFhcXVDLEdBQTBCLFNBQXNEcnVDLEVBQUdtaEIsRUFBRzNHLEdBQzVHLElBQUt3ekIsR0FBeUNodUMsRUFBRTB1QyxhQUFjdnRCLEdBSzlELFlBQVlBLEVBQUUwbEIseUJBQXlCcnNCLEVBQUVqSSxTQUN6QyxNQUFNNEgsRUFBSW8wQixHQUFpQ3Z1QyxFQUFFd3VDLGdCQUFpQnJ0QixFQUFHM0csRUFBRWkwQixrQkFBbUJudUMsRUFBSTZnQixFQUFFdmEsS0FDNUZ0RyxFQUFFMGxDLE9BQU8ySSxHQUFtQjN1QyxJQUFLTSxFQUFFMGxDLE9BQU83ckIsR0FBSWdILEVBQUV3bEIsdUJBQXVCbnNCLEVBQUVqSSxRQUFTalMsR0FBR3dtQywwQkFDekYsQ0FUb0QsQ0FTbEQ5bUMsRUFBR21oQixFQUFHM0csR0FBSyxTQUF1RHhhLEVBQUdtaEIsRUFBRzNHLEdBSXRFMkcsRUFBRXlsQixvQkFBb0Jwc0IsRUFBRWpJLFNBQVN1MEIsMEJBQ3JDLENBTGEsQ0FLWCxFQUFHM2xCLEVBQUczRyxFQUNaLENBZUksU0FBU28wQixHQUFtQzV1QyxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUNyRCxPQUFPbmEsYUFBYW91QyxHQUF3QixTQUErQ3B1QyxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUNoRyxJQUFLNnpCLEdBQXlDaHVDLEVBQUUwdUMsYUFBY3Z0QixHQUc5RCxPQUFPM0csRUFDUCxNQUFNbGEsRUFBSU4sRUFBRTZGLE1BQU1xZ0MsUUFBU3hyQixFQUFJbTBCLEdBQWdDN3VDLEVBQUV3dUMsZ0JBQWlCcjBCLEVBQUdnSCxHQUNyRixPQUFPN2dCLEVBQUUwbEMsT0FBT3RyQixHQUFJeUcsRUFBRXdsQix1QkFBdUJ4bEIsRUFBRTVPLFFBQVNqUyxHQUFHeW1DLHVCQUMzRCxJQUVBLENBVHdDLENBc0IzQy9tQyxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUFLbmEsYUFBYXF1QyxHQUEwQixTQUFpRHJ1QyxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUM1RyxJQUFLNnpCLEdBQXlDaHVDLEVBQUUwdUMsYUFBY3Z0QixHQUFJLE9BQU8zRyxFQUN6RSxNQUFNbGEsRUFBSXV1QyxHQUFnQzd1QyxFQUFFd3VDLGdCQUFpQnIwQixFQUFHZ0gsR0FBSXpHLEVBQUl5RyxFQUFFdmEsS0FDMUUsT0FBSThULEVBQUVzckIsT0FBTzJJLEdBQW1CM3VDLElBQUswYSxFQUFFc3JCLE9BQU8xbEMsR0FBSTZnQixFQUFFd2xCLHVCQUF1QnhsQixFQUFFNU8sUUFBU21JLEdBQUdxc0IsdUJBQ3pGLE9BQVN2c0IsRUFBVSxLQUNaQSxFQUFFbW5CLFVBQVUzaEMsRUFBRTh1QyxVQUFVaE4sUUFBUUgsVUFBVTNoQyxFQUFFd3VDLGdCQUFnQnhqQyxLQUFLaEwsR0FBS0EsRUFBRThsQyxRQUNuRixDQU5zRCxDQVNyRDlsQyxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUFLLFNBQWtEbmEsRUFBR21oQixFQUFHM0csR0FDbkUsT0FBSXd6QixHQUF5Q2h1QyxFQUFFMHVDLGFBQWN2dEIsSUFBV0EsRUFBRXlsQixvQkFBb0J6bEIsRUFBRTVPLFNBQVN3MEIsdUJBQ3pHLE1BQ092c0IsQ0FDWCxDQUplLENBV2R4YSxFQUFHbWhCLEVBQUczRyxFQUNYLENBMEJBLFNBQVN1MEIsR0FBeUIvdUMsRUFBR21oQixHQUNqQyxPQUFPbmhCLEVBQUVpSSxPQUFTa1osRUFBRWxaLFFBQVdqSSxFQUFFaUgsSUFBSXF1QixRQUFRblUsRUFBRWxhLFFBQVdqSCxFQUFFMHVDLGFBQWFwWixRQUFRblUsRUFBRXV0QixpQkFBb0IsU0FBMkMxdUMsRUFBR21oQixHQUNqSixZQUFPLElBQVduaEIsUUFBSyxJQUFXbWhCLE1BQVFuaEIsSUFBTW1oQixJQUFNcVksR0FBc0J4NUIsRUFBR21oQixHQUFHLENBQUVuaEIsRUFBR21oQixJQS9QL0YsU0FBd0NuaEIsRUFBR21oQixHQUN2QyxPQUFPbmhCLEVBQUU4bEMsTUFBTXhRLFFBQVFuVSxFQUFFMmtCLFFBQVUsU0FBNEM5bEMsRUFBR21oQixHQUM5RSxPQUFPbmhCLGFBQWE0c0MsSUFBMEN6ckIsYUFBYXlyQixJQUEwQzVzQyxhQUFhOHNDLElBQTJDM3JCLGFBQWEyckIsR0FBMEN0VCxHQUFzQng1QixFQUFFeXRDLFNBQVV0c0IsRUFBRXNzQixTQUFVaEosSUFBeUJ6a0MsYUFBYWd0QyxJQUFnRDdyQixhQUFhNnJCLEdBQStDdkksR0FBc0J6a0MsRUFBRW10QyxHQUFJaHNCLEVBQUVnc0IsSUFBTW50QyxhQUFhMnNDLElBQXNDeHJCLGFBQWF3ckIsRUFDNWdCLENBRm1DLENBRWpDM3NDLEVBQUVndkMsVUFBVzd0QixFQUFFNnRCLFVBQ3JCLENBMlBxR0MsQ0FBK0JqdkMsRUFBR21oQixJQUNuSSxDQUZ1RyxDQUVyR25oQixFQUFFd3VDLGdCQUFpQnJ0QixFQUFFcXRCLG1CQUFxQixJQUE2Qnh1QyxFQUFFaUksS0FBT2pJLEVBQUU2RixNQUFNeXZCLFFBQVFuVSxFQUFFdGIsT0FBUyxJQUErQjdGLEVBQUVpSSxNQUFRakksRUFBRTRHLEtBQUswdUIsUUFBUW5VLEVBQUV2YSxPQUFTNUcsRUFBRTh1QyxVQUFVeFosUUFBUW5VLEVBQUUydEIsV0FDMU0sQ0FLSSxNQUFNVixXQUE4QkgsR0FDcEMsV0FBQXhxQyxDQUFZekQsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBSSxJQUNyQnpXLFFBQVM1RCxLQUFLbUgsSUFBTWpILEVBQUdGLEtBQUsrRixNQUFRc2IsRUFBR3JoQixLQUFLNHVDLGFBQWVsMEIsRUFBRzFhLEtBQUswdUMsZ0JBQWtCcjBCLEVBQ3JGcmEsS0FBS21JLEtBQU8sQ0FDaEIsQ0FDQSxZQUFBaW5DLEdBQ0ksT0FBTyxJQUNYLEVBR0osTUFBTWIsV0FBZ0NKLEdBQ2xDLFdBQUF4cUMsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixFQUFJLElBQ3hCb0QsUUFBUzVELEtBQUttSCxJQUFNakgsRUFBR0YsS0FBSzhHLEtBQU91YSxFQUFHcmhCLEtBQUtndkMsVUFBWXQwQixFQUFHMWEsS0FBSzR1QyxhQUFldjBCLEVBQzlFcmEsS0FBSzB1QyxnQkFBa0JsdUMsRUFBR1IsS0FBS21JLEtBQU8sQ0FDMUMsQ0FDQSxZQUFBaW5DLEdBQ0ksT0FBT3B2QyxLQUFLZ3ZDLFNBQ2hCLEVBR0osU0FBU0gsR0FBbUIzdUMsR0FDeEIsTUFBTW1oQixFQUFJLElBQUlsWSxJQUNkLE9BQU9qSixFQUFFOHVDLFVBQVVoTixPQUFPelosU0FBUzdOLElBQy9CLElBQUtBLEVBQUUrZ0IsVUFBVyxDQUNkLE1BQU1waEIsRUFBSW5hLEVBQUU0RyxLQUFLay9CLE1BQU10ckIsR0FDdkIyRyxFQUFFeFgsSUFBSTZRLEVBQUdMLEVBQ2IsQ0FDSCxJQUFJZ0gsQ0FDVCxDQVlJLFNBQVNvdEIsR0FBaUN2dUMsRUFBR21oQixFQUFHM0csR0FDaEQsTUFBTUwsRUFBSSxJQUFJbFIsSUFDZGd0QixHQUFxQmoyQixFQUFFTyxTQUFXaWEsRUFBRWphLFFBQ3BDLElBQUssSUFBSUQsRUFBSSxFQUFHQSxFQUFJa2EsRUFBRWphLE9BQVFELElBQUssQ0FDL0IsTUFBTW9hLEVBQUkxYSxFQUFFTSxHQUFJcWEsRUFBSUQsRUFBRXMwQixVQUFXaG9DLEVBQUltYSxFQUFFdmEsS0FBS2svQixNQUFNcHJCLEVBQUVvckIsT0FDcEQzckIsRUFBRXhRLElBQUkrUSxFQUFFb3JCLE1BQU8wSCxHQUFrRDd5QixFQUFHM1QsRUFBR3dULEVBQUVsYSxJQUM3RSxDQUNBLE9BQU82WixDQUNYLENBWUksU0FBUzAwQixHQUFnQzd1QyxFQUFHbWhCLEVBQUczRyxHQUMvQyxNQUFNTCxFQUFJLElBQUlsUixJQUNkLElBQUssTUFBTTNJLEtBQUtOLEVBQUcsQ0FDZixNQUFNQSxFQUFJTSxFQUFFMHVDLFVBQVd0MEIsRUFBSUYsRUFBRTVULEtBQUtrL0IsTUFBTXhsQyxFQUFFd2xDLE9BQzFDM3JCLEVBQUV4USxJQUFJckosRUFBRXdsQyxNQUFPNEcsR0FBNkMxc0MsRUFBRzBhLEVBQUd5RyxHQUN0RSxDQUNBLE9BQU9oSCxDQUNYLENBRThELE1BQU1nMEIsV0FBaUNGLEdBQ2pHLFdBQUF4cUMsQ0FBWXpELEVBQUdtaEIsR0FDWHpkLFFBQVM1RCxLQUFLbUgsSUFBTWpILEVBQUdGLEtBQUs0dUMsYUFBZXZ0QixFQUFHcmhCLEtBQUttSSxLQUFPLEVBQzFEbkksS0FBSzB1QyxnQkFBa0IsRUFDM0IsQ0FDQSxZQUFBVSxHQUNJLE9BQU8sSUFDWCxFQStCQSxNQUFNQyxHQVlOLFdBQUExckMsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ2pCcmEsS0FBS3N2QyxRQUFVcHZDLEVBQUdGLEtBQUt1dkMsZUFBaUJsdUIsRUFBR3JoQixLQUFLd3ZDLGNBQWdCOTBCLEVBQUcxYSxLQUFLeXZDLFVBQVlwMUIsQ0FDeEYsQ0FRTyxxQkFBQXExQixDQUFzQnh2QyxFQUFHbWhCLEdBQzVCLE1BQU0zRyxFQUFJMkcsRUFBRXN1QixnQkFDWixJQUFLLElBQUl0dUIsRUFBSSxFQUFHQSxFQUFJcmhCLEtBQUt5dkMsVUFBVWh2QyxPQUFRNGdCLElBQUssQ0FDNUMsTUFBTWhILEVBQUlyYSxLQUFLeXZDLFVBQVVwdUIsR0FDckJoSCxFQUFFbFQsSUFBSXF1QixRQUFRdDFCLEVBQUVpSCxNQUNoQnFuQyxHQUF3Q24wQixFQUFHbmEsRUFBR3dhLEVBQUUyRyxHQUV4RCxDQUNKLENBUU8sZ0JBQUF1dUIsQ0FBaUIxdkMsRUFBR21oQixHQUd2QixJQUFLLE1BQU0zRyxLQUFLMWEsS0FBS3d2QyxjQUFlOTBCLEVBQUV2VCxJQUFJcXVCLFFBQVF0MUIsRUFBRWlILE9BQVNrYSxFQUFJeXRCLEdBQW1DcDBCLEVBQUd4YSxFQUFHbWhCLEVBQUdyaEIsS0FBS3V2QyxpQkFFMUcsSUFBSyxNQUFNNzBCLEtBQUsxYSxLQUFLeXZDLFVBQVcvMEIsRUFBRXZULElBQUlxdUIsUUFBUXQxQixFQUFFaUgsT0FBU2thLEVBQUl5dEIsR0FBbUNwMEIsRUFBR3hhLEVBQUdtaEIsRUFBR3JoQixLQUFLdXZDLGlCQUN0SCxPQUFPbHVCLENBQ1gsQ0FLTyx1QkFBQXd1QixDQUF3QjN2QyxFQUFHbWhCLEdBSTlCLE1BQU0zRyxFQUFJK3hCLEtBQ1YsT0FBT3pzQyxLQUFLeXZDLFVBQVVsbkIsU0FBU2xPLElBQzNCLE1BQU03WixFQUFJTixFQUFFcUosSUFBSThRLEVBQUVsVCxLQUFNeVQsRUFBSXBhLEVBQUU4ckMsa0JBR2xCLElBQUl6eEIsRUFBSTdhLEtBQUs0dkMsaUJBQWlCaDFCLEVBQUdwYSxFQUFFc3ZDLGVBSW5DajFCLEVBQUl3RyxFQUFFMVgsSUFBSTBRLEVBQUVsVCxLQUFPLEtBQU8wVCxFQUN0QyxNQUFNM1QsRUFBSWtuQyxHQUFtQ3h6QixFQUFHQyxHQUNoRCxPQUFTM1QsR0FBS3dULEVBQUU3USxJQUFJd1EsRUFBRWxULElBQUtELEdBQUkwVCxFQUFFMHNCLG1CQUFxQjFzQixFQUFFa3NCLG9CQUFvQnZNLEdBQWdCNUssTUFDL0YsSUFBSWpWLENBQ1QsQ0FDQSxJQUFBalQsR0FDSSxPQUFPekgsS0FBS3l2QyxVQUFVakcsUUFBTyxDQUFFdHBDLEVBQUdtaEIsSUFBTW5oQixFQUFFMEwsSUFBSXlWLEVBQUVsYSxNQUFPdWxDLEtBQzNELENBQ0EsT0FBQWxYLENBQVF0MUIsR0FDSixPQUFPRixLQUFLc3ZDLFVBQVlwdkMsRUFBRW92QyxTQUFXNVYsR0FBc0IxNUIsS0FBS3l2QyxVQUFXdnZDLEVBQUV1dkMsV0FBVyxDQUFFdnZDLEVBQUdtaEIsSUFBTTR0QixHQUF5Qi91QyxFQUFHbWhCLE1BQVFxWSxHQUFzQjE1QixLQUFLd3ZDLGNBQWV0dkMsRUFBRXN2QyxlQUFlLENBQUV0dkMsRUFBR21oQixJQUFNNHRCLEdBQXlCL3VDLEVBQUdtaEIsSUFDN08sRUFnREEsTUFBTTB1QixHQUNOLFdBQUFwc0MsQ0FBWXpELEVBQUdtaEIsR0FDWHJoQixLQUFLcTlCLGVBQWlCbjlCLEVBQUdGLEtBQUtnd0MsU0FBVzN1QixDQUM3QyxDQUNBLE1BQUE0dUIsR0FDSSxPQUFPandDLEtBQUtnd0MsU0FBUzdvQyxHQUN6QixDQUNBLE9BQUFxdUIsQ0FBUXQxQixHQUNKLE9BQU8sT0FBU0EsR0FBS0YsS0FBS2d3QyxXQUFhOXZDLEVBQUU4dkMsUUFDN0MsQ0FDQSxRQUFBOTFCLEdBQ0ksTUFBTyxtQ0FBbUNsYSxLQUFLcTlCLG9DQUFvQ3I5QixLQUFLZ3dDLFNBQVM5MUIsbUJBQ3JHLEVBMENBLE1BQU1nMkIsR0FDTixXQUFBdnNDLENBQVl6RCxFQUFHbWhCLEdBQ1hyaEIsS0FBS213QyxNQUFRandDLEVBQUdGLEtBQUtvd0MsZUFBaUIvdUIsQ0FDMUMsRUE0QkEsSUFBSWd2QixHQUFJL0csR0EyRFosU0FBU2dILEdBQTZCcHdDLEdBQ2xDLFFBQUksSUFBV0EsRUFHZixPQUFPODFCLEdBQW1CLDJCQUE0QixHQUFFTyxRQUN4RCxPQUFRcjJCLEdBQ04sS0FBS213QyxHQUFHaGEsR0FDTixPQUFPLEdBQUVBLEdBRVgsS0FBS2dhLEdBQUcvWixVQUNOLE9BQU8sR0FBRUEsVUFFWCxLQUFLK1osR0FBRzlaLFFBQ04sT0FBTyxHQUFFQSxRQUVYLEtBQUs4WixHQUFHNVosa0JBQ04sT0FBTyxHQUFFQSxrQkFFWCxLQUFLNFosR0FBR3haLG1CQUNOLE9BQU8sR0FBRUEsbUJBRVgsS0FBS3daLEdBQUdsbEMsU0FDTixPQUFPLEdBQUVBLFNBRVgsS0FBS2tsQyxHQUFHblosWUFDTixPQUFPLEdBQUVBLFlBRVgsS0FBS21aLEdBQUc1YSxnQkFDTixPQUFPLEdBQUVBLGdCQUVYLEtBQUs0YSxHQUFHN1osaUJBQ04sT0FBTyxHQUFFQSxpQkFFWCxLQUFLNlosR0FBRzNaLFVBQ04sT0FBTyxHQUFFQSxVQUVYLEtBQUsyWixHQUFHMVosZUFDTixPQUFPLEdBQUVBLGVBRVgsS0FBSzBaLEdBQUd6WixrQkFDTixPQUFPLEdBQUVBLGtCQUVYLEtBQUt5WixHQUFHdlosb0JBQ04sT0FBTyxHQUFFQSxvQkFFWCxLQUFLdVosR0FBR3RaLFFBQ04sT0FBTyxHQUFFQSxRQUVYLEtBQUtzWixHQUFHclosYUFDTixPQUFPLEdBQUVBLGFBRVgsS0FBS3FaLEdBQUdwWixjQUNOLE9BQU8sR0FBRUEsY0FFWCxLQUFLb1osR0FBR2xaLFVBQ04sT0FBTyxHQUFFQSxVQUVYLFFBQ0UsT0FBT2pCLEtBRWYsRUFTS29ULEdBQUsrRyxLQUFPQSxHQUFLLENBQUMsSUFBSS9HLEdBQUdqVCxHQUFLLEdBQUssS0FBTWlULEdBQUdBLEdBQUdoVCxVQUFZLEdBQUssWUFDckVnVCxHQUFHQSxHQUFHL1MsUUFBVSxHQUFLLFVBQVcrUyxHQUFHQSxHQUFHOVMsaUJBQW1CLEdBQUssbUJBQzlEOFMsR0FBR0EsR0FBRzdTLGtCQUFvQixHQUFLLG9CQUFxQjZTLEdBQUdBLEdBQUc1UyxVQUFZLEdBQUssWUFDM0U0UyxHQUFHQSxHQUFHM1MsZUFBaUIsR0FBSyxpQkFBa0IyUyxHQUFHQSxHQUFHMVMsa0JBQW9CLEdBQUssb0JBQzdFMFMsR0FBR0EsR0FBRzdULGdCQUFrQixJQUFNLGtCQUFtQjZULEdBQUdBLEdBQUd6UyxtQkFBcUIsR0FBSyxxQkFDakZ5UyxHQUFHQSxHQUFHeFMsb0JBQXNCLEdBQUssc0JBQXVCd1MsR0FBR0EsR0FBR3ZTLFFBQVUsSUFBTSxVQUM5RXVTLEdBQUdBLEdBQUd0UyxhQUFlLElBQU0sZUFBZ0JzUyxHQUFHQSxHQUFHclMsY0FBZ0IsSUFBTSxnQkFDdkVxUyxHQUFHQSxHQUFHbitCLFNBQVcsSUFBTSxXQUFZbStCLEdBQUdBLEdBQUdwUyxZQUFjLElBQU0sY0FBZW9TLEdBQUdBLEdBQUduUyxVQUFZLElBQU0sWUFrQ3BHLE1BQU1vWixHQUNGLFdBQUE1c0MsR0FDSTNELEtBQUt3d0MsbUNBQXFDLElBQUlybkMsR0FDbEQsQ0FJTyxtQkFBV2EsR0FDZCxPQUFPeS9CLEVBQ1gsQ0FJTywwQkFBT2dILEdBQ1YsT0FBTyxPQUFTaEgsS0FBT0EsR0FBSyxJQUFJOEcsSUFBeUI5RyxFQUM3RCxDQWNPLHlCQUFBaUgsQ0FBMEJ4d0MsR0FDN0IsTUFBTW1oQixFQUFJa2hCLFNBQ1YsT0FBT3ZpQyxLQUFLd3dDLG1DQUFtQzNtQyxJQUFJd1gsRUFBR25oQixHQUFJLElBQU1GLEtBQUt3d0MsbUNBQW1DNWxDLE9BQU95VyxFQUNuSCxDQUlPLCtCQUFBc3ZCLENBQWdDendDLEdBQ25DRixLQUFLd3dDLG1DQUFtQ2pvQixTQUFTbEgsR0FBS0EsRUFBRW5oQixJQUM1RCxFQUdvRCxJQUFJdXBDLEdBQUssS0EyQ2pFLE1BQU1ZLEdBQUssSUFBSWxWLEdBQVEsQ0FBRSxXQUFZLFlBQWMsR0FHbkQsU0FBU3liLEdBQTBCMXdDLEdBQy9CLE1BQU1taEIsR0ExQkMsSUFBSXd2QixhQTBCMEJDLE9BQU81d0MsR0FBSXdhLEVBQUksSUFBSXdhLEdBQ3hELE9BQU94YSxFQUFFcVosT0FBTzFTLEdBQUksSUFBSWtNLFdBQVc3UyxFQUFFb1osU0FDekMsQ0FJQSxTQUFTaWQsR0FBd0I3d0MsR0FDN0IsTUFBTW1oQixFQUFJLElBQUkydkIsU0FBUzl3QyxFQUFFK3dDLFFBQVN2MkIsRUFBSTJHLEVBQUU2dkIsVUFBVSxHQUF1QixHQUFLNzJCLEVBQUlnSCxFQUFFNnZCLFVBQVUsR0FBdUIsR0FBSzF3QyxFQUFJNmdCLEVBQUU2dkIsVUFBVSxHQUF1QixHQUFLdDJCLEVBQUl5RyxFQUFFNnZCLFVBQVUsSUFBd0IsR0FDOU0sTUFBTyxDQUFFLElBQUkvYixHQUFRLENBQUV6YSxFQUFHTCxHQUFLLEdBQUksSUFBSThhLEdBQVEsQ0FBRTMwQixFQUFHb2EsR0FBSyxHQUM3RCxDQUVBLE1BQU11MkIsR0FDRixXQUFBeHRDLENBQVl6RCxFQUFHbWhCLEVBQUczRyxHQUNkLEdBQUkxYSxLQUFLb3hDLE9BQVNseEMsRUFBR0YsS0FBS3F4QyxRQUFVaHdCLEVBQUdyaEIsS0FBS3N4QyxVQUFZNTJCLEVBQUcyRyxFQUFJLEdBQUtBLEdBQUssRUFBRyxNQUFNLElBQUlrd0IsR0FBMkIsb0JBQW9CbHdCLEtBQ3JJLEdBQUkzRyxFQUFJLEVBQUcsTUFBTSxJQUFJNjJCLEdBQTJCLHVCQUF1QjcyQixLQUN2RSxHQUFJeGEsRUFBRU8sT0FBUyxHQUFLLElBQU1ULEtBQUtzeEMsVUFFL0IsTUFBTSxJQUFJQyxHQUEyQix1QkFBdUI3MkIsS0FDNUQsR0FBSSxJQUFNeGEsRUFBRU8sUUFBVSxJQUFNNGdCLEVBRTVCLE1BQU0sSUFBSWt3QixHQUEyQiw0Q0FBNENsd0IsS0FDakZyaEIsS0FBS3d4QyxHQUFLLEVBQUl0eEMsRUFBRU8sT0FBUzRnQixFQUV6QnJoQixLQUFLeXhDLEdBQUt0YyxHQUFRZCxXQUFXcjBCLEtBQUt3eEMsR0FDdEMsQ0FHQSxFQUFBRSxDQUFHeHhDLEVBQUdtaEIsRUFBRzNHLEdBRUwsSUFBSUwsRUFBSW5hLEVBQUUwTCxJQUFJeVYsRUFBRTJTLFNBQVNtQixHQUFRZCxXQUFXM1osS0FFcEMsT0FBTyxJQUFNTCxFQUFFNlosUUFBUW1XLE1BQVFod0IsRUFBSSxJQUFJOGEsR0FBUSxDQUFFOWEsRUFBRStaLFFBQVEsR0FBSS9aLEVBQUUrWixRQUFRLElBQU0sSUFDdkYvWixFQUFFNFosT0FBT2owQixLQUFLeXhDLElBQUl0ZCxVQUN0QixDQUVBLEVBQUF3ZCxDQUFHenhDLEdBQ0MsT0FBTyxJQUFNRixLQUFLb3hDLE9BQU8zM0IsS0FBS3VRLE1BQU05cEIsRUFBSSxJQUFNLEdBQUtBLEVBQUksRUFDM0QsQ0FDQSxZQUFBMHhDLENBQWExeEMsR0FFVCxHQUFJLElBQU1GLEtBQUt3eEMsR0FBSSxPQUFPLEVBQzFCLE1BQU1ud0IsRUFBSXV2QixHQUEwQjF3QyxJQUFLd2EsRUFBR0wsR0FBSzAyQixHQUF3QjF2QixHQUN6RSxJQUFLLElBQUluaEIsRUFBSSxFQUFHQSxFQUFJRixLQUFLc3hDLFVBQVdweEMsSUFBSyxDQUNyQyxNQUFNbWhCLEVBQUlyaEIsS0FBSzB4QyxHQUFHaDNCLEVBQUdMLEVBQUduYSxHQUN4QixJQUFLRixLQUFLMnhDLEdBQUd0d0IsR0FBSSxPQUFPLENBQzVCLENBQ0EsT0FBTyxDQUNYLENBQ3lELGFBQU8zYSxDQUFPeEcsRUFBR21oQixFQUFHM0csR0FDekUsTUFBTUwsRUFBSW5hLEVBQUksR0FBSyxFQUFJLEVBQUksRUFBSUEsRUFBSSxFQUFHTSxFQUFJLElBQUkrc0IsV0FBVzlULEtBQUtpWixLQUFLeHlCLEVBQUksSUFBSzBhLEVBQUksSUFBSXUyQixHQUFZM3dDLEVBQUc2WixFQUFHZ0gsR0FDdEcsT0FBTzNHLEVBQUU2TixTQUFTcm9CLEdBQUswYSxFQUFFMGtCLE9BQU9wL0IsS0FBTTBhLENBQzFDLENBQ0EsTUFBQTBrQixDQUFPcC9CLEdBQ0gsR0FBSSxJQUFNRixLQUFLd3hDLEdBQUksT0FDbkIsTUFBTW53QixFQUFJdXZCLEdBQTBCMXdDLElBQUt3YSxFQUFHTCxHQUFLMDJCLEdBQXdCMXZCLEdBQ3pFLElBQUssSUFBSW5oQixFQUFJLEVBQUdBLEVBQUlGLEtBQUtzeEMsVUFBV3B4QyxJQUFLLENBQ3JDLE1BQU1taEIsRUFBSXJoQixLQUFLMHhDLEdBQUdoM0IsRUFBR0wsRUFBR25hLEdBQ3hCRixLQUFLNnhDLEdBQUd4d0IsRUFDWixDQUNKLENBQ0EsRUFBQXd3QixDQUFHM3hDLEdBQ0MsTUFBTW1oQixFQUFJNUgsS0FBS3VRLE1BQU05cEIsRUFBSSxHQUFJd2EsRUFBSXhhLEVBQUksRUFDckNGLEtBQUtveEMsT0FBTy92QixJQUFNLEdBQUszRyxDQUMzQixFQUdKLE1BQU02MkIsV0FBbUM1dkMsTUFDckMsV0FBQWdDLEdBQ0lDLFNBQVNDLFdBQVk3RCxLQUFLOEQsS0FBTyxrQkFDckMsRUF1QkEsTUFBTWd1QyxHQUNOLFdBQUFudUMsQ0FJQXpELEVBSUFtaEIsRUFNQTNHLEVBS0FMLEVBSUE3WixHQUNJUixLQUFLK3hDLGdCQUFrQjd4QyxFQUFHRixLQUFLZ3lDLGNBQWdCM3dCLEVBQUdyaEIsS0FBS2l5QyxpQkFBbUJ2M0IsRUFBRzFhLEtBQUtreUMsZ0JBQWtCNzNCLEVBQ3BHcmEsS0FBS215Qyx1QkFBeUIzeEMsQ0FDbEMsQ0FRQSxtREFBTzR4QyxDQUE2Q2x5QyxFQUFHbWhCLEVBQUczRyxHQUN0RCxNQUFNTCxFQUFJLElBQUlsUixJQUNkLE9BQU9rUixFQUFFeFEsSUFBSTNKLEVBQUdteUMsR0FBYUMsOENBQThDcHlDLEVBQUdtaEIsRUFBRzNHLElBQ2pGLElBQUlvM0IsR0FBWXZYLEdBQWdCNUssTUFBT3RWLEVBQUcsSUFBSTZrQixHQUFVekYsSUFBZ0N5UyxLQUFnQ1EsS0FDNUgsRUFVQSxNQUFNMkYsR0FDTixXQUFBMXVDLENBT0F6RCxFQU1BbWhCLEVBS0EzRyxFQUtBTCxFQUtBN1osR0FDSVIsS0FBS3V5QyxZQUFjcnlDLEVBQUdGLEtBQUt3eUMsUUFBVW54QixFQUFHcmhCLEtBQUt5eUMsZUFBaUIvM0IsRUFBRzFhLEtBQUsweUMsa0JBQW9CcjRCLEVBQzFGcmEsS0FBSzJ5QyxpQkFBbUJueUMsQ0FDNUIsQ0FLTyxvREFBTzh4QyxDQUE4Q3B5QyxFQUFHbWhCLEVBQUczRyxHQUM5RCxPQUFPLElBQUkyM0IsR0FBYTMzQixFQUFHMkcsRUFBR3FyQixLQUE0QkEsS0FBNEJBLEtBQzFGLEVBd0JBLE1BQU1rRyxHQUNOLFdBQUFqdkMsQ0FFQXpELEVBRUFtaEIsRUFFQTNHLEVBS0FMLEdBQ0lyYSxLQUFLNnlDLEdBQUszeUMsRUFBR0YsS0FBSzh5QyxpQkFBbUJ6eEIsRUFBR3JoQixLQUFLbUgsSUFBTXVULEVBQUcxYSxLQUFLK3lDLEdBQUsxNEIsQ0FDcEUsRUFHSixNQUFNMjRCLEdBQ0YsV0FBQXJ2QyxDQUFZekQsRUFBR21oQixHQUNYcmhCLEtBQUtpekMsU0FBVy95QyxFQUFHRixLQUFLa3pDLEdBQUs3eEIsQ0FDakMsRUFHSixNQUFNOHhCLEdBQ0YsV0FBQXh2QyxDQUVBekQsRUFFQW1oQixFQU9BM0csRUFBSXluQixHQUFXUyxrQkFDd0N2b0IsRUFBSSxNQUN2RHJhLEtBQUs0ZCxNQUFRMWQsRUFBR0YsS0FBS296QyxVQUFZL3hCLEVBQUdyaEIsS0FBS3V5QyxZQUFjNzNCLEVBQUcxYSxLQUFLcXpDLE1BQVFoNUIsQ0FDM0UsRUFHZ0QsTUFBTWk1QixHQUN0RCxXQUFBM3ZDLEdBS0kzRCxLQUFLdXpDLEdBQUssRUFPVnZ6QyxLQUFLd3pDLEdBQUtDLEtBRVZ6ekMsS0FBSzB6QyxHQUFLdlIsR0FBV1Msa0JBQW1CNWlDLEtBQUt5eUIsSUFBSyxFQU1sRHp5QixLQUFLMnpDLElBQUssQ0FDZCxDQVFPLFdBQUluQixHQUNQLE9BQU94eUMsS0FBS3l5QixFQUNoQixDQUM0RCxlQUFJOGYsR0FDNUQsT0FBT3Z5QyxLQUFLMHpDLEVBQ2hCLENBQ3lFLE1BQUlFLEdBQ3pFLE9BQU8sSUFBTTV6QyxLQUFLdXpDLEVBQ3RCLENBQzZFLE1BQUlNLEdBQzdFLE9BQU83ekMsS0FBSzJ6QyxFQUNoQixDQUlPLEVBQUFHLENBQUc1ekMsR0FDTkEsRUFBRXlpQyxzQkFBd0IsSUFBTTNpQyxLQUFLMnpDLElBQUssRUFBSTN6QyxLQUFLMHpDLEdBQUt4ekMsRUFDNUQsQ0FNTyxFQUFBNnpDLEdBQ0gsSUFBSTd6QyxFQUFJd3NDLEtBQTRCcnJCLEVBQUlxckIsS0FBNEJoeUIsRUFBSWd5QixLQUN4RSxPQUFPMXNDLEtBQUt3ekMsR0FBR2pyQixTQUFRLENBQUVsTyxFQUFHN1osS0FDeEIsT0FBUUEsR0FDTixLQUFLLEVBQ0hOLEVBQUlBLEVBQUUwTCxJQUFJeU8sR0FDVixNQUVGLEtBQUssRUFDSGdILEVBQUlBLEVBQUV6VixJQUFJeU8sR0FDVixNQUVGLEtBQUssRUFDSEssRUFBSUEsRUFBRTlPLElBQUl5TyxHQUNWLE1BRUYsUUFDRTZiLEtBRVAsSUFBSSxJQUFJbWMsR0FBYXJ5QyxLQUFLMHpDLEdBQUkxekMsS0FBS3l5QixHQUFJdnlCLEVBQUdtaEIsRUFBRzNHLEVBQ2xELENBR08sRUFBQXM1QixHQUNIaDBDLEtBQUsyekMsSUFBSyxFQUFJM3pDLEtBQUt3ekMsR0FBS0MsSUFDNUIsQ0FDQSxFQUFBUSxDQUFHL3pDLEVBQUdtaEIsR0FDRnJoQixLQUFLMnpDLElBQUssRUFBSTN6QyxLQUFLd3pDLEdBQUt4ekMsS0FBS3d6QyxHQUFHbFUsT0FBT3AvQixFQUFHbWhCLEVBQzlDLENBQ0EsRUFBQTZ5QixDQUFHaDBDLEdBQ0NGLEtBQUsyekMsSUFBSyxFQUFJM3pDLEtBQUt3ekMsR0FBS3h6QyxLQUFLd3pDLEdBQUcvVCxPQUFPdi9CLEVBQzNDLENBQ0EsRUFBQWkwQyxHQUNJbjBDLEtBQUt1ekMsSUFBTSxDQUNmLENBQ0EsRUFBQWEsR0FDSXAwQyxLQUFLdXpDLElBQU0sQ0FDZixDQUNBLEVBQUFjLEdBQ0lyMEMsS0FBSzJ6QyxJQUFLLEVBQUkzekMsS0FBS3l5QixJQUFLLENBQzVCLEVBTUosTUFBTTZoQixHQUNGLFdBQUEzd0MsQ0FBWXpELEdBQ1JGLEtBQUt1MEMsR0FBS3IwQyxFQUVWRixLQUFLdzBDLEdBQUssSUFBSXJyQyxJQUVkbkosS0FBS3kwQyxHQUFLdkksS0FFVmxzQyxLQUFLMDBDLEdBQUtDLEtBTVYzMEMsS0FBSzQwQyxHQUFLLElBQUkxVixHQUFVekYsR0FDNUIsQ0FHTyxFQUFBb2IsQ0FBRzMwQyxHQUNOLElBQUssTUFBTW1oQixLQUFLbmhCLEVBQUUyeUMsR0FBSTN5QyxFQUFFNnlDLElBQU03eUMsRUFBRTZ5QyxHQUFHeEwsa0JBQW9Cdm5DLEtBQUs4MEMsR0FBR3p6QixFQUFHbmhCLEVBQUU2eUMsSUFBTS95QyxLQUFLKzBDLEdBQUcxekIsRUFBR25oQixFQUFFaUgsSUFBS2pILEVBQUU2eUMsSUFDOUYsSUFBSyxNQUFNMXhCLEtBQUtuaEIsRUFBRTR5QyxpQkFBa0I5eUMsS0FBSyswQyxHQUFHMXpCLEVBQUduaEIsRUFBRWlILElBQUtqSCxFQUFFNnlDLEdBQzVELENBQ2tGLEVBQUFpQyxDQUFHOTBDLEdBQ2pGRixLQUFLaTFDLGNBQWMvMEMsR0FBSW1oQixJQUNuQixNQUFNM0csRUFBSTFhLEtBQUtrMUMsR0FBRzd6QixHQUNsQixPQUFRbmhCLEVBQUUwZCxPQUNSLEtBQUssRUFDSDVkLEtBQUttMUMsR0FBRzl6QixJQUFNM0csRUFBRW81QixHQUFHNXpDLEVBQUVxeUMsYUFDckIsTUFFRixLQUFLLEVBR0g3M0IsRUFBRTA1QixLQUFNMTVCLEVBQUVrNUIsSUFJVmw1QixFQUFFczVCLEtBQU10NUIsRUFBRW81QixHQUFHNXpDLEVBQUVxeUMsYUFDZixNQUVGLEtBQUssRUFLSDczQixFQUFFMDVCLEtBQU0xNUIsRUFBRWs1QixJQUFNNXpDLEtBQUtvMUMsYUFBYS96QixHQUNsQyxNQUVGLEtBQUssRUFDSHJoQixLQUFLbTFDLEdBQUc5ekIsS0FBTzNHLEVBQUUyNUIsS0FBTTM1QixFQUFFbzVCLEdBQUc1ekMsRUFBRXF5QyxjQUM5QixNQUVGLEtBQUssRUFDSHZ5QyxLQUFLbTFDLEdBQUc5ekIsS0FJUnJoQixLQUFLcTFDLEdBQUdoMEIsR0FBSTNHLEVBQUVvNUIsR0FBRzV6QyxFQUFFcXlDLGNBQ25CLE1BRUYsUUFDRXJjLEtBRVAsR0FDTCxDQUtPLGFBQUErZSxDQUFjLzBDLEVBQUdtaEIsR0FDcEJuaEIsRUFBRWt6QyxVQUFVM3lDLE9BQVMsRUFBSVAsRUFBRWt6QyxVQUFVN3FCLFFBQVFsSCxHQUFLcmhCLEtBQUt3MEMsR0FBR2pzQixTQUFRLENBQUVyb0IsRUFBR3dhLEtBQ25FMWEsS0FBS20xQyxHQUFHejZCLElBQU0yRyxFQUFFM0csRUFDbkIsR0FDTCxDQUtPLEVBQUE0NkIsQ0FBR3AxQyxHQUNOLElBQUltaEIsRUFBRzNHLEVBQ1AsTUFBTUwsRUFBSW5hLEVBQUUreUMsU0FBVXp5QyxFQUFJTixFQUFFZ3pDLEdBQUcvQyxNQUFPdjFCLEVBQUk1YSxLQUFLdTFDLEdBQUdsN0IsR0FDbEQsR0FBSU8sRUFBRyxDQUNILE1BQU1DLEVBQUlELEVBQUV6TCxPQUNaLEdBQUlzN0IsR0FBaUM1dkIsR0FBSSxHQUFJLElBQU1yYSxFQUFHLENBT2xELE1BQU1OLEVBQUksSUFBSW84QixHQUFZemhCLEVBQUUwaEIsTUFDNUJ2OEIsS0FBSyswQyxHQUFHMTZCLEVBQUduYSxFQUFHbW1DLEdBQWdCTSxjQUFjem1DLEVBQUdxNkIsR0FBZ0I1SyxPQUNuRSxNQUFPd0csR0FBcUIsSUFBTTMxQixPQUFTLENBQ3ZDLE1BQU1vYSxFQUFJNWEsS0FBS3cxQyxHQUFHbjdCLEdBR0YsR0FBSU8sSUFBTXBhLEVBQUcsQ0FFekIsTUFBTUEsRUFBSVIsS0FBS3kxQyxHQUFHdjFDLEVBQUcwYSxHQUNyQixHQUFJLElBQWlEcGEsRUFBRXlyQixPQUFRLENBRzNEanNCLEtBQUtxMUMsR0FBR2g3QixHQUNSLE1BQU1uYSxFQUFJLElBQXVETSxFQUFFeXJCLE9BQVMsNENBQStGLHVDQUMzS2pzQixLQUFLNDBDLEdBQUs1MEMsS0FBSzQwQyxHQUFHdFYsT0FBT2psQixFQUFHbmEsRUFDaEMsQ0FDQSxRQUFVbWhCLEVBQUlrdkIsR0FBdUJ2bUMsZ0JBQWEsSUFBV3FYLEdBQUtBLEVBQUVzdkIsZ0NBQWdDLFNBQW9FendDLEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQzdLLElBQUk3WixFQUFHb2EsRUFBR0MsRUFBRzNULEVBQUdJLEVBQUduRSxFQUNuQixNQUFNekMsRUFBSSxDQUNOZzFDLGdCQUFpQmg3QixFQUNqQmk3QixxQkFBc0J0N0IsRUFBRTgxQixPQUN6QjcyQixFQUFJZSxFQUFFKzFCLGVBT1QsT0FOQTkyQixJQUFNNVksRUFBRWsxQyxZQUFjLENBQ2xCQyxRQUFTLElBQWlEMzFDLEVBQzFEb3hDLFVBQVcsUUFBVTl3QyxFQUFJLE1BQVE4WSxPQUFJLEVBQVNBLEVBQUVnNEIsaUJBQWMsSUFBVzl3QyxFQUFJQSxFQUFJLEVBQ2pGczFDLGFBQWMsUUFBVTV1QyxFQUFJLFFBQVUyVCxFQUFJLFFBQVVELEVBQUksTUFBUXRCLE9BQUksRUFBU0EsRUFBRXk4QixZQUFTLElBQVduN0IsT0FBSSxFQUFTQSxFQUFFdzJCLGNBQVcsSUFBV3YyQixPQUFJLEVBQVNBLEVBQUVwYSxjQUFXLElBQVd5RyxFQUFJQSxFQUFJLEVBQ3JMbXFDLFFBQVMsUUFBVWx1QyxFQUFJLFFBQVVtRSxFQUFJLE1BQVFnUyxPQUFJLEVBQVNBLEVBQUV5OEIsWUFBUyxJQUFXenVDLE9BQUksRUFBU0EsRUFBRStwQyxlQUFZLElBQVdsdUMsRUFBSUEsRUFBSSxHQUMvSGtlLElBQU0zZ0IsRUFBRWsxQyxZQUFZaEUsYUFBZXZ3QixJQUMvQjNnQixDQUNYLENBYm9HLENBNkJuSEYsRUFBRXlyQixPQUFRLFFBQVV2UixFQUFJbGEsRUFBRXcxQyxVQUFPLElBQVd0N0IsRUFBSUEsRUFBSSxLQUFNRSxFQUFHMWEsRUFBRWd6QyxJQUNwRCxDQUNKLENBQ0osQ0FDSixDQUlPLEVBQUF1QyxDQUFHdjFDLEVBQUdtaEIsR0FDVCxNQUFPK3VCLGVBQWdCMTFCLEVBQUd5MUIsTUFBTzkxQixHQUFLbmEsRUFBRWd6QyxHQUN4QyxJQUFLeDRCLElBQU1BLEVBQUVxN0IsS0FBTSxNQUFPLENBQ3RCOXBCLE9BQVEsR0FFWixNQUFPOHBCLE1BQU8zRSxPQUFRNXdDLEVBQUksR0FBSTZ3QyxRQUFTejJCLEVBQUksR0FBSTAyQixVQUFXejJCLEVBQUksR0FBS0gsRUFDbkUsSUFBSXhULEVBQUdJLEVBQ1AsSUFDSUosRUFBSWc4QixHQUE4QjFpQyxHQUFHa2lDLGNBQ3pDLENBQUUsTUFBT3hpQyxHQUNMLEdBQUlBLGFBQWFnaUMsR0FBNkIsT0FBT2pNLEdBQWtCLGdFQUFrRS8xQixFQUFFaUcsUUFBVSxtRUFDckosQ0FDSThsQixPQUFRLEdBRVosTUFBTS9yQixDQUNWLENBQ0EsSUFFSW9ILEVBQUksSUFBSTZwQyxHQUFZanFDLEVBQUcwVCxFQUFHQyxFQUM5QixDQUFFLE1BQU8zYSxHQUNMLE9BQU8rMUIsR0FBa0IvMUIsYUFBYXF4QyxHQUE2QixzQkFBd0IsaUNBQWtDcnhDLEdBQzdILENBQ0krckIsT0FBUSxFQUVoQixDQUNBLE1BQU1ncUIsRUFBb0MvMUMsSUFDdEMsTUFBTW1oQixFQUFJcmhCLEtBQUt1MEMsR0FBRzJCLEtBQ2xCLE9BQU81dUMsRUFBRXNxQyxhQUFhLFlBQVl2d0IsRUFBRWdqQix1QkFBdUJoakIsRUFBRWlqQixzQkFBc0Jwa0MsSUFBSSxFQUUzRixPQUFJLElBQU1vSCxFQUFFa3FDLEdBQVcsQ0FDbkJ2bEIsT0FBUSxHQUVMLENBQ0hBLE9BQVE1UixJQUFNZ0gsRUFBSXJoQixLQUFLbTJDLEdBQUdqMkMsRUFBRSt5QyxTQUFVZ0QsR0FBcUMsRUFBK0MsRUFDMUhELEdBQUlDLEVBRVosQ0FJTyxFQUFBRSxDQUFHajJDLEVBQUdtaEIsR0FDVCxNQUFNM0csRUFBSTFhLEtBQUt1MEMsR0FBRzZCLHVCQUF1QmwyQyxHQUN6QyxJQUFJbWEsRUFBSSxFQUNSLE9BQU9LLEVBQUU2TixTQUFTN04sSUFDZDJHLEVBQUUzRyxFQUFFNmhCLEtBQUtULHFCQUF1Qjk3QixLQUFLKzBDLEdBQUc3MEMsRUFBR3dhLEVBQXdCLE1BQU9MLElBQzdFLElBQUlBLENBQ1QsQ0FJTyxFQUFBZzhCLENBQUduMkMsR0FDTixNQUFNbWhCLEVBQUksSUFBSWxZLElBQ2RuSixLQUFLdzBDLEdBQUdqc0IsU0FBUSxDQUFFN04sRUFBR0wsS0FDakIsTUFBTTdaLEVBQUlSLEtBQUt1MUMsR0FBR2w3QixHQUNsQixHQUFJN1osRUFBRyxDQUNILEdBQUlrYSxFQUFFODNCLFNBQVcvSCxHQUFpQ2pxQyxFQUFFMk8sUUFBUyxDQVN6RCxNQUFNa1MsRUFBSSxJQUFJaWIsR0FBWTk3QixFQUFFMk8sT0FBT290QixNQUNuQyxPQUFTdjhCLEtBQUt5MEMsR0FBR2xyQyxJQUFJOFgsSUFBTXJoQixLQUFLczJDLEdBQUdqOEIsRUFBR2dILElBQU1yaEIsS0FBSyswQyxHQUFHMTZCLEVBQUdnSCxFQUFHZ2xCLEdBQWdCTSxjQUFjdGxCLEVBQUduaEIsR0FDL0YsQ0FDQXdhLEVBQUVtNUIsS0FBT3h5QixFQUFFeFgsSUFBSXdRLEVBQUdLLEVBQUVxNUIsTUFBT3I1QixFQUFFczVCLEtBQ2pDLENBQ0gsSUFDRCxJQUFJdDVCLEVBQUlneUIsS0FNQTFzQyxLQUFLMDBDLEdBQUduc0IsU0FBUSxDQUFFcm9CLEVBQUdtaEIsS0FDekIsSUFBSWhILEdBQUksRUFDUmdILEVBQUVxZ0IsY0FBY3hoQyxJQUNaLE1BQU1taEIsRUFBSXJoQixLQUFLdTFDLEdBQUdyMUMsR0FDbEIsT0FBUW1oQixHQUFLLGlDQUF1RUEsRUFBRWsxQixVQUFZbDhCLEdBQUksR0FDdEcsRUFDSCxJQUFJQSxJQUFNSyxFQUFJQSxFQUFFOU8sSUFBSTFMLEdBQ3hCLElBQUlGLEtBQUt5MEMsR0FBR2xzQixTQUFRLENBQUVsSCxFQUFHM0csSUFBTUEsRUFBRXdzQixZQUFZaG5DLEtBQzlDLE1BQU1tYSxFQUFJLElBQUl5M0IsR0FBWTV4QyxFQUFHbWhCLEVBQUdyaEIsS0FBSzQwQyxHQUFJNTBDLEtBQUt5MEMsR0FBSS81QixHQUNsRCxPQUFPMWEsS0FBS3kwQyxHQUFLdkksS0FBZ0Nsc0MsS0FBSzAwQyxHQUFLQyxLQUMzRDMwQyxLQUFLNDBDLEdBQUssSUFBSTFWLEdBQVV6RixJQUFnQ3BmLENBQzVELENBTUEsRUFBQXk2QixDQUFHNTBDLEVBQUdtaEIsR0FDRixJQUFLcmhCLEtBQUttMUMsR0FBR2oxQyxHQUFJLE9BQ2pCLE1BQU13YSxFQUFJMWEsS0FBS3MyQyxHQUFHcDJDLEVBQUdtaEIsRUFBRWxhLEtBQU8sRUFBOEIsRUFDNURuSCxLQUFLazFDLEdBQUdoMUMsR0FBRyt6QyxHQUFHNXlCLEVBQUVsYSxJQUFLdVQsR0FBSTFhLEtBQUt5MEMsR0FBS3owQyxLQUFLeTBDLEdBQUduVixPQUFPamUsRUFBRWxhLElBQUtrYSxHQUFJcmhCLEtBQUswMEMsR0FBSzEwQyxLQUFLMDBDLEdBQUdwVixPQUFPamUsRUFBRWxhLElBQUtuSCxLQUFLdzJDLEdBQUduMUIsRUFBRWxhLEtBQUt5RSxJQUFJMUwsR0FDcEgsQ0FTQSxFQUFBNjBDLENBQUc3MEMsRUFBR21oQixFQUFHM0csR0FDTCxJQUFLMWEsS0FBS20xQyxHQUFHajFDLEdBQUksT0FDakIsTUFBTW1hLEVBQUlyYSxLQUFLazFDLEdBQUdoMUMsR0FDbEJGLEtBQUtzMkMsR0FBR3AyQyxFQUFHbWhCLEdBQUtoSCxFQUFFNDVCLEdBQUc1eUIsRUFBRyxHQUd4QmhILEVBQUU2NUIsR0FBRzd5QixHQUFJcmhCLEtBQUswMEMsR0FBSzEwQyxLQUFLMDBDLEdBQUdwVixPQUFPamUsRUFBR3JoQixLQUFLdzJDLEdBQUduMUIsR0FBR3pXLE9BQU8xSyxJQUFLd2EsSUFBTTFhLEtBQUt5MEMsR0FBS3owQyxLQUFLeTBDLEdBQUduVixPQUFPamUsRUFBRzNHLEdBQ2xHLENBQ0EsWUFBQTA2QixDQUFhbDFDLEdBQ1RGLEtBQUt3MEMsR0FBRzVwQyxPQUFPMUssRUFDbkIsQ0FLTyxFQUFBczFDLENBQUd0MUMsR0FDTixNQUFNbWhCLEVBQUlyaEIsS0FBS2sxQyxHQUFHaDFDLEdBQUc2ekMsS0FDckIsT0FBTy96QyxLQUFLdTBDLEdBQUc2Qix1QkFBdUJsMkMsR0FBR2drQixLQUFPN0MsRUFBRW94QixlQUFldnVCLEtBQU83QyxFQUFFc3hCLGlCQUFpQnp1QixJQUMvRixDQUlPLEVBQUFpd0IsQ0FBR2owQyxHQUNORixLQUFLazFDLEdBQUdoMUMsR0FBR2kwQyxJQUNmLENBQ0EsRUFBQWUsQ0FBR2gxQyxHQUNDLElBQUltaEIsRUFBSXJoQixLQUFLdzBDLEdBQUdqckMsSUFBSXJKLEdBQ3BCLE9BQU9taEIsSUFBTUEsRUFBSSxJQUFJaXlCLEdBQXVCdHpDLEtBQUt3MEMsR0FBRzNxQyxJQUFJM0osRUFBR21oQixJQUFLQSxDQUNwRSxDQUNBLEVBQUFtMUIsQ0FBR3QyQyxHQUNDLElBQUltaEIsRUFBSXJoQixLQUFLMDBDLEdBQUduckMsSUFBSXJKLEdBQ3BCLE9BQU9taEIsSUFBTUEsRUFBSSxJQUFJaWdCLEdBQVU3SCxJQUFnQ3o1QixLQUFLMDBDLEdBQUsxMEMsS0FBSzAwQyxHQUFHcFYsT0FBT3AvQixFQUFHbWhCLElBQzNGQSxDQUNKLENBS08sRUFBQTh6QixDQUFHajFDLEdBQ04sTUFBTW1oQixFQUFJLE9BQVNyaEIsS0FBS3UxQyxHQUFHcjFDLEdBQzNCLE9BQU9taEIsR0FBS3lVLEdBQW1CLHdCQUF5QiwyQkFBNEI1MUIsR0FDcEZtaEIsQ0FDSixDQUlPLEVBQUFrMEIsQ0FBR3IxQyxHQUNOLE1BQU1taEIsRUFBSXJoQixLQUFLdzBDLEdBQUdqckMsSUFBSXJKLEdBQ3RCLE9BQU9taEIsR0FBS0EsRUFBRXV5QixHQUFLLEtBQU81ekMsS0FBS3UwQyxHQUFHa0MsR0FBR3YyQyxFQUN6QyxDQUtPLEVBQUFtMUMsQ0FBR24xQyxHQUNORixLQUFLdzBDLEdBQUczcUMsSUFBSTNKLEVBQUcsSUFBSW96QyxJQUNuQnR6QyxLQUFLdTBDLEdBQUc2Qix1QkFBdUJsMkMsR0FBR3FvQixTQUFTbEgsSUFDdkNyaEIsS0FBSyswQyxHQUFHNzBDLEVBQUdtaEIsRUFBd0IsS0FDdEMsR0FDTCxDQUlPLEVBQUFpMUIsQ0FBR3AyQyxFQUFHbWhCLEdBQ1QsT0FBT3JoQixLQUFLdTBDLEdBQUc2Qix1QkFBdUJsMkMsR0FBR3lKLElBQUkwWCxFQUNqRCxFQUdKLFNBQVNzekIsS0FDTCxPQUFPLElBQUl6VixHQUFVNUMsR0FBWXJCLFdBQ3JDLENBRUEsU0FBU3dZLEtBQ0wsT0FBTyxJQUFJdlUsR0FBVTVDLEdBQVlyQixXQUNyQyxDQUVBLE1BQU00UCxHQUNRLENBQ042TCxJQUFLLFlBQ0xDLEtBQU0sY0FHUjdMLEdBQ1EsQ0FDTixJQUFLLFlBQ0wsS0FBTSxxQkFDTixJQUFLLGVBQ0wsS0FBTSx3QkFDTixLQUFNLFFBQ04sS0FBTSxZQUNOLGlCQUFrQixpQkFDbEI4TCxHQUFJLEtBQ0osU0FBVSxTQUNWLHFCQUFzQixzQkFHeEJ2SixHQUNRLENBQ054YSxJQUFLLE1BQ0xDLEdBQUksTUFtQlosTUFBTStqQixHQUNGLFdBQUFsekMsQ0FBWXpELEVBQUdtaEIsR0FDWHJoQixLQUFLNmpDLFdBQWEzakMsRUFBR0YsS0FBS3V0QyxjQUFnQmxzQixDQUM5QyxFQVdKLFNBQVN5MUIsR0FBdUI1MkMsRUFBR21oQixHQUMvQixPQUFPbmhCLEVBQUVxdEMsZUFBaUJ4TyxHQUE0QjFkLEdBQUtBLEVBQUksQ0FDM0R0YixNQUFPc2IsRUFFZixDQWlDQSxTQUFTMDFCLEdBQXNCNzJDLEdBQzNCLE9BQU9pMkIsS0FBdUJqMkIsR0FBSXE2QixHQUFnQkUsY0FBYyxTQUF1QnY2QixHQUNuRixNQUFNbWhCLEVBQUl5aEIsR0FBNkI1aUMsR0FDdkMsT0FBTyxJQUFJMDVCLEdBQVV2WSxFQUFFd1ksUUFBU3hZLEVBQUUyaEIsTUFDdEMsQ0FIZ0UsQ0FHOUQ5aUMsR0FDTixDQVFBLFNBQVM4MkMsR0FBMkI5MkMsR0FDaEMsTUFBTW1oQixFQUFJd2EsR0FBYXZILFdBQVdwMEIsR0FDbEMsT0FBT2kyQixHQUFxQjhnQixHQUE4QjUxQixJQUFLQSxDQUNuRSxDQU1BLFNBQVNvYixHQUFTdjhCLEVBQUdtaEIsR0FDakIsTUFBTTNHLEVBQUlzOEIsR0FBMkIzMUIsR0FDckMsR0FBSTNHLEVBQUVuUixJQUFJLEtBQU9ySixFQUFFMmpDLFdBQVdRLFVBQVcsTUFBTSxJQUFJak4sR0FBZSxHQUFFWixpQkFBa0Isb0RBQXNEOWIsRUFBRW5SLElBQUksR0FBSyxPQUFTckosRUFBRTJqQyxXQUFXUSxXQUM3SyxHQUFJM3BCLEVBQUVuUixJQUFJLEtBQU9ySixFQUFFMmpDLFdBQVdTLFNBQVUsTUFBTSxJQUFJbE4sR0FBZSxHQUFFWixpQkFBa0IscURBQXVEOWIsRUFBRW5SLElBQUksR0FBSyxPQUFTckosRUFBRTJqQyxXQUFXUyxVQUM3SyxPQUFPLElBQUloSSxHQUFZNGEsR0FBMkN4OEIsR0FDdEUsQ0FFQSxTQUFTeThCLEdBQXNCajNDLEVBQUdtaEIsR0FDOUIsT0F2QkosU0FBa0NuaEIsRUFBR21oQixHQUNqQyxPQUFPLFNBQTRDbmhCLEdBQy9DLE9BQU8sSUFBSTI3QixHQUFhLENBQUUsV0FBWTM3QixFQUFFbWtDLFVBQVcsWUFBYW5rQyxFQUFFb2tDLFVBQ3RFLENBRk8sQ0FFTHBrQyxHQUFHZzdCLE1BQU0sYUFBYUEsTUFBTTdaLEdBQUd5YSxpQkFDckMsQ0FtQldzYixDQUF5QmwzQyxFQUFFMmpDLFdBQVl4aUIsRUFDbEQsQ0FXQSxTQUFTZzJCLEdBQStCbjNDLEdBQ3BDLE9BQU8sSUFBSTI3QixHQUFhLENBQUUsV0FBWTM3QixFQUFFMmpDLFdBQVdRLFVBQVcsWUFBYW5rQyxFQUFFMmpDLFdBQVdTLFdBQVl4SSxpQkFDeEcsQ0FFQSxTQUFTb2IsR0FBMkNoM0MsR0FDaEQsT0FBT2kyQixHQUFxQmoyQixFQUFFTyxPQUFTLEdBQUssY0FBZ0JQLEVBQUVxSixJQUFJLElBQUtySixFQUFFbTdCLFNBQVMsRUFDdEYsQ0E4TEEsU0FBU2ljLEdBQTRCcDNDLEVBQUdtaEIsR0FDcEMsTUFBTyxDQUNIazJCLFVBQVcsQ0FBRUosR0FBc0JqM0MsRUFBR21oQixFQUFFa2IsT0FFaEQsQ0FFQSxTQUFTaWIsR0FBd0J0M0MsRUFBR21oQixHQUVoQyxNQUFNM0csRUFBSSxDQUNOKzhCLGdCQUFpQixDQUFDLEdBQ25CcDlCLEVBQUlnSCxFQUFFa2IsS0FDVCxPQUFTbGIsRUFBRXNiLGlCQUFtQmppQixFQUFFZzlCLE9BQVNQLEdBQXNCajNDLEVBQUdtYSxHQUFJSyxFQUFFKzhCLGdCQUFnQjNzQyxLQUFPLENBQUUsQ0FDN0Y2c0MsYUFBY3QyQixFQUFFc2IsZ0JBQ2hCaWIsZ0JBQWdCLE1BQ1psOUIsRUFBRWc5QixPQUFTUCxHQUFzQmozQyxFQUFHbWEsRUFBRWloQixXQUFZNWdCLEVBQUUrOEIsZ0JBQWdCM3NDLEtBQU8sQ0FBRSxDQUNqRjZzQyxhQUFjdDlCLEVBQUVtaEIsaUJBRXBCLE1BQU1oN0IsRUFBSSxTQUE2Qk4sR0FDbkMsR0FBSSxJQUFNQSxFQUFFTyxPQUNaLE9BQU9vM0MsR0FBbUJ6TyxHQUFnQjFpQyxPQUFPeEcsRUFBRyxPQUN4RCxDQUhVLENBR1JtaEIsRUFBRWdvQixTQUNKN29DLElBQU1rYSxFQUFFKzhCLGdCQUFnQkssTUFBUXQzQyxHQUNoQyxNQUFNb2EsRUFBSSxTQUEyQjFhLEdBQ2pDLEdBQUksSUFBTUEsRUFBRU8sT0FDWixPQUFPUCxFQUFFZ0wsS0FBS2hMLEdBRWQsU0FBbUNBLEdBQy9CLE1BQU8sQ0FDSDhsQyxNQUFPK1IsR0FBK0I3M0MsRUFBRThsQyxPQUN4Q2dTLFVBQVdDLEdBQXNCLzNDLEVBQUU2bkMsS0FFM0MsQ0FMQSxDQUtFN25DLElBQ04sQ0FWVSxDQVVSbWhCLEVBQUU2b0IsU0FDSnR2QixJQUFNRixFQUFFKzhCLGdCQUFnQnZOLFFBQVV0dkIsR0FDbEMsTUFBTUMsRUFBSWk4QixHQUF1QjUyQyxFQUFHbWhCLEVBQUU4WixPQUN0QyxPQUFPLE9BQVN0Z0IsSUFBTUgsRUFBRSs4QixnQkFBZ0J0YyxNQUFRdGdCLEdBQUl3RyxFQUFFOG9CLFVBQVl6dkIsRUFBRSs4QixnQkFBZ0J0TixRQUFVLFNBQW1DanFDLEdBQzdILE1BQU8sQ0FDSGc0QyxPQUFRaDRDLEVBQUUybkMsVUFDVjk4QixPQUFRN0ssRUFBRTBuQyxTQUVsQixDQUw4RixDQUs1RnZtQixFQUFFOG9CLFVBQVc5b0IsRUFBRStvQixRQUFVMXZCLEVBQUUrOEIsZ0JBQWdCck4sTUFBUSxTQUFpQ2xxQyxHQUNsRixNQUFPLENBQ0hnNEMsUUFBU2g0QyxFQUFFMm5DLFVBQ1g5OEIsT0FBUTdLLEVBQUUwbkMsU0FFbEIsQ0FMcUQsQ0FLbkR2bUIsRUFBRStvQixRQUFTMXZCLENBQ2pCLENBRUEsU0FBU3k5QixHQUFvQ2o0QyxHQUN6QyxJQUFJbWhCLEVBOVBSLFNBQWlDbmhCLEdBQzdCLE1BQU1taEIsRUFBSTIxQixHQUEyQjkyQyxHQUtqQyxPQUFPLElBQU1taEIsRUFBRTVnQixPQUFTbzdCLEdBQWFFLFlBQWNtYixHQUEyQzcxQixFQUN0RyxDQXVQWSsyQixDQUF3Qmw0QyxFQUFFdzNDLFFBQ2xDLE1BQU1oOUIsRUFBSXhhLEVBQUV1M0MsZ0JBQWlCcDlCLEVBQUlLLEVBQUU1UCxLQUFPNFAsRUFBRTVQLEtBQUtySyxPQUFTLEVBQzFELElBQUlELEVBQUksS0FDUixHQUFJNlosRUFBSSxFQUFHLENBQ1A4YixHQUFxQixJQUFNOWIsR0FDM0IsTUFBTW5hLEVBQUl3YSxFQUFFNVAsS0FBSyxHQUNqQjVLLEVBQUUwM0MsZUFBaUJwM0MsRUFBSU4sRUFBRXkzQyxhQUFldDJCLEVBQUlBLEVBQUU2WixNQUFNaDdCLEVBQUV5M0MsYUFDMUQsQ0FDQSxJQUFJLzhCLEVBQUksR0FDUkYsRUFBRW85QixRQUFVbDlCLEVBQUksU0FBK0IxYSxHQUMzQyxNQUFNbWhCLEVBQUlnM0IsR0FBcUJuNEMsR0FDL0IsT0FBSW1oQixhQUFhK25CLElBQW1CTSxHQUEyQ3JvQixHQUFXQSxFQUFFNm5CLGFBQ3JGLENBQUU3bkIsRUFDYixDQUpnQixDQUlkM0csRUFBRW85QixRQUNKLElBQUlqOUIsRUFBSSxHQUNSSCxFQUFFd3ZCLFVBQVlydkIsRUFBSSxTQUE2QjNhLEdBQzNDLE9BQU9BLEVBQUVnTCxLQUFLaEwsR0FBSyxTQUFxQ0EsR0FDcEQsT0FBTyxJQUFJK25DLEdBQVFxUSxHQUFpQ3A0QyxFQUFFOGxDLE9BRXRELFNBQWlDOWxDLEdBQzdCLE9BQVFBLEdBQ04sSUFBSyxZQUNILE1BQU8sTUFFVCxJQUFLLGFBQ0gsTUFBTyxPQUVULFFBQ0UsT0FFUixDQVhBLENBYUNBLEVBQUU4M0MsV0FDUCxDQWpCbUIsQ0FtQmxCOTNDLElBQ0wsQ0FyQmtCLENBcUJoQndhLEVBQUV3dkIsVUFDSixJQUFJaGpDLEVBQUksS0FDUndULEVBQUV5Z0IsUUFBVWowQixFQUFJLFNBQWtDaEgsR0FDOUMsSUFBSW1oQixFQUNKLE9BQU9BLEVBQUksaUJBQW1CbmhCLEVBQUlBLEVBQUU2RixNQUFRN0YsRUFBRzYrQixHQUE0QjFkLEdBQUssS0FBT0EsQ0FDM0YsQ0FIZ0IsQ0FHZDNHLEVBQUV5Z0IsUUFDSixJQUFJN3pCLEVBQUksS0FDUm9ULEVBQUV5dkIsVUFBWTdpQyxFQUFJLFNBQXFDcEgsR0FDbkQsTUFBTW1oQixJQUFNbmhCLEVBQUVnNEMsT0FBUXg5QixFQUFJeGEsRUFBRTZLLFFBQVUsR0FDdEMsT0FBTyxJQUFJNDhCLEdBQU1qdEIsRUFBRzJHLEVBQ3hCLENBSGtCLENBR2hCM0csRUFBRXl2QixVQUNKLElBQUlobkMsRUFBSSxLQUNSLE9BQU91WCxFQUFFMHZCLFFBQVVqbkMsRUFBSSxTQUFtQ2pELEdBQ3RELE1BQU1taEIsR0FBS25oQixFQUFFZzRDLE9BQVF4OUIsRUFBSXhhLEVBQUU2SyxRQUFVLEdBQ3JDLE9BQU8sSUFBSTQ4QixHQUFNanRCLEVBQUcyRyxFQUN4QixDQUh1QixDQUt0QjNHLEVBQUUwdkIsUUF4OEV3RCxTQUE0QmxxQyxFQUFHbWhCLEVBQUczRyxFQUFHTCxFQUFHN1osRUFBR29hLEVBQUdDLEVBQUczVCxHQUM1RyxPQUFPLElBQUl3akMsR0FBb0J4cUMsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEVBQUdvYSxFQUFHQyxFQUFHM1QsRUFDeEQsQ0FzOEVnQnF4QyxDQUFtQmwzQixFQUFHN2dCLEVBQUdxYSxFQUFHRCxFQUFHMVQsRUFBRyxJQUE0QkksRUFBR25FLEVBQ2pGLENBMEJBLFNBQVNrMUMsR0FBcUJuNEMsR0FDMUIsWUFBTyxJQUFXQSxFQUFFczRDLFlBQWMsU0FBbUN0NEMsR0FDakUsT0FBUUEsRUFBRXM0QyxZQUFZblEsSUFDcEIsSUFBSyxTQUNILE1BQU1obkIsRUFBSWkzQixHQUFpQ3A0QyxFQUFFczRDLFlBQVl4UyxPQUN6RCxPQUFPb0MsR0FBWTFoQyxPQUFPMmEsRUFBRyxLQUE0QixDQUNyRDhqQixZQUFhc1QsTUFHbkIsSUFBSyxVQUNILE1BQU0vOUIsRUFBSTQ5QixHQUFpQ3A0QyxFQUFFczRDLFlBQVl4UyxPQUN6RCxPQUFPb0MsR0FBWTFoQyxPQUFPZ1UsRUFBRyxLQUE0QixDQUNyRHN2QixVQUFXLGVBR2pCLElBQUssYUFDSCxNQUFNM3ZCLEVBQUlpK0IsR0FBaUNwNEMsRUFBRXM0QyxZQUFZeFMsT0FDekQsT0FBT29DLEdBQVkxaEMsT0FBTzJULEVBQUcsS0FBZ0MsQ0FDekQ4cUIsWUFBYXNULE1BR25CLElBQUssY0FDSCxNQUFNajRDLEVBQUk4M0MsR0FBaUNwNEMsRUFBRXM0QyxZQUFZeFMsT0FDekQsT0FBT29DLEdBQVkxaEMsT0FBT2xHLEVBQUcsS0FBZ0MsQ0FDekR3cEMsVUFBVyxlQUdqQixRQUNFLE9BQU85VCxLQUVmLENBN0JrQyxDQTZCaENoMkIsUUFBSyxJQUFXQSxFQUFFdzRDLFlBQWMsU0FBbUN4NEMsR0FDakUsT0FBT2tvQyxHQUFZMWhDLE9BQU80eEMsR0FBaUNwNEMsRUFBRXc0QyxZQUFZMVMsT0FBUSxTQUFvQzlsQyxHQUNqSCxPQUFRQSxHQUNOLElBQUssUUFDSCxNQUFPLEtBRVQsSUFBSyxZQUNILE1BQU8sS0FFVCxJQUFLLGVBQ0gsTUFBTyxJQUVULElBQUssd0JBQ0gsTUFBTyxLQUVULElBQUssWUFDSCxNQUFPLElBRVQsSUFBSyxxQkFDSCxNQUFPLEtBRVQsSUFBSyxpQkFDSCxNQUFPLGlCQUVULElBQUssS0FDSCxNQUFPLEtBRVQsSUFBSyxTQUNILE1BQU8sU0FFVCxJQUFLLHFCQUNILE1BQU8scUJBRVQsUUFDRSxPQUFPZzJCLEtBRWYsQ0FuQ2lGLENBbUMvRWgyQixFQUFFdzRDLFlBQVlyUSxJQUFLbm9DLEVBQUV3NEMsWUFBWTN5QyxNQUN2QyxDQXJDa0MsQ0FxQ2hDN0YsUUFBSyxJQUFXQSxFQUFFeTRDLGdCQUFrQixTQUF1Q3o0QyxHQUN6RSxPQUFPa3BDLEdBQWdCMWlDLE9BQU94RyxFQUFFeTRDLGdCQUFnQnRQLFFBQVFuK0IsS0FBS2hMLEdBQUttNEMsR0FBcUJuNEMsS0FBTSxTQUE2Q0EsR0FDdEksT0FBUUEsR0FDTixJQUFLLE1BQ0gsTUFBTyxNQUVULElBQUssS0FDSCxNQUFPLEtBRVQsUUFDRSxPQUFPZzJCLEtBRWYsQ0FYNkYsQ0FXM0ZoMkIsRUFBRXk0QyxnQkFBZ0J0USxJQUN4QixDQWJzQyxDQWFwQ25vQyxHQUFLZzJCLElBQ1gsQ0FFQSxTQUFTK2hCLEdBQXNCLzNDLEdBQzNCLE9BQU8ycUMsR0FBRzNxQyxFQUNkLENBRUEsU0FBUzA0QyxHQUF5QjE0QyxHQUM5QixPQUFPNHFDLEdBQUc1cUMsRUFDZCxDQUVBLFNBQVMyNEMsR0FBa0MzNEMsR0FDdkMsT0FBT210QyxHQUFHbnRDLEVBQ2QsQ0FFQSxTQUFTNjNDLEdBQStCNzNDLEdBQ3BDLE1BQU8sQ0FDSDQ0QyxVQUFXNTRDLEVBQUU0N0Isa0JBRXJCLENBRUEsU0FBU3djLEdBQWlDcDRDLEdBQ3RDLE9BQU84N0IsR0FBWUksaUJBQWlCbDhCLEVBQUU0NEMsVUFDMUMsQ0FFQSxTQUFTakIsR0FBbUIzM0MsR0FDeEIsT0FBT0EsYUFBYWtvQyxHQUFjLFNBQXdDbG9DLEdBQ3RFLEdBQUksT0FBOEJBLEVBQUVtb0MsR0FBSSxDQUNwQyxHQUFJekMsR0FBcUIxbEMsRUFBRTZGLE9BQVEsTUFBTyxDQUN0Q3l5QyxZQUFhLENBQ1R4UyxNQUFPK1IsR0FBK0I3M0MsRUFBRThsQyxPQUN4Q3FDLEdBQUksV0FHWixHQUFJMUMsR0FBc0J6bEMsRUFBRTZGLE9BQVEsTUFBTyxDQUN2Q3l5QyxZQUFhLENBQ1R4UyxNQUFPK1IsR0FBK0I3M0MsRUFBRThsQyxPQUN4Q3FDLEdBQUksV0FHaEIsTUFBTyxHQUFJLE9BQWtDbm9DLEVBQUVtb0MsR0FBSSxDQUMvQyxHQUFJekMsR0FBcUIxbEMsRUFBRTZGLE9BQVEsTUFBTyxDQUN0Q3l5QyxZQUFhLENBQ1R4UyxNQUFPK1IsR0FBK0I3M0MsRUFBRThsQyxPQUN4Q3FDLEdBQUksZUFHWixHQUFJMUMsR0FBc0J6bEMsRUFBRTZGLE9BQVEsTUFBTyxDQUN2Q3l5QyxZQUFhLENBQ1R4UyxNQUFPK1IsR0FBK0I3M0MsRUFBRThsQyxPQUN4Q3FDLEdBQUksZUFHaEIsQ0FDQSxNQUFPLENBQ0hxUSxZQUFhLENBQ1QxUyxNQUFPK1IsR0FBK0I3M0MsRUFBRThsQyxPQUN4Q3FDLEdBQUl1USxHQUF5QjE0QyxFQUFFbW9DLElBQy9CdGlDLE1BQU83RixFQUFFNkYsT0FHckIsQ0FuQ2tDLENBbUNoQzdGLEdBQUtBLGFBQWFrcEMsR0FBa0IsU0FBcUNscEMsR0FDdkUsTUFBTW1oQixFQUFJbmhCLEVBQUVncEMsYUFBYWgrQixLQUFLaEwsR0FBSzIzQyxHQUFtQjMzQyxLQUN0RCxPQUFJLElBQU1taEIsRUFBRTVnQixPQUFlNGdCLEVBQUUsR0FDdEIsQ0FDSHMzQixnQkFBaUIsQ0FDYnRRLEdBQUl3USxHQUFrQzM0QyxFQUFFbW9DLElBQ3hDZ0IsUUFBU2hvQixHQUdyQixDQVRzQyxDQVNwQ25oQixHQUFLZzJCLElBQ1gsQ0FTQSxTQUFTK2dCLEdBQThCLzJDLEdBRW5DLE9BQU9BLEVBQUVPLFFBQVUsR0FBSyxhQUFlUCxFQUFFcUosSUFBSSxJQUFNLGNBQWdCckosRUFBRXFKLElBQUksRUFDN0UsQ0FvQkksTUFBTXd2QyxHQUNOLFdBQUFwMUMsQ0FFQXpELEVBS0FtaEIsRUFFQTNHLEVBS0FMLEVBRUE3WixFQUFJKzVCLEdBQWdCNUssTUFJZC9VLEVBQUkyZixHQUFnQjVLLE1BTXBCOVUsRUFBSXNuQixHQUFXUyxrQkFLZjE3QixFQUFJLE1BQ05sSCxLQUFLbVAsT0FBU2pQLEVBQUdGLEtBQUtpekMsU0FBVzV4QixFQUFHcmhCLEtBQUt1MkMsUUFBVTc3QixFQUFHMWEsS0FBS2c1QyxlQUFpQjMrQixFQUFHcmEsS0FBSyt4QyxnQkFBa0J2eEMsRUFDdEdSLEtBQUtpNUMsNkJBQStCcitCLEVBQUc1YSxLQUFLdXlDLFlBQWMxM0IsRUFBRzdhLEtBQUtrNUMsY0FBZ0JoeUMsQ0FDdEYsQ0FDOEUsa0JBQUFpeUMsQ0FBbUJqNUMsR0FDN0YsT0FBTyxJQUFJNjRDLEdBQVcvNEMsS0FBS21QLE9BQVFuUCxLQUFLaXpDLFNBQVVqekMsS0FBS3UyQyxRQUFTcjJDLEVBQUdGLEtBQUsreEMsZ0JBQWlCL3hDLEtBQUtpNUMsNkJBQThCajVDLEtBQUt1eUMsWUFBYXZ5QyxLQUFLazVDLGNBQ3ZKLENBSU8sZUFBQUUsQ0FBZ0JsNUMsRUFBR21oQixHQUN0QixPQUFPLElBQUkwM0IsR0FBVy80QyxLQUFLbVAsT0FBUW5QLEtBQUtpekMsU0FBVWp6QyxLQUFLdTJDLFFBQVN2MkMsS0FBS2c1QyxlQUFnQjMzQixFQUFHcmhCLEtBQUtpNUMsNkJBQThCLzRDLEVBQ3RHLEtBQ3pCLENBR08saUJBQUFtNUMsQ0FBa0JuNUMsR0FDckIsT0FBTyxJQUFJNjRDLEdBQVcvNEMsS0FBS21QLE9BQVFuUCxLQUFLaXpDLFNBQVVqekMsS0FBS3UyQyxRQUFTdjJDLEtBQUtnNUMsZUFBZ0JoNUMsS0FBSyt4QyxnQkFBaUIveEMsS0FBS2k1Qyw2QkFBOEJqNUMsS0FBS3V5QyxZQUFhcnlDLEVBQ3BLLENBSU8sZ0NBQUFvNUMsQ0FBaUNwNUMsR0FDcEMsT0FBTyxJQUFJNjRDLEdBQVcvNEMsS0FBS21QLE9BQVFuUCxLQUFLaXpDLFNBQVVqekMsS0FBS3UyQyxRQUFTdjJDLEtBQUtnNUMsZUFBZ0JoNUMsS0FBSyt4QyxnQkFBaUI3eEMsRUFBR0YsS0FBS3V5QyxZQUFhdnlDLEtBQUtrNUMsY0FDekksRUFtQm1ELE1BQU1LLEdBQ3pELFdBQUE1MUMsQ0FBWXpELEdBQ1JGLEtBQUt3NUMsR0FBS3Q1QyxDQUNkLEVBa0lKLFNBQVN1NUMsR0FBMkJ2NUMsR0FDaEMsTUFBTW1oQixFQUFJODJCLEdBQW9DLENBQzFDVCxPQUFReDNDLEVBQUV3M0MsT0FDVkQsZ0JBQWlCdjNDLEVBQUV1M0Msa0JBRXZCLE1BQU8sU0FBV3YzQyxFQUFFMHFDLFVBQVlTLEdBQXlCaHFCLEVBQUdBLEVBQUU4WixNQUFPLEtBQTRCOVosQ0FDckcsQ0FzT0EsTUFBTXE0QixHQUNGLFdBQUEvMUMsR0FBZSxDQVFmLEVBQUFnMkMsQ0FBR3o1QyxFQUFHbWhCLEdBQ0ZyaEIsS0FBSzQ1QyxHQUFHMTVDLEVBQUdtaEIsR0FHWEEsRUFBRXc0QixJQUNOLENBQ0EsRUFBQUQsQ0FBRzE1QyxFQUFHbWhCLEdBQ0YsR0FBSSxjQUFlbmhCLEVBQUdGLEtBQUs4NUMsR0FBR3o0QixFQUFHLFFBQVMsR0FBSSxpQkFBa0JuaEIsRUFBR0YsS0FBSzg1QyxHQUFHejRCLEVBQUcsSUFDOUVBLEVBQUUwNEIsR0FBRzc1QyxFQUFFMGtDLGFBQWUsRUFBSSxRQUFTLEdBQUksaUJBQWtCMWtDLEVBQUdGLEtBQUs4NUMsR0FBR3o0QixFQUFHLElBQUtBLEVBQUUwNEIsR0FBRzlXLEdBQTBCL2lDLEVBQUVnbEMsb0JBQXFCLEdBQUksZ0JBQWlCaGxDLEVBQUcsQ0FDdEosTUFBTXdhLEVBQUl1b0IsR0FBMEIvaUMsRUFBRWlsQyxhQUN0Q2xlLE1BQU12TSxHQUFLMWEsS0FBSzg1QyxHQUFHejRCLEVBQUcsS0FBT3JoQixLQUFLODVDLEdBQUd6NEIsRUFBRyxJQUFLMmQsR0FBeUJ0a0IsR0FFdEUyRyxFQUFFMDRCLEdBQUcsR0FBSzE0QixFQUFFMDRCLEdBQUdyL0IsR0FDbkIsTUFBTyxHQUFJLG1CQUFvQnhhLEVBQUcsQ0FDOUIsTUFBTXdhLEVBQUl4YSxFQUFFeWpDLGVBQ1ozakMsS0FBSzg1QyxHQUFHejRCLEVBQUcsSUFBSyxpQkFBbUIzRyxFQUFJMkcsRUFBRTI0QixHQUFHdC9CLElBQU0yRyxFQUFFMjRCLEdBQUcsR0FBR3QvQixFQUFFbWYsU0FBVyxNQUFPeFksRUFBRTA0QixHQUFHci9CLEVBQUVzb0IsT0FBUyxHQUNsRyxNQUFPLEdBQUksZ0JBQWlCOWlDLEVBQUdGLEtBQUtpNkMsR0FBRy81QyxFQUFFb2pDLFlBQWFqaUIsR0FBSXJoQixLQUFLazZDLEdBQUc3NEIsUUFBUyxHQUFJLGVBQWdCbmhCLEVBQUdGLEtBQUs4NUMsR0FBR3o0QixFQUFHLElBQzdHQSxFQUFFODRCLEdBQUdqWCxHQUE4QmhqQyxFQUFFMmtDLGFBQWM3a0MsS0FBS2s2QyxHQUFHNzRCLFFBQVMsR0FBSSxtQkFBb0JuaEIsRUFBR0YsS0FBS282QyxHQUFHbDZDLEVBQUU0a0MsZUFBZ0J6akIsUUFBUyxHQUFJLGtCQUFtQm5oQixFQUFHLENBQ3hKLE1BQU13YSxFQUFJeGEsRUFBRTZrQyxjQUNaL2tDLEtBQUs4NUMsR0FBR3o0QixFQUFHLElBQUtBLEVBQUUwNEIsR0FBR3IvQixFQUFFc3FCLFVBQVksR0FBSTNqQixFQUFFMDRCLEdBQUdyL0IsRUFBRXVxQixXQUFhLEVBQy9ELEtBQU8sYUFBYy9rQyxFQUFJd2tDLEdBQXFCeGtDLEdBQUtGLEtBQUs4NUMsR0FBR3o0QixFQUFHc0IsT0FBTzAzQixtQkFBcUJyNkMsS0FBS3M2QyxHQUFHcDZDLEVBQUVrakMsU0FBVS9oQixHQUM5R3JoQixLQUFLazZDLEdBQUc3NEIsSUFBTSxlQUFnQm5oQixHQUFLRixLQUFLdTZDLEdBQUdyNkMsRUFBRWtsQyxXQUFZL2pCLEdBQUlyaEIsS0FBS2s2QyxHQUFHNzRCLElBQU02VSxJQUMvRSxDQUNBLEVBQUErakIsQ0FBRy81QyxFQUFHbWhCLEdBQ0ZyaEIsS0FBSzg1QyxHQUFHejRCLEVBQUcsSUFBS3JoQixLQUFLdzZDLEdBQUd0NkMsRUFBR21oQixFQUMvQixDQUNBLEVBQUFtNUIsQ0FBR3Q2QyxFQUFHbWhCLEdBQ0ZBLEVBQUUyNEIsR0FBRzk1QyxFQUNULENBQ0EsRUFBQW82QyxDQUFHcDZDLEVBQUdtaEIsR0FDRixNQUFNM0csRUFBSXhhLEVBQUU4aEMsUUFBVSxDQUFDLEVBQ3ZCaGlDLEtBQUs4NUMsR0FBR3o0QixFQUFHLElBQ1gsSUFBSyxNQUFNbmhCLEtBQUttRyxPQUFPb0IsS0FBS2lULEdBQUkxYSxLQUFLaTZDLEdBQUcvNUMsRUFBR21oQixHQUFJcmhCLEtBQUs0NUMsR0FBR2wvQixFQUFFeGEsR0FBSW1oQixFQUNqRSxDQUNBLEVBQUFrNUIsQ0FBR3I2QyxFQUFHbWhCLEdBQ0YsTUFBTTNHLEVBQUl4YSxFQUFFNkssUUFBVSxHQUN0Qi9LLEtBQUs4NUMsR0FBR3o0QixFQUFHLElBQ1gsSUFBSyxNQUFNbmhCLEtBQUt3YSxFQUFHMWEsS0FBSzQ1QyxHQUFHMTVDLEVBQUdtaEIsRUFDbEMsQ0FDQSxFQUFBKzRCLENBQUdsNkMsRUFBR21oQixHQUNGcmhCLEtBQUs4NUMsR0FBR3o0QixFQUFHLElBQ1hpYixHQUFZRyxTQUFTdjhCLEdBQUdxOEIsS0FBS2hVLFNBQVNyb0IsSUFDbENGLEtBQUs4NUMsR0FBR3o0QixFQUFHLElBQUtyaEIsS0FBS3c2QyxHQUFHdDZDLEVBQUdtaEIsRUFDOUIsR0FDTCxDQUNBLEVBQUF5NEIsQ0FBRzU1QyxFQUFHbWhCLEdBQ0ZuaEIsRUFBRTY1QyxHQUFHMTRCLEVBQ1QsQ0FDQSxFQUFBNjRCLENBQUdoNkMsR0FJQ0EsRUFBRTY1QyxHQUFHLEVBQ1QsRUFHSkwsR0FBb0NlLEdBQUssSUFBSWYsR0F5a0J6QyxNQUFNZ0IsR0FDTixXQUFBLzJDLEdBQ0kzRCxLQUFLMjZDLEdBQUssSUFBSUMsRUFDbEIsQ0FDQSwwQkFBQUMsQ0FBMkIzNkMsRUFBR21oQixHQUMxQixPQUFPcmhCLEtBQUsyNkMsR0FBRy91QyxJQUFJeVYsR0FBSXVjLEdBQW1CbDRCLFNBQzlDLENBQ0Esb0JBQUFvMUMsQ0FBcUI1NkMsRUFBR21oQixHQUNwQixPQUFPdWMsR0FBbUJsNEIsUUFBUTFGLEtBQUsyNkMsR0FBR0ksV0FBVzE1QixHQUN6RCxDQUNBLGFBQUEyNUIsQ0FBYzk2QyxFQUFHbWhCLEdBRWIsT0FBT3VjLEdBQW1CbDRCLFNBQzlCLENBQ0EsZ0JBQUF1MUMsQ0FBaUIvNkMsRUFBR21oQixHQUVoQixPQUFPdWMsR0FBbUJsNEIsU0FDOUIsQ0FDQSwwQkFBQXcxQyxDQUEyQmg3QyxFQUFHbWhCLEdBRTFCLE9BQU91YyxHQUFtQmw0QixRQUFRLEtBQ3RDLENBQ0EsWUFBQXkxQyxDQUFhajdDLEVBQUdtaEIsR0FFWixPQUFPdWMsR0FBbUJsNEIsUUFBUSxFQUN0QyxDQUNBLGVBQUEwMUMsQ0FBZ0JsN0MsRUFBR21oQixHQUVmLE9BQU91YyxHQUFtQmw0QixRQUFRLEdBQ3RDLENBQ0EsOEJBQUEyMUMsQ0FBK0JuN0MsR0FFM0IsT0FBTzA5QixHQUFtQmw0QixRQUFRLEtBQ3RDLENBQ0EsWUFBQTQxQyxDQUFhcDdDLEVBQUdtaEIsR0FDWixPQUFPdWMsR0FBbUJsNEIsUUFBUXczQixHQUFZdk4sTUFDbEQsQ0FDQSwrQkFBQTRyQixDQUFnQ3I3QyxFQUFHbWhCLEdBQy9CLE9BQU91YyxHQUFtQmw0QixRQUFRdzNCLEdBQVl2TixNQUNsRCxDQUNBLHFCQUFBNnJCLENBQXNCdDdDLEVBQUdtaEIsRUFBRzNHLEdBRXhCLE9BQU9rakIsR0FBbUJsNEIsU0FDOUIsQ0FDQSxrQkFBQSsxQyxDQUFtQnY3QyxFQUFHbWhCLEdBRWxCLE9BQU91YyxHQUFtQmw0QixTQUM5QixFQU9BLE1BQU1rMUMsR0FDTixXQUFBajNDLEdBQ0kzRCxLQUFLa1MsTUFBUSxDQUFDLENBQ2xCLENBRUEsR0FBQXRHLENBQUkxTCxHQUNBLE1BQU1taEIsRUFBSW5oQixFQUFFczdCLGNBQWU5Z0IsRUFBSXhhLEVBQUVvN0IsVUFBV2poQixFQUFJcmEsS0FBS2tTLE1BQU1tUCxJQUFNLElBQUlpZ0IsR0FBVXpGLEdBQWFaLFlBQWF6NkIsR0FBSzZaLEVBQUUxUSxJQUFJK1EsR0FDcEgsT0FBTzFhLEtBQUtrUyxNQUFNbVAsR0FBS2hILEVBQUV6TyxJQUFJOE8sR0FBSWxhLENBQ3JDLENBQ0EsR0FBQW1KLENBQUl6SixHQUNBLE1BQU1taEIsRUFBSW5oQixFQUFFczdCLGNBQWU5Z0IsRUFBSXhhLEVBQUVvN0IsVUFBV2poQixFQUFJcmEsS0FBS2tTLE1BQU1tUCxHQUMzRCxPQUFPaEgsR0FBS0EsRUFBRTFRLElBQUkrUSxFQUN0QixDQUNBLFVBQUFxZ0MsQ0FBVzc2QyxHQUNQLE9BQVFGLEtBQUtrUyxNQUFNaFMsSUFBTSxJQUFJb2hDLEdBQVV6RixHQUFhWixhQUFhVyxTQUNyRSxFQWtCVyxJQUFJck8sV0FBVyxHQXFpQjlCLE1BQU1tdUIsR0FDRixXQUFBLzNDLENBR0F6RCxFQUVBbWhCLEVBR0EzRyxHQUNJMWEsS0FBSzI3Qyw2QkFBK0J6N0MsRUFBR0YsS0FBSzQ3QyxvQkFBc0J2NkIsRUFBR3JoQixLQUFLNjdDLGdDQUFrQ25oQyxDQUNoSCxDQUNBLG9CQUFPb2hDLENBQWM1N0MsR0FDakIsT0FBTyxJQUFJdzdDLEdBQVV4N0MsRUFBR3c3QyxHQUFVSyw4QkFBK0JMLEdBQVVNLHdDQUMvRSxFQW9FOEROLEdBQVVLLDhCQUFnQyxHQUM1R0wsR0FBVU0sd0NBQTBDLElBQUtOLEdBQVVPLFFBQVUsSUFBSVAsR0FBVSxTQUFVQSxHQUFVSyw4QkFBK0JMLEdBQVVNLHlDQUN4Sk4sR0FBVVEsU0FBVyxJQUFJUixJQUFXLEVBQUcsRUFBRyxHQW1VMUMsTUFBTVMsR0FDRixXQUFBeDRDLENBQVl6RCxHQUNSRixLQUFLbzhDLEdBQUtsOEMsQ0FDZCxDQUNBLElBQUF1aEIsR0FDSSxPQUFPemhCLEtBQUtvOEMsSUFBTSxFQUFHcDhDLEtBQUtvOEMsRUFDOUIsQ0FDQSxTQUFPQyxHQUtILE9BQU8sSUFBSUYsR0FBNEIsRUFDM0MsQ0FDQSxTQUFPRyxHQUVILE9BQU8sSUFBSUgsSUFBNkIsRUFDNUMsRUFpZkEsTUFBTUksR0FDTixXQUFBNTRDLEdBRUkzRCxLQUFLdzhDLFFBQVUsSUFBSTVRLElBQVcxckMsR0FBS0EsRUFBRWdhLGFBQWEsQ0FBRWhhLEVBQUdtaEIsSUFBTW5oQixFQUFFczFCLFFBQVFuVSxLQUFNcmhCLEtBQUt5OEMsZ0JBQWlCLENBQ3ZHLENBTU8sUUFBQUMsQ0FBU3g4QyxHQUNaRixLQUFLMjhDLG1CQUFvQjM4QyxLQUFLdzhDLFFBQVEzeUMsSUFBSTNKLEVBQUVpSCxJQUFLakgsRUFDckQsQ0FNTyxXQUFBMDhDLENBQVkxOEMsRUFBR21oQixHQUNsQnJoQixLQUFLMjhDLG1CQUFvQjM4QyxLQUFLdzhDLFFBQVEzeUMsSUFBSTNKLEVBQUdtbUMsR0FBZ0JJLG1CQUFtQnZtQyxHQUFHZ25DLFlBQVk3bEIsR0FDbkcsQ0FXTyxRQUFBdzdCLENBQVMzOEMsRUFBR21oQixHQUNmcmhCLEtBQUsyOEMsbUJBQ0wsTUFBTWppQyxFQUFJMWEsS0FBS3c4QyxRQUFRanpDLElBQUk4WCxHQUMzQixZQUFPLElBQVczRyxFQUFJa2pCLEdBQW1CbDRCLFFBQVFnVixHQUFLMWEsS0FBSzg4QyxhQUFhNThDLEVBQUdtaEIsRUFDL0UsQ0FVTyxVQUFBMDVCLENBQVc3NkMsRUFBR21oQixHQUNqQixPQUFPcmhCLEtBQUsrOEMsZ0JBQWdCNzhDLEVBQUdtaEIsRUFDbkMsQ0FJTyxLQUFBcFIsQ0FBTS9QLEdBQ1QsT0FBT0YsS0FBSzI4QyxtQkFBb0IzOEMsS0FBS3k4QyxnQkFBaUIsRUFBSXo4QyxLQUFLbW1DLGFBQWFqbUMsRUFDaEYsQ0FDcUQsZ0JBQUF5OEMsR0FBb0IsRUErVzdFLE1BQU1LLEdBQ0YsV0FBQXI1QyxDQUFZekQsRUFPWm1oQixHQUNJcmhCLEtBQUtzc0Msa0JBQW9CcHNDLEVBQUdGLEtBQUs4dkMsY0FBZ0J6dUIsQ0FDckQsRUF3QkEsTUFBTTQ3QixHQUNOLFdBQUF0NUMsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ2pCcmEsS0FBS2s5QyxvQkFBc0JoOUMsRUFBR0YsS0FBS205QyxjQUFnQjk3QixFQUFHcmhCLEtBQUtvOUMscUJBQXVCMWlDLEVBQ2xGMWEsS0FBS3E5QyxhQUFlaGpDLENBQ3hCLENBTU8sV0FBQWlqQyxDQUFZcDlDLEVBQUdtaEIsR0FDbEIsSUFBSTNHLEVBQUksS0FDUixPQUFPMWEsS0FBS285QyxxQkFBcUJHLFdBQVdyOUMsRUFBR21oQixHQUFHSSxNQUFNcEgsSUFBTUssRUFBSUwsRUFBR3JhLEtBQUtrOUMsb0JBQW9CTCxTQUFTMzhDLEVBQUdtaEIsTUFBTUksTUFBTXZoQixJQUFNLE9BQVN3YSxHQUFLbzBCLEdBQW1DcDBCLEVBQUVzMUIsU0FBVTl2QyxFQUFHNmhDLEdBQVVyRixRQUFTOUMsR0FBVXRzQixPQUN6TnBOLElBQ0osQ0FNTyxZQUFBczlDLENBQWF0OUMsRUFBR21oQixHQUNuQixPQUFPcmhCLEtBQUtrOUMsb0JBQW9CbkMsV0FBVzc2QyxFQUFHbWhCLEdBQUdJLE1BQU1KLEdBQUtyaEIsS0FBS3k5Qyx3QkFBd0J2OUMsRUFBR21oQixFQUFHcXJCLE1BQTRCanJCLE1BQUssSUFBT0osS0FDM0ksQ0FVTyx1QkFBQW84QixDQUF3QnY5QyxFQUFHbWhCLEVBQUczRyxFQUFJZ3lCLE1BQ3JDLE1BQU1yeUIsRUFBSWt5QixLQUNWLE9BQU92c0MsS0FBSzA5QyxpQkFBaUJ4OUMsRUFBR21hLEVBQUdnSCxHQUFHSSxNQUFLLElBQU96aEIsS0FBSzI5QyxhQUFhejlDLEVBQUdtaEIsRUFBR2hILEVBQUdLLEdBQUcrRyxNQUFNdmhCLElBQ2xGLElBQUltaEIsRUFBSStxQixLQUNSLE9BQU9sc0MsRUFBRXFvQixTQUFRLENBQUVyb0IsRUFBR3dhLEtBQ2xCMkcsRUFBSUEsRUFBRWllLE9BQU9wL0IsRUFBR3dhLEVBQUU0eEIsa0JBQ3JCLElBQUlqckIsQ0FDUixLQUNMLENBS08scUJBQUF1OEIsQ0FBc0IxOUMsRUFBR21oQixHQUM1QixNQUFNM0csRUFBSTZ4QixLQUNWLE9BQU92c0MsS0FBSzA5QyxpQkFBaUJ4OUMsRUFBR3dhLEVBQUcyRyxHQUFHSSxNQUFLLElBQU96aEIsS0FBSzI5QyxhQUFhejlDLEVBQUdtaEIsRUFBRzNHLEVBQUdneUIsT0FDakYsQ0FJTyxnQkFBQWdSLENBQWlCeDlDLEVBQUdtaEIsRUFBRzNHLEdBQzFCLE1BQU1MLEVBQUksR0FDVixPQUFPSyxFQUFFNk4sU0FBU3JvQixJQUNkbWhCLEVBQUUxWCxJQUFJekosSUFBTW1hLEVBQUU3WCxLQUFLdEMsRUFDdEIsSUFBSUYsS0FBS285QyxxQkFBcUJTLFlBQVkzOUMsRUFBR21hLEdBQUdvSCxNQUFNdmhCLElBQ25EQSxFQUFFcW9CLFNBQVEsQ0FBRXJvQixFQUFHd2EsS0FDWDJHLEVBQUV4WCxJQUFJM0osRUFBR3dhLEVBQ1osR0FDSixHQUNMLENBWU8sWUFBQWlqQyxDQUFhejlDLEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ3pCLElBQUk3WixFQUFJMHJDLEtBQ1IsTUFBTXR4QixFQUFJNHhCLEtBQStCM3hCLEVBQzlCMnhCLEtBRVgsT0FBT25yQixFQUFFa0gsU0FBUSxDQUFFcm9CLEVBQUdtaEIsS0FDbEIsTUFBTXhHLEVBQUlILEVBQUVuUixJQUFJOFgsRUFBRWxhLEtBUU5rVCxFQUFFMVEsSUFBSTBYLEVBQUVsYSxZQUFTLElBQVcwVCxHQUFLQSxFQUFFbTFCLG9CQUFvQnpCLElBQTJCL3RDLEVBQUlBLEVBQUU4K0IsT0FBT2plLEVBQUVsYSxJQUFLa2EsUUFBSyxJQUFXeEcsR0FBS0QsRUFBRS9RLElBQUl3WCxFQUFFbGEsSUFBSzBULEVBQUVtMUIsU0FBU1osZ0JBQy9KTixHQUFtQ2owQixFQUFFbTFCLFNBQVUzdUIsRUFBR3hHLEVBQUVtMUIsU0FBU1osZUFBZ0J4VixHQUFVdHNCLFFBR3ZGc04sRUFBRS9RLElBQUl3WCxFQUFFbGEsSUFBSzQ2QixHQUFVckYsUUFDMUIsSUFBSTE4QixLQUFLODlDLDJCQUEyQjU5QyxFQUFHTSxHQUFHaWhCLE1BQU12aEIsSUFBTUEsRUFBRXFvQixTQUFRLENBQUVyb0IsRUFBR21oQixJQUFNekcsRUFBRS9RLElBQUkzSixFQUFHbWhCLEtBQ3JGQSxFQUFFa0gsU0FBUSxDQUFFcm9CLEVBQUdtaEIsS0FDWCxJQUFJM0csRUFDSixPQUFPRyxFQUFFaFIsSUFBSTNKLEVBQUcsSUFBSTg4QyxHQUFrQjM3QixFQUFHLFFBQVUzRyxFQUFJRSxFQUFFclIsSUFBSXJKLFVBQU8sSUFBV3dhLEVBQUlBLEVBQUksTUFDMUYsSUFBSUcsSUFDVCxDQUNBLDBCQUFBaWpDLENBQTJCNTlDLEVBQUdtaEIsR0FDMUIsTUFBTTNHLEVBQUk4eEIsS0FFRixJQUFJbnlCLEVBQUksSUFBSTZrQixJQUFVLENBQUVoL0IsRUFBR21oQixJQUFNbmhCLEVBQUltaEIsSUFBSzdnQixFQUFJa3NDLEtBQ3RELE9BQU8xc0MsS0FBS205QyxjQUFjWSwyQ0FBMkM3OUMsRUFBR21oQixHQUFHSSxNQUFNdmhCLElBQzdFLElBQUssTUFBTU0sS0FBS04sRUFBR00sRUFBRWlILE9BQU84Z0IsU0FBU3JvQixJQUNqQyxNQUFNMGEsRUFBSXlHLEVBQUU5WCxJQUFJckosR0FDaEIsR0FBSSxPQUFTMGEsRUFBRyxPQUNoQixJQUFJQyxFQUFJSCxFQUFFblIsSUFBSXJKLElBQU02aEMsR0FBVXJGLFFBQzlCN2hCLEVBQUlyYSxFQUFFb3ZDLGlCQUFpQmgxQixFQUFHQyxHQUFJSCxFQUFFN1EsSUFBSTNKLEVBQUcyYSxHQUN2QyxNQUFNM1QsR0FBS21ULEVBQUU5USxJQUFJL0ksRUFBRTh1QyxVQUFZNUMsTUFBNEI5Z0MsSUFBSTFMLEdBQy9EbWEsRUFBSUEsRUFBRWlsQixPQUFPOStCLEVBQUU4dUMsUUFBU3BvQyxFQUMzQixHQUNKLElBQUd1YSxNQUFLLEtBQ0wsTUFBTTdHLEVBQUksR0FBSUMsRUFBSVIsRUFBRThsQixxQkFHUixLQUFNdGxCLEVBQUUybEIsV0FBYSxDQUM3QixNQUFNbm1CLEVBQUlRLEVBQUUwbEIsVUFBV3I1QixFQUFJbVQsRUFBRWxULElBQUtHLEVBQUkrUyxFQUFFdFUsTUFBTzVDLEVBQUlzcEMsS0FDbkRubEMsRUFBRWloQixTQUFTcm9CLElBQ1AsSUFBS00sRUFBRW1KLElBQUl6SixHQUFJLENBQ1gsTUFBTW1hLEVBQUkrekIsR0FBbUMvc0IsRUFBRTlYLElBQUlySixHQUFJd2EsRUFBRW5SLElBQUlySixJQUM3RCxPQUFTbWEsR0FBS2xYLEVBQUUwRyxJQUFJM0osRUFBR21hLEdBQUk3WixFQUFJQSxFQUFFb0wsSUFBSTFMLEVBQ3pDLENBQ0gsSUFBSTBhLEVBQUVwWSxLQUFLeEMsS0FBS285QyxxQkFBcUJZLGFBQWE5OUMsRUFBR2dILEVBQUcvRCxHQUM3RCxDQUNBLE9BQU95NkIsR0FBbUJTLFFBQVF6akIsRUFDckMsSUFBRzZHLE1BQUssSUFBTy9HLEdBQ3BCLENBSU8seUNBQUF1akMsQ0FBMEMvOUMsRUFBR21oQixHQUNoRCxPQUFPcmhCLEtBQUtrOUMsb0JBQW9CbkMsV0FBVzc2QyxFQUFHbWhCLEdBQUdJLE1BQU1KLEdBQUtyaEIsS0FBSzg5QywyQkFBMkI1OUMsRUFBR21oQixJQUNuRyxDQU9PLHlCQUFBNjhCLENBQTBCaCtDLEVBQUdtaEIsRUFBRzNHLEdBS25DLE9BQU8sU0FBcUN4YSxHQUN4QyxPQUFPbzhCLEdBQVlTLGNBQWM3OEIsRUFBRXE4QixPQUFTLE9BQVNyOEIsRUFBRXk4QixpQkFBbUIsSUFBTXo4QixFQUFFbXBDLFFBQVE1b0MsTUFDOUYsQ0FGTyxDQUVMNGdCLEdBQUtyaEIsS0FBS20rQyxrQ0FBa0NqK0MsRUFBR21oQixFQUFFa2IsTUFweUwzRCxTQUEwQ3I4QixHQUN0QyxPQUFPLE9BQVNBLEVBQUV5OEIsZUFDdEIsQ0FreUxtRXloQixDQUFpQy84QixHQUFLcmhCLEtBQUtxK0MseUNBQXlDbitDLEVBQUdtaEIsRUFBRzNHLEdBQUsxYSxLQUFLcytDLG9DQUFvQ3ArQyxFQUFHbWhCLEVBQUczRyxFQUM3TSxDQWVPLGdCQUFBNmpDLENBQWlCcitDLEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQzdCLE9BQU9yYSxLQUFLazlDLG9CQUFvQnNCLDBCQUEwQnQrQyxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUFHb0gsTUFBTWpoQixJQUN4RSxNQUFNb2EsRUFBSVAsRUFBSTdaLEVBQUUwakIsS0FBTyxFQUFJbGtCLEtBQUtvOUMscUJBQXFCcUIsOEJBQThCditDLEVBQUdtaEIsRUFBRzNHLEVBQUUyaUIsZUFBZ0JoakIsRUFBSTdaLEVBQUUwakIsTUFBUTBaLEdBQW1CbDRCLFFBQVE2bUMsTUFLeEksSUFBSTF4QixHQUFLLEVBQUczVCxFQUFJMUcsRUFDNUIsT0FBT29hLEVBQUU2RyxNQUFNSixHQUFLdWMsR0FBbUJyVixRQUFRbEgsR0FBRyxDQUFFQSxFQUFHM0csS0FBT0csRUFBSUgsRUFBRTJpQixpQkFBbUJ4aUIsRUFBSUgsRUFBRTJpQixnQkFDN0Y3OEIsRUFBRStJLElBQUk4WCxHQUFLdWMsR0FBbUJsNEIsVUFBWTFGLEtBQUtrOUMsb0JBQW9CTCxTQUFTMzhDLEVBQUdtaEIsR0FBR0ksTUFBTXZoQixJQUNwRmdILEVBQUlBLEVBQUVvNEIsT0FBT2plLEVBQUduaEIsRUFDbkIsT0FBTXVoQixNQUFLLElBQU96aEIsS0FBSzA5QyxpQkFBaUJ4OUMsRUFBR21oQixFQUFHN2dCLEtBQUtpaEIsTUFBSyxJQUFPemhCLEtBQUsyOUMsYUFBYXo5QyxFQUFHZ0gsRUFBR21hLEVBQUdxckIsUUFBOEJqckIsTUFBTXZoQixJQUFLLENBQ2hJb3ZDLFFBQVN6MEIsRUFDVDJoQyxRQUFTblEsR0FBbURuc0MsUUFFbkUsR0FDTCxDQUNBLGlDQUFBaStDLENBQWtDaitDLEVBQUdtaEIsR0FFakMsT0FBT3JoQixLQUFLczlDLFlBQVlwOUMsRUFBRyxJQUFJbzhCLEdBQVlqYixJQUFJSSxNQUFNdmhCLElBQ2pELElBQUltaEIsRUFBSStxQixLQUNSLE9BQU9sc0MsRUFBRXFuQyxvQkFBc0JsbUIsRUFBSUEsRUFBRWllLE9BQU9wL0IsRUFBRWlILElBQUtqSCxJQUFLbWhCLENBQzNELEdBQ0wsQ0FDQSx3Q0FBQWc5QixDQUF5Q24rQyxFQUFHbWhCLEVBQUczRyxHQUMzQyxNQUFNTCxFQUFJZ0gsRUFBRXNiLGdCQUNaLElBQUluOEIsRUFBSTRyQyxLQUNSLE9BQU9wc0MsS0FBS3E5QyxhQUFhdkMscUJBQXFCNTZDLEVBQUdtYSxHQUFHb0gsTUFBTTdHLEdBQUtnakIsR0FBbUJyVixRQUFRM04sR0FBSUEsSUFDMUYsTUFBTUMsRUFBSSxTQUEyQzNhLEVBQUdtaEIsR0FDcEQsT0FBTyxJQUFJcXBCLEdBQW9CcnBCLEVBQ1YsS0FBTW5oQixFQUFFeXFDLGdCQUFnQmp6QixRQUFTeFgsRUFBRW1wQyxRQUFRM3hCLFFBQVN4WCxFQUFFaTdCLE1BQU9qN0IsRUFBRTBxQyxVQUFXMXFDLEVBQUVpcUMsUUFBU2pxQyxFQUFFa3FDLE1BQ2hILENBSFUsQ0FHUi9vQixFQUFHekcsRUFBRXNnQixNQUFNN2dCLElBQ2IsT0FBT3JhLEtBQUtzK0Msb0NBQW9DcCtDLEVBQUcyYSxFQUFHSCxHQUFHK0csTUFBTXZoQixJQUMzREEsRUFBRXFvQixTQUFRLENBQUVyb0IsRUFBR21oQixLQUNYN2dCLEVBQUlBLEVBQUU4K0IsT0FBT3AvQixFQUFHbWhCLEVBQ25CLEdBQ0osR0FDSixJQUFHSSxNQUFLLElBQU9qaEIsS0FDcEIsQ0FDQSxtQ0FBQTg5QyxDQUFvQ3ArQyxFQUFHbWhCLEVBQUczRyxHQUV0QyxJQUFJTCxFQUNKLE9BQU9yYSxLQUFLbzlDLHFCQUFxQnNCLHlCQUF5QngrQyxFQUFHbWhCLEVBQUVrYixLQUFNN2hCLEVBQUUyaUIsZ0JBQWdCNWIsTUFBTWpoQixJQUFNNlosRUFBSTdaLEVBQ3ZHUixLQUFLazlDLG9CQUFvQmdCLDBCQUEwQmgrQyxFQUFHbWhCLEVBQUczRyxFQUFHTCxNQUFNb0gsTUFBTXZoQixJQUdwRW1hLEVBQUVrTyxTQUFRLENBQUVsSCxFQUFHM0csS0FDWCxNQUFNTCxFQUFJSyxFQUFFdTFCLFNBQ1osT0FBUy92QyxFQUFFcUosSUFBSThRLEtBQU9uYSxFQUFJQSxFQUFFby9CLE9BQU9qbEIsRUFBR2dzQixHQUFnQkksbUJBQW1CcHNCLElBQzVFLElBRUQsSUFBSUssRUFBSTB4QixLQUNSLE9BQU9sc0MsRUFBRXFvQixTQUFRLENBQUVyb0IsRUFBR00sS0FDbEIsTUFBTW9hLEVBQUlQLEVBQUU5USxJQUFJckosUUFDaEIsSUFBVzBhLEdBQUtrMEIsR0FBbUNsMEIsRUFBRW8xQixTQUFVeHZDLEVBQUd1aEMsR0FBVXJGLFFBQVM5QyxHQUFVdHNCLE9BRS9GbStCLEdBQXVCcHFCLEVBQUc3Z0IsS0FBT2thLEVBQUlBLEVBQUU0a0IsT0FBT3AvQixFQUFHTSxHQUNwRCxJQUFJa2EsQ0FDUixHQUNMLEVBa0JBLE1BQU1pa0MsR0FDTixXQUFBaDdDLENBQVl6RCxHQUNSRixLQUFLeXRDLFdBQWF2dEMsRUFBR0YsS0FBSzQrQyxHQUFLLElBQUl6MUMsSUFBS25KLEtBQUs2K0MsR0FBSyxJQUFJMTFDLEdBQzFELENBQ0EsaUJBQUEyMUMsQ0FBa0I1K0MsRUFBR21oQixHQUNqQixPQUFPdWMsR0FBbUJsNEIsUUFBUTFGLEtBQUs0K0MsR0FBR3IxQyxJQUFJOFgsR0FDbEQsQ0FDQSxrQkFBQTA5QixDQUFtQjcrQyxFQUFHbWhCLEdBQ2xCLE9BQU9yaEIsS0FBSzQrQyxHQUFHLzBDLElBQUl3WCxFQUFFbUssR0FFckIsU0FBc0N0ckIsR0FDbEMsTUFBTyxDQUNIc3JCLEdBQUl0ckIsRUFBRXNyQixHQUNOL1ksUUFBU3ZTLEVBQUV1UyxRQUNYOHpCLFdBQVl3USxHQUFzQjcyQyxFQUFFcW1DLFlBRTVDLENBTkEsQ0FNRWxsQixJQUFLdWMsR0FBbUJsNEIsU0FDOUIsQ0FDQSxhQUFBczVDLENBQWM5K0MsRUFBR21oQixHQUNiLE9BQU91YyxHQUFtQmw0QixRQUFRMUYsS0FBSzYrQyxHQUFHdDFDLElBQUk4WCxHQUNsRCxDQUNBLGNBQUE0OUIsQ0FBZS8rQyxFQUFHbWhCLEdBQ2QsT0FBT3JoQixLQUFLNitDLEdBQUdoMUMsSUFBSXdYLEVBQUV2ZCxLQUFNLFNBQXVDNUQsR0FDOUQsTUFBTyxDQUNINEQsS0FBTTVELEVBQUU0RCxLQUNSbzdDLE1BQU96RixHQUEyQnY1QyxFQUFFaS9DLGNBQ3BDaGlCLFNBQVU0WixHQUFzQjcyQyxFQUFFaTlCLFVBRTFDLENBTjJCLENBTXpCOWIsSUFBS3VjLEdBQW1CbDRCLFNBQzlCLEVBcUJBLE1BQU0wNUMsR0FDTixXQUFBejdDLEdBR0kzRCxLQUFLcS9DLFNBQVcsSUFBSW5nQixHQUFVNUMsR0FBWXJCLFlBQWFqN0IsS0FBS3MvQyxHQUFLLElBQUluMkMsR0FDekUsQ0FDQSxVQUFBbzBDLENBQVdyOUMsRUFBR21oQixHQUNWLE9BQU91YyxHQUFtQmw0QixRQUFRMUYsS0FBS3EvQyxTQUFTOTFDLElBQUk4WCxHQUN4RCxDQUNBLFdBQUF3OEIsQ0FBWTM5QyxFQUFHbWhCLEdBQ1gsTUFBTTNHLEVBQUk2eEIsS0FDVixPQUFPM08sR0FBbUJyVixRQUFRbEgsR0FBSUEsR0FBS3JoQixLQUFLdTlDLFdBQVdyOUMsRUFBR21oQixHQUFHSSxNQUFNdmhCLElBQ25FLE9BQVNBLEdBQUt3YSxFQUFFN1EsSUFBSXdYLEVBQUduaEIsRUFDMUIsTUFBS3VoQixNQUFLLElBQU8vRyxHQUN0QixDQUNBLFlBQUFzakMsQ0FBYTk5QyxFQUFHbWhCLEVBQUczRyxHQUNmLE9BQU9BLEVBQUU2TixTQUFRLENBQUU3TixFQUFHTCxLQUNsQnJhLEtBQUt1L0MsR0FBR3IvQyxFQUFHbWhCLEVBQUdoSCxFQUNqQixJQUFJdWpCLEdBQW1CbDRCLFNBQzVCLENBQ0Esd0JBQUE4NUMsQ0FBeUJ0L0MsRUFBR21oQixFQUFHM0csR0FDM0IsTUFBTUwsRUFBSXJhLEtBQUtzL0MsR0FBRy8xQyxJQUFJbVIsR0FDdEIsWUFBTyxJQUFXTCxJQUFNQSxFQUFFa08sU0FBU3JvQixHQUFLRixLQUFLcS9DLFNBQVdyL0MsS0FBS3EvQyxTQUFTNWYsT0FBT3YvQixLQUM3RUYsS0FBS3MvQyxHQUFHMTBDLE9BQU84UCxJQUFLa2pCLEdBQW1CbDRCLFNBQzNDLENBQ0Esd0JBQUFnNUMsQ0FBeUJ4K0MsRUFBR21oQixFQUFHM0csR0FDM0IsTUFBTUwsRUFBSWt5QixLQUEyQi9yQyxFQUFJNmdCLEVBQUU1Z0IsT0FBUyxFQUFHbWEsRUFBSSxJQUFJMGhCLEdBQVlqYixFQUFFNlosTUFBTSxLQUFNcmdCLEVBQUk3YSxLQUFLcS9DLFNBQVNuZixnQkFBZ0J0bEIsR0FDM0gsS0FBTUMsRUFBRTJsQixXQUFhLENBQ2pCLE1BQU10Z0MsRUFBSTJhLEVBQUUwbEIsVUFBVXg2QixNQUFPNlUsRUFBSTFhLEVBQUUrdkMsU0FDbkMsSUFBSzV1QixFQUFFcWEsV0FBVzlnQixFQUFFMmhCLE1BQU8sTUFFZjNoQixFQUFFMmhCLEtBQUs5N0IsU0FBV0QsR0FBTU4sRUFBRW05QixlQUFpQjNpQixHQUFLTCxFQUFFeFEsSUFBSTNKLEVBQUUrdkMsU0FBVS92QyxFQUNsRixDQUNBLE9BQU8wOUIsR0FBbUJsNEIsUUFBUTJVLEVBQ3RDLENBQ0EsNkJBQUFva0MsQ0FBOEJ2K0MsRUFBR21oQixFQUFHM0csRUFBR0wsR0FDbkMsSUFBSTdaLEVBQUksSUFBSTArQixJQUFVLENBQUVoL0IsRUFBR21oQixJQUFNbmhCLEVBQUltaEIsSUFDckMsTUFBTXpHLEVBQUk1YSxLQUFLcS9DLFNBQVNyZixjQUN4QixLQUFNcGxCLEVBQUU0bEIsV0FBYSxDQUNqQixNQUFNdGdDLEVBQUkwYSxFQUFFMmxCLFVBQVV4NkIsTUFDdEIsR0FBSTdGLEVBQUUrdkMsU0FBU3BULHVCQUF5QnhiLEdBQUtuaEIsRUFBRW05QixlQUFpQjNpQixFQUFHLENBQy9ELElBQUkyRyxFQUFJN2dCLEVBQUUrSSxJQUFJckosRUFBRW05QixnQkFDaEIsT0FBU2hjLElBQU1BLEVBQUlrckIsS0FBMkIvckMsRUFBSUEsRUFBRTgrQixPQUFPcC9CLEVBQUVtOUIsZUFBZ0JoYyxJQUM3RUEsRUFBRXhYLElBQUkzSixFQUFFK3ZDLFNBQVUvdkMsRUFDdEIsQ0FDSixDQUNBLE1BQU0yYSxFQUFJMHhCLEtBQTJCcmxDLEVBQUkxRyxFQUFFdy9CLGNBQzNDLEtBQU05NEIsRUFBRXM1QixZQUNBdDVCLEVBQUVxNUIsVUFBVXg2QixNQUFNd2lCLFNBQVEsQ0FBRXJvQixFQUFHbWhCLElBQU14RyxFQUFFaFIsSUFBSTNKLEVBQUdtaEIsT0FBTXhHLEVBQUVxSixRQUFVN0osTUFFeEUsT0FBT3VqQixHQUFtQmw0QixRQUFRbVYsRUFDdEMsQ0FDQSxFQUFBMGtDLENBQUdyL0MsRUFBR21oQixFQUFHM0csR0FFTCxNQUFNTCxFQUFJcmEsS0FBS3EvQyxTQUFTOTFDLElBQUltUixFQUFFdlQsS0FDOUIsR0FBSSxPQUFTa1QsRUFBRyxDQUNaLE1BQU1uYSxFQUFJRixLQUFLcy9DLEdBQUcvMUMsSUFBSThRLEVBQUVnakIsZ0JBQWdCenlCLE9BQU84UCxFQUFFdlQsS0FDakRuSCxLQUFLcy9DLEdBQUd6MUMsSUFBSXdRLEVBQUVnakIsZUFBZ0JuOUIsRUFDbEMsQ0FDQUYsS0FBS3EvQyxTQUFXci9DLEtBQUtxL0MsU0FBUy9mLE9BQU81a0IsRUFBRXZULElBQUssSUFBSTRvQyxHQUFRMXVCLEVBQUczRyxJQUUzRCxJQUFJbGEsRUFBSVIsS0FBS3MvQyxHQUFHLzFDLElBQUk4WCxRQUNwQixJQUFXN2dCLElBQU1BLEVBQUlrc0MsS0FBNEIxc0MsS0FBS3MvQyxHQUFHejFDLElBQUl3WCxFQUFHN2dCLElBQUtSLEtBQUtzL0MsR0FBR3oxQyxJQUFJd1gsRUFBRzdnQixFQUFFb0wsSUFBSThPLEVBQUV2VCxLQUNoRyxFQWlDQSxNQUFNczRDLEdBQ04sV0FBQTk3QyxHQUVJM0QsS0FBSzAvQyxHQUFLLElBQUlwZSxHQUFVcWUsR0FBdUJDLElBRS9DNS9DLEtBQUs2L0MsR0FBSyxJQUFJdmUsR0FBVXFlLEdBQXVCRyxHQUNuRCxDQUNvRSxPQUFBcmtCLEdBQ2hFLE9BQU96N0IsS0FBSzAvQyxHQUFHamtCLFNBQ25CLENBQ3VFLFlBQUFza0IsQ0FBYTcvQyxFQUFHbWhCLEdBQ25GLE1BQU0zRyxFQUFJLElBQUlpbEMsR0FBdUJ6L0MsRUFBR21oQixHQUN4Q3JoQixLQUFLMC9DLEdBQUsxL0MsS0FBSzAvQyxHQUFHOXpDLElBQUk4TyxHQUFJMWEsS0FBSzYvQyxHQUFLNy9DLEtBQUs2L0MsR0FBR2owQyxJQUFJOE8sRUFDcEQsQ0FDc0UsRUFBQXNsQyxDQUFHOS9DLEVBQUdtaEIsR0FDeEVuaEIsRUFBRXFvQixTQUFTcm9CLEdBQUtGLEtBQUsrL0MsYUFBYTcvQyxFQUFHbWhCLElBQ3pDLENBSU8sZUFBQTQrQixDQUFnQi8vQyxFQUFHbWhCLEdBQ3RCcmhCLEtBQUtrZ0QsR0FBRyxJQUFJUCxHQUF1QnovQyxFQUFHbWhCLEdBQzFDLENBQ0EsRUFBQTgrQixDQUFHamdELEVBQUdtaEIsR0FDRm5oQixFQUFFcW9CLFNBQVNyb0IsR0FBS0YsS0FBS2lnRCxnQkFBZ0IvL0MsRUFBR21oQixJQUM1QyxDQUlPLEVBQUErK0IsQ0FBR2xnRCxHQUNOLE1BQU1taEIsRUFBSSxJQUFJaWIsR0FBWSxJQUFJVCxHQUFhLEtBQU1uaEIsRUFBSSxJQUFJaWxDLEdBQXVCdCtCLEVBQUduaEIsR0FBSW1hLEVBQUksSUFBSXNsQyxHQUF1QnQrQixFQUFHbmhCLEVBQUksR0FBSU0sRUFBSSxHQUNySSxPQUFPUixLQUFLNi9DLEdBQUdwZSxlQUFlLENBQUUvbUIsRUFBR0wsSUFBTW5hLElBQ3JDRixLQUFLa2dELEdBQUdoZ0QsR0FBSU0sRUFBRWdDLEtBQUt0QyxFQUFFaUgsSUFDeEIsSUFBSTNHLENBQ1QsQ0FDQSxFQUFBNi9DLEdBQ0lyZ0QsS0FBSzAvQyxHQUFHbjNCLFNBQVNyb0IsR0FBS0YsS0FBS2tnRCxHQUFHaGdELElBQ2xDLENBQ0EsRUFBQWdnRCxDQUFHaGdELEdBQ0NGLEtBQUswL0MsR0FBSzEvQyxLQUFLMC9DLEdBQUc5MEMsT0FBTzFLLEdBQUlGLEtBQUs2L0MsR0FBSzcvQyxLQUFLNi9DLEdBQUdqMUMsT0FBTzFLLEVBQzFELENBQ0EsRUFBQW9nRCxDQUFHcGdELEdBQ0MsTUFBTW1oQixFQUFJLElBQUlpYixHQUFZLElBQUlULEdBQWEsS0FBTW5oQixFQUFJLElBQUlpbEMsR0FBdUJ0K0IsRUFBR25oQixHQUFJbWEsRUFBSSxJQUFJc2xDLEdBQXVCdCtCLEVBQUduaEIsRUFBSSxHQUM3SCxJQUFJTSxFQUFJa3NDLEtBQ1IsT0FBTzFzQyxLQUFLNi9DLEdBQUdwZSxlQUFlLENBQUUvbUIsRUFBR0wsSUFBTW5hLElBQ3JDTSxFQUFJQSxFQUFFb0wsSUFBSTFMLEVBQUVpSCxJQUNmLElBQUkzRyxDQUNULENBQ0EsV0FBQSsvQyxDQUFZcmdELEdBQ1IsTUFBTW1oQixFQUFJLElBQUlzK0IsR0FBdUJ6L0MsRUFBRyxHQUFJd2EsRUFBSTFhLEtBQUswL0MsR0FBRy9kLGtCQUFrQnRnQixHQUMxRSxPQUFPLE9BQVMzRyxHQUFLeGEsRUFBRXMxQixRQUFROWEsRUFBRXZULElBQ3JDLEVBR0osTUFBTXc0QyxHQUNGLFdBQUFoOEMsQ0FBWXpELEVBQUdtaEIsR0FDWHJoQixLQUFLbUgsSUFBTWpILEVBQUdGLEtBQUt3Z0QsR0FBS24vQixDQUM1QixDQUNvQyxTQUFPdStCLENBQUcxL0MsRUFBR21oQixHQUM3QyxPQUFPaWIsR0FBWXJCLFdBQVcvNkIsRUFBRWlILElBQUtrYSxFQUFFbGEsTUFBUXN5QixHQUE4QnY1QixFQUFFc2dELEdBQUluL0IsRUFBRW0vQixHQUN6RixDQUNvQyxTQUFPVixDQUFHNS9DLEVBQUdtaEIsR0FDN0MsT0FBT29ZLEdBQThCdjVCLEVBQUVzZ0QsR0FBSW4vQixFQUFFbS9CLEtBQU9sa0IsR0FBWXJCLFdBQVcvNkIsRUFBRWlILElBQUtrYSxFQUFFbGEsSUFDeEYsRUFrQkEsTUFBTXM1QyxHQUNOLFdBQUE5OEMsQ0FBWXpELEVBQUdtaEIsR0FDWHJoQixLQUFLcTlDLGFBQWVuOUMsRUFBR0YsS0FBSzBnRCxrQkFBb0JyL0IsRUFLaERyaEIsS0FBS205QyxjQUFnQixHQUVyQm45QyxLQUFLMmdELEdBQUssRUFFVjNnRCxLQUFLNGdELEdBQUssSUFBSXRmLEdBQVVxZSxHQUF1QkMsR0FDbkQsQ0FDQSxVQUFBaUIsQ0FBVzNnRCxHQUNQLE9BQU8wOUIsR0FBbUJsNEIsUUFBUSxJQUFNMUYsS0FBS205QyxjQUFjMThDLE9BQy9ELENBQ0EsZ0JBQUFxZ0QsQ0FBaUI1Z0QsRUFBR21oQixFQUFHM0csRUFBR0wsR0FDdEIsTUFBTTdaLEVBQUlSLEtBQUsyZ0QsR0FDZjNnRCxLQUFLMmdELEtBQU0zZ0QsS0FBS205QyxjQUFjMThDLE9BQVMsR0FBS1QsS0FBS205QyxjQUFjbjlDLEtBQUttOUMsY0FBYzE4QyxPQUFTLEdBQzNGLE1BQU1tYSxFQUFJLElBQUl5MEIsR0FBYzd1QyxFQUFHNmdCLEVBQUczRyxFQUFHTCxHQUNyQ3JhLEtBQUttOUMsY0FBYzM2QyxLQUFLb1ksR0FFeEIsSUFBSyxNQUFNeUcsS0FBS2hILEVBQUdyYSxLQUFLNGdELEdBQUs1Z0QsS0FBSzRnRCxHQUFHaDFDLElBQUksSUFBSSt6QyxHQUF1QnQrQixFQUFFbGEsSUFBSzNHLElBQzNFUixLQUFLcTlDLGFBQWF4QywyQkFBMkIzNkMsRUFBR21oQixFQUFFbGEsSUFBSW8xQixLQUFLakIsV0FDM0QsT0FBT3NDLEdBQW1CbDRCLFFBQVFrVixFQUN0QyxDQUNBLG1CQUFBbW1DLENBQW9CN2dELEVBQUdtaEIsR0FDbkIsT0FBT3VjLEdBQW1CbDRCLFFBQVExRixLQUFLZ2hELEdBQUczL0IsR0FDOUMsQ0FDQSxnQ0FBQTQvQixDQUFpQy9nRCxFQUFHbWhCLEdBQ2hDLE1BQU0zRyxFQUFJMkcsRUFBSSxFQUFHaEgsRUFBSXJhLEtBQUtraEQsR0FBR3htQyxHQUFJbGEsRUFBSTZaLEVBQUksRUFBSSxFQUFJQSxFQUd6QyxPQUFPdWpCLEdBQW1CbDRCLFFBQVExRixLQUFLbTlDLGNBQWMxOEMsT0FBU0QsRUFBSVIsS0FBS205QyxjQUFjMzhDLEdBQUssS0FDdEcsQ0FDQSwrQkFBQTJnRCxHQUNJLE9BQU92akIsR0FBbUJsNEIsUUFBUSxJQUFNMUYsS0FBS205QyxjQUFjMThDLFFBQVUsRUFBSVQsS0FBSzJnRCxHQUFLLEVBQ3ZGLENBQ0EscUJBQUFTLENBQXNCbGhELEdBQ2xCLE9BQU8wOUIsR0FBbUJsNEIsUUFBUTFGLEtBQUttOUMsY0FBY3psQyxRQUN6RCxDQUNBLHlDQUFBMnBDLENBQTBDbmhELEVBQUdtaEIsR0FDekMsTUFBTTNHLEVBQUksSUFBSWlsQyxHQUF1QnQrQixFQUFHLEdBQUloSCxFQUFJLElBQUlzbEMsR0FBdUJ0K0IsRUFBR3NCLE9BQU8yK0IsbUJBQW9COWdELEVBQUksR0FDN0csT0FBT1IsS0FBSzRnRCxHQUFHbmYsZUFBZSxDQUFFL21CLEVBQUdMLElBQU1uYSxJQUNyQyxNQUFNbWhCLEVBQUlyaEIsS0FBS2doRCxHQUFHOWdELEVBQUVzZ0QsSUFDcEJoZ0QsRUFBRWdDLEtBQUs2ZSxFQUNWLElBQUl1YyxHQUFtQmw0QixRQUFRbEYsRUFDcEMsQ0FDQSwwQ0FBQXU5QyxDQUEyQzc5QyxFQUFHbWhCLEdBQzFDLElBQUkzRyxFQUFJLElBQUk0bUIsR0FBVTdILElBQ3RCLE9BQU9wWSxFQUFFa0gsU0FBU3JvQixJQUNkLE1BQU1taEIsRUFBSSxJQUFJcytCLEdBQXVCei9DLEVBQUcsR0FBSW1hLEVBQUksSUFBSXNsQyxHQUF1QnovQyxFQUFHeWlCLE9BQU8yK0IsbUJBQ3JGdGhELEtBQUs0Z0QsR0FBR25mLGVBQWUsQ0FBRXBnQixFQUFHaEgsSUFBTW5hLElBQzlCd2EsRUFBSUEsRUFBRTlPLElBQUkxTCxFQUFFc2dELEdBQ2YsR0FDSixJQUFJNWlCLEdBQW1CbDRCLFFBQVExRixLQUFLdWhELEdBQUc3bUMsR0FDNUMsQ0FDQSxtQ0FBQThtQyxDQUFvQ3RoRCxFQUFHbWhCLEdBR25DLE1BQU0zRyxFQUFJMkcsRUFBRWtiLEtBQU1saUIsRUFBSUssRUFBRWphLE9BQVMsRUFLakMsSUFBSUQsRUFBSWthLEVBQ1I0aEIsR0FBWVMsY0FBY3Y4QixLQUFPQSxFQUFJQSxFQUFFMDZCLE1BQU0sS0FDN0MsTUFBTXRnQixFQUFJLElBQUkra0MsR0FBdUIsSUFBSXJqQixHQUFZOTdCLEdBQUksR0FHakQsSUFBSXFhLEVBQUksSUFBSXltQixHQUFVN0gsSUFDOUIsT0FBT3o1QixLQUFLNGdELEdBQUdsZixjQUFjeGhDLElBQ3pCLE1BQU1taEIsRUFBSW5oQixFQUFFaUgsSUFBSW8xQixLQUNoQixRQUFTN2hCLEVBQUVnaEIsV0FBV3JhLEtBTXRCQSxFQUFFNWdCLFNBQVc0WixJQUFNUSxFQUFJQSxFQUFFalAsSUFBSTFMLEVBQUVzZ0QsTUFBTSxFQUN4QyxHQUFHNWxDLEdBQUlnakIsR0FBbUJsNEIsUUFBUTFGLEtBQUt1aEQsR0FBRzFtQyxHQUMvQyxDQUNBLEVBQUEwbUMsQ0FBR3JoRCxHQUdDLE1BQU1taEIsRUFBSSxHQUNWLE9BQU9uaEIsRUFBRXFvQixTQUFTcm9CLElBQ2QsTUFBTXdhLEVBQUkxYSxLQUFLZ2hELEdBQUc5Z0QsR0FDbEIsT0FBU3dhLEdBQUsyRyxFQUFFN2UsS0FBS2tZLEVBQ3hCLElBQUkyRyxDQUNULENBQ0EsbUJBQUFvZ0MsQ0FBb0J2aEQsRUFBR21oQixHQUNuQjhVLEdBQXFCLElBQU1uMkIsS0FBSzBoRCxHQUFHcmdDLEVBQUVpdUIsUUFBUyxZQUFhdHZDLEtBQUttOUMsY0FBY2hyQyxRQUM5RSxJQUFJdUksRUFBSTFhLEtBQUs0Z0QsR0FDYixPQUFPaGpCLEdBQW1CclYsUUFBUWxILEVBQUVvdUIsV0FBWXAxQixJQUM1QyxNQUFNN1osRUFBSSxJQUFJbS9DLEdBQXVCdGxDLEVBQUVsVCxJQUFLa2EsRUFBRWl1QixTQUM5QyxPQUFPNTBCLEVBQUlBLEVBQUU5UCxPQUFPcEssR0FBSVIsS0FBSzBnRCxrQkFBa0JpQix3QkFBd0J6aEQsRUFBR21hLEVBQUVsVCxJQUMvRSxJQUFHc2EsTUFBSyxLQUNMemhCLEtBQUs0Z0QsR0FBS2xtQyxDQUNiLEdBQ0wsQ0FDQSxFQUFBa25DLENBQUcxaEQsR0FFSCxDQUNBLFdBQUFxZ0QsQ0FBWXJnRCxFQUFHbWhCLEdBQ1gsTUFBTTNHLEVBQUksSUFBSWlsQyxHQUF1QnQrQixFQUFHLEdBQUloSCxFQUFJcmEsS0FBSzRnRCxHQUFHamYsa0JBQWtCam5CLEdBQzFFLE9BQU9rakIsR0FBbUJsNEIsUUFBUTJiLEVBQUVtVSxRQUFRbmIsR0FBS0EsRUFBRWxULEtBQ3ZELENBQ0EsdUJBQUEwNkMsQ0FBd0IzaEQsR0FDcEIsT0FBT0YsS0FBS205QyxjQUFjMThDLE9BQVFtOUIsR0FBbUJsNEIsU0FDekQsQ0FRTyxFQUFBZzhDLENBQUd4aEQsRUFBR21oQixHQUNULE9BQU9yaEIsS0FBS2toRCxHQUFHaGhELEVBQ25CLENBU08sRUFBQWdoRCxDQUFHaGhELEdBQ04sT0FBSSxJQUFNRixLQUFLbTlDLGNBQWMxOEMsT0FFdEIsRUFLUVAsRUFBSUYsS0FBS205QyxjQUFjLEdBQUc3TixPQUM3QyxDQUlPLEVBQUEwUixDQUFHOWdELEdBQ04sTUFBTW1oQixFQUFJcmhCLEtBQUtraEQsR0FBR2hoRCxHQUNsQixPQUFJbWhCLEVBQUksR0FBS0EsR0FBS3JoQixLQUFLbTlDLGNBQWMxOEMsT0FBZSxLQUM3Q1QsS0FBS205QyxjQUFjOTdCLEVBQzlCLEVBdUJKLE1BQU15Z0MsR0FNRixXQUFBbitDLENBQVl6RCxHQUNSRixLQUFLK2hELEdBQUs3aEQsRUFFVkYsS0FBS2dpRCxLQUNNLElBQUk5aUIsR0FBVTVDLEdBQVlyQixZQUdyQ2o3QixLQUFLa2tCLEtBQU8sQ0FDaEIsQ0FDQSxlQUFBKzlCLENBQWdCL2hELEdBQ1pGLEtBQUtxOUMsYUFBZW45QyxDQUN4QixDQU1PLFFBQUF3OEMsQ0FBU3g4QyxFQUFHbWhCLEdBQ2YsTUFBTTNHLEVBQUkyRyxFQUFFbGEsSUFBS2tULEVBQUlyYSxLQUFLZ2lELEtBQUt6NEMsSUFBSW1SLEdBQUlsYSxFQUFJNlosRUFBSUEsRUFBRTZKLEtBQU8sRUFBR3RKLEVBQUk1YSxLQUFLK2hELEdBQUcxZ0MsR0FDdkUsT0FBT3JoQixLQUFLZ2lELEtBQU9oaUQsS0FBS2dpRCxLQUFLMWlCLE9BQU81a0IsRUFBRyxDQUNuQzlWLFNBQVV5YyxFQUFFcW1CLGNBQ1p4akIsS0FBTXRKLElBQ041YSxLQUFLa2tCLE1BQVF0SixFQUFJcGEsRUFBR1IsS0FBS3E5QyxhQUFheEMsMkJBQTJCMzZDLEVBQUd3YSxFQUFFNmhCLEtBQUtqQixVQUNuRixDQU1PLFdBQUFzaEIsQ0FBWTE4QyxHQUNmLE1BQU1taEIsRUFBSXJoQixLQUFLZ2lELEtBQUt6NEMsSUFBSXJKLEdBQ3hCbWhCLElBQU1yaEIsS0FBS2dpRCxLQUFPaGlELEtBQUtnaUQsS0FBS3ZpQixPQUFPdi9CLEdBQUlGLEtBQUtra0IsTUFBUTdDLEVBQUU2QyxLQUMxRCxDQUNBLFFBQUEyNEIsQ0FBUzM4QyxFQUFHbWhCLEdBQ1IsTUFBTTNHLEVBQUkxYSxLQUFLZ2lELEtBQUt6NEMsSUFBSThYLEdBQ3hCLE9BQU91YyxHQUFtQmw0QixRQUFRZ1YsRUFBSUEsRUFBRTlWLFNBQVM4aUMsY0FBZ0JyQixHQUFnQkksbUJBQW1CcGxCLEdBQ3hHLENBQ0EsVUFBQTA1QixDQUFXNzZDLEVBQUdtaEIsR0FDVixJQUFJM0csRUFBSXd4QixLQUNSLE9BQU83cUIsRUFBRWtILFNBQVNyb0IsSUFDZCxNQUFNbWhCLEVBQUlyaEIsS0FBS2dpRCxLQUFLejRDLElBQUlySixHQUN4QndhLEVBQUlBLEVBQUU0a0IsT0FBT3AvQixFQUFHbWhCLEVBQUlBLEVBQUV6YyxTQUFTOGlDLGNBQWdCckIsR0FBZ0JJLG1CQUFtQnZtQyxHQUNyRixJQUFJMDlCLEdBQW1CbDRCLFFBQVFnVixFQUNwQyxDQUNBLHlCQUFBd2pDLENBQTBCaCtDLEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQy9CLElBQUk3WixFQUFJMHJDLEtBR0EsTUFBTXR4QixFQUFJeUcsRUFBRWtiLEtBQU0xaEIsRUFBSSxJQUFJeWhCLEdBQVkxaEIsRUFBRXNnQixNQUFNLEtBQU1oMEIsRUFBSWxILEtBQUtnaUQsS0FBSzloQixnQkFBZ0JybEIsR0FDMUYsS0FBTTNULEVBQUVzNUIsV0FBYSxDQUNqQixNQUFPcjVCLElBQUtqSCxFQUFHNkYsT0FBUW5CLFNBQVVpVyxJQUFNM1QsRUFBRXE1QixVQUN6QyxJQUFLM2xCLEVBQUU4Z0IsV0FBV3g3QixFQUFFcThCLE1BQU8sTUFDM0JyOEIsRUFBRXE4QixLQUFLOTdCLE9BQVNtYSxFQUFFbmEsT0FBUyxHQUFNNjhCLEdBQWdDTCxHQUFxQ3BpQixHQUFJSCxJQUFNLElBQU1MLEVBQUUxUSxJQUFJa1IsRUFBRTFULE1BQVFza0MsR0FBdUJwcUIsRUFBR3hHLE1BQVFyYSxFQUFJQSxFQUFFOCtCLE9BQU96a0IsRUFBRTFULElBQUswVCxFQUFFNnNCLGVBQ2xNLENBQ0EsT0FBTzlKLEdBQW1CbDRCLFFBQVFsRixFQUN0QyxDQUNBLHlCQUFBZytDLENBQTBCdCtDLEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBRy9CNmIsSUFDSixDQUNBLEVBQUFnc0IsQ0FBR2hpRCxFQUFHbWhCLEdBQ0YsT0FBT3VjLEdBQW1CclYsUUFBUXZvQixLQUFLZ2lELE1BQU85aEQsR0FBS21oQixFQUFFbmhCLElBQ3pELENBQ0EsZUFBQWlpRCxDQUFnQmppRCxHQUdaLE9BQU8sSUFBSWtpRCxHQUEyQ3BpRCxLQUMxRCxDQUNBLE9BQUFxaUQsQ0FBUW5pRCxHQUNKLE9BQU8wOUIsR0FBbUJsNEIsUUFBUTFGLEtBQUtra0IsS0FDM0MsRUFhSixNQUFNaytCLFdBQW1EN0YsR0FDckQsV0FBQTU0QyxDQUFZekQsR0FDUjBELFFBQVM1RCxLQUFLc2lELEdBQUtwaUQsQ0FDdkIsQ0FDQSxZQUFBaW1DLENBQWFqbUMsR0FDVCxNQUFNbWhCLEVBQUksR0FDVixPQUFPcmhCLEtBQUt3OEMsUUFBUWowQixTQUFRLENBQUU3TixFQUFHTCxLQUM3QkEsRUFBRWl0QixrQkFBb0JqbUIsRUFBRTdlLEtBQUt4QyxLQUFLc2lELEdBQUc1RixTQUFTeDhDLEVBQUdtYSxJQUFNcmEsS0FBS3NpRCxHQUFHMUYsWUFBWWxpQyxFQUM5RSxJQUFJa2pCLEdBQW1CUyxRQUFRaGQsRUFDcEMsQ0FDQSxZQUFBeTdCLENBQWE1OEMsRUFBR21oQixHQUNaLE9BQU9yaEIsS0FBS3NpRCxHQUFHekYsU0FBUzM4QyxFQUFHbWhCLEVBQy9CLENBQ0EsZUFBQTA3QixDQUFnQjc4QyxFQUFHbWhCLEdBQ2YsT0FBT3JoQixLQUFLc2lELEdBQUd2SCxXQUFXNzZDLEVBQUdtaEIsRUFDakMsRUFrQkEsTUFBTWtoQyxHQUNOLFdBQUE1K0MsQ0FBWXpELEdBQ1JGLEtBQUt3aUQsWUFBY3RpRCxFQUluQkYsS0FBS3lpRCxHQUFLLElBQUk3VyxJQUFXMXJDLEdBQUtxcUMsR0FBeUJycUMsSUFBS3NxQyxJQUU1RHhxQyxLQUFLMGlELDBCQUE0Qm5vQixHQUFnQjVLLE1BRWpEM3ZCLEtBQUsyaUQsZ0JBQWtCLEVBRXZCM2lELEtBQUs0aUQsR0FBSyxFQUtWNWlELEtBQUs2aUQsR0FBSyxJQUFJcEQsR0FBd0J6L0MsS0FBSzhpRCxZQUFjLEVBQUc5aUQsS0FBSytpRCxHQUFLNUcsR0FBNEJFLElBQ3RHLENBQ0EsYUFBQXBILENBQWMvMEMsRUFBR21oQixHQUNiLE9BQU9yaEIsS0FBS3lpRCxHQUFHbDZCLFNBQVEsQ0FBRXJvQixFQUFHd2EsSUFBTTJHLEVBQUUzRyxLQUFNa2pCLEdBQW1CbDRCLFNBQ2pFLENBQ0EsNEJBQUFzOUMsQ0FBNkI5aUQsR0FDekIsT0FBTzA5QixHQUFtQmw0QixRQUFRMUYsS0FBSzBpRCwwQkFDM0MsQ0FDQSx3QkFBQU8sQ0FBeUIvaUQsR0FDckIsT0FBTzA5QixHQUFtQmw0QixRQUFRMUYsS0FBSzRpRCxHQUMzQyxDQUNBLGdCQUFBTSxDQUFpQmhqRCxHQUNiLE9BQU9GLEtBQUsyaUQsZ0JBQWtCM2lELEtBQUsraUQsR0FBR3RoQyxPQUFRbWMsR0FBbUJsNEIsUUFBUTFGLEtBQUsyaUQsZ0JBQ2xGLENBQ0Esa0JBQUFRLENBQW1CampELEVBQUdtaEIsRUFBRzNHLEdBQ3JCLE9BQU9BLElBQU0xYSxLQUFLMGlELDBCQUE0QmhvQyxHQUFJMkcsRUFBSXJoQixLQUFLNGlELEtBQU81aUQsS0FBSzRpRCxHQUFLdmhDLEdBQzVFdWMsR0FBbUJsNEIsU0FDdkIsQ0FDQSxFQUFBMDlDLENBQUdsakQsR0FDQ0YsS0FBS3lpRCxHQUFHNTRDLElBQUkzSixFQUFFaVAsT0FBUWpQLEdBQ3RCLE1BQU1taEIsRUFBSW5oQixFQUFFK3lDLFNBQ1o1eEIsRUFBSXJoQixLQUFLMmlELGtCQUFvQjNpRCxLQUFLK2lELEdBQUssSUFBSTVHLEdBQTRCOTZCLEdBQUlyaEIsS0FBSzJpRCxnQkFBa0J0aEMsR0FDbEduaEIsRUFBRTg0QyxlQUFpQmg1QyxLQUFLNGlELEtBQU81aUQsS0FBSzRpRCxHQUFLMWlELEVBQUU4NEMsZUFDL0MsQ0FDQSxhQUFBcUssQ0FBY25qRCxFQUFHbWhCLEdBQ2IsT0FBT3JoQixLQUFLb2pELEdBQUcvaEMsR0FBSXJoQixLQUFLOGlELGFBQWUsRUFBR2xsQixHQUFtQmw0QixTQUNqRSxDQUNBLGdCQUFBNDlDLENBQWlCcGpELEVBQUdtaEIsR0FDaEIsT0FBT3JoQixLQUFLb2pELEdBQUcvaEMsR0FBSXVjLEdBQW1CbDRCLFNBQzFDLENBQ0EsZ0JBQUE2OUMsQ0FBaUJyakQsRUFBR21oQixHQUNoQixPQUFPcmhCLEtBQUt5aUQsR0FBRzczQyxPQUFPeVcsRUFBRWxTLFFBQVNuUCxLQUFLNmlELEdBQUd6QyxHQUFHLytCLEVBQUU0eEIsVUFBV2p6QyxLQUFLOGlELGFBQWUsRUFDN0VsbEIsR0FBbUJsNEIsU0FDdkIsQ0FDQSxhQUFBODlDLENBQWN0akQsRUFBR21oQixFQUFHM0csR0FDaEIsSUFBSUwsRUFBSSxFQUNSLE1BQU03WixFQUFJLEdBQ1YsT0FBT1IsS0FBS3lpRCxHQUFHbDZCLFNBQVEsQ0FBRTNOLEVBQUdDLEtBQ3hCQSxFQUFFbStCLGdCQUFrQjMzQixHQUFLLE9BQVMzRyxFQUFFblIsSUFBSXNSLEVBQUVvNEIsWUFBY2p6QyxLQUFLeWlELEdBQUc3M0MsT0FBT2dRLEdBQUlwYSxFQUFFZ0MsS0FBS3hDLEtBQUt5akQsOEJBQThCdmpELEVBQUcyYSxFQUFFbzRCLFdBQzFINTRCLElBQ0gsSUFBSXVqQixHQUFtQlMsUUFBUTc5QixHQUFHaWhCLE1BQUssSUFBT3BILEdBQ25ELENBQ0EsY0FBQXFwQyxDQUFleGpELEdBQ1gsT0FBTzA5QixHQUFtQmw0QixRQUFRMUYsS0FBSzhpRCxZQUMzQyxDQUNBLGFBQUFhLENBQWN6akQsRUFBR21oQixHQUNiLE1BQU0zRyxFQUFJMWEsS0FBS3lpRCxHQUFHbDVDLElBQUk4WCxJQUFNLEtBQzVCLE9BQU91YyxHQUFtQmw0QixRQUFRZ1YsRUFDdEMsQ0FDQSxlQUFBa3BDLENBQWdCMWpELEVBQUdtaEIsRUFBRzNHLEdBQ2xCLE9BQU8xYSxLQUFLNmlELEdBQUc3QyxHQUFHMytCLEVBQUczRyxHQUFJa2pCLEdBQW1CbDRCLFNBQ2hELENBQ0Esa0JBQUFtK0MsQ0FBbUIzakQsRUFBR21oQixFQUFHM0csR0FDckIxYSxLQUFLNmlELEdBQUcxQyxHQUFHOStCLEVBQUczRyxHQUNkLE1BQU1MLEVBQUlyYSxLQUFLd2lELFlBQVk5QixrQkFBbUJsZ0QsRUFBSSxHQUNsRCxPQUFPNlosR0FBS2dILEVBQUVrSCxTQUFTbEgsSUFDbkI3Z0IsRUFBRWdDLEtBQUs2WCxFQUFFc25DLHdCQUF3QnpoRCxFQUFHbWhCLEdBQ3ZDLElBQUl1YyxHQUFtQlMsUUFBUTc5QixFQUNwQyxDQUNBLDZCQUFBaWpELENBQThCdmpELEVBQUdtaEIsR0FDN0IsT0FBT3JoQixLQUFLNmlELEdBQUd6QyxHQUFHLytCLEdBQUl1YyxHQUFtQmw0QixTQUM3QyxDQUNBLDBCQUFBbytDLENBQTJCNWpELEVBQUdtaEIsR0FDMUIsTUFBTTNHLEVBQUkxYSxLQUFLNmlELEdBQUd2QyxHQUFHai9CLEdBQ3JCLE9BQU91YyxHQUFtQmw0QixRQUFRZ1YsRUFDdEMsQ0FDQSxXQUFBNmxDLENBQVlyZ0QsRUFBR21oQixHQUNYLE9BQU91YyxHQUFtQmw0QixRQUFRMUYsS0FBSzZpRCxHQUFHdEMsWUFBWWwvQixHQUMxRCxFQXVCSixNQUFNMGlDLEdBT0YsV0FBQXBnRCxDQUFZekQsRUFBR21oQixHQUNYcmhCLEtBQUtna0QsR0FBSyxDQUFDLEVBQUdoa0QsS0FBS3EvQyxTQUFXLENBQUMsRUFBR3IvQyxLQUFLaWtELEdBQUssSUFBSXhsQixHQUF5QixHQUFJeitCLEtBQUtra0QsSUFBSyxFQUN2RmxrRCxLQUFLa2tELElBQUssRUFBSWxrRCxLQUFLMGdELGtCQUFvQnhnRCxFQUFFRixNQUFPQSxLQUFLbWtELEdBQUssSUFBSTVCLEdBQTRCdmlELE1BQzFGQSxLQUFLcTlDLGFBQWUsSUFBSTNDLEdBQThCMTZDLEtBQUtrOUMsb0JBQXNCLFNBQWdEaDlDLEdBQzdILE9BQU8sSUFBSTRoRCxHQUF3QzVoRCxFQUN2RCxDQUZpRixFQUU5RUEsR0FBS0YsS0FBSzBnRCxrQkFBa0IwRCxHQUFHbGtELEtBQU1GLEtBQUt5dEMsV0FBYSxJQUFJOEwsR0FBMEJsNEIsR0FDeEZyaEIsS0FBS3FrRCxHQUFLLElBQUkxRixHQUE0QjMrQyxLQUFLeXRDLFdBQ25ELENBQ0EsS0FBQTNxQixHQUNJLE9BQU9sZCxRQUFRRixTQUNuQixDQUNBLFFBQUFreUIsR0FFSSxPQUFPNTNCLEtBQUtra0QsSUFBSyxFQUFJdCtDLFFBQVFGLFNBQ2pDLENBQ0EsV0FBSTQrQyxHQUNBLE9BQU90a0QsS0FBS2trRCxFQUNoQixDQUNBLDBCQUFBSyxHQUVBLENBQ0EsaUJBQUFDLEdBRUEsQ0FDQSxlQUFBQyxDQUFnQnZrRCxHQUdaLE9BQU9GLEtBQUtxOUMsWUFDaEIsQ0FDQSx1QkFBQXFILENBQXdCeGtELEdBQ3BCLElBQUltaEIsRUFBSXJoQixLQUFLcS9DLFNBQVNuL0MsRUFBRXExQixTQUN4QixPQUFPbFUsSUFBTUEsRUFBSSxJQUFJKzlCLEdBQXNDcC9DLEtBQUtxL0MsU0FBU24vQyxFQUFFcTFCLFNBQVdsVSxHQUN0RkEsQ0FDSixDQUNBLGdCQUFBc2pDLENBQWlCemtELEVBQUdtaEIsR0FDaEIsSUFBSTNHLEVBQUkxYSxLQUFLZ2tELEdBQUc5akQsRUFBRXExQixTQUNsQixPQUFPN2EsSUFBTUEsRUFBSSxJQUFJK2xDLEdBQThCcC9CLEVBQUdyaEIsS0FBSzBnRCxtQkFBb0IxZ0QsS0FBS2drRCxHQUFHOWpELEVBQUVxMUIsU0FBVzdhLEdBQ3BHQSxDQUNKLENBQ0EsY0FBQWtxQyxHQUNJLE9BQU81a0QsS0FBS21rRCxFQUNoQixDQUNBLHNCQUFBVSxHQUNJLE9BQU83a0QsS0FBS2s5QyxtQkFDaEIsQ0FDQSxjQUFBNEgsR0FDSSxPQUFPOWtELEtBQUtxa0QsRUFDaEIsQ0FDQSxjQUFBVSxDQUFlN2tELEVBQUdtaEIsRUFBRzNHLEdBQ2pCb2IsR0FBbUIsb0JBQXFCLHdCQUF5QjUxQixHQUNqRSxNQUFNbWEsRUFBSSxJQUFJMnFDLEdBQTRCaGxELEtBQUtpa0QsR0FBR3hpQyxRQUNsRCxPQUFPemhCLEtBQUswZ0Qsa0JBQWtCdUUsS0FBTXZxQyxFQUFFTCxHQUFHb0gsTUFBTXZoQixHQUFLRixLQUFLMGdELGtCQUFrQndFLEdBQUc3cUMsR0FBR29ILE1BQUssSUFBT3ZoQixNQUFNaStCLFlBQVk5c0IsTUFBTW5SLElBQU1tYSxFQUFFcWpCLHdCQUM3SHg5QixJQUNKLENBQ0EsRUFBQWlsRCxDQUFHamxELEVBQUdtaEIsR0FDRixPQUFPdWMsR0FBbUI5SyxHQUFHenNCLE9BQU8wRSxPQUFPL0ssS0FBS2drRCxJQUFJOTRDLEtBQUt3UCxHQUFLLElBQU1BLEVBQUU2bEMsWUFBWXJnRCxFQUFHbWhCLEtBQ3pGLEVBTUEsTUFBTTJqQyxXQUFvQ3puQixHQUMxQyxXQUFBNTVCLENBQVl6RCxHQUNSMEQsUUFBUzVELEtBQUtvbEQsc0JBQXdCbGxELENBQzFDLEVBR0osTUFBTW1sRCxHQUNGLFdBQUExaEQsQ0FBWXpELEdBQ1JGLEtBQUt3aUQsWUFBY3RpRCxFQUVuQkYsS0FBS3NsRCxHQUFLLElBQUk3RixHQUVkei9DLEtBQUt1bEQsR0FBSyxJQUNkLENBQ0EsU0FBT0MsQ0FBR3RsRCxHQUNOLE9BQU8sSUFBSW1sRCxHQUE4Qm5sRCxFQUM3QyxDQUNBLE1BQUl1bEQsR0FDQSxHQUFJemxELEtBQUt1bEQsR0FBSSxPQUFPdmxELEtBQUt1bEQsR0FDekIsTUFBTXJ2QixJQUNWLENBQ0EsWUFBQTZwQixDQUFhNy9DLEVBQUdtaEIsRUFBRzNHLEdBQ2YsT0FBTzFhLEtBQUtzbEQsR0FBR3ZGLGFBQWFybEMsRUFBRzJHLEdBQUlyaEIsS0FBS3lsRCxHQUFHNzZDLE9BQU84UCxFQUFFUixZQUFhMGpCLEdBQW1CbDRCLFNBQ3hGLENBQ0EsZUFBQXU2QyxDQUFnQi8vQyxFQUFHbWhCLEVBQUczRyxHQUNsQixPQUFPMWEsS0FBS3NsRCxHQUFHckYsZ0JBQWdCdmxDLEVBQUcyRyxHQUFJcmhCLEtBQUt5bEQsR0FBRzc1QyxJQUFJOE8sRUFBRVIsWUFBYTBqQixHQUFtQmw0QixTQUN4RixDQUNBLHVCQUFBaThDLENBQXdCemhELEVBQUdtaEIsR0FDdkIsT0FBT3JoQixLQUFLeWxELEdBQUc3NUMsSUFBSXlWLEVBQUVuSCxZQUFhMGpCLEdBQW1CbDRCLFNBQ3pELENBQ0EsWUFBQTB2QyxDQUFhbDFDLEVBQUdtaEIsR0FDWnJoQixLQUFLc2xELEdBQUdsRixHQUFHLytCLEVBQUU0eEIsVUFBVTFxQixTQUFTcm9CLEdBQUtGLEtBQUt5bEQsR0FBRzc1QyxJQUFJMUwsRUFBRWdhLGNBQ25ELE1BQU1RLEVBQUkxYSxLQUFLd2lELFlBQVlvQyxpQkFDM0IsT0FBT2xxQyxFQUFFb3BDLDJCQUEyQjVqRCxFQUFHbWhCLEVBQUU0eEIsVUFBVXh4QixNQUFNdmhCLElBQ3JEQSxFQUFFcW9CLFNBQVNyb0IsR0FBS0YsS0FBS3lsRCxHQUFHNzVDLElBQUkxTCxFQUFFZ2EsYUFDakMsSUFBR3VILE1BQUssSUFBTy9HLEVBQUU2b0MsaUJBQWlCcmpELEVBQUdtaEIsSUFDMUMsQ0FDQSxFQUFBNGpDLEdBQ0lqbEQsS0FBS3VsRCxHQUFLLElBQUk1NUMsR0FDbEIsQ0FDQSxFQUFBdTVDLENBQUdobEQsR0FFQyxNQUFNbWhCLEVBQUlyaEIsS0FBS3dpRCxZQUFZcUMseUJBQXlCMUMsa0JBQ3BELE9BQU92a0IsR0FBbUJyVixRQUFRdm9CLEtBQUt5bEQsSUFBSy9xQyxJQUN4QyxNQUFNTCxFQUFJaWlCLEdBQVlFLFNBQVM5aEIsR0FDL0IsT0FBTzFhLEtBQUswbEQsR0FBR3hsRCxFQUFHbWEsR0FBR29ILE1BQU12aEIsSUFDdkJBLEdBQUttaEIsRUFBRXU3QixZQUFZdmlDLEVBQUdrZ0IsR0FBZ0I1SyxNQUN6QyxHQUNKLElBQUdsTyxNQUFLLEtBQVF6aEIsS0FBS3VsRCxHQUFLLEtBQU1sa0MsRUFBRXBSLE1BQU0vUCxLQUM3QyxDQUNBLG1CQUFBeWxELENBQW9CemxELEVBQUdtaEIsR0FDbkIsT0FBT3JoQixLQUFLMGxELEdBQUd4bEQsRUFBR21oQixHQUFHSSxNQUFNdmhCLElBQ3ZCQSxFQUFJRixLQUFLeWxELEdBQUc3NkMsT0FBT3lXLEVBQUVuSCxZQUFjbGEsS0FBS3lsRCxHQUFHNzVDLElBQUl5VixFQUFFbkgsV0FDcEQsR0FDTCxDQUNBLEVBQUFrcUMsQ0FBR2xrRCxHQUVDLE9BQU8sQ0FDWCxDQUNBLEVBQUF3bEQsQ0FBR3hsRCxFQUFHbWhCLEdBQ0YsT0FBT3VjLEdBQW1COUssR0FBRyxDQUFFLElBQU04SyxHQUFtQmw0QixRQUFRMUYsS0FBS3NsRCxHQUFHL0UsWUFBWWwvQixJQUFLLElBQU1yaEIsS0FBS3dpRCxZQUFZb0MsaUJBQWlCckUsWUFBWXJnRCxFQUFHbWhCLEdBQUksSUFBTXJoQixLQUFLd2lELFlBQVkyQyxHQUFHamxELEVBQUdtaEIsSUFDckwsRUE2MEJKLE1BQU11a0MsR0FDRixXQUFBamlELENBQVl6RCxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUNqQnJhLEtBQUtpekMsU0FBVy95QyxFQUFHRixLQUFLNmxELFVBQVl4a0MsRUFBR3JoQixLQUFLOGxELEdBQUtwckMsRUFBRzFhLEtBQUsrbEQsR0FBSzFyQyxDQUNsRSxDQUNBLFNBQU8yckMsQ0FBRzlsRCxFQUFHbWhCLEdBQ1QsSUFBSTNHLEVBQUlneUIsS0FBNEJyeUIsRUFBSXF5QixLQUN4QyxJQUFLLE1BQU14c0MsS0FBS21oQixFQUFFNGtDLFdBQVksT0FBUS9sRCxFQUFFaUksTUFDdEMsS0FBSyxFQUNIdVMsRUFBSUEsRUFBRTlPLElBQUkxTCxFQUFFZ21ELElBQUkvK0MsS0FDaEIsTUFFRixLQUFLLEVBQ0hrVCxFQUFJQSxFQUFFek8sSUFBSTFMLEVBQUVnbUQsSUFBSS8rQyxLQUdwQixPQUFPLElBQUl5K0MsR0FBMkIxbEQsRUFBR21oQixFQUFFd2tDLFVBQVduckMsRUFBR0wsRUFDN0QsRUF3REEsTUFBTThyQyxHQUNOLFdBQUF4aUQsR0FDSTNELEtBQUtvbUQsSUFBSyxDQUNkLENBQ21ELFVBQUE3NkMsQ0FBV3JMLEVBQUdtaEIsR0FDN0RyaEIsS0FBS3FtRCxHQUFLbm1ELEVBQUdGLEtBQUtxOUMsYUFBZWg4QixFQUFHcmhCLEtBQUtvbUQsSUFBSyxDQUNsRCxDQUNvRSx5QkFBQWxJLENBQTBCaCtDLEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ25HLE9BQU9yYSxLQUFLc21ELEdBQUdwbUQsRUFBR21oQixHQUFHSSxNQUFNamhCLEdBQUtBLEdBQUtSLEtBQUt1bUQsR0FBR3JtRCxFQUFHbWhCLEVBQUdoSCxFQUFHSyxLQUFLK0csTUFBTS9HLEdBQUtBLEdBQUsxYSxLQUFLd21ELEdBQUd0bUQsRUFBR21oQixJQUMxRixDQUlPLEVBQUFpbEMsQ0FBR3BtRCxFQUFHbWhCLEdBQ1QsR0FBSTJwQixHQUFtQzNwQixHQUl2QyxPQUFPdWMsR0FBbUJsNEIsUUFBUSxNQUNsQyxJQUFJZ1YsRUFBSTB3QixHQUF3Qi9wQixHQUNoQyxPQUFPcmhCLEtBQUtxOUMsYUFBYWxDLGFBQWFqN0MsRUFBR3dhLEdBQUcrRyxNQUFNcEgsR0FBSyxJQUEyQkEsRUFBSSxNQUFRLE9BQVNnSCxFQUFFOFosT0FBUyxJQUE4QjlnQixJQVFoSmdILEVBQUlncUIsR0FBeUJocUIsRUFBRyxLQUFNLEtBQTRCM0csRUFBSTB3QixHQUF3Qi9wQixJQUM5RnJoQixLQUFLcTlDLGFBQWFuQywyQkFBMkJoN0MsRUFBR3dhLEdBQUcrRyxNQUFNcEgsSUFDckQsTUFBTTdaLEVBQUlrc0MsTUFBNEJyeUIsR0FDdEMsT0FBT3JhLEtBQUtxbUQsR0FBRzdJLGFBQWF0OUMsRUFBR00sR0FBR2loQixNQUFNcEgsR0FBS3JhLEtBQUtxOUMsYUFBYS9CLGFBQWFwN0MsRUFBR3dhLEdBQUcrRyxNQUFNL0csSUFDcEYsTUFBTUUsRUFBSTVhLEtBQUt5bUQsR0FBR3BsQyxFQUFHaEgsR0FDckIsT0FBT3JhLEtBQUswbUQsR0FBR3JsQyxFQUFHekcsRUFBR3BhLEVBQUdrYSxFQUFFeWlCLFVBQVluOUIsS0FBS3NtRCxHQUFHcG1ELEVBQUdtckMsR0FBeUJocUIsRUFBRyxLQUFNLE1BQThCcmhCLEtBQUsybUQsR0FBR3ptRCxFQUFHMGEsRUFBR3lHLEVBQUczRyxFQUNySSxLQUNKLE1BQ0wsQ0FJTyxFQUFBNnJDLENBQUdybUQsRUFBR21oQixFQUFHM0csRUFBR0wsR0FDZixPQUFPMndCLEdBQW1DM3BCLElBQU1oSCxFQUFFbWIsUUFBUStFLEdBQWdCNUssT0FBUzN2QixLQUFLd21ELEdBQUd0bUQsRUFBR21oQixHQUFLcmhCLEtBQUtxbUQsR0FBRzdJLGFBQWF0OUMsRUFBR3dhLEdBQUcrRyxNQUFNamhCLElBQ2hJLE1BQU1vYSxFQUFJNWEsS0FBS3ltRCxHQUFHcGxDLEVBQUc3Z0IsR0FDckIsT0FBT1IsS0FBSzBtRCxHQUFHcmxDLEVBQUd6RyxFQUFHRixFQUFHTCxHQUFLcmEsS0FBS3dtRCxHQUFHdG1ELEVBQUdtaEIsSUFBTXdVLE1BQTJCLEVBQVNucEIsT0FBU29wQixHQUFtQixjQUFlLHdEQUF5RHpiLEVBQUVILFdBQVlzeEIsR0FBeUJucUIsSUFDN05yaEIsS0FBSzJtRCxHQUFHem1ELEVBQUcwYSxFQUFHeUcsRUE5clZ0QixTQUF1RG5oQixFQUFHbWhCLEdBTzFELE1BQU0zRyxFQUFJeGEsRUFBRTA2QixjQUFjZixRQUFTeGYsRUFBSW5hLEVBQUUwNkIsY0FBY2QsWUFBYyxFQUFHdDVCLEVBQUkrNUIsR0FBZ0JFLGNBQWMsTUFBUXBnQixFQUFJLElBQUl1ZixHQUFVbGYsRUFBSSxFQUFHLEdBQUssSUFBSWtmLEdBQVVsZixFQUFHTCxJQUNqSyxPQUFPLElBQUk2aUIsR0FBWTE4QixFQUFHODdCLEdBQVlJLFFBQVNyYixFQUNuRCxDQXFyVjZCdWxDLENBQThDdnNDLEdBQUksSUFDdEUsR0FHRCxDQUN1RSxFQUFBb3NDLENBQUd2bUQsRUFBR21oQixHQUc3RSxJQUFJM0csRUFBSSxJQUFJNG1CLEdBQVVvSyxHQUE2QnhyQyxJQUNuRCxPQUFPbWhCLEVBQUVrSCxTQUFRLENBQUVsSCxFQUFHaEgsS0FDbEJveEIsR0FBdUJ2ckMsRUFBR21hLEtBQU9LLEVBQUlBLEVBQUU5TyxJQUFJeU8sR0FDOUMsSUFBSUssQ0FDVCxDQVlPLEVBQUFnc0MsQ0FBR3htRCxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUNmLEdBQUksT0FBU25hLEVBQUVpN0IsTUFFZixPQUFPLEVBQ1AsR0FBSXpnQixFQUFFd0osT0FBUzdDLEVBQUU2QyxLQUdqQixPQUFPLEVBU0MsTUFBTTFqQixFQUFJLE1BQThCTixFQUFFMHFDLFVBQVl2cEIsRUFBRW1nQixPQUFTbmdCLEVBQUVrZ0IsUUFDM0UsUUFBUy9nQyxJQUFNQSxFQUFFNm1DLGtCQUFvQjdtQyxFQUFFaVMsUUFBUWlvQixVQUFVcmdCLEdBQUssRUFDbEUsQ0FDQSxFQUFBbXNDLENBQUd0bUQsRUFBR21oQixHQUNGLE9BQU93VSxNQUEyQixFQUFTbnBCLE9BQVNvcEIsR0FBbUIsY0FBZSwrQ0FBZ0QwVixHQUF5Qm5xQixJQUMvSnJoQixLQUFLcW1ELEdBQUduSSwwQkFBMEJoK0MsRUFBR21oQixFQUFHNmIsR0FBWXZOLE1BQ3hELENBSU8sRUFBQWczQixDQUFHem1ELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBRWYsT0FBT3JhLEtBQUtxbUQsR0FBR25JLDBCQUEwQmgrQyxFQUFHd2EsRUFBR0wsR0FBR29ILE1BQU12aEIsSUFFeERtaEIsRUFBRWtILFNBQVNsSCxJQUNQbmhCLEVBQUlBLEVBQUVvL0IsT0FBT2plLEVBQUVsYSxJQUFLa2EsRUFDdkIsSUFBSW5oQixJQUNULEVBMkJKLE1BQU0ybUQsR0FDRixXQUFBbGpELENBRUF6RCxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUNMcmEsS0FBS3dpRCxZQUFjdGlELEVBQUdGLEtBQUs4bUQsR0FBS3psQyxFQUFHcmhCLEtBQUt5dEMsV0FBYXB6QixFQU9yRHJhLEtBQUsrbUQsR0FBSyxJQUFJN25CLEdBQVV6RixJQUd4Qno1QixLQUFLZ25ELEdBQUssSUFBSXBiLElBQVcxckMsR0FBS3FxQyxHQUF5QnJxQyxJQUFLc3FDLElBTzVEeHFDLEtBQUtpbkQsR0FBSyxJQUFJOTlDLElBQUtuSixLQUFLa25ELEdBQUtobkQsRUFBRTJrRCx5QkFBMEI3a0QsS0FBS21rRCxHQUFLamtELEVBQUUwa0QsaUJBQ3JFNWtELEtBQUtxa0QsR0FBS25rRCxFQUFFNGtELGlCQUFrQjlrRCxLQUFLbW5ELEdBQUd6c0MsRUFDMUMsQ0FDQSxFQUFBeXNDLENBQUdqbkQsR0FHQ0YsS0FBS285QyxxQkFBdUJwOUMsS0FBS3dpRCxZQUFZa0Msd0JBQXdCeGtELEdBQUlGLEtBQUtxOUMsYUFBZXI5QyxLQUFLd2lELFlBQVlpQyxnQkFBZ0J2a0QsR0FDOUhGLEtBQUttOUMsY0FBZ0JuOUMsS0FBS3dpRCxZQUFZbUMsaUJBQWlCemtELEVBQUdGLEtBQUtxOUMsY0FBZXI5QyxLQUFLb25ELGVBQWlCLElBQUluSyxHQUFtQmo5QyxLQUFLa25ELEdBQUlsbkQsS0FBS205QyxjQUFlbjlDLEtBQUtvOUMscUJBQXNCcDlDLEtBQUtxOUMsY0FDeExyOUMsS0FBS2tuRCxHQUFHakYsZ0JBQWdCamlELEtBQUtxOUMsY0FBZXI5QyxLQUFLOG1ELEdBQUd2N0MsV0FBV3ZMLEtBQUtvbkQsZUFBZ0JwbkQsS0FBS3E5QyxhQUM3RixDQUNBLGNBQUFnSyxDQUFlbm5ELEdBQ1gsT0FBT0YsS0FBS3dpRCxZQUFZdUMsZUFBZSxrQkFBbUIscUJBQXNCMWpDLEdBQUtuaEIsRUFBRW9uRCxRQUFRam1DLEVBQUdyaEIsS0FBSyttRCxLQUMzRyxFQWlCSmgxQyxlQUFldzFDLEdBQXFDcm5ELEVBQUdtaEIsR0FDbkQsTUFBTTNHLEVBQUkwYixHQUFvQmwyQixHQUM5QixhQUFhd2EsRUFBRThuQyxZQUFZdUMsZUFBZSxxQkFBc0IsWUFBYTdrRCxJQUd6RSxJQUFJbWEsRUFDSixPQUFPSyxFQUFFeWlDLGNBQWNpRSxzQkFBc0JsaEQsR0FBR3VoQixNQUFNamhCLElBQU02WixFQUFJN1osRUFBR2thLEVBQUV5c0MsR0FBRzlsQyxHQUFJM0csRUFBRXlpQyxjQUFjaUUsc0JBQXNCbGhELE1BQU11aEIsTUFBTUosSUFDMUgsTUFBTTdnQixFQUFJLEdBQUlvYSxFQUFJLEdBRWxCLElBQUlDLEVBQUk2eEIsS0FDUixJQUFLLE1BQU14c0MsS0FBS21hLEVBQUcsQ0FDZjdaLEVBQUVnQyxLQUFLdEMsRUFBRW92QyxTQUNULElBQUssTUFBTWp1QixLQUFLbmhCLEVBQUV1dkMsVUFBVzUwQixFQUFJQSxFQUFFalAsSUFBSXlWLEVBQUVsYSxJQUM3QyxDQUNBLElBQUssTUFBTWpILEtBQUttaEIsRUFBRyxDQUNmekcsRUFBRXBZLEtBQUt0QyxFQUFFb3ZDLFNBQ1QsSUFBSyxNQUFNanVCLEtBQUtuaEIsRUFBRXV2QyxVQUFXNTBCLEVBQUlBLEVBQUVqUCxJQUFJeVYsRUFBRWxhLElBQzdDLENBR1ksT0FBT3VULEVBQUUwc0MsZUFBZTVKLGFBQWF0OUMsRUFBRzJhLEdBQUc0RyxNQUFNdmhCLElBQUssQ0FDOURzbkQsR0FBSXRuRCxFQUNKdW5ELGdCQUFpQmpuRCxFQUNqQmtuRCxjQUFlOXNDLEtBRXRCLEdBQ0osR0FDTCxDQTREQSxTQUFTK3NDLEdBQWlEem5ELEdBQ3RELE1BQU1taEIsRUFBSStVLEdBQW9CbDJCLEdBQzlCLE9BQU9taEIsRUFBRW1oQyxZQUFZdUMsZUFBZSxtQ0FBb0MsWUFBYTdrRCxHQUFLbWhCLEVBQUU4aUMsR0FBR25CLDZCQUE2QjlpRCxJQUNoSSxDQTRLQTZSLGVBQWU2MUMsR0FBa0MxbkQsRUFBR21oQixFQUFHM0csR0FDbkQsTUFBTUwsRUFBSStiLEdBQW9CbDJCLEdBQUlNLEVBQUk2WixFQUFFMHNDLEdBQUd4OUMsSUFBSThYLEdBQUl6RyxFQUFJRixFQUFJLFlBQWMsb0JBQ3pFLElBQ0lBLFNBQVdMLEVBQUVtb0MsWUFBWXVDLGVBQWUsaUJBQWtCbnFDLEdBQUkxYSxHQUFLbWEsRUFBRW1vQyxZQUFZOUIsa0JBQWtCdEwsYUFBYWwxQyxFQUFHTSxJQUN2SCxDQUFFLE1BQU9OLEdBQ0wsSUFBS3MrQixHQUFzQ3QrQixHQUFJLE1BQU1BLEVBTXJENDFCLEdBQW1CLGFBQWMsZ0RBQWdEelUsTUFBTW5oQixJQUMzRixDQUNBbWEsRUFBRTBzQyxHQUFLMXNDLEVBQUUwc0MsR0FBR3RuQixPQUFPcGUsR0FBSWhILEVBQUUyc0MsR0FBR3A4QyxPQUFPcEssRUFBRTJPLE9BQ3pDLENBU0ksU0FBUzA0QyxHQUFpQzNuRCxFQUFHbWhCLEVBQUczRyxHQUNoRCxNQUFNTCxFQUFJK2IsR0FBb0JsMkIsR0FDOUIsSUFBSU0sRUFBSSs1QixHQUFnQjVLLE1BQU8vVSxFQUFJOHhCLEtBQ25DLE9BQU9yeUIsRUFBRW1vQyxZQUFZdUMsZUFBZSxnQkFBaUIsWUFBYTdrRCxHQUFLLFNBQTJDQSxFQUFHbWhCLEVBQUczRyxHQUNwSCxNQUFNTCxFQUFJK2IsR0FBb0JsMkIsR0FBSU0sRUFBSTZaLEVBQUUyc0MsR0FBR3o5QyxJQUFJbVIsR0FDL0MsWUFBTyxJQUFXbGEsRUFBSW85QixHQUFtQmw0QixRQUFRMlUsRUFBRTBzQyxHQUFHeDlDLElBQUkvSSxJQUFNNlosRUFBRThwQyxHQUFHUixjQUFjdGlDLEVBQUczRyxFQUMxRixDQUh1RSxDQUdyRUwsRUFBR25hLEVBQUdrckMsR0FBd0IvcEIsSUFBSUksTUFBTUosSUFDdEMsR0FBSUEsRUFBRyxPQUFPN2dCLEVBQUk2Z0IsRUFBRTQzQiw2QkFBOEI1K0IsRUFBRThwQyxHQUFHTCwyQkFBMkI1akQsRUFBR21oQixFQUFFNHhCLFVBQVV4eEIsTUFBTXZoQixJQUNuRzBhLEVBQUkxYSxDQUNQLEdBQ0osSUFBR3VoQixNQUFLLElBQU9wSCxFQUFFeXNDLEdBQUc1SSwwQkFBMEJoK0MsRUFBR21oQixFQUFHM0csRUFBSWxhLEVBQUkrNUIsR0FBZ0I1SyxNQUFPalYsRUFBSUUsRUFBSTh4QixRQUE4QmpyQixNQUFNdmhCLElBaUNwSSxTQUFrQ0EsRUFBR21oQixFQUFHM0csR0FDcEMsSUFBSUwsRUFBSW5hLEVBQUUrbUQsR0FBRzE5QyxJQUFJOFgsSUFBTWtaLEdBQWdCNUssTUFDdkNqVixFQUFFNk4sU0FBUSxDQUFFcm9CLEVBQUdtaEIsS0FDWEEsRUFBRThiLFNBQVN6QyxVQUFVcmdCLEdBQUssSUFBTUEsRUFBSWdILEVBQUU4YixTQUN6QyxJQUFJajlCLEVBQUUrbUQsR0FBR3A5QyxJQUFJd1gsRUFBR2hILEVBQ3JCLENBdEMwSXl0QyxDQUF5Qnp0QyxFQWgyUG5LLFNBQXdDbmEsR0FDcEMsT0FBT0EsRUFBRXk4QixrQkFBb0J6OEIsRUFBRXE4QixLQUFLOTdCLE9BQVMsR0FBSyxFQUFJUCxFQUFFcThCLEtBQUtmLGNBQWdCdDdCLEVBQUVxOEIsS0FBS2h6QixJQUFJckosRUFBRXE4QixLQUFLOTdCLE9BQVMsR0FDNUcsQ0E4MVBzS3NuRCxDQUErQjFtQyxHQUFJbmhCLEdBQ3JNLENBQ0lxM0MsVUFBV3IzQyxFQUNYOG5ELEdBQUlwdEMsT0FFWixDQTBPQSxNQUFNcXRDLEdBQ0YsV0FBQXRrRCxHQUNJM0QsS0FBS2tvRCxnQkEzNlBGLEVBNDZQUCxDQUNBLEVBQUFDLENBQUdqb0QsR0FDQ0YsS0FBS2tvRCxnQkFBa0Jsb0QsS0FBS2tvRCxnQkFBZ0J0OEMsSUFBSTFMLEVBQ3BELENBQ0EsRUFBQWtvRCxDQUFHbG9ELEdBQ0NGLEtBQUtrb0QsZ0JBQWtCbG9ELEtBQUtrb0QsZ0JBQWdCdDlDLE9BQU8xSyxFQUN2RCxDQUlPLEVBQUFtb0QsR0FDSCxNQUFNbm9ELEVBQUksQ0FDTmdvRCxnQkFBaUJsb0QsS0FBS2tvRCxnQkFBZ0J0c0IsVUFDdEMwc0IsYUFBYy82QyxLQUFLRCxPQUV2QixPQUFPN0ksS0FBSzBULFVBQVVqWSxFQUMxQixFQXNVSixNQUFNcW9ELEdBQ0YsV0FBQTVrRCxHQUNJM0QsS0FBS3dvRCxHQUFLLElBQUlQLEdBQTRCam9ELEtBQUt5b0QsR0FBSyxDQUFDLEVBQUd6b0QsS0FBSzBvRCxtQkFBcUIsS0FDbEYxb0QsS0FBSzIrQixzQkFBd0IsSUFDakMsQ0FDQSxrQkFBQWdxQixDQUFtQnpvRCxHQUVuQixDQUNBLG1CQUFBMG9ELENBQW9CMW9ELEVBQUdtaEIsRUFBRzNHLEdBRTFCLENBQ0EsbUJBQUFtdUMsQ0FBb0Izb0QsR0FDaEIsT0FBT0YsS0FBS3dvRCxHQUFHTCxHQUFHam9ELEdBQUlGLEtBQUt5b0QsR0FBR3ZvRCxJQUFNLGFBQ3hDLENBQ0EsZ0JBQUE0b0QsQ0FBaUI1b0QsRUFBR21oQixFQUFHM0csR0FDbkIxYSxLQUFLeW9ELEdBQUd2b0QsR0FBS21oQixDQUNqQixDQUNBLHNCQUFBMG5DLENBQXVCN29ELEdBQ25CRixLQUFLd29ELEdBQUdKLEdBQUdsb0QsRUFDZixDQUNBLGtCQUFBOG9ELENBQW1COW9ELEdBQ2YsT0FBT0YsS0FBS3dvRCxHQUFHTixnQkFBZ0J2K0MsSUFBSXpKLEVBQ3ZDLENBQ0EsZUFBQStvRCxDQUFnQi9vRCxVQUNMRixLQUFLeW9ELEdBQUd2b0QsRUFDbkIsQ0FDQSx3QkFBQWdwRCxHQUNJLE9BQU9scEQsS0FBS3dvRCxHQUFHTixlQUNuQixDQUNBLG1CQUFBaUIsQ0FBb0JqcEQsR0FDaEIsT0FBT0YsS0FBS3dvRCxHQUFHTixnQkFBZ0J2K0MsSUFBSXpKLEVBQ3ZDLENBQ0EsS0FBQTRpQixHQUNJLE9BQU85aUIsS0FBS3dvRCxHQUFLLElBQUlQLEdBQTRCcmlELFFBQVFGLFNBQzdELENBQ0EsZ0JBQUEwakQsQ0FBaUJscEQsRUFBR21oQixFQUFHM0csR0FFdkIsQ0FDQSxjQUFBMnVDLENBQWVucEQsR0FFZixDQUNBLFFBQUEwM0IsR0FBWSxDQUNaLG1CQUFBa0gsQ0FBb0I1K0IsR0FBSSxDQUN4QixrQkFBQW9wRCxDQUFtQnBwRCxHQUVuQixFQWtCQSxNQUFNcXBELEdBQ04sRUFBQUMsQ0FBR3RwRCxHQUVILENBQ0EsUUFBQTAzQixHQUVBLEVBd0JKLE1BQU02eEIsR0FDRixXQUFBOWxELEdBQ0kzRCxLQUFLMHBELEdBQUssSUFBTTFwRCxLQUFLMnBELEtBQU0zcEQsS0FBSzRwRCxHQUFLLElBQU01cEQsS0FBSzZwRCxLQUFNN3BELEtBQUs4cEQsR0FBSyxHQUFJOXBELEtBQUsrcEQsSUFDN0UsQ0FDQSxFQUFBUCxDQUFHdHBELEdBQ0NGLEtBQUs4cEQsR0FBR3RuRCxLQUFLdEMsRUFDakIsQ0FDQSxRQUFBMDNCLEdBQ0l6M0IsT0FBT3NRLG9CQUFvQixTQUFVelEsS0FBSzBwRCxJQUFLdnBELE9BQU9zUSxvQkFBb0IsVUFBV3pRLEtBQUs0cEQsR0FDOUYsQ0FDQSxFQUFBRyxHQUNJNXBELE9BQU95USxpQkFBaUIsU0FBVTVRLEtBQUswcEQsSUFBS3ZwRCxPQUFPeVEsaUJBQWlCLFVBQVc1USxLQUFLNHBELEdBQ3hGLENBQ0EsRUFBQUQsR0FDSTd6QixHQUFtQixzQkFBdUIsMkNBQzFDLElBQUssTUFBTTUxQixLQUFLRixLQUFLOHBELEdBQUk1cEQsRUFBRSxFQUMvQixDQUNBLEVBQUEycEQsR0FDSS96QixHQUFtQixzQkFBdUIsNkNBQzFDLElBQUssTUFBTTUxQixLQUFLRixLQUFLOHBELEdBQUk1cEQsRUFBRSxFQUMvQixDQUlBLFFBQU95YSxHQUNILE1BQU8sb0JBQXNCeGEsYUFBVSxJQUFXQSxPQUFPeVEsdUJBQW9CLElBQVd6USxPQUFPc1EsbUJBQ25HLEVBc0JBLElBQUlpaEMsR0FBSyxLQXdCYixTQUFTc1ksS0FDTCxPQUFPLE9BQVN0WSxHQUFLQSxHQUNWLFVBQVlqNEIsS0FBS2lXLE1BQU0sV0FBYWpXLEtBQUtDLFVBQzlDZzRCLEtBQU0sS0FBT0EsR0FBR3gzQixTQUFTLEdBQ25DLENBaUJJLE1BQU15M0IsR0FBSyxDQUNYc1ksa0JBQW1CLFdBQ25CQyxPQUFRLFNBQ1JDLFNBQVUsV0FDVkMsb0JBQXFCLHVCQTZCekIsTUFBTUMsR0FDRixXQUFBMW1ELENBQVl6RCxHQUNSRixLQUFLc3FELEdBQUtwcUQsRUFBRW9xRCxHQUFJdHFELEtBQUt1cUQsR0FBS3JxRCxFQUFFcXFELEVBQ2hDLENBQ0EsRUFBQUMsQ0FBR3RxRCxHQUNDRixLQUFLeXFELEdBQUt2cUQsQ0FDZCxDQUNBLEVBQUF3cUQsQ0FBR3hxRCxHQUNDRixLQUFLMnFELEdBQUt6cUQsQ0FDZCxDQUNBLFNBQUEwcUQsQ0FBVTFxRCxHQUNORixLQUFLNnFELEdBQUszcUQsQ0FDZCxDQUNBLEtBQUF3WSxHQUNJMVksS0FBS3VxRCxJQUNULENBQ0EsSUFBQTM5QixDQUFLMXNCLEdBQ0RGLEtBQUtzcUQsR0FBR3BxRCxFQUNaLENBQ0EsRUFBQTRxRCxHQUNJOXFELEtBQUt5cUQsSUFDVCxDQUNBLEVBQUFNLENBQUc3cUQsR0FDQ0YsS0FBSzJxRCxHQUFHenFELEVBQ1osQ0FDQSxFQUFBOHFELENBQUc5cUQsR0FDQ0YsS0FBSzZxRCxHQUFHM3FELEVBQ1osRUFrQkEsTUFBTTJ4QyxHQUFLLHVCQUVmLE1BQU1vWixXQUtOLE1BQ0ksV0FBQXRuRCxDQUFZekQsR0FDUkYsS0FBS2tyRCxhQUFlaHJELEVBQUdGLEtBQUs2akMsV0FBYTNqQyxFQUFFMmpDLFdBQzNDLE1BQU14aUIsRUFBSW5oQixFQUFFOGpDLElBQU0sUUFBVSxPQUFRdHBCLEVBQUk2UCxtQkFBbUJ2cUIsS0FBSzZqQyxXQUFXUSxXQUFZaHFCLEVBQUlrUSxtQkFBbUJ2cUIsS0FBSzZqQyxXQUFXUyxVQUM5SHRrQyxLQUFLbXJELEdBQUs5cEMsRUFBSSxNQUFRbmhCLEVBQUU2akMsS0FBTS9qQyxLQUFLb3JELEdBQUssWUFBWTF3QyxlQUFlTCxJQUFLcmEsS0FBS3FyRCxHQUFLLGNBQWdCcnJELEtBQUs2akMsV0FBV1MsU0FBVyxjQUFjNXBCLElBQU0sY0FBY0EsaUJBQWlCTCxHQUNwTCxDQUNBLE1BQUlpeEMsR0FHQSxPQUFPLENBQ1gsQ0FDQSxFQUFBQyxDQUFHcnJELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixHQUNYLE1BQU1vYSxFQUFJb3ZDLEtBQW1DbnZDLEVBQUk3YSxLQUFLd3JELEdBQUd0ckQsRUFBR21oQixHQUM1RHlVLEdBQW1CLGlCQUFrQixnQkFBZ0I1MUIsTUFBTTBhLEtBQU1DLEVBQUdILEdBQ3BFLE1BQU14VCxFQUFJLENBQ04sK0JBQWdDbEgsS0FBS29yRCxHQUNyQyx3QkFBeUJwckQsS0FBS3FyRCxJQUVsQyxPQUFPcnJELEtBQUt5ckQsR0FBR3ZrRCxFQUFHbVQsRUFBRzdaLEdBQUlSLEtBQUswckQsR0FBR3hyRCxFQUFHMmEsRUFBRzNULEVBQUd3VCxHQUFHckosTUFBTWdRLElBQU15VSxHQUFtQixpQkFBa0IsaUJBQWlCNTFCLE1BQU0wYSxNQUFPeUcsR0FDNUhBLEtBQU1BLElBQ0YsTUFBTTRVLEdBQWtCLGlCQUFrQixRQUFRLzFCLE1BQU0wYSx3QkFBeUJ5RyxFQUFHLFFBQVN4RyxFQUFHLFdBQVlILEdBQzVHMkcsQ0FDSCxHQUNMLENBQ0EsRUFBQXNxQyxDQUFHenJELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixFQUFHb2EsR0FHZCxPQUFPNWEsS0FBS3VyRCxHQUFHcnJELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixFQUMvQixDQUlPLEVBQUFpckQsQ0FBR3ZyRCxFQUFHbWhCLEVBQUczRyxHQUNaeGEsRUFBRSxxQkFJUyxlQUFpQnFILEdBTTVCckgsRUFBRSxnQkFBa0IsYUFBY0YsS0FBS2tyRCxhQUFhOTBDLFFBQVVsVyxFQUFFLG9CQUFzQkYsS0FBS2tyRCxhQUFhOTBDLE9BQ3hHaUwsR0FBS0EsRUFBRXdMLFFBQVF0RSxTQUFRLENBQUVsSCxFQUFHM0csSUFBTXhhLEVBQUV3YSxHQUFLMkcsSUFBSzNHLEdBQUtBLEVBQUVtUyxRQUFRdEUsU0FBUSxDQUFFbEgsRUFBRzNHLElBQU14YSxFQUFFd2EsR0FBSzJHLEdBQzNGLENBQ0EsRUFBQW1xQyxDQUFHdHJELEVBQUdtaEIsR0FDRixNQUFNM0csRUFBSWkzQixHQUFHenhDLEdBQ2IsTUFBTyxHQUFHRixLQUFLbXJELFNBQVM5cEMsS0FBSzNHLEdBQ2pDLEdBRUEsV0FBQS9XLENBQVl6RCxHQUNSMEQsTUFBTTFELEdBQUlGLEtBQUtndkIsaUJBQW1COXVCLEVBQUU4dUIsaUJBQWtCaHZCLEtBQUtpa0Msc0JBQXdCL2pDLEVBQUUrakMsc0JBQ3JGamtDLEtBQUtta0MsZ0JBQWtCamtDLEVBQUVpa0MsZ0JBQWlCbmtDLEtBQUtra0MsbUJBQXFCaGtDLEVBQUVna0Msa0JBQzFFLENBQ0EsRUFBQXduQixDQUFHeHJELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ1IsTUFBTTdaLEVBQUl3cEQsS0FDVixPQUFPLElBQUlwa0QsU0FBUSxDQUFFZ1YsRUFBR0MsS0FDcEIsTUFBTTNULEVBQUksSUFBSSt0QixHQUNkL3RCLEVBQUUyc0Isb0JBQW1CLEdBQUszc0IsRUFBRXFzQixXQUFXSixHQUFVRCxVQUFVLEtBQ3ZELElBQ0ksT0FBUWhzQixFQUFFdXNCLG9CQUNSLEtBQUtpQixHQUFVclEsU0FDYixNQUFNaEQsRUFBSW5hLEVBQUV5c0Isa0JBQ1ptQyxHQUFtQitiLEdBQUksZ0JBQWdCM3hDLE1BQU1NLGNBQWVpRSxLQUFLMFQsVUFBVWtKLElBQzNFekcsRUFBRXlHLEdBQ0YsTUFFRixLQUFLcVQsR0FBVW5RLFFBQ2J1UixHQUFtQitiLEdBQUksUUFBUTN4QyxNQUFNTSxlQUFnQnFhLEVBQUUsSUFBSXVjLEdBQWUsR0FBRVgsa0JBQW1CLHFCQUMvRixNQUVGLEtBQUsvQixHQUFVekIsV0FDYixNQUFNdlksRUFBSXhULEVBQUV3c0IsWUFDWixHQUFJb0MsR0FBbUIrYixHQUFJLFFBQVEzeEMsTUFBTU0sd0JBQXlCa2EsRUFBRyxpQkFBa0J4VCxFQUFFMHNCLG1CQUN6RmxaLEVBQUksRUFBRyxDQUNILElBQUl4YSxFQUFJZ0gsRUFBRXlzQixrQkFDVmx5QixNQUFNQyxRQUFReEIsS0FBT0EsRUFBSUEsRUFBRSxJQUMzQixNQUFNbWhCLEVBQUksTUFBUW5oQixPQUFJLEVBQVNBLEVBQUUrRSxNQUNqQyxHQUFJb2MsR0FBS0EsRUFBRTRLLFFBQVU1SyxFQUFFbGIsUUFBUyxDQUM1QixNQUFNakcsRUFBSSxTQUFzREEsR0FDNUQsTUFBTW1oQixFQUFJbmhCLEVBQUVvYyxjQUFjcFksUUFBUSxLQUFNLEtBQ3hDLE9BQU9tQyxPQUFPMEUsT0FBTyxJQUFHb1AsUUFBUWtILElBQU0sRUFBSUEsRUFBSSxHQUFFa1YsT0FDcEQsQ0FIVSxDQUdSbFYsRUFBRTRLLFFBQ0pwUixFQUFFLElBQUl1YyxHQUFlbDNCLEVBQUdtaEIsRUFBRWxiLFNBQzlCLE1BQU8wVSxFQUFFLElBQUl1YyxHQUFlLEdBQUViLFFBQVMsZ0NBQWtDcnZCLEVBQUV3c0IsYUFDL0UsTUFHQTdZLEVBQUUsSUFBSXVjLEdBQWUsR0FBRUYsWUFBYSx1QkFDcEMsTUFFRixRQUNFaEIsS0FFUixDQUFFLFFBQ0VKLEdBQW1CK2IsR0FBSSxRQUFRM3hDLE1BQU1NLGVBQ3pDLENBQ0gsSUFDRCxNQUFNOEcsRUFBSTdDLEtBQUswVCxVQUFVa0MsR0FDekJ5YixHQUFtQitiLEdBQUksUUFBUTN4QyxNQUFNTSxxQkFBc0I2WixHQUFJblQsRUFBRTBsQixLQUFLdkwsRUFBRyxPQUFRL1osRUFBR29ULEVBQUcsR0FDMUYsR0FDTCxDQUNBLEVBQUFreEMsQ0FBRzFyRCxFQUFHbWhCLEVBQUczRyxHQUNMLE1BQU1MLEVBQUkydkMsS0FBbUN4cEQsRUFBSSxDQUFFUixLQUFLbXJELEdBQUksSUFBSyxnQ0FBaUMsSUFBS2pyRCxFQUFHLFlBQWMwYSxFQUFJNFosS0FBNkIzWixFQUFJNFosS0FBc0J2dEIsRUFBSSxDQUduTDJwQixtQkFBb0IsYUFDcEJILG1CQUFvQixDQUFDLEVBQ3JCSCxpQkFBa0IsQ0FHZCtULFNBQVUsWUFBWXRrQyxLQUFLNmpDLFdBQVdRLHVCQUF1QnJrQyxLQUFLNmpDLFdBQVdTLFlBRWpGMVQsYUFBYSxFQUNiaEMsd0JBQXdCLEVBQ3hCSCxzQkFBdUIsQ0FPbkJvOUIsK0JBQWdDLEtBRXBDNzhCLGlCQUFrQmh2QixLQUFLZ3ZCLGlCQUN2QkMscUJBQXNCanZCLEtBQUtpa0MsdUJBQzVCMzhCLEVBQUl0SCxLQUFLa2tDLG1CQUFtQjRuQixvQkFDL0IsSUFBV3hrRCxJQUFNSixFQUFFZ29CLG1CQUFxQnpWLEtBQUtpVyxNQUFNLElBQU1wb0IsSUFBS3RILEtBQUtta0Msa0JBQW9CajlCLEVBQUV5bkIsZUFBaUIsSUFBSW9HLEdBQW9CLENBQUMsSUFDbkkvMEIsS0FBS3lyRCxHQUFHdmtELEVBQUV3cEIsbUJBQW9CclAsRUFBRzNHLEdBVWpDeFQsRUFBRTZuQiwwQkFBMkIsRUFDN0IsTUFBTTVyQixFQUFJM0MsRUFBRWlDLEtBQUssSUFDakJxekIsR0FBbUIrYixHQUFJLGlCQUFpQjN4QyxhQUFhbWEsTUFBTWxYLElBQUsrRCxHQUNoRSxNQUFNeEcsRUFBSWthLEVBQUVvWSxpQkFBaUI3dkIsRUFBRytELEdBTXhCLElBQUlvUyxHQUFJLEVBQUltQixHQUFJLEVBSWhCLE1BQU1pRyxFQUFJLElBQUkycEMsR0FBdUIsQ0FDekNDLEdBQUlqcEMsSUFDQTVHLEVBQUlxYixHQUFtQitiLEdBQUksNEJBQTRCM3hDLGFBQWFtYSxlQUFnQmdILElBQU0vSCxJQUFNd2MsR0FBbUIrYixHQUFJLGdCQUFnQjN4QyxhQUFhbWEsZ0JBQ3BKM1osRUFBRTRVLE9BQVFnRSxHQUFJLEdBQUt3YyxHQUFtQitiLEdBQUksUUFBUTN4QyxhQUFhbWEsYUFBY2dILEdBQzdFM2dCLEVBQUVrc0IsS0FBS3ZMLEdBQUcsRUFFZGtwQyxHQUFJLElBQU03cEQsRUFBRWdZLFVBQ1pxekMsRUFBaUMsQ0FBQzdyRCxFQUFHbWhCLEVBQUczRyxLQUd4Q3hhLEVBQUVvekIsT0FBT2pTLEdBQUluaEIsSUFDVCxJQUNJd2EsRUFBRXhhLEVBQ04sQ0FBRSxNQUFPQSxHQUNMOGhCLFlBQVcsS0FDUCxNQUFNOWhCLENBQ1QsR0FBRyxFQUNSLENBQ0gsR0FBRSxFQU1DLE9BQU82ckQsRUFBK0JyckQsRUFBR3MwQixHQUFXN0IsVUFBVW5PLE1BQU0sS0FDeEV2SyxHQUFLcWIsR0FBbUIrYixHQUFJLFFBQVEzeEMsYUFBYW1hLHNCQUNwRCxJQUFJMHhDLEVBQStCcnJELEVBQUdzMEIsR0FBVzdCLFVBQVVDLE9BQU8sS0FDL0QzWSxJQUFNQSxHQUFJLEVBQUlxYixHQUFtQitiLEdBQUksUUFBUTN4QyxhQUFhbWEsc0JBQzFEcUcsRUFBRXFxQyxLQUNMLElBQUlnQixFQUErQnJyRCxFQUFHczBCLEdBQVc3QixVQUFVcm1CLE9BQVF1VSxJQUNoRTVHLElBQU1BLEdBQUksRUFBSXdiLEdBQWtCNGIsR0FBSSxRQUFRM3hDLGFBQWFtYSx1QkFBd0JnSCxHQUNqRlgsRUFBRXFxQyxHQUFHLElBQUkzekIsR0FBZSxHQUFFRixZQUFhLHlDQUMxQyxJQUFJNjBCLEVBQStCcnJELEVBQUdzMEIsR0FBVzdCLFVBQVVFLFNBQVVoUyxJQUNsRSxJQUFJM0csRUFDSixJQUFLRCxFQUFHLENBQ0osTUFBTWphLEVBQUk2Z0IsRUFBRXZhLEtBQUssR0FDakJxdkIsS0FBdUIzMUIsR0FNdkIsTUFBTW9hLEVBQUlwYSxFQUFHcWEsRUFBSUQsRUFBRTNWLFFBQVUsUUFBVXlWLEVBQUlFLEVBQUUsVUFBTyxJQUFXRixPQUFJLEVBQVNBLEVBQUV6VixPQUM5RSxHQUFJNFYsRUFBRyxDQUNIaWIsR0FBbUIrYixHQUFJLFFBQVEzeEMsYUFBYW1hLG9CQUFxQlEsR0FFakUsTUFBTXdHLEVBQUl4RyxFQUFFb1IsT0FDWixJQUFJdlIsRUFPSixTQUF3Q3hhLEdBR3BDLE1BQU1taEIsRUFBSWd2QixHQUFHbndDLEdBQ2IsUUFBSSxJQUFXbWhCLEVBQUcsT0FBT2l2QixHQUE2Qmp2QixFQUMxRCxDQUxBLENBS0VBLEdBQUk3Z0IsRUFBSXFhLEVBQUUxVSxhQUNaLElBQVd1VSxJQUFNQSxFQUFJLEdBQUV2UCxTQUFVM0ssRUFBSSx5QkFBMkI2Z0IsRUFBSSxpQkFBbUJ4RyxFQUFFMVUsU0FFekZzVSxHQUFJLEVBQUlpRyxFQUFFcXFDLEdBQUcsSUFBSTN6QixHQUFlMWMsRUFBR2xhLElBQUtFLEVBQUVnWSxPQUM5QyxNQUFPb2QsR0FBbUIrYixHQUFJLFFBQVEzeEMsYUFBYW1hLGNBQWU3WixHQUFJa2dCLEVBQUVzcUMsR0FBR3hxRCxFQUMvRSxDQUNILElBQUl1ckQsRUFBK0JseEMsRUFBRzhaLEdBQU03USxZQUFhekMsSUFDdERBLEVBQUUwQyxPQUFTNlEsR0FBS0MsTUFBUWlCLEdBQW1CK2IsR0FBSSxRQUFRM3hDLGFBQWFtYSw4QkFBZ0NnSCxFQUFFMEMsT0FBUzZRLEdBQUtFLFNBQVdnQixHQUFtQitiLEdBQUksUUFBUTN4QyxhQUFhbWEsZ0NBQzlLLElBQUkySCxZQUFXLEtBS1p0QixFQUFFb3FDLElBQ0wsR0FBRyxHQUFJcHFDLENBQ1osRUEyQ3NFLFNBQVM0OEIsS0FHL0UsTUFBTyxvQkFBc0IxNEMsU0FBV0EsU0FBVyxJQUN2RCxDQWlCSSxTQUFTb25ELEdBQXdCOXJELEdBQ2pDLE9BQU8sSUFBSTIyQyxHQUFvQjMyQyxHQUF3QixFQUMzRCxDQTJCQSxNQUFNK3JELEdBQ0YsV0FBQXRvRCxDQUlBekQsRUFJQW1oQixFQU1BM0csRUFBSSxJQUlFTCxFQUFJLElBS0o3WixFQUFJLEtBQ05SLEtBQUtrc0QsR0FBS2hzRCxFQUFHRixLQUFLbXNELFFBQVU5cUMsRUFBR3JoQixLQUFLb3NELEdBQUsxeEMsRUFBRzFhLEtBQUtxc0QsR0FBS2h5QyxFQUFHcmEsS0FBS3NzRCxHQUFLOXJELEVBQUdSLEtBQUt1c0QsR0FBSyxFQUNoRnZzRCxLQUFLd3NELEdBQUssS0FFVnhzRCxLQUFLeXNELEdBQUtsL0MsS0FBS0QsTUFBT3ROLEtBQUs2aEIsT0FDL0IsQ0FPTyxLQUFBQSxHQUNIN2hCLEtBQUt1c0QsR0FBSyxDQUNkLENBSU8sRUFBQUcsR0FDSDFzRCxLQUFLdXNELEdBQUt2c0QsS0FBS3NzRCxFQUNuQixDQUtPLEVBQUFLLENBQUd6c0QsR0FFTkYsS0FBS29wQixTQUdMLE1BQU0vSCxFQUFJNUgsS0FBS3VRLE1BQU1ocUIsS0FBS3VzRCxHQUFLdnNELEtBQUs0c0QsTUFBT2x5QyxFQUFJakIsS0FBS21XLElBQUksRUFBR3JpQixLQUFLRCxNQUFRdE4sS0FBS3lzRCxJQUFLcHlDLEVBQUlaLEtBQUttVyxJQUFJLEVBQUd2TyxFQUFJM0csR0FFOUZMLEVBQUksR0FBS3liLEdBQW1CLHFCQUFzQixtQkFBbUJ6YixxQkFBcUJyYSxLQUFLdXNELDZCQUE2QmxyQyx1QkFBdUIzRyxhQUMzSjFhLEtBQUt3c0QsR0FBS3hzRCxLQUFLa3NELEdBQUdXLGtCQUFrQjdzRCxLQUFLbXNELFFBQVM5eEMsR0FBRyxLQUFRcmEsS0FBS3lzRCxHQUFLbC9DLEtBQUtELE1BQzVFcE4sT0FHQUYsS0FBS3VzRCxJQUFNdnNELEtBQUtxc0QsR0FBSXJzRCxLQUFLdXNELEdBQUt2c0QsS0FBS29zRCxLQUFPcHNELEtBQUt1c0QsR0FBS3ZzRCxLQUFLb3NELElBQUtwc0QsS0FBS3VzRCxHQUFLdnNELEtBQUtzc0QsS0FBT3RzRCxLQUFLdXNELEdBQUt2c0QsS0FBS3NzRCxHQUN2RyxDQUNBLEVBQUFRLEdBQ0ksT0FBUzlzRCxLQUFLd3NELEtBQU94c0QsS0FBS3dzRCxHQUFHTyxZQUFhL3NELEtBQUt3c0QsR0FBSyxLQUN4RCxDQUNBLE1BQUFwakMsR0FDSSxPQUFTcHBCLEtBQUt3c0QsS0FBT3hzRCxLQUFLd3NELEdBQUdwakMsU0FBVXBwQixLQUFLd3NELEdBQUssS0FDckQsQ0FDa0YsRUFBQUksR0FDOUUsT0FBUW56QyxLQUFLQyxTQUFXLElBQU0xWixLQUFLdXNELEVBQ3ZDLEVBbURKLE1BQU1TLEdBQ0YsV0FBQXJwRCxDQUFZekQsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEVBQUdvYSxFQUFHQyxFQUFHM1QsR0FDN0JsSCxLQUFLa3NELEdBQUtoc0QsRUFBR0YsS0FBS2l0RCxHQUFLdnlDLEVBQUcxYSxLQUFLa3RELEdBQUs3eUMsRUFBR3JhLEtBQUttdEQsV0FBYTNzRCxFQUFHUixLQUFLb3RELHdCQUEwQnh5QyxFQUMzRjVhLEtBQUtxdEQsNEJBQThCeHlDLEVBQUc3YSxLQUFLNGUsU0FBVzFYLEVBQUdsSCxLQUFLNGQsTUFBUSxFQU10RTVkLEtBQUtzdEQsR0FBSyxFQUFHdHRELEtBQUt1dEQsR0FBSyxLQUFNdnRELEtBQUt3dEQsR0FBSyxLQUFNeHRELEtBQUsrb0IsT0FBUyxLQUFNL29CLEtBQUt5dEQsR0FBSyxJQUFJeEIsR0FBNkIvckQsRUFBR21oQixFQUNuSCxDQU9PLEVBQUFxc0MsR0FDSCxPQUFPLElBQTJDMXRELEtBQUs0ZCxPQUFTLElBQTBDNWQsS0FBSzRkLE9BQVM1ZCxLQUFLMnRELElBQ2pJLENBSU8sRUFBQUEsR0FDSCxPQUFPLElBQXVDM3RELEtBQUs0ZCxPQUFTLElBQTBDNWQsS0FBSzRkLEtBQy9HLENBT08sS0FBQWtGLEdBQ0gsSUFBd0M5aUIsS0FBSzRkLE1BQVE1ZCxLQUFLbTRCLE9BQVNuNEIsS0FBSzR0RCxJQUM1RSxDQU1PLFVBQU1DLEdBQ1Q3dEQsS0FBSzB0RCxZQUFjMXRELEtBQUswWSxNQUFNLEVBQ2xDLENBUU8sRUFBQW8xQyxHQUNIOXRELEtBQUs0ZCxNQUFRLEVBQXdDNWQsS0FBS3l0RCxHQUFHNXJDLE9BQ2pFLENBVU8sRUFBQWtzQyxHQUdIL3RELEtBQUsydEQsTUFBUSxPQUFTM3RELEtBQUt1dEQsS0FBT3Z0RCxLQUFLdXRELEdBQUt2dEQsS0FBS2tzRCxHQUFHVyxrQkFBa0I3c0QsS0FBS2l0RCxHQUFJLEtBQUssSUFBT2p0RCxLQUFLZ3VELE9BQ3BHLENBQ29ELEVBQUFDLENBQUcvdEQsR0FDbkRGLEtBQUtrdUQsS0FBTWx1RCxLQUFLK29CLE9BQU82RCxLQUFLMXNCLEVBQ2hDLENBQ21GLFFBQU04dEQsR0FDckYsR0FBSWh1RCxLQUFLMnRELEtBR1QsT0FBTzN0RCxLQUFLMFksTUFBTSxFQUN0QixDQUM0QyxFQUFBdzFDLEdBQ3hDbHVELEtBQUt1dEQsS0FBT3Z0RCxLQUFLdXRELEdBQUdua0MsU0FBVXBwQixLQUFLdXRELEdBQUssS0FDNUMsQ0FDc0QsRUFBQVksR0FDbERudUQsS0FBS3d0RCxLQUFPeHRELEtBQUt3dEQsR0FBR3BrQyxTQUFVcHBCLEtBQUt3dEQsR0FBSyxLQUM1QyxDQWFPLFdBQU05MEMsQ0FBTXhZLEVBQUdtaEIsR0FFbEJyaEIsS0FBS2t1RCxLQUFNbHVELEtBQUttdUQsS0FBTW51RCxLQUFLeXRELEdBQUdya0MsU0FHOUJwcEIsS0FBS3N0RCxLQUFNLElBQXdDcHRELEVBRW5ERixLQUFLeXRELEdBQUc1ckMsUUFBVVIsR0FBS0EsRUFBRW5iLE9BQVMsR0FBRTJ3QixvQkFFcENiLEdBQW1CM1UsRUFBRW5ILFlBQWE4YixHQUFtQixtRUFDckRoMkIsS0FBS3l0RCxHQUFHZixNQUFRcnJDLEdBQUtBLEVBQUVuYixPQUFTLEdBQUV1dkIsaUJBQW1CLElBQTBDejFCLEtBQUs0ZCxRQU9wRzVkLEtBQUtvdEQsd0JBQXdCMTFCLGtCQUFtQjEzQixLQUFLcXRELDRCQUE0QjMxQixtQkFFakYsT0FBUzEzQixLQUFLK29CLFNBQVcvb0IsS0FBS291RCxLQUFNcHVELEtBQUsrb0IsT0FBT3JRLFFBQVMxWSxLQUFLK29CLE9BQVMsTUFHdkUvb0IsS0FBSzRkLE1BQVExZCxRQUVQRixLQUFLNGUsU0FBUzhyQyxHQUFHcnBDLEVBQzNCLENBSU8sRUFBQStzQyxHQUFNLENBQ2IsSUFBQWoyQixHQUNJbjRCLEtBQUs0ZCxNQUFRLEVBQ2IsTUFBTTFkLEVBQUlGLEtBQUtxdUQsR0FBR3J1RCxLQUFLc3RELElBQUtqc0MsRUFBSXJoQixLQUFLc3RELEdBRTdCMW5ELFFBQVFvRixJQUFJLENBQUVoTCxLQUFLb3RELHdCQUF3QjMxQixXQUFZejNCLEtBQUtxdEQsNEJBQTRCNTFCLGFBQWNwbUIsTUFBSyxFQUFHblIsRUFBR3dhLE1BS3JIMWEsS0FBS3N0RCxLQUFPanNDLEdBSVpyaEIsS0FBS3N1RCxHQUFHcHVELEVBQUd3YSxFQUNkLElBQUkyRyxJQUNEbmhCLEdBQUUsS0FDRSxNQUFNQSxFQUFJLElBQUlrM0IsR0FBZSxHQUFFYixRQUFTLCtCQUFpQ2xWLEVBQUVsYixTQUMzRSxPQUFPbkcsS0FBS3V1RCxHQUFHcnVELEVBQ2xCLEdBQ0osR0FDTCxDQUNBLEVBQUFvdUQsQ0FBR3B1RCxFQUFHbWhCLEdBQ0YsTUFBTTNHLEVBQUkxYSxLQUFLcXVELEdBQUdydUQsS0FBS3N0RCxJQUN2QnR0RCxLQUFLK29CLE9BQVMvb0IsS0FBS3d1RCxHQUFHdHVELEVBQUdtaEIsR0FBSXJoQixLQUFLK29CLE9BQU95aEMsSUFBRyxLQUN4Qzl2QyxHQUFFLEtBQVExYSxLQUFLNGQsTUFBUSxFQUFxQzVkLEtBQUt3dEQsR0FBS3h0RCxLQUFLa3NELEdBQUdXLGtCQUFrQjdzRCxLQUFLa3RELEdBQUksS0FBSyxLQUFRbHRELEtBQUsydEQsT0FBUzN0RCxLQUFLNGQsTUFBUSxHQUNqSmhZLFFBQVFGLGFBQWMxRixLQUFLNGUsU0FBUzRyQyxPQUN2QyxJQUFJeHFELEtBQUsrb0IsT0FBTzJoQyxJQUFJeHFELElBQ2pCd2EsR0FBRSxJQUFPMWEsS0FBS3V1RCxHQUFHcnVELElBQ3BCLElBQUlGLEtBQUsrb0IsT0FBTzZoQyxXQUFXMXFELElBQ3hCd2EsR0FBRSxJQUFPMWEsS0FBSzRxRCxVQUFVMXFELElBQzNCLEdBQ0wsQ0FDQSxFQUFBMHRELEdBQ0k1dEQsS0FBSzRkLE1BQVEsRUFBd0M1ZCxLQUFLeXRELEdBQUdkLElBQUcsVUFDNUQzc0QsS0FBSzRkLE1BQVEsRUFBd0M1ZCxLQUFLOGlCLE9BQzdELEdBQ0wsQ0FFQSxFQUFBeXJDLENBQUdydUQsR0FLQyxPQUFPNDFCLEdBQW1CLG1CQUFvQixxQkFBcUI1MUIsS0FBTUYsS0FBSytvQixPQUFTLEtBQ3ZGL29CLEtBQUswWSxNQUFNLEVBQXNDeFksRUFDckQsQ0FNTyxFQUFBbXVELENBQUdudUQsR0FDTixPQUFPbWhCLElBQ0hyaEIsS0FBS2tzRCxHQUFHdUMsa0JBQWlCLElBQU96dUQsS0FBS3N0RCxLQUFPcHRELEVBQUltaEIsS0FBT3lVLEdBQW1CLG1CQUFvQix5REFDOUZsd0IsUUFBUUYsWUFBWSxDQUU1QixFQVNBLE1BQU1ncEQsV0FBeUMxQixHQUMvQyxXQUFBcnBELENBQVl6RCxFQUFHbWhCLEVBQUczRyxFQUFHTCxFQUFHN1osRUFBR29hLEdBQ3ZCaFgsTUFBTTFELEVBQUcsbUNBQWlGLHFCQUFzRCx1QkFBMERtaEIsRUFBRzNHLEVBQUdMLEVBQUdPLEdBQ25ONWEsS0FBS3l0QyxXQUFhanRDLENBQ3RCLENBQ0EsRUFBQWd1RCxDQUFHdHVELEVBQUdtaEIsR0FDRixPQUFPcmhCLEtBQUttdEQsV0FBV3ZCLEdBQUcsU0FBVTFyRCxFQUFHbWhCLEVBQzNDLENBQ0EsU0FBQXVwQyxDQUFVMXFELEdBRU5GLEtBQUt5dEQsR0FBRzVyQyxRQUNSLE1BQU1SLEVBaHlPZCxTQUFtQ25oQixFQUFHbWhCLEdBQ2xDLElBQUkzRyxFQUNKLEdBQUksaUJBQWtCMkcsRUFBRyxDQUNyQkEsRUFBRXN0QyxhQUdGLE1BQU10MEMsRUFBSSxTQUE4Q25hLEdBQ3BELE1BQU8sY0FBZ0JBLEVBQUksRUFBMEMsUUFBVUEsRUFBSSxFQUF1QyxXQUFhQSxFQUFJLEVBQXlDLFlBQWNBLEVBQUksRUFBeUMsVUFBWUEsRUFBSSxFQUF1Q2cyQixJQUMxUyxDQUZVLENBRVI3VSxFQUFFc3RDLGFBQWFDLGtCQUFvQixhQUFjcHVELEVBQUk2Z0IsRUFBRXN0QyxhQUFhdmIsV0FBYSxHQUFJeDRCLEVBQUksU0FBNkIxYSxFQUFHbWhCLEdBQ3ZILE9BQU9uaEIsRUFBRXF0QyxlQUFpQnBYLFFBQXFCLElBQVc5VSxHQUFLLGlCQUFtQkEsR0FDbEY4Z0IsR0FBV0UsaUJBQWlCaGhCLEdBQUssTUFBUThVLFFBQXFCLElBQVc5VSxHQUFLQSxhQUFha00sWUFDM0Y0VSxHQUFXRyxlQUFlamhCLEdBQUssSUFBSWtNLFlBQ3ZDLENBSjJGLENBSXpGcnRCLEVBQUdtaEIsRUFBRXN0QyxhQUFhcGMsYUFBYzEzQixFQUFJd0csRUFBRXN0QyxhQUFhdGIsTUFBT25zQyxFQUFJMlQsR0FBSyxTQUFpQzNhLEdBQ2xHLE1BQU1taEIsT0FBSSxJQUFXbmhCLEVBQUVnRyxLQUFPLEdBQUVxd0IsUUFBVStaLEdBQTZCcHdDLEVBQUVnRyxNQUN6RSxPQUFPLElBQUlreEIsR0FBZS9WLEVBQUduaEIsRUFBRWlHLFNBQVcsR0FDOUMsQ0FIcUUsQ0FHbkUwVSxHQUNGSCxFQUFJLElBQUl5NEIsR0FBNEI5NEIsRUFBRzdaLEVBQUdvYSxFQUFHMVQsR0FBSyxLQUN0RCxNQUFPLEdBQUksbUJBQW9CbWEsRUFBRyxDQUM5QkEsRUFBRXd0QyxlQUNGLE1BQU14MEMsRUFBSWdILEVBQUV3dEMsZUFDWngwQyxFQUFFelYsU0FBVXlWLEVBQUV6VixTQUFTZCxLQUFNdVcsRUFBRXpWLFNBQVNrcEMsV0FDeEMsTUFBTXR0QyxFQUFJaThCLEdBQVN2OEIsRUFBR21hLEVBQUV6VixTQUFTZCxNQUFPOFcsRUFBSW04QixHQUFzQjE4QixFQUFFelYsU0FBU2twQyxZQUFhanpCLEVBQUlSLEVBQUV6VixTQUFTMmhDLFdBQWF3USxHQUFzQjE4QixFQUFFelYsU0FBUzJoQyxZQUFjaE0sR0FBZ0I1SyxNQUFPem9CLEVBQUksSUFBSTYrQixHQUFZLENBQzVNM0MsU0FBVSxDQUNOcEIsT0FBUTNuQixFQUFFelYsU0FBU285QixVQUV2QjE2QixFQUFJKytCLEdBQWdCSyxpQkFBaUJsbUMsRUFBR29hLEVBQUdDLEVBQUczVCxHQUFJL0QsRUFBSWtYLEVBQUUrNEIsV0FBYSxHQUFJMXlDLEVBQUkyWixFQUFFeTRCLGtCQUFvQixHQUN2R3A0QixFQUFJLElBQUlrNEIsR0FBOEJ6dkMsRUFBR3pDLEVBQUc0RyxFQUFFSCxJQUFLRyxFQUN2RCxNQUFPLEdBQUksbUJBQW9CK1osRUFBRyxDQUM5QkEsRUFBRXl0QyxlQUNGLE1BQU16MEMsRUFBSWdILEVBQUV5dEMsZUFDWnowQyxFQUFFelYsU0FDRixNQUFNcEUsRUFBSWk4QixHQUFTdjhCLEVBQUdtYSxFQUFFelYsVUFBV2dXLEVBQUlQLEVBQUU4aUIsU0FBVzRaLEdBQXNCMThCLEVBQUU4aUIsVUFBWTVDLEdBQWdCNUssTUFBTzlVLEVBQUl3ckIsR0FBZ0JNLGNBQWNubUMsRUFBR29hLEdBQUkxVCxFQUFJbVQsRUFBRXk0QixrQkFBb0IsR0FDbExwNEIsRUFBSSxJQUFJazRCLEdBQThCLEdBQUkxckMsRUFBRzJULEVBQUUxVCxJQUFLMFQsRUFDeEQsTUFBTyxHQUFJLG1CQUFvQndHLEVBQUcsQ0FDOUJBLEVBQUUwdEMsZUFDRixNQUFNMTBDLEVBQUlnSCxFQUFFMHRDLGVBQ1oxMEMsRUFBRXpWLFNBQ0YsTUFBTXBFLEVBQUlpOEIsR0FBU3Y4QixFQUFHbWEsRUFBRXpWLFVBQVdnVyxFQUFJUCxFQUFFeTRCLGtCQUFvQixHQUM3RHA0QixFQUFJLElBQUlrNEIsR0FBOEIsR0FBSWg0QixFQUFHcGEsRUFBRyxLQUNwRCxLQUFPLENBQ0gsS0FBTSxXQUFZNmdCLEdBQUksT0FBTzZVLEtBQzdCLENBQ0k3VSxFQUFFcFcsT0FDRixNQUFNL0ssRUFBSW1oQixFQUFFcFcsT0FDWi9LLEVBQUUreUMsU0FDRixNQUFPOUMsTUFBTzkxQixFQUFJLEVBQUcrMUIsZUFBZ0I1dkMsR0FBS04sRUFBRzBhLEVBQUksSUFBSXMxQixHQUFnQjcxQixFQUFHN1osR0FBSXFhLEVBQUkzYSxFQUFFK3lDLFNBQ2xGdjRCLEVBQUksSUFBSXM0QixHQUFnQ240QixFQUFHRCxFQUMvQyxDQUNKLENBQ0EsT0FBT0YsQ0FDWCxDQTh1T2tCczBDLENBQTBCaHZELEtBQUt5dEMsV0FBWXZ0QyxHQUFJd2EsRUFBSSxTQUE2Q3hhLEdBSXRHLEtBQU0saUJBQWtCQSxHQUFJLE9BQU9xNkIsR0FBZ0I1SyxNQUNuRCxNQUFNdE8sRUFBSW5oQixFQUFFeXVELGFBQ1osT0FBT3R0QyxFQUFFK3hCLFdBQWEveEIsRUFBRSt4QixVQUFVM3lDLE9BQVM4NUIsR0FBZ0I1SyxNQUFRdE8sRUFBRThiLFNBQVc0WixHQUFzQjExQixFQUFFOGIsVUFBWTVDLEdBQWdCNUssS0FDeEksQ0FQNkQsQ0FPM0R6dkIsR0FDRixPQUFPRixLQUFLNGUsU0FBU3F3QyxHQUFHNXRDLEVBQUczRyxFQUMvQixDQU1PLEVBQUF3MEMsQ0FBR2h2RCxHQUNOLE1BQU1taEIsRUFBSSxDQUFDLEVBQ1hBLEVBQUVpakIsU0FBVytTLEdBQStCcjNDLEtBQUt5dEMsWUFBYXBzQixFQUFFOHRDLFVBQVksU0FBNEJqdkQsRUFBR21oQixHQUN2RyxJQUFJM0csRUFDSixNQUFNTCxFQUFJZ0gsRUFBRWxTLE9BQ1osR0FBSXVMLEVBQUkrdkIsR0FBaUNwd0IsR0FBSyxDQUMxQ2s5QixVQUFXRCxHQUE0QnAzQyxFQUFHbWEsSUFDMUMsQ0FDQTZrQyxNQUFPMUgsR0FBd0J0M0MsRUFBR21hLElBQ25DSyxFQUFFdTRCLFNBQVc1eEIsRUFBRTR4QixTQUFVNXhCLEVBQUVreEIsWUFBWTVQLHNCQUF3QixFQUFHLENBQ2pFam9CLEVBQUU2M0IsWUFyNU9sQixTQUEyQnJ5QyxFQUFHbWhCLEdBQzFCLE9BQU9uaEIsRUFBRXF0QyxjQUFnQmxzQixFQUFFb2hCLFdBQWFwaEIsRUFBRXFoQixjQUM5QyxDQW01T2dDMHNCLENBQWtCbHZELEVBQUdtaEIsRUFBRWt4QixhQUN2QyxNQUFNbDRCLEVBQUl5OEIsR0FBdUI1MkMsRUFBR21oQixFQUFFNjNCLGVBQ3RDLE9BQVM3K0IsSUFBTUssRUFBRXcrQixjQUFnQjcrQixFQUNyQyxNQUFPLEdBQUlnSCxFQUFFMHdCLGdCQUFnQnJYLFVBQVVILEdBQWdCNUssT0FBUyxFQUFHLENBSS9EalYsRUFBRXlpQixTQTM2T2xCLFNBQXFCajlCLEVBQUdtaEIsR0FDcEIsT0FBSW5oQixFQUFFcXRDLGNBQ0ssR0FBRyxJQUFJaGdDLEtBQUssSUFBTThULEVBQUV3WSxTQUFTcnNCLGNBQWN0SixRQUFRLFFBQVMsSUFBSUEsUUFBUSxJQUFLLFFBQVEsWUFBY21kLEVBQUV5WSxhQUFhcGlCLE9BQU8sTUFFN0gsQ0FDSG1pQixRQUFTLEdBQUt4WSxFQUFFd1ksUUFDaEJtSixNQUFPM2hCLEVBQUV5WSxZQUVqQixDQW02TzZCYyxDQUFZMTZCLEVBQUdtaEIsRUFBRTB3QixnQkFBZ0JuWCxlQUM5QyxNQUFNdmdCLEVBQUl5OEIsR0FBdUI1MkMsRUFBR21oQixFQUFFNjNCLGVBQ3RDLE9BQVM3K0IsSUFBTUssRUFBRXcrQixjQUFnQjcrQixFQUNyQyxDQUNBLE9BQU9LLENBQ1gsQ0FwQjRFLENBb0IxRTFhLEtBQUt5dEMsV0FBWXZ0QyxHQUNuQixNQUFNd2EsRUFqa09kLFNBQXlDeGEsRUFBR21oQixHQUN4QyxNQUFNM0csRUFBSSxTQUEyQnhhLEdBQ2pDLE9BQVFBLEdBQ04sSUFBSyxzQkFDSCxPQUFPLEtBRVQsSUFBSyx1Q0FDSCxNQUFPLDRCQUVULElBQUssNENBQ0gsTUFBTyxrQ0FFVCxJQUFLLCtCQUNILE1BQU8saUJBRVQsUUFDRSxPQUFPZzJCLEtBRWYsQ0FqQlUsQ0FpQlI3VSxFQUFFazFCLFNBQ0osT0FBTyxNQUFRNzdCLEVBQUksS0FBTyxDQUN0QixtQkFBb0JBLEVBRTVCLENBMmlPa0IyMEMsQ0FBZ0NydkQsS0FBS3l0QyxXQUFZdnRDLEdBQzNEd2EsSUFBTTJHLEVBQUVpdUMsT0FBUzUwQyxHQUFJMWEsS0FBS2l1RCxHQUFHNXNDLEVBQ2pDLENBSU8sRUFBQWt1QyxDQUFHcnZELEdBQ04sTUFBTW1oQixFQUFJLENBQUMsRUFDWEEsRUFBRWlqQixTQUFXK1MsR0FBK0JyM0MsS0FBS3l0QyxZQUFhcHNCLEVBQUUrekIsYUFBZWwxQyxFQUMvRUYsS0FBS2l1RCxHQUFHNXNDLEVBQ1osRUFtR0osTUFBTW11QyxXQUFnQyxRQUNsQyxXQUFBN3JELENBQVl6RCxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUNqQnpXLFFBQVM1RCxLQUFLeXZELGdCQUFrQnZ2RCxFQUFHRixLQUFLMHZELG9CQUFzQnJ1QyxFQUFHcmhCLEtBQUttdEQsV0FBYXp5QyxFQUNuRjFhLEtBQUt5dEMsV0FBYXB6QixFQUFHcmEsS0FBSzJ2RCxJQUFLLENBQ25DLENBQ0EsRUFBQUMsR0FDSSxHQUFJNXZELEtBQUsydkQsR0FBSSxNQUFNLElBQUl2NEIsR0FBZSxHQUFFTixvQkFBcUIsMENBQ2pFLENBQ2tFLEVBQUF5MEIsQ0FBR3JyRCxFQUFHbWhCLEVBQUczRyxHQUN2RSxPQUFPMWEsS0FBSzR2RCxLQUFNaHFELFFBQVFvRixJQUFJLENBQUVoTCxLQUFLeXZELGdCQUFnQmg0QixXQUFZejNCLEtBQUswdkQsb0JBQW9CajRCLGFBQWNwbUIsTUFBSyxFQUFHZ0osRUFBRzdaLEtBQU9SLEtBQUttdEQsV0FBVzVCLEdBQUdyckQsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEtBQUt3RixPQUFPOUYsSUFDakssS0FBTSxrQkFBb0JBLEVBQUU0RCxNQUFRNUQsRUFBRWdHLE9BQVMsR0FBRXV2QixrQkFBb0J6MUIsS0FBS3l2RCxnQkFBZ0IvM0Isa0JBQzFGMTNCLEtBQUswdkQsb0JBQW9CaDRCLG1CQUFvQngzQixHQUFLLElBQUlrM0IsR0FBZSxHQUFFYixRQUFTcjJCLEVBQUVnYSxXQUNyRixHQUNMLENBQ3dGLEVBQUF5eEMsQ0FBR3pyRCxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUNoRyxPQUFPcmEsS0FBSzR2RCxLQUFNaHFELFFBQVFvRixJQUFJLENBQUVoTCxLQUFLeXZELGdCQUFnQmg0QixXQUFZejNCLEtBQUswdkQsb0JBQW9CajRCLGFBQWNwbUIsTUFBSyxFQUFHN1EsRUFBR29hLEtBQU81YSxLQUFLbXRELFdBQVd4QixHQUFHenJELEVBQUdtaEIsRUFBRzNHLEVBQUdsYSxFQUFHb2EsRUFBR1AsS0FBS3JVLE9BQU85RixJQUNwSyxLQUFNLGtCQUFvQkEsRUFBRTRELE1BQVE1RCxFQUFFZ0csT0FBUyxHQUFFdXZCLGtCQUFvQnoxQixLQUFLeXZELGdCQUFnQi8zQixrQkFDMUYxM0IsS0FBSzB2RCxvQkFBb0JoNEIsbUJBQW9CeDNCLEdBQUssSUFBSWszQixHQUFlLEdBQUViLFFBQVNyMkIsRUFBRWdhLFdBQ3JGLEdBQ0wsQ0FDQSxTQUFBMjFDLEdBQ0k3dkQsS0FBSzJ2RCxJQUFLLENBQ2QsRUE4REosTUFBTUcsR0FDRixXQUFBbnNELENBQVl6RCxFQUFHbWhCLEdBQ1hyaEIsS0FBSyt2RCxXQUFhN3ZELEVBQUdGLEtBQUswb0QsbUJBQXFCcm5DLEVBRS9DcmhCLEtBQUs0ZCxNQUFRLFVBTWI1ZCxLQUFLZ3dELEdBQUssRUFNVmh3RCxLQUFLaXdELEdBQUssS0FNVmp3RCxLQUFLa3dELElBQUssQ0FDZCxDQU9PLEVBQUFDLEdBQ0gsSUFBTW53RCxLQUFLZ3dELEtBQU9od0QsS0FBS293RCxHQUFHLFdBQXNDcHdELEtBQUtpd0QsR0FBS2p3RCxLQUFLK3ZELFdBQVdsRCxrQkFBa0IsdUJBQTBELEtBQUssS0FBUTdzRCxLQUFLaXdELEdBQUssS0FDN0xqd0QsS0FBS3F3RCxHQUFHLDZDQUE4Q3J3RCxLQUFLb3dELEdBQUcsV0FDOUR4cUQsUUFBUUYsYUFDWixDQU1PLEVBQUE0cUQsQ0FBR3B3RCxHQUNOLFdBQXNDRixLQUFLNGQsTUFBUTVkLEtBQUtvd0QsR0FBRyxZQUF3Q3B3RCxLQUFLZ3dELEtBQ3hHaHdELEtBQUtnd0QsSUFBTSxJQUFNaHdELEtBQUt1d0QsS0FBTXZ3RCxLQUFLcXdELEdBQUcsaURBQWlEbndELEVBQUVnYSxjQUN2RmxhLEtBQUtvd0QsR0FBRyxZQUNaLENBT08sR0FBQXZtRCxDQUFJM0osR0FDUEYsS0FBS3V3RCxLQUFNdndELEtBQUtnd0QsR0FBSyxFQUFHLFdBQXNDOXZELElBRzlERixLQUFLa3dELElBQUssR0FBS2x3RCxLQUFLb3dELEdBQUdsd0QsRUFDM0IsQ0FDQSxFQUFBa3dELENBQUdsd0QsR0FDQ0EsSUFBTUYsS0FBSzRkLFFBQVU1ZCxLQUFLNGQsTUFBUTFkLEVBQUdGLEtBQUswb0QsbUJBQW1CeG9ELEdBQ2pFLENBQ0EsRUFBQW13RCxDQUFHbndELEdBQ0MsTUFBTW1oQixFQUFJLDRDQUE0Q25oQiwyTUFDdERGLEtBQUtrd0QsSUFBTWw2QixHQUFtQjNVLEdBQUlyaEIsS0FBS2t3RCxJQUFLLEdBQU1wNkIsR0FBbUIscUJBQXNCelUsRUFDL0YsQ0FDQSxFQUFBa3ZDLEdBQ0ksT0FBU3Z3RCxLQUFLaXdELEtBQU9qd0QsS0FBS2l3RCxHQUFHN21DLFNBQVVwcEIsS0FBS2l3RCxHQUFLLEtBQ3JELEVBa0JBLE1BQU1PLEdBQ04sV0FBQTdzRCxDQUlBekQsRUFFQW1oQixFQUFHM0csRUFBR0wsRUFBRzdaLEdBQ0xSLEtBQUt5d0QsV0FBYXZ3RCxFQUFHRixLQUFLMHdELFVBQVlydkMsRUFBR3JoQixLQUFLK3ZELFdBQWFyMUMsRUFBRzFhLEtBQUsyd0QsYUFBZSxDQUFDLEVBa0JuRjN3RCxLQUFLNHdELEdBQUssR0FVVjV3RCxLQUFLNndELEdBQUssSUFBSTFuRCxJQUtkbkosS0FBSzh3RCxHQUFLLElBQUlubEQsSUFRZDNMLEtBQUsrd0QsR0FBSyxHQUFJL3dELEtBQUtneEQsR0FBS3h3RCxFQUFHUixLQUFLZ3hELEdBQUd4SCxJQUFJdHBELElBQ25Dd2EsRUFBRSt6QyxrQkFBaUIsVUFJZndDLEdBQXdCanhELFFBQVU4MUIsR0FBbUIsY0FBZSw2REFDOUQvakIsZUFBd0M3UixHQUMxQyxNQUFNbWhCLEVBQUkrVSxHQUFvQmwyQixHQUM5Qm1oQixFQUFFeXZDLEdBQUdsbEQsSUFBSSxTQUFnRHNsRCxHQUFpQzd2QyxHQUMxRkEsRUFBRTh2QyxHQUFHdG5ELElBQUksV0FBc0N3WCxFQUFFeXZDLEdBQUdsbUQsT0FBTyxTQUNyRHdtRCxHQUFnQy92QyxFQUMxQyxDQUxNdFAsQ0FLSi9SLE1BQ0wsR0FDSixJQUFJQSxLQUFLbXhELEdBQUssSUFBSXJCLEdBQTZCcDFDLEVBQUdMLEVBQ3ZELEVBR0p0SSxlQUFlcS9DLEdBQWdDbHhELEdBQzNDLEdBQUkrd0QsR0FBd0Ivd0QsR0FBSSxJQUFLLE1BQU1taEIsS0FBS25oQixFQUFFNndELFNBQVUxdkMsR0FBaUIsRUFDakYsQ0FLSXRQLGVBQWVtL0MsR0FBaUNoeEQsR0FDaEQsSUFBSyxNQUFNbWhCLEtBQUtuaEIsRUFBRTZ3RCxTQUFVMXZDLEdBQWlCLEVBQ2pELENBTUEsU0FBU2d3QyxHQUE0Qm54RCxFQUFHbWhCLEdBQ3BDLE1BQU0zRyxFQUFJMGIsR0FBb0JsMkIsR0FDOUJ3YSxFQUFFbTJDLEdBQUdsbkQsSUFBSTBYLEVBQUU0eEIsWUFFWHY0QixFQUFFbTJDLEdBQUdobkQsSUFBSXdYLEVBQUU0eEIsU0FBVTV4QixHQUFJaXdDLEdBQWlDNTJDLEdBRTFENjJDLEdBQTJCNzJDLEdBQUs4MkMsR0FBNEI5MkMsR0FBR2l6QyxNQUFROEQsR0FBMkIvMkMsRUFBRzJHLEdBQ3pHLENBS0ksU0FBU3F3QyxHQUE4Qnh4RCxFQUFHbWhCLEdBQzFDLE1BQU0zRyxFQUFJMGIsR0FBb0JsMkIsR0FBSW1hLEVBQUltM0MsR0FBNEI5MkMsR0FDbEVBLEVBQUVtMkMsR0FBR2ptRCxPQUFPeVcsR0FBSWhILEVBQUVzekMsTUFBUWdFLEdBQTZCajNDLEVBQUcyRyxHQUFJLElBQU0zRyxFQUFFbTJDLEdBQUczc0MsT0FBUzdKLEVBQUVzekMsS0FBT3R6QyxFQUFFMHpDLEtBQU9rRCxHQUF3QnYyQyxJQUk1SEEsRUFBRXkyQyxHQUFHdG5ELElBQUksV0FDYixDQUtJLFNBQVM0bkQsR0FBMkJ2eEQsRUFBR21oQixHQUN2QyxHQUFJbmhCLEVBQUUweEQsR0FBR3pkLEdBQUc5eUIsRUFBRTR4QixVQUFXNXhCLEVBQUVreEIsWUFBWTVQLHNCQUF3QixHQUFLdGhCLEVBQUUwd0IsZ0JBQWdCclgsVUFBVUgsR0FBZ0I1SyxPQUFTLEVBQUcsQ0FDeEgsTUFBTWpWLEVBQUl4YSxFQUFFeXdELGFBQWF2YSx1QkFBdUIvMEIsRUFBRTR4QixVQUFVL3VCLEtBQzVEN0MsRUFBSUEsRUFBRWc0QixrQkFBa0IzK0IsRUFDNUIsQ0FDQTgyQyxHQUE0QnR4RCxHQUFHZ3ZELEdBQUc3dEMsRUFDdEMsQ0FNSSxTQUFTc3dDLEdBQTZCenhELEVBQUdtaEIsR0FDekNuaEIsRUFBRTB4RCxHQUFHemQsR0FBRzl5QixHQUFJbXdDLEdBQTRCdHhELEdBQUdxdkQsR0FBR2x1QyxFQUNsRCxDQUVBLFNBQVNrd0MsR0FBMkJyeEQsR0FDaENBLEVBQUUweEQsR0FBSyxJQUFJdGQsR0FBZ0MsQ0FDdkM4Qix1QkFBd0IvMEIsR0FBS25oQixFQUFFeXdELGFBQWF2YSx1QkFBdUIvMEIsR0FDbkVvMUIsR0FBSXAxQixHQUFLbmhCLEVBQUUyd0QsR0FBR3RuRCxJQUFJOFgsSUFBTSxLQUN4QjYwQixHQUFJLElBQU1oMkMsRUFBRXd3RCxVQUFVampCLFdBQVc1SixhQUNqQzJ0QixHQUE0QnR4RCxHQUFHNGlCLFFBQVM1aUIsRUFBRWl4RCxHQUFHaEIsSUFDckQsQ0FLSSxTQUFTbUIsR0FBaUNweEQsR0FDMUMsT0FBTyt3RCxHQUF3Qi93RCxLQUFPc3hELEdBQTRCdHhELEdBQUd3dEQsTUFBUXh0RCxFQUFFMndELEdBQUczc0MsS0FBTyxDQUM3RixDQUVBLFNBQVMrc0MsR0FBd0Ivd0QsR0FDN0IsT0FBTyxJQUFNazJCLEdBQW9CbDJCLEdBQUc0d0QsR0FBRzVzQyxJQUMzQyxDQUVBLFNBQVMydEMsR0FBa0MzeEQsR0FDdkNBLEVBQUUweEQsUUFBSyxDQUNYLENBRUE3L0MsZUFBZSsvQyxHQUE0QjV4RCxHQUN2Q0EsRUFBRTJ3RCxHQUFHdG9DLFNBQVEsQ0FBRWxILEVBQUczRyxLQUNkKzJDLEdBQTJCdnhELEVBQUdtaEIsRUFDakMsR0FDTCxDQUVBdFAsZUFBZWdnRCxHQUE2Qjd4RCxFQUFHbWhCLEdBQzNDd3dDLEdBQWtDM3hELEdBRWxDb3hELEdBQWlDcHhELElBQU1BLEVBQUVpeEQsR0FBR2IsR0FBR2p2QyxHQUFJa3dDLEdBQTJCcnhELElBSTlFQSxFQUFFaXhELEdBQUd0bkQsSUFBSSxVQUNiLENBRUFrSSxlQUFlaWdELEdBQThCOXhELEVBQUdtaEIsRUFBRzNHLEdBQy9DLEdBRUF4YSxFQUFFaXhELEdBQUd0bkQsSUFBSSxVQUFvQ3dYLGFBQWE4eEIsSUFBK0IsSUFBMkM5eEIsRUFBRXpELE9BQVN5RCxFQUFFZ3lCLE1BR2pKLFVBR0l0aEMsZUFBMkM3UixFQUFHbWhCLEdBQzFDLE1BQU0zRyxFQUFJMkcsRUFBRWd5QixNQUNaLElBQUssTUFBTWg1QixLQUFLZ0gsRUFBRSt4QixVQUVsQmx6QyxFQUFFMndELEdBQUdsbkQsSUFBSTBRLFdBQWFuYSxFQUFFeXdELGFBQWFzQixhQUFhNTNDLEVBQUdLLEdBQUl4YSxFQUFFMndELEdBQUdqbUQsT0FBT3lQLEdBQUluYSxFQUFFMHhELEdBQUd4YyxhQUFhLzZCLEdBQy9GLENBTEF0SSxDQWFIN1IsRUFBR21oQixFQUNKLENBQUUsTUFBTzNHLEdBQ0xvYixHQUFtQixjQUFlLG1DQUFvQ3pVLEVBQUUreEIsVUFBVTN3QyxLQUFLLEtBQU1pWSxTQUN2RnczQyxHQUFzQ2h5RCxFQUFHd2EsRUFDbkQsTUFBTyxHQUFJMkcsYUFBYXV4QixHQUFnQzF5QyxFQUFFMHhELEdBQUcvYyxHQUFHeHpCLEdBQUtBLGFBQWEyeEIsR0FBa0M5eUMsRUFBRTB4RCxHQUFHdGMsR0FBR2owQixHQUFLbmhCLEVBQUUweEQsR0FBRzVjLEdBQUczekIsSUFDeEkzRyxFQUFFOGEsUUFBUStFLEdBQWdCNUssT0FBUSxJQUMvQixNQUFNdE8sUUFBVXNtQyxHQUFpRHpuRCxFQUFFdXdELFlBQ25FLzFDLEVBQUVnZ0IsVUFBVXJaLElBQU0sU0FTbEIsU0FBc0NuaEIsRUFBR21oQixHQUNyQyxNQUFNM0csRUFBSXhhLEVBQUUweEQsR0FBR3ZiLEdBQUdoMUIsR0FHTixPQUFPM0csRUFBRXMzQixjQUFjenBCLFNBQVEsQ0FBRTdOLEVBQUdMLEtBQzVDLEdBQUlLLEVBQUU2M0IsWUFBWTVQLHNCQUF3QixFQUFHLENBQ3pDLE1BQU1uaUMsRUFBSU4sRUFBRTJ3RCxHQUFHdG5ELElBQUk4USxHQUVDN1osR0FBS04sRUFBRTJ3RCxHQUFHaG5ELElBQUl3USxFQUFHN1osRUFBRTQ0QyxnQkFBZ0IxK0IsRUFBRTYzQixZQUFhbHhCLEdBQzFFLENBQ0gsSUFHRDNHLEVBQUV1M0IsaUJBQWlCMXBCLFNBQVEsQ0FBRWxILEVBQUczRyxLQUM1QixNQUFNTCxFQUFJbmEsRUFBRTJ3RCxHQUFHdG5ELElBQUk4WCxHQUNuQixJQUFLaEgsRUFFTCxPQUdnQm5hLEVBQUUyd0QsR0FBR2huRCxJQUFJd1gsRUFBR2hILEVBQUUrK0IsZ0JBQWdCalgsR0FBV1Msa0JBQW1Cdm9CLEVBQUUwM0Isa0JBRzlFNGYsR0FBNkJ6eEQsRUFBR21oQixHQUtoQyxNQUFNN2dCLEVBQUksSUFBSXU0QyxHQUFXMStCLEVBQUVsTCxPQUFRa1MsRUFBRzNHLEVBQUdMLEVBQUUyK0IsZ0JBQzNDeVksR0FBMkJ2eEQsRUFBR00sRUFDakMsSUFBSU4sRUFBRXl3RCxhQUFhd0IsaUJBQWlCejNDLEVBQ3pDLENBL0JBLENBK0JFeGEsRUFBR3dhLEVBQ1QsQ0FBRSxNQUFPMkcsR0FDTHlVLEdBQW1CLGNBQWUsNEJBQTZCelUsU0FBVTZ3QyxHQUFzQ2h5RCxFQUFHbWhCLEVBQ3RILENBQ0osQ0FVSXRQLGVBQWVtZ0QsR0FBc0NoeUQsRUFBR21oQixFQUFHM0csR0FDM0QsSUFBSzhqQixHQUFzQ25kLEdBQUksTUFBTUEsRUFDckRuaEIsRUFBRTR3RCxHQUFHbGxELElBQUksU0FFSHNsRCxHQUFpQ2h4RCxHQUFJQSxFQUFFaXhELEdBQUd0bkQsSUFBSSxXQUNwRDZRLElBSUFBLEVBQUksSUFBTWl0QyxHQUFpRHpuRCxFQUFFdXdELGFBRTdEdndELEVBQUU2dkQsV0FBV3A0QixrQkFBaUIsVUFDMUI3QixHQUFtQixjQUFlLG1DQUFvQ3BiLElBQUt4YSxFQUFFNHdELEdBQUdsbUQsT0FBTyxTQUNqRndtRCxHQUFnQ2x4RCxFQUN6QyxHQUNMLENBK0ZBNlIsZUFBZXFnRCxHQUE0Q2x5RCxFQUFHbWhCLEdBQzFELE1BQU0zRyxFQUFJMGIsR0FBb0JsMkIsR0FDOUJ3YSxFQUFFcTFDLFdBQVdzQyw0QkFBNkJ2OEIsR0FBbUIsY0FBZSx3Q0FDNUUsTUFBTXpiLEVBQUk0MkMsR0FBd0J2MkMsR0FJOUJBLEVBQUVvMkMsR0FBR2xsRCxJQUFJLFNBQThDc2xELEdBQWlDeDJDLEdBQzVGTCxHQUVBSyxFQUFFeTJDLEdBQUd0bkQsSUFBSSxpQkFBNEM2USxFQUFFaTJDLGFBQWEyQix1QkFBdUJqeEMsR0FDM0YzRyxFQUFFbzJDLEdBQUdsbUQsT0FBTyxTQUE4Q3dtRCxHQUFnQzEyQyxFQUM5RixDQWlCSSxTQUFTODJDLEdBQTRCdHhELEdBQ3JDLE9BQU9BLEVBQUVxeUQsS0FFVHJ5RCxFQUFFcXlELEdBQUssU0FBNENyeUQsRUFBR21oQixFQUFHM0csR0FDckQsTUFBTUwsRUFBSStiLEdBQW9CbDJCLEdBQzlCLE9BQU9tYSxFQUFFdTFDLEtBQU0sSUFBSWxCLEdBQWlDcnRDLEVBQUdoSCxFQUFFOHlDLFdBQVk5eUMsRUFBRW8xQyxnQkFBaUJwMUMsRUFBRXExQyxvQkFBcUJyMUMsRUFBRW96QixXQUFZL3lCLEVBQ2pJLENBSE8sQ0FtQk54YSxFQUFFd3dELFVBQVd4d0QsRUFBRTZ2RCxXQUFZLENBQ3hCdkYsR0FBSXNILEdBQTRCajRDLEtBQUssS0FBTTNaLEdBQzNDd3FELEdBQUlxSCxHQUE2Qmw0QyxLQUFLLEtBQU0zWixHQUM1Qyt1RCxHQUFJK0MsR0FBOEJuNEMsS0FBSyxLQUFNM1osS0FDN0NBLEVBQUU2d0QsR0FBR3Z1RCxNQUFLLE1BQUN1UCxJQUNYc1AsR0FBS25oQixFQUFFcXlELEdBQUd6RSxLQUFNd0QsR0FBaUNweEQsR0FBS3F4RCxHQUEyQnJ4RCxHQUFLQSxFQUFFaXhELEdBQUd0bkQsSUFBSSxtQkFBK0MzSixFQUFFcXlELEdBQUcxRSxPQUNuSmdFLEdBQWtDM3hELEdBQ3JDLEtBQUtBLEVBQUVxeUQsRUFDWixDQXVEQSxNQUFNQyxHQUNGLFdBQUE3dUQsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixHQUNwQlIsS0FBSyt2RCxXQUFhN3ZELEVBQUdGLEtBQUttc0QsUUFBVTlxQyxFQUFHcmhCLEtBQUt5eUQsYUFBZS8zQyxFQUFHMWEsS0FBS3FvQyxHQUFLaHVCLEVBQUdyYSxLQUFLMHlELGdCQUFrQmx5RCxFQUNsR1IsS0FBSzRKLFNBQVcsSUFBSXl0QixHQUFvQnIzQixLQUFLcVIsS0FBT3JSLEtBQUs0SixTQUFTakUsUUFBUTBMLEtBQUt3SSxLQUFLN1osS0FBSzRKLFNBQVNqRSxTQUlsRzNGLEtBQUs0SixTQUFTakUsUUFBUUssT0FBTzlGLElBQU8sR0FDeEMsQ0FjTyx3QkFBT3l5RCxDQUFrQnp5RCxFQUFHbWhCLEVBQUczRyxFQUFHTCxFQUFHN1osR0FDeEMsTUFBTW9hLEVBQUlyTixLQUFLRCxNQUFRb04sRUFBR0csRUFBSSxJQUFJMjNDLEdBQWlCdHlELEVBQUdtaEIsRUFBR3pHLEVBQUdQLEVBQUc3WixHQUMvRCxPQUFPcWEsRUFBRWlJLE1BQU1wSSxHQUFJRyxDQUN2QixDQUlPLEtBQUFpSSxDQUFNNWlCLEdBQ1RGLEtBQUs0eUQsWUFBYzV3QyxZQUFXLElBQU9oaUIsS0FBSzZ5RCxzQkFBdUIzeUQsRUFDckUsQ0FJTyxTQUFBNnNELEdBQ0gsT0FBTy9zRCxLQUFLNnlELG9CQUNoQixDQU9PLE1BQUF6cEMsQ0FBT2xwQixHQUNWLE9BQVNGLEtBQUs0eUQsY0FBZ0I1eUQsS0FBS3lpQixlQUFnQnppQixLQUFLNEosU0FBU25FLE9BQU8sSUFBSTJ4QixHQUFlLEdBQUVkLFVBQVcsdUJBQXlCcDJCLEVBQUksS0FBT0EsRUFBSSxNQUNwSixDQUNBLGtCQUFBMnlELEdBQ0k3eUQsS0FBSyt2RCxXQUFXdEIsa0JBQWlCLElBQU8sT0FBU3p1RCxLQUFLNHlELGFBQWU1eUQsS0FBS3lpQixlQUMxRXppQixLQUFLcW9DLEtBQUtoM0IsTUFBTW5SLEdBQUtGLEtBQUs0SixTQUFTbEUsUUFBUXhGLE1BQVEwRixRQUFRRixXQUMvRCxDQUNBLFlBQUErYyxHQUNJLE9BQVN6aUIsS0FBSzR5RCxjQUFnQjV5RCxLQUFLMHlELGdCQUFnQjF5RCxNQUFPeWlCLGFBQWF6aUIsS0FBSzR5RCxhQUM1RTV5RCxLQUFLNHlELFlBQWMsS0FDdkIsRUFNQSxTQUFTRSxHQUF1QzV5RCxFQUFHbWhCLEdBQ25ELEdBQUkyVSxHQUFtQixhQUFjLEdBQUczVSxNQUFNbmhCLEtBQU1zK0IsR0FBc0N0K0IsR0FBSSxPQUFPLElBQUlrM0IsR0FBZSxHQUFFRixZQUFhLEdBQUc3VixNQUFNbmhCLEtBQ2hKLE1BQU1BLENBQ1YsQ0F1QkksTUFBTTZ5RCxHQUVOLFdBQUFwdkQsQ0FBWXpELEdBR1JGLEtBQUtpN0IsV0FBYS82QixFQUFJLENBQUNtaEIsRUFBRzNHLElBQU14YSxFQUFFbWhCLEVBQUczRyxJQUFNNGhCLEdBQVlyQixXQUFXNVosRUFBRWxhLElBQUt1VCxFQUFFdlQsS0FBTyxDQUFDakgsRUFBR21oQixJQUFNaWIsR0FBWXJCLFdBQVcvNkIsRUFBRWlILElBQUtrYSxFQUFFbGEsS0FDNUhuSCxLQUFLZ3pELFNBQVc1bUIsS0FBZXBzQyxLQUFLaXpELFVBQVksSUFBSS96QixHQUFVbC9CLEtBQUtpN0IsV0FDdkUsQ0FJTyxlQUFPaTRCLENBQVNoekQsR0FDbkIsT0FBTyxJQUFJNnlELEdBQVk3eUQsRUFBRSs2QixXQUM3QixDQUNBLEdBQUF0eEIsQ0FBSXpKLEdBQ0EsT0FBTyxNQUFRRixLQUFLZ3pELFNBQVN6cEQsSUFBSXJKLEVBQ3JDLENBQ0EsR0FBQXFKLENBQUlySixHQUNBLE9BQU9GLEtBQUtnekQsU0FBU3pwRCxJQUFJckosRUFDN0IsQ0FDQSxLQUFBcWhDLEdBQ0ksT0FBT3ZoQyxLQUFLaXpELFVBQVVyekIsUUFDMUIsQ0FDQSxJQUFBNEIsR0FDSSxPQUFPeGhDLEtBQUtpekQsVUFBVXB6QixRQUMxQixDQUNBLE9BQUFwRSxHQUNJLE9BQU96N0IsS0FBS2l6RCxVQUFVeDNCLFNBQzFCLENBSU8sT0FBQXRoQixDQUFRamEsR0FDWCxNQUFNbWhCLEVBQUlyaEIsS0FBS2d6RCxTQUFTenBELElBQUlySixHQUM1QixPQUFPbWhCLEVBQUlyaEIsS0FBS2l6RCxVQUFVOTRDLFFBQVFrSCxJQUFNLENBQzVDLENBQ0EsUUFBSTZDLEdBQ0EsT0FBT2xrQixLQUFLaXpELFVBQVUvdUMsSUFDMUIsQ0FDOEQsT0FBQXFFLENBQVFyb0IsR0FDbEVGLEtBQUtpekQsVUFBVW56QixrQkFBaUIsQ0FBRXplLEVBQUczRyxLQUFPeGEsRUFBRW1oQixJQUFJLElBQ3RELENBQzBELEdBQUF6VixDQUFJMUwsR0FFMUQsTUFBTW1oQixFQUFJcmhCLEtBQUs0SyxPQUFPMUssRUFBRWlILEtBQ3hCLE9BQU9rYSxFQUFFa2UsS0FBS2xlLEVBQUUyeEMsU0FBUzF6QixPQUFPcC9CLEVBQUVpSCxJQUFLakgsR0FBSW1oQixFQUFFNHhDLFVBQVUzekIsT0FBT3AvQixFQUFHLE1BQ3JFLENBQzhDLE9BQU9BLEdBQ2pELE1BQU1taEIsRUFBSXJoQixLQUFLdUosSUFBSXJKLEdBQ25CLE9BQU9taEIsRUFBSXJoQixLQUFLdS9CLEtBQUt2L0IsS0FBS2d6RCxTQUFTdnpCLE9BQU92L0IsR0FBSUYsS0FBS2l6RCxVQUFVeHpCLE9BQU9wZSxJQUFNcmhCLElBQzlFLENBQ0EsT0FBQXcxQixDQUFRdDFCLEdBQ0osS0FBTUEsYUFBYTZ5RCxJQUFjLE9BQU8sRUFDeEMsR0FBSS95RCxLQUFLa2tCLE9BQVNoa0IsRUFBRWdrQixLQUFNLE9BQU8sRUFDakMsTUFBTTdDLEVBQUlyaEIsS0FBS2l6RCxVQUFVanpCLGNBQWV0bEIsRUFBSXhhLEVBQUUreUQsVUFBVWp6QixjQUN4RCxLQUFNM2UsRUFBRW1mLFdBQWEsQ0FDakIsTUFBTXRnQyxFQUFJbWhCLEVBQUVrZixVQUFVcDVCLElBQUtrVCxFQUFJSyxFQUFFNmxCLFVBQVVwNUIsSUFDM0MsSUFBS2pILEVBQUVzMUIsUUFBUW5iLEdBQUksT0FBTyxDQUM5QixDQUNBLE9BQU8sQ0FDWCxDQUNBLFFBQUFILEdBQ0ksTUFBTWhhLEVBQUksR0FDVixPQUFPRixLQUFLdW9CLFNBQVNsSCxJQUNqQm5oQixFQUFFc0MsS0FBSzZlLEVBQUVuSCxXQUNaLElBQUksSUFBTWhhLEVBQUVPLE9BQVMsaUJBQW1CLG9CQUFzQlAsRUFBRXVDLEtBQUssUUFBVSxLQUNwRixDQUNBLElBQUE4OEIsQ0FBS3IvQixFQUFHbWhCLEdBQ0osTUFBTTNHLEVBQUksSUFBSXE0QyxHQUNkLE9BQU9yNEMsRUFBRXVnQixXQUFhajdCLEtBQUtpN0IsV0FBWXZnQixFQUFFczRDLFNBQVc5eUQsRUFBR3dhLEVBQUV1NEMsVUFBWTV4QyxFQUFHM0csQ0FDNUUsRUFzQkEsTUFBTXk0QyxHQUNOLFdBQUF4dkQsR0FDSTNELEtBQUtvekQsR0FBSyxJQUFJbDBCLEdBQVU1QyxHQUFZckIsV0FDeEMsQ0FDQSxLQUFBbzRCLENBQU1uekQsR0FDRixNQUFNbWhCLEVBQUluaEIsRUFBRWdtRCxJQUFJLytDLElBQUt1VCxFQUFJMWEsS0FBS296RCxHQUFHN3BELElBQUk4WCxHQUNyQzNHLEVBRUEsSUFBNkJ4YSxFQUFFaUksTUFBUSxJQUFnQ3VTLEVBQUV2UyxLQUFPbkksS0FBS296RCxHQUFLcHpELEtBQUtvekQsR0FBRzl6QixPQUFPamUsRUFBR25oQixHQUFLLElBQWdDQSxFQUFFaUksTUFBUSxJQUErQnVTLEVBQUV2UyxLQUFPbkksS0FBS296RCxHQUFLcHpELEtBQUtvekQsR0FBRzl6QixPQUFPamUsRUFBRyxDQUMzTmxaLEtBQU11UyxFQUFFdlMsS0FDUis5QyxJQUFLaG1ELEVBQUVnbUQsTUFDTixJQUFnQ2htRCxFQUFFaUksTUFBUSxJQUFnQ3VTLEVBQUV2UyxLQUFPbkksS0FBS296RCxHQUFLcHpELEtBQUtvekQsR0FBRzl6QixPQUFPamUsRUFBRyxDQUNoSGxaLEtBQU0sRUFDTis5QyxJQUFLaG1ELEVBQUVnbUQsTUFDTixJQUFnQ2htRCxFQUFFaUksTUFBUSxJQUE2QnVTLEVBQUV2UyxLQUFPbkksS0FBS296RCxHQUFLcHpELEtBQUtvekQsR0FBRzl6QixPQUFPamUsRUFBRyxDQUM3R2xaLEtBQU0sRUFDTis5QyxJQUFLaG1ELEVBQUVnbUQsTUFDTixJQUErQmhtRCxFQUFFaUksTUFBUSxJQUE2QnVTLEVBQUV2UyxLQUFPbkksS0FBS296RCxHQUFLcHpELEtBQUtvekQsR0FBRzN6QixPQUFPcGUsR0FBSyxJQUErQm5oQixFQUFFaUksTUFBUSxJQUFnQ3VTLEVBQUV2UyxLQUFPbkksS0FBS296RCxHQUFLcHpELEtBQUtvekQsR0FBRzl6QixPQUFPamUsRUFBRyxDQUM1TmxaLEtBQU0sRUFDTis5QyxJQUFLeHJDLEVBQUV3ckMsTUFDTixJQUE2QmhtRCxFQUFFaUksTUFBUSxJQUErQnVTLEVBQUV2UyxLQUFPbkksS0FBS296RCxHQUFLcHpELEtBQUtvekQsR0FBRzl6QixPQUFPamUsRUFBRyxDQUM1R2xaLEtBQU0sRUFDTis5QyxJQUFLaG1ELEVBQUVnbUQsTUFTWGh3QixLQUFTbDJCLEtBQUtvekQsR0FBS3B6RCxLQUFLb3pELEdBQUc5ekIsT0FBT2plLEVBQUduaEIsRUFDekMsQ0FDQSxFQUFBb3pELEdBQ0ksTUFBTXB6RCxFQUFJLEdBQ1YsT0FBT0YsS0FBS296RCxHQUFHdHpCLGtCQUFpQixDQUFFemUsRUFBRzNHLEtBQ2pDeGEsRUFBRXNDLEtBQUtrWSxFQUNWLElBQUl4YSxDQUNULEVBR0osTUFBTXF6RCxHQUNGLFdBQUE1dkQsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixFQUFHb2EsRUFBR0MsRUFBRzNULEVBQUdJLEdBQ2hDdEgsS0FBS2svQyxNQUFRaC9DLEVBQUdGLEtBQUtnaUQsS0FBTzNnQyxFQUFHcmhCLEtBQUt3ekQsUUFBVTk0QyxFQUFHMWEsS0FBS2ltRCxXQUFhNXJDLEVBQUdyYSxLQUFLeXpELFlBQWNqekQsRUFDekZSLEtBQUs2bEQsVUFBWWpyQyxFQUFHNWEsS0FBSzB6RCxpQkFBbUI3NEMsRUFBRzdhLEtBQUsyekQsd0JBQTBCenNELEVBQzlFbEgsS0FBSzR6RCxpQkFBbUJ0c0QsQ0FDNUIsQ0FDa0YsMkJBQU91c0QsQ0FBcUIzekQsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEdBQ3RILE1BQU1vYSxFQUFJLEdBQ1YsT0FBT3lHLEVBQUVrSCxTQUFTcm9CLElBQ2QwYSxFQUFFcFksS0FBSyxDQUNIMkYsS0FBTSxFQUNOKzlDLElBQUtobUQsR0FFWixJQUFJLElBQUlxekQsR0FBYXJ6RCxFQUFHbWhCLEVBQUcweEMsR0FBWUcsU0FBUzd4QyxHQUFJekcsRUFBR0YsRUFBR0wsR0FDbkMsR0FDTyxFQUFJN1osRUFDdkMsQ0FDQSxvQkFBSTZtQyxHQUNBLE9BQVFybkMsS0FBS3l6RCxZQUFZaDRCLFNBQzdCLENBQ0EsT0FBQWpHLENBQVF0MUIsR0FDSixLQUFNRixLQUFLNmxELFlBQWMzbEQsRUFBRTJsRCxXQUFhN2xELEtBQUs0ekQsbUJBQXFCMXpELEVBQUUwekQsa0JBQW9CNXpELEtBQUswekQsbUJBQXFCeHpELEVBQUV3ekQsa0JBQW9CMXpELEtBQUt5ekQsWUFBWWorQixRQUFRdDFCLEVBQUV1ekQsY0FBZ0Jub0IsR0FBc0J0ckMsS0FBS2svQyxNQUFPaC9DLEVBQUVnL0MsUUFBVWwvQyxLQUFLZ2lELEtBQUt4c0IsUUFBUXQxQixFQUFFOGhELE9BQVNoaUQsS0FBS3d6RCxRQUFRaCtCLFFBQVF0MUIsRUFBRXN6RCxVQUFXLE9BQU8sRUFDdlMsTUFBTW55QyxFQUFJcmhCLEtBQUtpbUQsV0FBWXZyQyxFQUFJeGEsRUFBRStsRCxXQUNqQyxHQUFJNWtDLEVBQUU1Z0IsU0FBV2lhLEVBQUVqYSxPQUFRLE9BQU8sRUFDbEMsSUFBSyxJQUFJUCxFQUFJLEVBQUdBLEVBQUltaEIsRUFBRTVnQixPQUFRUCxJQUFLLEdBQUltaEIsRUFBRW5oQixHQUFHaUksT0FBU3VTLEVBQUV4YSxHQUFHaUksT0FBU2taLEVBQUVuaEIsR0FBR2dtRCxJQUFJMXdCLFFBQVE5YSxFQUFFeGEsR0FBR2dtRCxLQUFNLE9BQU8sRUFDdEcsT0FBTyxDQUNYLEVBc0JBLE1BQU00TixHQUNOLFdBQUFud0QsR0FDSTNELEtBQUsrekQsUUFBSyxFQUFRL3pELEtBQUtnMEQsVUFBWSxFQUN2QyxFQUdKLE1BQU1DLEdBQ0YsV0FBQXR3RCxHQUNJM0QsS0FBS2swRCxRQUFVLElBQUl0b0IsSUFBVzFyQyxHQUFLcXJDLEdBQXdCcnJDLElBQUtvckMsSUFDaEV0ckMsS0FBS20wRCxZQUFjLFVBQXNDbjBELEtBQUtvMEQsR0FBSyxJQUFJem9ELEdBQzNFLEVBOEJKLFNBQVMwb0QsR0FBb0NuMEQsRUFBR21oQixHQUM1QyxNQUFNM0csRUFBSTBiLEdBQW9CbDJCLEdBQzlCLElBQUltYSxHQUFJLEVBQ1IsSUFBSyxNQUFNbmEsS0FBS21oQixFQUFHLENBQ2YsTUFBTUEsRUFBSW5oQixFQUFFZy9DLE1BQU8xK0MsRUFBSWthLEVBQUV3NUMsUUFBUTNxRCxJQUFJOFgsR0FDckMsR0FBSTdnQixFQUFHLENBQ0gsSUFBSyxNQUFNNmdCLEtBQUs3Z0IsRUFBRXd6RCxVQUFXM3lDLEVBQUVpekMsR0FBR3AwRCxLQUFPbWEsR0FBSSxHQUM3QzdaLEVBQUV1ekQsR0FBSzd6RCxDQUNYLENBQ0osQ0FDQW1hLEdBQUtrNkMsR0FBb0M3NUMsRUFDN0MsQ0FFQSxTQUFTODVDLEdBQW1DdDBELEVBQUdtaEIsRUFBRzNHLEdBQzlDLE1BQU1MLEVBQUkrYixHQUFvQmwyQixHQUFJTSxFQUFJNlosRUFBRTY1QyxRQUFRM3FELElBQUk4WCxHQUNwRCxHQUFJN2dCLEVBQUcsSUFBSyxNQUFNTixLQUFLTSxFQUFFd3pELFVBQVc5ekQsRUFBRXUwRCxRQUFRLzVDLEdBRzFDTCxFQUFFNjVDLFFBQVF0cEQsT0FBT3lXLEVBQ3pCLENBR0EsU0FBU2t6QyxHQUFvQ3IwRCxHQUN6Q0EsRUFBRWswRCxHQUFHN3JDLFNBQVNyb0IsSUFDVkEsRUFBRXVoQixNQUNMLEdBQ0wsQ0FPSSxNQUFNaXpDLEdBQ04sV0FBQS93RCxDQUFZekQsRUFBR21oQixFQUFHM0csR0FDZDFhLEtBQUtrL0MsTUFBUWgvQyxFQUFHRixLQUFLMjBELEdBQUt0ekMsRUFLMUJyaEIsS0FBSzQwRCxJQUFLLEVBQUk1MEQsS0FBSzYwRCxHQUFLLEtBQU03MEQsS0FBS20wRCxZQUFjLFVBQ2pEbjBELEtBQUtvSyxRQUFVc1EsR0FBSyxDQUFDLENBQ3pCLENBTU8sRUFBQTQ1QyxDQUFHcDBELEdBQ04sSUFBS0YsS0FBS29LLFFBQVEwcUQsdUJBQXdCLENBRXRDLE1BQU16ekMsRUFBSSxHQUNWLElBQUssTUFBTTNHLEtBQUt4YSxFQUFFK2xELFdBQVksSUFBZ0N2ckMsRUFBRXZTLE1BQVFrWixFQUFFN2UsS0FBS2tZLEdBQy9FeGEsRUFBSSxJQUFJcXpELEdBQWFyekQsRUFBRWcvQyxNQUFPaC9DLEVBQUU4aEQsS0FBTTloRCxFQUFFc3pELFFBQVNueUMsRUFBR25oQixFQUFFdXpELFlBQWF2ekQsRUFBRTJsRCxVQUFXM2xELEVBQUV3ekQsa0JBQ25ELEVBQUl4ekQsRUFBRTB6RCxpQkFDekMsQ0FDQSxJQUFJdnlDLEdBQUksRUFDUixPQUFPcmhCLEtBQUs0MEQsR0FBSzUwRCxLQUFLKzBELEdBQUc3MEQsS0FBT0YsS0FBSzIwRCxHQUFHbHpDLEtBQUt2aEIsR0FBSW1oQixHQUFJLEdBQU1yaEIsS0FBS2cxRCxHQUFHOTBELEVBQUdGLEtBQUttMEQsZUFBaUJuMEQsS0FBS2kxRCxHQUFHLzBELEdBQ3BHbWhCLEdBQUksR0FBS3JoQixLQUFLNjBELEdBQUszMEQsRUFBR21oQixDQUMxQixDQUNBLE9BQUFvekMsQ0FBUXYwRCxHQUNKRixLQUFLMjBELEdBQUcxdkQsTUFBTS9FLEVBQ2xCLENBQ2lELEVBQUFnMUQsQ0FBR2gxRCxHQUNoREYsS0FBS20wRCxZQUFjajBELEVBQ25CLElBQUltaEIsR0FBSSxFQUNSLE9BQU9yaEIsS0FBSzYwRCxLQUFPNzBELEtBQUs0MEQsSUFBTTUwRCxLQUFLZzFELEdBQUdoMUQsS0FBSzYwRCxHQUFJMzBELEtBQU9GLEtBQUtpMUQsR0FBR2oxRCxLQUFLNjBELElBQUt4ekMsR0FBSSxHQUM1RUEsQ0FDSixDQUNBLEVBQUEyekMsQ0FBRzkwRCxFQUFHbWhCLEdBRUYsSUFBS25oQixFQUFFMmxELFVBQVcsT0FBTyxFQUdqQixNQUFNbnJDLEVBQUksWUFBd0MyRyxFQUdsRCxRQUFTcmhCLEtBQUtvSyxRQUFRK3FELEtBQU96NkMsTUFBUXhhLEVBQUU4aEQsS0FBS3ZtQixXQUFhdjdCLEVBQUUwekQsa0JBQW9CLFlBQXdDdnlDLEVBRy9ILENBQ0osRUFBQTB6QyxDQUFHNzBELEdBS0MsR0FBSUEsRUFBRStsRCxXQUFXeGxELE9BQVMsRUFBRyxPQUFPLEVBQ3BDLE1BQU00Z0IsRUFBSXJoQixLQUFLNjBELElBQU03MEQsS0FBSzYwRCxHQUFHeHRCLG1CQUFxQm5uQyxFQUFFbW5DLGlCQUNwRCxTQUFVbm5DLEVBQUV3ekQsbUJBQXFCcnlDLEtBQU0sSUFBT3JoQixLQUFLb0ssUUFBUTBxRCxzQkFJM0QsQ0FDSixFQUFBRyxDQUFHLzBELEdBQ0NBLEVBQUlxekQsR0FBYU0scUJBQXFCM3pELEVBQUVnL0MsTUFBT2gvQyxFQUFFOGhELEtBQU05aEQsRUFBRXV6RCxZQUFhdnpELEVBQUUybEQsVUFBVzNsRCxFQUFFMHpELGtCQUNyRjV6RCxLQUFLNDBELElBQUssRUFBSTUwRCxLQUFLMjBELEdBQUdsekMsS0FBS3ZoQixFQUMvQixFQTZKSixNQUFNazFELEdBQ0YsV0FBQXp4RCxDQUFZekQsR0FDUkYsS0FBS21ILElBQU1qSCxDQUNmLEVBR0osTUFBTW0xRCxHQUNGLFdBQUExeEQsQ0FBWXpELEdBQ1JGLEtBQUttSCxJQUFNakgsQ0FDZixFQU9BLE1BQU1vMUQsR0FDTixXQUFBM3hELENBQVl6RCxFQUVabWhCLEdBQ0lyaEIsS0FBS2svQyxNQUFRaC9DLEVBQUdGLEtBQUt1MUQsR0FBS2wwQyxFQUFHcmhCLEtBQUs0WixHQUFLLEtBQU01WixLQUFLNHpELGtCQUFtQixFQU9yRTV6RCxLQUFLd3lDLFNBQVUsRUFFZnh5QyxLQUFLaWMsR0FBS3l3QixLQUVWMXNDLEtBQUt5ekQsWUFBYy9tQixLQUE0QjFzQyxLQUFLbWIsR0FBS3V3QixHQUE2QnhyQyxHQUN0RkYsS0FBSzRuQixHQUFLLElBQUltckMsR0FBWS95RCxLQUFLbWIsR0FDbkMsQ0FJTyxNQUFJOEQsR0FDUCxPQUFPamYsS0FBS3UxRCxFQUNoQixDQVVPLEVBQUF6NkMsQ0FBRzVhLEVBQUdtaEIsR0FDVCxNQUFNM0csRUFBSTJHLEVBQUlBLEVBQUUvRixHQUFLLElBQUk2M0MsR0FBNkI5NEMsRUFBSWdILEVBQUlBLEVBQUV1RyxHQUFLNW5CLEtBQUs0bkIsR0FDMUUsSUFBSXBuQixFQUFJNmdCLEVBQUlBLEVBQUVveUMsWUFBY3p6RCxLQUFLeXpELFlBQWE3NEMsRUFBSVAsRUFBR1EsR0FBSSxFQVN6RCxNQUFNM1QsRUFBSSxNQUE4QmxILEtBQUtrL0MsTUFBTXRVLFdBQWF2d0IsRUFBRTZKLE9BQVNsa0IsS0FBS2svQyxNQUFNL2pCLE1BQVE5Z0IsRUFBRW1uQixPQUFTLEtBQU1sNkIsRUFBSSxNQUE2QnRILEtBQUtrL0MsTUFBTXRVLFdBQWF2d0IsRUFBRTZKLE9BQVNsa0IsS0FBS2svQyxNQUFNL2pCLE1BQVE5Z0IsRUFBRWtuQixRQUFVLEtBRWxOLEdBQUlyaEMsRUFBRTQvQixrQkFBaUIsQ0FBRTUvQixFQUFHbWhCLEtBQ3hCLE1BQU1sZSxFQUFJa1gsRUFBRTlRLElBQUlySixHQUFJUSxFQUFJK3FDLEdBQXVCenJDLEtBQUtrL0MsTUFBTzc5QixHQUFLQSxFQUFJLEtBQU0vSCxJQUFNblcsR0FBS25ELEtBQUt5ekQsWUFBWTlwRCxJQUFJeEcsRUFBRWdFLEtBQU1zVCxJQUFNL1osSUFBTUEsRUFBRXltQyxtQkFHaElubkMsS0FBS3l6RCxZQUFZOXBELElBQUlqSixFQUFFeUcsTUFBUXpHLEVBQUUwbUMsdUJBQ2pDLElBQUkxbUIsR0FBSSxFQUVRdmQsR0FBS3pDLEVBQ2pCeUMsRUFBRTJELEtBQUswdUIsUUFBUTkwQixFQUFFb0csTUFBUXdTLElBQU1tQixJQUFNQyxFQUFFMjRDLE1BQU0sQ0FDekNsckQsS0FBTSxFQUNOKzlDLElBQUt4bEQsSUFDTGdnQixHQUFJLEdBQU0xZ0IsS0FBS3NGLEdBQUduQyxFQUFHekMsS0FBT2dhLEVBQUUyNEMsTUFBTSxDQUNwQ2xyRCxLQUFNLEVBQ04rOUMsSUFBS3hsRCxJQUNMZ2dCLEdBQUksR0FBS3haLEdBQUtsSCxLQUFLbWIsR0FBR3phLEVBQUd3RyxHQUFLLEdBQUtJLEdBQUt0SCxLQUFLbWIsR0FBR3phLEVBQUc0RyxHQUFLLEtBSTVEdVQsR0FBSSxLQUNBMVgsR0FBS3pDLEdBQUtnYSxFQUFFMjRDLE1BQU0sQ0FDdEJsckQsS0FBTSxFQUNOKzlDLElBQUt4bEQsSUFDTGdnQixHQUFJLEdBQU12ZCxJQUFNekMsSUFBTWdhLEVBQUUyNEMsTUFBTSxDQUM5QmxyRCxLQUFNLEVBQ04rOUMsSUFBSy9pRCxJQUNMdWQsR0FBSSxHQUFLeFosR0FBS0ksS0FJbEJ1VCxHQUFJLElBQ0o2RixJQUFNaGdCLEdBQUtrYSxFQUFJQSxFQUFFaFAsSUFBSWxMLEdBQUlGLEVBQUlpYSxFQUFJamEsRUFBRW9MLElBQUkxTCxHQUFLTSxFQUFFb0ssT0FBTzFLLEtBQU8wYSxFQUFJQSxFQUFFaFEsT0FBTzFLLEdBQUlNLEVBQUlBLEVBQUVvSyxPQUFPMUssSUFDN0YsSUFBSSxPQUFTRixLQUFLay9DLE1BQU0vakIsTUFBTyxLQUFNdmdCLEVBQUVzSixLQUFPbGtCLEtBQUtrL0MsTUFBTS9qQixPQUFTLENBQy9ELE1BQU1qN0IsRUFBSSxNQUE4QkYsS0FBS2svQyxNQUFNdFUsVUFBWWh3QixFQUFFNG1CLE9BQVM1bUIsRUFBRTJtQixRQUM1RTNtQixFQUFJQSxFQUFFaFEsT0FBTzFLLEVBQUVpSCxLQUFNM0csRUFBSUEsRUFBRW9LLE9BQU8xSyxFQUFFaUgsS0FBTXVULEVBQUUyNEMsTUFBTSxDQUM5Q2xyRCxLQUFNLEVBQ04rOUMsSUFBS2htRCxHQUViLENBQ0EsTUFBTyxDQUNIMG5CLEdBQUloTixFQUNKVSxHQUFJWixFQUNKZ3NDLEdBQUk3ckMsRUFDSjQ0QyxZQUFhanpELEVBRXJCLENBQ0EsRUFBQThFLENBQUdwRixFQUFHbWhCLEdBUUYsT0FBT25oQixFQUFFaW5DLG1CQUFxQjlsQixFQUFFK2xCLHdCQUEwQi9sQixFQUFFOGxCLGlCQUNoRSxDQVlBLFlBQUFoQixDQUFham1DLEVBQUdtaEIsRUFBRzNHLEdBQ2YsTUFBTUwsRUFBSXJhLEtBQUs0bkIsR0FDZjVuQixLQUFLNG5CLEdBQUsxbkIsRUFBRTBuQixHQUFJNW5CLEtBQUt5ekQsWUFBY3Z6RCxFQUFFdXpELFlBRXJDLE1BQU1qekQsRUFBSU4sRUFBRW9iLEdBQUdnNEMsS0FDZjl5RCxFQUFFOFAsTUFBSyxDQUFFcFEsRUFBR21oQixJQUFNLFNBQXFDbmhCLEVBQUdtaEIsR0FDdEQsTUFBTW0wQyxFQUFRdDFELElBQ1YsT0FBUUEsR0FDTixLQUFLLEVBQ0gsT0FBTyxFQUVULEtBQUssRUFDTCxLQUFLLEVBSUgsT0FBTyxFQUVULEtBQUssRUFDSCxPQUFPLEVBRVQsUUFDRSxPQUFPZzJCLEtBQ1gsRUFFSixPQUFPcy9CLEVBQU10MUQsR0FBS3MxRCxFQUFNbjBDLEVBQzVCLENBckJrQixDQXFDckJuaEIsRUFBRWlJLEtBQU1rWixFQUFFbFosT0FBU25JLEtBQUttYixHQUFHamIsRUFBRWdtRCxJQUFLN2tDLEVBQUU2a0MsT0FBUWxtRCxLQUFLdVosR0FBR21CLEdBQ2pELE1BQU1FLEVBQUl5RyxFQUFJcmhCLEtBQUttYyxLQUFPLEdBQUl0QixFQUFJLElBQU03YSxLQUFLaWMsR0FBR2lJLE1BQVFsa0IsS0FBS3d5QyxRQUFVLEVBQTJCLEVBQTBCdHJDLEVBQUkyVCxJQUFNN2EsS0FBSzRaLEdBQzNJLE9BQUk1WixLQUFLNFosR0FBS2lCLEVBQUcsSUFBTXJhLEVBQUVDLFFBQVV5RyxFQUN4QixDQUNIdXVELFNBQVUsSUFBSWxDLEdBQWF2ekQsS0FBS2svQyxNQUFPaC9DLEVBQUUwbkIsR0FBSXZOLEVBQUc3WixFQUFHTixFQUFFdXpELFlBQWEsSUFBNEI1NEMsRUFBRzNULEdBQ2xFLElBQU13VCxHQUFLQSxFQUFFNjNCLFlBQVk1UCxzQkFBd0IsR0FDaEZucEIsR0FBSW9CLEdBSUwsQ0FDSHBCLEdBQUlvQixFQUVaLENBSU8sRUFBQXM2QyxDQUFHaDFELEdBQ04sT0FBT0YsS0FBS3d5QyxTQUFXLFlBQXdDdHlDLEdBSy9ERixLQUFLd3lDLFNBQVUsRUFBSXh5QyxLQUFLbW1DLGFBQWEsQ0FDakN2ZSxHQUFJNW5CLEtBQUs0bkIsR0FDVHRNLEdBQUksSUFBSTYzQyxHQUNSTSxZQUFhenpELEtBQUt5ekQsWUFDbEIvTSxJQUFJLElBRW9CLElBQU8sQ0FDL0JsdEMsR0FBSSxHQUVaLENBR08sRUFBQXdGLENBQUc5ZSxHQUVOLE9BQVFGLEtBQUt1MUQsR0FBRzVyRCxJQUFJekosTUFFbEJGLEtBQUs0bkIsR0FBR2plLElBQUl6SixLQUFPRixLQUFLNG5CLEdBQUdyZSxJQUFJckosR0FBR2luQyxpQkFDeEMsQ0FJTyxFQUFBNXRCLENBQUdyWixHQUNOQSxJQUFNQSxFQUFFdXlDLGVBQWVscUIsU0FBU3JvQixHQUFLRixLQUFLdTFELEdBQUt2MUQsS0FBS3UxRCxHQUFHM3BELElBQUkxTCxLQUFNQSxFQUFFd3lDLGtCQUFrQm5xQixTQUFTcm9CLElBQU8sSUFDckdBLEVBQUV5eUMsaUJBQWlCcHFCLFNBQVNyb0IsR0FBS0YsS0FBS3UxRCxHQUFLdjFELEtBQUt1MUQsR0FBRzNxRCxPQUFPMUssS0FBTUYsS0FBS3d5QyxRQUFVdHlDLEVBQUVzeUMsUUFDckYsQ0FDQSxFQUFBcjJCLEdBRUksSUFBS25jLEtBQUt3eUMsUUFBUyxNQUFPLEdBR2xCLE1BQU10eUMsRUFBSUYsS0FBS2ljLEdBQ3ZCamMsS0FBS2ljLEdBQUt5d0IsS0FBNEIxc0MsS0FBSzRuQixHQUFHVyxTQUFTcm9CLElBQ25ERixLQUFLZ2YsR0FBRzllLEVBQUVpSCxPQUFTbkgsS0FBS2ljLEdBQUtqYyxLQUFLaWMsR0FBR3JRLElBQUkxTCxFQUFFaUgsS0FDOUMsSUFFRCxNQUFNa2EsRUFBSSxHQUNWLE9BQU9uaEIsRUFBRXFvQixTQUFTcm9CLElBQ2RGLEtBQUtpYyxHQUFHdFMsSUFBSXpKLElBQU1taEIsRUFBRTdlLEtBQUssSUFBSTZ5RCxHQUErQm4xRCxHQUMvRCxJQUFJRixLQUFLaWMsR0FBR3NNLFNBQVM3TixJQUNsQnhhLEVBQUV5SixJQUFJK1EsSUFBTTJHLEVBQUU3ZSxLQUFLLElBQUk0eUQsR0FBNkIxNkMsR0FDdkQsSUFBSTJHLENBQ1QsQ0FxQkEsRUFBQWpILENBQUdsYSxHQUNDRixLQUFLdTFELEdBQUtyMUQsRUFBRThuRCxHQUFJaG9ELEtBQUtpYyxHQUFLeXdCLEtBQzFCLE1BQU1yckIsRUFBSXJoQixLQUFLOGEsR0FBRzVhLEVBQUVxM0MsV0FDcEIsT0FBT3YzQyxLQUFLbW1DLGFBQWE5a0IsR0FBNkIsRUFDMUQsQ0FPQSxFQUFBakMsR0FDSSxPQUFPbTBDLEdBQWFNLHFCQUFxQjd6RCxLQUFLay9DLE1BQU9sL0MsS0FBSzRuQixHQUFJNW5CLEtBQUt5ekQsWUFBYSxJQUE0Qnp6RCxLQUFLNFosR0FBSTVaLEtBQUs0ekQsaUJBQzlILEVBT0osTUFBTThCLEdBQ0YsV0FBQS94RCxDQUlBekQsRUFLQW1oQixFQU9BM0csR0FDSTFhLEtBQUtrL0MsTUFBUWgvQyxFQUFHRixLQUFLaXpDLFNBQVc1eEIsRUFBR3JoQixLQUFLMjFELEtBQU9qN0MsQ0FDbkQsRUFHOEIsTUFBTWs3QyxHQUNwQyxXQUFBanlELENBQVl6RCxHQUNSRixLQUFLbUgsSUFBTWpILEVBT1hGLEtBQUswZSxJQUFLLENBQ2QsRUFlQSxNQUFNbTNDLEdBQ04sV0FBQWx5RCxDQUFZekQsRUFBR21oQixFQUFHM0csRUFFbEJMLEVBQUc3WixFQUFHb2EsR0FDRjVhLEtBQUt5d0QsV0FBYXZ3RCxFQUFHRixLQUFLODFELFlBQWN6MEMsRUFBR3JoQixLQUFLKzFELGFBQWVyN0MsRUFBRzFhLEtBQUtnMkQsa0JBQW9CMzdDLEVBQzNGcmEsS0FBS2k0QixZQUFjejNCLEVBQUdSLEtBQUtpMkQsOEJBQWdDcjdDLEVBQUc1YSxLQUFLMmYsR0FBSyxDQUFDLEVBQUczZixLQUFLdWpCLEdBQUssSUFBSXFvQixJQUFXMXJDLEdBQUtxckMsR0FBd0JyckMsSUFBS29yQyxJQUN2SXRyQyxLQUFLMlosR0FBSyxJQUFJeFEsSUFVZG5KLEtBQUswYyxHQUFLLElBQUkvUSxJQUtkM0wsS0FBS3VmLEdBQUssSUFBSTJmLEdBQVU1QyxHQUFZckIsWUFLcENqN0IsS0FBSzRmLEdBQUssSUFBSXpXLElBQUtuSixLQUFLa2IsR0FBSyxJQUFJdWtDLEdBRWpDei9DLEtBQUs4WixHQUFLLENBQUMsRUFFWDlaLEtBQUt1aUIsR0FBSyxJQUFJcFosSUFBS25KLEtBQUswYixHQUFLeWdDLEdBQTRCRyxLQUFNdDhDLEtBQUttMEQsWUFBYyxVQUlsRm4wRCxLQUFLd2MsUUFBSyxDQUNkLENBQ0EsbUJBQUkwNUMsR0FDQSxPQUFPLElBQU9sMkQsS0FBS3djLEVBQ3ZCLEVBUUp6SyxlQUFlb2tELEdBQTJCajJELEVBQUdtaEIsR0FDekMsTUFBTTNHLEVBNG5CVixTQUF3Q3hhLEdBQ3BDLE1BQU1taEIsRUFBSStVLEdBQW9CbDJCLEdBQzlCLE9BQU9taEIsRUFBRXkwQyxZQUFZbkYsYUFBYXdCLGlCQUFtQmlFLEdBQXFDdjhDLEtBQUssS0FBTXdILEdBQ3JHQSxFQUFFeTBDLFlBQVluRixhQUFhdmEsdUJBQXlCaWdCLEdBQTJDeDhDLEtBQUssS0FBTXdILEdBQzFHQSxFQUFFeTBDLFlBQVluRixhQUFhc0IsYUFBZXFFLEdBQWlDejhDLEtBQUssS0FBTXdILEdBQ3RGQSxFQUFFMUIsR0FBR3N2QyxHQUFLb0YsR0FBb0N4NkMsS0FBSyxLQUFNd0gsRUFBRTAwQyxjQUFlMTBDLEVBQUUxQixHQUFHSCxHQUFLZzFDLEdBQW1DMzZDLEtBQUssS0FBTXdILEVBQUUwMEMsY0FDcEkxMEMsQ0FDSixDQW5vQmNrMUMsQ0FBK0JyMkQsR0FDekMsSUFBSW1hLEVBQUc3WixFQUNQLE1BQU1vYSxFQUFJRixFQUFFNkksR0FBR2hhLElBQUk4WCxHQUNuQixHQUFJekcsRUFPSlAsRUFBSU8sRUFBRXE0QixTQUFVdjRCLEVBQUVzN0Msa0JBQWtCbk4sb0JBQW9CeHVDLEdBQUk3WixFQUFJb2EsRUFBRSs2QyxLQUFLdjJDLFNBQVcsQ0FDOUUsTUFBTWxmLFFBbnRHZCxTQUE0Q0EsRUFBR21oQixHQUMzQyxNQUFNM0csRUFBSTBiLEdBQW9CbDJCLEdBQzlCLE9BQU93YSxFQUFFOG5DLFlBQVl1QyxlQUFlLGtCQUFtQixhQUFjN2tELElBQ2pFLElBQUltYSxFQUNKLE9BQU9LLEVBQUV5cEMsR0FBR1IsY0FBY3pqRCxFQUFHbWhCLEdBQUdJLE1BQU1qaEIsR0FBS0EsR0FJM0M2WixFQUFJN1osRUFBR285QixHQUFtQmw0QixRQUFRMlUsSUFBTUssRUFBRXlwQyxHQUFHakIsaUJBQWlCaGpELEdBQUd1aEIsTUFBTWpoQixJQUFNNlosRUFBSSxJQUFJMCtCLEdBQVcxM0IsRUFBRzdnQixFQUFHLHNCQUFtRE4sRUFBRWtsRCx1QkFDM0oxcUMsRUFBRXlwQyxHQUFHZCxjQUFjbmpELEVBQUdtYSxHQUFHb0gsTUFBSyxJQUFPcEgsUUFDeEMsSUFBR2hKLE1BQU1uUixJQUdOLE1BQU1tYSxFQUFJSyxFQUFFcXNDLEdBQUd4OUMsSUFBSXJKLEVBQUUreUMsVUFDckIsT0FBUSxPQUFTNTRCLEdBQUtuYSxFQUFFNnhDLGdCQUFnQnJYLFVBQVVyZ0IsRUFBRTAzQixpQkFBbUIsS0FBT3IzQixFQUFFcXNDLEdBQUtyc0MsRUFBRXFzQyxHQUFHem5CLE9BQU9wL0IsRUFBRSt5QyxTQUFVL3lDLEdBQzdHd2EsRUFBRXNzQyxHQUFHbjlDLElBQUl3WCxFQUFHbmhCLEVBQUUreUMsV0FBWS95QyxDQUM3QixHQUNMLENBa3NHd0JzMkQsQ0FBbUM5N0MsRUFBRSsxQyxXQUFZcmxCLEdBQXdCL3BCLElBQUt6RyxFQUFJRixFQUFFczdDLGtCQUFrQm5OLG9CQUFvQjNvRCxFQUFFK3lDLFVBQzVJNTRCLEVBQUluYSxFQUFFK3lDLFNBQVV6eUMsUUFTcEJ1UixlQUEwRDdSLEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixHQUl0RU4sRUFBRW1jLEdBQUssQ0FBQ2dGLEVBQUczRyxFQUFHTCxJQUFNdEksZUFBeUM3UixFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUNsRSxJQUFJN1osRUFBSTZnQixFQUFFczBDLEtBQUs3NkMsR0FBR0osR0FDbEJsYSxFQUFFa21ELEtBSUZsbUQsUUFBVXFuRCxHQUFpQzNuRCxFQUFFdXdELFdBQVlwdkMsRUFBRTY5QixPQUNqQyxHQUFJN3RDLE1BQUssRUFBR2ttQyxVQUFXcjNDLEtBQU9taEIsRUFBRXMwQyxLQUFLNzZDLEdBQUc1YSxFQUFHTSxNQUNyRSxNQUFNb2EsRUFBSVAsR0FBS0EsRUFBRTIzQixjQUFjem9DLElBQUk4WCxFQUFFNHhCLFVBQVdwNEIsRUFBSXdHLEVBQUVzMEMsS0FBS3h2QixhQUFhM2xDLEVBQzVDTixFQUFFZzJELGdCQUFpQnQ3QyxHQUMvQyxPQUFPNjdDLEdBQThCdjJELEVBQUdtaEIsRUFBRTR4QixTQUFVcDRCLEVBQUVyQixJQUFLcUIsRUFBRTQ2QyxRQUNqRSxDQVhvQjFqRCxDQVdsQjdSLEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ1gsTUFBTU8sUUFBVWl0QyxHQUFpQzNuRCxFQUFFdXdELFdBQVlwdkMsR0FDckMsR0FBS3hHLEVBQUksSUFBSXk2QyxHQUFlajBDLEVBQUd6RyxFQUFFb3RDLElBQUs5Z0QsRUFBSTJULEVBQUVDLEdBQUdGLEVBQUUyOEIsV0FBWWp3QyxFQUFJK3FDLEdBQWFDLDhDQUE4QzUzQixFQUFHTCxHQUFLLFlBQXdDbmEsRUFBRWkwRCxZQUFhM3pELEdBQUkyQyxFQUFJMFgsRUFBRXNyQixhQUFhai9CLEVBQ2hOaEgsRUFBRWcyRCxnQkFBaUI1dUQsR0FDL0NtdkQsR0FBOEJ2MkQsRUFBR3dhLEVBQUd2WCxFQUFFcVcsSUFDdEMsTUFBTTlZLEVBQUksSUFBSWcxRCxHQUFvQnIwQyxFQUFHM0csRUFBR0csR0FDeEMsT0FBTzNhLEVBQUVxakIsR0FBRzFaLElBQUl3WCxFQUFHM2dCLEdBQUlSLEVBQUV5WixHQUFHaFEsSUFBSStRLEdBQUt4YSxFQUFFeVosR0FBR3BRLElBQUltUixHQUFHbFksS0FBSzZlLEdBQUtuaEIsRUFBRXlaLEdBQUc5UCxJQUFJNlEsRUFBRyxDQUFFMkcsSUFBTWxlLEVBQUVzeUQsUUFDckYsQ0EvQmtDaUIsQ0FBMkNoOEMsRUFBRzJHLEVBQUdoSCxFQUFHLFlBQWNPLEVBQUcxYSxFQUFFcXlDLGFBQ2pHNzNCLEVBQUV3N0MsaUJBQW1CN0UsR0FBNEIzMkMsRUFBRW83QyxZQUFhNTFELEVBQ3BFLENBQ0EsT0FBT00sQ0FDWCxDQTZCcUN1UixlQUFlNGtELEdBQTZCejJELEVBQUdtaEIsR0FDaEYsTUFBTTNHLEVBQUkwYixHQUFvQmwyQixHQUFJbWEsRUFBSUssRUFBRTZJLEdBQUdoYSxJQUFJOFgsR0FBSTdnQixFQUFJa2EsRUFBRWYsR0FBR3BRLElBQUk4USxFQUFFNDRCLFVBQ2xFLEdBQUl6eUMsRUFBRUMsT0FBUyxFQUFHLE9BQU9pYSxFQUFFZixHQUFHOVAsSUFBSXdRLEVBQUU0NEIsU0FBVXp5QyxFQUFFeUssUUFBUS9LLElBQU1vckMsR0FBc0JwckMsRUFBR21oQixXQUNsRjNHLEVBQUU2SSxHQUFHM1ksT0FBT3lXLEdBRVQzRyxFQUFFdzdDLGlCQUdOeDdDLEVBQUVzN0Msa0JBQWtCak4sdUJBQXVCMXVDLEVBQUU0NEIsVUFDN0N2NEIsRUFBRXM3QyxrQkFBa0I3TSxvQkFBb0I5dUMsRUFBRTQ0QixpQkFBbUIyVSxHQUFrQ2x0QyxFQUFFKzFDLFdBQVlwMkMsRUFBRTQ0QixVQUNsRixHQUFJNWhDLE1BQUssS0FDbENxSixFQUFFczdDLGtCQUFrQi9NLGdCQUFnQjV1QyxFQUFFNDRCLFVBQVd5ZSxHQUE4QmgzQyxFQUFFbzdDLFlBQWF6N0MsRUFBRTQ0QixVQUNoRzJqQixHQUFpQ2w4QyxFQUFHTCxFQUFFNDRCLFNBQ3pDLElBQUdqdEMsTUFBTTIzQixNQUNQaTVCLEdBQWlDbDhDLEVBQUdMLEVBQUU0NEIsZ0JBQWlCMlUsR0FBa0NsdEMsRUFBRSsxQyxXQUFZcDJDLEVBQUU0NEIsVUFDbkYsR0FDakMsQ0E4RUlsaEMsZUFBZXFrRCxHQUFxQ2wyRCxFQUFHbWhCLEdBQ3ZELE1BQU0zRyxFQUFJMGIsR0FBb0JsMkIsR0FDOUIsSUFDSSxNQUFNQSxRQXo5R1YsU0FBMERBLEVBQUdtaEIsR0FDN0QsTUFBTTNHLEVBQUkwYixHQUFvQmwyQixHQUFJbWEsRUFBSWdILEVBQUUwd0IsZ0JBQ3hDLElBQUl2eEMsRUFBSWthLEVBQUVxc0MsR0FDVixPQUFPcnNDLEVBQUU4bkMsWUFBWXVDLGVBQWUscUJBQXNCLHFCQUFzQjdrRCxJQUM1RSxNQUFNMGEsRUFBSUYsRUFBRXdzQyxHQUFHL0UsZ0JBQWdCLENBQzNCMFUsZUFBZSxJQUdYcjJELEVBQUlrYSxFQUFFcXNDLEdBQ2QsTUFBTWxzQyxFQUFJLEdBQ1Z3RyxFQUFFMndCLGNBQWN6cEIsU0FBUSxDQUFFM04sRUFBRzFULEtBQ3pCLE1BQU1JLEVBQUk5RyxFQUFFK0ksSUFBSXJDLEdBQ2hCLElBQUtJLEVBQUcsT0FJSXVULEVBQUVyWSxLQUFLa1ksRUFBRXlwQyxHQUFHTixtQkFBbUIzakQsRUFBRzBhLEVBQUUrM0IsaUJBQWtCenJDLEdBQUd1YSxNQUFLLElBQU8vRyxFQUFFeXBDLEdBQUdQLGdCQUFnQjFqRCxFQUFHMGEsRUFBRTYzQixlQUFnQnZyQyxNQUMzSCxJQUFJL0QsRUFBSW1FLEVBQUU2eEMsbUJBQW1CajVDLEVBQUVrbEQsdUJBQy9CLE9BQVMvakMsRUFBRTR3QixpQkFBaUIxb0MsSUFBSXJDLEdBQUsvRCxFQUFJQSxFQUFFaTJDLGdCQUFnQmpYLEdBQVdTLGtCQUFtQnJJLEdBQWdCNUssT0FBTzJwQixpQ0FBaUMvZSxHQUFnQjVLLE9BQVMvVSxFQUFFMjNCLFlBQVk1UCxzQkFBd0IsSUFBTXgvQixFQUFJQSxFQUFFaTJDLGdCQUFnQngrQixFQUFFMjNCLFlBQWFsNEIsSUFDM1A3WixFQUFJQSxFQUFFOCtCLE9BQU9wNEIsRUFBRy9ELEdBY2hCLFNBQTJDakQsRUFBR21oQixFQUFHM0csR0FFN0MsT0FBSSxJQUFNeGEsRUFBRXF5QyxZQUFZNVAsdUJBTUp0aEIsRUFBRTB3QixnQkFBZ0JwWCxpQkFBbUJ6NkIsRUFBRTZ4QyxnQkFBZ0JwWCxrQkFBb0IsS0FNeEVqZ0IsRUFBRSszQixlQUFldnVCLEtBQU94SixFQUFFZzRCLGtCQUFrQnh1QixLQUFPeEosRUFBRWk0QixpQkFBaUJ6dUIsS0FBTyxDQUN4RyxDQWZBLENBa0JQNWMsRUFBR25FLEVBQUd5WCxJQUFNQyxFQUFFclksS0FBS2tZLEVBQUV5cEMsR0FBR2IsaUJBQWlCcGpELEVBQUdpRCxHQUN4QyxJQUNELElBQUkrRCxFQUFJZ2xDLEtBQWdDNWtDLEVBQUlvbEMsS0FLNUMsR0FBSXJyQixFQUFFNndCLGdCQUFnQjNwQixTQUFTbE8sSUFDM0JnSCxFQUFFOHdCLHVCQUF1QnhvQyxJQUFJMFEsSUFBTVEsRUFBRXJZLEtBQUtrWSxFQUFFOG5DLFlBQVk5QixrQkFBa0JpRixvQkFBb0J6bEQsRUFBR21hLEdBQ3BHLElBR0RRLEVBQUVyWSxLQW1CTixTQUFnRHRDLEVBQUdtaEIsRUFBRzNHLEdBQ3RELElBQUlMLEVBQUlxeUIsS0FBNEJsc0MsRUFBSWtzQyxLQUN4QyxPQUFPaHlCLEVBQUU2TixTQUFTcm9CLEdBQUttYSxFQUFJQSxFQUFFek8sSUFBSTFMLEtBQU1taEIsRUFBRTA1QixXQUFXNzZDLEVBQUdtYSxHQUFHb0gsTUFBTXZoQixJQUM1RCxJQUFJbWEsRUFBSTZ4QixLQUNSLE9BQU94eEIsRUFBRTZOLFNBQVEsQ0FBRTdOLEVBQUdFLEtBQ2xCLE1BQU1DLEVBQUkzYSxFQUFFcUosSUFBSW1SLEdBRUpFLEVBQUUyc0Isb0JBQXNCMXNCLEVBQUUwc0Isb0JBQXNCL21DLEVBQUlBLEVBQUVvTCxJQUFJOE8sSUFLdEVFLEVBQUU0c0IsZ0JBQWtCNXNCLEVBQUVuSSxRQUFRK2lCLFFBQVErRSxHQUFnQjVLLFFBSXREdE8sRUFBRXU3QixZQUFZbGlDLEVBQUdFLEVBQUV1aUIsVUFBVzlpQixFQUFJQSxFQUFFaWxCLE9BQU81a0IsRUFBR0UsS0FBT0MsRUFBRXlzQixtQkFBcUIxc0IsRUFBRW5JLFFBQVFpb0IsVUFBVTdmLEVBQUVwSSxTQUFXLEdBQUssSUFBTW1JLEVBQUVuSSxRQUFRaW9CLFVBQVU3ZixFQUFFcEksVUFBWW9JLEVBQUV3c0Isa0JBQW9CaG1CLEVBQUVxN0IsU0FBUzloQyxHQUMzTFAsRUFBSUEsRUFBRWlsQixPQUFPNWtCLEVBQUdFLElBQU1rYixHQUFtQixhQUFjLHNDQUF1Q3BiLEVBQUcscUJBQXNCRyxFQUFFcEksUUFBUyxrQkFBbUJtSSxFQUFFbkksUUFDMUosSUFBSSxDQUNEcWtELEdBQUl6OEMsRUFDSjA4QyxHQUFJdjJELEVBRVgsR0FDTCxDQTFDZXcyRCxDQUF1QzkyRCxFQUFHMGEsRUFBR3lHLEVBQUU2d0IsaUJBQWlCendCLE1BQU12aEIsSUFDekVnSCxFQUFJaEgsRUFBRTQyRCxHQUFJeHZELEVBQUlwSCxFQUFFNjJELEVBQ25CLE1BQU0xOEMsRUFBRW1iLFFBQVErRSxHQUFnQjVLLE9BQVEsQ0FDckMsTUFBTXRPLEVBQUkzRyxFQUFFeXBDLEdBQUduQiw2QkFBNkI5aUQsR0FBR3VoQixNQUFNSixHQUFLM0csRUFBRXlwQyxHQUFHaEIsbUJBQW1CampELEVBQUdBLEVBQUVrbEQsc0JBQXVCL3FDLEtBQzlHUSxFQUFFclksS0FBSzZlLEVBQ1gsQ0FDQSxPQUFPdWMsR0FBbUJTLFFBQVF4akIsR0FBRzRHLE1BQUssSUFBTzdHLEVBQUUzSyxNQUFNL1AsS0FBS3VoQixNQUFLLElBQU8vRyxFQUFFMHNDLGVBQWUzSix3QkFBd0J2OUMsRUFBR2dILEVBQUdJLEtBQUttYSxNQUFLLElBQU92YSxHQUM3SSxJQUFHbUssTUFBTW5SLElBQU13YSxFQUFFcXNDLEdBQUt2bUQsRUFBR04sSUFDOUIsQ0FrNUd3QisyRCxDQUFpRHY4QyxFQUFFKzFDLFdBQVlwdkMsR0FFdkVBLEVBQUUyd0IsY0FBY3pwQixTQUFRLENBQUVyb0IsRUFBR21oQixLQUNqQyxNQUFNaEgsRUFBSUssRUFBRWtGLEdBQUdyVyxJQUFJOFgsR0FDbkJoSCxJQUdBOGIsR0FBcUJqMkIsRUFBRXV5QyxlQUFldnVCLEtBQU9oa0IsRUFBRXd5QyxrQkFBa0J4dUIsS0FBT2hrQixFQUFFeXlDLGlCQUFpQnp1QixNQUFRLEdBQ25HaGtCLEVBQUV1eUMsZUFBZXZ1QixLQUFPLEVBQUk3SixFQUFFcUUsSUFBSyxFQUFLeGUsRUFBRXd5QyxrQkFBa0J4dUIsS0FBTyxFQUFJaVMsR0FBcUI5YixFQUFFcUUsSUFBTXhlLEVBQUV5eUMsaUJBQWlCenVCLEtBQU8sSUFBTWlTLEdBQXFCOWIsRUFBRXFFLElBQzNKckUsRUFBRXFFLElBQUssR0FDVixVQUFVdzRDLEdBQW9EeDhDLEVBQUd4YSxFQUFHbWhCLEVBQ3pFLENBQUUsTUFBT25oQixTQUNDeTlCLEdBQW1DejlCLEVBQzdDLENBQ0osQ0FLSSxTQUFTaTNELEdBQTJDajNELEVBQUdtaEIsRUFBRzNHLEdBQzFELE1BQU1MLEVBQUkrYixHQUFvQmwyQixHQUsxQixHQUFJbWEsRUFBRTY3QyxpQkFBbUIsSUFBMEN4N0MsSUFBTUwsRUFBRTY3QyxpQkFBbUIsSUFBZ0R4N0MsRUFBRyxDQUNqSixNQUFNeGEsRUFBSSxHQUNWbWEsRUFBRWtKLEdBQUdnRixTQUFRLENBQUU3TixFQUFHTCxLQUNkLE1BQU03WixFQUFJNlosRUFBRXM3QyxLQUFLVCxHQUFHN3pDLEdBQ3BCN2dCLEVBQUVpMUQsVUFBWXYxRCxFQUFFc0MsS0FBS2hDLEVBQUVpMUQsU0FDMUIsSUFBSSxTQUFtRHYxRCxFQUFHbWhCLEdBQ3ZELE1BQU0zRyxFQUFJMGIsR0FBb0JsMkIsR0FDOUJ3YSxFQUFFeTVDLFlBQWM5eUMsRUFDaEIsSUFBSWhILEdBQUksRUFDUkssRUFBRXc1QyxRQUFRM3JDLFNBQVEsQ0FBRXJvQixFQUFHd2EsS0FDbkIsSUFBSyxNQUFNeGEsS0FBS3dhLEVBQUVzNUMsVUFFbEI5ekQsRUFBRWcxRCxHQUFHN3pDLEtBQU9oSCxHQUFJLEVBQ25CLElBQUlBLEdBQUtrNkMsR0FBb0M3NUMsRUFDbEQsQ0FUSyxDQVNITCxFQUFFMDdDLGFBQWMxMEMsR0FBSW5oQixFQUFFTyxRQUFVNFosRUFBRXNGLEdBQUdzdkMsR0FBRy91RCxHQUFJbWEsRUFBRTg1QyxZQUFjOXlDLEVBQUdoSCxFQUFFNjdDLGlCQUFtQjc3QyxFQUFFMjdDLGtCQUFrQjNNLGVBQWVob0MsRUFDN0gsQ0FDSixDQVlJdFAsZUFBZXVrRCxHQUFpQ3AyRCxFQUFHbWhCLEVBQUczRyxHQUN0RCxNQUFNTCxFQUFJK2IsR0FBb0JsMkIsR0FFMUJtYSxFQUFFMjdDLGtCQUFrQmxOLGlCQUFpQnpuQyxFQUFHLFdBQVkzRyxHQUN4RCxNQUFNbGEsRUFBSTZaLEVBQUV1RixHQUFHclcsSUFBSThYLEdBQUl6RyxFQUFJcGEsR0FBS0EsRUFBRTJHLElBQ2xDLEdBQUl5VCxFQUFHLENBT0gsSUFBSTFhLEVBQUksSUFBSWcvQixHQUFVNUMsR0FBWXJCLFlBSTFCLzZCLEVBQUlBLEVBQUVvL0IsT0FBTzFrQixFQUFHeXJCLEdBQWdCTSxjQUFjL3JCLEVBQUcyZixHQUFnQjVLLFFBQ3pFLE1BQU1qVixFQUFJZ3lCLEtBQTJCOWdDLElBQUlnUCxHQUFJcGEsRUFBSSxJQUFJc3hDLEdBQVl2WCxHQUFnQjVLLE1BQzVELElBQUl4bUIsSUFDRCxJQUFJKzFCLEdBQVV6RixJQUFnQ3Y1QixFQUFHd2EsU0FDbkUwN0MsR0FBcUMvN0MsRUFBRzdaLEdBTTlDNlosRUFBRWtGLEdBQUtsRixFQUFFa0YsR0FBR2tnQixPQUFPN2tCLEdBQUlQLEVBQUV1RixHQUFHaFYsT0FBT3lXLEdBQUkrMUMsR0FBdUMvOEMsRUFDbEYsWUFBYXV0QyxHQUFrQ3Z0QyxFQUFFbzJDLFdBQVlwdkMsR0FDL0IsR0FBSWhRLE1BQUssSUFBT3VsRCxHQUFpQ3Y4QyxFQUFHZ0gsRUFBRzNHLEtBQUsxVSxNQUFNMjNCLEdBQ3BHLENBdUZBLFNBQVNpNUIsR0FBaUMxMkQsRUFBR21oQixFQUFHM0csRUFBSSxNQUNoRHhhLEVBQUU4MUQsa0JBQWtCak4sdUJBQXVCMW5DLEdBQzNDLElBQUssTUFBTWhILEtBQUtuYSxFQUFFeVosR0FBR3BRLElBQUk4WCxHQUFJbmhCLEVBQUVxakIsR0FBRzNZLE9BQU95UCxHQUFJSyxHQUFLeGEsRUFBRXlmLEdBQUdILEdBQUduRixFQUFHSyxHQUN6RHhhLEVBQUV5WixHQUFHL08sT0FBT3lXLEdBQUluaEIsRUFBRWcyRCxpQkFDbEJoMkQsRUFBRWdiLEdBQUdrbEMsR0FBRy8rQixHQUFHa0gsU0FBU2xILElBQ2hCbmhCLEVBQUVnYixHQUFHcWxDLFlBQVlsL0IsSUFFakJnMkMsR0FBNEJuM0QsRUFBR21oQixFQUNsQyxHQUVULENBRUEsU0FBU2cyQyxHQUE0Qm4zRCxFQUFHbWhCLEdBQ3BDbmhCLEVBQUV3YyxHQUFHOVIsT0FBT3lXLEVBQUVrYixLQUFLVCxtQkFHbkIsTUFBTXBoQixFQUFJeGEsRUFBRXFmLEdBQUdoVyxJQUFJOFgsR0FDbkIsT0FBUzNHLElBQU1nM0MsR0FBOEJ4eEQsRUFBRTQxRCxZQUFhcDdDLEdBQUl4YSxFQUFFcWYsR0FBS3JmLEVBQUVxZixHQUFHa2dCLE9BQU9wZSxHQUNuRm5oQixFQUFFMGYsR0FBR2hWLE9BQU84UCxHQUFJMDhDLEdBQXVDbDNELEdBQzNELENBRUEsU0FBU3UyRCxHQUE4QnYyRCxFQUFHbWhCLEVBQUczRyxHQUN6QyxJQUFLLE1BQU1MLEtBQUtLLEVBQU9MLGFBQWErNkMsSUFBOEJsMUQsRUFBRWdiLEdBQUc2a0MsYUFBYTFsQyxFQUFFbFQsSUFBS2thLEdBQzNGaTJDLEdBQTJCcDNELEVBQUdtYSxJQUFhQSxhQUFhZzdDLElBQ3BEdi9CLEdBQW1CLGFBQWMsZ0NBQWtDemIsRUFBRWxULEtBQU1qSCxFQUFFZ2IsR0FBRytrQyxnQkFBZ0I1bEMsRUFBRWxULElBQUtrYSxHQUN2R25oQixFQUFFZ2IsR0FBR3FsQyxZQUFZbG1DLEVBQUVsVCxNQUVuQmt3RCxHQUE0Qm4zRCxFQUFHbWEsRUFBRWxULE1BQzlCK3VCLElBQ1gsQ0FFQSxTQUFTb2hDLEdBQTJCcDNELEVBQUdtaEIsR0FDbkMsTUFBTTNHLEVBQUkyRyxFQUFFbGEsSUFBS2tULEVBQUlLLEVBQUU2aEIsS0FBS1Qsa0JBQzVCNTdCLEVBQUVxZixHQUFHaFcsSUFBSW1SLElBQU14YSxFQUFFd2MsR0FBRy9TLElBQUkwUSxLQUFPeWIsR0FBbUIsYUFBYywwQkFBNEJwYixHQUM1RnhhLEVBQUV3YyxHQUFHOVEsSUFBSXlPLEdBQUkrOEMsR0FBdUNsM0QsR0FDeEQsQ0FTSSxTQUFTazNELEdBQXVDbDNELEdBQ2hELEtBQU1BLEVBQUV3YyxHQUFHd0gsS0FBTyxHQUFLaGtCLEVBQUVxZixHQUFHMkUsS0FBT2hrQixFQUFFKzFELCtCQUFpQyxDQUNsRSxNQUFNNTBDLEVBQUluaEIsRUFBRXdjLEdBQUczUixTQUFTMFcsT0FBTzFiLE1BQy9CN0YsRUFBRXdjLEdBQUc5UixPQUFPeVcsR0FDWixNQUFNM0csRUFBSSxJQUFJNGhCLEdBQVlULEdBQWF2SCxXQUFXalQsSUFBS2hILEVBQUluYSxFQUFFd2IsR0FBRytGLE9BQ2hFdmhCLEVBQUUwZixHQUFHL1YsSUFBSXdRLEVBQUcsSUFBSXU3QyxHQUFnQmw3QyxJQUFLeGEsRUFBRXFmLEdBQUtyZixFQUFFcWYsR0FBRytmLE9BQU81a0IsRUFBR0wsR0FBSWczQyxHQUE0Qm54RCxFQUFFNDFELFlBQWEsSUFBSS9jLEdBQVczTixHQUF3QkwsR0FBMEJyd0IsRUFBRTZoQixPQUFRbGlCLEVBQUcsK0JBQXFFb2tCLEdBQXlCbE0sSUFDMVIsQ0FDSixDQUVBeGdCLGVBQWVtbEQsR0FBb0RoM0QsRUFBR21oQixFQUFHM0csR0FDckUsTUFBTUwsRUFBSStiLEdBQW9CbDJCLEdBQUlNLEVBQUksR0FBSW9hLEVBQUksR0FBSUMsRUFBSSxHQUN0RFIsRUFBRWtKLEdBQUdrWSxZQUFjcGhCLEVBQUVrSixHQUFHZ0YsU0FBUSxDQUFFcm9CLEVBQUdnSCxLQUNqQzJULEVBQUVyWSxLQUFLNlgsRUFBRWdDLEdBQUduVixFQUFHbWEsRUFBRzNHLEdBQUdySixNQUFNblIsSUFFdkIsSUFHQ0EsR0FBS3dhLElBQU1MLEVBQUU2N0MsaUJBQW1CNzdDLEVBQUUyN0Msa0JBQWtCbE4saUJBQWlCNWhELEVBQUUrckMsVUFBVyxNQUFRL3lDLE9BQUksRUFBU0EsRUFBRTJsRCxXQUFhLGNBQWdCLFdBQ3ZJM2xELEVBQUcsQ0FDQ00sRUFBRWdDLEtBQUt0QyxHQUNQLE1BQU1taEIsRUFBSXVrQyxHQUEyQkksR0FBRzkrQyxFQUFFK3JDLFNBQVUveUMsR0FDcEQwYSxFQUFFcFksS0FBSzZlLEVBQ1gsQ0FDSCxJQUNKLFVBQVV6YixRQUFRb0YsSUFBSTZQLEdBQUlSLEVBQUVzRixHQUFHc3ZDLEdBQUd6dUQsU0FBVXVSLGVBQTBEN1IsRUFBR21oQixHQUN0RyxNQUFNM0csRUFBSTBiLEdBQW9CbDJCLEdBQzlCLFVBQ1V3YSxFQUFFOG5DLFlBQVl1QyxlQUFlLHlCQUEwQixhQUFjN2tELEdBQUswOUIsR0FBbUJyVixRQUFRbEgsR0FBSUEsR0FBS3VjLEdBQW1CclYsUUFBUWxILEVBQUV5a0MsSUFBS3pyQyxHQUFLSyxFQUFFOG5DLFlBQVk5QixrQkFBa0JYLGFBQWE3L0MsRUFBR21oQixFQUFFNHhCLFNBQVU1NEIsS0FBS29ILE1BQUssSUFBT21jLEdBQW1CclYsUUFBUWxILEVBQUUwa0MsSUFBSzFyQyxHQUFLSyxFQUFFOG5DLFlBQVk5QixrQkFBa0JULGdCQUFnQi8vQyxFQUFHbWhCLEVBQUU0eEIsU0FBVTU0QixVQUNsVixDQUFFLE1BQU9uYSxHQUNMLElBQUtzK0IsR0FBc0N0K0IsR0FBSSxNQUFNQSxFQUtyRDQxQixHQUFtQixhQUFjLHNDQUF3QzUxQixFQUM3RSxDQUNBLElBQUssTUFBTUEsS0FBS21oQixFQUFHLENBQ2YsTUFBTUEsRUFBSW5oQixFQUFFK3lDLFNBQ1osSUFBSy95QyxFQUFFMmxELFVBQVcsQ0FDZCxNQUFNM2xELEVBQUl3YSxFQUFFcXNDLEdBQUd4OUMsSUFBSThYLEdBQUloSCxFQUFJbmEsRUFBRTZ4QyxnQkFBaUJ2eEMsRUFBSU4sRUFBRW81QyxpQ0FBaUNqL0IsR0FFckVLLEVBQUVxc0MsR0FBS3JzQyxFQUFFcXNDLEdBQUd6bkIsT0FBT2plLEVBQUc3Z0IsRUFDMUMsQ0FDSixDQUNKLENBcEI2Q3VSLENBb0IzQ3NJLEVBQUVvMkMsV0FBWTcxQyxHQUNwQixDQUVBN0ksZUFBZXdsRCxHQUEyQ3IzRCxFQUFHbWhCLEdBQ3pELE1BQU0zRyxFQUFJMGIsR0FBb0JsMkIsR0FDOUIsSUFBS3dhLEVBQUV1ZCxZQUFZekMsUUFBUW5VLEdBQUksQ0FDM0J5VSxHQUFtQixhQUFjLHlCQUEwQnpVLEVBQUVrVSxTQUM3RCxNQUFNcjFCLFFBQVVxbkQsR0FBcUM3c0MsRUFBRSsxQyxXQUFZcHZDLEdBQ25FM0csRUFBRXVkLFlBQWM1VyxFQUVoQixTQUEyRG5oQixFQUFHbWhCLEdBQzFEbmhCLEVBQUVxaUIsR0FBR2dHLFNBQVNyb0IsSUFDVkEsRUFBRXFvQixTQUFTcm9CLElBQ1BBLEVBQUV1RixPQUFPLElBQUkyeEIsR0FBZSxHQUFFZCxVQUdyQyxvRUFGSSxHQUNKLElBQUlwMkIsRUFBRXFpQixHQUFHOEksT0FDZCxDQU5BLENBTUUzUSxHQUVGQSxFQUFFczdDLGtCQUFrQjVNLGlCQUFpQi9uQyxFQUFHbmhCLEVBQUV1bkQsZ0JBQWlCdm5ELEVBQUV3bkQscUJBQXNCd1AsR0FBb0R4OEMsRUFBR3hhLEVBQUVzbkQsR0FDaEosQ0FDSixDQUVBLFNBQVM2TyxHQUEyQ24yRCxFQUFHbWhCLEdBQ25ELE1BQU0zRyxFQUFJMGIsR0FBb0JsMkIsR0FBSW1hLEVBQUlLLEVBQUVrRixHQUFHclcsSUFBSThYLEdBQy9DLEdBQUloSCxHQUFLQSxFQUFFcUUsR0FBSSxPQUFPZ3VCLEtBQTJCOWdDLElBQUl5TyxFQUFFbFQsS0FDdkQsQ0FDSSxJQUFJakgsRUFBSXdzQyxLQUNSLE1BQU1yeUIsRUFBSUssRUFBRWYsR0FBR3BRLElBQUk4WCxHQUNuQixJQUFLaEgsRUFBRyxPQUFPbmEsRUFDZixJQUFLLE1BQU1taEIsS0FBS2hILEVBQUcsQ0FDZixNQUFNQSxFQUFJSyxFQUFFNkksR0FBR2hhLElBQUk4WCxHQUNuQm5oQixFQUFJQSxFQUFFMmhDLFVBQVV4bkIsRUFBRXM3QyxLQUFLMTJDLEdBQzNCLENBQ0EsT0FBTy9lLENBQ1gsQ0FDSixDQXdTQSxNQUFNczNELEdBQ0YsV0FBQTd6RCxHQUNJM0QsS0FBS3kzRCxpQkFBa0IsQ0FDM0IsQ0FDQSxnQkFBTWxzRCxDQUFXckwsR0FDYkYsS0FBS3l0QyxXQUFhdWUsR0FBd0I5ckQsRUFBRWdyRCxhQUFhcm5CLFlBQWE3akMsS0FBS2cyRCxrQkFBb0JoMkQsS0FBSzAzRCx3QkFBd0J4M0QsR0FDNUhGLEtBQUt3aUQsWUFBY3hpRCxLQUFLMjNELGtCQUFrQnozRCxTQUFVRixLQUFLd2lELFlBQVkxL0IsUUFBUzlpQixLQUFLeXdELFdBQWF6d0QsS0FBSzQzRCxpQkFBaUIxM0QsR0FDdEhGLEtBQUs2M0QsWUFBYzczRCxLQUFLODNELGlDQUFpQzUzRCxFQUFHRixLQUFLeXdELFlBQWF6d0QsS0FBSyszRCx5QkFBMkIvM0QsS0FBS2c0RCwrQkFBK0I5M0QsRUFBR0YsS0FBS3l3RCxXQUM5SixDQUNBLGdDQUFBcUgsQ0FBaUM1M0QsRUFBR21oQixHQUNoQyxPQUFPLElBQ1gsQ0FDQSw4QkFBQTIyQyxDQUErQjkzRCxFQUFHbWhCLEdBQzlCLE9BQU8sSUFDWCxDQUNBLGdCQUFBdTJDLENBQWlCMTNELEdBQ2IsT0F0cUlSLFNBRUFBLEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ0wsT0FBTyxJQUFJd3NDLEdBQXlCM21ELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQ2pELENBa3FJZTQ5QyxDQUF3Qmo0RCxLQUFLd2lELFlBQWEsSUFBSTJELEdBQXVCam1ELEVBQUVnNEQsWUFBYWw0RCxLQUFLeXRDLFdBQ3BHLENBQ0EsaUJBQUFrcUIsQ0FBa0J6M0QsR0FDZCxPQUFPLElBQUk2akQsR0FBNEJzQixHQUE4QkcsR0FBSXhsRCxLQUFLeXRDLFdBQ2xGLENBQ0EsdUJBQUFpcUIsQ0FBd0J4M0QsR0FDcEIsT0FBTyxJQUFJcW9ELEVBQ2YsQ0FDQSxlQUFNc0gsR0FDRjd2RCxLQUFLNjNELGFBQWU3M0QsS0FBSzYzRCxZQUFZaEssYUFBYzd0RCxLQUFLZzJELGtCQUFrQnArQixpQkFDcEU1M0IsS0FBS3dpRCxZQUFZNXFCLFVBQzNCLEVBNkZBLE1BQU11Z0MsR0FDTixnQkFBTTVzRCxDQUFXckwsRUFBR21oQixHQUNoQnJoQixLQUFLeXdELGFBQWV6d0QsS0FBS3l3RCxXQUFhdndELEVBQUV1d0QsV0FBWXp3RCxLQUFLZzJELGtCQUFvQjkxRCxFQUFFODFELGtCQUMvRWgyRCxLQUFLMHdELFVBQVkxd0QsS0FBS280RCxnQkFBZ0IvMkMsR0FBSXJoQixLQUFLODFELFlBQWM5MUQsS0FBS3E0RCxrQkFBa0JoM0MsR0FDcEZyaEIsS0FBSysxRCxhQUFlLzFELEtBQUtzNEQsbUJBQW1CajNDLEdBQUlyaEIsS0FBS3U0RCxXQUFhdjRELEtBQUt3NEQsaUJBQWlCbjNDLEdBQ2xFbmhCLEVBQUV1M0QsaUJBQWtCejNELEtBQUtnMkQsa0JBQWtCdE4sbUJBQXFCeG9ELEdBQUtpM0QsR0FBMkNuM0QsS0FBS3U0RCxXQUFZcjRELEVBQUcsR0FDMUpGLEtBQUs4MUQsWUFBWW5GLGFBQWEyQix1QkFBeUJpRixHQUEyQzE5QyxLQUFLLEtBQU03WixLQUFLdTRELGtCQTMxRHRIeG1ELGVBQXNEN1IsRUFBR21oQixHQUN6RCxNQUFNM0csRUFBSTBiLEdBQW9CbDJCLEdBQzlCbWhCLEdBQUszRyxFQUFFbzJDLEdBQUdsbUQsT0FBTyxTQUF5Q3dtRCxHQUFnQzEyQyxJQUFNMkcsSUFBTTNHLEVBQUVvMkMsR0FBR2xsRCxJQUFJLFNBQ3pHc2xELEdBQWlDeDJDLEdBQUlBLEVBQUV5MkMsR0FBR3RuRCxJQUFJLFdBQ3hELENBdzFEYzR1RCxDQUF1Q3o0RCxLQUFLODFELFlBQWE5MUQsS0FBS3U0RCxXQUFXckMsaUJBQ25GLENBQ0Esa0JBQUFvQyxDQUFtQnA0RCxHQUNmLE9BQ1csSUFBSSt6RCxFQUVuQixDQUNBLGVBQUFtRSxDQUFnQmw0RCxHQUNaLE1BQU1taEIsRUFBSTJxQyxHQUF3QjlyRCxFQUFFZ3JELGFBQWFybkIsWUFBYW5wQixFQUFJLFNBQWlDeGEsR0FDL0YsT0FBTyxJQUFJK3FELEdBQStCL3FELEVBQzlDLENBRmtFLENBR1BBLEVBQUVnckQsY0FDN0QsT0FBTyxTQUFnQ2hyRCxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUM1QyxPQUFPLElBQUltMUMsR0FBd0J0dkQsRUFBR21oQixFQUFHM0csRUFBR0wsRUFDaEQsQ0FGTyxDQUVMbmEsRUFBRXV2RCxnQkFBaUJ2dkQsRUFBRXd2RCxvQkFBcUJoMUMsRUFBRzJHLEVBQ25ELENBQ0EsaUJBQUFnM0MsQ0FBa0JuNEQsR0FDZCxPQUFPLFNBQWtDQSxFQUFHbWhCLEVBQUczRyxFQUFHTCxFQUFHN1osR0FDakQsT0FBTyxJQUFJZ3dELEdBQTBCdHdELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixFQUNyRCxDQUZPLENBR3FDUixLQUFLeXdELFdBQVl6d0QsS0FBSzB3RCxVQUFXeHdELEVBQUU2dkQsWUFBYTd2RCxHQUFLaTNELEdBQTJDbjNELEtBQUt1NEQsV0FBWXI0RCxFQUFHLElBQ3JKdXBELEdBQXFDOXVDLElBQU0sSUFBSTh1QyxHQUF1QyxJQUFJRixHQUV6RyxDQUNBLGdCQUFBaVAsQ0FBaUJ0NEQsRUFBR21oQixHQUNoQixPQUFPLFNBQWlDbmhCLEVBQUdtaEIsRUFBRzNHLEVBRTlDTCxFQUFHN1osRUFBR29hLEVBQUdDLEdBQ0wsTUFBTTNULEVBQUksSUFBSTJ1RCxHQUF5QjMxRCxFQUFHbWhCLEVBQUczRyxFQUFHTCxFQUFHN1osRUFBR29hLEdBQ3RELE9BQU9DLElBQU0zVCxFQUFFc1YsSUFBSyxHQUFLdFYsQ0FDN0IsQ0FMTyxDQUtMbEgsS0FBS3l3RCxXQUFZendELEtBQUs4MUQsWUFBYTkxRCxLQUFLKzFELGFBQWMvMUQsS0FBS2cyRCxrQkFBbUI5MUQsRUFBRWc0RCxZQUFhaDRELEVBQUUrMUQsOEJBQStCNTBDLEVBQ3BJLENBQ0EsU0FBQXd1QyxHQUNJLE9BQU85OUMsZUFBNkM3UixHQUNoRCxNQUFNbWhCLEVBQUkrVSxHQUFvQmwyQixHQUM5QjQxQixHQUFtQixjQUFlLDhCQUErQnpVLEVBQUV5dkMsR0FBR2xsRCxJQUFJLFNBQ3BFc2xELEdBQWlDN3ZDLEdBQUlBLEVBQUUydkMsR0FBR3A1QixXQUdoRHZXLEVBQUU4dkMsR0FBR3RuRCxJQUFJLFVBQ2IsQ0FQT2tJLENBT0wvUixLQUFLODFELFlBQ1gsRUFnR0osTUFBTTRDLEdBQ0YsV0FBQS8wRCxDQUFZekQsR0FDUkYsS0FBSzI0RCxTQUFXejRELEVBS2hCRixLQUFLNDRELE9BQVEsQ0FDakIsQ0FDQSxJQUFBbjNDLENBQUt2aEIsR0FDREYsS0FBSzI0RCxTQUFTbDNDLE1BQVF6aEIsS0FBS29jLEdBQUdwYyxLQUFLMjRELFNBQVNsM0MsS0FBTXZoQixFQUN0RCxDQUNBLEtBQUErRSxDQUFNL0UsR0FDRkYsS0FBSzI0RCxTQUFTMXpELE1BQVFqRixLQUFLb2MsR0FBR3BjLEtBQUsyNEQsU0FBUzF6RCxNQUFPL0UsR0FBSzgxQixHQUFtQix1Q0FBd0M5MUIsRUFBRWdhLFdBQ3pILENBQ0EsRUFBQTJDLEdBQ0k3YyxLQUFLNDRELE9BQVEsQ0FDakIsQ0FDQSxFQUFBeDhDLENBQUdsYyxFQUFHbWhCLEdBQ0ZyaEIsS0FBSzQ0RCxPQUFTNTJDLFlBQVcsS0FDckJoaUIsS0FBSzQ0RCxPQUFTMTRELEVBQUVtaEIsRUFDbkIsR0FBRyxFQUNSLEVBK1ZKLE1BQU13M0MsR0FDRixXQUFBbDFELENBQVl6RCxFQUFHbWhCLEVBU2YzRyxFQUFHTCxHQUNDcmEsS0FBS3l2RCxnQkFBa0J2dkQsRUFBR0YsS0FBSzB2RCxvQkFBc0JydUMsRUFBR3JoQixLQUFLK3ZELFdBQWFyMUMsRUFBRzFhLEtBQUtrckQsYUFBZTd3QyxFQUNqR3JhLEtBQUt1M0IsS0FBT25DLEdBQUtLLGdCQUFpQnoxQixLQUFLODRELFNBQVd0L0IsR0FBaUJoVSxJQUFLeGxCLEtBQUsrNEQsdUJBQXlCLElBQU1uekQsUUFBUUYsVUFDcEgxRixLQUFLZzVELDJCQUE2QixJQUFNcHpELFFBQVFGLFVBQVcxRixLQUFLeXZELGdCQUFnQjNzQyxNQUFNcEksR0FBRyxNQUFDM0ksSUFDdEYrakIsR0FBbUIsa0JBQW1CLGlCQUFrQjUxQixFQUFFbTFCLFdBQVlyMUIsS0FBSys0RCx1QkFBdUI3NEQsR0FDbEdGLEtBQUt1M0IsS0FBT3IzQixDQUNmLElBQUlGLEtBQUswdkQsb0JBQW9CNXNDLE1BQU1wSSxHQUFJeGEsSUFBTTQxQixHQUFtQixrQkFBbUIsZ0NBQWlDNTFCLEdBQ3JIRixLQUFLZzVELDJCQUEyQjk0RCxFQUFHRixLQUFLdTNCLFFBQzVDLENBQ0Esc0JBQU0waEMsR0FDRixNQUFPLENBQ0hsSixXQUFZL3ZELEtBQUsrdkQsV0FDakI3RSxhQUFjbHJELEtBQUtrckQsYUFDbkI0TixTQUFVOTRELEtBQUs4NEQsU0FDZnJKLGdCQUFpQnp2RCxLQUFLeXZELGdCQUN0QkMsb0JBQXFCMXZELEtBQUswdkQsb0JBQzFCd0ksWUFBYWw0RCxLQUFLdTNCLEtBQ2xCMCtCLDhCQUErQixJQUV2QyxDQUNBLDJCQUFBaUQsQ0FBNEJoNUQsR0FDeEJGLEtBQUsrNEQsdUJBQXlCNzRELENBQ2xDLENBQ0EsOEJBQUFpNUQsQ0FBK0JqNUQsR0FDM0JGLEtBQUtnNUQsMkJBQTZCOTRELENBQ3RDLENBSU8sbUJBQUFrNUQsR0FDSCxHQUFJcDVELEtBQUsrdkQsV0FBV3NKLGVBQWdCLE1BQU0sSUFBSWppQyxHQUFlLEdBQUVOLG9CQUFxQiwwQ0FDeEYsQ0FDQSxTQUFBKzRCLEdBQ0k3dkQsS0FBSyt2RCxXQUFXdUosc0JBQ2hCLE1BQU1wNUQsRUFBSSxJQUFJbTNCLEdBQ2QsT0FBT3IzQixLQUFLK3ZELFdBQVd3SixxQ0FBb0MsVUFDdkQsSUFDSXY1RCxLQUFLdzVELHlCQUEyQng1RCxLQUFLdzVELGtCQUFrQjNKLFlBQWE3dkQsS0FBS3k1RCwwQkFBNEJ6NUQsS0FBS3k1RCxtQkFBbUI1SixZQUk3SDd2RCxLQUFLeXZELGdCQUFnQjczQixXQUFZNTNCLEtBQUswdkQsb0JBQW9COTNCLFdBQVkxM0IsRUFBRXdGLFNBQzVFLENBQUUsTUFBTzJiLEdBQ0wsTUFBTTNHLEVBQUlvNEMsR0FBdUN6eEMsRUFBRyxrQ0FDcERuaEIsRUFBRXVGLE9BQU9pVixFQUNiLENBQ0gsSUFBSXhhLEVBQUV5RixPQUNYLEVBR0pvTSxlQUFlMm5ELEdBQXNDeDVELEVBQUdtaEIsR0FDcERuaEIsRUFBRTZ2RCxXQUFXc0MsNEJBQTZCdjhCLEdBQW1CLGtCQUFtQix5Q0FDaEYsTUFBTXBiLFFBQVV4YSxFQUFFKzRELHlCQUNaNTNDLEVBQUU5VixXQUFXbVAsR0FDbkIsSUFBSUwsRUFBSUssRUFBRXc5QyxZQUNWaDRELEVBQUVnNUQsNkJBQTRCLE1BQUNubkQsSUFDM0JzSSxFQUFFbWIsUUFBUXQxQixXQUFhcW5ELEdBQXFDbG1DLEVBQUVvdkMsV0FBWXZ3RCxHQUFJbWEsRUFBSW5hLEVBQ3JGLElBR0RtaEIsRUFBRW1oQyxZQUFZK0IsNEJBQTJCLElBQU9ya0QsRUFBRTJ2RCxjQUFlM3ZELEVBQUV1NUQsbUJBQXFCcDRDLENBQzVGLENBRUF0UCxlQUFlNG5ELEdBQXFDejVELEVBQUdtaEIsR0FDbkRuaEIsRUFBRTZ2RCxXQUFXc0MsNEJBQ2IsTUFBTTMzQyxRQXlCVjNJLGVBQWlEN1IsR0FDN0MsSUFBS0EsRUFBRXU1RCxtQkFBb0IsR0FBSXY1RCxFQUFFMDVELGlDQUFrQyxDQUMvRDlqQyxHQUFtQixrQkFBbUIsZ0RBQ3RDLFVBQ1U0akMsR0FBc0N4NUQsRUFBR0EsRUFBRTA1RCxpQ0FBaUNDLFNBQ3RGLENBQUUsTUFBT3g0QyxHQUNMLE1BQU0zRyxFQUFJMkcsRUFDVixJQWxCUixTQUFpRG5oQixHQUNqRCxNQUFPLGtCQUFvQkEsRUFBRTRELEtBQU81RCxFQUFFZ0csT0FBUyxHQUFFNHdCLHFCQUF1QjUyQixFQUFFZ0csT0FBUyxHQUFFK3dCLGdCQUFrQixvQkFBc0J0bUIsY0FBZ0J6USxhQUFheVEsZUFJMUosS0FBT3pRLEVBQUVnRyxNQUFRLEtBQU9oRyxFQUFFZ0csTUFHMUIsS0FBT2hHLEVBQUVnRyxJQUNiLENBU2lCNHpELENBQXdDcC9DLEdBQUksTUFBTUEsRUFDdkR1YixHQUFrQixrRUFBb0V2YixTQUNoRmcvQyxHQUFzQ3g1RCxFQUFHLElBQUlzM0QsR0FDdkQsQ0FDSixNQUFPMWhDLEdBQW1CLGtCQUFtQixnREFDdkM0akMsR0FBc0N4NUQsRUFBRyxJQUFJczNELElBQ25ELE9BQU90M0QsRUFBRXU1RCxrQkFDYixDQXZDb0JNLENBQWtDNzVELEdBQ2xENDFCLEdBQW1CLGtCQUFtQix3Q0FDdEMsTUFBTXpiLFFBQVVuYSxFQUFFKzRELHlCQUNaNTNDLEVBQUU5VixXQUFXbVAsRUFBR0wsR0FHdEJuYSxFQUFFZzVELDZCQUE2Qmg1RCxHQUFLa3lELEdBQTRDL3dDLEVBQUV5MEMsWUFBYTUxRCxLQUMvRkEsRUFBRWk1RCxnQ0FBK0IsQ0FBRWo1RCxFQUFHd2EsSUFBTTAzQyxHQUE0Qy93QyxFQUFFeTBDLFlBQWFwN0MsS0FDdkd4YSxFQUFFczVELGtCQUFvQm40QyxDQUMxQixDQTBEQXRQLGVBQWVpb0QsR0FBMEI5NUQsR0FDckMsTUFBTW1oQixRQTNCVnRQLGVBQWdEN1IsR0FDNUMsT0FBT0EsRUFBRXM1RCxvQkFBc0J0NUQsRUFBRTA1RCxrQ0FBb0M5akMsR0FBbUIsa0JBQW1CLHFEQUNyRzZqQyxHQUFxQ3o1RCxFQUFHQSxFQUFFMDVELGlDQUFpQ0ssV0FBYW5rQyxHQUFtQixrQkFBbUIsK0NBQzlINmpDLEdBQXFDejVELEVBQUcsSUFBSWk0RCxNQUE0Qmo0RCxFQUFFczVELGlCQUNwRixDQXVCb0JVLENBQWlDaDZELEdBQUl3YSxFQUFJMkcsRUFBRTAwQyxhQUMzRCxPQUFPcjdDLEVBQUV5L0MsU0FBV2hFLEdBQTJCdDhDLEtBQUssS0FBTXdILEVBQUVrM0MsWUFBYTc5QyxFQUFFMC9DLFdBQWF6RCxHQUE2Qjk4QyxLQUFLLEtBQU13SCxFQUFFazNDLFlBQ2xJNzlDLENBQ0osQ0ErRkEsU0FBUzIvQyxHQUF5RG42RCxFQUFHbWhCLEVBQUczRyxFQUFJLENBQUMsR0FDekUsTUFBTUwsRUFBSSxJQUFJZ2QsR0FDZCxPQUFPbjNCLEVBQUU2dkQsV0FBV3RCLGtCQUFpQixTQUFhLFNBQW1EdnVELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixHQUM3RyxNQUFNb2EsRUFBSSxJQUFJODlDLEdBQXdCLENBQ2xDajNDLEtBQU0vRyxJQUdGMkcsRUFBRW90QyxrQkFBaUIsSUF4c0VuQzE4QyxlQUE4QzdSLEVBQUdtaEIsR0FDN0MsTUFBTTNHLEVBQUkwYixHQUFvQmwyQixHQUFJbWEsRUFBSWdILEVBQUU2OUIsTUFDeEMsSUFBSTErQyxHQUFJLEVBQ1IsTUFBTW9hLEVBQUlGLEVBQUV3NUMsUUFBUTNxRCxJQUFJOFEsR0FDeEIsR0FBSU8sRUFBRyxDQUNILE1BQU0xYSxFQUFJMGEsRUFBRW81QyxVQUFVNzVDLFFBQVFrSCxHQUM5Qm5oQixHQUFLLElBQU0wYSxFQUFFbzVDLFVBQVV0MEMsT0FBT3hmLEVBQUcsR0FBSU0sRUFBSSxJQUFNb2EsRUFBRW81QyxVQUFVdnpELE9BQy9ELENBQ0EsR0FBSUQsRUFBRyxPQUFPa2EsRUFBRXc1QyxRQUFRdHBELE9BQU95UCxHQUFJSyxFQUFFMC9DLFdBQVcvL0MsRUFDcEQsQ0ErckUwQ2lnRCxDQUErQnA2RCxFQUFHMmEsS0FBTUgsRUFBRW1yQyxXQUFhLFdBQWF4ckMsRUFBRWtnRCxPQUFTLzVELEVBQUVpRixPQUFPLElBQUkyeEIsR0FBZSxHQUFFRixZQUFhLGlMQUFtTDEyQixFQUFFa0YsUUFBUWdWLEVBQUUsRUFFdlZ6VixNQUFPL0UsR0FBS00sRUFBRWlGLE9BQU92RixLQUNyQjJhLEVBQUksSUFBSTY1QyxHQUF3Qmg2QyxFQUFHRSxFQUFHLENBQ3RDazZDLHdCQUF3QixFQUN4QkssSUFBSSxJQUVSLE9BL3RFUnBqRCxlQUE0QzdSLEVBQUdtaEIsR0FDM0MsTUFBTTNHLEVBQUkwYixHQUFvQmwyQixHQUFJbWEsRUFBSWdILEVBQUU2OUIsTUFDeEMsSUFBSTErQyxHQUFJLEVBQUlvYSxFQUFJRixFQUFFdzVDLFFBQVEzcUQsSUFBSThRLEdBQzlCLEdBQUlPLElBQU1wYSxHQUFJLEVBQUlvYSxFQUFJLElBQUlrNUMsSUFBK0J0ekQsRUFBRyxJQUN4RG9hLEVBQUVtNUMsU0FBV3I1QyxFQUFFeS9DLFNBQVM5L0MsRUFDNUIsQ0FBRSxNQUFPbmEsR0FDTCxNQUFNd2EsRUFBSW80QyxHQUF1QzV5RCxFQUFHLDRCQUE0QnNyQyxHQUF5Qm5xQixFQUFFNjlCLGtCQUMzRyxZQUFZNzlCLEVBQUVvekMsUUFBUS81QyxFQUMxQixDQUNJQSxFQUFFdzVDLFFBQVFycUQsSUFBSXdRLEVBQUdPLEdBQUlBLEVBQUVvNUMsVUFBVXh4RCxLQUFLNmUsR0FFMUNBLEVBQUU2ekMsR0FBR3g2QyxFQUFFeTVDLGFBQWN2NUMsRUFBRW01QyxJQUNuQjF5QyxFQUFFaXpDLEdBQUcxNUMsRUFBRW01QyxLQUFPUSxHQUFvQzc1QyxFQUUxRCxDQWl0RWU4L0MsQ0FBNkJ0NkQsRUFBRzJhLEVBQzNDLENBYmtELE9BYTFDbS9DLEdBQTBCOTVELEdBQUlBLEVBQUU2dkQsV0FBWTF1QyxFQUFHM0csRUFBR0wsS0FBTUEsRUFBRTFVLE9BQ3RFLENBOEpBLFNBQVM4MEQsR0FBa0N2NkQsR0FDdkMsTUFBTW1oQixFQUFJLENBQUMsRUFDWCxZQUFPLElBQVduaEIsRUFBRTRyRCxpQkFBbUJ6cUMsRUFBRXlxQyxlQUFpQjVyRCxFQUFFNHJELGdCQUFpQnpxQyxDQUNqRixDQWlCSSxNQUFNd3hCLEdBQUssSUFBSTFwQyxJQTJDZixTQUFTdXhELEdBQWlDeDZELEdBQzFDLEdBQUlvOEIsR0FBWVMsY0FBYzc4QixHQUFJLE1BQU0sSUFBSWszQixHQUFlLEdBQUVaLGlCQUFrQixnR0FBZ0d0MkIsU0FBU0EsRUFBRU8sVUFDOUwsQ0FvQ0EsU0FBU2s2RCxHQUFlejZELEVBRXhCbWhCLEdBQ0ksR0FBSSxjQUFlbmhCLElBR25CQSxFQUFJQSxFQUFFMDZELGFBQWMxNkQsYUFBYW1oQixHQUFJLENBQ2pDLEdBQUlBLEVBQUV2ZCxPQUFTNUQsRUFBRXlELFlBQVlHLEtBQU0sTUFBTSxJQUFJc3pCLEdBQWUsR0FBRVosaUJBQWtCLHVHQUNoRixDQUNJLE1BQU05YixFQXRDbEIsU0FBb0N4YSxHQUNoQyxRQUFJLElBQVdBLEVBQUcsTUFBTyxZQUN6QixHQUFJLE9BQVNBLEVBQUcsTUFBTyxPQUN2QixHQUFJLGlCQUFtQkEsRUFBRyxPQUFPQSxFQUFFTyxPQUFTLEtBQU9QLEVBQUksR0FBR0EsRUFBRWtZLFVBQVUsRUFBRyxVQUN6RTNULEtBQUswVCxVQUFValksR0FDZixHQUFJLGlCQUFtQkEsR0FBSyxrQkFBb0JBLEVBQUcsTUFBTyxHQUFLQSxFQUMvRCxHQUFJLGlCQUFtQkEsRUFBRyxDQUN0QixHQUFJQSxhQUFhdUIsTUFBTyxNQUFPLFdBQy9CLENBQ0ksTUFBTTRmLEVBRU4sU0FBMENuaEIsR0FDdEMsT0FBSUEsRUFBRXlELFlBQW9CekQsRUFBRXlELFlBQVlHLEtBQ2pDLElBQ1gsQ0FIQSxDQVdQNUQsR0FDTyxPQUFPbWhCLEVBQUksWUFBWUEsV0FBYSxXQUN4QyxDQUNKLENBQ0EsTUFBTyxtQkFBcUJuaEIsRUFBSSxhQUFlZzJCLElBQ25ELENBV3NCMmtDLENBQTJCMzZELEdBQ3JDLE1BQU0sSUFBSWszQixHQUFlLEdBQUVaLGlCQUFrQixrQkFBa0JuVixFQUFFdmQsc0JBQXNCNFcsSUFDM0YsQ0FDSixDQUNBLE9BQU94YSxDQUNYLENBNEJBLE1BQU00NkQsR0FDRixXQUFBbjNELENBQVl6RCxHQUNSLElBQUltaEIsRUFBRzNHLEVBQ1AsUUFBSSxJQUFXeGEsRUFBRTZqQyxLQUFNLENBQ25CLFFBQUksSUFBVzdqQyxFQUFFOGpDLElBQUssTUFBTSxJQUFJNU0sR0FBZSxHQUFFWixpQkFBa0Isc0RBQ25FeDJCLEtBQUsrakMsS0FBTywyQkFBNEIvakMsS0FBS2drQyxLQUFNLENBQ3ZELE1BQU9oa0MsS0FBSytqQyxLQUFPN2pDLEVBQUU2akMsS0FBTS9qQyxLQUFLZ2tDLElBQU0sUUFBVTNpQixFQUFJbmhCLEVBQUU4akMsV0FBUSxJQUFXM2lCLEdBQUtBLEVBQzlFLEdBQUlyaEIsS0FBSzhzQixZQUFjNXNCLEVBQUU0c0IsWUFBYTlzQixLQUFLKzZELDRCQUE4Qjc2RCxFQUFFNjZELDBCQUMzRS82RCxLQUFLZzdELFdBQWE5NkQsRUFBRTg2RCxnQkFBWSxJQUFXOTZELEVBQUUrNkQsZUFBZ0JqN0QsS0FBS2k3RCxlQUFpQixhQUFlLENBQzlGLElBQUssSUFBTS82RCxFQUFFKzZELGdCQUFrQi82RCxFQUFFKzZELGVBQWlCLFFBQVMsTUFBTSxJQUFJN2pDLEdBQWUsR0FBRVosaUJBQWtCLDJDQUN4R3gyQixLQUFLaTdELGVBQWlCLzZELEVBQUUrNkQsY0FDNUIsRUF6R0osU0FBNkMvNkQsRUFBR21oQixFQUFHM0csRUFBR0wsR0FDdEQsSUFBSSxJQUFPZ0gsSUFBSyxJQUFPaEgsRUFBRyxNQUFNLElBQUkrYyxHQUFlLEdBQUVaLGlCQUFrQiw4RkFDM0UsRUF3R1Ewa0MsQ0FBb0MsRUFBZ0NoN0QsRUFBRWk3RCw2QkFBOEIsRUFBcUNqN0QsRUFBRWs3RCxtQ0FDM0lwN0QsS0FBS203RCwrQkFBaUNqN0QsRUFBRWk3RCw2QkFBOEJuN0QsS0FBS203RCw2QkFBK0JuN0QsS0FBS283RCxtQ0FBb0MsT0FBSyxJQUFXbDdELEVBQUVrN0Qsa0NBQW9DcDdELEtBQUtvN0QsbUNBQW9DLEVBSWxQcDdELEtBQUtvN0Qsb0NBQXNDbDdELEVBQUVrN0Qsa0NBQzdDcDdELEtBQUtxN0QsK0JBQWlDWixHQUFrQyxRQUFVLy9DLEVBQUl4YSxFQUFFbTdELHNDQUFtQyxJQUFXM2dELEVBQUlBLEVBQUksQ0FBQyxHQUMvSSxTQUE4Q3hhLEdBQzFDLFFBQUksSUFBV0EsRUFBRTRyRCxlQUFnQixDQUM3QixHQUFJN2tDLE1BQU0vbUIsRUFBRTRyRCxnQkFBaUIsTUFBTSxJQUFJMTBCLEdBQWUsR0FBRVosaUJBQWtCLGlDQUFpQ3QyQixFQUFFNHJELG9DQUM3RyxHQUFJNXJELEVBQUU0ckQsZUFBaUIsRUFBRyxNQUFNLElBQUkxMEIsR0FBZSxHQUFFWixpQkFBa0IsaUNBQWlDdDJCLEVBQUU0ckQsK0NBQzFHLEdBQUk1ckQsRUFBRTRyRCxlQUFpQixHQUFJLE1BQU0sSUFBSTEwQixHQUFlLEdBQUVaLGlCQUFrQixpQ0FBaUN0MkIsRUFBRTRyRCwrQ0FDL0csQ0FDSixDQU5BLENBMkJIOXJELEtBQUtxN0QsZ0NBQWlDcjdELEtBQUtta0Msa0JBQW9CamtDLEVBQUVpa0MsZUFDbEUsQ0FDQSxPQUFBM08sQ0FBUXQxQixHQUNKLE9BQU9GLEtBQUsrakMsT0FBUzdqQyxFQUFFNmpDLE1BQVEvakMsS0FBS2drQyxNQUFROWpDLEVBQUU4akMsS0FBT2hrQyxLQUFLOHNCLGNBQWdCNXNCLEVBQUU0c0IsYUFBZTlzQixLQUFLaTdELGlCQUFtQi82RCxFQUFFKzZELGdCQUFrQmo3RCxLQUFLbTdELCtCQUFpQ2o3RCxFQUFFaTdELDhCQUFnQ243RCxLQUFLbzdELG9DQUFzQ2w3RCxFQUFFazdELG1DQUFxQyxTQUEyQ2w3RCxFQUFHbWhCLEdBQzNVLE9BQU9uaEIsRUFBRTRyRCxpQkFBbUJ6cUMsRUFBRXlxQyxjQUNsQyxDQUZpUyxDQUUvUjlyRCxLQUFLcTdELCtCQUFnQ243RCxFQUFFbTdELGlDQUFtQ3I3RCxLQUFLKzZELDRCQUE4Qjc2RCxFQUFFNjZELDJCQUE2Qi82RCxLQUFLbWtDLGtCQUFvQmprQyxFQUFFaWtDLGVBQzdLLEVBR0osTUFBTW0zQixHQUVGLFdBQUEzM0QsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ2pCcmEsS0FBS3U3RCxpQkFBbUJyN0QsRUFBR0YsS0FBS3c3RCxxQkFBdUJuNkMsRUFBR3JoQixLQUFLeTdELFlBQWMvZ0QsRUFDN0UxYSxLQUFLMDdELEtBQU9yaEQsRUFJWnJhLEtBQUttSSxLQUFPLGlCQUFrQm5JLEtBQUsyN0QsZ0JBQWtCLFNBQVUzN0QsS0FBSzQ3RCxVQUFZLElBQUlkLEdBQXNCLENBQUMsR0FDM0c5NkQsS0FBSzY3RCxpQkFBa0IsQ0FDM0IsQ0FJTyxPQUFJM29ELEdBQ1AsSUFBS2xULEtBQUswN0QsS0FBTSxNQUFNLElBQUl0a0MsR0FBZSxHQUFFTixvQkFBcUIsZ0ZBQ2hFLE9BQU85MkIsS0FBSzA3RCxJQUNoQixDQUNBLGdCQUFJSSxHQUNBLE9BQU85N0QsS0FBSzY3RCxlQUNoQixDQUNBLGVBQUlFLEdBQ0EsWUFBTyxJQUFXLzdELEtBQUtnOEQsY0FDM0IsQ0FDQSxZQUFBQyxDQUFhLzdELEdBQ1QsR0FBSUYsS0FBSzY3RCxnQkFBaUIsTUFBTSxJQUFJemtDLEdBQWUsR0FBRU4sb0JBQXFCLHNLQUMxRTkyQixLQUFLNDdELFVBQVksSUFBSWQsR0FBc0I1NkQsUUFBSSxJQUFXQSxFQUFFNHNCLGNBQWdCOXNCLEtBQUt1N0QsaUJBQW1CLFNBQStDcjdELEdBQy9JLElBQUtBLEVBQUcsT0FBTyxJQUFJczNCLEdBQ25CLE9BQVF0M0IsRUFBRWlJLE1BQ1IsSUFBSyxhQUNILE9BQU8sSUFBSXl3QixHQUE0QzE0QixFQUFFZzhELGNBQWdCLElBQUtoOEQsRUFBRWk4RCxVQUFZLEtBQU1qOEQsRUFBRWs4RCxrQkFBb0IsTUFFMUgsSUFBSyxXQUNILE9BQU9sOEQsRUFBRW04RCxPQUVYLFFBQ0UsTUFBTSxJQUFJamxDLEdBQWUsR0FBRVosaUJBQWtCLHFFQUVyRCxDQVpvRyxDQVlsR3QyQixFQUFFNHNCLGFBQ1IsQ0FDQSxZQUFBd3ZDLEdBQ0ksT0FBT3Q4RCxLQUFLNDdELFNBQ2hCLENBQ0EsZUFBQVcsR0FDSSxPQUFPdjhELEtBQUs2N0QsaUJBQWtCLEVBQUk3N0QsS0FBSzQ3RCxTQUMzQyxDQUNBLE9BQUF4d0QsR0FDSSxPQUFPcEwsS0FBS2c4RCxpQkFBbUJoOEQsS0FBS2c4RCxlQUFpQmg4RCxLQUFLdzhELGNBQWV4OEQsS0FBS2c4RCxjQUNsRixDQUNtRixNQUFBM2hDLEdBQy9FLE1BQU8sQ0FDSG5uQixJQUFLbFQsS0FBSzA3RCxLQUNWNzNCLFdBQVk3akMsS0FBS3k3RCxZQUNqQmdCLFNBQVV6OEQsS0FBSzQ3RCxVQUV2QixDQU9PLFVBQUFZLEdBS0gsT0FBTyxTQUFvQ3Q4RCxHQUN2QyxNQUFNbWhCLEVBQUl3eEIsR0FBR3RwQyxJQUFJckosR0FDakJtaEIsSUFBTXlVLEdBQW1CLG9CQUFxQixzQkFBdUIrYyxHQUFHam9DLE9BQU8xSyxHQUMvRW1oQixFQUFFd3VDLFlBQ04sQ0FKTyxDQUlMN3ZELE1BQU80RixRQUFRRixTQUNyQixFQXVEQSxNQUFNZzNELEdBR04sV0FBQS80RCxDQUFZekQsRUFJWm1oQixFQUFHM0csR0FDQzFhLEtBQUsyOEQsVUFBWXQ3QyxFQUFHcmhCLEtBQUs0OEQsT0FBU2xpRCxFQUVsQzFhLEtBQUttSSxLQUFPLFFBQVNuSSxLQUFLNjhELFVBQVkzOEQsQ0FDMUMsQ0FDQSxhQUFBNDhELENBQWM1OEQsR0FDVixPQUFPLElBQUl3OEQsR0FBTTE4RCxLQUFLNjhELFVBQVczOEQsRUFBR0YsS0FBSzQ4RCxPQUM3QyxFQU9BLE1BQU1HLEdBRU4sV0FBQXA1RCxDQUFZekQsRUFJWm1oQixFQUFHM0csR0FDQzFhLEtBQUsyOEQsVUFBWXQ3QyxFQUFHcmhCLEtBQUtnOUQsS0FBT3RpRCxFQUVoQzFhLEtBQUttSSxLQUFPLFdBQVluSSxLQUFLNjhELFVBQVkzOEQsQ0FDN0MsQ0FDQSxTQUFJKzhELEdBQ0EsT0FBT2o5RCxLQUFLZzlELEtBQUt6Z0MsSUFDckIsQ0FHTyxNQUFJL1EsR0FDUCxPQUFPeHJCLEtBQUtnOUQsS0FBS3pnQyxLQUFLZixhQUMxQixDQUlPLFFBQUllLEdBQ1AsT0FBT3Y4QixLQUFLZzlELEtBQUt6Z0MsS0FBS1QsaUJBQzFCLENBR08sVUFBSTRiLEdBQ1AsT0FBTyxJQUFJd2xCLEdBQW9CbDlELEtBQUs2OEQsVUFBVzc4RCxLQUFLMjhELFVBQVczOEQsS0FBS2c5RCxLQUFLemdDLEtBQUtqQixVQUNsRixDQUNBLGFBQUF3aEMsQ0FBYzU4RCxHQUNWLE9BQU8sSUFBSTY4RCxHQUFrQi84RCxLQUFLNjhELFVBQVczOEQsRUFBR0YsS0FBS2c5RCxLQUN6RCxFQU1BLE1BQU1FLFdBQTRCUixHQUVsQyxXQUFBLzRELENBQVl6RCxFQUFHbWhCLEVBQUczRyxHQUNkOVcsTUFBTTFELEVBQUdtaEIsRUFBRzBwQixHQUEwQnJ3QixJQUFLMWEsS0FBS2k5RCxNQUFRdmlELEVBRXhEMWEsS0FBS21JLEtBQU8sWUFDaEIsQ0FDdUMsTUFBSXFqQixHQUN2QyxPQUFPeHJCLEtBQUs0OEQsT0FBT3JnQyxLQUFLZixhQUM1QixDQUlPLFFBQUllLEdBQ1AsT0FBT3Y4QixLQUFLNDhELE9BQU9yZ0MsS0FBS1QsaUJBQzVCLENBSU8sVUFBSTRiLEdBQ1AsTUFBTXgzQyxFQUFJRixLQUFLaTlELE1BQU0zaEMsVUFDckIsT0FBT3A3QixFQUFFdTdCLFVBQVksS0FBTyxJQUFJc2hDLEdBQWtCLzhELEtBQUs2OEQsVUFDdEMsS0FBTSxJQUFJdmdDLEdBQVlwOEIsR0FDM0MsQ0FDQSxhQUFBNDhELENBQWM1OEQsR0FDVixPQUFPLElBQUlnOUQsR0FBb0JsOUQsS0FBSzY4RCxVQUFXMzhELEVBQUdGLEtBQUtpOUQsTUFDM0QsRUE0RkEsTUFBTUUsR0FDTixXQUFBeDVELEdBRUkzRCxLQUFLNmYsR0FBS2phLFFBQVFGLFVBR2xCMUYsS0FBS3NlLEdBQUssR0FHVnRlLEtBQUsrYixJQUFLLEVBR1YvYixLQUFLMm9CLEdBQUssR0FFVjNvQixLQUFLeWUsR0FBSyxLQUdWemUsS0FBSzJlLElBQUssRUFFVjNlLEtBQUs4ZixJQUFLLEVBRVY5ZixLQUFLZ2dCLEdBQUssR0FFVmhnQixLQUFLeXRELEdBQUssSUFBSXhCLEdBQTZCanNELEtBQU0scUJBSWpEQSxLQUFLeXNCLEdBQUssS0FDTixNQUFNdnNCLEVBQUlvOUMsS0FDVnA5QyxHQUFLNDFCLEdBQW1CLGFBQWMsK0JBQWlDNTFCLEVBQUVrOUQsaUJBQ3pFcDlELEtBQUt5dEQsR0FBR1gsSUFBSSxFQUVoQixNQUFNNXNELEVBQUlvOUMsS0FDVnA5QyxHQUFLLG1CQUFxQkEsRUFBRTBRLGtCQUFvQjFRLEVBQUUwUSxpQkFBaUIsbUJBQW9CNVEsS0FBS3lzQixHQUNoRyxDQUNBLGtCQUFJNHNDLEdBQ0EsT0FBT3I1RCxLQUFLK2IsRUFDaEIsQ0FJTyxnQkFBQTB5QyxDQUFpQnZ1RCxHQUVwQkYsS0FBS3E5RCxRQUFRbjlELEVBQ2pCLENBQ0EsbUNBQUFxNUQsQ0FBb0NyNUQsR0FDaENGLEtBQUtzOUQsS0FFTHQ5RCxLQUFLdTlELEdBQUdyOUQsRUFDWixDQUNBLG1CQUFBbzVELENBQW9CcDVELEdBQ2hCLElBQUtGLEtBQUsrYixHQUFJLENBQ1YvYixLQUFLK2IsSUFBSyxFQUFJL2IsS0FBSzhmLEdBQUs1ZixJQUFLLEVBQzdCLE1BQU1taEIsRUFBSWk4QixLQUNWajhCLEdBQUssbUJBQXFCQSxFQUFFNVEscUJBQXVCNFEsRUFBRTVRLG9CQUFvQixtQkFBb0J6USxLQUFLeXNCLEdBQ3RHLENBQ0osQ0FDQSxPQUFBNHdDLENBQVFuOUQsR0FDSixHQUFJRixLQUFLczlELEtBQU10OUQsS0FBSytiLEdBRXBCLE9BQU8sSUFBSW5XLFNBQVEsS0FBUyxJQUlwQixNQUFNeWIsRUFBSSxJQUFJZ1csR0FDdEIsT0FBT3IzQixLQUFLdTlELElBQUcsSUFBT3Y5RCxLQUFLK2IsSUFBTS9iLEtBQUs4ZixHQUFLbGEsUUFBUUYsV0FBYXhGLElBQUltUixLQUFLZ1EsRUFBRTNiLFFBQVMyYixFQUFFNWIsUUFDdEY0YixFQUFFMWIsV0FBVzBMLE1BQUssSUFBT2dRLEVBQUUxYixTQUMvQixDQUNBLGdCQUFBZ3lCLENBQWlCejNCLEdBQ2JGLEtBQUt5dUQsa0JBQWlCLEtBQVF6dUQsS0FBS3NlLEdBQUc5YixLQUFLdEMsR0FBSUYsS0FBS3c5RCxPQUN4RCxDQUlPLFFBQU1BLEdBQ1QsR0FBSSxJQUFNeDlELEtBQUtzZSxHQUFHN2QsT0FBUSxDQUN0QixVQUNVVCxLQUFLc2UsR0FBRyxLQUFNdGUsS0FBS3NlLEdBQUduTSxRQUFTblMsS0FBS3l0RCxHQUFHNXJDLE9BQ2pELENBQUUsTUFBTzNoQixHQUNMLElBQUtzK0IsR0FBc0N0K0IsR0FBSSxNQUFNQSxFQUVyQzQxQixHQUFtQixhQUFjLDBDQUE0QzUxQixFQUNqRyxDQUNBRixLQUFLc2UsR0FBRzdkLE9BQVMsR0FXakJULEtBQUt5dEQsR0FBR2QsSUFBRyxJQUFPM3NELEtBQUt3OUQsTUFDM0IsQ0FDSixDQUNBLEVBQUFELENBQUdyOUQsR0FDQyxNQUFNbWhCLEVBQUlyaEIsS0FBSzZmLEdBQUd4TyxNQUFLLEtBQVFyUixLQUFLMmUsSUFBSyxFQUFJemUsSUFBSThGLE9BQU85RixJQUNwREYsS0FBS3llLEdBQUt2ZSxFQUFHRixLQUFLMmUsSUFBSyxFQUN2QixNQUFNMEMsRUFNTixTQUFxQ25oQixHQUNqQyxJQUFJbWhCLEVBQUluaEIsRUFBRWlHLFNBQVcsR0FFckIsT0FEQWpHLEVBQUV1OUQsUUFBVXA4QyxFQUFJbmhCLEVBQUV1OUQsTUFBTTcxRCxTQUFTMUgsRUFBRWlHLFNBQVdqRyxFQUFFdTlELE1BQVF2OUQsRUFBRWlHLFFBQVUsS0FBT2pHLEVBQUV1OUQsT0FDdEVwOEMsQ0FDWCxDQUpBLENBb0JQbmhCLEdBSU8sTUFBTTgxQixHQUFtQiw2QkFBOEIzVSxHQUFJbmhCLENBQzlELElBQUdtUixNQUFNblIsSUFBTUYsS0FBSzJlLElBQUssRUFBSXplLFFBQzlCLE9BQU9GLEtBQUs2ZixHQUFLd0IsRUFBR0EsQ0FDeEIsQ0FDQSxpQkFBQXdyQyxDQUFrQjNzRCxFQUFHbWhCLEVBQUczRyxHQUNwQjFhLEtBQUtzOUQsS0FFTHQ5RCxLQUFLZ2dCLEdBQUc3RixRQUFRamEsSUFBTSxJQUFNbWhCLEVBQUksR0FDaEMsTUFBTWhILEVBQUltNEMsR0FBaUJHLGtCQUFrQjN5RCxLQUFNRSxFQUFHbWhCLEVBQUczRyxHQUFJeGEsR0FBS0YsS0FBSzA5RCxHQUFHeDlELEtBQzFFLE9BQU9GLEtBQUsyb0IsR0FBR25tQixLQUFLNlgsR0FBSUEsQ0FDNUIsQ0FDQSxFQUFBaWpELEdBQ0l0OUQsS0FBS3llLElBQU15WCxJQUNmLENBQ0EseUJBQUFtOEIsR0FBNkIsQ0FJdEIsUUFBTXNMLEdBS1QsSUFBSXo5RCxFQUNKLEdBQ0lBLEVBQUlGLEtBQUs2ZixTQUFVM2YsUUFDZEEsSUFBTUYsS0FBSzZmLEdBQ3hCLENBSU8sRUFBQSs5QyxDQUFHMTlELEdBQ04sSUFBSyxNQUFNbWhCLEtBQUtyaEIsS0FBSzJvQixHQUFJLEdBQUl0SCxFQUFFOHFDLFVBQVlqc0QsRUFBRyxPQUFPLEVBQ3JELE9BQU8sQ0FDWCxDQU9PLEVBQUEyOUQsQ0FBRzM5RCxHQUVOLE9BQU9GLEtBQUsyOUQsS0FBS3RzRCxNQUFLLEtBRWxCclIsS0FBSzJvQixHQUFHclksTUFBSyxDQUFFcFEsRUFBR21oQixJQUFNbmhCLEVBQUV1eUQsYUFBZXB4QyxFQUFFb3hDLGVBQzNDLElBQUssTUFBTXB4QyxLQUFLcmhCLEtBQUsyb0IsR0FBSSxHQUFJdEgsRUFBRTByQyxZQUFhLFFBQTRCN3NELEdBQUttaEIsRUFBRThxQyxVQUFZanNELEVBQUcsTUFDOUYsT0FBT0YsS0FBSzI5RCxJQUNmLEdBQ0wsQ0FHTyxFQUFBRyxDQUFHNTlELEdBQ05GLEtBQUtnZ0IsR0FBR3hkLEtBQUt0QyxFQUNqQixDQUM2RCxFQUFBdzlELENBQUd4OUQsR0FFNUQsTUFBTW1oQixFQUFJcmhCLEtBQUsyb0IsR0FBR3hPLFFBQVFqYSxHQUMxQkYsS0FBSzJvQixHQUFHakosT0FBTzJCLEVBQUcsRUFDdEIsRUFxSUEsTUFBTTA4QyxXQUFrQnpDLEdBRXhCLFdBQUEzM0QsQ0FBWXpELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBQ2pCelcsTUFBTTFELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEdBSWZyYSxLQUFLbUksS0FBTyxZQUFhbkksS0FBS2crRCxPQUNuQixJQUFJYixHQUNWbjlELEtBQUsyN0QsaUJBQW1CLE1BQVF0aEQsT0FBSSxFQUFTQSxFQUFFdlcsT0FBUyxXQUNqRSxDQUNBLFVBQUEwNEQsR0FDSSxPQUFPeDhELEtBQUtpK0Qsa0JBR1pDLEdBQTZCbCtELE1BQU9BLEtBQUtpK0QsaUJBQWlCcE8sV0FDOUQsRUFrREosU0FBU3FPLEdBQTZCaCtELEdBQ2xDLElBQUltaEIsRUFBRzNHLEVBQUdMLEVBQ1YsTUFBTTdaLEVBQUlOLEVBQUVxOEQsa0JBQW1CM2hELEVBQUksU0FBb0MxYSxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUM1RSxPQUFPLElBQUl1cEIsR0FBYTFqQyxFQUFHbWhCLEVBQUczRyxFQUFHTCxFQUFFMHBCLEtBQU0xcEIsRUFBRTJwQixJQUFLM3BCLEVBQUU4Z0QsNkJBQThCOWdELEVBQUUrZ0Qsa0NBQW1DWCxHQUFrQ3BnRCxFQUFFZ2hELGdDQUFpQ2hoRCxFQUFFOHBCLGdCQUNoTSxDQUZtQyxDQUVqQ2prQyxFQUFFdTdELGFBQWMsUUFBVXA2QyxFQUFJbmhCLEVBQUV3N0QsWUFBUyxJQUFXcjZDLE9BQUksRUFBU0EsRUFBRWpYLFFBQVFnTSxRQUFVLEdBQUlsVyxFQUFFeTdELGdCQUFpQm43RCxHQUM5R04sRUFBRSs5RCxpQkFBbUIsSUFBSXBGLEdBQWdCMzRELEVBQUVxN0QsaUJBQWtCcjdELEVBQUVzN0QscUJBQXNCdDdELEVBQUU4OUQsT0FBUXBqRCxJQUM5RixRQUFVRixFQUFJbGEsRUFBRXc2RCxrQkFBZSxJQUFXdGdELE9BQUksRUFBU0EsRUFBRXlqRCw2QkFBK0IsUUFBVTlqRCxFQUFJN1osRUFBRXc2RCxrQkFBZSxJQUFXM2dELE9BQUksRUFBU0EsRUFBRStqRCw0QkFBOEJsK0QsRUFBRSs5RCxpQkFBaUJyRSxpQ0FBbUMsQ0FDbE95RSxhQUFjNzlELEVBQUV3NkQsV0FBV3NELEtBQzNCekUsU0FBVXI1RCxFQUFFdzZELFdBQVdtRCwwQkFDdkJsRSxRQUFTejVELEVBQUV3NkQsV0FBV29ELDBCQUU5QixDQXNVSSxNQUFNRyxHQUVOLFdBQUE1NkQsQ0FBWXpELEdBQ1JGLEtBQUt3K0QsWUFBY3QrRCxDQUN2QixDQU1PLHVCQUFPbWlDLENBQWlCbmlDLEdBQzNCLElBQ0ksT0FBTyxJQUFJcStELEdBQU1wOEIsR0FBV0UsaUJBQWlCbmlDLEdBQ2pELENBQUUsTUFBT0EsR0FDTCxNQUFNLElBQUlrM0IsR0FBZSxHQUFFWixpQkFBa0IsZ0RBQWtEdDJCLEVBQ25HLENBQ0osQ0FLTyxxQkFBT29pQyxDQUFlcGlDLEdBQ3pCLE9BQU8sSUFBSXErRCxHQUFNcDhCLEdBQVdHLGVBQWVwaUMsR0FDL0MsQ0FLTyxRQUFBdWlDLEdBQ0gsT0FBT3ppQyxLQUFLdytELFlBQVkvN0IsVUFDNUIsQ0FLTyxZQUFBQyxHQUNILE9BQU8xaUMsS0FBS3crRCxZQUFZOTdCLGNBQzVCLENBS08sUUFBQXhvQixHQUNILE1BQU8saUJBQW1CbGEsS0FBS3lpQyxXQUFhLEdBQ2hELENBTU8sT0FBQWpOLENBQVF0MUIsR0FDWCxPQUFPRixLQUFLdytELFlBQVlocEMsUUFBUXQxQixFQUFFcytELFlBQ3RDLEVBMEJBLE1BQU1DLEdBT04sV0FBQTk2RCxJQUFlekQsR0FDWCxJQUFLLElBQUltaEIsRUFBSSxFQUFHQSxFQUFJbmhCLEVBQUVPLFNBQVU0Z0IsRUFBRyxHQUFJLElBQU1uaEIsRUFBRW1oQixHQUFHNWdCLE9BQVEsTUFBTSxJQUFJMjJCLEdBQWUsR0FBRVosaUJBQWtCLDJFQUN2R3gyQixLQUFLMCtELGNBQWdCLElBQUkxaUMsR0FBWTk3QixFQUN6QyxDQU1PLE9BQUFzMUIsQ0FBUXQxQixHQUNYLE9BQU9GLEtBQUswK0QsY0FBY2xwQyxRQUFRdDFCLEVBQUV3K0QsY0FDeEMsRUE2REEsTUFBTUMsR0FPTixXQUFBaDdELENBQVl6RCxFQUFHbWhCLEdBQ1gsSUFBSzJRLFNBQVM5eEIsSUFBTUEsR0FBSyxJQUFNQSxFQUFJLEdBQUksTUFBTSxJQUFJazNCLEdBQWUsR0FBRVosaUJBQWtCLDBEQUE0RHQyQixHQUNoSixJQUFLOHhCLFNBQVMzUSxJQUFNQSxHQUFLLEtBQU9BLEVBQUksSUFBSyxNQUFNLElBQUkrVixHQUFlLEdBQUVaLGlCQUFrQiw2REFBK0RuVixHQUNySnJoQixLQUFLNCtELEtBQU8xK0QsRUFBR0YsS0FBSzYrRCxNQUFReDlDLENBQ2hDLENBR08sWUFBSTJqQixHQUNQLE9BQU9obEMsS0FBSzQrRCxJQUNoQixDQUdPLGFBQUkzNUIsR0FDUCxPQUFPamxDLEtBQUs2K0QsS0FDaEIsQ0FNTyxPQUFBcnBDLENBQVF0MUIsR0FDWCxPQUFPRixLQUFLNCtELE9BQVMxK0QsRUFBRTArRCxNQUFRNStELEtBQUs2K0QsUUFBVTMrRCxFQUFFMitELEtBQ3BELENBQ3VFLE1BQUF4a0MsR0FDbkUsTUFBTyxDQUNIMkssU0FBVWhsQyxLQUFLNCtELEtBQ2YzNUIsVUFBV2psQyxLQUFLNitELE1BRXhCLENBSU8sVUFBQXprQyxDQUFXbDZCLEdBQ2QsT0FBT3U1QixHQUE4Qno1QixLQUFLNCtELEtBQU0xK0QsRUFBRTArRCxPQUFTbmxDLEdBQThCejVCLEtBQUs2K0QsTUFBTzMrRCxFQUFFMitELE1BQzNHLEVBdWVBLE1BQU10ckIsR0FBSyxJQUFJanFCLE9BQU8saUJBdUIxQixTQUFTdzFDLEdBQXNCNStELEVBQUdtaEIsRUFBRzNHLEVBQUdMLEVBQUc3WixHQUN2QyxNQUFNb2EsRUFBSVAsSUFBTUEsRUFBRW9oQixVQUFXNWdCLE9BQUksSUFBV3JhLEVBQzVDLElBQUkwRyxFQUFJLFlBQVltYSwrQkFDcEIzRyxJQUFNeFQsR0FBSywwQkFBMkJBLEdBQUssS0FDM0MsSUFBSUksRUFBSSxHQUNSLE9BQVFzVCxHQUFLQyxLQUFPdlQsR0FBSyxVQUFXc1QsSUFBTXRULEdBQUssYUFBYStTLEtBQU1RLElBQU12VCxHQUFLLGdCQUFnQjlHLEtBQzdGOEcsR0FBSyxLQUFNLElBQUk4dkIsR0FBZSxHQUFFWixpQkFBa0J0dkIsRUFBSWhILEVBQUlvSCxFQUM5RCxDQThCSSxNQUFNeTNELEdBTU4sV0FBQXA3RCxDQUFZekQsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEdBQ3BCUixLQUFLZy9ELFdBQWE5K0QsRUFBR0YsS0FBS2kvRCxnQkFBa0I1OUMsRUFBR3JoQixLQUFLZzlELEtBQU90aUQsRUFBRzFhLEtBQUtrL0QsVUFBWTdrRCxFQUMvRXJhLEtBQUttL0QsV0FBYTMrRCxDQUN0QixDQUM4RSxNQUFJZ3JCLEdBQzlFLE9BQU94ckIsS0FBS2c5RCxLQUFLemdDLEtBQUtmLGFBQzFCLENBR08sT0FBSTRqQyxHQUNQLE9BQU8sSUFBSXJDLEdBQWtCLzhELEtBQUtnL0QsV0FBWWgvRCxLQUFLbS9ELFdBQVluL0QsS0FBS2c5RCxLQUN4RSxDQUtPLE1BQUFqdkIsR0FDSCxPQUFPLE9BQVMvdEMsS0FBS2svRCxTQUN6QixDQU9PLElBQUFwNEQsR0FDSCxHQUFJOUcsS0FBS2svRCxVQUFXLENBQ2hCLEdBQUlsL0QsS0FBS20vRCxXQUFZLENBR2pCLE1BQU1qL0QsRUFBSSxJQUFJbS9ELEdBQXdCci9ELEtBQUtnL0QsV0FBWWgvRCxLQUFLaS9ELGdCQUFpQmovRCxLQUFLZzlELEtBQU1oOUQsS0FBS2svRCxVQUM1RSxNQUNqQixPQUFPbC9ELEtBQUttL0QsV0FBV0csY0FBY3AvRCxFQUN6QyxDQUNBLE9BQU9GLEtBQUtpL0QsZ0JBQWdCTSxhQUFhdi9ELEtBQUtrL0QsVUFBVXA0RCxLQUFLZixNQUNqRSxDQUNKLENBWUEsR0FBQXdELENBQUlySixHQUNBLEdBQUlGLEtBQUtrL0QsVUFBVyxDQUNoQixNQUFNNzlDLEVBQUlyaEIsS0FBS2svRCxVQUFVcDRELEtBQUtrL0IsTUFBTXc1QixHQUFnQyx1QkFBd0J0L0QsSUFDNUYsR0FBSSxPQUFTbWhCLEVBQUcsT0FBT3JoQixLQUFLaS9ELGdCQUFnQk0sYUFBYWwrQyxFQUM3RCxDQUNKLEVBYUEsTUFBTWcrQyxXQUFnQ04sR0FPdEMsSUFBQWo0RCxHQUNJLE9BQU9sRCxNQUFNa0QsTUFDakIsRUFLQSxTQUFTMDRELEdBQWdDdC9ELEVBQUdtaEIsR0FDNUMsTUFBTyxpQkFBbUJBLEVBekkxQixTQUFtRG5oQixFQUFHbWhCLEVBQUczRyxHQUN6RCxHQUFJMkcsRUFBRW8rQyxPQUFPbHNCLEtBQU8sRUFBRyxNQUFNdXJCLEdBQXNCLHVCQUF1Qno5Qyx3REFBeURuaEIsR0FDL0csT0FDUixFQUFRd2EsR0FDcEIsSUFDSSxPQUFPLElBQUkrakQsTUFBYXA5QyxFQUFFL0IsTUFBTSxNQUFNby9DLGFBQzFDLENBQUUsTUFBT3JrRCxHQUNMLE1BQU15a0QsR0FBc0IsdUJBQXVCejlDLDZFQUE4RW5oQixHQUM3RyxPQUNSLEVBQVF3YSxFQUN4QixDQUNKLENBOEhrQ2dsRCxDQUEwQ3gvRCxFQUFHbWhCLEdBQUtBLGFBQWFvOUMsR0FBWXA5QyxFQUFFcTlDLGNBQWdCcjlDLEVBQUV1NUMsVUFBVThELGFBQzNJLENBMmZBLE1BQU1pQixHQUNGLFlBQUFKLENBQWFyL0QsRUFBR21oQixFQUFJLFFBQ2hCLE9BQVFvakIsR0FBb0J2a0MsSUFDMUIsS0FBSyxFQUNILE9BQU8sS0FFVCxLQUFLLEVBQ0gsT0FBT0EsRUFBRTBrQyxhQUVYLEtBQUssRUFDSCxPQUFPM0IsR0FBMEIvaUMsRUFBRWdsQyxjQUFnQmhsQyxFQUFFaWxDLGFBRXZELEtBQUssRUFDSCxPQUFPbmxDLEtBQUs0L0QsaUJBQWlCMS9ELEVBQUV5akMsZ0JBRWpDLEtBQUssRUFDSCxPQUFPM2pDLEtBQUs2L0QsdUJBQXVCMy9ELEVBQUdtaEIsR0FFeEMsS0FBSyxFQUNILE9BQU9uaEIsRUFBRW9qQyxZQUVYLEtBQUssRUFDSCxPQUFPdGpDLEtBQUs4L0QsYUFBYTU4QixHQUE4QmhqQyxFQUFFMmtDLGFBRTNELEtBQUssRUFDSCxPQUFPN2tDLEtBQUsrL0QsaUJBQWlCNy9ELEVBQUU0a0MsZ0JBRWpDLEtBQUssRUFDSCxPQUFPOWtDLEtBQUtnZ0UsZ0JBQWdCOS9ELEVBQUU2a0MsZUFFaEMsS0FBSyxFQUNILE9BQU8va0MsS0FBS2lnRSxhQUFhLy9ELEVBQUVrbEMsV0FBWS9qQixHQUV6QyxLQUFLLEdBQ0gsT0FBT3JoQixLQUFLa2dFLGNBQWNoZ0UsRUFBRWtqQyxTQUFVL2hCLEdBRXhDLFFBQ0UsTUFBTTZVLEtBRWQsQ0FDQSxhQUFBZ3FDLENBQWNoZ0UsRUFBR21oQixHQUNiLE9BQU9yaEIsS0FBS21nRSxpQkFBaUJqZ0UsRUFBRThoQyxPQUFRM2dCLEVBQzNDLENBR08sZ0JBQUE4K0MsQ0FBaUJqZ0UsRUFBR21oQixFQUFJLFFBQzNCLE1BQU0zRyxFQUFJLENBQUMsRUFDWCxPQUFPNk4sR0FBUXJvQixHQUFHLENBQUVBLEVBQUdtYSxLQUNuQkssRUFBRXhhLEdBQUtGLEtBQUt1L0QsYUFBYWxsRCxFQUFHZ0gsRUFDL0IsSUFBSTNHLENBQ1QsQ0FDQSxlQUFBc2xELENBQWdCOS9ELEdBQ1osT0FBTyxJQUFJeStELEdBQVMxN0IsR0FBMEIvaUMsRUFBRThrQyxVQUFXL0IsR0FBMEIvaUMsRUFBRStrQyxXQUMzRixDQUNBLFlBQUFnN0IsQ0FBYS8vRCxFQUFHbWhCLEdBQ1osT0FBUW5oQixFQUFFNkssUUFBVSxJQUFJRyxLQUFLaEwsR0FBS0YsS0FBS3UvRCxhQUFhci9ELEVBQUdtaEIsSUFDM0QsQ0FDQSxzQkFBQXcrQyxDQUF1QjMvRCxFQUFHbWhCLEdBQ3RCLE9BQVFBLEdBQ04sSUFBSyxXQUNILE1BQU0zRyxFQUFJNm9CLEdBQTJCcmpDLEdBQ3JDLE9BQU8sTUFBUXdhLEVBQUksS0FBTzFhLEtBQUt1L0QsYUFBYTdrRCxFQUFHMkcsR0FFakQsSUFBSyxXQUNILE9BQU9yaEIsS0FBSzQvRCxpQkFBaUJuOEIsR0FBNEJ2akMsSUFFM0QsUUFDRSxPQUFPLEtBRWYsQ0FDQSxnQkFBQTAvRCxDQUFpQjEvRCxHQUNiLE1BQU1taEIsRUFBSXloQixHQUE2QjVpQyxHQUN2QyxPQUFPLElBQUkwNUIsR0FBVXZZLEVBQUV3WSxRQUFTeFksRUFBRTJoQixNQUN0QyxDQUNBLGtCQUFBbzlCLENBQW1CbGdFLEVBQUdtaEIsR0FDbEIsTUFBTTNHLEVBQUltaEIsR0FBYXZILFdBQVdwMEIsR0FDbENpMkIsR0FBcUI4Z0IsR0FBOEJ2OEIsSUFDbkQsTUFBTUwsRUFBSSxJQUFJK3BCLEdBQVcxcEIsRUFBRW5SLElBQUksR0FBSW1SLEVBQUVuUixJQUFJLElBQUsvSSxFQUFJLElBQUk4N0IsR0FBWTVoQixFQUFFMmdCLFNBQVMsSUFDN0UsT0FBT2hoQixFQUFFbWIsUUFBUW5VLElBRWpCMlUsR0FBbUIsWUFBWXgxQixnRUFBZ0U2WixFQUFFZ3FCLGFBQWFocUIsRUFBRWlxQixnR0FBZ0dqakIsRUFBRWdqQixhQUFhaGpCLEVBQUVpakIsc0JBQ2pPOWpDLENBQ0osRUF1SUEsTUFBTTYvRCxHQUVOLFdBQUExOEQsQ0FBWXpELEVBQUdtaEIsR0FDWHJoQixLQUFLcW5DLGlCQUFtQm5uQyxFQUFHRixLQUFLNmxELFVBQVl4a0MsQ0FDaEQsQ0FNTyxPQUFBbVUsQ0FBUXQxQixHQUNYLE9BQU9GLEtBQUtxbkMsbUJBQXFCbm5DLEVBQUVtbkMsa0JBQW9Ccm5DLEtBQUs2bEQsWUFBYzNsRCxFQUFFMmxELFNBQ2hGLEVBV0EsTUFBTXlhLFdBQXlCdkIsR0FFL0IsV0FBQXA3RCxDQUFZekQsRUFBR21oQixFQUFHM0csRUFBR0wsRUFBRzdaLEVBQUdvYSxHQUN2QmhYLE1BQU0xRCxFQUFHbWhCLEVBQUczRyxFQUFHTCxFQUFHTyxHQUFJNWEsS0FBS2cvRCxXQUFhOStELEVBQUdGLEtBQUt1Z0UsZUFBaUJyZ0UsRUFBR0YsS0FBS3dnRSxTQUFXaGdFLENBQ3hGLENBR08sTUFBQXV0QyxHQUNILE9BQU9ucUMsTUFBTW1xQyxRQUNqQixDQWNPLElBQUFqbkMsQ0FBSzVHLEVBQUksQ0FBQyxHQUNiLEdBQUlGLEtBQUtrL0QsVUFBVyxDQUNoQixHQUFJbC9ELEtBQUttL0QsV0FBWSxDQUdqQixNQUFNOTlDLEVBQUksSUFBSW8vQyxHQUFzQnpnRSxLQUFLZy9ELFdBQVloL0QsS0FBS2kvRCxnQkFBaUJqL0QsS0FBS2c5RCxLQUFNaDlELEtBQUtrL0QsVUFBV2wvRCxLQUFLd2dFLFNBQzFGLE1BQ2pCLE9BQU94Z0UsS0FBS20vRCxXQUFXRyxjQUFjaitDLEVBQUduaEIsRUFDNUMsQ0FDQSxPQUFPRixLQUFLaS9ELGdCQUFnQk0sYUFBYXYvRCxLQUFLay9ELFVBQVVwNEQsS0FBS2YsTUFBTzdGLEVBQUV3Z0UsaUJBQzFFLENBQ0osQ0FtQkEsR0FBQW4zRCxDQUFJckosRUFBR21oQixFQUFJLENBQUMsR0FDUixHQUFJcmhCLEtBQUtrL0QsVUFBVyxDQUNoQixNQUFNeGtELEVBQUkxYSxLQUFLay9ELFVBQVVwNEQsS0FBS2svQixNQUFNdzVCLEdBQWdDLHVCQUF3QnQvRCxJQUM1RixHQUFJLE9BQVN3YSxFQUFHLE9BQU8xYSxLQUFLaS9ELGdCQUFnQk0sYUFBYTdrRCxFQUFHMkcsRUFBRXEvQyxpQkFDbEUsQ0FDSixFQWFBLE1BQU1ELFdBQThCSCxHQWNwQyxJQUFBeDVELENBQUs1RyxFQUFJLENBQUMsR0FDTixPQUFPMEQsTUFBTWtELEtBQUs1RyxFQUN0QixFQVNBLE1BQU15Z0UsR0FFTixXQUFBaDlELENBQVl6RCxFQUFHbWhCLEVBQUczRyxFQUFHTCxHQUNqQnJhLEtBQUtnL0QsV0FBYTkrRCxFQUFHRixLQUFLaS9ELGdCQUFrQjU5QyxFQUFHcmhCLEtBQUs0Z0UsVUFBWXZtRCxFQUFHcmEsS0FBS3dnRSxTQUFXLElBQUlILEdBQWlCaG1ELEVBQUVndEIsaUJBQWtCaHRCLEVBQUV3ckMsV0FDOUg3bEQsS0FBS2svQyxNQUFReGtDLENBQ2pCLENBQ2dFLFFBQUlzbkMsR0FDaEUsTUFBTTloRCxFQUFJLEdBQ1YsT0FBT0YsS0FBS3VvQixTQUFTbEgsR0FBS25oQixFQUFFc0MsS0FBSzZlLEtBQU1uaEIsQ0FDM0MsQ0FDMEQsUUFBSWdrQixHQUMxRCxPQUFPbGtCLEtBQUs0Z0UsVUFBVTVlLEtBQUs5OUIsSUFDL0IsQ0FDaUUsU0FBSXdZLEdBQ2pFLE9BQU8sSUFBTTE4QixLQUFLa2tCLElBQ3RCLENBT08sT0FBQXFFLENBQVFyb0IsRUFBR21oQixHQUNkcmhCLEtBQUs0Z0UsVUFBVTVlLEtBQUt6NUIsU0FBUzdOLElBQ3pCeGEsRUFBRW1RLEtBQUtnUixFQUFHLElBQUlvL0MsR0FBc0J6Z0UsS0FBS2cvRCxXQUFZaC9ELEtBQUtpL0QsZ0JBQWlCdmtELEVBQUV2VCxJQUFLdVQsRUFBRyxJQUFJMmxELEdBQWlCcmdFLEtBQUs0Z0UsVUFBVW5OLFlBQVk5cEQsSUFBSStRLEVBQUV2VCxLQUFNbkgsS0FBSzRnRSxVQUFVL2EsV0FBWTdsRCxLQUFLay9DLE1BQU15ZCxXQUMxTCxHQUNMLENBU08sVUFBQTFXLENBQVcvbEQsRUFBSSxDQUFDLEdBQ25CLE1BQU1taEIsSUFBTW5oQixFQUFFNDBELHVCQUNkLEdBQUl6ekMsR0FBS3JoQixLQUFLNGdFLFVBQVVqTix3QkFBeUIsTUFBTSxJQUFJdjhCLEdBQWUsR0FBRVosaUJBQWtCLCtIQUM5RixPQUFPeDJCLEtBQUs2Z0UsZ0JBQWtCN2dFLEtBQUs4Z0UsdUNBQXlDei9DLElBQU1yaEIsS0FBSzZnRSxlQUV2RixTQUF1QzNnRSxFQUFHbWhCLEdBQ3RDLEdBQUluaEIsRUFBRTBnRSxVQUFVcE4sUUFBUS8zQixVQUFXLENBQy9CLElBQUlwYSxFQUFJLEVBQ1IsT0FBT25oQixFQUFFMGdFLFVBQVUzYSxXQUFXLzZDLEtBQUt3UCxJQUMvQixNQUFNTCxFQUFJLElBQUlvbUQsR0FBc0J2Z0UsRUFBRTgrRCxXQUFZOStELEVBQUUrK0QsZ0JBQWlCdmtELEVBQUV3ckMsSUFBSS8rQyxJQUFLdVQsRUFBRXdyQyxJQUFLLElBQUltYSxHQUFpQm5nRSxFQUFFMGdFLFVBQVVuTixZQUFZOXBELElBQUkrUSxFQUFFd3JDLElBQUkvK0MsS0FBTWpILEVBQUUwZ0UsVUFBVS9hLFdBQVkzbEQsRUFBRWcvQyxNQUFNeWQsV0FDcEwsT0FBT2ppRCxFQUFFd3JDLElBQUssQ0FDVi85QyxLQUFNLFFBQ04rOUMsSUFBSzdyQyxFQUNMMG1ELFVBQVcsRUFDWEMsU0FBVTMvQyxJQUVqQixHQUNMLENBQ0EsQ0FHSSxJQUFJM0csRUFBSXhhLEVBQUUwZ0UsVUFBVXBOLFFBQ3BCLE9BQU90ekQsRUFBRTBnRSxVQUFVM2EsV0FBV2g3QyxRQUFRL0ssR0FBS21oQixHQUFLLElBQWdDbmhCLEVBQUVpSSxPQUFPK0MsS0FBS21XLElBQzFGLE1BQU1oSCxFQUFJLElBQUlvbUQsR0FBc0J2Z0UsRUFBRTgrRCxXQUFZOStELEVBQUUrK0QsZ0JBQWlCNTlDLEVBQUU2a0MsSUFBSS8rQyxJQUFLa2EsRUFBRTZrQyxJQUFLLElBQUltYSxHQUFpQm5nRSxFQUFFMGdFLFVBQVVuTixZQUFZOXBELElBQUkwWCxFQUFFNmtDLElBQUkvK0MsS0FBTWpILEVBQUUwZ0UsVUFBVS9hLFdBQVkzbEQsRUFBRWcvQyxNQUFNeWQsV0FDcEwsSUFBSW44RCxHQUFLLEVBQUdvYSxHQUFLLEVBQ2pCLE9BQU8sSUFBNkJ5RyxFQUFFbFosT0FBUzNILEVBQUlrYSxFQUFFUCxRQUFRa0gsRUFBRTZrQyxJQUFJLytDLEtBQU11VCxFQUFJQSxFQUFFOVAsT0FBT3lXLEVBQUU2a0MsSUFBSS8rQyxNQUM1RixJQUErQmthLEVBQUVsWixPQUFTdVMsRUFBSUEsRUFBRTlPLElBQUl5VixFQUFFNmtDLEtBQU10ckMsRUFBSUYsRUFBRVAsUUFBUWtILEVBQUU2a0MsSUFBSS8rQyxNQUNoRixDQUNJZ0IsS0FBTTg0RCxHQUEyQjUvQyxFQUFFbFosTUFDbkMrOUMsSUFBSzdyQyxFQUNMMG1ELFNBQVV2Z0UsRUFDVndnRSxTQUFVcG1ELEVBRWpCLEdBQ0wsQ0FDSixDQTlCQSxDQThCRTVhLEtBQU1xaEIsR0FBSXJoQixLQUFLOGdFLHFDQUF1Q3ovQyxHQUFJcmhCLEtBQUs2Z0UsY0FDckUsRUFHSixTQUFTSSxHQUEyQi9nRSxHQUNoQyxPQUFRQSxHQUNOLEtBQUssRUFDSCxNQUFPLFFBRVQsS0FBSyxFQUNMLEtBQUssRUFDSCxNQUFPLFdBRVQsS0FBSyxFQUNILE1BQU8sVUFFVCxRQUNFLE9BQU9nMkIsS0FFZixDQStDQSxNQUFNZ3JDLFdBQW9DdkIsR0FDdEMsV0FBQWg4RCxDQUFZekQsR0FDUjBELFFBQVM1RCxLQUFLNjhELFVBQVkzOEQsQ0FDOUIsQ0FDQSxZQUFBNC9ELENBQWE1L0QsR0FDVCxPQUFPLElBQUlxK0QsR0FBTXIrRCxFQUNyQixDQUNBLGdCQUFBNi9ELENBQWlCNy9ELEdBQ2IsTUFBTW1oQixFQUFJcmhCLEtBQUtvZ0UsbUJBQW1CbGdFLEVBQUdGLEtBQUs2OEQsVUFBVXBCLGFBQ3BELE9BQU8sSUFBSXNCLEdBQWtCLzhELEtBQUs2OEQsVUFBNEIsS0FBTXg3QyxFQUN4RSxHQTAwQkMsU0FBcUNuaEIsRUFBR21oQixHQUFJLEdBRXpDOVosR0h4NnBCUSxTR3k2cEJJNEwsRUFBbUIsSUFBSWxMLEVBQVUsYUFBYSxDQUFFL0gsR0FBSWdLLG1CQUFvQndRLEVBQUd0USxRQUFTaVEsTUFDaEcsTUFBTTdaLEVBQUlOLEVBQUVtTSxZQUFZLE9BQU9sQyxlQUFnQnlRLEVBQUksSUFBSW1qRCxHQUFVLElBQUkvbEMsR0FBMEM5M0IsRUFBRW1NLFlBQVksa0JBQW1CLElBQUl5c0IsR0FBd0M1NEIsRUFBRW1NLFlBQVksdUJBQXdCLFNBQXFDbk0sRUFBR21oQixHQUN0USxJQUFLaGIsT0FBT0UsVUFBVXlVLGVBQWUvSyxNQUFNL1AsRUFBRWtLLFFBQVMsQ0FBRSxjQUFnQixNQUFNLElBQUlndEIsR0FBZSxHQUFFWixpQkFBa0IsdURBQ3JILE9BQU8sSUFBSTROLEdBQVdsa0MsRUFBRWtLLFFBQVFpNkIsVUFBV2hqQixFQUMvQyxDQUhrTyxDQUdoTzdnQixFQUFHa2EsR0FBSWxhLEdBQ1QsT0FBTzZaLEVBQUloVSxPQUFPb04sT0FBTyxDQUNyQjB3QixnQkFBaUI5aUIsR0FDbEJoSCxHQUFJTyxFQUFFcWhELGFBQWE1aEQsR0FBSU8sQ0FDN0IsR0FBRyxVQUFVbFMsc0JBQXFCLElBQU00TCxHQUFnQixHQUFHLFFBQVNwVSxHQUVyRW9VLEdBQWdCLEdBQUcsUUFBUyxVQUNoQyxDQWRLLEdDcmhxQkwsTUFjTSxHRDRqa0JOLFNBQXNCK00sRUFBRzNHLEdBQ3JCLE1BQStDbGEsRUFBSSxpQkFBbUI2Z0IsRUFBSUEsRUFBUyxZQUFhekcsRUgzMWpCcEcsU0FBc0IxSCxFQUFLcFAsR0FDdkIsTUFBTXE5RCxFQUFzQmp1RCxFQUFJbEssVUFDM0JxRCxZQUFZLGFBQ1psQyxhQUFhLENBQUVFLFVBQVUsSUFJOUIsT0FISTgyRCxHQUNLQSxFQUFvQnhxRCxtQkFFdEJ6RCxFQUFJbEssVUFBVXFELFlBQVl2SSxFQUNyQyxDR20xakJ3RyxDQUExRixpQkFBbUJ1ZCxFQUFJQSxFSG5vakJyQyxTQUFnQnZkLEVBQU8sR0FDbkIsTUFBTW9QLEVBQU1ILEVBQU14SixJQUFJekYsR0FDdEIsSUFBS29QLEdBQU9wUCxJQUFTLEdBQXNCdUIsSUFDdkMsT0FBTzZPLEtBRVgsSUFBS2hCLEVBQ0QsTUFBTUcsRUFBYzNNLE9BQU8sU0FBZ0MsQ0FBRXVOLFFBQVNuUSxJQUUxRSxPQUFPb1AsQ0FDWCxDRzBuakJ5Q2t1RCxHQUErRSxhQUFhajNELGFBQWEsQ0FDMUlYLFdBQVloSixJQUVoQixJQUFLb2EsRUFBRWtoRCxhQUFjLENBQ2pCLE1BQU01N0QsRVI1aGpCNEIsQ0FBQ21oRSxJQUN2QyxNQUFNdDlCLEVBUnFCLENBQUNzOUIsSUFBa0IsSUFBSS83RCxFQUFJZzhELEVBQUksT0FBNkYsUUFBckZBLEVBQThCLFFBQXhCaDhELEVBQUtuQixXQUFrQyxJQUFQbUIsT0FBZ0IsRUFBU0EsRUFBR2k4RCxxQkFBa0MsSUFBUEQsT0FBZ0IsRUFBU0EsRUFBR0QsRUFBWSxFQVExTEcsQ0FBdUJILEdBQ3BDLElBQUt0OUIsRUFDRCxPQUVKLE1BQU0wOUIsRUFBaUIxOUIsRUFBSzI5QixZQUFZLEtBQ3hDLEdBQUlELEdBQWtCLEdBQUtBLEVBQWlCLElBQU0xOUIsRUFBS3RqQyxPQUNuRCxNQUFNLElBQUlrQixNQUFNLGdCQUFnQm9pQyx5Q0FHcEMsTUFBTTVULEVBQU9wVCxTQUFTZ25CLEVBQUszckIsVUFBVXFwRCxFQUFpQixHQUFJLElBQzFELE1BQWdCLE1BQVoxOUIsRUFBSyxHQUVFLENBQUNBLEVBQUszckIsVUFBVSxFQUFHcXBELEVBQWlCLEdBQUl0eEMsR0FHeEMsQ0FBQzRULEVBQUszckIsVUFBVSxFQUFHcXBELEdBQWlCdHhDLEVBQy9DLEVRMmdqQmN3eEMsQ0FBa0MsYUFDNUN6aEUsR0FqbEJKLFNBQWtDQSxFQUFHbWhCLEVBQUczRyxFQUFHTCxFQUFJLENBQUMsR0FDaEQsSUFBSTdaLEVBQ0osTUFBTW9hLEdBQUsxYSxFQUFJeTZELEdBQWV6NkQsRUFBR283RCxLQUFjZ0IsZUFBZ0J6aEQsRUFBSSxHQUFHd0csS0FBSzNHLElBQzNFLEdBQUksNkJBQStCRSxFQUFFbXBCLE1BQVFucEIsRUFBRW1wQixPQUFTbHBCLEdBQUtvYixHQUFrQixvR0FDL0UvMUIsRUFBRSs3RCxhQUFhNTFELE9BQU9vTixPQUFPcE4sT0FBT29OLE9BQU8sQ0FBQyxFQUFHbUgsR0FBSSxDQUMvQ21wQixLQUFNbHBCLEVBQ05tcEIsS0FBSyxLQUNKM3BCLEVBQUV1bkQsY0FBZSxDQUNsQixJQUFJdmdELEVBQUczRyxFQUNQLEdBQUksaUJBQW1CTCxFQUFFdW5ELGNBQWV2Z0QsRUFBSWhILEVBQUV1bkQsY0FBZWxuRCxFQUFJMGEsR0FBS1EsY0FBZ0IsQ0FHbEZ2VSxFUmwzaEJaLFNBQTZCeVcsRUFBT3VNLEdBQ2hDLEdBQUl2TSxFQUFNekMsSUFDTixNQUFNLElBQUkxekIsTUFBTSxnSEFHcEIsTUFJTWtnRSxFQUFVeDlCLEdBQWEsZUFDdkJ5OUIsRUFBTWhxQyxFQUFNZ3FDLEtBQU8sRUFDbkJDLEVBQU1qcUMsRUFBTWlxQyxLQUFPanFDLEVBQU1rcUMsUUFDL0IsSUFBS0QsRUFDRCxNQUFNLElBQUlwZ0UsTUFBTSx3REFFcEIsTUFBTXNnRSxFQUFVNTdELE9BQU9vTixPQUFPLENBRTFCeXVELElBQUssa0NBQWtDTCxJQUFXTSxJQUFLTixFQUFTQyxNQUFLTSxJQUFLTixFQUFNLEtBQU1PLFVBQVdQLEVBQUtDLE1BQUtDLFFBQVNELEVBQUtPLFNBQVUsQ0FDL0hDLGlCQUFrQixTQUNsQkMsV0FBWSxDQUFDLElBQ1oxcUMsR0FHVCxNQUFPLENBQ0gvekIsRUFBOEJVLEtBQUswVCxVQW5CeEIsQ0FDWHNxRCxJQUFLLE9BQ0x0NkQsS0FBTSxTQWtCTnBFLEVBQThCVSxLQUFLMFQsVUFBVThwRCxJQUgvQixJQUtoQngvRCxLQUFLLElBQ1gsQ1FzMWhCZ0JpZ0UsQ0FBb0Jyb0QsRUFBRXVuRCxjQUFlLFFBQVVwaEUsRUFBSU4sRUFBRXc3RCxZQUFTLElBQVdsN0QsT0FBSSxFQUFTQSxFQUFFNEosUUFBUWk2QixXQUNwRyxNQUFNenBCLEVBQUlQLEVBQUV1bkQsY0FBY0csS0FBTzFuRCxFQUFFdW5ELGNBQWNJLFFBQ2pELElBQUtwbkQsRUFBRyxNQUFNLElBQUl3YyxHQUFlLEdBQUVaLGlCQUFrQix3REFDckQ5YixFQUFJLElBQUkwYSxHQUFLeGEsRUFDakIsQ0FDQTFhLEVBQUVxN0QsaUJBQW1CLElBQUkxakMsR0FBMEMsSUFBSVAsR0FBcUJqVyxFQUFHM0csR0FDbkcsQ0FDSixDQThqQmFpb0QsQ0FBeUIvbkQsS0FBTTFhLEVBQ3hDLENBQ0EsT0FBTzBhLENBQ1gsQ0Nya2tCV2dvRCxDQUhDMXVELEdBWFcsQ0FDckIydUQsT0FBUSwwQ0FDUkMsV0FBWSx1Q0FDWnorQixVQUFXLHVCQUNYMCtCLGNBQWUsbUNBQ2ZDLGtCQUFtQixlQUNuQjVzRCxNQUFPLDRDQUNQNnNELGNBQWUsa0JDUFhDLEdBd0NKLFdBQ0UsT0Z5c29CQSxTQUFpQmhqRSxHQUNqQkEsRUFBSXk2RCxHQUFlejZELEVBQUd3OEQsSUFDdEIsTUFBTXI3QyxFQUFJczVDLEdBQWV6NkQsRUFBRTI4RCxVQUFXa0IsSUFBWXJqRCxFQTdwRWxELFNBQW1DeGEsR0FDbkMsT0FBT0EsRUFBRSs5RCxrQkFBb0JDLEdBQTZCaCtELEdBQUlBLEVBQUUrOUQsaUJBQWlCN0Usc0JBQ2pGbDVELEVBQUUrOUQsZ0JBQ04sQ0EwcEUwRGtGLENBQTBCOWhELEdBQUloSCxFQUFJLElBQUk2bUQsR0FBNEI3L0MsR0FDeEgsT0F0L0JBLFNBQTREbmhCLEdBQzVELEdBQUksTUFBNkJBLEVBQUUwcUMsV0FBYSxJQUFNMXFDLEVBQUV5cUMsZ0JBQWdCbHFDLE9BQVEsTUFBTSxJQUFJMjJCLEdBQWUsR0FBRUgsY0FBZSx5RUFDOUgsQ0FvL0JXbXNDLENBQW1EbGpFLEVBQUUwOEQsUUFBU3ZDLEdBQXlEMy9DLEVBQUd4YSxFQUFFMDhELFFBQVF2ckQsTUFBTXFKLEdBQUssSUFBSWltRCxHQUFjdC9DLEVBQUdoSCxFQUFHbmEsRUFBR3dhLElBQ3JMLENFN3NvQlcyb0QsQ0ZzbGpCWCxTQUFvQm5qRSxFQUFHbWhCLEtBQU0zRyxHQUN6QixHQUFJeGEsR1IzbGZvQnlHLEVRMmxmR3pHLElSMWxmWnlHLEVBQVFpMEQsVUFDWmowRCxFQUFRaTBELFVBR1JqMEQsRVFrdWVmLFNBQTRDekcsRUFBR21oQixFQUFHM0csR0FDOUMsSUFBS0EsRUFBRyxNQUFNLElBQUkwYyxHQUFlLEdBQUVaLGlCQUFrQixZQUFZdDJCLHNDQUFzQ21oQixLQUMzRyxDQWtYbUNpaUQsQ0FBbUMsYUFBYyxPQUFRamlELEdBQUluaEIsYUFBYW83RCxHQUFhLENBQ2xILE1BQU1qaEQsRUFBSXdoQixHQUFhdkgsV0FBV2pULEtBQU0zRyxHQUN4QyxPQUFPZ2dELEdBQWlDcmdELEdBQUksSUFBSTZpRCxHQUFvQmg5RCxFQUFvQixLQUFNbWEsRUFDbEcsQ1I5bGZKLElBQTRCMVQsRVErbGZ4QixDQUNJLEtBQU16RyxhQUFhNjhELElBQXFCNzhELGFBQWFnOUQsSUFBc0IsTUFBTSxJQUFJOWxDLEdBQWUsR0FBRVosaUJBQWtCLGlIQUN4SCxNQUFNbmMsRUFBSW5hLEVBQUUrOEQsTUFBTS9oQyxNQUFNVyxHQUFhdkgsV0FBV2pULEtBQU0zRyxJQUN0RCxPQUFPZ2dELEdBQWlDcmdELEdBQUksSUFBSTZpRCxHQUFvQmg5RCxFQUFFMjhELFVBQ3JELEtBQU14aUQsRUFDM0IsQ0FDSixDRWptakJtQmtwRCxDQUFXLEdBQUksT0FDM0JseUQsTUFBTW15RCxJQUNMLE1BQU1DLEVBQVMsR0FLZixPQUpBRCxFQUFjajdDLFNBQVMyOUIsSUFDckJ1ZCxFQUFPamhFLEtBQUswakQsRUFBSXAvQyxPQUFPNDhELE1BQU0sSUFFL0IxK0QsUUFBUW9KLElBQUlxMUQsR0FDTEEsQ0FBTSxJQUVkejlELE9BQU9mLElBRU4sTUFEQUQsUUFBUUMsTUFBTSxpQ0FBa0NBLEdBQzFDQSxDQUFLLEdBRWpCLEdBOUJBLFNBQW1CMCtELEdBRVYxMkMsTUFEUSw2REFBNkQwMkMsS0FFekV0eUQsTUFBTSthLEdBQWFBLEVBQVN3M0MsU0FDNUJ2eUQsTUFBTXZLLElBQ0w5QixRQUFRb0osSUFBSXRILEdBQ1osTUFBTSs4RCxFQXZCWixTQUFtQi84RCxHQWNqQixPQVhtQkEsRUFBS2c5RCxNQUFNNTRELEtBQUs2NEQsSUFDMUIsQ0FFTEwsTUFBT0ssRUFBS0wsTUFDWk0sS0FBTUQsRUFBS0MsS0FDWEMsWUFBYUYsRUFBS0UsYUFBZSwyQkFDakMxSixPQUFRenpELEVBQUs0OEQsTUFDYjdzRCxLQUFNLElBQUl0SixLQUFLdzJELEVBQUtHLGNBSzFCLENBUXlCQyxDQUFVcjlELEdBRTdCLE9BREE5QixRQUFRb0osSUFBSXkxRCxHQUNMQSxDQUFVLElBRWxCNzlELE9BQU9mLElBRU4sTUFEQUQsUUFBUUMsTUFBTSx5Q0FBMENBLEdBQ2xEQSxDQUFLLEdBRWpCLEVBaUNGaStELENBQW9CLG1DQUNwQkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC93cmFwLWlkYi12YWx1ZS5qcyIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9maXJlc3RvcmUvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vc3JjL2ZpcmViYXNlLmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vc3JjL3NjcmlwdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxuY29uc3QgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG5jb25zdCBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBFcnJvcignRmlyZWJhc2UgRGF0YWJhc2UgKCcgK1xyXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXHJcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXHJcbiAgICAgICAgbWVzc2FnZSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxyXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcclxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXHJcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cclxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXHJcbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cclxuICovXHJcbmNvbnN0IGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMTkxICYmIGMxIDwgMjI0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxuY29uc3QgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERlY29kZUJhc2U2NFN0cmluZ0Vycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cclxuICovXHJcbmNsYXNzIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3InO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbmNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cclxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxyXG4gKi9cclxuY29uc3QgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBVc2UgYmFzZTY0dXJsIGVuY29kaW5nIGFuZCByZW1vdmUgcGFkZGluZyBpbiB0aGUgZW5kIChkb3QgY2hhcmFjdGVycykuXHJcbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxuY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdiYXNlNjREZWNvZGUgZmFpbGVkOiAnLCBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICpcclxuICogTm90ZTogd2UgZG9uJ3QgbWVyZ2UgX19wcm90b19fIHRvIHByZXZlbnQgcHJvdG90eXBlIHBvbGx1dGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIGNhc2UgRGF0ZTpcclxuICAgICAgICAgICAgLy8gVHJlYXQgRGF0ZXMgbGlrZSBzY2FsYXJzOyBpZiB0aGUgdGFyZ2V0IGRhdGUgb2JqZWN0IGhhZCBhbnkgY2hpbGRcclxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBpc1ZhbGlkS2V5IHRvIGd1YXJkIGFnYWluc3QgcHJvdG90eXBlIHBvbGx1dGlvbi4gU2VlIGh0dHBzOi8vc255ay5pby92dWxuL1NOWUstSlMtTE9EQVNILTQ1MDIwMlxyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcclxuICAgIHJldHVybiBrZXkgIT09ICdfX3Byb3RvX18nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdC4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0c0Zyb21HbG9iYWwgPSAoKSA9PiBnZXRHbG9iYWwoKS5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbi8qKlxyXG4gKiBBdHRlbXB0IHRvIHJlYWQgZGVmYXVsdHMgZnJvbSBhIEpTT04gc3RyaW5nIHByb3ZpZGVkIHRvXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb3IgYSBKU09OIGZpbGUgd2hvc2UgcGF0aCBpcyBpblxyXG4gKiBwcm9jZXNzKC4pZW52KC4pX19GSVJFQkFTRV9ERUZBVUxUU19QQVRIX19cclxuICogVGhlIGRvdHMgYXJlIGluIHBhcmVucyBiZWNhdXNlIGNlcnRhaW4gY29tcGlsZXJzIChWaXRlPykgY2Fubm90XHJcbiAqIGhhbmRsZSBzZWVpbmcgdGhhdCB2YXJpYWJsZSBpbiBjb21tZW50cy5cclxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzY4MzhcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVmYXVsdHNKc29uU3RyaW5nID0gcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xyXG4gICAgaWYgKGRlZmF1bHRzSnNvblN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlZmF1bHRzSnNvblN0cmluZyk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUNvb2tpZSA9ICgpID0+IHtcclxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG1hdGNoO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgvX19GSVJFQkFTRV9ERUZBVUxUU19fPShbXjtdKykvKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gU29tZSBlbnZpcm9ubWVudHMgc3VjaCBhcyBBbmd1bGFyIFVuaXZlcnNhbCBTU1IgaGF2ZSBhXHJcbiAgICAgICAgLy8gYGRvY3VtZW50YCBvYmplY3QgYnV0IGVycm9yIG9uIGFjY2Vzc2luZyBgZG9jdW1lbnQuY29va2llYC5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWNvZGVkID0gbWF0Y2ggJiYgYmFzZTY0RGVjb2RlKG1hdGNoWzFdKTtcclxuICAgIHJldHVybiBkZWNvZGVkICYmIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbn07XHJcbi8qKlxyXG4gKiBHZXQgdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuIEl0IGNoZWNrcyBpbiBvcmRlcjpcclxuICogKDEpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBhcyBhIHByb3BlcnR5IG9mIGBnbG9iYWxUaGlzYFxyXG4gKiAoMikgaWYgc3VjaCBhbiBvYmplY3Qgd2FzIHByb3ZpZGVkIG9uIGEgc2hlbGwgZW52aXJvbm1lbnQgdmFyaWFibGVcclxuICogKDMpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBpbiBhIGNvb2tpZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0cyA9ICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChnZXREZWZhdWx0c0Zyb21HbG9iYWwoKSB8fFxyXG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21FbnZWYXJpYWJsZSgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUNvb2tpZSgpKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2F0Y2gtYWxsIGZvciBiZWluZyB1bmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWVcclxuICAgICAgICAgKiB0byBhbnkgZW52aXJvbm1lbnQgY2FzZSB3ZSBoYXZlIG5vdCBhY2NvdW50ZWQgZm9yLiBMb2cgdG9cclxuICAgICAgICAgKiBpbmZvIGluc3RlYWQgb2Ygc3dhbGxvd2luZyBzbyB3ZSBjYW4gZmluZCB0aGVzZSB1bmtub3duIGNhc2VzXHJcbiAgICAgICAgICogYW5kIGFkZCBwYXRocyBmb3IgdGhlbSBpZiBuZWVkZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc29sZS5pbmZvKGBVbmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWUgdG86ICR7ZX1gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3Qgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBVUkwgaG9zdCBmb3JtYXR0ZWQgbGlrZSBgMTI3LjAuMC4xOjk5OTlgIG9yIGBbOjoxXTo0MDAwYCBpZiBhdmFpbGFibGVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCA9IChwcm9kdWN0TmFtZSkgPT4geyB2YXIgX2EsIF9iOyByZXR1cm4gKF9iID0gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtdWxhdG9ySG9zdHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYltwcm9kdWN0TmFtZV07IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3RuYW1lIGFuZCBwb3J0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxyXG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXHJcbiAqIEByZXR1cm5zIGEgcGFpciBvZiBob3N0bmFtZSBhbmQgcG9ydCBsaWtlIGBbXCI6OjFcIiwgNDAwMF1gIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQgPSAocHJvZHVjdE5hbWUpID0+IHtcclxuICAgIGNvbnN0IGhvc3QgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0KHByb2R1Y3ROYW1lKTtcclxuICAgIGlmICghaG9zdCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IGhvc3QubGFzdEluZGV4T2YoJzonKTsgLy8gRmluZGluZyB0aGUgbGFzdCBzaW5jZSBJUHY2IGFkZHIgYWxzbyBoYXMgY29sb25zLlxyXG4gICAgaWYgKHNlcGFyYXRvckluZGV4IDw9IDAgfHwgc2VwYXJhdG9ySW5kZXggKyAxID09PSBob3N0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBob3N0ICR7aG9zdH0gd2l0aCBubyBzZXBhcmF0ZSBob3N0bmFtZSBhbmQgcG9ydCFgKTtcclxuICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuICAgIGNvbnN0IHBvcnQgPSBwYXJzZUludChob3N0LnN1YnN0cmluZyhzZXBhcmF0b3JJbmRleCArIDEpLCAxMCk7XHJcbiAgICBpZiAoaG9zdFswXSA9PT0gJ1snKSB7XHJcbiAgICAgICAgLy8gQnJhY2tldC1xdW90ZWQgYFtpcHY2YWRkcl06cG9ydGAgPT4gcmV0dXJuIFwiaXB2NmFkZHJcIiAod2l0aG91dCBicmFja2V0cykuXHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygxLCBzZXBhcmF0b3JJbmRleCAtIDEpLCBwb3J0XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLCBwb3J0XTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgRmlyZWJhc2UgYXBwIGNvbmZpZyBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRBcHBDb25maWcgPSAoKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb25maWc7IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIGV4cGVyaW1lbnRhbCBzZXR0aW5nIG9uIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0IChwcm9wZXJ0aWVzXHJcbiAqIHByZWZpeGVkIGJ5IFwiX1wiKVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXRFeHBlcmltZW50YWxTZXR0aW5nID0gKG5hbWUpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2BfJHtuYW1lfWBdOyB9O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBEZWZlcnJlZCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICB3cmFwQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xyXG4gICAgaWYgKHRva2VuLnVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXHJcbiAgICBjb25zdCBoZWFkZXIgPSB7XHJcbiAgICAgICAgYWxnOiAnbm9uZScsXHJcbiAgICAgICAgdHlwZTogJ0pXVCdcclxuICAgIH07XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkIHx8ICdkZW1vLXByb2plY3QnO1xyXG4gICAgY29uc3QgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XHJcbiAgICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcclxuICAgIGlmICghc3ViKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKHsgXHJcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXHJcbiAgICAgICAgaXNzOiBgaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tLyR7cHJvamVjdH1gLCBhdWQ6IHByb2plY3QsIGlhdCwgZXhwOiBpYXQgKyAzNjAwLCBhdXRoX3RpbWU6IGlhdCwgc3ViLCB1c2VyX2lkOiBzdWIsIGZpcmViYXNlOiB7XHJcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0gfSwgdG9rZW4pO1xyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXHJcbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgXS5qb2luKCcuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQgb3Igc3BlY2lmaWVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGZvcmNlRW52aXJvbm1lbnQgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yY2VFbnZpcm9ubWVudDtcclxuICAgIGlmIChmb3JjZUVudmlyb25tZW50ID09PSAnbm9kZScpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdicm93c2VyJykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBpc0Jyb3dzZXJFeHRlbnNpb24oKSB7XHJcbiAgICBjb25zdCBydW50aW1lID0gdHlwZW9mIGNocm9tZSA9PT0gJ29iamVjdCdcclxuICAgICAgICA/IGNocm9tZS5ydW50aW1lXHJcbiAgICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgPyBicm93c2VyLnJ1bnRpbWVcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJ1bnRpbWUgPT09ICdvYmplY3QnICYmIHJ1bnRpbWUuaWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKiBEZXRlY3RzIEVsZWN0cm9uIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdFbGVjdHJvbi8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xyXG5mdW5jdGlvbiBpc0lFKCkge1xyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpO1xyXG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUgJykgPj0gMCB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgVW5pdmVyc2FsIFdpbmRvd3MgUGxhdGZvcm0gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNVV1AoKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdNU0FwcEhvc3QvJykgPj0gMDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTm9kZVNkaygpIHtcclxuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XHJcbn1cclxuLyoqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgcnVubmluZyBpbiBTYWZhcmkuICovXHJcbmZ1bmN0aW9uIGlzU2FmYXJpKCkge1xyXG4gICAgcmV0dXJuICghaXNOb2RlKCkgJiZcclxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxyXG4gICAgICAgICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKSk7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqICAgLy8gVHlwZXNjcmlwdCBzdHJpbmcgbGl0ZXJhbHMgZm9yIHR5cGUtc2FmZSBjb2Rlc1xyXG4gKiAgIHR5cGUgRXJyID1cclxuICogICAgICd1bmtub3duJyB8XHJcbiAqICAgICAnb2JqZWN0LW5vdC1mb3VuZCdcclxuICogICAgIDtcclxuICpcclxuICogICAvLyBDbG9zdXJlIGVudW0gZm9yIHR5cGUtc2FmZSBlcnJvciBjb2Rlc1xyXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cclxuICogICB2YXIgRXJyID0ge1xyXG4gKiAgICAgVU5LTk9XTjogJ3Vua25vd24nLFxyXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxyXG4gKiAgIH1cclxuICpcclxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xyXG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcclxuICogICAgICdmaWxlLW5vdC1mb3VuZCc6IFwiQ291bGQgbm90IGZpbmQgZmlsZTogeyRmaWxlfVwiLFxyXG4gKiAgIH07XHJcbiAqXHJcbiAqICAgLy8gVHlwZS1zYWZlIGZ1bmN0aW9uIC0gbXVzdCBwYXNzIGEgdmFsaWQgZXJyb3IgY29kZSBhcyBwYXJhbS5cclxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XHJcbiAqXHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkZJTEVfTk9UX0ZPVU5ELCB7J2ZpbGUnOiBmaWxlTmFtZX0pO1xyXG4gKiAgIC4uLlxyXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxyXG4gKlxyXG4gKiAgIGNhdGNoIChlKSB7XHJcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xyXG4gKiAgICAgaWYgKChlIGFzIEZpcmViYXNlRXJyb3IpPy5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIFRoZSBlcnJvciBjb2RlIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY29kZSwgbWVzc2FnZSwgXHJcbiAgICAvKiogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZWplY3RzIGlmIHRoZSBnaXZlbiBwcm9taXNlIGRvZXNuJ3QgcmVzb2x2ZSBpbiB0aW1lSW5NUyBtaWxsaXNlY29uZHMuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gcHJvbWlzZVdpdGhUaW1lb3V0KHByb21pc2UsIHRpbWVJbk1TID0gMjAwMCkge1xyXG4gICAgY29uc3QgZGVmZXJyZWRQcm9taXNlID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IGRlZmVycmVkUHJvbWlzZS5yZWplY3QoJ3RpbWVvdXQhJyksIHRpbWVJbk1TKTtcclxuICAgIHByb21pc2UudGhlbihkZWZlcnJlZFByb21pc2UucmVzb2x2ZSwgZGVmZXJyZWRQcm9taXNlLnJlamVjdCk7XHJcbiAgICByZXR1cm4gZGVmZXJyZWRQcm9taXNlLnByb21pc2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goYXJyYXlWYWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxyXG4gKiAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XHJcbiAgICBjb25zdCBvYmogPSB7fTtcclxuICAgIGNvbnN0IHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkge1xyXG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XHJcbiAgICBpZiAoIXF1ZXJ5U3RhcnQpIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFnbWVudFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnLCBxdWVyeVN0YXJ0KTtcclxuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxuY2xhc3MgU2hhMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xyXG4gICAgICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFpbl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cclxuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuV18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWRfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xyXG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKGxldCBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xyXG4gICAgICAgICAgICBXW2ldID0gKCh0IDw8IDEpIHwgKHQgPj4+IDMxKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5jaGFpbl9bMV07XHJcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xyXG4gICAgICAgIGxldCBlID0gdGhpcy5jaGFpbl9bNF07XHJcbiAgICAgICAgbGV0IGYsIGs7XHJcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGQgXiAoYiAmIChjIF4gZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgNjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxlbmd0aE1pbnVzQmxvY2sgPSBsZW5ndGggLSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXHJcbiAgICAgICAgY29uc3QgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIGxldCBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBkaWdlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcclxuICAgICAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXHJcbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XHJcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xyXG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xyXG4gICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWdlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXHJcbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSBvbk5vT2JzZXJ2ZXJzO1xyXG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxyXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cclxuICAgICAgICAvLyBjYW4gc3RpbGwgcmVjZWl2ZSB0aGUgdmVyeSBmaXJzdCB2YWx1ZSBnZW5lcmF0ZWQgaW4gdGhlIGV4ZWN1dG9yLlxyXG4gICAgICAgIHRoaXMudGFza1xyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKHRoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5leHQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9XHJcbiAgICBjb21wbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBzdWJzY3JpYmUobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIGxldCBvYnNlcnZlcjtcclxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBlcnJvciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxyXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xyXG4gICAgICAgICAgICAnbmV4dCcsXHJcbiAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICdjb21wbGV0ZSdcclxuICAgICAgICBdKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcclxuICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxyXG4gICAgICAgIC8vIGp1c3QgcmVzcG9uZCB0byB0aGUgT2JzZXJ2ZXIgd2l0aCB0aGUgZmluYWwgZXJyb3Igb3IgY29tcGxldGVcclxuICAgICAgICAvLyBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9XHJcbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xyXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cclxuICAgIHVuc3Vic2NyaWJlT25lKGkpIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvckVhY2hPYnNlcnZlcihmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgc2VuZE9uZShpLCBmbikge1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbih0aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKGVycikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgbGV0IGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBmbk5hbWUgK1xyXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBhcmdDb3VudCArXHJcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcclxuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xyXG4gICAgICAgICAgICBhcmdFcnJvciArXHJcbiAgICAgICAgICAgICcuJztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIGFyZ05hbWUgVGhlIG5hbWUgb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJnTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke2ZuTmFtZX0gZmFpbGVkOiAke2FyZ05hbWV9IGFyZ3VtZW50IGA7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIG5hbWVzcGFjZSwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ25hbWVzcGFjZScpICsgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TmFtZSwgXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE5hbWUsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cclxuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbmNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb3BpZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyM1xyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgdXVpZC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgdXVpZHY0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgYyA9PiB7XHJcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XHJcbiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgfSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcclxuLyoqXHJcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgTUFYX1ZBTFVFX01JTExJUyA9IDQgKiA2MCAqIDYwICogMTAwMDsgLy8gRm91ciBob3VycywgbGlrZSBpT1MgYW5kIEFuZHJvaWQuXHJcbi8qKlxyXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxyXG4gKiBTZWVcclxuICogaHR0cDovL2dvL3NhZmUtY2xpZW50LWJlaGF2aW9yI3N0ZXAtMS1kZXRlcm1pbmUtdGhlLWFwcHJvcHJpYXRlLXJldHJ5LWludGVydmFsLXRvLWhhbmRsZS1zcGlrZS10cmFmZmljXHJcbiAqIGZvciBjb250ZXh0LlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUywgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpIHtcclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIGNvbnN0IGN1cnJCYXNlVmFsdWUgPSBpbnRlcnZhbE1pbGxpcyAqIE1hdGgucG93KGJhY2tvZmZGYWN0b3IsIGJhY2tvZmZDb3VudCk7XHJcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxyXG4gICAgLy8gRGV2aWF0aW9uOiByYW5kb21GYWN0b3IgaXMgcmVxdWlyZWQuXHJcbiAgICBjb25zdCByYW5kb21XYWl0ID0gTWF0aC5yb3VuZChcclxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXHJcbiAgICBSQU5ET01fRkFDVE9SICpcclxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcclxuICAgICAgICAvLyBBIHJhbmRvbSBmbG9hdCAocm91bmRlZCB0byBpbnQgYnkgTWF0aC5yb3VuZCBhYm92ZSkgaW4gdGhlIHJhbmdlIFstMSwgMV0uIERldGVybWluZXNcclxuICAgICAgICAvLyBpZiB3ZSBhZGQgb3Igc3VidHJhY3QuXHJcbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcclxuICAgICAgICAyKTtcclxuICAgIC8vIExpbWl0cyBiYWNrb2ZmIHRvIG1heCB0byBhdm9pZCBlZmZlY3RpdmVseSBwZXJtYW5lbnQgYmFja29mZi5cclxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcclxuICovXHJcbmZ1bmN0aW9uIG9yZGluYWwoaSkge1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcclxuICAgICAgICByZXR1cm4gYCR7aX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XHJcbn1cclxuZnVuY3Rpb24gaW5kaWNhdG9yKGkpIHtcclxuICAgIGkgPSBNYXRoLmFicyhpKTtcclxuICAgIGNvbnN0IGNlbnQgPSBpICUgMTAwO1xyXG4gICAgaWYgKGNlbnQgPj0gMTAgJiYgY2VudCA8PSAyMCkge1xyXG4gICAgICAgIHJldHVybiAndGgnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2UpIHtcclxuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciwgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBlcnJvclByZWZpeCwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBnZXREZWZhdWx0QXBwQ29uZmlnLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0LCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldERlZmF1bHRzLCBnZXRFeHBlcmltZW50YWxTZXR0aW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0VsZWN0cm9uLCBpc0VtcHR5LCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc05vZGUsIGlzTm9kZVNkaywgaXNSZWFjdE5hdGl2ZSwgaXNTYWZhcmksIGlzVVdQLCBpc1ZhbGlkRm9ybWF0LCBpc1ZhbGlkVGltZXN0YW1wLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHByb21pc2VXaXRoVGltZW91dCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5LCBzdHJpbmdpZnksIHV1aWR2NCwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGV0aGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkxBWlkgKi87XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRNdWx0aXBsZUluc3RhbmNlcyhtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBjYWxsYmFjaztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbmNsYXNzIFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIGdldChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH1cclxuICAgIGdldEltbWVkaWF0ZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3B0aW9uYWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSW4gY2FzZSBhIGNvbXBvbmVudCBpcyBub3QgaW5pdGlhbGl6ZWQgYW5kIHNob3VsZC9jYW4gbm90IGJlIGF1dG8taW5pdGlhbGl6ZWQgYXQgdGhlIG1vbWVudCwgcmV0dXJuIG51bGwgaWYgdGhlIG9wdGlvbmFsIGZsYWcgaXMgc2V0LCBvciB0aHJvd1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFNlcnZpY2UgJHt0aGlzLm5hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldENvbXBvbmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc21hdGNoaW5nIENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmb3IgUHJvdmlkZXIgJHt0aGlzLm5hbWV9LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhckluc3RhbmNlKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlKSAvLyBsZWdhY3kgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKSksXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuX2RlbGV0ZSgpKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgaXNDb21wb25lbnRTZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpc0luaXRpYWxpemVkKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKG9wdHMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGAke3RoaXMubmFtZX0oJHtub3JtYWxpemVkSWRlbnRpZmllcn0pIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcclxuICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZSB3YWl0aW5nIGZvciB0aGUgc2VydmljZSBpbnN0YW5jZVxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gaXMgaW52b2tlZCBTWU5DSFJPTk9VU0xZLCBzbyBpdCBzaG91bGQgbm90IGV4ZWN1dGUgYW55IGxvbmdydW5uaW5nIHRhc2tzIGluIG9yZGVyIHRvIG5vdCBibG9jayB0aGUgcHJvZ3JhbS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXHJcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIG9uSW5pdChjYWxsYmFjaywgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gKF9hID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IFNldCgpO1xyXG4gICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3Muc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBleGlzdGluZ0NhbGxiYWNrcyk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcclxuICAgICAqL1xyXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgKiBOb3RlIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkIGlzIGRpZmZlcmVudCwgd2hpY2ggaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IGNyZWF0b3IsXHJcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAqIG9uSW5zdGFuY2VDcmVhdGVkKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7IHdoaWNoXHJcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIG5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3VsZEF1dG9Jbml0aWFsaXplKCkge1xyXG4gICAgICAgIHJldHVybiAoISF0aGlzLmNvbXBvbmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSAhPT0gXCJFWFBMSUNJVFwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVYUExJQ0lUICovKTtcclxuICAgIH1cclxufVxyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxyXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XHJcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcclxuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxyXG4gICAgICovXHJcbiAgICBhZGRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBhZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJvdmlkZXIobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH1cclxuICAgIGdldFByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJjb25zdCBpbnN0YW5jZU9mQW55ID0gKG9iamVjdCwgY29uc3RydWN0b3JzKSA9PiBjb25zdHJ1Y3RvcnMuc29tZSgoYykgPT4gb2JqZWN0IGluc3RhbmNlb2YgYyk7XG5cbmxldCBpZGJQcm94eWFibGVUeXBlcztcbmxldCBjdXJzb3JBZHZhbmNlTWV0aG9kcztcbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSB7XG4gICAgcmV0dXJuIChpZGJQcm94eWFibGVUeXBlcyB8fFxuICAgICAgICAoaWRiUHJveHlhYmxlVHlwZXMgPSBbXG4gICAgICAgICAgICBJREJEYXRhYmFzZSxcbiAgICAgICAgICAgIElEQk9iamVjdFN0b3JlLFxuICAgICAgICAgICAgSURCSW5kZXgsXG4gICAgICAgICAgICBJREJDdXJzb3IsXG4gICAgICAgICAgICBJREJUcmFuc2FjdGlvbixcbiAgICAgICAgXSkpO1xufVxuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpIHtcbiAgICByZXR1cm4gKGN1cnNvckFkdmFuY2VNZXRob2RzIHx8XG4gICAgICAgIChjdXJzb3JBZHZhbmNlTWV0aG9kcyA9IFtcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuYWR2YW5jZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWUsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlUHJpbWFyeUtleSxcbiAgICAgICAgXSkpO1xufVxuY29uc3QgY3Vyc29yUmVxdWVzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvbkRvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUod3JhcChyZXF1ZXN0LnJlc3VsdCkpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICB9KTtcbiAgICBwcm9taXNlXG4gICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyBTaW5jZSBjdXJzb3JpbmcgcmV1c2VzIHRoZSBJREJSZXF1ZXN0ICgqc2lnaCopLCB3ZSBjYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsXG4gICAgICAgIC8vIChzZWUgd3JhcEZ1bmN0aW9uKS5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCQ3Vyc29yKSB7XG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0TWFwLnNldCh2YWx1ZSwgcmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2F0Y2hpbmcgdG8gYXZvaWQgXCJVbmNhdWdodCBQcm9taXNlIGV4Y2VwdGlvbnNcIlxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIC8vIFRoaXMgbWFwcGluZyBleGlzdHMgaW4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGJ1dCBkb2Vzbid0IGRvZXNuJ3QgZXhpc3QgaW4gdHJhbnNmb3JtQ2FjaGUuIFRoaXNcbiAgICAvLyBpcyBiZWNhdXNlIHdlIGNyZWF0ZSBtYW55IHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdC5cbiAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KHByb21pc2UsIHJlcXVlc3QpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHR4KSB7XG4gICAgLy8gRWFybHkgYmFpbCBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBkb25lIHByb21pc2UgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgaWYgKHRyYW5zYWN0aW9uRG9uZU1hcC5oYXModHgpKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgZG9uZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QodHguZXJyb3IgfHwgbmV3IERPTUV4Y2VwdGlvbignQWJvcnRFcnJvcicsICdBYm9ydEVycm9yJykpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICB9KTtcbiAgICAvLyBDYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsLlxuICAgIHRyYW5zYWN0aW9uRG9uZU1hcC5zZXQodHgsIGRvbmUpO1xufVxubGV0IGlkYlByb3h5VHJhcHMgPSB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciB0cmFuc2FjdGlvbi5kb25lLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkb25lJylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Eb25lTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgLy8gUG9seWZpbGwgZm9yIG9iamVjdFN0b3JlTmFtZXMgYmVjYXVzZSBvZiBFZGdlLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdvYmplY3RTdG9yZU5hbWVzJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQub2JqZWN0U3RvcmVOYW1lcyB8fCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYWtlIHR4LnN0b3JlIHJldHVybiB0aGUgb25seSBzdG9yZSBpbiB0aGUgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbWFueS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc3RvcmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiByZWNlaXZlci5vYmplY3RTdG9yZShyZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIHRyYW5zZm9ybSB3aGF0ZXZlciB3ZSBnZXQgYmFjay5cbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0W3Byb3BdKTtcbiAgICB9LFxuICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uICYmXG4gICAgICAgICAgICAocHJvcCA9PT0gJ2RvbmUnIHx8IHByb3AgPT09ICdzdG9yZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcCBpbiB0YXJnZXQ7XG4gICAgfSxcbn07XG5mdW5jdGlvbiByZXBsYWNlVHJhcHMoY2FsbGJhY2spIHtcbiAgICBpZGJQcm94eVRyYXBzID0gY2FsbGJhY2soaWRiUHJveHlUcmFwcyk7XG59XG5mdW5jdGlvbiB3cmFwRnVuY3Rpb24oZnVuYykge1xuICAgIC8vIER1ZSB0byBleHBlY3RlZCBvYmplY3QgZXF1YWxpdHkgKHdoaWNoIGlzIGVuZm9yY2VkIGJ5IHRoZSBjYWNoaW5nIGluIGB3cmFwYCksIHdlXG4gICAgLy8gb25seSBjcmVhdGUgb25lIG5ldyBmdW5jIHBlciBmdW5jLlxuICAgIC8vIEVkZ2UgZG9lc24ndCBzdXBwb3J0IG9iamVjdFN0b3JlTmFtZXMgKGJvb28pLCBzbyB3ZSBwb2x5ZmlsbCBpdCBoZXJlLlxuICAgIGlmIChmdW5jID09PSBJREJEYXRhYmFzZS5wcm90b3R5cGUudHJhbnNhY3Rpb24gJiZcbiAgICAgICAgISgnb2JqZWN0U3RvcmVOYW1lcycgaW4gSURCVHJhbnNhY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0b3JlTmFtZXMsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZnVuYy5jYWxsKHVud3JhcCh0aGlzKSwgc3RvcmVOYW1lcywgLi4uYXJncyk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuc2V0KHR4LCBzdG9yZU5hbWVzLnNvcnQgPyBzdG9yZU5hbWVzLnNvcnQoKSA6IFtzdG9yZU5hbWVzXSk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcCh0eCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEN1cnNvciBtZXRob2RzIGFyZSBzcGVjaWFsLCBhcyB0aGUgYmVoYXZpb3VyIGlzIGEgbGl0dGxlIG1vcmUgZGlmZmVyZW50IHRvIHN0YW5kYXJkIElEQi4gSW5cbiAgICAvLyBJREIsIHlvdSBhZHZhbmNlIHRoZSBjdXJzb3IgYW5kIHdhaXQgZm9yIGEgbmV3ICdzdWNjZXNzJyBvbiB0aGUgSURCUmVxdWVzdCB0aGF0IGdhdmUgeW91IHRoZVxuICAgIC8vIGN1cnNvci4gSXQncyBraW5kYSBsaWtlIGEgcHJvbWlzZSB0aGF0IGNhbiByZXNvbHZlIHdpdGggbWFueSB2YWx1ZXMuIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlXG4gICAgLy8gd2l0aCByZWFsIHByb21pc2VzLCBzbyBlYWNoIGFkdmFuY2UgbWV0aG9kcyByZXR1cm5zIGEgbmV3IHByb21pc2UgZm9yIHRoZSBjdXJzb3Igb2JqZWN0LCBvclxuICAgIC8vIHVuZGVmaW5lZCBpZiB0aGUgZW5kIG9mIHRoZSBjdXJzb3IgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICBpZiAoZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKS5pbmNsdWRlcyhmdW5jKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgICAgICBmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcChjdXJzb3JSZXF1ZXN0TWFwLmdldCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgIHJldHVybiB3cmFwKGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICByZXR1cm4gd3JhcEZ1bmN0aW9uKHZhbHVlKTtcbiAgICAvLyBUaGlzIGRvZXNuJ3QgcmV0dXJuLCBpdCBqdXN0IGNyZWF0ZXMgYSAnZG9uZScgcHJvbWlzZSBmb3IgdGhlIHRyYW5zYWN0aW9uLFxuICAgIC8vIHdoaWNoIGlzIGxhdGVyIHJldHVybmVkIGZvciB0cmFuc2FjdGlvbi5kb25lIChzZWUgaWRiT2JqZWN0SGFuZGxlcikuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pXG4gICAgICAgIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih2YWx1ZSk7XG4gICAgaWYgKGluc3RhbmNlT2ZBbnkodmFsdWUsIGdldElkYlByb3h5YWJsZVR5cGVzKCkpKVxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHZhbHVlLCBpZGJQcm94eVRyYXBzKTtcbiAgICAvLyBSZXR1cm4gdGhlIHNhbWUgdmFsdWUgYmFjayBpZiB3ZSdyZSBub3QgZ29pbmcgdG8gdHJhbnNmb3JtIGl0LlxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHdyYXAodmFsdWUpIHtcbiAgICAvLyBXZSBzb21ldGltZXMgZ2VuZXJhdGUgbXVsdGlwbGUgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0IChlZyB3aGVuIGN1cnNvcmluZyksIGJlY2F1c2VcbiAgICAvLyBJREIgaXMgd2VpcmQgYW5kIGEgc2luZ2xlIElEQlJlcXVlc3QgY2FuIHlpZWxkIG1hbnkgcmVzcG9uc2VzLCBzbyB0aGVzZSBjYW4ndCBiZSBjYWNoZWQuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCUmVxdWVzdClcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QodmFsdWUpO1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgdHJhbnNmb3JtZWQgdGhpcyB2YWx1ZSBiZWZvcmUsIHJldXNlIHRoZSB0cmFuc2Zvcm1lZCB2YWx1ZS5cbiAgICAvLyBUaGlzIGlzIGZhc3RlciwgYnV0IGl0IGFsc28gcHJvdmlkZXMgb2JqZWN0IGVxdWFsaXR5LlxuICAgIGlmICh0cmFuc2Zvcm1DYWNoZS5oYXModmFsdWUpKVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpO1xuICAgIC8vIE5vdCBhbGwgdHlwZXMgYXJlIHRyYW5zZm9ybWVkLlxuICAgIC8vIFRoZXNlIG1heSBiZSBwcmltaXRpdmUgdHlwZXMsIHNvIHRoZXkgY2FuJ3QgYmUgV2Vha01hcCBrZXlzLlxuICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdHJhbnNmb3JtQ2FjaGUuc2V0KHZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQobmV3VmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuY29uc3QgdW53cmFwID0gKHZhbHVlKSA9PiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcblxuZXhwb3J0IHsgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGFzIGEsIGluc3RhbmNlT2ZBbnkgYXMgaSwgcmVwbGFjZVRyYXBzIGFzIHIsIHVud3JhcCBhcyB1LCB3cmFwIGFzIHcgfTtcbiIsImltcG9ydCB7IHcgYXMgd3JhcCwgciBhcyByZXBsYWNlVHJhcHMgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcbmV4cG9ydCB7IHUgYXMgdW53cmFwLCB3IGFzIHdyYXAgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcblxuLyoqXG4gKiBPcGVuIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKiBAcGFyYW0gdmVyc2lvbiBTY2hlbWEgdmVyc2lvbi5cbiAqIEBwYXJhbSBjYWxsYmFja3MgQWRkaXRpb25hbCBjYWxsYmFja3MuXG4gKi9cbmZ1bmN0aW9uIG9wZW5EQihuYW1lLCB2ZXJzaW9uLCB7IGJsb2NrZWQsIHVwZ3JhZGUsIGJsb2NraW5nLCB0ZXJtaW5hdGVkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcbiAgICBjb25zdCBvcGVuUHJvbWlzZSA9IHdyYXAocmVxdWVzdCk7XG4gICAgaWYgKHVwZ3JhZGUpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB1cGdyYWRlKHdyYXAocmVxdWVzdC5yZXN1bHQpLCBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCB3cmFwKHJlcXVlc3QudHJhbnNhY3Rpb24pLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoZXZlbnQpID0+IGJsb2NrZWQoXG4gICAgICAgIC8vIENhc3RpbmcgZHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC1ET00tbGliLWdlbmVyYXRvci9wdWxsLzE0MDVcbiAgICAgICAgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICB9XG4gICAgb3BlblByb21pc2VcbiAgICAgICAgLnRoZW4oKGRiKSA9PiB7XG4gICAgICAgIGlmICh0ZXJtaW5hdGVkKVxuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB0ZXJtaW5hdGVkKCkpO1xuICAgICAgICBpZiAoYmxvY2tpbmcpIHtcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ3ZlcnNpb25jaGFuZ2UnLCAoZXZlbnQpID0+IGJsb2NraW5nKGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICByZXR1cm4gb3BlblByb21pc2U7XG59XG4vKipcbiAqIERlbGV0ZSBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICovXG5mdW5jdGlvbiBkZWxldGVEQihuYW1lLCB7IGJsb2NrZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShuYW1lKTtcbiAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoZXZlbnQpID0+IGJsb2NrZWQoXG4gICAgICAgIC8vIENhc3RpbmcgZHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC1ET00tbGliLWdlbmVyYXRvci9wdWxsLzE0MDVcbiAgICAgICAgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyYXAocmVxdWVzdCkudGhlbigoKSA9PiB1bmRlZmluZWQpO1xufVxuXG5jb25zdCByZWFkTWV0aG9kcyA9IFsnZ2V0JywgJ2dldEtleScsICdnZXRBbGwnLCAnZ2V0QWxsS2V5cycsICdjb3VudCddO1xuY29uc3Qgd3JpdGVNZXRob2RzID0gWydwdXQnLCAnYWRkJywgJ2RlbGV0ZScsICdjbGVhciddO1xuY29uc3QgY2FjaGVkTWV0aG9kcyA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHtcbiAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBJREJEYXRhYmFzZSAmJlxuICAgICAgICAhKHByb3AgaW4gdGFyZ2V0KSAmJlxuICAgICAgICB0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApKVxuICAgICAgICByZXR1cm4gY2FjaGVkTWV0aG9kcy5nZXQocHJvcCk7XG4gICAgY29uc3QgdGFyZ2V0RnVuY05hbWUgPSBwcm9wLnJlcGxhY2UoL0Zyb21JbmRleCQvLCAnJyk7XG4gICAgY29uc3QgdXNlSW5kZXggPSBwcm9wICE9PSB0YXJnZXRGdW5jTmFtZTtcbiAgICBjb25zdCBpc1dyaXRlID0gd3JpdGVNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKTtcbiAgICBpZiAoXG4gICAgLy8gQmFpbCBpZiB0aGUgdGFyZ2V0IGRvZXNuJ3QgZXhpc3Qgb24gdGhlIHRhcmdldC4gRWcsIGdldEFsbCBpc24ndCBpbiBFZGdlLlxuICAgICEodGFyZ2V0RnVuY05hbWUgaW4gKHVzZUluZGV4ID8gSURCSW5kZXggOiBJREJPYmplY3RTdG9yZSkucHJvdG90eXBlKSB8fFxuICAgICAgICAhKGlzV3JpdGUgfHwgcmVhZE1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1ldGhvZCA9IGFzeW5jIGZ1bmN0aW9uIChzdG9yZU5hbWUsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogdW5kZWZpbmVkIGd6aXBwcyBiZXR0ZXIsIGJ1dCBmYWlscyBpbiBFZGdlIDooXG4gICAgICAgIGNvbnN0IHR4ID0gdGhpcy50cmFuc2FjdGlvbihzdG9yZU5hbWUsIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seScpO1xuICAgICAgICBsZXQgdGFyZ2V0ID0gdHguc3RvcmU7XG4gICAgICAgIGlmICh1c2VJbmRleClcbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5pbmRleChhcmdzLnNoaWZ0KCkpO1xuICAgICAgICAvLyBNdXN0IHJlamVjdCBpZiBvcCByZWplY3RzLlxuICAgICAgICAvLyBJZiBpdCdzIGEgd3JpdGUgb3BlcmF0aW9uLCBtdXN0IHJlamVjdCBpZiB0eC5kb25lIHJlamVjdHMuXG4gICAgICAgIC8vIE11c3QgcmVqZWN0IHdpdGggb3AgcmVqZWN0aW9uIGZpcnN0LlxuICAgICAgICAvLyBNdXN0IHJlc29sdmUgd2l0aCBvcCB2YWx1ZS5cbiAgICAgICAgLy8gTXVzdCBoYW5kbGUgYm90aCBwcm9taXNlcyAobm8gdW5oYW5kbGVkIHJlamVjdGlvbnMpXG4gICAgICAgIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGFyZ2V0W3RhcmdldEZ1bmNOYW1lXSguLi5hcmdzKSxcbiAgICAgICAgICAgIGlzV3JpdGUgJiYgdHguZG9uZSxcbiAgICAgICAgXSkpWzBdO1xuICAgIH07XG4gICAgY2FjaGVkTWV0aG9kcy5zZXQocHJvcCwgbWV0aG9kKTtcbiAgICByZXR1cm4gbWV0aG9kO1xufVxucmVwbGFjZVRyYXBzKChvbGRUcmFwcykgPT4gKHtcbiAgICAuLi5vbGRUcmFwcyxcbiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlciksXG4gICAgaGFzOiAodGFyZ2V0LCBwcm9wKSA9PiAhIWdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmhhcyh0YXJnZXQsIHByb3ApLFxufSkpO1xuXG5leHBvcnQgeyBkZWxldGVEQiwgb3BlbkRCIH07XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBzZXRVc2VyTG9nSGFuZGxlciwgc2V0TG9nTGV2ZWwgYXMgc2V0TG9nTGV2ZWwkMSB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBnZXREZWZhdWx0QXBwQ29uZmlnLCBkZWVwRXF1YWwsIEZpcmViYXNlRXJyb3IsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmV4cG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBvcGVuREIgfSBmcm9tICdpZGInO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXHJcbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cclxuICAgIGdldFBsYXRmb3JtSW5mb1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXHJcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VydmljZS5saWJyYXJ5fS8ke3NlcnZpY2UudmVyc2lvbn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGxvZ1N0cmluZyA9PiBsb2dTdHJpbmcpXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcclxuICpcclxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXHJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xyXG4gKiBwcm92aWRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xyXG4gICAgY29uc3QgY29tcG9uZW50ID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCk7XHJcbiAgICByZXR1cm4gKGNvbXBvbmVudCA9PT0gbnVsbCB8fCBjb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbXBvbmVudC50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovO1xyXG59XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcFwiO1xuY29uc3QgdmVyc2lvbiQxID0gXCIwLjkuMTVcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FwcCcpO1xuXG5jb25zdCBuYW1lJG4gPSBcIkBmaXJlYmFzZS9hcHAtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbSA9IFwiQGZpcmViYXNlL2FuYWx5dGljcy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRsID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5cbmNvbnN0IG5hbWUkayA9IFwiQGZpcmViYXNlL2FwcC1jaGVjay1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRqID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrXCI7XG5cbmNvbnN0IG5hbWUkaSA9IFwiQGZpcmViYXNlL2F1dGhcIjtcblxuY29uc3QgbmFtZSRoID0gXCJAZmlyZWJhc2UvYXV0aC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRnID0gXCJAZmlyZWJhc2UvZGF0YWJhc2VcIjtcblxuY29uc3QgbmFtZSRmID0gXCJAZmlyZWJhc2UvZGF0YWJhc2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZSA9IFwiQGZpcmViYXNlL2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGQgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYyA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcblxuY29uc3QgbmFtZSRiID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRhID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nXCI7XG5cbmNvbnN0IG5hbWUkOSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ4ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2VcIjtcblxuY29uc3QgbmFtZSQ3ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNiA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWdcIjtcblxuY29uc3QgbmFtZSQ1ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ0ID0gXCJAZmlyZWJhc2Uvc3RvcmFnZVwiO1xuXG5jb25zdCBuYW1lJDMgPSBcIkBmaXJlYmFzZS9zdG9yYWdlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDIgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuY29uc3QgbmFtZSQxID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lID0gXCJmaXJlYmFzZVwiO1xuY29uc3QgdmVyc2lvbiA9IFwiMTAuMS4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBhcHAgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xyXG5jb25zdCBQTEFURk9STV9MT0dfU1RSSU5HID0ge1xyXG4gICAgW25hbWUkb106ICdmaXJlLWNvcmUnLFxyXG4gICAgW25hbWUkbl06ICdmaXJlLWNvcmUtY29tcGF0JyxcclxuICAgIFtuYW1lJGxdOiAnZmlyZS1hbmFseXRpY3MnLFxyXG4gICAgW25hbWUkbV06ICdmaXJlLWFuYWx5dGljcy1jb21wYXQnLFxyXG4gICAgW25hbWUkal06ICdmaXJlLWFwcC1jaGVjaycsXHJcbiAgICBbbmFtZSRrXTogJ2ZpcmUtYXBwLWNoZWNrLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRpXTogJ2ZpcmUtYXV0aCcsXHJcbiAgICBbbmFtZSRoXTogJ2ZpcmUtYXV0aC1jb21wYXQnLFxyXG4gICAgW25hbWUkZ106ICdmaXJlLXJ0ZGInLFxyXG4gICAgW25hbWUkZl06ICdmaXJlLXJ0ZGItY29tcGF0JyxcclxuICAgIFtuYW1lJGVdOiAnZmlyZS1mbicsXHJcbiAgICBbbmFtZSRkXTogJ2ZpcmUtZm4tY29tcGF0JyxcclxuICAgIFtuYW1lJGNdOiAnZmlyZS1paWQnLFxyXG4gICAgW25hbWUkYl06ICdmaXJlLWlpZC1jb21wYXQnLFxyXG4gICAgW25hbWUkYV06ICdmaXJlLWZjbScsXHJcbiAgICBbbmFtZSQ5XTogJ2ZpcmUtZmNtLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ4XTogJ2ZpcmUtcGVyZicsXHJcbiAgICBbbmFtZSQ3XTogJ2ZpcmUtcGVyZi1jb21wYXQnLFxyXG4gICAgW25hbWUkNl06ICdmaXJlLXJjJyxcclxuICAgIFtuYW1lJDVdOiAnZmlyZS1yYy1jb21wYXQnLFxyXG4gICAgW25hbWUkNF06ICdmaXJlLWdjcycsXHJcbiAgICBbbmFtZSQzXTogJ2ZpcmUtZ2NzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQyXTogJ2ZpcmUtZnN0JyxcclxuICAgIFtuYW1lJDFdOiAnZmlyZS1mc3QtY29tcGF0JyxcclxuICAgICdmaXJlLWpzJzogJ2ZpcmUtanMnLFxyXG4gICAgW25hbWVdOiAnZmlyZS1qcy1hbGwnXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IF9hcHBzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogUmVnaXN0ZXJlZCBjb21wb25lbnRzLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmNvbnN0IF9jb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgYmVpbmcgYWRkZWQgdG8gdGhpcyBhcHAncyBjb250YWluZXJcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGFwcC5jb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZhaWxlZCB0byByZWdpc3RlciB3aXRoIEZpcmViYXNlQXBwICR7YXBwLm5hbWV9YCwgZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICBhcHAuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyXHJcbiAqIEByZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICBpZiAoX2NvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9LmApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIF9jb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xyXG4gICAgLy8gYWRkIHRoZSBjb21wb25lbnQgdG8gZXhpc3RpbmcgYXBwIGluc3RhbmNlc1xyXG4gICAgZm9yIChjb25zdCBhcHAgb2YgX2FwcHMudmFsdWVzKCkpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICpcclxuICogQHJldHVybnMgdGhlIHByb3ZpZGVyIGZvciB0aGUgc2VydmljZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkge1xyXG4gICAgY29uc3QgaGVhcnRiZWF0Q29udHJvbGxlciA9IGFwcC5jb250YWluZXJcclxuICAgICAgICAuZ2V0UHJvdmlkZXIoJ2hlYXJ0YmVhdCcpXHJcbiAgICAgICAgLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdENvbnRyb2xsZXIpIHtcclxuICAgICAgICB2b2lkIGhlYXJ0YmVhdENvbnRyb2xsZXIudHJpZ2dlckhlYXJ0YmVhdCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcC5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShhcHAsIG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkuY2xlYXJJbnN0YW5jZShpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG59XHJcbi8qKlxyXG4gKiBUZXN0IG9ubHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2xlYXJDb21wb25lbnRzKCkge1xyXG4gICAgX2NvbXBvbmVudHMuY2xlYXIoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi9dOiBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBpbml0aWFsaXplQXBwKCkgZmlyc3QnLFxyXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgW1wiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcclxuICAgIFtcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBbXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqL106ICdOZWVkIHRvIHByb3ZpZGUgb3B0aW9ucywgd2hlbiBub3QgYmVpbmcgZGVwbG95ZWQgdG8gaG9zdGluZyB2aWEgc291cmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcclxuICAgIFtcImlkYi1vcGVuXCIgLyogQXBwRXJyb3IuSURCX09QRU4gKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gb3BlbmluZyBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gcmVhZGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItc2V0XCIgLyogQXBwRXJyb3IuSURCX1dSSVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIHdyaXRpbmcgdG8gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1kZWxldGVcIiAvKiBBcHBFcnJvci5JREJfREVMRVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIGRlbGV0aW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAoX29wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICBsZXQgb3B0aW9ucyA9IF9vcHRpb25zO1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEFwcEVycm9yLkJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSBnZXREZWZhdWx0QXBwQ29uZmlnKCkpO1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqLyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCAmJiBuYW1lID09PSBERUZBVUxUX0VOVFJZX05BTUUgJiYgZ2V0RGVmYXVsdEFwcENvbmZpZygpKSB7XHJcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemVBcHAoKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHA7XHJcbn1cclxuLyoqXHJcbiAqIEEgKHJlYWQtb25seSkgYXJyYXkgb2YgYWxsIGluaXRpYWxpemVkIGFwcHMuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShfYXBwcy52YWx1ZXMoKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcclxuICogc2VydmljZXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZGVsZXRlQXBwKGFwcClcclxuICogICAudGhlbihmdW5jdGlvbigpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiQXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gKiAgIH0pXHJcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGRlbGV0aW5nIGFwcDpcIiwgZXJyb3IpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwKGFwcCkge1xyXG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhcHAuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcnMoKVxyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKSk7XHJcbiAgICAgICAgYXBwLmlzRGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhIGxpYnJhcnkncyBuYW1lIGFuZCB2ZXJzaW9uIGZvciBwbGF0Zm9ybSBsb2dnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcGFyYW0gbGlicmFyeSAtIE5hbWUgb2YgMXAgb3IgM3AgbGlicmFyeSAoZS5nLiBmaXJlc3RvcmUsIGFuZ3VsYXJmaXJlKVxyXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXHJcbiAqIEBwYXJhbSB2YXJpYW50IC0gQnVuZGxlIHZhcmlhbnQsIGUuZy4sIG5vZGUsIHJuLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcclxuICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgbGV0IGxpYnJhcnkgPSAoX2EgPSBQTEFURk9STV9MT0dfU1RSSU5HW2xpYnJhcnlLZXlPck5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBsaWJyYXJ5S2V5T3JOYW1lO1xyXG4gICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBpZiAobGlicmFyeU1pc21hdGNoIHx8IHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBbXHJcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoYCR7bGlicmFyeX0tdmVyc2lvbmAsICgpID0+ICh7IGxpYnJhcnksIHZlcnNpb24gfSksIFwiVkVSU0lPTlwiIC8qIENvbXBvbmVudFR5cGUuVkVSU0lPTiAqLykpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBoYW5kbGVyIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICogQHBhcmFtIGxvZ0NhbGxiYWNrIC0gQW4gb3B0aW9uYWwgY3VzdG9tIGxvZyBoYW5kbGVyIHRoYXQgZXhlY3V0ZXMgdXNlciBjb2RlIHdoZW5ldmVyXHJcbiAqIHRoZSBGaXJlYmFzZSBTREsgbWFrZXMgYSBsb2dnaW5nIGNhbGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uTG9nKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfTE9HX0FSR1VNRU5UICovKTtcclxuICAgIH1cclxuICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgbGV2ZWwgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgYXJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgaW5mb2AsIGVycm9ycyBhcmUgbG9nZ2VkLCBidXQgYGRlYnVnYCBhbmRcclxuICogYHZlcmJvc2VgIGxvZ3MgYXJlIG5vdCkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxvZ0xldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxvZ0xldmVsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1kYXRhYmFzZSc7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBTVE9SRV9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1zdG9yZSc7XHJcbmxldCBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQl9OQU1FLCBEQl9WRVJTSU9OLCB7XHJcbiAgICAgICAgICAgIHVwZ3JhZGU6IChkYiwgb2xkVmVyc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cclxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJcclxuICAgICAgICAgICAgLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUpXHJcbiAgICAgICAgICAgIC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKVxyXG4gICAgICAgICAgICAuZ2V0KGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKGFwcCwgaGVhcnRiZWF0T2JqZWN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQoaGVhcnRiZWF0T2JqZWN0LCBjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgICAgIGF3YWl0IHR4LmRvbmU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNvbXB1dGVLZXkoYXBwKSB7XHJcbiAgICByZXR1cm4gYCR7YXBwLm5hbWV9ISR7YXBwLm9wdGlvbnMuYXBwSWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBNQVhfSEVBREVSX0JZVEVTID0gMTAyNDtcclxuLy8gMzAgZGF5c1xyXG5jb25zdCBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTID0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBIZWFydGJlYXRTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbi1tZW1vcnkgY2FjaGUgZm9yIGhlYXJ0YmVhdHMsIHVzZWQgYnkgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHRvIGdlbmVyYXRlXHJcbiAgICAgICAgICogdGhlIGhlYWRlciBzdHJpbmcuXHJcbiAgICAgICAgICogU3RvcmVzIG9uZSByZWNvcmQgcGVyIGRhdGUuIFRoaXMgd2lsbCBiZSBjb25zb2xpZGF0ZWQgaW50byB0aGUgc3RhbmRhcmRcclxuICAgICAgICAgKiBmb3JtYXQgb2Ygb25lIHJlY29yZCBwZXIgdXNlciBhZ2VudCBzdHJpbmcgYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBoZWFkZXIuXHJcbiAgICAgICAgICogUG9wdWxhdGVkIGZyb20gaW5kZXhlZERCIHdoZW4gdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGFuZCBzaG91bGRcclxuICAgICAgICAgKiBiZSBrZXB0IGluIHN5bmMgd2l0aCBpbmRleGVkREIuXHJcbiAgICAgICAgICogTGVhdmUgcHVibGljIGZvciBlYXNpZXIgdGVzdGluZy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB0aGlzLl9zdG9yYWdlID0gbmV3IEhlYXJ0YmVhdFN0b3JhZ2VJbXBsKGFwcCk7XHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZSA9IHRoaXMuX3N0b3JhZ2UucmVhZCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgdG8gcmVwb3J0IGEgaGVhcnRiZWF0LiBUaGUgZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZVxyXG4gICAgICogYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgb2JqZWN0LCB1cGRhdGUgaGVhcnRiZWF0c0NhY2hlLCBhbmQgcGVyc2lzdCBpdFxyXG4gICAgICogdG8gSW5kZXhlZERCLlxyXG4gICAgICogTm90ZSB0aGF0IHdlIG9ubHkgc3RvcmUgb25lIGhlYXJ0YmVhdCBwZXIgZGF5LiBTbyBpZiBhIGhlYXJ0YmVhdCBmb3IgdG9kYXkgaXNcclxuICAgICAqIGFscmVhZHkgbG9nZ2VkLCBzdWJzZXF1ZW50IGNhbGxzIHRvIHRoaXMgZnVuY3Rpb24gaW4gdGhlIHNhbWUgZGF5IHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdHJpZ2dlckhlYXJ0YmVhdCgpIHtcclxuICAgICAgICBjb25zdCBwbGF0Zm9ybUxvZ2dlciA9IHRoaXMuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcigncGxhdGZvcm0tbG9nZ2VyJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIFwiRmlyZWJhc2UgdXNlciBhZ2VudFwiIHN0cmluZyBmcm9tIHRoZSBwbGF0Zm9ybSBsb2dnZXJcclxuICAgICAgICAvLyBzZXJ2aWNlLCBub3QgdGhlIGJyb3dzZXIgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBhZ2VudCA9IHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEbyBub3Qgc3RvcmUgYSBoZWFydGJlYXQgaWYgb25lIGlzIGFscmVhZHkgc3RvcmVkIGZvciB0aGlzIGRheVxyXG4gICAgICAgIC8vIG9yIGlmIGEgaGVhZGVyIGhhcyBhbHJlYWR5IGJlZW4gc2VudCB0b2RheS5cclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9PT0gZGF0ZSB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5zb21lKHNpbmdsZURhdGVIZWFydGJlYXQgPT4gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlID09PSBkYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBlbnRyeSBmb3IgdGhpcyBkYXRlLiBDcmVhdGUgb25lLlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5wdXNoKHsgZGF0ZSwgYWdlbnQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBlbnRyaWVzIG9sZGVyIHRoYW4gMzAgZGF5cy5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmZpbHRlcihzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGJUaW1lc3RhbXAgPSBuZXcgRGF0ZShzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpLnZhbHVlT2YoKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vdyAtIGhiVGltZXN0YW1wIDw9IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgd2hpY2ggY2FuIGJlIGF0dGFjaGVkIHRvIHRoZSBoZWFydGJlYXQtc3BlY2lmaWMgaGVhZGVyIGRpcmVjdGx5LlxyXG4gICAgICogSXQgYWxzbyBjbGVhcnMgYWxsIGhlYXJ0YmVhdHMgZnJvbSBtZW1vcnkgYXMgd2VsbCBhcyBpbiBJbmRleGVkREIuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogQ29uc3VtaW5nIHByb2R1Y3QgU0RLcyBzaG91bGQgbm90IHNlbmQgdGhlIGhlYWRlciBpZiB0aGlzIG1ldGhvZFxyXG4gICAgICogcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIC8vIEV4dHJhY3QgYXMgbWFueSBoZWFydGJlYXRzIGZyb20gdGhlIGNhY2hlIGFzIHdpbGwgZml0IHVuZGVyIHRoZSBzaXplIGxpbWl0LlxyXG4gICAgICAgIGNvbnN0IHsgaGVhcnRiZWF0c1RvU2VuZCwgdW5zZW50RW50cmllcyB9ID0gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIodGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlclN0cmluZyA9IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c1RvU2VuZCB9KSk7XHJcbiAgICAgICAgLy8gU3RvcmUgbGFzdCBzZW50IGRhdGUgdG8gcHJldmVudCBhbm90aGVyIGJlaW5nIGxvZ2dlZC9zZW50IGZvciB0aGUgc2FtZSBkYXkuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgaWYgKHVuc2VudEVudHJpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBTdG9yZSBhbnkgdW5zZW50IGVudHJpZXMgaWYgdGhleSBleGlzdC5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB1bnNlbnRFbnRyaWVzO1xyXG4gICAgICAgICAgICAvLyBUaGlzIHNlZW1zIG1vcmUgbGlrZWx5IHRoYW4gZW1wdHlpbmcgdGhlIGFycmF5IChiZWxvdykgdG8gbGVhZCB0byBzb21lIG9kZCBzdGF0ZVxyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgY2FjaGUgaXNuJ3QgZW1wdHkgYW5kIHRoaXMgd2lsbCBiZSBjYWxsZWQgYWdhaW4gb24gdGhlIG5leHQgcmVxdWVzdCxcclxuICAgICAgICAgICAgLy8gYW5kIGlzIHByb2JhYmx5IHNhZmVzdCBpZiB3ZSBhd2FpdCBpdC5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gW107XHJcbiAgICAgICAgICAgIC8vIERvIG5vdCB3YWl0IGZvciB0aGlzLCB0byByZWR1Y2UgbGF0ZW5jeS5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGVhZGVyU3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFVUQ0RhdGVTdHJpbmcoKSB7XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAvLyBSZXR1cm5zIGRhdGUgZm9ybWF0ICdZWVlZLU1NLUREJ1xyXG4gICAgcmV0dXJuIHRvZGF5LnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcihoZWFydGJlYXRzQ2FjaGUsIG1heFNpemUgPSBNQVhfSEVBREVSX0JZVEVTKSB7XHJcbiAgICAvLyBIZWFydGJlYXRzIGdyb3VwZWQgYnkgdXNlciBhZ2VudCBpbiB0aGUgc3RhbmRhcmQgZm9ybWF0IHRvIGJlIHNlbnQgaW5cclxuICAgIC8vIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRzVG9TZW5kID0gW107XHJcbiAgICAvLyBTaW5nbGUgZGF0ZSBmb3JtYXQgaGVhcnRiZWF0cyB0aGF0IGFyZSBub3Qgc2VudC5cclxuICAgIGxldCB1bnNlbnRFbnRyaWVzID0gaGVhcnRiZWF0c0NhY2hlLnNsaWNlKCk7XHJcbiAgICBmb3IgKGNvbnN0IHNpbmdsZURhdGVIZWFydGJlYXQgb2YgaGVhcnRiZWF0c0NhY2hlKSB7XHJcbiAgICAgICAgLy8gTG9vayBmb3IgYW4gZXhpc3RpbmcgZW50cnkgd2l0aCB0aGUgc2FtZSB1c2VyIGFnZW50LlxyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdEVudHJ5ID0gaGVhcnRiZWF0c1RvU2VuZC5maW5kKGhiID0+IGhiLmFnZW50ID09PSBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50KTtcclxuICAgICAgICBpZiAoIWhlYXJ0YmVhdEVudHJ5KSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGVudHJ5IGZvciB0aGlzIHVzZXIgYWdlbnQgZXhpc3RzLCBjcmVhdGUgb25lLlxyXG4gICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW3NpbmdsZURhdGVIZWFydGJlYXQuZGF0ZV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgaGVhcnRiZWF0XHJcbiAgICAgICAgICAgICAgICAvLyBlbnRyeSBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucHVzaChzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBkYXRlXHJcbiAgICAgICAgICAgIC8vIGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUG9wIHVuc2VudCBlbnRyeSBmcm9tIHF1ZXVlLiAoU2tpcHBlZCBpZiBhZGRpbmcgdGhlIGVudHJ5IGV4Y2VlZGVkXHJcbiAgICAgICAgLy8gcXVvdGEgYW5kIHRoZSBsb29wIGJyZWFrcyBlYXJseS4pXHJcbiAgICAgICAgdW5zZW50RW50cmllcyA9IHVuc2VudEVudHJpZXMuc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQsXHJcbiAgICAgICAgdW5zZW50RW50cmllc1xyXG4gICAgfTtcclxufVxyXG5jbGFzcyBIZWFydGJlYXRTdG9yYWdlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlID0gdGhpcy5ydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCkge1xyXG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgYWxsIGhlYXJ0YmVhdHMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJlYWQoKSB7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiSGVhcnRiZWF0T2JqZWN0ID0gYXdhaXQgcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkYkhlYXJ0YmVhdE9iamVjdCB8fCB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiMTAuMS4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cblxudmFyIGssZ29vZz1nb29nfHx7fSxsPWNvbW1vbmpzR2xvYmFsfHxzZWxmO2Z1bmN0aW9uIGFhKGEpe3ZhciBiPXR5cGVvZiBhO2I9XCJvYmplY3RcIiE9Yj9iOmE/QXJyYXkuaXNBcnJheShhKT9cImFycmF5XCI6YjpcIm51bGxcIjtyZXR1cm4gXCJhcnJheVwiPT1ifHxcIm9iamVjdFwiPT1iJiZcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGh9ZnVuY3Rpb24gcChhKXt2YXIgYj10eXBlb2YgYTtyZXR1cm4gXCJvYmplY3RcIj09YiYmbnVsbCE9YXx8XCJmdW5jdGlvblwiPT1ifWZ1bmN0aW9uIGJhKGEpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjYSkmJmFbY2FdfHwoYVtjYV09KytkYSl9dmFyIGNhPVwiY2xvc3VyZV91aWRfXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCksZGE9MDtmdW5jdGlvbiBlYShhLGIsYyl7cmV0dXJuIGEuY2FsbC5hcHBseShhLmJpbmQsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGZhKGEsYixjKXtpZighYSl0aHJvdyBFcnJvcigpO2lmKDI8YXJndW1lbnRzLmxlbmd0aCl7dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoZSxkKTtyZXR1cm4gYS5hcHBseShiLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHEoYSxiLGMpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kJiYtMSE9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQudG9TdHJpbmcoKS5pbmRleE9mKFwibmF0aXZlIGNvZGVcIik/cT1lYTpxPWZhO3JldHVybiBxLmFwcGx5KG51bGwsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGhhKGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpO3JldHVybiBhLmFwcGx5KHRoaXMsZCl9fWZ1bmN0aW9uIHIoYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EuJD1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EuYWM9ZnVuY3Rpb24oZCxlLGYpe2Zvcih2YXIgaD1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLG49MjtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWhbbi0yXT1hcmd1bWVudHNbbl07cmV0dXJuIGIucHJvdG90eXBlW2VdLmFwcGx5KGQsaCl9O31mdW5jdGlvbiB2KCl7dGhpcy5zPXRoaXMuczt0aGlzLm89dGhpcy5vO312YXIgaWE9MDt2LnByb3RvdHlwZS5zPSExO3YucHJvdG90eXBlLnNhPWZ1bmN0aW9uKCl7aWYoIXRoaXMucyYmKHRoaXMucz0hMCx0aGlzLk4oKSwwIT1pYSkpe2JhKHRoaXMpO319O3YucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtpZih0aGlzLm8pZm9yKDt0aGlzLm8ubGVuZ3RoOyl0aGlzLm8uc2hpZnQoKSgpO307Y29uc3Qga2E9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChhLGIsdm9pZCAwKX06ZnVuY3Rpb24oYSxiKXtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpcmV0dXJuIFwic3RyaW5nXCIhPT10eXBlb2YgYnx8MSE9Yi5sZW5ndGg/LTE6YS5pbmRleE9mKGIsMCk7Zm9yKGxldCBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYyBpbiBhJiZhW2NdPT09YilyZXR1cm4gYztyZXR1cm4gLTF9O2Z1bmN0aW9uIG1hKGEpe2NvbnN0IGI9YS5sZW5ndGg7aWYoMDxiKXtjb25zdCBjPUFycmF5KGIpO2ZvcihsZXQgZD0wO2Q8YjtkKyspY1tkXT1hW2RdO3JldHVybiBjfXJldHVybiBbXX1cbmZ1bmN0aW9uIG5hKGEsYil7Zm9yKGxldCBjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyl7Y29uc3QgZD1hcmd1bWVudHNbY107aWYoYWEoZCkpe2NvbnN0IGU9YS5sZW5ndGh8fDAsZj1kLmxlbmd0aHx8MDthLmxlbmd0aD1lK2Y7Zm9yKGxldCBoPTA7aDxmO2grKylhW2UraF09ZFtoXTt9ZWxzZSBhLnB1c2goZCk7fX1mdW5jdGlvbiB3KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO313LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307dmFyIG9hPWZ1bmN0aW9uKCl7aWYoIWwuYWRkRXZlbnRMaXN0ZW5lcnx8IU9iamVjdC5kZWZpbmVQcm9wZXJ0eSlyZXR1cm4gITE7dmFyIGE9ITEsYj1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe2E9ITA7fX0pO3RyeXtsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsKCk9Pnt9LGIpLGwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RcIiwoKT0+e30sYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB4KGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX1mdW5jdGlvbiBwYSgpe3ZhciBhPWwubmF2aWdhdG9yO3JldHVybiBhJiYoYT1hLnVzZXJBZ2VudCk/YTpcIlwifWZ1bmN0aW9uIHkoYSl7cmV0dXJuIC0xIT1wYSgpLmluZGV4T2YoYSl9ZnVuY3Rpb24gcWEoYSl7cWFbXCIgXCJdKGEpO3JldHVybiBhfXFhW1wiIFwiXT1mdW5jdGlvbigpe307ZnVuY3Rpb24gcmEoYSxiKXt2YXIgYz1zYTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsYSk/Y1thXTpjW2FdPWIoYSl9dmFyIHRhPXkoXCJPcGVyYVwiKSx6PXkoXCJUcmlkZW50XCIpfHx5KFwiTVNJRVwiKSx1YT15KFwiRWRnZVwiKSx2YT11YXx8eix3YT15KFwiR2Vja29cIikmJiEoLTEhPXBhKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwid2Via2l0XCIpJiYheShcIkVkZ2VcIikpJiYhKHkoXCJUcmlkZW50XCIpfHx5KFwiTVNJRVwiKSkmJiF5KFwiRWRnZVwiKSx4YT0tMSE9cGEoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJ3ZWJraXRcIikmJiF5KFwiRWRnZVwiKTtmdW5jdGlvbiB5YSgpe3ZhciBhPWwuZG9jdW1lbnQ7cmV0dXJuIGE/YS5kb2N1bWVudE1vZGU6dm9pZCAwfXZhciB6YTtcbmE6e3ZhciBBYT1cIlwiLEJhPWZ1bmN0aW9uKCl7dmFyIGE9cGEoKTtpZih3YSlyZXR1cm4gL3J2OihbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKHVhKXJldHVybiAvRWRnZVxcLyhbXFxkXFwuXSspLy5leGVjKGEpO2lmKHopcmV0dXJuIC9cXGIoPzpNU0lFfHJ2KVs6IF0oW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZih4YSlyZXR1cm4gL1dlYktpdFxcLyhcXFMrKS8uZXhlYyhhKTtpZih0YSlyZXR1cm4gLyg/OlZlcnNpb24pWyBcXC9dPyhcXFMrKS8uZXhlYyhhKX0oKTtCYSYmKEFhPUJhP0JhWzFdOlwiXCIpO2lmKHope3ZhciBDYT15YSgpO2lmKG51bGwhPUNhJiZDYT5wYXJzZUZsb2F0KEFhKSl7emE9U3RyaW5nKENhKTticmVhayBhfX16YT1BYTt9dmFyIERhO2lmKGwuZG9jdW1lbnQmJnope3ZhciBFYT15YSgpO0RhPUVhP0VhOnBhcnNlSW50KHphLDEwKXx8dm9pZCAwO31lbHNlIERhPXZvaWQgMDt2YXIgRmE9RGE7ZnVuY3Rpb24gQShhLGIpe3cuY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZih3YSl7YTp7dHJ5e3FhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpHYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLiQuaC5jYWxsKHRoaXMpO319cihBLHcpO3ZhciBHYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS4kLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBIYT1cImNsb3N1cmVfbGlzdGVuYWJsZV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCk7dmFyIElhPTA7ZnVuY3Rpb24gSmEoYSxiLGMsZCxlKXt0aGlzLmxpc3RlbmVyPWE7dGhpcy5wcm94eT1udWxsO3RoaXMuc3JjPWI7dGhpcy50eXBlPWM7dGhpcy5jYXB0dXJlPSEhZDt0aGlzLmxhPWU7dGhpcy5rZXk9KytJYTt0aGlzLmZhPXRoaXMuaWE9ITE7fWZ1bmN0aW9uIEthKGEpe2EuZmE9ITA7YS5saXN0ZW5lcj1udWxsO2EucHJveHk9bnVsbDthLnNyYz1udWxsO2EubGE9bnVsbDt9ZnVuY3Rpb24gTmEoYSxiLGMpe2Zvcihjb25zdCBkIGluIGEpYi5jYWxsKGMsYVtkXSxkLGEpO31mdW5jdGlvbiBPYShhLGIpe2Zvcihjb25zdCBjIGluIGEpYi5jYWxsKHZvaWQgMCxhW2NdLGMsYSk7fWZ1bmN0aW9uIFBhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9Y29uc3QgUWE9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gUmEoYSxiKXtsZXQgYyxkO2ZvcihsZXQgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2ZvcihsZXQgZj0wO2Y8UWEubGVuZ3RoO2YrKyljPVFhW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIFNhKGEpe3RoaXMuc3JjPWE7dGhpcy5nPXt9O3RoaXMuaD0wO31TYS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS50b1N0cmluZygpO2E9dGhpcy5nW2ZdO2F8fChhPXRoaXMuZ1tmXT1bXSx0aGlzLmgrKyk7dmFyIGg9VGEoYSxiLGQsZSk7LTE8aD8oYj1hW2hdLGN8fChiLmlhPSExKSk6KGI9bmV3IEphKGIsdGhpcy5zcmMsZiwhIWQsZSksYi5pYT1jLGEucHVzaChiKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIFVhKGEsYil7dmFyIGM9Yi50eXBlO2lmKGMgaW4gYS5nKXt2YXIgZD1hLmdbY10sZT1rYShkLGIpLGY7KGY9MDw9ZSkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKEthKGIpLDA9PWEuZ1tjXS5sZW5ndGgmJihkZWxldGUgYS5nW2NdLGEuaC0tKSk7fX1cbmZ1bmN0aW9uIFRhKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLmZhJiZmLmxpc3RlbmVyPT1iJiZmLmNhcHR1cmU9PSEhYyYmZi5sYT09ZClyZXR1cm4gZX1yZXR1cm4gLTF9dmFyIFZhPVwiY2xvc3VyZV9sbV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksV2E9e307ZnVuY3Rpb24gWWEoYSxiLGMsZCxlKXtpZihkJiZkLm9uY2UpcmV0dXJuIFphKGEsYixjLGQsZSk7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspWWEoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPSRhKGMpO3JldHVybiBhJiZhW0hhXT9hLk8oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmFiKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBhYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1iYihhKTtufHwoYVtWYV09bj1uZXcgU2EoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9Y2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKW9hfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGRiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBjYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfWNvbnN0IGI9ZWI7cmV0dXJuIGF9ZnVuY3Rpb24gWmEoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylaYShhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9JGEoYyk7cmV0dXJuIGEmJmFbSGFdP2EuUChiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6YWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylmYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz0kYShjKSxhJiZhW0hhXSk/KGE9YS5pLGI9U3RyaW5nKGIpLnRvU3RyaW5nKCksYiBpbiBhLmcmJihmPWEuZ1tiXSxjPVRhKGYsYyxkLGUpLC0xPGMmJihLYShmW2NdKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZixjLDEpLDA9PWYubGVuZ3RoJiYoZGVsZXRlIGEuZ1tiXSxhLmgtLSkpKSk6YSYmKGE9YmIoYSkpJiYoYj1hLmdbYi50b1N0cmluZygpXSxhPS0xLGImJihhPVRhKGIsYyxkLGUpKSwoYz0tMTxhP2JbYV06bnVsbCkmJmdiKGMpKTt9XG5mdW5jdGlvbiBnYihhKXtpZihcIm51bWJlclwiIT09dHlwZW9mIGEmJmEmJiFhLmZhKXt2YXIgYj1hLnNyYztpZihiJiZiW0hhXSlVYShiLmksYSk7ZWxzZSB7dmFyIGM9YS50eXBlLGQ9YS5wcm94eTtiLnJlbW92ZUV2ZW50TGlzdGVuZXI/Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZCxhLmNhcHR1cmUpOmIuZGV0YWNoRXZlbnQ/Yi5kZXRhY2hFdmVudChkYihjKSxkKTpiLmFkZExpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyKGQpOyhjPWJiKGIpKT8oVWEoYyxhKSwwPT1jLmgmJihjLnNyYz1udWxsLGJbVmFdPW51bGwpKTpLYShhKTt9fX1mdW5jdGlvbiBkYihhKXtyZXR1cm4gYSBpbiBXYT9XYVthXTpXYVthXT1cIm9uXCIrYX1mdW5jdGlvbiBlYihhLGIpe2lmKGEuZmEpYT0hMDtlbHNlIHtiPW5ldyBBKGIsdGhpcyk7dmFyIGM9YS5saXN0ZW5lcixkPWEubGF8fGEuc3JjO2EuaWEmJmdiKGEpO2E9Yy5jYWxsKGQsYik7fXJldHVybiBhfVxuZnVuY3Rpb24gYmIoYSl7YT1hW1ZhXTtyZXR1cm4gYSBpbnN0YW5jZW9mIFNhP2E6bnVsbH12YXIgaGI9XCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApO2Z1bmN0aW9uICRhKGEpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKXJldHVybiBhO2FbaGJdfHwoYVtoYl09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVtoYl19ZnVuY3Rpb24gQigpe3YuY2FsbCh0aGlzKTt0aGlzLmk9bmV3IFNhKHRoaXMpO3RoaXMuUz10aGlzO3RoaXMuSj1udWxsO31yKEIsdik7Qi5wcm90b3R5cGVbSGFdPSEwO0IucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7ZmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gQyhhLGIpe3ZhciBjLGQ9YS5KO2lmKGQpZm9yKGM9W107ZDtkPWQuSiljLnB1c2goZCk7YT1hLlM7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHcoYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB3KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgdyhkLGEpO1JhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1pYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1pYihoLGQsITAsYikmJmU7ZT1pYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1pYihoLGQsITEsYikmJmU7fVxuQi5wcm90b3R5cGUuTj1mdW5jdGlvbigpe0IuJC5OLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKUthKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLko9bnVsbDt9O0IucHJvdG90eXBlLk89ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qi5wcm90b3R5cGUuUD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIGliKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguZmEmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix0PWgubGF8fGguc3JjO2guaWEmJlVhKGEuaSxoKTtlPSExIT09bi5jYWxsKHQsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgamI9bC5KU09OLnN0cmluZ2lmeTtjbGFzcyBrYntjb25zdHJ1Y3RvcihhLGIpe3RoaXMuaT1hO3RoaXMuaj1iO3RoaXMuaD0wO3RoaXMuZz1udWxsO31nZXQoKXtsZXQgYTswPHRoaXMuaD8odGhpcy5oLS0sYT10aGlzLmcsdGhpcy5nPWEubmV4dCxhLm5leHQ9bnVsbCk6YT10aGlzLmkoKTtyZXR1cm4gYX19ZnVuY3Rpb24gbGIoKXt2YXIgYT1tYjtsZXQgYj1udWxsO2EuZyYmKGI9YS5nLGEuZz1hLmcubmV4dCxhLmd8fChhLmg9bnVsbCksYi5uZXh0PW51bGwpO3JldHVybiBifWNsYXNzIG5ie2NvbnN0cnVjdG9yKCl7dGhpcy5oPXRoaXMuZz1udWxsO31hZGQoYSxiKXtjb25zdCBjPW9iLmdldCgpO2Muc2V0KGEsYik7dGhpcy5oP3RoaXMuaC5uZXh0PWM6dGhpcy5nPWM7dGhpcy5oPWM7fX12YXIgb2I9bmV3IGtiKCgpPT5uZXcgcGIsYT0+YS5yZXNldCgpKTtjbGFzcyBwYntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiBxYihhKXt2YXIgYj0xO2E9YS5zcGxpdChcIjpcIik7Y29uc3QgYz1bXTtmb3IoOzA8YiYmYS5sZW5ndGg7KWMucHVzaChhLnNoaWZ0KCkpLGItLTthLmxlbmd0aCYmYy5wdXNoKGEuam9pbihcIjpcIikpO3JldHVybiBjfWZ1bmN0aW9uIHJiKGEpe2wuc2V0VGltZW91dCgoKT0+e3Rocm93IGE7fSwwKTt9bGV0IHNiLHRiPSExLG1iPW5ldyBuYix2Yj0oKT0+e2NvbnN0IGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtzYj0oKT0+e2EudGhlbih1Yik7fTt9O3ZhciB1Yj0oKT0+e2Zvcih2YXIgYTthPWxiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7cmIoYyk7fXZhciBiPW9iO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fXRiPSExO307ZnVuY3Rpb24gd2IoYSxiKXtCLmNhbGwodGhpcyk7dGhpcy5oPWF8fDE7dGhpcy5nPWJ8fGw7dGhpcy5qPXEodGhpcy5xYix0aGlzKTt0aGlzLmw9RGF0ZS5ub3coKTt9cih3YixCKTtrPXdiLnByb3RvdHlwZTtrLmdhPSExO2suVD1udWxsO2sucWI9ZnVuY3Rpb24oKXtpZih0aGlzLmdhKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMubDswPGEmJmE8LjgqdGhpcy5oP3RoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oLWEpOih0aGlzLlQmJih0aGlzLmcuY2xlYXJUaW1lb3V0KHRoaXMuVCksdGhpcy5UPW51bGwpLEModGhpcyxcInRpY2tcIiksdGhpcy5nYSYmKHhiKHRoaXMpLHRoaXMuc3RhcnQoKSkpO319O2suc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmdhPSEwO3RoaXMuVHx8KHRoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oKSx0aGlzLmw9RGF0ZS5ub3coKSk7fTtcbmZ1bmN0aW9uIHhiKGEpe2EuZ2E9ITE7YS5UJiYoYS5nLmNsZWFyVGltZW91dChhLlQpLGEuVD1udWxsKTt9ay5OPWZ1bmN0aW9uKCl7d2IuJC5OLmNhbGwodGhpcyk7eGIodGhpcyk7ZGVsZXRlIHRoaXMuZzt9O2Z1bmN0aW9uIHliKGEsYixjKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSljJiYoYT1xKGEsYykpO2Vsc2UgaWYoYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5oYW5kbGVFdmVudClhPXEoYS5oYW5kbGVFdmVudCxhKTtlbHNlIHRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTtyZXR1cm4gMjE0NzQ4MzY0NzxOdW1iZXIoYik/LTE6bC5zZXRUaW1lb3V0KGEsYnx8MCl9ZnVuY3Rpb24gemIoYSl7YS5nPXliKCgpPT57YS5nPW51bGw7YS5pJiYoYS5pPSExLHpiKGEpKTt9LGEuaik7Y29uc3QgYj1hLmg7YS5oPW51bGw7YS5tLmFwcGx5KG51bGwsYik7fWNsYXNzIEFiIGV4dGVuZHMgdntjb25zdHJ1Y3RvcihhLGIpe3N1cGVyKCk7dGhpcy5tPWE7dGhpcy5qPWI7dGhpcy5oPW51bGw7dGhpcy5pPSExO3RoaXMuZz1udWxsO31sKGEpe3RoaXMuaD1hcmd1bWVudHM7dGhpcy5nP3RoaXMuaT0hMDp6Yih0aGlzKTt9Tigpe3N1cGVyLk4oKTt0aGlzLmcmJihsLmNsZWFyVGltZW91dCh0aGlzLmcpLHRoaXMuZz1udWxsLHRoaXMuaT0hMSx0aGlzLmg9bnVsbCk7fX1mdW5jdGlvbiBCYihhKXt2LmNhbGwodGhpcyk7dGhpcy5oPWE7dGhpcy5nPXt9O31yKEJiLHYpO3ZhciBDYj1bXTtmdW5jdGlvbiBEYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKENiWzBdPWMudG9TdHJpbmcoKSksYz1DYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPVlhKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gRmIoYSl7TmEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZnYihiKTt9LGEpO2EuZz17fTt9QmIucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtCYi4kLk4uY2FsbCh0aGlzKTtGYih0aGlzKTt9O0JiLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIEdiKCl7dGhpcy5nPSEwO31HYi5wcm90b3R5cGUuRWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBIYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHQ9MDt0PG4ubGVuZ3RoO3QrKyl7dmFyIG09blt0XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHU9bVswXTttPW1bMV07dmFyIEw9dS5zcGxpdChcIl9cIik7aD0yPD1MLmxlbmd0aCYmXCJ0eXBlXCI9PUxbMV0/aCsodStcIj1cIittK1wiJlwiKTpoKyh1K1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIEliKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBEKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK0piKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBLYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9R2IucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gSmIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIGpiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgRT17fSxMYj1udWxsO2Z1bmN0aW9uIE1iKCl7cmV0dXJuIExiPUxifHxuZXcgQn1FLlRhPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gTmIoYSl7dy5jYWxsKHRoaXMsRS5UYSxhKTt9cihOYix3KTtmdW5jdGlvbiBPYihhKXtjb25zdCBiPU1iKCk7QyhiLG5ldyBOYihiKSk7fUUuU1RBVF9FVkVOVD1cInN0YXRldmVudFwiO2Z1bmN0aW9uIFBiKGEsYil7dy5jYWxsKHRoaXMsRS5TVEFUX0VWRU5ULGEpO3RoaXMuc3RhdD1iO31yKFBiLHcpO2Z1bmN0aW9uIEYoYSl7Y29uc3QgYj1NYigpO0MoYixuZXcgUGIoYixhKSk7fUUuVWE9XCJ0aW1pbmdldmVudFwiO2Z1bmN0aW9uIFFiKGEsYil7dy5jYWxsKHRoaXMsRS5VYSxhKTt0aGlzLnNpemU9Yjt9cihRYix3KTtcbmZ1bmN0aW9uIFJiKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBTYj17Tk9fRVJST1I6MCxyYjoxLEViOjIsRGI6Myx5Yjo0LENiOjUsRmI6NixRYTo3LFRJTUVPVVQ6OCxJYjo5fTt2YXIgVGI9e3diOlwiY29tcGxldGVcIixTYjpcInN1Y2Nlc3NcIixSYTpcImVycm9yXCIsUWE6XCJhYm9ydFwiLEtiOlwicmVhZHlcIixMYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEdiOlwiaW5jcmVtZW50YWxkYXRhXCIsSmI6XCJwcm9ncmVzc1wiLHpiOlwiZG93bmxvYWRwcm9ncmVzc1wiLCRiOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gVWIoKXt9VWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBWYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiBXYigpe312YXIgWGI9e09QRU46XCJhXCIsdmI6XCJiXCIsUmE6XCJjXCIsSGI6XCJkXCJ9O2Z1bmN0aW9uIFliKCl7dy5jYWxsKHRoaXMsXCJkXCIpO31yKFliLHcpO2Z1bmN0aW9uIFpiKCl7dy5jYWxsKHRoaXMsXCJjXCIpO31yKFpiLHcpO3ZhciAkYjtmdW5jdGlvbiBhYygpe31yKGFjLFViKTthYy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9O2FjLnByb3RvdHlwZS5pPWZ1bmN0aW9uKCl7cmV0dXJuIHt9fTskYj1uZXcgYWM7ZnVuY3Rpb24gYmMoYSxiLGMsZCl7dGhpcy5sPWE7dGhpcy5qPWI7dGhpcy5tPWM7dGhpcy5XPWR8fDE7dGhpcy5VPW5ldyBCYih0aGlzKTt0aGlzLlA9Y2M7YT12YT8xMjU6dm9pZCAwO3RoaXMuVj1uZXcgd2IoYSk7dGhpcy5JPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuTD10aGlzLkc9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRj1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5jYT0tMTt0aGlzLko9ITE7dGhpcy5PPTA7dGhpcy5NPW51bGw7dGhpcy5iYT10aGlzLks9dGhpcy5hYT10aGlzLlM9ITE7dGhpcy5oPW5ldyBkYzt9ZnVuY3Rpb24gZGMoKXt0aGlzLmk9bnVsbDt0aGlzLmc9XCJcIjt0aGlzLmg9ITE7fXZhciBjYz00NUUzLGVjPXt9LGZjPXt9O2s9YmMucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gZ2MoYSxiLGMpe2EuTD0xO2Eudj1oYyhHKGIpKTthLnM9YzthLlM9ITA7aWMoYSxudWxsKTt9ZnVuY3Rpb24gaWMoYSxiKXthLkc9RGF0ZS5ub3coKTtqYyhhKTthLkE9RyhhLnYpO3ZhciBjPWEuQSxkPWEuVztBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7a2MoYy5pLFwidFwiLGQpO2EuQz0wO2M9YS5sLko7YS5oPW5ldyBkYzthLmc9bGMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5NPW5ldyBBYihxKGEuUGEsYSxhLmcpLGEuTykpO0RiKGEuVSxhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5uYik7Yj1hLkk/UGEoYS5JKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5oYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5oYShhLkEsYS51LG51bGwsYikpO09iKCk7SGIoYS5qLGEudSxhLkEsYS5tLGEuVyxhLnMpO31cbmsubmI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTTtiJiYzPT1IKGEpP2IubCgpOnRoaXMuUGEoYSk7fTtcbmsuUGE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCB1PUgodGhpcy5nKTt2YXIgYj10aGlzLmcuSWEoKTtjb25zdCBMPXRoaXMuZy5kYSgpO2lmKCEoMz51KSYmKDMhPXV8fHZhfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmphKCl8fG1jKHRoaXMuZykpKSl7dGhpcy5KfHw0IT11fHw3PT1ifHwoOD09Ynx8MD49TD9PYigzKTpPYigyKSk7bmModGhpcyk7dmFyIGM9dGhpcy5nLmRhKCk7dGhpcy5jYT1jO2I6aWYob2ModGhpcykpe3ZhciBkPW1jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09SCh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7SSh0aGlzKTtwYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmphKCk7dGhpcy5pPTIwMD09YztJYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5XLHUsYyk7aWYodGhpcy5pKXtpZih0aGlzLmFhJiYhdGhpcy5LKXtiOntpZih0aGlzLmcpe3ZhciBuLHQ9dGhpcy5nO2lmKChuPXQuZz90LmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKTpudWxsKSYmIXgobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRCh0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5LPSEwLHFjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0YoMTIpO0kodGhpcyk7cGModGhpcyk7YnJlYWsgYX19dGhpcy5TPyhyYyh0aGlzLHUsaCksdmEmJnRoaXMuaSYmMz09dSYmKERiKHRoaXMuVSx0aGlzLlYsXCJ0aWNrXCIsdGhpcy5tYiksXG50aGlzLlYuc3RhcnQoKSkpOihEKHRoaXMuaix0aGlzLm0saCxudWxsKSxxYyh0aGlzLGgpKTs0PT11JiZJKHRoaXMpO3RoaXMuaSYmIXRoaXMuSiYmKDQ9PXU/c2ModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsamModGhpcykpKTt9ZWxzZSB0Yyh0aGlzLmcpLDQwMD09YyYmMDxoLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT8odGhpcy5vPTMsRigxMikpOih0aGlzLm89MCxGKDEzKSksSSh0aGlzKSxwYyh0aGlzKTt9fX1jYXRjaCh1KXt9ZmluYWxseXt9fTtmdW5jdGlvbiBvYyhhKXtyZXR1cm4gYS5nP1wiR0VUXCI9PWEudSYmMiE9YS5MJiZhLmwuSGE6ITF9XG5mdW5jdGlvbiByYyhhLGIsYyl7bGV0IGQ9ITAsZTtmb3IoOyFhLkomJmEuQzxjLmxlbmd0aDspaWYoZT11YyhhLGMpLGU9PWZjKXs0PT1iJiYoYS5vPTQsRigxNCksZD0hMSk7RChhLmosYS5tLG51bGwsXCJbSW5jb21wbGV0ZSBSZXNwb25zZV1cIik7YnJlYWt9ZWxzZSBpZihlPT1lYyl7YS5vPTQ7RigxNSk7RChhLmosYS5tLGMsXCJbSW52YWxpZCBDaHVua11cIik7ZD0hMTticmVha31lbHNlIEQoYS5qLGEubSxlLG51bGwpLHFjKGEsZSk7b2MoYSkmJmUhPWZjJiZlIT1lYyYmKGEuaC5nPVwiXCIsYS5DPTApOzQhPWJ8fDAhPWMubGVuZ3RofHxhLmguaHx8KGEubz0xLEYoMTYpLGQ9ITEpO2EuaT1hLmkmJmQ7ZD8wPGMubGVuZ3RoJiYhYS5iYSYmKGEuYmE9ITAsYj1hLmwsYi5nPT1hJiZiLmNhJiYhYi5NJiYoYi5sLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHZjKGIpLGIuTT0hMCxGKDExKSkpOihEKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksSShhKSxwYyhhKSk7fWsubWI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPUgodGhpcy5nKSxiPXRoaXMuZy5qYSgpO3RoaXMuQzxiLmxlbmd0aCYmKG5jKHRoaXMpLHJjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmpjKHRoaXMpKTt9fTtmdW5jdGlvbiB1YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBmYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZWM7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGZjO2I9Yi5zbGljZShkLGQrYyk7YS5DPWQrYztyZXR1cm4gYn1rLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuSj0hMDtJKHRoaXMpO307ZnVuY3Rpb24gamMoYSl7YS5ZPURhdGUubm93KCkrYS5QO3djKGEsYS5QKTt9XG5mdW5jdGlvbiB3YyhhLGIpe2lmKG51bGwhPWEuQil0aHJvdyBFcnJvcihcIldhdGNoRG9nIHRpbWVyIG5vdCBudWxsXCIpO2EuQj1SYihxKGEubGIsYSksYik7fWZ1bmN0aW9uIG5jKGEpe2EuQiYmKGwuY2xlYXJUaW1lb3V0KGEuQiksYS5CPW51bGwpO31rLmxiPWZ1bmN0aW9uKCl7dGhpcy5CPW51bGw7Y29uc3QgYT1EYXRlLm5vdygpOzA8PWEtdGhpcy5ZPyhLYih0aGlzLmosdGhpcy5BKSwyIT10aGlzLkwmJihPYigpLEYoMTcpKSxJKHRoaXMpLHRoaXMubz0yLHBjKHRoaXMpKTp3Yyh0aGlzLHRoaXMuWS1hKTt9O2Z1bmN0aW9uIHBjKGEpezA9PWEubC5IfHxhLkp8fHNjKGEubCxhKTt9ZnVuY3Rpb24gSShhKXtuYyhhKTt2YXIgYj1hLk07YiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYi5zYSYmYi5zYSgpO2EuTT1udWxsO3hiKGEuVik7RmIoYS5VKTthLmcmJihiPWEuZyxhLmc9bnVsbCxiLmFib3J0KCksYi5zYSgpKTt9XG5mdW5jdGlvbiBxYyhhLGIpe3RyeXt2YXIgYz1hLmw7aWYoMCE9Yy5IJiYoYy5nPT1hfHx4YyhjLmksYSkpKWlmKCFhLksmJnhjKGMuaSxhKSYmMz09Yy5IKXt0cnl7dmFyIGQ9Yy5KYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5HKzNFMzxhLkcpeWMoYyksemMoYyk7ZWxzZSBicmVhayBhO0FjKGMpO0YoMTgpO319ZWxzZSBjLkZhPWVbMV0sMDxjLkZhLWMuViYmMzc1MDA+ZVsyXSYmYy5HJiYwPT1jLkEmJiFjLnYmJihjLnY9UmIocShjLmliLGMpLDZFMykpO2lmKDE+PUJjKGMuaSkmJmMub2Epe3RyeXtjLm9hKCk7fWNhdGNoKG0pe31jLm9hPXZvaWQgMDt9fWVsc2UgSihjLDExKTt9ZWxzZSBpZigoYS5LfHxjLmc9PWEpJiZ5YyhjKSwheChiKSlmb3IoZT1jLkphLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO2MuVj1cbm1bMF07bT1tWzFdO2lmKDI9PWMuSClpZihcImNcIj09bVswXSl7Yy5LPW1bMV07Yy5wYT1tWzJdO2NvbnN0IHU9bVszXTtudWxsIT11JiYoYy5yYT11LGMubC5pbmZvKFwiVkVSPVwiK2MucmEpKTtjb25zdCBMPW1bNF07bnVsbCE9TCYmKGMuR2E9TCxjLmwuaW5mbyhcIlNWRVI9XCIrYy5HYSkpO2NvbnN0IExhPW1bNV07bnVsbCE9TGEmJlwibnVtYmVyXCI9PT10eXBlb2YgTGEmJjA8TGEmJihkPTEuNSpMYSxjLkw9ZCxjLmwuaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBsYT1hLmc7aWYobGEpe2NvbnN0IE1hPWxhLmc/bGEuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihNYSl7dmFyIGY9ZC5pO2YuZ3x8LTE9PU1hLmluZGV4T2YoXCJzcGR5XCIpJiYtMT09TWEuaW5kZXhPZihcInF1aWNcIikmJi0xPT1NYS5pbmRleE9mKFwiaDJcIil8fChmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKENjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkYpe2NvbnN0IEViPVxubGEuZz9sYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDtFYiYmKGQuRGE9RWIsSyhkLkksZC5GLEViKSk7fX1jLkg9MztjLmgmJmMuaC5CYSgpO2MuY2EmJihjLlM9RGF0ZS5ub3coKS1hLkcsYy5sLmluZm8oXCJIYW5kc2hha2UgUlRUOiBcIitjLlMrXCJtc1wiKSk7ZD1jO3ZhciBoPWE7ZC53YT1EYyhkLGQuSj9kLnBhOm51bGwsZC5ZKTtpZihoLkspe0VjKGQuaSxoKTt2YXIgbj1oLHQ9ZC5MO3QmJm4uc2V0VGltZW91dCh0KTtuLkImJihuYyhuKSxqYyhuKSk7ZC5nPWg7fWVsc2UgRmMoZCk7MDxjLmoubGVuZ3RoJiZHYyhjKTt9ZWxzZSBcInN0b3BcIiE9bVswXSYmXCJjbG9zZVwiIT1tWzBdfHxKKGMsNyk7ZWxzZSAzPT1jLkgmJihcInN0b3BcIj09bVswXXx8XCJjbG9zZVwiPT1tWzBdP1wic3RvcFwiPT1tWzBdP0ooYyw3KTpIYyhjKTpcIm5vb3BcIiE9bVswXSYmYy5oJiZjLmguQWEobSksYy5BPTApO31PYig0KTt9Y2F0Y2gobSl7fX1mdW5jdGlvbiBJYyhhKXtpZihhLlomJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuWilyZXR1cm4gYS5aKCk7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBNYXAmJmEgaW5zdGFuY2VvZiBNYXB8fFwidW5kZWZpbmVkXCIhPT10eXBlb2YgU2V0JiZhIGluc3RhbmNlb2YgU2V0KXJldHVybiBBcnJheS5mcm9tKGEudmFsdWVzKCkpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihhYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBKYyhhKXtpZihhLnRhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLnRhKXJldHVybiBhLnRhKCk7aWYoIWEuWnx8XCJmdW5jdGlvblwiIT10eXBlb2YgYS5aKXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIE1hcCYmYSBpbnN0YW5jZW9mIE1hcClyZXR1cm4gQXJyYXkuZnJvbShhLmtleXMoKSk7aWYoIShcInVuZGVmaW5lZFwiIT09dHlwZW9mIFNldCYmYSBpbnN0YW5jZW9mIFNldCkpe2lmKGFhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBiPVtdO2E9YS5sZW5ndGg7Zm9yKHZhciBjPTA7YzxhO2MrKyliLnB1c2goYyk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGNvbnN0IGQgaW4gYSliW2MrK109ZDtyZXR1cm4gYn19fVxuZnVuY3Rpb24gS2MoYSxiKXtpZihhLmZvckVhY2gmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZm9yRWFjaClhLmZvckVhY2goYix2b2lkIDApO2Vsc2UgaWYoYWEoYSl8fFwic3RyaW5nXCI9PT10eXBlb2YgYSlBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsYix2b2lkIDApO2Vsc2UgZm9yKHZhciBjPUpjKGEpLGQ9SWMoYSksZT1kLmxlbmd0aCxmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9dmFyIExjPVJlZ0V4cChcIl4oPzooW146Lz8jLl0rKTopPyg/Oi8vKD86KFteXFxcXFxcXFwvPyNdKilAKT8oW15cXFxcXFxcXC8/I10qPykoPzo6KFswLTldKykpPyg/PVtcXFxcXFxcXC8/I118JCkpPyhbXj8jXSspPyg/OlxcXFw/KFteI10qKSk/KD86IyhbXFxcXHNcXFxcU10qKSk/JFwiKTtmdW5jdGlvbiBNYyhhLGIpe2lmKGEpe2E9YS5zcGxpdChcIiZcIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10uaW5kZXhPZihcIj1cIiksZT1udWxsO2lmKDA8PWQpe3ZhciBmPWFbY10uc3Vic3RyaW5nKDAsZCk7ZT1hW2NdLnN1YnN0cmluZyhkKzEpO31lbHNlIGY9YVtjXTtiKGYsZT9kZWNvZGVVUklDb21wb25lbnQoZS5yZXBsYWNlKC9cXCsvZyxcIiBcIikpOlwiXCIpO319fWZ1bmN0aW9uIE0oYSl7dGhpcy5nPXRoaXMucz10aGlzLmo9XCJcIjt0aGlzLm09bnVsbDt0aGlzLm89dGhpcy5sPVwiXCI7dGhpcy5oPSExO2lmKGEgaW5zdGFuY2VvZiBNKXt0aGlzLmg9YS5oO05jKHRoaXMsYS5qKTt0aGlzLnM9YS5zO3RoaXMuZz1hLmc7T2ModGhpcyxhLm0pO3RoaXMubD1hLmw7dmFyIGI9YS5pO3ZhciBjPW5ldyBQYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgTWFwKGIuZyksYy5oPWIuaCk7UWModGhpcyxjKTt0aGlzLm89YS5vO31lbHNlIGEmJihiPVN0cmluZyhhKS5tYXRjaChMYykpPyh0aGlzLmg9ITEsTmModGhpcyxiWzFdfHxcIlwiLCEwKSx0aGlzLnM9UmMoYlsyXXx8XCJcIiksdGhpcy5nPVJjKGJbM118fFwiXCIsITApLE9jKHRoaXMsYls0XSksdGhpcy5sPVJjKGJbNV18fFwiXCIsITApLFFjKHRoaXMsYls2XXx8XCJcIiwhMCksdGhpcy5vPVJjKGJbN118fFwiXCIpKToodGhpcy5oPSExLHRoaXMuaT1uZXcgUGMobnVsbCx0aGlzLmgpKTt9XG5NLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5qO2ImJmEucHVzaChTYyhiLFRjLCEwKSxcIjpcIik7dmFyIGM9dGhpcy5nO2lmKGN8fFwiZmlsZVwiPT1iKWEucHVzaChcIi8vXCIpLChiPXRoaXMucykmJmEucHVzaChTYyhiLFRjLCEwKSxcIkBcIiksYS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYz10aGlzLm0sbnVsbCE9YyYmYS5wdXNoKFwiOlwiLFN0cmluZyhjKSk7aWYoYz10aGlzLmwpdGhpcy5nJiZcIi9cIiE9Yy5jaGFyQXQoMCkmJmEucHVzaChcIi9cIiksYS5wdXNoKFNjKGMsXCIvXCI9PWMuY2hhckF0KDApP1VjOlZjLCEwKSk7KGM9dGhpcy5pLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYyk7KGM9dGhpcy5vKSYmYS5wdXNoKFwiI1wiLFNjKGMsV2MpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtmdW5jdGlvbiBHKGEpe3JldHVybiBuZXcgTShhKX1cbmZ1bmN0aW9uIE5jKGEsYixjKXthLmo9Yz9SYyhiLCEwKTpiO2EuaiYmKGEuaj1hLmoucmVwbGFjZSgvOiQvLFwiXCIpKTt9ZnVuY3Rpb24gT2MoYSxiKXtpZihiKXtiPU51bWJlcihiKTtpZihpc05hTihiKXx8MD5iKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2IpO2EubT1iO31lbHNlIGEubT1udWxsO31mdW5jdGlvbiBRYyhhLGIsYyl7YiBpbnN0YW5jZW9mIFBjPyhhLmk9YixYYyhhLmksYS5oKSk6KGN8fChiPVNjKGIsWWMpKSxhLmk9bmV3IFBjKGIsYS5oKSk7fWZ1bmN0aW9uIEsoYSxiLGMpe2EuaS5zZXQoYixjKTt9ZnVuY3Rpb24gaGMoYSl7SyhhLFwienhcIixNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKV5EYXRlLm5vdygpKS50b1N0cmluZygzNikpO3JldHVybiBhfVxuZnVuY3Rpb24gUmMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFNjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsWmMpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIFpjKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9dmFyIFRjPS9bI1xcL1xcP0BdL2csVmM9L1sjXFw/Ol0vZyxVYz0vWyNcXD9dL2csWWM9L1sjXFw/QF0vZyxXYz0vIy9nO2Z1bmN0aW9uIFBjKGEsYil7dGhpcy5oPXRoaXMuZz1udWxsO3RoaXMuaT1hfHxudWxsO3RoaXMuaj0hIWI7fVxuZnVuY3Rpb24gTihhKXthLmd8fChhLmc9bmV3IE1hcCxhLmg9MCxhLmkmJk1jKGEuaSxmdW5jdGlvbihiLGMpe2EuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSksYyk7fSkpO31rPVBjLnByb3RvdHlwZTtrLmFkZD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7dmFyIGM9dGhpcy5nLmdldChhKTtjfHx0aGlzLmcuc2V0KGEsYz1bXSk7Yy5wdXNoKGIpO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gJGMoYSxiKXtOKGEpO2I9TyhhLGIpO2EuZy5oYXMoYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGEuZy5kZWxldGUoYikpO31mdW5jdGlvbiBhZChhLGIpe04oYSk7Yj1PKGEsYik7cmV0dXJuIGEuZy5oYXMoYil9XG5rLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtOKHRoaXMpO3RoaXMuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EuY2FsbChiLGUsZCx0aGlzKTt9LHRoaXMpO30sdGhpcyk7fTtrLnRhPWZ1bmN0aW9uKCl7Tih0aGlzKTtjb25zdCBhPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKSxiPUFycmF5LmZyb20odGhpcy5nLmtleXMoKSksYz1bXTtmb3IobGV0IGQ9MDtkPGIubGVuZ3RoO2QrKyl7Y29uc3QgZT1hW2RdO2ZvcihsZXQgZj0wO2Y8ZS5sZW5ndGg7ZisrKWMucHVzaChiW2RdKTt9cmV0dXJuIGN9O2suWj1mdW5jdGlvbihhKXtOKHRoaXMpO2xldCBiPVtdO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlhZCh0aGlzLGEpJiYoYj1iLmNvbmNhdCh0aGlzLmcuZ2V0KE8odGhpcyxhKSkpKTtlbHNlIHthPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKyliPWIuY29uY2F0KGFbY10pO31yZXR1cm4gYn07XG5rLnNldD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7YWQodGhpcyxhKSYmKHRoaXMuaC09dGhpcy5nLmdldChhKS5sZW5ndGgpO3RoaXMuZy5zZXQoYSxbYl0pO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ay5nZXQ9ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gYjthPXRoaXMuWihhKTtyZXR1cm4gMDxhLmxlbmd0aD9TdHJpbmcoYVswXSk6Yn07ZnVuY3Rpb24ga2MoYSxiLGMpeyRjKGEsYik7MDxjLmxlbmd0aCYmKGEuaT1udWxsLGEuZy5zZXQoTyhhLGIpLG1hKGMpKSxhLmgrPWMubGVuZ3RoKTt9XG5rLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5pKXJldHVybiB0aGlzLmk7aWYoIXRoaXMuZylyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9QXJyYXkuZnJvbSh0aGlzLmcua2V5cygpKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtjb25zdCBmPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZCkpLGg9dGhpcy5aKGQpO2ZvcihkPTA7ZDxoLmxlbmd0aDtkKyspe3ZhciBlPWY7XCJcIiE9PWhbZF0mJihlKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGhbZF0pKSk7YS5wdXNoKGUpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBPKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifVxuZnVuY3Rpb24gWGMoYSxiKXtiJiYhYS5qJiYoTihhKSxhLmk9bnVsbCxhLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe3ZhciBlPWQudG9Mb3dlckNhc2UoKTtkIT1lJiYoJGModGhpcyxkKSxrYyh0aGlzLGUsYykpO30sYSkpO2Euaj1iO312YXIgYmQ9Y2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmc9YTt0aGlzLm1hcD1iO319O2Z1bmN0aW9uIGNkKGEpe3RoaXMubD1hfHxkZDtsLlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZz8oYT1sLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpLGE9MDxhLmxlbmd0aCYmKFwiaHFcIj09YVswXS5uZXh0SG9wUHJvdG9jb2x8fFwiaDJcIj09YVswXS5uZXh0SG9wUHJvdG9jb2wpKTphPSEhKGwuZyYmbC5nLkthJiZsLmcuS2EoKSYmbC5nLkthKCkuZWMpO3RoaXMuaj1hP3RoaXMubDoxO3RoaXMuZz1udWxsOzE8dGhpcy5qJiYodGhpcy5nPW5ldyBTZXQpO3RoaXMuaD1udWxsO3RoaXMuaT1bXTt9dmFyIGRkPTEwO2Z1bmN0aW9uIGVkKGEpe3JldHVybiBhLmg/ITA6YS5nP2EuZy5zaXplPj1hLmo6ITF9ZnVuY3Rpb24gQmMoYSl7cmV0dXJuIGEuaD8xOmEuZz9hLmcuc2l6ZTowfWZ1bmN0aW9uIHhjKGEsYil7cmV0dXJuIGEuaD9hLmg9PWI6YS5nP2EuZy5oYXMoYik6ITF9ZnVuY3Rpb24gQ2MoYSxiKXthLmc/YS5nLmFkZChiKTphLmg9Yjt9XG5mdW5jdGlvbiBFYyhhLGIpe2EuaCYmYS5oPT1iP2EuaD1udWxsOmEuZyYmYS5nLmhhcyhiKSYmYS5nLmRlbGV0ZShiKTt9Y2QucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuaT1mZCh0aGlzKTtpZih0aGlzLmgpdGhpcy5oLmNhbmNlbCgpLHRoaXMuaD1udWxsO2Vsc2UgaWYodGhpcy5nJiYwIT09dGhpcy5nLnNpemUpe2Zvcihjb25zdCBhIG9mIHRoaXMuZy52YWx1ZXMoKSlhLmNhbmNlbCgpO3RoaXMuZy5jbGVhcigpO319O2Z1bmN0aW9uIGZkKGEpe2lmKG51bGwhPWEuaClyZXR1cm4gYS5pLmNvbmNhdChhLmguRik7aWYobnVsbCE9YS5nJiYwIT09YS5nLnNpemUpe2xldCBiPWEuaTtmb3IoY29uc3QgYyBvZiBhLmcudmFsdWVzKCkpYj1iLmNvbmNhdChjLkYpO3JldHVybiBifXJldHVybiBtYShhLmkpfXZhciBnZD1jbGFzc3tzdHJpbmdpZnkoYSl7cmV0dXJuIGwuSlNPTi5zdHJpbmdpZnkoYSx2b2lkIDApfXBhcnNlKGEpe3JldHVybiBsLkpTT04ucGFyc2UoYSx2b2lkIDApfX07ZnVuY3Rpb24gaGQoKXt0aGlzLmc9bmV3IGdkO31mdW5jdGlvbiBpZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1qYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIGpkKGEsYil7Y29uc3QgYz1uZXcgR2I7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIGtkKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIGxkKGEpe3RoaXMubD1hLmZjfHxudWxsO3RoaXMuaj1hLm9ifHwhMTt9cihsZCxVYik7bGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG1kKHRoaXMubCx0aGlzLmopfTtsZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBtZChhLGIpe0IuY2FsbCh0aGlzKTt0aGlzLkY9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1uZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXIobWQsQik7dmFyIG5kPTA7az1tZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPW5kKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7b2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkZ8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLiRhLmJpbmQodGhpcyksdGhpcy5rYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKS5jYXRjaCgoKT0+e30pOzE8PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy5nJiY0IT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLmc9ITEscGQodGhpcykpO3RoaXMucmVhZHlTdGF0ZT1uZDt9O1xuay4kYT1mdW5jdGlvbihhKXtpZih0aGlzLmcmJih0aGlzLmw9YSx0aGlzLmh8fCh0aGlzLnN0YXR1cz10aGlzLmwuc3RhdHVzLHRoaXMuc3RhdHVzVGV4dD10aGlzLmwuc3RhdHVzVGV4dCx0aGlzLmg9YS5oZWFkZXJzLHRoaXMucmVhZHlTdGF0ZT0yLG9kKHRoaXMpKSx0aGlzLmcmJih0aGlzLnJlYWR5U3RhdGU9MyxvZCh0aGlzKSx0aGlzLmcpKSlpZihcImFycmF5YnVmZmVyXCI9PT10aGlzLnJlc3BvbnNlVHlwZSlhLmFycmF5QnVmZmVyKCkudGhlbih0aGlzLllhLmJpbmQodGhpcyksdGhpcy5rYS5iaW5kKHRoaXMpKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgbC5SZWFkYWJsZVN0cmVhbSYmXCJib2R5XCJpbiBhKXt0aGlzLmo9YS5ib2R5LmdldFJlYWRlcigpO2lmKHRoaXMudSl7aWYodGhpcy5yZXNwb25zZVR5cGUpdGhyb3cgRXJyb3IoJ3Jlc3BvbnNlVHlwZSBtdXN0IGJlIGVtcHR5IGZvciBcInN0cmVhbUJpbmFyeUNodW5rc1wiIG1vZGUgcmVzcG9uc2VzLicpO3RoaXMucmVzcG9uc2U9XG5bXTt9ZWxzZSB0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCIsdGhpcy5BPW5ldyBUZXh0RGVjb2RlcjtxZCh0aGlzKTt9ZWxzZSBhLnRleHQoKS50aGVuKHRoaXMuWmEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO307ZnVuY3Rpb24gcWQoYSl7YS5qLnJlYWQoKS50aGVuKGEuWGEuYmluZChhKSkuY2F0Y2goYS5rYS5iaW5kKGEpKTt9ay5YYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe2lmKHRoaXMudSYmYS52YWx1ZSl0aGlzLnJlc3BvbnNlLnB1c2goYS52YWx1ZSk7ZWxzZSBpZighdGhpcy51KXt2YXIgYj1hLnZhbHVlP2EudmFsdWU6bmV3IFVpbnQ4QXJyYXkoMCk7aWYoYj10aGlzLkEuZGVjb2RlKGIse3N0cmVhbTohYS5kb25lfSkpdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dCs9Yjt9YS5kb25lP3BkKHRoaXMpOm9kKHRoaXMpOzM9PXRoaXMucmVhZHlTdGF0ZSYmcWQodGhpcyk7fX07XG5rLlphPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9YSxwZCh0aGlzKSk7fTtrLllhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9YSxwZCh0aGlzKSk7fTtrLmthPWZ1bmN0aW9uKCl7dGhpcy5nJiZwZCh0aGlzKTt9O2Z1bmN0aW9uIHBkKGEpe2EucmVhZHlTdGF0ZT00O2EubD1udWxsO2Euaj1udWxsO2EuQT1udWxsO29kKGEpO31rLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLnYuYXBwZW5kKGEsYik7fTtrLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmg/dGhpcy5oLmdldChhLnRvTG93ZXJDYXNlKCkpfHxcIlwiOlwiXCJ9O1xuay5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5oKXJldHVybiBcIlwiO2NvbnN0IGE9W10sYj10aGlzLmguZW50cmllcygpO2Zvcih2YXIgYz1iLm5leHQoKTshYy5kb25lOyljPWMudmFsdWUsYS5wdXNoKGNbMF0rXCI6IFwiK2NbMV0pLGM9Yi5uZXh0KCk7cmV0dXJuIGEuam9pbihcIlxcclxcblwiKX07ZnVuY3Rpb24gb2QoYSl7YS5vbnJlYWR5c3RhdGVjaGFuZ2UmJmEub25yZWFkeXN0YXRlY2hhbmdlLmNhbGwoYSk7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZC5wcm90b3R5cGUsXCJ3aXRoQ3JlZGVudGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5jbHVkZVwiPT09dGhpcy5tfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5tPWE/XCJpbmNsdWRlXCI6XCJzYW1lLW9yaWdpblwiO319KTt2YXIgcmQ9bC5KU09OLnBhcnNlO2Z1bmN0aW9uIFAoYSl7Qi5jYWxsKHRoaXMpO3RoaXMuaGVhZGVycz1uZXcgTWFwO3RoaXMudT1hfHxudWxsO3RoaXMuaD0hMTt0aGlzLkM9dGhpcy5nPW51bGw7dGhpcy5JPVwiXCI7dGhpcy5tPTA7dGhpcy5qPVwiXCI7dGhpcy5sPXRoaXMuRz10aGlzLnY9dGhpcy5GPSExO3RoaXMuQj0wO3RoaXMuQT1udWxsO3RoaXMuSz1zZDt0aGlzLkw9dGhpcy5NPSExO31yKFAsQik7dmFyIHNkPVwiXCIsdGQ9L15odHRwcz8kL2ksdWQ9W1wiUE9TVFwiLFwiUFVUXCJdO2s9UC5wcm90b3R5cGU7ay5PYT1mdW5jdGlvbihhKXt0aGlzLk09YTt9O1xuay5oYT1mdW5jdGlvbihhLGIsYyxkKXtpZih0aGlzLmcpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrdGhpcy5JK1wiOyBuZXdVcmk9XCIrYSk7Yj1iP2IudG9VcHBlckNhc2UoKTpcIkdFVFwiO3RoaXMuST1hO3RoaXMuaj1cIlwiO3RoaXMubT0wO3RoaXMuRj0hMTt0aGlzLmg9ITA7dGhpcy5nPXRoaXMudT90aGlzLnUuZygpOiRiLmcoKTt0aGlzLkM9dGhpcy51P1ZiKHRoaXMudSk6VmIoJGIpO3RoaXMuZy5vbnJlYWR5c3RhdGVjaGFuZ2U9cSh0aGlzLkxhLHRoaXMpO3RyeXt0aGlzLkc9ITAsdGhpcy5nLm9wZW4oYixTdHJpbmcoYSksITApLHRoaXMuRz0hMTt9Y2F0Y2goZil7dmQodGhpcyxmKTtyZXR1cm59YT1jfHxcIlwiO2M9bmV3IE1hcCh0aGlzLmhlYWRlcnMpO2lmKGQpaWYoT2JqZWN0LmdldFByb3RvdHlwZU9mKGQpPT09T2JqZWN0LnByb3RvdHlwZSlmb3IodmFyIGUgaW4gZCljLnNldChlLGRbZV0pO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT09XG50eXBlb2YgZC5rZXlzJiZcImZ1bmN0aW9uXCI9PT10eXBlb2YgZC5nZXQpZm9yKGNvbnN0IGYgb2YgZC5rZXlzKCkpYy5zZXQoZixkLmdldChmKSk7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gaW5wdXQgdHlwZSBmb3Igb3B0X2hlYWRlcnM6IFwiK1N0cmluZyhkKSk7ZD1BcnJheS5mcm9tKGMua2V5cygpKS5maW5kKGY9PlwiY29udGVudC10eXBlXCI9PWYudG9Mb3dlckNhc2UoKSk7ZT1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTshKDA8PWthKHVkLGIpKXx8ZHx8ZXx8Yy5zZXQoXCJDb250ZW50LVR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04XCIpO2Zvcihjb25zdCBbZixoXW9mIGMpdGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoZixoKTt0aGlzLksmJih0aGlzLmcucmVzcG9uc2VUeXBlPXRoaXMuSyk7XCJ3aXRoQ3JlZGVudGlhbHNcImluIHRoaXMuZyYmdGhpcy5nLndpdGhDcmVkZW50aWFscyE9PXRoaXMuTSYmKHRoaXMuZy53aXRoQ3JlZGVudGlhbHM9XG50aGlzLk0pO3RyeXt3ZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLkw9eGQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy51YSx0aGlzKSk6dGhpcy5BPXliKHRoaXMudWEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt2ZCh0aGlzLGYpO319O2Z1bmN0aW9uIHhkKGEpe3JldHVybiB6JiZcIm51bWJlclwiPT09dHlwZW9mIGEudGltZW91dCYmdm9pZCAwIT09YS5vbnRpbWVvdXR9ay51YT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiZ0aGlzLmcmJih0aGlzLmo9XCJUaW1lZCBvdXQgYWZ0ZXIgXCIrdGhpcy5CK1wibXMsIGFib3J0aW5nXCIsdGhpcy5tPTgsQyh0aGlzLFwidGltZW91dFwiKSx0aGlzLmFib3J0KDgpKTt9O2Z1bmN0aW9uIHZkKGEsYil7YS5oPSExO2EuZyYmKGEubD0hMCxhLmcuYWJvcnQoKSxhLmw9ITEpO2Euaj1iO2EubT01O3lkKGEpO3pkKGEpO31cbmZ1bmN0aW9uIHlkKGEpe2EuRnx8KGEuRj0hMCxDKGEsXCJjb21wbGV0ZVwiKSxDKGEsXCJlcnJvclwiKSk7fWsuYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5nJiZ0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSx0aGlzLm09YXx8NyxDKHRoaXMsXCJjb21wbGV0ZVwiKSxDKHRoaXMsXCJhYm9ydFwiKSx6ZCh0aGlzKSk7fTtrLk49ZnVuY3Rpb24oKXt0aGlzLmcmJih0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSksemQodGhpcywhMCkpO1AuJC5OLmNhbGwodGhpcyk7fTtrLkxhPWZ1bmN0aW9uKCl7dGhpcy5zfHwodGhpcy5HfHx0aGlzLnZ8fHRoaXMubD9BZCh0aGlzKTp0aGlzLmtiKCkpO307ay5rYj1mdW5jdGlvbigpe0FkKHRoaXMpO307XG5mdW5jdGlvbiBBZChhKXtpZihhLmgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiYoIWEuQ1sxXXx8NCE9SChhKXx8MiE9YS5kYSgpKSlpZihhLnYmJjQ9PUgoYSkpeWIoYS5MYSwwLGEpO2Vsc2UgaWYoQyhhLFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT1IKGEpKXthLmg9ITE7dHJ5e2NvbnN0IGg9YS5kYSgpO2E6c3dpdGNoKGgpe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYj0hMDticmVhayBhO2RlZmF1bHQ6Yj0hMTt9dmFyIGM7aWYoIShjPWIpKXt2YXIgZDtpZihkPTA9PT1oKXt2YXIgZT1TdHJpbmcoYS5JKS5tYXRjaChMYylbMV18fG51bGw7IWUmJmwuc2VsZiYmbC5zZWxmLmxvY2F0aW9uJiYoZT1sLnNlbGYubG9jYXRpb24ucHJvdG9jb2wuc2xpY2UoMCwtMSkpO2Q9IXRkLnRlc3QoZT9lLnRvTG93ZXJDYXNlKCk6XCJcIik7fWM9ZDt9aWYoYylDKGEsXCJjb21wbGV0ZVwiKSxDKGEsXCJzdWNjZXNzXCIpO2Vsc2Uge2EubT1cbjY7dHJ5e3ZhciBmPTI8SChhKT9hLmcuc3RhdHVzVGV4dDpcIlwiO31jYXRjaChuKXtmPVwiXCI7fWEuaj1mK1wiIFtcIithLmRhKCkrXCJdXCI7eWQoYSk7fX1maW5hbGx5e3pkKGEpO319fWZ1bmN0aW9uIHpkKGEsYil7aWYoYS5nKXt3ZChhKTtjb25zdCBjPWEuZyxkPWEuQ1swXT8oKT0+e306bnVsbDthLmc9bnVsbDthLkM9bnVsbDtifHxDKGEsXCJyZWFkeVwiKTt0cnl7Yy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDt9Y2F0Y2goZSl7fX19ZnVuY3Rpb24gd2QoYSl7YS5nJiZhLkwmJihhLmcub250aW1lb3V0PW51bGwpO2EuQSYmKGwuY2xlYXJUaW1lb3V0KGEuQSksYS5BPW51bGwpO31rLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5nfTtmdW5jdGlvbiBIKGEpe3JldHVybiBhLmc/YS5nLnJlYWR5U3RhdGU6MH1rLmRhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPEgodGhpcyk/dGhpcy5nLnN0YXR1czotMX1jYXRjaChhKXtyZXR1cm4gLTF9fTtcbmsuamE9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZz90aGlzLmcucmVzcG9uc2VUZXh0OlwiXCJ9Y2F0Y2goYSl7cmV0dXJuIFwiXCJ9fTtrLldhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7dmFyIGI9dGhpcy5nLnJlc3BvbnNlVGV4dDthJiYwPT1iLmluZGV4T2YoYSkmJihiPWIuc3Vic3RyaW5nKGEubGVuZ3RoKSk7cmV0dXJuIHJkKGIpfX07ZnVuY3Rpb24gbWMoYSl7dHJ5e2lmKCFhLmcpcmV0dXJuIG51bGw7aWYoXCJyZXNwb25zZVwiaW4gYS5nKXJldHVybiBhLmcucmVzcG9uc2U7c3dpdGNoKGEuSyl7Y2FzZSBzZDpjYXNlIFwidGV4dFwiOnJldHVybiBhLmcucmVzcG9uc2VUZXh0O2Nhc2UgXCJhcnJheWJ1ZmZlclwiOmlmKFwibW96UmVzcG9uc2VBcnJheUJ1ZmZlclwiaW4gYS5nKXJldHVybiBhLmcubW96UmVzcG9uc2VBcnJheUJ1ZmZlcn1yZXR1cm4gbnVsbH1jYXRjaChiKXtyZXR1cm4gbnVsbH19XG5mdW5jdGlvbiB0YyhhKXtjb25zdCBiPXt9O2E9KGEuZyYmMjw9SChhKT9hLmcuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl8fFwiXCI6XCJcIikuc3BsaXQoXCJcXHJcXG5cIik7Zm9yKGxldCBkPTA7ZDxhLmxlbmd0aDtkKyspe2lmKHgoYVtkXSkpY29udGludWU7dmFyIGM9cWIoYVtkXSk7Y29uc3QgZT1jWzBdO2M9Y1sxXTtpZihcInN0cmluZ1wiIT09dHlwZW9mIGMpY29udGludWU7Yz1jLnRyaW0oKTtjb25zdCBmPWJbZV18fFtdO2JbZV09ZjtmLnB1c2goYyk7fU9hKGIsZnVuY3Rpb24oZCl7cmV0dXJuIGQuam9pbihcIiwgXCIpfSk7fWsuSWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtrLlNhPWZ1bmN0aW9uKCl7cmV0dXJuIFwic3RyaW5nXCI9PT10eXBlb2YgdGhpcy5qP3RoaXMuajpTdHJpbmcodGhpcy5qKX07ZnVuY3Rpb24gQmQoYSl7bGV0IGI9XCJcIjtOYShhLGZ1bmN0aW9uKGMsZCl7Yis9ZDtiKz1cIjpcIjtiKz1jO2IrPVwiXFxyXFxuXCI7fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gQ2QoYSxiLGMpe2E6e2ZvcihkIGluIGMpe3ZhciBkPSExO2JyZWFrIGF9ZD0hMDt9ZHx8KGM9QmQoYyksXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhudWxsIT1jJiZlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKSk6SyhhLGIsYykpO31mdW5jdGlvbiBEZChhLGIsYyl7cmV0dXJuIGMmJmMuaW50ZXJuYWxDaGFubmVsUGFyYW1zP2MuaW50ZXJuYWxDaGFubmVsUGFyYW1zW2FdfHxiOmJ9XG5mdW5jdGlvbiBFZChhKXt0aGlzLkdhPTA7dGhpcy5qPVtdO3RoaXMubD1uZXcgR2I7dGhpcy5wYT10aGlzLndhPXRoaXMuST10aGlzLlk9dGhpcy5nPXRoaXMuRGE9dGhpcy5GPXRoaXMubmE9dGhpcy5vPXRoaXMuVT10aGlzLnM9bnVsbDt0aGlzLmZiPXRoaXMuVz0wO3RoaXMuY2I9RGQoXCJmYWlsRmFzdFwiLCExLGEpO3RoaXMuRz10aGlzLnY9dGhpcy51PXRoaXMubT10aGlzLmg9bnVsbDt0aGlzLmFhPSEwO3RoaXMuRmE9dGhpcy5WPS0xO3RoaXMuYmE9dGhpcy5BPXRoaXMuQz0wO3RoaXMuYWI9RGQoXCJiYXNlUmV0cnlEZWxheU1zXCIsNUUzLGEpO3RoaXMuaGI9RGQoXCJyZXRyeURlbGF5U2VlZE1zXCIsMUU0LGEpO3RoaXMuZWI9RGQoXCJmb3J3YXJkQ2hhbm5lbE1heFJldHJpZXNcIiwyLGEpO3RoaXMueGE9RGQoXCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNcIiwyRTQsYSk7dGhpcy52YT1hJiZhLnhtbEh0dHBGYWN0b3J5fHx2b2lkIDA7dGhpcy5IYT1hJiZhLmRjfHwhMTt0aGlzLkw9XG52b2lkIDA7dGhpcy5KPWEmJmEuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy5LPVwiXCI7dGhpcy5pPW5ldyBjZChhJiZhLmNvbmN1cnJlbnRSZXF1ZXN0TGltaXQpO3RoaXMuSmE9bmV3IGhkO3RoaXMuUD1hJiZhLmZhc3RIYW5kc2hha2V8fCExO3RoaXMuTz1hJiZhLmVuY29kZUluaXRNZXNzYWdlSGVhZGVyc3x8ITE7dGhpcy5QJiZ0aGlzLk8mJih0aGlzLk89ITEpO3RoaXMuYmI9YSYmYS5iY3x8ITE7YSYmYS5FYSYmdGhpcy5sLkVhKCk7YSYmYS5mb3JjZUxvbmdQb2xsaW5nJiYodGhpcy5hYT0hMSk7dGhpcy5jYT0hdGhpcy5QJiZ0aGlzLmFhJiZhJiZhLmRldGVjdEJ1ZmZlcmluZ1Byb3h5fHwhMTt0aGlzLnFhPXZvaWQgMDthJiZhLmxvbmdQb2xsaW5nVGltZW91dCYmMDxhLmxvbmdQb2xsaW5nVGltZW91dCYmKHRoaXMucWE9YS5sb25nUG9sbGluZ1RpbWVvdXQpO3RoaXMub2E9dm9pZCAwO3RoaXMuUz0wO3RoaXMuTT0hMTt0aGlzLm1hPXRoaXMuQj1udWxsO31rPUVkLnByb3RvdHlwZTtcbmsucmE9ODtrLkg9MTtmdW5jdGlvbiBIYyhhKXtGZChhKTtpZigzPT1hLkgpe3ZhciBiPWEuVysrLGM9RyhhLkkpO0soYyxcIlNJRFwiLGEuSyk7SyhjLFwiUklEXCIsYik7SyhjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0dkKGEsYyk7Yj1uZXcgYmMoYSxhLmwsYik7Yi5MPTI7Yi52PWhjKEcoYykpO2M9ITE7aWYobC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24pdHJ5e2M9bC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbihiLnYudG9TdHJpbmcoKSxcIlwiKTt9Y2F0Y2goZCl7fSFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIudixjPSEwKTtjfHwoYi5nPWxjKGIubCxudWxsKSxiLmcuaGEoYi52KSk7Yi5HPURhdGUubm93KCk7amMoYik7fUhkKGEpO31mdW5jdGlvbiB6YyhhKXthLmcmJih2YyhhKSxhLmcuY2FuY2VsKCksYS5nPW51bGwpO31cbmZ1bmN0aW9uIEZkKGEpe3pjKGEpO2EudSYmKGwuY2xlYXJUaW1lb3V0KGEudSksYS51PW51bGwpO3ljKGEpO2EuaS5jYW5jZWwoKTthLm0mJihcIm51bWJlclwiPT09dHlwZW9mIGEubSYmbC5jbGVhclRpbWVvdXQoYS5tKSxhLm09bnVsbCk7fWZ1bmN0aW9uIEdjKGEpe2lmKCFlZChhLmkpJiYhYS5tKXthLm09ITA7dmFyIGI9YS5OYTtzYnx8dmIoKTt0Ynx8KHNiKCksdGI9ITApO21iLmFkZChiLGEpO2EuQz0wO319ZnVuY3Rpb24gSWQoYSxiKXtpZihCYyhhLmkpPj1hLmkuai0oYS5tPzE6MCkpcmV0dXJuICExO2lmKGEubSlyZXR1cm4gYS5qPWIuRi5jb25jYXQoYS5qKSwhMDtpZigxPT1hLkh8fDI9PWEuSHx8YS5DPj0oYS5jYj8wOmEuZWIpKXJldHVybiAhMTthLm09UmIocShhLk5hLGEsYiksSmQoYSxhLkMpKTthLkMrKztyZXR1cm4gITB9XG5rLk5hPWZ1bmN0aW9uKGEpe2lmKHRoaXMubSlpZih0aGlzLm09bnVsbCwxPT10aGlzLkgpe2lmKCFhKXt0aGlzLlc9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlcrKztjb25zdCBlPW5ldyBiYyh0aGlzLHRoaXMubCxhKTtsZXQgZj10aGlzLnM7dGhpcy5VJiYoZj8oZj1QYShmKSxSYShmLHRoaXMuVSkpOmY9dGhpcy5VKTtudWxsIT09dGhpcy5vfHx0aGlzLk98fChlLkk9ZixmPW51bGwpO2lmKHRoaXMuUClhOnt2YXIgYj0wO2Zvcih2YXIgYz0wO2M8dGhpcy5qLmxlbmd0aDtjKyspe2I6e3ZhciBkPXRoaXMualtjXTtpZihcIl9fZGF0YV9fXCJpbiBkLm1hcCYmKGQ9ZC5tYXAuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMuai5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj1cbjFFMztiPUtkKHRoaXMsZSxiKTtjPUcodGhpcy5JKTtLKGMsXCJSSURcIixhKTtLKGMsXCJDVkVSXCIsMjIpO3RoaXMuRiYmSyhjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkYpO0dkKHRoaXMsYyk7ZiYmKHRoaXMuTz9iPVwiaGVhZGVycz1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKEJkKGYpKSkrXCImXCIrYjp0aGlzLm8mJkNkKGMsdGhpcy5vLGYpKTtDYyh0aGlzLmksZSk7dGhpcy5iYiYmSyhjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLlA/KEsoYyxcIiRyZXFcIixiKSxLKGMsXCJTSURcIixcIm51bGxcIiksZS5hYT0hMCxnYyhlLGMsbnVsbCkpOmdjKGUsYyxiKTt0aGlzLkg9Mjt9fWVsc2UgMz09dGhpcy5IJiYoYT9MZCh0aGlzLGEpOjA9PXRoaXMuai5sZW5ndGh8fGVkKHRoaXMuaSl8fExkKHRoaXMpKTt9O1xuZnVuY3Rpb24gTGQoYSxiKXt2YXIgYztiP2M9Yi5tOmM9YS5XKys7Y29uc3QgZD1HKGEuSSk7SyhkLFwiU0lEXCIsYS5LKTtLKGQsXCJSSURcIixjKTtLKGQsXCJBSURcIixhLlYpO0dkKGEsZCk7YS5vJiZhLnMmJkNkKGQsYS5vLGEucyk7Yz1uZXcgYmMoYSxhLmwsYyxhLkMrMSk7bnVsbD09PWEubyYmKGMuST1hLnMpO2ImJihhLmo9Yi5GLmNvbmNhdChhLmopKTtiPUtkKGEsYywxRTMpO2Muc2V0VGltZW91dChNYXRoLnJvdW5kKC41KmEueGEpK01hdGgucm91bmQoLjUqYS54YSpNYXRoLnJhbmRvbSgpKSk7Q2MoYS5pLGMpO2djKGMsZCxiKTt9ZnVuY3Rpb24gR2QoYSxiKXthLm5hJiZOYShhLm5hLGZ1bmN0aW9uKGMsZCl7SyhiLGQsYyk7fSk7YS5oJiZLYyh7fSxmdW5jdGlvbihjLGQpe0soYixkLGMpO30pO31cbmZ1bmN0aW9uIEtkKGEsYixjKXtjPU1hdGgubWluKGEuai5sZW5ndGgsYyk7dmFyIGQ9YS5oP3EoYS5oLlZhLGEuaCxhKTpudWxsO2E6e3ZhciBlPWEuajtsZXQgZj0tMTtmb3IoOzspe2NvbnN0IGg9W1wiY291bnQ9XCIrY107LTE9PWY/MDxjPyhmPWVbMF0uZyxoLnB1c2goXCJvZnM9XCIrZikpOmY9MDpoLnB1c2goXCJvZnM9XCIrZik7bGV0IG49ITA7Zm9yKGxldCB0PTA7dDxjO3QrKyl7bGV0IG09ZVt0XS5nO2NvbnN0IHU9ZVt0XS5tYXA7bS09ZjtpZigwPm0pZj1NYXRoLm1heCgwLGVbdF0uZy0xMDApLG49ITE7ZWxzZSB0cnl7aWQodSxoLFwicmVxXCIrbStcIl9cIik7fWNhdGNoKEwpe2QmJmQodSk7fX1pZihuKXtkPWguam9pbihcIiZcIik7YnJlYWsgYX19fWE9YS5qLnNwbGljZSgwLGMpO2IuRj1hO3JldHVybiBkfWZ1bmN0aW9uIEZjKGEpe2lmKCFhLmcmJiFhLnUpe2EuYmE9MTt2YXIgYj1hLk1hO3NifHx2YigpO3RifHwoc2IoKSx0Yj0hMCk7bWIuYWRkKGIsYSk7YS5BPTA7fX1cbmZ1bmN0aW9uIEFjKGEpe2lmKGEuZ3x8YS51fHwzPD1hLkEpcmV0dXJuICExO2EuYmErKzthLnU9UmIocShhLk1hLGEpLEpkKGEsYS5BKSk7YS5BKys7cmV0dXJuICEwfWsuTWE9ZnVuY3Rpb24oKXt0aGlzLnU9bnVsbDtNZCh0aGlzKTtpZih0aGlzLmNhJiYhKHRoaXMuTXx8bnVsbD09dGhpcy5nfHwwPj10aGlzLlMpKXt2YXIgYT0yKnRoaXMuUzt0aGlzLmwuaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lciBlbmFibGVkOiBcIithKTt0aGlzLkI9UmIocSh0aGlzLmpiLHRoaXMpLGEpO319O2suamI9ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLkI9bnVsbCx0aGlzLmwuaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMubC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLkc9ITEsdGhpcy5NPSEwLEYoMTApLHpjKHRoaXMpLE1kKHRoaXMpKTt9O1xuZnVuY3Rpb24gdmMoYSl7bnVsbCE9YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWZ1bmN0aW9uIE1kKGEpe2EuZz1uZXcgYmMoYSxhLmwsXCJycGNcIixhLmJhKTtudWxsPT09YS5vJiYoYS5nLkk9YS5zKTthLmcuTz0wO3ZhciBiPUcoYS53YSk7SyhiLFwiUklEXCIsXCJycGNcIik7SyhiLFwiU0lEXCIsYS5LKTtLKGIsXCJBSURcIixhLlYpO0soYixcIkNJXCIsYS5HP1wiMFwiOlwiMVwiKTshYS5HJiZhLnFhJiZLKGIsXCJUT1wiLGEucWEpO0soYixcIlRZUEVcIixcInhtbGh0dHBcIik7R2QoYSxiKTthLm8mJmEucyYmQ2QoYixhLm8sYS5zKTthLkwmJmEuZy5zZXRUaW1lb3V0KGEuTCk7dmFyIGM9YS5nO2E9YS5wYTtjLkw9MTtjLnY9aGMoRyhiKSk7Yy5zPW51bGw7Yy5TPSEwO2ljKGMsYSk7fWsuaWI9ZnVuY3Rpb24oKXtudWxsIT10aGlzLnYmJih0aGlzLnY9bnVsbCx6Yyh0aGlzKSxBYyh0aGlzKSxGKDE5KSk7fTtcbmZ1bmN0aW9uIHljKGEpe251bGwhPWEudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO31mdW5jdGlvbiBzYyhhLGIpe3ZhciBjPW51bGw7aWYoYS5nPT1iKXt5YyhhKTt2YyhhKTthLmc9bnVsbDt2YXIgZD0yO31lbHNlIGlmKHhjKGEuaSxiKSljPWIuRixFYyhhLmksYiksZD0xO2Vsc2UgcmV0dXJuO2lmKDAhPWEuSClpZihiLmkpaWYoMT09ZCl7Yz1iLnM/Yi5zLmxlbmd0aDowO2I9RGF0ZS5ub3coKS1iLkc7dmFyIGU9YS5DO2Q9TWIoKTtDKGQsbmV3IFFiKGQsYykpO0djKGEpO31lbHNlIEZjKGEpO2Vsc2UgaWYoZT1iLm8sMz09ZXx8MD09ZSYmMDxiLmNhfHwhKDE9PWQmJklkKGEsYil8fDI9PWQmJkFjKGEpKSlzd2l0Y2goYyYmMDxjLmxlbmd0aCYmKGI9YS5pLGIuaT1iLmkuY29uY2F0KGMpKSxlKXtjYXNlIDE6SihhLDUpO2JyZWFrO2Nhc2UgNDpKKGEsMTApO2JyZWFrO2Nhc2UgMzpKKGEsNik7YnJlYWs7ZGVmYXVsdDpKKGEsMik7fX1cbmZ1bmN0aW9uIEpkKGEsYil7bGV0IGM9YS5hYitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYS5oYik7YS5pc0FjdGl2ZSgpfHwoYyo9Mik7cmV0dXJuIGMqYn1mdW5jdGlvbiBKKGEsYil7YS5sLmluZm8oXCJFcnJvciBjb2RlIFwiK2IpO2lmKDI9PWIpe3ZhciBjPW51bGw7YS5oJiYoYz1udWxsKTt2YXIgZD1xKGEucGIsYSk7Y3x8KGM9bmV3IE0oXCIvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9jbGVhcmRvdC5naWZcIiksbC5sb2NhdGlvbiYmXCJodHRwXCI9PWwubG9jYXRpb24ucHJvdG9jb2x8fE5jKGMsXCJodHRwc1wiKSxoYyhjKSk7amQoYy50b1N0cmluZygpLGQpO31lbHNlIEYoMik7YS5IPTA7YS5oJiZhLmguemEoYik7SGQoYSk7RmQoYSk7fWsucGI9ZnVuY3Rpb24oYSl7YT8odGhpcy5sLmluZm8oXCJTdWNjZXNzZnVsbHkgcGluZ2VkIGdvb2dsZS5jb21cIiksRigyKSk6KHRoaXMubC5pbmZvKFwiRmFpbGVkIHRvIHBpbmcgZ29vZ2xlLmNvbVwiKSxGKDEpKTt9O1xuZnVuY3Rpb24gSGQoYSl7YS5IPTA7YS5tYT1bXTtpZihhLmgpe2NvbnN0IGI9ZmQoYS5pKTtpZigwIT1iLmxlbmd0aHx8MCE9YS5qLmxlbmd0aCluYShhLm1hLGIpLG5hKGEubWEsYS5qKSxhLmkuaS5sZW5ndGg9MCxtYShhLmopLGEuai5sZW5ndGg9MDthLmgueWEoKTt9fWZ1bmN0aW9uIERjKGEsYixjKXt2YXIgZD1jIGluc3RhbmNlb2YgTT9HKGMpOm5ldyBNKGMpO2lmKFwiXCIhPWQuZyliJiYoZC5nPWIrXCIuXCIrZC5nKSxPYyhkLGQubSk7ZWxzZSB7dmFyIGU9bC5sb2NhdGlvbjtkPWUucHJvdG9jb2w7Yj1iP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lO2U9K2UucG9ydDt2YXIgZj1uZXcgTShudWxsKTtkJiZOYyhmLGQpO2ImJihmLmc9Yik7ZSYmT2MoZixlKTtjJiYoZi5sPWMpO2Q9Zjt9Yz1hLkY7Yj1hLkRhO2MmJmImJksoZCxjLGIpO0soZCxcIlZFUlwiLGEucmEpO0dkKGEsZCk7cmV0dXJuIGR9XG5mdW5jdGlvbiBsYyhhLGIsYyl7aWYoYiYmIWEuSil0aHJvdyBFcnJvcihcIkNhbid0IGNyZWF0ZSBzZWNvbmRhcnkgZG9tYWluIGNhcGFibGUgWGhySW8gb2JqZWN0LlwiKTtiPWMmJmEuSGEmJiFhLnZhP25ldyBQKG5ldyBsZCh7b2I6ITB9KSk6bmV3IFAoYS52YSk7Yi5PYShhLkopO3JldHVybiBifWsuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmgmJnRoaXMuaC5pc0FjdGl2ZSh0aGlzKX07ZnVuY3Rpb24gTmQoKXt9az1OZC5wcm90b3R5cGU7ay5CYT1mdW5jdGlvbigpe307ay5BYT1mdW5jdGlvbigpe307ay56YT1mdW5jdGlvbigpe307ay55YT1mdW5jdGlvbigpe307ay5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiAhMH07ay5WYT1mdW5jdGlvbigpe307ZnVuY3Rpb24gT2QoKXtpZih6JiYhKDEwPD1OdW1iZXIoRmEpKSl0aHJvdyBFcnJvcihcIkVudmlyb25tZW50YWwgZXJyb3I6IG5vIGF2YWlsYWJsZSB0cmFuc3BvcnQuXCIpO31PZC5wcm90b3R5cGUuZz1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgUShhLGIpfTtcbmZ1bmN0aW9uIFEoYSxiKXtCLmNhbGwodGhpcyk7dGhpcy5nPW5ldyBFZChiKTt0aGlzLmw9YTt0aGlzLmg9YiYmYi5tZXNzYWdlVXJsUGFyYW1zfHxudWxsO2E9YiYmYi5tZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLmNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQmJihhP2FbXCJYLUNsaWVudC1Qcm90b2NvbFwiXT1cIndlYmNoYW5uZWxcIjphPXtcIlgtQ2xpZW50LVByb3RvY29sXCI6XCJ3ZWJjaGFubmVsXCJ9KTt0aGlzLmcucz1hO2E9YiYmYi5pbml0TWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5tZXNzYWdlQ29udGVudFR5cGUmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCJdPWIubWVzc2FnZUNvbnRlbnRUeXBlOmE9e1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiOmIubWVzc2FnZUNvbnRlbnRUeXBlfSk7YiYmYi5DYSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiXT1iLkNhOmE9e1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCI6Yi5DYX0pO3RoaXMuZy5VPVxuYTsoYT1iJiZiLmNjKSYmIXgoYSkmJih0aGlzLmcubz1hKTt0aGlzLkE9YiYmYi5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLnY9YiYmYi5zZW5kUmF3SnNvbnx8ITE7KGI9YiYmYi5odHRwU2Vzc2lvbklkUGFyYW0pJiYheChiKSYmKHRoaXMuZy5GPWIsYT10aGlzLmgsbnVsbCE9PWEmJmIgaW4gYSYmKGE9dGhpcy5oLGIgaW4gYSYmZGVsZXRlIGFbYl0pKTt0aGlzLmo9bmV3IFIodGhpcyk7fXIoUSxCKTtRLnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dGhpcy5nLmg9dGhpcy5qO3RoaXMuQSYmKHRoaXMuZy5KPSEwKTt2YXIgYT10aGlzLmcsYj10aGlzLmwsYz10aGlzLmh8fHZvaWQgMDtGKDApO2EuWT1iO2EubmE9Y3x8e307YS5HPWEuYWE7YS5JPURjKGEsbnVsbCxhLlkpO0djKGEpO307US5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtIYyh0aGlzLmcpO307XG5RLnByb3RvdHlwZS51PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZztpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBjPXt9O2MuX19kYXRhX189YTthPWM7fWVsc2UgdGhpcy52JiYoYz17fSxjLl9fZGF0YV9fPWpiKGEpLGE9Yyk7Yi5qLnB1c2gobmV3IGJkKGIuZmIrKyxhKSk7Mz09Yi5IJiZHYyhiKTt9O1EucHJvdG90eXBlLk49ZnVuY3Rpb24oKXt0aGlzLmcuaD1udWxsO2RlbGV0ZSB0aGlzLmo7SGModGhpcy5nKTtkZWxldGUgdGhpcy5nO1EuJC5OLmNhbGwodGhpcyk7fTtcbmZ1bmN0aW9uIFBkKGEpe1liLmNhbGwodGhpcyk7YS5fX2hlYWRlcnNfXyYmKHRoaXMuaGVhZGVycz1hLl9faGVhZGVyc19fLHRoaXMuc3RhdHVzQ29kZT1hLl9fc3RhdHVzX18sZGVsZXRlIGEuX19oZWFkZXJzX18sZGVsZXRlIGEuX19zdGF0dXNfXyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9cihQZCxZYik7ZnVuY3Rpb24gUWQoKXtaYi5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXIoUWQsWmIpO2Z1bmN0aW9uIFIoYSl7dGhpcy5nPWE7fXIoUixOZCk7Ui5wcm90b3R5cGUuQmE9ZnVuY3Rpb24oKXtDKHRoaXMuZyxcImFcIik7fTtSLnByb3RvdHlwZS5BYT1mdW5jdGlvbihhKXtDKHRoaXMuZyxuZXcgUGQoYSkpO307XG5SLnByb3RvdHlwZS56YT1mdW5jdGlvbihhKXtDKHRoaXMuZyxuZXcgUWQoKSk7fTtSLnByb3RvdHlwZS55YT1mdW5jdGlvbigpe0ModGhpcy5nLFwiYlwiKTt9O2Z1bmN0aW9uIFJkKCl7dGhpcy5ibG9ja1NpemU9LTE7fWZ1bmN0aW9uIFMoKXt0aGlzLmJsb2NrU2l6ZT0tMTt0aGlzLmJsb2NrU2l6ZT02NDt0aGlzLmc9QXJyYXkoNCk7dGhpcy5tPUFycmF5KHRoaXMuYmxvY2tTaXplKTt0aGlzLmk9dGhpcy5oPTA7dGhpcy5yZXNldCgpO31yKFMsUmQpO1MucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5nWzBdPTE3MzI1ODQxOTM7dGhpcy5nWzFdPTQwMjMyMzM0MTc7dGhpcy5nWzJdPTI1NjIzODMxMDI7dGhpcy5nWzNdPTI3MTczMzg3ODt0aGlzLmk9dGhpcy5oPTA7fTtcbmZ1bmN0aW9uIFNkKGEsYixjKXtjfHwoYz0wKTt2YXIgZD1BcnJheSgxNik7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWZvcih2YXIgZT0wOzE2PmU7KytlKWRbZV09Yi5jaGFyQ29kZUF0KGMrKyl8Yi5jaGFyQ29kZUF0KGMrKyk8PDh8Yi5jaGFyQ29kZUF0KGMrKyk8PDE2fGIuY2hhckNvZGVBdChjKyspPDwyNDtlbHNlIGZvcihlPTA7MTY+ZTsrK2UpZFtlXT1iW2MrK118YltjKytdPDw4fGJbYysrXTw8MTZ8YltjKytdPDwyNDtiPWEuZ1swXTtjPWEuZ1sxXTtlPWEuZ1syXTt2YXIgZj1hLmdbM107dmFyIGg9YisoZl5jJihlXmYpKStkWzBdKzM2MTQwOTAzNjAmNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzFdKzM5MDU0MDI3MTAmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8aD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFsyXSs2MDYxMDU4MTkmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtcbmg9YysoYl5lJihmXmIpKStkWzNdKzMyNTA0NDE5NjYmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGZeYyYoZV5mKSkrZFs0XSs0MTE4NTQ4Mzk5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFs1XSsxMjAwMDgwNDI2JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fGg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbNl0rMjgyMTczNTk1NSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO2g9YysoYl5lJihmXmIpKStkWzddKzQyNDkyNjEzMTMmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGZeYyYoZV5mKSkrZFs4XSsxNzcwMDM1NDE2JjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFs5XSsyMzM2NTUyODc5JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fFxuaD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFsxMF0rNDI5NDkyNTIzMyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO2g9YysoYl5lJihmXmIpKStkWzExXSsyMzA0NTYzMTM0JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhmXmMmKGVeZikpK2RbMTJdKzE4MDQ2MDM2ODImNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzEzXSs0MjU0NjI2MTk1JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fGg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbMTRdKzI3OTI5NjUwMDYmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtoPWMrKGJeZSYoZl5iKSkrZFsxNV0rMTIzNjUzNTMyOSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZV5mJihjXmUpKStkWzFdKzQxMjkxNzA3ODYmNDI5NDk2NzI5NTtiPWMrKGg8PFxuNSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbNl0rMzIyNTQ2NTY2NCY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbMTFdKzY0MzcxNzcxMyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzBdKzM5MjEwNjk5OTQmNDI5NDk2NzI5NTtjPWUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGVeZiYoY15lKSkrZFs1XSszNTkzNDA4NjA1JjQyOTQ5NjcyOTU7Yj1jKyhoPDw1JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFsxMF0rMzgwMTYwODMmNDI5NDk2NzI5NTtmPWIrKGg8PDkmNDI5NDk2NzI5NXxoPj4+MjMpO2g9ZSsoYl5jJihmXmIpKStkWzE1XSszNjM0NDg4OTYxJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbNF0rMzg4OTQyOTQ0OCY0Mjk0OTY3Mjk1O2M9XG5lKyhoPDwyMCY0Mjk0OTY3Mjk1fGg+Pj4xMik7aD1iKyhlXmYmKGNeZSkpK2RbOV0rNTY4NDQ2NDM4JjQyOTQ5NjcyOTU7Yj1jKyhoPDw1JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFsxNF0rMzI3NTE2MzYwNiY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbM10rNDEwNzYwMzMzNSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzhdKzExNjM1MzE1MDEmNDI5NDk2NzI5NTtjPWUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGVeZiYoY15lKSkrZFsxM10rMjg1MDI4NTgyOSY0Mjk0OTY3Mjk1O2I9YysoaDw8NSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbMl0rNDI0MzU2MzUxMiY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbN10rMTczNTMyODQ3MyY0Mjk0OTY3Mjk1O1xuZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbMTJdKzIzNjgzNTk1NjImNDI5NDk2NzI5NTtjPWUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGNeZV5mKStkWzVdKzQyOTQ1ODg3MzgmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbOF0rMjI3MjM5MjgzMyY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxoPj4+MjEpO2g9ZSsoZl5iXmMpK2RbMTFdKzE4MzkwMzA1NjImNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzE0XSs0MjU5NjU3NzQwJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGNeZV5mKStkWzFdKzI3NjM5NzUyMzYmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbNF0rMTI3Mjg5MzM1MyY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxcbmg+Pj4yMSk7aD1lKyhmXmJeYykrZFs3XSs0MTM5NDY5NjY0JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFsxMF0rMzIwMDIzNjY1NiY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhjXmVeZikrZFsxM10rNjgxMjc5MTc0JjQyOTQ5NjcyOTU7Yj1jKyhoPDw0JjQyOTQ5NjcyOTV8aD4+PjI4KTtoPWYrKGJeY15lKStkWzBdKzM5MzY0MzAwNzQmNDI5NDk2NzI5NTtmPWIrKGg8PDExJjQyOTQ5NjcyOTV8aD4+PjIxKTtoPWUrKGZeYl5jKStkWzNdKzM1NzI0NDUzMTcmNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzZdKzc2MDI5MTg5JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGNeZV5mKStkWzldKzM2NTQ2MDI4MDkmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbMTJdK1xuMzg3MzE1MTQ2MSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxoPj4+MjEpO2g9ZSsoZl5iXmMpK2RbMTVdKzUzMDc0MjUyMCY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbMl0rMzI5OTYyODY0NSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhlXihjfH5mKSkrZFswXSs0MDk2MzM2NDUyJjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzddKzExMjY4OTE0MTUmNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzE0XSsyODc4NjEyMzkxJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFs1XSs0MjM3NTMzMjQxJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSk7aD1iKyhlXihjfH5mKSkrZFsxMl0rMTcwMDQ4NTU3MSZcbjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzNdKzIzOTk5ODA2OTAmNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzEwXSs0MjkzOTE1NzczJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFsxXSsyMjQwMDQ0NDk3JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSk7aD1iKyhlXihjfH5mKSkrZFs4XSsxODczMzEzMzU5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzE1XSs0MjY0MzU1NTUyJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFs2XSsyNzM0NzY4OTE2JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFsxM10rMTMwOTE1MTY0OSZcbjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSk7aD1iKyhlXihjfH5mKSkrZFs0XSs0MTQ5NDQ0MjI2JjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzExXSszMTc0NzU2OTE3JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFsyXSs3MTg3ODcyNTkmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzldKzM5NTE0ODE3NDUmNDI5NDk2NzI5NTthLmdbMF09YS5nWzBdK2ImNDI5NDk2NzI5NTthLmdbMV09YS5nWzFdKyhlKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSkpJjQyOTQ5NjcyOTU7YS5nWzJdPWEuZ1syXStlJjQyOTQ5NjcyOTU7YS5nWzNdPWEuZ1szXStmJjQyOTQ5NjcyOTU7fVxuUy5wcm90b3R5cGUuaj1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPWEubGVuZ3RoKTtmb3IodmFyIGM9Yi10aGlzLmJsb2NrU2l6ZSxkPXRoaXMubSxlPXRoaXMuaCxmPTA7ZjxiOyl7aWYoMD09ZSlmb3IoO2Y8PWM7KVNkKHRoaXMsYSxmKSxmKz10aGlzLmJsb2NrU2l6ZTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpZm9yKDtmPGI7KXtpZihkW2UrK109YS5jaGFyQ29kZUF0KGYrKyksZT09dGhpcy5ibG9ja1NpemUpe1NkKHRoaXMsZCk7ZT0wO2JyZWFrfX1lbHNlIGZvcig7ZjxiOylpZihkW2UrK109YVtmKytdLGU9PXRoaXMuYmxvY2tTaXplKXtTZCh0aGlzLGQpO2U9MDticmVha319dGhpcy5oPWU7dGhpcy5pKz1iO307XG5TLnByb3RvdHlwZS5sPWZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkoKDU2PnRoaXMuaD90aGlzLmJsb2NrU2l6ZToyKnRoaXMuYmxvY2tTaXplKS10aGlzLmgpO2FbMF09MTI4O2Zvcih2YXIgYj0xO2I8YS5sZW5ndGgtODsrK2IpYVtiXT0wO3ZhciBjPTgqdGhpcy5pO2ZvcihiPWEubGVuZ3RoLTg7YjxhLmxlbmd0aDsrK2IpYVtiXT1jJjI1NSxjLz0yNTY7dGhpcy5qKGEpO2E9QXJyYXkoMTYpO2ZvcihiPWM9MDs0PmI7KytiKWZvcih2YXIgZD0wOzMyPmQ7ZCs9OClhW2MrK109dGhpcy5nW2JdPj4+ZCYyNTU7cmV0dXJuIGF9O2Z1bmN0aW9uIFQoYSxiKXt0aGlzLmg9Yjtmb3IodmFyIGM9W10sZD0hMCxlPWEubGVuZ3RoLTE7MDw9ZTtlLS0pe3ZhciBmPWFbZV18MDtkJiZmPT1ifHwoY1tlXT1mLGQ9ITEpO310aGlzLmc9Yzt9dmFyIHNhPXt9O2Z1bmN0aW9uIFRkKGEpe3JldHVybiAtMTI4PD1hJiYxMjg+YT9yYShhLGZ1bmN0aW9uKGIpe3JldHVybiBuZXcgVChbYnwwXSwwPmI/LTE6MCl9KTpuZXcgVChbYXwwXSwwPmE/LTE6MCl9ZnVuY3Rpb24gVShhKXtpZihpc05hTihhKXx8IWlzRmluaXRlKGEpKXJldHVybiBWO2lmKDA+YSlyZXR1cm4gVyhVKC1hKSk7Zm9yKHZhciBiPVtdLGM9MSxkPTA7YT49YztkKyspYltkXT1hL2N8MCxjKj1VZDtyZXR1cm4gbmV3IFQoYiwwKX1cbmZ1bmN0aW9uIFZkKGEsYil7aWYoMD09YS5sZW5ndGgpdGhyb3cgRXJyb3IoXCJudW1iZXIgZm9ybWF0IGVycm9yOiBlbXB0eSBzdHJpbmdcIik7Yj1ifHwxMDtpZigyPmJ8fDM2PGIpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2IpO2lmKFwiLVwiPT1hLmNoYXJBdCgwKSlyZXR1cm4gVyhWZChhLnN1YnN0cmluZygxKSxiKSk7aWYoMDw9YS5pbmRleE9mKFwiLVwiKSl0aHJvdyBFcnJvcignbnVtYmVyIGZvcm1hdCBlcnJvcjogaW50ZXJpb3IgXCItXCIgY2hhcmFjdGVyJyk7Zm9yKHZhciBjPVUoTWF0aC5wb3coYiw4KSksZD1WLGU9MDtlPGEubGVuZ3RoO2UrPTgpe3ZhciBmPU1hdGgubWluKDgsYS5sZW5ndGgtZSksaD1wYXJzZUludChhLnN1YnN0cmluZyhlLGUrZiksYik7OD5mPyhmPVUoTWF0aC5wb3coYixmKSksZD1kLlIoZikuYWRkKFUoaCkpKTooZD1kLlIoYyksZD1kLmFkZChVKGgpKSk7fXJldHVybiBkfVxudmFyIFVkPTQyOTQ5NjcyOTYsVj1UZCgwKSxXZD1UZCgxKSxYZD1UZCgxNjc3NzIxNik7az1ULnByb3RvdHlwZTtrLmVhPWZ1bmN0aW9uKCl7aWYoWCh0aGlzKSlyZXR1cm4gLVcodGhpcykuZWEoKTtmb3IodmFyIGE9MCxiPTEsYz0wO2M8dGhpcy5nLmxlbmd0aDtjKyspe3ZhciBkPXRoaXMuRChjKTthKz0oMDw9ZD9kOlVkK2QpKmI7Yio9VWQ7fXJldHVybiBhfTtcbmsudG9TdHJpbmc9ZnVuY3Rpb24oYSl7YT1hfHwxMDtpZigyPmF8fDM2PGEpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2EpO2lmKFkodGhpcykpcmV0dXJuIFwiMFwiO2lmKFgodGhpcykpcmV0dXJuIFwiLVwiK1codGhpcykudG9TdHJpbmcoYSk7Zm9yKHZhciBiPVUoTWF0aC5wb3coYSw2KSksYz10aGlzLGQ9XCJcIjs7KXt2YXIgZT1ZZChjLGIpLmc7Yz1aZChjLGUuUihiKSk7dmFyIGY9KCgwPGMuZy5sZW5ndGg/Yy5nWzBdOmMuaCk+Pj4wKS50b1N0cmluZyhhKTtjPWU7aWYoWShjKSlyZXR1cm4gZitkO2Zvcig7Nj5mLmxlbmd0aDspZj1cIjBcIitmO2Q9ZitkO319O2suRD1mdW5jdGlvbihhKXtyZXR1cm4gMD5hPzA6YTx0aGlzLmcubGVuZ3RoP3RoaXMuZ1thXTp0aGlzLmh9O2Z1bmN0aW9uIFkoYSl7aWYoMCE9YS5oKXJldHVybiAhMTtmb3IodmFyIGI9MDtiPGEuZy5sZW5ndGg7YisrKWlmKDAhPWEuZ1tiXSlyZXR1cm4gITE7cmV0dXJuICEwfVxuZnVuY3Rpb24gWChhKXtyZXR1cm4gLTE9PWEuaH1rLlg9ZnVuY3Rpb24oYSl7YT1aZCh0aGlzLGEpO3JldHVybiBYKGEpPy0xOlkoYSk/MDoxfTtmdW5jdGlvbiBXKGEpe2Zvcih2YXIgYj1hLmcubGVuZ3RoLGM9W10sZD0wO2Q8YjtkKyspY1tkXT1+YS5nW2RdO3JldHVybiAobmV3IFQoYyx+YS5oKSkuYWRkKFdkKX1rLmFicz1mdW5jdGlvbigpe3JldHVybiBYKHRoaXMpP1codGhpcyk6dGhpc307ay5hZGQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsYS5nLmxlbmd0aCksYz1bXSxkPTAsZT0wO2U8PWI7ZSsrKXt2YXIgZj1kKyh0aGlzLkQoZSkmNjU1MzUpKyhhLkQoZSkmNjU1MzUpLGg9KGY+Pj4xNikrKHRoaXMuRChlKT4+PjE2KSsoYS5EKGUpPj4+MTYpO2Q9aD4+PjE2O2YmPTY1NTM1O2gmPTY1NTM1O2NbZV09aDw8MTZ8Zjt9cmV0dXJuIG5ldyBUKGMsY1tjLmxlbmd0aC0xXSYtMjE0NzQ4MzY0OD8tMTowKX07XG5mdW5jdGlvbiBaZChhLGIpe3JldHVybiBhLmFkZChXKGIpKX1cbmsuUj1mdW5jdGlvbihhKXtpZihZKHRoaXMpfHxZKGEpKXJldHVybiBWO2lmKFgodGhpcykpcmV0dXJuIFgoYSk/Vyh0aGlzKS5SKFcoYSkpOlcoVyh0aGlzKS5SKGEpKTtpZihYKGEpKXJldHVybiBXKHRoaXMuUihXKGEpKSk7aWYoMD50aGlzLlgoWGQpJiYwPmEuWChYZCkpcmV0dXJuIFUodGhpcy5lYSgpKmEuZWEoKSk7Zm9yKHZhciBiPXRoaXMuZy5sZW5ndGgrYS5nLmxlbmd0aCxjPVtdLGQ9MDtkPDIqYjtkKyspY1tkXT0wO2ZvcihkPTA7ZDx0aGlzLmcubGVuZ3RoO2QrKylmb3IodmFyIGU9MDtlPGEuZy5sZW5ndGg7ZSsrKXt2YXIgZj10aGlzLkQoZCk+Pj4xNixoPXRoaXMuRChkKSY2NTUzNSxuPWEuRChlKT4+PjE2LHQ9YS5EKGUpJjY1NTM1O2NbMipkKzIqZV0rPWgqdDskZChjLDIqZCsyKmUpO2NbMipkKzIqZSsxXSs9Zip0OyRkKGMsMipkKzIqZSsxKTtjWzIqZCsyKmUrMV0rPWgqbjskZChjLDIqZCsyKmUrMSk7Y1syKmQrMiplKzJdKz1mKm47JGQoYywyKmQrMiplKzIpO31mb3IoZD1cbjA7ZDxiO2QrKyljW2RdPWNbMipkKzFdPDwxNnxjWzIqZF07Zm9yKGQ9YjtkPDIqYjtkKyspY1tkXT0wO3JldHVybiBuZXcgVChjLDApfTtmdW5jdGlvbiAkZChhLGIpe2Zvcig7KGFbYl0mNjU1MzUpIT1hW2JdOylhW2IrMV0rPWFbYl0+Pj4xNixhW2JdJj02NTUzNSxiKys7fWZ1bmN0aW9uIGFlKGEsYil7dGhpcy5nPWE7dGhpcy5oPWI7fVxuZnVuY3Rpb24gWWQoYSxiKXtpZihZKGIpKXRocm93IEVycm9yKFwiZGl2aXNpb24gYnkgemVyb1wiKTtpZihZKGEpKXJldHVybiBuZXcgYWUoVixWKTtpZihYKGEpKXJldHVybiBiPVlkKFcoYSksYiksbmV3IGFlKFcoYi5nKSxXKGIuaCkpO2lmKFgoYikpcmV0dXJuIGI9WWQoYSxXKGIpKSxuZXcgYWUoVyhiLmcpLGIuaCk7aWYoMzA8YS5nLmxlbmd0aCl7aWYoWChhKXx8WChiKSl0aHJvdyBFcnJvcihcInNsb3dEaXZpZGVfIG9ubHkgd29ya3Mgd2l0aCBwb3NpdGl2ZSBpbnRlZ2Vycy5cIik7Zm9yKHZhciBjPVdkLGQ9YjswPj1kLlgoYSk7KWM9YmUoYyksZD1iZShkKTt2YXIgZT1aKGMsMSksZj1aKGQsMSk7ZD1aKGQsMik7Zm9yKGM9WihjLDIpOyFZKGQpOyl7dmFyIGg9Zi5hZGQoZCk7MD49aC5YKGEpJiYoZT1lLmFkZChjKSxmPWgpO2Q9WihkLDEpO2M9WihjLDEpO31iPVpkKGEsZS5SKGIpKTtyZXR1cm4gbmV3IGFlKGUsYil9Zm9yKGU9VjswPD1hLlgoYik7KXtjPU1hdGgubWF4KDEsTWF0aC5mbG9vcihhLmVhKCkvXG5iLmVhKCkpKTtkPU1hdGguY2VpbChNYXRoLmxvZyhjKS9NYXRoLkxOMik7ZD00OD49ZD8xOk1hdGgucG93KDIsZC00OCk7Zj1VKGMpO2ZvcihoPWYuUihiKTtYKGgpfHwwPGguWChhKTspYy09ZCxmPVUoYyksaD1mLlIoYik7WShmKSYmKGY9V2QpO2U9ZS5hZGQoZik7YT1aZChhLGgpO31yZXR1cm4gbmV3IGFlKGUsYSl9ay5nYj1mdW5jdGlvbihhKXtyZXR1cm4gWWQodGhpcyxhKS5ofTtrLmFuZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09dGhpcy5EKGQpJmEuRChkKTtyZXR1cm4gbmV3IFQoYyx0aGlzLmgmYS5oKX07ay5vcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09dGhpcy5EKGQpfGEuRChkKTtyZXR1cm4gbmV3IFQoYyx0aGlzLmh8YS5oKX07XG5rLnhvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09dGhpcy5EKGQpXmEuRChkKTtyZXR1cm4gbmV3IFQoYyx0aGlzLmheYS5oKX07ZnVuY3Rpb24gYmUoYSl7Zm9yKHZhciBiPWEuZy5sZW5ndGgrMSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09YS5EKGQpPDwxfGEuRChkLTEpPj4+MzE7cmV0dXJuIG5ldyBUKGMsYS5oKX1mdW5jdGlvbiBaKGEsYil7dmFyIGM9Yj4+NTtiJT0zMjtmb3IodmFyIGQ9YS5nLmxlbmd0aC1jLGU9W10sZj0wO2Y8ZDtmKyspZVtmXT0wPGI/YS5EKGYrYyk+Pj5ifGEuRChmK2MrMSk8PDMyLWI6YS5EKGYrYyk7cmV0dXJuIG5ldyBUKGUsYS5oKX1PZC5wcm90b3R5cGUuY3JlYXRlV2ViQ2hhbm5lbD1PZC5wcm90b3R5cGUuZztRLnByb3RvdHlwZS5zZW5kPVEucHJvdG90eXBlLnU7US5wcm90b3R5cGUub3Blbj1RLnByb3RvdHlwZS5tO1EucHJvdG90eXBlLmNsb3NlPVEucHJvdG90eXBlLmNsb3NlO1NiLk5PX0VSUk9SPTA7U2IuVElNRU9VVD04O1NiLkhUVFBfRVJST1I9NjtUYi5DT01QTEVURT1cImNvbXBsZXRlXCI7V2IuRXZlbnRUeXBlPVhiO1hiLk9QRU49XCJhXCI7WGIuQ0xPU0U9XCJiXCI7WGIuRVJST1I9XCJjXCI7WGIuTUVTU0FHRT1cImRcIjtCLnByb3RvdHlwZS5saXN0ZW49Qi5wcm90b3R5cGUuTztQLnByb3RvdHlwZS5saXN0ZW5PbmNlPVAucHJvdG90eXBlLlA7UC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yPVAucHJvdG90eXBlLlNhO1AucHJvdG90eXBlLmdldExhc3RFcnJvckNvZGU9UC5wcm90b3R5cGUuSWE7UC5wcm90b3R5cGUuZ2V0U3RhdHVzPVAucHJvdG90eXBlLmRhO1AucHJvdG90eXBlLmdldFJlc3BvbnNlSnNvbj1QLnByb3RvdHlwZS5XYTtcblAucHJvdG90eXBlLmdldFJlc3BvbnNlVGV4dD1QLnByb3RvdHlwZS5qYTtQLnByb3RvdHlwZS5zZW5kPVAucHJvdG90eXBlLmhhO1AucHJvdG90eXBlLnNldFdpdGhDcmVkZW50aWFscz1QLnByb3RvdHlwZS5PYTtTLnByb3RvdHlwZS5kaWdlc3Q9Uy5wcm90b3R5cGUubDtTLnByb3RvdHlwZS5yZXNldD1TLnByb3RvdHlwZS5yZXNldDtTLnByb3RvdHlwZS51cGRhdGU9Uy5wcm90b3R5cGUuajtULnByb3RvdHlwZS5hZGQ9VC5wcm90b3R5cGUuYWRkO1QucHJvdG90eXBlLm11bHRpcGx5PVQucHJvdG90eXBlLlI7VC5wcm90b3R5cGUubW9kdWxvPVQucHJvdG90eXBlLmdiO1QucHJvdG90eXBlLmNvbXBhcmU9VC5wcm90b3R5cGUuWDtULnByb3RvdHlwZS50b051bWJlcj1ULnByb3RvdHlwZS5lYTtULnByb3RvdHlwZS50b1N0cmluZz1ULnByb3RvdHlwZS50b1N0cmluZztULnByb3RvdHlwZS5nZXRCaXRzPVQucHJvdG90eXBlLkQ7VC5mcm9tTnVtYmVyPVU7VC5mcm9tU3RyaW5nPVZkO1xudmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgT2R9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE1iKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVNiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVRiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1FO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3hiOjAsQWI6MSxCYjoyLFViOjMsWmI6NCxXYjo1LFhiOjYsVmI6NyxUYjo4LFliOjksUFJPWFk6MTAsTk9QUk9YWToxMSxSYjoxMixOYjoxMyxPYjoxNCxNYjoxNSxQYjoxNixRYjoxNyx0YjoxOCxzYjoxOSx1YjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1sZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPVdiO3ZhciBYaHJJbyA9IGVzbS5YaHJJbz1QO3ZhciBNZDUgPSBlc20uTWQ1PVM7dmFyIEludGVnZXIgPSBlc20uSW50ZWdlcj1UO1xuXG5leHBvcnQgeyBFcnJvckNvZGUsIEV2ZW50LCBFdmVudFR5cGUsIEZldGNoWG1sSHR0cEZhY3RvcnksIEludGVnZXIsIE1kNSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEZpcmViYXNlRXJyb3IsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldFVBLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNTYWZhcmkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBJbnRlZ2VyLCBYaHJJbywgRXZlbnRUeXBlLCBFcnJvckNvZGUsIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGdldFN0YXRFdmVudFRhcmdldCwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgV2ViQ2hhbm5lbCwgRXZlbnQsIFN0YXQsIE1kNSB9IGZyb20gJ0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXInO1xuXG5jb25zdCBTID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxuICogcmVhZGFibGUuXG4gKi9cbmNsYXNzIFVzZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy51aWQgPSBlO1xuICAgIH1cbiAgICBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMudWlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxuICAgICAqIGRpY3Rpb25hcnkuXG4gICAgICovICAgIHRvS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSA/IFwidWlkOlwiICsgdGhpcy51aWQgOiBcImFub255bW91cy11c2VyXCI7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZS51aWQgPT09IHRoaXMudWlkO1xuICAgIH1cbn1cblxuLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovIFVzZXIuVU5BVVRIRU5USUNBVEVEID0gbmV3IFVzZXIobnVsbCksIFxuLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3Jcbi8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxuVXNlci5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgVXNlcihcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksIFVzZXIuRklSU1RfUEFSVFkgPSBuZXcgVXNlcihcImZpcnN0LXBhcnR5LXVpZFwiKSwgXG5Vc2VyLk1PQ0tfVVNFUiA9IG5ldyBVc2VyKFwibW9jay11c2VyXCIpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IGIgPSBcIjEwLjEuMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgRCA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIHtcbiAgICByZXR1cm4gRC5sb2dMZXZlbDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSB2ZXJib3NpdHkgb2YgQ2xvdWQgRmlyZXN0b3JlIGxvZ3MgKGRlYnVnLCBlcnJvciwgb3Igc2lsZW50KS5cbiAqXG4gKiBAcGFyYW0gbG9nTGV2ZWwgLSBUaGUgdmVyYm9zaXR5IHlvdSBzZXQgZm9yIGFjdGl2aXR5IGFuZCBlcnJvciBsb2dnaW5nLiBDYW5cbiAqICAgYmUgYW55IG9mIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICpcbiAqICAgPHVsPlxuICogICAgIDxsaT5gZGVidWdgIGZvciB0aGUgbW9zdCB2ZXJib3NlIGxvZ2dpbmcgbGV2ZWwsIHByaW1hcmlseSBmb3JcbiAqICAgICBkZWJ1Z2dpbmcuPC9saT5cbiAqICAgICA8bGk+YGVycm9yYCB0byBsb2cgZXJyb3JzIG9ubHkuPC9saT5cbiAqICAgICA8bGk+PGNvZGU+YHNpbGVudGAgdG8gdHVybiBvZmYgbG9nZ2luZy48L2xpPlxuICogICA8L3VsPlxuICovIGZ1bmN0aW9uIHNldExvZ0xldmVsKGUpIHtcbiAgICBELnNldExvZ0xldmVsKGUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9nRGVidWcoZSwgLi4udCkge1xuICAgIGlmIChELmxvZ0xldmVsIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcChfX1BSSVZBVEVfYXJnVG9TdHJpbmcpO1xuICAgICAgICBELmRlYnVnKGBGaXJlc3RvcmUgKCR7Yn0pOiAke2V9YCwgLi4ubik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9nRXJyb3IoZSwgLi4udCkge1xuICAgIGlmIChELmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcChfX1BSSVZBVEVfYXJnVG9TdHJpbmcpO1xuICAgICAgICBELmVycm9yKGBGaXJlc3RvcmUgKCR7Yn0pOiAke2V9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2dXYXJuKGUsIC4uLnQpIHtcbiAgICBpZiAoRC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcChfX1BSSVZBVEVfYXJnVG9TdHJpbmcpO1xuICAgICAgICBELndhcm4oYEZpcmVzdG9yZSAoJHtifSk6ICR7ZX1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYWRkaXRpb25hbCBsb2cgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcmdUb1N0cmluZyhlKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBlO1xuICAgIHRyeSB7XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8qKiBGb3JtYXRzIGFuIG9iamVjdCBhcyBhIEpTT04gc3RyaW5nLCBzdWl0YWJsZSBmb3IgbG9nZ2luZy4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9mb3JtYXRKU09OKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlKTtcbiAgICAgICAgfShlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKlxuICogUmV0dXJucyBgbmV2ZXJgIGFuZCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcbiAqIEBleGFtcGxlXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xuICovIGZ1bmN0aW9uIGZhaWwoZSA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgY29uc3QgdCA9IGBGSVJFU1RPUkUgKCR7Yn0pIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyBlO1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxuICAgIHRocm93IF9fUFJJVkFURV9sb2dFcnJvcih0KSwgbmV3IEVycm9yKHQpO1xufVxuXG4vKipcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXG4gKlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUsIHQpIHtcbiAgICBlIHx8IGZhaWwoKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlYnVnQXNzZXJ0KGUsIHQpIHtcbiAgICBlIHx8IGZhaWwoKTtcbn1cblxuLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAuIEluIG5vbi1wcm9kdWN0aW9uIGJ1aWxkcywgdmVyaWZpZXMgdGhhdCBgb2JqYCBpcyBhblxuICogaW5zdGFuY2Ugb2YgYFRgIGJlZm9yZSBjYXN0aW5nLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxudCkge1xuICAgIHJldHVybiBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB2ID0ge1xuICAgIC8vIENhdXNlcyBhcmUgY29waWVkIGZyb206XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAgICAvKiogTm90IGFuIGVycm9yOyByZXR1cm5lZCBvbiBzdWNjZXNzLiAqL1xuICAgIE9LOiBcIm9rXCIsXG4gICAgLyoqIFRoZSBvcGVyYXRpb24gd2FzIGNhbmNlbGxlZCAodHlwaWNhbGx5IGJ5IHRoZSBjYWxsZXIpLiAqL1xuICAgIENBTkNFTExFRDogXCJjYW5jZWxsZWRcIixcbiAgICAvKiogVW5rbm93biBlcnJvciBvciBhbiBlcnJvciBmcm9tIGEgZGlmZmVyZW50IGVycm9yIGRvbWFpbi4gKi9cbiAgICBVTktOT1dOOiBcInVua25vd25cIixcbiAgICAvKipcbiAgICAgKiBDbGllbnQgc3BlY2lmaWVkIGFuIGludmFsaWQgYXJndW1lbnQuIE5vdGUgdGhhdCB0aGlzIGRpZmZlcnMgZnJvbVxuICAgICAqIEZBSUxFRF9QUkVDT05ESVRJT04uIElOVkFMSURfQVJHVU1FTlQgaW5kaWNhdGVzIGFyZ3VtZW50cyB0aGF0IGFyZVxuICAgICAqIHByb2JsZW1hdGljIHJlZ2FyZGxlc3Mgb2YgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0gKGUuZy4sIGEgbWFsZm9ybWVkIGZpbGVcbiAgICAgKiBuYW1lKS5cbiAgICAgKi9cbiAgICBJTlZBTElEX0FSR1VNRU5UOiBcImludmFsaWQtYXJndW1lbnRcIixcbiAgICAvKipcbiAgICAgKiBEZWFkbGluZSBleHBpcmVkIGJlZm9yZSBvcGVyYXRpb24gY291bGQgY29tcGxldGUuIEZvciBvcGVyYXRpb25zIHRoYXRcbiAgICAgKiBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0sIHRoaXMgZXJyb3IgbWF5IGJlIHJldHVybmVkIGV2ZW4gaWYgdGhlXG4gICAgICogb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiBGb3IgZXhhbXBsZSwgYSBzdWNjZXNzZnVsIHJlc3BvbnNlXG4gICAgICogZnJvbSBhIHNlcnZlciBjb3VsZCBoYXZlIGJlZW4gZGVsYXllZCBsb25nIGVub3VnaCBmb3IgdGhlIGRlYWRsaW5lIHRvXG4gICAgICogZXhwaXJlLlxuICAgICAqL1xuICAgIERFQURMSU5FX0VYQ0VFREVEOiBcImRlYWRsaW5lLWV4Y2VlZGVkXCIsXG4gICAgLyoqIFNvbWUgcmVxdWVzdGVkIGVudGl0eSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIHdhcyBub3QgZm91bmQuICovXG4gICAgTk9UX0ZPVU5EOiBcIm5vdC1mb3VuZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgZW50aXR5IHRoYXQgd2UgYXR0ZW1wdGVkIHRvIGNyZWF0ZSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIGFscmVhZHlcbiAgICAgKiBleGlzdHMuXG4gICAgICovXG4gICAgQUxSRUFEWV9FWElTVFM6IFwiYWxyZWFkeS1leGlzdHNcIixcbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGVyIGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiB0byBleGVjdXRlIHRoZSBzcGVjaWZpZWQgb3BlcmF0aW9uLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgZm9yIHJlamVjdGlvbnMgY2F1c2VkIGJ5IGV4aGF1c3RpbmdcbiAgICAgKiBzb21lIHJlc291cmNlICh1c2UgUkVTT1VSQ0VfRVhIQVVTVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBpZiB0aGUgY2FsbGVyIGNhbiBub3QgYmUgaWRlbnRpZmllZFxuICAgICAqICh1c2UgVU5BVVRIRU5USUNBVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICovXG4gICAgUEVSTUlTU0lPTl9ERU5JRUQ6IFwicGVybWlzc2lvbi1kZW5pZWRcIixcbiAgICAvKipcbiAgICAgKiBUaGUgcmVxdWVzdCBkb2VzIG5vdCBoYXZlIHZhbGlkIGF1dGhlbnRpY2F0aW9uIGNyZWRlbnRpYWxzIGZvciB0aGVcbiAgICAgKiBvcGVyYXRpb24uXG4gICAgICovXG4gICAgVU5BVVRIRU5USUNBVEVEOiBcInVuYXV0aGVudGljYXRlZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgcmVzb3VyY2UgaGFzIGJlZW4gZXhoYXVzdGVkLCBwZXJoYXBzIGEgcGVyLXVzZXIgcXVvdGEsIG9yIHBlcmhhcHMgdGhlXG4gICAgICogZW50aXJlIGZpbGUgc3lzdGVtIGlzIG91dCBvZiBzcGFjZS5cbiAgICAgKi9cbiAgICBSRVNPVVJDRV9FWEhBVVNURUQ6IFwicmVzb3VyY2UtZXhoYXVzdGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyByZWplY3RlZCBiZWNhdXNlIHRoZSBzeXN0ZW0gaXMgbm90IGluIGEgc3RhdGUgcmVxdWlyZWQgZm9yXG4gICAgICogdGhlIG9wZXJhdGlvbidzIGV4ZWN1dGlvbi4gRm9yIGV4YW1wbGUsIGRpcmVjdG9yeSB0byBiZSBkZWxldGVkIG1heSBiZVxuICAgICAqIG5vbi1lbXB0eSwgYW4gcm1kaXIgb3BlcmF0aW9uIGlzIGFwcGxpZWQgdG8gYSBub24tZGlyZWN0b3J5LCBldGMuXG4gICAgICpcbiAgICAgKiBBIGxpdG11cyB0ZXN0IHRoYXQgbWF5IGhlbHAgYSBzZXJ2aWNlIGltcGxlbWVudG9yIGluIGRlY2lkaW5nXG4gICAgICogYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELCBhbmQgVU5BVkFJTEFCTEU6XG4gICAgICogIChhKSBVc2UgVU5BVkFJTEFCTEUgaWYgdGhlIGNsaWVudCBjYW4gcmV0cnkganVzdCB0aGUgZmFpbGluZyBjYWxsLlxuICAgICAqICAoYikgVXNlIEFCT1JURUQgaWYgdGhlIGNsaWVudCBzaG91bGQgcmV0cnkgYXQgYSBoaWdoZXItbGV2ZWxcbiAgICAgKiAgICAgIChlLmcuLCByZXN0YXJ0aW5nIGEgcmVhZC1tb2RpZnktd3JpdGUgc2VxdWVuY2UpLlxuICAgICAqICAoYykgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVudGlsXG4gICAgICogICAgICB0aGUgc3lzdGVtIHN0YXRlIGhhcyBiZWVuIGV4cGxpY2l0bHkgZml4ZWQuIEUuZy4sIGlmIGFuIFwicm1kaXJcIlxuICAgICAqICAgICAgZmFpbHMgYmVjYXVzZSB0aGUgZGlyZWN0b3J5IGlzIG5vbi1lbXB0eSwgRkFJTEVEX1BSRUNPTkRJVElPTlxuICAgICAqICAgICAgc2hvdWxkIGJlIHJldHVybmVkIHNpbmNlIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bmxlc3NcbiAgICAgKiAgICAgIHRoZXkgaGF2ZSBmaXJzdCBmaXhlZCB1cCB0aGUgZGlyZWN0b3J5IGJ5IGRlbGV0aW5nIGZpbGVzIGZyb20gaXQuXG4gICAgICogIChkKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHBlcmZvcm1zIGNvbmRpdGlvbmFsXG4gICAgICogICAgICBSRVNUIEdldC9VcGRhdGUvRGVsZXRlIG9uIGEgcmVzb3VyY2UgYW5kIHRoZSByZXNvdXJjZSBvbiB0aGVcbiAgICAgKiAgICAgIHNlcnZlciBkb2VzIG5vdCBtYXRjaCB0aGUgY29uZGl0aW9uLiBFLmcuLCBjb25mbGljdGluZ1xuICAgICAqICAgICAgcmVhZC1tb2RpZnktd3JpdGUgb24gdGhlIHNhbWUgcmVzb3VyY2UuXG4gICAgICovXG4gICAgRkFJTEVEX1BSRUNPTkRJVElPTjogXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIsXG4gICAgLyoqXG4gICAgICogVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZCwgdHlwaWNhbGx5IGR1ZSB0byBhIGNvbmN1cnJlbmN5IGlzc3VlIGxpa2VcbiAgICAgKiBzZXF1ZW5jZXIgY2hlY2sgZmFpbHVyZXMsIHRyYW5zYWN0aW9uIGFib3J0cywgZXRjLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIEFCT1JURUQ6IFwiYWJvcnRlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgYXR0ZW1wdGVkIHBhc3QgdGhlIHZhbGlkIHJhbmdlLiBFLmcuLCBzZWVraW5nIG9yIHJlYWRpbmdcbiAgICAgKiBwYXN0IGVuZCBvZiBmaWxlLlxuICAgICAqXG4gICAgICogVW5saWtlIElOVkFMSURfQVJHVU1FTlQsIHRoaXMgZXJyb3IgaW5kaWNhdGVzIGEgcHJvYmxlbSB0aGF0IG1heSBiZSBmaXhlZFxuICAgICAqIGlmIHRoZSBzeXN0ZW0gc3RhdGUgY2hhbmdlcy4gRm9yIGV4YW1wbGUsIGEgMzItYml0IGZpbGUgc3lzdGVtIHdpbGxcbiAgICAgKiBnZW5lcmF0ZSBJTlZBTElEX0FSR1VNRU5UIGlmIGFza2VkIHRvIHJlYWQgYXQgYW4gb2Zmc2V0IHRoYXQgaXMgbm90IGluIHRoZVxuICAgICAqIHJhbmdlIFswLDJeMzItMV0sIGJ1dCBpdCB3aWxsIGdlbmVyYXRlIE9VVF9PRl9SQU5HRSBpZiBhc2tlZCB0byByZWFkIGZyb21cbiAgICAgKiBhbiBvZmZzZXQgcGFzdCB0aGUgY3VycmVudCBmaWxlIHNpemUuXG4gICAgICpcbiAgICAgKiBUaGVyZSBpcyBhIGZhaXIgYml0IG9mIG92ZXJsYXAgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAqIE9VVF9PRl9SQU5HRS4gV2UgcmVjb21tZW5kIHVzaW5nIE9VVF9PRl9SQU5HRSAodGhlIG1vcmUgc3BlY2lmaWMgZXJyb3IpXG4gICAgICogd2hlbiBpdCBhcHBsaWVzIHNvIHRoYXQgY2FsbGVycyB3aG8gYXJlIGl0ZXJhdGluZyB0aHJvdWdoIGEgc3BhY2UgY2FuXG4gICAgICogZWFzaWx5IGxvb2sgZm9yIGFuIE9VVF9PRl9SQU5HRSBlcnJvciB0byBkZXRlY3Qgd2hlbiB0aGV5IGFyZSBkb25lLlxuICAgICAqL1xuICAgIE9VVF9PRl9SQU5HRTogXCJvdXQtb2YtcmFuZ2VcIixcbiAgICAvKiogT3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZCBvciBub3Qgc3VwcG9ydGVkL2VuYWJsZWQgaW4gdGhpcyBzZXJ2aWNlLiAqL1xuICAgIFVOSU1QTEVNRU5URUQ6IFwidW5pbXBsZW1lbnRlZFwiLFxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGVycm9ycy4gTWVhbnMgc29tZSBpbnZhcmlhbnRzIGV4cGVjdGVkIGJ5IHVuZGVybHlpbmcgU3lzdGVtIGhhc1xuICAgICAqIGJlZW4gYnJva2VuLiBJZiB5b3Ugc2VlIG9uZSBvZiB0aGVzZSBlcnJvcnMsIFNvbWV0aGluZyBpcyB2ZXJ5IGJyb2tlbi5cbiAgICAgKi9cbiAgICBJTlRFUk5BTDogXCJpbnRlcm5hbFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXJ2aWNlIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4gVGhpcyBpcyBhIG1vc3QgbGlrZWx5IGEgdHJhbnNpZW50XG4gICAgICogY29uZGl0aW9uIGFuZCBtYXkgYmUgY29ycmVjdGVkIGJ5IHJldHJ5aW5nIHdpdGggYSBiYWNrb2ZmLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIFVOQVZBSUxBQkxFOiBcInVuYXZhaWxhYmxlXCIsXG4gICAgLyoqIFVucmVjb3ZlcmFibGUgZGF0YSBsb3NzIG9yIGNvcnJ1cHRpb24uICovXG4gICAgREFUQV9MT1NTOiBcImRhdGEtbG9zc1wiXG59O1xuXG4vKiogQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBGaXJlc3RvcmVFcnJvciBleHRlbmRzIEZpcmViYXNlRXJyb3Ige1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGJhY2tlbmQgZXJyb3IgY29kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBlcnJvci5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBIGN1c3RvbSBlcnJvciBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICB0KSB7XG4gICAgICAgIHN1cGVyKGUsIHQpLCB0aGlzLmNvZGUgPSBlLCB0aGlzLm1lc3NhZ2UgPSB0LCBcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSAoKSA9PiBgJHt0aGlzLm5hbWV9OiBbY29kZT0ke3RoaXMuY29kZX1dOiAke3RoaXMubWVzc2FnZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX0RlZmVycmVkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKChlLCB0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSBlLCB0aGlzLnJlamVjdCA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9PQXV0aFRva2VuIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudXNlciA9IHQsIHRoaXMudHlwZSA9IFwiT0F1dGhcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYEJlYXJlciAke2V9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBfX1BSSVZBVEVfRW1wdHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlciB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHQoVXNlci5VTkFVVEhFTlRJQ0FURUQpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgcmV0dXJucyBhIGNvbnN0YW50IHRva2VuLiBVc2VkIGZvclxuICogZW11bGF0b3IgdG9rZW4gbW9ja2luZy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRW11bGF0b3JBdXRoQ3JlZGVudGlhbHNQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnRva2VuID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgdGhlIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBzZXRDaGFuZ2VMaXN0ZW5lcigpXG4gICAgICAgICAqIFRoaXMgaXNuJ3QgYWN0dWFsbHkgbmVjZXNzYXJ5IHNpbmNlIHRoZSBVSUQgbmV2ZXIgY2hhbmdlcywgYnV0IHdlIHVzZSB0aGlzXG4gICAgICAgICAqIHRvIHZlcmlmeSB0aGUgbGlzdGVuIGNvbnRyYWN0IGlzIGFkaGVyZWQgdG8gaW4gdGVzdHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy50b2tlbik7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gdCwgXG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdCh0aGlzLnRva2VuLnVzZXIpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9GaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudCA9IGUsIFxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBVc2VyLlVOQVVUSEVOVElDQVRFRCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudGVyIHVzZWQgdG8gZGV0ZWN0IGlmIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIGEgZ2V0VG9rZW4gcmVxdWVzdCB3YXNcbiAgICAgICAgICogb3V0c3RhbmRpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmkgPSAwLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPSBudWxsO1xuICAgIH1cbiAgICBzdGFydChlLCB0KSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5pO1xuICAgICAgICAvLyBBIGNoYW5nZSBsaXN0ZW5lciB0aGF0IHByZXZlbnRzIGRvdWJsZS1maXJpbmcgZm9yIHRoZSBzYW1lIHRva2VuIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBjb25zdCBfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyID0gZSA9PiB0aGlzLmkgIT09IG4gPyAobiA9IHRoaXMuaSwgXG4gICAgICAgIHQoZSkpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIC8vIEEgcHJvbWlzZSB0aGF0IGNhbiBiZSB3YWl0ZWQgb24gdG8gYmxvY2sgb24gdGhlIG5leHQgdG9rZW4gY2hhbmdlLlxuICAgICAgICAvLyBUaGlzIHByb21pc2UgaXMgcmUtY3JlYXRlZCBhZnRlciBlYWNoIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBsZXQgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHRoaXMubyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaSsrLCB0aGlzLmN1cnJlbnRVc2VyID0gdGhpcy51KCksIHIucmVzb2x2ZSgpLCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgXG4gICAgICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IF9fUFJJVkFURV9ndWFyZGVkQ2hhbmdlTGlzdGVuZXIodGhpcy5jdXJyZW50VXNlcikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgX19QUklWQVRFX2F3YWl0TmV4dFRva2VuID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IHI7XG4gICAgICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0LnByb21pc2UsIGF3YWl0IF9fUFJJVkFURV9ndWFyZGVkQ2hhbmdlTGlzdGVuZXIodGhpcy5jdXJyZW50VXNlcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sIF9fUFJJVkFURV9yZWdpc3RlckF1dGggPSBlID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIGRldGVjdGVkXCIpLCB0aGlzLmF1dGggPSBlLCBcbiAgICAgICAgICAgIHRoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pLCBfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50Lm9uSW5pdCgoZSA9PiBfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoKGUpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXV0aCByaWdodCBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsgYmVmb3JlIHdlXG4gICAgICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRvIHN0YXJ0IHVwIGluIHVuYXV0aGVudGljYXRlZCBtb2RlLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXV0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnQuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZSA/IF9fUFJJVkFURV9yZWdpc3RlckF1dGgoZSkgOiAoXG4gICAgICAgICAgICAgICAgLy8gSWYgYXV0aCBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGggYG51bGxgIHVzZXJcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBub3QgeWV0IGRldGVjdGVkXCIpLCBcbiAgICAgICAgICAgICAgICByLnJlc29sdmUoKSwgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCksIF9fUFJJVkFURV9hd2FpdE5leHRUb2tlbigpO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgLy8gVGFrZSBub3RlIG9mIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSB0b2tlbkNvdW50ZXIgc28gdGhhdCB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBjYW4gZmFpbCAod2l0aCBhbiBBQk9SVEVEIGVycm9yKSBpZiB0aGVyZSBpcyBhIHRva2VuIGNoYW5nZSB3aGlsZSB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCBpcyBvdXRzdGFuZGluZy5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuaSwgdCA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID8gdGhpcy5hdXRoLmdldFRva2VuKHQpLnRoZW4oKHQgPT4gXG4gICAgICAgIC8vIENhbmNlbCB0aGUgcmVxdWVzdCBzaW5jZSB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSB0aGUgcmVxdWVzdCB3YXNcbiAgICAgICAgLy8gb3V0c3RhbmRpbmcgc28gdGhlIHJlc3BvbnNlIGlzIHBvdGVudGlhbGx5IGZvciBhIHByZXZpb3VzIHVzZXIgKHdoaWNoXG4gICAgICAgIC8vIHVzZXIsIHdlIGNhbid0IGJlIHN1cmUpLlxuICAgICAgICB0aGlzLmkgIT09IGUgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcImdldFRva2VuIGFib3J0ZWQgZHVlIHRvIHRva2VuIGNoYW5nZS5cIiksIFxuICAgICAgICB0aGlzLmdldFRva2VuKCkpIDogdCA/IChfX1BSSVZBVEVfaGFyZEFzc2VydChcInN0cmluZ1wiID09IHR5cGVvZiB0LmFjY2Vzc1Rva2VuKSwgXG4gICAgICAgIG5ldyBfX1BSSVZBVEVfT0F1dGhUb2tlbih0LmFjY2Vzc1Rva2VuLCB0aGlzLmN1cnJlbnRVc2VyKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXV0aCAmJiB0aGlzLmF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG4gICAgLy8gQXV0aC5nZXRVaWQoKSBjYW4gcmV0dXJuIG51bGwgZXZlbiB3aXRoIGEgdXNlciBsb2dnZWQgaW4uIEl0IGlzIGJlY2F1c2VcbiAgICAvLyBnZXRVaWQoKSBpcyBzeW5jaHJvbm91cywgYnV0IHRoZSBhdXRoIGNvZGUgcG9wdWxhdGluZyBVaWQgaXMgYXN5bmNocm9ub3VzLlxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAvLyB0byBndWFyYW50ZWUgdG8gZ2V0IHRoZSBhY3R1YWwgdXNlci5cbiAgICB1KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgPT09IGUgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSksIG5ldyBVc2VyKGUpO1xuICAgIH1cbn1cblxuLypcbiAqIEZpcnN0UGFydHlUb2tlbiBwcm92aWRlcyBhIGZyZXNoIHRva2VuIGVhY2ggdGltZSBpdHMgdmFsdWVcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cbiAqIFRlY2huaWNhbGx5IHRoaXMgbWF5IG5vIGxvbmdlciBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIFNESyBzaG91bGQgZ3JhY2VmdWxseVxuICogcmVjb3ZlciBmcm9tIHVuYXV0aGVudGljYXRlZCBlcnJvcnMgKHNlZSBiLzMzMTQ3ODE4IGZvciBjb250ZXh0KSwgYnV0IGl0J3NcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxuICovIGNsYXNzIF9fUFJJVkFURV9GaXJzdFBhcnR5VG9rZW4ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5sID0gZSwgdGhpcy5oID0gdCwgdGhpcy5QID0gbiwgdGhpcy50eXBlID0gXCJGaXJzdFBhcnR5XCIsIHRoaXMudXNlciA9IFVzZXIuRklSU1RfUEFSVFksIFxuICAgICAgICB0aGlzLkkgPSBuZXcgTWFwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGFuIGF1dGhvcml6YXRpb24gdG9rZW4sIHVzaW5nIGEgcHJvdmlkZWQgZmFjdG9yeSBmdW5jdGlvbiwgb3IgcmV0dXJuXG4gICAgICogbnVsbC5cbiAgICAgKi8gICAgVCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUCA/IHRoaXMuUCgpIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IGhlYWRlcnMoKSB7XG4gICAgICAgIHRoaXMuSS5zZXQoXCJYLUdvb2ctQXV0aFVzZXJcIiwgdGhpcy5sKTtcbiAgICAgICAgLy8gVXNlIGFycmF5IG5vdGF0aW9uIHRvIHByZXZlbnQgbWluaWZpY2F0aW9uXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlQoKTtcbiAgICAgICAgcmV0dXJuIGUgJiYgdGhpcy5JLnNldChcIkF1dGhvcml6YXRpb25cIiwgZSksIHRoaXMuaCAmJiB0aGlzLkkuc2V0KFwiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCIsIHRoaXMuaCksIFxuICAgICAgICB0aGlzLkk7XG4gICAgfVxufVxuXG4vKlxuICogUHJvdmlkZXMgdXNlciBjcmVkZW50aWFscyByZXF1aXJlZCBmb3IgdGhlIEZpcmVzdG9yZSBKYXZhU2NyaXB0IFNES1xuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxuICogdG8gYXBwbGljYXRpb25zIGhvc3RlZCBieSBHb29nbGUuXG4gKi8gY2xhc3MgX19QUklWQVRFX0ZpcnN0UGFydHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmwgPSBlLCB0aGlzLmggPSB0LCB0aGlzLlAgPSBuO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgX19QUklWQVRFX0ZpcnN0UGFydHlUb2tlbih0aGlzLmwsIHRoaXMuaCwgdGhpcy5QKSk7XG4gICAgfVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdWlkLlxuICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHQoVXNlci5GSVJTVF9QQVJUWSkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG59XG5cbmNsYXNzIEFwcENoZWNrVG9rZW4ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGUsIHRoaXMudHlwZSA9IFwiQXBwQ2hlY2tcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgZSAmJiBlLmxlbmd0aCA+IDAgJiYgdGhpcy5oZWFkZXJzLnNldChcIngtZmlyZWJhc2UtYXBwY2hlY2tcIiwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5BID0gZSwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA9IG51bGwsIHRoaXMuUiA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgY29uc3Qgb25Ub2tlbkNoYW5nZWQgPSBlID0+IHtcbiAgICAgICAgICAgIG51bGwgIT0gZS5lcnJvciAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBgRXJyb3IgZ2V0dGluZyBBcHAgQ2hlY2sgdG9rZW47IHVzaW5nIHBsYWNlaG9sZGVyIHRva2VuIGluc3RlYWQuIEVycm9yOiAke2UuZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnRva2VuICE9PSB0aGlzLlI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5SID0gZS50b2tlbiwgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYFJlY2VpdmVkICR7biA/IFwibmV3XCIgOiBcImV4aXN0aW5nXCJ9IHRva2VuLmApLCBcbiAgICAgICAgICAgIG4gPyB0KGUudG9rZW4pIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubyA9IHQgPT4ge1xuICAgICAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBvblRva2VuQ2hhbmdlZCh0KSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBfX1BSSVZBVEVfcmVnaXN0ZXJBcHBDaGVjayA9IGUgPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBkZXRlY3RlZFwiKSwgdGhpcy5hcHBDaGVjayA9IGUsIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVjay5hZGRUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuQS5vbkluaXQoKGUgPT4gX19QUklWQVRFX3JlZ2lzdGVyQXBwQ2hlY2soZSkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBcHBDaGVjayBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hcHBDaGVjaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkEuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZSA/IF9fUFJJVkFURV9yZWdpc3RlckFwcENoZWNrKGUpIDogXG4gICAgICAgICAgICAgICAgLy8gSWYgQXBwQ2hlY2sgaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRob3V0IGl0LlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgbm90IHlldCBkZXRlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA/IHRoaXMuYXBwQ2hlY2suZ2V0VG9rZW4oZSkudGhlbigoZSA9PiBlID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwic3RyaW5nXCIgPT0gdHlwZW9mIGUudG9rZW4pLCBcbiAgICAgICAgdGhpcy5SID0gZS50b2tlbiwgbmV3IEFwcENoZWNrVG9rZW4oZS50b2tlbikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmFwcENoZWNrICYmIHRoaXMuYXBwQ2hlY2sucmVtb3ZlVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBBcHBDaGVjayB0b2tlbiBwcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBfX1BSSVZBVEVfRW1wdHlBcHBDaGVja1Rva2VuUHJvdmlkZXIge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBBcHBDaGVja1Rva2VuKFwiXCIpKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydChlLCB0KSB7fVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBCdWlsZHMgYSBDcmVkZW50aWFsc1Byb3ZpZGVyIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZlxuICogdGhlIGNyZWRlbnRpYWxzIHBhc3NlZCBpbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGBuQnl0ZXNgIG9mIHJhbmRvbSBieXRlcy5cbiAqXG4gKiBJZiBgbkJ5dGVzIDwgMGAgLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3JhbmRvbUJ5dGVzKGUpIHtcbiAgICAvLyBQb2x5ZmlsbHMgZm9yIElFIGFuZCBXZWJXb3JrZXIgYnkgdXNpbmcgYHNlbGZgIGFuZCBgbXNDcnlwdG9gIHdoZW4gYGNyeXB0b2AgaXMgbm90IGF2YWlsYWJsZS5cbiAgICBjb25zdCB0ID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZWxmICYmIChzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvKSwgbiA9IG5ldyBVaW50OEFycmF5KGUpO1xuICAgIGlmICh0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5nZXRSYW5kb21WYWx1ZXMpIHQuZ2V0UmFuZG9tVmFsdWVzKG4pOyBlbHNlIFxuICAgIC8vIEZhbGxzIGJhY2sgdG8gTWF0aC5yYW5kb21cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGU7IHQrKykgblt0XSA9IE1hdGguZmxvb3IoMjU2ICogTWF0aC5yYW5kb20oKSk7XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9BdXRvSWQge1xuICAgIHN0YXRpYyBWKCkge1xuICAgICAgICAvLyBBbHBoYW51bWVyaWMgY2hhcmFjdGVyc1xuICAgICAgICBjb25zdCBlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiLCB0ID0gTWF0aC5mbG9vcigyNTYgLyBlLmxlbmd0aCkgKiBlLmxlbmd0aDtcbiAgICAgICAgLy8gVGhlIGxhcmdlc3QgYnl0ZSB2YWx1ZSB0aGF0IGlzIGEgbXVsdGlwbGUgb2YgYGNoYXIubGVuZ3RoYC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IFwiXCI7XG4gICAgICAgIGZvciAoO24ubGVuZ3RoIDwgMjA7ICkge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9yYW5kb21CeXRlcyg0MCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHIubGVuZ3RoOyArK2kpIFxuICAgICAgICAgICAgLy8gT25seSBhY2NlcHQgdmFsdWVzIHRoYXQgYXJlIFswLCBtYXhNdWx0aXBsZSksIHRoaXMgZW5zdXJlcyB0aGV5IGNhblxuICAgICAgICAgICAgLy8gYmUgZXZlbmx5IG1hcHBlZCB0byBpbmRpY2VzIG9mIGBjaGFyc2AgdmlhIGEgbW9kdWxvIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIG4ubGVuZ3RoIDwgMjAgJiYgcltpXSA8IHQgJiYgKG4gKz0gZS5jaGFyQXQocltpXSAlIGUubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLCB0KSB7XG4gICAgcmV0dXJuIGUgPCB0ID8gLTEgOiBlID4gdCA/IDEgOiAwO1xufVxuXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgYXJyYXlzIHVzaW5nIGlzRXF1YWwoKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FycmF5RXF1YWxzKGUsIHQsIG4pIHtcbiAgICByZXR1cm4gZS5sZW5ndGggPT09IHQubGVuZ3RoICYmIGUuZXZlcnkoKChlLCByKSA9PiBuKGUsIHRbcl0pKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1tZWRpYXRlIGxleGljb2dyYXBoaWNhbGx5LWZvbGxvd2luZyBzdHJpbmcuIFRoaXMgaXMgdXNlZnVsIHRvXG4gKiBjb25zdHJ1Y3QgYW4gaW5jbHVzaXZlIHJhbmdlIGZvciBpbmRleGVkZGIgaXRlcmF0b3JzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbW1lZGlhdGVTdWNjZXNzb3IoZSkge1xuICAgIC8vIFJldHVybiB0aGUgaW5wdXQgc3RyaW5nLCB3aXRoIGFuIGFkZGl0aW9uYWwgTlVMIGJ5dGUgYXBwZW5kZWQuXG4gICAgcmV0dXJuIGUgKyBcIlxcMFwiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGVhcmxpZXN0IGRhdGUgc3VwcG9ydGVkIGJ5IEZpcmVzdG9yZSB0aW1lc3RhbXBzICgwMDAxLTAxLTAxVDAwOjAwOjAwWikuXG4vKipcbiAqIEEgYFRpbWVzdGFtcGAgcmVwcmVzZW50cyBhIHBvaW50IGluIHRpbWUgaW5kZXBlbmRlbnQgb2YgYW55IHRpbWUgem9uZSBvclxuICogY2FsZW5kYXIsIHJlcHJlc2VudGVkIGFzIHNlY29uZHMgYW5kIGZyYWN0aW9ucyBvZiBzZWNvbmRzIGF0IG5hbm9zZWNvbmRcbiAqIHJlc29sdXRpb24gaW4gVVRDIEVwb2NoIHRpbWUuXG4gKlxuICogSXQgaXMgZW5jb2RlZCB1c2luZyB0aGUgUHJvbGVwdGljIEdyZWdvcmlhbiBDYWxlbmRhciB3aGljaCBleHRlbmRzIHRoZVxuICogR3JlZ29yaWFuIGNhbGVuZGFyIGJhY2t3YXJkcyB0byB5ZWFyIG9uZS4gSXQgaXMgZW5jb2RlZCBhc3N1bWluZyBhbGwgbWludXRlc1xuICogYXJlIDYwIHNlY29uZHMgbG9uZywgaS5lLiBsZWFwIHNlY29uZHMgYXJlIFwic21lYXJlZFwiIHNvIHRoYXQgbm8gbGVhcCBzZWNvbmRcbiAqIHRhYmxlIGlzIG5lZWRlZCBmb3IgaW50ZXJwcmV0YXRpb24uIFJhbmdlIGlzIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAqIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi5cbiAqXG4gKiBGb3IgZXhhbXBsZXMgYW5kIGZ1cnRoZXIgc3BlY2lmaWNhdGlvbnMsIHJlZmVyIHRvIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvcHJvdG9idWYvYmxvYi9tYXN0ZXIvc3JjL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAucHJvdG8gfCBUaW1lc3RhbXAgZGVmaW5pdGlvbn0uXG4gKi9cbmNsYXNzIFRpbWVzdGFtcCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2Vjb25kcyAtIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLiBNdXN0IGJlIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAgICAgKiAgICAgOTk5OS0xMi0zMVQyMzo1OTo1OVogaW5jbHVzaXZlLlxuICAgICAqIEBwYXJhbSBuYW5vc2Vjb25kcyAtIFRoZSBub24tbmVnYXRpdmUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmRcbiAgICAgKiAgICAgcmVzb2x1dGlvbi4gTmVnYXRpdmUgc2Vjb25kIHZhbHVlcyB3aXRoIGZyYWN0aW9ucyBtdXN0IHN0aWxsIGhhdmVcbiAgICAgKiAgICAgbm9uLW5lZ2F0aXZlIG5hbm9zZWNvbmRzIHZhbHVlcyB0aGF0IGNvdW50IGZvcndhcmQgaW4gdGltZS4gTXVzdCBiZVxuICAgICAqICAgICBmcm9tIDAgdG8gOTk5LDk5OSw5OTkgaW5jbHVzaXZlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZCByZXNvbHV0aW9uLipcbiAgICAgKi9cbiAgICB0KSB7XG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMgPSBlLCB0aGlzLm5hbm9zZWNvbmRzID0gdCwgdCA8IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICAgICAgaWYgKHQgPj0gMWU5KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgICAgIGlmIChlIDwgLTYyMTM1NTk2ODAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgLy8gVGhpcyB3aWxsIGJyZWFrIGluIHRoZSB5ZWFyIDEwLDAwMC5cbiAgICAgICAgICAgICAgICBpZiAoZSA+PSAyNTM0MDIzMDA4MDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCB3aXRoIHRoZSBjdXJyZW50IGRhdGUsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBuZXcgdGltZXN0YW1wIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgbm93KCkge1xuICAgICAgICByZXR1cm4gVGltZXN0YW1wLmZyb21NaWxsaXMoRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGluaXRpYWxpemUgdGhlIGBUaW1lc3RhbXBgIGZyb20uXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBmcm9tRGF0ZShlKSB7XG4gICAgICAgIHJldHVybiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhlLmdldFRpbWUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWlsbGlzZWNvbmRzIC0gTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbU1pbGxpcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBNYXRoLmZsb29yKGUgLyAxZTMpLCBuID0gTWF0aC5mbG9vcigxZTYgKiAoZSAtIDFlMyAqIHQpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodCwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QuIFRoaXMgY29udmVyc2lvblxuICAgICAqIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uIHNpbmNlIGBEYXRlYCBvYmplY3RzIG9ubHkgc3VwcG9ydCBtaWxsaXNlY29uZFxuICAgICAqIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhc1xuICAgICAqICAgICB0aGlzIGBUaW1lc3RhbXBgLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKi8gICAgdG9EYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy50b01pbGxpcygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIG51bWVyaWMgdGltZXN0YW1wIChpbiBtaWxsaXNlY29uZHMgc2luY2VcbiAgICAgKiBlcG9jaCkuIFRoaXMgb3BlcmF0aW9uIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBvaW50IGluIHRpbWUgY29ycmVzcG9uZGluZyB0byB0aGlzIHRpbWVzdGFtcCwgcmVwcmVzZW50ZWQgYXNcbiAgICAgKiAgICAgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi8gICAgdG9NaWxsaXMoKSB7XG4gICAgICAgIHJldHVybiAxZTMgKiB0aGlzLnNlY29uZHMgKyB0aGlzLm5hbm9zZWNvbmRzIC8gMWU2O1xuICAgIH1cbiAgICBfY29tcGFyZVRvKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vjb25kcyA9PT0gZS5zZWNvbmRzID8gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5uYW5vc2Vjb25kcywgZS5uYW5vc2Vjb25kcykgOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLnNlY29uZHMsIGUuc2Vjb25kcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFRpbWVzdGFtcGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUuc2Vjb25kcyA9PT0gdGhpcy5zZWNvbmRzICYmIGUubmFub3NlY29uZHMgPT09IHRoaXMubmFub3NlY29uZHM7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdGV4dHVhbCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiVGltZXN0YW1wKHNlY29uZHM9XCIgKyB0aGlzLnNlY29uZHMgKyBcIiwgbmFub3NlY29uZHM9XCIgKyB0aGlzLm5hbm9zZWNvbmRzICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogdGhpcy5zZWNvbmRzLFxuICAgICAgICAgICAgbmFub3NlY29uZHM6IHRoaXMubmFub3NlY29uZHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBvYmplY3QgdG8gYSBwcmltaXRpdmUgc3RyaW5nLCB3aGljaCBhbGxvd3MgYFRpbWVzdGFtcGAgb2JqZWN0c1xuICAgICAqIHRvIGJlIGNvbXBhcmVkIHVzaW5nIHRoZSBgPmAsIGA8PWAsIGA+PWAgYW5kIGA+YCBvcGVyYXRvcnMuXG4gICAgICovICAgIHZhbHVlT2YoKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIHJldHVybnMgYSBzdHJpbmcgb2YgdGhlIGZvcm0gPHNlY29uZHM+LjxuYW5vc2Vjb25kcz4gd2hlcmVcbiAgICAgICAgLy8gPHNlY29uZHM+IGlzIHRyYW5zbGF0ZWQgdG8gaGF2ZSBhIG5vbi1uZWdhdGl2ZSB2YWx1ZSBhbmQgYm90aCA8c2Vjb25kcz5cbiAgICAgICAgLy8gYW5kIDxuYW5vc2Vjb25kcz4gYXJlIGxlZnQtcGFkZGVkIHdpdGggemVyb2VzIHRvIGJlIGEgY29uc2lzdGVudCBsZW5ndGguXG4gICAgICAgIC8vIFN0cmluZ3Mgd2l0aCB0aGlzIGZvcm1hdCB0aGVuIGhhdmUgYSBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZyB0aGF0IG1hdGNoZXNcbiAgICAgICAgLy8gdGhlIGV4cGVjdGVkIG9yZGVyaW5nLiBUaGUgPHNlY29uZHM+IHRyYW5zbGF0aW9uIGlzIGRvbmUgdG8gYXZvaWQgaGF2aW5nXG4gICAgICAgIC8vIGEgbGVhZGluZyBuZWdhdGl2ZSBzaWduIChpLmUuIGEgbGVhZGluZyAnLScgY2hhcmFjdGVyKSBpbiBpdHMgc3RyaW5nXG4gICAgICAgIC8vIHJlcHJlc2VudGF0aW9uLCB3aGljaCB3b3VsZCBhZmZlY3QgaXRzIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5zZWNvbmRzIC0gLTYyMTM1NTk2ODAwO1xuICAgICAgICAvLyBOb3RlOiBVcCB0byAxMiBkZWNpbWFsIGRpZ2l0cyBhcmUgcmVxdWlyZWQgdG8gcmVwcmVzZW50IGFsbCB2YWxpZFxuICAgICAgICAvLyAnc2Vjb25kcycgdmFsdWVzLlxuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcoZSkucGFkU3RhcnQoMTIsIFwiMFwiKSArIFwiLlwiICsgU3RyaW5nKHRoaXMubmFub3NlY29uZHMpLnBhZFN0YXJ0KDksIFwiMFwiKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgdmVyc2lvbiBvZiBhIGRvY3VtZW50IGluIEZpcmVzdG9yZS4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgdmVyc2lvblxuICogdGltZXN0YW1wLCBzdWNoIGFzIHVwZGF0ZV90aW1lIG9yIHJlYWRfdGltZS5cbiAqLyBjbGFzcyBTbmFwc2hvdFZlcnNpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRpbWVzdGFtcChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKGUpO1xuICAgIH1cbiAgICBzdGF0aWMgbWluKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90VmVyc2lvbihuZXcgVGltZXN0YW1wKDAsIDApKTtcbiAgICB9XG4gICAgc3RhdGljIG1heCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTbmFwc2hvdFZlcnNpb24obmV3IFRpbWVzdGFtcCgyNTM0MDIzMDA3OTksIDk5OTk5OTk5OSkpO1xuICAgIH1cbiAgICBjb21wYXJlVG8oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuX2NvbXBhcmVUbyhlLnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuaXNFcXVhbChlLnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbnVtYmVyIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZXJzaW9uIGZvciB1c2UgaW4gc3BlYyB0ZXN0cy4gKi8gICAgdG9NaWNyb3NlY29uZHMoKSB7XG4gICAgICAgIC8vIENvbnZlcnQgdG8gbWljcm9zZWNvbmRzLlxuICAgICAgICByZXR1cm4gMWU2ICogdGhpcy50aW1lc3RhbXAuc2Vjb25kcyArIHRoaXMudGltZXN0YW1wLm5hbm9zZWNvbmRzIC8gMWUzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiU25hcHNob3RWZXJzaW9uKFwiICsgdGhpcy50aW1lc3RhbXAudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICB0b1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGF0aCByZXByZXNlbnRzIGFuIG9yZGVyZWQgc2VxdWVuY2Ugb2Ygc3RyaW5nIHNlZ21lbnRzLlxuICovXG5jbGFzcyBCYXNlUGF0aCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB2b2lkIDAgPT09IHQgPyB0ID0gMCA6IHQgPiBlLmxlbmd0aCAmJiBmYWlsKCksIHZvaWQgMCA9PT0gbiA/IG4gPSBlLmxlbmd0aCAtIHQgOiBuID4gZS5sZW5ndGggLSB0ICYmIGZhaWwoKSwgXG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSBlLCB0aGlzLm9mZnNldCA9IHQsIHRoaXMubGVuID0gbjtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IEJhc2VQYXRoLmNvbXBhcmF0b3IodGhpcywgZSk7XG4gICAgfVxuICAgIGNoaWxkKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgQmFzZVBhdGggPyBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUpO1xuICAgICAgICB9KSkgOiB0LnB1c2goZSksIHRoaXMuY29uc3RydWN0KHQpO1xuICAgIH1cbiAgICAvKiogVGhlIGluZGV4IG9mIG9uZSBwYXN0IHRoZSBsYXN0IHNlZ21lbnQgb2YgdGhlIHBhdGguICovICAgIGxpbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgcG9wRmlyc3QoZSkge1xuICAgICAgICByZXR1cm4gZSA9IHZvaWQgMCA9PT0gZSA/IDEgOiBlLCB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCArIGUsIHRoaXMubGVuZ3RoIC0gZSk7XG4gICAgfVxuICAgIHBvcExhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCwgdGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZmlyc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF07XG4gICAgfVxuICAgIGxhc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXQgKyBlXTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBpc1ByZWZpeE9mKGUpIHtcbiAgICAgICAgaWYgKGUubGVuZ3RoIDwgdGhpcy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLmxlbmd0aDsgdCsrKSBpZiAodGhpcy5nZXQodCkgIT09IGUuZ2V0KHQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaXNJbW1lZGlhdGVQYXJlbnRPZihlKSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCArIDEgIT09IGUubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5sZW5ndGg7IHQrKykgaWYgKHRoaXMuZ2V0KHQpICE9PSBlLmdldCh0KSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGZvckVhY2goZSkge1xuICAgICAgICBmb3IgKGxldCB0ID0gdGhpcy5vZmZzZXQsIG4gPSB0aGlzLmxpbWl0KCk7IHQgPCBuOyB0KyspIGUodGhpcy5zZWdtZW50c1t0XSk7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBNYXRoLm1pbihlLmxlbmd0aCwgdC5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IG47IHIrKykge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZ2V0KHIpLCBpID0gdC5nZXQocik7XG4gICAgICAgICAgICBpZiAobiA8IGkpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChuID4gaSkgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUubGVuZ3RoIDwgdC5sZW5ndGggPyAtMSA6IGUubGVuZ3RoID4gdC5sZW5ndGggPyAxIDogMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyByZXNvdXJjZXMgKGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMpXG4gKiB3aXRoaW4gRmlyZXN0b3JlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIFJlc291cmNlUGF0aCBleHRlbmRzIEJhc2VQYXRoIHtcbiAgICBjb25zdHJ1Y3QoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChlLCB0LCBuKTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuam9pbihcIi9cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc291cmNlIHBhdGggZnJvbSB0aGUgZ2l2ZW4gc2xhc2gtZGVsaW1pdGVkIHN0cmluZy4gSWYgbXVsdGlwbGVcbiAgICAgKiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkLCBhbGwgY29tcG9uZW50cyBhcmUgY29tYmluZWQuIExlYWRpbmcgYW5kIHRyYWlsaW5nXG4gICAgICogc2xhc2hlcyBmcm9tIGFsbCBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVN0cmluZyguLi5lKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIHtcbiAgICAgICAgICAgIGlmIChuLmluZGV4T2YoXCIvL1wiKSA+PSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBzZWdtZW50ICgke259KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAvLyBpbiB0aGVtLmApO1xuICAgICAgICAgICAgLy8gU3RyaXAgbGVhZGluZyBhbmQgdHJhbGluZyBzbGFzaGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgdC5wdXNoKC4uLm4uc3BsaXQoXCIvXCIpLmZpbHRlcigoZSA9PiBlLmxlbmd0aCA+IDApKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgodCk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKFtdKTtcbiAgICB9XG59XG5cbmNvbnN0IEMgPSAvXltfYS16QS1aXVtfYS16QS1aMC05XSokLztcblxuLyoqXG4gKiBBIGRvdC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyBzdWItb2JqZWN0cyB3aXRoaW4gYSBkb2N1bWVudC5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIEZpZWxkUGF0aCQxIGV4dGVuZHMgQmFzZVBhdGgge1xuICAgIGNvbnN0cnVjdChlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoJDEoZSwgdCwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyaW5nIGNvdWxkIGJlIHVzZWQgYXMgYSBzZWdtZW50IGluIGEgZmllbGQgcGF0aFxuICAgICAqIHdpdGhvdXQgZXNjYXBpbmcuXG4gICAgICovICAgIHN0YXRpYyBpc1ZhbGlkSWRlbnRpZmllcihlKSB7XG4gICAgICAgIHJldHVybiBDLnRlc3QoZSk7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLm1hcCgoZSA9PiAoZSA9IGUucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL2AvZywgXCJcXFxcYFwiKSwgXG4gICAgICAgIEZpZWxkUGF0aCQxLmlzVmFsaWRJZGVudGlmaWVyKGUpIHx8IChlID0gXCJgXCIgKyBlICsgXCJgXCIpLCBlKSkpLmpvaW4oXCIuXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIHJlZmVyZW5jZXMgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBpc0tleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gMSA9PT0gdGhpcy5sZW5ndGggJiYgXCJfX25hbWVfX1wiID09PSB0aGlzLmdldCgwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkIGRlc2lnbmF0aW5nIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgc3RhdGljIGtleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKFsgXCJfX25hbWVfX1wiIF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiAtIFNwbGl0dGluZyB0aGUgZW1wdHkgc3RyaW5nIGlzIG5vdCBhbGxvd2VkIChmb3Igbm93IGF0IGxlYXN0KS5cbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcbiAgICAgKiAgIHNlcGFyYXRvcnMpIGFyZSBub3QgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXG4gICAgICogbm9uLWlkZW50aWZpZXIgcGF0aCBjb21wb25lbnRzLCBldmVuIGlmIHRoZXkgYXJlbid0IGVzY2FwZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VydmVyRm9ybWF0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBsZXQgbiA9IFwiXCIsIHIgPSAwO1xuICAgICAgICBjb25zdCBfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCk7XG4gICAgICAgICAgICB0LnB1c2gobiksIG4gPSBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgaSA9ICExO1xuICAgICAgICBmb3IgKDtyIDwgZS5sZW5ndGg7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGVbcl07XG4gICAgICAgICAgICBpZiAoXCJcXFxcXCIgPT09IHQpIHtcbiAgICAgICAgICAgICAgICBpZiAociArIDEgPT09IGUubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGVbciArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChcIlxcXFxcIiAhPT0gdCAmJiBcIi5cIiAhPT0gdCAmJiBcImBcIiAhPT0gdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyBpbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZTogXCIgKyBlKTtcbiAgICAgICAgICAgICAgICBuICs9IHQsIHIgKz0gMjtcbiAgICAgICAgICAgIH0gZWxzZSBcImBcIiA9PT0gdCA/IChpID0gIWksIHIrKykgOiBcIi5cIiAhPT0gdCB8fCBpID8gKG4gKz0gdCwgcisrKSA6IChfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQoKSwgXG4gICAgICAgICAgICByKyspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQoKSwgaSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJVbnRlcm1pbmF0ZWQgYCBpbiBwYXRoOiBcIiArIGUpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKFtdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIERvY3VtZW50S2V5IHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUGF0aChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpLnBvcEZpcnN0KDUpKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKSk7XG4gICAgfVxuICAgIGdldCBjb2xsZWN0aW9uR3JvdXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgucG9wTGFzdCgpLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGlzIGluIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbklkLiAqLyAgICBoYXNDb2xsZWN0aW9uSWQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmxlbmd0aCA+PSAyICYmIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpID09PSBlO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgY29sbGVjdGlvbiBncm91cCAoaS5lLiB0aGUgbmFtZSBvZiB0aGUgcGFyZW50IGNvbGxlY3Rpb24pIGZvciB0aGlzIGtleS4gKi8gICAgZ2V0Q29sbGVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBmdWxseSBxdWFsaWZpZWQgcGF0aCB0byB0aGUgcGFyZW50IGNvbGxlY3Rpb24uICovICAgIGdldENvbGxlY3Rpb25QYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnBvcExhc3QoKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIDAgPT09IFJlc291cmNlUGF0aC5jb21wYXJhdG9yKHRoaXMucGF0aCwgZS5wYXRoKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IoZSwgdCkge1xuICAgICAgICByZXR1cm4gUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IoZS5wYXRoLCB0LnBhdGgpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNEb2N1bWVudEtleShlKSB7XG4gICAgICAgIHJldHVybiBlLmxlbmd0aCAlIDIgPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgLSBUaGUgc2VnbWVudHMgb2YgdGhlIHBhdGggdG8gdGhlIGRvY3VtZW50XG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcbiAgICAgKi8gICAgc3RhdGljIGZyb21TZWdtZW50cyhlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkobmV3IFJlc291cmNlUGF0aChlLnNsaWNlKCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBpbml0aWFsIG11dGF0aW9uIGJhdGNoIGlkIGZvciBlYWNoIGluZGV4LiBHZXRzIHVwZGF0ZWQgZHVyaW5nIGluZGV4XG4gKiBiYWNrZmlsbC5cbiAqL1xuLyoqXG4gKiBBbiBpbmRleCBkZWZpbml0aW9uIGZvciBmaWVsZCBpbmRleGVzIGluIEZpcmVzdG9yZS5cbiAqXG4gKiBFdmVyeSBpbmRleCBpcyBhc3NvY2lhdGVkIHdpdGggYSBjb2xsZWN0aW9uLiBUaGUgZGVmaW5pdGlvbiBjb250YWlucyBhIGxpc3RcbiAqIG9mIGZpZWxkcyBhbmQgdGhlaXIgaW5kZXgga2luZCAod2hpY2ggY2FuIGJlIGBBU0NFTkRJTkdgLCBgREVTQ0VORElOR2Agb3JcbiAqIGBDT05UQUlOU2AgZm9yIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueSBxdWVyaWVzKS5cbiAqXG4gKiBVbmxpa2UgdGhlIGJhY2tlbmQsIHRoZSBTREsgZG9lcyBub3QgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIGNvbGxlY3Rpb24gb3JcbiAqIGNvbGxlY3Rpb24gZ3JvdXAtc2NvcGVkIGluZGljZXMuIEV2ZXJ5IGluZGV4IGNhbiBiZSB1c2VkIGZvciBib3RoIHNpbmdsZVxuICogY29sbGVjdGlvbiBhbmQgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLlxuICovXG5jbGFzcyBGaWVsZEluZGV4IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggSUQuIFJldHVybnMgLTEgaWYgdGhlIGluZGV4IElEIGlzIG5vdCBhdmFpbGFibGUgKGUuZy4gdGhlIGluZGV4XG4gICAgICogaGFzIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQpLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgY29sbGVjdGlvbiBJRCB0aGlzIGluZGV4IGFwcGxpZXMgdG8uICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBmaWVsZCBzZWdtZW50cyBmb3IgdGhpcyBpbmRleC4gKi9cbiAgICBuLCBcbiAgICAvKiogU2hvd3MgaG93IHVwLXRvLWRhdGUgdGhlIGluZGV4IGlzIGZvciB0aGUgY3VycmVudCB1c2VyLiAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy5pbmRleElkID0gZSwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSB0LCB0aGlzLmZpZWxkcyA9IG4sIHRoaXMuaW5kZXhTdGF0ZSA9IHI7XG4gICAgfVxufVxuXG4vKiogQW4gSUQgZm9yIGFuIGluZGV4IHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBhZGRlZCB0byBwZXJzaXN0ZW5jZS4gICovXG4vKiogUmV0dXJucyB0aGUgQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55IHNlZ21lbnQgZm9yIHRoaXMgaW5kZXguICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleEdldEFycmF5U2VnbWVudChlKSB7XG4gICAgcmV0dXJuIGUuZmllbGRzLmZpbmQoKGUgPT4gMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8gPT09IGUua2luZCkpO1xufVxuXG4vKiogUmV0dXJucyBhbGwgZGlyZWN0aW9uYWwgKGFzY2VuZGluZy9kZXNjZW5kaW5nKSBzZWdtZW50cyBmb3IgdGhpcyBpbmRleC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKGUpIHtcbiAgICByZXR1cm4gZS5maWVsZHMuZmlsdGVyKChlID0+IDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovICE9PSBlLmtpbmQpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBvcmRlciBvZiB0aGUgZG9jdW1lbnQga2V5IGNvbXBvbmVudCBmb3IgdGhlIGdpdmVuIGluZGV4LlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgaW4gdGhlIFdlYiBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24uXG4gKi9cbi8qKlxuICogQ29tcGFyZXMgaW5kZXhlcyBieSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBzZWdtZW50cy4gSWdub3JlcyB1cGRhdGUgdGltZSBhbmRcbiAqIGluZGV4IElELlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleFNlbWFudGljQ29tcGFyYXRvcihlLCB0KSB7XG4gICAgbGV0IG4gPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNvbGxlY3Rpb25Hcm91cCwgdC5jb2xsZWN0aW9uR3JvdXApO1xuICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICBmb3IgKGxldCByID0gMDsgciA8IE1hdGgubWluKGUuZmllbGRzLmxlbmd0aCwgdC5maWVsZHMubGVuZ3RoKTsgKytyKSBpZiAobiA9IF9fUFJJVkFURV9pbmRleFNlZ21lbnRDb21wYXJhdG9yKGUuZmllbGRzW3JdLCB0LmZpZWxkc1tyXSksIFxuICAgIDAgIT09IG4pIHJldHVybiBuO1xuICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmZpZWxkcy5sZW5ndGgsIHQuZmllbGRzLmxlbmd0aCk7XG59XG5cbi8qKiBSZXR1cm5zIGEgZGVidWcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGZpZWxkIGluZGV4ICovIEZpZWxkSW5kZXguVU5LTk9XTl9JRCA9IC0xO1xuXG4vKiogQW4gaW5kZXggY29tcG9uZW50IGNvbnNpc3Rpbmcgb2YgZmllbGQgcGF0aCBhbmQgaW5kZXggdHlwZS4gICovXG5jbGFzcyBJbmRleFNlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgZmllbGQgcGF0aCBvZiB0aGUgY29tcG9uZW50LiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgZmllbGRzIHNvcnRpbmcgb3JkZXIuICovXG4gICAgdCkge1xuICAgICAgICB0aGlzLmZpZWxkUGF0aCA9IGUsIHRoaXMua2luZCA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhTZWdtZW50Q29tcGFyYXRvcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IoZS5maWVsZFBhdGgsIHQuZmllbGRQYXRoKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmtpbmQsIHQua2luZCk7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBcImhpZ2ggd2F0ZXIgbWFya1wiIHRoYXQgaW5kaWNhdGVzIGhvdyB1cGRhdGVkIHRoZSBJbmRleCBpcyBmb3IgdGhlXG4gKiBjdXJyZW50IHVzZXIuXG4gKi8gY2xhc3MgSW5kZXhTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZW4gdGhlIGluZGV4IHdhcyBsYXN0IHVwZGF0ZWQgKHJlbGF0aXZlIHRvIG90aGVyIGluZGV4ZXMpLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgdGhlIGxhdGVzdCBpbmRleGVkIHJlYWQgdGltZSwgZG9jdW1lbnQgYW5kIGJhdGNoIGlkLiAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlciA9IGUsIHRoaXMub2Zmc2V0ID0gdDtcbiAgICB9XG4gICAgLyoqIFRoZSBzdGF0ZSBvZiBhbiBpbmRleCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYmFja2ZpbGxlZC4gKi8gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IEluZGV4U3RhdGUoMCwgSW5kZXhPZmZzZXQubWluKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIG9mZnNldCB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyB3aXRoIGEgcmVhZCB0aW1lIGhpZ2hlciB0aGFuXG4gKiBgcmVhZFRpbWVgLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdJbmRleE9mZnNldFN1Y2Nlc3NvckZyb21SZWFkVGltZShlLCB0KSB7XG4gICAgLy8gV2Ugd2FudCB0byBjcmVhdGUgYW4gb2Zmc2V0IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIHdpdGggYSByZWFkIHRpbWVcbiAgICAvLyBncmVhdGVyIHRoYW4gdGhlIHByb3ZpZGVkIHJlYWQgdGltZS4gVG8gZG8gc28sIHdlIHRlY2huaWNhbGx5IG5lZWQgdG9cbiAgICAvLyBjcmVhdGUgYW4gb2Zmc2V0IGZvciBgKHJlYWRUaW1lLCBNQVhfRE9DVU1FTlRfS0VZKWAuIFdoaWxlIHdlIGNvdWxkIHVzZVxuICAgIC8vIFVuaWNvZGUgY29kZXBvaW50cyB0byBnZW5lcmF0ZSBNQVhfRE9DVU1FTlRfS0VZLCBpdCBpcyBtdWNoIGVhc2llciB0byB1c2VcbiAgICAvLyBgKHJlYWRUaW1lICsgMSwgRG9jdW1lbnRLZXkuZW1wdHkoKSlgIHNpbmNlIGA+IERvY3VtZW50S2V5LmVtcHR5KClgIG1hdGNoZXNcbiAgICAvLyBhbGwgdmFsaWQgZG9jdW1lbnQgSURzLlxuICAgIGNvbnN0IG4gPSBlLnRvVGltZXN0YW1wKCkuc2Vjb25kcywgciA9IGUudG9UaW1lc3RhbXAoKS5uYW5vc2Vjb25kcyArIDEsIGkgPSBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCgxZTkgPT09IHIgPyBuZXcgVGltZXN0YW1wKG4gKyAxLCAwKSA6IG5ldyBUaW1lc3RhbXAobiwgcikpO1xuICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQoaSwgRG9jdW1lbnRLZXkuZW1wdHkoKSwgdCk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IG9mZnNldCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudChlKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldChlLnJlYWRUaW1lLCBlLmtleSwgLTEpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgbGF0ZXN0IHJlYWQgdGltZSwgZG9jdW1lbnQgYW5kIGJhdGNoIElEIHRoYXQgd2VyZSBwcm9jZXNzZWQgZm9yIGFuXG4gKiBpbmRleC5cbiAqLyBjbGFzcyBJbmRleE9mZnNldCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGxhdGVzdCByZWFkIHRpbWUgdmVyc2lvbiB0aGF0IGhhcyBiZWVuIGluZGV4ZWQgYnkgRmlyZXN0b3JlIGZvciB0aGlzXG4gICAgICogZmllbGQgaW5kZXguXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGtleSBvZiB0aGUgbGFzdCBkb2N1bWVudCB0aGF0IHdhcyBpbmRleGVkIGZvciB0aGlzIHF1ZXJ5LiBVc2VcbiAgICAgKiBgRG9jdW1lbnRLZXkuZW1wdHkoKWAgaWYgbm8gZG9jdW1lbnQgaGFzIGJlZW4gaW5kZXhlZC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKlxuICAgICAqIFRoZSBsYXJnZXN0IG11dGF0aW9uIGJhdGNoIGlkIHRoYXQncyBiZWVuIHByb2Nlc3NlZCBieSBGaXJlc3RvcmUuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnJlYWRUaW1lID0gZSwgdGhpcy5kb2N1bWVudEtleSA9IHQsIHRoaXMubGFyZ2VzdEJhdGNoSWQgPSBuO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbiBvZmZzZXQgdGhhdCBzb3J0cyBiZWZvcmUgYWxsIHJlZ3VsYXIgb2Zmc2V0cy4gKi8gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldChTbmFwc2hvdFZlcnNpb24ubWluKCksIERvY3VtZW50S2V5LmVtcHR5KCksIC0xKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYW4gb2Zmc2V0IHRoYXQgc29ydHMgYWZ0ZXIgYWxsIHJlZ3VsYXIgb2Zmc2V0cy4gKi8gICAgc3RhdGljIG1heCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldChTbmFwc2hvdFZlcnNpb24ubWF4KCksIERvY3VtZW50S2V5LmVtcHR5KCksIC0xKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IoZSwgdCkge1xuICAgIGxldCBuID0gZS5yZWFkVGltZS5jb21wYXJlVG8odC5yZWFkVGltZSk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUuZG9jdW1lbnRLZXksIHQuZG9jdW1lbnRLZXkpLCBcbiAgICAwICE9PSBuID8gbiA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUubGFyZ2VzdEJhdGNoSWQsIHQubGFyZ2VzdEJhdGNoSWQpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgRiA9IFwiVGhlIGN1cnJlbnQgdGFiIGlzIG5vdCBpbiB0aGUgcmVxdWlyZWQgc3RhdGUgdG8gcGVyZm9ybSB0aGlzIG9wZXJhdGlvbi4gSXQgbWlnaHQgYmUgbmVjZXNzYXJ5IHRvIHJlZnJlc2ggdGhlIGJyb3dzZXIgdGFiLlwiO1xuXG4vKipcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXG4gKiBvbiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycyA9IFtdO1xuICAgIH1cbiAgICBhZGRPbkNvbW1pdHRlZExpc3RlbmVyKGUpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5wdXNoKGUpO1xuICAgIH1cbiAgICByYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMuZm9yRWFjaCgoZSA9PiBlKCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFZlcmlmaWVzIHRoZSBlcnJvciB0aHJvd24gYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi4gSWYgYSBMb2NhbFN0b3JlXG4gKiBvcGVyYXRpb24gZmFpbHMgYmVjYXVzZSB0aGUgcHJpbWFyeSBsZWFzZSBoYXMgYmVlbiB0YWtlbiBieSBhbm90aGVyIGNsaWVudCxcbiAqIHdlIGlnbm9yZSB0aGUgZXJyb3IgKHRoZSBwZXJzaXN0ZW5jZSBsYXllciB3aWxsIGltbWVkaWF0ZWx5IGNhbGxcbiAqIGBhcHBseVByaW1hcnlMZWFzZWAgdG8gcHJvcGFnYXRlIHRoZSBwcmltYXJ5IHN0YXRlIGNoYW5nZSkuIEFsbCBvdGhlciBlcnJvcnNcbiAqIGFyZSByZS10aHJvd24uXG4gKlxuICogQHBhcmFtIGVyciAtIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uXG4gKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB3ZSByZWNvdmVyZWQsIG9yIHRoZSBvcmlnaW5hbCBlcnJvci5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGUpIHtcbiAgICBpZiAoZS5jb2RlICE9PSB2LkZBSUxFRF9QUkVDT05ESVRJT04gfHwgZS5tZXNzYWdlICE9PSBGKSB0aHJvdyBlO1xuICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxvY2FsU3RvcmVcIiwgXCJVbmV4cGVjdGVkbHkgbG9zdCBwcmltYXJ5IGxlYXNlXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQZXJzaXN0ZW5jZVByb21pc2UgaXMgZXNzZW50aWFsbHkgYSByZS1pbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlIGV4Y2VwdFxuICogaXQgaGFzIGEgLm5leHQoKSBtZXRob2QgaW5zdGVhZCBvZiAudGhlbigpIGFuZCAubmV4dCgpIGFuZCAuY2F0Y2goKSBjYWxsYmFja3NcbiAqIGFyZSBleGVjdXRlZCBzeW5jaHJvbm91c2x5IHdoZW4gYSBQZXJzaXN0ZW5jZVByb21pc2UgcmVzb2x2ZXMgcmF0aGVyIHRoYW5cbiAqIGFzeW5jaHJvbm91c2x5IChQcm9taXNlIGltcGxlbWVudGF0aW9ucyB1c2Ugc2V0SW1tZWRpYXRlKCkgb3Igc2ltaWxhcikuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgdG8gaW50ZXJvcGVyYXRlIHdpdGggSW5kZXhlZERCIHdoaWNoIHdpbGwgYXV0b21hdGljYWxseVxuICogY29tbWl0IHRyYW5zYWN0aW9ucyBpZiBjb250cm9sIGlzIHJldHVybmVkIHRvIHRoZSBldmVudCBsb29wIHdpdGhvdXRcbiAqIHN5bmNocm9ub3VzbHkgaW5pdGlhdGluZyBhbm90aGVyIG9wZXJhdGlvbiBvbiB0aGUgdHJhbnNhY3Rpb24uXG4gKlxuICogTk9URTogLnRoZW4oKSBhbmQgLmNhdGNoKCkgb25seSBhbGxvdyBhIHNpbmdsZSBjb25zdW1lciwgdW5saWtlIG5vcm1hbFxuICogUHJvbWlzZXMuXG4gKi8gY2xhc3MgUGVyc2lzdGVuY2VQcm9taXNlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxuICAgICAgICAvLyBub3QgdGhlIHVzZXIncyByYXcgbmV4dCgpIG9yIGNhdGNoKCkgY2FsbGJhY2tzLlxuICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IG51bGwsIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGwsIFxuICAgICAgICAvLyBXaGVuIHRoZSBvcGVyYXRpb24gcmVzb2x2ZXMsIHdlJ2xsIHNldCByZXN1bHQgb3IgZXJyb3IgYW5kIG1hcmsgaXNEb25lLlxuICAgICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMCwgdGhpcy5lcnJvciA9IHZvaWQgMCwgdGhpcy5pc0RvbmUgPSAhMSwgXG4gICAgICAgIC8vIFNldCB0byB0cnVlIHdoZW4gLnRoZW4oKSBvciAuY2F0Y2goKSBhcmUgY2FsbGVkIGFuZCBwcmV2ZW50cyBhZGRpdGlvbmFsXG4gICAgICAgIC8vIGNoYWluaW5nLlxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMSwgZSgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLnJlc3VsdCA9IGUsIHRoaXMubmV4dENhbGxiYWNrICYmIFxuICAgICAgICAgICAgLy8gdmFsdWUgc2hvdWxkIGJlIGRlZmluZWQgdW5sZXNzIFQgaXMgVm9pZCwgYnV0IHdlIGNhbid0IGV4cHJlc3NcbiAgICAgICAgICAgIC8vIHRoYXQgaW4gdGhlIHR5cGUgc3lzdGVtLlxuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2soZSk7XG4gICAgICAgIH0pLCAoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLmVycm9yID0gZSwgdGhpcy5jYXRjaENhbGxiYWNrICYmIHRoaXMuY2F0Y2hDYWxsYmFjayhlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQodm9pZCAwLCBlKTtcbiAgICB9XG4gICAgbmV4dChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgJiYgZmFpbCgpLCB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMCwgdGhpcy5pc0RvbmUgPyB0aGlzLmVycm9yID8gdGhpcy53cmFwRmFpbHVyZSh0LCB0aGlzLmVycm9yKSA6IHRoaXMud3JhcFN1Y2Nlc3MoZSwgdGhpcy5yZXN1bHQpIDogbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwU3VjY2VzcyhlLCB0KS5uZXh0KG4sIHIpO1xuICAgICAgICAgICAgfSwgdGhpcy5jYXRjaENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwRmFpbHVyZSh0LCBlKS5uZXh0KG4sIHIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dChlLCB0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3cmFwVXNlckZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlKCk7XG4gICAgICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlUHJvbWlzZSA/IHQgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JhcFN1Y2Nlc3MoZSwgdCkge1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gZSh0KSkpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodCk7XG4gICAgfVxuICAgIHdyYXBGYWlsdXJlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IGUodCkpKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QodCk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICB0KGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWplY3QoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHdhaXRGb3IoXG4gICAgLy8gQWNjZXB0IGFsbCBQcm9taXNlIHR5cGVzIGluIHdhaXRGb3IoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBsZXQgciA9IDAsIGkgPSAwLCBzID0gITE7XG4gICAgICAgICAgICBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICsrciwgZS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICsraSwgcyAmJiBpID09PSByICYmIHQoKTtcbiAgICAgICAgICAgICAgICB9KSwgKGUgPT4gbihlKSkpO1xuICAgICAgICAgICAgfSkpLCBzID0gITAsIGkgPT09IHIgJiYgdCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXG4gICAgICovICAgIHN0YXRpYyBvcihlKSB7XG4gICAgICAgIGxldCB0ID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoITEpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IHQubmV4dCgoZSA9PiBlID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoZSkgOiBuKCkpKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JFYWNoKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbi5wdXNoKHQuY2FsbCh0aGlzLCBlLCByKSk7XG4gICAgICAgIH0pKSwgdGhpcy53YWl0Rm9yKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25jdXJyZW50bHkgbWFwIGFsbCBhcnJheSBlbGVtZW50cyB0aHJvdWdoIGFzeW5jaHJvbm91cyBmdW5jdGlvbi5cbiAgICAgKi8gICAgc3RhdGljIG1hcEFycmF5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5sZW5ndGgsIHMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBfID0gMDsgXyA8IGk7IF8rKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBfO1xuICAgICAgICAgICAgICAgIHQoZVthXSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNbYV0gPSBlLCArK28sIG8gPT09IGkgJiYgbihzKTtcbiAgICAgICAgICAgICAgICB9KSwgKGUgPT4gcihlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuIGFsdGVybmF0aXZlIHRvIHJlY3Vyc2l2ZSBQZXJzaXN0ZW5jZVByb21pc2UgY2FsbHMsIHRoYXQgYXZvaWRzXG4gICAgICogcG90ZW50aWFsIG1lbW9yeSBwcm9ibGVtcyBmcm9tIHVuYm91bmRlZCBjaGFpbnMgb2YgcHJvbWlzZXMuXG4gICAgICpcbiAgICAgKiBUaGUgYGFjdGlvbmAgd2lsbCBiZSBjYWxsZWQgcmVwZWF0ZWRseSB3aGlsZSBgY29uZGl0aW9uYCBpcyB0cnVlLlxuICAgICAqLyAgICBzdGF0aWMgZG9XaGlsZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAhMCA9PT0gZSgpID8gdCgpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2VzcygpO1xuICAgICAgICAgICAgICAgIH0pLCByKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwcm9jZXNzKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9TaW1wbGVEYlRyYW5zYWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gZSwgdGhpcy50cmFuc2FjdGlvbiA9IHQsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm0gPSBuZXcgX19QUklWQVRFX0RlZmVycmVkLCB0aGlzLnRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm0ucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0LmVycm9yID8gdGhpcy5tLnJlamVjdChuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSwgdC5lcnJvcikpIDogdGhpcy5tLnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5tLnJlamVjdChuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSwgbikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgb3BlbihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9TaW1wbGVEYlRyYW5zYWN0aW9uKHQsIGUudHJhbnNhY3Rpb24ociwgbikpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IodCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm0ucHJvbWlzZTtcbiAgICB9XG4gICAgYWJvcnQoZSkge1xuICAgICAgICBlICYmIHRoaXMubS5yZWplY3QoZSksIHRoaXMuYWJvcnRlZCB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJBYm9ydGluZyB0cmFuc2FjdGlvbjpcIiwgZSA/IGUubWVzc2FnZSA6IFwiQ2xpZW50LWluaXRpYXRlZCBhYm9ydFwiKSwgXG4gICAgICAgIHRoaXMuYWJvcnRlZCA9ICEwLCB0aGlzLnRyYW5zYWN0aW9uLmFib3J0KCkpO1xuICAgIH1cbiAgICBwKCkge1xuICAgICAgICAvLyBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBWMyBJbmRleGVkREIsIHdlIGludm9rZSBjb21taXQoKSBleHBsaWNpdGx5IHRvXG4gICAgICAgIC8vIHNwZWVkIHVwIGluZGV4IERCIHByb2Nlc3NpbmcgaWYgdGhlIGV2ZW50IGxvb3AgcmVtYWlucyBibG9ja3MuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRyYW5zYWN0aW9uO1xuICAgICAgICB0aGlzLmFib3J0ZWQgfHwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlLmNvbW1pdCB8fCBlLmNvbW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgU2ltcGxlRGJTdG9yZTxLZXlUeXBlLCBWYWx1ZVR5cGU+IGZvciB0aGUgc3BlY2lmaWVkIHN0b3JlLiBBbGxcbiAgICAgKiBvcGVyYXRpb25zIHBlcmZvcm1lZCBvbiB0aGUgU2ltcGxlRGJTdG9yZSBoYXBwZW4gd2l0aGluIHRoZSBjb250ZXh0IG9mIHRoaXNcbiAgICAgKiB0cmFuc2FjdGlvbiBhbmQgaXQgY2Fubm90IGJlIHVzZWQgYW55bW9yZSBvbmNlIHRoZSB0cmFuc2FjdGlvbiBpc1xuICAgICAqIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB3ZSBjYW4ndCBhY3R1YWxseSBlbmZvcmNlIHRoYXQgdGhlIEtleVR5cGUgYW5kIFZhbHVlVHlwZSBhcmVcbiAgICAgKiBjb3JyZWN0LCBidXQgdGhleSBhbGxvdyB0eXBlIHNhZmV0eSB0aHJvdWdoIHRoZSByZXN0IG9mIHRoZSBjb25zdW1pbmcgY29kZS5cbiAgICAgKi8gICAgc3RvcmUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy50cmFuc2FjdGlvbi5vYmplY3RTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2ltcGxlRGJTdG9yZSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYSB3cmFwcGVyIGFyb3VuZCBJbmRleGVkRGIgd2l0aCBhIHNpbXBsaWZpZWQgaW50ZXJmYWNlIHRoYXQgdXNlc1xuICogUHJvbWlzZS1saWtlIHJldHVybiB2YWx1ZXMgdG8gY2hhaW4gb3BlcmF0aW9ucy4gUmVhbCBwcm9taXNlcyBjYW5ub3QgYmUgdXNlZFxuICogc2luY2UgLnRoZW4oKSBjb250aW51YXRpb25zIGFyZSBleGVjdXRlZCBhc3luY2hyb25vdXNseSAoZS5nLiB2aWFcbiAqIC5zZXRJbW1lZGlhdGUpLCB3aGljaCB3b3VsZCBjYXVzZSBJbmRleGVkREIgdG8gZW5kIHRoZSB0cmFuc2FjdGlvbi5cbiAqIFNlZSBQZXJzaXN0ZW5jZVByb21pc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2ltcGxlRGIge1xuICAgIC8qXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaW1wbGVEYiB3cmFwcGVyIGZvciBJbmRleGVkRGIgZGF0YWJhc2UgYG5hbWVgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgKiBkb3duZ3JhZGluZyB0aGUgc2NoZW1hIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvXG4gICAgICogdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmcgbWVjaGFuaXNtLCBhcyBvbmx5XG4gICAgICogdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcbiAgICAgKiBvYmplY3RzdG9yZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSBlLCB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLlMgPSBuO1xuICAgICAgICAvLyBOT1RFOiBBY2NvcmRpbmcgdG8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE5NzA1MCwgdGhlXG4gICAgICAgIC8vIGJ1ZyB3ZSdyZSBjaGVja2luZyBmb3Igc2hvdWxkIGV4aXN0IGluIGlPUyA+PSAxMi4yIGFuZCA8IDEzLCBidXQgZm9yXG4gICAgICAgIC8vIHdoYXRldmVyIHJlYXNvbiBpdCdzIG11Y2ggaGFyZGVyIHRvIGhpdCBhZnRlciAxMi4yIHNvIHdlIG9ubHkgcHJvYWN0aXZlbHlcbiAgICAgICAgLy8gbG9nIG9uIDEyLjIuXG4gICAgICAgIDEyLjIgPT09IF9fUFJJVkFURV9TaW1wbGVEYi5EKGdldFVBKCkpICYmIF9fUFJJVkFURV9sb2dFcnJvcihcIkZpcmVzdG9yZSBwZXJzaXN0ZW5jZSBzdWZmZXJzIGZyb20gYSBidWcgaW4gaU9TIDEyLjIgU2FmYXJpIHRoYXQgbWF5IGNhdXNlIHlvdXIgYXBwIHRvIHN0b3Agd29ya2luZy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuXCIpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLiAqLyAgICBzdGF0aWMgZGVsZXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiUmVtb3ZpbmcgZGF0YWJhc2U6XCIsIGUpLCBfX1BSSVZBVEVfd3JhcFJlcXVlc3Qod2luZG93LmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShlKSkudG9Qcm9taXNlKCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgSW5kZXhlZERCIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIHYoKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAoX19QUklWQVRFX1NpbXBsZURiLkMoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZ2V0VUEoKSwgdCA9IF9fUFJJVkFURV9TaW1wbGVEYi5EKGUpLCBuID0gMCA8IHQgJiYgdCA8IDEwLCByID0gX19QUklWQVRFX1NpbXBsZURiLkYoZSksIGkgPSAwIDwgciAmJiByIDwgNC41O1xuICAgICAgICAvLyBJRSAxMFxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJztcbiAgICAgICAgLy8gSUUgMTFcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbyc7XG4gICAgICAgIC8vIEVkZ2VcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsXG4gICAgICAgIC8vIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuNzEgU2FmYXJpLzUzNy4zNiBFZGdlLzEyLjAnO1xuICAgICAgICAvLyBpT1MgU2FmYXJpOiBEaXNhYmxlIGZvciB1c2VycyBydW5uaW5nIGlPUyB2ZXJzaW9uIDwgMTAuXG4gICAgICAgICAgICAgICAgcmV0dXJuICEoZS5pbmRleE9mKFwiTVNJRSBcIikgPiAwIHx8IGUuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gMCB8fCBlLmluZGV4T2YoXCJFZGdlL1wiKSA+IDAgfHwgbiB8fCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBiYWNraW5nIEluZGV4ZWREQiBzdG9yZSBpcyB0aGUgTm9kZSBJbmRleGVkREJTaGltXG4gICAgICogKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0pLlxuICAgICAqLyAgICBzdGF0aWMgQygpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBwcm9jZXNzICYmIFwiWUVTXCIgPT09IChudWxsID09PSAoZSA9IHByb2Nlc3MuZW52KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLk0pO1xuICAgIH1cbiAgICAvKiogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZnJvbSBhIHRyYW5zYWN0aW9uLiAqLyAgICBzdGF0aWMgTyhlLCB0KSB7XG4gICAgICAgIHJldHVybiBlLnN0b3JlKHQpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIGlPUyB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgRChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLm1hdGNoKC9pKD86cGhvbmV8cGFkfHBvZCkgb3MgKFtcXGRfXSspL2kpLCBuID0gdCA/IHRbMV0uc3BsaXQoXCJfXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIEFuZHJvaWQgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIEYoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5tYXRjaCgvQW5kcm9pZCAoW1xcZC5dKykvaSksIG4gPSB0ID8gdFsxXS5zcGxpdChcIi5cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgICAgIHJldHVybiBOdW1iZXIobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UsIGNyZWF0aW5nIG9yIHVwZ3JhZGluZyBpdCBpZiBuZWNlc3NhcnkuXG4gICAgICovICAgIGFzeW5jIE4oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYiB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJPcGVuaW5nIGRhdGFiYXNlOlwiLCB0aGlzLm5hbWUpLCBcbiAgICAgICAgdGhpcy5kYiA9IGF3YWl0IG5ldyBQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSS9Vc2luZ19JbmRleGVkREJcbiAgICAgICAgICAgIC8vIHN1Z2dlc3RzIElFOSBhbmQgb2xkZXIgV2ViS2l0IGJyb3dzZXJzIGhhbmRsZSB1cGdyYWRlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCVmVyc2lvbkNoYW5nZVJlcXVlc3Qvc2V0VmVyc2lvblxuICAgICAgICAgICAgY29uc3QgciA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uKTtcbiAgICAgICAgICAgIHIub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0KG4pO1xuICAgICAgICAgICAgfSwgci5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbihuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSwgXCJDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uIENsb3NlIGFsbCB0YWJzIHRoYXQgYWNjZXNzIEZpcmVzdG9yZSBhbmQgcmVsb2FkIHRoaXMgcGFnZSB0byBwcm9jZWVkLlwiKSk7XG4gICAgICAgICAgICB9LCByLm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdC50YXJnZXQuZXJyb3I7XG4gICAgICAgICAgICAgICAgXCJWZXJzaW9uRXJyb3JcIiA9PT0gci5uYW1lID8gbihuZXcgRmlyZXN0b3JlRXJyb3Iodi5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgRmlyZXN0b3JlIFNESyB3YXMgcHJldmlvdXNseSB1c2VkIGFuZCBzbyB0aGUgcGVyc2lzdGVkIGRhdGEgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdmVyc2lvbiBvZiB0aGUgU0RLIHlvdSBhcmUgbm93IHVzaW5nLiBUaGUgU0RLIHdpbGwgb3BlcmF0ZSB3aXRoIHBlcnNpc3RlbmNlIGRpc2FibGVkLiBJZiB5b3UgbmVlZCBwZXJzaXN0ZW5jZSwgcGxlYXNlIHJlLXVwZ3JhZGUgdG8gYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBTREsgb3IgZWxzZSBjbGVhciB0aGUgcGVyc2lzdGVkIEluZGV4ZWREQiBkYXRhIGZvciB5b3VyIGFwcCB0byBzdGFydCBmcmVzaC5cIikpIDogXCJJbnZhbGlkU3RhdGVFcnJvclwiID09PSByLm5hbWUgPyBuKG5ldyBGaXJlc3RvcmVFcnJvcih2LkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVW5hYmxlIHRvIG9wZW4gYW4gSW5kZXhlZERCIGNvbm5lY3Rpb24uIFRoaXMgY291bGQgYmUgZHVlIHRvIHJ1bm5pbmcgaW4gYSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb24gb24gYSBicm93c2VyIHdob3NlIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbnMgZG8gbm90IHN1cHBvcnQgSW5kZXhlZERCOiBcIiArIHIpKSA6IG4obmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUsIHIpKTtcbiAgICAgICAgICAgIH0sIHIub251cGdyYWRlbmVlZGVkID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgJ0RhdGFiYXNlIFwiJyArIHRoaXMubmFtZSArICdcIiByZXF1aXJlcyB1cGdyYWRlIGZyb20gdmVyc2lvbjonLCBlLm9sZFZlcnNpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5TLkIodCwgci50cmFuc2FjdGlvbiwgZS5vbGRWZXJzaW9uLCB0aGlzLnZlcnNpb24pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJEYXRhYmFzZSB1cGdyYWRlIHRvIHZlcnNpb24gXCIgKyB0aGlzLnZlcnNpb24gKyBcIiBjb21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkpLCB0aGlzLkwgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gZSA9PiB0aGlzLkwoZSkpLCB0aGlzLmRiO1xuICAgIH1cbiAgICBrKGUpIHtcbiAgICAgICAgdGhpcy5MID0gZSwgdGhpcy5kYiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSB0ID0+IGUodCkpO1xuICAgIH1cbiAgICBhc3luYyBydW5UcmFuc2FjdGlvbihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBcInJlYWRvbmx5XCIgPT09IHQ7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgKytzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gYXdhaXQgdGhpcy5OKGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbi5vcGVuKHRoaXMuZGIsIGUsIGkgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBuKSwgcyA9IHIodCkubmV4dCgoZSA9PiAodC5wKCksIFxuICAgICAgICAgICAgICAgIGUpKSkuY2F0Y2goKGUgPT4gKFxuICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSB0cmFuc2FjdGlvbiBpZiB0aGVyZSB3YXMgYW4gZXJyb3IuXG4gICAgICAgICAgICAgICAgdC5hYm9ydChlKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdChlKSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiBzLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgdC5nLCBzO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLCBuID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IHQubmFtZSAmJiBzIDwgMztcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6XCIsIHQubWVzc2FnZSwgXCJSZXRyeWluZzpcIiwgbiksIFxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKSwgIW4pIHJldHVybiBQcm9taXNlLnJlamVjdCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kYiAmJiB0aGlzLmRiLmNsb3NlKCksIHRoaXMuZGIgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY29udHJvbGxlciBmb3IgaXRlcmF0aW5nIG92ZXIgYSBrZXkgcmFuZ2Ugb3IgaW5kZXguIEl0IGFsbG93cyBhbiBpdGVyYXRlXG4gKiBjYWxsYmFjayB0byBkZWxldGUgdGhlIGN1cnJlbnRseS1yZWZlcmVuY2VkIG9iamVjdCwgb3IganVtcCB0byBhIG5ldyBrZXlcbiAqIHdpdGhpbiB0aGUga2V5IHJhbmdlIG9yIGluZGV4LlxuICovIGNsYXNzIF9fUFJJVkFURV9JdGVyYXRpb25Db250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMucSA9IGUsIHRoaXMuSyA9ICExLCB0aGlzLiQgPSBudWxsO1xuICAgIH1cbiAgICBnZXQgaXNEb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5LO1xuICAgIH1cbiAgICBnZXQgVSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJDtcbiAgICB9XG4gICAgc2V0IGN1cnNvcihlKSB7XG4gICAgICAgIHRoaXMucSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBzdG9wIGl0ZXJhdGlvbiBhdCBhbnkgcG9pbnQuXG4gICAgICovICAgIGRvbmUoKSB7XG4gICAgICAgIHRoaXMuSyA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc2tpcCB0byB0aGF0IG5leHQga2V5LCB3aGljaCBjb3VsZCBiZVxuICAgICAqIGFuIGluZGV4IG9yIGEgcHJpbWFyeSBrZXkuXG4gICAgICovICAgIFcoZSkge1xuICAgICAgICB0aGlzLiQgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgdGhlIGN1cnJlbnQgY3Vyc29yIHZhbHVlIGZyb20gdGhlIG9iamVjdCBzdG9yZS5cbiAgICAgKlxuICAgICAqIE5PVEU6IFlvdSBDQU5OT1QgZG8gdGhpcyB3aXRoIGEga2V5c09ubHkgcXVlcnkuXG4gICAgICovICAgIGRlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdCh0aGlzLnEuZGVsZXRlKCkpO1xuICAgIH1cbn1cblxuLyoqIEFuIGVycm9yIHRoYXQgd3JhcHMgZXhjZXB0aW9ucyB0aGF0IHRocm93biBkdXJpbmcgSW5kZXhlZERCIGV4ZWN1dGlvbi4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IgZXh0ZW5kcyBGaXJlc3RvcmVFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcih2LlVOQVZBSUxBQkxFLCBgSW5kZXhlZERCIHRyYW5zYWN0aW9uICcke2V9JyBmYWlsZWQ6ICR7dH1gKSwgdGhpcy5uYW1lID0gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCI7XG4gICAgfVxufVxuXG4vKiogVmVyaWZpZXMgd2hldGhlciBgZWAgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSB7XG4gICAgLy8gVXNlIG5hbWUgZXF1YWxpdHksIGFzIGluc3RhbmNlb2YgY2hlY2tzIG9uIGVycm9ycyBkb24ndCB3b3JrIHdpdGggZXJyb3JzXG4gICAgLy8gdGhhdCB3cmFwIG90aGVyIGVycm9ycy5cbiAgICByZXR1cm4gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCIgPT09IGUubmFtZTtcbn1cblxuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIGFuIElEQk9iamVjdFN0b3JlIHByb3ZpZGluZyBhbiBBUEkgdGhhdDpcbiAqXG4gKiAxKSBIYXMgZ2VuZXJpYyBLZXlUeXBlIC8gVmFsdWVUeXBlIHBhcmFtZXRlcnMgdG8gcHJvdmlkZSBzdHJvbmdseS10eXBlZFxuICogbWV0aG9kcyBmb3IgYWN0aW5nIGFnYWluc3QgdGhlIG9iamVjdCBzdG9yZS5cbiAqIDIpIERlYWxzIHdpdGggSW5kZXhlZERCJ3Mgb25zdWNjZXNzIC8gb25lcnJvciBldmVudCBjYWxsYmFja3MsIG1ha2luZyBldmVyeVxuICogbWV0aG9kIHJldHVybiBhIFBlcnNpc3RlbmNlUHJvbWlzZSBpbnN0ZWFkLlxuICogMykgUHJvdmlkZXMgYSBoaWdoZXItbGV2ZWwgQVBJIHRvIGF2b2lkIG5lZWRpbmcgdG8gZG8gZXhjZXNzaXZlIHdyYXBwaW5nIG9mXG4gKiBpbnRlcm1lZGlhdGUgSW5kZXhlZERCIHR5cGVzIChJREJDdXJzb3JXaXRoVmFsdWUsIGV0Yy4pXG4gKi8gY2xhc3MgX19QUklWQVRFX1NpbXBsZURiU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IGU7XG4gICAgfVxuICAgIHB1dChlLCB0KSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgZSwgdCksIFxuICAgICAgICBuID0gdGhpcy5zdG9yZS5wdXQodCwgZSkpIDogKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgXCI8YXV0by1rZXk+XCIsIGUpLCBcbiAgICAgICAgbiA9IHRoaXMuc3RvcmUucHV0KGUpKSwgX19QUklWQVRFX3dyYXBSZXF1ZXN0KG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IHZhbHVlIGludG8gYW4gT2JqZWN0IFN0b3JlIGFuZCByZXR1cm5zIHRoZSBuZXcga2V5LiBTaW1pbGFyIHRvXG4gICAgICogSW5kZXhlZERiJ3MgYGFkZCgpYCwgdGhpcyBtZXRob2Qgd2lsbCBmYWlsIG9uIHByaW1hcnkga2V5IGNvbGxpc2lvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgb2JqZWN0IHRvIHdyaXRlLlxuICAgICAqIEByZXR1cm5zIFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi8gICAgYWRkKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJBRERcIiwgdGhpcy5zdG9yZS5uYW1lLCBlLCBlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdCh0aGlzLnN0b3JlLmFkZChlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IGZyb20gdGhlIHNwZWNpZmllZCBzdG9yZSwgb3IgbnVsbFxuICAgICAqIGlmIG5vIG9iamVjdCBleGlzdHMgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS5cbiAgICAgKlxuICAgICAqIEBrZXkgVGhlIGtleSBvZiB0aGUgb2JqZWN0IHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyBUaGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgb3IgbnVsbCBpZiBubyBvYmplY3QgZXhpc3RzLlxuICAgICAqLyAgICBnZXQoZSkge1xuICAgICAgICAvLyBXZSdyZSBkb2luZyBhbiB1bnNhZmUgY2FzdCB0byBWYWx1ZVR5cGUuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5zdG9yZS5nZXQoZSkpLm5leHQoKHQgPT4gKFxuICAgICAgICAvLyBOb3JtYWxpemUgbm9uZXhpc3RlbmNlIHRvIG51bGwuXG4gICAgICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9IG51bGwpLCBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIkdFVFwiLCB0aGlzLnN0b3JlLm5hbWUsIGUsIHQpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJERUxFVEVcIiwgdGhpcy5zdG9yZS5uYW1lLCBlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdCh0aGlzLnN0b3JlLmRlbGV0ZShlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHdlIGV2ZXIgbmVlZCBtb3JlIG9mIHRoZSBjb3VudCB2YXJpYW50cywgd2UgY2FuIGFkZCBvdmVybG9hZHMuIEZvciBub3csXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHN0b3JlLlxuICAgICAqLyAgICBjb3VudCgpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJDT1VOVFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyYXBSZXF1ZXN0KHRoaXMuc3RvcmUuY291bnQoKSk7XG4gICAgfVxuICAgIEcoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKGUsIHQpO1xuICAgICAgICAvLyBVc2UgYGdldEFsbCgpYCBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBJbmRleGVkREIgdjMsIGFzIGl0IGlzIHJvdWdobHlcbiAgICAgICAgLy8gMjAlIGZhc3Rlci4gVW5mb3J0dW5hdGVseSwgZ2V0QWxsKCkgZG9lcyBub3Qgc3VwcG9ydCBjdXN0b20gaW5kaWNlcy5cbiAgICAgICAgICAgICAgICBpZiAobi5pbmRleCB8fCBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHRoaXMuc3RvcmUuZ2V0QWxsKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3IobiksIHQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmooZSwgKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdC5wdXNoKG4pO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yZS5nZXRBbGwobi5yYW5nZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBlLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbihlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdChlLnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhlIGZpcnN0IGBjb3VudGAgZWxlbWVudHMgZnJvbSB0aGUgcHJvdmlkZWQgaW5kZXggcmFuZ2UuIExvYWRzIGFsbFxuICAgICAqIGVsZW1lbnRzIGlmIG5vIGxpbWl0IGlzIHByb3ZpZGVkLlxuICAgICAqLyAgICBIKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuZ2V0QWxsKGUsIG51bGwgPT09IHQgPyB2b2lkIDAgOiB0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBuLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0KGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIH0sIG4ub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgZSh0LnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBKKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJERUxFVEUgQUxMXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnMoZSwgdCk7XG4gICAgICAgIG4uWSA9ICExO1xuICAgICAgICBjb25zdCByID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLmoociwgKChlLCB0LCBuKSA9PiBuLmRlbGV0ZSgpKSk7XG4gICAgfVxuICAgIFooZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgdCA/IG4gPSBlIDogKG4gPSB7fSwgdCA9IGUpO1xuICAgICAgICBjb25zdCByID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLmoociwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzdG9yZSwgYnV0IHdhaXRzIGZvciB0aGUgZ2l2ZW4gY2FsbGJhY2sgdG8gY29tcGxldGUgZm9yXG4gICAgICogZWFjaCBlbnRyeSBiZWZvcmUgaXRlcmF0aW5nIHRoZSBuZXh0IGVudHJ5LiBUaGlzIGFsbG93cyB0aGUgY2FsbGJhY2sgdG8gZG9cbiAgICAgKiBhc3luY2hyb25vdXMgd29yayB0byBkZXRlcm1pbmUgaWYgdGhpcyBpdGVyYXRpb24gc2hvdWxkIGNvbnRpbnVlLlxuICAgICAqXG4gICAgICogVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHNob3VsZCByZXR1cm4gYHRydWVgIHRvIGNvbnRpbnVlIGl0ZXJhdGlvbiwgYW5kXG4gICAgICogYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovICAgIFgoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jdXJzb3Ioe30pO1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHQub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcihlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICAgICAgcih0KTtcbiAgICAgICAgICAgIH0sIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICByID8gZShyLnByaW1hcnlLZXksIHIudmFsdWUpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlID8gci5jb250aW51ZSgpIDogbigpO1xuICAgICAgICAgICAgICAgIH0pKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChyLCBpKSA9PiB7XG4gICAgICAgICAgICBlLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBpKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIH0sIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiB2b2lkIHIoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IF9fUFJJVkFURV9JdGVyYXRpb25Db250cm9sbGVyKGkpLCBvID0gdChpLnByaW1hcnlLZXksIGkudmFsdWUsIHMpO1xuICAgICAgICAgICAgICAgIGlmIChvIGluc3RhbmNlb2YgUGVyc2lzdGVuY2VQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmNhdGNoKChlID0+IChzLmRvbmUoKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdChlKSkpKTtcbiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzLmlzRG9uZSA/IHIoKSA6IG51bGwgPT09IHMuVSA/IGkuY29udGludWUoKSA6IGkuY29udGludWUocy5VKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihuKSkpO1xuICAgIH1cbiAgICBvcHRpb25zKGUsIHQpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgJiYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBuID0gZSA6IHQgPSBlKSwge1xuICAgICAgICAgICAgaW5kZXg6IG4sXG4gICAgICAgICAgICByYW5nZTogdFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjdXJzb3IoZSkge1xuICAgICAgICBsZXQgdCA9IFwibmV4dFwiO1xuICAgICAgICBpZiAoZS5yZXZlcnNlICYmICh0ID0gXCJwcmV2XCIpLCBlLmluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5pbmRleChlLmluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiBlLlkgPyBuLm9wZW5LZXlDdXJzb3IoZS5yYW5nZSwgdCkgOiBuLm9wZW5DdXJzb3IoZS5yYW5nZSwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmUub3BlbkN1cnNvcihlLnJhbmdlLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogV3JhcHMgYW4gSURCUmVxdWVzdCBpbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSwgdXNpbmcgdGhlIG9uc3VjY2VzcyAvIG9uZXJyb3JcbiAqIGhhbmRsZXJzIHRvIHJlc29sdmUgLyByZWplY3QgdGhlIFBlcnNpc3RlbmNlUHJvbWlzZSBhcyBhcHByb3ByaWF0ZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QoZSkge1xuICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIHQobik7XG4gICAgICAgIH0sIGUub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIG4odCk7XG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vLyBHdWFyZCBzbyB3ZSBvbmx5IHJlcG9ydCB0aGUgZXJyb3Igb25jZS5cbmxldCBNID0gITE7XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX1NpbXBsZURiLkQoZ2V0VUEoKSk7XG4gICAgaWYgKHQgPj0gMTIuMiAmJiB0IDwgMTMpIHtcbiAgICAgICAgY29uc3QgdCA9IFwiQW4gaW50ZXJuYWwgZXJyb3Igd2FzIGVuY291bnRlcmVkIGluIHRoZSBJbmRleGVkIERhdGFiYXNlIHNlcnZlclwiO1xuICAgICAgICBpZiAoZS5tZXNzYWdlLmluZGV4T2YodCkgPj0gMCkge1xuICAgICAgICAgICAgLy8gV3JhcCBlcnJvciBpbiBhIG1vcmUgZGVzY3JpcHRpdmUgb25lLlxuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBGaXJlc3RvcmVFcnJvcihcImludGVybmFsXCIsIGBJT1NfSU5ERVhFRERCX0JVRzE6IEluZGV4ZWREYiBoYXMgdGhyb3duICcke3R9Jy4gVGhpcyBpcyBsaWtlbHkgZHVlIHRvIGFuIHVuYXZvaWRhYmxlIGJ1ZyBpbiBpT1MuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLmApO1xuICAgICAgICAgICAgcmV0dXJuIE0gfHwgKE0gPSAhMCwgXG4gICAgICAgICAgICAvLyBUaHJvdyBhIGdsb2JhbCBleGNlcHRpb24gb3V0c2lkZSBvZiB0aGlzIHByb21pc2UgY2hhaW4sIGZvciB0aGUgdXNlciB0b1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgY2F0Y2guXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH0pLCAwKSksIGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbi8qKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBJbmRleCBCYWNrZmlsbGVyLiAqL1xuY2xhc3MgX19QUklWQVRFX0luZGV4QmFja2ZpbGxlclNjaGVkdWxlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLmVlID0gdCwgdGhpcy50YXNrID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMudGUoMTVlMyk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMudGFzayAmJiAodGhpcy50YXNrLmNhbmNlbCgpLCB0aGlzLnRhc2sgPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLnRhc2s7XG4gICAgfVxuICAgIHRlKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNraWxsZXJcIiwgYFNjaGVkdWxlZCBpbiAke2V9bXNgKSwgdGhpcy50YXNrID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwiaW5kZXhfYmFja2ZpbGxcIiAvKiBUaW1lcklkLkluZGV4QmFja2ZpbGwgKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNraWxsZXJcIiwgYERvY3VtZW50cyB3cml0dGVuOiAke2F3YWl0IHRoaXMuZWUubmUoKX1gKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpID8gX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNraWxsZXJcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGluZGV4IGJhY2tmaWxsOiBcIiwgZSkgOiBhd2FpdCBfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy50ZSg2ZTQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIGJhY2tmaWxsaW5nIGluZGV4ZXMuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEJhY2tmaWxsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIExvY2FsU3RvcmUgcHJvdmlkZXMgYWNjZXNzIHRvIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFZpZXcuXG4gICAgICogVGhlc2UgcHJvcGVydGllcyB3aWxsIHVwZGF0ZSB3aGVuIHRoZSB1c2VyIGNoYW5nZXMuIENvbnNlcXVlbnRseSxcbiAgICAgKiBtYWtpbmcgYSBsb2NhbCBjb3B5IG9mIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFZpZXcgd2lsbCByZXF1aXJlXG4gICAgICogdXBkYXRlcyBvdmVyIHRpbWUuIFRoZSBzaW1wbGVyIHNvbHV0aW9uIGlzIHRvIHJlbHkgb24gTG9jYWxTdG9yZSB0byBoYXZlXG4gICAgICogYW4gdXAtdG8tZGF0ZSByZWZlcmVuY2VzIHRvIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFN0b3JlLlxuICAgICAqL1xuICAgIGUsIHQpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5wZXJzaXN0ZW5jZSA9IHQ7XG4gICAgfVxuICAgIGFzeW5jIG5lKGUgPSA1MCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkJhY2tmaWxsIEluZGV4ZXNcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB0aGlzLnJlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgaW5kZXggZW50cmllcyB1bnRpbCB0aGUgY2FwIGlzIHJlYWNoZWQuIFJldHVybnMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcHJvY2Vzc2VkLiAqLyAgICByZShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgU2V0O1xuICAgICAgICBsZXQgciA9IHQsIGkgPSAhMDtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5kb1doaWxlKCgoKSA9PiAhMCA9PT0gaSAmJiByID4gMCksICgoKSA9PiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLmdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZShlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0ICYmICFuLmhhcyh0KSkgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4QmFja2lsbGVyXCIsIGBQcm9jZXNzaW5nIGNvbGxlY3Rpb246ICR7dH1gKSwgXG4gICAgICAgICAgICB0aGlzLmllKGUsIHQsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIHIgLT0gZSwgbi5hZGQodCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpID0gITE7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IHQgLSByKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyaXRlcyBlbnRyaWVzIGZvciB0aGUgcHJvdmlkZWQgY29sbGVjdGlvbiBncm91cC4gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBwcm9jZXNzZWQuXG4gICAgICovICAgIGllKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gVXNlIHRoZSBlYXJsaWVzdCBvZmZzZXQgb2YgYWxsIGZpZWxkIGluZGV4ZXMgdG8gcXVlcnkgdGhlIGxvY2FsIGNhY2hlLlxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci5nZXRNaW5PZmZzZXRGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQpLm5leHQoKHIgPT4gdGhpcy5sb2NhbFN0b3JlLmxvY2FsRG9jdW1lbnRzLmdldE5leHREb2N1bWVudHMoZSwgdCwgciwgbikubmV4dCgobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5jaGFuZ2VzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIudXBkYXRlSW5kZXhFbnRyaWVzKGUsIGkpLm5leHQoKCgpID0+IHRoaXMuc2UociwgbikpKS5uZXh0KChuID0+IChfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleEJhY2tpbGxlclwiLCBgVXBkYXRpbmcgb2Zmc2V0OiAke259YCksIFxuICAgICAgICAgICAgdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci51cGRhdGVDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbikpKSkubmV4dCgoKCkgPT4gaS5zaXplKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgbmV4dCBvZmZzZXQgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gKi8gICAgc2UoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IGU7XG4gICAgICAgIHJldHVybiB0LmNoYW5nZXMuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRGcm9tRG9jdW1lbnQodCk7XG4gICAgICAgICAgICBfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yKHIsIG4pID4gMCAmJiAobiA9IHIpO1xuICAgICAgICB9KSksIG5ldyBJbmRleE9mZnNldChuLnJlYWRUaW1lLCBuLmRvY3VtZW50S2V5LCBNYXRoLm1heCh0LmJhdGNoSWQsIGUubGFyZ2VzdEJhdGNoSWQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxuICovIGNsYXNzIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSBlLCB0ICYmICh0LnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IGUgPT4gdGhpcy5vZShlKSwgdGhpcy5fZSA9IGUgPT4gdC53cml0ZVNlcXVlbmNlTnVtYmVyKGUpKTtcbiAgICB9XG4gICAgb2UoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlID0gTWF0aC5tYXgoZSwgdGhpcy5wcmV2aW91c1ZhbHVlKSwgdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICBjb25zdCBlID0gKyt0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzLl9lICYmIHRoaXMuX2UoZSksIGU7XG4gICAgfVxufVxuXG5fX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWUgPSAtMTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YXJpYWJsZSBpcyBlaXRoZXIgdW5kZWZpbmVkIG9yIG51bGwuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZChlKSB7XG4gICAgcmV0dXJuIG51bGwgPT0gZTtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciB0aGUgdmFsdWUgcmVwcmVzZW50cyAtMC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKGUpIHtcbiAgICAvLyBEZXRlY3QgaWYgdGhlIHZhbHVlIGlzIC0wLjAuIEJhc2VkIG9uIHBvbHlmaWxsIGZyb21cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNcbiAgICByZXR1cm4gMCA9PT0gZSAmJiAxIC8gZSA9PSAtMSAvIDA7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgaXMgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgaW50ZWdlciByYW5nZVxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHRlc3QgZm9yIGJlaW5nIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIHJhbmdlXG4gKi8gZnVuY3Rpb24gaXNTYWZlSW50ZWdlcihlKSB7XG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIGUgJiYgTnVtYmVyLmlzSW50ZWdlcihlKSAmJiAhX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKGUpICYmIGUgPD0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgJiYgZSA+PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRW5jb2RlcyBhIHJlc291cmNlIHBhdGggaW50byBhIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUpIHtcbiAgICBsZXQgdCA9IFwiXCI7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB0Lmxlbmd0aCA+IDAgJiYgKHQgPSBfX1BSSVZBVEVfZW5jb2RlU2VwYXJhdG9yKHQpKSwgXG4gICAgdCA9IF9fUFJJVkFURV9lbmNvZGVTZWdtZW50KGUuZ2V0KG4pLCB0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2VuY29kZVNlcGFyYXRvcih0KTtcbn1cblxuLyoqIEVuY29kZXMgYSBzaW5nbGUgc2VnbWVudCBvZiBhIHJlc291cmNlIHBhdGggaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovIGZ1bmN0aW9uIF9fUFJJVkFURV9lbmNvZGVTZWdtZW50KGUsIHQpIHtcbiAgICBsZXQgbiA9IHQ7XG4gICAgY29uc3QgciA9IGUubGVuZ3RoO1xuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcjsgdCsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSBlLmNoYXJBdCh0KTtcbiAgICAgICAgc3dpdGNoIChyKSB7XG4gICAgICAgICAgY2FzZSBcIlxcMFwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDExXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBuICs9IHI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgcGF0aCBzZXBhcmF0b3IgaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovIGZ1bmN0aW9uIF9fUFJJVkFURV9lbmNvZGVTZXBhcmF0b3IoZSkge1xuICAgIHJldHVybiBlICsgXCJcdTAwMDFcdTAwMDFcIjtcbn1cblxuLyoqXG4gKiBEZWNvZGVzIHRoZSBnaXZlbiBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybSBvZiBhIHJlc291cmNlIHBhdGggaW50b1xuICogYSBSZXNvdXJjZVBhdGggaW5zdGFuY2UuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoXG4gKiBkZWNvZGluZyByZXNvdXJjZSBuYW1lcyBmcm9tIHRoZSBzZXJ2ZXI7IHRob3NlIGFyZSBPbmUgUGxhdGZvcm0gZm9ybWF0XG4gKiBzdHJpbmdzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoZSkge1xuICAgIC8vIEV2ZW50IHRoZSBlbXB0eSBwYXRoIG11c3QgZW5jb2RlIGFzIGEgcGF0aCBvZiBhdCBsZWFzdCBsZW5ndGggMi4gQSBwYXRoXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cbiAgICBjb25zdCB0ID0gZS5sZW5ndGg7XG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHQgPj0gMiksIDIgPT09IHQpIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChcIlx1MDAwMVwiID09PSBlLmNoYXJBdCgwKSAmJiBcIlx1MDAwMVwiID09PSBlLmNoYXJBdCgxKSksIFxuICAgIFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKTtcbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyBjYW5ub3QgZXhpc3QgcGFzdCB0aGUgc2Vjb25kLXRvLWxhc3QgcG9zaXRpb24gaW4gdGhlXG4gICAgLy8gc291cmNlIHZhbHVlLlxuICAgICAgICBjb25zdCBfX1BSSVZBVEVfbGFzdFJlYXNvbmFibGVFc2NhcGVJbmRleCA9IHQgLSAyLCBuID0gW107XG4gICAgbGV0IHIgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdDsgKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHR3byBjaGFyYWN0ZXJzIG9mIGEgdmFsaWQgZW5jb2RlZCBwYXRoIG11c3QgYmUgYSBzZXBhcmF0b3IsIHNvXG4gICAgICAgIC8vIHRoZXJlIG11c3QgYmUgYW4gZW5kIHRvIHRoaXMgc2VnbWVudC5cbiAgICAgICAgY29uc3QgdCA9IGUuaW5kZXhPZihcIlx1MDAwMVwiLCBpKTtcbiAgICAgICAgKHQgPCAwIHx8IHQgPiBfX1BSSVZBVEVfbGFzdFJlYXNvbmFibGVFc2NhcGVJbmRleCkgJiYgZmFpbCgpO1xuICAgICAgICBzd2l0Y2ggKGUuY2hhckF0KHQgKyAxKSkge1xuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLnN1YnN0cmluZyhpLCB0KTtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgMCA9PT0gci5sZW5ndGggPyBcbiAgICAgICAgICAgIC8vIEF2b2lkIGNvcHlpbmcgZm9yIHRoZSBjb21tb24gY2FzZSBvZiBhIHNlZ21lbnQgdGhhdCBleGNsdWRlcyBcXDBcbiAgICAgICAgICAgIC8vIGFuZCBcXDAwMVxuICAgICAgICAgICAgbyA9IHMgOiAociArPSBzLCBvID0gciwgciA9IFwiXCIpLCBuLnB1c2gobyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTBcIjpcbiAgICAgICAgICAgIHIgKz0gZS5zdWJzdHJpbmcoaSwgdCksIHIgKz0gXCJcXDBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMVwiOlxuICAgICAgICAgICAgLy8gVGhlIGVzY2FwZSBjaGFyYWN0ZXIgY2FuIGJlIHVzZWQgaW4gdGhlIG91dHB1dCB0byBlbmNvZGUgaXRzZWxmLlxuICAgICAgICAgICAgciArPSBlLnN1YnN0cmluZyhpLCB0ICsgMSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBmYWlsKCk7XG4gICAgICAgIH1cbiAgICAgICAgaSA9IHQgKyAyO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChuKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgeCA9IFsgXCJ1c2VySWRcIiwgXCJiYXRjaElkXCIgXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG5hbWUgJ293bmVyJyBpcyBjaG9zZW4gdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGhcbiAqIG9sZGVyIGNsaWVudHMgdGhhdCBvbmx5IHN1cHBvcnRlZCBzaW5nbGUgbG9ja2VkIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2VcbiAqIGxheWVyLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSBbdXNlcklkLCBlbmNvZGVkUGF0aF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnNcbiAqIGluZGV4IHRvIGl0ZXJhdGUgb3ZlciBhbGwgYXQgZG9jdW1lbnQgbXV0YXRpb25zIGZvciBhIGdpdmVuIHBhdGggb3IgbG93ZXIuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKGUsIHQpIHtcbiAgICByZXR1cm4gWyBlLCBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQpIF07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bGwgaW5kZXgga2V5IG9mIFt1c2VySWQsIGVuY29kZWRQYXRoLCBiYXRjaElkXSBmb3IgaW5zZXJ0aW5nXG4gKiBhbmQgZGVsZXRpbmcgaW50byB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uS2V5KGUsIHQsIG4pIHtcbiAgICByZXR1cm4gWyBlLCBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQpLCBuIF07XG59XG5cbi8qKlxuICogQmVjYXVzZSB3ZSBzdG9yZSBhbGwgdGhlIHVzZWZ1bCBpbmZvcm1hdGlvbiBmb3IgdGhpcyBzdG9yZSBpbiB0aGUga2V5LFxuICogdGhlcmUgaXMgbm8gdXNlZnVsIGluZm9ybWF0aW9uIHRvIHN0b3JlIGFzIHRoZSB2YWx1ZS4gVGhlIHJhdyAodW5lbmNvZGVkKVxuICogcGF0aCBjYW5ub3QgYmUgc3RvcmVkIGJlY2F1c2UgSW5kZXhlZERiIGRvZXNuJ3Qgc3RvcmUgcHJvdG90eXBlXG4gKiBpbmZvcm1hdGlvbi5cbiAqLyBjb25zdCBPID0ge30sIE4gPSBbIFwicHJlZml4UGF0aFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcInJlYWRUaW1lXCIsIFwiZG9jdW1lbnRJZFwiIF0sIEIgPSBbIFwicHJlZml4UGF0aFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcImRvY3VtZW50SWRcIiBdLCBMID0gWyBcImNvbGxlY3Rpb25Hcm91cFwiLCBcInJlYWRUaW1lXCIsIFwicHJlZml4UGF0aFwiLCBcImRvY3VtZW50SWRcIiBdLCBrID0gWyBcImNhbm9uaWNhbElkXCIsIFwidGFyZ2V0SWRcIiBdLCBxID0gWyBcInRhcmdldElkXCIsIFwicGF0aFwiIF0sIFEgPSBbIFwicGF0aFwiLCBcInRhcmdldElkXCIgXSwgSyA9IFsgXCJjb2xsZWN0aW9uSWRcIiwgXCJwYXJlbnRcIiBdLCAkID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiBdLCBVID0gWyBcInVpZFwiLCBcInNlcXVlbmNlTnVtYmVyXCIgXSwgVyA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIsIFwiYXJyYXlWYWx1ZVwiLCBcImRpcmVjdGlvbmFsVmFsdWVcIiwgXCJvcmRlcmVkRG9jdW1lbnRLZXlcIiwgXCJkb2N1bWVudEtleVwiIF0sIEcgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiLCBcIm9yZGVyZWREb2N1bWVudEtleVwiIF0sIHogPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvblBhdGhcIiwgXCJkb2N1bWVudElkXCIgXSwgaiA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgSCA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJsYXJnZXN0QmF0Y2hJZFwiIF0sIEogPSBbIC4uLlsgLi4uWyAuLi5bIC4uLlsgXCJtdXRhdGlvblF1ZXVlc1wiLCBcIm11dGF0aW9uc1wiLCBcImRvY3VtZW50TXV0YXRpb25zXCIsIFwicmVtb3RlRG9jdW1lbnRzXCIsIFwidGFyZ2V0c1wiLCBcIm93bmVyXCIsIFwidGFyZ2V0R2xvYmFsXCIsIFwidGFyZ2V0RG9jdW1lbnRzXCIgXSwgXCJjbGllbnRNZXRhZGF0YVwiIF0sIFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiBdLCBcImNvbGxlY3Rpb25QYXJlbnRzXCIgXSwgXCJidW5kbGVzXCIsIFwibmFtZWRRdWVyaWVzXCIgXSwgWSA9IFsgLi4uSiwgXCJkb2N1bWVudE92ZXJsYXlzXCIgXSwgWiA9IFsgXCJtdXRhdGlvblF1ZXVlc1wiLCBcIm11dGF0aW9uc1wiLCBcImRvY3VtZW50TXV0YXRpb25zXCIsIFwicmVtb3RlRG9jdW1lbnRzVjE0XCIsIFwidGFyZ2V0c1wiLCBcIm93bmVyXCIsIFwidGFyZ2V0R2xvYmFsXCIsIFwidGFyZ2V0RG9jdW1lbnRzXCIsIFwiY2xpZW50TWV0YWRhdGFcIiwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiLCBcImNvbGxlY3Rpb25QYXJlbnRzXCIsIFwiYnVuZGxlc1wiLCBcIm5hbWVkUXVlcmllc1wiLCBcImRvY3VtZW50T3ZlcmxheXNcIiBdLCBYID0gWiwgZWUgPSBbIC4uLlgsIFwiaW5kZXhDb25maWd1cmF0aW9uXCIsIFwiaW5kZXhTdGF0ZVwiLCBcImluZGV4RW50cmllc1wiIF07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb24gZXh0ZW5kcyBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudWUgPSBlLCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfU2ltcGxlRGIuTyhuLnVlLCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX29iamVjdFNpemUoZSkge1xuICAgIGxldCB0ID0gMDtcbiAgICBmb3IgKGNvbnN0IG4gaW4gZSkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIG4pICYmIHQrKztcbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaChlLCB0KSB7XG4gICAgZm9yIChjb25zdCBuIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBuKSAmJiB0KG4sIGVbbl0pO1xufVxuXG5mdW5jdGlvbiBpc0VtcHR5KGUpIHtcbiAgICBmb3IgKGNvbnN0IHQgaW4gZSkgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KSkgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbi8vIHRyZWUuXG5jbGFzcyBTb3J0ZWRNYXAge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gZSwgdGhpcy5yb290ID0gdCB8fCBMTFJCTm9kZS5FTVBUWTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICBpbnNlcnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5pbnNlcnQoZSwgdCwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5yZW1vdmUoZSwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cbiAgICBnZXQoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IXQuaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmNvbXBhcmF0b3IoZSwgdC5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybiB0LnZhbHVlO1xuICAgICAgICAgICAgbiA8IDAgPyB0ID0gdC5sZWZ0IDogbiA+IDAgJiYgKHQgPSB0LnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgaW4gdGhpcyBzb3J0ZWQgbWFwLCBvciAtMSBpZiBpdCBkb2Vzbid0XG4gICAgLy8gZXhpc3QuXG4gICAgaW5kZXhPZihlKSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBub2RlcyB0aGF0IHdlcmUgcHJ1bmVkIHdoZW4gZGVzY2VuZGluZyByaWdodFxuICAgICAgICBsZXQgdCA9IDAsIG4gPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFuLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5jb21wYXJhdG9yKGUsIG4ua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSByKSByZXR1cm4gdCArIG4ubGVmdC5zaXplO1xuICAgICAgICAgICAgciA8IDAgPyBuID0gbi5sZWZ0IDogKFxuICAgICAgICAgICAgLy8gQ291bnQgYWxsIG5vZGVzIGxlZnQgb2YgdGhlIG5vZGUgcGx1cyB0aGUgbm9kZSBpdHNlbGZcbiAgICAgICAgICAgIHQgKz0gbi5sZWZ0LnNpemUgKyAxLCBuID0gbi5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwoZSk7XG4gICAgfVxuICAgIGZvckVhY2goZSkge1xuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZSh0LCBuKSwgITEpKSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZS5wdXNoKGAke3R9OiR7bn1gKSwgITEpKSksIGB7JHtlLmpvaW4oXCIsIFwiKX19YDtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xuICAgIC8vIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnJldmVyc2VUcmF2ZXJzYWwoZSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBlLCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20oZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgZSwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcFxuLy8gQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbmNsYXNzIFNvcnRlZE1hcEl0ZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlID0gciwgdGhpcy5ub2RlU3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICBmb3IgKDshZS5pc0VtcHR5KCk7ICkgaWYgKGkgPSB0ID8gbihlLmtleSwgdCkgOiAxLCBcbiAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXG4gICAgICAgIHQgJiYgciAmJiAoaSAqPSAtMSksIGkgPCAwKSBcbiAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcbiAgICAgICAgZSA9IHRoaXMuaXNSZXZlcnNlID8gZS5sZWZ0IDogZS5yaWdodDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBzdG9wIGl0ZXJhdGluZztcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2goZSksIGUgPSB0aGlzLmlzUmV2ZXJzZSA/IGUucmlnaHQgOiBlLmxlZnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLm5vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGtleTogZS5rZXksXG4gICAgICAgICAgICB2YWx1ZTogZS52YWx1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIGZvciAoZSA9IGUubGVmdDsgIWUuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2goZSksIGUgPSBlLnJpZ2h0OyBlbHNlIGZvciAoZSA9IGUucmlnaHQ7ICFlLmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKGUpLCBcbiAgICAgICAgZSA9IGUubGVmdDtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5ub2RlU3RhY2subGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubm9kZVN0YWNrW3RoaXMubm9kZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5OiBlLmtleSxcbiAgICAgICAgICAgIHZhbHVlOiBlLnZhbHVlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcEl0ZXJhdG9yXG4vLyBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cbmNsYXNzIExMUkJOb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZSwgdGhpcy52YWx1ZSA9IHQsIHRoaXMuY29sb3IgPSBudWxsICE9IG4gPyBuIDogTExSQk5vZGUuUkVELCB0aGlzLmxlZnQgPSBudWxsICE9IHIgPyByIDogTExSQk5vZGUuRU1QVFksIFxuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbCAhPSBpID8gaSA6IExMUkJOb2RlLkVNUFRZLCB0aGlzLnNpemUgPSB0aGlzLmxlZnQuc2l6ZSArIDEgKyB0aGlzLnJpZ2h0LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cbiAgICBjb3B5KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShudWxsICE9IGUgPyBlIDogdGhpcy5rZXksIG51bGwgIT0gdCA/IHQgOiB0aGlzLnZhbHVlLCBudWxsICE9IG4gPyBuIDogdGhpcy5jb2xvciwgbnVsbCAhPSByID8gciA6IHRoaXMubGVmdCwgbnVsbCAhPSBpID8gaSA6IHRoaXMucmlnaHQpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwoZSkgfHwgZSh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5yaWdodC5pbm9yZGVyVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5yZXZlcnNlVHJhdmVyc2FsKGUpIHx8IGUodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMubGVmdC5yZXZlcnNlVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIG5vZGUgaW4gdGhlIHRyZWUuXG4gICAgbWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmlzRW1wdHkoKSA/IHRoaXMgOiB0aGlzLmxlZnQubWluKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKCkua2V5O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmlzRW1wdHkoKSA/IHRoaXMua2V5IDogdGhpcy5yaWdodC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydChlLCB0LCBuKSB7XG4gICAgICAgIGxldCByID0gdGhpcztcbiAgICAgICAgY29uc3QgaSA9IG4oZSwgci5rZXkpO1xuICAgICAgICByZXR1cm4gciA9IGkgPCAwID8gci5jb3B5KG51bGwsIG51bGwsIG51bGwsIHIubGVmdC5pbnNlcnQoZSwgdCwgbiksIG51bGwpIDogMCA9PT0gaSA/IHIuY29weShudWxsLCB0LCBudWxsLCBudWxsLCBudWxsKSA6IHIuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCByLnJpZ2h0Lmluc2VydChlLCB0LCBuKSksIFxuICAgICAgICByLmZpeFVwKCk7XG4gICAgfVxuICAgIHJlbW92ZU1pbigpIHtcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHJldHVybiBMTFJCTm9kZS5FTVBUWTtcbiAgICAgICAgbGV0IGUgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZS5sZWZ0LmlzUmVkKCkgfHwgZS5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAoZSA9IGUubW92ZVJlZExlZnQoKSksIGUgPSBlLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgZS5sZWZ0LnJlbW92ZU1pbigpLCBudWxsKSwgXG4gICAgICAgIGUuZml4VXAoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGl0ZW0gcmVtb3ZlZC5cbiAgICByZW1vdmUoZSwgdCkge1xuICAgICAgICBsZXQgbiwgciA9IHRoaXM7XG4gICAgICAgIGlmICh0KGUsIHIua2V5KSA8IDApIHIubGVmdC5pc0VtcHR5KCkgfHwgci5sZWZ0LmlzUmVkKCkgfHwgci5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAociA9IHIubW92ZVJlZExlZnQoKSksIFxuICAgICAgICByID0gci5jb3B5KG51bGwsIG51bGwsIG51bGwsIHIubGVmdC5yZW1vdmUoZSwgdCksIG51bGwpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyLmxlZnQuaXNSZWQoKSAmJiAociA9IHIucm90YXRlUmlnaHQoKSksIHIucmlnaHQuaXNFbXB0eSgpIHx8IHIucmlnaHQuaXNSZWQoKSB8fCByLnJpZ2h0LmxlZnQuaXNSZWQoKSB8fCAociA9IHIubW92ZVJlZFJpZ2h0KCkpLCBcbiAgICAgICAgICAgIDAgPT09IHQoZSwgci5rZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHIucmlnaHQuaXNFbXB0eSgpKSByZXR1cm4gTExSQk5vZGUuRU1QVFk7XG4gICAgICAgICAgICAgICAgbiA9IHIucmlnaHQubWluKCksIHIgPSByLmNvcHkobi5rZXksIG4udmFsdWUsIG51bGwsIG51bGwsIHIucmlnaHQucmVtb3ZlTWluKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgciA9IHIuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCByLnJpZ2h0LnJlbW92ZShlLCB0KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHIuZml4VXAoKTtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlIGFmdGVyIHBlcmZvcm1pbmcgYW55IG5lZWRlZCByb3RhdGlvbnMuXG4gICAgZml4VXAoKSB7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGUucmlnaHQuaXNSZWQoKSAmJiAhZS5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLnJvdGF0ZUxlZnQoKSksIGUubGVmdC5pc1JlZCgpICYmIGUubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgZS5sZWZ0LmlzUmVkKCkgJiYgZS5yaWdodC5pc1JlZCgpICYmIChlID0gZS5jb2xvckZsaXAoKSksIGU7XG4gICAgfVxuICAgIG1vdmVSZWRMZWZ0KCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiBlLnJpZ2h0LmxlZnQuaXNSZWQoKSAmJiAoZSA9IGUuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBlLnJpZ2h0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgZSA9IGUucm90YXRlTGVmdCgpLCBlID0gZS5jb2xvckZsaXAoKSksIGU7XG4gICAgfVxuICAgIG1vdmVSZWRSaWdodCgpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gZS5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAoZSA9IGUucm90YXRlUmlnaHQoKSwgZSA9IGUuY29sb3JGbGlwKCkpLCBlO1xuICAgIH1cbiAgICByb3RhdGVMZWZ0KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgbnVsbCwgdGhpcy5yaWdodC5sZWZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBlLCBudWxsKTtcbiAgICB9XG4gICAgcm90YXRlUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuUkVELCB0aGlzLmxlZnQucmlnaHQsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbnVsbCwgZSk7XG4gICAgfVxuICAgIGNvbG9yRmxpcCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpLCB0ID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgZSwgdCk7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdygyLCBlKSA8PSB0aGlzLnNpemUgKyAxO1xuICAgIH1cbiAgICAvLyBJbiBhIGJhbGFuY2VkIFJCIHRyZWUsIHRoZSBibGFjay1kZXB0aCAobnVtYmVyIG9mIGJsYWNrIG5vZGVzKSBmcm9tIHJvb3QgdG9cbiAgICAvLyBsZWF2ZXMgaXMgZXF1YWwgb24gYm90aCBzaWRlcy4gIFRoaXMgZnVuY3Rpb24gdmVyaWZpZXMgdGhhdCBvciBhc3NlcnRzLlxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy5pc1JlZCgpICYmIHRoaXMubGVmdC5pc1JlZCgpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzUmVkKCkpIHRocm93IGZhaWwoKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubGVmdC5jaGVjaygpO1xuICAgICAgICBpZiAoZSAhPT0gdGhpcy5yaWdodC5jaGVjaygpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgIHJldHVybiBlICsgKHRoaXMuaXNSZWQoKSA/IDAgOiAxKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgTExSQk5vZGVcbi8vIEVtcHR5IG5vZGUgaXMgc2hhcmVkIGJldHdlZW4gYWxsIExMUkIgdHJlZXMuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuTExSQk5vZGUuRU1QVFkgPSBudWxsLCBMTFJCTm9kZS5SRUQgPSAhMCwgTExSQk5vZGUuQkxBQ0sgPSAhMTtcblxuLy8gZW5kIExMUkJFbXB0eU5vZGVcbkxMUkJOb2RlLkVNUFRZID0gbmV3IFxuLy8gUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxuY2xhc3MgTExSQkVtcHR5Tm9kZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIGdldCBrZXkoKSB7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIGdldCBjb2xvcigpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbiAgICBnZXQgbGVmdCgpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbiAgICBnZXQgcmlnaHQoKSB7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZS5cbiAgICBjb3B5KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydChlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgTExSQk5vZGUoZSwgdCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaW5vcmRlclRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV2ZXJzZVRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBjaGVjaygpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuXG4gKlxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xuICogYmUgZXF1YWwhXG4gKi9cbmNsYXNzIFNvcnRlZFNldCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBlLCB0aGlzLmRhdGEgPSBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyhlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmRhdGEuZ2V0KGUpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXhLZXkoKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2l6ZTtcbiAgICB9XG4gICAgaW5kZXhPZihlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZihlKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGVsZW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIHRoaXMuZGF0YS5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4gKGUodCksICExKSkpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gJmx0Oz0gZWxlbSAmbHQ7IHJhbmdlWzFdLiAqLyAgICBmb3JFYWNoSW5SYW5nZShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGVbMF0pO1xuICAgICAgICBmb3IgKDtuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbi5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKHIua2V5LCBlWzFdKSA+PSAwKSByZXR1cm47XG4gICAgICAgICAgICB0KHIua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCAmbHQ7PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBmb3JFYWNoV2hpbGUoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yIChuID0gdm9pZCAwICE9PSB0ID8gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KSA6IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpOyBuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoIWUobi5nZXROZXh0KCkua2V5KSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqLyAgICBmaXJzdEFmdGVyT3JFcXVhbChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGUpO1xuICAgICAgICByZXR1cm4gdC5oYXNOZXh0KCkgPyB0LmdldE5leHQoKS5rZXkgOiBudWxsO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRTZXRJdGVyYXRvcih0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkU2V0SXRlcmF0b3IodGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZWxlbWVudCAqLyAgICBhZGQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUoZSkuaW5zZXJ0KGUsICEwKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGFuIGVsZW1lbnQgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzKGUpID8gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUoZSkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VtcHR5KCk7XG4gICAgfVxuICAgIHVuaW9uV2l0aChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgLy8gTWFrZSBzdXJlIGByZXN1bHRgIGFsd2F5cyByZWZlcnMgdG8gdGhlIGxhcmdlciBvbmUgb2YgdGhlIHR3byBzZXRzLlxuICAgICAgICAgICAgICAgIHJldHVybiB0LnNpemUgPCBlLnNpemUgJiYgKHQgPSBlLCBlID0gdGhpcyksIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0ID0gdC5hZGQoZSk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBTb3J0ZWRTZXQpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IGUuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCksIG4gPSBlLmRhdGEuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7dC5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZ2V0TmV4dCgpLmtleSwgciA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0aGlzLmNvbXBhcmF0b3IoZSwgcikpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLnB1c2godCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgodCA9PiBlLnB1c2godCkpKSwgXCJTb3J0ZWRTZXQoXCIgKyBlLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgY29weShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgU29ydGVkU2V0KHRoaXMuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0LmRhdGEgPSBlLCB0O1xuICAgIH1cbn1cblxuY2xhc3MgU29ydGVkU2V0SXRlcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5pdGVyID0gZTtcbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5nZXROZXh0KCkua2V5O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmhhc05leHQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIHNvcnRlZCBzZXRzIGZvciBlcXVhbGl0eSB1c2luZyB0aGVpciBuYXR1cmFsIG9yZGVyaW5nLiBUaGVcbiAqIG1ldGhvZCBjb21wdXRlcyB0aGUgaW50ZXJzZWN0aW9uIGFuZCBpbnZva2VzIGBvbkFkZGAgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdFxuICogaXMgaW4gYGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLiBgb25SZW1vdmVgIGlzIGludm9rZWQgZm9yIGV2ZXJ5IGVsZW1lbnQgaW5cbiAqIGBiZWZvcmVgIGJ1dCBtaXNzaW5nIGZyb20gYGFmdGVyYC5cbiAqXG4gKiBUaGUgbWV0aG9kIGNyZWF0ZXMgYSBjb3B5IG9mIGJvdGggYGJlZm9yZWAgYW5kIGBhZnRlcmAgYW5kIHJ1bnMgaW4gTyhuIGxvZ1xuICogbiksIHdoZXJlIG4gaXMgdGhlIHNpemUgb2YgdGhlIHR3byBsaXN0cy5cbiAqXG4gKiBAcGFyYW0gYmVmb3JlIC0gVGhlIGVsZW1lbnRzIHRoYXQgZXhpc3QgaW4gdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBjb21wYXJhdG9yIC0gVGhlIGNvbXBhcmF0b3IgZm9yIHRoZSBlbGVtZW50cyBpbiBiZWZvcmUgYW5kIGFmdGVyLlxuICogQHBhcmFtIG9uQWRkIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mIGBcbiAqIGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLlxuICogQHBhcmFtIG9uUmVtb3ZlIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mXG4gKiBgYmVmb3JlYCBidXQgbm90IGBhZnRlcmAuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgbmV4dCBlbGVtZW50IGZyb20gdGhlIGl0ZXJhdG9yIG9yIGB1bmRlZmluZWRgIGlmIG5vbmUgYXZhaWxhYmxlLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKGUpIHtcbiAgICByZXR1cm4gZS5oYXNOZXh0KCkgPyBlLmdldE5leHQoKSA6IHZvaWQgMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGFydGlhbGx5IHBhdGNoIGEgZG9jdW1lbnQuXG4gKiBGaWVsZE1hc2sgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIE9iamVjdFZhbHVlLlxuICogRXhhbXBsZXM6XG4gKiAgIGZvbyAtIE92ZXJ3cml0ZXMgZm9vIGVudGlyZWx5IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLiBJZiBmb28gaXMgbm90XG4gKiAgICAgICAgIHByZXNlbnQgaW4gdGhlIGNvbXBhbmlvbiBPYmplY3RWYWx1ZSwgdGhlIGZpZWxkIGlzIGRlbGV0ZWQuXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cbiAqICAgICAgICAgICAgIElmIGZvbyBpcyBub3QgYW4gb2JqZWN0LCBmb28gaXMgcmVwbGFjZWQgd2l0aCBhbiBvYmplY3RcbiAqICAgICAgICAgICAgIGNvbnRhaW5pbmcgZm9vXG4gKi8gY2xhc3MgRmllbGRNYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gZSwgXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGlvbiBvZiBGaWVsZE1hc2tcbiAgICAgICAgLy8gU29ydCB0aGUgZmllbGQgbWFzayB0byBzdXBwb3J0IGBGaWVsZE1hc2suaXNFcXVhbCgpYCBhbmQgYXNzZXJ0IGJlbG93LlxuICAgICAgICBlLnNvcnQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2soW10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IEZpZWxkTWFzayBvYmplY3QgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGFkZGluZyBhbGwgdGhlIGdpdmVuXG4gICAgICogZmllbGRzIHBhdGhzIHRvIHRoaXMgZmllbGQgbWFzay5cbiAgICAgKi8gICAgdW5pb25XaXRoKGUpIHtcbiAgICAgICAgbGV0IHQgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5maWVsZHMpIHQgPSB0LmFkZChlKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSB0LmFkZChuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2sodC50b0FycmF5KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IGBmaWVsZFBhdGhgIGlzIGluY2x1ZGVkIGJ5IGF0IGxlYXN0IG9uZSBmaWVsZCBpbiB0aGlzIGZpZWxkXG4gICAgICogbWFzay5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgYW4gTyhuKSBvcGVyYXRpb24sIHdoZXJlIGBuYCBpcyB0aGUgc2l6ZSBvZiB0aGUgZmllbGQgbWFzay5cbiAgICAgKi8gICAgY292ZXJzKGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuZmllbGRzKSBpZiAodC5pc1ByZWZpeE9mKGUpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfYXJyYXlFcXVhbHModGhpcy5maWVsZHMsIGUuZmllbGRzLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQmFzZTY0RGVjb2RlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMubmFtZSA9IFwiQmFzZTY0RGVjb2RlRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQ29udmVydHMgYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBiaW5hcnkgc3RyaW5nLiAqL1xuLyoqIFRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIEJhc2U2NCBjb252ZXJzaW9uIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzQmFzZTY0QXZhaWxhYmxlKCkge1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBhdG9iO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbW11dGFibGUgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgXCJwcm90b1wiIGJ5dGUgc3RyaW5nLlxuICpcbiAqIFByb3RvIGJ5dGUgc3RyaW5ncyBjYW4gZWl0aGVyIGJlIEJhc2U2NC1lbmNvZGVkIHN0cmluZ3Mgb3IgVWludDhBcnJheXMgd2hlblxuICogc2VudCBvbiB0aGUgd2lyZS4gVGhpcyBjbGFzcyBhYnN0cmFjdHMgYXdheSB0aGlzIGRpZmZlcmVudGlhdGlvbiBieSBob2xkaW5nXG4gKiB0aGUgcHJvdG8gYnl0ZSBzdHJpbmcgaW4gYSBjb21tb24gY2xhc3MgdGhhdCBtdXN0IGJlIGNvbnZlcnRlZCBpbnRvIGEgc3RyaW5nXG4gKiBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIHByb3RvLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgQnl0ZVN0cmluZyB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmJpbmFyeVN0cmluZyA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uIF9fUFJJVkFURV9kZWNvZGVCYXNlNjQoZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXRvYihlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IGBET01FeGNlcHRpb25gIGlzIGRlZmluZWQgYmVmb3JlIHVzaW5nIGl0IHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gXCJSZWZlcmVuY2VFcnJvcjogUHJvcGVydHkgJ0RPTUV4Y2VwdGlvbicgZG9lc24ndCBleGlzdFwiIGluIHJlYWN0LW5hdGl2ZS5cbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNzExNSlcbiAgICAgICAgICAgICAgICB0aHJvdyBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiA/IG5ldyBfX1BSSVZBVEVfQmFzZTY0RGVjb2RlRXJyb3IoXCJJbnZhbGlkIGJhc2U2NCBzdHJpbmc6IFwiICsgZSkgOiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIGJpbmFyeSBzdHJpbmcgdG8gYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcuICovIChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlU3RyaW5nKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkoZSkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTsgUmVtb3ZlIHRoZSBjb3B5IG9mIHRoZSBieXRlIHN0cmluZyBoZXJlIGFzIHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGlzIGZyZXF1ZW50bHkgY2FsbGVkIGR1cmluZyBpbmRleGluZy5cbiAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGFuIFVpbnQ4YXJyYXkgdG8gYSBiaW5hcnkgc3RyaW5nLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9iaW5hcnlTdHJpbmdGcm9tVWludDhBcnJheShlKSB7XG4gICAgICAgICAgICBsZXQgdCA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyArK24pIHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShlW25dKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKGUpO1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVTdHJpbmcodCk7XG4gICAgfVxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXh0OiAoKSA9PiBlIDwgdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGUrKyksXG4gICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9lbmNvZGVCYXNlNjQoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoZSk7XG4gICAgICAgIH0odGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfdWludDhBcnJheUZyb21CaW5hcnlTdHJpbmcoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KGUubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgdFtuXSA9IGUuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8vIEEgUmVnRXhwIG1hdGNoaW5nIElTTyA4NjAxIFVUQyB0aW1lc3RhbXBzIHdpdGggb3B0aW9uYWwgZnJhY3Rpb24uXG4gICAgICAgICh0aGlzLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGFwcHJveGltYXRlQnl0ZVNpemUoKSB7XG4gICAgICAgIHJldHVybiAyICogdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBjb21wYXJlVG8oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5iaW5hcnlTdHJpbmcsIGUuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmFyeVN0cmluZyA9PT0gZS5iaW5hcnlTdHJpbmc7XG4gICAgfVxufVxuXG5CeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HID0gbmV3IEJ5dGVTdHJpbmcoXCJcIik7XG5cbmNvbnN0IHRlID0gbmV3IFJlZ0V4cCgvXlxcZHs0fS1cXGRcXGQtXFxkXFxkVFxcZFxcZDpcXGRcXGQ6XFxkXFxkKD86XFwuKFxcZCspKT9aJC8pO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB2YWx1ZXMgZm9yIGEgdGltZXN0YW1wIHZhbHVlIGludG8gYSBcInNlY29uZHMgYW5kXG4gKiBuYW5vc1wiIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSkge1xuICAgIC8vIFRoZSBqc29uIGludGVyZmFjZSAoZm9yIHRoZSBicm93c2VyKSB3aWxsIHJldHVybiBhbiBpc28gdGltZXN0YW1wIHN0cmluZyxcbiAgICAvLyB3aGlsZSB0aGUgcHJvdG8ganMgbGlicmFyeSAoZm9yIG5vZGUpIHdpbGwgcmV0dXJuIGFcbiAgICAvLyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGluc3RhbmNlLlxuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydCghIWUpLCBcInN0cmluZ1wiID09IHR5cGVvZiBlKSB7XG4gICAgICAgIC8vIFRoZSBkYXRlIHN0cmluZyBjYW4gaGF2ZSBoaWdoZXIgcHJlY2lzaW9uIChuYW5vcykgdGhhbiB0aGUgRGF0ZSBjbGFzc1xuICAgICAgICAvLyAobWlsbGlzKSwgc28gd2UgZG8gc29tZSBjdXN0b20gcGFyc2luZyBoZXJlLlxuICAgICAgICAvLyBQYXJzZSB0aGUgbmFub3MgcmlnaHQgb3V0IG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgY29uc3QgbiA9IHRlLmV4ZWMoZSk7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydCghIW4pLCBuWzFdKSB7XG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxuICAgICAgICAgICAgbGV0IGUgPSBuWzFdO1xuICAgICAgICAgICAgZSA9IChlICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDAsIDkpLCB0ID0gTnVtYmVyKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IERhdGUoZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBNYXRoLmZsb29yKHIuZ2V0VGltZSgpIC8gMWUzKSxcbiAgICAgICAgICAgIG5hbm9zOiB0XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5zZWNvbmRzKSxcbiAgICAgICAgbmFub3M6IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5uYW5vcylcbiAgICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgbnVtYmVycyBpbnRvIGEgSmF2YVNjcmlwdCBudW1iZXIuXG4gKiBSZXR1cm5zIDAgaWYgdGhlIHZhbHVlIGlzIG5vdCBudW1lcmljLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZSkge1xuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIGUgPyBlIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IE51bWJlcihlKSA6IDA7XG59XG5cbi8qKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIEJsb2JzIGludG8gYSBCeXRlU3RyaW5nLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlKSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcoZSkgOiBCeXRlU3RyaW5nLmZyb21VaW50OEFycmF5KGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWxseS1hcHBsaWVkIFNlcnZlclRpbWVzdGFtcC5cbiAqXG4gKiBTZXJ2ZXIgVGltZXN0YW1wcyBhcmUgYmFja2VkIGJ5IE1hcFZhbHVlcyB0aGF0IGNvbnRhaW4gYW4gaW50ZXJuYWwgZmllbGRcbiAqIGBfX3R5cGVfX2Agd2l0aCBhIHZhbHVlIG9mIGBzZXJ2ZXJfdGltZXN0YW1wYC4gVGhlIHByZXZpb3VzIHZhbHVlIGFuZCBsb2NhbFxuICogd3JpdGUgdGltZSBhcmUgc3RvcmVkIGluIGl0cyBgX19wcmV2aW91c192YWx1ZV9fYCBhbmQgYF9fbG9jYWxfd3JpdGVfdGltZV9fYFxuICogZmllbGRzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBOb3RlczpcbiAqIC0gU2VydmVyVGltZXN0YW1wVmFsdWUgaW5zdGFuY2VzIGFyZSBjcmVhdGVkIGFzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYVxuICogICB0cmFuc2Zvcm0uIFRoZXkgY2FuIG9ubHkgZXhpc3QgaW4gdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gVGhlcmVmb3JlXG4gKiAgIHRoZXkgZG8gbm90IG5lZWQgdG8gYmUgcGFyc2VkIG9yIHNlcmlhbGl6ZWQuXG4gKiAtIFdoZW4gZXZhbHVhdGVkIGxvY2FsbHkgKGUuZy4gZm9yIHNuYXBzaG90LmRhdGEoKSksIHRoZXkgYnkgZGVmYXVsdFxuICogICBldmFsdWF0ZSB0byBgbnVsbGAuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgcGFzc2luZyBjdXN0b21cbiAqICAgRmllbGRWYWx1ZU9wdGlvbnMgdG8gdmFsdWUoKS5cbiAqIC0gV2l0aCByZXNwZWN0IHRvIG90aGVyIFNlcnZlclRpbWVzdGFtcFZhbHVlcywgdGhleSBzb3J0IGJ5IHRoZWlyXG4gKiAgIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcChlKSB7XG4gICAgdmFyIHQsIG47XG4gICAgcmV0dXJuIFwic2VydmVyX3RpbWVzdGFtcFwiID09PSAobnVsbCA9PT0gKG4gPSAoKG51bGwgPT09ICh0ID0gbnVsbCA9PSBlID8gdm9pZCAwIDogZS5tYXBWYWx1ZSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5maWVsZHMpIHx8IHt9KS5fX3R5cGVfXykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdHJpbmdWYWx1ZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBTZXJ2ZXJUaW1lc3RhbXAgcHJvdG8gdmFsdWUgKHVzaW5nIHRoZSBpbnRlcm5hbCBmb3JtYXQpLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBiZWZvcmUgdGhpcyBTZXJ2ZXJUaW1lc3RhbXAgd2FzIHNldC5cbiAqXG4gKiBQcmVzZXJ2aW5nIHRoZSBwcmV2aW91cyB2YWx1ZXMgYWxsb3dzIHRoZSB1c2VyIHRvIGRpc3BsYXkgdGhlIGxhc3QgcmVzb2xlZFxuICogdmFsdWUgdW50aWwgdGhlIGJhY2tlbmQgcmVzcG9uZHMgd2l0aCB0aGUgdGltZXN0YW1wLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0UHJldmlvdXNWYWx1ZShlKSB7XG4gICAgY29uc3QgdCA9IGUubWFwVmFsdWUuZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXztcbiAgICByZXR1cm4gX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKHQpID8gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUodCkgOiB0O1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxvY2FsIHRpbWUgYXQgd2hpY2ggdGhpcyB0aW1lc3RhbXAgd2FzIGZpcnN0IHNldC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUubWFwVmFsdWUuZmllbGRzLl9fbG9jYWxfd3JpdGVfdGltZV9fLnRpbWVzdGFtcFZhbHVlKTtcbiAgICByZXR1cm4gbmV3IFRpbWVzdGFtcCh0LnNlY29uZHMsIHQubmFub3MpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBEYXRhYmFzZUluZm8ge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBEYXRhYmFzZUluZm8gdXNpbmcgdGhlIHByb3ZpZGVkIGhvc3QsIGRhdGFiYXNlSWQgYW5kXG4gICAgICogcGVyc2lzdGVuY2VLZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSB0byB1c2UuXG4gICAgICogQHBhcmFtIGFwcElkIC0gVGhlIEZpcmViYXNlIEFwcCBJZC5cbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VLZXkgLSBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIEZpcmVzdG9yZSdzIGxvY2FsXG4gICAgICogc3RvcmFnZSAodXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBkYXRhYmFzZUlkKS5cbiAgICAgKiBAcGFyYW0gaG9zdCAtIFRoZSBGaXJlc3RvcmUgYmFja2VuZCBob3N0IHRvIGNvbm5lY3QgdG8uXG4gICAgICogQHBhcmFtIHNzbCAtIFdoZXRoZXIgdG8gdXNlIFNTTCB3aGVuIGNvbm5lY3RpbmcuXG4gICAgICogQHBhcmFtIGZvcmNlTG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZm9yY2VMb25nUG9sbGluZyBvcHRpb25cbiAgICAgKiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSBhdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZGV0ZWN0QnVmZmVyaW5nUHJveHlcbiAgICAgKiBvcHRpb24gd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gbG9uZ1BvbGxpbmdPcHRpb25zIE9wdGlvbnMgdGhhdCBjb25maWd1cmUgbG9uZy1wb2xsaW5nLlxuICAgICAqIEBwYXJhbSB1c2VGZXRjaFN0cmVhbXMgV2hldGhlciB0byB1c2UgdGhlIEZldGNoIEFQSSBpbnN0ZWFkIG9mXG4gICAgICogWE1MSFRUUFJlcXVlc3RcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzLCBvLCBfLCBhKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IGUsIHRoaXMuYXBwSWQgPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5ob3N0ID0gciwgdGhpcy5zc2wgPSBpLCBcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gcywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBvLCB0aGlzLmxvbmdQb2xsaW5nT3B0aW9ucyA9IF8sIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGE7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIERhdGFiYXNlSWQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0SWQgPSBlLCB0aGlzLmRhdGFiYXNlID0gdCB8fCBcIihkZWZhdWx0KVwiO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJZChcIlwiLCBcIlwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgRGF0YWJhc2VJZCAmJiBlLnByb2plY3RJZCA9PT0gdGhpcy5wcm9qZWN0SWQgJiYgZS5kYXRhYmFzZSA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBuZSA9IHtcbiAgICBtYXBWYWx1ZToge1xuICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwiX19tYXhfX1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCByZSA9IHtcbiAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG59O1xuXG4vKiogRXh0cmFjdHMgdGhlIGJhY2tlbmQncyB0eXBlIG9yZGVyIGZvciB0aGUgcHJvdmlkZWQgdmFsdWUuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdHlwZU9yZGVyKGUpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiBlID8gMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDogXCJib29sZWFuVmFsdWVcIiBpbiBlID8gMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiBlIHx8IFwiZG91YmxlVmFsdWVcIiBpbiBlID8gMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSA/IDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDogXCJzdHJpbmdWYWx1ZVwiIGluIGUgPyA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6IFwiYnl0ZXNWYWx1ZVwiIGluIGUgPyA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSA/IDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSA/IDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOiBcImFycmF5VmFsdWVcIiBpbiBlID8gOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6IFwibWFwVmFsdWVcIiBpbiBlID8gX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKGUpID8gNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOiBfX1BSSVZBVEVfaXNNYXhWYWx1ZShlKSA/IDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDogMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDogZmFpbCgpO1xufVxuXG4vKiogVGVzdHMgYGxlZnRgIGFuZCBgcmlnaHRgIGZvciBlcXVhbGl0eSBiYXNlZCBvbiB0aGUgYmFja2VuZCBzZW1hbnRpY3MuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLCB0KSB7XG4gICAgaWYgKGUgPT09IHQpIHJldHVybiAhMDtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3R5cGVPcmRlcihlKTtcbiAgICBpZiAobiAhPT0gX19QUklWQVRFX3R5cGVPcmRlcih0KSkgcmV0dXJuICExO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5ib29sZWFuVmFsdWUgPT09IHQuYm9vbGVhblZhbHVlO1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZShlKS5pc0VxdWFsKF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZSh0KSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3RpbWVzdGFtcEVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0LnRpbWVzdGFtcFZhbHVlICYmIGUudGltZXN0YW1wVmFsdWUubGVuZ3RoID09PSB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGVxdWFsaXR5IGZvciBJU08gODYwMSB0aW1lc3RhbXBzXG4gICAgICAgICAgICByZXR1cm4gZS50aW1lc3RhbXBWYWx1ZSA9PT0gdC50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUudGltZXN0YW1wVmFsdWUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcCh0LnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHIuc2Vjb25kcyAmJiBuLm5hbm9zID09PSByLm5hbm9zO1xuICAgICAgICB9KGUsIHQpO1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGUuc3RyaW5nVmFsdWUgPT09IHQuc3RyaW5nVmFsdWU7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9ibG9iRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlLmJ5dGVzVmFsdWUpLmlzRXF1YWwoX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcodC5ieXRlc1ZhbHVlKSk7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5yZWZlcmVuY2VWYWx1ZSA9PT0gdC5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9nZW9Qb2ludEVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpID09PSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKSA9PT0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0Lmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKTtcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbnVtYmVyRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIGlmIChcImludGVnZXJWYWx1ZVwiIGluIGUgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiB0KSByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSkgPT09IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5pbnRlZ2VyVmFsdWUpO1xuICAgICAgICAgICAgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiBlICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5kb3VibGVWYWx1ZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuID09PSByID8gX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKG4pID09PSBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8ocikgOiBpc05hTihuKSAmJiBpc05hTihyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9hcnJheUVxdWFscyhlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCB0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCBfX1BSSVZBVEVfdmFsdWVFcXVhbHMpO1xuXG4gICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfb2JqZWN0RXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fSwgciA9IHQubWFwVmFsdWUuZmllbGRzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9vYmplY3RTaXplKG4pICE9PSBfX1BSSVZBVEVfb2JqZWN0U2l6ZShyKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIGluIG4pIGlmIChuLmhhc093blByb3BlcnR5KGUpICYmICh2b2lkIDAgPT09IHJbZV0gfHwgIV9fUFJJVkFURV92YWx1ZUVxdWFscyhuW2VdLCByW2VdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKGUsIHQpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyhlLCB0KSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gKGUudmFsdWVzIHx8IFtdKS5maW5kKChlID0+IF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLCB0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKGUsIHQpIHtcbiAgICBpZiAoZSA9PT0gdCkgcmV0dXJuIDA7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV90eXBlT3JkZXIoZSksIHIgPSBfX1BSSVZBVEVfdHlwZU9yZGVyKHQpO1xuICAgIGlmIChuICE9PSByKSByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobiwgcik7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuYm9vbGVhblZhbHVlLCB0LmJvb2xlYW5WYWx1ZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVOdW1iZXJzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuIDwgciA/IC0xIDogbiA+IHIgPyAxIDogbiA9PT0gciA/IDAgOiBcbiAgICAgICAgICAgIC8vIG9uZSBvciBib3RoIGFyZSBOYU4uXG4gICAgICAgICAgICBpc05hTihuKSA/IGlzTmFOKHIpID8gMCA6IC0xIDogMTtcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29tcGFyZVRpbWVzdGFtcHMoZS50aW1lc3RhbXBWYWx1ZSwgdC50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbXBhcmVUaW1lc3RhbXBzKF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZShlKSwgX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lKHQpKTtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLnN0cmluZ1ZhbHVlLCB0LnN0cmluZ1ZhbHVlKTtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVCbG9icyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyh0KTtcbiAgICAgICAgICAgIHJldHVybiBuLmNvbXBhcmVUbyhyKTtcbiAgICAgICAgfShlLmJ5dGVzVmFsdWUsIHQuYnl0ZXNWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVSZWZlcmVuY2VzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnNwbGl0KFwiL1wiKSwgciA9IHQuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBuLmxlbmd0aCAmJiBlIDwgci5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuW2VdLCByW2VdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfShlLnJlZmVyZW5jZVZhbHVlLCB0LnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlR2VvUG9pbnRzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubGF0aXR1ZGUpLCBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQubGF0aXR1ZGUpKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubG9uZ2l0dWRlKSwgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmxvbmdpdHVkZSkpO1xuICAgICAgICB9KGUuZ2VvUG9pbnRWYWx1ZSwgdC5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQXJyYXlzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnZhbHVlcyB8fCBbXSwgciA9IHQudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBuLmxlbmd0aCAmJiBlIDwgci5sZW5ndGg7ICsrZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKG5bZV0sIHJbZV0pO1xuICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLmxlbmd0aCwgci5sZW5ndGgpO1xuICAgICAgICB9KGUuYXJyYXlWYWx1ZSwgdC5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVNYXBzKGUsIHQpIHtcbiAgICAgICAgICAgIGlmIChlID09PSBuZS5tYXBWYWx1ZSAmJiB0ID09PSBuZS5tYXBWYWx1ZSkgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAoZSA9PT0gbmUubWFwVmFsdWUpIHJldHVybiAxO1xuICAgICAgICAgICAgaWYgKHQgPT09IG5lLm1hcFZhbHVlKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5maWVsZHMgfHwge30sIHIgPSBPYmplY3Qua2V5cyhuKSwgaSA9IHQuZmllbGRzIHx8IHt9LCBzID0gT2JqZWN0LmtleXMoaSk7XG4gICAgICAgICAgICAvLyBFdmVuIHRob3VnaCBNYXBWYWx1ZXMgYXJlIGxpa2VseSBzb3J0ZWQgY29ycmVjdGx5IGJhc2VkIG9uIHRoZWlyIGluc2VydGlvblxuICAgICAgICAgICAgLy8gb3JkZXIgKGUuZy4gd2hlbiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kKSwgbG9jYWwgbW9kaWZpY2F0aW9ucyBjYW4gYnJpbmdcbiAgICAgICAgICAgIC8vIGVsZW1lbnRzIG91dCBvZiBvcmRlci4gV2UgbmVlZCB0byByZS1zb3J0IHRoZSBlbGVtZW50cyB0byBlbnN1cmUgdGhhdFxuICAgICAgICAgICAgLy8gY2Fub25pY2FsIElEcyBhcmUgaW5kZXBlbmRlbnQgb2YgaW5zZXJ0aW9uIG9yZGVyLlxuICAgICAgICAgICAgci5zb3J0KCksIHMuc29ydCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCByLmxlbmd0aCAmJiBlIDwgcy5sZW5ndGg7ICsrZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihyW2VdLCBzW2VdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUobltyW2VdXSwgaVtzW2VdXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IG8pIHJldHVybiBvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHIubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGNhbm9uaWNhbCBJRCBmb3IgdGhlIHByb3ZpZGVkIGZpZWxkIHZhbHVlIChhcyB1c2VkIGluIFRhcmdldFxuICogc2VyaWFsaXphdGlvbikuXG4gKi8gKGUubWFwVmFsdWUsIHQubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZVRpbWVzdGFtcHMoZSwgdCkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgZS5sZW5ndGggPT09IHQubGVuZ3RoKSByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZSwgdCk7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKHQpLCBpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5zZWNvbmRzLCByLnNlY29uZHMpO1xuICAgIHJldHVybiAwICE9PSBpID8gaSA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4ubmFub3MsIHIubmFub3MpO1xufVxuXG5mdW5jdGlvbiBjYW5vbmljYWxJZChlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jYW5vbmlmeVZhbHVlKGUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlWYWx1ZShlKSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gZSA/IFwibnVsbFwiIDogXCJib29sZWFuVmFsdWVcIiBpbiBlID8gXCJcIiArIGUuYm9vbGVhblZhbHVlIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiBlID8gXCJcIiArIGUuaW50ZWdlclZhbHVlIDogXCJkb3VibGVWYWx1ZVwiIGluIGUgPyBcIlwiICsgZS5kb3VibGVWYWx1ZSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5VGltZXN0YW1wKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSk7XG4gICAgICAgIHJldHVybiBgdGltZSgke3Quc2Vjb25kc30sJHt0Lm5hbm9zfSlgO1xuICAgIH0oZS50aW1lc3RhbXBWYWx1ZSkgOiBcInN0cmluZ1ZhbHVlXCIgaW4gZSA/IGUuc3RyaW5nVmFsdWUgOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5Qnl0ZVN0cmluZyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlKS50b0Jhc2U2NCgpO1xuICAgIH0oZS5ieXRlc1ZhbHVlKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5UmVmZXJlbmNlKGUpIHtcbiAgICAgICAgcmV0dXJuIERvY3VtZW50S2V5LmZyb21OYW1lKGUpLnRvU3RyaW5nKCk7XG4gICAgfShlLnJlZmVyZW5jZVZhbHVlKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUgPyBmdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlHZW9Qb2ludChlKSB7XG4gICAgICAgIHJldHVybiBgZ2VvKCR7ZS5sYXRpdHVkZX0sJHtlLmxvbmdpdHVkZX0pYDtcbiAgICB9KGUuZ2VvUG9pbnRWYWx1ZSkgOiBcImFycmF5VmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5QXJyYXkoZSkge1xuICAgICAgICBsZXQgdCA9IFwiW1wiLCBuID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBlLnZhbHVlcyB8fCBbXSkgbiA/IG4gPSAhMSA6IHQgKz0gXCIsXCIsIHQgKz0gX19QUklWQVRFX2Nhbm9uaWZ5VmFsdWUocik7XG4gICAgICAgIHJldHVybiB0ICsgXCJdXCI7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSAoYW5kIHdpbGRseSBpbmFjY3VyYXRlKSBpbi1tZW1vcnkgc2l6ZSBmb3IgdGhlIGZpZWxkXG4gKiB2YWx1ZS5cbiAqXG4gKiBUaGUgbWVtb3J5IHNpemUgdGFrZXMgaW50byBhY2NvdW50IG9ubHkgdGhlIGFjdHVhbCB1c2VyIGRhdGEgYXMgaXQgcmVzaWRlc1xuICogaW4gbWVtb3J5IGFuZCBpZ25vcmVzIG9iamVjdCBvdmVyaGVhZC5cbiAqLyAoZS5hcnJheVZhbHVlKSA6IFwibWFwVmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5TWFwKGUpIHtcbiAgICAgICAgLy8gSXRlcmF0aW9uIG9yZGVyIGluIEphdmFTY3JpcHQgaXMgbm90IGd1YXJhbnRlZWQuIFRvIGVuc3VyZSB0aGF0IHdlIGdlbmVyYXRlXG4gICAgICAgIC8vIG1hdGNoaW5nIGNhbm9uaWNhbCBJRHMgZm9yIGlkZW50aWNhbCBtYXBzLCB3ZSBuZWVkIHRvIHNvcnQgdGhlIGtleXMuXG4gICAgICAgIGNvbnN0IHQgPSBPYmplY3Qua2V5cyhlLmZpZWxkcyB8fCB7fSkuc29ydCgpO1xuICAgICAgICBsZXQgbiA9IFwie1wiLCByID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSByID8gciA9ICExIDogbiArPSBcIixcIiwgbiArPSBgJHtpfToke19fUFJJVkFURV9jYW5vbmlmeVZhbHVlKGUuZmllbGRzW2ldKX1gO1xuICAgICAgICByZXR1cm4gbiArIFwifVwiO1xuICAgIH0oZS5tYXBWYWx1ZSkgOiBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9lc3RpbWF0ZUJ5dGVTaXplKGUpIHtcbiAgICBzd2l0Y2ggKF9fUFJJVkFURV90eXBlT3JkZXIoZSkpIHtcbiAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDQ7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gODtcblxuICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAvLyBHZW9Qb2ludHMgYXJlIG1hZGUgdXAgb2YgdHdvIGRpc3RpbmN0IG51bWJlcnMgKGxhdGl0dWRlICsgbG9uZ2l0dWRlKVxuICAgICAgICByZXR1cm4gMTY7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUoZSk7XG4gICAgICAgIHJldHVybiB0ID8gMTYgKyBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZSh0KSA6IDE2O1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvRGF0YV9zdHJ1Y3R1cmVzOlxuICAgICAgICAvLyBcIkphdmFTY3JpcHQncyBTdHJpbmcgdHlwZSBpcyBbLi4uXSBhIHNldCBvZiBlbGVtZW50cyBvZiAxNi1iaXQgdW5zaWduZWRcbiAgICAgICAgLy8gaW50ZWdlciB2YWx1ZXNcIlxuICAgICAgICByZXR1cm4gMiAqIGUuc3RyaW5nVmFsdWUubGVuZ3RoO1xuXG4gICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlLmJ5dGVzVmFsdWUpLmFwcHJveGltYXRlQnl0ZVNpemUoKTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBlLnJlZmVyZW5jZVZhbHVlLmxlbmd0aDtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9lc3RpbWF0ZUFycmF5Qnl0ZVNpemUoZSkge1xuICAgICAgICAgICAgcmV0dXJuIChlLnZhbHVlcyB8fCBbXSkucmVkdWNlKCgoZSwgdCkgPT4gZSArIF9fUFJJVkFURV9lc3RpbWF0ZUJ5dGVTaXplKHQpKSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgYSByZWZlcmVuY2UgdmFsdWUgZm9yIHRoZSBwcm92aWRlZCBkYXRhYmFzZSBhbmQga2V5LiAqLyAoZS5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2VzdGltYXRlTWFwQnl0ZVNpemUoZSkge1xuICAgICAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICAgICAgcmV0dXJuIGZvckVhY2goZS5maWVsZHMsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQgKz0gZS5sZW5ndGggKyBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZShuKTtcbiAgICAgICAgICAgIH0pKSwgdDtcbiAgICAgICAgfShlLm1hcFZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3JlZlZhbHVlKGUsIHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWZlcmVuY2VWYWx1ZTogYHByb2plY3RzLyR7ZS5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke2UuZGF0YWJhc2V9L2RvY3VtZW50cy8ke3QucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEludGVnZXJWYWx1ZSAuICovIGZ1bmN0aW9uIGlzSW50ZWdlcihlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcImludGVnZXJWYWx1ZVwiIGluIGU7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIERvdWJsZVZhbHVlLiAqL1xuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEFycmF5VmFsdWUuICovXG5mdW5jdGlvbiBpc0FycmF5KGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwiYXJyYXlWYWx1ZVwiIGluIGU7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE51bGxWYWx1ZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTnVsbFZhbHVlKGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwibnVsbFZhbHVlXCIgaW4gZTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIE5hTi4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTmFuVmFsdWUoZSkge1xuICAgIHJldHVybiAhIWUgJiYgXCJkb3VibGVWYWx1ZVwiIGluIGUgJiYgaXNOYU4oTnVtYmVyKGUuZG91YmxlVmFsdWUpKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTWFwVmFsdWUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc01hcFZhbHVlKGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwibWFwVmFsdWVcIiBpbiBlO1xufVxuXG4vKiogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlZXBDbG9uZShlKSB7XG4gICAgaWYgKGUuZ2VvUG9pbnRWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgZS5nZW9Qb2ludFZhbHVlKVxuICAgIH07XG4gICAgaWYgKGUudGltZXN0YW1wVmFsdWUgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIGUudGltZXN0YW1wVmFsdWUpXG4gICAgfTtcbiAgICBpZiAoZS5tYXBWYWx1ZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmb3JFYWNoKGUubWFwVmFsdWUuZmllbGRzLCAoKGUsIG4pID0+IHQubWFwVmFsdWUuZmllbGRzW2VdID0gX19QUklWQVRFX2RlZXBDbG9uZShuKSkpLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgaWYgKGUuYXJyYXlWYWx1ZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAoZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkubGVuZ3RoOyArK24pIHQuYXJyYXlWYWx1ZS52YWx1ZXNbbl0gPSBfX1BSSVZBVEVfZGVlcENsb25lKGUuYXJyYXlWYWx1ZS52YWx1ZXNbbl0pO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGUpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBWYWx1ZSByZXByZXNlbnRzIHRoZSBjYW5vbmljYWwge0BsaW5rICNNQVhfVkFMVUV9IC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTWF4VmFsdWUoZSkge1xuICAgIHJldHVybiBcIl9fbWF4X19cIiA9PT0gKCgoZS5tYXBWYWx1ZSB8fCB7fSkuZmllbGRzIHx8IHt9KS5fX3R5cGVfXyB8fCB7fSkuc3RyaW5nVmFsdWU7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBsb3dlc3QgdmFsdWUgZm9yIHRoZSBnaXZlbiB2YWx1ZSB0eXBlIChpbmNsdXNpdmUpLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVzR2V0TG93ZXJCb3VuZChlKSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gZSA/IHJlIDogXCJib29sZWFuVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBib29sZWFuVmFsdWU6ICExXG4gICAgfSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSB8fCBcImRvdWJsZVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgIH0gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgIHNlY29uZHM6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXG4gICAgICAgIH1cbiAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIHN0cmluZ1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwiYnl0ZXNWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICB9IDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGUgPyBfX1BSSVZBVEVfcmVmVmFsdWUoRGF0YWJhc2VJZC5lbXB0eSgpLCBEb2N1bWVudEtleS5lbXB0eSgpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICBsb25naXR1ZGU6IC0xODBcbiAgICAgICAgfVxuICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBhcnJheVZhbHVlOiB7fVxuICAgIH0gOiBcIm1hcFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgfSA6IGZhaWwoKTtcbn1cblxuLyoqIFJldHVybnMgdGhlIGxhcmdlc3QgdmFsdWUgZm9yIHRoZSBnaXZlbiB2YWx1ZSB0eXBlIChleGNsdXNpdmUpLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVzR2V0VXBwZXJCb3VuZChlKSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYm9vbGVhblZhbHVlOiAhMVxuICAgIH0gOiBcImJvb2xlYW5WYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICB9IDogXCJpbnRlZ2VyVmFsdWVcIiBpbiBlIHx8IFwiZG91YmxlVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgc2Vjb25kczogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJcbiAgICAgICAgfVxuICAgIH0gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgc3RyaW5nVmFsdWU6IFwiXCJcbiAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICB9IDogXCJieXRlc1ZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9yZWZWYWx1ZShEYXRhYmFzZUlkLmVtcHR5KCksIERvY3VtZW50S2V5LmVtcHR5KCkpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICBsb25naXR1ZGU6IC0xODBcbiAgICAgICAgfVxuICAgIH0gOiBcImdlb1BvaW50VmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBhcnJheVZhbHVlOiB7fVxuICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBtYXBWYWx1ZToge31cbiAgICB9IDogXCJtYXBWYWx1ZVwiIGluIGUgPyBuZSA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2xvd2VyQm91bmRDb21wYXJlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShlLnZhbHVlLCB0LnZhbHVlKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBlLmluY2x1c2l2ZSAmJiAhdC5pbmNsdXNpdmUgPyAtMSA6ICFlLmluY2x1c2l2ZSAmJiB0LmluY2x1c2l2ZSA/IDEgOiAwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdXBwZXJCb3VuZENvbXBhcmUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKGUudmFsdWUsIHQudmFsdWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IGUuaW5jbHVzaXZlICYmICF0LmluY2x1c2l2ZSA/IDEgOiAhZS5pbmNsdXNpdmUgJiYgdC5pbmNsdXNpdmUgPyAtMSA6IDA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIE9iamVjdFZhbHVlIHJlcHJlc2VudHMgYSBNYXBWYWx1ZSBpbiB0aGUgRmlyZXN0b3JlIFByb3RvIGFuZCBvZmZlcnMgdGhlXG4gKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIGZpZWxkcyAodmlhIHRoZSBPYmplY3RWYWx1ZUJ1aWxkZXIpLlxuICovIGNsYXNzIE9iamVjdFZhbHVlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBvciBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSB0aGUgcGF0aCB0byBzZWFyY2hcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgYXQgdGhlIHBhdGggb3IgbnVsbCBpZiB0aGUgcGF0aCBpcyBub3Qgc2V0LlxuICAgICAqLyAgICBmaWVsZChlKSB7XG4gICAgICAgIGlmIChlLmlzRW1wdHkoKSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCB0ID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGggLSAxOyArK24pIGlmICh0ID0gKHQubWFwVmFsdWUuZmllbGRzIHx8IHt9KVtlLmdldChuKV0sIFxuICAgICAgICAgICAgIV9fUFJJVkFURV9pc01hcFZhbHVlKHQpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0ID0gKHQubWFwVmFsdWUuZmllbGRzIHx8IHt9KVtlLmxhc3RTZWdtZW50KCldLCB0IHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZmllbGQgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byBzZXQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi8gICAgc2V0KGUsIHQpIHtcbiAgICAgICAgdGhpcy5nZXRGaWVsZHNNYXAoZS5wb3BMYXN0KCkpW2UubGFzdFNlZ21lbnQoKV0gPSBfX1BSSVZBVEVfZGVlcENsb25lKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm92aWRlZCBmaWVsZHMgdG8gdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gQSBtYXAgb2YgZmllbGRzIHRvIHZhbHVlcyAob3IgbnVsbCBmb3IgZGVsZXRlcykuXG4gICAgICovICAgIHNldEFsbChlKSB7XG4gICAgICAgIGxldCB0ID0gRmllbGRQYXRoJDEuZW1wdHlQYXRoKCksIG4gPSB7fSwgciA9IFtdO1xuICAgICAgICBlLmZvckVhY2goKChlLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXQuaXNJbW1lZGlhdGVQYXJlbnRPZihpKSkge1xuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBhdCB0aGlzIHBhcmVudCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldEZpZWxkc01hcCh0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyhlLCBuLCByKSwgbiA9IHt9LCByID0gW10sIHQgPSBpLnBvcExhc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUgPyBuW2kubGFzdFNlZ21lbnQoKV0gPSBfX1BSSVZBVEVfZGVlcENsb25lKGUpIDogci5wdXNoKGkubGFzdFNlZ21lbnQoKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZ2V0RmllbGRzTWFwKHQpO1xuICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyhpLCBuLCByKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZmllbGQgYXQgdGhlIHNwZWNpZmllZCBwYXRoLiBJZiB0aGVyZSBpcyBubyBmaWVsZCBhdCB0aGVcbiAgICAgKiBzcGVjaWZpZWQgcGF0aCwgbm90aGluZyBpcyBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byByZW1vdmUuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmZpZWxkKGUucG9wTGFzdCgpKTtcbiAgICAgICAgX19QUklWQVRFX2lzTWFwVmFsdWUodCkgJiYgdC5tYXBWYWx1ZS5maWVsZHMgJiYgZGVsZXRlIHQubWFwVmFsdWUuZmllbGRzW2UubGFzdFNlZ21lbnQoKV07XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbHVlRXF1YWxzKHRoaXMudmFsdWUsIGUudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCBjb250YWlucyB0aGUgbGVhZiBlbGVtZW50IG9mIGBwYXRoYC4gSWYgdGhlIHBhcmVudFxuICAgICAqIGVudHJ5IGRvZXMgbm90IHlldCBleGlzdCwgb3IgaWYgaXQgaXMgbm90IGEgbWFwLCBhIG5ldyBtYXAgd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqLyAgICBnZXRGaWVsZHNNYXAoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMudmFsdWU7XG4gICAgICAgIHQubWFwVmFsdWUuZmllbGRzIHx8ICh0Lm1hcFZhbHVlID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBsZXQgciA9IHQubWFwVmFsdWUuZmllbGRzW2UuZ2V0KG4pXTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9pc01hcFZhbHVlKHIpICYmIHIubWFwVmFsdWUuZmllbGRzIHx8IChyID0ge1xuICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0Lm1hcFZhbHVlLmZpZWxkc1tlLmdldChuKV0gPSByKSwgdCA9IHI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubWFwVmFsdWUuZmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBgZmllbGRzTWFwYCBieSBhZGRpbmcsIHJlcGxhY2luZyBvciBkZWxldGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgYXBwbHlDaGFuZ2VzKGUsIHQsIG4pIHtcbiAgICAgICAgZm9yRWFjaCh0LCAoKHQsIG4pID0+IGVbdF0gPSBuKSk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSBkZWxldGUgZVt0XTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUoX19QUklWQVRFX2RlZXBDbG9uZSh0aGlzLnZhbHVlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgZmllbGRzIGluIGEgTWFwVmFsdWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2V4dHJhY3RGaWVsZE1hc2soZSkge1xuICAgIGNvbnN0IHQgPSBbXTtcbiAgICByZXR1cm4gZm9yRWFjaChlLmZpZWxkcywgKChlLCBuKSA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgRmllbGRQYXRoJDEoWyBlIF0pO1xuICAgICAgICBpZiAoX19QUklWQVRFX2lzTWFwVmFsdWUobikpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZXh0cmFjdEZpZWxkTWFzayhuLm1hcFZhbHVlKS5maWVsZHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cbiAgICAgICAgICAgIHQucHVzaChyKTsgZWxzZSBcbiAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxuICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSB0LnB1c2goci5jaGlsZChuKSk7XG4gICAgICAgIH0gZWxzZSBcbiAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlIGxlYWZcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIHQucHVzaChyKTtcbiAgICB9KSksIG5ldyBGaWVsZE1hc2sodCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciBpdFxuICogaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqIERvY3VtZW50cyBjYW4gdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXRlcyB2aWEgYGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoKWAsXG4gKiBgY29udmVydFRvTm9Eb2N1bWVudCgpYCBhbmQgYGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCgpYC4gSWYgYSBkb2N1bWVudCBkb2VzXG4gKiBub3QgdHJhbnNpdGlvbiB0byBvbmUgb2YgdGhlc2Ugc3RhdGVzIGV2ZW4gYWZ0ZXIgYWxsIG11dGF0aW9ucyBoYXZlIGJlZW5cbiAqIGFwcGxpZWQsIGBpc1ZhbGlkRG9jdW1lbnQoKWAgcmV0dXJucyBmYWxzZSBhbmQgdGhlIGRvY3VtZW50IHNob3VsZCBiZSByZW1vdmVkXG4gKiBmcm9tIGFsbCB2aWV3cy5cbiAqLyBjbGFzcyBNdXRhYmxlRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMsIG8pIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlLCB0aGlzLmRvY3VtZW50VHlwZSA9IHQsIHRoaXMudmVyc2lvbiA9IG4sIHRoaXMucmVhZFRpbWUgPSByLCB0aGlzLmNyZWF0ZVRpbWUgPSBpLCBcbiAgICAgICAgdGhpcy5kYXRhID0gcywgdGhpcy5kb2N1bWVudFN0YXRlID0gbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRvY3VtZW50IHdpdGggbm8ga25vd24gdmVyc2lvbiBvciBkYXRhLCBidXQgd2hpY2ggY2FuIHNlcnZlIGFzXG4gICAgICogYmFzZSBkb2N1bWVudCBmb3IgbXV0YXRpb25zLlxuICAgICAqLyAgICBzdGF0aWMgbmV3SW52YWxpZERvY3VtZW50KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQoZSwgMCAvKiBEb2N1bWVudFR5cGUuSU5WQUxJRCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBPYmplY3RWYWx1ZS5lbXB0eSgpLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IHdpdGggdGhlIGdpdmVuIGRhdGEgYXQgdGhlXG4gICAgICogZ2l2ZW4gdmVyc2lvbi5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ZvdW5kRG9jdW1lbnQoZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHQsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIG4sIHIsIDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIG5vdCBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbi4gKi8gICAgc3RhdGljIG5ld05vRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHQsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgT2JqZWN0VmFsdWUuZW1wdHkoKSwgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB3aG9zZSBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIHN0YXRpYyBuZXdVbmtub3duRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gdCwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBPYmplY3RWYWx1ZS5lbXB0eSgpLCAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGFuZCB0aGF0IGl0cyB2ZXJzaW9uXG4gICAgICogYW5kIGRhdGEgYXJlIGtub3duLlxuICAgICAqLyAgICBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCBpcyBzd2l0Y2hpbmcgc3RhdGUgZnJvbSBiZWluZyBhbiBpbnZhbGlkIG9yIGRlbGV0ZWRcbiAgICAgICAgLy8gZG9jdW1lbnQgdG8gYSB2YWxpZCAoRk9VTkRfRE9DVU1FTlQpIGRvY3VtZW50LCBlaXRoZXIgZHVlIHRvIHJlY2VpdmluZyBhblxuICAgICAgICAvLyB1cGRhdGUgZnJvbSBXYXRjaCBvciBkdWUgdG8gYXBwbHlpbmcgYSBsb2NhbCBzZXQgbXV0YXRpb24gb24gdG9wXG4gICAgICAgIC8vIG9mIGEgZGVsZXRlZCBkb2N1bWVudCwgb3VyIGJlc3QgZ3Vlc3MgYWJvdXQgaXRzIGNyZWF0ZVRpbWUgd291bGQgYmUgdGhlXG4gICAgICAgIC8vIHZlcnNpb24gYXQgd2hpY2ggdGhlIGRvY3VtZW50IHRyYW5zaXRpb25lZCB0byBhIEZPVU5EX0RPQ1VNRU5ULlxuICAgICAgICByZXR1cm4gIXRoaXMuY3JlYXRlVGltZS5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgfHwgMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlICYmIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlIHx8ICh0aGlzLmNyZWF0ZVRpbWUgPSBlKSwgXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuZG9jdW1lbnRUeXBlID0gMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSB0LCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0IGV4aXN0IGF0IHRoZSBnaXZlblxuICAgICAqIHZlcnNpb24uXG4gICAgICovICAgIGNvbnZlcnRUb05vRG9jdW1lbnQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gZSwgdGhpcy5kb2N1bWVudFR5cGUgPSAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSBPYmplY3RWYWx1ZS5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovICwgXG4gICAgICAgIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYXQgYSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHRoYXQgaXRzIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgY29udmVydFRvVW5rbm93bkRvY3VtZW50KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuZG9jdW1lbnRUeXBlID0gMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSBPYmplY3RWYWx1ZS5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAxIC8qIERvY3VtZW50U3RhdGUuSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyAsIHRoaXMudmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIHRoaXM7XG4gICAgfVxuICAgIHNldFJlYWRUaW1lKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZFRpbWUgPSBlLCB0aGlzO1xuICAgIH1cbiAgICBnZXQgaGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIERvY3VtZW50U3RhdGUuSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNMb2NhbE11dGF0aW9ucyB8fCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcbiAgICB9XG4gICAgaXNWYWxpZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMCAvKiBEb2N1bWVudFR5cGUuSU5WQUxJRCAqLyAhPT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRm91bmREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNOb0RvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc1Vua25vd25Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDMgLyogRG9jdW1lbnRUeXBlLlVOS05PV05fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBNdXRhYmxlRG9jdW1lbnQgJiYgdGhpcy5rZXkuaXNFcXVhbChlLmtleSkgJiYgdGhpcy52ZXJzaW9uLmlzRXF1YWwoZS52ZXJzaW9uKSAmJiB0aGlzLmRvY3VtZW50VHlwZSA9PT0gZS5kb2N1bWVudFR5cGUgJiYgdGhpcy5kb2N1bWVudFN0YXRlID09PSBlLmRvY3VtZW50U3RhdGUgJiYgdGhpcy5kYXRhLmlzRXF1YWwoZS5kYXRhKTtcbiAgICB9XG4gICAgbXV0YWJsZUNvcHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YWJsZURvY3VtZW50KHRoaXMua2V5LCB0aGlzLmRvY3VtZW50VHlwZSwgdGhpcy52ZXJzaW9uLCB0aGlzLnJlYWRUaW1lLCB0aGlzLmNyZWF0ZVRpbWUsIHRoaXMuZGF0YS5jbG9uZSgpLCB0aGlzLmRvY3VtZW50U3RhdGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBEb2N1bWVudCgke3RoaXMua2V5fSwgJHt0aGlzLnZlcnNpb259LCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS52YWx1ZSl9LCB7Y3JlYXRlVGltZTogJHt0aGlzLmNyZWF0ZVRpbWV9fSksIHtkb2N1bWVudFR5cGU6ICR7dGhpcy5kb2N1bWVudFR5cGV9fSksIHtkb2N1bWVudFN0YXRlOiAke3RoaXMuZG9jdW1lbnRTdGF0ZX19KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHRoZSB2YWx1ZSBmb3IgZmllbGQgYGZpZWxkYCBpbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiBUaHJvd3MgaWZcbiAqIHRoZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiBib3RoIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXG4gKlxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cbiAqXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxuICpcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICovXG5jbGFzcyBCb3VuZCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gZSwgdGhpcy5pbmNsdXNpdmUgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2JvdW5kQ29tcGFyZVRvRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIGxldCByID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGUucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcyA9IHRbaV0sIG8gPSBlLnBvc2l0aW9uW2ldO1xuICAgICAgICBpZiAocy5maWVsZC5pc0tleUZpZWxkKCkpIHIgPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKERvY3VtZW50S2V5LmZyb21OYW1lKG8ucmVmZXJlbmNlVmFsdWUpLCBuLmtleSk7IGVsc2Uge1xuICAgICAgICAgICAgciA9IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUobywgbi5kYXRhLmZpZWxkKHMuZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IHMuZGlyICYmIChyICo9IC0xKSwgMCAhPT0gcikgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGFmdGVyIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZEVxdWFscyhlLCB0KSB7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBudWxsID09PSB0O1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gITE7XG4gICAgaWYgKGUuaW5jbHVzaXZlICE9PSB0LmluY2x1c2l2ZSB8fCBlLnBvc2l0aW9uLmxlbmd0aCAhPT0gdC5wb3NpdGlvbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUucG9zaXRpb24ubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZS5wb3NpdGlvbltuXSwgdC5wb3NpdGlvbltuXSkpIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBvcmRlcmluZyBvbiBhIGZpZWxkLCBpbiBzb21lIERpcmVjdGlvbi4gRGlyZWN0aW9uIGRlZmF1bHRzIHRvIEFTQ0VORElORy5cbiAqLyBjbGFzcyBPcmRlckJ5IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0ID0gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSBlLCB0aGlzLmRpciA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfb3JkZXJCeUVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUuZGlyID09PSB0LmRpciAmJiBlLmZpZWxkLmlzRXF1YWwodC5maWVsZCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEZpbHRlciB7fVxuXG5jbGFzcyBGaWVsZEZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpZWxkID0gZSwgdGhpcy5vcCA9IHQsIHRoaXMudmFsdWUgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gZS5pc0tleUZpZWxkKCkgPyBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHQgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHQgPyB0aGlzLmNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIoZSwgdCwgbikgOiBuZXcgX19QUklWQVRFX0tleUZpZWxkRmlsdGVyKGUsIHQsIG4pIDogXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9BcnJheUNvbnRhaW5zRmlsdGVyKGUsIG4pIDogXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9JbkZpbHRlcihlLCBuKSA6IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9Ob3RJbkZpbHRlcihlLCBuKSA6IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9BcnJheUNvbnRhaW5zQW55RmlsdGVyKGUsIG4pIDogbmV3IEZpZWxkRmlsdGVyKGUsIHQsIG4pO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlS2V5RmllbGRJbkZpbHRlcihlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHQgPyBuZXcgX19QUklWQVRFX0tleUZpZWxkSW5GaWx0ZXIoZSwgbikgOiBuZXcgX19QUklWQVRFX0tleUZpZWxkTm90SW5GaWx0ZXIoZSwgbik7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICAvLyBUeXBlcyBkbyBub3QgaGF2ZSB0byBtYXRjaCBpbiBOT1RfRVFVQUwgZmlsdGVycy5cbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA9PT0gdGhpcy5vcCA/IG51bGwgIT09IHQgJiYgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihfX1BSSVZBVEVfdmFsdWVDb21wYXJlKHQsIHRoaXMudmFsdWUpKSA6IG51bGwgIT09IHQgJiYgX19QUklWQVRFX3R5cGVPcmRlcih0aGlzLnZhbHVlKSA9PT0gX19QUklWQVRFX3R5cGVPcmRlcih0KSAmJiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKF9fUFJJVkFURV92YWx1ZUNvbXBhcmUodCwgdGhpcy52YWx1ZSkpO1xuICAgICAgICAvLyBPbmx5IGNvbXBhcmUgdHlwZXMgd2l0aCBtYXRjaGluZyBiYWNrZW5kIG9yZGVyIChzdWNoIGFzIGRvdWJsZSBhbmQgaW50KS5cbiAgICAgICAgfVxuICAgIG1hdGNoZXNDb21wYXJpc29uKGUpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUgPCAwO1xuXG4gICAgICAgICAgY2FzZSBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiBlIDw9IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gZTtcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gZTtcblxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiBlID4gMDtcblxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZSA+PSAwO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNJbmVxdWFsaXR5KCkge1xuICAgICAgICByZXR1cm4gWyBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gLCBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovICwgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovICwgXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyAsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdLmluZGV4T2YodGhpcy5vcCkgPj0gMDtcbiAgICB9XG4gICAgZ2V0RmxhdHRlbmVkRmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIFsgdGhpcyBdO1xuICAgIH1cbiAgICBnZXRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gWyB0aGlzIF07XG4gICAgfVxuICAgIGdldEZpcnN0SW5lcXVhbGl0eUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0luZXF1YWxpdHkoKSA/IHRoaXMuZmllbGQgOiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgQ29tcG9zaXRlRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlsdGVycyA9IGUsIHRoaXMub3AgPSB0LCB0aGlzLmNlID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGVGaWx0ZXIoZSwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24odGhpcykgPyB2b2lkIDAgPT09IHRoaXMuZmlsdGVycy5maW5kKCh0ID0+ICF0Lm1hdGNoZXMoZSkpKSA6IHZvaWQgMCAhPT0gdGhpcy5maWx0ZXJzLmZpbmQoKHQgPT4gdC5tYXRjaGVzKGUpKSk7XG4gICAgfVxuICAgIGdldEZsYXR0ZW5lZEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmNlIHx8ICh0aGlzLmNlID0gdGhpcy5maWx0ZXJzLnJlZHVjZSgoKGUsIHQpID0+IGUuY29uY2F0KHQuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSksIFtdKSksIFxuICAgICAgICB0aGlzLmNlO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgbXV0YWJsZSBjb3B5IG9mIGB0aGlzLmZpbHRlcnNgXG4gICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oW10sIHRoaXMuZmlsdGVycyk7XG4gICAgfVxuICAgIGdldEZpcnN0SW5lcXVhbGl0eUZpZWxkKCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5sZSgoZSA9PiBlLmlzSW5lcXVhbGl0eSgpKSk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlID8gZS5maWVsZCA6IG51bGw7XG4gICAgfVxuICAgIC8vIFBlcmZvcm1zIGEgZGVwdGgtZmlyc3Qgc2VhcmNoIHRvIGZpbmQgYW5kIHJldHVybiB0aGUgZmlyc3QgRmllbGRGaWx0ZXIgaW4gdGhlIGNvbXBvc2l0ZSBmaWx0ZXJcbiAgICAvLyB0aGF0IHNhdGlzZmllcyB0aGUgcHJlZGljYXRlLiBSZXR1cm5zIGBudWxsYCBpZiBub25lIG9mIHRoZSBGaWVsZEZpbHRlcnMgc2F0aXNmeSB0aGVcbiAgICAvLyBwcmVkaWNhdGUuXG4gICAgbGUoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpIGlmIChlKHQpKSByZXR1cm4gdDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovID09PSBlLm9wO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNEaXNqdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyA9PT0gZS5vcDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWx0ZXIgaXMgYSBjb25qdW5jdGlvbiBvZiBmaWVsZCBmaWx0ZXJzIG9ubHkuIFJldHVybnMgZmFsc2Ugb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQoZSkgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24oZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmlsdGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IGNvbXBvc2l0ZSBmaWx0ZXJzLiBSZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0KGUpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5maWx0ZXJzKSBpZiAodCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlcikgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5RmlsdGVyKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSBcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUZWNobmljYWxseSwgdGhpcyB3b24ndCBiZSB1bmlxdWUgaWYgdHdvIHZhbHVlcyBoYXZlXG4gICAgLy8gdGhlIHNhbWUgZGVzY3JpcHRpb24sIHN1Y2ggYXMgdGhlIGludCAzIGFuZCB0aGUgc3RyaW5nIFwiM1wiLiBTbyB3ZSBzaG91bGRcbiAgICAvLyBhZGQgdGhlIHR5cGVzIGluIGhlcmUgc29tZWhvdywgdG9vLlxuICAgIHJldHVybiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgZS5vcC50b1N0cmluZygpICsgY2Fub25pY2FsSWQoZS52YWx1ZSk7XG4gICAgaWYgKF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbihlKSkgXG4gICAgLy8gT2xkZXIgU0RLIHZlcnNpb25zIHVzZSBhbiBpbXBsaWNpdCBBTkQgb3BlcmF0aW9uIGJldHdlZW4gdGhlaXIgZmlsdGVycy5cbiAgICAvLyBJbiB0aGUgbmV3IFNESyB2ZXJzaW9ucywgdGhlIGRldmVsb3BlciBtYXkgdXNlIGFuIGV4cGxpY2l0IEFORCBmaWx0ZXIuXG4gICAgLy8gVG8gc3RheSBjb25zaXN0ZW50IHdpdGggdGhlIG9sZCB1c2FnZXMsIHdlIGFkZCBhIHNwZWNpYWwgY2FzZSB0byBlbnN1cmVcbiAgICAvLyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGVzZSB0d28gYXJlIHRoZSBzYW1lLiBGb3IgZXhhbXBsZTpcbiAgICAvLyBgY29sLndoZXJlRXF1YWxzKFwiYVwiLCAxKS53aGVyZUVxdWFscyhcImJcIiwgMilgIHNob3VsZCBoYXZlIHRoZSBzYW1lXG4gICAgLy8gY2Fub25pY2FsIElEIGFzIGBjb2wud2hlcmUoYW5kKGVxdWFscyhcImFcIiwxKSwgZXF1YWxzKFwiYlwiLDIpKSlgLlxuICAgIHJldHVybiBlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpO1xuICAgIHtcbiAgICAgICAgLy8gZmlsdGVyIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyXG4gICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpO1xuICAgICAgICByZXR1cm4gYCR7ZS5vcH0oJHt0fSlgO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpbHRlckVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEZpbHRlckVxdWFscyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgJiYgZS5vcCA9PT0gdC5vcCAmJiBlLmZpZWxkLmlzRXF1YWwodC5maWVsZCkgJiYgX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUudmFsdWUsIHQudmFsdWUpO1xuICAgIH0oZSwgdCkgOiBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlckVxdWFscyhlLCB0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIGUub3AgPT09IHQub3AgJiYgZS5maWx0ZXJzLmxlbmd0aCA9PT0gdC5maWx0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGUuZmlsdGVycy5yZWR1Y2UoKChlLCBuLCByKSA9PiBlICYmIF9fUFJJVkFURV9maWx0ZXJFcXVhbHMobiwgdC5maWx0ZXJzW3JdKSksICEwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wb3NpdGUgZmlsdGVyIHRoYXQgY29udGFpbnMgYWxsIGZpbHRlciBmcm9tXG4gKiBgY29tcG9zaXRlRmlsdGVyYCBwbHVzIGFsbCB0aGUgZ2l2ZW4gZmlsdGVycyBpbiBgb3RoZXJGaWx0ZXJzYC5cbiAqLyAoZSwgdCkgOiB2b2lkIGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcldpdGhBZGRlZEZpbHRlcnMoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBlLmZpbHRlcnMuY29uY2F0KHQpO1xuICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKG4sIGUub3ApO1xufVxuXG4vKiogUmV0dXJucyBhIGRlYnVnIGRlc2NyaXB0aW9uIGZvciBgZmlsdGVyYC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3N0cmluZ2lmeUZpbHRlcihlKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlGaWVsZEZpbHRlcihlKSB7XG4gICAgICAgIHJldHVybiBgJHtlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAke2Uub3B9ICR7Y2Fub25pY2FsSWQoZS52YWx1ZSl9YDtcbiAgICB9XG4gICAgLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyAoaS5lLiAnX19uYW1lX18nKS4gKi8gKGUpIDogZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlDb21wb3NpdGVGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gZS5vcC50b1N0cmluZygpICsgXCIge1wiICsgZS5nZXRGaWx0ZXJzKCkubWFwKF9fUFJJVkFURV9zdHJpbmdpZnlGaWx0ZXIpLmpvaW4oXCIgLFwiKSArIFwifVwiO1xuICAgIH0oZSkgOiBcIkZpbHRlclwiO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfS2V5RmllbGRGaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcihlLCB0LCBuKSwgdGhpcy5rZXkgPSBEb2N1bWVudEtleS5mcm9tTmFtZShuLnJlZmVyZW5jZVZhbHVlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUua2V5LCB0aGlzLmtleSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKHQpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIF9fUFJJVkFURV9LZXlGaWVsZEluRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgdCksIHRoaXMua2V5cyA9IF9fUFJJVkFURV9leHRyYWN0RG9jdW1lbnRLZXlzRnJvbUFycmF5VmFsdWUoXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzLnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUua2V5KSkpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyBub3QgcHJlc2VudCB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIF9fUFJJVkFURV9LZXlGaWVsZE5vdEluRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCB0KSwgdGhpcy5rZXlzID0gX19QUklWQVRFX2V4dHJhY3REb2N1bWVudEtleXNGcm9tQXJyYXlWYWx1ZShcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmtleXMuc29tZSgodCA9PiB0LmlzRXF1YWwoZS5rZXkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXh0cmFjdERvY3VtZW50S2V5c0Zyb21BcnJheVZhbHVlKGUsIHQpIHtcbiAgICB2YXIgbjtcbiAgICByZXR1cm4gKChudWxsID09PSAobiA9IHQuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi52YWx1ZXMpIHx8IFtdKS5tYXAoKGUgPT4gRG9jdW1lbnRLZXkuZnJvbU5hbWUoZS5yZWZlcmVuY2VWYWx1ZSkpKTtcbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMgb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9BcnJheUNvbnRhaW5zRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gaXNBcnJheSh0KSAmJiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHQuYXJyYXlWYWx1ZSwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi8gY2xhc3MgX19QUklWQVRFX0luRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBub3QtaW4gb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9Ob3RJbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBpZiAoX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgIV9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnModGhpcy52YWx1ZS5hcnJheVZhbHVlLCB0KTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi8gY2xhc3MgX19QUklWQVRFX0FycmF5Q29udGFpbnNBbnlGaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuICEoIWlzQXJyYXkodCkgfHwgIXQuYXJyYXlWYWx1ZS52YWx1ZXMpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMuc29tZSgoZSA9PiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfVGFyZ2V0SW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IGUsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gdCwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gciwgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSBzLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5oZSA9IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAqXG4gKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcbiAqIHVzaW5nIHRoaXMgZmFjdG9yeSBtZXRob2QsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcbiAqIHByb3BlcnR5LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdUYXJnZXQoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfVGFyZ2V0SW1wbChlLCB0LCBuLCByLCBpLCBzLCBvKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAobnVsbCA9PT0gdC5oZSkge1xuICAgICAgICBsZXQgZSA9IHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgKGUgKz0gXCJ8Y2c6XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIGUgKz0gXCJ8ZjpcIiwgZSArPSB0LmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpLCBcbiAgICAgICAgZSArPSBcInxvYjpcIiwgZSArPSB0Lm9yZGVyQnkubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeU9yZGVyQnkoZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgICAgICAgICByZXR1cm4gZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIGUuZGlyO1xuICAgICAgICB9KGUpKSkuam9pbihcIixcIiksIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0LmxpbWl0KSB8fCAoZSArPSBcInxsOlwiLCBlICs9IHQubGltaXQpLCBcbiAgICAgICAgdC5zdGFydEF0ICYmIChlICs9IFwifGxiOlwiLCBlICs9IHQuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIGUgKz0gdC5zdGFydEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIHQuZW5kQXQgJiYgKGUgKz0gXCJ8dWI6XCIsIGUgKz0gdC5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIGUgKz0gdC5lbmRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICB0LmhlID0gZTtcbiAgICB9XG4gICAgcmV0dXJuIHQuaGU7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRFcXVhbHMoZSwgdCkge1xuICAgIGlmIChlLmxpbWl0ICE9PSB0LmxpbWl0KSByZXR1cm4gITE7XG4gICAgaWYgKGUub3JkZXJCeS5sZW5ndGggIT09IHQub3JkZXJCeS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUub3JkZXJCeS5sZW5ndGg7IG4rKykgaWYgKCFfX1BSSVZBVEVfb3JkZXJCeUVxdWFscyhlLm9yZGVyQnlbbl0sIHQub3JkZXJCeVtuXSkpIHJldHVybiAhMTtcbiAgICBpZiAoZS5maWx0ZXJzLmxlbmd0aCAhPT0gdC5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5maWx0ZXJzLmxlbmd0aDsgbisrKSBpZiAoIV9fUFJJVkFURV9maWx0ZXJFcXVhbHMoZS5maWx0ZXJzW25dLCB0LmZpbHRlcnNbbl0pKSByZXR1cm4gITE7XG4gICAgcmV0dXJuIGUuY29sbGVjdGlvbkdyb3VwID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoISFlLnBhdGguaXNFcXVhbCh0LnBhdGgpICYmICghIV9fUFJJVkFURV9ib3VuZEVxdWFscyhlLnN0YXJ0QXQsIHQuc3RhcnRBdCkgJiYgX19QUklWQVRFX2JvdW5kRXF1YWxzKGUuZW5kQXQsIHQuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KGUpIHtcbiAgICByZXR1cm4gRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlLnBhdGgpICYmIG51bGwgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IGUuZmlsdGVycy5sZW5ndGg7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBmaWVsZCBmaWx0ZXJzIHRoYXQgdGFyZ2V0IHRoZSBnaXZlbiBmaWVsZCBwYXRoLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCB0KSB7XG4gICAgcmV0dXJuIGUuZmlsdGVycy5maWx0ZXIoKGUgPT4gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyICYmIGUuZmllbGQuaXNFcXVhbCh0KSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWVxuICogZmlsdGVycy4gUmV0dXJucyBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIGxvd2VyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgdXBwZXIgYm91bmQgZm9yIGFuIGRlc2NlbmRpbmcgc2VnbWVudCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRBc2NlbmRpbmdCb3VuZChlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSByZSwgaSA9ICEwO1xuICAgIC8vIFByb2Nlc3MgYWxsIGZpbHRlcnMgdG8gZmluZCBhIHZhbHVlIGZvciB0aGUgY3VycmVudCBmaWVsZCBzZWdtZW50XG4gICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIHQpKSB7XG4gICAgICAgIGxldCBlID0gcmUsIHQgPSAhMDtcbiAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gX19QUklWQVRFX3ZhbHVlc0dldExvd2VyQm91bmQobi52YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIGUgPSBuLnZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZSwgdCA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgZSA9IHJlO1xuIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGNhbm5vdCBiZSB1c2VkIGFzIGxvd2VyIGJvdW5kcy5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIF9fUFJJVkFURV9sb3dlckJvdW5kQ29tcGFyZSh7XG4gICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdFxuICAgICAgICB9KSA8IDAgJiYgKHIgPSBlLCBpID0gdCk7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzIGFuIGFkZGl0aW9uYWwgYm91bmQsIGNvbXBhcmUgdGhlIHZhbHVlcyBhZ2FpbnN0IHRoZSBleGlzdGluZ1xuICAgIC8vIHJhbmdlIHRvIHNlZSBpZiB3ZSBjYW4gbmFycm93IHRoZSBzY29wZS5cbiAgICAgICAgaWYgKG51bGwgIT09IG4pIGZvciAobGV0IHMgPSAwOyBzIDwgZS5vcmRlckJ5Lmxlbmd0aDsgKytzKSB7XG4gICAgICAgIGlmIChlLm9yZGVyQnlbc10uZmllbGQuaXNFcXVhbCh0KSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4ucG9zaXRpb25bc107XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG93ZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiByLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBlLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogbi5pbmNsdXNpdmVcbiAgICAgICAgICAgIH0pIDwgMCAmJiAociA9IGUsIGkgPSBuLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIHVwcGVyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgbG93ZXIgYm91bmQgZm9yIGEgZGVzY2VuZGluZyBzZWdtZW50KS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0RGVzY2VuZGluZ0JvdW5kKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IG5lLCBpID0gITA7XG4gICAgLy8gUHJvY2VzcyBhbGwgZmlsdGVycyB0byBmaW5kIGEgdmFsdWUgZm9yIHRoZSBjdXJyZW50IGZpZWxkIHNlZ21lbnRcbiAgICBmb3IgKGNvbnN0IG4gb2YgX19QUklWQVRFX3RhcmdldEdldEZpZWxkRmlsdGVyc0ZvclBhdGgoZSwgdCkpIHtcbiAgICAgICAgbGV0IGUgPSBuZSwgdCA9ICEwO1xuICAgICAgICBzd2l0Y2ggKG4ub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIGUgPSBfX1BSSVZBVEVfdmFsdWVzR2V0VXBwZXJCb3VuZChuLnZhbHVlKSwgdCA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgZSA9IG4udmFsdWUsIHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIGUgPSBuZTtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyB1cHBlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBfX1BSSVZBVEVfdXBwZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IGUsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRcbiAgICAgICAgfSkgPiAwICYmIChyID0gZSwgaSA9IHQpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCBzID0gMDsgcyA8IGUub3JkZXJCeS5sZW5ndGg7ICsrcykge1xuICAgICAgICBpZiAoZS5vcmRlckJ5W3NdLmZpZWxkLmlzRXF1YWwodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLnBvc2l0aW9uW3NdO1xuICAgICAgICAgICAgX19QUklWQVRFX3VwcGVyQm91bmRDb21wYXJlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IG4uaW5jbHVzaXZlXG4gICAgICAgICAgICB9KSA+IDAgJiYgKHIgPSBlLCBpID0gbi5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgIGluY2x1c2l2ZTogaVxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2VnbWVudHMgb2YgYSBwZXJmZWN0IGluZGV4IGZvciB0aGlzIHRhcmdldC4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFF1ZXJ5IGVuY2Fwc3VsYXRlcyBhbGwgdGhlIHF1ZXJ5IGF0dHJpYnV0ZXMgd2Ugc3VwcG9ydCBpbiB0aGUgU0RLLiBJdCBjYW5cbiAqIGJlIHJ1biBhZ2FpbnN0IHRoZSBMb2NhbFN0b3JlLCBhcyB3ZWxsIGFzIGJlIGNvbnZlcnRlZCB0byBhIGBUYXJnZXRgIHRvXG4gKiBxdWVyeSB0aGUgUmVtb3RlU3RvcmUgcmVzdWx0cy5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlJbXBsIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIG8gPSBudWxsLCBfID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSBlLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IHQsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gciwgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHMsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSBfLCB0aGlzLlBlID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZS5cbiAgICAgICAgdGhpcy5JZSA9IG51bGwsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdDtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGluc3RhbmNlIHdpdGggdGhlIG9wdGlvbnMgcHJvdmlkZWQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeShlLCB0LCBuLCByLCBpLCBzLCBvLCBfKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUsIHQsIG4sIHIsIGksIHMsIG8sIF8pO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyBhdCBgcGF0aGAgKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXG4gKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxuICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcbiAqIHBhdGhzLlxuICovXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcbiAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzKGUpIHtcbiAgICByZXR1cm4gMCA9PT0gZS5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSBlLmxpbWl0ICYmIG51bGwgPT0gZS5zdGFydEF0ICYmIG51bGwgPT0gZS5lbmRBdCAmJiAoMCA9PT0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiBlLmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0Rmlyc3RPcmRlckJ5RmllbGQoZSkge1xuICAgIHJldHVybiBlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPiAwID8gZS5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQgOiBudWxsO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKGUpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5maWx0ZXJzKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmdldEZpcnN0SW5lcXVhbGl0eUZpZWxkKCk7XG4gICAgICAgIGlmIChudWxsICE9PSBlKSByZXR1cm4gZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzXG4gKiB3aXRoaW4gdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuXG4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgY29sbGVjdGlvbiBncm91cCByYXRoZXIgdGhhbiBhIHNwZWNpZmljXG4gKiBjb2xsZWN0aW9uLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfaXNDb2xsZWN0aW9uR3JvdXBRdWVyeShlKSB7XG4gICAgcmV0dXJuIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltcGxpY2l0IG9yZGVyIGJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlciBieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU9yZGVyQnkoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGlmIChudWxsID09PSB0LlBlKSB7XG4gICAgICAgIHQuUGUgPSBbXTtcbiAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQodCksIG4gPSBfX1BSSVZBVEVfZ2V0Rmlyc3RPcmRlckJ5RmllbGQodCk7XG4gICAgICAgIGlmIChudWxsICE9PSBlICYmIG51bGwgPT09IG4pIFxuICAgICAgICAvLyBJbiBvcmRlciB0byBpbXBsaWNpdGx5IGFkZCBrZXkgb3JkZXJpbmcsIHdlIG11c3QgYWxzbyBhZGQgdGhlXG4gICAgICAgIC8vIGluZXF1YWxpdHkgZmlsdGVyIGZpZWxkIGZvciBpdCB0byBiZSBhIHZhbGlkIHF1ZXJ5LlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgaW5lcXVhbGl0eSBmaWVsZCBhbmQga2V5IG9yZGVyaW5nIGlzIGFzY2VuZGluZy5cbiAgICAgICAgZS5pc0tleUZpZWxkKCkgfHwgdC5QZS5wdXNoKG5ldyBPcmRlckJ5KGUpKSwgdC5QZS5wdXNoKG5ldyBPcmRlckJ5KEZpZWxkUGF0aCQxLmtleUZpZWxkKCksIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCBlID0gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5leHBsaWNpdE9yZGVyQnkpIHQuUGUucHVzaChuKSwgbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgKGUgPSAhMCk7XG4gICAgICAgICAgICBpZiAoIWUpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxuICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0IG9yZGVyIGJ5XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyB0LmV4cGxpY2l0T3JkZXJCeVt0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXIgOiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi87XG4gICAgICAgICAgICAgICAgdC5QZS5wdXNoKG5ldyBPcmRlckJ5KEZpZWxkUGF0aCQxLmtleUZpZWxkKCksIGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdC5QZTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXQncyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAoIXQuSWUpIGlmIChcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHQubGltaXRUeXBlKSB0LkllID0gX19QUklWQVRFX25ld1RhcmdldCh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCBfX1BSSVZBVEVfcXVlcnlPcmRlckJ5KHQpLCB0LmZpbHRlcnMsIHQubGltaXQsIHQuc3RhcnRBdCwgdC5lbmRBdCk7IGVsc2Uge1xuICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV9xdWVyeU9yZGVyQnkodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA9PT0gbi5kaXIgPyBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gOiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLztcbiAgICAgICAgICAgIGUucHVzaChuZXcgT3JkZXJCeShuLmZpZWxkLCB0KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgbmVlZCB0byBzd2FwIHRoZSBjdXJzb3JzIHRvIG1hdGNoIHRoZSBub3ctZmxpcHBlZCBxdWVyeSBvcmRlcmluZy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5lbmRBdCA/IG5ldyBCb3VuZCh0LmVuZEF0LnBvc2l0aW9uLCB0LmVuZEF0LmluY2x1c2l2ZSkgOiBudWxsLCByID0gdC5zdGFydEF0ID8gbmV3IEJvdW5kKHQuc3RhcnRBdC5wb3NpdGlvbiwgdC5zdGFydEF0LmluY2x1c2l2ZSkgOiBudWxsO1xuICAgICAgICAvLyBOb3cgcmV0dXJuIGFzIGEgTGltaXRUeXBlLkZpcnN0IHF1ZXJ5LlxuICAgICAgICB0LkllID0gX19QUklWQVRFX25ld1RhcmdldCh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCBlLCB0LmZpbHRlcnMsIHQubGltaXQsIG4sIHIpO1xuICAgIH1cbiAgICByZXR1cm4gdC5JZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyKGUsIHQpIHtcbiAgICB0LmdldEZpcnN0SW5lcXVhbGl0eUZpZWxkKCksIF9fUFJJVkFURV9nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoZSk7XG4gICAgY29uc3QgbiA9IGUuZmlsdGVycy5jb25jYXQoWyB0IF0pO1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBuLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0KGUsIHQsIG4pIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgZS5maWx0ZXJzLnNsaWNlKCksIHQsIG4sIGUuc3RhcnRBdCwgZS5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeUVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRFcXVhbHMoX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoZSksIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKSAmJiBlLmxpbWl0VHlwZSA9PT0gdC5saW1pdFR5cGU7XG59XG5cbi8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXG4vLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXG4vLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkoZSkge1xuICAgIHJldHVybiBgJHtfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQoX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoZSkpfXxsdDoke2UubGltaXRUeXBlfWA7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeShlKSB7XG4gICAgcmV0dXJuIGBRdWVyeSh0YXJnZXQ9JHtmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5VGFyZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSBlLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAodCArPSBcIiBjb2xsZWN0aW9uR3JvdXA9XCIgKyBlLmNvbGxlY3Rpb25Hcm91cCksIFxuICAgICAgICBlLmZpbHRlcnMubGVuZ3RoID4gMCAmJiAodCArPSBgLCBmaWx0ZXJzOiBbJHtlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9zdHJpbmdpZnlGaWx0ZXIoZSkpKS5qb2luKFwiLCBcIil9XWApLCBcbiAgICAgICAgX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKGUubGltaXQpIHx8ICh0ICs9IFwiLCBsaW1pdDogXCIgKyBlLmxpbWl0KSwgZS5vcmRlckJ5Lmxlbmd0aCA+IDAgJiYgKHQgKz0gYCwgb3JkZXJCeTogWyR7ZS5vcmRlckJ5Lm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5T3JkZXJCeShlKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7ZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gKCR7ZS5kaXJ9KWA7XG4gICAgICAgIH0oZSkpKS5qb2luKFwiLCBcIil9XWApLCBlLnN0YXJ0QXQgJiYgKHQgKz0gXCIsIHN0YXJ0QXQ6IFwiLCB0ICs9IGUuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIFxuICAgICAgICB0ICs9IGUuc3RhcnRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIGUuZW5kQXQgJiYgKHQgKz0gXCIsIGVuZEF0OiBcIiwgXG4gICAgICAgIHQgKz0gZS5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIHQgKz0gZS5lbmRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICBgVGFyZ2V0KCR7dH0pYDtcbiAgICB9KF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KGUpKX07IGxpbWl0VHlwZT0ke2UubGltaXRUeXBlfSlgO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIGBkb2NgIG1hdGNoZXMgdGhlIGNvbnN0cmFpbnRzIG9mIGBxdWVyeWAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU1hdGNoZXMoZSwgdCkge1xuICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpICYmIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU1hdGNoZXNQYXRoQW5kQ29sbGVjdGlvbkdyb3VwKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQua2V5LnBhdGg7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCA/IHQua2V5Lmhhc0NvbGxlY3Rpb25JZChlLmNvbGxlY3Rpb25Hcm91cCkgJiYgZS5wYXRoLmlzUHJlZml4T2YobikgOiBEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KGUucGF0aCkgPyBlLnBhdGguaXNFcXVhbChuKSA6IGUucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEEgZG9jdW1lbnQgbXVzdCBoYXZlIGEgdmFsdWUgZm9yIGV2ZXJ5IG9yZGVyaW5nIGNsYXVzZSBpbiBvcmRlciB0byBzaG93IHVwXG4gKiBpbiB0aGUgcmVzdWx0cy5cbiAqLyAoZSwgdCkgJiYgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc09yZGVyQnkoZSwgdCkge1xuICAgICAgICAvLyBXZSBtdXN0IHVzZSBgcXVlcnlPcmRlckJ5KClgIHRvIGdldCB0aGUgbGlzdCBvZiBhbGwgb3JkZXJCeXMgKGJvdGggaW1wbGljaXQgYW5kIGV4cGxpY2l0KS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGZvciBPUiBxdWVyaWVzLCBvcmRlckJ5IGFwcGxpZXMgdG8gYWxsIGRpc2p1bmN0aW9uIHRlcm1zIGFuZCBpbXBsaWNpdCBvcmRlckJ5cyBtdXN0XG4gICAgICAgIC8vIGJlIHRha2VuIGludG8gYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBxdWVyeSBcImEgPiAxIHx8IGI9PTFcIiBoYXMgYW4gaW1wbGljaXQgXCJvcmRlckJ5IGFcIiBkdWVcbiAgICAgICAgLy8gdG8gdGhlIGluZXF1YWxpdHksIGFuZCBpcyBldmFsdWF0ZWQgYXMgXCJhID4gMSBvcmRlckJ5IGEgfHwgYj09MSBvcmRlckJ5IGFcIi5cbiAgICAgICAgLy8gQSBkb2N1bWVudCB3aXRoIGNvbnRlbnQgb2Yge2I6MX0gbWF0Y2hlcyB0aGUgZmlsdGVycywgYnV0IGRvZXMgbm90IG1hdGNoIHRoZSBvcmRlckJ5IGJlY2F1c2VcbiAgICAgICAgLy8gaXQncyBtaXNzaW5nIHRoZSBmaWVsZCAnYScuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBfX1BSSVZBVEVfcXVlcnlPcmRlckJ5KGUpKSBcbiAgICAgICAgLy8gb3JkZXIgYnkga2V5IGFsd2F5cyBtYXRjaGVzXG4gICAgICAgIGlmICghbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgbnVsbCA9PT0gdC5kYXRhLmZpZWxkKG4uZmllbGQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9KGUsIHQpICYmIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU1hdGNoZXNGaWx0ZXJzKGUsIHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuZmlsdGVycykgaWYgKCFuLm1hdGNoZXModCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogTWFrZXMgc3VyZSBhIGRvY3VtZW50IGlzIHdpdGhpbiB0aGUgYm91bmRzLCBpZiBwcm92aWRlZC4gKi8gKGUsIHQpICYmIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU1hdGNoZXNCb3VuZHMoZSwgdCkge1xuICAgICAgICBpZiAoZS5zdGFydEF0ICYmICFcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBiZWZvcmUgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxuICogb3JkZXIuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2JvdW5kU29ydHNCZWZvcmVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2JvdW5kQ29tcGFyZVRvRG9jdW1lbnQoZSwgdCwgbik7XG4gICAgICAgICAgICByZXR1cm4gZS5pbmNsdXNpdmUgPyByIDw9IDAgOiByIDwgMDtcbiAgICAgICAgfShlLnN0YXJ0QXQsIF9fUFJJVkFURV9xdWVyeU9yZGVyQnkoZSksIHQpKSByZXR1cm4gITE7XG4gICAgICAgIGlmIChlLmVuZEF0ICYmICFmdW5jdGlvbiBfX1BSSVZBVEVfYm91bmRTb3J0c0FmdGVyRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9ib3VuZENvbXBhcmVUb0RvY3VtZW50KGUsIHQsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGUuaW5jbHVzaXZlID8gciA+PSAwIDogciA+IDA7XG4gICAgICAgIH0oZS5lbmRBdCwgX19QUklWQVRFX3F1ZXJ5T3JkZXJCeShlKSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAgdGhhdCB0aGlzIHF1ZXJ5IHRhcmdldHMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgV2ViIFNESyB0byBmYWNpbGl0YXRlIG11bHRpLXRhYlxuICogc3luY2hyb25pemF0aW9uIGZvciBxdWVyeSByZXN1bHRzLlxuICovIChlLCB0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwKGUpIHtcbiAgICByZXR1cm4gZS5jb2xsZWN0aW9uR3JvdXAgfHwgKGUucGF0aC5sZW5ndGggJSAyID09IDEgPyBlLnBhdGgubGFzdFNlZ21lbnQoKSA6IGUucGF0aC5nZXQoZS5wYXRoLmxlbmd0aCAtIDIpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBhcmF0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wYXJlIHR3byBkb2N1bWVudHNcbiAqIGJhc2VkIG9uIHRoZSBRdWVyeSdzIG9yZGVyaW5nIGNvbnN0cmFpbnQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvcihlKSB7XG4gICAgcmV0dXJuICh0LCBuKSA9PiB7XG4gICAgICAgIGxldCByID0gITE7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBfX1BSSVZBVEVfcXVlcnlPcmRlckJ5KGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX2NvbXBhcmVEb2NzKGksIHQsIG4pO1xuICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgciA9IHIgfHwgaS5maWVsZC5pc0tleUZpZWxkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVEb2NzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gZS5maWVsZC5pc0tleUZpZWxkKCkgPyBEb2N1bWVudEtleS5jb21wYXJhdG9yKHQua2V5LCBuLmtleSkgOiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZURvY3VtZW50c0J5RmllbGQoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gdC5kYXRhLmZpZWxkKGUpLCBpID0gbi5kYXRhLmZpZWxkKGUpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gciAmJiBudWxsICE9PSBpID8gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShyLCBpKSA6IGZhaWwoKTtcbiAgICB9KGUuZmllbGQsIHQsIG4pO1xuICAgIHN3aXRjaCAoZS5kaXIpIHtcbiAgICAgIGNhc2UgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIHI7XG5cbiAgICAgIGNhc2UgXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gLTEgKiByO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtYXAgaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIG9iamVjdHMgYXMga2V5cy4gT2JqZWN0cyBtdXN0IGhhdmUgYW5cbiAqIGFzc29jaWF0ZWQgZXF1YWxzIGZ1bmN0aW9uIGFuZCBtdXN0IGJlIGltbXV0YWJsZS4gRW50cmllcyBpbiB0aGUgbWFwIGFyZVxuICogc3RvcmVkIHRvZ2V0aGVyIHdpdGggdGhlIGtleSBiZWluZyBwcm9kdWNlZCBmcm9tIHRoZSBtYXBLZXlGbi4gVGhpcyBtYXBcbiAqIGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBjb2xsaXNpb25zIG9mIGtleXMuXG4gKi8gY2xhc3MgT2JqZWN0TWFwIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMubWFwS2V5Rm4gPSBlLCB0aGlzLmVxdWFsc0ZuID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5uZXIgbWFwIGZvciBhIGtleS92YWx1ZSBwYWlyLiBEdWUgdG8gdGhlIHBvc3NpYmlsaXR5IG9mIGNvbGxpc2lvbnMgd2VcbiAgICAgICAgICoga2VlcCBhIGxpc3Qgb2YgZW50cmllcyB0aGF0IHdlIGRvIGEgbGluZWFyIHNlYXJjaCB0aHJvdWdoIHRvIGZpbmQgYW4gYWN0dWFsXG4gICAgICAgICAqIG1hdGNoLiBOb3RlIHRoYXQgY29sbGlzaW9ucyBzaG91bGQgYmUgcmFyZSwgc28gd2Ugc3RpbGwgZXhwZWN0IG5lYXJcbiAgICAgICAgICogY29uc3RhbnQgdGltZSBsb29rdXBzIGluIHByYWN0aWNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbm5lciA9IHt9LCBcbiAgICAgICAgLyoqIFRoZSBudW1iZXIgb2YgZW50cmllcyBzdG9yZWQgaW4gdGhlIG1hcCAqL1xuICAgICAgICB0aGlzLmlubmVyU2l6ZSA9IDA7XG4gICAgfVxuICAgIC8qKiBHZXQgYSB2YWx1ZSBmb3IgdGhpcyBrZXksIG9yIHVuZGVmaW5lZCBpZiBpdCBkb2VzIG5vdCBleGlzdC4gKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubWFwS2V5Rm4oZSksIG4gPSB0aGlzLmlubmVyW3RdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBuKSBmb3IgKGNvbnN0IFt0LCByXSBvZiBuKSBpZiAodGhpcy5lcXVhbHNGbih0LCBlKSkgcmV0dXJuIHI7XG4gICAgfVxuICAgIGhhcyhlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZ2V0KGUpO1xuICAgIH1cbiAgICAvKiogUHV0IHRoaXMga2V5IGFuZCB2YWx1ZSBpbiB0aGUgbWFwLiAqLyAgICBzZXQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5tYXBLZXlGbihlKSwgciA9IHRoaXMuaW5uZXJbbl07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHJldHVybiB0aGlzLmlubmVyW25dID0gWyBbIGUsIHQgXSBdLCB2b2lkIHRoaXMuaW5uZXJTaXplKys7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgci5sZW5ndGg7IG4rKykgaWYgKHRoaXMuZXF1YWxzRm4ocltuXVswXSwgZSkpIFxuICAgICAgICAvLyBUaGlzIGlzIHVwZGF0aW5nIGFuIGV4aXN0aW5nIGVudHJ5IGFuZCBkb2VzIG5vdCBpbmNyZWFzZSBgaW5uZXJTaXplYC5cbiAgICAgICAgcmV0dXJuIHZvaWQgKHJbbl0gPSBbIGUsIHQgXSk7XG4gICAgICAgIHIucHVzaChbIGUsIHQgXSksIHRoaXMuaW5uZXJTaXplKys7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGlzIGtleSBmcm9tIHRoZSBtYXAuIFJldHVybnMgYSBib29sZWFuIGlmIGFueXRoaW5nIHdhcyBkZWxldGVkLlxuICAgICAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5tYXBLZXlGbihlKSwgbiA9IHRoaXMuaW5uZXJbdF07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBuLmxlbmd0aDsgcisrKSBpZiAodGhpcy5lcXVhbHNGbihuW3JdWzBdLCBlKSkgcmV0dXJuIDEgPT09IG4ubGVuZ3RoID8gZGVsZXRlIHRoaXMuaW5uZXJbdF0gOiBuLnNwbGljZShyLCAxKSwgXG4gICAgICAgIHRoaXMuaW5uZXJTaXplLS0sICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGZvckVhY2goZSkge1xuICAgICAgICBmb3JFYWNoKHRoaXMuaW5uZXIsICgodCwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbdCwgcl0gb2YgbikgZSh0LCByKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gaXNFbXB0eSh0aGlzLmlubmVyKTtcbiAgICB9XG4gICAgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJTaXplO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgaWUgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCkge1xuICAgIHJldHVybiBpZTtcbn1cblxuY29uc3Qgc2UgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBkb2N1bWVudE1hcCguLi5lKSB7XG4gICAgbGV0IHQgPSBzZTtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IHQuaW5zZXJ0KG4ua2V5LCBuKTtcbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbnZlcnRPdmVybGF5ZWREb2N1bWVudE1hcFRvRG9jdW1lbnRNYXAoZSkge1xuICAgIGxldCB0ID0gc2U7XG4gICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIG4pID0+IHQgPSB0Lmluc2VydChlLCBuLm92ZXJsYXllZERvY3VtZW50KSkpLCB0O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdNdXRhdGlvbk1hcCgpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdE1hcCgoZSA9PiBlLnRvU3RyaW5nKCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpO1xufVxuXG5jb25zdCBvZSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG5cbmNvbnN0IF9lID0gbmV3IFNvcnRlZFNldChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KC4uLmUpIHtcbiAgICBsZXQgdCA9IF9lO1xuICAgIGZvciAoY29uc3QgbiBvZiBlKSB0ID0gdC5hZGQobik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmNvbnN0IGFlID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRJZFNldCgpIHtcbiAgICByZXR1cm4gYWU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYW4gRG91YmxlVmFsdWUgZm9yIGB2YWx1ZWAgdGhhdCBpcyBlbmNvZGVkIGJhc2VkIHRoZSBzZXJpYWxpemVyJ3NcbiAqIGB1c2VQcm90bzNKc29uYCBzZXR0aW5nLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0RvdWJsZShlLCB0KSB7XG4gICAgaWYgKGUudXNlUHJvdG8zSnNvbikge1xuICAgICAgICBpZiAoaXNOYU4odCkpIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJOYU5cIlxuICAgICAgICB9O1xuICAgICAgICBpZiAodCA9PT0gMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJJbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0ID09PSAtMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCItSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBkb3VibGVWYWx1ZTogX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKHQpID8gXCItMFwiIDogdFxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBJbnRlZ2VyVmFsdWUgZm9yIGB2YWx1ZWAuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvSW50ZWdlcihlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiBcIlwiICsgZVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqIFRoZSByZXR1cm4gdmFsdWUgaXMgYW4gSW50ZWdlclZhbHVlIGlmIGl0IGNhbiBzYWZlbHkgcmVwcmVzZW50IHRoZSB2YWx1ZSxcbiAqIG90aGVyd2lzZSBhIERvdWJsZVZhbHVlIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIHRvTnVtYmVyKGUsIHQpIHtcbiAgICByZXR1cm4gaXNTYWZlSW50ZWdlcih0KSA/IF9fUFJJVkFURV90b0ludGVnZXIodCkgOiBfX1BSSVZBVEVfdG9Eb3VibGUoZSwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVXNlZCB0byByZXByZXNlbnQgYSBmaWVsZCB0cmFuc2Zvcm0gb24gYSBtdXRhdGlvbi4gKi8gY2xhc3MgVHJhbnNmb3JtT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIHN0cnVjdHVyYWwgdHlwZSBvZiBgVHJhbnNmb3JtT3BlcmF0aW9uYCBpcyB1bmlxdWUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzU0NTFcbiAgICAgICAgdGhpcy5fID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbG9jYWwgdHJhbnNmb3JtIHJlc3VsdCBhZ2FpbnN0IHRoZSBwcm92aWRlZCBgcHJldmlvdXNWYWx1ZWAsXG4gKiBvcHRpb25hbGx5IHVzaW5nIHRoZSBwcm92aWRlZCBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub0xvY2FsVmlldyhlLCB0LCBuKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtID8gZnVuY3Rpb24gc2VydmVyVGltZXN0YW1wJDEoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgX190eXBlX186IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwic2VydmVyX3RpbWVzdGFtcFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfX2xvY2FsX3dyaXRlX3RpbWVfXzoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogZS5zZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFub3M6IGUubmFub3NlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gV2Ugc2hvdWxkIGF2b2lkIHN0b3JpbmcgZGVlcGx5IG5lc3RlZCBzZXJ2ZXIgdGltZXN0YW1wIG1hcCB2YWx1ZXNcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBuZXZlciB1c2UgdGhlIGludGVybWVkaWF0ZSBcInByZXZpb3VzIHZhbHVlc1wiLlxuICAgICAgICAvLyBGb3IgZXhhbXBsZTpcbiAgICAgICAgLy8gcHJldmlvdXM6IDQyTCwgYWRkOiB0MSwgcmVzdWx0OiB0MSAtPiA0MkxcbiAgICAgICAgLy8gcHJldmlvdXM6IHQxLCAgYWRkOiB0MiwgcmVzdWx0OiB0MiAtPiA0MkwgKE5PVCB0MiAtPiB0MSAtPiA0MkwpXG4gICAgICAgIC8vIHByZXZpb3VzOiB0MiwgIGFkZDogdDMsIHJlc3VsdDogdDMgLT4gNDJMIChOT1QgdDMgLT4gdDIgLT4gdDEgLT4gNDJMKVxuICAgICAgICAvLyBgZ2V0UHJldmlvdXNWYWx1ZWAgcmVjdXJzaXZlbHkgdHJhdmVyc2VzIHNlcnZlciB0aW1lc3RhbXBzIHRvIGZpbmQgdGhlXG4gICAgICAgIC8vIGxlYXN0IHJlY2VudCBWYWx1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdCAmJiBfX1BSSVZBVEVfaXNTZXJ2ZXJUaW1lc3RhbXAodCkgJiYgKHQgPSBfX1BSSVZBVEVfZ2V0UHJldmlvdXNWYWx1ZSh0KSksIFxuICAgICAgICB0ICYmIChuLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX18gPSB0KSwge1xuICAgICAgICAgICAgbWFwVmFsdWU6IG5cbiAgICAgICAgfTtcbiAgICB9KG4sIHQpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FwcGx5QXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXBwbHlBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseU51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb25Ub0xvY2FsVmlldyhlLCB0KSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogU2luY2UgSmF2YVNjcmlwdCdzIGludGVnZXIgYXJpdGhtZXRpYyBpcyBsaW1pdGVkIHRvIDUzIGJpdFxuICAgICAgICAvLyBwcmVjaXNpb24gYW5kIHJlc29sdmVzIG92ZXJmbG93cyBieSByZWR1Y2luZyBwcmVjaXNpb24sIHdlIGRvIG5vdFxuICAgICAgICAvLyBtYW51YWxseSBjYXAgb3ZlcmZsb3dzIGF0IDJeNjMuXG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY29tcHV0ZVRyYW5zZm9ybU9wZXJhdGlvbkJhc2VWYWx1ZShlLCB0KSwgciA9IGFzTnVtYmVyKG4pICsgYXNOdW1iZXIoZS5UZSk7XG4gICAgICAgIHJldHVybiBpc0ludGVnZXIobikgJiYgaXNJbnRlZ2VyKGUuVGUpID8gX19QUklWQVRFX3RvSW50ZWdlcihyKSA6IF9fUFJJVkFURV90b0RvdWJsZShlLnNlcmlhbGl6ZXIsIHIpO1xuICAgIH0oZSwgdCk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYSBmaW5hbCB0cmFuc2Zvcm0gcmVzdWx0IGFmdGVyIHRoZSB0cmFuc2Zvcm0gaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gKiBieSB0aGUgc2VydmVyLCBwb3RlbnRpYWxseSB1c2luZyB0aGUgc2VydmVyLXByb3ZpZGVkIHRyYW5zZm9ybVJlc3VsdC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAvLyBUaGUgc2VydmVyIGp1c3Qgc2VuZHMgbnVsbCBhcyB0aGUgdHJhbnNmb3JtIHJlc3VsdCBmb3IgYXJyYXkgb3BlcmF0aW9ucyxcbiAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBhIHJlc3VsdCB0aGUgc2FtZSBhcyB3ZSBkbyBmb3IgbG9jYWxcbiAgICAvLyBhcHBsaWNhdGlvbnMuXG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcHBseUFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FwcGx5QXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkgOiBuO1xufVxuXG4vKipcbiAqIElmIHRoaXMgdHJhbnNmb3JtIG9wZXJhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0b1xuICogcGVyc2lzdCBmb3IgdGhpcyB0cmFuc2Zvcm0uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIHRyYW5zZm9ybVxuICogb3BlcmF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXNcbiAqIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIEJhc2UgdmFsdWVzIHByb3ZpZGUgY29uc2lzdGVudCBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmRcbiAqIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZSBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmRcbiAqIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlIHRyYW5zZm9ybSBvcGVyYXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMsIGFzIHRoZXkgY2FuIGJlIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhc1xuICogYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlKGUsIHQpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uID8gXG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGVpdGhlciBhbiBJbnRlZ2VyVmFsdWUgb3IgYSBEb3VibGVWYWx1ZS4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfaXNOdW1iZXIoZSkge1xuICAgICAgICByZXR1cm4gaXNJbnRlZ2VyKGUpIHx8IGZ1bmN0aW9uIF9fUFJJVkFURV9pc0RvdWJsZShlKSB7XG4gICAgICAgICAgICByZXR1cm4gISFlICYmIFwiZG91YmxlVmFsdWVcIiBpbiBlO1xuICAgICAgICB9KGUpO1xuICAgIH0odCkgPyB0IDoge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IDBcbiAgICB9IDogbnVsbDtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYSB2YWx1ZSBpbnRvIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAuICovXG5jbGFzcyBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtIGV4dGVuZHMgVHJhbnNmb3JtT3BlcmF0aW9uIHt9XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHVuaW9uIG9wZXJhdGlvbi4gKi8gY2xhc3MgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gZXh0ZW5kcyBUcmFuc2Zvcm1PcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2NvZXJjZWRGaWVsZFZhbHVlc0FycmF5KHQpO1xuICAgIGZvciAoY29uc3QgdCBvZiBlLmVsZW1lbnRzKSBuLnNvbWUoKGUgPT4gX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUsIHQpKSkgfHwgbi5wdXNoKHQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgcmVtb3ZlIG9wZXJhdGlvbi4gKi8gY2xhc3MgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uIGV4dGVuZHMgVHJhbnNmb3JtT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5QXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkge1xuICAgIGxldCBuID0gX19QUklWQVRFX2NvZXJjZWRGaWVsZFZhbHVlc0FycmF5KHQpO1xuICAgIGZvciAoY29uc3QgdCBvZiBlLmVsZW1lbnRzKSBuID0gbi5maWx0ZXIoKGUgPT4gIV9fUFJJVkFURV92YWx1ZUVxdWFscyhlLCB0KSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBiYWNrZW5kIHNlbWFudGljcyBmb3IgbG9jYWxseSBjb21wdXRlZCBOVU1FUklDX0FERCAoaW5jcmVtZW50KVxuICogdHJhbnNmb3Jtcy4gQ29udmVydHMgYWxsIGZpZWxkIHZhbHVlcyB0byBpbnRlZ2VycyBvciBkb3VibGVzLCBidXQgdW5saWtlIHRoZVxuICogYmFja2VuZCBkb2VzIG5vdCBjYXAgaW50ZWdlciB2YWx1ZXMgYXQgMl42My4gSW5zdGVhZCwgSmF2YVNjcmlwdCBudW1iZXJcbiAqIGFyaXRobWV0aWMgaXMgdXNlZCBhbmQgcHJlY2lzaW9uIGxvc3MgY2FuIG9jY3VyIGZvciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDJeNTMuXG4gKi8gY2xhc3MgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gZXh0ZW5kcyBUcmFuc2Zvcm1PcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5zZXJpYWxpemVyID0gZSwgdGhpcy5UZSA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhc051bWJlcihlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb2VyY2VkRmllbGRWYWx1ZXNBcnJheShlKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkoZSkgJiYgZS5hcnJheVZhbHVlLnZhbHVlcyA/IGUuYXJyYXlWYWx1ZS52YWx1ZXMuc2xpY2UoKSA6IFtdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgZmllbGQgcGF0aCBhbmQgdGhlIFRyYW5zZm9ybU9wZXJhdGlvbiB0byBwZXJmb3JtIHVwb24gaXQuICovIGNsYXNzIEZpZWxkVHJhbnNmb3JtIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSBlLCB0aGlzLnRyYW5zZm9ybSA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRUcmFuc2Zvcm1FcXVhbHMoZSwgdCkge1xuICAgIHJldHVybiBlLmZpZWxkLmlzRXF1YWwodC5maWVsZCkgJiYgZnVuY3Rpb24gX19QUklWQVRFX3RyYW5zZm9ybU9wZXJhdGlvbkVxdWFscyhlLCB0KSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gJiYgdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIHx8IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gJiYgdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcnJheUVxdWFscyhlLmVsZW1lbnRzLCB0LmVsZW1lbnRzLCBfX1BSSVZBVEVfdmFsdWVFcXVhbHMpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uICYmIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLlRlLCB0LlRlKSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtICYmIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtO1xuICAgIH0oZS50cmFuc2Zvcm0sIHQudHJhbnNmb3JtKTtcbn1cblxuLyoqIFRoZSByZXN1bHQgb2Ygc3VjY2Vzc2Z1bGx5IGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gdGhlIGJhY2tlbmQuICovXG5jbGFzcyBNdXRhdGlvblJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHZlcnNpb24gYXQgd2hpY2ggdGhlIG11dGF0aW9uIHdhcyBjb21taXR0ZWQ6XG4gICAgICpcbiAgICAgKiAtIEZvciBtb3N0IG9wZXJhdGlvbnMsIHRoaXMgaXMgdGhlIHVwZGF0ZVRpbWUgaW4gdGhlIFdyaXRlUmVzdWx0LlxuICAgICAqIC0gRm9yIGRlbGV0ZXMsIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIChiZWNhdXNlIGRlbGV0ZXMgYXJlXG4gICAgICogICBub3Qgc3RvcmVkIGFuZCBoYXZlIG5vIHVwZGF0ZVRpbWUpLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIHZlcnNpb25zIGNhbiBiZSBkaWZmZXJlbnQ6IE5vLW9wIHdyaXRlcyB3aWxsIG5vdCBjaGFuZ2VcbiAgICAgKiB0aGUgdXBkYXRlVGltZSBldmVuIHRob3VnaCB0aGUgY29tbWl0VGltZSBhZHZhbmNlcy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzdWx0aW5nIGZpZWxkcyByZXR1cm5lZCBmcm9tIHRoZSBiYWNrZW5kIGFmdGVyIGEgbXV0YXRpb25cbiAgICAgKiBjb250YWluaW5nIGZpZWxkIHRyYW5zZm9ybXMgaGFzIGJlZW4gY29tbWl0dGVkLiBDb250YWlucyBvbmUgRmllbGRWYWx1ZVxuICAgICAqIGZvciBlYWNoIEZpZWxkVHJhbnNmb3JtIHRoYXQgd2FzIGluIHRoZSBtdXRhdGlvbi5cbiAgICAgKlxuICAgICAqIFdpbGwgYmUgZW1wdHkgaWYgdGhlIG11dGF0aW9uIGRpZCBub3QgY29udGFpbiBhbnkgZmllbGQgdHJhbnNmb3Jtcy5cbiAgICAgKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMudHJhbnNmb3JtUmVzdWx0cyA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuY29kZXMgYSBwcmVjb25kaXRpb24gZm9yIGEgbXV0YXRpb24uIFRoaXMgZm9sbG93cyB0aGUgbW9kZWwgdGhhdCB0aGVcbiAqIGJhY2tlbmQgYWNjZXB0cyB3aXRoIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYW4gZXhwbGljaXQgXCJlbXB0eVwiIHByZWNvbmRpdGlvblxuICogKG1lYW5pbmcgbm8gcHJlY29uZGl0aW9uKS5cbiAqLyBjbGFzcyBQcmVjb25kaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lID0gZSwgdGhpcy5leGlzdHMgPSB0O1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBlbXB0eSBQcmVjb25kaXRpb24uICovICAgIHN0YXRpYyBub25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByZWNvbmRpdGlvbjtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIHdpdGggYW4gZXhpc3RzIGZsYWcuICovICAgIHN0YXRpYyBleGlzdHMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByZWNvbmRpdGlvbih2b2lkIDAsIGUpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gYmFzZWQgb24gYSB2ZXJzaW9uIGEgZG9jdW1lbnQgZXhpc3RzIGF0LiAqLyAgICBzdGF0aWMgdXBkYXRlVGltZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJlY29uZGl0aW9uKGUpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIHRoaXMgUHJlY29uZGl0aW9uIGlzIGVtcHR5LiAqLyAgICBnZXQgaXNOb25lKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0aGlzLnVwZGF0ZVRpbWUgJiYgdm9pZCAwID09PSB0aGlzLmV4aXN0cztcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4aXN0cyA9PT0gZS5leGlzdHMgJiYgKHRoaXMudXBkYXRlVGltZSA/ICEhZS51cGRhdGVUaW1lICYmIHRoaXMudXBkYXRlVGltZS5pc0VxdWFsKGUudXBkYXRlVGltZSkgOiAhZS51cGRhdGVUaW1lKTtcbiAgICB9XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByZWNvbmRpdGlvbnMgaXMgdmFsaWQgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLCB0KSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51cGRhdGVUaW1lID8gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiB0LnZlcnNpb24uaXNFcXVhbChlLnVwZGF0ZVRpbWUpIDogdm9pZCAwID09PSBlLmV4aXN0cyB8fCBlLmV4aXN0cyA9PT0gdC5pc0ZvdW5kRG9jdW1lbnQoKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIGRlc2NyaWJlcyBhIHNlbGYtY29udGFpbmVkIGNoYW5nZSB0byBhIGRvY3VtZW50LiBNdXRhdGlvbnMgY2FuXG4gKiBjcmVhdGUsIHJlcGxhY2UsIGRlbGV0ZSwgYW5kIHVwZGF0ZSBzdWJzZXRzIG9mIGRvY3VtZW50cy5cbiAqXG4gKiBNdXRhdGlvbnMgbm90IG9ubHkgYWN0IG9uIHRoZSB2YWx1ZSBvZiB0aGUgZG9jdW1lbnQgYnV0IGFsc28gaXRzIHZlcnNpb24uXG4gKlxuICogRm9yIGxvY2FsIG11dGF0aW9ucyAobXV0YXRpb25zIHRoYXQgaGF2ZW4ndCBiZWVuIGNvbW1pdHRlZCB5ZXQpLCB3ZSBwcmVzZXJ2ZVxuICogdGhlIGV4aXN0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBGb3IgRGVsZXRlIG11dGF0aW9ucywgd2VcbiAqIHJlc2V0IHRoZSB2ZXJzaW9uIHRvIDAuXG4gKlxuICogSGVyZSdzIHRoZSBleHBlY3RlZCB0cmFuc2l0aW9uIHRhYmxlLlxuICpcbiAqIE1VVEFUSU9OICAgICAgICAgICBBUFBMSUVEIFRPICAgICAgICAgICAgUkVTVUxUUyBJTlxuICpcbiAqIFNldE11dGF0aW9uICAgICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIERvY3VtZW50KHYwKVxuICogU2V0TXV0YXRpb24gICAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBEb2N1bWVudCh2MClcbiAqIFBhdGNoTXV0YXRpb24gICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIFVua25vd25Eb2N1bWVudCh2MylcbiAqIERlbGV0ZU11dGF0aW9uICAgICBEb2N1bWVudCh2MykgICAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgTm9Eb2N1bWVudCh2MClcbiAqXG4gKiBGb3IgYWNrbm93bGVkZ2VkIG11dGF0aW9ucywgd2UgdXNlIHRoZSB1cGRhdGVUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGFzXG4gKiB0aGUgcmVzdWx0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBBcyBkZWxldGVzIGhhdmUgbm9cbiAqIGV4cGxpY2l0IHVwZGF0ZSB0aW1lLCB3ZSB1c2UgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgZm9yXG4gKiBEZWxldGUgbXV0YXRpb25zLlxuICpcbiAqIElmIGEgbXV0YXRpb24gaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kIGJ1dCBmYWlscyB0aGUgcHJlY29uZGl0aW9uIGNoZWNrXG4gKiBsb2NhbGx5LCB3ZSB0cmFuc2l0aW9uIHRvIGFuIGBVbmtub3duRG9jdW1lbnRgIGFuZCByZWx5IG9uIFdhdGNoIHRvIHNlbmQgdXNcbiAqIHRoZSB1cGRhdGVkIHZlcnNpb24uXG4gKlxuICogRmllbGQgdHJhbnNmb3JtcyBhcmUgdXNlZCBvbmx5IHdpdGggUGF0Y2ggYW5kIFNldCBNdXRhdGlvbnMuIFdlIHVzZSB0aGVcbiAqIGB1cGRhdGVUcmFuc2Zvcm1zYCBtZXNzYWdlIHRvIHN0b3JlIHRyYW5zZm9ybXMsIHJhdGhlciB0aGFuIHRoZSBgdHJhbnNmb3Jtc2BzXG4gKiBtZXNzYWdlcy5cbiAqXG4gKiAjIyBTdWJjbGFzc2luZyBOb3Rlc1xuICpcbiAqIEV2ZXJ5IHR5cGUgb2YgbXV0YXRpb24gbmVlZHMgdG8gaW1wbGVtZW50IGl0cyBvd24gYXBwbHlUb1JlbW90ZURvY3VtZW50KCkgYW5kXG4gKiBhcHBseVRvTG9jYWxWaWV3KCkgdG8gaW1wbGVtZW50IHRoZSBhY3R1YWwgYmVoYXZpb3Igb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uXG4gKiB0byBzb21lIHNvdXJjZSBkb2N1bWVudCAoc2VlIGBzZXRNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudCgpYCBmb3IgYW5cbiAqIGV4YW1wbGUpLlxuICovIGNsYXNzIE11dGF0aW9uIHt9XG5cbi8qKlxuICogQSB1dGlsaXR5IG1ldGhvZCB0byBjYWxjdWxhdGUgYSBgTXV0YXRpb25gIHJlcHJlc2VudGluZyB0aGUgb3ZlcmxheSBmcm9tIHRoZVxuICogZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50LCBhbmQgYSBgRmllbGRNYXNrYCByZXByZXNlbnRpbmcgdGhlIGZpZWxkcyB0aGF0XG4gKiBhcmUgbXV0YXRlZCBieSB0aGUgbG9jYWwgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jYWxjdWxhdGVPdmVybGF5TXV0YXRpb24oZSwgdCkge1xuICAgIGlmICghZS5oYXNMb2NhbE11dGF0aW9ucyB8fCB0ICYmIDAgPT09IHQuZmllbGRzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgLy8gbWFzayBpcyBudWxsIHdoZW4gc2V0cyBvciBkZWxldGVzIGFyZSBhcHBsaWVkIHRvIHRoZSBjdXJyZW50IGRvY3VtZW50LlxuICAgICAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIGUuaXNOb0RvY3VtZW50KCkgPyBuZXcgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uKGUua2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSA6IG5ldyBfX1BSSVZBVEVfU2V0TXV0YXRpb24oZS5rZXksIGUuZGF0YSwgUHJlY29uZGl0aW9uLm5vbmUoKSk7XG4gICAge1xuICAgICAgICBjb25zdCBuID0gZS5kYXRhLCByID0gT2JqZWN0VmFsdWUuZW1wdHkoKTtcbiAgICAgICAgbGV0IGkgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpO1xuICAgICAgICBmb3IgKGxldCBlIG9mIHQuZmllbGRzKSBpZiAoIWkuaGFzKGUpKSB7XG4gICAgICAgICAgICBsZXQgdCA9IG4uZmllbGQoZSk7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZGVsZXRpbmcgYSBuZXN0ZWQgZmllbGQsIHdlIHRha2UgdGhlIGltbWVkaWF0ZSBwYXJlbnQgYXNcbiAgICAgICAgICAgIC8vIHRoZSBtYXNrIHVzZWQgdG8gY29uc3RydWN0IHRoZSByZXN1bHRpbmcgbXV0YXRpb24uXG4gICAgICAgICAgICAvLyBKdXN0aWZpY2F0aW9uOiBOZXN0ZWQgZmllbGRzIGNhbiBjcmVhdGUgcGFyZW50IGZpZWxkcyBpbXBsaWNpdGx5LiBJZlxuICAgICAgICAgICAgLy8gb25seSBhIGxlYWYgZW50cnkgaXMgZGVsZXRlZCBpbiBsYXRlciBtdXRhdGlvbnMsIHRoZSBwYXJlbnQgZmllbGRcbiAgICAgICAgICAgIC8vIHNob3VsZCBzdGlsbCByZW1haW4sIGJ1dCB3ZSBtYXkgaGF2ZSBsb3N0IHRoaXMgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICAvLyBDb25zaWRlciBtdXRhdGlvbiAoZm9vLmJhciAxKSwgdGhlbiBtdXRhdGlvbiAoZm9vLmJhciBkZWxldGUoKSkuXG4gICAgICAgICAgICAvLyBUaGlzIGxlYXZlcyB0aGUgZmluYWwgcmVzdWx0IChmb28sIHt9KS4gRGVzcGl0ZSB0aGUgZmFjdCB0aGF0IGBkb2NgXG4gICAgICAgICAgICAvLyBoYXMgdGhlIGNvcnJlY3QgcmVzdWx0LCBgZm9vYCBpcyBub3QgaW4gYG1hc2tgLCBhbmQgdGhlIHJlc3VsdGluZ1xuICAgICAgICAgICAgLy8gbXV0YXRpb24gd291bGQgbWlzcyBgZm9vYC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT09IHQgJiYgZS5sZW5ndGggPiAxICYmIChlID0gZS5wb3BMYXN0KCksIHQgPSBuLmZpZWxkKGUpKSwgbnVsbCA9PT0gdCA/IHIuZGVsZXRlKGUpIDogci5zZXQoZSwgdCksIFxuICAgICAgICAgICAgaSA9IGkuYWRkKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oZS5rZXksIHIsIG5ldyBGaWVsZE1hc2soaS50b0FycmF5KCkpLCBQcmVjb25kaXRpb24ubm9uZSgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZyBhXG4gKiBuZXcgcmVtb3RlIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGUgZXhwZWN0ZWQgc3RhdGVcbiAqIChlLmcuIGl0IGlzIGludmFsaWQgb3Igb3V0ZGF0ZWQpLCB0aGUgZG9jdW1lbnQgdHlwZSBtYXkgdHJhbnNpdGlvbiB0b1xuICogdW5rbm93bi5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBtdXRhdGlvblJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uIGZyb20gdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NldE11dGF0aW9uID8gZnVuY3Rpb24gX19QUklWQVRFX3NldE11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIHNldE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhXG4gICAgICAgIC8vIHJlbW90ZSBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtdXN0IGhhdmUgaGVsZC5cbiAgICAgICAgY29uc3QgciA9IGUudmFsdWUuY2xvbmUoKSwgaSA9IF9fUFJJVkFURV9zZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzKGUuZmllbGRUcmFuc2Zvcm1zLCB0LCBuLnRyYW5zZm9ybVJlc3VsdHMpO1xuICAgICAgICByLnNldEFsbChpKSwgdC5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgcikuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfShlLCB0LCBuKSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbiA/IGZ1bmN0aW9uIF9fUFJJVkFURV9wYXRjaE11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUucHJlY29uZGl0aW9uLCB0KSkgXG4gICAgICAgIC8vIFNpbmNlIHRoZSBtdXRhdGlvbiB3YXMgbm90IHJlamVjdGVkLCB3ZSBrbm93IHRoYXQgdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtYXRjaGVkIG9uIHRoZSBiYWNrZW5kLiBXZSB0aGVyZWZvcmUgbXVzdCBub3QgaGF2ZSB0aGUgZXhwZWN0ZWQgdmVyc2lvblxuICAgICAgICAvLyBvZiB0aGUgZG9jdW1lbnQgaW4gb3VyIGNhY2hlIGFuZCBjb252ZXJ0IHRvIGFuIFVua25vd25Eb2N1bWVudCB3aXRoIGFcbiAgICAgICAgLy8ga25vd24gdXBkYXRlVGltZS5cbiAgICAgICAgcmV0dXJuIHZvaWQgdC5jb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQobi52ZXJzaW9uKTtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9zZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzKGUuZmllbGRUcmFuc2Zvcm1zLCB0LCBuLnRyYW5zZm9ybVJlc3VsdHMpLCBpID0gdC5kYXRhO1xuICAgICAgICBpLnNldEFsbChfX1BSSVZBVEVfZ2V0UGF0Y2goZSkpLCBpLnNldEFsbChyKSwgdC5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgaSkuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfShlLCB0LCBuKSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9kZWxldGVNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBhcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGEgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxuICAgICAgICB0LmNvbnZlcnRUb05vRG9jdW1lbnQobi52ZXJzaW9uKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KDAsIHQsIG4pO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmdcbiAqIHRoZSBuZXcgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGVcbiAqIGV4cGVjdGVkIHN0YXRlLCB0aGUgZG9jdW1lbnQgaXMgbm90IG1vZGlmaWVkLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIHByZXZpb3VzTWFzayAtIFRoZSBmaWVsZHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBiZWZvcmUgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbi5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIEEgdGltZXN0YW1wIGluZGljYXRpbmcgdGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlXG4gKiAgICAgYmF0Y2ggdGhpcyBtdXRhdGlvbiBpcyBhIHBhcnQgb2YuXG4gKiBAcmV0dXJucyBBIGBGaWVsZE1hc2tgIHJlcHJlc2VudGluZyB0aGUgZmllbGRzIHRoYXQgYXJlIGNoYW5nZWQgYnkgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KGUsIHQsIG4sIHIpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXRNdXRhdGlvbiA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcoZSwgdCwgbiwgcikge1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZS5wcmVjb25kaXRpb24sIHQpKSBcbiAgICAgICAgLy8gVGhlIG11dGF0aW9uIGZhaWxlZCB0byBhcHBseSAoZS5nLiBhIGRvY3VtZW50IElEIGNyZWF0ZWQgd2l0aCBhZGQoKVxuICAgICAgICAvLyBjYXVzZWQgYSBuYW1lIGNvbGxpc2lvbikuXG4gICAgICAgIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gZS52YWx1ZS5jbG9uZSgpLCBzID0gX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyhlLmZpZWxkVHJhbnNmb3JtcywgciwgdCk7XG4gICAgICAgIHJldHVybiBpLnNldEFsbChzKSwgdC5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KHQudmVyc2lvbiwgaSkuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGw7XG4gLy8gU2V0TXV0YXRpb24gb3ZlcndyaXRlcyBhbGwgZmllbGRzLlxuICAgICAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgbW9kaWZpZXMgZmllbGRzIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBnaXZlbiB2YWx1ZXMuIFRoZSB2YWx1ZXMgYXJlIGFwcGxpZWQgdGhyb3VnaCBhIGZpZWxkIG1hc2s6XG4gKlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIGJvdGggdGhlIG1hc2sgYW5kIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyB1cGRhdGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIG5laXRoZXIgdGhlIG1hc2sgbm9yIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nXG4gKiAgICBmaWVsZCBpcyB1bm1vZGlmaWVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIHRoZSBtYXNrIGJ1dCBub3QgaW4gdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIGRlbGV0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgbm90IGluIHRoZSBtYXNrIGJ1dCBpcyBpbiB0aGUgdmFsdWVzLCB0aGUgdmFsdWVzIG1hcCBpc1xuICogICAgaWdub3JlZC5cbiAqLyAoZSwgdCwgbiwgcikgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24gPyBmdW5jdGlvbiBfX1BSSVZBVEVfcGF0Y2hNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcoZSwgdCwgbiwgcikge1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZS5wcmVjb25kaXRpb24sIHQpKSByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9sb2NhbFRyYW5zZm9ybVJlc3VsdHMoZS5maWVsZFRyYW5zZm9ybXMsIHIsIHQpLCBzID0gdC5kYXRhO1xuICAgICAgICBpZiAocy5zZXRBbGwoX19QUklWQVRFX2dldFBhdGNoKGUpKSwgcy5zZXRBbGwoaSksIHQuY29udmVydFRvRm91bmREb2N1bWVudCh0LnZlcnNpb24sIHMpLnNldEhhc0xvY2FsTXV0YXRpb25zKCksIFxuICAgICAgICBudWxsID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG4udW5pb25XaXRoKGUuZmllbGRNYXNrLmZpZWxkcykudW5pb25XaXRoKGUuZmllbGRUcmFuc2Zvcm1zLm1hcCgoZSA9PiBlLmZpZWxkKSkpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBGaWVsZFBhdGgvVmFsdWUgbWFwIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlIFBhdGNoTXV0YXRpb24uXG4gKi8gKGUsIHQsIG4sIHIpIDogZnVuY3Rpb24gX19QUklWQVRFX2RlbGV0ZU11dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhlLCB0LCBuKSB7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUucHJlY29uZGl0aW9uLCB0KSkgcmV0dXJuIHQuY29udmVydFRvTm9Eb2N1bWVudCh0LnZlcnNpb24pLnNldEhhc0xvY2FsTXV0YXRpb25zKCksIFxuICAgICAgICBudWxsO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgdmVyaWZpZXMgdGhlIGV4aXN0ZW5jZSBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoXG4gKiB0aGUgcHJvdmlkZWQgcHJlY29uZGl0aW9uLlxuICpcbiAqIFRoZSBgdmVyaWZ5YCBvcGVyYXRpb24gaXMgb25seSB1c2VkIGluIFRyYW5zYWN0aW9ucywgYW5kIHRoaXMgY2xhc3Mgc2VydmVzXG4gKiBwcmltYXJpbHkgdG8gZmFjaWxpdGF0ZSBzZXJpYWxpemF0aW9uIGludG8gcHJvdG9zLlxuICovIChlLCB0LCBuKTtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIG11dGF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvIHBlcnNpc3Qgd2l0aFxuICogdGhpcyBtdXRhdGlvbi4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgbXV0YXRpb24gaXMgYWx3YXlzIGFwcGxpZWRcbiAqIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXMgYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogVGhlIGJhc2UgdmFsdWUgaXMgYSBzcGFyc2Ugb2JqZWN0IHRoYXQgY29uc2lzdHMgb2Ygb25seSB0aGUgZG9jdW1lbnRcbiAqIGZpZWxkcyBmb3Igd2hpY2ggdGhpcyBtdXRhdGlvbiBjb250YWlucyBhIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybWF0aW9uXG4gKiAoZS5nLiBhIG51bWVyaWMgaW5jcmVtZW50KS4gVGhlIHByb3ZpZGVkIHZhbHVlIGd1YXJhbnRlZXMgY29uc2lzdGVudFxuICogYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZVxuICogbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlXG4gKiBtdXRhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3IgaWRlbXBvdGVudCBtdXRhdGlvbnMsIGFzIHRoZXkgY2FuIGJlXG4gKiByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCBtdXRhdGlvbnMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uRXh0cmFjdEJhc2VWYWx1ZShlLCB0KSB7XG4gICAgbGV0IG4gPSBudWxsO1xuICAgIGZvciAoY29uc3QgciBvZiBlLmZpZWxkVHJhbnNmb3Jtcykge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHIuZmllbGQpLCBpID0gX19QUklWQVRFX2NvbXB1dGVUcmFuc2Zvcm1PcGVyYXRpb25CYXNlVmFsdWUoci50cmFuc2Zvcm0sIGUgfHwgbnVsbCk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobnVsbCA9PT0gbiAmJiAobiA9IE9iamVjdFZhbHVlLmVtcHR5KCkpLCBuLnNldChyLmZpZWxkLCBpKSk7XG4gICAgfVxuICAgIHJldHVybiBuIHx8IG51bGw7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbkVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUudHlwZSA9PT0gdC50eXBlICYmICghIWUua2V5LmlzRXF1YWwodC5rZXkpICYmICghIWUucHJlY29uZGl0aW9uLmlzRXF1YWwodC5wcmVjb25kaXRpb24pICYmICghIWZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZFRyYW5zZm9ybXNBcmVFcXVhbChlLCB0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IGUgJiYgdm9pZCAwID09PSB0IHx8ICEoIWUgfHwgIXQpICYmIF9fUFJJVkFURV9hcnJheUVxdWFscyhlLCB0LCAoKGUsIHQpID0+IF9fUFJJVkFURV9maWVsZFRyYW5zZm9ybUVxdWFscyhlLCB0KSkpO1xuICAgIH0oZS5maWVsZFRyYW5zZm9ybXMsIHQuZmllbGRUcmFuc2Zvcm1zKSAmJiAoMCAvKiBNdXRhdGlvblR5cGUuU2V0ICovID09PSBlLnR5cGUgPyBlLnZhbHVlLmlzRXF1YWwodC52YWx1ZSkgOiAxIC8qIE11dGF0aW9uVHlwZS5QYXRjaCAqLyAhPT0gZS50eXBlIHx8IGUuZGF0YS5pc0VxdWFsKHQuZGF0YSkgJiYgZS5maWVsZE1hc2suaXNFcXVhbCh0LmZpZWxkTWFzaykpKSkpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gdGhhdCBjcmVhdGVzIG9yIHJlcGxhY2VzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBvYmplY3QgdmFsdWUgY29udGVudHMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1NldE11dGF0aW9uIGV4dGVuZHMgTXV0YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IGUsIHRoaXMudmFsdWUgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IG4sIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gciwgXG4gICAgICAgIHRoaXMudHlwZSA9IDAgLyogTXV0YXRpb25UeXBlLlNldCAqLztcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9QYXRjaE11dGF0aW9uIGV4dGVuZHMgTXV0YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IGUsIHRoaXMuZGF0YSA9IHQsIHRoaXMuZmllbGRNYXNrID0gbiwgdGhpcy5wcmVjb25kaXRpb24gPSByLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpLCB0aGlzLnR5cGUgPSAxIC8qIE11dGF0aW9uVHlwZS5QYXRjaCAqLztcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZE1hc2s7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0UGF0Y2goZSkge1xuICAgIGNvbnN0IHQgPSBuZXcgTWFwO1xuICAgIHJldHVybiBlLmZpZWxkTWFzay5maWVsZHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgIGlmICghbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBlLmRhdGEuZmllbGQobik7XG4gICAgICAgICAgICB0LnNldChuLCByKTtcbiAgICAgICAgfVxuICAgIH0pKSwgdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSBhZnRlciBhIG11dGF0aW9uXG4gKiBjb250YWluaW5nIHRyYW5zZm9ybXMgaGFzIGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHBhcmFtIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMgLSBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgdGhlIHNlcnZlci5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gbmV3IE1hcDtcbiAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChlLmxlbmd0aCA9PT0gbi5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzID0gZVtpXSwgbyA9IHMudHJhbnNmb3JtLCBfID0gdC5kYXRhLmZpZWxkKHMuZmllbGQpO1xuICAgICAgICByLnNldChzLmZpZWxkLCBfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub1JlbW90ZURvY3VtZW50KG8sIF8sIG5baV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2Ugd2hlbiBhcHBseWluZyBhXG4gKiB0cmFuc2Zvcm0gbG9jYWxseS5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBsb2NhbCB0aW1lIG9mIHRoZSBtdXRhdGlvbiAodXNlZCB0b1xuICogICAgIGdlbmVyYXRlIFNlcnZlclRpbWVzdGFtcFZhbHVlcykuXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IHRyYW5zZm9ybXMgb24uXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxUcmFuc2Zvcm1SZXN1bHRzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gbmV3IE1hcDtcbiAgICBmb3IgKGNvbnN0IGkgb2YgZSkge1xuICAgICAgICBjb25zdCBlID0gaS50cmFuc2Zvcm0sIHMgPSBuLmRhdGEuZmllbGQoaS5maWVsZCk7XG4gICAgICAgIHIuc2V0KGkuZmllbGQsIF9fUFJJVkFURV9hcHBseVRyYW5zZm9ybU9wZXJhdGlvblRvTG9jYWxWaWV3KGUsIHMsIHQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbi8qKiBBIG11dGF0aW9uIHRoYXQgZGVsZXRlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleS4gKi8gY2xhc3MgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uIGV4dGVuZHMgTXV0YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IHQsIHRoaXMudHlwZSA9IDIgLyogTXV0YXRpb25UeXBlLkRlbGV0ZSAqLyAsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uIGV4dGVuZHMgTXV0YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IHQsIHRoaXMudHlwZSA9IDMgLyogTXV0YXRpb25UeXBlLlZlcmlmeSAqLyAsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBiYXRjaCBvZiBtdXRhdGlvbnMgdGhhdCB3aWxsIGJlIHNlbnQgYXMgb25lIHVuaXQgdG8gdGhlIGJhY2tlbmQuXG4gKi8gY2xhc3MgTXV0YXRpb25CYXRjaCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgdW5pcXVlIElEIG9mIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIG9yaWdpbmFsIHdyaXRlIHRpbWUgb2YgdGhpcyBtdXRhdGlvbi5cbiAgICAgKiBAcGFyYW0gYmFzZU11dGF0aW9ucyAtIE11dGF0aW9ucyB0aGF0IGFyZSB1c2VkIHRvIHBvcHVsYXRlIHRoZSBiYXNlXG4gICAgICogdmFsdWVzIHdoZW4gdGhpcyBtdXRhdGlvbiBpcyBhcHBsaWVkIGxvY2FsbHkuIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9jYWxseVxuICAgICAqIG92ZXJ3cml0ZSB2YWx1ZXMgdGhhdCBhcmUgcGVyc2lzdGVkIGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIEJhc2VcbiAgICAgKiBtdXRhdGlvbnMgYXJlIG5ldmVyIHNlbnQgdG8gdGhlIGJhY2tlbmQuXG4gICAgICogQHBhcmFtIG11dGF0aW9ucyAtIFRoZSB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucyBpbiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIFVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGFyZSBhcHBsaWVkIGJvdGggbG9jYWxseSBhbmQgcmVtb3RlbHkgb24gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IGUsIHRoaXMubG9jYWxXcml0ZVRpbWUgPSB0LCB0aGlzLmJhc2VNdXRhdGlvbnMgPSBuLCB0aGlzLm11dGF0aW9ucyA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpcyBNdXRhdGlvbkJhdGNoIHRvIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnRcbiAgICAgKiB0byBjb21wdXRlIHRoZSBzdGF0ZSBvZiB0aGUgcmVtb3RlIGRvY3VtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSBiYXRjaFJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIE11dGF0aW9uQmF0Y2ggdG8gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi8gICAgYXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQubXV0YXRpb25SZXN1bHRzO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMubXV0YXRpb25zLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5tdXRhdGlvbnNbdF07XG4gICAgICAgICAgICBpZiAoci5rZXkuaXNFcXVhbChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQociwgZSwgblt0XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudCBnaXZlbiBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzXG4gICAgICogYmF0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSBtdXRhdGVkRmllbGRzIC0gRmllbGRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgYmVmb3JlIGFwcGx5aW5nIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogQHJldHVybnMgQSBgRmllbGRNYXNrYCByZXByZXNlbnRpbmcgYWxsIHRoZSBmaWVsZHMgdGhhdCBhcmUgbXV0YXRlZC5cbiAgICAgKi8gICAgYXBwbHlUb0xvY2FsVmlldyhlLCB0KSB7XG4gICAgICAgIC8vIEZpcnN0LCBhcHBseSB0aGUgYmFzZSBzdGF0ZS4gVGhpcyBhbGxvd3MgdXMgdG8gYXBwbHkgbm9uLWlkZW1wb3RlbnRcbiAgICAgICAgLy8gdHJhbnNmb3JtIGFnYWluc3QgYSBjb25zaXN0ZW50IHNldCBvZiB2YWx1ZXMuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0aGlzLmJhc2VNdXRhdGlvbnMpIG4ua2V5LmlzRXF1YWwoZS5rZXkpICYmICh0ID0gX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhuLCBlLCB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lKSk7XG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0aGlzLm11dGF0aW9ucykgbi5rZXkuaXNFcXVhbChlLmtleSkgJiYgKHQgPSBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KG4sIGUsIHQsIHRoaXMubG9jYWxXcml0ZVRpbWUpKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cbiAgICAgKiB0aGlzIGJhdGNoLiBSZXR1cm5zIGEgYERvY3VtZW50S2V5YCB0byBgTXV0YXRpb25gIG1hcCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHJlcGxhY2UgYWxsIHRoZSBtdXRhdGlvbiBhcHBsaWNhdGlvbnMuXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KGUsIHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIE8obl4yKS4gSWYgd2UgYXBwbHkgdGhlIG11dGF0aW9uc1xuICAgICAgICAvLyBkaXJlY3RseSAoYXMgZG9uZSBpbiBgYXBwbHlUb0xvY2FsVmlldygpYCksIHdlIGNhbiByZWR1Y2UgdGhlIGNvbXBsZXhpdHlcbiAgICAgICAgLy8gdG8gTyhuKS5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdNdXRhdGlvbk1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgociA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5nZXQoci5rZXkpLCBzID0gaS5vdmVybGF5ZWREb2N1bWVudDtcbiAgICAgICAgICAgIC8vIFRPRE8obXV0YWJsZWRvY3VtZW50cyk6IFRoaXMgbWV0aG9kIHNob3VsZCB0YWtlIGEgTXV0YWJsZURvY3VtZW50TWFwXG4gICAgICAgICAgICAvLyBhbmQgd2Ugc2hvdWxkIHJlbW92ZSB0aGlzIGNhc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IHRoaXMuYXBwbHlUb0xvY2FsVmlldyhzLCBpLm11dGF0ZWRGaWVsZHMpO1xuICAgICAgICAgICAgLy8gU2V0IG11dGF0ZWRGaWVsZHMgdG8gbnVsbCBpZiB0aGUgZG9jdW1lbnQgaXMgb25seSBmcm9tIGxvY2FsIG11dGF0aW9ucy5cbiAgICAgICAgICAgIC8vIFRoaXMgY3JlYXRlcyBhIFNldCBvciBEZWxldGUgbXV0YXRpb24sIGluc3RlYWQgb2YgdHJ5aW5nIHRvIGNyZWF0ZSBhXG4gICAgICAgICAgICAvLyBwYXRjaCBtdXRhdGlvbiBhcyB0aGUgb3ZlcmxheS5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0LmhhcyhyLmtleSkgPyBudWxsIDogbztcbiAgICAgICAgICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfY2FsY3VsYXRlT3ZlcmxheU11dGF0aW9uKHMsIG8pO1xuICAgICAgICAgICAgbnVsbCAhPT0gXyAmJiBuLnNldChyLmtleSwgXyksIHMuaXNWYWxpZERvY3VtZW50KCkgfHwgcy5jb252ZXJ0VG9Ob0RvY3VtZW50KFNuYXBzaG90VmVyc2lvbi5taW4oKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZSgoKGUsIHQpID0+IGUuYWRkKHQua2V5KSksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoSWQgPT09IGUuYmF0Y2hJZCAmJiBfX1BSSVZBVEVfYXJyYXlFcXVhbHModGhpcy5tdXRhdGlvbnMsIGUubXV0YXRpb25zLCAoKGUsIHQpID0+IF9fUFJJVkFURV9tdXRhdGlvbkVxdWFscyhlLCB0KSkpICYmIF9fUFJJVkFURV9hcnJheUVxdWFscyh0aGlzLmJhc2VNdXRhdGlvbnMsIGUuYmFzZU11dGF0aW9ucywgKChlLCB0KSA9PiBfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMoZSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgbXV0YXRpb24gYmF0Y2ggdG8gdGhlIGJhY2tlbmQuICovIGNsYXNzIE11dGF0aW9uQmF0Y2hSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIFxuICAgIC8qKlxuICAgICAqIEEgcHJlLWNvbXB1dGVkIG1hcHBpbmcgZnJvbSBlYWNoIG11dGF0ZWQgZG9jdW1lbnQgdG8gdGhlIHJlc3VsdGluZ1xuICAgICAqIHZlcnNpb24uXG4gICAgICovXG4gICAgcikge1xuICAgICAgICB0aGlzLmJhdGNoID0gZSwgdGhpcy5jb21taXRWZXJzaW9uID0gdCwgdGhpcy5tdXRhdGlvblJlc3VsdHMgPSBuLCB0aGlzLmRvY1ZlcnNpb25zID0gcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNdXRhdGlvbkJhdGNoUmVzdWx0IGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHJlc3VsdHMuIFRoZXJlXG4gICAgICogbXVzdCBiZSBvbmUgcmVzdWx0IGZvciBlYWNoIG11dGF0aW9uIGluIHRoZSBiYXRjaC4gVGhpcyBzdGF0aWMgZmFjdG9yeVxuICAgICAqIGNhY2hlcyBhIGRvY3VtZW50PSZndDt2ZXJzaW9uIG1hcHBpbmcgKGRvY1ZlcnNpb25zKS5cbiAgICAgKi8gICAgc3RhdGljIGZyb20oZSwgdCwgbikge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChlLm11dGF0aW9ucy5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICAgICAgbGV0IHIgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRWZXJzaW9uTWFwKCkge1xuICAgICAgICAgICAgcmV0dXJuIG9lO1xuICAgICAgICB9KCk7XG4gICAgICAgIGNvbnN0IGkgPSBlLm11dGF0aW9ucztcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBpLmxlbmd0aDsgZSsrKSByID0gci5pbnNlcnQoaVtlXS5rZXksIG5bZV0udmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdChlLCB0LCBuLCByKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGFuIG92ZXJsYXkgY29tcHV0ZWQgYnkgRmlyZXN0b3JlLlxuICpcbiAqIEhvbGRzIGluZm9ybWF0aW9uIGFib3V0IGEgbXV0YXRpb24gYW5kIHRoZSBsYXJnZXN0IGJhdGNoIGlkIGluIEZpcmVzdG9yZSB3aGVuXG4gKiB0aGUgbXV0YXRpb24gd2FzIGNyZWF0ZWQuXG4gKi8gY2xhc3MgT3ZlcmxheSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmxhcmdlc3RCYXRjaElkID0gZSwgdGhpcy5tdXRhdGlvbiA9IHQ7XG4gICAgfVxuICAgIGdldEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb24ua2V5O1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgdGhpcy5tdXRhdGlvbiA9PT0gZS5tdXRhdGlvbjtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgT3ZlcmxheXtcXG4gICAgICBsYXJnZXN0QmF0Y2hJZDogJHt0aGlzLmxhcmdlc3RCYXRjaElkfSxcXG4gICAgICBtdXRhdGlvbjogJHt0aGlzLm11dGF0aW9uLnRvU3RyaW5nKCl9XFxuICAgIH1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29uY3JldGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIEFnZ3JlZ2F0ZSB0eXBlLlxuICovIGNsYXNzIF9fUFJJVkFURV9BZ2dyZWdhdGVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBlLCB0aGlzLkVlID0gdCwgdGhpcy5maWVsZFBhdGggPSBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRXhpc3RlbmNlRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY291bnQgPSBlLCB0aGlzLnVuY2hhbmdlZE5hbWVzID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICpcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBvciBjaGFuZ2UgdGhpcyBpbnRvIGEgY29uc3QgZW51bS5cbiAqLyB2YXIgdWUsIGNlO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoKTtcblxuICAgICAgY2FzZSB2LkNBTkNFTExFRDpcbiAgICAgIGNhc2Ugdi5VTktOT1dOOlxuICAgICAgY2FzZSB2LkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgY2FzZSB2LlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgIGNhc2Ugdi5JTlRFUk5BTDpcbiAgICAgIGNhc2Ugdi5VTkFWQUlMQUJMRTpcbiAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMgd2hpY2ggd2lsbCBoYXBwZW4gYXV0b21hdGljYWxseS5cbiAgICAgICAgICAgICAgY2FzZSB2LlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBjYXNlIHYuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgIGNhc2Ugdi5OT1RfRk9VTkQ6XG4gICAgICBjYXNlIHYuQUxSRUFEWV9FWElTVFM6XG4gICAgICBjYXNlIHYuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICBjYXNlIHYuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAvLyBBYm9ydGVkIG1pZ2h0IGJlIHJldHJpZWQgaW4gc29tZSBzY2VuYXJpb3MsIGJ1dCB0aGF0IGlzIGRlcGVuZGFudCBvblxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxuICAgICAgICAgICAgICBjYXNlIHYuQUJPUlRFRDpcbiAgICAgIGNhc2Ugdi5PVVRfT0ZfUkFOR0U6XG4gICAgICBjYXNlIHYuVU5JTVBMRU1FTlRFRDpcbiAgICAgIGNhc2Ugdi5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIHdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBXcml0ZSBvcGVyYXRpb25zIG11c3QgYmUgaGFuZGxlZCBzcGVjaWFsbHkgYmVjYXVzZSBhcyBvZiBiLzExOTQzNzc2NCwgQUJPUlRFRFxuICogZXJyb3JzIG9uIHRoZSB3cml0ZSBzdHJlYW0gc2hvdWxkIGJlIHJldHJpZWQgdG9vIChldmVuIHRob3VnaCBBQk9SVEVEIGVycm9yc1xuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cbiAqXG4gKiBOb3RlIHRoYXQgZHVyaW5nIHRoZSBpbml0aWFsIGhhbmRzaGFrZSBvbiB0aGUgd3JpdGUgc3RyZWFtIGFuIEFCT1JURUQgZXJyb3JcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcbiAqIG1lYW5zIGEgaGFuZHNoYWtlIGVycm9yIHNob3VsZCBiZSBjbGFzc2lmaWVkIHdpdGggaXNQZXJtYW5lbnRFcnJvciwgYWJvdmUuXG4gKi9cbi8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXG4gKiBhcmUgbm90IHRoZSBzYW1lIGFzIEhUVFAgc3RhdHVzIGNvZGVzLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXG4gKiAgICAgaXMgbm8gbWF0Y2guXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9tYXBDb2RlRnJvbVJwY0NvZGUoZSkge1xuICAgIGlmICh2b2lkIDAgPT09IGUpIFxuICAgIC8vIFRoaXMgc2hvdWxkbid0IG5vcm1hbGx5IGhhcHBlbiwgYnV0IGluIGNlcnRhaW4gZXJyb3IgY2FzZXMgKGxpa2UgdHJ5aW5nXG4gICAgLy8gdG8gc2VuZCBpbnZhbGlkIHByb3RvIG1lc3NhZ2VzKSB3ZSBtYXkgZ2V0IGFuIGVycm9yIHdpdGggbm8gR1JQQyBjb2RlLlxuICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJHUlBDIGVycm9yIGhhcyBubyAuY29kZVwiKSwgdi5VTktOT1dOO1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSB1ZS5PSzpcbiAgICAgICAgcmV0dXJuIHYuT0s7XG5cbiAgICAgIGNhc2UgdWUuQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gdi5DQU5DRUxMRUQ7XG5cbiAgICAgIGNhc2UgdWUuVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIHYuVU5LTk9XTjtcblxuICAgICAgY2FzZSB1ZS5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgcmV0dXJuIHYuREVBRExJTkVfRVhDRUVERUQ7XG5cbiAgICAgIGNhc2UgdWUuUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgICByZXR1cm4gdi5SRVNPVVJDRV9FWEhBVVNURUQ7XG5cbiAgICAgIGNhc2UgdWUuSU5URVJOQUw6XG4gICAgICAgIHJldHVybiB2LklOVEVSTkFMO1xuXG4gICAgICBjYXNlIHVlLlVOQVZBSUxBQkxFOlxuICAgICAgICByZXR1cm4gdi5VTkFWQUlMQUJMRTtcblxuICAgICAgY2FzZSB1ZS5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiB2LlVOQVVUSEVOVElDQVRFRDtcblxuICAgICAgY2FzZSB1ZS5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgICByZXR1cm4gdi5JTlZBTElEX0FSR1VNRU5UO1xuXG4gICAgICBjYXNlIHVlLk5PVF9GT1VORDpcbiAgICAgICAgcmV0dXJuIHYuTk9UX0ZPVU5EO1xuXG4gICAgICBjYXNlIHVlLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgICByZXR1cm4gdi5BTFJFQURZX0VYSVNUUztcblxuICAgICAgY2FzZSB1ZS5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgcmV0dXJuIHYuUEVSTUlTU0lPTl9ERU5JRUQ7XG5cbiAgICAgIGNhc2UgdWUuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAgICAgICAgcmV0dXJuIHYuRkFJTEVEX1BSRUNPTkRJVElPTjtcblxuICAgICAgY2FzZSB1ZS5BQk9SVEVEOlxuICAgICAgICByZXR1cm4gdi5BQk9SVEVEO1xuXG4gICAgICBjYXNlIHVlLk9VVF9PRl9SQU5HRTpcbiAgICAgICAgcmV0dXJuIHYuT1VUX09GX1JBTkdFO1xuXG4gICAgICBjYXNlIHVlLlVOSU1QTEVNRU5URUQ6XG4gICAgICAgIHJldHVybiB2LlVOSU1QTEVNRU5URUQ7XG5cbiAgICAgIGNhc2UgdWUuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gdi5EQVRBX0xPU1M7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKGNlID0gdWUgfHwgKHVlID0ge30pKVtjZS5PSyA9IDBdID0gXCJPS1wiLCBjZVtjZS5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxuY2VbY2UuVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIGNlW2NlLklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbmNlW2NlLkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIGNlW2NlLk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG5jZVtjZS5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCBjZVtjZS5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbmNlW2NlLlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIGNlW2NlLlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG5jZVtjZS5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgY2VbY2UuQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbmNlW2NlLk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIGNlW2NlLlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG5jZVtjZS5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgY2VbY2UuVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIGNlW2NlLkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE1hbmFnZXMgXCJ0ZXN0aW5nIGhvb2tzXCIsIGhvb2tzIGludG8gdGhlIGludGVybmFscyBvZiB0aGUgU0RLIHRvIHZlcmlmeVxuICogaW50ZXJuYWwgc3RhdGUgYW5kIGV2ZW50cyBkdXJpbmcgaW50ZWdyYXRpb24gdGVzdHMuIERvIG5vdCB1c2UgdGhpcyBjbGFzc1xuICogZXhjZXB0IGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICpcbiAqIFRoZXJlIGFyZSB0d28gd2F5cyB0byByZXRyaWV2ZSB0aGUgZ2xvYmFsIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzOlxuICogMS4gVGhlIGBpbnN0YW5jZWAgcHJvcGVydHksIHdoaWNoIHJldHVybnMgbnVsbCBpZiB0aGUgZ2xvYmFsIHNpbmdsZXRvblxuICogICAgICBpbnN0YW5jZSBoYXMgbm90IGJlZW4gY3JlYXRlZC4gVXNlIHRoaXMgcHJvcGVydHkgaWYgdGhlIGNhbGxlciBzaG91bGRcbiAqICAgICAgXCJkbyBub3RoaW5nXCIgaWYgdGhlcmUgYXJlIG5vIHRlc3RpbmcgaG9va3MgcmVnaXN0ZXJlZCwgc3VjaCBhcyB3aGVuXG4gKiAgICAgIGRlbGl2ZXJpbmcgYW4gZXZlbnQgdG8gbm90aWZ5IHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICogMi4gVGhlIGBnZXRPckNyZWF0ZUluc3RhbmNlKClgIG1ldGhvZCwgd2hpY2ggY3JlYXRlcyB0aGUgZ2xvYmFsIHNpbmdsZXRvblxuICogICAgICBpbnN0YW5jZSBpZiBpdCBoYXMgbm90IGJlZW4gY3JlYXRlZC4gVXNlIHRoaXMgbWV0aG9kIGlmIHRoZSBpbnN0YW5jZSBpc1xuICogICAgICBuZWVkZWQgdG8sIGZvciBleGFtcGxlLCByZWdpc3RlciBhIGNhbGxiYWNrLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBfX1BSSVZBVEVfVGVzdGluZ0hvb2tzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQ2FsbGJhY2tzID0gbmV3IE1hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MsIG9yIG51bGwgaWYgaXQgaGFzIG5vdCBiZWVuXG4gICAgICogaW5pdGlhbGl6ZWQuXG4gICAgICovICAgIHN0YXRpYyBnZXQgaW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MsIGNyZWF0aW5nIGl0IGlmIGlzIGhhcyBuZXZlclxuICAgICAqIGJlZW4gY3JlYXRlZCBiZWZvcmUuXG4gICAgICovICAgIHN0YXRpYyBnZXRPckNyZWF0ZUluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gbGUgJiYgKGxlID0gbmV3IF9fUFJJVkFURV9UZXN0aW5nSG9va3MpLCBsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgY2FsbGJhY2sgdG8gYmUgbm90aWZpZWQgd2hlbiBhbiBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoXG4gICAgICogb2NjdXJzIGluIHRoZSBXYXRjaCBsaXN0ZW4gc3RyZWFtLlxuICAgICAqXG4gICAgICogVGhlIHJlbGF0aXZlIG9yZGVyIGluIHdoaWNoIGNhbGxiYWNrcyBhcmUgbm90aWZpZWQgaXMgdW5zcGVjaWZpZWQ7IGRvIG5vdFxuICAgICAqIHJlbHkgb24gYW55IHBhcnRpY3VsYXIgb3JkZXJpbmcuIElmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgcmVnaXN0ZXJlZCBtdWx0aXBsZVxuICAgICAqIHRpbWVzIHRoZW4gaXQgd2lsbCBiZSBub3RpZmllZCBtdWx0aXBsZSB0aW1lcywgb25jZSBwZXIgcmVnaXN0cmF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBjYWxsYmFjayB0byBpbnZva2UgdXBvbiBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoLlxuICAgICAqXG4gICAgICogQHJldHVybiBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCB1bnJlZ2lzdGVycyB0aGUgZ2l2ZW4gY2FsbGJhY2s7IG9ubHlcbiAgICAgKiB0aGUgZmlyc3QgaW52b2NhdGlvbiBvZiB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gZG9lcyBhbnl0aGluZzsgYWxsIHN1YnNlcXVlbnRcbiAgICAgKiBpbnZvY2F0aW9ucyBkbyBub3RoaW5nLlxuICAgICAqLyAgICBvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFN5bWJvbCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5vbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQ2FsbGJhY2tzLnNldCh0LCBlKSwgKCkgPT4gdGhpcy5vbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQ2FsbGJhY2tzLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlcyBhbGwgY3VycmVudGx5LXJlZ2lzdGVyZWQgYG9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hgIGNhbGxiYWNrcy5cbiAgICAgKiBAcGFyYW0gaW5mbyBJbmZvcm1hdGlvbiBhYm91dCB0aGUgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC5cbiAgICAgKi8gICAgbm90aWZ5T25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaChlKSB7XG4gICAgICAgIHRoaXMub25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaENhbGxiYWNrcy5mb3JFYWNoKCh0ID0+IHQoZSkpKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgZ2xvYmFsIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBgVGVzdGluZ0hvb2tzYC4gKi8gbGV0IGxlID0gbnVsbDtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHRFbmNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGV4dEVuY29kZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RW5jb2Rlcjtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dERlY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgaGUgPSBuZXcgSW50ZWdlcihbIDQyOTQ5NjcyOTUsIDQyOTQ5NjcyOTUgXSwgMCk7XG5cbi8vIEhhc2ggYSBzdHJpbmcgdXNpbmcgbWQ1IGhhc2hpbmcgYWxnb3JpdGhtLlxuZnVuY3Rpb24gX19QUklWQVRFX2dldE1kNUhhc2hWYWx1ZShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdUZXh0RW5jb2RlcigpLmVuY29kZShlKSwgbiA9IG5ldyBNZDU7XG4gICAgcmV0dXJuIG4udXBkYXRlKHQpLCBuZXcgVWludDhBcnJheShuLmRpZ2VzdCgpKTtcbn1cblxuLy8gSW50ZXJwcmV0IHRoZSAxNiBieXRlcyBhcnJheSBhcyB0d28gNjQtYml0IHVuc2lnbmVkIGludGVnZXJzLCBlbmNvZGVkIHVzaW5nXG4vLyAy4oCZcyBjb21wbGVtZW50IHVzaW5nIGxpdHRsZSBlbmRpYW4uXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyhlKSB7XG4gICAgY29uc3QgdCA9IG5ldyBEYXRhVmlldyhlLmJ1ZmZlciksIG4gPSB0LmdldFVpbnQzMigwLCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgciA9IHQuZ2V0VWludDMyKDQsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCBpID0gdC5nZXRVaW50MzIoOCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHMgPSB0LmdldFVpbnQzMigxMiwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCk7XG4gICAgcmV0dXJuIFsgbmV3IEludGVnZXIoWyBuLCByIF0sIDApLCBuZXcgSW50ZWdlcihbIGksIHMgXSwgMCkgXTtcbn1cblxuY2xhc3MgQmxvb21GaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKHRoaXMuYml0bWFwID0gZSwgdGhpcy5wYWRkaW5nID0gdCwgdGhpcy5oYXNoQ291bnQgPSBuLCB0IDwgMCB8fCB0ID49IDgpIHRocm93IG5ldyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvcihgSW52YWxpZCBwYWRkaW5nOiAke3R9YCk7XG4gICAgICAgIGlmIChuIDwgMCkgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKGUubGVuZ3RoID4gMCAmJiAwID09PSB0aGlzLmhhc2hDb3VudCkgXG4gICAgICAgIC8vIE9ubHkgZW1wdHkgYmxvb20gZmlsdGVyIGNhbiBoYXZlIDAgaGFzaCBjb3VudC5cbiAgICAgICAgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoICYmIDAgIT09IHQpIFxuICAgICAgICAvLyBFbXB0eSBibG9vbSBmaWx0ZXIgc2hvdWxkIGhhdmUgMCBwYWRkaW5nLlxuICAgICAgICB0aHJvdyBuZXcgX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IoYEludmFsaWQgcGFkZGluZyB3aGVuIGJpdG1hcCBsZW5ndGggaXMgMDogJHt0fWApO1xuICAgICAgICB0aGlzLmRlID0gOCAqIGUubGVuZ3RoIC0gdCwgXG4gICAgICAgIC8vIFNldCB0aGUgYml0IGNvdW50IGluIEludGVnZXIgdG8gYXZvaWQgcmVwZXRpdGlvbiBpbiBtaWdodENvbnRhaW4oKS5cbiAgICAgICAgdGhpcy5BZSA9IEludGVnZXIuZnJvbU51bWJlcih0aGlzLmRlKTtcbiAgICB9XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBpdGggaGFzaCB2YWx1ZSBiYXNlZCBvbiB0aGUgaGFzaGVkIDY0Yml0IGludGVnZXJzLFxuICAgIC8vIGFuZCBjYWxjdWxhdGUgaXRzIGNvcnJlc3BvbmRpbmcgYml0IGluZGV4IGluIHRoZSBiaXRtYXAgdG8gYmUgY2hlY2tlZC5cbiAgICBSZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBoYXNoZWQgdmFsdWUgaChpKSA9IGgxICsgKGkgKiBoMikuXG4gICAgICAgIGxldCByID0gZS5hZGQodC5tdWx0aXBseShJbnRlZ2VyLmZyb21OdW1iZXIobikpKTtcbiAgICAgICAgLy8gV3JhcCBpZiBoYXNoIHZhbHVlIG92ZXJmbG93IDY0Yml0LlxuICAgICAgICAgICAgICAgIHJldHVybiAxID09PSByLmNvbXBhcmUoaGUpICYmIChyID0gbmV3IEludGVnZXIoWyByLmdldEJpdHMoMCksIHIuZ2V0Qml0cygxKSBdLCAwKSksIFxuICAgICAgICByLm1vZHVsbyh0aGlzLkFlKS50b051bWJlcigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gd2hldGhlciB0aGUgYml0IG9uIHRoZSBnaXZlbiBpbmRleCBpbiB0aGUgYml0bWFwIGlzIHNldCB0byAxLlxuICAgIFZlKGUpIHtcbiAgICAgICAgcmV0dXJuIDAgIT0gKHRoaXMuYml0bWFwW01hdGguZmxvb3IoZSAvIDgpXSAmIDEgPDwgZSAlIDgpO1xuICAgIH1cbiAgICBtaWdodENvbnRhaW4oZSkge1xuICAgICAgICAvLyBFbXB0eSBiaXRtYXAgc2hvdWxkIGFsd2F5cyByZXR1cm4gZmFsc2Ugb24gbWVtYmVyc2hpcCBjaGVjay5cbiAgICAgICAgaWYgKDAgPT09IHRoaXMuZGUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSksIFtuLCByXSA9IF9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzKHQpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMuaGFzaENvdW50OyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlJlKG4sIHIsIGUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLlZlKHQpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlIGJsb29tIGZpbHRlciBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LiAqLyAgICBzdGF0aWMgY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IGUgJSA4ID09IDAgPyAwIDogOCAtIGUgJSA4LCBpID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5jZWlsKGUgLyA4KSksIHMgPSBuZXcgQmxvb21GaWx0ZXIoaSwgciwgdCk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4gcy5pbnNlcnQoZSkpKSwgcztcbiAgICB9XG4gICAgaW5zZXJ0KGUpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuZGUpIHJldHVybjtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSksIFtuLCByXSA9IF9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzKHQpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMuaGFzaENvdW50OyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlJlKG4sIHIsIGUpO1xuICAgICAgICAgICAgdGhpcy5tZSh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBNYXRoLmZsb29yKGUgLyA4KSwgbiA9IGUgJSA4O1xuICAgICAgICB0aGlzLmJpdG1hcFt0XSB8PSAxIDw8IG47XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKSwgdGhpcy5uYW1lID0gXCJCbG9vbUZpbHRlckVycm9yXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBldmVudCBmcm9tIHRoZSBSZW1vdGVTdG9yZS4gSXQgaXMgc3BsaXQgaW50byB0YXJnZXRDaGFuZ2VzIChjaGFuZ2VzIHRvIHRoZVxuICogc3RhdGUgb3IgdGhlIHNldCBvZiBkb2N1bWVudHMgaW4gb3VyIHdhdGNoZWQgdGFyZ2V0cykgYW5kIGRvY3VtZW50VXBkYXRlc1xuICogKGNoYW5nZXMgdG8gdGhlIGFjdHVhbCBkb2N1bWVudHMpLlxuICovIGNsYXNzIFJlbW90ZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgc25hcHNob3QgdmVyc2lvbiB0aGlzIGV2ZW50IGJyaW5ncyB1cyB1cCB0bywgb3IgTUlOIGlmIG5vdCBzZXQuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBtYXAgZnJvbSB0YXJnZXQgdG8gY2hhbmdlcyB0byB0aGUgdGFyZ2V0LiBTZWUgVGFyZ2V0Q2hhbmdlLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHRhcmdldHMgdGhhdCBpcyBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQsIGFuZCB0aGUgcHVycG9zZSBmb3JcbiAgICAgKiByZS1saXN0ZW5pbmcuIExpc3RlbnMgZm9yIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHJlLWVzdGFibGlzaGVkIHdpdGhvdXRcbiAgICAgKiByZXN1bWUgdG9rZW5zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50cyBoYXZlIGNoYW5nZWQgb3IgYmVlbiBkZWxldGVkLCBhbG9uZyB3aXRoIHRoZVxuICAgICAqIGRvYydzIG5ldyB2YWx1ZXMgKGlmIG5vdCBkZWxldGVkKS5cbiAgICAgKi9cbiAgICByLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudCB1cGRhdGVzIGFyZSBkdWUgb25seSB0byBsaW1ibyByZXNvbHV0aW9uIHRhcmdldHMuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGUsIHRoaXMudGFyZ2V0Q2hhbmdlcyA9IHQsIHRoaXMudGFyZ2V0TWlzbWF0Y2hlcyA9IG4sIHRoaXMuZG9jdW1lbnRVcGRhdGVzID0gciwgXG4gICAgICAgIHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhBQ0s6IFZpZXdzIHJlcXVpcmUgUmVtb3RlRXZlbnRzIGluIG9yZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzXG4gICAgICogQ1VSUkVOVCwgYnV0IHNlY29uZGFyeSB0YWJzIGRvbid0IHJlY2VpdmUgcmVtb3RlIGV2ZW50cy4gU28gdGhpcyBtZXRob2QgaXNcbiAgICAgKiB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXBwbHkgYVxuICAgICAqIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcsIGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50IHRhYi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiByLnNldChlLCBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKGUsIHQsIG4pKSwgXG4gICAgICAgIG5ldyBSZW1vdGVFdmVudChTbmFwc2hvdFZlcnNpb24ubWluKCksIHIsIG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcbiAqIG1hcmtlZCBDVVJSRU5ULlxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cbiAqLyBjbGFzcyBUYXJnZXRDaGFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHIsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IGUsIHRoaXMuY3VycmVudCA9IHQsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gciwgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0Q2hhbmdlKG4sIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYW5nZWQgZG9jdW1lbnQgYW5kIGEgbGlzdCBvZiB0YXJnZXQgaWRzIHRvIHdoaWNoIHRoaXMgY2hhbmdlXG4gKiBhcHBsaWVzLlxuICpcbiAqIElmIGRvY3VtZW50IGhhcyBiZWVuIGRlbGV0ZWQgTm9Eb2N1bWVudCB3aWxsIGJlIHByb3ZpZGVkLlxuICovIGNsYXNzIF9fUFJJVkFURV9Eb2N1bWVudFdhdGNoQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgY2hhbmdlLiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCB3ZW50IG91dCBvZiB2aWV3IHdpdGhvdXQgdGhlIHNlcnZlciBzZW5kaW5nIGEgbmV3IGRvY3VtZW50LlxuICAgICAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy5mZSA9IGUsIHRoaXMucmVtb3ZlZFRhcmdldElkcyA9IHQsIHRoaXMua2V5ID0gbiwgdGhpcy5nZSA9IHI7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnBlID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9XYXRjaFRhcmdldENoYW5nZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFdoYXQga2luZCBvZiBjaGFuZ2Ugb2NjdXJyZWQgdG8gdGhlIHdhdGNoIHRhcmdldC4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHRhcmdldCBJRHMgdGhhdCB3ZXJlIGFkZGVkL3JlbW92ZWQvc2V0LiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgbiA9IEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovICwgciA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGUsIHRoaXMudGFyZ2V0SWRzID0gdCwgdGhpcy5yZXN1bWVUb2tlbiA9IG4sIHRoaXMuY2F1c2UgPSByO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovIGNsYXNzIF9fUFJJVkFURV9UYXJnZXRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIChhZGRzIG9yIHJlbW92ZXMpIHRoYXQgd2UgYXJlIHdhaXRpbmcgb24uXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55ZSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50IGNoYW5nZXMgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSBjaGFuZ2VzIGFyZSBjb250aW51b3VzbHkgdXBkYXRlZCBhcyB3ZSByZWNlaXZlIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICAgICAqIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzIGFnYWluc3QgdGhlIGxhc3QgaXNzdWVkIHNuYXBzaG90LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53ZSA9IF9fUFJJVkFURV9zbmFwc2hvdENoYW5nZXNNYXAoKSwgXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXG4gICAgICAgIHRoaXMuU2UgPSBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HLCB0aGlzLmJlID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5EZSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iZTtcbiAgICB9XG4gICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi8gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5TZTtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovICAgIGdldCB2ZSgpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMueWU7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi8gICAgZ2V0IENlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5EZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICBGZShlKSB7XG4gICAgICAgIGUuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodGhpcy5EZSA9ICEwLCB0aGlzLlNlID0gZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAgTWUoKSB7XG4gICAgICAgIGxldCBlID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHQgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gdGhpcy53ZS5mb3JFYWNoKCgociwgaSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIHQgPSB0LmFkZChyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmYWlsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgbmV3IFRhcmdldENoYW5nZSh0aGlzLlNlLCB0aGlzLmJlLCBlLCB0LCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFuZCBzZXRzIGBoYXNQZW5kaW5nQ2hhbmdlc2AgdG8gZmFsc2UuXG4gICAgICovICAgIHhlKCkge1xuICAgICAgICB0aGlzLkRlID0gITEsIHRoaXMud2UgPSBfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwKCk7XG4gICAgfVxuICAgIE9lKGUsIHQpIHtcbiAgICAgICAgdGhpcy5EZSA9ICEwLCB0aGlzLndlID0gdGhpcy53ZS5pbnNlcnQoZSwgdCk7XG4gICAgfVxuICAgIE5lKGUpIHtcbiAgICAgICAgdGhpcy5EZSA9ICEwLCB0aGlzLndlID0gdGhpcy53ZS5yZW1vdmUoZSk7XG4gICAgfVxuICAgIEJlKCkge1xuICAgICAgICB0aGlzLnllICs9IDE7XG4gICAgfVxuICAgIExlKCkge1xuICAgICAgICB0aGlzLnllIC09IDE7XG4gICAgfVxuICAgIGtlKCkge1xuICAgICAgICB0aGlzLkRlID0gITAsIHRoaXMuYmUgPSAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBoZWxwZXIgY2xhc3MgdG8gYWNjdW11bGF0ZSB3YXRjaCBjaGFuZ2VzIGludG8gYSBSZW1vdGVFdmVudC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1dhdGNoQ2hhbmdlQWdncmVnYXRvciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnFlID0gZSwgXG4gICAgICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2YgYWxsIHRyYWNrZWQgdGFyZ2V0cy4gKi9cbiAgICAgICAgdGhpcy5RZSA9IG5ldyBNYXAsIFxuICAgICAgICAvKiogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50cyB0byB1cGRhdGUgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LiAqL1xuICAgICAgICB0aGlzLktlID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBcbiAgICAgICAgLyoqIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXlzIHRvIHRoZWlyIHNldCBvZiB0YXJnZXQgSURzLiAqL1xuICAgICAgICB0aGlzLiRlID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwKCksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXAgb2YgdGFyZ2V0cyB3aXRoIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy4gVGhlc2UgdGFyZ2V0cyBhcmVcbiAgICAgICAgICoga25vd24gdG8gYmUgaW5jb25zaXN0ZW50IGFuZCB0aGVpciBsaXN0ZW5zIG5lZWRzIHRvIGJlIHJlLWVzdGFibGlzaGVkIGJ5XG4gICAgICAgICAqIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5VZSA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICovICAgIFdlKGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZmUpIGUuZ2UgJiYgZS5nZS5pc0ZvdW5kRG9jdW1lbnQoKSA/IHRoaXMuR2UodCwgZS5nZSkgOiB0aGlzLnplKHQsIGUua2V5LCBlLmdlKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUucmVtb3ZlZFRhcmdldElkcykgdGhpcy56ZSh0LCBlLmtleSwgZS5nZSk7XG4gICAgfVxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqLyAgICBqZShlKSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldChlLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5IZSh0KTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5KZSh0KSAmJiBuLkZlKGUucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uTGUoKSwgbi52ZSB8fCBcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZnJlc2hseSBhZGRlZCB0YXJnZXQsIHNvIHdlIG5lZWQgdG8gcmVzZXQgYW55IHN0YXRlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBoYWQgcHJldmlvdXNseS4gVGhpcyBjYW4gaGFwcGVuIGUuZy4gd2hlbiByZW1vdmUgYW5kIGFkZFxuICAgICAgICAgICAgICAgIC8vIGJhY2sgYSB0YXJnZXQgZm9yIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICBuLnhlKCksIG4uRmUoZS5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHJlbW92ZWQgdGFyZ2V0cyB0byB3ZSBjYW4gcG9zdC1maWx0ZXIgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSB0YXJnZXQgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uTGUoKSwgbi52ZSB8fCB0aGlzLnJlbW92ZVRhcmdldCh0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLkplKHQpICYmIChuLmtlKCksIG4uRmUoZS5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLkplKHQpICYmIChcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cbiAgICAgICAgICAgICAgICB0aGlzLlllKHQpLCBuLkZlKGUucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGZhaWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGFsbCB0YXJnZXRJZHMgdGhhdCB0aGUgd2F0Y2ggY2hhbmdlIGFwcGxpZXMgdG86IGVpdGhlciB0aGVcbiAgICAgKiB0YXJnZXRJZHMgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGNoYW5nZSBvciB0aGUgdGFyZ2V0SWRzIG9mIGFsbCBjdXJyZW50bHlcbiAgICAgKiBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIGUudGFyZ2V0SWRzLmxlbmd0aCA+IDAgPyBlLnRhcmdldElkcy5mb3JFYWNoKHQpIDogdGhpcy5RZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5KZShuKSAmJiB0KG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZXhpc3RlbmNlIGZpbHRlcnMgYW5kIHN5bnRoZXNpemVzIGRlbGV0ZXMgZm9yIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAqIFRhcmdldHMgdGhhdCBhcmUgaW52YWxpZGF0ZWQgYnkgZmlsdGVyIG1pc21hdGNoZXMgYXJlIGFkZGVkIHRvXG4gICAgICogYHBlbmRpbmdUYXJnZXRSZXNldHNgLlxuICAgICAqLyAgICBaZShlKSB7XG4gICAgICAgIHZhciB0LCBuO1xuICAgICAgICBjb25zdCByID0gZS50YXJnZXRJZCwgaSA9IGUucGUuY291bnQsIHMgPSB0aGlzLlhlKHIpO1xuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgY29uc3QgbyA9IHMudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KG8pKSBpZiAoMCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBEb2N1bWVudEtleShvLnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuemUociwgZSwgTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQoZSwgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgICAgICB9IGVsc2UgX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gaSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmV0KHIpO1xuICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guIE1hcmsgdGhlIGRvY3VtZW50cyBhcyBiZWluZyBpbiBsaW1ibywgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmFpc2UgYSBzbmFwc2hvdCB3aXRoIGBpc0Zyb21DYWNoZTp0cnVlYC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgIT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgYmxvb20gZmlsdGVyIHRvIGlkZW50aWZ5IGFuZCBtYXJrIHJlbW92ZWQgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy50dChlLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovICE9PSBpLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYmxvb20gZmlsdGVyIGFwcGxpY2F0aW9uIGZhaWxzLCB3ZSByZXNldCB0aGUgbWFwcGluZyBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXIgcmUtcnVuIG9mIHRoZSBxdWVyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuWWUocik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gMiAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLkZhbHNlUG9zaXRpdmUgKi8gPT09IGkuc3RhdHVzID8gXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbVwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbSAqLyA6IFwiVGFyZ2V0UHVycG9zZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoXCIgLyogVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCAqLztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVWUgPSB0aGlzLlVlLmluc2VydChyLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBudWxsID09PSAodCA9IF9fUFJJVkFURV9UZXN0aW5nSG9va3MuaW5zdGFuY2UpIHx8IHZvaWQgMCA9PT0gdCB8fCB0Lm5vdGlmeU9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2goZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoSW5mb0ZvclRlc3RpbmdIb29rcyhlLCB0LCBuLCByKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSwgcywgbywgXywgYSwgdTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxDYWNoZUNvdW50OiBuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0ZW5jZUZpbHRlckNvdW50OiByLmNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBsID0gci51bmNoYW5nZWROYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGwgJiYgKGMuYmxvb21GaWx0ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGllZDogMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi8gPT09IGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaENvdW50OiBudWxsICE9PSAoaSA9IG51bGwgPT0gbCA/IHZvaWQgMCA6IGwuaGFzaENvdW50KSAmJiB2b2lkIDAgIT09IGkgPyBpIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRtYXBMZW5ndGg6IG51bGwgIT09IChfID0gbnVsbCA9PT0gKG8gPSBudWxsID09PSAocyA9IG51bGwgPT0gbCA/IHZvaWQgMCA6IGwuYml0cykgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5iaXRtYXApIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8ubGVuZ3RoKSAmJiB2b2lkIDAgIT09IF8gPyBfIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBudWxsICE9PSAodSA9IG51bGwgPT09IChhID0gbnVsbCA9PSBsID8gdm9pZCAwIDogbC5iaXRzKSB8fCB2b2lkIDAgPT09IGEgPyB2b2lkIDAgOiBhLnBhZGRpbmcpICYmIHZvaWQgMCAhPT0gdSA/IHUgOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0ICYmIChjLmJsb29tRmlsdGVyLm1pZ2h0Q29udGFpbiA9IHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChpLnN0YXR1cywgbnVsbCAhPT0gKG4gPSBpLm50KSAmJiB2b2lkIDAgIT09IG4gPyBuIDogbnVsbCwgcywgZS5wZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSBibG9vbSBmaWx0ZXIgdG8gcmVtb3ZlIHRoZSBkZWxldGVkIGRvY3VtZW50cywgYW5kIHJldHVybiB0aGVcbiAgICAgKiBhcHBsaWNhdGlvbiBzdGF0dXMuXG4gICAgICovICAgIHR0KGUsIHQpIHtcbiAgICAgICAgY29uc3Qge3VuY2hhbmdlZE5hbWVzOiBuLCBjb3VudDogcn0gPSBlLnBlO1xuICAgICAgICBpZiAoIW4gfHwgIW4uYml0cykgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogMVxuIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLyAgICAgICAgfTtcbiAgICAgICAgY29uc3Qge2JpdHM6IHtiaXRtYXA6IGkgPSBcIlwiLCBwYWRkaW5nOiBzID0gMH0sIGhhc2hDb3VudDogbyA9IDB9ID0gbjtcbiAgICAgICAgbGV0IF8sIGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBfID0gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoaSkudG9VaW50OEFycmF5KCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yKSByZXR1cm4gX19QUklWQVRFX2xvZ1dhcm4oXCJEZWNvZGluZyB0aGUgYmFzZTY0IGJsb29tIGZpbHRlciBpbiBleGlzdGVuY2UgZmlsdGVyIGZhaWxlZCAoXCIgKyBlLm1lc3NhZ2UgKyBcIik7IGlnbm9yaW5nIHRoZSBibG9vbSBmaWx0ZXIgYW5kIGZhbGxpbmcgYmFjayB0byBmdWxsIHJlLXF1ZXJ5LlwiKSwgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAxXG4gLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5Ta2lwcGVkICovICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEJsb29tRmlsdGVyIHRocm93cyBlcnJvciBpZiB0aGUgaW5wdXRzIGFyZSBpbnZhbGlkLlxuICAgICAgICAgICAgYSA9IG5ldyBCbG9vbUZpbHRlcihfLCBzLCBvKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciA/IFwiQmxvb21GaWx0ZXIgZXJyb3I6IFwiIDogXCJBcHBseWluZyBibG9vbSBmaWx0ZXIgZmFpbGVkOiBcIiwgZSksIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0YXR1czogMVxuIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLyAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX19QUklWQVRFX2Jsb29tRmlsdGVyTWlnaHRDb250YWluID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5xZS5ydCgpO1xuICAgICAgICAgICAgcmV0dXJuIGEubWlnaHRDb250YWluKGBwcm9qZWN0cy8ke3QucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0LmRhdGFiYXNlfS9kb2N1bWVudHMvJHtlfWApO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoMCA9PT0gYS5kZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogMVxuIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLyAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogciA9PT0gdCAtIHRoaXMuaXQoZS50YXJnZXRJZCwgX19QUklWQVRFX2Jsb29tRmlsdGVyTWlnaHRDb250YWluKSA/IDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovIDogMiAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLkZhbHNlUG9zaXRpdmUgKi8gLFxuICAgICAgICAgICAgbnQ6IF9fUFJJVkFURV9ibG9vbUZpbHRlck1pZ2h0Q29udGFpblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgb3V0IHJlbW92ZWQgZG9jdW1lbnRzIGJhc2VkIG9uIGJsb29tIGZpbHRlciBtZW1iZXJzaGlwIHJlc3VsdCBhbmRcbiAgICAgKiByZXR1cm4gbnVtYmVyIG9mIGRvY3VtZW50cyByZW1vdmVkLlxuICAgICAqLyAgICBpdChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnFlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSk7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0KG4ucGF0aC5jYW5vbmljYWxTdHJpbmcoKSkgfHwgKHRoaXMuemUoZSwgbiwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCksIHIrKyk7XG4gICAgICAgIH0pKSwgcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBzdGF0ZSBpbnRvIGEgcmVtb3RlIGV2ZW50IGF0IHRoZVxuICAgICAqIHByb3ZpZGVkIHNuYXBzaG90IHZlcnNpb24uIFJlc2V0cyB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAqLyAgICBzdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLlFlLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5YZShyKTtcbiAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4uY3VycmVudCAmJiBfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldChpLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgcXVlcmllcyBmb3IgZG9jdW1lbnQgdGhhdCBkb24ndCBleGlzdCBjYW4gcHJvZHVjZSBhbiBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgc2V0LiBUbyB1cGRhdGUgb3VyIGxvY2FsIGNhY2hlLCB3ZSBzeW50aGVzaXplIGEgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGlmIHdlIGhhdmUgbm90IHByZXZpb3VzbHkgcmVjZWl2ZWQgdGhlIGRvY3VtZW50LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBsaW1ibyBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIHJlbW92aW5nIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gbGltYm9Eb2N1bWVudFJlZnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWRlYWxseSB3ZSB3b3VsZCBoYXZlIGFuIGV4cGxpY2l0IGxvb2t1cCB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCByZXN1bHRpbmcgaW4gYW4gZXhwbGljaXQgZGVsZXRlIG1lc3NhZ2UgYW5kIHdlIGNvdWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGlzIHNwZWNpYWwgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgRG9jdW1lbnRLZXkoaS50YXJnZXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHRoaXMuS2UuZ2V0KHQpIHx8IHRoaXMub3QociwgdCkgfHwgdGhpcy56ZShyLCB0LCBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudCh0LCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG4uQ2UgJiYgKHQuc2V0KHIsIG4uTWUoKSksIG4ueGUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xuICAgICAgICAvLyBjbGllbnQuXG4gICAgICAgICAgICAgICAgdGhpcy4kZS5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHIgPSAhMDtcbiAgICAgICAgICAgIHQuZm9yRWFjaFdoaWxlKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5YZShlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXQgfHwgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gPT09IHQucHVycG9zZSB8fCAociA9ICExLCBcbiAgICAgICAgICAgICAgICAhMSk7XG4gICAgICAgICAgICB9KSksIHIgJiYgKG4gPSBuLmFkZChlKSk7XG4gICAgICAgIH0pKSwgdGhpcy5LZS5mb3JFYWNoKCgodCwgbikgPT4gbi5zZXRSZWFkVGltZShlKSkpO1xuICAgICAgICBjb25zdCByID0gbmV3IFJlbW90ZUV2ZW50KGUsIHQsIHRoaXMuVWUsIHRoaXMuS2UsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5LZSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgdGhpcy4kZSA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCgpLCBcbiAgICAgICAgdGhpcy5VZSA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBHZShlLCB0KSB7XG4gICAgICAgIGlmICghdGhpcy5KZShlKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vdChlLCB0LmtleSkgPyAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi87XG4gICAgICAgIHRoaXMuSGUoZSkuT2UodC5rZXksIG4pLCB0aGlzLktlID0gdGhpcy5LZS5pbnNlcnQodC5rZXksIHQpLCB0aGlzLiRlID0gdGhpcy4kZS5pbnNlcnQodC5rZXksIHRoaXMuX3QodC5rZXkpLmFkZChlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIHplKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLkplKGUpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLkhlKGUpO1xuICAgICAgICB0aGlzLm90KGUsIHQpID8gci5PZSh0LCAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICByLk5lKHQpLCB0aGlzLiRlID0gdGhpcy4kZS5pbnNlcnQodCwgdGhpcy5fdCh0KS5kZWxldGUoZSkpLCBuICYmICh0aGlzLktlID0gdGhpcy5LZS5pbnNlcnQodCwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLlFlLmRlbGV0ZShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgZXQoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5IZShlKS5NZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5xZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUpLnNpemUgKyB0LmFkZGVkRG9jdW1lbnRzLnNpemUgLSB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaCBiZWZvcmUgd2UgY2FuIGNvbnNpZGVyIHRoZVxuICAgICAqIHNlcnZlciB0byBiZSAnaW4tc3luYycgd2l0aCB0aGUgY2xpZW50J3MgYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIEJlKGUpIHtcbiAgICAgICAgdGhpcy5IZShlKS5CZSgpO1xuICAgIH1cbiAgICBIZShlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5RZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IF9fUFJJVkFURV9UYXJnZXRTdGF0ZSwgdGhpcy5RZS5zZXQoZSwgdCkpLCB0O1xuICAgIH1cbiAgICBfdChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy4kZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIHRoaXMuJGUgPSB0aGlzLiRlLmluc2VydChlLCB0KSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICBKZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBudWxsICE9PSB0aGlzLlhlKGUpO1xuICAgICAgICByZXR1cm4gdCB8fCBfX1BSSVZBVEVfbG9nRGVidWcoXCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3JcIiwgXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIiwgZSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICBYZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLlFlLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHQgJiYgdC52ZSA/IG51bGwgOiB0aGlzLnFlLnV0KGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0IHRvIGl0cyBpbml0aWFsIHN0YXRlIChlLmcuIHNldHNcbiAgICAgKiAnY3VycmVudCcgdG8gZmFsc2UsIGNsZWFycyB0aGUgcmVzdW1lIHRva2VuIGFuZCByZW1vdmVzIGl0cyB0YXJnZXQgbWFwcGluZ1xuICAgICAqIGZyb20gYWxsIGRvY3VtZW50cykuXG4gICAgICovICAgIFllKGUpIHtcbiAgICAgICAgdGhpcy5RZS5zZXQoZSwgbmV3IF9fUFJJVkFURV9UYXJnZXRTdGF0ZSk7XG4gICAgICAgIHRoaXMucWUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuemUoZSwgdCwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICBvdChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSkuaGFzKHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwKCkge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwKCkge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xufVxuXG5jb25zdCBQZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgZSA9IHtcbiAgICAgICAgYXNjOiBcIkFTQ0VORElOR1wiLFxuICAgICAgICBkZXNjOiBcIkRFU0NFTkRJTkdcIlxuICAgIH07XG4gICAgcmV0dXJuIGU7XG59KSgpLCBJZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgZSA9IHtcbiAgICAgICAgXCI8XCI6IFwiTEVTU19USEFOXCIsXG4gICAgICAgIFwiPD1cIjogXCJMRVNTX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI+XCI6IFwiR1JFQVRFUl9USEFOXCIsXG4gICAgICAgIFwiPj1cIjogXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI9PVwiOiBcIkVRVUFMXCIsXG4gICAgICAgIFwiIT1cIjogXCJOT1RfRVFVQUxcIixcbiAgICAgICAgXCJhcnJheS1jb250YWluc1wiOiBcIkFSUkFZX0NPTlRBSU5TXCIsXG4gICAgICAgIGluOiBcIklOXCIsXG4gICAgICAgIFwibm90LWluXCI6IFwiTk9UX0lOXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnMtYW55XCI6IFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCJcbiAgICB9O1xuICAgIHJldHVybiBlO1xufSkoKSwgVGUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIGFuZDogXCJBTkRcIixcbiAgICAgICAgb3I6IFwiT1JcIlxuICAgIH07XG4gICAgcmV0dXJuIGU7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgSnNvblByb3RvU2VyaWFsaXplciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLnVzZVByb3RvM0pzb24gPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIChvciBudWxsKSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG9cbiAqIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXG4gKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwibnVtYmVyXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxuICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBJbnQzMlZhbHVlIG11c3QgYmUuIEJ1dCBHUlBDIGFjdHVhbGx5XG4gKiBleHBlY3RzIGEgeyB2YWx1ZTogPG51bWJlcj4gfSBzdHJ1Y3QuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0ludDMyUHJvdG8oZSwgdCkge1xuICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gfHwgX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKHQpID8gdCA6IHtcbiAgICAgICAgdmFsdWU6IHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBudW1iZXIgKG9yIG51bGwpIGZyb20gYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqL1xuZnVuY3Rpb24gdG9UaW1lc3RhbXAoZSwgdCkge1xuICAgIGlmIChlLnVzZVByb3RvM0pzb24pIHtcbiAgICAgICAgcmV0dXJuIGAke25ldyBEYXRlKDFlMyAqIHQuc2Vjb25kcykudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLywgXCJcIikucmVwbGFjZShcIlpcIiwgXCJcIil9LiR7KFwiMDAwMDAwMDAwXCIgKyB0Lm5hbm9zZWNvbmRzKS5zbGljZSgtOSl9WmA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IFwiXCIgKyB0LnNlY29uZHMsXG4gICAgICAgIG5hbm9zOiB0Lm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGJ5dGVzIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW4gYSBwcm90by5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9CeXRlcyhlLCB0KSB7XG4gICAgcmV0dXJuIGUudXNlUHJvdG8zSnNvbiA/IHQudG9CYXNlNjQoKSA6IHQudG9VaW50OEFycmF5KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEJ5dGVTdHJpbmcgYmFzZWQgb24gdGhlIHByb3RvIHN0cmluZyB2YWx1ZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9WZXJzaW9uKGUsIHQpIHtcbiAgICByZXR1cm4gdG9UaW1lc3RhbXAoZSwgdC50b1RpbWVzdGFtcCgpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21WZXJzaW9uKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoISFlKSwgU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAoZnVuY3Rpb24gZnJvbVRpbWVzdGFtcChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpO1xuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcCh0LnNlY29uZHMsIHQubmFub3MpO1xuICAgIH0oZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZnVsbHlRdWFsaWZpZWRQcmVmaXhQYXRoKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoWyBcInByb2plY3RzXCIsIGUucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCBlLmRhdGFiYXNlIF0pO1xuICAgIH0oZSkuY2hpbGQoXCJkb2N1bWVudHNcIikuY2hpbGQodCkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUmVzb3VyY2VOYW1lKGUpIHtcbiAgICBjb25zdCB0ID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KF9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lKHQpKSwgdDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvTmFtZShlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV90b1Jlc291cmNlTmFtZShlLmRhdGFiYXNlSWQsIHQucGF0aCk7XG59XG5cbmZ1bmN0aW9uIGZyb21OYW1lKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Zyb21SZXNvdXJjZU5hbWUodCk7XG4gICAgaWYgKG4uZ2V0KDEpICE9PSBlLmRhdGFiYXNlSWQucHJvamVjdElkKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBwcm9qZWN0OiBcIiArIG4uZ2V0KDEpICsgXCIgdnMgXCIgKyBlLmRhdGFiYXNlSWQucHJvamVjdElkKTtcbiAgICBpZiAobi5nZXQoMykgIT09IGUuZGF0YWJhc2VJZC5kYXRhYmFzZSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2U6IFwiICsgbi5nZXQoMykgKyBcIiB2cyBcIiArIGUuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShfX1BSSVZBVEVfZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUobikpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9RdWVyeVBhdGgoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZS5kYXRhYmFzZUlkLCB0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21RdWVyeVBhdGgoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbVJlc291cmNlTmFtZShlKTtcbiAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXG4gICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcbiAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXG4gICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIDQgPT09IHQubGVuZ3RoID8gUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpIDogX19QUklWQVRFX2V4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQoZSkge1xuICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKFsgXCJwcm9qZWN0c1wiLCBlLmRhdGFiYXNlSWQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCBlLmRhdGFiYXNlSWQuZGF0YWJhc2UgXSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUubGVuZ3RoID4gNCAmJiBcImRvY3VtZW50c1wiID09PSBlLmdldCg0KSksIGUucG9wRmlyc3QoNSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgRG9jdW1lbnQgcHJvdG8gZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LCBuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogX19QUklWQVRFX3RvTmFtZShlLCB0KSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBmcm9tTmFtZShlLCB0Lm5hbWUpLCBpID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQudXBkYXRlVGltZSksIHMgPSB0LmNyZWF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5jcmVhdGVUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgbyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IHQuZmllbGRzXG4gICAgICAgIH1cbiAgICB9KSwgXyA9IE11dGFibGVEb2N1bWVudC5uZXdGb3VuZERvY3VtZW50KHIsIGksIHMsIG8pO1xuICAgIHJldHVybiBuICYmIF8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyBfLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogXztcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21CYXRjaEdldERvY3VtZW50c1Jlc3BvbnNlKGUsIHQpIHtcbiAgICByZXR1cm4gXCJmb3VuZFwiIGluIHQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZvdW5kKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoISF0LmZvdW5kKSwgdC5mb3VuZC5uYW1lLCB0LmZvdW5kLnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IG4gPSBmcm9tTmFtZShlLCB0LmZvdW5kLm5hbWUpLCByID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQuZm91bmQudXBkYXRlVGltZSksIGkgPSB0LmZvdW5kLmNyZWF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5mb3VuZC5jcmVhdGVUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgcyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogdC5mb3VuZC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBNdXRhYmxlRG9jdW1lbnQubmV3Rm91bmREb2N1bWVudChuLCByLCBpLCBzKTtcbiAgICB9KGUsIHQpIDogXCJtaXNzaW5nXCIgaW4gdCA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tTWlzc2luZyhlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhdC5taXNzaW5nKSwgX19QUklWQVRFX2hhcmRBc3NlcnQoISF0LnJlYWRUaW1lKTtcbiAgICAgICAgY29uc3QgbiA9IGZyb21OYW1lKGUsIHQubWlzc2luZyksIHIgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5yZWFkVGltZSk7XG4gICAgICAgIHJldHVybiBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChuLCByKTtcbiAgICB9KGUsIHQpIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdhdGNoQ2hhbmdlKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoXCJ0YXJnZXRDaGFuZ2VcIiBpbiB0KSB7XG4gICAgICAgIHQudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcbiAgICAgICAgLy8gaWYgdW5zZXRcbiAgICAgICAgY29uc3QgciA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZShlKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJOT19DSEFOR0VcIiA9PT0gZSA/IDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6IFwiQUREXCIgPT09IGUgPyAxIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSBlID8gMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOiBcIkNVUlJFTlRcIiA9PT0gZSA/IDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDogXCJSRVNFVFwiID09PSBlID8gNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDogZmFpbCgpO1xuICAgICAgICB9KHQudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSB0LnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUJ5dGVzKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gPyAoX19QUklWQVRFX2hhcmRBc3NlcnQodm9pZCAwID09PSB0IHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpLCBcbiAgICAgICAgICAgIEJ5dGVTdHJpbmcuZnJvbUJhc2U2NFN0cmluZyh0IHx8IFwiXCIpKSA6IChfX1BSSVZBVEVfaGFyZEFzc2VydCh2b2lkIDAgPT09IHQgfHwgdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpLCBcbiAgICAgICAgICAgIEJ5dGVTdHJpbmcuZnJvbVVpbnQ4QXJyYXkodCB8fCBuZXcgVWludDhBcnJheSkpO1xuICAgICAgICB9KGUsIHQudGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKSwgbyA9IHQudGFyZ2V0Q2hhbmdlLmNhdXNlLCBfID0gbyAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVJwY1N0YXR1cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdm9pZCAwID09PSBlLmNvZGUgPyB2LlVOS05PV04gOiBfX1BSSVZBVEVfbWFwQ29kZUZyb21ScGNDb2RlKGUuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKHQsIGUubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgfShvKTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2UociwgaSwgcywgXyB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiB0KSB7XG4gICAgICAgIHQuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHIgPSB0LmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICByLmRvY3VtZW50LCByLmRvY3VtZW50Lm5hbWUsIHIuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9IGZyb21OYW1lKGUsIHIuZG9jdW1lbnQubmFtZSksIHMgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5kb2N1bWVudC51cGRhdGVUaW1lKSwgbyA9IHIuZG9jdW1lbnQuY3JlYXRlVGltZSA/IF9fUFJJVkFURV9mcm9tVmVyc2lvbihyLmRvY3VtZW50LmNyZWF0ZVRpbWUpIDogU25hcHNob3RWZXJzaW9uLm1pbigpLCBfID0gbmV3IE9iamVjdFZhbHVlKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiByLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgYSA9IE11dGFibGVEb2N1bWVudC5uZXdGb3VuZERvY3VtZW50KGksIHMsIG8sIF8pLCB1ID0gci50YXJnZXRJZHMgfHwgW10sIGMgPSByLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UodSwgYywgYS5rZXksIGEpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudERlbGV0ZVwiIGluIHQpIHtcbiAgICAgICAgdC5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgY29uc3QgciA9IHQuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIHIuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50KSwgcyA9IHIucmVhZFRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5yZWFkVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG8gPSBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChpLCBzKSwgXyA9IHIucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgXywgby5rZXksIG8pO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudFJlbW92ZVwiIGluIHQpIHtcbiAgICAgICAgdC5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgY29uc3QgciA9IHQuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIHIuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50KSwgcyA9IHIucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgcywgaSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEoXCJmaWx0ZXJcIiBpbiB0KSkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAge1xuICAgICAgICAgICAgdC5maWx0ZXI7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5maWx0ZXI7XG4gICAgICAgICAgICBlLnRhcmdldElkO1xuICAgICAgICAgICAgY29uc3Qge2NvdW50OiByID0gMCwgdW5jaGFuZ2VkTmFtZXM6IGl9ID0gZSwgcyA9IG5ldyBFeGlzdGVuY2VGaWx0ZXIociwgaSksIG8gPSBlLnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKG8sIHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiB0b011dGF0aW9uKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAodCBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXRNdXRhdGlvbikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBfX1BSSVZBVEVfdG9NdXRhdGlvbkRvY3VtZW50KGUsIHQua2V5LCB0LnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIGRlbGV0ZTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSlcbiAgICB9OyBlbHNlIGlmICh0IGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LmtleSwgdC5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogX19QUklWQVRFX3RvRG9jdW1lbnRNYXNrKHQuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKSkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgbiA9IHtcbiAgICAgICAgICAgIHZlcmlmeTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHQuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IHQuZmllbGRUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWVsZFRyYW5zZm9ybShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogXCJSRVFVRVNUX1RJTUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24pIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4uVGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH0oMCwgZSkpKSksIHQucHJlY29uZGl0aW9uLmlzTm9uZSB8fCAobi5jdXJyZW50RG9jdW1lbnQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9QcmVjb25kaXRpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBfX1BSSVZBVEVfdG9WZXJzaW9uKGUsIHQudXBkYXRlVGltZSlcbiAgICAgICAgfSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyB7XG4gICAgICAgICAgICBleGlzdHM6IHQuZXhpc3RzXG4gICAgICAgIH0gOiBmYWlsKCk7XG4gICAgfShlLCB0LnByZWNvbmRpdGlvbikpLCBuO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5jdXJyZW50RG9jdW1lbnQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVByZWNvbmRpdGlvbihlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUudXBkYXRlVGltZSA/IFByZWNvbmRpdGlvbi51cGRhdGVUaW1lKF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gZS5leGlzdHMgPyBQcmVjb25kaXRpb24uZXhpc3RzKGUuZXhpc3RzKSA6IFByZWNvbmRpdGlvbi5ub25lKCk7XG4gICAgfSh0LmN1cnJlbnREb2N1bWVudCkgOiBQcmVjb25kaXRpb24ubm9uZSgpLCByID0gdC51cGRhdGVUcmFuc2Zvcm1zID8gdC51cGRhdGVUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkVHJhbnNmb3JtKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICBpZiAoXCJzZXRUb1NlcnZlclZhbHVlXCIgaW4gdCkgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJSRVFVRVNUX1RJTUVcIiA9PT0gdC5zZXRUb1NlcnZlclZhbHVlKSwgXG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybTsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlKTtcbiAgICAgICAgfSBlbHNlIFwiaW5jcmVtZW50XCIgaW4gdCA/IG4gPSBuZXcgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdC5pbmNyZW1lbnQpIDogZmFpbCgpO1xuICAgICAgICBjb25zdCByID0gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdCh0LmZpZWxkUGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0ociwgbik7XG4gICAgfShlLCB0KSkpIDogW107XG4gICAgaWYgKHQudXBkYXRlKSB7XG4gICAgICAgIHQudXBkYXRlLm5hbWU7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCB0LnVwZGF0ZS5uYW1lKSwgcyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogdC51cGRhdGUuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodC51cGRhdGVNYXNrKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Eb2N1bWVudE1hc2soZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpZWxkUGF0aHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2sodC5tYXAoKGUgPT4gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdChlKSkpKTtcbiAgICAgICAgICAgIH0odC51cGRhdGVNYXNrKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oaSwgcywgZSwgbiwgcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2V0TXV0YXRpb24oaSwgcywgbiwgcik7XG4gICAgfVxuICAgIGlmICh0LmRlbGV0ZSkge1xuICAgICAgICBjb25zdCByID0gZnJvbU5hbWUoZSwgdC5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihyLCBuKTtcbiAgICB9XG4gICAgaWYgKHQudmVyaWZ5KSB7XG4gICAgICAgIGNvbnN0IHIgPSBmcm9tTmFtZShlLCB0LnZlcmlmeSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKHIsIG4pO1xuICAgIH1cbiAgICByZXR1cm4gZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdyaXRlUmVzdWx0cyhlLCB0KSB7XG4gICAgcmV0dXJuIGUgJiYgZS5sZW5ndGggPiAwID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHZvaWQgMCAhPT0gdCksIGUubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHQoZSwgdCkge1xuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cbiAgICAgICAgbGV0IG4gPSBlLnVwZGF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS51cGRhdGVUaW1lKSA6IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0KTtcbiAgICAgICAgcmV0dXJuIG4uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpICYmIChcbiAgICAgICAgLy8gVGhlIEZpcmVzdG9yZSBFbXVsYXRvciBjdXJyZW50bHkgcmV0dXJucyBhbiB1cGRhdGUgdGltZSBvZiAwIGZvclxuICAgICAgICAvLyBkZWxldGVzIG9mIG5vbi1leGlzdGluZyBkb2N1bWVudHMgKHJhdGhlciB0aGFuIG51bGwpLiBUaGlzIGJyZWFrcyB0aGVcbiAgICAgICAgLy8gdGVzdCBcImdldCBkZWxldGVkIGRvYyB3aGlsZSBvZmZsaW5lIHdpdGggc291cmNlPWNhY2hlXCIgYXMgTm9Eb2N1bWVudHNcbiAgICAgICAgLy8gd2l0aCB2ZXJzaW9uIDAgYXJlIGZpbHRlcmVkIGJ5IEluZGV4ZWREYidzIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gICAgICAgIC8vIFRPRE8oIzIxNDkpOiBSZW1vdmUgdGhpcyB3aGVuIEVtdWxhdG9yIGlzIGZpeGVkXG4gICAgICAgIG4gPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odCkpLCBuZXcgTXV0YXRpb25SZXN1bHQobiwgZS50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KGUsIHQpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RvY3VtZW50c1RhcmdldChlLCB0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiBbIF9fUFJJVkFURV90b1F1ZXJ5UGF0aChlLCB0LnBhdGgpIF1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9RdWVyeVRhcmdldChlLCB0KSB7XG4gICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cbiAgICBjb25zdCBuID0ge1xuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHt9XG4gICAgfSwgciA9IHQucGF0aDtcbiAgICBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IChuLnBhcmVudCA9IF9fUFJJVkFURV90b1F1ZXJ5UGF0aChlLCByKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHQuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gX19QUklWQVRFX3RvUXVlcnlQYXRoKGUsIHIucG9wTGFzdCgpKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHIubGFzdFNlZ21lbnQoKVxuICAgIH0gXSk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0ZpbHRlcnMoZSkge1xuICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90b0ZpbHRlcihDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGUsIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKSk7XG4gICAgfSh0LmZpbHRlcnMpO1xuICAgIGkgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LndoZXJlID0gaSk7XG4gICAgY29uc3QgcyA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b09yZGVyKGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiBlLm1hcCgoZSA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Qcm9wZXJ0eU9yZGVyKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IF9fUFJJVkFURV90b0RpcmVjdGlvbihlLmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpKTtcbiAgICB9KHQub3JkZXJCeSk7XG4gICAgcyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHMpO1xuICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQubGltaXQpO1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCB0LnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9TdGFydEF0Q3Vyc29yKGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogZS5pbmNsdXNpdmUsXG4gICAgICAgICAgICB2YWx1ZXM6IGUucG9zaXRpb25cbiAgICAgICAgfTtcbiAgICB9KHQuc3RhcnRBdCkpLCB0LmVuZEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5lbmRBdCA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0VuZEF0Q3Vyc29yKGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogIWUuaW5jbHVzaXZlLFxuICAgICAgICAgICAgdmFsdWVzOiBlLnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfSh0LmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0UXVlcnlUYXJnZXRUb1F1ZXJ5KGUpIHtcbiAgICBsZXQgdCA9IF9fUFJJVkFURV9mcm9tUXVlcnlQYXRoKGUucGFyZW50KTtcbiAgICBjb25zdCBuID0gZS5zdHJ1Y3R1cmVkUXVlcnksIHIgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHIgPiAwKSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IHIpO1xuICAgICAgICBjb25zdCBlID0gbi5mcm9tWzBdO1xuICAgICAgICBlLmFsbERlc2NlbmRhbnRzID8gaSA9IGUuY29sbGVjdGlvbklkIDogdCA9IHQuY2hpbGQoZS5jb2xsZWN0aW9uSWQpO1xuICAgIH1cbiAgICBsZXQgcyA9IFtdO1xuICAgIG4ud2hlcmUgJiYgKHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpbHRlcnMoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21GaWx0ZXIoZSk7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbih0KSkgcmV0dXJuIHQuZ2V0RmlsdGVycygpO1xuICAgICAgICByZXR1cm4gWyB0IF07XG4gICAgfShuLndoZXJlKSk7XG4gICAgbGV0IG8gPSBbXTtcbiAgICBuLm9yZGVyQnkgJiYgKG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU9yZGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIGUubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUHJvcGVydHlPcmRlcihlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9yZGVyQnkoX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksIFxuICAgICAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EaXJlY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICAgICAoZS5kaXJlY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIChlKSkpO1xuICAgIH0obi5vcmRlckJ5KSk7XG4gICAgbGV0IF8gPSBudWxsO1xuICAgIG4ubGltaXQgJiYgKF8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUludDMyUHJvdG8oZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgcmV0dXJuIHQgPSBcIm9iamVjdFwiID09IHR5cGVvZiBlID8gZS52YWx1ZSA6IGUsIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0KSA/IG51bGwgOiB0O1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVN0YXJ0QXRDdXJzb3IoZSkge1xuICAgICAgICBjb25zdCB0ID0gISFlLmJlZm9yZSwgbiA9IGUudmFsdWVzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG4sIHQpO1xuICAgIH0obi5zdGFydEF0KSk7XG4gICAgbGV0IHUgPSBudWxsO1xuICAgIHJldHVybiBuLmVuZEF0ICYmICh1ID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21FbmRBdEN1cnNvcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAhZS5iZWZvcmUsIG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChuLCB0KTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIChuLmVuZEF0KSksIF9fUFJJVkFURV9uZXdRdWVyeSh0LCBpLCBvLCBzLCBfLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gLCBhLCB1KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvTGlzdGVuUmVxdWVzdExhYmVscyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0xhYmVsKGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbVwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoLWJsb29tXCI7XG5cbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUxpbWJvUmVzb2x1dGlvblwiIC8qIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImxpbWJvLWRvY3VtZW50XCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgfVxuICAgIH0odC5wdXJwb3NlKTtcbiAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHtcbiAgICAgICAgXCJnb29nLWxpc3Rlbi10YWdzXCI6IG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpbHRlcihlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51bmFyeUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tVW5hcnlGaWx0ZXIoZSkge1xuICAgICAgICBzd2l0Y2ggKGUudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKHQsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKG4sIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OT1RfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKHIsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUoaSwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICB9XG4gICAgfShlKSA6IHZvaWQgMCAhPT0gZS5maWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRmllbGRGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKF9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGRGaWx0ZXIuZmllbGQpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU9wZXJhdG9yTmFtZShlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkVRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTk9UX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJJTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIk5PVF9JTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShlLmZpZWxkRmlsdGVyLm9wKSwgZS5maWVsZEZpbHRlci52YWx1ZSk7XG4gICAgfShlKSA6IHZvaWQgMCAhPT0gZS5jb21wb3NpdGVGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUNvbXBvc2l0ZUZpbHRlcihlKSB7XG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGUuY29tcG9zaXRlRmlsdGVyLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9mcm9tRmlsdGVyKGUpKSksIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQ29tcG9zaXRlT3BlcmF0b3JOYW1lKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiQU5EXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJPUlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KGUuY29tcG9zaXRlRmlsdGVyLm9wKSk7XG4gICAgfShlKSA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRGlyZWN0aW9uKGUpIHtcbiAgICByZXR1cm4gUGVbZV07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b09wZXJhdG9yTmFtZShlKSB7XG4gICAgcmV0dXJuIEllW2VdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9Db21wb3NpdGVPcGVyYXRvck5hbWUoZSkge1xuICAgIHJldHVybiBUZVtlXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IGUuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlKSB7XG4gICAgcmV0dXJuIEZpZWxkUGF0aCQxLmZyb21TZXJ2ZXJGb3JtYXQoZS5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWx0ZXIoZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9VbmFyeU9yRmllbGRGaWx0ZXIoZSkge1xuICAgICAgICBpZiAoXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovID09PSBlLm9wKSB7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzTmFuVmFsdWUoZS52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc051bGxWYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IGUub3ApIHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNOYW5WYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc051bGxWYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTlVMTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgIG9wOiBfX1BSSVZBVEVfdG9PcGVyYXRvck5hbWUoZS5vcCksXG4gICAgICAgICAgICAgICAgdmFsdWU6IGUudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUpIDogZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV90b0NvbXBvc2l0ZUZpbHRlcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmdldEZpbHRlcnMoKS5tYXAoKGUgPT4gX19QUklWQVRFX3RvRmlsdGVyKGUpKSk7XG4gICAgICAgIGlmICgxID09PSB0Lmxlbmd0aCkgcmV0dXJuIHRbMF07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb21wb3NpdGVGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBvcDogX19QUklWQVRFX3RvQ29tcG9zaXRlT3BlcmF0b3JOYW1lKGUub3ApLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUpIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb2N1bWVudE1hc2soZSkge1xuICAgIGNvbnN0IHQgPSBbXTtcbiAgICByZXR1cm4gZS5maWVsZHMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZS5jYW5vbmljYWxTdHJpbmcoKSkpKSwge1xuICAgICAgICBmaWVsZFBhdGhzOiB0XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2lzVmFsaWRSZXNvdXJjZU5hbWUoZSkge1xuICAgIC8vIFJlc291cmNlIG5hbWVzIGhhdmUgYXQgbGVhc3QgNCBjb21wb25lbnRzIChwcm9qZWN0IElELCBkYXRhYmFzZSBJRClcbiAgICByZXR1cm4gZS5sZW5ndGggPj0gNCAmJiBcInByb2plY3RzXCIgPT09IGUuZ2V0KDApICYmIFwiZGF0YWJhc2VzXCIgPT09IGUuZ2V0KDIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXG4gKi8gY2xhc3MgVGFyZ2V0RGF0YSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gU25hcHNob3RWZXJzaW9uLm1pbigpXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cbiAgICAgKi8gLCBzID0gU25hcHNob3RWZXJzaW9uLm1pbigpXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi8gLCBvID0gQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgbGFzdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgcmVzdW1lIHRva2VuIG9yXG4gICAgICogcmVhZCB0aW1lLiBEb2N1bWVudHMgYXJlIGNvdW50ZWQgb25seSB3aGVuIG1ha2luZyBhIGxpc3RlbiByZXF1ZXN0IHdpdGhcbiAgICAgKiByZXN1bWUgdG9rZW4gb3IgcmVhZCB0aW1lLCBvdGhlcndpc2UsIGtlZXAgaXQgbnVsbC5cbiAgICAgKi8gLCBfID0gbnVsbCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IGUsIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnB1cnBvc2UgPSBuLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gciwgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBpLCBcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gcywgdGhpcy5yZXN1bWVUb2tlbiA9IG8sIHRoaXMuZXhwZWN0ZWRDb3VudCA9IF87XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovICAgIHdpdGhTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCBlLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuLCB0aGlzLmV4cGVjdGVkQ291bnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCByZXN1bWUgdG9rZW4gYW5kXG4gICAgICogc25hcHNob3QgdmVyc2lvbi5cbiAgICAgKi8gICAgd2l0aFJlc3VtZVRva2VuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIHQsIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgZSwgXG4gICAgICAgIC8qIGV4cGVjdGVkQ291bnQ9ICovIG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBleHBlY3RlZCBjb3VudC5cbiAgICAgKi8gICAgd2l0aEV4cGVjdGVkQ291bnQoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbiwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxuICAgICAqLyAgICB3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgZSwgdGhpcy5yZXN1bWVUb2tlbiwgdGhpcy5leHBlY3RlZENvdW50KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogU2VyaWFsaXplciBmb3IgdmFsdWVzIHN0b3JlZCBpbiB0aGUgTG9jYWxTdG9yZS4gKi8gY2xhc3MgX19QUklWQVRFX0xvY2FsU2VyaWFsaXplciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmN0ID0gZTtcbiAgICB9XG59XG5cbi8qKiBEZWNvZGVzIGEgcmVtb3RlIGRvY3VtZW50IGZyb20gc3RvcmFnZSBsb2NhbGx5IHRvIGEgRG9jdW1lbnQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJSZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgbGV0IG47XG4gICAgaWYgKHQuZG9jdW1lbnQpIG4gPSBfX1BSSVZBVEVfZnJvbURvY3VtZW50KGUuY3QsIHQuZG9jdW1lbnQsICEhdC5oYXNDb21taXR0ZWRNdXRhdGlvbnMpOyBlbHNlIGlmICh0Lm5vRG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgZSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyh0Lm5vRG9jdW1lbnQucGF0aCksIHIgPSBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKHQubm9Eb2N1bWVudC5yZWFkVGltZSk7XG4gICAgICAgIG4gPSBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChlLCByKSwgdC5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiYgbi5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXQudW5rbm93bkRvY3VtZW50KSByZXR1cm4gZmFpbCgpO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHQudW5rbm93bkRvY3VtZW50LnBhdGgpLCByID0gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcCh0LnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgICAgIG4gPSBNdXRhYmxlRG9jdW1lbnQubmV3VW5rbm93bkRvY3VtZW50KGUsIHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0LnJlYWRUaW1lICYmIG4uc2V0UmVhZFRpbWUoZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcEtleShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgVGltZXN0YW1wKGVbMF0sIGVbMV0pO1xuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodCk7XG4gICAgfSh0LnJlYWRUaW1lKSksIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJSZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQua2V5LCByID0ge1xuICAgICAgICBwcmVmaXhQYXRoOiBuLmdldENvbGxlY3Rpb25QYXRoKCkucG9wTGFzdCgpLnRvQXJyYXkoKSxcbiAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgZG9jdW1lbnRJZDogbi5wYXRoLmxhc3RTZWdtZW50KCksXG4gICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleSh0LnJlYWRUaW1lKSxcbiAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0Lmhhc0NvbW1pdHRlZE11dGF0aW9uc1xuICAgIH07XG4gICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIHIuZG9jdW1lbnQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBfX1BSSVZBVEVfdG9OYW1lKGUsIHQua2V5KSxcbiAgICAgICAgICAgIGZpZWxkczogdC5kYXRhLnZhbHVlLm1hcFZhbHVlLmZpZWxkcyxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHRvVGltZXN0YW1wKGUsIHQudmVyc2lvbi50b1RpbWVzdGFtcCgpKSxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IHRvVGltZXN0YW1wKGUsIHQuY3JlYXRlVGltZS50b1RpbWVzdGFtcCgpKVxuICAgICAgICB9O1xuICAgIH0oZS5jdCwgdCk7IGVsc2UgaWYgKHQuaXNOb0RvY3VtZW50KCkpIHIubm9Eb2N1bWVudCA9IHtcbiAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHQudmVyc2lvbilcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0LmlzVW5rbm93bkRvY3VtZW50KCkpIHJldHVybiBmYWlsKCk7XG4gICAgICAgIHIudW5rbm93bkRvY3VtZW50ID0ge1xuICAgICAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHZlcnNpb246IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHQudmVyc2lvbilcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KGUpIHtcbiAgICBjb25zdCB0ID0gZS50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIHQuc2Vjb25kcywgdC5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcChlKSB7XG4gICAgY29uc3QgdCA9IGUudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiB0LnNlY29uZHMsXG4gICAgICAgIG5hbm9zZWNvbmRzOiB0Lm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlKSB7XG4gICAgY29uc3QgdCA9IG5ldyBUaW1lc3RhbXAoZS5zZWNvbmRzLCBlLm5hbm9zZWNvbmRzKTtcbiAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodCk7XG59XG5cbi8qKiBFbmNvZGVzIGEgYmF0Y2ggb2YgbXV0YXRpb25zIGludG8gYSBEYk11dGF0aW9uQmF0Y2ggZm9yIGxvY2FsIHN0b3JhZ2UuICovXG4vKiogRGVjb2RlcyBhIERiTXV0YXRpb25CYXRjaCBpbnRvIGEgTXV0YXRpb25CYXRjaCAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgIGNvbnN0IG4gPSAodC5iYXNlTXV0YXRpb25zIHx8IFtdKS5tYXAoKHQgPT4gX19QUklWQVRFX2Zyb21NdXRhdGlvbihlLmN0LCB0KSkpO1xuICAgIC8vIFNxdWFzaCBvbGQgdHJhbnNmb3JtIG11dGF0aW9ucyBpbnRvIGV4aXN0aW5nIHBhdGNoIG9yIHNldCBtdXRhdGlvbnMuXG4gICAgLy8gVGhlIHJlcGxhY2VtZW50IG9mIHJlcHJlc2VudGluZyBgdHJhbnNmb3Jtc2Agd2l0aCBgdXBkYXRlX3RyYW5zZm9ybXNgXG4gICAgLy8gb24gdGhlIFNESyBtZWFucyB0aGF0IG9sZCBgdHJhbnNmb3JtYCBtdXRhdGlvbnMgc3RvcmVkIGluIEluZGV4ZWREQiBuZWVkXG4gICAgLy8gdG8gYmUgdXBkYXRlZCB0byBgdXBkYXRlX3RyYW5zZm9ybXNgLlxuICAgIC8vIFRPRE8oYi8xNzQ2MDgzNzQpOiBSZW1vdmUgdGhpcyBjb2RlIG9uY2Ugd2UgcGVyZm9ybSBhIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5tdXRhdGlvbnMubGVuZ3RoIC0gMTsgKytlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm11dGF0aW9uc1tlXTtcbiAgICAgICAgaWYgKGUgKyAxIDwgdC5tdXRhdGlvbnMubGVuZ3RoICYmIHZvaWQgMCAhPT0gdC5tdXRhdGlvbnNbZSArIDFdLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgciA9IHQubXV0YXRpb25zW2UgKyAxXTtcbiAgICAgICAgICAgIG4udXBkYXRlVHJhbnNmb3JtcyA9IHIudHJhbnNmb3JtLmZpZWxkVHJhbnNmb3JtcywgdC5tdXRhdGlvbnMuc3BsaWNlKGUgKyAxLCAxKSwgXG4gICAgICAgICAgICArK2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgciA9IHQubXV0YXRpb25zLm1hcCgodCA9PiBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUuY3QsIHQpKSksIGkgPSBUaW1lc3RhbXAuZnJvbU1pbGxpcyh0LmxvY2FsV3JpdGVUaW1lTXMpO1xuICAgIHJldHVybiBuZXcgTXV0YXRpb25CYXRjaCh0LmJhdGNoSWQsIGksIG4sIHIpO1xufVxuXG4vKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLnJlYWRUaW1lKSwgbiA9IHZvaWQgMCAhPT0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID8gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIDogU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgIGxldCByO1xuICAgIHJldHVybiByID0gXG4gICAgLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZmlndXJpbmcgb3V0IHdoYXQga2luZCBvZiBxdWVyeSBoYXMgYmVlbiBzdG9yZWQuXG4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEb2N1bWVudFF1ZXJ5KGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZS5kb2N1bWVudHM7XG4gICAgfVxuICAgIC8qKiBFbmNvZGVzIGEgRGJCdW5kbGUgdG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovIChlLnF1ZXJ5KSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRG9jdW1lbnRzVGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IGUuZG9jdW1lbnRzLmxlbmd0aCksIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoX19QUklWQVRFX2Zyb21RdWVyeVBhdGgoZS5kb2N1bWVudHNbMF0pKSk7XG4gICAgfShlLnF1ZXJ5KSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoZSkpO1xuICAgIH0oZS5xdWVyeSksIG5ldyBUYXJnZXREYXRhKHIsIGUudGFyZ2V0SWQsIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovICwgZS5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIHQsIG4sIEJ5dGVTdHJpbmcuZnJvbUJhc2U2NFN0cmluZyhlLnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC5zbmFwc2hvdFZlcnNpb24pLCByID0gX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQodC50YXJnZXQpID8gX19QUklWQVRFX3RvRG9jdW1lbnRzVGFyZ2V0KGUuY3QsIHQudGFyZ2V0KSA6IF9fUFJJVkFURV90b1F1ZXJ5VGFyZ2V0KGUuY3QsIHQudGFyZ2V0KTtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgcyA9IHQucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFyZ2V0SWQ6IHQudGFyZ2V0SWQsXG4gICAgICAgIGNhbm9uaWNhbElkOiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQodC50YXJnZXQpLFxuICAgICAgICByZWFkVGltZTogbixcbiAgICAgICAgcmVzdW1lVG9rZW46IHMsXG4gICAgICAgIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogdC5zZXF1ZW5jZU51bWJlcixcbiAgICAgICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbjogcixcbiAgICAgICAgcXVlcnk6IGlcbiAgICB9O1xufVxuXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoe1xuICAgICAgICBwYXJlbnQ6IGUucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IGUuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSBlLmxpbWl0VHlwZSA/IF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCh0LCB0LmxpbWl0LCBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLykgOiB0O1xufVxuXG4vKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgcHJvdG8gb2JqZWN0IHRvIGEgTmFtZWRRdWVyeSBtb2RlbCBvYmplY3QuICovXG4vKiogRW5jb2RlcyBhIERiRG9jdW1lbnRPdmVybGF5IG9iamVjdCB0byBhbiBPdmVybGF5IG1vZGVsIG9iamVjdC4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkoZSwgdCkge1xuICAgIHJldHVybiBuZXcgT3ZlcmxheSh0Lmxhcmdlc3RCYXRjaElkLCBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUuY3QsIHQub3ZlcmxheU11dGF0aW9uKSk7XG59XG5cbi8qKiBEZWNvZGVzIGFuIE92ZXJsYXkgbW9kZWwgb2JqZWN0IGludG8gYSBEYkRvY3VtZW50T3ZlcmxheSBvYmplY3QuICovXG4vKipcbiAqIFJldHVybnMgdGhlIERiRG9jdW1lbnRPdmVybGF5S2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHVzZXIgYW5kXG4gKiBkb2N1bWVudCBrZXkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5S2V5KGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgcmV0dXJuIFsgZSwgX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgucG9wTGFzdCgpKSwgbiBdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EYkluZGV4U3RhdGUoZSwgdCwgbiwgcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4SWQ6IGUsXG4gICAgICAgIHVpZDogdC51aWQgfHwgXCJcIixcbiAgICAgICAgc2VxdWVuY2VOdW1iZXI6IG4sXG4gICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcChyLnJlYWRUaW1lKSxcbiAgICAgICAgZG9jdW1lbnRLZXk6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoci5kb2N1bWVudEtleS5wYXRoKSxcbiAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IHIubGFyZ2VzdEJhdGNoSWRcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiQnVuZGxlQ2FjaGUge1xuICAgIGdldEJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9idW5kbGVzU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKGUpIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiQnVuZGxlKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZDogZS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBCdW5kbGVNZXRhZGF0YSB0byBhIERiQnVuZGxlLiAqLyAoZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9idW5kbGVzU3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiQnVuZGxlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYnVuZGxlSWQ6IGUuaWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoX19QUklWQVRFX2Zyb21WZXJzaW9uKGUuY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvKiogRW5jb2RlcyBhIERiTmFtZWRRdWVyeSB0byBhIE5hbWVkUXVlcnkuICovICh0KSk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25hbWVkUXVlcmllc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYk5hbWVkUXVlcnkoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAoZS5yZWFkVGltZSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IGZyb20gYSBidW5kbGUgcHJvdG8gdG8gYSBEYk5hbWVkUXVlcnkuICovIChlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmFtZWRRdWVyaWVzU3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiTmFtZWRRdWVyeShlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoX19QUklWQVRFX2Zyb21WZXJzaW9uKGUucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IGUuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYnVuZGxlc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiYnVuZGxlc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25hbWVkUXVlcmllc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwibmFtZWRRdWVyaWVzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBEb2N1bWVudE92ZXJsYXlDYWNoZSB1c2luZyBJbmRleGVkRGIuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYkRvY3VtZW50T3ZlcmxheUNhY2hlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICAgICAqIEBwYXJhbSB1c2VySWQgLSBUaGUgdXNlcklkIGZvciB3aGljaCB3ZSBhcmUgYWNjZXNzaW5nIG92ZXJsYXlzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZSwgdGhpcy51c2VySWQgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgbHQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC51aWQgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiRG9jdW1lbnRPdmVybGF5Q2FjaGUoZSwgbik7XG4gICAgfVxuICAgIGdldE92ZXJsYXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLmdldChfX1BSSVZBVEVfdG9EYkRvY3VtZW50T3ZlcmxheUtleSh0aGlzLnVzZXJJZCwgdCkpLm5leHQoKGUgPT4gZSA/IF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkodGhpcy5zZXJpYWxpemVyLCBlKSA6IG51bGwpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHRoaXMuZ2V0T3ZlcmxheShlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIG51bGwgIT09IGUgJiYgbi5zZXQodCwgZSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgc2F2ZU92ZXJsYXlzKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBPdmVybGF5KHQsIGkpO1xuICAgICAgICAgICAgci5wdXNoKHRoaXMuaHQoZSwgcykpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpO1xuICAgIH1cbiAgICByZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IFNldDtcbiAgICAgICAgLy8gR2V0IHRoZSBzZXQgb2YgdW5pcXVlIGNvbGxlY3Rpb24gcGF0aHMuXG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKChlID0+IHIuYWRkKF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZS5nZXRDb2xsZWN0aW9uUGF0aCgpKSkpKTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCB0LCBuIF0sIFsgdGhpcy51c2VySWQsIHQsIG4gKyAxIF0sIFxuICAgICAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICAgICAgaS5wdXNoKF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKS5KKFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgcikpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSwgaSA9IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBpLCBuIF0sIFsgdGhpcy51c2VySWQsIGksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLkcoXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCBzKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgICAgICByLnNldChlLmdldEtleSgpLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICAvLyBXZSB3YW50IGJhdGNoIElEcyBsYXJnZXIgdGhhbiBgc2luY2VCYXRjaElkYCwgYW5kIHNvIHRoZSBsb3dlciBib3VuZFxuICAgICAgICAvLyBpcyBub3QgaW5jbHVzaXZlLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCB0LCBuIF0sIFsgdGhpcy51c2VySWQsIHQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogb1xuICAgICAgICB9LCAoKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIHJldHVybiBwYXJ0aWFsIGJhdGNoIG92ZXJsYXlzLCBldmVuIGlmIHRoZSBzaXplXG4gICAgICAgICAgICAvLyBvZiB0aGUgcmVzdWx0IHNldCBleGNlZWRzIHRoZSBnaXZlbiBgY291bnRgIGFyZ3VtZW50LiBUaGVyZWZvcmUsIHdlXG4gICAgICAgICAgICAvLyBjb250aW51ZSB0byBhZ2dyZWdhdGUgcmVzdWx0cyBldmVuIGFmdGVyIHRoZSByZXN1bHQgc2l6ZSBleGNlZWRzXG4gICAgICAgICAgICAvLyBgY291bnRgIGlmIHRoZXJlIGFyZSBtb3JlIG92ZXJsYXlzIGZyb20gdGhlIGBjdXJyZW50QmF0Y2hJZGAuXG4gICAgICAgICAgICBjb25zdCBvID0gX19QUklWQVRFX2Zyb21EYkRvY3VtZW50T3ZlcmxheSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICAgICAgaS5zaXplKCkgPCByIHx8IG8ubGFyZ2VzdEJhdGNoSWQgPT09IHMgPyAoaS5zZXQoby5nZXRLZXkoKSwgbyksIHMgPSBvLmxhcmdlc3RCYXRjaElkKSA6IG4uZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBodChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5KGUsIHQsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IFtyLCBpLCBzXSA9IF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5S2V5KHQsIG4ubXV0YXRpb24ua2V5KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXNlcklkOiB0LFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25QYXRoOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IHMsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLm11dGF0aW9uLmtleS5nZXRDb2xsZWN0aW9uR3JvdXAoKSxcbiAgICAgICAgICAgICAgICBsYXJnZXN0QmF0Y2hJZDogbi5sYXJnZXN0QmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBvdmVybGF5TXV0YXRpb246IHRvTXV0YXRpb24oZS5jdCwgbi5tdXRhdGlvbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCB0aGlzLnVzZXJJZCwgdCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IG92ZXJsYXkgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImRvY3VtZW50T3ZlcmxheXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBOb3RlOiBUaGlzIGNvZGUgaXMgY29waWVkIGZyb20gdGhlIGJhY2tlbmQuIENvZGUgdGhhdCBpcyBub3QgdXNlZCBieVxuLy8gRmlyZXN0b3JlIHdhcyByZW1vdmVkLlxuLyoqIEZpcmVzdG9yZSBpbmRleCB2YWx1ZSB3cml0ZXIuICAqL1xuY2xhc3MgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge31cbiAgICAvLyBUaGUgd3JpdGUgbWV0aG9kcyBiZWxvdyBzaG9ydC1jaXJjdWl0IHdyaXRpbmcgdGVybWluYXRvcnMgZm9yIHZhbHVlc1xuICAgIC8vIGNvbnRhaW5pbmcgYSAodGVybWluYXRpbmcpIHRydW5jYXRlZCB2YWx1ZS5cbiAgICAvLyBBcyBhbiBleGFtcGxlLCBjb25zaWRlciB0aGUgcmVzdWx0aW5nIGVuY29kaW5nIGZvcjpcbiAgICAvLyBbXCJiYXJcIiwgWzIsIFwiZm9vXCJdXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRFUk0sIFRFUk0sIFRFUk0pXG4gICAgLy8gW1wiYmFyXCIsIFsyLCB0cnVuY2F0ZWQoXCJmb29cIildXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRSVU5DKVxuICAgIC8vIFtcImJhclwiLCB0cnVuY2F0ZWQoW1wiZm9vXCJdKV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVkuIFNUUklORywgXCJmb29cIiwgVEVSTSwgVFJVTkMpXG4gICAgLyoqIFdyaXRlcyBhbiBpbmRleCB2YWx1ZS4gICovXG4gICAgUHQoZSwgdCkge1xuICAgICAgICB0aGlzLkl0KGUsIHQpLCBcbiAgICAgICAgLy8gV3JpdGUgc2VwYXJhdG9yIHRvIHNwbGl0IGluZGV4IHZhbHVlc1xuICAgICAgICAvLyAoc2VlIGdvL2ZpcmVzdG9yZS1zdG9yYWdlLWZvcm1hdCNlbmNvZGluZ3MpLlxuICAgICAgICB0LlR0KCk7XG4gICAgfVxuICAgIEl0KGUsIHQpIHtcbiAgICAgICAgaWYgKFwibnVsbFZhbHVlXCIgaW4gZSkgdGhpcy5FdCh0LCA1KTsgZWxzZSBpZiAoXCJib29sZWFuVmFsdWVcIiBpbiBlKSB0aGlzLkV0KHQsIDEwKSwgXG4gICAgICAgIHQuZHQoZS5ib29sZWFuVmFsdWUgPyAxIDogMCk7IGVsc2UgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gZSkgdGhpcy5FdCh0LCAxNSksIHQuZHQoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSkpOyBlbHNlIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICBpc05hTihuKSA/IHRoaXMuRXQodCwgMTMpIDogKHRoaXMuRXQodCwgMTUpLCBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8obikgPyBcbiAgICAgICAgICAgIC8vIC0wLjAsIDAgYW5kIDAuMCBhcmUgYWxsIGNvbnNpZGVyZWQgdGhlIHNhbWVcbiAgICAgICAgICAgIHQuZHQoMCkgOiB0LmR0KG4pKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICB0aGlzLkV0KHQsIDIwKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiA/IHQuQXQobikgOiAodC5BdChgJHtuLnNlY29uZHMgfHwgXCJcIn1gKSwgdC5kdChuLm5hbm9zIHx8IDApKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInN0cmluZ1ZhbHVlXCIgaW4gZSkgdGhpcy5SdChlLnN0cmluZ1ZhbHVlLCB0KSwgdGhpcy5WdCh0KTsgZWxzZSBpZiAoXCJieXRlc1ZhbHVlXCIgaW4gZSkgdGhpcy5FdCh0LCAzMCksIFxuICAgICAgICB0LmZ0KF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUuYnl0ZXNWYWx1ZSkpLCB0aGlzLlZ0KHQpOyBlbHNlIGlmIChcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSkgdGhpcy5ndChlLnJlZmVyZW5jZVZhbHVlLCB0KTsgZWxzZSBpZiAoXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZ2VvUG9pbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuRXQodCwgNDUpLCB0LmR0KG4ubGF0aXR1ZGUgfHwgMCksIHQuZHQobi5sb25naXR1ZGUgfHwgMCk7XG4gICAgICAgIH0gZWxzZSBcIm1hcFZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9pc01heFZhbHVlKGUpID8gdGhpcy5FdCh0LCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgOiAodGhpcy55dChlLm1hcFZhbHVlLCB0KSwgXG4gICAgICAgIHRoaXMuVnQodCkpIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/ICh0aGlzLnd0KGUuYXJyYXlWYWx1ZSwgdCksIHRoaXMuVnQodCkpIDogZmFpbCgpO1xuICAgIH1cbiAgICBSdChlLCB0KSB7XG4gICAgICAgIHRoaXMuRXQodCwgMjUpLCB0aGlzLlN0KGUsIHQpO1xuICAgIH1cbiAgICBTdChlLCB0KSB7XG4gICAgICAgIHQuQXQoZSk7XG4gICAgfVxuICAgIHl0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IGUuZmllbGRzIHx8IHt9O1xuICAgICAgICB0aGlzLkV0KHQsIDU1KTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIE9iamVjdC5rZXlzKG4pKSB0aGlzLlJ0KGUsIHQpLCB0aGlzLkl0KG5bZV0sIHQpO1xuICAgIH1cbiAgICB3dChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5FdCh0LCA1MCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSB0aGlzLkl0KGUsIHQpO1xuICAgIH1cbiAgICBndChlLCB0KSB7XG4gICAgICAgIHRoaXMuRXQodCwgMzcpO1xuICAgICAgICBEb2N1bWVudEtleS5mcm9tTmFtZShlKS5wYXRoLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5FdCh0LCA2MCksIHRoaXMuU3QoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRXQoZSwgdCkge1xuICAgICAgICBlLmR0KHQpO1xuICAgIH1cbiAgICBWdChlKSB7XG4gICAgICAgIC8vIFdoaWxlIHRoZSBTREsgZG9lcyBub3QgaW1wbGVtZW50IHRydW5jYXRpb24sIHRoZSB0cnVuY2F0aW9uIG1hcmtlciBpc1xuICAgICAgICAvLyB1c2VkIHRvIHRlcm1pbmF0ZSBhbGwgdmFyaWFibGUgbGVuZ3RoIHZhbHVlcyAod2hpY2ggYXJlIHN0cmluZ3MsIGJ5dGVzLFxuICAgICAgICAvLyByZWZlcmVuY2VzLCBhcnJheXMgYW5kIG1hcHMpLlxuICAgICAgICBlLmR0KDIpO1xuICAgIH1cbn1cblxuX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuYnQgPSBuZXcgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXI7XG5cbi8qKlxuICogQ291bnRzIHRoZSBudW1iZXIgb2YgemVyb3MgaW4gYSBieXRlLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9udW1iZXJPZkxlYWRpbmdaZXJvc0luQnl0ZShlKSB7XG4gICAgaWYgKDAgPT09IGUpIHJldHVybiA4O1xuICAgIGxldCB0ID0gMDtcbiAgICByZXR1cm4gZSA+PiA0ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIGZpcnN0IGZvdXIgYml0cyBhcmUgemVyby5cbiAgICB0ICs9IDQsIGUgPDw9IDQpLCBlID4+IDYgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgZmlyc3QgdHdvIChvciBuZXh0IHR3bykgYml0cyBhcmUgemVyby5cbiAgICB0ICs9IDIsIGUgPDw9IDIpLCBlID4+IDcgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgcmVtYWluaW5nIGJpdCBpcyB6ZXJvLlxuICAgIHQgKz0gMSksIHQ7XG59XG5cbi8qKiBDb3VudHMgdGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zIGluIHRoZSBnaXZlbiBieXRlIGFycmF5LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVxdWlyZWQgdG8gc3RvcmUgXCJ2YWx1ZVwiLiBMZWFkaW5nIHplcm8gYnl0ZXNcbiAqIGFyZSBza2lwcGVkLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdW5zaWduZWROdW1MZW5ndGgoZSkge1xuICAgIC8vIFRoaXMgaXMganVzdCB0aGUgbnVtYmVyIG9mIGJ5dGVzIGZvciB0aGUgdW5zaWduZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG51bWJlci5cbiAgICBjb25zdCB0ID0gNjQgLSBmdW5jdGlvbiBfX1BSSVZBVEVfbnVtYmVyT2ZMZWFkaW5nWmVyb3MoZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgODsgKytuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX251bWJlck9mTGVhZGluZ1plcm9zSW5CeXRlKDI1NSAmIGVbbl0pO1xuICAgICAgICAgICAgaWYgKHQgKz0gciwgOCAhPT0gcikgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfShlKTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKHQgLyA4KTtcbn1cblxuLyoqXG4gKiBPcmRlcmVkQ29kZVdyaXRlciBpcyBhIG1pbmltYWwtYWxsb2NhdGlvbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgd3JpdGluZ1xuICogYmVoYXZpb3IgZGVmaW5lZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgY29kZSBpcyBwb3J0ZWQgZnJvbSBpdHMgSmF2YSBjb3VudGVycGFydC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDEwMjQpLCB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgRHQoZSkge1xuICAgICAgICBjb25zdCB0ID0gZVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGxldCBuID0gdC5uZXh0KCk7XG4gICAgICAgIGZvciAoOyFuLmRvbmU7ICkgdGhpcy52dChuLnZhbHVlKSwgbiA9IHQubmV4dCgpO1xuICAgICAgICB0aGlzLkN0KCk7XG4gICAgfVxuICAgIEZ0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IHQubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuTXQobi52YWx1ZSksIG4gPSB0Lm5leHQoKTtcbiAgICAgICAgdGhpcy54dCgpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIHV0ZjggYnl0ZXMgaW50byB0aGlzIGJ5dGUgc2VxdWVuY2UsIGFzY2VuZGluZy4gKi8gICAgT3QoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGlmIChlIDwgMTI4KSB0aGlzLnZ0KGUpOyBlbHNlIGlmIChlIDwgMjA0OCkgdGhpcy52dCg5NjAgfCBlID4+PiA2KSwgdGhpcy52dCgxMjggfCA2MyAmIGUpOyBlbHNlIGlmICh0IDwgXCJcXHVkODAwXCIgfHwgXCJcXHVkYmZmXCIgPCB0KSB0aGlzLnZ0KDQ4MCB8IGUgPj4+IDEyKSwgXG4gICAgICAgICAgICB0aGlzLnZ0KDEyOCB8IDYzICYgZSA+Pj4gNiksIHRoaXMudnQoMTI4IHwgNjMgJiBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZVBvaW50QXQoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy52dCgyNDAgfCBlID4+PiAxOCksIHRoaXMudnQoMTI4IHwgNjMgJiBlID4+PiAxMiksIHRoaXMudnQoMTI4IHwgNjMgJiBlID4+PiA2KSwgXG4gICAgICAgICAgICAgICAgdGhpcy52dCgxMjggfCA2MyAmIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuQ3QoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBkZXNjZW5kaW5nICovICAgIE50KGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAoZSA8IDEyOCkgdGhpcy5NdChlKTsgZWxzZSBpZiAoZSA8IDIwNDgpIHRoaXMuTXQoOTYwIHwgZSA+Pj4gNiksIHRoaXMuTXQoMTI4IHwgNjMgJiBlKTsgZWxzZSBpZiAodCA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgdCkgdGhpcy5NdCg0ODAgfCBlID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5NdCgxMjggfCA2MyAmIGUgPj4+IDYpLCB0aGlzLk10KDEyOCB8IDYzICYgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuTXQoMjQwIHwgZSA+Pj4gMTgpLCB0aGlzLk10KDEyOCB8IDYzICYgZSA+Pj4gMTIpLCB0aGlzLk10KDEyOCB8IDYzICYgZSA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuTXQoMTI4IHwgNjMgJiBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnh0KCk7XG4gICAgfVxuICAgIEJ0KGUpIHtcbiAgICAgICAgLy8gVmFsdWVzIGFyZSBlbmNvZGVkIHdpdGggYSBzaW5nbGUgYnl0ZSBsZW5ndGggcHJlZml4LCBmb2xsb3dlZCBieSB0aGVcbiAgICAgICAgLy8gYWN0dWFsIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkx0KGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLmt0KDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IDI1NSAmIG47XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiB0W2VdO1xuICAgIH1cbiAgICBxdChlKSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGludmVydGVkIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkx0KGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLmt0KDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgbik7XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+KDI1NSAmIHRbZV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYWZ0ZXIgYWxsIG90aGVyIGJ5dGVcbiAgICAgKiBzZXF1ZW5jZXMgd3JpdHRlbiBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIFF0KCkge1xuICAgICAgICB0aGlzLkt0KDI1NSksIHRoaXMuS3QoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBcImluZmluaXR5XCIgYnl0ZSBzZXF1ZW5jZSB0aGF0IHNvcnRzIGJlZm9yZSBhbGwgb3RoZXIgYnl0ZVxuICAgICAqIHNlcXVlbmNlcyB3cml0dGVuIGluIGRlc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgICR0KCkge1xuICAgICAgICB0aGlzLlV0KDI1NSksIHRoaXMuVXQoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBidWZmZXIgc3VjaCB0aGF0IGl0IGlzIHRoZSBzYW1lIGFzIHdoZW4gaXQgd2FzIG5ld2x5XG4gICAgICogY29uc3RydWN0ZWQuXG4gICAgICovICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgc2VlZChlKSB7XG4gICAgICAgIHRoaXMua3QoZS5sZW5ndGgpLCB0aGlzLmJ1ZmZlci5zZXQoZSwgdGhpcy5wb3NpdGlvbiksIHRoaXMucG9zaXRpb24gKz0gZS5sZW5ndGg7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGVuY29kZWQgYnl0ZXMgaW4gdGhpcyBidWZmZXIuICAqLyAgICBXdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMucG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGB2YWxgIGludG8gYW4gZW5jb2Rpbmcgc28gdGhhdCB0aGUgb3JkZXIgbWF0Y2hlcyB0aGUgSUVFRSA3NTRcbiAgICAgKiBmbG9hdGluZy1wb2ludCBjb21wYXJpc29uIHJlc3VsdHMgd2l0aCB0aGUgZm9sbG93aW5nIGV4Y2VwdGlvbnM6XG4gICAgICogICAtMC4wIDwgMC4wXG4gICAgICogICBhbGwgbm9uLU5hTiA8IE5hTlxuICAgICAqICAgTmFOID0gTmFOXG4gICAgICovICAgIEx0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAvKiogQ29udmVydHMgYSBKYXZhU2NyaXB0IG51bWJlciB0byBhIGJ5dGUgYXJyYXkgKHVzaW5nIGJpZyBlbmRpYW4gZW5jb2RpbmcpLiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZG91YmxlVG9Mb25nQml0cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSk7XG4gICAgICAgICAgICByZXR1cm4gdC5zZXRGbG9hdDY0KDAsIGUsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITEpLCBuZXcgVWludDhBcnJheSh0LmJ1ZmZlcik7XG4gICAgICAgIH0oZSksIG4gPSAwICE9ICgxMjggJiB0WzBdKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGJpdCBpcyBzZXQuIFdlIHVzZSBhIGJpdCBtYXNrIHNpbmNlIHZhbHVlWzBdIGlzXG4gICAgICAgIC8vIGVuY29kZWQgYXMgYSBudW1iZXIgZnJvbSAwIHRvIDI1NS5cbiAgICAgICAgICAgICAgICAvLyBSZXZlcnQgdGhlIHR3byBjb21wbGVtZW50IHRvIGdldCBuYXR1cmFsIG9yZGVyaW5nXG4gICAgICAgIHRbMF0gXj0gbiA/IDI1NSA6IDEyODtcbiAgICAgICAgZm9yIChsZXQgZSA9IDE7IGUgPCB0Lmxlbmd0aDsgKytlKSB0W2VdIF49IG4gPyAyNTUgOiAwO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGFzY2VuZGluZyB0byB0aGUgYnVmZmVyLiAqLyAgICB2dChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAyNTUgJiBlO1xuICAgICAgICAwID09PSB0ID8gKHRoaXMuS3QoMCksIHRoaXMuS3QoMjU1KSkgOiAyNTUgPT09IHQgPyAodGhpcy5LdCgyNTUpLCB0aGlzLkt0KDApKSA6IHRoaXMuS3QodCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBzaW5nbGUgYnl0ZSBkZXNjZW5kaW5nIHRvIHRoZSBidWZmZXIuICAqLyAgICBNdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAyNTUgJiBlO1xuICAgICAgICAwID09PSB0ID8gKHRoaXMuVXQoMCksIHRoaXMuVXQoMjU1KSkgOiAyNTUgPT09IHQgPyAodGhpcy5VdCgyNTUpLCB0aGlzLlV0KDApKSA6IHRoaXMuVXQoZSk7XG4gICAgfVxuICAgIEN0KCkge1xuICAgICAgICB0aGlzLkt0KDApLCB0aGlzLkt0KDEpO1xuICAgIH1cbiAgICB4dCgpIHtcbiAgICAgICAgdGhpcy5VdCgwKSwgdGhpcy5VdCgxKTtcbiAgICB9XG4gICAgS3QoZSkge1xuICAgICAgICB0aGlzLmt0KDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gZTtcbiAgICB9XG4gICAgVXQoZSkge1xuICAgICAgICB0aGlzLmt0KDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfmU7XG4gICAgfVxuICAgIGt0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUgKyB0aGlzLnBvc2l0aW9uO1xuICAgICAgICBpZiAodCA8PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgLy8gVHJ5IGRvdWJsaW5nLlxuICAgICAgICAgICAgICAgIGxldCBuID0gMiAqIHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgLy8gU3RpbGwgbm90IGJpZyBlbm91Z2g/IEp1c3QgYWxsb2NhdGUgdGhlIHJpZ2h0IHNpemUuXG4gICAgICAgICAgICAgICAgbiA8IHQgJiYgKG4gPSB0KTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgYnVmZmVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgVWludDhBcnJheShuKTtcbiAgICAgICAgci5zZXQodGhpcy5idWZmZXIpLCAvLyBjb3B5IG9sZCBkYXRhXG4gICAgICAgIHRoaXMuYnVmZmVyID0gcjtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9Bc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuR3QgPSBlO1xuICAgIH1cbiAgICBmdChlKSB7XG4gICAgICAgIHRoaXMuR3QuRHQoZSk7XG4gICAgfVxuICAgIEF0KGUpIHtcbiAgICAgICAgdGhpcy5HdC5PdChlKTtcbiAgICB9XG4gICAgZHQoZSkge1xuICAgICAgICB0aGlzLkd0LkJ0KGUpO1xuICAgIH1cbiAgICBUdCgpIHtcbiAgICAgICAgdGhpcy5HdC5RdCgpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0Rlc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuR3QgPSBlO1xuICAgIH1cbiAgICBmdChlKSB7XG4gICAgICAgIHRoaXMuR3QuRnQoZSk7XG4gICAgfVxuICAgIEF0KGUpIHtcbiAgICAgICAgdGhpcy5HdC5OdChlKTtcbiAgICB9XG4gICAgZHQoZSkge1xuICAgICAgICB0aGlzLkd0LnF0KGUpO1xuICAgIH1cbiAgICBUdCgpIHtcbiAgICAgICAgdGhpcy5HdC4kdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGBEaXJlY3Rpb25hbEluZGV4Qnl0ZUVuY29kZXJgIHVzaW5nIGBPcmRlcmVkQ29kZVdyaXRlcmAgZm9yIHRoZVxuICogYWN0dWFsIGVuY29kaW5nLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5HdCA9IG5ldyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIsIHRoaXMuenQgPSBuZXcgX19QUklWQVRFX0FzY2VuZGluZ0luZGV4Qnl0ZUVuY29kZXIodGhpcy5HdCksIFxuICAgICAgICB0aGlzLmp0ID0gbmV3IF9fUFJJVkFURV9EZXNjZW5kaW5nSW5kZXhCeXRlRW5jb2Rlcih0aGlzLkd0KTtcbiAgICB9XG4gICAgc2VlZChlKSB7XG4gICAgICAgIHRoaXMuR3Quc2VlZChlKTtcbiAgICB9XG4gICAgSHQoZSkge1xuICAgICAgICByZXR1cm4gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBlID8gdGhpcy56dCA6IHRoaXMuanQ7XG4gICAgfVxuICAgIFd0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5HdC5XdCgpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5HdC5yZXNldCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBSZXByZXNlbnRzIGFuIGluZGV4IGVudHJ5IHNhdmVkIGJ5IHRoZSBTREsgaW4gcGVyc2lzdGVkIHN0b3JhZ2UuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuaW5kZXhJZCA9IGUsIHRoaXMuZG9jdW1lbnRLZXkgPSB0LCB0aGlzLmFycmF5VmFsdWUgPSBuLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIEluZGV4RW50cnkgZW50cnkgdGhhdCBzb3J0cyBpbW1lZGlhdGVseSBhZnRlciB0aGUgY3VycmVudFxuICAgICAqIGRpcmVjdGlvbmFsIHZhbHVlLlxuICAgICAqLyAgICBKdCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGlyZWN0aW9uYWxWYWx1ZS5sZW5ndGgsIHQgPSAwID09PSBlIHx8IDI1NSA9PT0gdGhpcy5kaXJlY3Rpb25hbFZhbHVlW2UgLSAxXSA/IGUgKyAxIDogZSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgICAgICByZXR1cm4gbi5zZXQodGhpcy5kaXJlY3Rpb25hbFZhbHVlLCAwKSwgdCAhPT0gZSA/IG4uc2V0KFsgMCBdLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUubGVuZ3RoKSA6ICsrbltuLmxlbmd0aCAtIDFdLCBcbiAgICAgICAgbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KHRoaXMuaW5kZXhJZCwgdGhpcy5kb2N1bWVudEtleSwgdGhpcy5hcnJheVZhbHVlLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCB0KSB7XG4gICAgbGV0IG4gPSBlLmluZGV4SWQgLSB0LmluZGV4SWQ7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBfX1BSSVZBVEVfY29tcGFyZUJ5dGVBcnJheXMoZS5hcnJheVZhbHVlLCB0LmFycmF5VmFsdWUpLCBcbiAgICAwICE9PSBuID8gbiA6IChuID0gX19QUklWQVRFX2NvbXBhcmVCeXRlQXJyYXlzKGUuZGlyZWN0aW9uYWxWYWx1ZSwgdC5kaXJlY3Rpb25hbFZhbHVlKSwgXG4gICAgMCAhPT0gbiA/IG4gOiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUuZG9jdW1lbnRLZXksIHQuZG9jdW1lbnRLZXkpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQnl0ZUFycmF5cyhlLCB0KSB7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aCAmJiBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICBjb25zdCByID0gZVtuXSAtIHRbbl07XG4gICAgICAgIGlmICgwICE9PSByKSByZXR1cm4gcjtcbiAgICB9XG4gICAgcmV0dXJuIGUubGVuZ3RoIC0gdC5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbGlnaHQgcXVlcnkgcGxhbm5lciBmb3IgRmlyZXN0b3JlLlxuICpcbiAqIFRoaXMgY2xhc3MgbWF0Y2hlcyBhIGBGaWVsZEluZGV4YCBhZ2FpbnN0IGEgRmlyZXN0b3JlIFF1ZXJ5IGBUYXJnZXRgLiBJdFxuICogZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaW5kZXggY2FuIGJlIHVzZWQgdG8gc2VydmUgdGhlIHNwZWNpZmllZCB0YXJnZXQuXG4gKlxuICogVGhlIGZvbGxvd2luZyB0YWJsZSBzaG93Y2FzZXMgc29tZSBwb3NzaWJsZSBpbmRleCBjb25maWd1cmF0aW9uczpcbiAqXG4gKiBRdWVyeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJbmRleFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDLCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykgICAgICAgICAgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScsICdkZXNjJykgICAgICAgICAgfCBhIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDLCBiIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKS5vcmRlckJ5KCdiJykgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJ2FycmF5LWNvbnRhaW5zJywgJ2EnKS5vcmRlckJ5KCdiJykgICAgICB8IGEgQ09OVEFJTlMsIGIgQVNDRU5ESU5HXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TXG4gKi8gY2xhc3MgX19QUklWQVRFX1RhcmdldEluZGV4TWF0Y2hlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IG51bGwgIT0gZS5jb2xsZWN0aW9uR3JvdXAgPyBlLmNvbGxlY3Rpb25Hcm91cCA6IGUucGF0aC5sYXN0U2VnbWVudCgpLCBcbiAgICAgICAgdGhpcy5ZdCA9IGUub3JkZXJCeSwgdGhpcy5adCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5maWx0ZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgICAgIGUuaXNJbmVxdWFsaXR5KCkgPyB0aGlzLlh0ID0gZSA6IHRoaXMuWnQucHVzaChlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGluZGV4IGNhbiBiZSB1c2VkIHRvIHNlcnZlIHRoZSBUYXJnZXRJbmRleE1hdGNoZXInc1xuICAgICAqIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEFuIGluZGV4IGlzIGNvbnNpZGVyZWQgY2FwYWJsZSBvZiBzZXJ2aW5nIHRoZSB0YXJnZXQgd2hlbjpcbiAgICAgKiAtIFRoZSB0YXJnZXQgdXNlcyBhbGwgaW5kZXggc2VnbWVudHMgZm9yIGl0cyBmaWx0ZXJzIGFuZCBvcmRlckJ5IGNsYXVzZXMuXG4gICAgICogICBUaGUgdGFyZ2V0IGNhbiBoYXZlIGFkZGl0aW9uYWwgZmlsdGVyIGFuZCBvcmRlckJ5IGNsYXVzZXMsIGJ1dCBub3RcbiAgICAgKiAgIGZld2VyLlxuICAgICAqIC0gSWYgYW4gQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55ZmlsdGVyIGlzIHVzZWQsIHRoZSBpbmRleCBtdXN0IGFsc29cbiAgICAgKiAgIGhhdmUgYSBjb3JyZXNwb25kaW5nIGBDT05UQUlOU2Agc2VnbWVudC5cbiAgICAgKiAtIEFsbCBkaXJlY3Rpb25hbCBpbmRleCBzZWdtZW50cyBjYW4gYmUgbWFwcGVkIHRvIHRoZSB0YXJnZXQgYXMgYSBzZXJpZXMgb2ZcbiAgICAgKiAgIGVxdWFsaXR5IGZpbHRlcnMsIGEgc2luZ2xlIGluZXF1YWxpdHkgZmlsdGVyIGFuZCBhIHNlcmllcyBvZiBvcmRlckJ5XG4gICAgICogICBjbGF1c2VzLlxuICAgICAqIC0gVGhlIHNlZ21lbnRzIHRoYXQgcmVwcmVzZW50IHRoZSBlcXVhbGl0eSBmaWx0ZXJzIG1heSBhcHBlYXIgb3V0IG9mIG9yZGVyLlxuICAgICAqIC0gVGhlIG9wdGlvbmFsIHNlZ21lbnQgZm9yIHRoZSBpbmVxdWFsaXR5IGZpbHRlciBtdXN0IGFwcGVhciBhZnRlciBhbGxcbiAgICAgKiAgIGVxdWFsaXR5IHNlZ21lbnRzLlxuICAgICAqIC0gVGhlIHNlZ21lbnRzIHRoYXQgcmVwcmVzZW50IHRoYXQgb3JkZXJCeSBjbGF1c2Ugb2YgdGhlIHRhcmdldCBtdXN0IGFwcGVhclxuICAgICAqICAgaW4gb3JkZXIgYWZ0ZXIgYWxsIGVxdWFsaXR5IGFuZCBpbmVxdWFsaXR5IHNlZ21lbnRzLiBTaW5nbGUgb3JkZXJCeVxuICAgICAqICAgY2xhdXNlcyBjYW5ub3QgYmUgc2tpcHBlZCwgYnV0IGEgY29udGludW91cyBvcmRlckJ5IHN1ZmZpeCBtYXkgYmVcbiAgICAgKiAgIG9taXR0ZWQuXG4gICAgICovICAgIGVuKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5jb2xsZWN0aW9uR3JvdXAgPT09IHRoaXMuY29sbGVjdGlvbklkKTtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gYXJyYXkgZWxlbWVudCwgZmluZCBhIG1hdGNoaW5nIGZpbHRlci5cbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9maWVsZEluZGV4R2V0QXJyYXlTZWdtZW50KGUpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0ICYmICF0aGlzLnRuKHQpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSk7XG4gICAgICAgIGxldCByID0gbmV3IFNldCwgaSA9IDAsIHMgPSAwO1xuICAgICAgICAvLyBQcm9jZXNzIGFsbCBlcXVhbGl0aWVzIGZpcnN0LiBFcXVhbGl0aWVzIGNhbiBhcHBlYXIgb3V0IG9mIG9yZGVyLlxuICAgICAgICBmb3IgKDtpIDwgbi5sZW5ndGggJiYgdGhpcy50bihuW2ldKTsgKytpKSByID0gci5hZGQobltpXS5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgcHJvY2Vzc2VkIGFsbCBzZWdtZW50cywgYWxsIHNlZ21lbnRzIGFyZSB1c2VkIHRvIHNlcnZlXG4gICAgICAgIC8vIHRoZSBlcXVhbGl0eSBmaWx0ZXJzIGFuZCB3ZSBkbyBub3QgbmVlZCB0byBtYXAgYW55IHNlZ21lbnRzIHRvIHRoZVxuICAgICAgICAvLyB0YXJnZXQncyBpbmVxdWFsaXR5IGFuZCBvcmRlckJ5IGNsYXVzZXMuXG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IG4ubGVuZ3RoKSByZXR1cm4gITA7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMuWHQpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGluZXF1YWxpdHkgZmlsdGVyIGFuZCB0aGUgZmllbGQgd2FzIG5vdCBpbiBvbmUgb2YgdGhlXG4gICAgICAgICAgICAvLyBlcXVhbGl0eSBmaWx0ZXJzIGFib3ZlLCB0aGUgbmV4dCBzZWdtZW50IG11c3QgbWF0Y2ggYm90aCB0aGUgZmlsdGVyXG4gICAgICAgICAgICAvLyBhbmQgdGhlIGZpcnN0IG9yZGVyQnkgY2xhdXNlLlxuICAgICAgICAgICAgaWYgKCFyLmhhcyh0aGlzLlh0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuW2ldO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5ubih0aGlzLlh0LCBlKSB8fCAhdGhpcy5ybih0aGlzLll0W3MrK10sIGUpKSByZXR1cm4gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2k7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWxsIHJlbWFpbmluZyBzZWdtZW50cyBuZWVkIHRvIHJlcHJlc2VudCB0aGUgcHJlZml4IG9mIHRoZSB0YXJnZXQnc1xuICAgICAgICAvLyBvcmRlckJ5LlxuICAgICAgICAgICAgICAgIGZvciAoO2kgPCBuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbltpXTtcbiAgICAgICAgICAgIGlmIChzID49IHRoaXMuWXQubGVuZ3RoIHx8ICF0aGlzLnJuKHRoaXMuWXRbcysrXSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRuKGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuWnQpIGlmICh0aGlzLm5uKHQsIGUpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbm4oZSwgdCkge1xuICAgICAgICBpZiAodm9pZCAwID09PSBlIHx8ICFlLmZpZWxkLmlzRXF1YWwodC5maWVsZFBhdGgpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IGUub3AgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IGUub3A7XG4gICAgICAgIHJldHVybiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyA9PT0gdC5raW5kID09PSBuO1xuICAgIH1cbiAgICBybihlLCB0KSB7XG4gICAgICAgIHJldHVybiAhIWUuZmllbGQuaXNFcXVhbCh0LmZpZWxkUGF0aCkgJiYgKDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gdC5raW5kICYmIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA9PT0gZS5kaXIgfHwgMSAvKiBJbmRleEtpbmQuREVTQ0VORElORyAqLyA9PT0gdC5raW5kICYmIFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovID09PSBlLmRpcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyB1dGlsaXR5IGZ1bmN0aW9ucyB0aGF0IGhlbHAgd2l0aCBib29sZWFuIGxvZ2ljIHRyYW5zZm9ybWF0aW9ucyBuZWVkZWQgZm9yIGhhbmRsaW5nXG4gKiBjb21wbGV4IGZpbHRlcnMgdXNlZCBpbiBxdWVyaWVzLlxuICovXG4vKipcbiAqIFRoZSBgaW5gIGZpbHRlciBpcyBvbmx5IGEgc3ludGFjdGljIHN1Z2FyIG92ZXIgYSBkaXNqdW5jdGlvbiBvZiBlcXVhbGl0aWVzLiBGb3IgaW5zdGFuY2U6IGBhIGluXG4gKiBbMSwyLDNdYCBpcyBpbiBmYWN0IGBhPT0xIHx8IGE9PTIgfHwgYT09M2AuIFRoaXMgbWV0aG9kIGV4cGFuZHMgYW55IGBpbmAgZmlsdGVyIGluIHRoZSBnaXZlblxuICogaW5wdXQgaW50byBhIGRpc2p1bmN0aW9uIG9mIGVxdWFsaXR5IGZpbHRlcnMgYW5kIHJldHVybnMgdGhlIGV4cGFuZGVkIGZpbHRlci5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcHV0ZUluRXhwYW5zaW9uKGUpIHtcbiAgICB2YXIgdCwgbjtcbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfSW5GaWx0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSAobnVsbCA9PT0gKG4gPSBudWxsID09PSAodCA9IGUudmFsdWUuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC52YWx1ZXMpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4ubWFwKCh0ID0+IEZpZWxkRmlsdGVyLmNyZWF0ZShlLmZpZWxkLCBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gLCB0KSkpKSB8fCBbXTtcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKHIsIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgaGF2ZSByZWFjaGVkIG90aGVyIGtpbmRzIG9mIGZpZWxkIGZpbHRlcnMuXG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvLyBXZSBoYXZlIGEgY29tcG9zaXRlIGZpbHRlci5cbiAgICAgICAgY29uc3QgciA9IGUuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2NvbXB1dGVJbkV4cGFuc2lvbihlKSkpO1xuICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKHIsIGUub3ApO1xufVxuXG4vKipcbiAqIEdpdmVuIGEgY29tcG9zaXRlIGZpbHRlciwgcmV0dXJucyB0aGUgbGlzdCBvZiB0ZXJtcyBpbiBpdHMgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0uXG4gKlxuICogPHA+RWFjaCBlbGVtZW50IGluIHRoZSByZXR1cm4gdmFsdWUgaXMgb25lIHRlcm0gb2YgdGhlIHJlc3VsdGluZyBETkYuIEZvciBpbnN0YW5jZTogRm9yIHRoZVxuICogaW5wdXQ6IChBIHx8IEIpICYmIEMsIHRoZSBETkYgZm9ybSBpczogKEEgJiYgQykgfHwgKEIgJiYgQyksIGFuZCB0aGUgcmV0dXJuIHZhbHVlIGlzIGEgbGlzdFxuICogd2l0aCB0d28gZWxlbWVudHM6IGEgY29tcG9zaXRlIGZpbHRlciB0aGF0IHBlcmZvcm1zIChBICYmIEMpLCBhbmQgYSBjb21wb3NpdGUgZmlsdGVyIHRoYXRcbiAqIHBlcmZvcm1zIChCICYmIEMpLlxuICpcbiAqIEBwYXJhbSBmaWx0ZXIgdGhlIGNvbXBvc2l0ZSBmaWx0ZXIgdG8gY2FsY3VsYXRlIERORiB0cmFuc2Zvcm0gZm9yLlxuICogQHJldHVybiB0aGUgdGVybXMgaW4gdGhlIERORiB0cmFuc2Zvcm0uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2dldERuZlRlcm1zKGUpIHtcbiAgICBpZiAoMCA9PT0gZS5nZXRGaWx0ZXJzKCkubGVuZ3RoKSByZXR1cm4gW107XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jb21wdXRlRGlzdHJpYnV0ZWROb3JtYWxGb3JtKF9fUFJJVkFURV9jb21wdXRlSW5FeHBhbnNpb24oZSkpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChfX1BSSVZBVEVfaXNEaXNqdW5jdGl2ZU5vcm1hbEZvcm0odCkpLCBfX1BSSVZBVEVfaXNTaW5nbGVGaWVsZEZpbHRlcih0KSB8fCBfX1BSSVZBVEVfaXNGbGF0Q29uanVuY3Rpb24odCkgPyBbIHQgXSA6IHQuZ2V0RmlsdGVycygpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgYSBzaW5nbGUgZmllbGQgZmlsdGVyLiBlLmcuIChhID09IDEwKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzU2luZ2xlRmllbGRGaWx0ZXIoZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXI7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgdGhlIGNvbmp1bmN0aW9uIG9mIG9uZSBvciBtb3JlIGZpZWxkIGZpbHRlcnMuIGUuZy4gKGEgPT0gMTBcbiAqICYmIGIgPT0gMjApXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzRmxhdENvbmp1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0Q29uanVuY3Rpb24oZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gZmlsdGVyIGlzIGluIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpLlxuICpcbiAqIDxwPkluIGJvb2xlYW4gbG9naWMsIGEgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikgaXMgYSBjYW5vbmljYWwgbm9ybWFsIGZvcm0gb2YgYSBsb2dpY2FsXG4gKiBmb3JtdWxhIGNvbnNpc3Rpbmcgb2YgYSBkaXNqdW5jdGlvbiBvZiBjb25qdW5jdGlvbnM7IGl0IGNhbiBhbHNvIGJlIGRlc2NyaWJlZCBhcyBhbiBPUiBvZiBBTkRzLlxuICpcbiAqIDxwPkZvciBtb3JlIGluZm8sIHZpc2l0OiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EaXNqdW5jdGl2ZV9ub3JtYWxfZm9ybVxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0Rpc2p1bmN0aXZlTm9ybWFsRm9ybShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9pc1NpbmdsZUZpZWxkRmlsdGVyKGUpIHx8IF9fUFJJVkFURV9pc0ZsYXRDb25qdW5jdGlvbihlKSB8fCBcbiAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZmlsdGVyIGlzIHRoZSBkaXNqdW5jdGlvbiBvZiBvbmUgb3IgbW9yZSBcImZsYXQgY29uanVuY3Rpb25zXCIgYW5kXG4gKiBmaWVsZCBmaWx0ZXJzLiBlLmcuIChhID09IDEwKSB8fCAoYj09MjAgJiYgYz09MzApXG4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEaXNqdW5jdGlvbk9mRmllbGRGaWx0ZXJzQW5kRmxhdENvbmp1bmN0aW9ucyhlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Rpc2p1bmN0aW9uKGUpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5nZXRGaWx0ZXJzKCkpIGlmICghX19QUklWQVRFX2lzU2luZ2xlRmllbGRGaWx0ZXIodCkgJiYgIV9fUFJJVkFURV9pc0ZsYXRDb25qdW5jdGlvbih0KSkgcmV0dXJuICExO1xuICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9KGUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcHV0ZURpc3RyaWJ1dGVkTm9ybWFsRm9ybShlKSB7XG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSByZXR1cm4gZTtcbiAgICBpZiAoMSA9PT0gZS5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuIF9fUFJJVkFURV9jb21wdXRlRGlzdHJpYnV0ZWROb3JtYWxGb3JtKGUuZmlsdGVyc1swXSk7XG4gICAgLy8gQ29tcHV0ZSBETkYgZm9yIGVhY2ggb2YgdGhlIHN1YmZpbHRlcnMgZmlyc3RcbiAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2NvbXB1dGVEaXN0cmlidXRlZE5vcm1hbEZvcm0oZSkpKTtcbiAgICBsZXQgbiA9IENvbXBvc2l0ZUZpbHRlci5jcmVhdGUodCwgZS5vcCk7XG4gICAgcmV0dXJuIG4gPSBfX1BSSVZBVEVfYXBwbHlBc3NvY2lhdGlvbihuKSwgX19QUklWQVRFX2lzRGlzanVuY3RpdmVOb3JtYWxGb3JtKG4pID8gbiA6IChfX1BSSVZBVEVfaGFyZEFzc2VydChuIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQoX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24obikpLCBfX1BSSVZBVEVfaGFyZEFzc2VydChuLmZpbHRlcnMubGVuZ3RoID4gMSksIFxuICAgIG4uZmlsdGVycy5yZWR1Y2UoKChlLCB0KSA9PiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb24oZSwgdCkpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbihlLCB0KSB7XG4gICAgbGV0IG47XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQodCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IHQgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICAvLyBGaWVsZEZpbHRlciBGaWVsZEZpbHRlclxuICAgIG4gPSBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyB0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25GaWVsZEZpbHRlcnMoZSwgdCkge1xuICAgICAgICAvLyBDb25qdW5jdGlvbiBkaXN0cmlidXRpb24gZm9yIHR3byBmaWVsZCBmaWx0ZXJzIGlzIHRoZSBjb25qdW5jdGlvbiBvZiB0aGVtLlxuICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShbIGUsIHQgXSwgXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8pO1xuICAgIH0oZSwgdCkgOiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25GaWVsZEFuZENvbXBvc2l0ZUZpbHRlcnMoZSwgdCkgOiB0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25GaWVsZEFuZENvbXBvc2l0ZUZpbHRlcnModCwgZSkgOiBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25Db21wb3NpdGVGaWx0ZXJzKGUsIHQpIHtcbiAgICAgICAgLy8gVGhlcmUgYXJlIGZvdXIgY2FzZXM6XG4gICAgICAgIC8vIChBICYgQikgJiAoQyAmIEQpIC0tPiAoQSAmIEIgJiBDICYgRClcbiAgICAgICAgLy8gKEEgJiBCKSAmIChDIHwgRCkgLS0+IChBICYgQiAmIEMpIHwgKEEgJiBCICYgRClcbiAgICAgICAgLy8gKEEgfCBCKSAmIChDICYgRCkgLS0+IChDICYgRCAmIEEpIHwgKEMgJiBEICYgQilcbiAgICAgICAgLy8gKEEgfCBCKSAmIChDIHwgRCkgLS0+IChBICYgQykgfCAoQSAmIEQpIHwgKEIgJiBDKSB8IChCICYgRClcbiAgICAgICAgLy8gQ2FzZSAxIGlzIGEgbWVyZ2UuXG4gICAgICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlLmZpbHRlcnMubGVuZ3RoID4gMCAmJiB0LmZpbHRlcnMubGVuZ3RoID4gMCksIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKGUpICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKHQpKSByZXR1cm4gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcldpdGhBZGRlZEZpbHRlcnMoZSwgdC5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICAvLyBDYXNlIDIsMyw0IGFsbCBoYXZlIGF0IGxlYXN0IG9uZSBzaWRlIChsaHMgb3IgcmhzKSB0aGF0IGlzIGEgZGlzanVuY3Rpb24uIEluIGFsbCB0aHJlZSBjYXNlc1xuICAgICAgICAvLyB3ZSBzaG91bGQgdGFrZSBlYWNoIGVsZW1lbnQgb2YgdGhlIGRpc2p1bmN0aW9uIGFuZCBkaXN0cmlidXRlIGl0IG92ZXIgdGhlIG90aGVyIHNpZGUsIGFuZFxuICAgICAgICAvLyByZXR1cm4gdGhlIGRpc2p1bmN0aW9uIG9mIHRoZSBkaXN0cmlidXRpb24gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRGlzanVuY3Rpb24oZSkgPyBlIDogdCwgciA9IF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Rpc2p1bmN0aW9uKGUpID8gdCA6IGUsIGkgPSBuLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbihlLCByKSkpO1xuICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShpLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgIH0oZSwgdCksIF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKG4pO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb25GaWVsZEFuZENvbXBvc2l0ZUZpbHRlcnMoZSwgdCkge1xuICAgIC8vIFRoZXJlIGFyZSB0d28gY2FzZXM6XG4gICAgLy8gQSAmIChCICYgQykgLS0+IChBICYgQiAmIEMpXG4gICAgLy8gQSAmIChCIHwgQykgLS0+IChBICYgQikgfCAoQSAmIEMpXG4gICAgaWYgKF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKHQpKSBcbiAgICAvLyBDYXNlIDFcbiAgICByZXR1cm4gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcldpdGhBZGRlZEZpbHRlcnModCwgZS5nZXRGaWx0ZXJzKCkpO1xuICAgIHtcbiAgICAgICAgLy8gQ2FzZSAyXG4gICAgICAgIGNvbnN0IG4gPSB0LmZpbHRlcnMubWFwKCh0ID0+IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbihlLCB0KSkpO1xuICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShuLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoZSBhc3NvY2lhdGl2aXR5IHByb3BlcnR5IHRvIHRoZSBnaXZlbiBmaWx0ZXIgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBmaWx0ZXIuXG4gKlxuICogPHVsPlxuICogICA8bGk+QSB8IChCIHwgQykgPT0gKEEgfCBCKSB8IEMgPT0gKEEgfCBCIHwgQylcbiAqICAgPGxpPkEgJiAoQiAmIEMpID09IChBICYgQikgJiBDID09IChBICYgQiAmIEMpXG4gKiA8L3VsPlxuICpcbiAqIDxwPkZvciBtb3JlIGluZm8sIHZpc2l0OiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Bc3NvY2lhdGl2ZV9wcm9wZXJ0eSNQcm9wb3NpdGlvbmFsX2xvZ2ljXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24oZSkge1xuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgfHwgZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciksIFxuICAgIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikgcmV0dXJuIGU7XG4gICAgY29uc3QgdCA9IGUuZ2V0RmlsdGVycygpO1xuICAgIC8vIElmIHRoZSBjb21wb3NpdGUgZmlsdGVyIG9ubHkgY29udGFpbnMgMSBmaWx0ZXIsIGFwcGx5IGFzc29jaWF0aXZpdHkgdG8gaXQuXG4gICAgICAgIGlmICgxID09PSB0Lmxlbmd0aCkgcmV0dXJuIF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKHRbMF0pO1xuICAgIC8vIEFzc29jaWF0aXZpdHkgYXBwbGllZCB0byBhIGZsYXQgY29tcG9zaXRlIGZpbHRlciByZXN1bHRzIGlzIGl0c2VsZi5cbiAgICAgICAgaWYgKF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQoZSkpIHJldHVybiBlO1xuICAgIC8vIEZpcnN0IGFwcGx5IGFzc29jaWF0aXZpdHkgdG8gYWxsIHN1YmZpbHRlcnMuIFRoaXMgd2lsbCBpbiB0dXJuIHJlY3Vyc2l2ZWx5IGFwcGx5XG4gICAgLy8gYXNzb2NpYXRpdml0eSB0byBhbGwgbmVzdGVkIGNvbXBvc2l0ZSBmaWx0ZXJzIGFuZCBmaWVsZCBmaWx0ZXJzLlxuICAgICAgICBjb25zdCBuID0gdC5tYXAoKGUgPT4gX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24oZSkpKSwgciA9IFtdO1xuICAgIC8vIEZvciBjb21wb3NpdGUgc3ViZmlsdGVycyB0aGF0IHBlcmZvcm0gdGhlIHNhbWUga2luZCBvZiBsb2dpY2FsIG9wZXJhdGlvbiBhcyBgY29tcG9zaXRlRmlsdGVyYFxuICAgIC8vIHRha2Ugb3V0IHRoZWlyIGZpbHRlcnMgYW5kIGFkZCB0aGVtIHRvIGBjb21wb3NpdGVGaWx0ZXJgLiBGb3IgZXhhbXBsZTpcbiAgICAvLyBjb21wb3NpdGVGaWx0ZXIgPSAoQSB8IChCIHwgQyB8IEQpKVxuICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlciA9IChCIHwgQyB8IEQpXG4gICAgLy8gUmVzdWx0OiAoQSB8IEIgfCBDIHwgRClcbiAgICAvLyBOb3RlIHRoYXQgdGhlIGBjb21wb3NpdGVTdWJmaWx0ZXJgIGhhcyBiZWVuIGVsaW1pbmF0ZWQsIGFuZCBpdHMgZmlsdGVycyAoQiwgQywgRCkgaGF2ZSBiZWVuXG4gICAgLy8gYWRkZWQgdG8gdGhlIHRvcC1sZXZlbCBcImNvbXBvc2l0ZUZpbHRlclwiLlxuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gci5wdXNoKHQpIDogdCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiAodC5vcCA9PT0gZS5vcCA/IFxuICAgICAgICAvLyBjb21wb3NpdGVGaWx0ZXI6IChBIHwgKEIgfCBDKSlcbiAgICAgICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyOiAoQiB8IEMpXG4gICAgICAgIC8vIFJlc3VsdDogKEEgfCBCIHwgQylcbiAgICAgICAgci5wdXNoKC4uLnQuZmlsdGVycykgOiBcbiAgICAgICAgLy8gY29tcG9zaXRlRmlsdGVyOiAoQSB8IChCICYgQykpXG4gICAgICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlcjogKEIgJiBDKVxuICAgICAgICAvLyBSZXN1bHQ6IChBIHwgKEIgJiBDKSlcbiAgICAgICAgci5wdXNoKHQpKTtcbiAgICB9KSksIDEgPT09IHIubGVuZ3RoID8gclswXSA6IENvbXBvc2l0ZUZpbHRlci5jcmVhdGUociwgZS5vcCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeUluZGV4TWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc24gPSBuZXcgX19QUklWQVRFX01lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleDtcbiAgICB9XG4gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zbi5hZGQodCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuc24uZ2V0RW50cmllcyh0KSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldChlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhUeXBlKGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKDAgLyogSW5kZXhUeXBlLk5PTkUgKi8pO1xuICAgIH1cbiAgICBnZXRGaWVsZEluZGV4ZXMoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cbiAgICBnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUoZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldChlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShJbmRleE9mZnNldC5taW4oKSk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoSW5kZXhPZmZzZXQubWluKCkpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbikge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cbiAqIEFsc28gdXNlZCBmb3IgaW4tbWVtb3J5IGNhY2hpbmcgYnkgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIGFuZCBpbml0aWFsIGluZGV4IHBvcHVsYXRpb25cbiAqIGluIGluZGV4ZWRkYl9zY2hlbWEudHNcbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IHt9O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBlbnRyeSBhbHJlYWR5IGV4aXN0ZWQuXG4gICAgYWRkKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubGFzdFNlZ21lbnQoKSwgbiA9IGUucG9wTGFzdCgpLCByID0gdGhpcy5pbmRleFt0XSB8fCBuZXcgU29ydGVkU2V0KFJlc291cmNlUGF0aC5jb21wYXJhdG9yKSwgaSA9ICFyLmhhcyhuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhbdF0gPSByLmFkZChuKSwgaTtcbiAgICB9XG4gICAgaGFzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubGFzdFNlZ21lbnQoKSwgbiA9IGUucG9wTGFzdCgpLCByID0gdGhpcy5pbmRleFt0XTtcbiAgICAgICAgcmV0dXJuIHIgJiYgci5oYXMobik7XG4gICAgfVxuICAgIGdldEVudHJpZXMoZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaW5kZXhbZV0gfHwgbmV3IFNvcnRlZFNldChSZXNvdXJjZVBhdGguY29tcGFyYXRvcikpLnRvQXJyYXkoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEVlID0gbmV3IFVpbnQ4QXJyYXkoMCk7XG5cbi8qKlxuICogQSBwZXJzaXN0ZWQgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVW5saWtlIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdlYiBTREsgZG9lcyBub3QgbWVtb2l6ZSBpbmRleFxuICogZGF0YSBhcyBpdCBzdXBwb3J0cyBtdWx0aS10YWIgYWNjZXNzLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiSW5kZXhNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMuZGF0YWJhc2VJZCA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcbiAgICAgICAgICogbGF1bmNoZWQuIFVzZWQgdG8gYXZvaWQgcmUtd3JpdGluZyB0aGUgc2FtZSBlbnRyeSByZXBlYXRlZGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmVcbiAgICAgICAgICogdXNlZCB0byBzYXRpc2Z5IHJlYWRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbiA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgZnJvbSBhIHRhcmdldCB0byBpdHMgZXF1aXZhbGVudCBsaXN0IG9mIHN1Yi10YXJnZXRzLiBFYWNoIHN1Yi10YXJnZXRcbiAgICAgICAgICogY29udGFpbnMgb25seSBvbmUgdGVybSBmcm9tIHRoZSB0YXJnZXQncyBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX24gPSBuZXcgT2JqZWN0TWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldChlKSksICgoZSwgdCkgPT4gX19QUklWQVRFX3RhcmdldEVxdWFscyhlLCB0KSkpLCBcbiAgICAgICAgdGhpcy51aWQgPSBlLnVpZCB8fCBcIlwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBjb2xsZWN0aW9uIHBhcmVudCBpbmRleC5cbiAgICAgKlxuICAgICAqIFJlcGVhdGVkIGNhbGxzIGZvciB0aGUgc2FtZSBjb2xsZWN0aW9uUGF0aCBzaG91bGQgYmUgYXZvaWRlZCB3aXRoaW4gYVxuICAgICAqIHRyYW5zYWN0aW9uIGFzIEluZGV4ZWREYkluZGV4TWFuYWdlciBvbmx5IGNhY2hlcyB3cml0ZXMgb25jZSBhIHRyYW5zYWN0aW9uXG4gICAgICogaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAqLyAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCB0KSB7XG4gICAgICAgIGlmICghdGhpcy5vbi5oYXModCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0Lmxhc3RTZWdtZW50KCksIHIgPSB0LnBvcExhc3QoKTtcbiAgICAgICAgICAgIGUuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sbGVjdGlvbiB0byB0aGUgaW4gbWVtb3J5IGNhY2hlIG9ubHkgaWYgdGhlIHRyYW5zYWN0aW9uIHdhc1xuICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQuXG4gICAgICAgICAgICAgICAgdGhpcy5vbi5hZGQodCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogbixcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgocilcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbGxlY3Rpb25QYXJlbnRzU3RvcmUoZSkucHV0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdCwgXCJcIiBdLCBbIF9fUFJJVkFURV9pbW1lZGlhdGVTdWNjZXNzb3IodCksIFwiXCIgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbGxlY3Rpb25QYXJlbnRzU3RvcmUoZSkuRyhyKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiBlKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2xsZWN0aW9uSWQgZ3VhcmQgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSAoYW5kIGlzbid0IGFzIGxvbmdcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleGVkZGJzaGltIHRoYXQgYnJlYWtzIG91ciByYW5nZSBpbiBvdXIgdGVzdHMgcnVubmluZyBpbiBub2RlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbS9pc3N1ZXMvMzM0XG4gICAgICAgICAgICAgICAgaWYgKHIuY29sbGVjdGlvbklkICE9PSB0KSBicmVhaztcbiAgICAgICAgICAgICAgICBuLnB1c2goX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChyLnBhcmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYWRkRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBWZXJpZnkgdGhhdCB0aGUgYXV0by1pbmNyZW1lbnRpbmcgaW5kZXggSUQgd29ya3MgaW5cbiAgICAgICAgLy8gU2FmYXJpICYgRmlyZWZveC5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSwgciA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiSW5kZXhDb25maWd1cmF0aW9uKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaW5kZXhJZDogZS5pbmRleElkLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogZS5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmZpZWxkcy5tYXAoKGUgPT4gWyBlLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgZS5raW5kIF0pKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgZGVsZXRlIHIuaW5kZXhJZDtcbiAgICAgICAgLy8gYGluZGV4SWRgIGlzIGF1dG8tcG9wdWxhdGVkIGJ5IEluZGV4ZWREYlxuICAgICAgICBjb25zdCBpID0gbi5hZGQocik7XG4gICAgICAgIGlmICh0LmluZGV4U3RhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIGkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgbi5wdXQoX19QUklWQVRFX3RvRGJJbmRleFN0YXRlKGUsIHRoaXMudXNlciwgdC5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyLCB0LmluZGV4U3RhdGUub2Zmc2V0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGkubmV4dCgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSwgciA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSksIGkgPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZSh0LmluZGV4SWQpLm5leHQoKCgpID0+IHIuZGVsZXRlKElEQktleVJhbmdlLmJvdW5kKFsgdC5pbmRleElkIF0sIFsgdC5pbmRleElkICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCkpKSkubmV4dCgoKCkgPT4gaS5kZWxldGUoSURCS2V5UmFuZ2UuYm91bmQoWyB0LmluZGV4SWQgXSwgWyB0LmluZGV4SWQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSkpKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpO1xuICAgICAgICBsZXQgciA9ICEwO1xuICAgICAgICBjb25zdCBpID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuYW4odCksICh0ID0+IHRoaXMudW4oZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICByICYmIChyID0gISFlKSwgaS5zZXQodCwgZSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGksICgoaSwgcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJJbmRleE1hbmFnZXJcIiwgYFVzaW5nIGluZGV4ICR7ZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhUb1N0cmluZyhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYGlkPSR7ZS5pbmRleElkfXxjZz0ke2UuY29sbGVjdGlvbkdyb3VwfXxmPSR7ZS5maWVsZHMubWFwKChlID0+IGAke2UuZmllbGRQYXRofToke2Uua2luZH1gKSkuam9pbihcIixcIil9YDtcbiAgICAgICAgICAgICAgICAgICAgfShpKX0gdG8gZXhlY3V0ZSAke19fUFJJVkFURV9jYW5vbmlmeVRhcmdldCh0KX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRBcnJheVZhbHVlcyhlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCBuLmZpZWxkUGF0aCkpIHN3aXRjaCAodC5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC52YWx1ZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgdC52YWx1ZSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGFyZSBub3QgYXJyYXkgZmlsdGVycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGlzdCBvZiB2YWx1ZXMgdGhhdCBhcmUgdXNlZCBpbiAhPSBvciBOT1RfSU4gZmlsdGVycy4gUmV0dXJuc1xuICogYG51bGxgIGlmIHRoZXJlIGFyZSBubyBzdWNoIGZpbHRlcnMuXG4gKi8gKHMsIGkpLCBfID0gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldE5vdEluVmFsdWVzKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyh0KSkgZm9yIChjb25zdCB0IG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIHIuZmllbGRQYXRoKSkgc3dpdGNoICh0Lm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSBlcXVhbGl0eSBwcmVmaXgsIHdoaWNoIGlzIGVuY29kZWQgaW4gdGhlIGluZGV4IHZhbHVlIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBpbmVxdWFsaXR5IChlLmcuIGBhID09ICdhJyAmJiBiICE9ICdiJ2AgaXMgZW5jb2RlZCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGB2YWx1ZSAhPSAnYWInYCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5zZXQoci5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdEluL05vdEVxdWFsIGlzIGFsd2F5cyBhIHN1ZmZpeC4gVGhlcmUgY2Fubm90IGJlIGFueSByZW1haW5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWdtZW50cyBhbmQgaGVuY2Ugd2UgY2FuIHJldHVybiBlYXJseSBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNldChyLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgdC52YWx1ZSksIEFycmF5LmZyb20obi52YWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgbm90SW4gYm91bmRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgbG93ZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBzdGFydGluZyBwb2ludCB0b1xuICogc2NhbiB0aGUgaW5kZXggZGVmaW5lZCBieSBgZmllbGRJbmRleGAuIFJldHVybnMgYE1JTl9WQUxVRWAgaWYgbm8gbG93ZXIgYm91bmRcbiAqIGV4aXN0cy5cbiAqLyAocywgaSksIGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0TG93ZXJCb3VuZChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYSBsb3dlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnRBdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHModCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBpLmtpbmQgPyBfX1BSSVZBVEVfdGFyZ2V0R2V0QXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuc3RhcnRBdCkgOiBfX1BSSVZBVEVfdGFyZ2V0R2V0RGVzY2VuZGluZ0JvdW5kKGUsIGkuZmllbGRQYXRoLCBlLnN0YXJ0QXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCh0LnZhbHVlKSwgciAmJiAociA9IHQuaW5jbHVzaXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmQobiwgcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGFuIHVwcGVyIGJvdW5kIG9mIGZpZWxkIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIGFzIGFuIGVuZGluZyBwb2ludFxuICogd2hlbiBzY2FubmluZyB0aGUgaW5kZXggZGVmaW5lZCBieSBgZmllbGRJbmRleGAuIFJldHVybnMgYE1BWF9WQUxVRWAgaWYgbm9cbiAqIHVwcGVyIGJvdW5kIGV4aXN0cy5cbiAqLyAocywgaSksIHUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0VXBwZXJCb3VuZChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYW4gdXBwZXIgYm91bmQgaWYgdGhlcmUgaXMgYSBzdWl0YWJsZSBmaWx0ZXIgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuZEF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IGkua2luZCA/IF9fUFJJVkFURV90YXJnZXRHZXREZXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuZW5kQXQpIDogX19QUklWQVRFX3RhcmdldEdldEFzY2VuZGluZ0JvdW5kKGUsIGkuZmllbGRQYXRoLCBlLmVuZEF0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2godC52YWx1ZSksIHIgJiYgKHIgPSB0LmluY2x1c2l2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG4sIHIpO1xuICAgICAgICAgICAgICAgICAgICB9KHMsIGkpLCBjID0gdGhpcy5jbihpLCBzLCBhKSwgbCA9IHRoaXMuY24oaSwgcywgdSksIGggPSB0aGlzLmxuKGksIHMsIF8pLCBQID0gdGhpcy5obihpLmluZGV4SWQsIG8sIGMsIGEuaW5jbHVzaXZlLCBsLCB1LmluY2x1c2l2ZSwgaCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChQLCAoaSA9PiBuLkgoaSwgdC5saW1pdCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHModC5kb2N1bWVudEtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5oYXMobikgfHwgKGUgPSBlLmFkZChuKSwgci5wdXNoKG4pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhbihlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5fbi5nZXQoZSk7XG4gICAgICAgIGlmICh0KSByZXR1cm4gdDtcbiAgICAgICAgaWYgKDAgPT09IGUuZmlsdGVycy5sZW5ndGgpIHQgPSBbIGUgXTsgZWxzZSB7XG4gICAgICAgICAgICB0ID0gX19QUklWQVRFX2dldERuZlRlcm1zKENvbXBvc2l0ZUZpbHRlci5jcmVhdGUoZS5maWx0ZXJzLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpLm1hcCgodCA9PiBfX1BSSVZBVEVfbmV3VGFyZ2V0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUub3JkZXJCeSwgdC5nZXRGaWx0ZXJzKCksIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbi5zZXQoZSwgdCksIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBrZXkgcmFuZ2UgcXVlcnkgb24gYERiSW5kZXhFbnRyeVN0b3JlYCB0aGF0IHVuaW9ucyBhbGxcbiAgICAgKiBib3VuZHMuXG4gICAgICovICAgIGhuKGUsIHQsIG4sIHIsIGksIHMsIG8pIHtcbiAgICAgICAgLy8gVGhlIG51bWJlciBvZiB0b3RhbCBpbmRleCBzY2FucyB3ZSB1bmlvbiB0b2dldGhlci4gVGhpcyBpcyBzaW1pbGFyIHRvIGFcbiAgICAgICAgLy8gZGlzdHJpYnV0ZWQgbm9ybWFsIGZvcm0sIGJ1dCBhZGFwdGVkIGZvciBhcnJheSB2YWx1ZXMuIFdlIGNyZWF0ZSBhIHNpbmdsZVxuICAgICAgICAvLyBpbmRleCByYW5nZSBwZXIgdmFsdWUgaW4gYW4gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlclxuICAgICAgICAvLyBjb21iaW5lZCB3aXRoIHRoZSB2YWx1ZXMgZnJvbSB0aGUgcXVlcnkgYm91bmRzLlxuICAgICAgICBjb25zdCBfID0gKG51bGwgIT0gdCA/IHQubGVuZ3RoIDogMSkgKiBNYXRoLm1heChuLmxlbmd0aCwgaS5sZW5ndGgpLCBhID0gXyAvIChudWxsICE9IHQgPyB0Lmxlbmd0aCA6IDEpLCB1ID0gW107XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgXzsgKytjKSB7XG4gICAgICAgICAgICBjb25zdCBfID0gdCA/IHRoaXMuUG4odFtjIC8gYV0pIDogRWUsIGwgPSB0aGlzLkluKGUsIF8sIG5bYyAlIGFdLCByKSwgaCA9IHRoaXMuVG4oZSwgXywgaVtjICUgYV0sIHMpLCBQID0gby5tYXAoKHQgPT4gdGhpcy5JbihlLCBfLCB0LCBcbiAgICAgICAgICAgIC8qIGluY2x1c2l2ZT0gKi8gITApKSk7XG4gICAgICAgICAgICB1LnB1c2goLi4udGhpcy5jcmVhdGVSYW5nZShsLCBoLCBQKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHU7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIGxvd2VyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAgSW4oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KGUsIERvY3VtZW50S2V5LmVtcHR5KCksIHQsIG4pO1xuICAgICAgICByZXR1cm4gciA/IGkgOiBpLkp0KCk7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIHVwcGVyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAgVG4oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KGUsIERvY3VtZW50S2V5LmVtcHR5KCksIHQsIG4pO1xuICAgICAgICByZXR1cm4gciA/IGkuSnQoKSA6IGk7XG4gICAgfVxuICAgIHVuKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0SW5kZXhNYXRjaGVyKHQpLCByID0gbnVsbCAhPSB0LmNvbGxlY3Rpb25Hcm91cCA/IHQuY29sbGVjdGlvbkdyb3VwIDogdC5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyhlLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgaW5kZXggd2l0aCB0aGUgbW9zdCBudW1iZXIgb2Ygc2VnbWVudHMuXG4gICAgICAgICAgICBsZXQgdCA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZSkge1xuICAgICAgICAgICAgICAgIG4uZW4ocikgJiYgKCF0IHx8IHIuZmllbGRzLmxlbmd0aCA+IHQuZmllbGRzLmxlbmd0aCkgJiYgKHQgPSByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldEluZGV4VHlwZShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gMiAvKiBJbmRleFR5cGUuRlVMTCAqLztcbiAgICAgICAgY29uc3QgciA9IHRoaXMuYW4odCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyLCAodCA9PiB0aGlzLnVuKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZSA/IDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gIT09IG4gJiYgZS5maWVsZHMubGVuZ3RoIDwgZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldFNlZ21lbnRDb3VudChlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpLCBuID0gITE7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIGUuZmlsdGVycykgZm9yIChjb25zdCBlIG9mIHIuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBcbiAgICAgICAgICAgICAgICAvLyBfX25hbWVfXyBpcyBub3QgYW4gZXhwbGljaXQgc2VnbWVudCBvZiBhbnkgaW5kZXgsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjb3VudCBpdC5cbiAgICAgICAgICAgICAgICBlLmZpZWxkLmlzS2V5RmllbGQoKSB8fCAoXG4gICAgICAgICAgICAgICAgLy8gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlcnMgbXVzdCBiZSBjb3VudGVkIHNlcGFyYXRlbHkuXG4gICAgICAgICAgICAgICAgLy8gRm9yIGluc3RhbmNlLCBpdCBpcyBwb3NzaWJsZSB0byBoYXZlIGFuIGluZGV4IGZvciBcImEgQVJSQVkgYSBBU0NcIi4gRXZlblxuICAgICAgICAgICAgICAgIC8vIHRob3VnaCB0aGVzZSBhcmUgb24gdGhlIHNhbWUgZmllbGQsIHRoZXkgc2hvdWxkIGJlIGNvdW50ZWQgYXMgdHdvXG4gICAgICAgICAgICAgICAgLy8gc2VwYXJhdGUgc2VnbWVudHMgaW4gYW4gaW5kZXguXG4gICAgICAgICAgICAgICAgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBlLm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBlLm9wID8gbiA9ICEwIDogdCA9IHQuYWRkKGUuZmllbGQpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5vcmRlckJ5KSBcbiAgICAgICAgICAgICAgICAvLyBfX25hbWVfXyBpcyBub3QgYW4gZXhwbGljaXQgc2VnbWVudCBvZiBhbnkgaW5kZXgsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjb3VudCBpdC5cbiAgICAgICAgICAgICAgICBuLmZpZWxkLmlzS2V5RmllbGQoKSB8fCAodCA9IHQuYWRkKG4uZmllbGQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5zaXplICsgKG4gPyAxIDogMCk7XG4gICAgICAgICAgICB9KHQpICYmIChuID0gMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLykgOiBuID0gMCAvKiBJbmRleFR5cGUuTk9ORSAqLztcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gXG4gICAgICAgIC8vIE9SIHF1ZXJpZXMgaGF2ZSBtb3JlIHRoYW4gb25lIHN1Yi10YXJnZXQgKG9uZSBzdWItdGFyZ2V0IHBlciBETkYgdGVybSkuIFdlIGN1cnJlbnRseSBjb25zaWRlclxuICAgICAgICAvLyBPUiBxdWVyaWVzIHRoYXQgaGF2ZSBhIGBsaW1pdGAgdG8gaGF2ZSBhIHBhcnRpYWwgaW5kZXguIEZvciBzdWNoIHF1ZXJpZXMgd2UgcGVyZm9ybSBzb3J0aW5nXG4gICAgICAgIC8vIGFuZCBhcHBseSB0aGUgbGltaXQgaW4gbWVtb3J5IGFzIGEgcG9zdC1wcm9jZXNzaW5nIHN0ZXAuXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRIYXNMaW1pdChlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gZS5saW1pdDtcbiAgICAgICAgfSh0KSAmJiByLmxlbmd0aCA+IDEgJiYgMiAvKiBJbmRleFR5cGUuRlVMTCAqLyA9PT0gbiA/IDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gOiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGJ5dGUgZW5jb2RlZCBmb3JtIG9mIHRoZSBkaXJlY3Rpb25hbCB2YWx1ZXMgaW4gdGhlIGZpZWxkIGluZGV4LlxuICAgICAqIFJldHVybnMgYG51bGxgIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBoYXZlIGFsbCBmaWVsZHMgc3BlY2lmaWVkIGluIHRoZVxuICAgICAqIGluZGV4LlxuICAgICAqLyAgICBFbihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXI7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQoci5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5IdChyLmtpbmQpO1xuICAgICAgICAgICAgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuYnQuUHQoZSwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG4uV3QoKTtcbiAgICB9XG4gICAgLyoqIEVuY29kZXMgYSBzaW5nbGUgdmFsdWUgdG8gdGhlIGFzY2VuZGluZyBpbmRleCBmb3JtYXQuICovICAgIFBuKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2RlcjtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLmJ0LlB0KGUsIHQuSHQoMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovKSksIFxuICAgICAgICB0Lld0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW5jb2RlZCBmb3JtIG9mIHRoZSBkb2N1bWVudCBrZXkgdGhhdCBzb3J0cyBiYXNlZCBvbiB0aGUga2V5XG4gICAgICogb3JkZXJpbmcgb2YgdGhlIGZpZWxkIGluZGV4LlxuICAgICAqLyAgICBkbihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXI7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlci5idC5QdChfX1BSSVZBVEVfcmVmVmFsdWUodGhpcy5kYXRhYmFzZUlkLCB0KSwgbi5IdChmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleEdldEtleU9yZGVyKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSk7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdC5sZW5ndGggPyAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gOiB0W3QubGVuZ3RoIC0gMV0ua2luZDtcbiAgICAgICAgfShlKSkpLCBuLld0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGZpZWxkIHZhbHVlcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuXG4gICAgICogRm9yIElOIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGxuKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKG51bGwgPT09IG4pIHJldHVybiBbXTtcbiAgICAgICAgbGV0IHIgPSBbXTtcbiAgICAgICAgci5wdXNoKG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2Rlcik7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5baSsrXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiByKSBpZiAodGhpcy5Bbih0LCBzLmZpZWxkUGF0aCkgJiYgaXNBcnJheShlKSkgciA9IHRoaXMuUm4ociwgcywgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLkh0KHMua2luZCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuYnQuUHQoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuVm4ocik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGJvdW5kcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuIEZvciBJTlxuICAgICAqIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGNuKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG4oZSwgdCwgbi5wb3NpdGlvbik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBieXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGUgcHJvdmlkZWQgZW5jb2RlcnMuICovICAgIFZuKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyArK24pIHRbbl0gPSBlW25dLld0KCk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2VwYXJhdGUgZW5jb2RlciBmb3IgZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogVGhlIG1ldGhvZCBhcHBlbmRzIGVhY2ggdmFsdWUgdG8gYWxsIGV4aXN0aW5nIGVuY29kZXJzIChlLmcuIGZpbHRlcihcImFcIixcbiAgICAgKiBcIj09XCIsIFwiYTFcIikuZmlsdGVyKFwiYlwiLCBcImluXCIsIFtcImIxXCIsIFwiYjJcIl0pIGJlY29tZXMgW1wiYTEsYjFcIiwgXCJhMSxiMlwiXSkuIEFcbiAgICAgKiBsaXN0IG9mIG5ldyBlbmNvZGVycyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgUm4oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gWyAuLi5lIF0sIGkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4uYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pIGZvciAoY29uc3QgbiBvZiByKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyO1xuICAgICAgICAgICAgci5zZWVkKG4uV3QoKSksIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLmJ0LlB0KGUsIHIuSHQodC5raW5kKSksIGkucHVzaChyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgQW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gISFlLmZpbHRlcnMuZmluZCgoZSA9PiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgJiYgZS5maWVsZC5pc0VxdWFsKHQpICYmIChcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IGUub3AgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IGUub3ApKSk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIHIgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gKHQgPyBuLkcoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBJREJLZXlSYW5nZS5ib3VuZCh0LCB0KSkgOiBuLkcoKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goZSwgKGUgPT4gci5nZXQoWyBlLmluZGV4SWQsIHRoaXMudWlkIF0pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIHQucHVzaChmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiSW5kZXhDb25maWd1cmF0aW9uKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHQgPyBuZXcgSW5kZXhTdGF0ZSh0LnNlcXVlbmNlTnVtYmVyLCBuZXcgSW5kZXhPZmZzZXQoX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcCh0LnJlYWRUaW1lKSwgbmV3IERvY3VtZW50S2V5KF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgodC5kb2N1bWVudEtleSkpLCB0Lmxhcmdlc3RCYXRjaElkKSkgOiBJbmRleFN0YXRlLmVtcHR5KCksIHIgPSBlLmZpZWxkcy5tYXAoKChbZSwgdF0pID0+IG5ldyBJbmRleFNlZ21lbnQoRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdChlKSwgdCkpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZEluZGV4KGUuaW5kZXhJZCwgZS5jb2xsZWN0aW9uR3JvdXAsIHIsIG4pO1xuICAgICAgICAgICAgICAgIH0oZSwgbikpO1xuICAgICAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gdCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyhlKS5uZXh0KChlID0+IDAgPT09IGUubGVuZ3RoID8gbnVsbCA6IChlLnNvcnQoKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyIC0gdC5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyO1xuICAgICAgICAgICAgcmV0dXJuIDAgIT09IG4gPyBuIDogX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5jb2xsZWN0aW9uR3JvdXAsIHQuY29sbGVjdGlvbkdyb3VwKTtcbiAgICAgICAgfSkpLCBlWzBdLmNvbGxlY3Rpb25Hcm91cCkpKTtcbiAgICB9XG4gICAgdXBkYXRlQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSwgaSA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1uKGUpLm5leHQoKGUgPT4gci5HKFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgSURCS2V5UmFuZ2UuYm91bmQodCwgdCkpLm5leHQoKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4gaS5wdXQoX19QUklWQVRFX3RvRGJJbmRleFN0YXRlKHQuaW5kZXhJZCwgdGhpcy51c2VyLCBlLCBuKSkpKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUluZGV4RW50cmllcyhlLCB0KSB7XG4gICAgICAgIC8vIFBvcnRpbmcgTm90ZTogYGdldEZpZWxkSW5kZXhlcygpYCBvbiBXZWIgZG9lcyBub3QgY2FjaGUgaW5kZXggbG9va3VwcyBhc1xuICAgICAgICAvLyBpdCBjb3VsZCBiZSB1c2VkIGFjcm9zcyBkaWZmZXJlbnQgSW5kZXhlZERCIHRyYW5zYWN0aW9ucy4gQXMgYW55IGNhY2hlZFxuICAgICAgICAvLyBkYXRhIG1pZ2h0IGJlIGludmFsaWRhdGVkIGJ5IG90aGVyIG11bHRpLXRhYiBjbGllbnRzLCB3ZSBjYW4gb25seSB0cnVzdFxuICAgICAgICAvLyBkYXRhIHdpdGhpbiBhIHNpbmdsZSBJbmRleGVkREIgdHJhbnNhY3Rpb24uIFdlIHRoZXJlZm9yZSBhZGQgYSBjYWNoZVxuICAgICAgICAvLyBoZXJlLlxuICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICgodCwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uZ2V0KHQuY29sbGVjdGlvbkdyb3VwKTtcbiAgICAgICAgICAgIHJldHVybiAoaSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGkpIDogdGhpcy5nZXRGaWVsZEluZGV4ZXMoZSwgdC5jb2xsZWN0aW9uR3JvdXApKS5uZXh0KChpID0+IChuLnNldCh0LmNvbGxlY3Rpb25Hcm91cCwgaSksIFxuICAgICAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goaSwgKG4gPT4gdGhpcy5mbihlLCB0LCBuKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5nbihyLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5pc0VxdWFsKGkpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSA6IHRoaXMucG4oZSwgciwgbiwgdCwgaSk7XG4gICAgICAgICAgICB9KSkpKSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB5bihlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSkucHV0KHtcbiAgICAgICAgICAgIGluZGV4SWQ6IHIuaW5kZXhJZCxcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXG4gICAgICAgICAgICBhcnJheVZhbHVlOiByLmFycmF5VmFsdWUsXG4gICAgICAgICAgICBkaXJlY3Rpb25hbFZhbHVlOiByLmRpcmVjdGlvbmFsVmFsdWUsXG4gICAgICAgICAgICBvcmRlcmVkRG9jdW1lbnRLZXk6IHRoaXMuZG4obiwgdC5rZXkpLFxuICAgICAgICAgICAgZG9jdW1lbnRLZXk6IHQua2V5LnBhdGgudG9BcnJheSgpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3bihlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSkuZGVsZXRlKFsgci5pbmRleElkLCB0aGlzLnVpZCwgci5hcnJheVZhbHVlLCByLmRpcmVjdGlvbmFsVmFsdWUsIHRoaXMuZG4obiwgdC5rZXkpLCB0LmtleS5wYXRoLnRvQXJyYXkoKSBdKTtcbiAgICB9XG4gICAgZm4oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpO1xuICAgICAgICBsZXQgaSA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHIuWih7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShbIG4uaW5kZXhJZCwgdGhpcy51aWQsIHRoaXMuZG4obiwgdCkgXSlcbiAgICAgICAgfSwgKChlLCByKSA9PiB7XG4gICAgICAgICAgICBpID0gaS5hZGQobmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KG4uaW5kZXhJZCwgdCwgci5hcnJheVZhbHVlLCByLmRpcmVjdGlvbmFsVmFsdWUpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gICAgZ24oZSwgdCkge1xuICAgICAgICBsZXQgbiA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuRW4odCwgZSk7XG4gICAgICAgIGlmIChudWxsID09IHIpIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQodCk7XG4gICAgICAgIGlmIChudWxsICE9IGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmRhdGEuZmllbGQoaS5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkocykpIGZvciAoY29uc3QgaSBvZiBzLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKSBuID0gbi5hZGQobmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KHQuaW5kZXhJZCwgZS5rZXksIHRoaXMuUG4oaSksIHIpKTtcbiAgICAgICAgfSBlbHNlIG4gPSBuLmFkZChuZXcgX19QUklWQVRFX0luZGV4RW50cnkodC5pbmRleElkLCBlLmtleSwgRWUsIHIpKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBwcm92aWRlZCBkb2N1bWVudCBieSBkZWxldGluZyBlbnRyaWVzXG4gICAgICogdGhhdCBhcmUgbm8gbG9uZ2VyIHJlZmVyZW5jZWQgaW4gYG5ld0VudHJpZXNgIGFuZCBhZGRpbmcgYWxsIG5ld2x5IGFkZGVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgcG4oZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJJbmRleE1hbmFnZXJcIiwgXCJVcGRhdGluZyBpbmRleCBlbnRyaWVzIGZvciBkb2N1bWVudCAnJXMnXCIsIHQua2V5KTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2RpZmZTb3J0ZWRTZXRzKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmdldEl0ZXJhdG9yKCksIG8gPSB0LmdldEl0ZXJhdG9yKCk7XG4gICAgICAgICAgICBsZXQgXyA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IocyksIGEgPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKG8pO1xuICAgICAgICAgICAgLy8gV2FsayB0aHJvdWdoIHRoZSB0d28gc2V0cyBhdCB0aGUgc2FtZSB0aW1lLCB1c2luZyB0aGUgb3JkZXJpbmcgZGVmaW5lZCBieVxuICAgICAgICAgICAgLy8gYGNvbXBhcmF0b3JgLlxuICAgICAgICAgICAgZm9yICg7XyB8fCBhOyApIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9ICExLCB0ID0gITE7XG4gICAgICAgICAgICAgICAgaWYgKF8gJiYgYSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gbihfLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgciA8IDAgPyBcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIHJlbW92ZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZFxuICAgICAgICAgICAgICAgICAgICAvLyB3YWxrdGhyb3VnaCBpcyBvbmx5IGluIGBiZWZvcmVgLlxuICAgICAgICAgICAgICAgICAgICB0ID0gITAgOiByID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG9ubHkgaW4gYGFmdGVyYC5cbiAgICAgICAgICAgICAgICAgICAgZSA9ICEwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgbnVsbCAhPSBfID8gdCA9ICEwIDogZSA9ICEwO1xuICAgICAgICAgICAgICAgIGUgPyAocihhKSwgYSA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IobykpIDogdCA/IChpKF8pLCBfID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihzKSkgOiAoXyA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IocyksIFxuICAgICAgICAgICAgICAgIGEgPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKG8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShyLCBpLCBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IsIChcbiAgICAgICAgLyogb25BZGQ9ICovIHIgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKHRoaXMueW4oZSwgdCwgbiwgcikpO1xuICAgICAgICB9KSwgKFxuICAgICAgICAvKiBvblJlbW92ZT0gKi8gciA9PiB7XG4gICAgICAgICAgICBzLnB1c2godGhpcy53bihlLCB0LCBuLCByKSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3Iocyk7XG4gICAgfVxuICAgIG1uKGUpIHtcbiAgICAgICAgbGV0IHQgPSAxO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcInNlcXVlbmNlTnVtYmVySW5kZXhcIixcbiAgICAgICAgICAgIHJldmVyc2U6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVpZCwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgXSlcbiAgICAgICAgfSwgKChlLCBuLCByKSA9PiB7XG4gICAgICAgICAgICByLmRvbmUoKSwgdCA9IG4uc2VxdWVuY2VOdW1iZXIgKyAxO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHNldCBvZiBJREIgcmFuZ2VzIHRoYXQgc3BsaXRzIHRoZSBleGlzdGluZyByYW5nZSBhbmQgZXhjbHVkZXNcbiAgICAgKiBhbnkgdmFsdWVzIHRoYXQgbWF0Y2ggdGhlIGBub3RJblZhbHVlYCBmcm9tIHRoZXNlIHJhbmdlcy4gQXMgYW4gZXhhbXBsZSxcbiAgICAgKiAnW2ZvbyA+IDIgJiYgZm9vICE9IDNdYCBiZWNvbWVzICBgW2ZvbyA+IDIgJiYgPCAzLCBmb28gPiAzXWAuXG4gICAgICovICAgIGNyZWF0ZVJhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gVGhlIG5vdEluIHZhbHVlcyBuZWVkIHRvIGJlIHNvcnRlZCBhbmQgdW5pcXVlIHNvIHRoYXQgd2UgY2FuIHJldHVybiBhXG4gICAgICAgIC8vIHNvcnRlZCBzZXQgb2Ygbm9uLW92ZXJsYXBwaW5nIHJhbmdlcy5cbiAgICAgICAgbiA9IG4uc29ydCgoKGUsIHQpID0+IF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCB0KSkpLmZpbHRlcigoKGUsIHQsIG4pID0+ICF0IHx8IDAgIT09IF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCBuW3QgLSAxXSkpKTtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByLnB1c2goZSk7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBuKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGksIGUpLCBzID0gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGksIHQpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIGlzIHRoZSBsb3dlciBib3VuZC4gV2UgdGhlcmVmb3JlIG5lZWQgdG8gcmFpc2UgdGhlIGJvdW5kXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCB2YWx1ZS5cbiAgICAgICAgICAgIHJbMF0gPSBlLkp0KCk7IGVsc2UgaWYgKG4gPiAwICYmIHMgPCAwKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCBpcyBpbiB0aGUgbWlkZGxlIG9mIHRoZSByYW5nZVxuICAgICAgICAgICAgci5wdXNoKGkpLCByLnB1c2goaS5KdCgpKTsgZWxzZSBpZiAocyA+IDApIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIChhbmQgYWxsIGZvbGxvd2luZyB2YWx1ZXMpIGFyZSBvdXQgb2YgdGhlIHJhbmdlXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByLnB1c2godCk7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCByLmxlbmd0aDsgZSArPSAyKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgdHdvIGJvdW5kcyB0aGF0IHdpbGwgY3JlYXRlIGFuIHVubWF0Y2hhYmxlIGtleSByYW5nZSxcbiAgICAgICAgICAgIC8vIHRoZW4gd2UgcmV0dXJuIGFuIGVtcHR5IHNldCBvZiBrZXkgcmFuZ2VzLlxuICAgICAgICAgICAgaWYgKHRoaXMuU24ocltlXSwgcltlICsgMV0pKSByZXR1cm4gW107XG4gICAgICAgICAgICBjb25zdCB0ID0gWyByW2VdLmluZGV4SWQsIHRoaXMudWlkLCByW2VdLmFycmF5VmFsdWUsIHJbZV0uZGlyZWN0aW9uYWxWYWx1ZSwgRWUsIFtdIF0sIG4gPSBbIHJbZSArIDFdLmluZGV4SWQsIHRoaXMudWlkLCByW2UgKyAxXS5hcnJheVZhbHVlLCByW2UgKyAxXS5kaXJlY3Rpb25hbFZhbHVlLCBFZSwgW10gXTtcbiAgICAgICAgICAgIGkucHVzaChJREJLZXlSYW5nZS5ib3VuZCh0LCBuKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIFNuKGUsIHQpIHtcbiAgICAgICAgLy8gSWYgbG93ZXIgYm91bmQgaXMgZ3JlYXRlciB0aGFuIHRoZSB1cHBlciBib3VuZCwgdGhlbiB0aGUga2V5XG4gICAgICAgIC8vIHJhbmdlIGNhbiBuZXZlciBiZSBtYXRjaGVkLlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGUsIHQpID4gMDtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyhlLCB0KS5uZXh0KF9fUFJJVkFURV9nZXRNaW5PZmZzZXRGcm9tRmllbGRJbmRleGVzKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5tYXBBcnJheSh0aGlzLmFuKHQpLCAodCA9PiB0aGlzLnVuKGUsIHQpLm5leHQoKGUgPT4gZSB8fCBmYWlsKCkpKSkpLm5leHQoX19QUklWQVRFX2dldE1pbk9mZnNldEZyb21GaWVsZEluZGV4ZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNvbGxlY3Rpb25QYXJlbnRzXG4gKiBkb2N1bWVudCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29sbGVjdGlvblBhcmVudHNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImNvbGxlY3Rpb25QYXJlbnRzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggZW50cnkgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImluZGV4RW50cmllc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IGNvbmZpZ3VyYXRpb24gb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImluZGV4Q29uZmlndXJhdGlvblwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IHN0YXRlIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiaW5kZXhTdGF0ZVwiKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldE1pbk9mZnNldEZyb21GaWVsZEluZGV4ZXMoZSkge1xuICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDAgIT09IGUubGVuZ3RoKTtcbiAgICBsZXQgdCA9IGVbMF0uaW5kZXhTdGF0ZS5vZmZzZXQsIG4gPSB0Lmxhcmdlc3RCYXRjaElkO1xuICAgIGZvciAobGV0IHIgPSAxOyByIDwgZS5sZW5ndGg7IHIrKykge1xuICAgICAgICBjb25zdCBpID0gZVtyXS5pbmRleFN0YXRlLm9mZnNldDtcbiAgICAgICAgX19QUklWQVRFX2luZGV4T2Zmc2V0Q29tcGFyYXRvcihpLCB0KSA8IDAgJiYgKHQgPSBpKSwgbiA8IGkubGFyZ2VzdEJhdGNoSWQgJiYgKG4gPSBpLmxhcmdlc3RCYXRjaElkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldCh0LnJlYWRUaW1lLCB0LmRvY3VtZW50S2V5LCBuKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgZGUgPSB7XG4gICAgZGlkUnVuOiAhMSxcbiAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IDAsXG4gICAgdGFyZ2V0c1JlbW92ZWQ6IDAsXG4gICAgZG9jdW1lbnRzUmVtb3ZlZDogMFxufTtcblxuY2xhc3MgTHJ1UGFyYW1zIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cbiAgICBlLCBcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcbiAgICB0LCBcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxuICAgIG4pIHtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gZSwgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gdCwgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbjtcbiAgICB9XG4gICAgc3RhdGljIHdpdGhDYWNoZVNpemUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IExydVBhcmFtcyhlLCBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIExydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBlLnN0b3JlKFwibXV0YXRpb25zXCIpLCBpID0gZS5zdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpLCBzID0gW10sIG8gPSBJREJLZXlSYW5nZS5vbmx5KG4uYmF0Y2hJZCk7XG4gICAgbGV0IF8gPSAwO1xuICAgIGNvbnN0IGEgPSByLlooe1xuICAgICAgICByYW5nZTogb1xuICAgIH0sICgoZSwgdCwgbikgPT4gKF8rKywgbi5kZWxldGUoKSkpKTtcbiAgICBzLnB1c2goYS5uZXh0KCgoKSA9PiB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IF8pO1xuICAgIH0pKSk7XG4gICAgY29uc3QgdSA9IFtdO1xuICAgIGZvciAoY29uc3QgZSBvZiBuLm11dGF0aW9ucykge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvbktleSh0LCBlLmtleS5wYXRoLCBuLmJhdGNoSWQpO1xuICAgICAgICBzLnB1c2goaS5kZWxldGUocikpLCB1LnB1c2goZS5rZXkpO1xuICAgIH1cbiAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocykubmV4dCgoKCkgPT4gdSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgc2l6ZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZShlKSB7XG4gICAgaWYgKCFlKSByZXR1cm4gMDtcbiAgICBsZXQgdDtcbiAgICBpZiAoZS5kb2N1bWVudCkgdCA9IGUuZG9jdW1lbnQ7IGVsc2UgaWYgKGUudW5rbm93bkRvY3VtZW50KSB0ID0gZS51bmtub3duRG9jdW1lbnQ7IGVsc2Uge1xuICAgICAgICBpZiAoIWUubm9Eb2N1bWVudCkgdGhyb3cgZmFpbCgpO1xuICAgICAgICB0ID0gZS5ub0RvY3VtZW50O1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodCkubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgbXV0YXRpb24gcXVldWUgZm9yIGEgc3BlY2lmaWMgdXNlciwgYmFja2VkIGJ5IEluZGV4ZWREQi4gKi8gTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTAsIFxuTHJ1UGFyYW1zLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCA9IDFlMywgTHJ1UGFyYW1zLkRFRkFVTFQgPSBuZXcgTHJ1UGFyYW1zKDQxOTQzMDQwLCBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIExydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpLCBcbkxydVBhcmFtcy5ESVNBQkxFRCA9IG5ldyBMcnVQYXJhbXMoLTEsIDAsIDApO1xuXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiTXV0YXRpb25RdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlcklkIChlLmcuIG51bGwgVUlEID0+IFwiXCIgdXNlcklkKSB1c2VkIHRvIHN0b3JlIC9cbiAgICAgKiByZXRyaWV2ZSBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IGUsIHRoaXMuc2VyaWFsaXplciA9IHQsIHRoaXMuaW5kZXhNYW5hZ2VyID0gbiwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHIsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGVzIHRoZSBkb2N1bWVudCBrZXlzIGZvciBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMuIElmIHRoZSBtdXRhdGlvblxuICAgICAgICAgKiBoYXMgYmVlbiByZW1vdmVkIGZyb20gSW5kZXhlZERiLCB0aGUgY2FjaGVkIHZhbHVlIG1heSBjb250aW51ZSB0b1xuICAgICAgICAgKiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBiYXRjaCdzIGRvY3VtZW50IGtleXMuIFRvIHJlbW92ZSBhIGNhY2hlZCB2YWx1ZVxuICAgICAgICAgKiBsb2NhbGx5LCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIHNob3VsZCBiZSBpbnZva2VkIGVpdGhlciBkaXJlY3RseVxuICAgICAgICAgKiBvciB0aHJvdWdoIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdpdGggbXVsdGktdGFiLCB3aGVuIHRoZSBwcmltYXJ5IGNsaWVudCBhY2tub3dsZWRnZXMgb3IgcmVqZWN0cyBhIG11dGF0aW9uLFxuICAgICAgICAgKiB0aGlzIGNhY2hlIGlzIHVzZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgdG8gaW52YWxpZGF0ZSB0aGUgbG9jYWxcbiAgICAgICAgICogdmlldyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBwcmV2aW91c2x5IGFmZmVjdGVkIGJ5IHRoZSBtdXRhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHRoaXMuYm4gPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIuXG4gICAgICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlciBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgbXV0YXRpb24gcXVldWUuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2Ugd2hlbiBwZXJzaXN0aW5nIHRvIEluZGV4ZWREYi5cbiAgICAgKi8gICAgc3RhdGljIGx0KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgLy8gVE9ETyhtY2cpOiBGaWd1cmUgb3V0IHdoYXQgY29uc3RyYWludHMgdGhlcmUgYXJlIG9uIHVzZXJJRHNcbiAgICAgICAgLy8gSW4gcGFydGljdWxhciwgYXJlIHRoZXJlIGFueSByZXNlcnZlZCBjaGFyYWN0ZXJzPyBhcmUgZW1wdHkgaWRzIGFsbG93ZWQ/XG4gICAgICAgIC8vIEZvciB0aGUgbW9tZW50IHN0b3JlIHRoZXNlIHRvZ2V0aGVyIGluIHRoZSBzYW1lIG11dGF0aW9ucyB0YWJsZSBhc3N1bWluZ1xuICAgICAgICAvLyB0aGF0IGVtcHR5IHVzZXJJRHMgYXJlbid0IGFsbG93ZWQuXG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwiXCIgIT09IGUudWlkKTtcbiAgICAgICAgY29uc3QgaSA9IGUuaXNBdXRoZW50aWNhdGVkKCkgPyBlLnVpZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYk11dGF0aW9uUXVldWUoaSwgdCwgbiwgcik7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkoZSkge1xuICAgICAgICBsZXQgdCA9ICEwO1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgfSwgKChlLCBuLCByKSA9PiB7XG4gICAgICAgICAgICB0ID0gITEsIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdCkpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLCBzID0gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpO1xuICAgICAgICAvLyBUaGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGluIENocm9tZSAoYW5kIEZpcmVmb3gpIGRvZXMgbm90IGhhbmRsZVxuICAgICAgICAvLyBjb21wb3VuZCBpbmRpY2VzIHRoYXQgaW5jbHVkZSBhdXRvLWdlbmVyYXRlZCBrZXlzIGNvcnJlY3RseS4gVG8gZW5zdXJlXG4gICAgICAgIC8vIHRoYXQgdGhlIGluZGV4IGVudHJ5IGlzIGFkZGVkIGNvcnJlY3RseSBpbiBhbGwgYnJvd3NlcnMsIHdlIHBlcmZvcm0gdHdvXG4gICAgICAgIC8vIHdyaXRlczogVGhlIGZpcnN0IHdyaXRlIGlzIHVzZWQgdG8gcmV0cmlldmUgdGhlIG5leHQgYXV0by1nZW5lcmF0ZWQgQmF0Y2hcbiAgICAgICAgLy8gSUQsIGFuZCB0aGUgc2Vjb25kIHdyaXRlIHBvcHVsYXRlcyB0aGUgaW5kZXggYW5kIHN0b3JlcyB0aGUgYWN0dWFsXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoLlxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTcwMTk3MlxuICAgICAgICAvLyBXZSB3cml0ZSBhbiBlbXB0eSBvYmplY3QgdG8gb2J0YWluIGtleVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gcy5hZGQoe30pLm5leHQoKG8gPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbyk7XG4gICAgICAgICAgICBjb25zdCBfID0gbmV3IE11dGF0aW9uQmF0Y2gobywgdCwgbiwgciksIGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYk11dGF0aW9uQmF0Y2goZSwgdCwgbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuLmJhc2VNdXRhdGlvbnMubWFwKCh0ID0+IHRvTXV0YXRpb24oZS5jdCwgdCkpKSwgaSA9IG4ubXV0YXRpb25zLm1hcCgodCA9PiB0b011dGF0aW9uKGUuY3QsIHQpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB0LFxuICAgICAgICAgICAgICAgICAgICBiYXRjaElkOiBuLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsV3JpdGVUaW1lTXM6IG4ubG9jYWxXcml0ZVRpbWUudG9NaWxsaXMoKSxcbiAgICAgICAgICAgICAgICAgICAgYmFzZU11dGF0aW9uczogcixcbiAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zOiBpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCB0aGlzLnVzZXJJZCwgXyksIHUgPSBbXTtcbiAgICAgICAgICAgIGxldCBjID0gbmV3IFNvcnRlZFNldCgoKGUsIHQpID0+IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuY2Fub25pY2FsU3RyaW5nKCksIHQuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uS2V5KHRoaXMudXNlcklkLCBlLmtleS5wYXRoLCBvKTtcbiAgICAgICAgICAgICAgICBjID0gYy5hZGQoZS5rZXkucGF0aC5wb3BMYXN0KCkpLCB1LnB1c2gocy5wdXQoYSkpLCB1LnB1c2goaS5wdXQodCwgTykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdS5wdXNoKHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIHQpKTtcbiAgICAgICAgICAgIH0pKSwgZS5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ibltvXSA9IF8ua2V5cygpO1xuICAgICAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcih1KS5uZXh0KCgoKSA9PiBfKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4gZSA/IChfX1BSSVZBVEVfaGFyZEFzc2VydChlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBcbiAgICAgICAgX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKSkgOiBudWxsKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHRoZSBtdXRhdGlvbiBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLlxuICAgICAqIEZvciBwcmltYXJ5IGNsaWVudHMsIHRoaXMgbWV0aG9kIHJldHVybnMgYG51bGxgIGFmdGVyXG4gICAgICogYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYCBoYXMgYmVlbiBjYWxsZWQuIFNlY29uZGFyeSBjbGllbnRzIHJldHVybiBhXG4gICAgICogY2FjaGVkIHJlc3VsdCB1bnRpbCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIGlzIGludm9rZWQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBEbihlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJuW3RdID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5iblt0XSkgOiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2goZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmtleXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iblt0XSA9IG4sIG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ICsgMSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0aGlzLnVzZXJJZCwgbiBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKGUsIHQsIHIpID0+IHtcbiAgICAgICAgICAgIHQudXNlcklkID09PSB0aGlzLnVzZXJJZCAmJiAoX19QUklWQVRFX2hhcmRBc3NlcnQodC5iYXRjaElkID49IG4pLCBpID0gX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCB0KSksIFxuICAgICAgICAgICAgci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoZSkge1xuICAgICAgICBjb25zdCB0ID0gSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBuID0gLTE7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuWih7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiB0LFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKChlLCB0LCByKSA9PiB7XG4gICAgICAgICAgICBuID0gdC5iYXRjaElkLCByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIC0xIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5HKFwidXNlck11dGF0aW9uc0luZGV4XCIsIHQpLm5leHQoKGUgPT4gZS5tYXAoKGUgPT4gX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKSkpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KGUsIHQpIHtcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCB0LnBhdGgpLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChuKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuWih7XG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKG4sIHIsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtvLCBfLCBhXSA9IG4sIHUgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKF8pO1xuICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gdGhpcy51c2VySWQgJiYgdC5wYXRoLmlzRXF1YWwodSkpIFxuICAgICAgICAgICAgLy8gTG9vayB1cCB0aGUgbXV0YXRpb24gYmF0Y2ggaW4gdGhlIHN0b3JlLlxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5nZXQoYSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS51c2VySWQgPT09IHRoaXMudXNlcklkKSwgaS5wdXNoKF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIHQucGF0aCksIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpLCBvID0gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuWih7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgICAgIH0sICgoZSwgciwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtzLCBvLCBfXSA9IGUsIGEgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKG8pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXG4gICAgICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID09PSB0aGlzLnVzZXJJZCAmJiB0LnBhdGguaXNFcXVhbChhKSA/IG4gPSBuLmFkZChfKSA6IGkuZG9uZSgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgci5wdXNoKG8pO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpLm5leHQoKCgpID0+IHRoaXMudm4oZSwgbikpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC5wYXRoLCByID0gbi5sZW5ndGggKyAxLCBpID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIG4pLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKTtcbiAgICAgICAgLy8gQ29sbGVjdCB1cCB1bmlxdWUgYmF0Y2hJRHMgZW5jb3VudGVyZWQgZHVyaW5nIGEgc2NhbiBvZiB0aGUgaW5kZXguIFVzZSBhXG4gICAgICAgIC8vIFNvcnRlZFNldCB0byBhY2N1bXVsYXRlIGJhdGNoIElEcyBzbyB0aGV5IGNhbiBiZSB0cmF2ZXJzZWQgaW4gb3JkZXIgaW4gYVxuICAgICAgICAvLyBzY2FuIG9mIHRoZSBtYWluIHRhYmxlLlxuICAgICAgICBsZXQgbyA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuWih7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKGUsIHQsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtzLCBfLCBhXSA9IGUsIHUgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKF8pO1xuICAgICAgICAgICAgcyA9PT0gdGhpcy51c2VySWQgJiYgbi5pc1ByZWZpeE9mKHUpID8gXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcbiAgICAgICAgICAgIC8vIGNhbid0IG1hdGNoIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgdS5sZW5ndGggPT09IHIgJiYgKG8gPSBvLmFkZChhKSkgOiBpLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMudm4oZSwgbykpKTtcbiAgICB9XG4gICAgdm4oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gW10sIHIgPSBbXTtcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgci5wdXNoKF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5nZXQodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpIHRocm93IGZhaWwoKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBuLnB1c2goX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKSk7XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgICAgIHJldHVybiByZW1vdmVNdXRhdGlvbkJhdGNoKGUudWUsIHRoaXMudXNlcklkLCB0KS5uZXh0KChuID0+IChlLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuQ24odC5iYXRjaElkKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChuLCAodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY2FjaGVkIGtleXMgZm9yIGEgbXV0YXRpb24gYmF0Y2guIFRoaXMgbWV0aG9kIHNob3VsZCBiZVxuICAgICAqIGNhbGxlZCBieSBzZWNvbmRhcnkgY2xpZW50cyBhZnRlciB0aGV5IHByb2Nlc3MgbXV0YXRpb24gdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBoYXZlIHRvIGJlIGNhbGxlZCBmcm9tIHByaW1hcnkgY2xpZW50cyBhc1xuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIGNhY2hlIGVudHJpZXMgYXJlIGNsZWFyZWQgd2hlbiBhbiBhY2tub3dsZWRnZWQgb3JcbiAgICAgKiByZWplY3RlZCBiYXRjaCBpcyByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBDbihlKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmJuW2VdO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAoIXQpIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGRvY3VtZW50TXV0YXRpb25zIGluZGV4IGlmXG4gICAgICAgICAgICAvLyB0aGUgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChcbiAgICAgICAgICAgIC8qKlxuICogQ3JlYXRlcyBhIFt1c2VySWRdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4IHRvIGl0ZXJhdGVcbiAqIG92ZXIgYWxsIG9mIGEgdXNlcidzIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclVzZXIoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbIGUgXTtcbiAgICAgICAgICAgIH0odGhpcy51c2VySWQpKSwgciA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgICAgICB9LCAoKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZVswXSA9PT0gdGhpcy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoZVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugbi5kb25lKCk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDAgPT09IHIubGVuZ3RoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5KGUsIHRoaXMudXNlcklkLCB0KTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seSAoc3RhdGUgaXMgaGVsZCBpbiBtZW1vcnkgaW4gb3RoZXIgY2xpZW50cykuXG4gICAgLyoqIFJldHVybnMgdGhlIG11dGF0aW9uIHF1ZXVlJ3MgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuICovXG4gICAgRm4oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uUXVldWVzU3RvcmUoZSkuZ2V0KHRoaXMudXNlcklkKS5uZXh0KChlID0+IGUgfHwge1xuICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCxcbiAgICAgICAgICAgIGxhc3RBY2tub3dsZWRnZWRCYXRjaElkOiAtMSxcbiAgICAgICAgICAgIGxhc3RTdHJlYW1Ub2tlbjogXCJcIlxuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlciBjb250YWlucyBhIHBlbmRpbmdcbiAqICAgICAgICAgbXV0YXRpb24gZm9yIHRoZSBnaXZlbiBrZXkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uUXVldWVDb250YWluc0tleShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHQsIG4ucGF0aCksIGkgPSByWzFdLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChyKTtcbiAgICBsZXQgbyA9ICExO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKS5aKHtcbiAgICAgICAgcmFuZ2U6IHMsXG4gICAgICAgIFk6ICEwXG4gICAgfSwgKChlLCBuLCByKSA9PiB7XG4gICAgICAgIGNvbnN0IFtzLCBfLCAvKmJhdGNoSUQqLyBhXSA9IGU7XG4gICAgICAgIHMgPT09IHQgJiYgXyA9PT0gaSAmJiAobyA9ICEwKSwgci5kb25lKCk7XG4gICAgfSkpLm5leHQoKCgpID0+IG8pKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBhbnkgbXV0YXRpb24gcXVldWUgY29udGFpbnMgdGhlIGdpdmVuIGRvY3VtZW50LiAqL1xuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9ucyBvYmplY3Qgc3RvcmUuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcIm11dGF0aW9uc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImRvY3VtZW50TXV0YXRpb25zXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwibXV0YXRpb25RdWV1ZXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogT2Zmc2V0IHRvIGVuc3VyZSBub24tb3ZlcmxhcHBpbmcgdGFyZ2V0IGlkcy4gKi9cbi8qKlxuICogR2VuZXJhdGVzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyB0YXJnZXQgSURzIGZvciBzZW5kaW5nIHRhcmdldHMgdG8gdGhlXG4gKiB3YXRjaCBzdHJlYW0uXG4gKlxuICogVGhlIGNsaWVudCBjb25zdHJ1Y3RzIHR3byBnZW5lcmF0b3JzLCBvbmUgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIGFuZCBvbmUgZm9yXG4gKiBmb3IgdGhlIHN5bmMgZW5naW5lICh0byBnZW5lcmF0ZSBsaW1ibyBkb2N1bWVudHMgdGFyZ2V0cykuIFRoZXNlXG4gKiBnZW5lcmF0b3JzIHByb2R1Y2Ugbm9uLW92ZXJsYXBwaW5nIElEcyAoYnkgdXNpbmcgZXZlbiBhbmQgb2RkIElEc1xuICogcmVzcGVjdGl2ZWx5KS5cbiAqXG4gKiBCeSBzZXBhcmF0aW5nIHRoZSB0YXJnZXQgSUQgc3BhY2UsIHRoZSBxdWVyeSBjYWNoZSBjYW4gZ2VuZXJhdGUgdGFyZ2V0IElEc1xuICogdGhhdCBwZXJzaXN0IGFjcm9zcyBjbGllbnQgcmVzdGFydHMsIHdoaWxlIHN5bmMgZW5naW5lIGNhbiBpbmRlcGVuZGVudGx5XG4gKiBnZW5lcmF0ZSBpbi1tZW1vcnkgdGFyZ2V0IElEcyB0aGF0IGFyZSB0cmFuc2llbnQgYW5kIGNhbiBiZSByZXVzZWQgYWZ0ZXIgYVxuICogcmVzdGFydC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuTW4gPSBlO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5NbiArPSAyLCB0aGlzLk1uO1xuICAgIH1cbiAgICBzdGF0aWMgeG4oKSB7XG4gICAgICAgIC8vIFRoZSB0YXJnZXQgY2FjaGUgZ2VuZXJhdG9yIG11c3QgcmV0dXJuICcyJyBpbiBpdHMgZmlyc3QgY2FsbCB0byBgbmV4dCgpYFxuICAgICAgICAvLyBhcyB0aGVyZSBpcyBubyBkaWZmZXJlbnRpYXRpb24gaW4gdGhlIHByb3RvY29sIGxheWVyIGJldHdlZW4gYW4gdW5zZXRcbiAgICAgICAgLy8gbnVtYmVyIGFuZCB0aGUgbnVtYmVyICcwJy4gSWYgd2Ugd2VyZSB0byBzZW50IGEgdGFyZ2V0IHdpdGggdGFyZ2V0IElEXG4gICAgICAgIC8vICcwJywgdGhlIGJhY2tlbmQgd291bGQgY29uc2lkZXIgaXQgdW5zZXQgYW5kIHJlcGxhY2UgaXQgd2l0aCBpdHMgb3duIElELlxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvcigwKTtcbiAgICB9XG4gICAgc3RhdGljIE9uKCkge1xuICAgICAgICAvLyBTeW5jIGVuZ2luZSBhc3NpZ25zIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRvY3VtZW50IGRldGVjdGlvbi5cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IoLTEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlRhcmdldENhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSB0O1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IGNhY2hlIGdsb2JhbCBtZXRhZGF0YSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgc2luY2VcbiAgICAvLyBzb21lIG9mIGl0IChpbiBwYXJ0aWN1bGFyIGBoaWdoZXN0VGFyZ2V0SWRgKSBjYW4gYmUgbW9kaWZpZWQgYnkgc2Vjb25kYXJ5XG4gICAgLy8gdGFicy4gV2UgY291bGQgcGVyaGFwcyBiZSBtb3JlIGdyYW51bGFyIChhbmQgZS5nLiBzdGlsbCBjYWNoZVxuICAgIC8vIGBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uYCBpbiBtZW1vcnkpIGJ1dCBmb3Igc2ltcGxpY2l0eSB3ZSBjdXJyZW50bHkgZ29cbiAgICAvLyB0byBJbmRleGVkRGIgd2hlbmV2ZXIgd2UgbmVlZCB0byByZWFkIG1ldGFkYXRhLiBXZSBjYW4gcmV2aXNpdCBpZiBpdCB0dXJuc1xuICAgIC8vIG91dCB0byBoYXZlIGEgbWVhbmluZ2Z1bCBwZXJmb3JtYW5jZSBpbXBhY3QuXG4gICAgYWxsb2NhdGVUYXJnZXRJZChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5uKGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IodC5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgICAgICAgICAgcmV0dXJuIHQuaGlnaGVzdFRhcmdldElkID0gbi5uZXh0KCksIHRoaXMuQm4oZSwgdCkubmV4dCgoKCkgPT4gdC5oaWdoZXN0VGFyZ2V0SWQpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTm4oZSkubmV4dCgoZSA9PiBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcChuZXcgVGltZXN0YW1wKGUubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5zZWNvbmRzLCBlLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24ubmFub3NlY29uZHMpKSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ObihlKS5uZXh0KChlID0+IGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5uKGUpLm5leHQoKHIgPT4gKHIuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdCwgbiAmJiAoci5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbi50b1RpbWVzdGFtcCgpKSwgXG4gICAgICAgIHQgPiByLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAoci5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0KSwgdGhpcy5CbihlLCByKSkpKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkxuKGUsIHQpLm5leHQoKCgpID0+IHRoaXMuTm4oZSkubmV4dCgobiA9PiAobi50YXJnZXRDb3VudCArPSAxLCB0aGlzLmtuKHQsIG4pLCBcbiAgICAgICAgdGhpcy5CbihlLCBuKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTG4oZSwgdCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0LnRhcmdldElkKS5uZXh0KCgoKSA9PiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLmRlbGV0ZSh0LnRhcmdldElkKSkpLm5leHQoKCgpID0+IHRoaXMuTm4oZSkpKS5uZXh0KCh0ID0+IChfX1BSSVZBVEVfaGFyZEFzc2VydCh0LnRhcmdldENvdW50ID4gMCksIFxuICAgICAgICB0LnRhcmdldENvdW50IC09IDEsIHRoaXMuQm4oZSwgdCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFueSB0YXJnZXRzIHdpdGggc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQsIGV4Y2VwdGluZyB0aG9zZVxuICAgICAqIHByZXNlbnQgaW4gYGFjdGl2ZVRhcmdldElkc2AuIERvY3VtZW50IGFzc29jaWF0aW9ucyBmb3IgdGhlIHJlbW92ZWQgdGFyZ2V0cyBhcmUgYWxzbyByZW1vdmVkLlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB0YXJnZXRzIHJlbW92ZWQuXG4gICAgICovICAgIHJlbW92ZVRhcmdldHMoZSwgdCwgbikge1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkuWigoKHMsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KG8pO1xuICAgICAgICAgICAgXy5zZXF1ZW5jZU51bWJlciA8PSB0ICYmIG51bGwgPT09IG4uZ2V0KF8udGFyZ2V0SWQpICYmIChyKyssIGkucHVzaCh0aGlzLnJlbW92ZVRhcmdldERhdGEoZSwgXykpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpKSkubmV4dCgoKCkgPT4gcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIHdpdGggZWFjaCBgVGFyZ2V0RGF0YWAgdGhhdCB3ZSBoYXZlIGNhY2hlZC5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLlooKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2Zyb21EYlRhcmdldChuKTtcbiAgICAgICAgICAgIHQocik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgTm4oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2dsb2JhbFRhcmdldFN0b3JlKGUpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KChlID0+IChfX1BSSVZBVEVfaGFyZEFzc2VydChudWxsICE9PSBlKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIEJuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nbG9iYWxUYXJnZXRTdG9yZShlKS5wdXQoXCJ0YXJnZXRHbG9iYWxLZXlcIiwgdCk7XG4gICAgfVxuICAgIExuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkucHV0KF9fUFJJVkFURV90b0RiVGFyZ2V0KHRoaXMuc2VyaWFsaXplciwgdCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbi1wbGFjZSB1cGRhdGVzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSB0byBhY2NvdW50IGZvciB2YWx1ZXMgaW4gdGhlIGdpdmVuXG4gICAgICogVGFyZ2V0RGF0YS4gU2F2aW5nIGlzIGRvbmUgc2VwYXJhdGVseS4gUmV0dXJucyB0cnVlIGlmIHRoZXJlIHdlcmUgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgbWV0YWRhdGEuXG4gICAgICovICAgIGtuKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgcmV0dXJuIGUudGFyZ2V0SWQgPiB0LmhpZ2hlc3RUYXJnZXRJZCAmJiAodC5oaWdoZXN0VGFyZ2V0SWQgPSBlLnRhcmdldElkLCBuID0gITApLCBcbiAgICAgICAgZS5zZXF1ZW5jZU51bWJlciA+IHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmICh0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUuc2VxdWVuY2VOdW1iZXIsIFxuICAgICAgICBuID0gITApLCBuO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5uKGUpLm5leHQoKGUgPT4gZS50YXJnZXRDb3VudCkpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgLy8gSXRlcmF0aW5nIGJ5IHRoZSBjYW5vbmljYWxJZCBtYXkgeWllbGQgbW9yZSB0aGFuIG9uZSByZXN1bHQgYmVjYXVzZVxuICAgICAgICAvLyBjYW5vbmljYWxJZCB2YWx1ZXMgYXJlIG5vdCByZXF1aXJlZCB0byBiZSB1bmlxdWUgcGVyIHRhcmdldC4gVGhpcyBxdWVyeVxuICAgICAgICAvLyBkZXBlbmRzIG9uIHRoZSBxdWVyeVRhcmdldHMgaW5kZXggdG8gYmUgZWZmaWNpZW50LlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KHQpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyBuLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkuWih7XG4gICAgICAgICAgICByYW5nZTogcixcbiAgICAgICAgICAgIGluZGV4OiBcInF1ZXJ5VGFyZ2V0c0luZGV4XCJcbiAgICAgICAgfSwgKChlLCBuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2Zyb21EYlRhcmdldChuKTtcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKHQsIHMudGFyZ2V0KSAmJiAoaSA9IHMsIHIuZG9uZSgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHIgPSBbXSwgaSA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQucGF0aCk7XG4gICAgICAgICAgICByLnB1c2goaS5wdXQoe1xuICAgICAgICAgICAgICAgIHRhcmdldElkOiBuLFxuICAgICAgICAgICAgICAgIHBhdGg6IHNcbiAgICAgICAgICAgIH0pKSwgci5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKGUsIG4sIHQpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQucGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoWyByLmRlbGV0ZShbIG4sIGkgXSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKGUsIG4sIHQpIF0pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0IF0sIFsgdCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocik7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdCBdLCBbIHQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSwgciA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpO1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gci5aKHtcbiAgICAgICAgICAgIHJhbmdlOiBuLFxuICAgICAgICAgICAgWTogITBcbiAgICAgICAgfSwgKChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChlWzFdKSwgcyA9IG5ldyBEb2N1bWVudEtleShyKTtcbiAgICAgICAgICAgIGkgPSBpLmFkZChzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuIF0sIFsgX19QUklWQVRFX2ltbWVkaWF0ZVN1Y2Nlc3NvcihuKSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIixcbiAgICAgICAgICAgIFk6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKChbZSwgdF0sIG4sIHIpID0+IHtcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxuICAgICAgICAgICAgMCAhPT0gZSAmJiAoaSsrLCByLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIFRhcmdldERhdGEgZW50cnkgYnkgdGFyZ2V0IElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldCBJRCBvZiB0aGUgVGFyZ2V0RGF0YSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgVGFyZ2V0RGF0YSBlbnRyeSwgb3IgbnVsbCBpZiB0aGUgY2FjaGUgaGFzIG5vIGVudHJ5IGZvclxuICAgICAqIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICB1dChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IGUgPyBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KGUpIDogbnVsbCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJ0YXJnZXRzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgdGFyZ2V0IGdsb2JhbHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9nbG9iYWxUYXJnZXRTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcInRhcmdldEdsb2JhbFwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IHRhcmdldCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJ0YXJnZXREb2N1bWVudHNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9idWZmZXJFbnRyeUNvbXBhcmF0b3IoW2UsIHRdLCBbbiwgcl0pIHtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZSwgbik7XG4gICAgcmV0dXJuIDAgPT09IGkgPyBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0LCByKSA6IGk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIuIEtlZXBzIGEgcm9sbGluZyBidWZmZXIgb2YgdGhlXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxuICogdGhlbSBpbiBgbWF4VmFsdWVgLlxuICovIGNsYXNzIF9fUFJJVkFURV9Sb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5xbiA9IGUsIHRoaXMuYnVmZmVyID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfYnVmZmVyRW50cnlDb21wYXJhdG9yKSwgdGhpcy5RbiA9IDA7XG4gICAgfVxuICAgIEtuKCkge1xuICAgICAgICByZXR1cm4gKyt0aGlzLlFuO1xuICAgIH1cbiAgICAkbihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbIGUsIHRoaXMuS24oKSBdO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIuc2l6ZSA8IHRoaXMucW4pIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuYWRkKHQpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlci5sYXN0KCk7XG4gICAgICAgICAgICBfX1BSSVZBVEVfYnVmZmVyRW50cnlDb21wYXJhdG9yKHQsIGUpIDwgMCAmJiAodGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5kZWxldGUoZSkuYWRkKHQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIC8vIEd1YXJhbnRlZWQgdG8gYmUgbm9uLWVtcHR5LiBJZiB3ZSBkZWNpZGUgd2UgYXJlIG5vdCBjb2xsZWN0aW5nIGFueVxuICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXJzLCBudGhTZXF1ZW5jZU51bWJlciBiZWxvdyBzaG9ydC1jaXJjdWl0cy4gSWYgd2UgaGF2ZVxuICAgICAgICAvLyBkZWNpZGVkIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgbiBzZXF1ZW5jZSBudW1iZXJzLCBpdCdzIGJlY2F1c2UgbiBpcyBzb21lXG4gICAgICAgIC8vIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4aXN0aW5nIHNlcXVlbmNlIG51bWJlcnMuIFRoYXQgbWVhbnMgd2Ugc2hvdWxkIG5ldmVyXG4gICAgICAgIC8vIGJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSBjb2xsZWN0aW5nIHNlcXVlbmNlIG51bWJlcnMgYnV0IGRvbid0XG4gICAgICAgIC8vIGFjdHVhbGx5IGhhdmUgYW55LlxuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGFzdCgpWzBdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiBJdCBoYW5kbGVzIGNoZWNraW5nXG4gKiB3aGV0aGVyIG9yIG5vdCBHQyBpcyBlbmFibGVkLCBhcyB3ZWxsIGFzIHdoaWNoIGRlbGF5IHRvIHVzZSBiZWZvcmUgdGhlIG5leHQgcnVuLlxuICovIGNsYXNzIF9fUFJJVkFURV9McnVTY2hlZHVsZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy5sb2NhbFN0b3JlID0gbiwgdGhpcy5VbiA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICAtMSAhPT0gdGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICYmIHRoaXMuV24oNmU0KTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5VbiAmJiAodGhpcy5Vbi5jYW5jZWwoKSwgdGhpcy5VbiA9IG51bGwpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuVW47XG4gICAgfVxuICAgIFduKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNjaGVkdWxlZCBpbiAke2V9bXNgKSwgXG4gICAgICAgIHRoaXMuVW4gPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJscnVfZ2FyYmFnZV9jb2xsZWN0aW9uXCIgLyogVGltZXJJZC5McnVHYXJiYWdlQ29sbGVjdGlvbiAqLyAsIGUsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlVuID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2NhbFN0b3JlLmNvbGxlY3RHYXJiYWdlKHRoaXMuZ2FyYmFnZUNvbGxlY3Rvcik7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSA/IF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGdhcmJhZ2UgY29sbGVjdGlvbjogXCIsIGUpIDogYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuV24oM2U1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTHJ1R2FyYmFnZUNvbGxlY3RvckltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5HbiA9IGUsIHRoaXMucGFyYW1zID0gdDtcbiAgICB9XG4gICAgY2FsY3VsYXRlVGFyZ2V0Q291bnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Hbi56bihlKS5uZXh0KChlID0+IE1hdGguZmxvb3IodCAvIDEwMCAqIGUpKSk7XG4gICAgfVxuICAgIG50aFNlcXVlbmNlTnVtYmVyKGUsIHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQpIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWUpO1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Sb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIodCk7XG4gICAgICAgIHJldHVybiB0aGlzLkduLmZvckVhY2hUYXJnZXQoZSwgKGUgPT4gbi4kbihlLnNlcXVlbmNlTnVtYmVyKSkpLm5leHQoKCgpID0+IHRoaXMuR24uam4oZSwgKGUgPT4gbi4kbihlKSkpKSkubmV4dCgoKCkgPT4gbi5tYXhWYWx1ZSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuR24ucmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Hbi5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyhlLCB0KTtcbiAgICB9XG4gICAgY29sbGVjdChlLCB0KSB7XG4gICAgICAgIHJldHVybiAtMSA9PT0gdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IGRpc2FibGVkXCIpLCBcbiAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoZGUpKSA6IHRoaXMuZ2V0Q2FjaGVTaXplKGUpLm5leHQoKG4gPT4gbiA8IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IENhY2hlIHNpemUgJHtufSBpcyBsb3dlciB0aGFuIHRocmVzaG9sZCAke3RoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGR9YCksIFxuICAgICAgICBkZSkgOiB0aGlzLkhuKGUsIHQpKSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkduLmdldENhY2hlU2l6ZShlKTtcbiAgICB9XG4gICAgSG4oZSwgdCkge1xuICAgICAgICBsZXQgbiwgciwgaSwgcywgbywgYSwgdTtcbiAgICAgICAgY29uc3QgYyA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVRhcmdldENvdW50KGUsIHRoaXMucGFyYW1zLnBlcmNlbnRpbGVUb0NvbGxlY3QpLm5leHQoKHQgPT4gKFxuICAgICAgICAvLyBDYXAgYXQgdGhlIGNvbmZpZ3VyZWQgbWF4XG4gICAgICAgIHQgPiB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYENhcHBpbmcgc2VxdWVuY2UgbnVtYmVycyB0byBjb2xsZWN0IGRvd24gdG8gdGhlIG1heGltdW0gb2YgJHt0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0fSBmcm9tICR7dH1gKSwgXG4gICAgICAgIHIgPSB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KSA6IHIgPSB0LCBzID0gRGF0ZS5ub3coKSwgdGhpcy5udGhTZXF1ZW5jZU51bWJlcihlLCByKSkpKS5uZXh0KChyID0+IChuID0gciwgXG4gICAgICAgIG8gPSBEYXRlLm5vdygpLCB0aGlzLnJlbW92ZVRhcmdldHMoZSwgbiwgdCkpKSkubmV4dCgodCA9PiAoaSA9IHQsIGEgPSBEYXRlLm5vdygpLCBcbiAgICAgICAgdGhpcy5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyhlLCBuKSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmICh1ID0gRGF0ZS5ub3coKSwgX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBMUlUgR2FyYmFnZSBDb2xsZWN0aW9uXFxuXFx0Q291bnRlZCB0YXJnZXRzIGluICR7cyAtIGN9bXNcXG5cXHREZXRlcm1pbmVkIGxlYXN0IHJlY2VudGx5IHVzZWQgJHtyfSBpbiBgICsgKG8gLSBzKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7aX0gdGFyZ2V0cyBpbiBgICsgKGEgLSBvKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7ZX0gZG9jdW1lbnRzIGluIGAgKyAodSAtIGEpICsgXCJtc1xcblwiICsgYFRvdGFsIER1cmF0aW9uOiAke3UgLSBjfW1zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGRpZFJ1bjogITAsXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiByLFxuICAgICAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50c1JlbW92ZWQ6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3THJ1R2FyYmFnZUNvbGxlY3RvcihlLCB0KSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTHJ1R2FyYmFnZUNvbGxlY3RvckltcGwoZSwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUHJvdmlkZXMgTFJVIGZ1bmN0aW9uYWxpdHkgZm9yIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYkxydURlbGVnYXRlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmRiID0gZSwgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gX19QUklWQVRFX25ld0xydUdhcmJhZ2VDb2xsZWN0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIHpuKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuSm4oZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQoZSkubmV4dCgoZSA9PiB0Lm5leHQoKHQgPT4gZSArIHQpKSkpO1xuICAgIH1cbiAgICBKbihlKSB7XG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuam4oZSwgKGUgPT4ge1xuICAgICAgICAgICAgdCsrO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdCkpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KGUsIHQpO1xuICAgIH1cbiAgICBqbihlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlluKGUsICgoZSwgbikgPT4gdChuKSkpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JpdGVTZW50aW5lbEtleShlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnl0aGluZyB3b3VsZCBwcmV2ZW50IHRoaXMgZG9jdW1lbnQgZnJvbSBiZWluZyBnYXJiYWdlXG4gICAgICogY29sbGVjdGVkLCBnaXZlbiB0aGF0IHRoZSBkb2N1bWVudCBpbiBxdWVzdGlvbiBpcyBub3QgcHJlc2VudCBpbiBhbnlcbiAgICAgKiB0YXJnZXRzIGFuZCBoYXMgYSBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCBmb3JcbiAgICAgKiB0aGUgY29sbGVjdGlvbiBydW4uXG4gICAgICovICAgIFpuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlc0NvbnRhaW5LZXkoZSwgdCkge1xuICAgICAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZXNTdG9yZShlKS5YKChyID0+IF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkoZSwgciwgdCkubmV4dCgoZSA9PiAoZSAmJiAobiA9ICEwKSwgXG4gICAgICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSghZSkpKSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgICAgIH0oZSwgdCk7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpLCByID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuWW4oZSwgKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBpZiAobyA8PSB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWm4oZSwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdCkgXG4gICAgICAgICAgICAgICAgICAgIC8vIE91ciBzaXplIGFjY291bnRpbmcgcmVxdWlyZXMgdXMgdG8gcmVhZCBhbGwgZG9jdW1lbnRzIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmluZyB0aGVtLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSsrLCBuLmdldEVudHJ5KGUsIHMpLm5leHQoKCgpID0+IChuLnJlbW92ZUVudHJ5KHMsIFNuYXBzaG90VmVyc2lvbi5taW4oKSksIFxuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKS5kZWxldGUoZnVuY3Rpb24gX19QUklWQVRFX3NlbnRpbmVsS2V5JDEoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgMCwgX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChlLnBhdGgpIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBAcmV0dXJucyBBIHZhbHVlIHN1aXRhYmxlIGZvciB3cml0aW5nIGEgc2VudGluZWwgcm93IGluIHRoZSB0YXJnZXQtZG9jdW1lbnRcbiAqIHN0b3JlLlxuICovIChzKSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpKSkubmV4dCgoKCkgPT4gbi5hcHBseShlKSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQud2l0aFNlcXVlbmNlTnVtYmVyKGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKGUsIG4pO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBlYWNoIGRvY3VtZW50IGluIHRoZSBjYWNoZSB0aGF0IGlzICdvcnBoYW5lZCcuIE9ycGhhbmVkXG4gICAgICogbWVhbnMgbm90IGEgcGFydCBvZiBhbnkgdGFyZ2V0LCBzbyB0aGUgb25seSBlbnRyeSBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50IGluZGV4IGZvclxuICAgICAqIHRoYXQgZG9jdW1lbnQgd2lsbCBiZSB0aGUgc2VudGluZWwgcm93ICh0YXJnZXRJZCAwKSwgd2hpY2ggd2lsbCBhbHNvIGhhdmUgdGhlIHNlcXVlbmNlXG4gICAgICogbnVtYmVyIGZvciB0aGUgbGFzdCB0aW1lIHRoZSBkb2N1bWVudCB3YXMgYWNjZXNzZWQuXG4gICAgICovICAgIFluKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpO1xuICAgICAgICBsZXQgciwgaSA9IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZTtcbiAgICAgICAgcmV0dXJuIG4uWih7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudFRhcmdldHNJbmRleFwiXG4gICAgICAgIH0sICgoW2UsIG5dLCB7cGF0aDogcywgc2VxdWVuY2VOdW1iZXI6IG99KSA9PiB7XG4gICAgICAgICAgICAwID09PSBlID8gKFxuICAgICAgICAgICAgLy8gaWYgbmV4dFRvUmVwb3J0IGlzIHZhbGlkLCByZXBvcnQgaXQsIHRoaXMgaXMgYSBuZXcga2V5IHNvIHRoZVxuICAgICAgICAgICAgLy8gbGFzdCBvbmUgbXVzdCBub3QgYmUgYSBtZW1iZXIgb2YgYW55IHRhcmdldHMuXG4gICAgICAgICAgICBpICE9PSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWUgJiYgdChuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChyKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgciA9IHMpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWU7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSByZXBvcnQgc2VxdWVuY2UgbnVtYmVycyBhZnRlciBnZXR0aW5nIHRvIHRoZSBuZXh0IGtleSwgd2VcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHdlIGl0ZXJhdGVkIG92ZXIgd2FzIGFuIG9ycGhhbmVkXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBhbmQgcmVwb3J0IGl0LlxuICAgICAgICAgICAgaSAhPT0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlICYmIHQobmV3IERvY3VtZW50S2V5KF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgocikpLCBpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZShlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV9zZW50aW5lbFJvdyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0YXJnZXRJZDogMCxcbiAgICAgICAgICAgIHBhdGg6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZS5wYXRoKSxcbiAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiB0XG4gICAgICAgIH07XG4gICAgfSh0LCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcbiAqIGJ1ZmZlcmVkLlxuICpcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXG4gKi8gY2xhc3MgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbi5cbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gbmV3IE9iamVjdE1hcCgoZSA9PiBlLnRvU3RyaW5nKCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5hZGRFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IG1vZGlmeSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgYWRkRW50cnkoZSkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldChlLmtleSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IHJlbW92ZSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkoZSwgdCkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldChlLCBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KGUpLnNldFJlYWRUaW1lKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWYgd2UgaGF2ZSBub3RoaW5nXG4gICAgICogY2FjaGVkLlxuICAgICAqLyAgICBnZXRFbnRyeShlLCB0KSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaGFuZ2VzLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG4pIDogdGhpcy5nZXRGcm9tQ2FjaGUoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUsIGZvcndhcmRpbmcgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUga2V5cyBvZiB0aGUgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGNhY2hlZCBkb2N1bWVudHMsIGluZGV4ZWQgYnkga2V5LiBJZiBhbiBlbnRyeSBjYW5ub3QgYmVcbiAgICAgKiAgICAgZm91bmQsIHRoZSBjb3JyZXNwb25kaW5nIGtleSB3aWxsIGJlIG1hcHBlZCB0byBhbiBpbnZhbGlkIGRvY3VtZW50LlxuICAgICAqLyAgICBnZXRFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsRnJvbUNhY2hlKGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGJ1ZmZlcmVkIGNoYW5nZXMgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSwgdXNpbmdcbiAgICAgKiB0aGUgcHJvdmlkZWQgdHJhbnNhY3Rpb24uXG4gICAgICovICAgIGFwcGx5KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITAsIHRoaXMuYXBwbHlDaGFuZ2VzKGUpO1xuICAgIH1cbiAgICAvKiogSGVscGVyIHRvIGFzc2VydCB0aGlzLmNoYW5nZXMgaXMgbm90IG51bGwgICovICAgIGFzc2VydE5vdEFwcGxpZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGU7XG4gICAgfVxuICAgIHNldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgYWRkRW50cnkoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLnB1dChuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICByZW1vdmVFbnRyeShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuZGVsZXRlKFxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyB2aWEgdGhlIHByaW1hcnkga2V5IG9mXG4gKiB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2RiUmVhZFRpbWVLZXkoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUucGF0aC50b0FycmF5KCk7XG4gICAgICAgICAgICByZXR1cm4gWyBcbiAgICAgICAgICAgIC8qIHByZWZpeCBwYXRoICovIG4uc2xpY2UoMCwgbi5sZW5ndGggLSAyKSwgXG4gICAgICAgICAgICAvKiBjb2xsZWN0aW9uIGlkICovIG5bbi5sZW5ndGggLSAyXSwgX19QUklWQVRFX3RvRGJUaW1lc3RhbXBLZXkodCksIFxuICAgICAgICAgICAgLyogZG9jdW1lbnQgaWQgKi8gbltuLmxlbmd0aCAtIDFdIF07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgb24gdGhlXG4gKiBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50Q29sbGVjdGlvbkdyb3VwSW5kZXhgIGluZGV4LlxuICovICh0LCBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxuICAgICAqLyAgICB1cGRhdGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKGUpLm5leHQoKG4gPT4gKG4uYnl0ZVNpemUgKz0gdCwgdGhpcy5YbihlLCBuKSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cnkoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQodCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuWih7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShfX1BSSVZBVEVfZGJLZXkodCkpXG4gICAgICAgIH0sICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbiA9IHRoaXMuZXIodCwgcik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBlbnRyeSBhbmQgaXRzIHNpemUuXG4gICAgICovICAgIHRyKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSB7XG4gICAgICAgICAgICBzaXplOiAwLFxuICAgICAgICAgICAgZG9jdW1lbnQ6IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQodClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KF9fUFJJVkFURV9kYktleSh0KSlcbiAgICAgICAgfSwgKChlLCByKSA9PiB7XG4gICAgICAgICAgICBuID0ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLmVyKHQsIHIpLFxuICAgICAgICAgICAgICAgIHNpemU6IF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZShyKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5ucihlLCB0LCAoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmVyKGUsIHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KGUsIHIpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBzZXQgb2Yga2V5cyBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgZG9jdW1lbnRzIGluZGV4ZWQgYnkga2V5IGFuZCBhIG1hcCBvZiBzaXplcyBpbmRleGVkIGJ5XG4gICAgICogICAgIGtleSAoemVybyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QpLlxuICAgICAqLyAgICBycihlLCB0KSB7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCByID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubnIoZSwgdCwgKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5lcihlLCB0KTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydChlLCBpKSwgciA9IHIuaW5zZXJ0KGUsIF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZSh0KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgZG9jdW1lbnRzOiBuLFxuICAgICAgICAgICAgaXI6IHJcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgbnIoZSwgdCwgbikge1xuICAgICAgICBpZiAodC5pc0VtcHR5KCkpIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBsZXQgciA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX2RiS2V5Q29tcGFyYXRvcik7XG4gICAgICAgIHQuZm9yRWFjaCgoZSA9PiByID0gci5hZGQoZSkpKTtcbiAgICAgICAgY29uc3QgaSA9IElEQktleVJhbmdlLmJvdW5kKF9fUFJJVkFURV9kYktleShyLmZpcnN0KCkpLCBfX1BSSVZBVEVfZGJLZXkoci5sYXN0KCkpKSwgcyA9IHIuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgbGV0IG8gPSBzLmdldE5leHQoKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBpXG4gICAgICAgIH0sICgoZSwgdCwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhbIC4uLnQucHJlZml4UGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZG9jdW1lbnRJZCBdKTtcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2gga2V5cyBub3QgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtvICYmIF9fUFJJVkFURV9kYktleUNvbXBhcmF0b3IobywgaSkgPCAwOyApIG4obywgbnVsbCksIG8gPSBzLmdldE5leHQoKTtcbiAgICAgICAgICAgIG8gJiYgby5pc0VxdWFsKGkpICYmIChcbiAgICAgICAgICAgIC8vIEtleSBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgIG4obywgdCksIG8gPSBzLmhhc05leHQoKSA/IHMuZ2V0TmV4dCgpIDogbnVsbCksIFxuICAgICAgICAgICAgLy8gU2tpcCB0byB0aGUgbmV4dCBrZXkgKGlmIHRoZXJlIGlzIG9uZSkuXG4gICAgICAgICAgICBvID8gci5XKF9fUFJJVkFURV9kYktleShvKSkgOiByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO287ICkgbihvLCBudWxsKSwgbyA9IHMuaGFzTmV4dCgpID8gcy5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gdC5wYXRoLCBzID0gWyBpLnBvcExhc3QoKS50b0FycmF5KCksIGkubGFzdFNlZ21lbnQoKSwgX19QUklWQVRFX3RvRGJUaW1lc3RhbXBLZXkobi5yZWFkVGltZSksIG4uZG9jdW1lbnRLZXkucGF0aC5pc0VtcHR5KCkgPyBcIlwiIDogbi5kb2N1bWVudEtleS5wYXRoLmxhc3RTZWdtZW50KCkgXSwgbyA9IFsgaS5wb3BMYXN0KCkudG9BcnJheSgpLCBpLmxhc3RTZWdtZW50KCksIFsgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIF0sIFwiXCIgXTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5HKElEQktleVJhbmdlLmJvdW5kKHMsIG8sICEwKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZXIoRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKGkucHJlZml4UGF0aC5jb25jYXQoaS5jb2xsZWN0aW9uR3JvdXAsIGkuZG9jdW1lbnRJZCkpLCBpKTtcbiAgICAgICAgICAgICAgICBlLmlzRm91bmREb2N1bWVudCgpICYmIChfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKHQsIGUpIHx8IHIuaGFzKGUua2V5KSkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEVpdGhlciB0aGUgZG9jdW1lbnQgbWF0Y2hlcyB0aGUgZ2l2ZW4gcXVlcnksIG9yIGl0IGlzIG11dGF0ZWQuXG4gICAgICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KGUua2V5LCBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZGJDb2xsZWN0aW9uR3JvdXBLZXkodCwgbiksIG8gPSBfX1BSSVZBVEVfZGJDb2xsZWN0aW9uR3JvdXBLZXkodCwgSW5kZXhPZmZzZXQubWF4KCkpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5ib3VuZChzLCBvLCAhMClcbiAgICAgICAgfSwgKChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5lcihEb2N1bWVudEtleS5mcm9tU2VnbWVudHModC5wcmVmaXhQYXRoLmNvbmNhdCh0LmNvbGxlY3Rpb25Hcm91cCwgdC5kb2N1bWVudElkKSksIHQpO1xuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHMua2V5LCBzKSwgaS5zaXplID09PSByICYmIG4uZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcih0aGlzLCAhIWUgJiYgZS50cmFja1JlbW92YWxzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKGUpLm5leHQoKGUgPT4gZS5ieXRlU2l6ZSkpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRHbG9iYWxTdG9yZShlKS5nZXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiKS5uZXh0KChlID0+IChfX1BSSVZBVEVfaGFyZEFzc2VydCghIWUpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgWG4oZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50R2xvYmFsU3RvcmUoZSkucHV0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIiwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYGRiUmVtb3RlRG9jYCBhbmQgcmV0dXJucyB0aGUgZG9jdW1lbnQgKG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cbiAgICAgKi8gICAgZXIoZSwgdCkge1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9mcm9tRGJSZW1vdGVEb2N1bWVudCh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICAgICAgLy8gV2hldGhlciB0aGUgZG9jdW1lbnQgaXMgYSBzZW50aW5lbCByZW1vdmFsIGFuZCBzaG91bGQgb25seSBiZSB1c2VkIGluIHRoZVxuICAgICAgICAgICAgLy8gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZS5pc05vRG9jdW1lbnQoKSAmJiBlLnZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpKSkgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQoZSk7XG4gICAgfVxufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZShlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZUltcGwoZSk7XG59XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBVbmxpa2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLCB0aGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGNvbXB1dGVzIHRoZSBzaXplXG4gKiBkZWx0YSBmb3IgYWxsIHN1Ym1pdHRlZCBjaGFuZ2VzLiBUaGlzIGF2b2lkcyBoYXZpbmcgdG8gcmUtcmVhZCBhbGwgZG9jdW1lbnRzIGZyb20gSW5kZXhlZERiXG4gKiB3aGVuIHdlIGFwcGx5IHRoZSBjaGFuZ2VzLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciBleHRlbmRzIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRDYWNoZSAtIFRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlIHRvIGFwcGx5IHRoZSBjaGFuZ2VzIHRvLlxuICAgICAqIEBwYXJhbSB0cmFja1JlbW92YWxzIC0gV2hldGhlciB0byBjcmVhdGUgc2VudGluZWwgZGVsZXRlcyB0aGF0IGNhbiBiZSB0cmFja2VkIGJ5XG4gICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuc3IgPSBlLCB0aGlzLnRyYWNrUmVtb3ZhbHMgPSB0LCBcbiAgICAgICAgLy8gQSBtYXAgb2YgZG9jdW1lbnQgc2l6ZXMgYW5kIHJlYWQgdGltZXMgcHJpb3IgdG8gYXBwbHlpbmcgdGhlIGNoYW5nZXMgaW5cbiAgICAgICAgLy8gdGhpcyBidWZmZXIuXG4gICAgICAgIHRoaXMuX3IgPSBuZXcgT2JqZWN0TWFwKChlID0+IGUudG9TdHJpbmcoKSksICgoZSwgdCkgPT4gZS5pc0VxdWFsKHQpKSk7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgbGV0IG4gPSAwLCByID0gbmV3IFNvcnRlZFNldCgoKGUsIHQpID0+IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuY2Fub25pY2FsU3RyaW5nKCksIHQuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKGksIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLl9yLmdldChpKTtcbiAgICAgICAgICAgIGlmICh0LnB1c2godGhpcy5zci5yZW1vdmVFbnRyeShlLCBpLCBvLnJlYWRUaW1lKSksIHMuaXNWYWxpZERvY3VtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBfID0gX19QUklWQVRFX3RvRGJSZW1vdGVEb2N1bWVudCh0aGlzLnNyLnNlcmlhbGl6ZXIsIHMpO1xuICAgICAgICAgICAgICAgIHIgPSByLmFkZChpLnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gX19QUklWQVRFX2RiRG9jdW1lbnRTaXplKF8pO1xuICAgICAgICAgICAgICAgIG4gKz0gYSAtIG8uc2l6ZSwgdC5wdXNoKHRoaXMuc3IuYWRkRW50cnkoZSwgaSwgXykpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuIC09IG8uc2l6ZSwgdGhpcy50cmFja1JlbW92YWxzKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gdHJhY2sgcmVtb3ZhbHMsIHdlIHN0b3JlIGEgXCJzZW50aW5lbCBkZWxldGVcIiBpbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVEb2N1bWVudENhY2hlLiBUaGlzIGVudHJ5IGlzIHJlcHJlc2VudGVkIGJ5IGEgTm9Eb2N1bWVudFxuICAgICAgICAgICAgICAgIC8vIHdpdGggYSB2ZXJzaW9uIG9mIDAgYW5kIGlnbm9yZWQgYnkgYG1heWJlRGVjb2RlRG9jdW1lbnQoKWAgYnV0XG4gICAgICAgICAgICAgICAgLy8gcHJlc2VydmVkIGluIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV90b0RiUmVtb3RlRG9jdW1lbnQodGhpcy5zci5zZXJpYWxpemVyLCBzLmNvbnZlcnRUb05vRG9jdW1lbnQoU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgICAgICAgICAgdC5wdXNoKHRoaXMuc3IuYWRkRW50cnkoZSwgaSwgbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHIuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LnB1c2godGhpcy5zci5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgbikpO1xuICAgICAgICB9KSksIHQucHVzaCh0aGlzLnNyLnVwZGF0ZU1ldGFkYXRhKGUsIG4pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IodCk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZShlLCB0KSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGUgYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3IudHIoZSwgdCkubmV4dCgoZSA9PiAodGhpcy5fci5zZXQodCwge1xuICAgICAgICAgICAgc2l6ZTogZS5zaXplLFxuICAgICAgICAgICAgcmVhZFRpbWU6IGUuZG9jdW1lbnQucmVhZFRpbWVcbiAgICAgICAgfSksIGUuZG9jdW1lbnQpKSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZShlLCB0KSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGVcbiAgICAgICAgLy8gYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3IucnIoZSwgdCkubmV4dCgoKHtkb2N1bWVudHM6IGUsIGlyOiB0fSkgPT4gKFxuICAgICAgICAvLyBOb3RlOiBgZ2V0QWxsRnJvbUNhY2hlYCByZXR1cm5zIHR3byBtYXBzIGluc3RlYWQgb2YgYSBzaW5nbGUgbWFwIGZyb21cbiAgICAgICAgLy8ga2V5cyB0byBgRG9jdW1lbnRTaXplRW50cnlgcy4gVGhpcyBpcyB0byBhbGxvdyByZXR1cm5pbmcgdGhlXG4gICAgICAgIC8vIGBNdXRhYmxlRG9jdW1lbnRNYXBgIGRpcmVjdGx5LCB3aXRob3V0IGEgY29udmVyc2lvbi5cbiAgICAgICAgdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fci5zZXQodCwge1xuICAgICAgICAgICAgICAgIHNpemU6IG4sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGUuZ2V0KHQpLnJlYWRUaW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCBlKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50R2xvYmFsU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyBvbiB0aGVcbiAqIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRLZXlJbmRleGAgaW5kZXguXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RiS2V5KGUpIHtcbiAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gWyBcbiAgICAvKiBwcmVmaXggcGF0aCAqLyB0LnNsaWNlKDAsIHQubGVuZ3RoIC0gMiksIFxuICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gdFt0Lmxlbmd0aCAtIDJdLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyB0W3QubGVuZ3RoIC0gMV0gXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2RiQ29sbGVjdGlvbkdyb3VwS2V5KGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5kb2N1bWVudEtleS5wYXRoLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gWyBcbiAgICAvKiBjb2xsZWN0aW9uIGlkICovIGUsIF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KHQucmVhZFRpbWUpLCBcbiAgICAvKiBwcmVmaXggcGF0aCAqLyBuLnNsaWNlKDAsIG4ubGVuZ3RoIC0gMiksIFxuICAgIC8qIGRvY3VtZW50IGlkICovIG4ubGVuZ3RoID4gMCA/IG5bbi5sZW5ndGggLSAxXSA6IFwiXCIgXTtcbn1cblxuLyoqXG4gKiBDb21wYXJhdG9yIHRoYXQgY29tcGFyZXMgZG9jdW1lbnQga2V5cyBhY2NvcmRpbmcgdG8gdGhlIHByaW1hcnkga2V5IHNvcnRpbmdcbiAqIHVzZWQgYnkgdGhlIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRgIHN0b3JlIChieSBwcmVmaXggcGF0aCwgY29sbGVjdGlvbiBpZFxuICogYW5kIHRoZW4gZG9jdW1lbnQgSUQpLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RiS2V5Q29tcGFyYXRvcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IGUucGF0aC50b0FycmF5KCksIHIgPSB0LnBhdGgudG9BcnJheSgpO1xuICAgIC8vIFRoZSBvcmRlcmluZyBpcyBiYXNlZCBvbiBodHRwczovL2Nocm9taXVtLmdvb2dsZXNvdXJjZS5jb20vY2hyb21pdW0vYmxpbmsvKy9mZTVjMjFmZWY5NGRhZTcxYzFjMzM0NDc3NWI4ZDhhN2Y3ZTZkOWVjL1NvdXJjZS9tb2R1bGVzL2luZGV4ZWRkYi9JREJLZXkuY3BwIzc0XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgbi5sZW5ndGggLSAyICYmIGUgPCByLmxlbmd0aCAtIDI7ICsrZSkgaWYgKGkgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuW2VdLCByW2VdKSwgXG4gICAgaSkgcmV0dXJuIGk7XG4gICAgcmV0dXJuIGkgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLmxlbmd0aCwgci5sZW5ndGgpLCBpIHx8IChpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IobltuLmxlbmd0aCAtIDJdLCByW3IubGVuZ3RoIC0gMl0pLCBcbiAgICBpIHx8IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG5bbi5sZW5ndGggLSAxXSwgcltyLmxlbmd0aCAtIDFdKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNjaGVtYSBWZXJzaW9uIGZvciB0aGUgV2ViIGNsaWVudDpcbiAqIDEuICBJbml0aWFsIHZlcnNpb24gaW5jbHVkaW5nIE11dGF0aW9uIFF1ZXVlLCBRdWVyeSBDYWNoZSwgYW5kIFJlbW90ZVxuICogICAgIERvY3VtZW50IENhY2hlXG4gKiAyLiAgVXNlZCB0byBlbnN1cmUgYSB0YXJnZXRHbG9iYWwgb2JqZWN0IGV4aXN0cyBhbmQgYWRkIHRhcmdldENvdW50IHRvIGl0LiBOb1xuICogICAgIGxvbmdlciByZXF1aXJlZCBiZWNhdXNlIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gKiAzLiAgRHJvcHBlZCBhbmQgcmUtY3JlYXRlZCBRdWVyeSBDYWNoZSB0byBkZWFsIHdpdGggY2FjaGUgY29ycnVwdGlvbiByZWxhdGVkXG4gKiAgICAgdG8gbGltYm8gcmVzb2x1dGlvbi4gQWRkcmVzc2VzXG4gKiAgICAgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWlvcy1zZGsvaXNzdWVzLzE1NDhcbiAqIDQuICBNdWx0aS1UYWIgU3VwcG9ydC5cbiAqIDUuICBSZW1vdmFsIG9mIGhlbGQgd3JpdGUgYWNrcy5cbiAqIDYuICBDcmVhdGUgZG9jdW1lbnQgZ2xvYmFsIGZvciB0cmFja2luZyBkb2N1bWVudCBjYWNoZSBzaXplLlxuICogNy4gIEVuc3VyZSBldmVyeSBjYWNoZWQgZG9jdW1lbnQgaGFzIGEgc2VudGluZWwgcm93IHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuXG4gKiA4LiAgQWRkIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGZvciBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJpZXMuXG4gKiA5LiAgQ2hhbmdlIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBzdG9yZSB0byBiZSBrZXllZCBieSByZWFkVGltZSByYXRoZXIgdGhhblxuICogICAgIGFuIGF1dG8taW5jcmVtZW50aW5nIElELiBUaGlzIGlzIHJlcXVpcmVkIGZvciBJbmRleC1GcmVlIHF1ZXJpZXMuXG4gKiAxMC4gUmV3cml0ZSB0aGUgY2Fub25pY2FsIElEcyB0byB0aGUgZXhwbGljaXQgUHJvdG9idWYtYmFzZWQgZm9ybWF0LlxuICogMTEuIEFkZCBidW5kbGVzIGFuZCBuYW1lZF9xdWVyaWVzIGZvciBidW5kbGUgc3VwcG9ydC5cbiAqIDEyLiBBZGQgZG9jdW1lbnQgb3ZlcmxheXMuXG4gKiAxMy4gUmV3cml0ZSB0aGUga2V5cyBvZiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHRvIGFsbG93IGZvciBlZmZpY2llbnRcbiAqICAgICBkb2N1bWVudCBsb29rdXAgdmlhIGBnZXRBbGwoKWAuXG4gKiAxNC4gQWRkIG92ZXJsYXlzLlxuICogMTUuIEFkZCBpbmRleGluZyBzdXBwb3J0LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWwgdmlldyAob3ZlcmxheSkgb2YgYSBkb2N1bWVudCwgYW5kIHRoZSBmaWVsZHMgdGhhdCBhcmVcbiAqIGxvY2FsbHkgbXV0YXRlZC5cbiAqL1xuY2xhc3MgT3ZlcmxheWVkRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZHMgdGhhdCBhcmUgbG9jYWxseSBtdXRhdGVkIGJ5IHBhdGNoIG11dGF0aW9ucy5cbiAgICAgKlxuICAgICAqIElmIHRoZSBvdmVybGF5ZWRcdGRvY3VtZW50IGlzIGZyb20gc2V0IG9yIGRlbGV0ZSBtdXRhdGlvbnMsIHRoaXMgaXMgYG51bGxgLlxuICAgICAqIElmIHRoZXJlIGlzIG5vIG92ZXJsYXkgKG11dGF0aW9uKSBmb3IgdGhlIGRvY3VtZW50LCB0aGlzIGlzIGFuIGVtcHR5IGBGaWVsZE1hc2tgLlxuICAgICAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5ZWREb2N1bWVudCA9IGUsIHRoaXMubXV0YXRlZEZpZWxkcyA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlYWRvbmx5IHZpZXcgb2YgdGhlIGxvY2FsIHN0YXRlIG9mIGFsbCBkb2N1bWVudHMgd2UncmUgdHJhY2tpbmcgKGkuZS4gd2VcbiAqIGhhdmUgYSBjYWNoZWQgdmVyc2lvbiBpbiByZW1vdGVEb2N1bWVudENhY2hlIG9yIGxvY2FsIG11dGF0aW9ucyBmb3IgdGhlXG4gKiBkb2N1bWVudCkuIFRoZSB2aWV3IGlzIGNvbXB1dGVkIGJ5IGFwcGx5aW5nIHRoZSBtdXRhdGlvbnMgaW4gdGhlXG4gKiBNdXRhdGlvblF1ZXVlIHRvIHRoZSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICovIGNsYXNzIExvY2FsRG9jdW1lbnRzVmlldyB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBlLCB0aGlzLm11dGF0aW9uUXVldWUgPSB0LCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlID0gbiwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBpZGVudGlmaWVkIGJ5IGBrZXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgTG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgb3IgbnVsbCBpZiB3ZSBkb24ndCBoYXZlIGFueSBjYWNoZWRcbiAgICAgKiBzdGF0ZSBmb3IgaXQuXG4gICAgICovICAgIGdldERvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5KGUsIHQpLm5leHQoKHIgPT4gKG4gPSByLCB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoZSwgdCkpKSkubmV4dCgoZSA9PiAobnVsbCAhPT0gbiAmJiBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KG4ubXV0YXRpb24sIGUsIEZpZWxkTWFzay5lbXB0eSgpLCBUaW1lc3RhbXAubm93KCkpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGlkZW50aWZpZWQgYnkgYGtleXNgLlxuICAgICAqXG4gICAgICogSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc3RhdGUgZm9yIGEgZG9jdW1lbnQgaW4gYGtleXNgLCBhIE5vRG9jdW1lbnQgd2lsbFxuICAgICAqIGJlIHN0b3JlZCBmb3IgdGhhdCBrZXkgaW4gdGhlIHJlc3VsdGluZyBzZXQuXG4gICAgICovICAgIGdldERvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cmllcyhlLCB0KS5uZXh0KCh0ID0+IHRoaXMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgdCwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpLm5leHQoKCgpID0+IHQpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaW1pbGFyIHRvIGBnZXREb2N1bWVudHNgLCBidXQgY3JlYXRlcyB0aGUgbG9jYWwgdmlldyBmcm9tIHRoZSBnaXZlblxuICAgICAqIGBiYXNlRG9jc2Agd2l0aG91dCByZXRyaWV2aW5nIGRvY3VtZW50cyBmcm9tIHRoZSBsb2NhbCBzdG9yZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiB0aGlzIG9wZXJhdGlvbiBpcyBzY29wZWQgdG8uXG4gICAgICogQHBhcmFtIGRvY3MgLSBUaGUgZG9jdW1lbnRzIHRvIGFwcGx5IGxvY2FsIG11dGF0aW9ucyB0byBnZXQgdGhlIGxvY2FsIHZpZXdzLlxuICAgICAqIEBwYXJhbSBleGlzdGVuY2VTdGF0ZUNoYW5nZWQgLSBUaGUgc2V0IG9mIGRvY3VtZW50IGtleXMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlXG4gICAgICogICBpcyBjaGFuZ2VkLiBUaGlzIGlzIHVzZWZ1bCB0byBkZXRlcm1pbmUgaWYgc29tZSBkb2N1bWVudHMgb3ZlcmxheSBuZWVkc1xuICAgICAqICAgdG8gYmUgcmVjYWxjdWxhdGVkLlxuICAgICAqLyAgICBnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyhlLCB0LCBuID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRlT3ZlcmxheXMoZSwgciwgdCkubmV4dCgoKCkgPT4gdGhpcy5jb21wdXRlVmlld3MoZSwgdCwgciwgbikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBsZXQgdCA9IGRvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChlLCBuLm92ZXJsYXllZERvY3VtZW50KTtcbiAgICAgICAgICAgIH0pKSwgdDtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG92ZXJsYXllZCBkb2N1bWVudHMgZm9yIHRoZSBnaXZlbiBkb2N1bWVudCBtYXAsIHdoaWNoIHdpbGwgaW5jbHVkZVxuICAgICAqIHRoZSBsb2NhbCB2aWV3IG9mIHRob3NlIGRvY3VtZW50cyBhbmQgYSBgRmllbGRNYXNrYCBpbmRpY2F0aW5nIHdoaWNoIGZpZWxkc1xuICAgICAqIGFyZSBtdXRhdGVkIGxvY2FsbHksIGBudWxsYCBpZiBvdmVybGF5IGlzIGEgU2V0IG9yIERlbGV0ZSBtdXRhdGlvbi5cbiAgICAgKi8gICAgZ2V0T3ZlcmxheWVkRG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRlT3ZlcmxheXMoZSwgbiwgdCkubmV4dCgoKCkgPT4gdGhpcy5jb21wdXRlVmlld3MoZSwgdCwgbiwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIG92ZXJsYXlzIGZvciB7QGNvZGUgZG9jc30gYW5kIGFkZHMgdGhlbSB0byBwcm92aWRlZCBvdmVybGF5IG1hcFxuICAgICAqIGlmIHRoZSBtYXAgZG9lcyBub3QgYWxyZWFkeSBjb250YWluIGFuIGVudHJ5IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5LlxuICAgICAqLyAgICBwb3B1bGF0ZU92ZXJsYXlzKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQuaGFzKGUpIHx8IHIucHVzaChlKTtcbiAgICAgICAgfSkpLCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQuc2V0KGUsIG4pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3MgLSBUaGUgZG9jdW1lbnRzIHRvIGNvbXB1dGUgdmlld3MgZm9yLiBJdCBhbHNvIGhhcyB0aGUgYmFzZVxuICAgICAqICAgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvdmVybGF5cyAtIFRoZSBvdmVybGF5cyB0aGF0IG5lZWQgdG8gYmUgYXBwbGllZCB0byB0aGUgZ2l2ZW4gYmFzZVxuICAgICAqICAgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBleGlzdGVuY2VTdGF0ZUNoYW5nZWQgLSBBIHNldCBvZiBkb2N1bWVudHMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlc1xuICAgICAqICAgbWlnaHQgaGF2ZSBjaGFuZ2VkLiBUaGlzIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHdlIG5lZWQgdG8gcmUtY2FsY3VsYXRlXG4gICAgICogICBvdmVybGF5cyBmcm9tIG11dGF0aW9uIHF1ZXVlcy5cbiAgICAgKiBAcmV0dXJuIEEgbWFwIHJlcHJlc2VudHMgdGhlIGxvY2FsIGRvY3VtZW50cyB2aWV3LlxuICAgICAqLyAgICBjb21wdXRlVmlld3MoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpLCBvID0gZnVuY3Rpb24gX19QUklWQVRFX25ld092ZXJsYXllZERvY3VtZW50TWFwKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpO1xuICAgICAgICB9KCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gbi5nZXQodC5rZXkpO1xuICAgICAgICAgICAgLy8gUmVjYWxjdWxhdGUgYW4gb3ZlcmxheSBpZiB0aGUgZG9jdW1lbnQncyBleGlzdGVuY2Ugc3RhdGUgY2hhbmdlZCBkdWUgdG9cbiAgICAgICAgICAgIC8vIGEgcmVtb3RlIGV2ZW50ICphbmQqIHRoZSBvdmVybGF5IGlzIGEgUGF0Y2hNdXRhdGlvbi4gVGhpcyBpcyBiZWNhdXNlXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBleGlzdGVuY2Ugc3RhdGUgY2FuIGNoYW5nZSBpZiBzb21lIHBhdGNoIG11dGF0aW9uJ3NcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbnMgYXJlIG1ldC5cbiAgICAgICAgICAgIC8vIE5PVEU6IHdlIHJlY2FsY3VsYXRlIHdoZW4gYG92ZXJsYXlgIGlzIHVuZGVmaW5lZCBhcyB3ZWxsLCBiZWNhdXNlIHRoZXJlXG4gICAgICAgICAgICAvLyBtaWdodCBiZSBhIHBhdGNoIG11dGF0aW9uIHdob3NlIHByZWNvbmRpdGlvbiBkb2VzIG5vdCBtYXRjaCBiZWZvcmUgdGhlXG4gICAgICAgICAgICAvLyBjaGFuZ2UgKGhlbmNlIG92ZXJsYXkgaXMgdW5kZWZpbmVkKSwgYnV0IHdvdWxkIG5vdyBtYXRjaC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHIuaGFzKHQua2V5KSAmJiAodm9pZCAwID09PSBvIHx8IG8ubXV0YXRpb24gaW5zdGFuY2VvZiBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbikgPyBpID0gaS5pbnNlcnQodC5rZXksIHQpIDogdm9pZCAwICE9PSBvID8gKHMuc2V0KHQua2V5LCBvLm11dGF0aW9uLmdldEZpZWxkTWFzaygpKSwgXG4gICAgICAgICAgICBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KG8ubXV0YXRpb24sIHQsIG8ubXV0YXRpb24uZ2V0RmllbGRNYXNrKCksIFRpbWVzdGFtcC5ub3coKSkpIDogXG4gICAgICAgICAgICAvLyBubyBvdmVybGF5IGV4aXN0c1xuICAgICAgICAgICAgLy8gVXNpbmcgRU1QVFkgdG8gaW5kaWNhdGUgdGhlcmUgaXMgbm8gb3ZlcmxheSBmb3IgdGhlIGRvY3VtZW50LlxuICAgICAgICAgICAgcy5zZXQodC5rZXksIEZpZWxkTWFzay5lbXB0eSgpKTtcbiAgICAgICAgfSkpLCB0aGlzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzKGUsIGkpLm5leHQoKGUgPT4gKGUuZm9yRWFjaCgoKGUsIHQpID0+IHMuc2V0KGUsIHQpKSksIFxuICAgICAgICB0LmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICB2YXIgbjtcbiAgICAgICAgICAgIHJldHVybiBvLnNldChlLCBuZXcgT3ZlcmxheWVkRG9jdW1lbnQodCwgbnVsbCAhPT0gKG4gPSBzLmdldChlKSkgJiYgdm9pZCAwICE9PSBuID8gbiA6IG51bGwpKTtcbiAgICAgICAgfSkpLCBvKSkpO1xuICAgIH1cbiAgICByZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKTtcbiAgICAgICAgLy8gQSByZXZlcnNlIGxvb2t1cCBtYXAgZnJvbSBiYXRjaCBpZCB0byB0aGUgZG9jdW1lbnRzIHdpdGhpbiB0aGF0IGJhdGNoLlxuICAgICAgICAgICAgICAgIGxldCByID0gbmV3IFNvcnRlZE1hcCgoKGUsIHQpID0+IGUgLSB0KSksIGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkgaS5rZXlzKCkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBzKSByZXR1cm47XG4gICAgICAgICAgICAgICAgbGV0IG8gPSBuLmdldChlKSB8fCBGaWVsZE1hc2suZW1wdHkoKTtcbiAgICAgICAgICAgICAgICBvID0gaS5hcHBseVRvTG9jYWxWaWV3KHMsIG8pLCBuLnNldChlLCBvKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfID0gKHIuZ2V0KGkuYmF0Y2hJZCkgfHwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpLmFkZChlKTtcbiAgICAgICAgICAgICAgICByID0gci5pbnNlcnQoaS5iYXRjaElkLCBfKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXSwgbyA9IHIuZ2V0UmV2ZXJzZUl0ZXJhdG9yKCk7XG4gICAgICAgICAgICAvLyBJdGVyYXRlIGluIGRlc2NlbmRpbmcgb3JkZXIgb2YgYmF0Y2ggSURzLCBhbmQgc2tpcCBkb2N1bWVudHMgdGhhdCBhcmVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgc2F2ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtvLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG8uZ2V0TmV4dCgpLCBfID0gci5rZXksIGEgPSByLnZhbHVlLCB1ID0gX19QUklWQVRFX25ld011dGF0aW9uTWFwKCk7XG4gICAgICAgICAgICAgICAgYS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpLmhhcyhlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9jYWxjdWxhdGVPdmVybGF5TXV0YXRpb24odC5nZXQoZSksIG4uZ2V0KGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHIgJiYgdS5zZXQoZSwgciksIGkgPSBpLmFkZChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKSwgcy5wdXNoKHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuc2F2ZU92ZXJsYXlzKGUsIF8sIHUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjYWxjdWxhdGVzIG92ZXJsYXlzIGJ5IHJlYWRpbmcgdGhlIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZVxuICAgICAqIGZpcnN0LCBhbmQgc2F2ZXMgdGhlbSBhZnRlciB0aGV5IGFyZSBjYWxjdWxhdGVkLlxuICAgICAqLyAgICByZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cmllcyhlLCB0KS5uZXh0KCh0ID0+IHRoaXMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXMoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCB2aWV3IG9mIGFsbCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIG1hdGNoIGRvY3VtZW50cyBhZ2FpbnN0LlxuICAgICAqIEBwYXJhbSBvZmZzZXQgLSBSZWFkIHRpbWUgYW5kIGtleSB0byBzdGFydCBzY2FubmluZyBieSAoZXhjbHVzaXZlKS5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuKSB7XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgc2luZ2xlIGRvY3VtZW50IGJ5IHBhdGggKHJhdGhlciB0aGFuIGFcbiAqIGNvbGxlY3Rpb24pLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEb2N1bWVudFF1ZXJ5JDEoZSkge1xuICAgICAgICAgICAgcmV0dXJuIERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZS5wYXRoKSAmJiBudWxsID09PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSBlLmZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB9KHQpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkoZSwgdC5wYXRoKSA6IF9fUFJJVkFURV9pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHQpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KGUsIHQsIG4pIDogdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeShlLCB0LCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBjb2xsZWN0aW9uIGdyb3VwLCByZXR1cm5zIHRoZSBuZXh0IGRvY3VtZW50cyB0aGF0IGZvbGxvdyB0aGUgcHJvdmlkZWQgb2Zmc2V0LCBhbG9uZ1xuICAgICAqIHdpdGggYW4gdXBkYXRlZCBiYXRjaCBJRC5cbiAgICAgKlxuICAgICAqIDxwPlRoZSBkb2N1bWVudHMgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgYXJlIG9yZGVyZWQgYnkgcmVtb3RlIHZlcnNpb24gZnJvbSB0aGUgcHJvdmlkZWRcbiAgICAgKiBvZmZzZXQuIElmIHRoZXJlIGFyZSBubyBtb3JlIHJlbW90ZSBkb2N1bWVudHMgYWZ0ZXIgdGhlIHByb3ZpZGVkIG9mZnNldCwgZG9jdW1lbnRzIHdpdGhcbiAgICAgKiBtdXRhdGlvbnMgaW4gb3JkZXIgb2YgYmF0Y2ggaWQgZnJvbSB0aGUgb2Zmc2V0IGFyZSByZXR1cm5lZC4gU2luY2UgYWxsIGRvY3VtZW50cyBpbiBhIGJhdGNoIGFyZVxuICAgICAqIHJldHVybmVkIHRvZ2V0aGVyLCB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyByZXR1cm5lZCBjYW4gZXhjZWVkIHtAY29kZSBjb3VudH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25cbiAgICAgKiBAcGFyYW0gY29sbGVjdGlvbkdyb3VwIFRoZSBjb2xsZWN0aW9uIGdyb3VwIGZvciB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIG9mZnNldCB0byBpbmRleCBpbnRvLlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0byByZXR1cm5cbiAgICAgKiBAcmV0dXJuIEEgTG9jYWxXcml0ZVJlc3VsdCB3aXRoIHRoZSBkb2N1bWVudHMgdGhhdCBmb2xsb3cgdGhlIHByb3ZpZGVkIG9mZnNldCBhbmQgdGhlIGxhc3QgcHJvY2Vzc2VkIGJhdGNoIGlkLlxuICAgICAqLyAgICBnZXROZXh0RG9jdW1lbnRzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHIgLSBpLnNpemUgPiAwID8gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cChlLCB0LCBuLmxhcmdlc3RCYXRjaElkLCByIC0gaS5zaXplKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCkpO1xuICAgICAgICAgICAgLy8gVGhlIGNhbGxzaXRlIHdpbGwgdXNlIHRoZSBsYXJnZXN0IGJhdGNoIElEIHRvZ2V0aGVyIHdpdGggdGhlIGxhdGVzdCByZWFkIHRpbWUgdG8gY3JlYXRlXG4gICAgICAgICAgICAvLyBhIG5ldyBpbmRleCBvZmZzZXQuIFNpbmNlIHdlIG9ubHkgcHJvY2VzcyBiYXRjaCBJRHMgaWYgYWxsIHJlbW90ZSBkb2N1bWVudHMgaGF2ZSBiZWVuIHJlYWQsXG4gICAgICAgICAgICAvLyBubyBvdmVybGF5IHdpbGwgaW5jcmVhc2UgdGhlIG92ZXJhbGwgcmVhZCB0aW1lLiBUaGlzIGlzIHdoeSB3ZSBvbmx5IG5lZWQgdG8gc3BlY2lhbCBjYXNlXG4gICAgICAgICAgICAvLyB0aGUgYmF0Y2ggaWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IC0xLCBfID0gaTtcbiAgICAgICAgICAgIHJldHVybiBzLm5leHQoKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKCh0LCBuKSA9PiAobyA8IG4ubGFyZ2VzdEJhdGNoSWQgJiYgKG8gPSBuLmxhcmdlc3RCYXRjaElkKSwgXG4gICAgICAgICAgICBpLmdldCh0KSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgXyA9IF8uaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgfSkpKSkpLm5leHQoKCgpID0+IHRoaXMucG9wdWxhdGVPdmVybGF5cyhlLCB0LCBpKSkpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKGUsIF8sIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSkpLm5leHQoKGUgPT4gKHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiBvLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IF9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwKGUpXG4gICAgICAgICAgICB9KSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXG4gICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50KGUsIG5ldyBEb2N1bWVudEtleSh0KSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBsZXQgdCA9IGRvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAodCA9IHQuaW5zZXJ0KGUua2V5LCBlKSksIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0LmNvbGxlY3Rpb25Hcm91cDtcbiAgICAgICAgbGV0IGkgPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0Q29sbGVjdGlvblBhcmVudHMoZSwgcikubmV4dCgocyA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChzLCAocyA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gZnVuY3Rpb24gX19QUklWQVRFX2FzQ29sbGVjdGlvblF1ZXJ5QXRQYXRoKGUsIHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwodCwgXG4gICAgICAgICAgICAgICAgLypjb2xsZWN0aW9uR3JvdXA9Ki8gbnVsbCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xuICAgICAgICAgICAgfSh0LCBzLmNoaWxkKHIpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KGUsIG8sIG4pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KGUsIHQpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeShlLCB0LCBuKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbihlLCB0LnBhdGgsIG4ubGFyZ2VzdEJhdGNoSWQpLm5leHQoKGkgPT4gKHIgPSBpLCBcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiwgcikpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAvLyBBcyBkb2N1bWVudHMgbWlnaHQgbWF0Y2ggdGhlIHF1ZXJ5IGJlY2F1c2Ugb2YgdGhlaXIgb3ZlcmxheSB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBpbmNsdWRlIGRvY3VtZW50cyBmb3IgYWxsIG92ZXJsYXlzIGluIHRoZSBpbml0aWFsIGRvY3VtZW50IHNldC5cbiAgICAgICAgICAgIHIuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbi5nZXRLZXkoKTtcbiAgICAgICAgICAgICAgICBudWxsID09PSBlLmdldChyKSAmJiAoZSA9IGUuaW5zZXJ0KHIsIE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQocikpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBvdmVybGF5cyBhbmQgbWF0Y2ggYWdhaW5zdCB0aGUgcXVlcnkuXG4gICAgICAgICAgICBsZXQgbiA9IGRvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSByLmdldChlKTtcbiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHMgJiYgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhzLm11dGF0aW9uLCBpLCBGaWVsZE1hc2suZW1wdHkoKSwgVGltZXN0YW1wLm5vdygpKSwgXG4gICAgICAgICAgICAgICAgLy8gRmluYWxseSwgaW5zZXJ0IHRoZSBkb2N1bWVudHMgdGhhdCBzdGlsbCBtYXRjaCB0aGUgcXVlcnlcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKHQsIGkpICYmIChuID0gbi5pbnNlcnQoZSwgaSkpO1xuICAgICAgICAgICAgfSkpLCBuO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5QnVuZGxlQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZSwgdGhpcy5hciA9IG5ldyBNYXAsIHRoaXMudXIgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmFyLmdldCh0KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFyLnNldCh0LmlkLCBcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUJ1bmRsZU1ldGFkYXRhKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGUuaWQsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogZS52ZXJzaW9uLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLmNyZWF0ZVRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnVyLmdldCh0KSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXIuc2V0KHQubmFtZSwgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Qcm90b05hbWVkUXVlcnkoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBlLm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX19QUklWQVRFX2Zyb21WZXJzaW9uKGUucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBEb2N1bWVudE92ZXJsYXlDYWNoZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5RG9jdW1lbnRPdmVybGF5Q2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcCBzb3J0ZWQgYnkgRG9jdW1lbnRLZXksIHdob3NlIHZhbHVlIGlzIGEgcGFpciBvZiB0aGUgbGFyZ2VzdCBiYXRjaCBpZFxuICAgICAgICAvLyBmb3IgdGhlIG92ZXJsYXkgYW5kIHRoZSBvdmVybGF5IGl0c2VsZi5cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvciksIHRoaXMuY3IgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRPdmVybGF5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMub3ZlcmxheXMuZ2V0KHQpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHRoaXMuZ2V0T3ZlcmxheShlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIG51bGwgIT09IGUgJiYgbi5zZXQodCwgZSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgc2F2ZU92ZXJsYXlzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaHQoZSwgdCwgcik7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3IuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSByICYmIChyLmZvckVhY2goKGUgPT4gdGhpcy5vdmVybGF5cyA9IHRoaXMub3ZlcmxheXMucmVtb3ZlKGUpKSksIFxuICAgICAgICB0aGlzLmNyLmRlbGV0ZShuKSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbihlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpLCBpID0gdC5sZW5ndGggKyAxLCBzID0gbmV3IERvY3VtZW50S2V5KHQuY2hpbGQoXCJcIikpLCBvID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvckZyb20ocyk7XG4gICAgICAgIGZvciAoO28uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldE5leHQoKS52YWx1ZSwgcyA9IGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAoIXQuaXNQcmVmaXhPZihzLnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIC8vIERvY3VtZW50cyBmcm9tIHN1Yi1jb2xsZWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgcy5wYXRoLmxlbmd0aCA9PT0gaSAmJiAoZS5sYXJnZXN0QmF0Y2hJZCA+IG4gJiYgci5zZXQoZS5nZXRLZXkoKSwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IG5ldyBTb3J0ZWRNYXAoKChlLCB0KSA9PiBlIC0gdCkpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtzLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcy5nZXROZXh0KCkudmFsdWU7XG4gICAgICAgICAgICBpZiAoZS5nZXRLZXkoKS5nZXRDb2xsZWN0aW9uR3JvdXAoKSA9PT0gdCAmJiBlLmxhcmdlc3RCYXRjaElkID4gbikge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gaS5nZXQoZS5sYXJnZXN0QmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gdCAmJiAodCA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCksIGkgPSBpLmluc2VydChlLmxhcmdlc3RCYXRjaElkLCB0KSksIFxuICAgICAgICAgICAgICAgIHQuc2V0KGUuZ2V0S2V5KCksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpLCBfID0gaS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtfLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoXy5nZXROZXh0KCkudmFsdWUuZm9yRWFjaCgoKGUsIHQpID0+IG8uc2V0KGUsIHQpKSksIG8uc2l6ZSgpID49IHIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShvKTtcbiAgICB9XG4gICAgaHQoZSwgdCwgbikge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGFzc29jaWF0aW9uIG9mIHRoZSBvdmVybGF5IHRvIGl0cyBiYXRjaCBpZC5cbiAgICAgICAgY29uc3QgciA9IHRoaXMub3ZlcmxheXMuZ2V0KG4ua2V5KTtcbiAgICAgICAgaWYgKG51bGwgIT09IHIpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmNyLmdldChyLmxhcmdlc3RCYXRjaElkKS5kZWxldGUobi5rZXkpO1xuICAgICAgICAgICAgdGhpcy5jci5zZXQoci5sYXJnZXN0QmF0Y2hJZCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IHRoaXMub3ZlcmxheXMuaW5zZXJ0KG4ua2V5LCBuZXcgT3ZlcmxheSh0LCBuKSk7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYXNzb2NpYXRpb24gb2YgdGhpcyBvdmVybGF5IHRvIHRoZSBnaXZlbiBsYXJnZXN0QmF0Y2hJZC5cbiAgICAgICAgbGV0IGkgPSB0aGlzLmNyLmdldCh0KTtcbiAgICAgICAgdm9pZCAwID09PSBpICYmIChpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHRoaXMuY3Iuc2V0KHQsIGkpKSwgdGhpcy5jci5zZXQodCwgaS5hZGQobi5rZXkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29sbGVjdGlvbiBvZiByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgZnJvbSBzb21lIGtpbmQgb2YgbnVtYmVyZWQgZW50aXR5XG4gKiAoZWl0aGVyIGEgdGFyZ2V0IElEIG9yIGJhdGNoIElEKS4gQXMgcmVmZXJlbmNlcyBhcmUgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tXG4gKiB0aGUgc2V0IGNvcnJlc3BvbmRpbmcgZXZlbnRzIGFyZSBlbWl0dGVkIHRvIGEgcmVnaXN0ZXJlZCBnYXJiYWdlIGNvbGxlY3Rvci5cbiAqXG4gKiBFYWNoIHJlZmVyZW5jZSBpcyByZXByZXNlbnRlZCBieSBhIERvY3VtZW50UmVmZXJlbmNlIG9iamVjdC4gRWFjaCBvZiB0aGVtXG4gKiBjb250YWlucyBlbm91Z2ggaW5mb3JtYXRpb24gdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhlIHJlZmVyZW5jZS4gVGhleSBhcmUgYWxsXG4gKiBzdG9yZWQgcHJpbWFyaWx5IGluIGEgc2V0IHNvcnRlZCBieSBrZXkuIEEgZG9jdW1lbnQgaXMgY29uc2lkZXJlZCBnYXJiYWdlIGlmXG4gKiB0aGVyZSdzIG5vIHJlZmVyZW5jZXMgaW4gdGhhdCBzZXQgKHRoaXMgY2FuIGJlIGVmZmljaWVudGx5IGNoZWNrZWQgdGhhbmtzIHRvXG4gKiBzb3J0aW5nIGJ5IGtleSkuXG4gKlxuICogUmVmZXJlbmNlU2V0IGFsc28ga2VlcHMgYSBzZWNvbmRhcnkgc2V0IHRoYXQgY29udGFpbnMgcmVmZXJlbmNlcyBzb3J0ZWQgYnlcbiAqIElEcy4gVGhpcyBvbmUgaXMgdXNlZCB0byBlZmZpY2llbnRseSBpbXBsZW1lbnQgcmVtb3ZhbCBvZiBhbGwgcmVmZXJlbmNlcyBieVxuICogc29tZSB0YXJnZXQgSUQuXG4gKi8gY2xhc3MgX19QUklWQVRFX1JlZmVyZW5jZVNldCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLmxyID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfRG9jUmVmZXJlbmNlLmhyKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLlByID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfRG9jUmVmZXJlbmNlLklyKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sci5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKGUsIHQpO1xuICAgICAgICB0aGlzLmxyID0gdGhpcy5sci5hZGQobiksIHRoaXMuUHIgPSB0aGlzLlByLmFkZChuKTtcbiAgICB9XG4gICAgLyoqIEFkZCByZWZlcmVuY2VzIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXlzIGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIFRyKGUsIHQpIHtcbiAgICAgICAgZS5mb3JFYWNoKChlID0+IHRoaXMuYWRkUmVmZXJlbmNlKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXG4gICAgICogSUQuXG4gICAgICovICAgIHJlbW92ZVJlZmVyZW5jZShlLCB0KSB7XG4gICAgICAgIHRoaXMuRXIobmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgdCkpO1xuICAgIH1cbiAgICBkcihlLCB0KSB7XG4gICAgICAgIGUuZm9yRWFjaCgoZSA9PiB0aGlzLnJlbW92ZVJlZmVyZW5jZShlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgYWxsIHJlZmVyZW5jZXMgd2l0aCBhIGdpdmVuIElELiBDYWxscyByZW1vdmVSZWYoKSBmb3IgZWFjaCBrZXlcbiAgICAgKiByZW1vdmVkLlxuICAgICAqLyAgICBBcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgRG9jdW1lbnRLZXkobmV3IFJlc291cmNlUGF0aChbXSkpLCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgZSksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBlICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUHIuZm9yRWFjaEluUmFuZ2UoWyBuLCByIF0sIChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuRXIoZSksIGkucHVzaChlLmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgUnIoKSB7XG4gICAgICAgIHRoaXMubHIuZm9yRWFjaCgoZSA9PiB0aGlzLkVyKGUpKSk7XG4gICAgfVxuICAgIEVyKGUpIHtcbiAgICAgICAgdGhpcy5sciA9IHRoaXMubHIuZGVsZXRlKGUpLCB0aGlzLlByID0gdGhpcy5Qci5kZWxldGUoZSk7XG4gICAgfVxuICAgIFZyKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBEb2N1bWVudEtleShuZXcgUmVzb3VyY2VQYXRoKFtdKSksIG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBlKSwgciA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIGUgKyAxKTtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUHIuZm9yRWFjaEluUmFuZ2UoWyBuLCByIF0sIChlID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZChlLmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgMCksIG4gPSB0aGlzLmxyLmZpcnN0QWZ0ZXJPckVxdWFsKHQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gbiAmJiBlLmlzRXF1YWwobi5rZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0RvY1JlZmVyZW5jZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmtleSA9IGUsIHRoaXMubXIgPSB0O1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBrZXkgdGhlbiBieSBJRCAqLyAgICBzdGF0aWMgaHIoZSwgdCkge1xuICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdC5rZXkpIHx8IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUubXIsIHQubXIpO1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBJRCB0aGVuIGJ5IGtleSAqLyAgICBzdGF0aWMgSXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5tciwgdC5tcikgfHwgRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdC5rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeU11dGF0aW9uUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBlLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2V0IG9mIGFsbCBtdXRhdGlvbnMgdGhhdCBoYXZlIGJlZW4gc2VudCBidXQgbm90IHlldCBiZWVuIGFwcGxpZWQgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBbXSwgXG4gICAgICAgIC8qKiBOZXh0IHZhbHVlIHRvIHVzZSB3aGVuIGFzc2lnbmluZyBzZXF1ZW50aWFsIElEcyB0byBlYWNoIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICB0aGlzLmdyID0gMSwgXG4gICAgICAgIC8qKiBBbiBvcmRlcmVkIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSBtdXRhdGlvbnMgYmF0Y2ggSURzLiAqL1xuICAgICAgICB0aGlzLnByID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfRG9jUmVmZXJlbmNlLmhyKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eShlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaChlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmdyO1xuICAgICAgICB0aGlzLmdyKyssIHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMubXV0YXRpb25RdWV1ZVt0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgTXV0YXRpb25CYXRjaChpLCB0LCBuLCByKTtcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLnB1c2gocyk7XG4gICAgICAgIC8vIFRyYWNrIHJlZmVyZW5jZXMgYnkgZG9jdW1lbnQga2V5IGFuZCBpbmRleCBjb2xsZWN0aW9uIHBhcmVudHMuXG4gICAgICAgIGZvciAoY29uc3QgdCBvZiByKSB0aGlzLnByID0gdGhpcy5wci5hZGQobmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodC5rZXksIGkpKSwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIHQua2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHMpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMueXIodCkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ICsgMSwgciA9IHRoaXMud3IobiksIGkgPSByIDwgMCA/IDAgOiByO1xuICAgICAgICAvLyBUaGUgcmVxdWVzdGVkIGJhdGNoSWQgbWF5IHN0aWxsIGJlIG91dCBvZiByYW5nZSBzbyBub3JtYWxpemUgaXQgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IGkgPyB0aGlzLm11dGF0aW9uUXVldWVbaV0gOiBudWxsKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCgpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPyAtMSA6IHRoaXMuZ3IgLSAxKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5zbGljZSgpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgMCksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLnByLmZvckVhY2hJblJhbmdlKFsgbiwgciBdLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy55cihlLm1yKTtcbiAgICAgICAgICAgIGkucHVzaCh0KTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgMCksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICAgICAgdGhpcy5wci5mb3JFYWNoSW5SYW5nZShbIHQsIHIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgICAgIG4gPSBuLmFkZChlLm1yKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLlNyKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkoZSwgdCkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IHQucGF0aCwgciA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShuZXcgRG9jdW1lbnRLZXkoaSksIDApO1xuICAgICAgICAvLyBGaW5kIHVuaXF1ZSBiYXRjaElEcyByZWZlcmVuY2VkIGJ5IGFsbCBkb2N1bWVudHMgcG90ZW50aWFsbHkgbWF0Y2hpbmcgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGxldCBvID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByLmZvckVhY2hXaGlsZSgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZih0KSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgdC5sZW5ndGggPT09IHIgJiYgKG8gPSBvLmFkZChlLm1yKSksICEwKTtcbiAgICAgICAgfSksIHMpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLlNyKG8pKTtcbiAgICB9XG4gICAgU3IoZSkge1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYW4gYXJyYXkgb2YgbWF0Y2hpbmcgYmF0Y2hlcywgc29ydGVkIGJ5IGJhdGNoSUQgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgLy8gbXVsdGlwbGUgbXV0YXRpb25zIGFmZmVjdGluZyB0aGUgc2FtZSBkb2N1bWVudCBrZXkgYXJlIGFwcGxpZWQgaW4gb3JkZXIuXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy55cihlKTtcbiAgICAgICAgICAgIG51bGwgIT09IG4gJiYgdC5wdXNoKG4pO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgwID09PSB0aGlzLmJyKHQuYmF0Y2hJZCwgXCJyZW1vdmVkXCIpKSwgdGhpcy5tdXRhdGlvblF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGxldCBuID0gdGhpcy5wcjtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQubXV0YXRpb25zLCAociA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2Uoci5rZXksIHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICByZXR1cm4gbiA9IG4uZGVsZXRlKGkpLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHIua2V5KTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHIgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIENuKGUpIHtcbiAgICAgICAgLy8gTm8tb3Agc2luY2UgdGhlIG1lbW9yeSBtdXRhdGlvbiBxdWV1ZSBkb2VzIG5vdCBtYWludGFpbiBhIHNlcGFyYXRlIGNhY2hlLlxuICAgIH1cbiAgICBjb250YWluc0tleShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCAwKSwgciA9IHRoaXMucHIuZmlyc3RBZnRlck9yRXF1YWwobik7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0LmlzRXF1YWwociAmJiByLmtleSkpO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCBhc3NlcnRzIHRoYXRcbiAgICAgKiB0aGUgcmVzdWx0aW5nIGluZGV4IGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIGJhdGNoSWQgdG8gc2VhcmNoIGZvclxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBBIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhlIGNhbGxlciBpcyBkb2luZywgcGhyYXNlZCBpbiBwYXNzaXZlXG4gICAgICogZm9ybSAoZS5nLiBcImFja25vd2xlZGdlZFwiIGluIGEgcm91dGluZSB0aGF0IGFja25vd2xlZGdlcyBiYXRjaGVzKS5cbiAgICAgKi8gICAgYnIoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cihlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZS4gVGhpcyBvcGVyYXRpb25cbiAgICAgKiBpcyBPKDEpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNvbXB1dGVkIGluZGV4IG9mIHRoZSBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLCBiYXNlZCBvblxuICAgICAqIHRoZSBzdGF0ZSBvZiB0aGUgcXVldWUuIE5vdGUgdGhpcyBpbmRleCBjYW4gYmUgbmVnYXRpdmUgaWYgdGhlIHJlcXVlc3RlZFxuICAgICAqIGJhdGNoSWQgaGFzIGFscmVhZHkgYmVlbiByZW12b2VkIGZyb20gdGhlIHF1ZXVlIG9yIHBhc3QgdGhlIGVuZCBvZiB0aGVcbiAgICAgKiBxdWV1ZSBpZiB0aGUgYmF0Y2hJZCBpcyBsYXJnZXIgdGhhbiB0aGUgbGFzdCBhZGRlZCBiYXRjaC5cbiAgICAgKi8gICAgd3IoZSkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUgLSB0aGlzLm11dGF0aW9uUXVldWVbMF0uYmF0Y2hJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGxvb2t1cE11dGF0aW9uQmF0Y2ggdGhhdCBkb2Vzbid0IHJldHVybiBhIHByb21pc2UsIHRoaXMgbWFrZXNcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cbiAgICAgKi8gICAgeXIoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy53cihlKTtcbiAgICAgICAgaWYgKHQgPCAwIHx8IHQgPj0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWVbdF07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlSW1wbCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gICAgICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gICAgICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLkRyID0gZSwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50RW50cnlNYXAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgfSgpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIHNldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cnkgdG8gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIGFkZEVudHJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQua2V5LCByID0gdGhpcy5kb2NzLmdldChuKSwgaSA9IHIgPyByLnNpemUgOiAwLCBzID0gdGhpcy5Ecih0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5pbnNlcnQobiwge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IHQubXV0YWJsZUNvcHkoKSxcbiAgICAgICAgICAgIHNpemU6IHNcbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSBzIC0gaSwgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgbi5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBlbnRyeSBmcm9tIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHQgJiYgKHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5yZW1vdmUoZSksIHRoaXMuc2l6ZSAtPSB0LnNpemUpO1xuICAgIH1cbiAgICBnZXRFbnRyeShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobiA/IG4uZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQoZSwgdCA/IHQuZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQucGF0aCwgbyA9IG5ldyBEb2N1bWVudEtleShzLmNoaWxkKFwiXCIpKSwgXyA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20obyk7XG4gICAgICAgIGZvciAoO18uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHtrZXk6IGUsIHZhbHVlOiB7ZG9jdW1lbnQ6IG99fSA9IF8uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFzLmlzUHJlZml4T2YoZS5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICBlLnBhdGgubGVuZ3RoID4gcy5sZW5ndGggKyAxIHx8IChfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yKF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudChvKSwgbikgPD0gMCB8fCAoci5oYXMoby5rZXkpIHx8IF9fUFJJVkFURV9xdWVyeU1hdGNoZXModCwgbykpICYmIChpID0gaS5pbnNlcnQoby5rZXksIG8ubXV0YWJsZUNvcHkoKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB0aGUgSW5kZXhCYWNrZmlsbGVyIGlmIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIGlzIGVuYWJsZWQuXG4gICAgICAgIGZhaWwoKTtcbiAgICB9XG4gICAgdnIoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5kb2NzLCAoZSA9PiB0KGUpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcihlKSB7XG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcih0aGlzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZShlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnNpemUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciBleHRlbmRzIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuc3IgPSBlO1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHIuaXNWYWxpZERvY3VtZW50KCkgPyB0LnB1c2godGhpcy5zci5hZGRFbnRyeShlLCByKSkgOiB0aGlzLnNyLnJlbW92ZUVudHJ5KG4pO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHQpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zci5nZXRFbnRyeShlLCB0KTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3IuZ2V0RW50cmllcyhlLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlUYXJnZXRDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0IHRvIHRoZSBkYXRhIGFib3V0IHRoYXQgdGFyZ2V0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkNyID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQoZSkpLCBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKSwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZWNlaXZlZCBzbmFwc2hvdCB2ZXJzaW9uLiAqL1xuICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLkZyID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk1yID0gbmV3IF9fUFJJVkFURV9SZWZlcmVuY2VTZXQsIHRoaXMudGFyZ2V0Q291bnQgPSAwLCB0aGlzLk9yID0gX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yLnhuKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Dci5mb3JFYWNoKCgoZSwgbikgPT4gdChuKSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbik7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLkZyKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuT3IubmV4dCgpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuICYmICh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuKSwgdCA+IHRoaXMuRnIgJiYgKHRoaXMuRnIgPSB0KSwgXG4gICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIExuKGUpIHtcbiAgICAgICAgdGhpcy5Dci5zZXQoZS50YXJnZXQsIGUpO1xuICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRJZDtcbiAgICAgICAgdCA+IHRoaXMuaGlnaGVzdFRhcmdldElkICYmICh0aGlzLk9yID0gbmV3IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvcih0KSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0KSwgXG4gICAgICAgIGUuc2VxdWVuY2VOdW1iZXIgPiB0aGlzLkZyICYmICh0aGlzLkZyID0gZS5zZXF1ZW5jZU51bWJlcik7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Mbih0KSwgdGhpcy50YXJnZXRDb3VudCArPSAxLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTG4odCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Dci5kZWxldGUodC50YXJnZXQpLCB0aGlzLk1yLkFyKHQudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKGUsIHQsIG4pIHtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLkNyLmZvckVhY2goKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBvLnNlcXVlbmNlTnVtYmVyIDw9IHQgJiYgbnVsbCA9PT0gbi5nZXQoby50YXJnZXRJZCkgJiYgKHRoaXMuQ3IuZGVsZXRlKHMpLCBpLnB1c2godGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCBvLnRhcmdldElkKSksIFxuICAgICAgICAgICAgcisrKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKS5uZXh0KCgoKSA9PiByKSk7XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuQ3IuZ2V0KHQpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTXIuVHIodCwgbiksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyhlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuTXIuZHIodCwgbik7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLCBpID0gW107XG4gICAgICAgIHJldHVybiByICYmIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBpLnB1c2goci5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTXIuQXIodCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuTXIuVnIodCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5Nci5jb250YWluc0tleSh0KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZSB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIGFjY2VwdHMgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBhIHJlZmVyZW5jZSBkZWxlZ2F0ZS4gVGhpc1xuICAgICAqIGFsbG93cyBib3RoIHRoZSBkZWxlZ2F0ZSBhbmQgdGhpcyBpbnN0YW5jZSB0byBoYXZlIHN0cm9uZyByZWZlcmVuY2VzIHRvXG4gICAgICogZWFjaCBvdGhlciB3aXRob3V0IGhhdmluZyBudWxsYWJsZSBmaWVsZHMgdGhhdCB3b3VsZCB0aGVuIG5lZWQgdG8gYmVcbiAgICAgKiBjaGVja2VkIG9yIGFzc2VydGVkIG9uIGV2ZXJ5IGFjY2Vzcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuTnIgPSB7fSwgdGhpcy5vdmVybGF5cyA9IHt9LCB0aGlzLkJyID0gbmV3IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZSgwKSwgdGhpcy5MciA9ICExLCBcbiAgICAgICAgdGhpcy5MciA9ICEwLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gZSh0aGlzKSwgdGhpcy5rciA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5VGFyZ2V0Q2FjaGUodGhpcyk7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gbmV3IF9fUFJJVkFURV9NZW1vcnlJbmRleE1hbmFnZXIsIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGVJbXBsKGUpO1xuICAgICAgICB9KChlID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUucXIoZSkpKSwgdGhpcy5zZXJpYWxpemVyID0gbmV3IF9fUFJJVkFURV9Mb2NhbFNlcmlhbGl6ZXIodCksIFxuICAgICAgICB0aGlzLlFyID0gbmV3IF9fUFJJVkFURV9NZW1vcnlCdW5kbGVDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxuICAgICAgICByZXR1cm4gdGhpcy5MciA9ICExLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkxyO1xuICAgIH1cbiAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE5ldHdvcmtFbmFibGVkKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKGUpIHtcbiAgICAgICAgLy8gV2UgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IGluZGljZXMgZm9yIG1lbW9yeSBwZXJzaXN0ZW5jZSwgc28gd2UgY2FuXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2FtZSBzaGFyZWQgaW5zdGFuY2Ugb2YgdGhlIG1lbW9yeSBpbmRleCBtYW5hZ2VyLlxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXI7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLm92ZXJsYXlzW2UudG9LZXkoKV07XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IF9fUFJJVkFURV9NZW1vcnlEb2N1bWVudE92ZXJsYXlDYWNoZSwgdGhpcy5vdmVybGF5c1tlLnRvS2V5KCldID0gdCksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLk5yW2UudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBuIHx8IChuID0gbmV3IF9fUFJJVkFURV9NZW1vcnlNdXRhdGlvblF1ZXVlKHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpLCB0aGlzLk5yW2UudG9LZXkoKV0gPSBuKSwgXG4gICAgICAgIG47XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rcjtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFyO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbihlLCB0LCBuKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIk1lbW9yeVBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIGUpO1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9NZW1vcnlUcmFuc2FjdGlvbih0aGlzLkJyLm5leHQoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLktyKCksIG4ocikubmV4dCgoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLiRyKHIpLm5leHQoKCgpID0+IGUpKSkpLnRvUHJvbWlzZSgpLnRoZW4oKGUgPT4gKHIucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICBVcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoT2JqZWN0LnZhbHVlcyh0aGlzLk5yKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleShlLCB0KSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlUcmFuc2FjdGlvbiBleHRlbmRzIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IGUsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLldyID0gbmV3IF9fUFJJVkFURV9SZWZlcmVuY2VTZXQsIFxuICAgICAgICAvKiogVGhlIGxpc3Qgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIHBvdGVudGlhbGx5IEdDZWQgYWZ0ZXIgZWFjaCB0cmFuc2FjdGlvbi4gKi9cbiAgICAgICAgdGhpcy5HciA9IG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyB6cihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUoZSk7XG4gICAgfVxuICAgIGdldCBqcigpIHtcbiAgICAgICAgaWYgKHRoaXMuR3IpIHJldHVybiB0aGlzLkdyO1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLldyLmFkZFJlZmVyZW5jZShuLCB0KSwgdGhpcy5qci5kZWxldGUobi50b1N0cmluZygpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuV3IucmVtb3ZlUmVmZXJlbmNlKG4sIHQpLCB0aGlzLmpyLmFkZChuLnRvU3RyaW5nKCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpyLmFkZCh0LnRvU3RyaW5nKCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSwgdCkge1xuICAgICAgICB0aGlzLldyLkFyKHQudGFyZ2V0SWQpLmZvckVhY2goKGUgPT4gdGhpcy5qci5hZGQoZS50b1N0cmluZygpKSkpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gbi5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0LnRhcmdldElkKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUuZm9yRWFjaCgoZSA9PiB0aGlzLmpyLmFkZChlLnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLnJlbW92ZVRhcmdldERhdGEoZSwgdCkpKTtcbiAgICB9XG4gICAgS3IoKSB7XG4gICAgICAgIHRoaXMuR3IgPSBuZXcgU2V0O1xuICAgIH1cbiAgICAkcihlKSB7XG4gICAgICAgIC8vIFJlbW92ZSBuZXdseSBvcnBoYW5lZCBkb2N1bWVudHMuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuanIsIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBEb2N1bWVudEtleS5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkhyKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUgfHwgdC5yZW1vdmVFbnRyeShyLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHRoaXMuR3IgPSBudWxsLCB0LmFwcGx5KGUpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHIoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlID8gdGhpcy5qci5kZWxldGUodC50b1N0cmluZygpKSA6IHRoaXMuanIuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcXIoZSkge1xuICAgICAgICAvLyBGb3IgZWFnZXIgR0MsIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIGRvY3VtZW50IHNpemUsIHRoZXJlIGFyZSBubyBzaXplIHRocmVzaG9sZHMuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBIcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoWyAoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLldyLmNvbnRhaW5zS2V5KHQpKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KGUsIHQpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLlVyKGUsIHQpIF0pO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBlLCB0aGlzLkpyID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUucGF0aCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpLCBcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gX19QUklWQVRFX25ld0xydUdhcmJhZ2VDb2xsZWN0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIHN0YXRpYyB6cihlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlKGUsIHQpO1xuICAgIH1cbiAgICAvLyBOby1vcHMsIHByZXNlbnQgc28gbWVtb3J5IHBlcnNpc3RlbmNlIGRvZXNuJ3QgaGF2ZSB0byBjYXJlIHdoaWNoIGRlbGVnYXRlXG4gICAgLy8gaXQgaGFzLlxuICAgIEtyKCkge31cbiAgICAkcihlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KGUsIHQpO1xuICAgIH1cbiAgICB6bihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkpuKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KGUpLm5leHQoKGUgPT4gdC5uZXh0KCh0ID0+IGUgKyB0KSkpKTtcbiAgICB9XG4gICAgSm4oZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLmpuKGUsIChlID0+IHtcbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgam4oZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5KciwgKChuLCByKSA9PiB0aGlzLlpuKGUsIG4sIHIpLm5leHQoKGUgPT4gZSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiB0KHIpKSkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgaSA9IHIubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiByLnZyKGUsIChyID0+IHRoaXMuWm4oZSwgciwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlIHx8IChuKyssIGkucmVtb3ZlRW50cnkociwgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IGkuYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnIuc2V0KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQud2l0aFNlcXVlbmNlTnVtYmVyKGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKGUsIG4pO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Kci5zZXQobiwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Kci5zZXQobiwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnIuc2V0KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcXIoZSkge1xuICAgICAgICBsZXQgdCA9IGUua2V5LnRvU3RyaW5nKCkubGVuZ3RoO1xuICAgICAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAodCArPSBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZShlLmRhdGEudmFsdWUpKSwgdDtcbiAgICB9XG4gICAgWm4oZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKFsgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5VcihlLCB0KSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KGUsIHQpLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Kci5nZXQodCk7XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodm9pZCAwICE9PSBlICYmIGUgPiBuKTtcbiAgICAgICAgfSBdKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovIGNsYXNzIF9fUFJJVkFURV9TY2hlbWFDb252ZXJ0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBpbiBwcm9kdWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IGV2ZXIgdXNlZCB0byB1cGdyYWRlIHRoZSBzY2hlbWFcbiAgICAgKiB0byBTQ0hFTUFfVkVSU0lPTi4gRGlmZmVyZW50IHZhbHVlcyBvZiB0b1ZlcnNpb24gYXJlIG9ubHkgdXNlZCBmb3IgdGVzdGluZ1xuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxuICAgICAqLyAgICBCKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbihcImNyZWF0ZU9yVXBncmFkZVwiLCB0KTtcbiAgICAgICAgbiA8IDEgJiYgciA+PSAxICYmICghZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVByaW1hcnlDbGllbnRTdG9yZShlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwib3duZXJcIik7XG4gICAgICAgIH0oZSksIGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVNdXRhdGlvblF1ZXVlKGUpIHtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvblF1ZXVlc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJ1c2VySWRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJhdGNoSWRcIixcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgeCwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgIH0pLCBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBVcGdyYWRlIGZ1bmN0aW9uIHRvIG1pZ3JhdGUgdGhlICdtdXRhdGlvbnMnIHN0b3JlIGZyb20gVjEgdG8gVjMuIExvYWRzXG4gKiBhbmQgcmV3cml0ZXMgYWxsIGRhdGEuXG4gKi8gKGUpLCBfX1BSSVZBVEVfY3JlYXRlUXVlcnlDYWNoZShlKSwgZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUxlZ2FjeVJlbW90ZURvY3VtZW50Q2FjaGUoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1wiKTtcbiAgICAgICAgfShlKSk7XG4gICAgICAgIC8vIE1pZ3JhdGlvbiAyIHRvIHBvcHVsYXRlIHRoZSB0YXJnZXRHbG9iYWwgb2JqZWN0IG5vIGxvbmdlciBuZWVkZWQgc2luY2VcbiAgICAgICAgLy8gbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAgICAgICAgICAgICAgICBsZXQgcyA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHJldHVybiBuIDwgMyAmJiByID49IDMgJiYgKFxuICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxuICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cbiAgICAgICAgMCAhPT0gbiAmJiAoIWZ1bmN0aW9uIF9fUFJJVkFURV9kcm9wUXVlcnlDYWNoZShlKSB7XG4gICAgICAgICAgICBlLmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIpLCBlLmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0c1wiKSwgZS5kZWxldGVPYmplY3RTdG9yZShcInRhcmdldEdsb2JhbFwiKTtcbiAgICAgICAgfShlKSwgX19QUklWQVRFX2NyZWF0ZVF1ZXJ5Q2FjaGUoZSkpLCBzID0gcy5uZXh0KCgoKSA9PiBcbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIHRoZSB0YXJnZXQgZ2xvYmFsIHNpbmdsZXRvbiByb3cuXG4gKlxuICogQHBhcmFtIHR4biAtIFRoZSB2ZXJzaW9uIHVwZ3JhZGUgdHJhbnNhY3Rpb24gZm9yIGluZGV4ZWRkYlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV93cml0ZUVtcHR5VGFyZ2V0R2xvYmFsRW50cnkoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoXCJ0YXJnZXRHbG9iYWxcIiksIG4gPSB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdFRhcmdldElkOiAwLFxuICAgICAgICAgICAgICAgIGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogMCxcbiAgICAgICAgICAgICAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uOiBTbmFwc2hvdFZlcnNpb24ubWluKCkudG9UaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRDb3VudDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0LnB1dChcInRhcmdldEdsb2JhbEtleVwiLCBuKTtcbiAgICAgICAgfShpKSkpKSwgbiA8IDQgJiYgciA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICBzID0gcy5uZXh0KCgoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfdXBncmFkZU11dGF0aW9uQmF0Y2hTY2hlbWFBbmRNaWdyYXRlRGF0YShlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gdC5zdG9yZShcIm11dGF0aW9uc1wiKS5HKCkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgZS5kZWxldGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJiYXRjaElkXCIsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgeCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIiksIGkgPSBuLm1hcCgoZSA9PiByLnB1dChlKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfShlLCBpKSkpKSwgcyA9IHMubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVDbGllbnRNZXRhZGF0YVN0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiY2xpZW50TWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImNsaWVudElkXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHIgPj0gNSAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy5ZcihpKSkpKSwgbiA8IDYgJiYgciA+PSA2ICYmIChzID0gcy5uZXh0KCgoKSA9PiAoZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpO1xuICAgICAgICB9KGUpLCB0aGlzLlpyKGkpKSkpKSwgbiA8IDcgJiYgciA+PSA3ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLlhyKGkpKSkpLCBuIDwgOCAmJiByID49IDggJiYgKHMgPSBzLm5leHQoKCgpID0+IHRoaXMuZWkoZSwgaSkpKSksIFxuICAgICAgICBuIDwgOSAmJiByID49IDkgJiYgKHMgPSBzLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIE11bHRpLVRhYiB1c2VkIHRvIG1hbmFnZSBpdHMgb3duIGNoYW5nZWxvZywgYnV0IHRoaXMgaGFzIGJlZW4gbW92ZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZSBpdHNlbGYuIFNpbmNlIHRoZSBwcmV2aW91cyBjaGFuZ2VcbiAgICAgICAgICAgIC8vIGxvZyBvbmx5IGNvbnRhaW5lZCB0cmFuc2llbnQgZGF0YSwgd2UgY2FuIGRyb3AgaXRzIG9iamVjdCBzdG9yZS5cbiAgICAgICAgICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfZHJvcFJlbW90ZURvY3VtZW50Q2hhbmdlc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgZS5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgICAgICAvLyBOb3RlOiBTY2hlbWEgdmVyc2lvbiA5IHVzZWQgdG8gY3JlYXRlIGEgcmVhZCB0aW1lIGluZGV4IGZvciB0aGVcbiAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgaXMgbm93IGRvbmUgd2l0aCBzY2hlbWEgdmVyc2lvbiAxMy5cbiAgICAgICAgICAgICAgICB9KSkpLCBuIDwgMTAgJiYgciA+PSAxMCAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy50aShpKSkpKSwgbiA8IDExICYmIHIgPj0gMTEgJiYgKHMgPSBzLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlQnVuZGxlc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiYnVuZGxlc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYnVuZGxlSWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKSwgZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZU5hbWVkUXVlcmllc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibmFtZWRRdWVyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJuYW1lXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCAxMiAmJiByID49IDEyICYmIChzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZURvY3VtZW50T3ZlcmxheVN0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5jcmVhdGVPYmplY3RTdG9yZShcImRvY3VtZW50T3ZlcmxheXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiB6XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIGosIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pLCB0LmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsIEgsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKTtcbiAgICAgICAgfSkpKSwgbiA8IDEzICYmIHIgPj0gMTMgJiYgKHMgPSBzLm5leHQoKCgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVSZW1vdGVEb2N1bWVudENhY2hlKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBOXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlSW5kZXgoXCJkb2N1bWVudEtleUluZGV4XCIsIEIpLCB0LmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgTCk7XG4gICAgICAgIH0oZSkpKS5uZXh0KCgoKSA9PiB0aGlzLm5pKGUsIGkpKSkubmV4dCgoKCkgPT4gZS5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1wiKSkpKSwgXG4gICAgICAgIG4gPCAxNCAmJiByID49IDE0ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLnJpKGUsIGkpKSkpLCBuIDwgMTUgJiYgciA+PSAxNSAmJiAocyA9IHMubmV4dCgoKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUZpZWxkSW5kZXgoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4Q29uZmlndXJhdGlvblwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJpbmRleElkXCIsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4U3RhdGVcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6ICRcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwic2VxdWVuY2VOdW1iZXJJbmRleFwiLCBVLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhFbnRyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBXXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcImRvY3VtZW50S2V5SW5kZXhcIiwgRywge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KGUpKSkpLCBzO1xuICAgIH1cbiAgICBacihlKSB7XG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikuWigoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQgKz0gX19QUklWQVRFX2RiRG9jdW1lbnRTaXplKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgICAgICBieXRlU2l6ZTogdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIikucHV0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIiwgbik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgWXIoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShcIm11dGF0aW9uUXVldWVzXCIpLCBuID0gZS5zdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgcmV0dXJuIHQuRygpLm5leHQoKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdC51c2VySWQsIC0xIF0sIFsgdC51c2VySWQsIHQubGFzdEFja25vd2xlZGdlZEJhdGNoSWQgXSk7XG4gICAgICAgICAgICByZXR1cm4gbi5HKFwidXNlck11dGF0aW9uc0luZGV4XCIsIHIpLm5leHQoKG4gPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gobiwgKG4gPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG4udXNlcklkID09PSB0LnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdC51c2VySWQsIHIpLm5leHQoKCgpID0+IHt9KSk7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCBldmVyeSBkb2N1bWVudCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIGhhcyBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93XG4gICAgICogd2l0aCBhIHNlcXVlbmNlIG51bWJlci4gTWlzc2luZyByb3dzIGFyZSBnaXZlbiB0aGUgbW9zdCByZWNlbnRseSB1c2VkIHNlcXVlbmNlIG51bWJlci5cbiAgICAgKi8gICAgWHIoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShcInRhcmdldERvY3VtZW50c1wiKSwgbiA9IGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIHJldHVybiBlLnN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLlooKChuLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBSZXNvdXJjZVBhdGgobiksIG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfc2VudGluZWxLZXkoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyAwLCBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUpIF07XG4gICAgICAgICAgICAgICAgfShzKTtcbiAgICAgICAgICAgICAgICByLnB1c2godC5nZXQobykubmV4dCgobiA9PiBuID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSA6IChuID0+IHQucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgobiksXG4gICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlclxuICAgICAgICAgICAgICAgIH0pKShzKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVpKGUsIHQpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbmRleC5cbiAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImNvbGxlY3Rpb25QYXJlbnRzXCIsIHtcbiAgICAgICAgICAgIGtleVBhdGg6IEtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG4gPSB0LnN0b3JlKFwiY29sbGVjdGlvblBhcmVudHNcIiksIHIgPSBuZXcgX19QUklWQVRFX01lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCwgYWRkRW50cnkgPSBlID0+IHtcbiAgICAgICAgICAgIGlmIChyLmFkZChlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmxhc3RTZWdtZW50KCksIHIgPSBlLnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IHQsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChyKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBIZWxwZXIgdG8gYWRkIGFuIGluZGV4IGVudHJ5IGlmZiB3ZSBoYXZlbid0IGFscmVhZHkgd3JpdHRlbiBpdC5cbiAgICAgICAgICAgICAgICAvLyBJbmRleCBleGlzdGluZyByZW1vdGUgZG9jdW1lbnRzLlxuICAgICAgICByZXR1cm4gdC5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKS5aKHtcbiAgICAgICAgICAgIFk6ICEwXG4gICAgICAgIH0sICgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBSZXNvdXJjZVBhdGgoZSk7XG4gICAgICAgICAgICByZXR1cm4gYWRkRW50cnkobi5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdC5zdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpLlooe1xuICAgICAgICAgICAgWTogITBcbiAgICAgICAgfSwgKChbZSwgdCwgbl0sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGFkZEVudHJ5KGkucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIHRpKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoXCJ0YXJnZXRzXCIpO1xuICAgICAgICByZXR1cm4gdC5aKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobiksIGkgPSBfX1BSSVZBVEVfdG9EYlRhcmdldCh0aGlzLnNlcmlhbGl6ZXIsIHIpO1xuICAgICAgICAgICAgcmV0dXJuIHQucHV0KGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG5pKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIiksIHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uWigoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpLCBzID0gZnVuY3Rpb24gX19QUklWQVRFX2V4dHJhY3RLZXkoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmRvY3VtZW50ID8gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUuZG9jdW1lbnQubmFtZSkucG9wRmlyc3QoNSkpIDogZS5ub0RvY3VtZW50ID8gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSA6IGUudW5rbm93bkRvY3VtZW50ID8gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKGUudW5rbm93bkRvY3VtZW50LnBhdGgpIDogZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4pLnBhdGgudG9BcnJheSgpLCBvID0ge1xuICAgICAgICAgICAgICAgIHByZWZpeFBhdGg6IHMuc2xpY2UoMCwgcy5sZW5ndGggLSAyKSxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IHNbcy5sZW5ndGggLSAyXSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkOiBzW3MubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IG4ucmVhZFRpbWUgfHwgWyAwLCAwIF0sXG4gICAgICAgICAgICAgICAgdW5rbm93bkRvY3VtZW50OiBuLnVua25vd25Eb2N1bWVudCxcbiAgICAgICAgICAgICAgICBub0RvY3VtZW50OiBuLm5vRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IG4uZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiAhIW4uaGFzQ29tbWl0dGVkTXV0YXRpb25zXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgci5wdXNoKGkucHV0KG8pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpKSk7XG4gICAgfVxuICAgIHJpKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIiksIHIgPSBfX1BSSVZBVEVfbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpLCBpID0gbmV3IF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZShfX1BSSVZBVEVfTWVtb3J5RWFnZXJEZWxlZ2F0ZS56ciwgdGhpcy5zZXJpYWxpemVyLmN0KTtcbiAgICAgICAgcmV0dXJuIG4uRygpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgICAgICBsZXQgciA9IG51bGwgIT09ICh0ID0gbi5nZXQoZS51c2VySWQpKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKS5rZXlzKCkuZm9yRWFjaCgoZSA9PiByID0gci5hZGQoZSkpKSwgXG4gICAgICAgICAgICAgICAgbi5zZXQoZS51c2VySWQsIHIpO1xuICAgICAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChuLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IFVzZXIobiksIG8gPSBfX1BSSVZBVEVfSW5kZXhlZERiRG9jdW1lbnRPdmVybGF5Q2FjaGUubHQodGhpcy5zZXJpYWxpemVyLCBzKSwgXyA9IGkuZ2V0SW5kZXhNYW5hZ2VyKHMpLCBhID0gX19QUklWQVRFX0luZGV4ZWREYk11dGF0aW9uUXVldWUubHQocywgdGhpcy5zZXJpYWxpemVyLCBfLCBpLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExvY2FsRG9jdW1lbnRzVmlldyhyLCBhLCBvLCBfKS5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uKHQsIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSksIGUpLm5leHQoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVF1ZXJ5Q2FjaGUoZSkge1xuICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBxXG4gICAgfSkuY3JlYXRlSW5kZXgoXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCBRLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KTtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIHVuaXF1ZSBvbmx5IGJlY2F1c2UgdGhlIFRhcmdldElkIGlzIHRoZSBzdWZmaXguXG4gICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBcInRhcmdldElkXCJcbiAgICB9KS5jcmVhdGVJbmRleChcInF1ZXJ5VGFyZ2V0c0luZGV4XCIsIGssIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pLCBlLmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpO1xufVxuXG5jb25zdCBBZSA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiUGVyc2lzdGVuY2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gc3luY2hyb25pemUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiBtdWx0aXBsZSB0YWJzIGFuZCBzaGFyZVxuICAgICAqIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAgICAgKi9cbiAgICBlLCB0LCBuLCByLCBpLCBzLCBvLCBfLCBhLCBcbiAgICAvKipcbiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgZm9yY2VmdWxseSBvYnRhaW5zIGRhdGFiYXNlIGFjY2Vzcy4gRXhpc3RpbmcgdGFicyB3aWxsXG4gICAgICogbm8gbG9uZ2VyIGJlIGFibGUgdG8gYWNjZXNzIEluZGV4ZWREQi5cbiAgICAgKi9cbiAgICB1LCBjID0gMTUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gdCwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLmlpID0gaSwgdGhpcy53aW5kb3cgPSBzLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5zaSA9IGEsIHRoaXMub2kgPSB1LCB0aGlzLl9pID0gYywgXG4gICAgICAgIHRoaXMuQnIgPSBudWxsLCB0aGlzLkxyID0gITEsIHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMubmV0d29ya0VuYWJsZWQgPSAhMCwgXG4gICAgICAgIC8qKiBPdXIgd2luZG93LnVubG9hZCBoYW5kbGVyLCBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLmFpID0gbnVsbCwgdGhpcy5pbkZvcmVncm91bmQgPSAhMSwgXG4gICAgICAgIC8qKiBPdXIgJ3Zpc2liaWxpdHljaGFuZ2UnIGxpc3RlbmVyIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMudWkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBjbGllbnQgbWV0YWRhdGEgcmVmcmVzaCB0YXNrLiAqL1xuICAgICAgICB0aGlzLmNpID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCB0aW1lIHdlIGdhcmJhZ2UgY29sbGVjdGVkIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLiAqL1xuICAgICAgICB0aGlzLmxpID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBcbiAgICAgICAgLyoqIEEgbGlzdGVuZXIgdG8gbm90aWZ5IG9uIHByaW1hcnkgc3RhdGUgY2hhbmdlcy4gKi9cbiAgICAgICAgdGhpcy5oaSA9IGUgPT4gUHJvbWlzZS5yZXNvbHZlKCksICFfX1BSSVZBVEVfSW5kZXhlZERiUGVyc2lzdGVuY2UudigpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5VTklNUExFTUVOVEVELCBcIlRoaXMgcGxhdGZvcm0gaXMgZWl0aGVyIG1pc3NpbmcgSW5kZXhlZERCIG9yIGlzIGtub3duIHRvIGhhdmUgYW4gaW5jb21wbGV0ZSBpbXBsZW1lbnRhdGlvbi4gT2ZmbGluZSBwZXJzaXN0ZW5jZSBoYXMgYmVlbiBkaXNhYmxlZC5cIik7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYkxydURlbGVnYXRlSW1wbCh0aGlzLCByKSwgdGhpcy5QaSA9IHQgKyBcIm1haW5cIiwgXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IG5ldyBfX1BSSVZBVEVfTG9jYWxTZXJpYWxpemVyKF8pLCB0aGlzLklpID0gbmV3IF9fUFJJVkFURV9TaW1wbGVEYih0aGlzLlBpLCB0aGlzLl9pLCBuZXcgX19QUklWQVRFX1NjaGVtYUNvbnZlcnRlcih0aGlzLnNlcmlhbGl6ZXIpKSwgXG4gICAgICAgIHRoaXMua3IgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRhcmdldENhY2hlKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUsIHRoaXMuc2VyaWFsaXplciksIFxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBfX1BSSVZBVEVfbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpLCBcbiAgICAgICAgdGhpcy5RciA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiQnVuZGxlQ2FjaGUsIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuVGkgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5UaSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gdSAmJiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZS4gQXMgYSByZXN1bHQsIHBlcnNpc3RlbmNlIG1heSBub3Qgd29yayByZWxpYWJseS4gSW4gcGFydGljdWxhciBlbmFibGVQZXJzaXN0ZW5jZSgpIGNvdWxkIGZhaWwgaW1tZWRpYXRlbHkgYWZ0ZXIgcmVmcmVzaGluZyB0aGUgcGFnZS5cIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIHN0YXJ0IEluZGV4ZWREYiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgcGVyc2lzdGVuY2Ugd2FzIGVuYWJsZWQuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICAvLyBOT1RFOiBUaGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgc29tZXRpbWVzIChpbiB0aGUgY2FzZSBvZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBhbHJlYWR5IGhhdmluZyB0aGUgcGVyc2lzdGVuY2UgbG9jayksIHNvIGl0J3MgdGhlIGZpcnN0IHRoaW5nIHdlIHNob3VsZFxuICAgICAgICAvLyBkby5cbiAgICAgICAgcmV0dXJuIHRoaXMuRWkoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgIC8vIEZhaWwgYHN0YXJ0KClgIGlmIGBzeW5jaHJvbml6ZVRhYnNgIGlzIGRpc2FibGVkIGFuZCB3ZSBjYW5ub3RcbiAgICAgICAgICAgIC8vIG9idGFpbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LkZBSUxFRF9QUkVDT05ESVRJT04sIEFlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpKCksIHRoaXMuQWkoKSwgdGhpcy5SaSgpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gdGhpcy5rci5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIoZSkpKTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5CciA9IG5ldyBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UoZSwgdGhpcy5zaSk7XG4gICAgICAgIH0pKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkxyID0gITA7XG4gICAgICAgIH0pKS5jYXRjaCgoZSA9PiAodGhpcy5JaSAmJiB0aGlzLklpLmNsb3NlKCksIFByb21pc2UucmVqZWN0KGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIHByaW1hcnkgc3RhdGUgb2YgdGhlXG4gICAgICogaW5zdGFuY2UgY2hhbmdlcy4gVXBvbiByZWdpc3RlcmluZywgdGhpcyBsaXN0ZW5lciBpcyBpbnZva2VkIGltbWVkaWF0ZWx5XG4gICAgICogd2l0aCB0aGUgY3VycmVudCBwcmltYXJ5IHN0YXRlLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgVmkoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaSA9IGFzeW5jIHQgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkgcmV0dXJuIGUodCk7XG4gICAgICAgIH0sIGUodGhpcy5pc1ByaW1hcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIGRhdGFiYXNlIHJlY2VpdmVzIGFcbiAgICAgKiB2ZXJzaW9uIGNoYW5nZSBldmVudCBpbmRpY2F0aW5nIHRoYXQgaXQgaGFzIGRlbGV0ZWQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMuSWkuaygoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gZGVsZXRlIEluZGV4ZWREQi5cbiAgICAgICAgICAgIG51bGwgPT09IHQubmV3VmVyc2lvbiAmJiBhd2FpdCBlKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRqdXN0cyB0aGUgY3VycmVudCBuZXR3b3JrIHN0YXRlIGluIHRoZSBjbGllbnQncyBtZXRhZGF0YSwgcG90ZW50aWFsbHlcbiAgICAgKiBhZmZlY3RpbmcgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXROZXR3b3JrRW5hYmxlZChlKSB7XG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgIT09IGUgJiYgKHRoaXMubmV0d29ya0VuYWJsZWQgPSBlLCBcbiAgICAgICAgLy8gU2NoZWR1bGUgYSBwcmltYXJ5IGxlYXNlIHJlZnJlc2ggZm9yIGltbWVkaWF0ZSBleGVjdXRpb24uIFRoZSBldmVudHVhbFxuICAgICAgICAvLyBsZWFzZSB1cGRhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHZpYSBgcHJpbWFyeVN0YXRlTGlzdGVuZXJgLlxuICAgICAgICB0aGlzLmlpLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCAmJiBhd2FpdCB0aGlzLkVpKCk7XG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNsaWVudCBtZXRhZGF0YSBpbiBJbmRleGVkRGIgYW5kIGF0dGVtcHRzIHRvIGVpdGhlciBvYnRhaW4gb3JcbiAgICAgKiBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIEFzeW5jaHJvbm91c2x5IG5vdGlmaWVzIHRoZVxuICAgICAqIHByaW1hcnkgc3RhdGUgbGlzdGVuZXIgaWYgdGhlIGNsaWVudCBlaXRoZXIgbmV3bHkgb2J0YWluZWQgb3IgcmVsZWFzZWQgaXRzXG4gICAgICogcHJpbWFyeSBsZWFzZS5cbiAgICAgKi8gICAgRWkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwidXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5XCIsIFwicmVhZHdyaXRlXCIsIChlID0+IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLnB1dCh7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5ldHdvcmtFbmFibGVkOiB0aGlzLm5ldHdvcmtFbmFibGVkLFxuICAgICAgICAgICAgaW5Gb3JlZ3JvdW5kOiB0aGlzLmluRm9yZWdyb3VuZFxuICAgICAgICB9KS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHJldHVybiB0aGlzLm1pKGUpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUgfHwgKHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMuaWkuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5oaSghMSkpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLmZpKGUpKSkubmV4dCgodCA9PiB0aGlzLmlzUHJpbWFyeSAmJiAhdCA/IHRoaXMuZ2koZSkubmV4dCgoKCkgPT4gITEpKSA6ICEhdCAmJiB0aGlzLnBpKGUpLm5leHQoKCgpID0+ICEwKSkpKSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBleHRlbmQgb3duZXIgbGVhc2U6IFwiLCBlKSwgXG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgdGhyb3cgZTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCBlKSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gZSAmJiB0aGlzLmlpLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuaGkoZSkpKSwgdGhpcy5pc1ByaW1hcnkgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG1pKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFwib3duZXJcIikubmV4dCgoZSA9PiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnlpKGUpKSkpO1xuICAgIH1cbiAgICB3aShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY2xpZW50TWV0YWRhdGFTdG9yZShlKS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBTaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmJpKHRoaXMubGksIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLmxpID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImNsaWVudE1ldGFkYXRhXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0LkcoKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuRGkoZSwgMThlNSksIHIgPSBlLmZpbHRlcigoZSA9PiAtMSA9PT0gbi5pbmRleE9mKGUpKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBtZXRhZGF0YSBmb3IgY2xpZW50cyB0aGF0IGFyZSBubyBsb25nZXIgY29uc2lkZXJlZCBhY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyLCAoZSA9PiB0LmRlbGV0ZShlLmNsaWVudElkKSkpLm5leHQoKCgpID0+IHIpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKCgpID0+IFtdKSk7XG4gICAgICAgICAgICAvLyBEZWxldGUgcG90ZW50aWFsIGxlZnRvdmVyIGVudHJpZXMgdGhhdCBtYXkgY29udGludWUgdG8gbWFyayB0aGVcbiAgICAgICAgICAgIC8vIGluYWN0aXZlIGNsaWVudHMgYXMgem9tYmllZCBpbiBMb2NhbFN0b3JhZ2UuXG4gICAgICAgICAgICAvLyBJZGVhbGx5IHdlJ2QgZGVsZXRlIHRoZSBJbmRleGVkRGIgYW5kIExvY2FsU3RvcmFnZSB6b21iaWUgZW50cmllcyBmb3JcbiAgICAgICAgICAgIC8vIHRoZSBjbGllbnQgYXRvbWljYWxseSwgYnV0IHdlIGNhbid0LiBTbyB3ZSBvcHQgdG8gZGVsZXRlIHRoZSBJbmRleGVkRGJcbiAgICAgICAgICAgIC8vIGVudHJpZXMgZmlyc3QgdG8gYXZvaWQgcG90ZW50aWFsbHkgcmV2aXZpbmcgYSB6b21iaWVkIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLlRpKSBmb3IgKGNvbnN0IHQgb2YgZSkgdGhpcy5UaS5yZW1vdmVJdGVtKHRoaXMudmkodC5jbGllbnRJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHJlY3VycmluZyB0aW1lciB0byB1cGRhdGUgdGhlIGNsaWVudCBtZXRhZGF0YSBhbmQgdG8gZWl0aGVyXG4gICAgICogZXh0ZW5kIG9yIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgaWYgdGhlIGNsaWVudCBpcyBlbGlnaWJsZS5cbiAgICAgKi8gICAgUmkoKSB7XG4gICAgICAgIHRoaXMuY2kgPSB0aGlzLmlpLmVucXVldWVBZnRlckRlbGF5KFwiY2xpZW50X21ldGFkYXRhX3JlZnJlc2hcIiAvKiBUaW1lcklkLkNsaWVudE1ldGFkYXRhUmVmcmVzaCAqLyAsIDRlMywgKCgpID0+IHRoaXMuRWkoKS50aGVuKCgoKSA9PiB0aGlzLlNpKCkpKS50aGVuKCgoKSA9PiB0aGlzLlJpKCkpKSkpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi8gICAgeWkoZSkge1xuICAgICAgICByZXR1cm4gISFlICYmIGUub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXG4gICAgICogY2xpZW50IGlzIG9yIGNhbiBhY3QgYXMgdGhlIGhvbGRlciBvZiB0aGUgcHJpbWFyeSBsZWFzZS4gUmV0dXJucyB3aGV0aGVyXG4gICAgICogdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIGxlYXNlLCBidXQgZG9lcyBub3QgYWN0dWFsbHkgYWNxdWlyZSBpdC5cbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcbiAgICAgKiAoZm9yZWdyb3VuZCkgY2xpZW50IHNob3VsZCBiZWNvbWUgbGVhc2Vob2xkZXIgaW5zdGVhZC5cbiAgICAgKi8gICAgZmkoZSkge1xuICAgICAgICBpZiAodGhpcy5vaSkgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCEwKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFwib3duZXJcIikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAvLyBBIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIHByaW1hcnkgbGVhc2UgaWY6XG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpblxuICAgICAgICAgICAgLy8gICB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gdGhlIGBmb3JjZU93bmluZ1RhYmAgc2V0dGluZyB3YXMgcGFzc2VkIGluLlxuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy5iaSh0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuQ2kodC5vd25lcklkKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnlpKHQpICYmIHRoaXMubmV0d29ya0VuYWJsZWQpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMueWkodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCB0aGUgYGNhbkFjdEFzUHJpbWFyeWAgY2hlY2sgaWYgdGhlIGN1cnJlbnQgbGVhc2Vob2xkZXIgaGFzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uIElmIHRoaXMgaGFwcGVucyBhdFxuICAgICAgICAgICAgICAgICAgICAvLyBjbGllbnQgc3RhcnR1cCwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIHJldHVybmVkIGJ5XG4gICAgICAgICAgICAgICAgICAgIC8vIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCBhbmQgdGhlIHVzZXIgY2FuIGNvbnRpbnVlIHRvIHVzZSBGaXJlc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgZHVyaW5nIGEgbGVhc2UgcmVmcmVzaCwgd2Ugd2lsbCBpbnN0ZWFkIGJsb2NrIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIGZyb20gZXhlY3V0aW5nIGZ1cnRoZXIgb3BlcmF0aW9ucy4gTm90ZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBtaXhpbmcgJiBtYXRjaGluZyBkaWZmZXJlbnQgYHN5bmNocm9uaXplVGFic2BcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciBiZSB0dXJuZWQgb2ZmLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5GQUlMRURfUFJFQ09ORElUSU9OLCBBZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gISghdGhpcy5uZXR3b3JrRW5hYmxlZCB8fCAhdGhpcy5pbkZvcmVncm91bmQpIHx8IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLkcoKS5uZXh0KChlID0+IHZvaWQgMCA9PT0gdGhpcy5EaShlLCA1ZTMpLmZpbmQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudElkICE9PSBlLmNsaWVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAhdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiBlLm5ldHdvcmtFbmFibGVkLCBuID0gIXRoaXMuaW5Gb3JlZ3JvdW5kICYmIGUuaW5Gb3JlZ3JvdW5kLCByID0gdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gZS5uZXR3b3JrRW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgfHwgbiAmJiByKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkubmV4dCgoZSA9PiAodGhpcy5pc1ByaW1hcnkgIT09IGUgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAke2UgPyBcImlzXCIgOiBcImlzIG5vdFwifSBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLmApLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXG4gICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cbiAgICAgICAgdGhpcy5MciA9ICExLCB0aGlzLkZpKCksIHRoaXMuY2kgJiYgKHRoaXMuY2kuY2FuY2VsKCksIHRoaXMuY2kgPSBudWxsKSwgdGhpcy5NaSgpLCBcbiAgICAgICAgdGhpcy54aSgpLCBcbiAgICAgICAgLy8gVXNlIGBTaW1wbGVEYi5ydW5UcmFuc2FjdGlvbmAgZGlyZWN0bHkgdG8gYXZvaWQgZmFpbGluZyBpZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBoYXMgb2J0YWluZWQgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgIGF3YWl0IHRoaXMuSWkucnVuVHJhbnNhY3Rpb24oXCJzaHV0ZG93blwiLCBcInJlYWR3cml0ZVwiLCBbIFwib3duZXJcIiwgXCJjbGllbnRNZXRhZGF0YVwiIF0sIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uKGUsIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5naSh0KS5uZXh0KCgoKSA9PiB0aGlzLndpKHQpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5JaS5jbG9zZSgpLCBcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBtYXJraW5nIHRoZSBjbGllbnQgYXMgem9tYmllZCBmcm9tIExvY2FsU3RvcmFnZSBzaW5jZVxuICAgICAgICAvLyB3ZSBzdWNjZXNzZnVsbHkgZGVsZXRlZCBpdHMgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuXG4gICAgICAgIHRoaXMuT2koKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjbGllbnRzIHRoYXQgYXJlIG5vdCB6b21iaWVkIGFuZCBoYXZlIGFuIHVwZGF0ZVRpbWUgd2l0aGluIHRoZVxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cbiAgICAgKi8gICAgRGkoZSwgdCkge1xuICAgICAgICByZXR1cm4gZS5maWx0ZXIoKGUgPT4gdGhpcy5iaShlLnVwZGF0ZVRpbWVNcywgdCkgJiYgIXRoaXMuQ2koZS5jbGllbnRJZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuIElmIG11bHRpLXRhYlxuICAgICAqIGlzIG5vdCBzdXBwb3J0ZWQsIHJldHVybnMgYW4gYXJyYXkgdGhhdCBvbmx5IGNvbnRhaW5zIHRoZSBsb2NhbCBjbGllbnQnc1xuICAgICAqIElELlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgTmkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0QWN0aXZlQ2xpZW50c1wiLCBcInJlYWRvbmx5XCIsIChlID0+IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLkcoKS5uZXh0KChlID0+IHRoaXMuRGkoZSwgMThlNSkubWFwKChlID0+IGUuY2xpZW50SWQpKSkpKSk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5McjtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5sdChlLCB0aGlzLnNlcmlhbGl6ZXIsIHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua3I7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYkluZGV4TWFuYWdlcihlLCB0aGlzLnNlcmlhbGl6ZXIuY3QuZGF0YWJhc2VJZCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9JbmRleGVkRGJEb2N1bWVudE92ZXJsYXlDYWNoZS5sdCh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUXI7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKGUsIHQsIG4pIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgZSk7XG4gICAgICAgIGNvbnN0IHIgPSBcInJlYWRvbmx5XCIgPT09IHQgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBpID0gXG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBvYmplY3Qgc3RvcmVzIGZvciB0aGUgcHJvdmlkZWQgc2NoZW1hLiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0T2JqZWN0U3RvcmVzKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAxNSA9PT0gZSA/IGVlIDogMTQgPT09IGUgPyBYIDogMTMgPT09IGUgPyBaIDogMTIgPT09IGUgPyBZIDogMTEgPT09IGUgPyBKIDogdm9pZCBmYWlsKCk7XG4gICAgICAgIH0odGhpcy5faSk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxuICAgICAgICAvLyBhcmUgdGhlIG9ubHkgcmVhZGVyL3dyaXRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5JaS5ydW5UcmFuc2FjdGlvbihlLCByLCBpLCAociA9PiAocyA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb24ociwgdGhpcy5CciA/IHRoaXMuQnIubmV4dCgpIDogX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlKSwgXG4gICAgICAgIFwicmVhZHdyaXRlLXByaW1hcnlcIiA9PT0gdCA/IHRoaXMubWkocykubmV4dCgoZSA9PiAhIWUgfHwgdGhpcy5maShzKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBfX1BSSVZBVEVfbG9nRXJyb3IoYEZhaWxlZCB0byBvYnRhaW4gcHJpbWFyeSBsZWFzZSBmb3IgYWN0aW9uICcke2V9Jy5gKSwgXG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLmlpLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuaGkoITEpKSksIG5ldyBGaXJlc3RvcmVFcnJvcih2LkZBSUxFRF9QUkVDT05ESVRJT04sIEYpO1xuICAgICAgICAgICAgcmV0dXJuIG4ocyk7XG4gICAgICAgIH0pKS5uZXh0KChlID0+IHRoaXMucGkocykubmV4dCgoKCkgPT4gZSkpKSkgOiB0aGlzLkJpKHMpLm5leHQoKCgpID0+IG4ocykpKSkpKS50aGVuKChlID0+IChzLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgY3VycmVudCB0YWIgaXMgdGhlIHByaW1hcnkgbGVhc2Vob2xkZXIgb3IgYWx0ZXJuYXRpdmVseVxuICAgICAqIHRoYXQgdGhlIGxlYXNlaG9sZGVyIGhhcyBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuIG5vIGxvbmdlclxuICAgIC8vIGJlIHR1cm5lZCBvZmYuXG4gICAgQmkoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1hcnlDbGllbnRTdG9yZShlKS5nZXQoXCJvd25lclwiKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlICYmIHRoaXMuYmkoZS5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLkNpKGUub3duZXJJZCkgJiYgIXRoaXMueWkoZSkgJiYgISh0aGlzLm9pIHx8IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gJiYgZS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LkZBSUxFRF9QUkVDT05ESVRJT04sIEFlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPYnRhaW5zIG9yIGV4dGVuZHMgdGhlIG5ldyBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBUaGlzXG4gICAgICogbWV0aG9kIGRvZXMgbm90IHZlcmlmeSB0aGF0IHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoaXMgbGVhc2UuXG4gICAgICovICAgIHBpKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIG93bmVySWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhbGxvd1RhYlN5bmNocm9uaXphdGlvbjogdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbixcbiAgICAgICAgICAgIGxlYXNlVGltZXN0YW1wTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkucHV0KFwib3duZXJcIiwgdCk7XG4gICAgfVxuICAgIHN0YXRpYyB2KCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1NpbXBsZURiLnYoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgZ2koZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ByaW1hcnlDbGllbnRTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHQuZ2V0KFwib3duZXJcIikubmV4dCgoZSA9PiB0aGlzLnlpKGUpID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiUmVsZWFzaW5nIHByaW1hcnkgbGVhc2UuXCIpLCBcbiAgICAgICAgdC5kZWxldGUoXCJvd25lclwiKSkgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIC8qKiBWZXJpZmllcyB0aGF0IGB1cGRhdGVUaW1lTXNgIGlzIHdpdGhpbiBgbWF4QWdlTXNgLiAqLyAgICBiaShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gIShlIDwgbiAtIHQpICYmICghKGUgPiBuKSB8fCAoX19QUklWQVRFX2xvZ0Vycm9yKGBEZXRlY3RlZCBhbiB1cGRhdGUgdGltZSB0aGF0IGlzIGluIHRoZSBmdXR1cmU6ICR7ZX0gPiAke259YCksIFxuICAgICAgICAhMSkpO1xuICAgIH1cbiAgICBkaSgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5kb2N1bWVudCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAodGhpcy51aSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaWkuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlLCBcbiAgICAgICAgICAgIHRoaXMuRWkoKSkpKTtcbiAgICAgICAgfSwgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLnVpKSwgdGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUpO1xuICAgIH1cbiAgICBNaSgpIHtcbiAgICAgICAgdGhpcy51aSAmJiAodGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLnVpKSwgdGhpcy51aSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhIHdpbmRvdy51bmxvYWQgaGFuZGxlciB0aGF0IHdpbGwgc3luY2hyb25vdXNseSB3cml0ZSBvdXJcbiAgICAgKiBjbGllbnRJZCB0byBhIFwiem9tYmllIGNsaWVudCBpZFwiIGxvY2F0aW9uIGluIExvY2FsU3RvcmFnZS4gVGhpcyBjYW4gYmUgdXNlZFxuICAgICAqIGJ5IHRhYnMgdHJ5aW5nIHRvIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgdG8gZGV0ZXJtaW5lIHRoYXQgdGhlIGxlYXNlXG4gICAgICogaXMgbm8gbG9uZ2VyIHZhbGlkIGV2ZW4gaWYgdGhlIHRpbWVzdGFtcCBpcyByZWNlbnQuIFRoaXMgaXMgcGFydGljdWxhcmx5XG4gICAgICogaW1wb3J0YW50IGZvciB0aGUgcmVmcmVzaCBjYXNlIChzbyB0aGUgdGFiIGNvcnJlY3RseSByZS1hY3F1aXJlcyB0aGVcbiAgICAgKiBwcmltYXJ5IGxlYXNlKS4gTG9jYWxTdG9yYWdlIGlzIHVzZWQgZm9yIHRoaXMgcmF0aGVyIHRoYW4gSW5kZXhlZERiIGJlY2F1c2VcbiAgICAgKiBpdCBpcyBhIHN5bmNocm9ub3VzIEFQSSBhbmQgc28gY2FuIGJlIHVzZWQgcmVsaWFibHkgZnJvbSAgYW4gdW5sb2FkXG4gICAgICogaGFuZGxlci5cbiAgICAgKi8gICAgQWkoKSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChudWxsID09PSAoZSA9IHRoaXMud2luZG93KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFkZEV2ZW50TGlzdGVuZXIpICYmICh0aGlzLmFpID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gTm90ZTogSW4gdGhlb3J5LCB0aGlzIHNob3VsZCBiZSBzY2hlZHVsZWQgb24gdGhlIEFzeW5jUXVldWUgc2luY2UgaXRcbiAgICAgICAgICAgIC8vIGFjY2Vzc2VzIGludGVybmFsIHN0YXRlLiBXZSBleGVjdXRlIHRoaXMgY29kZSBkaXJlY3RseSBkdXJpbmcgc2h1dGRvd25cbiAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBpdCBnZXRzIGEgY2hhbmNlIHRvIHJ1bi5cbiAgICAgICAgICAgIHRoaXMuRmkoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSAvKD86VmVyc2lvbnxNb2JpbGUpXFwvMVs0NTZdLztcbiAgICAgICAgICAgIGlzU2FmYXJpKCkgJiYgKG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKGUpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goZSkpICYmIFxuICAgICAgICAgICAgLy8gT24gU2FmYXJpIDE0LCAxNSwgYW5kIDE2LCB3ZSBkbyBub3QgcnVuIGFueSBjbGVhbnVwIGFjdGlvbnMgYXMgaXQgbWlnaHRcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgYSBidWcgdGhhdCBwcmV2ZW50cyBTYWZhcmkgZnJvbSByZS1vcGVuaW5nIEluZGV4ZWREQiBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IHBhZ2UgbG9hZC5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjI2NTQ3XG4gICAgICAgICAgICB0aGlzLmlpLmVudGVyUmVzdHJpY3RlZE1vZGUoLyogcHVyZ2VFeGlzdGluZ1Rhc2tzPSAqLyAhMCksIHRoaXMuaWkuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSk7XG4gICAgICAgIH0sIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLmFpKSk7XG4gICAgfVxuICAgIHhpKCkge1xuICAgICAgICB0aGlzLmFpICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5haSksIHRoaXMuYWkgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIGEgY2xpZW50IGlzIFwiem9tYmllZFwiIGJhc2VkIG9uIGl0cyBMb2NhbFN0b3JhZ2UgZW50cnkuXG4gICAgICogQ2xpZW50cyBiZWNvbWUgem9tYmllZCB3aGVuIHRoZWlyIHRhYiBjbG9zZXMgd2l0aG91dCBydW5uaW5nIGFsbCBvZiB0aGVcbiAgICAgKiBjbGVhbnVwIGxvZ2ljIGluIGBzaHV0ZG93bigpYC5cbiAgICAgKi8gICAgQ2koZSkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBudWxsICE9PSAobnVsbCA9PT0gKHQgPSB0aGlzLlRpKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmdldEl0ZW0odGhpcy52aShlKSkpO1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJyR7ZX0nICR7biA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlYCksIFxuICAgICAgICAgICAgbjtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0Vycm9yKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZ2V0IHpvbWJpZWQgY2xpZW50IGlkLlwiLCBlKSwgXG4gICAgICAgICAgICAhMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmQgY2xpZW50IGFzIHpvbWJpZWQgKGEgY2xpZW50IHRoYXQgaGFkIGl0cyB0YWIgY2xvc2VkKS4gWm9tYmllZFxuICAgICAqIGNsaWVudHMgYXJlIGlnbm9yZWQgZHVyaW5nIHByaW1hcnkgdGFiIHNlbGVjdGlvbi5cbiAgICAgKi8gICAgRmkoKSB7XG4gICAgICAgIGlmICh0aGlzLlRpKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5UaS5zZXRJdGVtKHRoaXMudmkodGhpcy5jbGllbnRJZCksIFN0cmluZyhEYXRlLm5vdygpKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgLyB3b3JraW5nLlxuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKFwiRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLlwiLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqLyAgICBPaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuVGkpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLlRpLnJlbW92ZUl0ZW0odGhpcy52aSh0aGlzLmNsaWVudElkKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9XG4gICAgfVxuICAgIHZpKGUpIHtcbiAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfem9tYmllXyR7dGhpcy5wZXJzaXN0ZW5jZUtleX1fJHtlfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcHJpbWFyeSBjbGllbnQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJvd25lclwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NsaWVudE1ldGFkYXRhU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJjbGllbnRNZXRhZGF0YVwiKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdXNlZCBhcyBhIHByZWZpeCB3aGVuIHN0b3JpbmcgZGF0YSBpbiBJbmRleGVkREIgYW5kXG4gKiBMb2NhbFN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2luZGV4ZWREYlN0b3JhZ2VQcmVmaXgoZSwgdCkge1xuICAgIC8vIFVzZSB0d28gZGlmZmVyZW50IHByZWZpeCBmb3JtYXRzOlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAuIGRhdGFiYXNlSUQgLyAuLi5cbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLyAuLi5cbiAgICAvLyBwcm9qZWN0SURzIGFyZSBETlMtY29tcGF0aWJsZSBuYW1lcyBhbmQgY2Fubm90IGNvbnRhaW4gZG90c1xuICAgIC8vIHNvIHRoZXJlJ3Mgbm8gZGFuZ2VyIG9mIGNvbGxpc2lvbnMuXG4gICAgbGV0IG4gPSBlLnByb2plY3RJZDtcbiAgICByZXR1cm4gZS5pc0RlZmF1bHREYXRhYmFzZSB8fCAobiArPSBcIi5cIiArIGUuZGF0YWJhc2UpLCBcImZpcmVzdG9yZS9cIiArIHQgKyBcIi9cIiArIG4gKyBcIi9cIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBzZXQgb2YgY2hhbmdlcyB0byB3aGF0IGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGluIHZpZXcgYW5kIG91dCBvZiB2aWV3IGZvclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXG4gKiB0aGUgU3luY0VuZ2luZSkgYW5kIGFyZSB1c2VkIHRvIHBpbiAvIHVucGluIGRvY3VtZW50cyBhcyBhcHByb3ByaWF0ZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0xvY2FsVmlld0NoYW5nZXMge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMuZnJvbUNhY2hlID0gdCwgdGhpcy5MaSA9IG4sIHRoaXMua2kgPSByO1xuICAgIH1cbiAgICBzdGF0aWMgcWkoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCByID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LmRvY0NoYW5nZXMpIHN3aXRjaCAoZS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgbiA9IG4uYWRkKGUuZG9jLmtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgciA9IHIuYWRkKGUuZG9jLmtleSk7XG4gLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTG9jYWxWaWV3Q2hhbmdlcyhlLCB0LmZyb21DYWNoZSwgbiwgcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgRmlyZXN0b3JlIHF1ZXJ5IGVuZ2luZS5cbiAqXG4gKiBGaXJlc3RvcmUgcXVlcmllcyBjYW4gYmUgZXhlY3V0ZWQgaW4gdGhyZWUgbW9kZXMuIFRoZSBRdWVyeSBFbmdpbmUgZGV0ZXJtaW5lc1xuICogd2hhdCBtb2RlIHRvIHVzZSBiYXNlZCBvbiB3aGF0IGRhdGEgaXMgcGVyc2lzdGVkLiBUaGUgbW9kZSBvbmx5IGRldGVybWluZXNcbiAqIHRoZSBydW50aW1lIGNvbXBsZXhpdHkgb2YgdGhlIHF1ZXJ5IC0gdGhlIHJlc3VsdCBzZXQgaXMgZXF1aXZhbGVudCBhY3Jvc3MgYWxsXG4gKiBpbXBsZW1lbnRhdGlvbnMuXG4gKlxuICogVGhlIFF1ZXJ5IGVuZ2luZSB3aWxsIHVzZSBpbmRleGVkLWJhc2VkIGV4ZWN1dGlvbiBpZiBhIHVzZXIgaGFzIGNvbmZpZ3VyZWRcbiAqIGFueSBpbmRleCB0aGF0IGNhbiBiZSB1c2VkIHRvIGV4ZWN1dGUgcXVlcnkgKHZpYSBgc2V0SW5kZXhDb25maWd1cmF0aW9uKClgKS5cbiAqIE90aGVyd2lzZSwgdGhlIGVuZ2luZSB3aWxsIHRyeSB0byBvcHRpbWl6ZSB0aGUgcXVlcnkgYnkgcmUtdXNpbmcgYSBwcmV2aW91c2x5XG4gKiBwZXJzaXN0ZWQgcXVlcnkgcmVzdWx0LiBJZiB0aGF0IGlzIG5vdCBwb3NzaWJsZSwgdGhlIHF1ZXJ5IHdpbGwgYmUgZXhlY3V0ZWRcbiAqIHZpYSBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICpcbiAqIEluZGV4LWJhc2VkIGV4ZWN1dGlvbiBpcyB0aGUgZGVmYXVsdCB3aGVuIGF2YWlsYWJsZS4gVGhlIHF1ZXJ5IGVuZ2luZVxuICogc3VwcG9ydHMgcGFydGlhbCBpbmRleGVkIGV4ZWN1dGlvbiBhbmQgbWVyZ2VzIHRoZSByZXN1bHQgZnJvbSB0aGUgaW5kZXhcbiAqIGxvb2t1cCB3aXRoIGRvY3VtZW50cyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGluZGV4ZWQuIFRoZSBpbmRleCBldmFsdWF0aW9uXG4gKiBtYXRjaGVzIHRoZSBiYWNrZW5kJ3MgZm9ybWF0IGFuZCBhcyBzdWNoLCB0aGUgU0RLIGNhbiB1c2UgaW5kZXhpbmcgZm9yIGFsbFxuICogcXVlcmllcyB0aGF0IHRoZSBiYWNrZW5kIHN1cHBvcnRzLlxuICpcbiAqIElmIG5vIGluZGV4IGV4aXN0cywgdGhlIHF1ZXJ5IGVuZ2luZSB0cmllcyB0byB0YWtlIGFkdmFudGFnZSBvZiB0aGUgdGFyZ2V0XG4gKiBkb2N1bWVudCBtYXBwaW5nIGluIHRoZSBUYXJnZXRDYWNoZS4gVGhlc2UgbWFwcGluZ3MgZXhpc3RzIGZvciBhbGwgcXVlcmllc1xuICogdGhhdCBoYXZlIGJlZW4gc3luY2VkIHdpdGggdGhlIGJhY2tlbmQgYXQgbGVhc3Qgb25jZSBhbmQgYWxsb3cgdGhlIHF1ZXJ5XG4gKiBlbmdpbmUgdG8gb25seSByZWFkIGRvY3VtZW50cyB0aGF0IHByZXZpb3VzbHkgbWF0Y2hlZCBhIHF1ZXJ5IHBsdXMgYW55XG4gKiBkb2N1bWVudHMgdGhhdCB3ZXJlIGVkaXRlZCBhZnRlciB0aGUgcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXG4gKlxuICogVGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlbiB0aGlzIG9wdGltaXphdGlvbiBpcyBub3QgZ3VhcmFudGVlZCB0byBwcm9kdWNlXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHF1ZXJ5XG4gKiBwcm9jZXNzaW5nIGZhbGxzIGJhY2sgdG8gZnVsbCBzY2Fucy4gVGhlc2UgY2FzZXMgYXJlOlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgcHJldmlvdXNseSBubyBsb25nZXJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgZWRpdCBtYXkgY2F1c2UgdGhlIGRvY3VtZW50IHRvIHNvcnQgYmVsb3dcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiAtIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIGJlZW4gQ1VSUkVOVCBvciBmcmVlIG9mIGxpbWJvIGRvY3VtZW50cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUXVlcnlFbmdpbmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLlFpID0gITE7XG4gICAgfVxuICAgIC8qKiBTZXRzIHRoZSBkb2N1bWVudCB2aWV3IHRvIHF1ZXJ5IGFnYWluc3QuICovICAgIGluaXRpYWxpemUoZSwgdCkge1xuICAgICAgICB0aGlzLktpID0gZSwgdGhpcy5pbmRleE1hbmFnZXIgPSB0LCB0aGlzLlFpID0gITA7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFsbCBsb2NhbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBxdWVyeS4gKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRpKGUsIHQpLm5leHQoKGkgPT4gaSB8fCB0aGlzLlVpKGUsIHQsIHIsIG4pKSkubmV4dCgobiA9PiBuIHx8IHRoaXMuV2koZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYW4gaW5kZXhlZCBxdWVyeSB0aGF0IGV2YWx1YXRlcyB0aGUgcXVlcnkgYmFzZWQgb24gYSBjb2xsZWN0aW9uJ3NcbiAgICAgKiBwZXJzaXN0ZWQgaW5kZXggdmFsdWVzLiBSZXR1cm5zIGBudWxsYCBpZiBhbiBpbmRleCBpcyBub3QgYXZhaWxhYmxlLlxuICAgICAqLyAgICAkaShlLCB0KSB7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzKHQpKSBcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IG1hdGNoIGFsbCBkb2N1bWVudHMgZG9uJ3QgYmVuZWZpdCBmcm9tIHVzaW5nXG4gICAgICAgIC8vIGtleS1iYXNlZCBsb29rdXBzLiBJdCBpcyBtb3JlIGVmZmljaWVudCB0byBzY2FuIGFsbCBkb2N1bWVudHMgaW4gYVxuICAgICAgICAvLyBjb2xsZWN0aW9uLCByYXRoZXIgdGhhbiB0byBwZXJmb3JtIGluZGl2aWR1YWwgbG9va3Vwcy5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0SW5kZXhUeXBlKGUsIG4pLm5leHQoKHIgPT4gMCAvKiBJbmRleFR5cGUuTk9ORSAqLyA9PT0gciA/IG51bGwgOiAobnVsbCAhPT0gdC5saW1pdCAmJiAxIC8qIEluZGV4VHlwZS5QQVJUSUFMICovID09PSByICYmIChcbiAgICAgICAgLy8gV2UgY2Fubm90IGFwcGx5IGEgbGltaXQgZm9yIHRhcmdldHMgdGhhdCBhcmUgc2VydmVkIHVzaW5nIGEgcGFydGlhbFxuICAgICAgICAvLyBpbmRleC4gSWYgYSBwYXJ0aWFsIGluZGV4IHdpbGwgYmUgdXNlZCB0byBzZXJ2ZSB0aGUgdGFyZ2V0LCB0aGVcbiAgICAgICAgLy8gcXVlcnkgbWF5IHJldHVybiBhIHN1cGVyc2V0IG9mIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSB0YXJnZXRcbiAgICAgICAgLy8gKGUuZy4gaWYgdGhlIGluZGV4IGRvZXNuJ3QgaW5jbHVkZSBhbGwgdGhlIHRhcmdldCdzIGZpbHRlcnMpLCBvclxuICAgICAgICAvLyBtYXkgcmV0dXJuIHRoZSBjb3JyZWN0IHNldCBvZiBkb2N1bWVudHMgaW4gdGhlIHdyb25nIG9yZGVyIChlLmcuIGlmXG4gICAgICAgIC8vIHRoZSBpbmRleCBkb2Vzbid0IGluY2x1ZGUgYSBzZWdtZW50IGZvciBvbmUgb2YgdGhlIG9yZGVyQnlzKS5cbiAgICAgICAgLy8gVGhlcmVmb3JlLCBhIGxpbWl0IHNob3VsZCBub3QgYmUgYXBwbGllZCBpbiBzdWNoIGNhc2VzLlxuICAgICAgICB0ID0gX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0KHQsIG51bGwsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyksIG4gPSBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCh0KSksIFxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlci5nZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldChlLCBuKS5uZXh0KChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoLi4ucik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5LaS5nZXREb2N1bWVudHMoZSwgaSkubmV4dCgociA9PiB0aGlzLmluZGV4TWFuYWdlci5nZXRNaW5PZmZzZXQoZSwgbikubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuR2kodCwgcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuemkodCwgcywgaSwgbi5yZWFkVGltZSkgPyB0aGlzLiRpKGUsIF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCh0LCBudWxsLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8pKSA6IHRoaXMuamkoZSwgcywgdCwgbik7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGJhc2VkIG9uIHRoZSB0YXJnZXQncyBwZXJzaXN0ZWQgcXVlcnkgbWFwcGluZy4gUmV0dXJuc1xuICAgICAqIGBudWxsYCBpZiB0aGUgbWFwcGluZyBpcyBub3QgYXZhaWxhYmxlIG9yIGNhbm5vdCBiZSB1c2VkLlxuICAgICAqLyAgICBVaShlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzKHQpIHx8IHIuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpID8gdGhpcy5XaShlLCB0KSA6IHRoaXMuS2kuZ2V0RG9jdW1lbnRzKGUsIG4pLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuR2kodCwgaSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy56aSh0LCBzLCBuLCByKSA/IHRoaXMuV2koZSwgdCkgOiAoX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCByLnRvU3RyaW5nKCksIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSksIFxuICAgICAgICAgICAgdGhpcy5qaShlLCBzLCB0LCBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUociwgLTEpKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgc2VlbiBhIHNuYXBzaG90IHdpdGhvdXQgbGltYm8gZnJlZSBkb2N1bWVudHNcbiAgICAgICAgLy8gc2hvdWxkIGFsc28gYmUgcnVuIGFzIGEgZnVsbCBjb2xsZWN0aW9uIHNjYW4uXG4gICAgICAgIH1cbiAgICAvKiogQXBwbGllcyB0aGUgcXVlcnkgZmlsdGVyIGFuZCBzb3J0aW5nIHRvIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuICAqLyAgICBHaShlLCB0KSB7XG4gICAgICAgIC8vIFNvcnQgdGhlIGRvY3VtZW50cyBhbmQgcmUtYXBwbHkgdGhlIHF1ZXJ5IGZpbHRlciBzaW5jZSBwcmV2aW91c2x5XG4gICAgICAgIC8vIG1hdGNoaW5nIGRvY3VtZW50cyBkbyBub3QgbmVjZXNzYXJpbHkgc3RpbGwgbWF0Y2ggdGhlIHF1ZXJ5LlxuICAgICAgICBsZXQgbiA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvcihlKSk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCByKSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKGUsIHIpICYmIChuID0gbi5hZGQocikpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBsaW1pdCBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBmcm9tIGNhY2hlLCBtYWtpbmcgaXRcbiAgICAgKiBpbmVsaWdpYmxlIGZvciBpbmRleC1mcmVlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeS5cbiAgICAgKiBAcGFyYW0gc29ydGVkUHJldmlvdXNSZXN1bHRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHdoZW4gaXRcbiAgICAgKiB3YXMgbGFzdCBzeW5jaHJvbml6ZWQsIHNvcnRlZCBieSB0aGUgcXVlcnkncyBjb21wYXJhdG9yLlxuICAgICAqIEBwYXJhbSByZW1vdGVLZXlzIC0gVGhlIGRvY3VtZW50IGtleXMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgbGFzdFxuICAgICAqIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSBsaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiB0aGUgc25hcHNob3Qgd2hlbiB0aGVcbiAgICAgKiBxdWVyeSB3YXMgbGFzdCBzeW5jaHJvbml6ZWQuXG4gICAgICovICAgIHppKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IGUubGltaXQpIFxuICAgICAgICAvLyBRdWVyaWVzIHdpdGhvdXQgbGltaXRzIGRvIG5vdCBuZWVkIHRvIGJlIHJlZmlsbGVkLlxuICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIGlmIChuLnNpemUgIT09IHQuc2l6ZSkgXG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cbiAgICAgICAgLy8gbG9uZ2VyIG1hdGNoZXMuXG4gICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgLy8gTGltaXQgcXVlcmllcyBhcmUgbm90IGVsaWdpYmxlIGZvciBpbmRleC1mcmVlIHF1ZXJ5IGV4ZWN1dGlvbiBpZiB0aGVyZSBpc1xuICAgICAgICAvLyBhIHBvdGVudGlhbCB0aGF0IGFuIG9sZGVyIGRvY3VtZW50IGZyb20gY2FjaGUgbm93IHNvcnRzIGJlZm9yZSBhIGRvY3VtZW50XG4gICAgICAgIC8vIHRoYXQgd2FzIHByZXZpb3VzbHkgcGFydCBvZiB0aGUgbGltaXQuIFRoaXMsIGhvd2V2ZXIsIGNhbiBvbmx5IGhhcHBlbiBpZlxuICAgICAgICAvLyB0aGUgZG9jdW1lbnQgYXQgdGhlIGVkZ2Ugb2YgdGhlIGxpbWl0IGdvZXMgb3V0IG9mIGxpbWl0LlxuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IHRoYXQgaXMgbm90IHRoZSBsaW1pdCBib3VuZGFyeSBzb3J0cyBkaWZmZXJlbnRseSxcbiAgICAgICAgLy8gdGhlIGJvdW5kYXJ5IG9mIHRoZSBsaW1pdCBpdHNlbGYgZGlkIG5vdCBjaGFuZ2UgYW5kIGRvY3VtZW50cyBmcm9tIGNhY2hlXG4gICAgICAgIC8vIHdpbGwgY29udGludWUgdG8gYmUgXCJyZWplY3RlZFwiIGJ5IHRoaXMgYm91bmRhcnkuIFRoZXJlZm9yZSwgd2UgY2FuIGlnbm9yZVxuICAgICAgICAvLyBhbnkgbW9kaWZpY2F0aW9ucyB0aGF0IGRvbid0IGFmZmVjdCB0aGUgbGFzdCBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSBlLmxpbWl0VHlwZSA/IHQubGFzdCgpIDogdC5maXJzdCgpO1xuICAgICAgICByZXR1cm4gISFpICYmIChpLmhhc1BlbmRpbmdXcml0ZXMgfHwgaS52ZXJzaW9uLmNvbXBhcmVUbyhyKSA+IDApO1xuICAgIH1cbiAgICBXaShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJRdWVyeUVuZ2luZVwiLCBcIlVzaW5nIGZ1bGwgY29sbGVjdGlvbiBzY2FuIHRvIGV4ZWN1dGUgcXVlcnk6XCIsIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSksIFxuICAgICAgICB0aGlzLktpLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgSW5kZXhPZmZzZXQubWluKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0aGUgcmVzdWx0cyBmcm9tIGFuIGluZGV4ZWQgZXhlY3V0aW9uIHdpdGggdGhlIHJlbWFpbmluZyBkb2N1bWVudHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGluZGV4ZWQuXG4gICAgICovICAgIGppKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgYWxsIHJlc3VsdHMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgdXBkYXRlZCBzaW5jZSB0aGUgb2Zmc2V0LlxuICAgICAgICByZXR1cm4gdGhpcy5LaS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIG4sIHIpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBNZXJnZSB3aXRoIGV4aXN0aW5nIHJlc3VsdHNcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUgPSBlLmluc2VydCh0LmtleSwgdCk7XG4gICAgICAgIH0pKSwgZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0xvY2FsU3RvcmVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG4gICAgZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gZSwgdGhpcy5IaSA9IHQsIHRoaXMuc2VyaWFsaXplciA9IHIsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldElEIHRvIGRhdGEgYWJvdXQgaXRzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBXZSBhcmUgdXNpbmcgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIG9uIFdlYiB0byBtYWtlIHJlLXJ1bnNcbiAgICAgICAgICogb2YgYGFwcGx5UmVtb3RlRXZlbnQoKWAgaWRlbXBvdGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuSmkgPSBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKiBNYXBzIGEgdGFyZ2V0IHRvIGl0cyB0YXJnZXRJRC4gKi9cbiAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBFdmFsdWF0ZSBpZiBUYXJnZXRJZCBjYW4gYmUgcGFydCBvZiBUYXJnZXQuXG4gICAgICAgIHRoaXMuWWkgPSBuZXcgT2JqZWN0TWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldChlKSksIF9fUFJJVkFURV90YXJnZXRFcXVhbHMpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcGVyIGNvbGxlY3Rpb24gZ3JvdXAgaW5kZXggb2YgdGhlIGxhc3QgcmVhZCB0aW1lIHByb2Nlc3NlZCBieVxuICAgICAgICAgKiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5aaSA9IG5ldyBNYXAsIHRoaXMuWGkgPSBlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgdGhpcy5rciA9IGUuZ2V0VGFyZ2V0Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMuUXIgPSBlLmdldEJ1bmRsZUNhY2hlKCksIHRoaXMuZXMobik7XG4gICAgfVxuICAgIGVzKGUpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IEFkZCBzcGVjIHRlc3RzIHRoYXQgdGVzdCB0aGVzZSBjb21wb25lbnRzIGNoYW5nZSBhZnRlciBhXG4gICAgICAgIC8vIHVzZXIgY2hhbmdlXG4gICAgICAgIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldERvY3VtZW50T3ZlcmxheUNhY2hlKGUpLCB0aGlzLmluZGV4TWFuYWdlciA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKGUpLCBcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRNdXRhdGlvblF1ZXVlKGUsIHRoaXMuaW5kZXhNYW5hZ2VyKSwgdGhpcy5sb2NhbERvY3VtZW50cyA9IG5ldyBMb2NhbERvY3VtZW50c1ZpZXcodGhpcy5YaSwgdGhpcy5tdXRhdGlvblF1ZXVlLCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLCB0aGlzLmluZGV4TWFuYWdlciksIFxuICAgICAgICB0aGlzLlhpLnNldEluZGV4TWFuYWdlcih0aGlzLmluZGV4TWFuYWdlciksIHRoaXMuSGkuaW5pdGlhbGl6ZSh0aGlzLmxvY2FsRG9jdW1lbnRzLCB0aGlzLmluZGV4TWFuYWdlcik7XG4gICAgfVxuICAgIGNvbGxlY3RHYXJiYWdlKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb2xsZWN0IGdhcmJhZ2VcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiBlLmNvbGxlY3QodCwgdGhpcy5KaSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdMb2NhbFN0b3JlKFxuLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xuZSwgdCwgbiwgcikge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xvY2FsU3RvcmVJbXBsKGUsIHQsIG4sIHIpO1xufVxuXG4vKipcbiAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXG4gKlxuICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXG4gKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcbi8vIGNoYW5nZS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJIYW5kbGUgdXNlciBjaGFuZ2VcIiwgXCJyZWFkb25seVwiLCAoZSA9PiB7XG4gICAgICAgIC8vIFN3YXAgb3V0IHRoZSBtdXRhdGlvbiBxdWV1ZSwgZ3JhYmJpbmcgdGhlIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlc1xuICAgICAgICAvLyBiZWZvcmUgYW5kIGFmdGVyLlxuICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXMoZSkubmV4dCgoaSA9PiAociA9IGksIG4uZXModCksIG4ubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXMoZSkpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gW10sIHMgPSBbXTtcbiAgICAgICAgICAgIC8vIFVuaW9uIHRoZSBvbGQvbmV3IGNoYW5nZWQga2V5cy5cbiAgICAgICAgICAgIGxldCBvID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcikge1xuICAgICAgICAgICAgICAgIGkucHVzaChlLmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLm11dGF0aW9ucykgbyA9IG8uYWRkKHQua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGUuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUubXV0YXRpb25zKSBvID0gby5hZGQodC5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBzZXQgb2YgYWxsIChwb3RlbnRpYWxseSkgY2hhbmdlZCBkb2N1bWVudHMgYW5kIHRoZSBsaXN0XG4gICAgICAgICAgICAvLyBvZiBtdXRhdGlvbiBiYXRjaCBJRHMgdGhhdCB3ZXJlIGFmZmVjdGVkIGJ5IGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyhlLCBvKS5uZXh0KChlID0+ICh7XG4gICAgICAgICAgICAgICAgdHM6IGUsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzOiBpLFxuICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHM6IHNcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKTtcbiAgICB9KSk7XG59XG5cbi8qIEFjY2VwdHMgbG9jYWxseSBnZW5lcmF0ZWQgTXV0YXRpb25zIGFuZCBjb21taXQgdGhlbSB0byBzdG9yYWdlLiAqL1xuLyoqXG4gKiBBY2tub3dsZWRnZXMgdGhlIGdpdmVuIGJhdGNoLlxuICpcbiAqIE9uIHRoZSBoYXBweSBwYXRoIHdoZW4gYSBiYXRjaCBpcyBhY2tub3dsZWRnZWQsIHRoZSBsb2NhbCBzdG9yZSB3aWxsXG4gKlxuICogICsgcmVtb3ZlIHRoZSBiYXRjaCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZTtcbiAqICArIGFwcGx5IHRoZSBjaGFuZ2VzIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGU7XG4gKiAgKyByZWNhbGN1bGF0ZSB0aGUgbGF0ZW5jeSBjb21wZW5zYXRlZCB2aWV3IGltcGxpZWQgYnkgdGhvc2UgY2hhbmdlcyAodGhlcmVcbiAqICAgIG1heSBiZSBtdXRhdGlvbnMgaW4gdGhlIHF1ZXVlIHRoYXQgYWZmZWN0IHRoZSBkb2N1bWVudHMgYnV0IGhhdmVuJ3QgYmVlblxuICogICAgYWNrbm93bGVkZ2VkIHlldCk7IGFuZFxuICogICsgZ2l2ZSB0aGUgY2hhbmdlZCBkb2N1bWVudHMgYmFjayB0aGUgc3luYyBlbmdpbmVcbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIChtb2RpZmllZCkgZG9jdW1lbnRzLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUFja25vd2xlZGdlQmF0Y2goZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQWNrbm93bGVkZ2UgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSB0LmJhdGNoLmtleXMoKSwgaSA9IG4uWGkubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5V3JpdGVUb1JlbW90ZURvY3VtZW50cyhlLCB0LCBuLCByKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5iYXRjaCwgcyA9IGkua2V5cygpO1xuICAgICAgICAgICAgbGV0IG8gPSBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgbyA9IG8ubmV4dCgoKCkgPT4gci5nZXRFbnRyeSh0LCBlKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbi5kb2NWZXJzaW9ucy5nZXQoZSk7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgIT09IHMpLCB0LnZlcnNpb24uY29tcGFyZVRvKHMpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQodCwgbiksIFxuICAgICAgICAgICAgICAgICAgICB0LmlzVmFsaWREb2N1bWVudCgpICYmIChcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSBjb21taXRWZXJzaW9uIGFzIHRoZSByZWFkVGltZSByYXRoZXIgdGhhbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQncyB1cGRhdGVUaW1lIHNpbmNlIHRoZSB1cGRhdGVUaW1lIGlzIG5vdCBhZHZhbmNlZFxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdXBkYXRlcyB0aGF0IGRvIG5vdCBtb2RpZnkgdGhlIHVuZGVybHlpbmcgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIHQuc2V0UmVhZFRpbWUobi5jb21taXRWZXJzaW9uKSwgci5hZGRFbnRyeSh0KSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgby5uZXh0KCgoKSA9PiBlLm11dGF0aW9uUXVldWUucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBpKSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgYSBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4sIGUsIHQsIGkpLm5leHQoKCgpID0+IGkuYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBuLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2soZSkpKS5uZXh0KCgoKSA9PiBuLmRvY3VtZW50T3ZlcmxheUNhY2hlLnJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZChlLCByLCB0LmJhdGNoLmJhdGNoSWQpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhlLCBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0S2V5c1dpdGhUcmFuc2Zvcm1SZXN1bHRzKGUpIHtcbiAgICAgICAgICAgIGxldCB0ID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubXV0YXRpb25SZXN1bHRzLmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICAgICAgZS5tdXRhdGlvblJlc3VsdHNbbl0udHJhbnNmb3JtUmVzdWx0cy5sZW5ndGggPiAwICYmICh0ID0gdC5hZGQoZS5iYXRjaC5tdXRhdGlvbnNbbl0ua2V5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlbW92ZXMgbXV0YXRpb25zIGZyb20gdGhlIE11dGF0aW9uUXVldWUgZm9yIHRoZSBzcGVjaWZpZWQgYmF0Y2g7XG4gKiBMb2NhbERvY3VtZW50cyB3aWxsIGJlIHJlY2FsY3VsYXRlZC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIG1vZGlmaWVkIGRvY3VtZW50cy5cbiAqLyAodCkpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHMoZSwgcikpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHByb2Nlc3NlZCAodXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG9cbiAqIGRldGVybWluZSB3aGV0aGVyIHRvIGJ1ZmZlciBpbmNvbWluZyBzbmFwc2hvdHMgZnJvbSB0aGUgYmFja2VuZCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvblwiLCBcInJlYWRvbmx5XCIsIChlID0+IHQua3IuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSkpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXG4gKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcbiAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseVJlbW90ZUV2ZW50VG9Mb2NhbENhY2hlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IHQuc25hcHNob3RWZXJzaW9uO1xuICAgIGxldCBpID0gbi5KaTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IHJlbW90ZSBldmVudFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHtcbiAgICAgICAgY29uc3QgcyA9IG4uWGkubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxuICAgICAgICAgICAgICAgIGkgPSBuLkppO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIHQudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgocywgXykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYSA9IGkuZ2V0KF8pO1xuICAgICAgICAgICAgaWYgKCFhKSByZXR1cm47XG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgcmVtb3RlIGtleXMgaWYgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUuIFRoaXNcbiAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB3ZSBjYW4gcGVyc2lzdCB0aGUgdXBkYXRlZCB0YXJnZXQgZGF0YSBhbG9uZyB3aXRoXG4gICAgICAgICAgICAvLyB0aGUgdXBkYXRlZCBhc3NpZ25tZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG4ua3IucmVtb3ZlTWF0Y2hpbmdLZXlzKGUsIHMucmVtb3ZlZERvY3VtZW50cywgXykubmV4dCgoKCkgPT4gbi5rci5hZGRNYXRjaGluZ0tleXMoZSwgcy5hZGRlZERvY3VtZW50cywgXykpKSk7XG4gICAgICAgICAgICBsZXQgdSA9IGEud2l0aFNlcXVlbmNlTnVtYmVyKGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgIG51bGwgIT09IHQudGFyZ2V0TWlzbWF0Y2hlcy5nZXQoXykgPyB1ID0gdS53aXRoUmVzdW1lVG9rZW4oQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORywgU25hcHNob3RWZXJzaW9uLm1pbigpKS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihTbmFwc2hvdFZlcnNpb24ubWluKCkpIDogcy5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwICYmICh1ID0gdS53aXRoUmVzdW1lVG9rZW4ocy5yZXN1bWVUb2tlbiwgcikpLCBcbiAgICAgICAgICAgIGkgPSBpLmluc2VydChfLCB1KSwgXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcbiAgICAgICAgICAgIC8vIHN1ZmZpY2llbnQgdGltZSBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHVwZGF0ZSkuXG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgbmV3VGFyZ2V0RGF0YSBzaG91bGQgYmUgcGVyc2lzdGVkIGR1cmluZyBhbiB1cGRhdGUgb2ZcbiAqIGFuIGFjdGl2ZSB0YXJnZXQuIFRhcmdldERhdGEgc2hvdWxkIGFsd2F5cyBiZSBwZXJzaXN0ZWQgd2hlbiBhIHRhcmdldCBpc1xuICogYmVpbmcgcmVsZWFzZWQgYW5kIHNob3VsZCBub3QgY2FsbCB0aGlzIGZ1bmN0aW9uLlxuICpcbiAqIFdoaWxlIHRoZSB0YXJnZXQgaXMgYWN0aXZlLCBUYXJnZXREYXRhIHVwZGF0ZXMgY2FuIGJlIG9taXR0ZWQgd2hlbiBub3RoaW5nXG4gKiBhYm91dCB0aGUgdGFyZ2V0IGhhcyBjaGFuZ2VkIGV4Y2VwdCBtZXRhZGF0YSBsaWtlIHRoZSByZXN1bWUgdG9rZW4gb3JcbiAqIHNuYXBzaG90IHZlcnNpb24uIE9jY2FzaW9uYWxseSBpdCdzIHdvcnRoIHRoZSBleHRyYSB3cml0ZSB0byBwcmV2ZW50IHRoZXNlXG4gKiB2YWx1ZXMgZnJvbSBnZXR0aW5nIHRvbyBzdGFsZSBhZnRlciBhIGNyYXNoLCBidXQgdGhpcyBkb2Vzbid0IGhhdmUgdG8gYmVcbiAqIHRvbyBmcmVxdWVudC5cbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3Nob3VsZFBlcnNpc3RUYXJnZXREYXRhKGUsIHQsIG4pIHtcbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWxsb3cgcmVzdW1lIHRva2VuIGNoYW5nZXMgdG8gYmUgYnVmZmVyZWQgaW5kZWZpbml0ZWx5LiBUaGlzXG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGJlIHJlYXNvbmFibHkgdXAtdG8tZGF0ZSBhZnRlciBhIGNyYXNoIGFuZCBhdm9pZHMgbmVlZGluZ1xuICAgICAgICAgICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAvLyB3ZSBtYXkgbm90IGdldCB0aW1lIHRvIGRvIGFueXRoaW5nIGludGVyZXN0aW5nIHdoaWxlIHRoZSBjdXJyZW50IHRhYiBpc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpIC0gZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSA+PSAzZTgpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgaWYgdGhlIG9ubHkgdGhpbmcgdGhhdCBoYXMgY2hhbmdlZCBhYm91dCBhIHRhcmdldCBpcyBpdHMgcmVzdW1lXG4gICAgICAgICAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxuICAgICAgICAgICAgICAgIC8vIGluLW1lbW9yeSB2aWV3IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHRhcmdldHMgd2hpY2ggaW5jbHVkZXMgdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAgICAvLyByZXN1bWUgdG9rZW4sIHNvIHN0cmVhbSBmYWlsdXJlIG9yIHVzZXIgY2hhbmdlcyB3aWxsIHN0aWxsIHVzZSBhblxuICAgICAgICAgICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5hZGRlZERvY3VtZW50cy5zaXplICsgbi5tb2RpZmllZERvY3VtZW50cy5zaXplICsgbi5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBOb3RpZmllcyBsb2NhbCBzdG9yZSBvZiB0aGUgY2hhbmdlZCB2aWV3cyB0byBsb2NhbGx5IHBpbiBkb2N1bWVudHMuXG4gKi8gKGEsIHUsIHMpICYmIG8ucHVzaChuLmtyLnVwZGF0ZVRhcmdldERhdGEoZSwgdSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBfID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBhID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXG4gICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXG4gICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cbiAgICAgICAgLy8gbGltYm8uXG4gICAgICAgIGlmICh0LmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKChyID0+IHtcbiAgICAgICAgICAgIHQucmVzb2x2ZWRMaW1ib0RvY3VtZW50cy5oYXMocikgJiYgby5wdXNoKG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUudXBkYXRlTGltYm9Eb2N1bWVudChlLCByKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEVhY2ggbG9vcCBpdGVyYXRpb24gb25seSBhZmZlY3RzIGl0cyBcIm93blwiIGRvYywgc28gaXQncyBzYWZlIHRvIGdldCBhbGxcbiAgICAgICAgLy8gdGhlIHJlbW90ZSBkb2N1bWVudHMgaW4gYWR2YW5jZSBpbiBhIHNpbmdsZSBjYWxsLlxuICAgICAgICBvLnB1c2goX19QUklWQVRFX3BvcHVsYXRlRG9jdW1lbnRDaGFuZ2VCdWZmZXIoZSwgcywgdC5kb2N1bWVudFVwZGF0ZXMpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgXyA9IGUubnMsIGEgPSBlLnJzO1xuICAgICAgICB9KSkpLCAhci5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLmtyLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZSkubmV4dCgodCA9PiBuLmtyLnNldFRhcmdldHNNZXRhZGF0YShlLCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlciwgcikpKTtcbiAgICAgICAgICAgIG8ucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IobykubmV4dCgoKCkgPT4gcy5hcHBseShlKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgXywgYSkpKS5uZXh0KCgoKSA9PiBfKSk7XG4gICAgfSkpLnRoZW4oKGUgPT4gKG4uSmkgPSBpLCBlKSkpO1xufVxuXG4vKipcbiAqIFBvcHVsYXRlcyBkb2N1bWVudCBjaGFuZ2UgYnVmZmVyIHdpdGggZG9jdW1lbnRzIGZyb20gYmFja2VuZCBvciBhIGJ1bmRsZS5cbiAqIFJldHVybnMgdGhlIGRvY3VtZW50IGNoYW5nZXMgcmVzdWx0aW5nIGZyb20gYXBwbHlpbmcgdGhvc2UgZG9jdW1lbnRzLCBhbmRcbiAqIGFsc28gYSBzZXQgb2YgZG9jdW1lbnRzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZSBhcmUgY2hhbmdlZCBhcyBhIHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVHJhbnNhY3Rpb24gdG8gdXNlIHRvIHJlYWQgZXhpc3RpbmcgZG9jdW1lbnRzIGZyb20gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudEJ1ZmZlciAtIERvY3VtZW50IGJ1ZmZlciB0byBjb2xsZWN0IHRoZSByZXN1bHRlZCBjaGFuZ2VzIHRvIGJlXG4gKiAgICAgICAgYXBwbGllZCB0byBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50cyAtIERvY3VtZW50cyB0byBiZSBhcHBsaWVkLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wb3B1bGF0ZURvY3VtZW50Q2hhbmdlQnVmZmVyKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCBpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgcmV0dXJuIG4uZm9yRWFjaCgoZSA9PiByID0gci5hZGQoZSkpKSwgdC5nZXRFbnRyaWVzKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICBsZXQgciA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBlLmdldChuKTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlZSBpZiB0aGVyZSBpcyBhIGV4aXN0ZW5jZSBzdGF0ZSBjaGFuZ2UgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzLmlzRm91bmREb2N1bWVudCgpICE9PSBvLmlzRm91bmREb2N1bWVudCgpICYmIChpID0gaS5hZGQobikpLCBcbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSkgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY2FjaGUuXG4gICAgICAgICAgICBzLmlzTm9Eb2N1bWVudCgpICYmIHMudmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPyAoXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSBhcmUgdXNlZCBpbiBtYW51ZmFjdHVyZWRcbiAgICAgICAgICAgIC8vIGV2ZW50cy4gV2UgcmVtb3ZlIHRoZXNlIGRvY3VtZW50cyBmcm9tIGNhY2hlIHNpbmNlIHdlIGxvc3RcbiAgICAgICAgICAgIC8vIGFjY2Vzcy5cbiAgICAgICAgICAgIHQucmVtb3ZlRW50cnkobiwgcy5yZWFkVGltZSksIHIgPSByLmluc2VydChuLCBzKSkgOiAhby5pc1ZhbGlkRG9jdW1lbnQoKSB8fCBzLnZlcnNpb24uY29tcGFyZVRvKG8udmVyc2lvbikgPiAwIHx8IDAgPT09IHMudmVyc2lvbi5jb21wYXJlVG8oby52ZXJzaW9uKSAmJiBvLmhhc1BlbmRpbmdXcml0ZXMgPyAodC5hZGRFbnRyeShzKSwgXG4gICAgICAgICAgICByID0gci5pbnNlcnQobiwgcykpIDogX19QUklWQVRFX2xvZ0RlYnVnKFwiTG9jYWxTdG9yZVwiLCBcIklnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgXCIsIG4sIFwiLiBDdXJyZW50IHZlcnNpb246XCIsIG8udmVyc2lvbiwgXCIgV2F0Y2ggdmVyc2lvbjpcIiwgcy52ZXJzaW9uKTtcbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICBuczogcixcbiAgICAgICAgICAgIHJzOiBpXG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG11dGF0aW9uIGJhdGNoIGFmdGVyIHRoZSBwYXNzZWQgaW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWVcbiAqIG9yIG51bGwgaWYgZW1wdHkuXG4gKiBAcGFyYW0gYWZ0ZXJCYXRjaElkIC0gSWYgcHJvdmlkZWQsIHRoZSBiYXRjaCB0byBzZWFyY2ggYWZ0ZXIuXG4gKiBAcmV0dXJucyBUaGUgbmV4dCBtdXRhdGlvbiBvciBudWxsIGlmIHRoZXJlIHdhc24ndCBvbmUuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV4dE11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5leHQgbXV0YXRpb24gYmF0Y2hcIiwgXCJyZWFkb25seVwiLCAoZSA9PiAodm9pZCAwID09PSB0ICYmICh0ID0gLTEpLCBcbiAgICBuLm11dGF0aW9uUXVldWUuZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQoZSwgdCkpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XG4gKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXG4gKi9cbi8qKlxuICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xuICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxuICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cbiAqXG4gKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcbiAqIGZvciB0aGF0IGBUYXJnZXRgLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFsbG9jYXRlIHRhcmdldFwiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiB7XG4gICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gbi5rci5nZXRUYXJnZXREYXRhKGUsIHQpLm5leHQoKGkgPT4gaSA/IChcbiAgICAgICAgLy8gVGhpcyB0YXJnZXQgaGFzIGJlZW4gbGlzdGVuZWQgdG8gcHJldmlvdXNseSwgc28gcmV1c2UgdGhlXG4gICAgICAgIC8vIHByZXZpb3VzIHRhcmdldElELlxuICAgICAgICAvLyBUT0RPKG1jZyk6IGZyZXNoZW4gbGFzdCBhY2Nlc3NlZCBkYXRlP1xuICAgICAgICByID0gaSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocikpIDogbi5rci5hbGxvY2F0ZVRhcmdldElkKGUpLm5leHQoKGkgPT4gKHIgPSBuZXcgVGFyZ2V0RGF0YSh0LCBpLCBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyAsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgXG4gICAgICAgIG4ua3IuYWRkVGFyZ2V0RGF0YShlLCByKS5uZXh0KCgoKSA9PiByKSkpKSkpKTtcbiAgICB9KSkudGhlbigoZSA9PiB7XG4gICAgICAgIC8vIElmIE11bHRpLVRhYiBpcyBlbmFibGVkLCB0aGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgbWF5IGJlIG5ld2VyIHRoYW5cbiAgICAgICAgLy8gdGhlIGluLW1lbW9yeSBkYXRhXG4gICAgICAgIGNvbnN0IHIgPSBuLkppLmdldChlLnRhcmdldElkKTtcbiAgICAgICAgcmV0dXJuIChudWxsID09PSByIHx8IGUuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhyLnNuYXBzaG90VmVyc2lvbikgPiAwKSAmJiAobi5KaSA9IG4uSmkuaW5zZXJ0KGUudGFyZ2V0SWQsIGUpLCBcbiAgICAgICAgbi5ZaS5zZXQodCwgZS50YXJnZXRJZCkpLCBlO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGFzIHNlZW4gYnkgdGhlIExvY2FsU3RvcmUsIGluY2x1ZGluZyB1cGRhdGVzIHRoYXQgbWF5XG4gKiBoYXZlIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQgdG8gdGhlIFRhcmdldENhY2hlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuLyoqXG4gKiBVbnBpbnMgYWxsIHRoZSBkb2N1bWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiB0YXJnZXQuIElmXG4gKiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIHNldCB0byBmYWxzZSBhbmQgRWFnZXIgR0MgZW5hYmxlZCwgdGhlIG1ldGhvZFxuICogZGlyZWN0bHkgcmVtb3ZlcyB0aGUgYXNzb2NpYXRlZCB0YXJnZXQgZGF0YSBmcm9tIHRoZSB0YXJnZXQgY2FjaGUuXG4gKlxuICogUmVsZWFzaW5nIGEgbm9uLWV4aXN0aW5nIGBUYXJnZXRgIGlzIGEgbm8tb3AuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBtdWx0aS10YWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSByLkppLmdldCh0KSwgcyA9IG4gPyBcInJlYWR3cml0ZVwiIDogXCJyZWFkd3JpdGUtcHJpbWFyeVwiO1xuICAgIHRyeSB7XG4gICAgICAgIG4gfHwgYXdhaXQgci5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlbGVhc2UgdGFyZ2V0XCIsIHMsIChlID0+IHIucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KGUsIGkpKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIHRocm93IGU7XG4gICAgICAgIC8vIEFsbCBgcmVsZWFzZVRhcmdldGAgZG9lcyBpcyByZWNvcmQgdGhlIGZpbmFsIG1ldGFkYXRhIHN0YXRlIGZvciB0aGVcbiAgICAgICAgLy8gdGFyZ2V0LCBidXQgd2UndmUgYmVlbiByZWNvcmRpbmcgdGhpcyBwZXJpb2RpY2FsbHkgZHVyaW5nIHRhcmdldFxuICAgICAgICAvLyBhY3Rpdml0eS4gSWYgd2UgbG9zZSB0aGlzIHdyaXRlIHRoaXMgY291bGQgY2F1c2UgYSB2ZXJ5IHNsaWdodFxuICAgICAgICAvLyBkaWZmZXJlbmNlIGluIHRoZSBvcmRlciBvZiB0YXJnZXQgZGVsZXRpb24gZHVyaW5nIEdDLCBidXQgd2VcbiAgICAgICAgLy8gZG9uJ3QgZGVmaW5lIGV4YWN0IExSVSBzZW1hbnRpY3Mgc28gdGhpcyBpcyBhY2NlcHRhYmxlLlxuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJMb2NhbFN0b3JlXCIsIGBGYWlsZWQgdG8gdXBkYXRlIHNlcXVlbmNlIG51bWJlcnMgZm9yIHRhcmdldCAke3R9OiAke2V9YCk7XG4gICAgfVxuICAgIHIuSmkgPSByLkppLnJlbW92ZSh0KSwgci5ZaS5kZWxldGUoaS50YXJnZXQpO1xufVxuXG4vKipcbiAqIFJ1bnMgdGhlIHNwZWNpZmllZCBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyxcbiAqIHBvdGVudGlhbGx5IHRha2luZyBhZHZhbnRhZ2Ugb2YgcXVlcnkgZGF0YSBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgKHN1Y2hcbiAqIGFzIHRoZSBzZXQgb2YgcmVtb3RlIGtleXMpLlxuICpcbiAqIEBwYXJhbSB1c2VQcmV2aW91c1Jlc3VsdHMgLSBXaGV0aGVyIHJlc3VsdHMgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIGNhblxuICogYmUgdXNlZCB0byBvcHRpbWl6ZSB0aGlzIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbGV0IGkgPSBTbmFwc2hvdFZlcnNpb24ubWluKCksIHMgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICByZXR1cm4gci5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkV4ZWN1dGUgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldFRhcmdldERhdGEoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IHIuWWkuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoci5KaS5nZXQoaSkpIDogci5rci5nZXRUYXJnZXREYXRhKHQsIG4pO1xuICAgIH0ociwgZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpLm5leHQoKHQgPT4ge1xuICAgICAgICBpZiAodCkgcmV0dXJuIGkgPSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHIua3IuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdC50YXJnZXRJZCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBzID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiByLkhpLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiA/IGkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG4gPyBzIDogX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpKSkubmV4dCgoZSA9PiAoX19QUklWQVRFX3NldE1heFJlYWRUaW1lKHIsIF9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cCh0KSwgZSksIFxuICAgIHtcbiAgICAgICAgZG9jdW1lbnRzOiBlLFxuICAgICAgICBzczogc1xuICAgIH0pKSkpKTtcbn1cblxuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0Q2FjaGVkVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3Qobi5rciksIGkgPSBuLkppLmdldCh0KTtcbiAgICByZXR1cm4gaSA/IFByb21pc2UucmVzb2x2ZShpLnRhcmdldCkgOiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IHRhcmdldCBkYXRhXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gci51dChlLCB0KS5uZXh0KChlID0+IGUgPyBlLnRhcmdldCA6IG51bGwpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxuICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XG4gKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCB0aGF0IGhhdmUgY2hhbmdlZFxuICogc2luY2UgdGhlIHByaW9yIGNhbGwuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5ld0RvY3VtZW50Q2hhbmdlcyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLlppLmdldCh0KSB8fCBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IG1heGltdW0gcmVhZCB0aW1lIGZvciB0aGUgY29sbGVjdGlvbi4gVGhpcyBzaG91bGQgYWx3YXlzXG4gICAgLy8gZXhpc3QsIGJ1dCB0byByZWR1Y2UgdGhlIGNoYW5jZSBmb3IgcmVncmVzc2lvbnMgd2UgZGVmYXVsdCB0b1xuICAgIC8vIFNuYXBzaG90VmVyc2lvbi5NaW4oKVxuICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBDb25zaWRlciByZW1vdmluZyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXNcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLlhpLmdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgX19QUklWQVRFX25ld0luZGV4T2Zmc2V0U3VjY2Vzc29yRnJvbVJlYWRUaW1lKHIsIC0xKSwgXG4gICAgLyogbGltaXQ9ICovIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkpLnRoZW4oKGUgPT4gKF9fUFJJVkFURV9zZXRNYXhSZWFkVGltZShuLCB0LCBlKSwgXG4gICAgZSkpKTtcbn1cblxuLyoqIFNldHMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAncyBtYXhpbXVtIHJlYWQgdGltZSBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudHMuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gX19QUklWQVRFX3NldE1heFJlYWRUaW1lKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IGUuWmkuZ2V0KHQpIHx8IFNuYXBzaG90VmVyc2lvbi5taW4oKTtcbiAgICBuLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgIHQucmVhZFRpbWUuY29tcGFyZVRvKHIpID4gMCAmJiAociA9IHQucmVhZFRpbWUpO1xuICAgIH0pKSwgZS5aaS5zZXQodCwgcik7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgdXNpbmcgdGhlIGdpdmVuIGJ1bmRsZSBuYW1lLCB3aGljaCB3aWxsIGJlIHVzZWQgdG9cbiAqIGhvbGQgdGhlIGtleXMgb2YgYWxsIGRvY3VtZW50cyBmcm9tIHRoZSBidW5kbGUgaW4gcXVlcnktZG9jdW1lbnQgbWFwcGluZ3MuXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCB0aGUgbG9hZGVkIGRvY3VtZW50cyBkbyBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkXG4gKiByaWdodCBhd2F5LlxuICovXG4vKipcbiAqIEFwcGxpZXMgdGhlIGRvY3VtZW50cyBmcm9tIGEgYnVuZGxlIHRvIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseUJ1bmRsZWREb2N1bWVudHMoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCBzID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIG8gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgZm9yIChjb25zdCBlIG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IHQub3MoZS5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgZS5kb2N1bWVudCAmJiAocyA9IHMuYWRkKG4pKTtcbiAgICAgICAgY29uc3QgciA9IHQuX3MoZSk7XG4gICAgICAgIHIuc2V0UmVhZFRpbWUodC51cyhlLm1ldGFkYXRhLnJlYWRUaW1lKSksIG8gPSBvLmluc2VydChuLCByKTtcbiAgICB9XG4gICAgY29uc3QgXyA9IGkuWGkubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICB9KSwgYSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoaSwgZnVuY3Rpb24gX19QUklWQVRFX3VtYnJlbGxhVGFyZ2V0KGUpIHtcbiAgICAgICAgLy8gSXQgaXMgT0sgdGhhdCB0aGUgcGF0aCB1c2VkIGZvciB0aGUgcXVlcnkgaXMgbm90IHZhbGlkLCBiZWNhdXNlIHRoaXMgd2lsbFxuICAgICAgICAvLyBub3QgYmUgcmVhZCBhbmQgcXVlcmllZC5cbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoYF9fYnVuZGxlX18vZG9jcy8ke2V9YCkpKTtcbiAgICB9KHIpKTtcbiAgICAvLyBBbGxvY2F0ZXMgYSB0YXJnZXQgdG8gaG9sZCBhbGwgZG9jdW1lbnQga2V5cyBmcm9tIHRoZSBidW5kbGUsIHN1Y2ggdGhhdFxuICAgIC8vIHRoZXkgd2lsbCBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkIHJpZ2h0IGF3YXkuXG4gICAgICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgYnVuZGxlIGRvY3VtZW50c1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiBfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlcihlLCBfLCBvKS5uZXh0KCh0ID0+IChfLmFwcGx5KGUpLCBcbiAgICB0KSkpLm5leHQoKHQgPT4gaS5rci5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCBhLnRhcmdldElkKS5uZXh0KCgoKSA9PiBpLmtyLmFkZE1hdGNoaW5nS2V5cyhlLCBzLCBhLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkubG9jYWxEb2N1bWVudHMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgdC5ucywgdC5ycykpKS5uZXh0KCgoKSA9PiB0Lm5zKSkpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYm9vbGVhbiB0byBpbmRpY2F0ZSBpZiB0aGUgZ2l2ZW4gYnVuZGxlIGhhcyBhbHJlYWR5XG4gKiBiZWVuIGxvYWRlZCBhbmQgdGhlIGNyZWF0ZSB0aW1lIGlzIG5ld2VyIHRoYW4gdGhlIGN1cnJlbnQgbG9hZGluZyBidW5kbGUuXG4gKi9cbi8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBOYW1lZFF1ZXJ5YCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVTYXZlTmFtZWRRdWVyeShlLCB0LCBuID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpIHtcbiAgICAvLyBBbGxvY2F0ZSBhIHRhcmdldCBmb3IgdGhlIG5hbWVkIHF1ZXJ5IHN1Y2ggdGhhdCBpdCBjYW4gYmUgcmVzdW1lZFxuICAgIC8vIGZyb20gYXNzb2NpYXRlZCByZWFkIHRpbWUgaWYgdXNlcnMgdXNlIGl0IHRvIGxpc3Rlbi5cbiAgICAvLyBOT1RFOiB0aGlzIGFsc28gbWVhbnMgaWYgbm8gY29ycmVzcG9uZGluZyB0YXJnZXQgZXhpc3RzLCB0aGUgbmV3IHRhcmdldFxuICAgIC8vIHdpbGwgcmVtYWluIGFjdGl2ZSBhbmQgd2lsbCBub3QgZ2V0IGNvbGxlY3RlZCwgdW5sZXNzIHVzZXJzIGhhcHBlbiB0b1xuICAgIC8vIHVubGlzdGVuIHRoZSBxdWVyeSBzb21laG93LlxuICAgIGNvbnN0IHIgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KGUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KHQuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4ge1xuICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQucmVhZFRpbWUpO1xuICAgICAgICAvLyBTaW1wbHkgc2F2ZSB0aGUgcXVlcnkgaXRzZWxmIGlmIGl0IGlzIG9sZGVyIHRoYW4gd2hhdCB0aGUgU0RLIGFscmVhZHlcbiAgICAgICAgLy8gaGFzLlxuICAgICAgICAgICAgICAgIGlmIChyLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocykgPj0gMCkgcmV0dXJuIGkuUXIuc2F2ZU5hbWVkUXVlcnkoZSwgdCk7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyB0YXJnZXQgZGF0YSBiZWNhdXNlIHRoZSBxdWVyeSBmcm9tIHRoZSBidW5kbGUgaXMgbmV3ZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IHIud2l0aFJlc3VtZVRva2VuKEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkcsIHMpO1xuICAgICAgICByZXR1cm4gaS5KaSA9IGkuSmkuaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLmtyLnVwZGF0ZVRhcmdldERhdGEoZSwgbykubmV4dCgoKCkgPT4gaS5rci5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCByLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkua3IuYWRkTWF0Y2hpbmdLZXlzKGUsIG4sIHIudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5Rci5zYXZlTmFtZWRRdWVyeShlLCB0KSkpO1xuICAgIH0pKTtcbn1cblxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkoZSwgdCkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX2NsaWVudHNfJHtlfV8ke3R9YDtcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIG11dGF0aW9uIHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPlxuLy8gICAgIChmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzKVxuLy8gb3I6IGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPl88dXNlcl91aWQ+XG5cbi8vICd1c2VyX3VpZCcgaXMgbGFzdCB0byBhdm9pZCBuZWVkaW5nIHRvIGVzY2FwZSAnXycgY2hhcmFjdGVycyB0aGF0IGl0IG1pZ2h0XG4vLyBjb250YWluLlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIG11dGF0aW9uIGJhdGNoIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IGBmaXJlc3RvcmVfbXV0YXRpb25zXyR7ZX1fJHtufWA7XG4gICAgcmV0dXJuIHQuaXNBdXRoZW50aWNhdGVkKCkgJiYgKHIgKz0gYF8ke3QudWlkfWApLCByO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyBhIHF1ZXJ5IHRhcmdldCdzIG1ldGFkYXRhIGlzOlxuLy8gICAgIGZpcmVzdG9yZV90YXJnZXRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Xzx0YXJnZXRfaWQ+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgcXVlcnkgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkoZSwgdCkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX3RhcmdldHNfJHtlfV8ke3R9YDtcbn1cblxuLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgc3RvcmVzIHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZS4gVGhlXG4vLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbi8vICAgICBmaXJlc3RvcmVfb25saW5lX3N0YXRlXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIG11dGF0aW9uIGJhdGNoLCBpbmNsdWRpbmcgaXRzIHVzZXIgSUQsIGJhdGNoIElEIGFuZFxuICogd2hldGhlciB0aGUgYmF0Y2ggaXMgJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnVzZXIgPSBlLCB0aGlzLmJhdGNoSWQgPSB0LCB0aGlzLnN0YXRlID0gbiwgdGhpcy5lcnJvciA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIE11dGF0aW9uTWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBjcyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBKU09OLnBhcnNlKG4pO1xuICAgICAgICBsZXQgaSwgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHIgJiYgLTEgIT09IFsgXCJwZW5kaW5nXCIsIFwiYWNrbm93bGVkZ2VkXCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yoci5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gci5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiByLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIHMgJiYgci5lcnJvciAmJiAocyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHIuZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiByLmVycm9yLmNvZGUsIFxuICAgICAgICBzICYmIChpID0gbmV3IEZpcmVzdG9yZUVycm9yKHIuZXJyb3IuY29kZSwgci5lcnJvci5tZXNzYWdlKSkpLCBzID8gbmV3IF9fUFJJVkFURV9NdXRhdGlvbk1ldGFkYXRhKGUsIHQsIHIuc3RhdGUsIGkpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICcke3R9JzogJHtufWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIGxzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKGUuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxuICogdGFyZ2V0IGlzICdub3QtY3VycmVudCcsICdjdXJyZW50JyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gZSwgdGhpcy5zdGF0ZSA9IHQsIHRoaXMuZXJyb3IgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBRdWVyeVRhcmdldE1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgY3MoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgbGV0IHIsIGkgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIC0xICE9PSBbIFwibm90LWN1cnJlbnRcIiwgXCJjdXJyZW50XCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yobi5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gbi5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBuLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIGkgJiYgbi5lcnJvciAmJiAoaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLmNvZGUsIFxuICAgICAgICBpICYmIChyID0gbmV3IEZpcmVzdG9yZUVycm9yKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhKGUsIG4uc3RhdGUsIHIpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgdGFyZ2V0IHN0YXRlIGZvciBJRCAnJHtlfSc6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBscygpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmIChlLmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBpbW11dGFibGUgQ2xpZW50U3RhdGUgZm9yIGEgY2xpZW50IHJlYWQgZnJvbVxuICogV2ViU3RvcmFnZSwgY29udGFpbmluZyB0aGUgbGlzdCBvZiBhY3RpdmUgcXVlcnkgdGFyZ2V0cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUmVtb3RlQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGUsIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBjcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICBsZXQgciA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgbi5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheSwgaSA9IF9fUFJJVkFURV90YXJnZXRJZFNldCgpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgciAmJiBlIDwgbi5hY3RpdmVUYXJnZXRJZHMubGVuZ3RoOyArK2UpIHIgPSBpc1NhZmVJbnRlZ2VyKG4uYWN0aXZlVGFyZ2V0SWRzW2VdKSwgXG4gICAgICAgIGkgPSBpLmFkZChuLmFjdGl2ZVRhcmdldElkc1tlXSk7XG4gICAgICAgIHJldHVybiByID8gbmV3IF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZShlLCBpKSA6IChfX1BSSVZBVEVfbG9nRXJyb3IoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnJHtlfSc6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXG4gKi8gY2xhc3MgX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBlLCB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgU2hhcmVkT25saW5lU3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBjcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiAtMSAhPT0gWyBcIlVua25vd25cIiwgXCJPbmxpbmVcIiwgXCJPZmZsaW5lXCIgXS5pbmRleE9mKHQub25saW5lU3RhdGUpICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQuY2xpZW50SWQgPyBuZXcgX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlKHQuY2xpZW50SWQsIHQub25saW5lU3RhdGUpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWV0YWRhdGEgc3RhdGUgb2YgdGhlIGxvY2FsIGNsaWVudC4gVW5saWtlIGBSZW1vdGVDbGllbnRTdGF0ZWAsIHRoaXMgY2xhc3MgaXNcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXG4gKiB1cGRhdGUgdGhlIHJhbmdlIG9mIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2ggSURzIGFzIG5ldyBtdXRhdGlvbnMgYXJlIGFkZGVkIG9yXG4gKiByZW1vdmVkLlxuICpcbiAqIFRoZSBkYXRhIGluIGBMb2NhbENsaWVudFN0YXRlYCBpcyBub3QgcmVhZCBmcm9tIFdlYlN0b3JhZ2UgYW5kIGluc3RlYWRcbiAqIHVwZGF0ZWQgdmlhIGl0cyBpbnN0YW5jZSBtZXRob2RzLiBUaGUgdXBkYXRlZCBzdGF0ZSBjYW4gYmUgc2VyaWFsaXplZCB2aWFcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuY2xhc3MgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IF9fUFJJVkFURV90YXJnZXRJZFNldCgpO1xuICAgIH1cbiAgICBocyhlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKGUpO1xuICAgIH1cbiAgICBQcyhlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGVudHJ5IGludG8gYSBKU09OLWVuY29kZWQgZm9ybWF0IHdlIGNhbiB1c2UgZm9yIFdlYlN0b3JhZ2UuXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXG4gICAgICovICAgIGxzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzOiB0aGlzLmFjdGl2ZVRhcmdldElkcy50b0FycmF5KCksXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCB1c2VzIFdlYlN0b3JhZ2UgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGFzIHRoZVxuICogYmFja2luZyBzdG9yZSBmb3IgdGhlIFNoYXJlZENsaWVudFN0YXRlLiBJdCBrZWVwcyB0cmFjayBvZiBhbGwgYWN0aXZlXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxuICovIGNsYXNzIF9fUFJJVkFURV9XZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSBlLCB0aGlzLmlpID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuSXMgPSByLCB0aGlzLnN5bmNFbmdpbmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGwsIHRoaXMuVHMgPSB0aGlzLkVzLmJpbmQodGhpcyksIFxuICAgICAgICB0aGlzLmRzID0gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIHRoaXMuc3RhcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcHR1cmVzIFdlYlN0b3JhZ2UgZXZlbnRzIHRoYXQgb2NjdXIgYmVmb3JlIGBzdGFydCgpYCBpcyBjYWxsZWQuIFRoZXNlXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5BcyA9IFtdO1xuICAgICAgICAvLyBFc2NhcGUgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBtZW50aW9uZWQgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXG4gICAgICAgIGNvbnN0IHMgPSBuLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLCB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5ScyA9IGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLklzKSwgXG4gICAgICAgIHRoaXMuVnMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcktleShlKSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfJHtlfWA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLmRzID0gdGhpcy5kcy5pbnNlcnQodGhpcy5JcywgbmV3IF9fUFJJVkFURV9Mb2NhbENsaWVudFN0YXRlKSwgXG4gICAgICAgIHRoaXMuZnMgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX2NsaWVudHNfJHtzfV8oW15fXSopJGApLCB0aGlzLmdzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9tdXRhdGlvbnNfJHtzfV8oXFxcXGQrKSg/Ol8oLiopKT8kYCksIFxuICAgICAgICB0aGlzLnBzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV90YXJnZXRzXyR7c31fKFxcXFxkKykkYCksIHRoaXMueXMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZU9ubGluZVN0YXRlS2V5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV8ke2V9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBwbGF5cyBhcyBhIGV2ZW50IHRvIGluZGljYXRlIHRoZSByZW1vdGUgZG9jdW1lbnRzXG4gICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCBkdWUgdG8gc29tZSBzZWNvbmRhcnkgdGFicyBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAgICAvLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbiAgICAgICAgLy8gICAgIGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXzxwZXJzaXN0ZW5jZUtleT5cbiAgICAgICAgLy8gVGhlIHZlcnNpb24gZW5kaW5nIHdpdGggXCJ2MlwiIHN0b3JlcyB0aGUgbGlzdCBvZiBtb2RpZmllZCBjb2xsZWN0aW9uIGdyb3Vwcy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLndzID0gZnVuY3Rpb24gY3JlYXRlQnVuZGxlTG9hZGVkS2V5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfdjJfJHtlfWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5Ucyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIHYoZSkge1xuICAgICAgICByZXR1cm4gISghZSB8fCAhZS5sb2NhbFN0b3JhZ2UpO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2xpZW50cyB0byBiYWNrZmlsbCB0aGUgZGF0YSBpblxuICAgICAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuc3luY0VuZ2luZS5OaSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHQgPT09IHRoaXMuSXMpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0SXRlbShjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX1JlbW90ZUNsaWVudFN0YXRlLmNzKHQsIGUpO1xuICAgICAgICAgICAgICAgIG4gJiYgKHRoaXMuZHMgPSB0aGlzLmRzLmluc2VydChuLmNsaWVudElkLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5TcygpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBvbmxpbmUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIGhhbmRsZXJcbiAgICAgICAgLy8gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMueXMpO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuYnModCk7XG4gICAgICAgICAgICBlICYmIHRoaXMuRHMoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuQXMpIHRoaXMuRXMoZSk7XG4gICAgICAgIHRoaXMuQXMgPSBbXSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cbiAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgoKSA9PiB0aGlzLnNodXRkb3duKCkpKSwgdGhpcy5zdGFydGVkID0gITA7XG4gICAgfVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5WcywgSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZzKHRoaXMuZHMpO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHIuYWN0aXZlVGFyZ2V0SWRzLmhhcyhlKSAmJiAodCA9ICEwKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24oZSkge1xuICAgICAgICB0aGlzLkNzKGUsIFwicGVuZGluZ1wiKTtcbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuQ3MoZSwgdCwgbiksIFxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxuICAgICAgICB0aGlzLkZzKGUpO1xuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSBcIm5vdC1jdXJyZW50XCI7XG4gICAgICAgIC8vIExvb2t1cCBhbiBleGlzdGluZyBxdWVyeSBzdGF0ZSBpZiB0aGUgdGFyZ2V0IElEIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgICAgLy8gYnkgYW5vdGhlciB0YWJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KGUpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgICAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX1F1ZXJ5VGFyZ2V0TWV0YWRhdGEuY3MoZSwgbik7XG4gICAgICAgICAgICAgICAgciAmJiAodCA9IHIuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLk1zLmhzKGUpLCB0aGlzLlNzKCksIHQ7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLk1zLlBzKGUpLCB0aGlzLlNzKCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk1zLmFjdGl2ZVRhcmdldElkcy5oYXMoZSk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZShlKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnhzKGUsIHQsIG4pO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuRnMoZSk7XG4gICAgICAgIH0pKSwgdGhpcy5jdXJyZW50VXNlciA9IGUsIG4uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNdXRhdGlvbihlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZShlKSB7XG4gICAgICAgIHRoaXMuT3MoZSk7XG4gICAgfVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZChlKSB7XG4gICAgICAgIHRoaXMuTnMoZSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuVHMpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5ScyksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0oZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFQURcIiwgZSwgdCksIHQ7XG4gICAgfVxuICAgIHNldEl0ZW0oZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlNFVFwiLCBlLCB0KSwgdGhpcy5zdG9yYWdlLnNldEl0ZW0oZSwgdCk7XG4gICAgfVxuICAgIHJlbW92ZUl0ZW0oZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCBlKSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oZSk7XG4gICAgfVxuICAgIEVzKGUpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCB0ID0gZTtcbiAgICAgICAgaWYgKHQuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRVZFTlRcIiwgdC5rZXksIHQubmV3VmFsdWUpLCB0LmtleSA9PT0gdGhpcy5ScykgcmV0dXJuIHZvaWQgX19QUklWQVRFX2xvZ0Vycm9yKFwiUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSBnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGVcIik7XG4gICAgICAgICAgICB0aGlzLmlpLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0LmtleSkgaWYgKHRoaXMuZnMudGVzdCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Ccyh0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuTHMoZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMua3ModC5rZXksIHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5McyhlLmNsaWVudElkLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdzLnRlc3QodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnFzKHQua2V5LCB0Lm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIHRoaXMuUXMoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcy50ZXN0KHQua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Lcyh0LmtleSwgdC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiB0aGlzLiRzKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHQua2V5ID09PSB0aGlzLnlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmJzKHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5EcyhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0LmtleSA9PT0gdGhpcy5Wcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBlKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJudW1iZXJcIiA9PSB0eXBlb2YgbiksIHQgPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlXCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICogYE1lbW9yeVNoYXJlZENsaWVudFN0YXRlYCBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBTaGFyZWRDbGllbnRTdGF0ZSBmb3JcbiAqIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlLiBUaGUgc3RhdGUgaW4gdGhpcyBjbGFzcyByZW1haW5zIGZ1bGx5XG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqLyAodC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlICE9PSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWUgJiYgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodC5rZXkgPT09IHRoaXMud3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLlVzKHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGUgPT4gdGhpcy5zeW5jRW5naW5lLldzKGUpKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMuQXMucHVzaCh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgTXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRzLmdldCh0aGlzLklzKTtcbiAgICB9XG4gICAgU3MoKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLlJzLCB0aGlzLk1zLmxzKCkpO1xuICAgIH1cbiAgICBDcyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX011dGF0aW9uTWV0YWRhdGEodGhpcy5jdXJyZW50VXNlciwgZSwgdCwgbiksIGkgPSBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCBlKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGksIHIubHMoKSk7XG4gICAgfVxuICAgIEZzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIGUpO1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIE9zKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLklzLFxuICAgICAgICAgICAgb25saW5lU3RhdGU6IGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy55cywgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIH1cbiAgICB4cyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSwgaSA9IG5ldyBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YShlLCB0LCBuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHIsIGkubHMoKSk7XG4gICAgfVxuICAgIE5zKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20oZSkpO1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy53cywgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgQnMoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5mcy5leGVjKGUpO1xuICAgICAgICByZXR1cm4gdCA/IHRbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAga3MoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5CcyhlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZS5jcyhuLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgbXV0YXRpb24gYmF0Y2ggc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgcXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5ncy5leGVjKGUpLCByID0gTnVtYmVyKG5bMV0pLCBpID0gdm9pZCAwICE9PSBuWzJdID8gblsyXSA6IG51bGw7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YS5jcyhuZXcgVXNlcihpKSwgciwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIHF1ZXJ5IHRhcmdldCBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIEtzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucHMuZXhlYyhlKSwgciA9IE51bWJlcihuWzFdKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhLmNzKHIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gb25saW5lIHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgYnMoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlLmNzKGUpO1xuICAgIH1cbiAgICBVcyhlKSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGUpO1xuICAgIH1cbiAgICBhc3luYyBRcyhlKSB7XG4gICAgICAgIGlmIChlLnVzZXIudWlkID09PSB0aGlzLmN1cnJlbnRVc2VyLnVpZCkgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5HcyhlLmJhdGNoSWQsIGUuc3RhdGUsIGUuZXJyb3IpO1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgSWdub3JpbmcgbXV0YXRpb24gZm9yIG5vbi1hY3RpdmUgdXNlciAke2UudXNlci51aWR9YCk7XG4gICAgfVxuICAgICRzKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS56cyhlLnRhcmdldElkLCBlLnN0YXRlLCBlLmVycm9yKTtcbiAgICB9XG4gICAgTHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdCA/IHRoaXMuZHMuaW5zZXJ0KGUsIHQpIDogdGhpcy5kcy5yZW1vdmUoZSksIHIgPSB0aGlzLnZzKHRoaXMuZHMpLCBpID0gdGhpcy52cyhuKSwgcyA9IFtdLCBvID0gW107XG4gICAgICAgIHJldHVybiBpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgci5oYXMoZSkgfHwgcy5wdXNoKGUpO1xuICAgICAgICB9KSksIHIuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBpLmhhcyhlKSB8fCBvLnB1c2goZSk7XG4gICAgICAgIH0pKSwgdGhpcy5zeW5jRW5naW5lLmpzKHMsIG8pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZHMgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIERzKGUpIHtcbiAgICAgICAgLy8gV2UgY2hlY2sgd2hldGhlciB0aGUgY2xpZW50IHRoYXQgd3JvdGUgdGhpcyBvbmxpbmUgc3RhdGUgaXMgc3RpbGwgYWN0aXZlXG4gICAgICAgIC8vIGJ5IGNvbXBhcmluZyBpdHMgY2xpZW50IElEIHRvIHRoZSBsaXN0IG9mIGNsaWVudHMga2VwdCBhY3RpdmUgaW5cbiAgICAgICAgLy8gSW5kZXhlZERiLiBJZiBhIGNsaWVudCBkb2VzIG5vdCB1cGRhdGUgdGhlaXIgSW5kZXhlZERiIGNsaWVudCBzdGF0ZVxuICAgICAgICAvLyB3aXRoaW4gNSBzZWNvbmRzLCBpdCBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCB3ZSBkb24ndCBlbWl0IGFuIG9ubGluZVxuICAgICAgICAvLyBzdGF0ZSBldmVudC5cbiAgICAgICAgdGhpcy5kcy5nZXQoZS5jbGllbnRJZCkgJiYgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIoZS5vbmxpbmVTdGF0ZSk7XG4gICAgfVxuICAgIHZzKGUpIHtcbiAgICAgICAgbGV0IHQgPSBfX1BSSVZBVEVfdGFyZ2V0SWRTZXQoKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQgPSB0LnVuaW9uV2l0aChuLmFjdGl2ZVRhcmdldElkcyk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuSHMgPSBuZXcgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUsIHRoaXMuSnMgPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCBcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24oZSkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHMuaHMoZSksIHRoaXMuSnNbZV0gfHwgXCJub3QtY3VycmVudFwiO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5Kc1tlXSA9IHQ7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLkhzLlBzKGUpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Icy5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUoZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5Kc1tlXTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Icy5hY3RpdmVUYXJnZXRJZHM7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Icy5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHMgPSBuZXcgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKGUpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKGUpIHt9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKGUpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTm9vcENvbm5lY3Rpdml0eU1vbml0b3Ige1xuICAgIFlzKGUpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuWnMgPSAoKSA9PiB0aGlzLlhzKCksIHRoaXMuZW8gPSAoKSA9PiB0aGlzLm5vKCksIHRoaXMucm8gPSBbXSwgdGhpcy5pbygpO1xuICAgIH1cbiAgICBZcyhlKSB7XG4gICAgICAgIHRoaXMucm8ucHVzaChlKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuWnMpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5lbyk7XG4gICAgfVxuICAgIGlvKCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLlpzKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuZW8pO1xuICAgIH1cbiAgICBYcygpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMucm8pIGUoMCAvKiBOZXR3b3JrU3RhdHVzLkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIG5vKCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogVU5BVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnJvKSBlKDEgLyogTmV0d29ya1N0YXR1cy5VTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyB2KCkge1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHZvaWQgMCAhPT0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgdm9pZCAwICE9PSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBtb3N0IHJlY2VudCBpbnZvY2F0aW9uIG9mXG4gKiBgZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKClgLCBvciBudWxsIGlmIGl0IGhhcyBuZXZlciBiZWVuIGludm9rZWQuXG4gKi8gbGV0IFJlID0gbnVsbDtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYW4gaW5pdGlhbCB2YWx1ZSBmb3IgYGxhc3RVbmlxdWVEZWJ1Z0lkYC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgcmFuZG9tbHkgc2VsZWN0ZWQgZnJvbSBhIHJhbmdlIG9mIGludGVnZXJzIHRoYXQgYXJlXG4gKiByZXByZXNlbnRlZCBhcyA4IGhleGFkZWNpbWFsIGRpZ2l0cy4gVGhpcyBtZWFucyB0aGF0ICh3aXRoaW4gcmVhc29uKSBhbnlcbiAqIG51bWJlcnMgZ2VuZXJhdGVkIGJ5IGluY3JlbWVudGluZyB0aGUgcmV0dXJuZWQgbnVtYmVyIGJ5IDEgd2lsbCBhbHNvIGJlXG4gKiByZXByZXNlbnRlZCBieSA4IGhleGFkZWNpbWFsIGRpZ2l0cy4gVGhpcyBsZWFkcyB0byBhbGwgXCJJRHNcIiBoYXZpbmcgdGhlIHNhbWVcbiAqIGxlbmd0aCB3aGVuIGNvbnZlcnRlZCB0byBhIGhleGFkZWNpbWFsIHN0cmluZywgbWFraW5nIHJlYWRpbmcgbG9ncyBjb250YWluaW5nXG4gKiB0aGVzZSBJRHMgZWFzaWVyIHRvIGZvbGxvdy4gQW5kIHNpbmNlIHRoZSByZXR1cm4gdmFsdWUgaXMgcmFuZG9tbHkgc2VsZWN0ZWRcbiAqIGl0IHdpbGwgaGVscCB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gbG9ncyBmcm9tIGRpZmZlcmVudCBleGVjdXRpb25zLlxuICovXG4vKipcbiAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIHVuaXF1ZSBJRCBhcyBhIGhleGFkZWNpbWFsIHN0cmluZy5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgSUQgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiBkZWJ1ZyBsb2dnaW5nIG1lc3NhZ2VzIHRvIGhlbHBcbiAqIGNvcnJlbGF0ZSBsb2cgbWVzc2FnZXMgdGhhdCBtYXkgYmUgc3BhdGlhbGx5IHNlcGFyYXRlZCBpbiB0aGUgbG9ncywgYnV0XG4gKiBsb2dpY2FsbHkgcmVsYXRlZC4gRm9yIGV4YW1wbGUsIGEgbmV0d29yayBjb25uZWN0aW9uIGNvdWxkIGluY2x1ZGUgdGhlIHNhbWVcbiAqIFwiZGVidWcgSURcIiBzdHJpbmcgaW4gYWxsIG9mIGl0cyBsb2cgbWVzc2FnZXMgdG8gaGVscCB0cmFjZSBhIHNwZWNpZmljXG4gKiBjb25uZWN0aW9uIG92ZXIgdGltZS5cbiAqXG4gKiBAcmV0dXJuIHRoZSAxMC1jaGFyYWN0ZXIgZ2VuZXJhdGVkIElEIChlLmcuIFwiMHhhMWIyYzNkNFwiKS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpIHtcbiAgICByZXR1cm4gbnVsbCA9PT0gUmUgPyBSZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9nZW5lcmF0ZUluaXRpYWxVbmlxdWVEZWJ1Z0lkKCkge1xuICAgICAgICByZXR1cm4gMjY4NDM1NDU2ICsgTWF0aC5yb3VuZCgyMTQ3NDgzNjQ4ICogTWF0aC5yYW5kb20oKSk7XG4gICAgfSgpIDogUmUrKywgXCIweFwiICsgUmUudG9TdHJpbmcoMTYpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBWZSA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiLFxuICAgIFJ1bkFnZ3JlZ2F0aW9uUXVlcnk6IFwicnVuQWdncmVnYXRpb25RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9TdHJlYW1CcmlkZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zbyA9IGUuc28sIHRoaXMub28gPSBlLm9vO1xuICAgIH1cbiAgICBfbyhlKSB7XG4gICAgICAgIHRoaXMuYW8gPSBlO1xuICAgIH1cbiAgICB1byhlKSB7XG4gICAgICAgIHRoaXMuY28gPSBlO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoZSkge1xuICAgICAgICB0aGlzLmxvID0gZTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMub28oKTtcbiAgICB9XG4gICAgc2VuZChlKSB7XG4gICAgICAgIHRoaXMuc28oZSk7XG4gICAgfVxuICAgIGhvKCkge1xuICAgICAgICB0aGlzLmFvKCk7XG4gICAgfVxuICAgIFBvKGUpIHtcbiAgICAgICAgdGhpcy5jbyhlKTtcbiAgICB9XG4gICAgSW8oZSkge1xuICAgICAgICB0aGlzLmxvKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgbWUgPSBcIldlYkNoYW5uZWxDb25uZWN0aW9uXCI7XG5cbmNsYXNzIF9fUFJJVkFURV9XZWJDaGFubmVsQ29ubmVjdGlvbiBleHRlbmRzIFxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgUmVzdC1iYXNlZCBjb25uZWN0aW9ucyB0byB0aGUgYmFja2VuZCAoV2ViQ2hhbm5lbCBhbmRcbiAqIEhUVFApLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUmVzdENvbm5lY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSBlLCB0aGlzLmRhdGFiYXNlSWQgPSBlLmRhdGFiYXNlSWQ7XG4gICAgICAgIGNvbnN0IHQgPSBlLnNzbCA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiLCBuID0gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQpLCByID0gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgICAgIHRoaXMuVG8gPSB0ICsgXCI6Ly9cIiArIGUuaG9zdCwgdGhpcy5FbyA9IGBwcm9qZWN0cy8ke259L2RhdGFiYXNlcy8ke3J9YCwgdGhpcy5BbyA9IFwiKGRlZmF1bHQpXCIgPT09IHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSA/IGBwcm9qZWN0X2lkPSR7bn1gIDogYHByb2plY3RfaWQ9JHtufSZkYXRhYmFzZV9pZD0ke3J9YDtcbiAgICB9XG4gICAgZ2V0IFJvKCkge1xuICAgICAgICAvLyBCb3RoIGBpbnZva2VSUEMoKWAgYW5kIGBpbnZva2VTdHJlYW1pbmdSUEMoKWAgdXNlIHRoZWlyIGBwYXRoYCBhcmd1bWVudHMgdG8gZGV0ZXJtaW5lXG4gICAgICAgIC8vIHdoZXJlIHRvIHJ1biB0aGUgcXVlcnksIGFuZCBleHBlY3QgdGhlIGByZXF1ZXN0YCB0byBOT1Qgc3BlY2lmeSB0aGUgXCJwYXRoXCIuXG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgVm8oZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpLCBvID0gdGhpcy5tbyhlLCB0KTtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVzdENvbm5lY3Rpb25cIiwgYFNlbmRpbmcgUlBDICcke2V9JyAke3N9OmAsIG8sIG4pO1xuICAgICAgICBjb25zdCBfID0ge1xuICAgICAgICAgICAgXCJnb29nbGUtY2xvdWQtcmVzb3VyY2UtcHJlZml4XCI6IHRoaXMuRW8sXG4gICAgICAgICAgICBcIngtZ29vZy1yZXF1ZXN0LXBhcmFtc1wiOiB0aGlzLkFvXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmZvKF8sIHIsIGkpLCB0aGlzLnBvKGUsIG8sIF8sIG4pLnRoZW4oKHQgPT4gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlc3RDb25uZWN0aW9uXCIsIGBSZWNlaXZlZCBSUEMgJyR7ZX0nICR7c306IGAsIHQpLCBcbiAgICAgICAgdCkpLCAodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBfX1BSSVZBVEVfbG9nV2FybihcIlJlc3RDb25uZWN0aW9uXCIsIGBSUEMgJyR7ZX0nICR7c30gZmFpbGVkIHdpdGggZXJyb3I6IGAsIHQsIFwidXJsOiBcIiwgbywgXCJyZXF1ZXN0OlwiLCBuKSwgXG4gICAgICAgICAgICB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHlvKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgLy8gVGhlIFJFU1QgQVBJIGF1dG9tYXRpY2FsbHkgYWdncmVnYXRlcyBhbGwgb2YgdGhlIHN0cmVhbWVkIHJlc3VsdHMsIHNvIHdlXG4gICAgICAgIC8vIGNhbiBqdXN0IHVzZSB0aGUgbm9ybWFsIGludm9rZSgpIG1ldGhvZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuVm8oZSwgdCwgbiwgciwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIHRoZSBoZWFkZXJzIGZvciBhIHJlcXVlc3QsIGFkZGluZyBhbnkgYXV0aG9yaXphdGlvbiB0b2tlbiBpZlxuICAgICAqIHByZXNlbnQgYW5kIGFueSBhZGRpdGlvbmFsIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0LlxuICAgICAqLyAgICBmbyhlLCB0LCBuKSB7XG4gICAgICAgIGVbXCJYLUdvb2ctQXBpLUNsaWVudFwiXSA9IFxuICAgICAgICAvLyBTREtfVkVSU0lPTiBpcyB1cGRhdGVkIHRvIGRpZmZlcmVudCB2YWx1ZSBhdCBydW50aW1lIGRlcGVuZGluZyBvbiB0aGUgZW50cnkgcG9pbnQsXG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gZ2V0IGl0cyB2YWx1ZSB3aGVuIHdlIG5lZWQgaXQgaW4gYSBmdW5jdGlvbi5cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2dldEdvb2dBcGlDbGllbnRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBcImdsLWpzLyBmaXJlL1wiICsgYjtcbiAgICAgICAgfSgpLCBcbiAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XG4gICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXG4gICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGUgJGh0dHBPdmVyd3JpdGVcbiAgICAgICAgLy8gcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWQgdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXG4gICAgICAgIGVbXCJDb250ZW50LVR5cGVcIl0gPSBcInRleHQvcGxhaW5cIiwgdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQgJiYgKGVbXCJYLUZpcmViYXNlLUdNUElEXCJdID0gdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLCBcbiAgICAgICAgdCAmJiB0LmhlYWRlcnMuZm9yRWFjaCgoKHQsIG4pID0+IGVbbl0gPSB0KSksIG4gJiYgbi5oZWFkZXJzLmZvckVhY2goKCh0LCBuKSA9PiBlW25dID0gdCkpO1xuICAgIH1cbiAgICBtbyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBWZVtlXTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuVG99L3YxLyR7dH06JHtufWA7XG4gICAgfVxufSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gZS5mb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IGUuYXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSBlLnVzZUZldGNoU3RyZWFtcywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSBlLmxvbmdQb2xsaW5nT3B0aW9ucztcbiAgICB9XG4gICAgcG8oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBfID0gbmV3IFhocklvO1xuICAgICAgICAgICAgXy5zZXRXaXRoQ3JlZGVudGlhbHMoITApLCBfLmxpc3Rlbk9uY2UoRXZlbnRUeXBlLkNPTVBMRVRFLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoXy5nZXRMYXN0RXJyb3JDb2RlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5OT19FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfLmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKG1lLCBgWEhSIGZvciBSUEMgJyR7ZX0nICR7aX0gcmVjZWl2ZWQ6YCwgSlNPTi5zdHJpbmdpZnkodCkpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHModCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLlRJTUVPVVQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcobWUsIGBSUEMgJyR7ZX0nICR7aX0gdGltZWQgb3V0YCksIG8obmV3IEZpcmVzdG9yZUVycm9yKHYuREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gXy5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfbG9nRGVidWcobWUsIGBSUEMgJyR7ZX0nICR7aX0gZmFpbGVkIHdpdGggc3RhdHVzOmAsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgXy5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IF8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShlKSAmJiAoZSA9IGVbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBudWxsID09IGUgPyB2b2lkIDAgOiBlLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIHQuc3RhdHVzICYmIHQubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX21hcENvZGVGcm9tSHR0cFJlc3BvbnNlRXJyb3JTdGF0dXMoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIFwiLVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHYpLmluZGV4T2YodCkgPj0gMCA/IHQgOiB2LlVOS05PV047XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odC5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKG5ldyBGaXJlc3RvcmVFcnJvcihlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbyhuZXcgRmlyZXN0b3JlRXJyb3Iodi5VTktOT1dOLCBcIlNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgXCIgKyBfLmdldFN0YXR1cygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBtb3N0IHByb2JhYmx5IGEgY29ubmVjdGlvbiBpc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgbyhuZXcgRmlyZXN0b3JlRXJyb3Iodi5VTkFWQUlMQUJMRSwgXCJDb25uZWN0aW9uIGZhaWxlZC5cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKG1lLCBgUlBDICcke2V9JyAke2l9IGNvbXBsZXRlZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBhID0gSlNPTi5zdHJpbmdpZnkocik7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcobWUsIGBSUEMgJyR7ZX0nICR7aX0gc2VuZGluZyByZXF1ZXN0OmAsIHIpLCBfLnNlbmQodCwgXCJQT1NUXCIsIGEsIG4sIDE1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3byhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKCksIGkgPSBbIHRoaXMuVG8sIFwiL1wiLCBcImdvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlXCIsIFwiL1wiLCBlLCBcIi9jaGFubmVsXCIgXSwgcyA9IGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQoKSwgbyA9IGdldFN0YXRFdmVudFRhcmdldCgpLCBfID0ge1xuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGJhY2tlbmQgc3RpY2tpbmVzcywgcm91dGluZyBiZWhhdmlvciBpcyBiYXNlZCBvbiB0aGlzXG4gICAgICAgICAgICAvLyBwYXJhbWV0ZXIuXG4gICAgICAgICAgICBodHRwU2Vzc2lvbklkUGFyYW06IFwiZ3Nlc3Npb25pZFwiLFxuICAgICAgICAgICAgaW5pdE1lc3NhZ2VIZWFkZXJzOiB7fSxcbiAgICAgICAgICAgIG1lc3NhZ2VVcmxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHBhcmFtIGlzIHVzZWQgdG8gaW1wcm92ZSByb3V0aW5nIGFuZCBwcm9qZWN0IGlzb2xhdGlvbiBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyBiYWNrZW5kIGFuZCBtdXN0IGJlIGluY2x1ZGVkIGluIGV2ZXJ5IHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IGBwcm9qZWN0cy8ke3RoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3RoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZX1gXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VuZFJhd0pzb246ICEwLFxuICAgICAgICAgICAgc3VwcG9ydHNDcm9zc0RvbWFpblhocjogITAsXG4gICAgICAgICAgICBpbnRlcm5hbENoYW5uZWxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgZGVmYXVsdCB0aW1lb3V0IChyYW5kb21pemVkIGJldHdlZW4gMTAtMjAgc2Vjb25kcykgc2luY2VcbiAgICAgICAgICAgICAgICAvLyBhIGxhcmdlIHdyaXRlIGJhdGNoIG9uIGEgc2xvdyBpbnRlcm5ldCBjb25uZWN0aW9uIG1heSB0YWtlIGEgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIHRpbWUgdG8gc2VuZCB0byB0aGUgYmFja2VuZC4gUmF0aGVyIHRoYW4gaGF2ZSBXZWJDaGFubmVsIGltcG9zZSBhXG4gICAgICAgICAgICAgICAgLy8gdGlnaHQgdGltZW91dCB3aGljaCBjb3VsZCBsZWFkIHRvIGluZmluaXRlIHRpbWVvdXRzIGFuZCByZXRyaWVzLCB3ZVxuICAgICAgICAgICAgICAgIC8vIHNldCBpdCB2ZXJ5IGxhcmdlICg1LTEwIG1pbnV0ZXMpIGFuZCByZWx5IG9uIHRoZSBicm93c2VyJ3MgYnVpbHRpblxuICAgICAgICAgICAgICAgIC8vIHRpbWVvdXRzIHRvIGtpY2sgaW4gaWYgdGhlIHJlcXVlc3QgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgICAgICBmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXM6IDZlNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcmNlTG9uZ1BvbGxpbmc6IHRoaXMuZm9yY2VMb25nUG9sbGluZyxcbiAgICAgICAgICAgIGRldGVjdEJ1ZmZlcmluZ1Byb3h5OiB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZ1xuICAgICAgICB9LCBhID0gdGhpcy5sb25nUG9sbGluZ09wdGlvbnMudGltZW91dFNlY29uZHM7XG4gICAgICAgIHZvaWQgMCAhPT0gYSAmJiAoXy5sb25nUG9sbGluZ1RpbWVvdXQgPSBNYXRoLnJvdW5kKDFlMyAqIGEpKSwgdGhpcy51c2VGZXRjaFN0cmVhbXMgJiYgKF8ueG1sSHR0cEZhY3RvcnkgPSBuZXcgRmV0Y2hYbWxIdHRwRmFjdG9yeSh7fSkpLCBcbiAgICAgICAgdGhpcy5mbyhfLmluaXRNZXNzYWdlSGVhZGVycywgdCwgbiksIFxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGVuY29kZUluaXRNZXNzYWdlSGVhZGVycyBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW4gdGhlIHJlcXVlc3QncyBQT1NUIHBheWxvYWQsXG4gICAgICAgIC8vIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC5cbiAgICAgICAgXy5lbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMgPSAhMDtcbiAgICAgICAgY29uc3QgdSA9IGkuam9pbihcIlwiKTtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKG1lLCBgQ3JlYXRpbmcgUlBDICcke2V9JyBzdHJlYW0gJHtyfTogJHt1fWAsIF8pO1xuICAgICAgICBjb25zdCBjID0gcy5jcmVhdGVXZWJDaGFubmVsKHUsIF8pO1xuICAgICAgICAvLyBXZWJDaGFubmVsIHN1cHBvcnRzIHNlbmRpbmcgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgaGFuZHNoYWtlIC0gc2F2aW5nXG4gICAgICAgIC8vIGEgbmV0d29yayByb3VuZCB0cmlwLiBIb3dldmVyLCBpdCB3aWxsIGhhdmUgdG8gY2FsbCBzZW5kIGluIHRoZSBzYW1lXG4gICAgICAgIC8vIEpTIGV2ZW50IGxvb3AgYXMgb3Blbi4gSW4gb3JkZXIgdG8gZW5mb3JjZSB0aGlzLCB3ZSBkZWxheSBhY3R1YWxseVxuICAgICAgICAvLyBvcGVuaW5nIHRoZSBXZWJDaGFubmVsIHVudGlsIHNlbmQgaXMgY2FsbGVkLiBXaGV0aGVyIHdlIGhhdmUgY2FsbGVkXG4gICAgICAgIC8vIG9wZW4gaXMgdHJhY2tlZCB3aXRoIHRoaXMgdmFyaWFibGUuXG4gICAgICAgICAgICAgICAgbGV0IGwgPSAhMSwgaCA9ICExO1xuICAgICAgICAvLyBBIGZsYWcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHN0cmVhbSB3YXMgY2xvc2VkIChieSB1cyBvciB0aHJvdWdoIGFuXG4gICAgICAgIC8vIGVycm9yL2Nsb3NlIGV2ZW50KSB0byBhdm9pZCBkZWxpdmVyaW5nIG11bHRpcGxlIGNsb3NlIGV2ZW50cyBvciBzZW5kaW5nXG4gICAgICAgIC8vIG9uIGEgY2xvc2VkIHN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbnN0IFAgPSBuZXcgX19QUklWQVRFX1N0cmVhbUJyaWRnZSh7XG4gICAgICAgICAgICBzbzogdCA9PiB7XG4gICAgICAgICAgICAgICAgaCA/IF9fUFJJVkFURV9sb2dEZWJ1ZyhtZSwgYE5vdCBzZW5kaW5nIGJlY2F1c2UgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBpcyBjbG9zZWQ6YCwgdCkgOiAobCB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKG1lLCBgT3BlbmluZyBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydC5gKSwgXG4gICAgICAgICAgICAgICAgYy5vcGVuKCksIGwgPSAhMCksIF9fUFJJVkFURV9sb2dEZWJ1ZyhtZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gc2VuZGluZzpgLCB0KSwgXG4gICAgICAgICAgICAgICAgYy5zZW5kKHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbzogKCkgPT4gYy5jbG9zZSgpXG4gICAgICAgIH0pLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4gPSAoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBjbG9zdXJlIHR5cGluZyBzZWVtcyBicm9rZW4gYmVjYXVzZSBXZWJDaGFubmVsIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBpbXBsZW1lbnQgZ29vZy5ldmVudHMuTGlzdGVuYWJsZVxuICAgICAgICAgICAgZS5saXN0ZW4odCwgKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG4oZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBDbG9zdXJlIGV2ZW50cyBhcmUgZ3VhcmRlZCBhbmQgZXhjZXB0aW9ucyBhcmUgc3dhbGxvd2VkLCBzbyBjYXRjaCBhbnlcbiAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCByZXRocm93IHVzaW5nIGEgc2V0VGltZW91dCBzbyB0aGV5IGJlY29tZSB2aXNpYmxlIGFnYWluLlxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbnR1YWxseSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGdvIGF3YXkgaWYgd2UgYXJlIGNvbmZpZGVudFxuICAgICAgICAvLyBlbm91Z2ggdGhlIGNvZGUgaXMgZXhjZXB0aW9uIGZyZWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5PUEVOLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCBfX1BSSVZBVEVfbG9nRGVidWcobWUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydCBvcGVuZWQuYCk7XG4gICAgICAgIH0pKSwgX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBfX1BSSVZBVEVfbG9nRGVidWcobWUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydCBjbG9zZWRgKSwgXG4gICAgICAgICAgICBQLlBvKCkpO1xuICAgICAgICB9KSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5FUlJPUiwgKHQgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBfX1BSSVZBVEVfbG9nV2FybihtZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gdHJhbnNwb3J0IGVycm9yZWQ6YCwgdCksIFxuICAgICAgICAgICAgUC5QbyhuZXcgRmlyZXN0b3JlRXJyb3Iodi5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4oYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuTUVTU0FHRSwgKHQgPT4ge1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICBpZiAoIWgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC5kYXRhWzBdO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhaSk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGksIG8gPSBzLmVycm9yIHx8IChudWxsID09PSAobiA9IHNbMF0pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uZXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmIChvKSB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhtZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gcmVjZWl2ZWQgZXJyb3I6YCwgbyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX21hcENvZGVGcm9tUnBjU3RhdHVzKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdWVbZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0KSByZXR1cm4gX19QUklWQVRFX21hcENvZGVGcm9tUnBjQ29kZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgfSh0KSwgaSA9IG8ubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gdi5JTlRFUk5BTCwgaSA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgdCArIFwiIHdpdGggbWVzc2FnZSBcIiArIG8ubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICBoID0gITAsIFAuUG8obmV3IEZpcmVzdG9yZUVycm9yKG4sIGkpKSwgYy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBfX1BSSVZBVEVfbG9nRGVidWcobWUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHJlY2VpdmVkOmAsIGkpLCBQLklvKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihvLCBFdmVudC5TVEFUX0VWRU5ULCAodCA9PiB7XG4gICAgICAgICAgICB0LnN0YXQgPT09IFN0YXQuUFJPWFkgPyBfX1BSSVZBVEVfbG9nRGVidWcobWUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IGRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eWApIDogdC5zdGF0ID09PSBTdGF0Lk5PUFJPWFkgJiYgX19QUklWQVRFX2xvZ0RlYnVnKG1lLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBkZXRlY3RlZCBubyBidWZmZXJpbmcgcHJveHlgKTtcbiAgICAgICAgfSkpLCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cbiAgICAgICAgICAgIFAuaG8oKTtcbiAgICAgICAgfSksIDApLCBQO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBJbml0aWFsaXplcyB0aGUgV2ViQ2hhbm5lbENvbm5lY3Rpb24gZm9yIHRoZSBicm93c2VyLiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBUaGUgUGxhdGZvcm0ncyAnd2luZG93JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0V2luZG93KCkge1xuICAgIC8vIGB3aW5kb3dgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogbnVsbDtcbn1cblxuLyoqIFRoZSBQbGF0Zm9ybSdzICdkb2N1bWVudCcgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqLyBmdW5jdGlvbiBnZXREb2N1bWVudCgpIHtcbiAgICAvLyBgZG9jdW1lbnRgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IG51bGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUpIHtcbiAgICByZXR1cm4gbmV3IEpzb25Qcm90b1NlcmlhbGl6ZXIoZSwgLyogdXNlUHJvdG8zSnNvbj0gKi8gITApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxuICpcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCByID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuaWkgPSBlLCB0aGlzLnRpbWVySWQgPSB0LCB0aGlzLlNvID0gbiwgdGhpcy5ibyA9IHIsIHRoaXMuRG8gPSBpLCB0aGlzLnZvID0gMCwgXG4gICAgICAgIHRoaXMuQ28gPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLkZvID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy52byA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICBNbygpIHtcbiAgICAgICAgdGhpcy52byA9IHRoaXMuRG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgeG8oZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgdCA9IE1hdGguZmxvb3IodGhpcy52byArIHRoaXMuT28oKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5GbyksIHIgPSBNYXRoLm1heCgwLCB0IC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHIgPiAwICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkV4cG9uZW50aWFsQmFja29mZlwiLCBgQmFja2luZyBvZmYgZm9yICR7cn0gbXMgKGJhc2UgZGVsYXk6ICR7dGhpcy52b30gbXMsIGRlbGF5IHdpdGggaml0dGVyOiAke3R9IG1zLCBsYXN0IGF0dGVtcHQ6ICR7bn0gbXMgYWdvKWApLCBcbiAgICAgICAgdGhpcy5DbyA9IHRoaXMuaWkuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy50aW1lcklkLCByLCAoKCkgPT4gKHRoaXMuRm8gPSBEYXRlLm5vdygpLCBcbiAgICAgICAgZSgpKSkpLCBcbiAgICAgICAgLy8gQXBwbHkgYmFja29mZiBmYWN0b3IgdG8gZGV0ZXJtaW5lIG5leHQgZGVsYXkgYW5kIGVuc3VyZSBpdCBpcyB3aXRoaW5cbiAgICAgICAgLy8gYm91bmRzLlxuICAgICAgICB0aGlzLnZvICo9IHRoaXMuYm8sIHRoaXMudm8gPCB0aGlzLlNvICYmICh0aGlzLnZvID0gdGhpcy5TbyksIHRoaXMudm8gPiB0aGlzLkRvICYmICh0aGlzLnZvID0gdGhpcy5Ebyk7XG4gICAgfVxuICAgIE5vKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLkNvICYmICh0aGlzLkNvLnNraXBEZWxheSgpLCB0aGlzLkNvID0gbnVsbCk7XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5DbyAmJiAodGhpcy5Dby5jYW5jZWwoKSwgdGhpcy5DbyA9IG51bGwpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHJhbmRvbSB2YWx1ZSBpbiB0aGUgcmFuZ2UgWy1jdXJyZW50QmFzZU1zLzIsIGN1cnJlbnRCYXNlTXMvMl0gKi8gICAgT28oKSB7XG4gICAgICAgIHJldHVybiAoTWF0aC5yYW5kb20oKSAtIC41KSAqIHRoaXMudm87XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gaXMgYW4gYWJzdHJhY3QgYmFzZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBzdHJlYW1pbmcgUlBDXG4gKiB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQuIEl0J3MgYnVpbHQgb24gdG9wIG9mIHRoZSBjb25uZWN0aW9ucyBvd24gc3VwcG9ydFxuICogZm9yIHN0cmVhbWluZyBSUENzLCBhbmQgYWRkcyBzZXZlcmFsIGNyaXRpY2FsIGZlYXR1cmVzIGZvciBvdXIgY2xpZW50czpcbiAqXG4gKiAgIC0gRXhwb25lbnRpYWwgYmFja29mZiBvbiBmYWlsdXJlXG4gKiAgIC0gQXV0aGVudGljYXRpb24gdmlhIENyZWRlbnRpYWxzUHJvdmlkZXJcbiAqICAgLSBEaXNwYXRjaGluZyBhbGwgY2FsbGJhY2tzIGludG8gdGhlIHNoYXJlZCB3b3JrZXIgcXVldWVcbiAqICAgLSBDbG9zaW5nIGlkbGUgc3RyZWFtcyBhZnRlciA2MCBzZWNvbmRzIG9mIGluYWN0aXZpdHlcbiAqXG4gKiBTdWJjbGFzc2VzIG9mIFBlcnNpc3RlbnRTdHJlYW0gaW1wbGVtZW50IHNlcmlhbGl6YXRpb24gb2YgbW9kZWxzIHRvIGFuZFxuICogZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgcHJvdG9jb2wgYnVmZmVycyBmb3IgYSBzcGVjaWZpY1xuICogc3RyZWFtaW5nIFJQQy5cbiAqXG4gKiAjIyBTdGFydGluZyBhbmQgU3RvcHBpbmdcbiAqXG4gKiBTdHJlYW1pbmcgUlBDcyBhcmUgc3RhdGVmdWwgYW5kIG5lZWQgdG8gYmUgc3RhcnQoKWVkIGJlZm9yZSBtZXNzYWdlcyBjYW5cbiAqIGJlIHNlbnQgYW5kIHJlY2VpdmVkLiBUaGUgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIG9uT3BlbigpIGZ1bmN0aW9uXG4gKiBvZiB0aGUgbGlzdGVuZXIgb25jZSB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCByZXF1ZXN0cy5cbiAqXG4gKiBTaG91bGQgYSBzdGFydCgpIGZhaWwsIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSByZWdpc3RlcmVkIG9uQ2xvc2UoKVxuICogbGlzdGVuZXIgd2l0aCBhIEZpcmVzdG9yZUVycm9yIGluZGljYXRpbmcgd2hhdCB3ZW50IHdyb25nLlxuICpcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBjYW4gYmUgc3RhcnRlZCBhbmQgc3RvcHBlZCByZXBlYXRlZGx5LlxuICpcbiAqIEdlbmVyaWMgdHlwZXM6XG4gKiAgU2VuZFR5cGU6IFRoZSB0eXBlIG9mIHRoZSBvdXRnb2luZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIFJlY2VpdmVUeXBlOiBUaGUgdHlwZSBvZiB0aGUgaW5jb21pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBMaXN0ZW5lclR5cGU6IFRoZSB0eXBlIG9mIHRoZSBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgY2FsbGJhY2tzXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9QZXJzaXN0ZW50U3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzLCBvLCBfKSB7XG4gICAgICAgIHRoaXMuaWkgPSBlLCB0aGlzLkJvID0gbiwgdGhpcy5MbyA9IHIsIHRoaXMuY29ubmVjdGlvbiA9IGksIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgPSBzLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIgPSBvLCB0aGlzLmxpc3RlbmVyID0gXywgdGhpcy5zdGF0ZSA9IDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2xvc2UgY291bnQgdGhhdCdzIGluY3JlbWVudGVkIGV2ZXJ5IHRpbWUgdGhlIHN0cmVhbSBpcyBjbG9zZWQ7IHVzZWQgYnlcbiAgICAgICAgICogZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlcigpIHRvIGludmFsaWRhdGUgY2FsbGJhY2tzIHRoYXQgaGFwcGVuIGFmdGVyXG4gICAgICAgICAqIGNsb3NlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5rbyA9IDAsIHRoaXMucW8gPSBudWxsLCB0aGlzLlFvID0gbnVsbCwgdGhpcy5zdHJlYW0gPSBudWxsLCB0aGlzLktvID0gbmV3IF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBzdGFydCgpIGhhcyBiZWVuIGNhbGxlZCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnVlXG4gICAgICogaW5kaWNhdGVzIHRoZSBzdHJlYW0gaXMgb3BlbiBvciBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nICh3aGljaFxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxuICAgICAqIGFjdHVhbCBSUEMpLiBVc2UgaXNPcGVuKCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgb3BlbiBhbmQgcmVhZHkgZm9yXG4gICAgICogb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgICRvKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcgKi8gPT09IHRoaXMuc3RhdGUgfHwgNSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLlVvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIFVvKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovID09PSB0aGlzLnN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIFJQQy4gT25seSBhbGxvd2VkIGlmIGlzU3RhcnRlZCgpIHJldHVybnMgZmFsc2UuIFRoZSBzdHJlYW0gaXNcbiAgICAgKiBub3QgaW1tZWRpYXRlbHkgcmVhZHkgZm9yIHVzZTogb25PcGVuKCkgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIFJQQyBpc1xuICAgICAqIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cywgYXQgd2hpY2ggcG9pbnQgaXNPcGVuKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RhcnQgcmV0dXJucywgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICE9PSB0aGlzLnN0YXRlID8gdGhpcy5hdXRoKCkgOiB0aGlzLldvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cbiAgICAgKi8gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy4kbygpICYmIGF3YWl0IHRoaXMuY2xvc2UoMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFmdGVyIGFuIGVycm9yIHRoZSBzdHJlYW0gd2lsbCB1c3VhbGx5IGJhY2sgb2ZmIG9uIHRoZSBuZXh0IGF0dGVtcHQgdG9cbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxuICAgICAqIHNlbmRlciBjYW4gdXNlIHRoaXMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVjZWl2ZXIgc2hvdWxkIG5vdCBiYWNrIG9mZi5cbiAgICAgKlxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xuICAgICAqIGluaGliaXQgYmFja29mZiBpZiByZXF1aXJlZC5cbiAgICAgKi8gICAgR28oKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgdGhpcy5Lby5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGlzIHN0cmVhbSBhcyBpZGxlLiBJZiBubyBmdXJ0aGVyIGFjdGlvbnMgYXJlIHBlcmZvcm1lZCBvbiB0aGVcbiAgICAgKiBzdHJlYW0gZm9yIG9uZSBtaW51dGUsIHRoZSBzdHJlYW0gd2lsbCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0c2VsZiBhbmRcbiAgICAgKiBub3RpZnkgdGhlIHN0cmVhbSdzIG9uQ2xvc2UoKSBoYW5kbGVyIHdpdGggU3RhdHVzLk9LLiBUaGUgc3RyZWFtIHdpbGwgdGhlblxuICAgICAqIGJlIGluIGEgIWlzU3RhcnRlZCgpIHN0YXRlLCByZXF1aXJpbmcgdGhlIGNhbGxlciB0byBzdGFydCB0aGUgc3RyZWFtIGFnYWluXG4gICAgICogYmVmb3JlIGZ1cnRoZXIgdXNlLlxuICAgICAqXG4gICAgICogT25seSBzdHJlYW1zIHRoYXQgYXJlIGluIHN0YXRlICdPcGVuJyBjYW4gYmUgbWFya2VkIGlkbGUsIGFzIGFsbCBvdGhlclxuICAgICAqIHN0YXRlcyBpbXBseSBwZW5kaW5nIG5ldHdvcmsgb3BlcmF0aW9ucy5cbiAgICAgKi8gICAgem8oKSB7XG4gICAgICAgIC8vIFN0YXJ0cyB0aGUgaWRsZSB0aW1lIGlmIHdlIGFyZSBpbiBzdGF0ZSAnT3BlbicgYW5kIGFyZSBub3QgeWV0IGFscmVhZHlcbiAgICAgICAgLy8gcnVubmluZyBhIHRpbWVyIChpbiB3aGljaCBjYXNlIHRoZSBwcmV2aW91cyBpZGxlIHRpbWVvdXQgc3RpbGwgYXBwbGllcykuXG4gICAgICAgIHRoaXMuVW8oKSAmJiBudWxsID09PSB0aGlzLnFvICYmICh0aGlzLnFvID0gdGhpcy5paS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLkJvLCA2ZTQsICgoKSA9PiB0aGlzLmpvKCkpKSk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLiAqLyAgICBIbyhlKSB7XG4gICAgICAgIHRoaXMuSm8oKSwgdGhpcy5zdHJlYW0uc2VuZChlKTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBieSB0aGUgaWRsZSB0aW1lciB3aGVuIHRoZSBzdHJlYW0gc2hvdWxkIGNsb3NlIGR1ZSB0byBpbmFjdGl2aXR5LiAqLyAgICBhc3luYyBqbygpIHtcbiAgICAgICAgaWYgKHRoaXMuVW8oKSkgXG4gICAgICAgIC8vIFdoZW4gdGltaW5nIG91dCBhbiBpZGxlIHN0cmVhbSB0aGVyZSdzIG5vIHJlYXNvbiB0byBmb3JjZSB0aGUgc3RyZWFtIGludG8gYmFja29mZiB3aGVuXG4gICAgICAgIC8vIGl0IHJlc3RhcnRzIHNvIHNldCB0aGUgc3RyZWFtIHN0YXRlIHRvIEluaXRpYWwgaW5zdGVhZCBvZiBFcnJvci5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi8gICAgSm8oKSB7XG4gICAgICAgIHRoaXMucW8gJiYgKHRoaXMucW8uY2FuY2VsKCksIHRoaXMucW8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIENhbmNlbHMgdGhlIGhlYWx0aCBjaGVjayBkZWxheWVkIG9wZXJhdGlvbi4gKi8gICAgWW8oKSB7XG4gICAgICAgIHRoaXMuUW8gJiYgKHRoaXMuUW8uY2FuY2VsKCksIHRoaXMuUW8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XG4gICAgICpcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSAtIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cbiAgICAgKi8gICAgYXN5bmMgY2xvc2UoZSwgdCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cbiAgICAgICAgdGhpcy5KbygpLCB0aGlzLllvKCksIHRoaXMuS28uY2FuY2VsKCksIFxuICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxuICAgICAgICB0aGlzLmtvKyssIDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICE9PSBlID8gXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gaW50ZW50aW9uYWwgY2xvc2UgZW5zdXJlIHdlIGRvbid0IGRlbGF5IG91ciBuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdC5cbiAgICAgICAgdGhpcy5Lby5yZXNldCgpIDogdCAmJiB0LmNvZGUgPT09IHYuUkVTT1VSQ0VfRVhIQVVTVEVEID8gKFxuICAgICAgICAvLyBMb2cgdGhlIGVycm9yLiAoUHJvYmFibHkgZWl0aGVyICdxdW90YSBleGNlZWRlZCcgb3IgJ21heCBxdWV1ZSBsZW5ndGggcmVhY2hlZCcuKVxuICAgICAgICBfX1BSSVZBVEVfbG9nRXJyb3IodC50b1N0cmluZygpKSwgX19QUklWQVRFX2xvZ0Vycm9yKFwiVXNpbmcgbWF4aW11bSBiYWNrb2ZmIGRlbGF5IHRvIHByZXZlbnQgb3ZlcmxvYWRpbmcgdGhlIGJhY2tlbmQuXCIpLCBcbiAgICAgICAgdGhpcy5Lby5NbygpKSA6IHQgJiYgdC5jb2RlID09PSB2LlVOQVVUSEVOVElDQVRFRCAmJiAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovICE9PSB0aGlzLnN0YXRlICYmIChcbiAgICAgICAgLy8gXCJ1bmF1dGhlbnRpY2F0ZWRcIiBlcnJvciBtZWFucyB0aGUgdG9rZW4gd2FzIHJlamVjdGVkLiBUaGlzIHNob3VsZCByYXJlbHlcbiAgICAgICAgLy8gaGFwcGVuIHNpbmNlIGJvdGggQXV0aCBhbmQgQXBwQ2hlY2sgZW5zdXJlIGEgc3VmZmljaWVudCBUVEwgd2hlbiB3ZVxuICAgICAgICAvLyByZXF1ZXN0IGEgdG9rZW4uIElmIGEgdXNlciBtYW51YWxseSByZXNldHMgdGhlaXIgc3lzdGVtIGNsb2NrIHRoaXMgY2FuXG4gICAgICAgIC8vIGZhaWwsIGhvd2V2ZXIuIEluIHRoaXMgY2FzZSwgd2Ugc2hvdWxkIGdldCBhIENvZGUuVU5BVVRIRU5USUNBVEVEIGVycm9yXG4gICAgICAgIC8vIGJlZm9yZSB3ZSByZWNlaXZlZCB0aGUgZmlyc3QgbWVzc2FnZSBhbmQgd2UgbmVlZCB0byBpbnZhbGlkYXRlIHRoZSB0b2tlblxuICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCB3ZSBmZXRjaCBhIG5ldyB0b2tlbi5cbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCkpLCBcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGJlY2F1c2Ugd2UgYXJlIG5vIGxvbmdlciBpbnRlcmVzdGVkIGluIGV2ZW50cy5cbiAgICAgICAgbnVsbCAhPT0gdGhpcy5zdHJlYW0gJiYgKHRoaXMuWm8oKSwgdGhpcy5zdHJlYW0uY2xvc2UoKSwgdGhpcy5zdHJlYW0gPSBudWxsKSwgXG4gICAgICAgIC8vIFRoaXMgc3RhdGUgbXVzdCBiZSBhc3NpZ25lZCBiZWZvcmUgY2FsbGluZyBvbkNsb3NlKCkgdG8gYWxsb3cgdGhlIGNhbGxiYWNrIHRvXG4gICAgICAgIC8vIGluaGliaXQgYmFja29mZiBvciBvdGhlcndpc2UgbWFuaXB1bGF0ZSB0aGUgc3RhdGUgaW4gaXRzIG5vbi1zdGFydGVkIHN0YXRlLlxuICAgICAgICB0aGlzLnN0YXRlID0gZSwgXG4gICAgICAgIC8vIE5vdGlmeSB0aGUgbGlzdGVuZXIgdGhhdCB0aGUgc3RyZWFtIGNsb3NlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5saXN0ZW5lci51byh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuIGJlIG92ZXJyaWRkZW4gdG8gcGVyZm9ybSBhZGRpdGlvbmFsIGNsZWFudXAgYmVmb3JlIHRoZSBzdHJlYW0gaXMgY2xvc2VkLlxuICAgICAqIENhbGxpbmcgc3VwZXIudGVhckRvd24oKSBpcyBub3QgcmVxdWlyZWQuXG4gICAgICovICAgIFpvKCkge31cbiAgICBhdXRoKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcgKi87XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlhvKHRoaXMua28pLCB0ID0gdGhpcy5rbztcbiAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBKdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkLCBidXQgc2VlIFRPRE8gYmVsb3cuXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCkgXSkudGhlbigoKFtlLCBuXSkgPT4ge1xuICAgICAgICAgICAgLy8gU3RyZWFtIGNhbiBiZSBzdG9wcGVkIHdoaWxlIHdhaXRpbmcgZm9yIGF1dGhlbnRpY2F0aW9uLlxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBXZSByZWFsbHkgc2hvdWxkIGp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWRcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgdGhpcyBkaXNwYXRjaCBvbnRvIHRoZSBxdWV1ZSwgYnV0IHRoYXQgb3BlbmVkIGEgc3BlYyB0ZXN0IGNhblxuICAgICAgICAgICAgLy8gb2Ygd29ybXMgdGhhdCBJIGRvbid0IHdhbnQgdG8gZGVhbCB3aXRoIGluIHRoaXMgUFIuXG4gICAgICAgICAgICB0aGlzLmtvID09PSB0ICYmIFxuICAgICAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIHNjaGVkdWxlIHRoZSBjYWxsYmFjayBvbiB0aGUgQXN5bmNRdWV1ZS5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBmb2xsb3dpbmcgY2FsbHMgYXJlIHNhZmUgdG8gYmUgY2FsbGVkIG91dHNpZGUgdGhlXG4gICAgICAgICAgICAvLyBBc3luY1F1ZXVlIHNpbmNlIHRoZXkgZG9uJ3QgY2hhaW4gYXN5bmNocm9ub3VzIGNhbGxzXG4gICAgICAgICAgICB0aGlzLmVfKGUsIG4pO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgZSgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRmlyZXN0b3JlRXJyb3Iodi5VTktOT1dOLCBcIkZldGNoaW5nIGF1dGggdG9rZW4gZmFpbGVkOiBcIiArIHQubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudF8oZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZV8oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Ybyh0aGlzLmtvKTtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLm5fKGUsIHQpLCB0aGlzLnN0cmVhbS5fbygoKCkgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gKHRoaXMuc3RhdGUgPSAyIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuICovICwgdGhpcy5RbyA9IHRoaXMuaWkuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5MbywgMWU0LCAoKCkgPT4gKHRoaXMuVW8oKSAmJiAodGhpcy5zdGF0ZSA9IDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8pLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpLCB0aGlzLmxpc3RlbmVyLl9vKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0udW8oKGUgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy50XyhlKSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgoZSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLm9uTWVzc2FnZShlKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFdvKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiAqLyAsIHRoaXMuS28ueG8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RzXG4gICAgdF8oZSkge1xuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlIHN0cmVhbSBjb3VsZCBjbG9zZSBjbGVhbmx5LCBob3dldmVyLCBpbiBvdXIgY3VycmVudCBtb2RlbFxuICAgICAgICAvLyB3ZSBuZXZlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVjYXVzZSBpZiB3ZSBzdG9wIGEgc3RyZWFtIG91cnNlbHZlcyxcbiAgICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIG5ldmVyIGJlIGNhbGxlZC4gVG8gcHJldmVudCBjYXNlcyB3aGVyZSB3ZSByZXRyeVxuICAgICAgICAvLyB3aXRob3V0IGEgYmFja29mZiBhY2NpZGVudGFsbHksIHdlIHNldCB0aGUgc3RyZWFtIHRvIGVycm9yIGluIGFsbCBjYXNlcy5cbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlBlcnNpc3RlbnRTdHJlYW1cIiwgYGNsb3NlIHdpdGggZXJyb3I6ICR7ZX1gKSwgdGhpcy5zdHJlYW0gPSBudWxsLCBcbiAgICAgICAgdGhpcy5jbG9zZSg0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBYbyhlKSB7XG4gICAgICAgIHJldHVybiB0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaWkuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5rbyA9PT0gZSA/IHQoKSA6IChfX1BSSVZBVEVfbG9nRGVidWcoXCJQZXJzaXN0ZW50U3RyZWFtXCIsIFwic3RyZWFtIGNhbGxiYWNrIHNraXBwZWQgYnkgZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlci5cIiksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIExpc3RlbiBSUEMuXG4gKlxuICogT25jZSB0aGUgTGlzdGVuIHN0cmVhbSBoYXMgY2FsbGVkIHRoZSBvbk9wZW4oKSBsaXN0ZW5lciwgYW55IG51bWJlciBvZlxuICogbGlzdGVuKCkgYW5kIHVubGlzdGVuKCkgY2FsbHMgY2FuIGJlIG1hZGUgdG8gY29udHJvbCB3aGF0IGNoYW5nZXMgd2lsbCBiZVxuICogc2VudCBmcm9tIHRoZSBzZXJ2ZXIgZm9yIExpc3RlblJlc3BvbnNlcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUGVyc2lzdGVudExpc3RlblN0cmVhbSBleHRlbmRzIF9fUFJJVkFURV9QZXJzaXN0ZW50U3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgIHN1cGVyKGUsIFwibGlzdGVuX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBUaW1lcklkLkxpc3RlblN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJsaXN0ZW5fc3RyZWFtX2lkbGVcIiAvKiBUaW1lcklkLkxpc3RlblN0cmVhbUlkbGUgKi8gLCBcImhlYWx0aF9jaGVja190aW1lb3V0XCIgLyogVGltZXJJZC5IZWFsdGhDaGVja1RpbWVvdXQgKi8gLCB0LCBuLCByLCBzKSwgXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGk7XG4gICAgfVxuICAgIG5fKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi53byhcIkxpc3RlblwiLCBlLCB0KTtcbiAgICB9XG4gICAgb25NZXNzYWdlKGUpIHtcbiAgICAgICAgLy8gQSBzdWNjZXNzZnVsIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeVxuICAgICAgICB0aGlzLktvLnJlc2V0KCk7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbVdhdGNoQ2hhbmdlKHRoaXMuc2VyaWFsaXplciwgZSksIG4gPSBmdW5jdGlvbiBfX1BSSVZBVEVfdmVyc2lvbkZyb21MaXN0ZW5SZXNwb25zZShlKSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXG4gICAgICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcbiAgICAgICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXG4gICAgICAgICAgICBpZiAoIShcInRhcmdldENoYW5nZVwiIGluIGUpKSByZXR1cm4gU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgICAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAgICAgcmV0dXJuIHQudGFyZ2V0SWRzICYmIHQudGFyZ2V0SWRzLmxlbmd0aCA/IFNuYXBzaG90VmVyc2lvbi5taW4oKSA6IHQucmVhZFRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5yZWFkVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgICAgIH0oZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLnJfKHQsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIGdpdmVuIHRhcmdldC4gSWYgdGhlIHRhcmdldFxuICAgICAqIGluY2x1ZGVzIGEgcmVzdW1lVG9rZW4gaXQgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVxdWVzdC4gUmVzdWx0cyB0aGF0XG4gICAgICogYWZmZWN0IHRoZSB0YXJnZXQgd2lsbCBiZSBzdHJlYW1lZCBiYWNrIGFzIFdhdGNoQ2hhbmdlIG1lc3NhZ2VzIHRoYXRcbiAgICAgKiByZWZlcmVuY2UgdGhlIHRhcmdldElkLlxuICAgICAqLyAgICBpXyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IF9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZCh0aGlzLnNlcmlhbGl6ZXIpLCB0LmFkZFRhcmdldCA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b1RhcmdldChlLCB0KSB7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LnRhcmdldDtcbiAgICAgICAgICAgIGlmIChuID0gX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQocikgPyB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBfX1BSSVZBVEVfdG9Eb2N1bWVudHNUYXJnZXQoZSwgcilcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IF9fUFJJVkFURV90b1F1ZXJ5VGFyZ2V0KGUsIHIpXG4gICAgICAgICAgICB9LCBuLnRhcmdldElkID0gdC50YXJnZXRJZCwgdC5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgbi5yZXN1bWVUb2tlbiA9IF9fUFJJVkFURV90b0J5dGVzKGUsIHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQuZXhwZWN0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gciAmJiAobi5leHBlY3RlZENvdW50ID0gcik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhTbmFwc2hvdFZlcnNpb24ubWluKCkpID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8od3VhbmR5KTogQ29uc2lkZXIgcmVtb3ZpbmcgYWJvdmUgY2hlY2sgYmVjYXVzZSBpdCBpcyBtb3N0IGxpa2VseSB0cnVlLlxuICAgICAgICAgICAgICAgIC8vIFJpZ2h0IG5vdywgbWFueSB0ZXN0cyBkZXBlbmQgb24gdGhpcyBiZWhhdmlvdXIgdGhvdWdoIChsZWF2aW5nIG1pbigpIG91dFxuICAgICAgICAgICAgICAgIC8vIG9mIHNlcmlhbGl6YXRpb24pLlxuICAgICAgICAgICAgICAgIG4ucmVhZFRpbWUgPSB0b1RpbWVzdGFtcChlLCB0LnNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3RvSW50MzJQcm90byhlLCB0LmV4cGVjdGVkQ291bnQpO1xuICAgICAgICAgICAgICAgIG51bGwgIT09IHIgJiYgKG4uZXhwZWN0ZWRDb3VudCA9IHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV90b0xpc3RlblJlcXVlc3RMYWJlbHModGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgbiAmJiAodC5sYWJlbHMgPSBuKSwgdGhpcy5Ibyh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5yZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGggdGhlXG4gICAgICogZ2l2ZW4gdGFyZ2V0SWQuXG4gICAgICovICAgIHNfKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgICB0LmRhdGFiYXNlID0gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKHRoaXMuc2VyaWFsaXplciksIHQucmVtb3ZlVGFyZ2V0ID0gZSwgXG4gICAgICAgIHRoaXMuSG8odCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgU3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgV3JpdGUgUlBDLlxuICpcbiAqIFRoZSBXcml0ZSBSUEMgcmVxdWlyZXMgdGhlIGNhbGxlciB0byBtYWludGFpbiBzcGVjaWFsIHN0cmVhbVRva2VuXG4gKiBzdGF0ZSBpbiBiZXR3ZWVuIGNhbGxzLCB0byBoZWxwIHRoZSBzZXJ2ZXIgdW5kZXJzdGFuZCB3aGljaCByZXNwb25zZXMgdGhlXG4gKiBjbGllbnQgaGFzIHByb2Nlc3NlZCBieSB0aGUgdGltZSB0aGUgbmV4dCByZXF1ZXN0IGlzIG1hZGUuIEV2ZXJ5IHJlc3BvbnNlXG4gKiB3aWxsIGNvbnRhaW4gYSBzdHJlYW1Ub2tlbjsgdGhpcyB2YWx1ZSBtdXN0IGJlIHBhc3NlZCB0byB0aGUgbmV4dFxuICogcmVxdWVzdC5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIHN0YXJ0KCkgb24gdGhpcyBzdHJlYW0sIHRoZSBuZXh0IHJlcXVlc3QgbXVzdCBiZSBhIGhhbmRzaGFrZSxcbiAqIGNvbnRhaW5pbmcgd2hhdGV2ZXIgc3RyZWFtVG9rZW4gaXMgb24gaGFuZC4gT25jZSBhIHJlc3BvbnNlIHRvIHRoaXNcbiAqIHJlcXVlc3QgaXMgcmVjZWl2ZWQsIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBtYXkgYmUgc3VibWl0dGVkLiBXaGVuXG4gKiBzdWJtaXR0aW5nIG11bHRpcGxlIGJhdGNoZXMgb2YgbXV0YXRpb25zIGF0IHRoZSBzYW1lIHRpbWUsIGl0J3NcbiAqIG9rYXkgdG8gdXNlIHRoZSBzYW1lIHN0cmVhbVRva2VuIGZvciB0aGUgY2FsbHMgdG8gd3JpdGVNdXRhdGlvbnMuXG4gKlxuICogVE9ETyhiLzMzMjcxMjM1KTogVXNlIHByb3RvIHR5cGVzXG4gKi8gY2xhc3MgX19QUklWQVRFX1BlcnNpc3RlbnRXcml0ZVN0cmVhbSBleHRlbmRzIF9fUFJJVkFURV9QZXJzaXN0ZW50U3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgIHN1cGVyKGUsIFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFRpbWVySWQuV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwid3JpdGVfc3RyZWFtX2lkbGVcIiAvKiBUaW1lcklkLldyaXRlU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBUaW1lcklkLkhlYWx0aENoZWNrVGltZW91dCAqLyAsIHQsIG4sIHIsIHMpLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gaSwgdGhpcy5vXyA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hldGhlciBvciBub3QgYSBoYW5kc2hha2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGV4Y2hhbmdlZCBhbmRcbiAgICAgKiB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCBtdXRhdGlvbnMuXG4gICAgICovICAgIGdldCBfXygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub187XG4gICAgfVxuICAgIC8vIE92ZXJyaWRlIG9mIFBlcnNpc3RlbnRTdHJlYW0uc3RhcnRcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5vXyA9ICExLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHZvaWQgMCwgc3VwZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgWm8oKSB7XG4gICAgICAgIHRoaXMub18gJiYgdGhpcy5hXyhbXSk7XG4gICAgfVxuICAgIG5fKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi53byhcIldyaXRlXCIsIGUsIHQpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoZSkge1xuICAgICAgICBpZiAoXG4gICAgICAgIC8vIEFsd2F5cyBjYXB0dXJlIHRoZSBsYXN0IHN0cmVhbSB0b2tlbi5cbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoISFlLnN0cmVhbVRva2VuKSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBlLnN0cmVhbVRva2VuLCB0aGlzLm9fKSB7XG4gICAgICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgZmlyc3Qgd3JpdGUgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5LFxuICAgICAgICAgICAgLy8gTm90ZSwgdGhhdCB3ZSBjb3VsZCBjb25zaWRlciBhIHN1Y2Nlc3NmdWwgaGFuZHNoYWtlIGhlYWx0aHksIGhvd2V2ZXIsXG4gICAgICAgICAgICAvLyB0aGUgd3JpdGUgaXRzZWxmIG1pZ2h0IGJlIGNhdXNpbmcgYW4gZXJyb3Igd2Ugd2FudCB0byBiYWNrIG9mZiBmcm9tLlxuICAgICAgICAgICAgdGhpcy5Lby5yZXNldCgpO1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHRzKGUud3JpdGVSZXN1bHRzLCBlLmNvbW1pdFRpbWUpLCBuID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKGUuY29tbWl0VGltZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci51XyhuLCB0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCFlLndyaXRlUmVzdWx0cyB8fCAwID09PSBlLndyaXRlUmVzdWx0cy5sZW5ndGgpLCB0aGlzLm9fID0gITAsIFxuICAgICAgICB0aGlzLmxpc3RlbmVyLmNfKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGFuIGluaXRpYWwgc3RyZWFtVG9rZW4gdG8gdGhlIHNlcnZlciwgcGVyZm9ybWluZyB0aGUgaGFuZHNoYWtlXG4gICAgICogcmVxdWlyZWQgdG8gbWFrZSB0aGUgU3RyZWFtaW5nV3JpdGUgUlBDIHdvcmsuIFN1YnNlcXVlbnRcbiAgICAgKiBjYWxscyBzaG91bGQgd2FpdCB1bnRpbCBvbkhhbmRzaGFrZUNvbXBsZXRlIHdhcyBjYWxsZWQuXG4gICAgICovICAgIGxfKCkge1xuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IFN1cHBvcnQgc3RyZWFtIHJlc3VtcHRpb24uIFdlIGludGVudGlvbmFsbHkgZG8gbm90IHNldCB0aGVcbiAgICAgICAgLy8gc3RyZWFtIHRva2VuIG9uIHRoZSBoYW5kc2hha2UsIGlnbm9yaW5nIGFueSBzdHJlYW0gdG9rZW4gd2UgbWlnaHQgaGF2ZS5cbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKHRoaXMuc2VyaWFsaXplciksIHRoaXMuSG8oZSk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovICAgIGFfKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcbiAgICAgICAgICAgIHdyaXRlczogZS5tYXAoKGUgPT4gdG9NdXRhdGlvbih0aGlzLnNlcmlhbGl6ZXIsIGUpKSlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5Ibyh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERhdGFzdG9yZSBhbmQgaXRzIHJlbGF0ZWQgbWV0aG9kcyBhcmUgYSB3cmFwcGVyIGFyb3VuZCB0aGUgZXh0ZXJuYWwgR29vZ2xlXG4gKiBDbG91ZCBEYXRhc3RvcmUgZ3JwYyBBUEksIHdoaWNoIHByb3ZpZGVzIGFuIGludGVyZmFjZSB0aGF0IGlzIG1vcmUgY29udmVuaWVudFxuICogZm9yIHRoZSByZXN0IG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZSB0byBjb25zdW1lLlxuICovXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIERhdGFzdG9yZSB0aGF0IGV4cG9zZXMgYWRkaXRpb25hbCBzdGF0ZSBmb3IgaW50ZXJuYWxcbiAqIGNvbnN1bXB0aW9uLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfRGF0YXN0b3JlSW1wbCBleHRlbmRzIGNsYXNzIERhdGFzdG9yZSB7fSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmF1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IHQsIHRoaXMuY29ubmVjdGlvbiA9IG4sIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSByLCB0aGlzLmhfID0gITE7XG4gICAgfVxuICAgIFBfKCkge1xuICAgICAgICBpZiAodGhpcy5oXykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIFZvKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUF8oKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3IsIGldKSA9PiB0aGlzLmNvbm5lY3Rpb24uVm8oZSwgdCwgbiwgciwgaSkpKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gZS5uYW1lID8gKGUuY29kZSA9PT0gdi5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIGUpIDogbmV3IEZpcmVzdG9yZUVycm9yKHYuVU5LTk9XTiwgZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKiogSW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDIHdpdGggc3RyZWFtZWQgcmVzdWx0cyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgeW8oZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5QXygpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbaSwgc10pID0+IHRoaXMuY29ubmVjdGlvbi55byhlLCB0LCBuLCBpLCBzLCByKSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSBlLm5hbWUgPyAoZS5jb2RlID09PSB2LlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgZSkgOiBuZXcgRmlyZXN0b3JlRXJyb3Iodi5VTktOT1dOLCBlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5oXyA9ICEwO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbnZva2VSdW5BZ2dyZWdhdGlvblF1ZXJ5UnBjKGUsIHQsIG4pIHtcbiAgICB2YXIgcjtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwge3JlcXVlc3Q6IHMsIElfOiBvfSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b1J1bkFnZ3JlZ2F0aW9uUXVlcnlSZXF1ZXN0KGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV90b1F1ZXJ5VGFyZ2V0KGUsIHQpLCBpID0ge30sIHMgPSBbXTtcbiAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIC8vIE1hcCBhbGwgY2xpZW50LXNpZGUgYWxpYXNlcyB0byBhIHVuaXF1ZSBzaG9ydC1mb3JtXG4gICAgICAgICAgICAvLyBhbGlhcy4gVGhpcyBhdm9pZHMgaXNzdWVzIHdpdGggY2xpZW50LXNpZGUgYWxpYXNlcyB0aGF0XG4gICAgICAgICAgICAvLyBleGNlZWQgdGhlIDE1MDAtYnl0ZSBzdHJpbmcgc2l6ZSBsaW1pdC5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBcImFnZ3JlZ2F0ZV9cIiArIG8rKztcbiAgICAgICAgICAgIGlbdF0gPSBlLmFsaWFzLCBcImNvdW50XCIgPT09IGUuRWUgPyBzLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiB0LFxuICAgICAgICAgICAgICAgIGNvdW50OiB7fVxuICAgICAgICAgICAgfSkgOiBcImF2Z1wiID09PSBlLkVlID8gcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgICAgICBhdmc6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkUGF0aClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSA6IFwic3VtXCIgPT09IGUuRWUgJiYgcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgICAgICBzdW06IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkUGF0aClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICByZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgc3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRpb25zOiBzLFxuICAgICAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHIuc3RydWN0dXJlZFF1ZXJ5XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IHIucGFyZW50XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSV86IGlcbiAgICAgICAgfTtcbiAgICB9KGkuc2VyaWFsaXplciwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCksIG4pLCBfID0gcy5wYXJlbnQ7XG4gICAgaS5jb25uZWN0aW9uLlJvIHx8IGRlbGV0ZSBzLnBhcmVudDtcbiAgICBjb25zdCBhID0gKGF3YWl0IGkueW8oXCJSdW5BZ2dyZWdhdGlvblF1ZXJ5XCIsIF8sIHMsIC8qZXhwZWN0ZWRSZXNwb25zZUNvdW50PSovIDEpKS5maWx0ZXIoKGUgPT4gISFlLnJlc3VsdCkpO1xuICAgIC8vIE9taXQgUnVuQWdncmVnYXRpb25RdWVyeVJlc3BvbnNlIHRoYXQgb25seSBjb250YWluIHJlYWRUaW1lcy5cbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gYS5sZW5ndGgpO1xuICAgIC8vIFJlbWFwIHRoZSBzaG9ydC1mb3JtIGFsaWFzZXMgdGhhdCB3ZXJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICAgIC8vIHRvIHRoZSBjbGllbnQtc2lkZSBhbGlhc2VzLiBVc2VycyB3aWxsIGFjY2VzcyB0aGUgcmVzdWx0c1xuICAgIC8vIHVzaW5nIHRoZSBjbGllbnQtc2lkZSBhbGlhcy5cbiAgICBjb25zdCB1ID0gbnVsbCA9PT0gKHIgPSBhWzBdLnJlc3VsdCkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5hZ2dyZWdhdGVGaWVsZHM7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHUpLnJlZHVjZSgoKGUsIHQpID0+IChlW29bdF1dID0gdVt0XSwgZSkpLCB7fSk7XG59XG5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9PbmxpbmVTdGF0ZVRyYWNrZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSB0LCBcbiAgICAgICAgLyoqIFRoZSBjdXJyZW50IE9ubGluZVN0YXRlLiAqL1xuICAgICAgICB0aGlzLnN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjb3VudCBvZiBjb25zZWN1dGl2ZSBmYWlsdXJlcyB0byBvcGVuIHRoZSBzdHJlYW0uIElmIGl0IHJlYWNoZXMgdGhlXG4gICAgICAgICAqIG1heGltdW0gZGVmaW5lZCBieSBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTLCB3ZSdsbCBzZXQgdGhlIE9ubGluZVN0YXRlIHRvXG4gICAgICAgICAqIE9mZmxpbmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlRfID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRpbWVyIHRoYXQgZWxhcHNlcyBhZnRlciBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUywgYXQgd2hpY2ggcG9pbnQgd2VcbiAgICAgICAgICogdHJhbnNpdGlvbiBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT25saW5lU3RhdGUuT2ZmbGluZSB3aXRob3V0IHdhaXRpbmdcbiAgICAgICAgICogZm9yIHRoZSBzdHJlYW0gdG8gYWN0dWFsbHkgZmFpbCAoTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB0aW1lcykuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkVfID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBjbGllbnQgc2hvdWxkIGxvZyBhIHdhcm5pbmcgbWVzc2FnZSBpZiBpdCBmYWlscyB0byBjb25uZWN0IHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kIChpbml0aWFsbHkgdHJ1ZSwgY2xlYXJlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgc3RyZWFtLCBvciBpZiB3ZSd2ZVxuICAgICAgICAgKiBsb2dnZWQgdGhlIG1lc3NhZ2UgYWxyZWFkeSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRfID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSBSZW1vdGVTdG9yZSB3aGVuIGEgd2F0Y2ggc3RyZWFtIGlzIHN0YXJ0ZWQgKGluY2x1ZGluZyBvbiBlYWNoXG4gICAgICogYmFja29mZiBhdHRlbXB0KS5cbiAgICAgKlxuICAgICAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGF0dGVtcHQsIGl0IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gYW5kIHN0YXJ0c1xuICAgICAqIHRoZSBvbmxpbmVTdGF0ZVRpbWVyLlxuICAgICAqLyAgICBBXygpIHtcbiAgICAgICAgMCA9PT0gdGhpcy5UXyAmJiAodGhpcy5SXyhcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSwgdGhpcy5FXyA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcIm9ubGluZV9zdGF0ZV90aW1lb3V0XCIgLyogVGltZXJJZC5PbmxpbmVTdGF0ZVRpbWVvdXQgKi8gLCAxZTQsICgoKSA9PiAodGhpcy5FXyA9IG51bGwsIFxuICAgICAgICB0aGlzLlZfKFwiQmFja2VuZCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gMTAgc2Vjb25kcy5cIiksIHRoaXMuUl8oXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgb3VyIE9ubGluZVN0YXRlIGFzIGFwcHJvcHJpYXRlIGFmdGVyIHRoZSB3YXRjaCBzdHJlYW0gcmVwb3J0cyBhXG4gICAgICogZmFpbHVyZS4gVGhlIGZpcnN0IGZhaWx1cmUgbW92ZXMgdXMgdG8gdGhlICdVbmtub3duJyBzdGF0ZS4gV2UgdGhlbiBtYXlcbiAgICAgKiBhbGxvdyBtdWx0aXBsZSBmYWlsdXJlcyAoYmFzZWQgb24gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUykgYmVmb3JlIHdlXG4gICAgICogYWN0dWFsbHkgdHJhbnNpdGlvbiB0byB0aGUgJ09mZmxpbmUnIHN0YXRlLlxuICAgICAqLyAgICBtXyhlKSB7XG4gICAgICAgIFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovID09PSB0aGlzLnN0YXRlID8gdGhpcy5SXyhcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSA6ICh0aGlzLlRfKyssIFxuICAgICAgICB0aGlzLlRfID49IDEgJiYgKHRoaXMuZl8oKSwgdGhpcy5WXyhgQ29ubmVjdGlvbiBmYWlsZWQgMSB0aW1lcy4gTW9zdCByZWNlbnQgZXJyb3I6ICR7ZS50b1N0cmluZygpfWApLCBcbiAgICAgICAgdGhpcy5SXyhcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBsaWNpdGx5IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIHRoZSBzcGVjaWZpZWQgc3RhdGUuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyByZXNldHMgb3VyIHRpbWVycyAvIGZhaWx1cmUgY291bnRlcnMsIGV0Yy4gdXNlZCBieSBvdXJcbiAgICAgKiBPZmZsaW5lIGhldXJpc3RpY3MsIHNvIG11c3Qgbm90IGJlIHVzZWQgaW4gcGxhY2Ugb2ZcbiAgICAgKiBoYW5kbGVXYXRjaFN0cmVhbVN0YXJ0KCkgYW5kIGhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZSgpLlxuICAgICAqLyAgICBzZXQoZSkge1xuICAgICAgICB0aGlzLmZfKCksIHRoaXMuVF8gPSAwLCBcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyA9PT0gZSAmJiAoXG4gICAgICAgIC8vIFdlJ3ZlIGNvbm5lY3RlZCB0byB3YXRjaCBhdCBsZWFzdCBvbmNlLiBEb24ndCB3YXJuIHRoZSBkZXZlbG9wZXJcbiAgICAgICAgLy8gYWJvdXQgYmVpbmcgb2ZmbGluZSBnb2luZyBmb3J3YXJkLlxuICAgICAgICB0aGlzLmRfID0gITEpLCB0aGlzLlJfKGUpO1xuICAgIH1cbiAgICBSXyhlKSB7XG4gICAgICAgIGUgIT09IHRoaXMuc3RhdGUgJiYgKHRoaXMuc3RhdGUgPSBlLCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcihlKSk7XG4gICAgfVxuICAgIFZfKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGBDb3VsZCBub3QgcmVhY2ggQ2xvdWQgRmlyZXN0b3JlIGJhY2tlbmQuICR7ZX1cXG5UaGlzIHR5cGljYWxseSBpbmRpY2F0ZXMgdGhhdCB5b3VyIGRldmljZSBkb2VzIG5vdCBoYXZlIGEgaGVhbHRoeSBJbnRlcm5ldCBjb25uZWN0aW9uIGF0IHRoZSBtb21lbnQuIFRoZSBjbGllbnQgd2lsbCBvcGVyYXRlIGluIG9mZmxpbmUgbW9kZSB1bnRpbCBpdCBpcyBhYmxlIHRvIHN1Y2Nlc3NmdWxseSBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLmA7XG4gICAgICAgIHRoaXMuZF8gPyAoX19QUklWQVRFX2xvZ0Vycm9yKHQpLCB0aGlzLmRfID0gITEpIDogX19QUklWQVRFX2xvZ0RlYnVnKFwiT25saW5lU3RhdGVUcmFja2VyXCIsIHQpO1xuICAgIH1cbiAgICBmXygpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5FXyAmJiAodGhpcy5FXy5jYW5jZWwoKSwgdGhpcy5FXyA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX1JlbW90ZVN0b3JlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIHN0b3JlLCB1c2VkIHRvIGZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGggb3V0Ym91bmQgbXV0YXRpb25zLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgY2xpZW50LXNpZGUgcHJveHkgZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIGJhY2tlbmQuICovXG4gICAgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLmRhdGFzdG9yZSA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMucmVtb3RlU3luY2VyID0ge30sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHVwIHRvIE1BWF9QRU5ESU5HX1dSSVRFUyB3cml0ZXMgdGhhdCB3ZSBoYXZlIGZldGNoZWQgZnJvbSB0aGVcbiAgICAgICAgICogTG9jYWxTdG9yZSB2aWEgZmlsbFdyaXRlUGlwZWxpbmUoKSBhbmQgaGF2ZSBvciB3aWxsIHNlbmQgdG8gdGhlIHdyaXRlXG4gICAgICAgICAqIHN0cmVhbS5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbmV2ZXIgd3JpdGVQaXBlbGluZS5sZW5ndGggPiAwIHRoZSBSZW1vdGVTdG9yZSB3aWxsIGF0dGVtcHQgdG8gc3RhcnQgb3JcbiAgICAgICAgICogcmVzdGFydCB0aGUgd3JpdGUgc3RyZWFtLiBXaGVuIHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQgdGhlIHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICogcGlwZWxpbmUgd2lsbCBiZSBzZW50IGluIG9yZGVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXcml0ZXMgcmVtYWluIGluIHdyaXRlUGlwZWxpbmUgdW50aWwgdGhleSBhcmUgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kXG4gICAgICAgICAqIGFuZCB0aHVzIHdpbGwgYXV0b21hdGljYWxseSBiZSByZS1zZW50IGlmIHRoZSBzdHJlYW0gaXMgaW50ZXJydXB0ZWQgL1xuICAgICAgICAgKiByZXN0YXJ0ZWQgYmVmb3JlIHRoZXkncmUgYWNrbm93bGVkZ2VkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXcml0ZSByZXNwb25zZXMgZnJvbSB0aGUgYmFja2VuZCBhcmUgbGlua2VkIHRvIHRoZWlyIG9yaWdpbmF0aW5nIHJlcXVlc3RcbiAgICAgICAgICogcHVyZWx5IGJhc2VkIG9uIG9yZGVyLCBhbmQgc28gd2UgY2FuIGp1c3Qgc2hpZnQoKSB3cml0ZXMgZnJvbSB0aGUgZnJvbnQgb2ZcbiAgICAgICAgICogdGhlIHdyaXRlUGlwZWxpbmUgYXMgd2UgcmVjZWl2ZSByZXNwb25zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdfID0gW10sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXBwaW5nIG9mIHdhdGNoZWQgdGFyZ2V0cyB0aGF0IHRoZSBjbGllbnQgY2FyZXMgYWJvdXQgdHJhY2tpbmcgYW5kIHRoZVxuICAgICAgICAgKiB1c2VyIGhhcyBleHBsaWNpdGx5IGNhbGxlZCBhICdsaXN0ZW4nIGZvciB0aGlzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgdGFyZ2V0cyBtYXkgb3IgbWF5IG5vdCBoYXZlIGJlZW4gc2VudCB0byBvciBhY2tub3dsZWRnZWQgYnkgdGhlXG4gICAgICAgICAqIHNlcnZlci4gT24gcmUtZXN0YWJsaXNoaW5nIHRoZSBsaXN0ZW4gc3RyZWFtLCB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSBzZW50XG4gICAgICAgICAqIHRvIHRoZSBzZXJ2ZXIuIFRoZSB0YXJnZXRzIHJlbW92ZWQgd2l0aCB1bmxpc3RlbnMgYXJlIHJlbW92ZWQgZWFnZXJseVxuICAgICAgICAgKiB3aXRob3V0IHdhaXRpbmcgZm9yIGNvbmZpcm1hdGlvbiBmcm9tIHRoZSBsaXN0ZW4gc3RyZWFtLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wXyA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBzZXQgb2YgcmVhc29ucyBmb3Igd2h5IHRoZSBSZW1vdGVTdG9yZSBtYXkgYmUgb2ZmbGluZS4gSWYgZW1wdHksIHRoZVxuICAgICAgICAgKiBSZW1vdGVTdG9yZSBtYXkgc3RhcnQgaXRzIG5ldHdvcmsgY29ubmVjdGlvbnMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnlfID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVycyB0aGF0IGdldCBjYWxsZWQgd2hlbiB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBvciBlbmFibGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoZXNlIGZ1bmN0aW9ucyBhcmUgdXNlZCBvbiB0aGUgV2ViIGNsaWVudCB0byBjcmVhdGUgdGhlXG4gICAgICAgICAqIHVuZGVybHlpbmcgc3RyZWFtcyAodG8gc3VwcG9ydCB0cmVlLXNoYWtlYWJsZSBzdHJlYW1zKS4gT24gQW5kcm9pZCBhbmQgaU9TLFxuICAgICAgICAgKiB0aGUgc3RyZWFtcyBhcmUgY3JlYXRlZCBkdXJpbmcgY29uc3RydWN0aW9uIG9mIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53XyA9IFtdLCB0aGlzLlNfID0gaSwgdGhpcy5TXy5ZcygoZSA9PiB7XG4gICAgICAgICAgICBuLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQb3J0aW5nIE5vdGU6IFVubGlrZSBpT1MsIGByZXN0YXJ0TmV0d29yaygpYCBpcyBjYWxsZWQgZXZlbiB3aGVuIHRoZVxuICAgICAgICAgICAgICAgIC8vIG5ldHdvcmsgYmVjb21lcyB1bnJlYWNoYWJsZSBhcyB3ZSBkb24ndCBoYXZlIGFueSBvdGhlciB3YXkgdG8gdGVhclxuICAgICAgICAgICAgICAgIC8vIGRvd24gb3VyIHN0cmVhbXMuXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2NhblVzZU5ldHdvcmsodGhpcykgJiYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVzdGFydE5ldHdvcmsoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgICAgICAgICAgdC55Xy5hZGQoNCAvKiBPZmZsaW5lQ2F1c2UuQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwodCksIFxuICAgICAgICAgICAgICAgICAgICB0LmJfLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSwgdC55Xy5kZWxldGUoNCAvKiBPZmZsaW5lQ2F1c2UuQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwodCk7XG4gICAgICAgICAgICAgICAgfSh0aGlzKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgdGhpcy5iXyA9IG5ldyBfX1BSSVZBVEVfT25saW5lU3RhdGVUcmFja2VyKG4sIHIpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChlKSB7XG4gICAgaWYgKF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpKSBmb3IgKGNvbnN0IHQgb2YgZS53XykgYXdhaXQgdCgvKiBlbmFibGVkPSAqLyAhMCk7XG59XG5cbi8qKlxuICogVGVtcG9yYXJpbHkgZGlzYWJsZXMgdGhlIG5ldHdvcmsuIFRoZSBuZXR3b3JrIGNhbiBiZSByZS1lbmFibGVkIHVzaW5nXG4gKiBlbmFibGVOZXR3b3JrKCkuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwoZSkge1xuICAgIGZvciAoY29uc3QgdCBvZiBlLndfKSBhd2FpdCB0KC8qIGVuYWJsZWQ9ICovICExKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbmV3IGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldC4gVXNlcyByZXN1bWUgdG9rZW4gaWYgcHJvdmlkZWQuIEl0XG4gKiBpcyBhIG5vLW9wIGlmIHRoZSB0YXJnZXQgb2YgZ2l2ZW4gYFRhcmdldERhdGFgIGlzIGFscmVhZHkgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbi5wXy5oYXModC50YXJnZXRJZCkgfHwgKFxuICAgIC8vIE1hcmsgdGhpcyBhcyBzb21ldGhpbmcgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbGlzdGVuaW5nIGZvci5cbiAgICBuLnBfLnNldCh0LnRhcmdldElkLCB0KSwgX19QUklWQVRFX3Nob3VsZFN0YXJ0V2F0Y2hTdHJlYW0obikgPyBcbiAgICAvLyBUaGUgbGlzdGVuIHdpbGwgYmUgc2VudCBpbiBvbldhdGNoU3RyZWFtT3BlblxuICAgIF9fUFJJVkFURV9zdGFydFdhdGNoU3RyZWFtKG4pIDogX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKG4pLlVvKCkgJiYgX19QUklWQVRFX3NlbmRXYXRjaFJlcXVlc3QobiwgdCkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXG4gKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKG4pO1xuICAgIG4ucF8uZGVsZXRlKHQpLCByLlVvKCkgJiYgX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdChuLCB0KSwgMCA9PT0gbi5wXy5zaXplICYmIChyLlVvKCkgPyByLnpvKCkgOiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhuKSAmJiBcbiAgICAvLyBSZXZlcnQgdG8gT25saW5lU3RhdGUuVW5rbm93biBpZiB0aGUgd2F0Y2ggc3RyZWFtIGlzIG5vdCBvcGVuIGFuZCB3ZVxuICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XG4gICAgLy8gY29uZmlybSBpZiB0aGUgc3RyZWFtIGlzIGhlYWx0aHkgYW5kIHVwZ3JhZGUgdG8gT25saW5lU3RhdGUuT25saW5lLlxuICAgIG4uYl8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIGFjayB0byBwcm9jZXNzIGFueSBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zZW5kV2F0Y2hSZXF1ZXN0KGUsIHQpIHtcbiAgICBpZiAoZS5EXy5CZSh0LnRhcmdldElkKSwgdC5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwIHx8IHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhTbmFwc2hvdFZlcnNpb24ubWluKCkpID4gMCkge1xuICAgICAgICBjb25zdCBuID0gZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0LnRhcmdldElkKS5zaXplO1xuICAgICAgICB0ID0gdC53aXRoRXhwZWN0ZWRDb3VudChuKTtcbiAgICB9XG4gICAgX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpLmlfKHQpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XG4gKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zZW5kVW53YXRjaFJlcXVlc3QoZSwgdCkge1xuICAgIGUuRF8uQmUodCksIF9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShlKS5zXyh0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0oZSkge1xuICAgIGUuRF8gPSBuZXcgX19QUklWQVRFX1dhdGNoQ2hhbmdlQWdncmVnYXRvcih7XG4gICAgICAgIGdldFJlbW90ZUtleXNGb3JUYXJnZXQ6IHQgPT4gZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KSxcbiAgICAgICAgdXQ6IHQgPT4gZS5wXy5nZXQodCkgfHwgbnVsbCxcbiAgICAgICAgcnQ6ICgpID0+IGUuZGF0YXN0b3JlLnNlcmlhbGl6ZXIuZGF0YWJhc2VJZFxuICAgIH0pLCBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkuc3RhcnQoKSwgZS5iXy5BXygpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgd2F0Y2ggc3RyZWFtIHNob3VsZCBiZSBzdGFydGVkIGJlY2F1c2UgaXQncyBuZWNlc3NhcnlcbiAqIGFuZCBoYXMgbm90IHlldCBiZWVuIHN0YXJ0ZWQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3Nob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSAmJiAhX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpLiRvKCkgJiYgZS5wXy5zaXplID4gMDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NhblVzZU5ldHdvcmsoZSkge1xuICAgIHJldHVybiAwID09PSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLnlfLnNpemU7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZShlKSB7XG4gICAgZS5EXyA9IHZvaWQgMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV2F0Y2hTdHJlYW1PcGVuKGUpIHtcbiAgICBlLnBfLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgIF9fUFJJVkFURV9zZW5kV2F0Y2hSZXF1ZXN0KGUsIHQpO1xuICAgIH0pKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DbG9zZShlLCB0KSB7XG4gICAgX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlKGUpLCBcbiAgICAvLyBJZiB3ZSBzdGlsbCBuZWVkIHRoZSB3YXRjaCBzdHJlYW0sIHJldHJ5IHRoZSBjb25uZWN0aW9uLlxuICAgIF9fUFJJVkFURV9zaG91bGRTdGFydFdhdGNoU3RyZWFtKGUpID8gKGUuYl8ubV8odCksIF9fUFJJVkFURV9zdGFydFdhdGNoU3RyZWFtKGUpKSA6IFxuICAgIC8vIE5vIG5lZWQgdG8gcmVzdGFydCB3YXRjaCBzdHJlYW0gYmVjYXVzZSB0aGVyZSBhcmUgbm8gYWN0aXZlIHRhcmdldHMuXG4gICAgLy8gVGhlIG9ubGluZSBzdGF0ZSBpcyBzZXQgdG8gdW5rbm93biBiZWNhdXNlIHRoZXJlIGlzIG5vIGFjdGl2ZSBhdHRlbXB0XG4gICAgLy8gYXQgZXN0YWJsaXNoaW5nIGEgY29ubmVjdGlvblxuICAgIGUuYl8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNoYW5nZShlLCB0LCBuKSB7XG4gICAgaWYgKFxuICAgIC8vIE1hcmsgdGhlIGNsaWVudCBhcyBvbmxpbmUgc2luY2Ugd2UgZ290IGEgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICBlLmJfLnNldChcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyksIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2UgJiYgMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gPT09IHQuc3RhdGUgJiYgdC5jYXVzZSkgXG4gICAgLy8gVGhlcmUgd2FzIGFuIGVycm9yIG9uIGEgdGFyZ2V0LCBkb24ndCB3YWl0IGZvciBhIGNvbnNpc3RlbnQgc25hcHNob3RcbiAgICAvLyB0byByYWlzZSBldmVudHNcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqIEhhbmRsZXMgYW4gZXJyb3Igb24gYSB0YXJnZXQgKi9cbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2hhbmRsZVRhcmdldEVycm9yKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmNhdXNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIHQudGFyZ2V0SWRzKSBcbiAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgIGUucF8uaGFzKHIpICYmIChhd2FpdCBlLnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4ociwgbiksIGUucF8uZGVsZXRlKHIpLCBlLkRfLnJlbW92ZVRhcmdldChyKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxuICpcbiAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxuICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxuICpcbiAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAqLyAoZSwgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJSZW1vdGVTdG9yZVwiLCBcIkZhaWxlZCB0byByZW1vdmUgdGFyZ2V0cyAlczogJXMgXCIsIHQudGFyZ2V0SWRzLmpvaW4oXCIsXCIpLCBuKSwgXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya1VudGlsUmVjb3ZlcnkoZSwgbik7XG4gICAgfSBlbHNlIGlmICh0IGluc3RhbmNlb2YgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UgPyBlLkRfLldlKHQpIDogdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9FeGlzdGVuY2VGaWx0ZXJDaGFuZ2UgPyBlLkRfLlplKHQpIDogZS5EXy5qZSh0KSwgXG4gICAgIW4uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpKSB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUubG9jYWxTdG9yZSk7XG4gICAgICAgIG4uY29tcGFyZVRvKHQpID49IDAgJiYgXG4gICAgICAgIC8vIFdlIGhhdmUgcmVjZWl2ZWQgYSB0YXJnZXQgY2hhbmdlIHdpdGggYSBnbG9iYWwgc25hcHNob3QgaWYgdGhlIHNuYXBzaG90XG4gICAgICAgIC8vIHZlcnNpb24gaXMgbm90IGVxdWFsIHRvIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKlxuICogVGFrZXMgYSBiYXRjaCBvZiBjaGFuZ2VzIGZyb20gdGhlIERhdGFzdG9yZSwgcmVwYWNrYWdlcyB0aGVtIGFzIGFcbiAqIFJlbW90ZUV2ZW50LCBhbmQgcGFzc2VzIHRoYXQgb24gdG8gdGhlIGxpc3RlbmVyLCB3aGljaCBpcyB0eXBpY2FsbHkgdGhlXG4gKiBTeW5jRW5naW5lLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9yYWlzZVdhdGNoU25hcHNob3QoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuRF8uc3QodCk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IGUucF8uZ2V0KHIpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiBlLnBfLnNldChyLCBpLndpdGhSZXN1bWVUb2tlbihuLnJlc3VtZVRva2VuLCB0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLCBcbiAgICAgICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxuICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgbi50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGUucF8uZ2V0KHQpO1xuICAgICAgICAgICAgICAgIGlmICghcikgXG4gICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgcmVzdW1lIHRva2VuIGZvciB0aGUgdGFyZ2V0LCBzaW5jZSB3ZSdyZSBpbiBhIGtub3duIG1pc21hdGNoXG4gICAgICAgICAgICAgICAgLy8gc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucF8uc2V0KHQsIHIud2l0aFJlc3VtZVRva2VuKEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkcsIHIuc25hcHNob3RWZXJzaW9uKSksIFxuICAgICAgICAgICAgICAgIC8vIENhdXNlIGEgaGFyZCByZXNldCBieSB1bndhdGNoaW5nIGFuZCByZXdhdGNoaW5nIGltbWVkaWF0ZWx5LCBidXRcbiAgICAgICAgICAgICAgICAvLyBkZWxpYmVyYXRlbHkgZG9uJ3Qgc2VuZCBhIHJlc3VtZSB0b2tlbiBzbyB0aGF0IHdlIGdldCBhIGZ1bGwgdXBkYXRlLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9zZW5kVW53YXRjaFJlcXVlc3QoZSwgdCk7XG4gICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgdGFyZ2V0IHdlIHNlbmQgYXMgYmVpbmcgb24gYmVoYWxmIG9mIGFuIGV4aXN0ZW5jZSBmaWx0ZXJcbiAgICAgICAgICAgICAgICAvLyBtaXNtYXRjaCwgYnV0IGRvbid0IGFjdHVhbGx5IHJldGFpbiB0aGF0IGluIGxpc3RlblRhcmdldHMuIFRoaXMgZW5zdXJlc1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgZmxhZyB0aGUgZmlyc3QgcmUtbGlzdGVuIHRoaXMgd2F5IHdpdGhvdXQgaW1wYWN0aW5nIGZ1dHVyZVxuICAgICAgICAgICAgICAgIC8vIGxpc3RlbnMgb2YgdGhpcyB0YXJnZXQgKHRoYXQgbWlnaHQgaGFwcGVuIGUuZy4gb24gcmVjb25uZWN0KS5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IFRhcmdldERhdGEoci50YXJnZXQsIHQsIG4sIHIuc2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9zZW5kV2F0Y2hSZXF1ZXN0KGUsIGkpO1xuICAgICAgICAgICAgfSkpLCBlLnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50KG4pO1xuICAgICAgICB9KGUsIG4pO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIHQpLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvdmVyeSBsb2dpYyBmb3IgSW5kZXhlZERCIGVycm9ycyB0aGF0IHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWxcbiAqIGBvcGAgc3VjY2VlZHMuIFJldHJpZXMgYXJlIHNjaGVkdWxlZCB3aXRoIGJhY2tvZmYgdXNpbmdcbiAqIGBlbnF1ZXVlUmV0cnlhYmxlKClgLiBJZiBgb3AoKWAgaXMgbm90IHByb3ZpZGVkLCBJbmRleGVkREIgYWNjZXNzIGlzXG4gKiB2YWxpZGF0ZWQgdmlhIGEgZ2VuZXJpYyBvcGVyYXRpb24uXG4gKlxuICogVGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgYmVmb3JlXG4gKiBhbnkgcmV0cnkgYXR0ZW1wdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIHQsIG4pIHtcbiAgICBpZiAoIV9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IodCkpIHRocm93IHQ7XG4gICAgZS55Xy5hZGQoMSAvKiBPZmZsaW5lQ2F1c2UuSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgLy8gRGlzYWJsZSBuZXR3b3JrIGFuZCByYWlzZSBvZmZsaW5lIHNuYXBzaG90c1xuICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKGUpLCBlLmJfLnNldChcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSwgXG4gICAgbiB8fCAoXG4gICAgLy8gVXNlIGEgc2ltcGxlIHJlYWQgb3BlcmF0aW9uIHRvIGRldGVybWluZSBpZiBJbmRleGVkREIgcmVjb3ZlcmVkLlxuICAgIC8vIElkZWFsbHksIHdlIHdvdWxkIGV4cG9zZSBhIGhlYWx0aCBjaGVjayBkaXJlY3RseSBvbiBTaW1wbGVEYiwgYnV0XG4gICAgLy8gUmVtb3RlU3RvcmUgb25seSBoYXMgYWNjZXNzIHRvIHBlcnNpc3RlbmNlIHRocm91Z2ggTG9jYWxTdG9yZS5cbiAgICBuID0gKCkgPT4gX19QUklWQVRFX2xvY2FsU3RvcmVHZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUubG9jYWxTdG9yZSkpLCBcbiAgICAvLyBQcm9iZSBJbmRleGVkREIgcGVyaW9kaWNhbGx5IGFuZCByZS1lbmFibGUgbmV0d29ya1xuICAgIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiUmV0cnlpbmcgSW5kZXhlZERCIGFjY2Vzc1wiKSwgYXdhaXQgbigpLCBlLnlfLmRlbGV0ZSgxIC8qIE9mZmxpbmVDYXVzZS5JbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChlKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgYG9wYC4gSWYgYG9wYCBmYWlscywgdGFrZXMgdGhlIG5ldHdvcmsgb2ZmbGluZSB1bnRpbCBgb3BgXG4gKiBzdWNjZWVkcy4gUmV0dXJucyBhZnRlciB0aGUgZmlyc3QgYXR0ZW1wdC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZXhlY3V0ZVdpdGhSZWNvdmVyeShlLCB0KSB7XG4gICAgcmV0dXJuIHQoKS5jYXRjaCgobiA9PiBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIG4sIHQpKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIG4gPSBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0odCk7XG4gICAgbGV0IHIgPSB0LmdfLmxlbmd0aCA+IDAgPyB0LmdfW3QuZ18ubGVuZ3RoIC0gMV0uYmF0Y2hJZCA6IC0xO1xuICAgIGZvciAoO19fUFJJVkFURV9jYW5BZGRUb1dyaXRlUGlwZWxpbmUodCk7ICkgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV4dE11dGF0aW9uQmF0Y2godC5sb2NhbFN0b3JlLCByKTtcbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHtcbiAgICAgICAgICAgIDAgPT09IHQuZ18ubGVuZ3RoICYmIG4uem8oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBlLmJhdGNoSWQsIF9fUFJJVkFURV9hZGRUb1dyaXRlUGlwZWxpbmUodCwgZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KHQsIGUpO1xuICAgIH1cbiAgICBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSh0KSAmJiBfX1BSSVZBVEVfc3RhcnRXcml0ZVN0cmVhbSh0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgd2UgY2FuIGFkZCB0byB0aGUgd3JpdGUgcGlwZWxpbmUgKGkuZS4gdGhlIG5ldHdvcmsgaXNcbiAqIGVuYWJsZWQgYW5kIHRoZSB3cml0ZSBwaXBlbGluZSBpcyBub3QgZnVsbCkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NhbkFkZFRvV3JpdGVQaXBlbGluZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpICYmIGUuZ18ubGVuZ3RoIDwgMTA7XG59XG5cbi8qKlxuICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXG4gKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hZGRUb1dyaXRlUGlwZWxpbmUoZSwgdCkge1xuICAgIGUuZ18ucHVzaCh0KTtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpO1xuICAgIG4uVW8oKSAmJiBuLl9fICYmIG4uYV8odC5tdXRhdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXcml0ZVN0cmVhbShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpICYmICFfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkuJG8oKSAmJiBlLmdfLmxlbmd0aCA+IDA7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zdGFydFdyaXRlU3RyZWFtKGUpIHtcbiAgICBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkuc3RhcnQoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV3JpdGVTdHJlYW1PcGVuKGUpIHtcbiAgICBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkubF8oKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV3JpdGVIYW5kc2hha2VDb21wbGV0ZShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKTtcbiAgICAvLyBTZW5kIHRoZSB3cml0ZSBwaXBlbGluZSBub3cgdGhhdCB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5nXykgdC5hXyhuLm11dGF0aW9ucyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbk11dGF0aW9uUmVzdWx0KGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gZS5nXy5zaGlmdCgpLCBpID0gTXV0YXRpb25CYXRjaFJlc3VsdC5mcm9tKHIsIHQsIG4pO1xuICAgIGF3YWl0IF9fUFJJVkFURV9leGVjdXRlV2l0aFJlY292ZXJ5KGUsICgoKSA9PiBlLnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShpKSkpLCBcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcbiAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldyaXRlU3RyZWFtQ2xvc2UoZSwgdCkge1xuICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGFmdGVyIHRoZSB3cml0ZSBoYW5kc2hha2UgY29tcGxldGVzLCBhIHdyaXRlXG4gICAgLy8gb3BlcmF0aW9uIGZhaWxlZCBhbmQgd2UgZmFpbCB0aGUgcGVuZGluZyBvcGVyYXRpb24uXG4gICAgdCAmJiBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkuX18gJiYgXG4gICAgLy8gVGhpcyBlcnJvciBhZmZlY3RzIHRoZSBhY3R1YWwgd3JpdGUuXG4gICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2hhbmRsZVdyaXRlRXJyb3IoZSwgdCkge1xuICAgICAgICAvLyBPbmx5IGhhbmRsZSBwZXJtYW5lbnQgZXJyb3JzIGhlcmUuIElmIGl0J3MgdHJhbnNpZW50LCBqdXN0IGxldCB0aGUgcmV0cnlcbiAgICAgICAgLy8gbG9naWMga2ljayBpbi5cbiAgICAgICAgaWYgKGZ1bmN0aW9uIF9fUFJJVkFURV9pc1Blcm1hbmVudFdyaXRlRXJyb3IoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9pc1Blcm1hbmVudEVycm9yKGUpICYmIGUgIT09IHYuQUJPUlRFRDtcbiAgICAgICAgfSh0LmNvZGUpKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBhIHBlcm1hbmVudCBlcnJvciwgdGhlIHJlcXVlc3QgaXRzZWxmIHdhcyB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgLy8gc28gaXQncyBub3QgZ29pbmcgdG8gc3VjY2VlZCBpZiB3ZSByZXNlbmQgaXQuXG4gICAgICAgICAgICBjb25zdCBuID0gZS5nXy5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcbiAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gcmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKS5HbygpLCBhd2FpdCBfX1BSSVZBVEVfZXhlY3V0ZVdpdGhSZWNvdmVyeShlLCAoKCkgPT4gZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUobi5iYXRjaElkLCB0KSkpLCBcbiAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb25cbiAgICAgICAgICAgIC8vIGFub3RoZXIgc2xvdCBoYXMgZnJlZWQgdXAuXG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoZSk7XG4gICAgICAgIH1cbiAgICB9KGUsIHQpLCBcbiAgICAvLyBUaGUgd3JpdGUgc3RyZWFtIG1pZ2h0IGhhdmUgYmVlbiBzdGFydGVkIGJ5IHJlZmlsbGluZyB0aGUgd3JpdGVcbiAgICAvLyBwaXBlbGluZSBmb3IgZmFpbGVkIHdyaXRlc1xuICAgIF9fUFJJVkFURV9zaG91bGRTdGFydFdyaXRlU3RyZWFtKGUpICYmIF9fUFJJVkFURV9zdGFydFdyaXRlU3RyZWFtKGUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBfX1BSSVZBVEVfbG9nRGVidWcoXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHJlY2VpdmVkIG5ldyBjcmVkZW50aWFsc1wiKTtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2NhblVzZU5ldHdvcmsobik7XG4gICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgIC8vIGZyZXNoIGF1dGggdG9rZW4gZm9yIHRoZSBuZXcgdXNlciBhbmQgcmUtZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aFxuICAgIC8vIG5ldyBtdXRhdGlvbnMgZnJvbSB0aGUgTG9jYWxTdG9yZSAoc2luY2UgbXV0YXRpb25zIGFyZSBwZXItdXNlcikuXG4gICAgICAgIG4ueV8uYWRkKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbChuKSwgXG4gICAgciAmJiBcbiAgICAvLyBEb24ndCBzZXQgdGhlIG5ldHdvcmsgc3RhdHVzIHRvIFVua25vd24gaWYgd2UgYXJlIG9mZmxpbmUuXG4gICAgbi5iXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIGF3YWl0IG4ucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UodCksIFxuICAgIG4ueV8uZGVsZXRlKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKG4pO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIG5ldHdvcmsgc3RhdGUgd2hlbiB0aGUgY2xpZW50IGdhaW5zIG9yIGxvc2VzIGl0cyBwcmltYXJ5IGxlYXNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUFwcGx5UHJpbWFyeVN0YXRlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICB0ID8gKG4ueV8uZGVsZXRlKDIgLyogT2ZmbGluZUNhdXNlLklzU2Vjb25kYXJ5ICovKSwgYXdhaXQgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChuKSkgOiB0IHx8IChuLnlfLmFkZCgyIC8qIE9mZmxpbmVDYXVzZS5Jc1NlY29uZGFyeSAqLyksIFxuICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKG4pLCBuLmJfLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSk7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXYXRjaFN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2F0Y2hTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkge1xuICAgIHJldHVybiBlLnZfIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgZS52XyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdQZXJzaXN0ZW50V2F0Y2hTdHJlYW0oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgcmV0dXJuIHIuUF8oKSwgbmV3IF9fUFJJVkFURV9QZXJzaXN0ZW50TGlzdGVuU3RyZWFtKHQsIHIuY29ubmVjdGlvbiwgci5hdXRoQ3JlZGVudGlhbHMsIHIuYXBwQ2hlY2tDcmVkZW50aWFscywgci5zZXJpYWxpemVyLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKGUuZGF0YXN0b3JlLCBlLmFzeW5jUXVldWUsIHtcbiAgICAgICAgX286IF9fUFJJVkFURV9vbldhdGNoU3RyZWFtT3Blbi5iaW5kKG51bGwsIGUpLFxuICAgICAgICB1bzogX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DbG9zZS5iaW5kKG51bGwsIGUpLFxuICAgICAgICByXzogX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DaGFuZ2UuYmluZChudWxsLCBlKVxuICAgIH0pLCBlLndfLnB1c2goKGFzeW5jIHQgPT4ge1xuICAgICAgICB0ID8gKGUudl8uR28oKSwgX19QUklWQVRFX3Nob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oZSkgPyBfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbShlKSA6IGUuYl8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKSA6IChhd2FpdCBlLnZfLnN0b3AoKSwgXG4gICAgICAgIF9fUFJJVkFURV9jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZShlKSk7XG4gICAgfSkpKSwgZS52Xztcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdyaXRlU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXcml0ZVN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKSB7XG4gICAgcmV0dXJuIGUuQ18gfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICBlLkNfID0gZnVuY3Rpb24gX19QUklWQVRFX25ld1BlcnNpc3RlbnRXcml0ZVN0cmVhbShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICByZXR1cm4gci5QXygpLCBuZXcgX19QUklWQVRFX1BlcnNpc3RlbnRXcml0ZVN0cmVhbSh0LCByLmNvbm5lY3Rpb24sIHIuYXV0aENyZWRlbnRpYWxzLCByLmFwcENoZWNrQ3JlZGVudGlhbHMsIHIuc2VyaWFsaXplciwgbik7XG4gICAgfShlLmRhdGFzdG9yZSwgZS5hc3luY1F1ZXVlLCB7XG4gICAgICAgIF9vOiBfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbU9wZW4uYmluZChudWxsLCBlKSxcbiAgICAgICAgdW86IF9fUFJJVkFURV9vbldyaXRlU3RyZWFtQ2xvc2UuYmluZChudWxsLCBlKSxcbiAgICAgICAgY186IF9fUFJJVkFURV9vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUuYmluZChudWxsLCBlKSxcbiAgICAgICAgdV86IF9fUFJJVkFURV9vbk11dGF0aW9uUmVzdWx0LmJpbmQobnVsbCwgZSlcbiAgICB9KSwgZS53Xy5wdXNoKChhc3luYyB0ID0+IHtcbiAgICAgICAgdCA/IChlLkNfLkdvKCksIFxuICAgICAgICAvLyBUaGlzIHdpbGwgc3RhcnQgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZShlKSkgOiAoYXdhaXQgZS5DXy5zdG9wKCksIGUuZ18ubGVuZ3RoID4gMCAmJiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgYFN0b3BwaW5nIHdyaXRlIHN0cmVhbSB3aXRoICR7ZS5nXy5sZW5ndGh9IHBlbmRpbmcgd3JpdGVzYCksIFxuICAgICAgICBlLmdfID0gW10pKTtcbiAgICB9KSkpLCBlLkNfO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIG9wZXJhdGlvbiBzY2hlZHVsZWQgdG8gYmUgcnVuIGluIHRoZSBmdXR1cmUgb24gYW4gQXN5bmNRdWV1ZS5cbiAqXG4gKiBJdCBpcyBjcmVhdGVkIHZpYSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gKlxuICogU3VwcG9ydHMgY2FuY2VsbGF0aW9uICh2aWEgY2FuY2VsKCkpIGFuZCBlYXJseSBleGVjdXRpb24gKHZpYSBza2lwRGVsYXkoKSkuXG4gKlxuICogTm90ZTogV2UgaW1wbGVtZW50IGBQcm9taXNlTGlrZWAgaW5zdGVhZCBvZiBgUHJvbWlzZWAsIGFzIHRoZSBgUHJvbWlzZWAgdHlwZVxuICogaW4gbmV3ZXIgdmVyc2lvbnMgb2YgVHlwZVNjcmlwdCBkZWZpbmVzIGBmaW5hbGx5YCwgd2hpY2ggaXMgbm90IGF2YWlsYWJsZSBpblxuICogSUUuXG4gKi9cbmNsYXNzIERlbGF5ZWRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy50aW1lcklkID0gdCwgdGhpcy50YXJnZXRUaW1lTXMgPSBuLCB0aGlzLm9wID0gciwgdGhpcy5yZW1vdmFsQ2FsbGJhY2sgPSBpLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIHRoaXMudGhlbiA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS50aGVuLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKSwgXG4gICAgICAgIC8vIEl0J3Mgbm9ybWFsIGZvciB0aGUgZGVmZXJyZWQgcHJvbWlzZSB0byBiZSBjYW5jZWxlZCAoZHVlIHRvIGNhbmNlbGxhdGlvbilcbiAgICAgICAgLy8gYW5kIHNvIHdlIGF0dGFjaCBhIGR1bW15IGNhdGNoIGNhbGxiYWNrIHRvIGF2b2lkXG4gICAgICAgIC8vICdVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZycgbG9nIHNwYW0uXG4gICAgICAgIHRoaXMuZGVmZXJyZWQucHJvbWlzZS5jYXRjaCgoZSA9PiB7fSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgRGVsYXllZE9wZXJhdGlvbiB0aGF0IGhhcyBiZWVuIHNjaGVkdWxlZCB0byBiZVxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFzeW5jUXVldWUgLSBUaGUgcXVldWUgdG8gc2NoZWR1bGUgdGhlIG9wZXJhdGlvbiBvbi5cbiAgICAgKiBAcGFyYW0gaWQgLSBBIFRpbWVyIElEIGlkZW50aWZ5aW5nIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGlzIGlzLlxuICAgICAqIEBwYXJhbSBkZWxheU1zIC0gVGhlIGRlbGF5IChtcykgYmVmb3JlIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIHNjaGVkdWxlZC5cbiAgICAgKiBAcGFyYW0gb3AgLSBUaGUgb3BlcmF0aW9uIHRvIHJ1bi5cbiAgICAgKiBAcGFyYW0gcmVtb3ZhbENhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBvbmNlIHRoZVxuICAgICAqICAgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLCBub3RpZnlpbmcgdGhlIEFzeW5jUXVldWUgdG8gcmVtb3ZlIGl0XG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxuICAgICAqICAgUE9SVElORyBOT1RFOiBUaGlzIGV4aXN0cyB0byBwcmV2ZW50IG1ha2luZyByZW1vdmVEZWxheWVkT3BlcmF0aW9uKCkgYW5kXG4gICAgICogICB0aGUgRGVsYXllZE9wZXJhdGlvbiBjbGFzcyBwdWJsaWMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVBbmRTY2hlZHVsZShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBEYXRlLm5vdygpICsgbiwgbyA9IG5ldyBEZWxheWVkT3BlcmF0aW9uKGUsIHQsIHMsIHIsIGkpO1xuICAgICAgICByZXR1cm4gby5zdGFydChuKSwgbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0aW1lci4gVGhpcyBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgY29uc3RydWN0aW9uIGJ5XG4gICAgICogY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAgICAgKi8gICAgc3RhcnQoZSkge1xuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gc2V0VGltZW91dCgoKCkgPT4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKSksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWV1ZXMgdGhlIG9wZXJhdGlvbiB0byBydW4gaW1tZWRpYXRlbHkgKGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gcnVuIG9yXG4gICAgICogY2FuY2VsZWQpLlxuICAgICAqLyAgICBza2lwRGVsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBvcGVyYXRpb24gaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBleGVjdXRlZCBvciBjYW5jZWxlZC4gVGhlXG4gICAgICogcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogQXMgbG9uZyBhcyB0aGUgb3BlcmF0aW9uIGhhcyBub3QgeWV0IGJlZW4gcnVuLCBjYWxsaW5nIGNhbmNlbCgpIHByb3ZpZGVzIGFcbiAgICAgKiBndWFyYW50ZWUgdGhhdCB0aGUgb3BlcmF0aW9uIHdpbGwgbm90IGJlIHJ1bi5cbiAgICAgKi8gICAgY2FuY2VsKGUpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5jbGVhclRpbWVvdXQoKSwgdGhpcy5kZWZlcnJlZC5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKHYuQ0FOQ0VMTEVELCBcIk9wZXJhdGlvbiBjYW5jZWxsZWRcIiArIChlID8gXCI6IFwiICsgZSA6IFwiXCIpKSkpO1xuICAgIH1cbiAgICBoYW5kbGVEZWxheUVsYXBzZWQoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlID8gKHRoaXMuY2xlYXJUaW1lb3V0KCksIFxuICAgICAgICB0aGlzLm9wKCkudGhlbigoZSA9PiB0aGlzLmRlZmVycmVkLnJlc29sdmUoZSkpKSkgOiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpLCBjbGVhclRpbWVvdXQodGhpcy50aW1lckhhbmRsZSksIFxuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaXJlc3RvcmVFcnJvciB0aGF0IGNhbiBiZSBzdXJmYWNlZCB0byB0aGUgdXNlciBpZiB0aGUgcHJvdmlkZWRcbiAqIGVycm9yIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuIFJlLXRocm93cyB0aGUgZXJyb3Igb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIHQpIHtcbiAgICBpZiAoX19QUklWQVRFX2xvZ0Vycm9yKFwiQXN5bmNRdWV1ZVwiLCBgJHt0fTogJHtlfWApLCBfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKHYuVU5BVkFJTEFCTEUsIGAke3R9OiAke2V9YCk7XG4gICAgdGhyb3cgZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZG9jdW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuIFdlIGFsd2F5cyBhZGQgYSBkb2N1bWVudCBrZXlcbiAqIGNvbXBhcmF0b3Igb24gdG9wIG9mIHdoYXQgaXMgcHJvdmlkZWQgdG8gZ3VhcmFudGVlIGRvY3VtZW50IGVxdWFsaXR5IGJhc2VkIG9uXG4gKiB0aGUga2V5LlxuICovIGNsYXNzIERvY3VtZW50U2V0IHtcbiAgICAvKiogVGhlIGRlZmF1bHQgb3JkZXJpbmcgaXMgYnkga2V5IGlmIHRoZSBjb21wYXJhdG9yIGlzIG9taXR0ZWQgKi9cbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIC8vIFdlIGFyZSBhZGRpbmcgZG9jdW1lbnQga2V5IGNvbXBhcmF0b3IgdG8gdGhlIGVuZCBhcyBpdCdzIHRoZSBvbmx5XG4gICAgICAgIC8vIGd1YXJhbnRlZWQgdW5pcXVlIHByb3BlcnR5IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGUgPyAodCwgbikgPT4gZSh0LCBuKSB8fCBEb2N1bWVudEtleS5jb21wYXJhdG9yKHQua2V5LCBuLmtleSkgOiAoZSwgdCkgPT4gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdC5rZXkpLCBcbiAgICAgICAgdGhpcy5rZXllZE1hcCA9IGRvY3VtZW50TWFwKCksIHRoaXMuc29ydGVkU2V0ID0gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxuICAgICAqIGNvbXBhcmF0b3IuXG4gICAgICovICAgIHN0YXRpYyBlbXB0eVNldChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRTZXQoZS5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5rZXllZE1hcC5nZXQoZSk7XG4gICAgfVxuICAgIGdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldChlKTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1heEtleSgpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgcHJvdmlkZWQga2V5IGluIHRoZSBkb2N1bWVudCBzZXQsIG9yIC0xIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2V0O1xuICAgICAqLyAgICBpbmRleE9mKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMua2V5ZWRNYXAuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YodCkgOiAtMTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZG9jdW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZSh0KSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleSAqLyAgICBhZGQoZSkge1xuICAgICAgICAvLyBGaXJzdCByZW1vdmUgdGhlIGVsZW1lbnQgaWYgd2UgaGF2ZSBpdC5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGVsZXRlKGUua2V5KTtcbiAgICAgICAgcmV0dXJuIHQuY29weSh0LmtleWVkTWFwLmluc2VydChlLmtleSwgZSksIHQuc29ydGVkU2V0Lmluc2VydChlLCBudWxsKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy5jb3B5KHRoaXMua2V5ZWRNYXAucmVtb3ZlKGUpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUodCkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBEb2N1bWVudFNldCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gZS5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpLCBuID0gZS5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7dC5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZ2V0TmV4dCgpLmtleSwgciA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICghZS5pc0VxdWFsKHIpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIDAgPT09IGUubGVuZ3RoID8gXCJEb2N1bWVudFNldCAoKVwiIDogXCJEb2N1bWVudFNldCAoXFxuICBcIiArIGUuam9pbihcIiAgXFxuXCIpICsgXCJcXG4pXCI7XG4gICAgfVxuICAgIGNvcHkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IERvY3VtZW50U2V0O1xuICAgICAgICByZXR1cm4gbi5jb21wYXJhdG9yID0gdGhpcy5jb21wYXJhdG9yLCBuLmtleWVkTWFwID0gZSwgbi5zb3J0ZWRTZXQgPSB0LCBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcbiAqIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGRvYy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRG9jdW1lbnRDaGFuZ2VTZXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLkZfID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgdHJhY2soZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kb2Mua2V5LCBuID0gdGhpcy5GXy5nZXQodCk7XG4gICAgICAgIG4gPyBcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyBjaGFuZ2Ugd2l0aCB0aGUgZXhpc3RpbmcgY2hhbmdlLlxuICAgICAgICAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gIT09IGUudHlwZSAmJiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gPT09IG4udHlwZSA/IHRoaXMuRl8gPSB0aGlzLkZfLmluc2VydCh0LCBlKSA6IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA9PT0gZS50eXBlICYmIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLkZfID0gdGhpcy5GXy5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiBlLmRvY1xuICAgICAgICB9KSA6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gZS50eXBlICYmIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5GXyA9IHRoaXMuRl8uaW5zZXJ0KHQsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IGUuZG9jXG4gICAgICAgIH0pIDogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBlLnR5cGUgJiYgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLkZfID0gdGhpcy5GXy5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogZS5kb2NcbiAgICAgICAgfSkgOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA9PT0gZS50eXBlICYmIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5GXyA9IHRoaXMuRl8ucmVtb3ZlKHQpIDogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IGUudHlwZSAmJiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuRl8gPSB0aGlzLkZfLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IG4uZG9jXG4gICAgICAgIH0pIDogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBlLnR5cGUgJiYgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuRl8gPSB0aGlzLkZfLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBlLmRvY1xuICAgICAgICB9KSA6IFxuICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIHRoZXNlIGNhc2VzLCB3aGljaCBkb24ndCBtYWtlIHNlbnNlOlxuICAgICAgICAvLyBBZGRlZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+UmVtb3ZlZFxuICAgICAgICAvLyBNb2RpZmllZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TW9kaWZpZWRcbiAgICAgICAgLy8gTWV0YWRhdGEtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1ldGFkYXRhXG4gICAgICAgIGZhaWwoKSA6IHRoaXMuRl8gPSB0aGlzLkZfLmluc2VydCh0LCBlKTtcbiAgICB9XG4gICAgTV8oKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRl8uaW5vcmRlclRyYXZlcnNhbCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUucHVzaChuKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbn1cblxuY2xhc3MgVmlld1NuYXBzaG90IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzLCBvLCBfLCBhKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBlLCB0aGlzLmRvY3MgPSB0LCB0aGlzLm9sZERvY3MgPSBuLCB0aGlzLmRvY0NoYW5nZXMgPSByLCB0aGlzLm11dGF0ZWRLZXlzID0gaSwgXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gcywgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID0gbywgdGhpcy5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcyA9IF8sIFxuICAgICAgICB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPSBhO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi8gICAgc3RhdGljIGZyb21Jbml0aWFsRG9jdW1lbnRzKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIG5ldyBWaWV3U25hcHNob3QoZSwgdCwgRG9jdW1lbnRTZXQuZW1wdHlTZXQodCksIHMsIG4sIHIsIFxuICAgICAgICAvKiBzeW5jU3RhdGVDaGFuZ2VkPSAqLyAhMCwgXG4gICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSwgaSk7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubXV0YXRlZEtleXMuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgaWYgKCEodGhpcy5mcm9tQ2FjaGUgPT09IGUuZnJvbUNhY2hlICYmIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyA9PT0gZS5oYXNDYWNoZWRSZXN1bHRzICYmIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9PT0gZS5zeW5jU3RhdGVDaGFuZ2VkICYmIHRoaXMubXV0YXRlZEtleXMuaXNFcXVhbChlLm11dGF0ZWRLZXlzKSAmJiBfX1BSSVZBVEVfcXVlcnlFcXVhbHModGhpcy5xdWVyeSwgZS5xdWVyeSkgJiYgdGhpcy5kb2NzLmlzRXF1YWwoZS5kb2NzKSAmJiB0aGlzLm9sZERvY3MuaXNFcXVhbChlLm9sZERvY3MpKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kb2NDaGFuZ2VzLCBuID0gZS5kb2NDaGFuZ2VzO1xuICAgICAgICBpZiAodC5sZW5ndGggIT09IG4ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGg7IGUrKykgaWYgKHRbZV0udHlwZSAhPT0gbltlXS50eXBlIHx8ICF0W2VdLmRvYy5pc0VxdWFsKG5bZV0uZG9jKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIb2xkcyB0aGUgbGlzdGVuZXJzIGFuZCB0aGUgbGFzdCByZWNlaXZlZCBWaWV3U25hcHNob3QgZm9yIGEgcXVlcnkgYmVpbmdcbiAqIHRyYWNrZWQgYnkgRXZlbnRNYW5hZ2VyLlxuICovIGNsYXNzIF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyc0luZm8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnhfID0gdm9pZCAwLCB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0V2ZW50TWFuYWdlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBuZXcgT2JqZWN0TWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeVF1ZXJ5KGUpKSwgX19QUklWQVRFX3F1ZXJ5RXF1YWxzKSwgXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgdGhpcy5PXyA9IG5ldyBTZXQ7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IHQucXVlcnk7XG4gICAgbGV0IGkgPSAhMSwgcyA9IG4ucXVlcmllcy5nZXQocik7XG4gICAgaWYgKHMgfHwgKGkgPSAhMCwgcyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcnNJbmZvKSwgaSkgdHJ5IHtcbiAgICAgICAgcy54XyA9IGF3YWl0IG4ub25MaXN0ZW4ocik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgYEluaXRpYWxpemF0aW9uIG9mIHF1ZXJ5ICcke19fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0LnF1ZXJ5KX0nIGZhaWxlZGApO1xuICAgICAgICByZXR1cm4gdm9pZCB0Lm9uRXJyb3Iobik7XG4gICAgfVxuICAgIGlmIChuLnF1ZXJpZXMuc2V0KHIsIHMpLCBzLmxpc3RlbmVycy5wdXNoKHQpLCBcbiAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICB0Lk5fKG4ub25saW5lU3RhdGUpLCBzLnhfKSB7XG4gICAgICAgIHQuQl8ocy54XykgJiYgX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQobik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gdC5xdWVyeTtcbiAgICBsZXQgaSA9ICExO1xuICAgIGNvbnN0IHMgPSBuLnF1ZXJpZXMuZ2V0KHIpO1xuICAgIGlmIChzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBzLmxpc3RlbmVycy5pbmRleE9mKHQpO1xuICAgICAgICBlID49IDAgJiYgKHMubGlzdGVuZXJzLnNwbGljZShlLCAxKSwgaSA9IDAgPT09IHMubGlzdGVuZXJzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChpKSByZXR1cm4gbi5xdWVyaWVzLmRlbGV0ZShyKSwgbi5vblVubGlzdGVuKHIpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaENoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbGV0IHIgPSAhMTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICBjb25zdCB0ID0gZS5xdWVyeSwgaSA9IG4ucXVlcmllcy5nZXQodCk7XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgaS5saXN0ZW5lcnMpIHQuQl8oZSkgJiYgKHIgPSAhMCk7XG4gICAgICAgICAgICBpLnhfID0gZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByICYmIF9fUFJJVkFURV9yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KG4pO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IHIucXVlcmllcy5nZXQodCk7XG4gICAgaWYgKGkpIGZvciAoY29uc3QgZSBvZiBpLmxpc3RlbmVycykgZS5vbkVycm9yKG4pO1xuICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzLiBOT1RFOiBXZSBkb24ndCBuZWVkIHRvIGNhbGwgc3luY0VuZ2luZS51bmxpc3RlbigpXG4gICAgLy8gYWZ0ZXIgYW4gZXJyb3IuXG4gICAgICAgIHIucXVlcmllcy5kZWxldGUodCk7XG59XG5cbi8vIENhbGwgYWxsIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgdGhhdCBoYXZlIGJlZW4gc2V0LlxuZnVuY3Rpb24gX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQoZSkge1xuICAgIGUuT18uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgIGUubmV4dCgpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBRdWVyeUxpc3RlbmVyIHRha2VzIGEgc2VyaWVzIG9mIGludGVybmFsIHZpZXcgc25hcHNob3RzIGFuZCBkZXRlcm1pbmVzXG4gKiB3aGVuIHRvIHJhaXNlIHRoZSBldmVudC5cbiAqXG4gKiBJdCB1c2VzIGFuIE9ic2VydmVyIHRvIGRpc3BhdGNoIGV2ZW50cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gZSwgdGhpcy5MXyA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbCBzbmFwc2hvdHMgKGUuZy4gZnJvbSBjYWNoZSkgbWF5IG5vdCBiZSBwcm9wYWdhdGVkIHRvIHRoZSB3cmFwcGVkXG4gICAgICAgICAqIG9ic2VydmVyLiBUaGlzIGZsYWcgaXMgc2V0IHRvIHRydWUgb25jZSB3ZSd2ZSBhY3R1YWxseSByYWlzZWQgYW4gZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmtfID0gITEsIHRoaXMucV8gPSBudWxsLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBuIHx8IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBuZXcgVmlld1NuYXBzaG90IHRvIHRoaXMgbGlzdGVuZXIsIHJhaXNpbmcgYSB1c2VyLWZhY2luZyBldmVudFxuICAgICAqIGlmIGFwcGxpY2FibGUgKGRlcGVuZGluZyBvbiB3aGF0IGNoYW5nZWQsIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIGludG9cbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcbiAgICAgKiBpbmRlZWQgcmFpc2VkLlxuICAgICAqLyAgICBCXyhlKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxuICAgICAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuZG9jQ2hhbmdlcykgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICE9PSBuLnR5cGUgJiYgdC5wdXNoKG4pO1xuICAgICAgICAgICAgZSA9IG5ldyBWaWV3U25hcHNob3QoZS5xdWVyeSwgZS5kb2NzLCBlLm9sZERvY3MsIHQsIGUubXV0YXRlZEtleXMsIGUuZnJvbUNhY2hlLCBlLnN5bmNTdGF0ZUNoYW5nZWQsIFxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICEwLCBlLmhhc0NhY2hlZFJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLmtfID8gdGhpcy5RXyhlKSAmJiAodGhpcy5MXy5uZXh0KGUpLCB0ID0gITApIDogdGhpcy5LXyhlLCB0aGlzLm9ubGluZVN0YXRlKSAmJiAodGhpcy5VXyhlKSwgXG4gICAgICAgIHQgPSAhMCksIHRoaXMucV8gPSBlLCB0O1xuICAgIH1cbiAgICBvbkVycm9yKGUpIHtcbiAgICAgICAgdGhpcy5MXy5lcnJvcihlKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciBhIHNuYXBzaG90IHdhcyByYWlzZWQuICovICAgIE5fKGUpIHtcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLnFfICYmICF0aGlzLmtfICYmIHRoaXMuS18odGhpcy5xXywgZSkgJiYgKHRoaXMuVV8odGhpcy5xXyksIHQgPSAhMCksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICBLXyhlLCB0KSB7XG4gICAgICAgIC8vIEFsd2F5cyByYWlzZSB0aGUgZmlyc3QgZXZlbnQgd2hlbiB3ZSdyZSBzeW5jZWRcbiAgICAgICAgaWYgKCFlLmZyb21DYWNoZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBOT1RFOiBXZSBjb25zaWRlciBPbmxpbmVTdGF0ZS5Vbmtub3duIGFzIG9ubGluZSAoaXQgc2hvdWxkIGJlY29tZSBPZmZsaW5lXG4gICAgICAgIC8vIG9yIE9ubGluZSBpZiB3ZSB3YWl0IGxvbmcgZW5vdWdoKS5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gdDtcbiAgICAgICAgLy8gRG9uJ3QgcmFpc2UgdGhlIGV2ZW50IGlmIHdlJ3JlIG9ubGluZSwgYXJlbid0IHN5bmNlZCB5ZXQgKGNoZWNrZWRcbiAgICAgICAgLy8gYWJvdmUpIGFuZCBhcmUgd2FpdGluZyBmb3IgYSBzeW5jLlxuICAgICAgICAgICAgICAgIHJldHVybiAoIXRoaXMub3B0aW9ucy5XXyB8fCAhbikgJiYgKCFlLmRvY3MuaXNFbXB0eSgpIHx8IGUuaGFzQ2FjaGVkUmVzdWx0cyB8fCBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovID09PSB0KTtcbiAgICAgICAgLy8gUmFpc2UgZGF0YSBmcm9tIGNhY2hlIGlmIHdlIGhhdmUgYW55IGRvY3VtZW50cywgaGF2ZSBjYWNoZWQgcmVzdWx0cyBiZWZvcmUsXG4gICAgICAgIC8vIG9yIHdlIGFyZSBvZmZsaW5lLlxuICAgICAgICB9XG4gICAgUV8oZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpbmNsdWRlRG9jdW1lbnRNZXRhZGF0YUNoYW5nZXMgaGVyZSBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSBNZXRhZGF0YSBvbmx5IGNoYW5nZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc3RyaXBwZWQgb3V0IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgb25seSBjaGFuZ2VzIHdlIHdpbGwgc2VlIGFyZSB0aGUgb25lcyB3ZSBzaG91bGRcbiAgICAgICAgLy8gcHJvcGFnYXRlLlxuICAgICAgICBpZiAoZS5kb2NDaGFuZ2VzLmxlbmd0aCA+IDApIHJldHVybiAhMDtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucV8gJiYgdGhpcy5xXy5oYXNQZW5kaW5nV3JpdGVzICE9PSBlLmhhc1BlbmRpbmdXcml0ZXM7XG4gICAgICAgIHJldHVybiAhKCFlLnN5bmNTdGF0ZUNoYW5nZWQgJiYgIXQpICYmICEwID09PSB0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgLy8gR2VuZXJhbGx5IHdlIHNob3VsZCBoYXZlIGhpdCBvbmUgb2YgdGhlIGNhc2VzIGFib3ZlLCBidXQgaXQncyBwb3NzaWJsZVxuICAgICAgICAvLyB0byBnZXQgaGVyZSBpZiB0aGVyZSB3ZXJlIG9ubHkgbWV0YWRhdGEgZG9jQ2hhbmdlcyBhbmQgdGhleSBnb3RcbiAgICAgICAgLy8gc3RyaXBwZWQgb3V0LlxuICAgICAgICB9XG4gICAgVV8oZSkge1xuICAgICAgICBlID0gVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzKGUucXVlcnksIGUuZG9jcywgZS5tdXRhdGVkS2V5cywgZS5mcm9tQ2FjaGUsIGUuaGFzQ2FjaGVkUmVzdWx0cyksIFxuICAgICAgICB0aGlzLmtfID0gITAsIHRoaXMuTF8ubmV4dChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29tcGxldGUgZWxlbWVudCBpbiB0aGUgYnVuZGxlIHN0cmVhbSwgdG9nZXRoZXIgd2l0aCB0aGUgYnl0ZSBsZW5ndGggaXRcbiAqIG9jY3VwaWVzIGluIHRoZSBzdHJlYW0uXG4gKi8gY2xhc3MgX19QUklWQVRFX1NpemVkQnVuZGxlRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLy8gSG93IG1hbnkgYnl0ZXMgdGhpcyBlbGVtZW50IHRha2VzIHRvIHN0b3JlIGluIHRoZSBidW5kbGUuXG4gICAgdCkge1xuICAgICAgICB0aGlzLkdfID0gZSwgdGhpcy5ieXRlTGVuZ3RoID0gdDtcbiAgICB9XG4gICAgel8oKSB7XG4gICAgICAgIHJldHVybiBcIm1ldGFkYXRhXCIgaW4gdGhpcy5HXztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IG9iamVjdHMgZnJvbSBidW5kbGVzIHRvIG1vZGVsIG9iamVjdHMgaW4gdGhlIFNESy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQnVuZGxlQ29udmVydGVySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBlO1xuICAgIH1cbiAgICBvcyhlKSB7XG4gICAgICAgIHJldHVybiBmcm9tTmFtZSh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEJ1bmRsZURvY3VtZW50IHRvIGEgTXV0YWJsZURvY3VtZW50LlxuICAgICAqLyAgICBfcyhlKSB7XG4gICAgICAgIHJldHVybiBlLm1ldGFkYXRhLmV4aXN0cyA/IF9fUFJJVkFURV9mcm9tRG9jdW1lbnQodGhpcy5zZXJpYWxpemVyLCBlLmRvY3VtZW50LCAhMSkgOiBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudCh0aGlzLm9zKGUubWV0YWRhdGEubmFtZSksIHRoaXMudXMoZS5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICB1cyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY2xhc3MgdG8gcHJvY2VzcyB0aGUgZWxlbWVudHMgZnJvbSBhIGJ1bmRsZSwgbG9hZCB0aGVtIGludG8gbG9jYWxcbiAqIHN0b3JhZ2UgYW5kIHByb3ZpZGUgcHJvZ3Jlc3MgdXBkYXRlIHdoaWxlIGxvYWRpbmcuXG4gKi8gY2xhc3MgX19QUklWQVRFX0J1bmRsZUxvYWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmpfID0gZSwgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5zZXJpYWxpemVyID0gbiwgXG4gICAgICAgIC8qKiBCYXRjaGVkIHF1ZXJpZXMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IFtdLCBcbiAgICAgICAgLyoqIFRoZSBjb2xsZWN0aW9uIGdyb3VwcyBhZmZlY3RlZCBieSB0aGlzIGJ1bmRsZS4gKi9cbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXBzID0gbmV3IFNldCwgdGhpcy5wcm9ncmVzcyA9IF9fUFJJVkFURV9idW5kbGVJbml0aWFsUHJvZ3Jlc3MoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZWxlbWVudCBmcm9tIHRoZSBidW5kbGUgdG8gdGhlIGxvYWRlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBuZXcgcHJvZ3Jlc3MgaWYgYWRkaW5nIHRoZSBlbGVtZW50IGxlYWRzIHRvIGEgbmV3IHByb2dyZXNzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICovICAgIEhfKGUpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5ieXRlc0xvYWRlZCArPSBlLmJ5dGVMZW5ndGg7XG4gICAgICAgIGxldCB0ID0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7XG4gICAgICAgIGlmIChlLkdfLm5hbWVkUXVlcnkpIHRoaXMucXVlcmllcy5wdXNoKGUuR18ubmFtZWRRdWVyeSk7IGVsc2UgaWYgKGUuR18uZG9jdW1lbnRNZXRhZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kb2N1bWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IGUuR18uZG9jdW1lbnRNZXRhZGF0YVxuICAgICAgICAgICAgfSksIGUuR18uZG9jdW1lbnRNZXRhZGF0YS5leGlzdHMgfHwgKyt0O1xuICAgICAgICAgICAgY29uc3QgbiA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUuR18uZG9jdW1lbnRNZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3Vwcy5hZGQobi5nZXQobi5sZW5ndGggLSAyKSk7XG4gICAgICAgIH0gZWxzZSBlLkdfLmRvY3VtZW50ICYmICh0aGlzLmRvY3VtZW50c1t0aGlzLmRvY3VtZW50cy5sZW5ndGggLSAxXS5kb2N1bWVudCA9IGUuR18uZG9jdW1lbnQsIFxuICAgICAgICArK3QpO1xuICAgICAgICByZXR1cm4gdCAhPT0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPyAodGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPSB0LCBcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9ncmVzcykpIDogbnVsbDtcbiAgICB9XG4gICAgSl8oZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IE1hcCwgbiA9IG5ldyBfX1BSSVZBVEVfQnVuZGxlQ29udmVydGVySW1wbCh0aGlzLnNlcmlhbGl6ZXIpO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZSkgaWYgKHIubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4ub3Moci5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiByLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gKHQuZ2V0KG4pIHx8IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKS5hZGQoZSk7XG4gICAgICAgICAgICAgICAgdC5zZXQobiwgcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcHJvZ3Jlc3MgdG8gJ1N1Y2Nlc3MnIGFuZCByZXR1cm4gdGhlIHVwZGF0ZWQgcHJvZ3Jlc3MuXG4gICAgICovICAgIGFzeW5jIGNvbXBsZXRlKCkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseUJ1bmRsZWREb2N1bWVudHModGhpcy5sb2NhbFN0b3JlLCBuZXcgX19QUklWQVRFX0J1bmRsZUNvbnZlcnRlckltcGwodGhpcy5zZXJpYWxpemVyKSwgdGhpcy5kb2N1bWVudHMsIHRoaXMual8uaWQpLCB0ID0gdGhpcy5KXyh0aGlzLmRvY3VtZW50cyk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnF1ZXJpZXMpIGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlU2F2ZU5hbWVkUXVlcnkodGhpcy5sb2NhbFN0b3JlLCBlLCB0LmdldChlLm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3MudGFza1N0YXRlID0gXCJTdWNjZXNzXCIsIHtcbiAgICAgICAgICAgIHByb2dyZXNzOiB0aGlzLnByb2dyZXNzLFxuICAgICAgICAgICAgWV86IHRoaXMuY29sbGVjdGlvbkdyb3VwcyxcbiAgICAgICAgICAgIFpfOiBlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBpbml0aWFsIHByb2dyZXNzIG9mXG4gKiBsb2FkaW5nIGEgYnVuZGxlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9idW5kbGVJbml0aWFsUHJvZ3Jlc3MoZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgIGRvY3VtZW50c0xvYWRlZDogMCxcbiAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgIHRvdGFsRG9jdW1lbnRzOiBlLnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICB0b3RhbEJ5dGVzOiBlLnRvdGFsQnl0ZXNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0aGF0IHRoZSBsb2FkaW5nXG4gKiBoYXMgc3VjY2VlZGVkLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0FkZGVkTGltYm9Eb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtleSA9IGU7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfUmVtb3ZlZExpbWJvRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBWaWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0IGRvY3MgYXJlIGluXG4gKiBhIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyB0byBkb2NzLCBhbmQgYXBwbGllc1xuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxuICovIGNsYXNzIF9fUFJJVkFURV9WaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvKiogRG9jdW1lbnRzIGluY2x1ZGVkIGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgdCkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gZSwgdGhpcy5YXyA9IHQsIHRoaXMuZWEgPSBudWxsLCB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgd2hldGhlciB0aGUgdmlldyBpcyBjdXJyZW50IHdpdGggdGhlIGJhY2tlbmQuIEEgdmlldyBpcyBjb25zaWRlcmVkXG4gICAgICAgICAqIGN1cnJlbnQgYWZ0ZXIgaXQgaGFzIHNlZW4gdGhlIGN1cnJlbnQgZmxhZyBmcm9tIHRoZSBiYWNrZW5kIGFuZCBkaWQgbm90XG4gICAgICAgICAqIGxvc2UgY29uc2lzdGVuY3kgd2l0aGluIHRoZSB3YXRjaCBzdHJlYW0gKGUuZy4gYmVjYXVzZSBvZiBhbiBleGlzdGVuY2VcbiAgICAgICAgICogZmlsdGVyIG1pc21hdGNoKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCBcbiAgICAgICAgLyoqIERvY3VtZW50cyBpbiB0aGUgdmlldyBidXQgbm90IGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgICAgIHRoaXMudGEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgXG4gICAgICAgIC8qKiBEb2N1bWVudCBLZXlzIHRoYXQgaGF2ZSBsb2NhbCBjaGFuZ2VzICovXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgdGhpcy5uYSA9IF9fUFJJVkFURV9uZXdRdWVyeUNvbXBhcmF0b3IoZSksIFxuICAgICAgICB0aGlzLnJhID0gbmV3IERvY3VtZW50U2V0KHRoaXMubmEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIHJlbW90ZSBkb2N1bWVudHMgdGhhdCB0aGUgc2VydmVyIGhhcyB0b2xkIHVzIGJlbG9uZ3MgdG8gdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKiB0aGlzIHZpZXcuXG4gICAgICovICAgIGdldCBpYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzZXQgb2YgZG9jIGNoYW5nZXMsIGFwcGxpZXMgdGhlIHF1ZXJ5IGxpbWl0LCBhbmQgY29tcHV0ZXNcbiAgICAgKiB3aGF0IHRoZSBuZXcgcmVzdWx0cyBzaG91bGQgYmUsIHdoYXQgdGhlIGNoYW5nZXMgd2VyZSwgYW5kIHdoZXRoZXIgd2UgbWF5XG4gICAgICogbmVlZCB0byBnbyBiYWNrIHRvIHRoZSBsb2NhbCBjYWNoZSBmb3IgbW9yZSByZXN1bHRzLiBEb2VzIG5vdCBtYWtlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgZG9jIGNoYW5nZXMgdG8gYXBwbHkgdG8gdGhpcyB2aWV3LlxuICAgICAqIEBwYXJhbSBwcmV2aW91c0NoYW5nZXMgLSBJZiB0aGlzIGlzIGJlaW5nIGNhbGxlZCB3aXRoIGEgcmVmaWxsLCB0aGVuIHN0YXJ0XG4gICAgICogICAgICAgIHdpdGggdGhpcyBzZXQgb2YgZG9jcyBhbmQgY2hhbmdlcyBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gICAgICogQHJldHVybnMgYSBuZXcgc2V0IG9mIGRvY3MsIGNoYW5nZXMsIGFuZCByZWZpbGwgZmxhZy5cbiAgICAgKi8gICAgc2EoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdCA/IHQub2EgOiBuZXcgX19QUklWQVRFX0RvY3VtZW50Q2hhbmdlU2V0LCByID0gdCA/IHQucmEgOiB0aGlzLnJhO1xuICAgICAgICBsZXQgaSA9IHQgPyB0Lm11dGF0ZWRLZXlzIDogdGhpcy5tdXRhdGVkS2V5cywgcyA9IHIsIG8gPSAhMTtcbiAgICAgICAgLy8gVHJhY2sgdGhlIGxhc3QgZG9jIGluIGEgKGZ1bGwpIGxpbWl0LiBUaGlzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBzb21lXG4gICAgICAgIC8vIHVwZGF0ZSAoYSBkZWxldGUsIG9yIGFuIHVwZGF0ZSBtb3ZpbmcgYSBkb2MgcGFzdCB0aGUgb2xkIGxpbWl0KSBtaWdodFxuICAgICAgICAvLyBtZWFuIHRoZXJlIGlzIHNvbWUgb3RoZXIgZG9jdW1lbnQgaW4gdGhlIGxvY2FsIGNhY2hlIHRoYXQgZWl0aGVyIHNob3VsZFxuICAgICAgICAvLyBjb21lICgxKSBiZXR3ZWVuIHRoZSBvbGQgbGFzdCBsaW1pdCBkb2MgYW5kIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlXG4gICAgICAgIC8vIGNhc2Ugb2YgdXBkYXRlcywgb3IgKDIpIGFmdGVyIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlIGNhc2Ugb2ZcbiAgICAgICAgLy8gZGVsZXRlcy4gU28gd2Uga2VlcCB0aGlzIGRvYyBhdCB0aGUgb2xkIGxpbWl0IHRvIGNvbXBhcmUgdGhlIHVwZGF0ZXMgdG8uXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBuZXZlciBnZXQgdXNlZCBpbiBhIHJlZmlsbCAod2hlbiBwcmV2aW91c0NoYW5nZXMgaXNcbiAgICAgICAgLy8gc2V0KSwgYmVjYXVzZSB0aGVyZSB3aWxsIG9ubHkgYmUgYWRkcyAtLSBubyBkZWxldGVzIG9yIHVwZGF0ZXMuXG4gICAgICAgIGNvbnN0IF8gPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlICYmIHIuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHIubGFzdCgpIDogbnVsbCwgYSA9IFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSAmJiByLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyByLmZpcnN0KCkgOiBudWxsO1xuICAgICAgICAvLyBEcm9wIGRvY3VtZW50cyBvdXQgdG8gbWVldCBsaW1pdC9saW1pdFRvTGFzdCByZXF1aXJlbWVudC5cbiAgICAgICAgaWYgKGUuaW5vcmRlclRyYXZlcnNhbCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSByLmdldChlKSwgYyA9IF9fUFJJVkFURV9xdWVyeU1hdGNoZXModGhpcy5xdWVyeSwgdCkgPyB0IDogbnVsbCwgbCA9ICEhdSAmJiB0aGlzLm11dGF0ZWRLZXlzLmhhcyh1LmtleSksIGggPSAhIWMgJiYgKGMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgXG4gICAgICAgICAgICAvLyBXZSBvbmx5IGNvbnNpZGVyIGNvbW1pdHRlZCBtdXRhdGlvbnMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmVcbiAgICAgICAgICAgIC8vIG11dGF0ZWQgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgdmlldy5cbiAgICAgICAgICAgIHRoaXMubXV0YXRlZEtleXMuaGFzKGMua2V5KSAmJiBjLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgICAgICAgICBsZXQgUCA9ICExO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgJiYgYykge1xuICAgICAgICAgICAgICAgIHUuZGF0YS5pc0VxdWFsKGMuZGF0YSkgPyBsICE9PSBoICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBjXG4gICAgICAgICAgICAgICAgfSksIFAgPSAhMCkgOiB0aGlzLl9hKHUsIGMpIHx8IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBjXG4gICAgICAgICAgICAgICAgfSksIFAgPSAhMCwgKF8gJiYgdGhpcy5uYShjLCBfKSA+IDAgfHwgYSAmJiB0aGlzLm5hKGMsIGEpIDwgMCkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZG9jIG1vdmVkIGZyb20gaW5zaWRlIHRoZSBsaW1pdCB0byBvdXRzaWRlIHRoZSBsaW1pdC5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IG1lYW5zIHRoZXJlIG1heSBiZSBzb21lIG90aGVyIGRvYyBpbiB0aGUgbG9jYWwgY2FjaGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHNob3VsZCBiZSBpbmNsdWRlZCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgfSBlbHNlICF1ICYmIGMgPyAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGNcbiAgICAgICAgICAgIH0pLCBQID0gITApIDogdSAmJiAhYyAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdVxuICAgICAgICAgICAgfSksIFAgPSAhMCwgKF8gfHwgYSkgJiYgKFxuICAgICAgICAgICAgLy8gQSBkb2Mgd2FzIHJlbW92ZWQgZnJvbSBhIGZ1bGwgbGltaXQgcXVlcnkuIFdlJ2xsIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIHJlcXVlcnkgZnJvbSB0aGUgbG9jYWwgY2FjaGUgdG8gc2VlIGlmIHdlIGtub3cgYWJvdXQgc29tZSBvdGhlclxuICAgICAgICAgICAgLy8gZG9jIHRoYXQgc2hvdWxkIGJlIGluIHRoZSByZXN1bHRzLlxuICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICBQICYmIChjID8gKHMgPSBzLmFkZChjKSwgaSA9IGggPyBpLmFkZChlKSA6IGkuZGVsZXRlKGUpKSA6IChzID0gcy5kZWxldGUoZSksIGkgPSBpLmRlbGV0ZShlKSkpO1xuICAgICAgICB9KSksIG51bGwgIT09IHRoaXMucXVlcnkubGltaXQpIGZvciAoO3Muc2l6ZSA+IHRoaXMucXVlcnkubGltaXQ7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyA9PT0gdGhpcy5xdWVyeS5saW1pdFR5cGUgPyBzLmxhc3QoKSA6IHMuZmlyc3QoKTtcbiAgICAgICAgICAgIHMgPSBzLmRlbGV0ZShlLmtleSksIGkgPSBpLmRlbGV0ZShlLmtleSksIG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByYTogcyxcbiAgICAgICAgICAgIG9hOiBuLFxuICAgICAgICAgICAgemk6IG8sXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogaVxuICAgICAgICB9O1xuICAgIH1cbiAgICBfYShlLCB0KSB7XG4gICAgICAgIC8vIFdlIHN1cHByZXNzIHRoZSBpbml0aWFsIGNoYW5nZSBldmVudCBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSBtb2RpZmllZCBhc1xuICAgICAgICAvLyBwYXJ0IG9mIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgKGUuZy4gd2hlbiB0aGUgdmFsdWUgb2YgYSBzZXJ2ZXIgdHJhbnNmb3JtXG4gICAgICAgIC8vIGlzIGFwcGxpZWQpIGFzIFdhdGNoIHdpbGwgc2VuZCB1cyB0aGUgc2FtZSBkb2N1bWVudCBhZ2Fpbi5cbiAgICAgICAgLy8gQnkgc3VwcHJlc3NpbmcgdGhlIGV2ZW50LCB3ZSBvbmx5IHJhaXNlIHR3byB1c2VyIHZpc2libGUgZXZlbnRzIChvbmUgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpIGluc3RlYWQgb2YgdGhyZWVcbiAgICAgICAgLy8gKG9uZSB3aXRoIGBoYXNQZW5kaW5nV3JpdGVzYCwgdGhlIG1vZGlmaWVkIGRvY3VtZW50IHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KS5cbiAgICAgICAgcmV0dXJuIGUuaGFzTG9jYWxNdXRhdGlvbnMgJiYgdC5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiYgIXQuaGFzTG9jYWxNdXRhdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHZpZXcgd2l0aCB0aGUgZ2l2ZW4gVmlld0RvY3VtZW50Q2hhbmdlcyBhbmQgb3B0aW9uYWxseSB1cGRhdGVzXG4gICAgICogbGltYm8gZG9jcyBhbmQgc3luYyBzdGF0ZSBmcm9tIHRoZSBwcm92aWRlZCB0YXJnZXQgY2hhbmdlLlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIHNldCBvZiBjaGFuZ2VzIHRvIG1ha2UgdG8gdGhlIHZpZXcncyBkb2NzLlxuICAgICAqIEBwYXJhbSB1cGRhdGVMaW1ib0RvY3VtZW50cyAtIFdoZXRoZXIgdG8gdXBkYXRlIGxpbWJvIGRvY3VtZW50cyBiYXNlZCBvblxuICAgICAqICAgICAgICB0aGlzIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q2hhbmdlIC0gQSB0YXJnZXQgY2hhbmdlIHRvIGFwcGx5IGZvciBjb21wdXRpbmcgbGltYm8gZG9jcyBhbmRcbiAgICAgKiAgICAgICAgc3luYyBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBWaWV3Q2hhbmdlIHdpdGggdGhlIGdpdmVuIGRvY3MsIGNoYW5nZXMsIGFuZCBzeW5jIHN0YXRlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIGlPUy9BbmRyb2lkIGNsaWVudHMgYWx3YXlzIGNvbXB1dGUgbGltYm8gZG9jdW1lbnQgY2hhbmdlcy5cbiAgICBhcHBseUNoYW5nZXMoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gdGhpcy5yYTtcbiAgICAgICAgdGhpcy5yYSA9IGUucmEsIHRoaXMubXV0YXRlZEtleXMgPSBlLm11dGF0ZWRLZXlzO1xuICAgICAgICAvLyBTb3J0IGNoYW5nZXMgYmFzZWQgb24gdHlwZSBhbmQgcXVlcnkgY29tcGFyYXRvclxuICAgICAgICBjb25zdCBpID0gZS5vYS5NXygpO1xuICAgICAgICBpLnNvcnQoKChlLCB0KSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUNoYW5nZVR5cGUoZSwgdCkge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBpIGxheWVyLiAgU2luY2Ugd2Ugc29ydCBieSBkb2N1bWVudCBrZXkgYW5kIHRoZW4gY2hhbmdlIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhIGFuZCBtb2RpZmllZCBjaGFuZ2VzIG11c3QgYmUgc29ydGVkIGVxdWl2YWxlbnRseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG9yZGVyKGUpIC0gb3JkZXIodCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKGUudHlwZSwgdC50eXBlKSB8fCB0aGlzLm5hKGUuZG9jLCB0LmRvYykpKSwgdGhpcy5hYShuKTtcbiAgICAgICAgY29uc3QgcyA9IHQgPyB0aGlzLnVhKCkgOiBbXSwgbyA9IDAgPT09IHRoaXMudGEuc2l6ZSAmJiB0aGlzLmN1cnJlbnQgPyAxIC8qIFN5bmNTdGF0ZS5TeW5jZWQgKi8gOiAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyAsIF8gPSBvICE9PSB0aGlzLmVhO1xuICAgICAgICBpZiAodGhpcy5lYSA9IG8sIDAgIT09IGkubGVuZ3RoIHx8IF8pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IG5ldyBWaWV3U25hcHNob3QodGhpcy5xdWVyeSwgZS5yYSwgciwgaSwgZS5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IG8sIF8sIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSwgISFuICYmIG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksXG4gICAgICAgICAgICAgICAgY2E6IHNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2E6IHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgTl8oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IGUgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICByYTogdGhpcy5yYSxcbiAgICAgICAgICAgIG9hOiBuZXcgX19QUklWQVRFX0RvY3VtZW50Q2hhbmdlU2V0LFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IHRoaXMubXV0YXRlZEtleXMsXG4gICAgICAgICAgICB6aTogITFcbiAgICAgICAgfSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyAhMSkpIDoge1xuICAgICAgICAgICAgY2E6IFtdXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgZG9jIGZvciB0aGUgZ2l2ZW4ga2V5IHNob3VsZCBiZSBpbiBsaW1iby5cbiAgICAgKi8gICAgbGEoZSkge1xuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIGVuZCBzYXlzIGl0J3MgcGFydCBvZiB0aGlzIHF1ZXJ5LCBpdCdzIG5vdCBpbiBsaW1iby5cbiAgICAgICAgcmV0dXJuICF0aGlzLlhfLmhhcyhlKSAmJiAoXG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBkb2Vzbid0IHRoaW5rIGl0J3MgYSByZXN1bHQsIHNvIGl0IHNob3VsZG4ndCBiZSBpbiBsaW1iby5cbiAgICAgICAgISF0aGlzLnJhLmhhcyhlKSAmJiAhdGhpcy5yYS5nZXQoZSkuaGFzTG9jYWxNdXRhdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHN5bmNlZERvY3VtZW50cywgY3VycmVudCwgYW5kIGxpbWJvIGRvY3MgYmFzZWQgb24gdGhlIGdpdmVuIGNoYW5nZS5cbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGNoYW5nZXMgdG8gd2hpY2ggZG9jcyBhcmUgaW4gbGltYm8uXG4gICAgICovICAgIGFhKGUpIHtcbiAgICAgICAgZSAmJiAoZS5hZGRlZERvY3VtZW50cy5mb3JFYWNoKChlID0+IHRoaXMuWF8gPSB0aGlzLlhfLmFkZChlKSkpLCBlLm1vZGlmaWVkRG9jdW1lbnRzLmZvckVhY2goKGUgPT4ge30pKSwgXG4gICAgICAgIGUucmVtb3ZlZERvY3VtZW50cy5mb3JFYWNoKChlID0+IHRoaXMuWF8gPSB0aGlzLlhfLmRlbGV0ZShlKSkpLCB0aGlzLmN1cnJlbnQgPSBlLmN1cnJlbnQpO1xuICAgIH1cbiAgICB1YSgpIHtcbiAgICAgICAgLy8gV2UgY2FuIG9ubHkgZGV0ZXJtaW5lIGxpbWJvIGRvY3VtZW50cyB3aGVuIHdlJ3JlIGluLXN5bmMgd2l0aCB0aGUgc2VydmVyLlxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudCkgcmV0dXJuIFtdO1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogRG8gdGhpcyBpbmNyZW1lbnRhbGx5IHNvIHRoYXQgaXQncyBub3QgcXVhZHJhdGljIHdoZW5cbiAgICAgICAgLy8gdXBkYXRpbmcgbWFueSBkb2N1bWVudHMuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudGE7XG4gICAgICAgIHRoaXMudGEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgdGhpcy5yYS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMubGEoZS5rZXkpICYmICh0aGlzLnRhID0gdGhpcy50YS5hZGQoZS5rZXkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBEaWZmIHRoZSBuZXcgbGltYm8gZG9jcyB3aXRoIHRoZSBvbGQgbGltYm8gZG9jcy5cbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMudGEuaGFzKGUpIHx8IHQucHVzaChuZXcgX19QUklWQVRFX1JlbW92ZWRMaW1ib0RvY3VtZW50KGUpKTtcbiAgICAgICAgfSkpLCB0aGlzLnRhLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5oYXMobikgfHwgdC5wdXNoKG5ldyBfX1BSSVZBVEVfQWRkZWRMaW1ib0RvY3VtZW50KG4pKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3IHdpdGggdGhlIHN0YXRlIHJlYWQgZnJvbVxuICAgICAqIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogV2UgdXBkYXRlIHRoZSBxdWVyeSB2aWV3IHdoZW5ldmVyIGEgY2xpZW50J3MgcHJpbWFyeSBzdGF0dXMgY2hhbmdlczpcbiAgICAgKiAtIFdoZW4gYSBjbGllbnQgdHJhbnNpdGlvbnMgZnJvbSBwcmltYXJ5IHRvIHNlY29uZGFyeSwgaXQgY2FuIG1pc3NcbiAgICAgKiAgIExvY2FsU3RvcmFnZSB1cGRhdGVzIGFuZCBpdHMgcXVlcnkgdmlld3MgbWF5IHRlbXBvcmFyaWx5IG5vdCBiZVxuICAgICAqICAgc3luY2hyb25pemVkIHdpdGggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICogLSBGb3Igc2Vjb25kYXJ5IHRvIHByaW1hcnkgdHJhbnNpdGlvbnMsIHRoZSBjbGllbnQgbmVlZHMgdG8gdXBkYXRlIHRoZSBsaXN0XG4gICAgICogICBvZiBgc3luY2VkRG9jdW1lbnRzYCBzaW5jZSBzZWNvbmRhcnkgY2xpZW50cyB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3NcbiAgICAgKiAgIGJhc2VkIHB1cmVseSBvbiBzeW50aGVzaXplZCBSZW1vdGVFdmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQuZG9jdW1lbnRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBhY2NvcmRpbmdcbiAgICAgKiB0byB0aGUgTG9jYWxTdG9yZS5cbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQucmVtb3RlS2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGVcbiAgICAgKiBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tlbmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVmlld0NoYW5nZSB0aGF0IHJlc3VsdGVkIGZyb20gdGhpcyBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBoYShlKSB7XG4gICAgICAgIHRoaXMuWF8gPSBlLnNzLCB0aGlzLnRhID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNhKGUuZG9jdW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKHQsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIFBhKCkge1xuICAgICAgICByZXR1cm4gVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzKHRoaXMucXVlcnksIHRoaXMucmEsIHRoaXMubXV0YXRlZEtleXMsIDAgLyogU3luY1N0YXRlLkxvY2FsICovID09PSB0aGlzLmVhLCB0aGlzLmhhc0NhY2hlZFJlc3VsdHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBRdWVyeVZpZXcgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIHRoYXQgU3luY0VuZ2luZSBuZWVkcyB0byBrZWVwIHRyYWNrIG9mIGZvclxuICogYSBwYXJ0aWN1bGFyIHF1ZXJ5LlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIExpbWJvUmVzb2x1dGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtleSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRvIHRydWUgb25jZSB3ZSd2ZSByZWNlaXZlZCBhIGRvY3VtZW50LiBUaGlzIGlzIHVzZWQgaW5cbiAgICAgICAgICogZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCgpIGFuZCB1bHRpbWF0ZWx5IHVzZWQgYnkgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIHRvXG4gICAgICAgICAqIGRlY2lkZSB3aGV0aGVyIGl0IG5lZWRzIHRvIG1hbnVmYWN0dXJlIGEgZGVsZXRlIGV2ZW50IGZvciB0aGUgdGFyZ2V0IG9uY2VcbiAgICAgICAgICogdGhlIHRhcmdldCBpcyBDVVJSRU5ULlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5JYSA9ICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgU3luY0VuZ2luZWAgY29vcmRpbmF0aW5nIHdpdGggb3RoZXIgcGFydHMgb2YgU0RLLlxuICpcbiAqIFRoZSBwYXJ0cyBvZiBTeW5jRW5naW5lIHRoYXQgYWN0IGFzIGEgY2FsbGJhY2sgdG8gUmVtb3RlU3RvcmUgbmVlZCB0byBiZVxuICogcmVnaXN0ZXJlZCBpbmRpdmlkdWFsbHkuIFRoaXMgaXMgZG9uZSBpbiBgc3luY0VuZ2luZVdyaXRlKClgIGFuZFxuICogYHN5bmNFbmdpbmVMaXN0ZW4oKWAgKGFzIHdlbGwgYXMgYGFwcGx5UHJpbWFyeVN0YXRlKClgKSBhcyB0aGVzZSBtZXRob2RzXG4gKiBzZXJ2ZSBhcyBlbnRyeSBwb2ludHMgdG8gUmVtb3RlU3RvcmUncyBmdW5jdGlvbmFsaXR5LlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovIGNsYXNzIF9fUFJJVkFURV9TeW5jRW5naW5lSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgIHIsIGksIHMpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5yZW1vdGVTdG9yZSA9IHQsIHRoaXMuZXZlbnRNYW5hZ2VyID0gbiwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHIsIFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyA9IHMsIHRoaXMuVGEgPSB7fSwgdGhpcy5FYSA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkoZSkpLCBfX1BSSVZBVEVfcXVlcnlFcXVhbHMpLCBcbiAgICAgICAgdGhpcy5kYSA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGtleXMgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIGluIGxpbWJvIGZvciB3aGljaCB3ZSBoYXZlbid0IHlldCBzdGFydGVkIGFcbiAgICAgICAgICogbGltYm8gcmVzb2x1dGlvbiBxdWVyeS4gVGhlIHN0cmluZ3MgaW4gdGhpcyBzZXQgYXJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAgICAgKiBga2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKClgIHdoZXJlIGBrZXlgIGlzIGEgYERvY3VtZW50S2V5YCBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBgU2V0YCB0eXBlIHdhcyBjaG9zZW4gYmVjYXVzZSBpdCBwcm92aWRlcyBlZmZpY2llbnQgbG9va3VwIGFuZCByZW1vdmFsXG4gICAgICAgICAqIG9mIGFyYml0cmFyeSBlbGVtZW50cyBhbmQgaXQgYWxzbyBtYWludGFpbnMgaW5zZXJ0aW9uIG9yZGVyLCBwcm92aWRpbmcgdGhlXG4gICAgICAgICAqIGRlc2lyZWQgcXVldWUtbGlrZSBGSUZPIHNlbWFudGljcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQWEgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSB0YXJnZXQgSUQgZm9yIGVhY2ggZG9jdW1lbnQgdGhhdCBpcyBpbiBsaW1ibyB3aXRoIGFuXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlJhID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYW4gYWN0aXZlIGxpbWJvIHJlc29sdXRpb24gZm9yIGVhY2hcbiAgICAgICAgICogYWN0aXZlIHRhcmdldCBJRCB0aGF0IHdhcyBzdGFydGVkIGZvciB0aGUgcHVycG9zZSBvZiBsaW1ibyByZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5WYSA9IG5ldyBNYXAsIHRoaXMubWEgPSBuZXcgX19QUklWQVRFX1JlZmVyZW5jZVNldCwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjb21wbGV0aW9uIGhhbmRsZXJzLCBpbmRleGVkIGJ5IFVzZXIgYW5kIEJhdGNoSWQuICovXG4gICAgICAgIHRoaXMuZmEgPSB7fSwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjYWxsYmFja3Mgd2FpdGluZyBmb3IgYWxsIHBlbmRpbmcgd3JpdGVzIHRvIGJlIGFja25vd2xlZGdlZC4gKi9cbiAgICAgICAgdGhpcy5nYSA9IG5ldyBNYXAsIHRoaXMucGEgPSBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IuT24oKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXG4gICAgICAgIHRoaXMueWEgPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBpc1ByaW1hcnlDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiAhMCA9PT0gdGhpcy55YTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxuICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxuICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgaW5pdGlhbCBzbmFwc2hvdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVMaXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MoZSk7XG4gICAgbGV0IHIsIGk7XG4gICAgY29uc3QgcyA9IG4uRWEuZ2V0KHQpO1xuICAgIGlmIChzKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcbiAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcbiAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cbiAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xuICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcbiAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cbiAgICByID0gcy50YXJnZXRJZCwgbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHIpLCBpID0gcy52aWV3LlBhKCk7IGVsc2Uge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChuLmxvY2FsU3RvcmUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKSwgcyA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldChlLnRhcmdldElkKTtcbiAgICAgICAgciA9IGUudGFyZ2V0SWQsIGkgPSBhd2FpdCBfX1BSSVZBVEVfaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QobiwgdCwgciwgXCJjdXJyZW50XCIgPT09IHMsIGUucmVzdW1lVG9rZW4pLCBcbiAgICAgICAgbi5pc1ByaW1hcnlDbGllbnQgJiYgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKG4ucmVtb3RlU3RvcmUsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB2aWV3IGZvciBhIHByZXZpb3VzbHkgdW5rbm93biBxdWVyeSBhbmQgY29tcHV0ZXMgaXRzIGluaXRpYWxcbiAqIHNuYXBzaG90LlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChlLCB0LCBuLCByLCBpKSB7XG4gICAgLy8gUE9SVElORyBOT1RFOiBPbiBXZWIgb25seSwgd2UgaW5qZWN0IHRoZSBjb2RlIHRoYXQgcmVnaXN0ZXJzIG5ldyBMaW1ib1xuICAgIC8vIHRhcmdldHMgYmFzZWQgb24gdmlldyBjaGFuZ2VzLiBUaGlzIGFsbG93cyB1cyB0byBvbmx5IGRlcGVuZCBvbiBMaW1ib1xuICAgIC8vIGNoYW5nZXMgd2hlbiB1c2VyIGNvZGUgaW5jbHVkZXMgcXVlcmllcy5cbiAgICBlLndhID0gKHQsIG4sIHIpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURvY0NoYW5nZXMoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IHQudmlldy5zYShuKTtcbiAgICAgICAgaS56aSAmJiAoXG4gICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxuICAgICAgICAvLyB0byByZS1ydW4gdGhlIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIHRvIG1ha2Ugc3VyZSB3ZVxuICAgICAgICAvLyBkaWRuJ3QgbG9zZSBhbnkgZ29vZCBkb2NzIHRoYXQgaGFkIGJlZW4gcGFzdCB0aGUgbGltaXQuXG4gICAgICAgIGkgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLmxvY2FsU3RvcmUsIHQucXVlcnksIFxuICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICExKS50aGVuKCgoe2RvY3VtZW50czogZX0pID0+IHQudmlldy5zYShlLCBpKSkpKTtcbiAgICAgICAgY29uc3QgcyA9IHIgJiYgci50YXJnZXRDaGFuZ2VzLmdldCh0LnRhcmdldElkKSwgbyA9IHQudmlldy5hcHBseUNoYW5nZXMoaSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyBlLmlzUHJpbWFyeUNsaWVudCwgcyk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdXBkYXRlVHJhY2tlZExpbWJvcyhlLCB0LnRhcmdldElkLCBvLmNhKSwgby5zbmFwc2hvdDtcbiAgICB9KGUsIHQsIG4sIHIpO1xuICAgIGNvbnN0IHMgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLmxvY2FsU3RvcmUsIHQsIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBvID0gbmV3IF9fUFJJVkFURV9WaWV3KHQsIHMuc3MpLCBfID0gby5zYShzLmRvY3VtZW50cyksIGEgPSBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHIgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gZS5vbmxpbmVTdGF0ZSwgaSksIHUgPSBvLmFwcGx5Q2hhbmdlcyhfLCBcbiAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gZS5pc1ByaW1hcnlDbGllbnQsIGEpO1xuICAgIF9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zKGUsIG4sIHUuY2EpO1xuICAgIGNvbnN0IGMgPSBuZXcgX19QUklWQVRFX1F1ZXJ5Vmlldyh0LCBuLCBvKTtcbiAgICByZXR1cm4gZS5FYS5zZXQodCwgYyksIGUuZGEuaGFzKG4pID8gZS5kYS5nZXQobikucHVzaCh0KSA6IGUuZGEuc2V0KG4sIFsgdCBdKSwgdS5zbmFwc2hvdDtcbn1cblxuLyoqIFN0b3BzIGxpc3RlbmluZyB0byB0aGUgcXVlcnkuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5FYS5nZXQodCksIGkgPSBuLmRhLmdldChyLnRhcmdldElkKTtcbiAgICBpZiAoaS5sZW5ndGggPiAxKSByZXR1cm4gbi5kYS5zZXQoci50YXJnZXRJZCwgaS5maWx0ZXIoKGUgPT4gIV9fUFJJVkFURV9xdWVyeUVxdWFscyhlLCB0KSkpKSwgXG4gICAgdm9pZCBuLkVhLmRlbGV0ZSh0KTtcbiAgICAvLyBObyBvdGhlciBxdWVyaWVzIGFyZSBtYXBwZWQgdG8gdGhlIHRhcmdldCwgY2xlYW4gdXAgdGhlIHF1ZXJ5IGFuZCB0aGUgdGFyZ2V0LlxuICAgICAgICBpZiAobi5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcbiAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChyLnRhcmdldElkKTtcbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHIudGFyZ2V0SWQpIHx8IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChuLmxvY2FsU3RvcmUsIHIudGFyZ2V0SWQsIFxuICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShyLnRhcmdldElkKSwgX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4obi5yZW1vdGVTdG9yZSwgci50YXJnZXRJZCksIFxuICAgICAgICAgICAgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQobiwgci50YXJnZXRJZCk7XG4gICAgICAgIH0pKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbiAgICB9IGVsc2UgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQobiwgci50YXJnZXRJZCksIGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChuLmxvY2FsU3RvcmUsIHIudGFyZ2V0SWQsIFxuICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApO1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxuICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XG4gKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cbiAqXG4gKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcbiAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxuICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcbiAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVdyaXRlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX3N5bmNFbmdpbmVFbnN1cmVXcml0ZUNhbGxiYWNrcyhlKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVXcml0ZUxvY2FsbHkoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBUaW1lc3RhbXAubm93KCksIGkgPSB0LnJlZHVjZSgoKGUsIHQpID0+IGUuYWRkKHQua2V5KSksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICAgICAgICAgIGxldCBzLCBvO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb2NhbGx5IHdyaXRlIG11dGF0aW9uc1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmlndXJlIG91dCB3aGljaCBrZXlzIGRvIG5vdCBoYXZlIGEgcmVtb3RlIHZlcnNpb24gaW4gdGhlIGNhY2hlLCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gaXMgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgcmlnaHQgb3ZlcmxheSBtdXRhdGlvbjogaWYgbm8gcmVtb3RlIHZlcnNpb25cbiAgICAgICAgICAgICAgICAvLyBwcmVzZW50cywgd2UgZG8gbm90IG5lZWQgdG8gY3JlYXRlIG92ZXJsYXlzIGFzIHBhdGNoIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPKE92ZXJsYXkpOiBJcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZGV0ZXJtaW5lIHRoaXM/IFVzaW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vICBkb2N1bWVudCB2ZXJzaW9uIGRvZXMgbm90IHdvcmsgYmVjYXVzZSBsb2NhbCBtdXRhdGlvbnMgc2V0IHRoZW0gYmFja1xuICAgICAgICAgICAgICAgIC8vICB0byAwLlxuICAgICAgICAgICAgICAgIGxldCBfID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBhID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uWGkuZ2V0RW50cmllcyhlLCBpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgXyA9IGUsIF8uZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuaXNWYWxpZERvY3VtZW50KCkgfHwgKGEgPSBhLmFkZChlKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXRPdmVybGF5ZWREb2N1bWVudHMoZSwgXykpKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IGk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgcmVjb3JkIHRoZSBiYXNlIHN0YXRlIGluIGEgc2VwYXJhdGUgcGF0Y2ggbXV0YXRpb24uIFRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbXV0YXRpb25FeHRyYWN0QmFzZVZhbHVlKGUsIHMuZ2V0KGUua2V5KS5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHQgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oZS5rZXksIHQsIF9fUFJJVkFURV9leHRyYWN0RmllbGRNYXNrKHQudmFsdWUubWFwVmFsdWUpLCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUuYWRkTXV0YXRpb25CYXRjaChlLCByLCBvLCB0KTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG8gPSB0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gdC5hcHBseVRvTG9jYWxEb2N1bWVudFNldChzLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUuc2F2ZU92ZXJsYXlzKGUsIHQuYmF0Y2hJZCwgcik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLnRoZW4oKCgpID0+ICh7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogby5iYXRjaElkLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IF9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwKHMpXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KHIubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKGUuYmF0Y2hJZCksIGZ1bmN0aW9uIF9fUFJJVkFURV9hZGRNdXRhdGlvbkNhbGxiYWNrKGUsIHQsIG4pIHtcbiAgICAgICAgICAgIGxldCByID0gZS5mYVtlLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgICAgICAgICAgciB8fCAociA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpKTtcbiAgICAgICAgICAgIHIgPSByLmluc2VydCh0LCBuKSwgZS5mYVtlLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gcjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlc29sdmVzIG9yIHJlamVjdHMgdGhlIHVzZXIgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgdGhlbiBkaXNjYXJkc1xuICogaXQuXG4gKi8gKHIsIGUuYmF0Y2hJZCwgbiksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShyLCBlLmNoYW5nZXMpLCBcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKHIucmVtb3RlU3RvcmUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgcGVyc2lzdCB0aGUgbXV0YXRpb24sIHdlIHJlamVjdCB0aGUgdXNlciBjYWxsYmFjayBhbmRcbiAgICAgICAgLy8gZG9uJ3Qgc2VuZCB0aGUgbXV0YXRpb24uIFRoZSB1c2VyIGNhbiB0aGVuIHJldHJ5IHRoZSB3cml0ZS5cbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIFwiRmFpbGVkIHRvIHBlcnNpc3Qgd3JpdGVcIik7XG4gICAgICAgIG4ucmVqZWN0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIG9uZSByZW1vdGUgZXZlbnQgdG8gdGhlIHN5bmMgZW5naW5lLCBub3RpZnlpbmcgYW55IHZpZXdzIG9mIHRoZVxuICogY2hhbmdlcywgYW5kIHJlbGVhc2luZyBhbnkgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgd291bGQgYmVjb21lXG4gKiB2aXNpYmxlIGJlY2F1c2Ugb2YgdGhlIHNuYXBzaG90IHZlcnNpb24gdGhlIHJlbW90ZSBldmVudCBjb250YWlucy5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFwcGx5UmVtb3RlRXZlbnRUb0xvY2FsQ2FjaGUobi5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXG4gICAgICAgICAgICAgICAgdC50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gbi5WYS5nZXQodCk7XG4gICAgICAgICAgICByICYmIChcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcbiAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUuYWRkZWREb2N1bWVudHMuc2l6ZSArIGUubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIGUucmVtb3ZlZERvY3VtZW50cy5zaXplIDw9IDEpLCBcbiAgICAgICAgICAgIGUuYWRkZWREb2N1bWVudHMuc2l6ZSA+IDAgPyByLklhID0gITAgOiBlLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgPiAwID8gX19QUklWQVRFX2hhcmRBc3NlcnQoci5JYSkgOiBlLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDAgJiYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHIuSWEpLCBcbiAgICAgICAgICAgIHIuSWEgPSAhMSkpO1xuICAgICAgICB9KSksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShuLCBlLCB0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXG4gKiB0aGUgY2hhbmdlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlPbmxpbmVTdGF0ZUNoYW5nZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgLy8gSWYgd2UgYXJlIHRoZSBzZWNvbmRhcnkgY2xpZW50LCB3ZSBleHBsaWNpdGx5IGlnbm9yZSB0aGUgcmVtb3RlIHN0b3JlJ3NcbiAgICAvLyBvbmxpbmUgc3RhdGUgKHRoZSBsb2NhbCBjbGllbnQgbWF5IGdvIG9mZmxpbmUsIGV2ZW4gdGhvdWdoIHRoZSBwcmltYXJ5XG4gICAgLy8gdGFiIHJlbWFpbnMgb25saW5lKSBhbmQgb25seSBhcHBseSB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUgZnJvbVxuICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBpZiAoci5pc1ByaW1hcnlDbGllbnQgJiYgMCAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5SZW1vdGVTdG9yZSAqLyA9PT0gbiB8fCAhci5pc1ByaW1hcnlDbGllbnQgJiYgMSAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSAqLyA9PT0gbikge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHIuRWEuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSByLnZpZXcuTl8odCk7XG4gICAgICAgICAgICBpLnNuYXBzaG90ICYmIGUucHVzaChpLnNuYXBzaG90KTtcbiAgICAgICAgfSkpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25PbmxpbmVTdGF0ZUNoYW5nZShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIG4ub25saW5lU3RhdGUgPSB0O1xuICAgICAgICAgICAgbGV0IHIgPSAhMTtcbiAgICAgICAgICAgIG4ucXVlcmllcy5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBuLmxpc3RlbmVycykgXG4gICAgICAgICAgICAgICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgICAgICAgICAgICAgZS5OXyh0KSAmJiAociA9ICEwKTtcbiAgICAgICAgICAgIH0pKSwgciAmJiBfX1BSSVZBVEVfcmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudChuKTtcbiAgICAgICAgfShyLmV2ZW50TWFuYWdlciwgdCksIGUubGVuZ3RoICYmIHIuVGEucl8oZSksIHIub25saW5lU3RhdGUgPSB0LCByLmlzUHJpbWFyeUNsaWVudCAmJiByLnNoYXJlZENsaWVudFN0YXRlLnNldE9ubGluZVN0YXRlKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWplY3RzIHRoZSBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXRJRC4gVGhpcyBjYW4gYmUgdHJpZ2dlcmVkIGJ5IHRoZVxuICogYmFja2VuZCBmb3IgYW55IGFjdGl2ZSB0YXJnZXQuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0gdGFyZ2V0SWQgLSBUaGUgdGFyZ2V0SUQgY29ycmVzcG9uZHMgdG8gb25lIHByZXZpb3VzbHkgaW5pdGlhdGVkIGJ5IHRoZVxuICogdXNlciBhcyBwYXJ0IG9mIFRhcmdldERhdGEgcGFzc2VkIHRvIGxpc3RlbigpIG9uIFJlbW90ZVN0b3JlLlxuICogQHBhcmFtIGVyciAtIEEgZGVzY3JpcHRpb24gb2YgdGhlIGNvbmRpdGlvbiB0aGF0IGhhcyBmb3JjZWQgdGhlIHJlamVjdGlvbi5cbiAqIE5lYXJseSBhbHdheXMgdGhpcyB3aWxsIGJlIGFuIGluZGljYXRpb24gdGhhdCB0aGUgdXNlciBpcyBubyBsb25nZXJcbiAqIGF1dGhvcml6ZWQgdG8gc2VlIHRoZSBkYXRhIG1hdGNoaW5nIHRoZSB0YXJnZXQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RMaXN0ZW4oZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZSh0LCBcInJlamVjdGVkXCIsIG4pO1xuICAgIGNvbnN0IGkgPSByLlZhLmdldCh0KSwgcyA9IGkgJiYgaS5rZXk7XG4gICAgaWYgKHMpIHtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IFdlIHJlYWxseSBvbmx5IHNob3VsZCBkbyB0aGUgZm9sbG93aW5nIG9uIHBlcm1pc3Npb25cbiAgICAgICAgLy8gZGVuaWVkIGVycm9ycywgYnV0IHdlIGRvbid0IGhhdmUgdGhlIGNhdXNlIGNvZGUgaGVyZS5cbiAgICAgICAgLy8gSXQncyBhIGxpbWJvIGRvYy4gQ3JlYXRlIGEgc3ludGhldGljIGV2ZW50IHNheWluZyBpdCB3YXMgZGVsZXRlZC5cbiAgICAgICAgLy8gVGhpcyBpcyBraW5kIG9mIGEgaGFjay4gSWRlYWxseSwgd2Ugd291bGQgaGF2ZSBhIG1ldGhvZCBpbiB0aGUgbG9jYWxcbiAgICAgICAgLy8gc3RvcmUgdG8gcHVyZ2UgYSBkb2N1bWVudC4gSG93ZXZlciwgaXQgd291bGQgYmUgdHJpY2t5IHRvIGtlZXAgYWxsIG9mXG4gICAgICAgIC8vIHRoZSBsb2NhbCBzdG9yZSdzIGludmFyaWFudHMgd2l0aCBhbm90aGVyIG1ldGhvZC5cbiAgICAgICAgbGV0IGUgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuICAgICAgICAvLyBUT0RPKGIvMjE3MTg5MjE2KTogVGhpcyBsaW1ibyBkb2N1bWVudCBzaG91bGQgaWRlYWxseSBoYXZlIGEgcmVhZCB0aW1lLFxuICAgICAgICAvLyBzbyB0aGF0IGl0IGlzIHBpY2tlZCB1cCBieSBhbnkgcmVhZC10aW1lIGJhc2VkIHNjYW5zLiBUaGUgYmFja2VuZCxcbiAgICAgICAgLy8gaG93ZXZlciwgZG9lcyBub3Qgc2VuZCBhIHJlYWQgdGltZSBmb3IgdGFyZ2V0IHJlbW92YWxzLlxuICAgICAgICAgICAgICAgIGUgPSBlLmluc2VydChzLCBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChzLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpKTtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLmFkZChzKSwgaSA9IG5ldyBSZW1vdGVFdmVudChTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiB0YXJnZXRDaGFuZ2VzPSAqLyBuZXcgTWFwLCBcbiAgICAgICAgLyogdGFyZ2V0TWlzbWF0Y2hlcz0gKi8gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIGUsIG4pO1xuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQociwgaSksIFxuICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cbiAgICAgICAgLy8gV2Ugb25seSByZW1vdmUgaXQgZnJvbSBib29ra2VlcGluZyBhZnRlciB3ZSBzdWNjZXNzZnVsbHkgYXBwbGllZCB0aGVcbiAgICAgICAgLy8gUmVtb3RlRXZlbnQuIElmIGBhcHBseVJlbW90ZUV2ZW50KClgIHRocm93cywgd2Ugd2FudCB0byByZS1saXN0ZW4gdG9cbiAgICAgICAgLy8gdGhpcyBxdWVyeSB3aGVuIHRoZSBSZW1vdGVTdG9yZSByZXN0YXJ0cyB0aGUgV2F0Y2ggc3RyZWFtLCB3aGljaCBzaG91bGRcbiAgICAgICAgLy8gcmUtdHJpZ2dlciB0aGUgdGFyZ2V0IGZhaWx1cmUuXG4gICAgICAgIHIuUmEgPSByLlJhLnJlbW92ZShzKSwgci5WYS5kZWxldGUodCksIF9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zKHIpO1xuICAgIH0gZWxzZSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoci5sb2NhbFN0b3JlLCB0LCBcbiAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4gX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQociwgdCwgbikpKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVN1Y2Nlc3NmdWxXcml0ZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSB0LmJhdGNoLmJhdGNoSWQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWNrbm93bGVkZ2VCYXRjaChuLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodFxuICAgICAgICAvLyB1cCksIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuXG4gICAgICAgIC8vIGJlZm9yZSBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKG4sIHIsIC8qZXJyb3I9Ki8gbnVsbCksIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhuLCByKSwgXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShyLCBcImFja25vd2xlZGdlZFwiKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0RmFpbGVkV3JpdGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlamVjdEJhdGNoKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWplY3QgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5sb29rdXBNdXRhdGlvbkJhdGNoKGUsIHQpLm5leHQoKHQgPT4gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgIT09IHQpLCBcbiAgICAgICAgICAgICAgICByID0gdC5rZXlzKCksIG4ubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQpKSkpLm5leHQoKCgpID0+IG4ubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKSkpLm5leHQoKCgpID0+IG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUucmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKGUsIHIsIHQpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhlLCByKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKGUsIHIpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXJnZXN0IChsYXRlc3QpIGJhdGNoIGlkIGluIG11dGF0aW9uIHF1ZXVlIHRoYXQgaXMgcGVuZGluZ1xuICogc2VydmVyIHJlc3BvbnNlLlxuICpcbiAqIFJldHVybnMgYEJBVENISURfVU5LTk9XTmAgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICovIChyLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodCB1cCksXG4gICAgICAgIC8vIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuIGJlZm9yZVxuICAgICAgICAvLyBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKHIsIHQsIG4pLCBfX1BSSVZBVEVfdHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MociwgdCksIFxuICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUodCwgXCJyZWplY3RlZFwiLCBuKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKHIsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVSZWdpc3RlclBlbmRpbmdXcml0ZXNDYWxsYmFjayhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgX19QUklWQVRFX2NhblVzZU5ldHdvcmsobi5yZW1vdGVTdG9yZSkgfHwgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIlRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLiBUaGUgdGFzayByZXR1cm5lZCBieSAnYXdhaXRQZW5kaW5nV3JpdGVzKCknIHdpbGwgbm90IGNvbXBsZXRlIHVudGlsIHRoZSBuZXR3b3JrIGlzIGVuYWJsZWQuXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICByZXR1cm4gdC5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBoaWdoZXN0IHVuYWNrbm93bGVkZ2VkIGJhdGNoIGlkXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gdC5tdXRhdGlvblF1ZXVlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoZSkpKTtcbiAgICAgICAgfShuLmxvY2FsU3RvcmUpO1xuICAgICAgICBpZiAoLTEgPT09IGUpIFxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXG4gICAgICAgIHJldHVybiB2b2lkIHQucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCByID0gbi5nYS5nZXQoZSkgfHwgW107XG4gICAgICAgIHIucHVzaCh0KSwgbi5nYS5zZXQoZSwgcik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgXCJJbml0aWFsaXphdGlvbiBvZiB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIG9wZXJhdGlvbiBmYWlsZWRcIik7XG4gICAgICAgIHQucmVqZWN0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2FsbGJhY2tzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHRoaXMgYmF0Y2ggaWQgdG8gZ2V0IGFja25vd2xlZGdlZCBieSBzZXJ2ZXIsXG4gKiBpZiB0aGVyZSBhcmUgYW55LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhlLCB0KSB7XG4gICAgKGUuZ2EuZ2V0KHQpIHx8IFtdKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgZS5yZXNvbHZlKCk7XG4gICAgfSkpLCBlLmdhLmRlbGV0ZSh0KTtcbn1cblxuLyoqIFJlamVjdCBhbGwgb3V0c3RhbmRpbmcgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHRvIGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcHJvY2Vzc1VzZXJDYWxsYmFjayhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbGV0IGkgPSByLmZhW3IuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgLy8gTk9URTogTXV0YXRpb25zIHJlc3RvcmVkIGZyb20gcGVyc2lzdGVuY2Ugd29uJ3QgaGF2ZSBjYWxsYmFja3MsIHNvIGl0J3NcbiAgICAvLyBva2F5IGZvciB0aGVyZSB0byBiZSBubyBjYWxsYmFjayBmb3IgdGhpcyBJRC5cbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgY29uc3QgZSA9IGkuZ2V0KHQpO1xuICAgICAgICBlICYmIChuID8gZS5yZWplY3QobikgOiBlLnJlc29sdmUoKSwgaSA9IGkucmVtb3ZlKHQpKSwgci5mYVtyLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gaTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KGUsIHQsIG4gPSBudWxsKSB7XG4gICAgZS5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpO1xuICAgIGZvciAoY29uc3QgciBvZiBlLmRhLmdldCh0KSkgZS5FYS5kZWxldGUociksIG4gJiYgZS5UYS5TYShyLCBuKTtcbiAgICBpZiAoZS5kYS5kZWxldGUodCksIGUuaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIGUubWEuQXIodCkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLm1hLmNvbnRhaW5zS2V5KHQpIHx8IFxuICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3ZlTGltYm9UYXJnZXQoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVMaW1ib1RhcmdldChlLCB0KSB7XG4gICAgZS5BYS5kZWxldGUodC5wYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC4gSW4gdGhhdCBjYXNlLFxuICAgIC8vIHRoZSBrZXkgd29uJ3QgZXhpc3QgaW4gYGxpbWJvVGFyZ2V0c0J5S2V5YC4gT25seSBkbyB0aGUgY2xlYW51cCBpZiB3ZSBzdGlsbCBoYXZlIHRoZSB0YXJnZXQuXG4gICAgY29uc3QgbiA9IGUuUmEuZ2V0KHQpO1xuICAgIG51bGwgIT09IG4gJiYgKF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKGUucmVtb3RlU3RvcmUsIG4pLCBlLlJhID0gZS5SYS5yZW1vdmUodCksIFxuICAgIGUuVmEuZGVsZXRlKG4pLCBfX1BSSVZBVEVfcHVtcEVucXVldWVkTGltYm9SZXNvbHV0aW9ucyhlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zKGUsIHQsIG4pIHtcbiAgICBmb3IgKGNvbnN0IHIgb2YgbikgaWYgKHIgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQWRkZWRMaW1ib0RvY3VtZW50KSBlLm1hLmFkZFJlZmVyZW5jZShyLmtleSwgdCksIFxuICAgIF9fUFJJVkFURV90cmFja0xpbWJvQ2hhbmdlKGUsIHIpOyBlbHNlIGlmIChyIGluc3RhbmNlb2YgX19QUklWQVRFX1JlbW92ZWRMaW1ib0RvY3VtZW50KSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86IFwiICsgci5rZXkpLCBlLm1hLnJlbW92ZVJlZmVyZW5jZShyLmtleSwgdCk7XG4gICAgICAgIGUubWEuY29udGFpbnNLZXkoci5rZXkpIHx8IFxuICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgX19QUklWQVRFX3JlbW92ZUxpbWJvVGFyZ2V0KGUsIHIua2V5KTtcbiAgICB9IGVsc2UgZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdHJhY2tMaW1ib0NoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQua2V5LCByID0gbi5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIGUuUmEuZ2V0KG4pIHx8IGUuQWEuaGFzKHIpIHx8IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTeW5jRW5naW5lXCIsIFwiTmV3IGRvY3VtZW50IGluIGxpbWJvOiBcIiArIG4pLCBcbiAgICBlLkFhLmFkZChyKSwgX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMoZSkpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBsaXN0ZW5zIGZvciBkb2N1bWVudHMgaW4gbGltYm8gdGhhdCBhcmUgZW5xdWV1ZWQgZm9yIHJlc29sdXRpb24sXG4gKiBzdWJqZWN0IHRvIGEgbWF4aW11bSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucy5cbiAqXG4gKiBXaXRob3V0IGJvdW5kaW5nIHRoZSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucywgdGhlIHNlcnZlciBjYW4gZmFpbFxuICogd2l0aCBcInJlc291cmNlIGV4aGF1c3RlZFwiIGVycm9ycyB3aGljaCBjYW4gbGVhZCB0byBwYXRob2xvZ2ljYWwgY2xpZW50XG4gKiBiZWhhdmlvciBhcyBzZWVuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI2ODMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMoZSkge1xuICAgIGZvciAoO2UuQWEuc2l6ZSA+IDAgJiYgZS5SYS5zaXplIDwgZS5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczsgKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLkFhLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgZS5BYS5kZWxldGUodCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCkpLCByID0gZS5wYS5uZXh0KCk7XG4gICAgICAgIGUuVmEuc2V0KHIsIG5ldyBMaW1ib1Jlc29sdXRpb24obikpLCBlLlJhID0gZS5SYS5pbnNlcnQobiwgciksIF9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbihlLnJlbW90ZVN0b3JlLCBuZXcgVGFyZ2V0RGF0YShfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKG4ucGF0aCkpLCByLCBcIlRhcmdldFB1cnBvc2VMaW1ib1Jlc29sdXRpb25cIiAvKiBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiAqLyAsIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSkpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IFtdLCBzID0gW10sIG8gPSBbXTtcbiAgICByLkVhLmlzRW1wdHkoKSB8fCAoci5FYS5mb3JFYWNoKCgoZSwgXykgPT4ge1xuICAgICAgICBvLnB1c2goci53YShfLCB0LCBuKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB2aWV3cyBpZiB0aGVyZSBhcmUgYWN0dWFsIGNoYW5nZXMuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgY2hhbmdlcywgb3Igd2UgYXJlIGhhbmRsaW5nIGEgZ2xvYmFsIHNuYXBzaG90LCBub3RpZnlcbiAgICAgICAgICAgIC8vIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSBxdWVyeSBzdGF0ZS5cbiAgICAgICAgICAgIChlIHx8IG4pICYmIHIuaXNQcmltYXJ5Q2xpZW50ICYmIHIuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShfLnRhcmdldElkLCAobnVsbCA9PSBlID8gdm9pZCAwIDogZS5mcm9tQ2FjaGUpID8gXCJub3QtY3VycmVudFwiIDogXCJjdXJyZW50XCIpLCBcbiAgICAgICAgICAgIGUpIHtcbiAgICAgICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9Mb2NhbFZpZXdDaGFuZ2VzLnFpKF8udGFyZ2V0SWQsIGUpO1xuICAgICAgICAgICAgICAgIHMucHVzaCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKTtcbiAgICB9KSksIGF3YWl0IFByb21pc2UuYWxsKG8pLCByLlRhLnJfKGkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZU5vdGlmeUxvY2FsVmlld0NoYW5nZXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJub3RpZnlMb2NhbFZpZXdDaGFuZ2VzXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQuTGksIChyID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKGUsIHQudGFyZ2V0SWQsIHIpKSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godC5raSwgKHIgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UoZSwgdC50YXJnZXRJZCwgcikpKSkpKSkpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSB0aHJvdyBlO1xuICAgICAgICAgICAgLy8gSWYgYG5vdGlmeUxvY2FsVmlld0NoYW5nZXNgIGZhaWxzLCB3ZSBkaWQgbm90IGFkdmFuY2UgdGhlIHNlcXVlbmNlXG4gICAgICAgICAgICAvLyBudW1iZXIgZm9yIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIGluY2x1ZGVkIGluIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIG1pZ2h0IHRyaWdnZXIgdGhlbSB0byBiZSBkZWxldGVkIGVhcmxpZXIgdGhhbiB0aGV5IG90aGVyd2lzZVxuICAgICAgICAgICAgLy8gd291bGQgaGF2ZSwgYnV0IGl0IHNob3VsZCBub3QgaW52YWxpZGF0ZSB0aGUgaW50ZWdyaXR5IG9mIHRoZSBkYXRhLlxuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTG9jYWxTdG9yZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIgKyBlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0SWQ7XG4gICAgICAgICAgICBpZiAoIWUuZnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG4uSmkuZ2V0KHQpLCByID0gZS5zbmFwc2hvdFZlcnNpb24sIGkgPSBlLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHIpO1xuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uSmkgPSBuLkppLmluc2VydCh0LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0oci5sb2NhbFN0b3JlLCBzKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lSGFuZGxlQ3JlZGVudGlhbENoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKCFuLmN1cnJlbnRVc2VyLmlzRXF1YWwodCkpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIlVzZXIgY2hhbmdlLiBOZXcgdXNlcjpcIiwgdC50b0tleSgpKTtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZShuLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICBuLmN1cnJlbnRVc2VyID0gdCwgXG4gICAgICAgIC8vIEZhaWxzIHRhc2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHJlcXVlc3RlZCBieSBwcmV2aW91cyB1c2VyLlxuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfcmVqZWN0T3V0c3RhbmRpbmdQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGUsIHQpIHtcbiAgICAgICAgICAgIGUuZ2EuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKHYuQ0FOQ0VMTEVELCB0KSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCBlLmdhLmNsZWFyKCk7XG4gICAgICAgIH0obiwgXCInd2FpdEZvclBlbmRpbmdXcml0ZXMnIHByb21pc2UgaXMgcmVqZWN0ZWQgZHVlIHRvIGEgdXNlciBjaGFuZ2UuXCIpLCBcbiAgICAgICAgLy8gVE9ETyhiLzExNDIyNjQxNyk6IENvbnNpZGVyIGNhbGxpbmcgdGhpcyBvbmx5IGluIHRoZSBwcmltYXJ5IHRhYi5cbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5oYW5kbGVVc2VyQ2hhbmdlKHQsIGUucmVtb3ZlZEJhdGNoSWRzLCBlLmFkZGVkQmF0Y2hJZHMpLCBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUobiwgZS50cyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5WYS5nZXQodCk7XG4gICAgaWYgKHIgJiYgci5JYSkgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLmFkZChyLmtleSk7XG4gICAge1xuICAgICAgICBsZXQgZSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICBjb25zdCByID0gbi5kYS5nZXQodCk7XG4gICAgICAgIGlmICghcikgcmV0dXJuIGU7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiByKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbi5FYS5nZXQodCk7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgoci52aWV3LmlhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXG4gKiBmcm9tIHBlcnNpc3RlbmNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jaHJvbml6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVFeGVjdXRlUXVlcnkobi5sb2NhbFN0b3JlLCB0LnF1ZXJ5LCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgaSA9IHQudmlldy5oYShyKTtcbiAgICByZXR1cm4gbi5pc1ByaW1hcnlDbGllbnQgJiYgX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MobiwgdC50YXJnZXRJZCwgaS5jYSksIFxuICAgIGk7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIG5ld2x5IGNoYW5nZWQgZG9jdW1lbnRzIGZyb20gcmVtb3RlIGRvY3VtZW50IGNhY2hlIGFuZCByYWlzZXNcbiAqIHNuYXBzaG90cyBpZiBuZWVkZWQuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVN5bmNocm9uaXplV2l0aENoYW5nZWREb2N1bWVudHMoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5ld0RvY3VtZW50Q2hhbmdlcyhuLmxvY2FsU3RvcmUsIHQpLnRoZW4oKGUgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUpKSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgbXV0YXRpb24gc3RhdGUgdG8gYW4gZXhpc3RpbmcgYmF0Y2guICAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlCYXRjaFN0YXRlKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgcyA9IGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlTG9va3VwTXV0YXRpb25Eb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3Qobi5tdXRhdGlvblF1ZXVlKTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gci5EbihlLCB0KS5uZXh0KCh0ID0+IHQgPyBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyhlLCB0KSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpKSkpKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCB0KTtcbiAgICBudWxsICE9PSBzID8gKFwicGVuZGluZ1wiID09PSBuID8gXG4gICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXG4gICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxuICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXG4gICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGkucmVtb3RlU3RvcmUpIDogXCJhY2tub3dsZWRnZWRcIiA9PT0gbiB8fCBcInJlamVjdGVkXCIgPT09IG4gPyAoXG4gICAgLy8gTk9URTogQm90aCB0aGVzZSBtZXRob2RzIGFyZSBuby1vcHMgZm9yIGJhdGNoZXMgdGhhdCBvcmlnaW5hdGVkIGZyb21cbiAgICAvLyBvdGhlciBjbGllbnRzLlxuICAgIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKGksIHQsIHIgfHwgbnVsbCksIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhpLCB0KSwgXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVSZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfZGVidWdDYXN0KF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkubXV0YXRpb25RdWV1ZSkuQ24odCk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgdCkpIDogZmFpbCgpLCBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoaSwgcykpIDogXG4gICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxuICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXG4gICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXG4gICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxuICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xuICAgIC8vIGFzIGFwcGxpY2FibGUuXG4gICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIkNhbm5vdCBhcHBseSBtdXRhdGlvbiBiYXRjaCB3aXRoIGlkOiBcIiArIHQpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVByaW1hcnlTdGF0ZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhuKSwgX19QUklWQVRFX3N5bmNFbmdpbmVFbnN1cmVXcml0ZUNhbGxiYWNrcyhuKSwgXG4gICAgITAgPT09IHQgJiYgITAgIT09IG4ueWEpIHtcbiAgICAgICAgLy8gU2Vjb25kYXJ5IHRhYnMgb25seSBtYWludGFpbiBWaWV3cyBmb3IgdGhlaXIgbG9jYWwgbGlzdGVuZXJzIGFuZCB0aGVcbiAgICAgICAgLy8gVmlld3MgaW50ZXJuYWwgc3RhdGUgbWF5IG5vdCBiZSAxMDAlIHBvcHVsYXRlZCAoaW4gcGFydGljdWxhclxuICAgICAgICAvLyBzZWNvbmRhcnkgdGFicyBkb24ndCB0cmFjayBzeW5jZWREb2N1bWVudHMsIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoZVxuICAgICAgICAvLyBzZXJ2ZXIgY29uc2lkZXJzIHRvIGJlIGluIHRoZSB0YXJnZXQpLiBTbyB3aGVuIGEgc2Vjb25kYXJ5IGJlY29tZXNcbiAgICAgICAgLy8gcHJpbWFyeSwgd2UgbmVlZCB0byBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGFsbCB2aWV3cyBmb3IgYWxsIHRhcmdldHNcbiAgICAgICAgLy8gbWF0Y2ggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICAgIGNvbnN0IGUgPSBuLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpLCB0ID0gYXdhaXQgX19QUklWQVRFX3N5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKG4sIGUudG9BcnJheSgpKTtcbiAgICAgICAgbi55YSA9ICEwLCBhd2FpdCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVBcHBseVByaW1hcnlTdGF0ZShuLnJlbW90ZVN0b3JlLCAhMCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSBfX1BSSVZBVEVfcmVtb3RlU3RvcmVMaXN0ZW4obi5yZW1vdGVTdG9yZSwgZSk7XG4gICAgfSBlbHNlIGlmICghMSA9PT0gdCAmJiAhMSAhPT0gbi55YSkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCB0ID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIG4uZGEuZm9yRWFjaCgoKHIsIGkpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KGkpID8gZS5wdXNoKGkpIDogdCA9IHQudGhlbigoKCkgPT4gKF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KG4sIGkpLCBcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChuLmxvY2FsU3RvcmUsIGksIFxuICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCkpKSksIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKG4ucmVtb3RlU3RvcmUsIGkpO1xuICAgICAgICB9KSksIGF3YWl0IHQsIGF3YWl0IF9fUFJJVkFURV9zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyhuLCBlKSwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9yZXNldExpbWJvRG9jdW1lbnRzKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgdC5WYS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKHQucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICAgICAgfSkpLCB0Lm1hLlJyKCksIHQuVmEgPSBuZXcgTWFwLCB0LlJhID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxuICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gdGFyZ2V0cyAtIHRoZSBsaXN0IG9mIHRhcmdldHMgd2l0aCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVjb21wdXRlZFxuICogQHBhcmFtIHRyYW5zaXRpb25Ub1ByaW1hcnkgLSBgdHJ1ZWAgaWZmIHRoZSB0YWIgdHJhbnNpdGlvbnMgZnJvbSBhIHNlY29uZGFyeVxuICogdGFiIHRvIGEgcHJpbWFyeSB0YWJcbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiksIG4ueWEgPSAhMSwgYXdhaXQgX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUobi5yZW1vdGVTdG9yZSwgITEpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IFtdLCBzID0gW107XG4gICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIGNvbnN0IG4gPSByLmRhLmdldChlKTtcbiAgICAgICAgaWYgKG4gJiYgMCAhPT0gbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgaGF2ZSBhIGxvY2FsIFZpZXcsIHdlIGZldGNoIHRoZWlyIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIC8vIGZyb20gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCkgYW5kIHJlY29uY2lsZSB0aGVpciB2aWV3cyB3aXRoIHRoZSBwZXJzaXN0ZWRcbiAgICAgICAgICAgIC8vIHN0YXRlICh0aGUgbGlzdCBvZiBzeW5jZWREb2N1bWVudHMgbWF5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jKS5cbiAgICAgICAgICAgIHQgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KHIubG9jYWxTdG9yZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoblswXSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gci5FYS5nZXQoZSksIG4gPSBhd2FpdCBfX1BSSVZBVEVfc3luY2hyb25pemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHIsIHQpO1xuICAgICAgICAgICAgICAgIG4uc25hcHNob3QgJiYgcy5wdXNoKG4uc25hcHNob3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBuZXZlciBleGVjdXRlZCBvbiB0aGlzIGNsaWVudCwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gYWxsb2NhdGUgdGhlIHRhcmdldCBpbiBMb2NhbFN0b3JlIGFuZCBpbml0aWFsaXplIGEgbmV3IFZpZXcuXG4gICAgICAgICAgICBjb25zdCBuID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXRDYWNoZWRUYXJnZXQoci5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgICAgIHQgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KHIubG9jYWxTdG9yZSwgbiksIGF3YWl0IF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChyLCBfX1BSSVZBVEVfc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkobiksIGUsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCB0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBpLnB1c2godCk7XG4gICAgfVxuICAgIHJldHVybiByLlRhLnJfKHMpLCBpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xuICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxuICogb2JqZWN0LlxuICpcbiAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxuICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxuICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXG4gKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zeW50aGVzaXplVGFyZ2V0VG9RdWVyeShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9uZXdRdWVyeShlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLm9yZGVyQnksIGUuZmlsdGVycywgZS5saW1pdCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbn1cblxuLyoqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lR2V0QWN0aXZlQ2xpZW50cyhlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0QWN0aXZlQ2xpZW50cyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZGVidWdDYXN0KF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkucGVyc2lzdGVuY2UpLk5pKCk7XG4gICAgfShfX1BSSVZBVEVfZGVidWdDYXN0KGUpLmxvY2FsU3RvcmUpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVRhcmdldFN0YXRlKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAoaS55YSkgXG4gICAgLy8gSWYgd2UgcmVjZWl2ZSBhIHRhcmdldCBzdGF0ZSBub3RpZmljYXRpb24gdmlhIFdlYlN0b3JhZ2UsIHdlIGFyZVxuICAgIC8vIGVpdGhlciBhbHJlYWR5IHNlY29uZGFyeSBvciBhbm90aGVyIHRhYiBoYXMgdGFrZW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgcmV0dXJuIHZvaWQgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIklnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLlwiKTtcbiAgICBjb25zdCBzID0gaS5kYS5nZXQodCk7XG4gICAgaWYgKHMgJiYgcy5sZW5ndGggPiAwKSBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgXCJjdXJyZW50XCI6XG4gICAgICBjYXNlIFwibm90LWN1cnJlbnRcIjpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV3RG9jdW1lbnRDaGFuZ2VzKGkubG9jYWxTdG9yZSwgX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwKHNbMF0pKSwgciA9IFJlbW90ZUV2ZW50LmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKHQsIFwiY3VycmVudFwiID09PSBuLCBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HKTtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShpLCBlLCByKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgXCJyZWplY3RlZFwiOlxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoaS5sb2NhbFN0b3JlLCB0LCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCBfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChpLCB0LCByKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGZhaWwoKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5QWN0aXZlVGFyZ2V0c0NoYW5nZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKTtcbiAgICBpZiAoci55YSkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgaWYgKHIuZGEuaGFzKGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gQSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIGFkZGVkIGluIGEgcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXRDYWNoZWRUYXJnZXQoci5sb2NhbFN0b3JlLCBlKSwgbiA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoci5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChyLCBfX1BSSVZBVEVfc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkodCksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCBuLnJlc3VtZVRva2VuKSwgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKHIucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSBcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZSBzaW5jZSB0aGUgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlblxuICAgICAgICAvLyByZW1vdmVkIGlmIGl0IGhhcyBiZWVuIHJlamVjdGVkIGJ5IHRoZSBiYWNrZW5kLlxuICAgICAgICByLmRhLmhhcyhlKSAmJiBcbiAgICAgICAgLy8gUmVsZWFzZSBxdWVyaWVzIHRoYXQgYXJlIHN0aWxsIGFjdGl2ZS5cbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KHIubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihyLnJlbW90ZVN0b3JlLCBlKSwgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQociwgZSk7XG4gICAgICAgIH0pKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQuYmluZChudWxsLCB0KSwgXG4gICAgdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IF9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldC5iaW5kKG51bGwsIHQpLCBcbiAgICB0LnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4gPSBfX1BSSVZBVEVfc3luY0VuZ2luZVJlamVjdExpc3Rlbi5iaW5kKG51bGwsIHQpLCBcbiAgICB0LlRhLnJfID0gX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hDaGFuZ2UuYmluZChudWxsLCB0LmV2ZW50TWFuYWdlciksIHQuVGEuU2EgPSBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yLmJpbmQobnVsbCwgdC5ldmVudE1hbmFnZXIpLCBcbiAgICB0O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5U3VjY2Vzc2Z1bFdyaXRlLmJpbmQobnVsbCwgdCksIFxuICAgIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlID0gX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RGYWlsZWRXcml0ZS5iaW5kKG51bGwsIHQpLCBcbiAgICB0O1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUxvYWRCdW5kbGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgKFxuICAgIC8qKiBMb2FkcyBhIGJ1bmRsZSBhbmQgcmV0dXJucyB0aGUgbGlzdCBvZiBhZmZlY3RlZCBjb2xsZWN0aW9uIGdyb3Vwcy4gKi9cbiAgICBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9hZEJ1bmRsZUltcGwoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IHQuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhc05ld2VyQnVuZGxlKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLlFyLmdldEJ1bmRsZU1ldGFkYXRhKGUsIHQuaWQpKSkudGhlbigoZSA9PiAhIWUgJiYgZS5jcmVhdGVUaW1lLmNvbXBhcmVUbyhyKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovIChlLmxvY2FsU3RvcmUsIHIpKSByZXR1cm4gYXdhaXQgdC5jbG9zZSgpLCBuLl9jb21wbGV0ZVdpdGgoZnVuY3Rpb24gX19QUklWQVRFX2J1bmRsZVN1Y2Nlc3NQcm9ncmVzcyhlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1N0YXRlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiBlLnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBieXRlc0xvYWRlZDogZS50b3RhbEJ5dGVzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbERvY3VtZW50czogZS50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxCeXRlczogZS50b3RhbEJ5dGVzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0ocikpLCBQcm9taXNlLnJlc29sdmUobmV3IFNldCk7XG4gICAgICAgICAgICBuLl91cGRhdGVQcm9ncmVzcyhfX1BSSVZBVEVfYnVuZGxlSW5pdGlhbFByb2dyZXNzKHIpKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0J1bmRsZUxvYWRlcihyLCBlLmxvY2FsU3RvcmUsIHQuc2VyaWFsaXplcik7XG4gICAgICAgICAgICBsZXQgcyA9IGF3YWl0IHQuYmEoKTtcbiAgICAgICAgICAgIGZvciAoO3M7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCBpLkhfKHMpO1xuICAgICAgICAgICAgICAgIGUgJiYgbi5fdXBkYXRlUHJvZ3Jlc3MoZSksIHMgPSBhd2FpdCB0LmJhKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvID0gYXdhaXQgaS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShlLCBvLlpfLCBcbiAgICAgICAgICAgIC8qIHJlbW90ZUV2ZW50ICovIHZvaWQgMCksIFxuICAgICAgICAgICAgLy8gU2F2ZSBtZXRhZGF0YSwgc28gbG9hZGluZyB0aGUgc2FtZSBidW5kbGUgd2lsbCBza2lwLlxuICAgICAgICAgICAgYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVTYXZlQnVuZGxlKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgYnVuZGxlXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IG4uUXIuc2F2ZUJ1bmRsZU1ldGFkYXRhKGUsIHQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYE5hbWVkUXVlcnlgIGFzc29jaWF0ZWQgd2l0aCBnaXZlbiBxdWVyeSBuYW1lLiBQcm9taXNlXG4gKiByZXNvbHZlcyB0byB1bmRlZmluZWQgaWYgbm8gcGVyc2lzdGVkIGRhdGEgY2FuIGJlIGZvdW5kLlxuICovIChlLmxvY2FsU3RvcmUsIHIpLCBuLl9jb21wbGV0ZVdpdGgoby5wcm9ncmVzcyksIFByb21pc2UucmVzb2x2ZShvLllfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKFwiU3luY0VuZ2luZVwiLCBgTG9hZGluZyBidW5kbGUgZmFpbGVkIHdpdGggJHtlfWApLCBuLl9mYWlsV2l0aChlKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUobmV3IFNldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxuICogVXNlcyBFYWdlckdDIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqLykociwgdCwgbikudGhlbigoZSA9PiB7XG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUubm90aWZ5QnVuZGxlTG9hZGVkKGUpO1xuICAgIH0pKTtcbn1cblxuY2xhc3MgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5jcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSwgXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0aGlzLmNyZWF0ZVBlcnNpc3RlbmNlKGUpLCBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMubG9jYWxTdG9yZSA9IHRoaXMuY3JlYXRlTG9jYWxTdG9yZShlKSwgXG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLmNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHRoaXMubG9jYWxTdG9yZSksIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyID0gdGhpcy5jcmVhdGVJbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIoZSwgdGhpcy5sb2NhbFN0b3JlKTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsU3RvcmUoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25ld0xvY2FsU3RvcmUodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IF9fUFJJVkFURV9RdWVyeUVuZ2luZSwgZS5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZShfX1BSSVZBVEVfTWVtb3J5RWFnZXJEZWxlZ2F0ZS56ciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlU2hhcmVkQ2xpZW50U3RhdGUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlTaGFyZWRDbGllbnRTdGF0ZTtcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTHJ1R2NNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgZXh0ZW5kcyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGU7XG4gICAgfVxuICAgIGNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQodGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9NZW1vcnlMcnVEZWxlZ2F0ZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xydVNjaGVkdWxlcihuLCBlLmFzeW5jUXVldWUsIHQpO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBMcnVQYXJhbXMud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IExydVBhcmFtcy5ERUZBVUxUO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZSgoZSA9PiBfX1BSSVZBVEVfTWVtb3J5THJ1RGVsZWdhdGUuenIoZSwgdCkpLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIGV4dGVuZHMgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuRGEgPSBlLCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdCwgdGhpcy5mb3JjZU93bmVyc2hpcCA9IG4sIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUoZSkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKGUpLCBhd2FpdCB0aGlzLkRhLmluaXRpYWxpemUodGhpcywgZSksIFxuICAgICAgICAvLyBFbnF1ZXVlIHdyaXRlcyBmcm9tIGEgcHJldmlvdXMgc2Vzc2lvblxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKHRoaXMuRGEuc3luY0VuZ2luZSksIGF3YWl0IF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZSh0aGlzLkRhLnJlbW90ZVN0b3JlKSwgXG4gICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXG4gICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuVmkoKCgpID0+ICh0aGlzLmdjU2NoZWR1bGVyICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5nY1NjaGVkdWxlci5zdGFydCgpLCBcbiAgICAgICAgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIgJiYgIXRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBjcmVhdGVMb2NhbFN0b3JlKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uZXdMb2NhbFN0b3JlKHRoaXMucGVyc2lzdGVuY2UsIG5ldyBfX1BSSVZBVEVfUXVlcnlFbmdpbmUsIGUuaW5pdGlhbFVzZXIsIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxuICAgIGNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTHJ1U2NoZWR1bGVyKG4sIGUuYXN5bmNRdWV1ZSwgdCk7XG4gICAgfVxuICAgIGNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlcihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0luZGV4QmFja2ZpbGxlcih0LCB0aGlzLnBlcnNpc3RlbmNlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKGUuYXN5bmNRdWV1ZSwgbik7XG4gICAgfVxuICAgIGNyZWF0ZVBlcnNpc3RlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIGUuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KSwgbiA9IHZvaWQgMCAhPT0gdGhpcy5jYWNoZVNpemVCeXRlcyA/IExydVBhcmFtcy53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogTHJ1UGFyYW1zLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYlBlcnNpc3RlbmNlKHRoaXMuc3luY2hyb25pemVUYWJzLCB0LCBlLmNsaWVudElkLCBuLCBlLmFzeW5jUXVldWUsIF9fUFJJVkFURV9nZXRXaW5kb3coKSwgZ2V0RG9jdW1lbnQoKSwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCAhIXRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVNoYXJlZENsaWVudFN0YXRlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIG11bHRpLXRhYiBJbmRleGVkREJcbiAqIHBlcnNpc3RlbmNlLlxuICpcbiAqIEluIHRoZSBsZWdhY3kgY2xpZW50LCB0aGlzIHByb3ZpZGVyIGlzIHVzZWQgdG8gcHJvdmlkZSBib3RoIG11bHRpLXRhYiBhbmRcbiAqIG5vbi1tdWx0aS10YWIgcGVyc2lzdGVuY2Ugc2luY2Ugd2UgY2Fubm90IHRlbGwgYXQgYnVpbGQgdGltZSB3aGV0aGVyXG4gKiBgc3luY2hyb25pemVUYWJzYCB3aWxsIGJlIGVuYWJsZWQuXG4gKi8gY2xhc3MgX19QUklWQVRFX011bHRpVGFiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIGV4dGVuZHMgX19QUklWQVRFX0luZGV4ZWREYk9mZmxpbmVDb21wb25lbnRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCB0LCAvKiBmb3JjZU93bmVyc2hpcD0gKi8gITEpLCB0aGlzLkRhID0gZSwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHQsIHRoaXMuc3luY2hyb25pemVUYWJzID0gITA7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUoZSkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKGUpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5EYS5zeW5jRW5naW5lO1xuICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlIGluc3RhbmNlb2YgX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSAmJiAodGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0ge1xuICAgICAgICAgICAgR3M6IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlCYXRjaFN0YXRlLmJpbmQobnVsbCwgdCksXG4gICAgICAgICAgICB6czogX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVRhcmdldFN0YXRlLmJpbmQobnVsbCwgdCksXG4gICAgICAgICAgICBqczogX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseUFjdGl2ZVRhcmdldHNDaGFuZ2UuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIE5pOiBfX1BSSVZBVEVfc3luY0VuZ2luZUdldEFjdGl2ZUNsaWVudHMuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIFdzOiBfX1BSSVZBVEVfc3luY0VuZ2luZVN5bmNocm9uaXplV2l0aENoYW5nZWREb2N1bWVudHMuYmluZChudWxsLCB0KVxuICAgICAgICB9LCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCkpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5WaSgoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UHJpbWFyeVN0YXRlKHRoaXMuRGEuc3luY0VuZ2luZSwgZSksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKGUgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQoKSA6IGUgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpLCBcbiAgICAgICAgICAgIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyICYmIChlICYmICF0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydGVkID8gdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSA6IGUgfHwgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RvcCgpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZ2V0V2luZG93KCk7XG4gICAgICAgIGlmICghX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS52KHQpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5VTklNUExFTUVOVEVELCBcIkluZGV4ZWREQiBwZXJzaXN0ZW5jZSBpcyBvbmx5IGF2YWlsYWJsZSBvbiBwbGF0Zm9ybXMgdGhhdCBzdXBwb3J0IExvY2FsU3RvcmFnZS5cIik7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhlZERiU3RvcmFnZVByZWZpeChlLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCBlLmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSh0LCBlLmFzeW5jUXVldWUsIG4sIGUuY2xpZW50SWQsIGUuaW5pdGlhbFVzZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgd2lyZXMgdGhlIGNvbXBvbmVudHMgdGhhdCBhcmUgbmVlZGVkIHRvIGludGVyZmFjZSB3aXRoIHRoZVxuICogbmV0d29yay5cbiAqLyBjbGFzcyBPbmxpbmVDb21wb25lbnRQcm92aWRlciB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlLCB0KSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSB8fCAodGhpcy5sb2NhbFN0b3JlID0gZS5sb2NhbFN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gZS5zaGFyZWRDbGllbnRTdGF0ZSwgXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdGhpcy5jcmVhdGVEYXRhc3RvcmUodCksIHRoaXMucmVtb3RlU3RvcmUgPSB0aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKHQpLCBcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TWFuYWdlcih0KSwgdGhpcy5zeW5jRW5naW5lID0gdGhpcy5jcmVhdGVTeW5jRW5naW5lKHQsIFxuICAgICAgICAvKiBzdGFydEFzUHJpbWFyeT0qLyAhZS5zeW5jaHJvbml6ZVRhYnMpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IGUgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseU9ubGluZVN0YXRlQ2hhbmdlKHRoaXMuc3luY0VuZ2luZSwgZSwgMSAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSAqLyksIFxuICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlID0gX19QUklWQVRFX3N5bmNFbmdpbmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9yZW1vdGVTdG9yZUFwcGx5UHJpbWFyeVN0YXRlKHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdFdmVudE1hbmFnZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9FdmVudE1hbmFnZXJJbXBsO1xuICAgICAgICB9KCk7XG4gICAgfVxuICAgIGNyZWF0ZURhdGFzdG9yZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdDb25uZWN0aW9uKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1dlYkNoYW5uZWxDb25uZWN0aW9uKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAoZS5kYXRhYmFzZUluZm8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld0RhdGFzdG9yZShlLCB0LCBuLCByKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EYXRhc3RvcmVJbXBsKGUsIHQsIG4sIHIpO1xuICAgICAgICB9KGUuYXV0aENyZWRlbnRpYWxzLCBlLmFwcENoZWNrQ3JlZGVudGlhbHMsIG4sIHQpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVTdG9yZShlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UmVtb3RlU3RvcmUoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUmVtb3RlU3RvcmVJbXBsKGUsIHQsIG4sIHIsIGkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZS1lbmFibGVzIHRoZSBuZXR3b3JrLiBJZGVtcG90ZW50LiAqLyAodGhpcy5sb2NhbFN0b3JlLCB0aGlzLmRhdGFzdG9yZSwgZS5hc3luY1F1ZXVlLCAoZSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5T25saW5lU3RhdGVDaGFuZ2UodGhpcy5zeW5jRW5naW5lLCBlLCAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovKSksIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdDb25uZWN0aXZpdHlNb25pdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci52KCkgPyBuZXcgX19QUklWQVRFX0Jyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yIDogbmV3IF9fUFJJVkFURV9Ob29wQ29ubmVjdGl2aXR5TW9uaXRvcjtcbiAgICAgICAgfSgpKTtcbiAgICB9XG4gICAgY3JlYXRlU3luY0VuZ2luZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3U3luY0VuZ2luZShlLCB0LCBuLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgICAgICByLCBpLCBzLCBvKSB7XG4gICAgICAgICAgICBjb25zdCBfID0gbmV3IF9fUFJJVkFURV9TeW5jRW5naW5lSW1wbChlLCB0LCBuLCByLCBpLCBzKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmIChfLnlhID0gITApLCBfO1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIGUuaW5pdGlhbFVzZXIsIGUubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIHQpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVTaHV0ZG93bihlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiUmVtb3RlU3RvcmUgc2h1dHRpbmcgZG93bi5cIiksIHQueV8uYWRkKDUgLyogT2ZmbGluZUNhdXNlLlNodXRkb3duICovKSwgXG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCh0KSwgdC5TXy5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIHQuYl8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlckhlbHBlcihlLCB0ID0gMTAyNDApIHtcbiAgICBsZXQgbiA9IDA7XG4gICAgLy8gVGhlIFR5cGVTY3JpcHQgZGVmaW5pdGlvbiBmb3IgUmVhZGFibGVTdHJlYW1SZWFkZXIgY2hhbmdlZC4gV2UgdXNlXG4gICAgLy8gYGFueWAgaGVyZSB0byBhbGxvdyB0aGlzIGNvZGUgdG8gY29tcGlsZSB3aXRoIGRpZmZlcmVudCB2ZXJzaW9ucy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy80Mjk3MFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGFzeW5jIHJlYWQoKSB7XG4gICAgICAgICAgICBpZiAobiA8IGUuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnNsaWNlKG4sIG4gKyB0KSxcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBuICs9IHQsIHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjYW5jZWwoKSB7fSxcbiAgICAgICAgcmVsZWFzZUxvY2soKSB7fSxcbiAgICAgICAgY2xvc2VkOiBQcm9taXNlLnJlc29sdmUoKVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE9uIHdlYiwgYSBgUmVhZGFibGVTdHJlYW1gIGlzIHdyYXBwZWQgYXJvdW5kIGJ5IGEgYEJ5dGVTdHJlYW1SZWFkZXJgLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLypcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Bc3luY09ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMTtcbiAgICB9XG4gICAgbmV4dChlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIubmV4dCAmJiB0aGlzLnZhKHRoaXMub2JzZXJ2ZXIubmV4dCwgZSk7XG4gICAgfVxuICAgIGVycm9yKGUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5lcnJvciA/IHRoaXMudmEodGhpcy5vYnNlcnZlci5lcnJvciwgZSkgOiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgQ2EoKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMDtcbiAgICB9XG4gICAgdmEoZSwgdCkge1xuICAgICAgICB0aGlzLm11dGVkIHx8IHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0ZWQgfHwgZSh0KTtcbiAgICAgICAgfSksIDApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBidW5kbGUuXG4gKlxuICogVGFrZXMgYSBidW5kbGUgc3RyZWFtIG9yIGJ1ZmZlciwgYW5kIHByZXNlbnRzIGFic3RyYWN0aW9ucyB0byByZWFkIGJ1bmRsZWRcbiAqIGVsZW1lbnRzIG91dCBvZiB0aGUgdW5kZXJseWluZyBjb250ZW50LlxuICovIGNsYXNzIF9fUFJJVkFURV9CdW5kbGVSZWFkZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHJlYWRlciB0byByZWFkIGZyb20gdW5kZXJseWluZyBiaW5hcnkgYnVuZGxlIGRhdGEgc291cmNlLiAqL1xuICAgIGUsIHQpIHtcbiAgICAgICAgdGhpcy5GYSA9IGUsIHRoaXMuc2VyaWFsaXplciA9IHQsIFxuICAgICAgICAvKiogQ2FjaGVkIGJ1bmRsZSBtZXRhZGF0YS4gKi9cbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMuTWEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGV4dERlY29kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKFwidXRmLThcIik7XG4gICAgICAgIH0oKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMueGEoKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIGUgJiYgZS56XygpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKGUuR18ubWV0YWRhdGEpIDogdGhpcy5tZXRhZGF0YS5yZWplY3QobmV3IEVycm9yKGBUaGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYnVuZGxlIGlzIG5vdCBhIG1ldGFkYXRhLCBpdCBpc1xcbiAgICAgICAgICAgICAke0pTT04uc3RyaW5naWZ5KG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuR18pfWApKTtcbiAgICAgICAgfSksIChlID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KGUpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5GYS5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIGJhKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMueGEoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyB4YSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuT2EoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5NYS5kZWNvZGUoZSksIG4gPSBOdW1iZXIodCk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMuTmEoYGxlbmd0aCBzdHJpbmcgKCR7dH0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMuQmEobik7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpemVkQnVuZGxlRWxlbWVudChKU09OLnBhcnNlKHIpLCBlLmxlbmd0aCArIG4pO1xuICAgIH1cbiAgICAvKiogRmlyc3QgaW5kZXggb2YgJ3snIGZyb20gdGhlIHVuZGVybHlpbmcgYnVmZmVyLiAqLyAgICBMYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmZpbmRJbmRleCgoZSA9PiBlID09PSBcIntcIi5jaGFyQ29kZUF0KDApKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgaW50ZXJuYWwgYnVmZmVyLCB1bnRpbCB0aGUgZmlyc3QgJ3snLCBhbmRcbiAgICAgKiByZXR1cm4gdGhlIGNvbnRlbnQuXG4gICAgICpcbiAgICAgKiBJZiByZWFjaGVkIGVuZCBvZiB0aGUgc3RyZWFtLCByZXR1cm5zIGEgbnVsbC5cbiAgICAgKi8gICAgYXN5bmMgT2EoKSB7XG4gICAgICAgIGZvciAoO3RoaXMuTGEoKSA8IDA7ICkge1xuICAgICAgICAgICAgaWYgKGF3YWl0IHRoaXMua2EoKSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBhbmQgdGhlcmVcbiAgICAgICAgLy8gaGFwcGVucyB0byBiZSBubyBtb3JlIGRhdGEgdG8gcHJvY2Vzcy5cbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdGhpcy5idWZmZXIubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuTGEoKTtcbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBidXQgc3RpbGxcbiAgICAgICAgLy8gY2Fubm90IGZpbmQgYW4gb3BlbiBicmFja2V0LlxuICAgICAgICAgICAgICAgIGUgPCAwICYmIHRoaXMuTmEoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gYSBsZW5ndGggc3RyaW5nIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGxlbmd0aC5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZShlKSwgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSBhIHNwZWNpZmllZCBwb3NpdGlvbiBmcm9tIHRoZSBpbnRlcm5hbCBidWZmZXIsIGZvciBhIHNwZWNpZmllZFxuICAgICAqIG51bWJlciBvZiBieXRlcywgcHVsbGluZyBtb3JlIGRhdGEgZnJvbSB0aGUgdW5kZXJseWluZyBzdHJlYW0gaWYgbmVlZGVkLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyBkZWNvZGVkIGZyb20gdGhlIHJlYWQgYnl0ZXMuXG4gICAgICovICAgIGFzeW5jIEJhKGUpIHtcbiAgICAgICAgZm9yICg7dGhpcy5idWZmZXIubGVuZ3RoIDwgZTsgKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmthKCkgJiYgdGhpcy5OYShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBtb3JlIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ID0gdGhpcy5NYS5kZWNvZGUodGhpcy5idWZmZXIuc2xpY2UoMCwgZSkpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGpzb24gc3RyaW5nLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKGUpLCB0O1xuICAgIH1cbiAgICBOYShlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhyb3cgdGhpcy5GYS5jYW5jZWwoKSwgbmV3IEVycm9yKGBJbnZhbGlkIGJ1bmRsZSBmb3JtYXQ6ICR7ZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVsbHMgbW9yZSBkYXRhIGZyb20gdW5kZXJseWluZyBzdHJlYW0gdG8gaW50ZXJuYWwgYnVmZmVyLlxuICAgICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgc3RyZWFtIGlzIGZpbmlzaGVkLlxuICAgICAqLyAgICBhc3luYyBrYSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuRmEucmVhZCgpO1xuICAgICAgICBpZiAoIWUuZG9uZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLmxlbmd0aCArIGUudmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIHQuc2V0KHRoaXMuYnVmZmVyKSwgdC5zZXQoZS52YWx1ZSwgdGhpcy5idWZmZXIubGVuZ3RoKSwgdGhpcy5idWZmZXIgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLmRvbmU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbnRlcm5hbCB0cmFuc2FjdGlvbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIGFjY3VtdWxhdGluZyB0aGUgbXV0YXRpb25zIHRvXG4gKiBwZXJmb3JtIGFuZCB0aGUgYmFzZSB2ZXJzaW9ucyBmb3IgYW55IGRvY3VtZW50cyByZWFkLlxuICovXG5jbGFzcyBUcmFuc2FjdGlvbiQyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gZSwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAoZSkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJGaXJlc3RvcmUgdHJhbnNhY3Rpb25zIHJlcXVpcmUgYWxsIHJlYWRzIHRvIGJlIGV4ZWN1dGVkIGJlZm9yZSBhbGwgd3JpdGVzLlwiKTtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbnZva2VCYXRjaEdldERvY3VtZW50c1JwYyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZChuLnNlcmlhbGl6ZXIpICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiB0Lm1hcCgoZSA9PiBfX1BSSVZBVEVfdG9OYW1lKG4uc2VyaWFsaXplciwgZSkpKVxuICAgICAgICAgICAgfSwgcyA9IGF3YWl0IG4ueW8oXCJCYXRjaEdldERvY3VtZW50c1wiLCByLCBpLCB0Lmxlbmd0aCksIG8gPSBuZXcgTWFwO1xuICAgICAgICAgICAgcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21CYXRjaEdldERvY3VtZW50c1Jlc3BvbnNlKG4uc2VyaWFsaXplciwgZSk7XG4gICAgICAgICAgICAgICAgby5zZXQodC5rZXkudG9TdHJpbmcoKSwgdCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBfID0gW107XG4gICAgICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5nZXQoZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIXQpLCBfLnB1c2godCk7XG4gICAgICAgICAgICB9KSksIF87XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIGUpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHRoaXMucmVjb3JkVmVyc2lvbihlKSkpLCB0O1xuICAgIH1cbiAgICBzZXQoZSwgdCkge1xuICAgICAgICB0aGlzLndyaXRlKHQudG9NdXRhdGlvbihlLCB0aGlzLnByZWNvbmRpdGlvbihlKSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB1cGRhdGUoZSwgdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cml0ZSh0LnRvTXV0YXRpb24oZSwgdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUoZSkpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQoZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgdGhpcy53cml0ZShuZXcgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uKGUsIHRoaXMucHJlY29uZGl0aW9uKGUpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKGUudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubGFzdFdyaXRlRXJyb3IpIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucztcbiAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxuICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5kZWxldGUodC5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEZvciBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgYnV0IG5vdCB3cml0dGVuIHRvLCB3ZSB3YW50IHRvIHBlcmZvcm1cbiAgICAgICAgLy8gYSBgdmVyaWZ5YCBvcGVyYXRpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBEb2N1bWVudEtleS5mcm9tUGF0aCh0KTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLnB1c2gobmV3IF9fUFJJVkFURV9WZXJpZnlNdXRhdGlvbihuLCB0aGlzLnByZWNvbmRpdGlvbihuKSkpO1xuICAgICAgICB9KSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbnZva2VDb21taXRScGMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQobi5zZXJpYWxpemVyKSArIFwiL2RvY3VtZW50c1wiLCBpID0ge1xuICAgICAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKGUgPT4gdG9NdXRhdGlvbihuLnNlcmlhbGl6ZXIsIGUpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLlZvKFwiQ29tbWl0XCIsIHIsIGkpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24oZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgaWYgKGUuaXNGb3VuZERvY3VtZW50KCkpIHQgPSBlLnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFlLmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgICAgICAvLyBSZXByZXNlbnQgYSBkZWxldGVkIGRvYyB1c2luZyBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgICAgICB0ID0gU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChuKSkgXG4gICAgICAgICAgICAvLyBUaGlzIHRyYW5zYWN0aW9uIHdpbGwgZmFpbCBubyBtYXR0ZXIgd2hhdC5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldChlLmtleS50b1N0cmluZygpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKGUudG9TdHJpbmcoKSkgJiYgdCA/IHQuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpID8gUHJlY29uZGl0aW9uLmV4aXN0cyghMSkgOiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh0KSA6IFByZWNvbmRpdGlvbi5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyhlLnRvU3RyaW5nKCkpICYmIHQpIHtcbiAgICAgICAgICAgIGlmICh0LmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgdXBkYXRlIGEgZG9jdW1lbnQgdGhhdCBkb2Vzbid0IGV4aXN0LlwiKTtcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGV4aXN0cywgYmFzZSBwcmVjb25kaXRpb24gb24gZG9jdW1lbnQgdXBkYXRlIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUoZSkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKGUpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovIGNsYXNzIF9fUFJJVkFURV9UcmFuc2FjdGlvblJ1bm5lciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLmRhdGFzdG9yZSA9IHQsIHRoaXMub3B0aW9ucyA9IG4sIHRoaXMudXBkYXRlRnVuY3Rpb24gPSByLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IGksIHRoaXMucWEgPSBuLm1heEF0dGVtcHRzLCB0aGlzLktvID0gbmV3IF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYodGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVGltZXJJZC5UcmFuc2FjdGlvblJldHJ5ICovKTtcbiAgICB9XG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovICAgIHJ1bigpIHtcbiAgICAgICAgdGhpcy5xYSAtPSAxLCB0aGlzLlFhKCk7XG4gICAgfVxuICAgIFFhKCkge1xuICAgICAgICB0aGlzLktvLnhvKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFRyYW5zYWN0aW9uJDIodGhpcy5kYXRhc3RvcmUpLCB0ID0gdGhpcy5LYShlKTtcbiAgICAgICAgICAgIHQgJiYgdC50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gZS5jb21taXQoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVzb2x2ZSh0KTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRhKGUpO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiRhKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEthKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKGUpO1xuICAgICAgICAgICAgcmV0dXJuICFfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQodCkgJiYgdC5jYXRjaCAmJiB0LnRoZW4gPyB0IDogKHRoaXMuZGVmZXJyZWQucmVqZWN0KEVycm9yKFwiVHJhbnNhY3Rpb24gY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBQcm9taXNlXCIpKSwgXG4gICAgICAgICAgICBudWxsKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gRG8gbm90IHJldHJ5IGVycm9ycyB0aHJvd24gYnkgdXNlciBwcm92aWRlZCB1cGRhdGVGdW5jdGlvbi5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkLnJlamVjdChlKSwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAkYShlKSB7XG4gICAgICAgIHRoaXMucWEgPiAwICYmIHRoaXMuVWEoZSkgPyAodGhpcy5xYSAtPSAxLCB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuUWEoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKSA6IHRoaXMuZGVmZXJyZWQucmVqZWN0KGUpO1xuICAgIH1cbiAgICBVYShlKSB7XG4gICAgICAgIGlmIChcIkZpcmViYXNlRXJyb3JcIiA9PT0gZS5uYW1lKSB7XG4gICAgICAgICAgICAvLyBJbiB0cmFuc2FjdGlvbnMsIHRoZSBiYWNrZW5kIHdpbGwgZmFpbCBvdXRkYXRlZCByZWFkcyB3aXRoIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICAgICAgICAvLyBub24tbWF0Y2hpbmcgZG9jdW1lbnQgdmVyc2lvbnMgd2l0aCBBQk9SVEVELiBUaGVzZSBlcnJvcnMgc2hvdWxkIGJlIHJldHJpZWQuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jb2RlO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWJvcnRlZFwiID09PSB0IHx8IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiID09PSB0IHx8IFwiYWxyZWFkeS1leGlzdHNcIiA9PT0gdCB8fCAhX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlIC8vXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIC8vXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS4gLy9cbiAqL1xuY2xhc3MgRmlyZXN0b3JlQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBcbiAgICAvKipcbiAgICAgKiBBc3luY2hyb25vdXMgcXVldWUgcmVzcG9uc2libGUgZm9yIGFsbCBvZiBvdXIgaW50ZXJuYWwgcHJvY2Vzc2luZy4gV2hlblxuICAgICAqIHdlIGdldCBpbmNvbWluZyB3b3JrIGZyb20gdGhlIHVzZXIgKHZpYSBwdWJsaWMgQVBJKSBvciB0aGUgbmV0d29ya1xuICAgICAqIChpbmNvbWluZyBHUlBDIG1lc3NhZ2VzKSwgd2Ugc2hvdWxkIGFsd2F5cyBzY2hlZHVsZSBvbnRvIHRoaXMgcXVldWUuXG4gICAgICogVGhpcyBlbnN1cmVzIGFsbCBvZiBvdXIgd29yayBpcyBwcm9wZXJseSBzZXJpYWxpemVkIChlLmcuIHdlIGRvbid0XG4gICAgICogc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBvcGVyYXRpb24gd2hpbGUgdGhlIHByZXZpb3VzIG9uZSBpcyB3YWl0aW5nIGZvclxuICAgICAqIGFuIGFzeW5jIEkvTyB0byBjb21wbGV0ZSkuXG4gICAgICovXG4gICAgbiwgcikge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMuZGF0YWJhc2VJbmZvID0gciwgXG4gICAgICAgIHRoaXMudXNlciA9IFVzZXIuVU5BVVRIRU5USUNBVEVELCB0aGlzLmNsaWVudElkID0gX19QUklWQVRFX0F1dG9JZC5WKCksIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCB0aGlzLmF1dGhDcmVkZW50aWFscy5zdGFydChuLCAoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCB1c2VyPVwiLCBlLnVpZCksIGF3YWl0IHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lcihlKSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSBlO1xuICAgICAgICB9KSksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zdGFydChuLCAoZSA9PiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgbmV3IGFwcCBjaGVjayB0b2tlbj1cIiwgZSksIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyKGUsIHRoaXMudXNlcikpKSk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3luY1F1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXG4gICAgICAgICAgICBkYXRhYmFzZUluZm86IHRoaXMuZGF0YWJhc2VJbmZvLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhdXRoQ3JlZGVudGlhbHM6IHRoaXMuYXV0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgYXBwQ2hlY2tDcmVkZW50aWFsczogdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLFxuICAgICAgICAgICAgaW5pdGlhbFVzZXI6IHRoaXMudXNlcixcbiAgICAgICAgICAgIG1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOiAxMDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKGUpIHtcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gZTtcbiAgICB9XG4gICAgc2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyKGUpIHtcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGF0IHRoZSBjbGllbnQgaGFzIG5vdCBiZWVuIHRlcm1pbmF0ZWQuIEVuc3VyZXMgdGhhdCBvdGhlciBtZXRob2RzIG9uIC8vXG4gICAgICogdGhpcyBjbGFzcyBjYW5ub3QgYmUgY2FsbGVkIGFmdGVyIHRoZSBjbGllbnQgaXMgdGVybWluYXRlZC4gLy9cbiAgICAgKi8gICAgdmVyaWZ5Tm90VGVybWluYXRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXN5bmNRdWV1ZS5pc1NodXR0aW5nRG93bikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVudGVyUmVzdHJpY3RlZE1vZGUoKTtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50cyAmJiBhd2FpdCB0aGlzLl9vbmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50cyAmJiBhd2FpdCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgXG4gICAgICAgICAgICAgICAgLy8gVGhlIGNyZWRlbnRpYWxzIHByb3ZpZGVyIG11c3QgYmUgdGVybWluYXRlZCBhZnRlciBzaHV0dGluZyBkb3duIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZVN0b3JlIGFzIGl0IHdpbGwgcHJldmVudCB0aGUgUmVtb3RlU3RvcmUgZnJvbSByZXRyaWV2aW5nIGF1dGhcbiAgICAgICAgICAgICAgICAvLyB0b2tlbnMuXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLnNodXRkb3duKCksIGUucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfd3JhcEluVXNlckVycm9ySWZSZWNvdmVyYWJsZSh0LCBcIkZhaWxlZCB0byBzaHV0ZG93biBwZXJzaXN0ZW5jZVwiKTtcbiAgICAgICAgICAgICAgICBlLnJlamVjdChuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBlLnByb21pc2U7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIHQpIHtcbiAgICBlLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCBlLmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCB0LmluaXRpYWxpemUobik7XG4gICAgbGV0IHIgPSBuLmluaXRpYWxVc2VyO1xuICAgIGUuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChhc3luYyBlID0+IHtcbiAgICAgICAgci5pc0VxdWFsKGUpIHx8IChhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhbmRsZVVzZXJDaGFuZ2UodC5sb2NhbFN0b3JlLCBlKSwgciA9IGUpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICB0LnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiBlLnRlcm1pbmF0ZSgpKSksIGUuX29mZmxpbmVDb21wb25lbnRzID0gdDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3NldE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIHQpIHtcbiAgICBlLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSk7XG4gICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBlLmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCB0LmluaXRpYWxpemUobiwgciksIFxuICAgIC8vIFRoZSBDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIgb2YgdGhlIG9ubGluZSBjb21wb25lbnQgcHJvdmlkZXIgdGFrZXNcbiAgICAvLyBwcmVjZWRlbmNlIG92ZXIgdGhlIG9mZmxpbmUgY29tcG9uZW50IHByb3ZpZGVyLlxuICAgIGUuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChlID0+IF9fUFJJVkFURV9yZW1vdGVTdG9yZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UodC5yZW1vdGVTdG9yZSwgZSkpKSwgXG4gICAgZS5zZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIoKChlLCBuKSA9PiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHQucmVtb3RlU3RvcmUsIG4pKSksIFxuICAgIGUuX29ubGluZUNvbXBvbmVudHMgPSB0O1xufVxuXG4vKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NhbkZhbGxiYWNrRnJvbUluZGV4ZWREYkVycm9yKGUpIHtcbiAgICByZXR1cm4gXCJGaXJlYmFzZUVycm9yXCIgPT09IGUubmFtZSA/IGUuY29kZSA9PT0gdi5GQUlMRURfUFJFQ09ORElUSU9OIHx8IGUuY29kZSA9PT0gdi5VTklNUExFTUVOVEVEIDogIShcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgfHwgKFxuICAgIC8vIFdoZW4gdGhlIGJyb3dzZXIgaXMgb3V0IG9mIHF1b3RhIHdlIGNvdWxkIGdldCBlaXRoZXIgcXVvdGEgZXhjZWVkZWRcbiAgICAvLyBvciBhbiBhYm9ydGVkIGVycm9yIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBlcnJvciBoYXBwZW5lZCBkdXJpbmdcbiAgICAvLyBzY2hlbWEgbWlncmF0aW9uLlxuICAgIDIyID09PSBlLmNvZGUgfHwgMjAgPT09IGUuY29kZSB8fCBcbiAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgMTEgPT09IGUuY29kZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVPZmZsaW5lQ29tcG9uZW50cyhlKSB7XG4gICAgaWYgKCFlLl9vZmZsaW5lQ29tcG9uZW50cykgaWYgKGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgdXNlciBwcm92aWRlZCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29mZmxpbmUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgICAgIGlmICghX19QUklWQVRFX2NhbkZhbGxiYWNrRnJvbUluZGV4ZWREYkVycm9yKG4pKSB0aHJvdyBuO1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ1dhcm4oXCJFcnJvciB1c2luZyB1c2VyIHByb3ZpZGVkIGNhY2hlLiBGYWxsaW5nIGJhY2sgdG8gbWVtb3J5IGNhY2hlOiBcIiArIG4pLCBcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbmV3IE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcik7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbmV3IE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcik7XG4gICAgcmV0dXJuIGUuX29mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKSB7XG4gICAgcmV0dXJuIGUuX29ubGluZUNvbXBvbmVudHMgfHwgKGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgdXNlciBwcm92aWRlZCBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQgX19QUklWQVRFX3NldE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29ubGluZSkpIDogKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPbmxpbmVDb21wb25lbnRQcm92aWRlcihlLCBuZXcgT25saW5lQ29tcG9uZW50UHJvdmlkZXIpKSksIGUuX29ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRQZXJzaXN0ZW5jZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPZmZsaW5lQ29tcG9uZW50cyhlKS50aGVuKChlID0+IGUucGVyc2lzdGVuY2UpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldFJlbW90ZVN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Vuc3VyZU9ubGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLnJlbW90ZVN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRTeW5jRW5naW5lKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Vuc3VyZU9ubGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLnN5bmNFbmdpbmUpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldERhdGFzdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5kYXRhc3RvcmUpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSB7XG4gICAgY29uc3QgdCA9IGF3YWl0IF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLCBuID0gdC5ldmVudE1hbmFnZXI7XG4gICAgcmV0dXJuIG4ub25MaXN0ZW4gPSBfX1BSSVZBVEVfc3luY0VuZ2luZUxpc3Rlbi5iaW5kKG51bGwsIHQuc3luY0VuZ2luZSksIG4ub25Vbmxpc3RlbiA9IF9fUFJJVkFURV9zeW5jRW5naW5lVW5saXN0ZW4uYmluZChudWxsLCB0LnN5bmNFbmdpbmUpLCBcbiAgICBuO1xufVxuXG4vKiogRW5hYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uIGFuZCByZS1lbnF1ZXVlcyBhbGwgcGVuZGluZyBvcGVyYXRpb25zLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RW5hYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UGVyc2lzdGVuY2UoZSksIG4gPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UmVtb3RlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0LnNldE5ldHdvcmtFbmFibGVkKCEwKSwgZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlRW5hYmxlTmV0d29yayhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHJldHVybiB0LnlfLmRlbGV0ZSgwIC8qIE9mZmxpbmVDYXVzZS5Vc2VyRGlzYWJsZWQgKi8pLCBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKHQpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudERpc2FibGVOZXR3b3JrKGUpIHtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IF9fUFJJVkFURV9nZXRQZXJzaXN0ZW5jZShlKSwgbiA9IGF3YWl0IF9fUFJJVkFURV9nZXRSZW1vdGVTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHQuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVEaXNhYmxlTmV0d29yayhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHQueV8uYWRkKDAgLyogT2ZmbGluZUNhdXNlLlVzZXJEaXNhYmxlZCAqLyksIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKHQpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSBzbyBnZXQoKXMgcmV0dXJuIGZyb20gY2FjaGUsIGV0Yy5cbiAgICAgICAgICAgIHQuYl8uc2V0KFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHdyaXRlcyB0aGF0IHdlcmUgcGVuZGluZyBhdCB0aGUgdGltZVxuICogdGhpcyBtZXRob2Qgd2FzIGNhbGxlZCByZWNlaXZlZCBzZXJ2ZXIgYWNrbm93bGVkZ2VtZW50LiBBbiBhY2tub3dsZWRnZW1lbnRcbiAqIGNhbiBiZSBlaXRoZXIgYWNjZXB0YW5jZSBvciByZWplY3Rpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3JlYWREb2N1bWVudEZyb21DYWNoZShlLCB0LCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVSZWFkRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwicmVhZCBkb2N1bWVudFwiLCBcInJlYWRvbmx5XCIsIChlID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnQoZSwgdCkpKTtcbiAgICAgICAgICAgIH0oZSwgdCk7XG4gICAgICAgICAgICByLmlzRm91bmREb2N1bWVudCgpID8gbi5yZXNvbHZlKHIpIDogci5pc05vRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShudWxsKSA6IG4ucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcih2LlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7dH0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpLCB0LCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZSwgdCwgbiA9IHt9KSB7XG4gICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfcmVhZERvY3VtZW50VmlhU25hcHNob3RMaXN0ZW5lcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIoe1xuICAgICAgICAgICAgbmV4dDogcyA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgdC5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgbykpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfID0gcy5kb2NzLmhhcyhuKTtcbiAgICAgICAgICAgICAgICAhXyAmJiBzLmZyb21DYWNoZSA/IFxuICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWYgd2UncmUgb25saW5lIGFuZCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgICAgIC8vIGV4aXN0IHRoZW4gd2UgcmVzb2x2ZSB3aXRoIGEgZG9jLmV4aXN0cyBzZXQgdG8gZmFsc2UuIElmXG4gICAgICAgICAgICAgICAgLy8gd2UncmUgb2ZmbGluZSBob3dldmVyLCB3ZSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhpc1xuICAgICAgICAgICAgICAgIC8vIGNhc2UuIFR3byBvcHRpb25zOiAxKSBDYWNoZSB0aGUgbmVnYXRpdmUgcmVzcG9uc2UgZnJvbVxuICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIgc28gd2UgY2FuIGRlbGl2ZXIgdGhhdCBldmVuIHdoZW4geW91J3JlXG4gICAgICAgICAgICAgICAgLy8gb2ZmbGluZSAyKSBBY3R1YWxseSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhlIG9ubGluZSBjYXNlXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAgICAgICAgICAgaS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKHYuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogXyAmJiBzLmZyb21DYWNoZSAmJiByICYmIFwic2VydmVyXCIgPT09IHIuc291cmNlID8gaS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKHYuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBkb2VzIGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50LiknKSkgOiBpLnJlc29sdmUocyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGUgPT4gaS5yZWplY3QoZSlcbiAgICAgICAgfSksIG8gPSBuZXcgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIoX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChuLnBhdGgpLCBzLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIFdfOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgbyk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBlLmFzeW5jUXVldWUsIHQsIG4sIHIpKSksIHIucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c0Zyb21Mb2NhbENhY2hlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9leGVjdXRlUXVlcnlGcm9tQ2FjaGUoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5KGUsIHQsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgX19QUklWQVRFX1ZpZXcodCwgci5zcyksIHMgPSBpLnNhKHIuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHMsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHt0fSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSksIHQsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIoZSwgdCwgbiA9IHt9KSB7XG4gICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZXhlY3V0ZVF1ZXJ5VmlhU25hcHNob3RMaXN0ZW5lcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIoe1xuICAgICAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgdC5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gci5zb3VyY2UgPyBpLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3Iodi5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKSA6IGkucmVzb2x2ZShuKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZSA9PiBpLnJlamVjdChlKVxuICAgICAgICB9KSwgbyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcihuLCBzLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIFdfOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgbyk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBlLmFzeW5jUXVldWUsIHQsIG4sIHIpKSksIHIucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEFkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyKGUsIHQpIHtcbiAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Bc3luY09ic2VydmVyKHQpO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2FkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2RlYnVnQ2FzdChlKS5PXy5hZGQodCksIFxuICAgICAgICAvLyBJbW1lZGlhdGVseSBmaXJlIGFuIGluaXRpYWwgZXZlbnQsIGluZGljYXRpbmcgYWxsIGV4aXN0aW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyBhcmUgaW4tc3luYy5cbiAgICAgICAgdC5uZXh0KCk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4uQ2EoKSwgZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihlLCB0KSB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLk9fLmRlbGV0ZSh0KTtcbiAgICAgICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50TG9hZEJ1bmRsZShlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVCdW5kbGVSZWFkZXIoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBfX1BSSVZBVEVfbmV3VGV4dEVuY29kZXIoKS5lbmNvZGUoZSkgOiBlO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld0J1bmRsZVJlYWRlcihlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9CdW5kbGVSZWFkZXJJbXBsKGUsIHQpO1xuICAgICAgICB9KGZ1bmN0aW9uIF9fUFJJVkFURV90b0J5dGVTdHJlYW1SZWFkZXIoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSByZXR1cm4gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlckhlbHBlcihlLCB0KTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBfX1BSSVZBVEVfdG9CeXRlU3RyZWFtUmVhZGVySGVscGVyKG5ldyBVaW50OEFycmF5KGUpLCB0KTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW0pIHJldHVybiBlLmdldFJlYWRlcigpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU291cmNlIG9mIGB0b0J5dGVTdHJlYW1SZWFkZXJgIGhhcyB0byBiZSBhIEFycmF5QnVmZmVyIG9yIFJlYWRhYmxlU3RyZWFtXCIpO1xuICAgICAgICB9KG4pLCB0KTtcbiAgICB9KG4sIF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKHQpKTtcbiAgICBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfc3luY0VuZ2luZUxvYWRCdW5kbGUoYXdhaXQgX19QUklWQVRFX2dldFN5bmNFbmdpbmUoZSksIGksIHIpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXROYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5hbWVkIHF1ZXJ5XCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gbi5Rci5nZXROYW1lZFF1ZXJ5KGUsIHQpKSk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldEluZGV4Q29uZmlndXJhdGlvbihlLCB0KSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUNvbmZpZ3VyZUZpZWxkSW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5pbmRleE1hbmFnZXIsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb25maWd1cmUgaW5kZXhlc1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiByLmdldEZpZWxkSW5kZXhlcyhlKS5uZXh0KChuID0+IFxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIENvbXBhcmVzIHR3byBhcnJheSBmb3IgZXF1YWxpdHkgdXNpbmcgY29tcGFyYXRvci4gVGhlIG1ldGhvZCBjb21wdXRlcyB0aGVcbiAqIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgaW4gYGFmdGVyYCBidXQgbm90XG4gKiBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluIGBiZWZvcmVgIGJ1dCBtaXNzaW5nXG4gKiBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIGFycmF5LlxuICogQHBhcmFtIGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmb3IgdGhlIGVsZW1lbnRzIGluIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKiBAcGFyYW0gb25BZGQgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2YgYFxuICogYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuXG4gKiBAcGFyYW0gb25SZW1vdmUgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2ZcbiAqIGBiZWZvcmVgIGJ1dCBub3QgYGFmdGVyYC5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZGlmZkFycmF5cyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICBlID0gWyAuLi5lIF0sIHQgPSBbIC4uLnQgXSwgZS5zb3J0KG4pLCB0LnNvcnQobik7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5sZW5ndGgsIG8gPSB0Lmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBfID0gMCwgYSA9IDA7XG4gICAgICAgICAgICBmb3IgKDtfIDwgbyAmJiBhIDwgczsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4oZVthXSwgdFtfXSk7XG4gICAgICAgICAgICAgICAgcyA8IDAgPyBcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkXG4gICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICBpKGVbYSsrXSkgOiBzID4gMCA/IFxuICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgLy8gaXMgb25seSBpbiBgYWZ0ZXJgLlxuICAgICAgICAgICAgICAgIHIodFtfKytdKSA6IChfKyssIGErKyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKDtfIDwgbzsgKSByKHRbXysrXSk7XG4gICAgICAgICAgICBmb3IgKDthIDwgczsgKSBpKGVbYSsrXSk7XG4gICAgICAgIH0obiwgdCwgX19QUklWQVRFX2ZpZWxkSW5kZXhTZW1hbnRpY0NvbXBhcmF0b3IsICh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaChyLmFkZEZpZWxkSW5kZXgoZSwgdCkpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHIuZGVsZXRlRmllbGRJbmRleChlLCB0KSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvLyBUaGUgZm9ybWF0IG9mIHRoZSBMb2NhbFN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBjbGllbnQgc3RhdGUgaXM6XG4gICAgLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG4gICAgKGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpLCB0KSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb21wYXJlcyB0d28gYEV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9uc2Agb2JqZWN0cyBmb3IgZXF1YWxpdHkuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBgRXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zYCB3aXRoIHRoZSBzYW1lXG4gKiBvcHRpb24gdmFsdWVzIGFzIHRoZSBnaXZlbiBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2Nsb25lTG9uZ1BvbGxpbmdPcHRpb25zKGUpIHtcbiAgICBjb25zdCB0ID0ge307XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gZS50aW1lb3V0U2Vjb25kcyAmJiAodC50aW1lb3V0U2Vjb25kcyA9IGUudGltZW91dFNlY29uZHMpLCB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBmZSA9IG5ldyBNYXA7XG5cbi8qKlxuICogQW4gaW5zdGFuY2UgbWFwIHRoYXQgZW5zdXJlcyBvbmx5IG9uZSBEYXRhc3RvcmUgZXhpc3RzIHBlciBGaXJlc3RvcmVcbiAqIGluc3RhbmNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlTm9uRW1wdHlBcmd1bWVudChlLCB0LCBuKSB7XG4gICAgaWYgKCFuKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBhbiBlbXB0eSAke3R9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHR3byBib29sZWFuIG9wdGlvbnMgYXJlIG5vdCBzZXQgYXQgdGhlIHNhbWUgdGltZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyKGUsIHQsIG4sIHIpIHtcbiAgICBpZiAoITAgPT09IHQgJiYgITAgPT09IHIpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGAke2V9IGFuZCAke259IGNhbm5vdCBiZSB1c2VkIHRvZ2V0aGVyLmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBkb2N1bWVudCAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0IGNvbnRhaW5zXG4gKiBhbiBldmVuIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZURvY3VtZW50UGF0aChlKSB7XG4gICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KGUpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50IHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHtlfSBoYXMgJHtlLmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdFxuICogY29udGFpbnMgYW4gb2RkIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZUNvbGxlY3Rpb25QYXRoKGUpIHtcbiAgICBpZiAoRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgY29sbGVjdGlvbiByZWZlcmVuY2UuIENvbGxlY3Rpb24gcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7ZX0gaGFzICR7ZS5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBpdCdzIGEgbm9uLW51bGwgb2JqZWN0IHdpdGhvdXQgYSBjdXN0b20gcHJvdG90eXBlXG4gKiAoaS5lLiBleGNsdWRlcyBBcnJheSwgRGF0ZSwgZXRjLikuXG4gKi9cbi8qKiBSZXR1cm5zIGEgc3RyaW5nIGRlc2NyaWJpbmcgdGhlIHR5cGUgLyB2YWx1ZSBvZiB0aGUgcHJvdmlkZWQgaW5wdXQuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihlKSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBcIm51bGxcIjtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkgcmV0dXJuIGUubGVuZ3RoID4gMjAgJiYgKGUgPSBgJHtlLnN1YnN0cmluZygwLCAyMCl9Li4uYCksIFxuICAgIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiBlIHx8IFwiYm9vbGVhblwiID09IHR5cGVvZiBlKSByZXR1cm4gXCJcIiArIGU7XG4gICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIFwiYW4gYXJyYXlcIjtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAgICAgLyoqIHRyeSB0byBnZXQgdGhlIGNvbnN0cnVjdG9yIG5hbWUgZm9yIGFuIG9iamVjdC4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV90cnlHZXRDdXN0b21PYmplY3RUeXBlKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5jb25zdHJ1Y3RvcikgcmV0dXJuIGUuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLCBvcHRpb25hbGx5IHVud3JhcHBpbmcgQ29tcGF0IHR5cGVzIHRvIGV4cG9zZSB0aGVcbiAqIHVuZGVybHlpbmcgaW5zdGFuY2UuIFRocm93cyBpZiAgYG9iamAgaXMgbm90IGFuIGluc3RhbmNlIG9mIGBUYC5cbiAqXG4gKiBUaGlzIGNhc3QgaXMgdXNlZCBpbiB0aGUgTGl0ZSBhbmQgRnVsbCBTREsgdG8gdmVyaWZ5IGluc3RhbmNlIHR5cGVzIGZvclxuICogYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgcHVibGljIEFQSS5cbiAqIEBpbnRlcm5hbFxuICovIChlKTtcbiAgICAgICAgICAgIHJldHVybiB0ID8gYGEgY3VzdG9tICR7dH0gb2JqZWN0YCA6IFwiYW4gb2JqZWN0XCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZSA/IFwiYSBmdW5jdGlvblwiIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2FzdChlLCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG50KSB7XG4gICAgaWYgKFwiX2RlbGVnYXRlXCIgaW4gZSAmJiAoXG4gICAgLy8gVW53cmFwIENvbXBhdCB0eXBlc1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZSA9IGUuX2RlbGVnYXRlKSwgIShlIGluc3RhbmNlb2YgdCkpIHtcbiAgICAgICAgaWYgKHQubmFtZSA9PT0gZS5jb25zdHJ1Y3Rvci5uYW1lKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIlR5cGUgZG9lcyBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGluc3RhbmNlLiBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgU0RLP1wiKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV92YWx1ZURlc2NyaXB0aW9uKGUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgYEV4cGVjdGVkIHR5cGUgJyR7dC5uYW1lfScsIGJ1dCBpdCB3YXM6ICR7bn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlUG9zaXRpdmVOdW1iZXIoZSwgdCkge1xuICAgIGlmICh0IDw9IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgcmVxdWlyZXMgYSBwb3NpdGl2ZSBudW1iZXIsIGJ1dCBpdCB3YXM6ICR7dH0uYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBzZXR0aW5ncygpIGRlZmF1bHRzOlxuLyoqXG4gKiBBIGNvbmNyZXRlIHR5cGUgZGVzY3JpYmluZyBhbGwgdGhlIHZhbHVlcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHZpYSBhXG4gKiB1c2VyLXN1cHBsaWVkIGBGaXJlc3RvcmVTZXR0aW5nc2Agb2JqZWN0LiBUaGlzIGlzIGEgc2VwYXJhdGUgdHlwZSBzbyB0aGF0XG4gKiBkZWZhdWx0cyBjYW4gYmUgc3VwcGxpZWQgYW5kIHRoZSB2YWx1ZSBjYW4gYmUgY2hlY2tlZCBmb3IgZXF1YWxpdHkuXG4gKi9cbmNsYXNzIEZpcmVzdG9yZVNldHRpbmdzSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB2YXIgdCwgbjtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZS5ob3N0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlLnNzbCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIsIHRoaXMuc3NsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaG9zdCA9IGUuaG9zdCwgdGhpcy5zc2wgPSBudWxsID09PSAodCA9IGUuc3NsKSB8fCB2b2lkIDAgPT09IHQgfHwgdDtcbiAgICAgICAgaWYgKHRoaXMuY3JlZGVudGlhbHMgPSBlLmNyZWRlbnRpYWxzLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSAhIWUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IGUubG9jYWxDYWNoZSwgdm9pZCAwID09PSBlLmNhY2hlU2l6ZUJ5dGVzKSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gNDE5NDMwNDA7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKC0xICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIGUuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLmNhY2hlU2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIF9fUFJJVkFURV92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyKFwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZ1wiLCBlLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIFwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nXCIsIGUuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKSwgXG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9ICEhZS5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPyB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICExIDogdm9pZCAwID09PSBlLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA/IHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gdHJ1ZSA6IFxuICAgICAgICAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIGNvZXJjZSB0aGUgdmFsdWUgdG8gYm9vbGVhbiBldmVuIHRob3VnaFxuICAgICAgICAvLyB0aGUgVHlwZVNjcmlwdCBjb21waWxlciBoYXMgbmFycm93ZWQgdGhlIHR5cGUgdG8gYm9vbGVhbiBhbHJlYWR5LlxuICAgICAgICAvLyBub2luc3BlY3Rpb24gUG9pbnRsZXNzQm9vbGVhbkV4cHJlc3Npb25KU1xuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhZS5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyA9IF9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyhudWxsICE9PSAobiA9IGUuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zKSAmJiB2b2lkIDAgIT09IG4gPyBuIDoge30pLCBcbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlTG9uZ1BvbGxpbmdPcHRpb25zKGUpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUudGltZW91dFNlY29uZHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZS50aW1lb3V0U2Vjb25kcykpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBpbnZhbGlkIGxvbmcgcG9sbGluZyB0aW1lb3V0OiAke2UudGltZW91dFNlY29uZHN9IChtdXN0IG5vdCBiZSBOYU4pYCk7XG4gICAgICAgICAgICAgICAgaWYgKGUudGltZW91dFNlY29uZHMgPCA1KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgaW52YWxpZCBsb25nIHBvbGxpbmcgdGltZW91dDogJHtlLnRpbWVvdXRTZWNvbmRzfSAobWluaW11bSBhbGxvd2VkIHZhbHVlIGlzIDUpYCk7XG4gICAgICAgICAgICAgICAgaWYgKGUudGltZW91dFNlY29uZHMgPiAzMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7ZS50aW1lb3V0U2Vjb25kc30gKG1heGltdW0gYWxsb3dlZCB2YWx1ZSBpcyAzMClgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqLyAodGhpcy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhZS51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0ID09PSBlLmhvc3QgJiYgdGhpcy5zc2wgPT09IGUuc3NsICYmIHRoaXMuY3JlZGVudGlhbHMgPT09IGUuY3JlZGVudGlhbHMgJiYgdGhpcy5jYWNoZVNpemVCeXRlcyA9PT0gZS5jYWNoZVNpemVCeXRlcyAmJiB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPT09IGUuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyAmJiB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9PT0gZS5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgJiYgZnVuY3Rpb24gX19QUklWQVRFX2xvbmdQb2xsaW5nT3B0aW9uc0VxdWFsKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnRpbWVvdXRTZWNvbmRzID09PSB0LnRpbWVvdXRTZWNvbmRzO1xuICAgICAgICB9KHRoaXMuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zLCBlLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucykgJiYgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID09PSBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgJiYgdGhpcy51c2VGZXRjaFN0cmVhbXMgPT09IGUudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbn1cblxuY2xhc3MgRmlyZXN0b3JlJDEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSBlLCB0aGlzLl9hcHBDaGVja0NyZWRlbnRpYWxzID0gdCwgdGhpcy5fZGF0YWJhc2VJZCA9IG4sIFxuICAgICAgICB0aGlzLl9hcHAgPSByLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIEZpcmVzdG9yZSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlLWxpdGVcIiwgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBcIihsaXRlKVwiLCB0aGlzLl9zZXR0aW5ncyA9IG5ldyBGaXJlc3RvcmVTZXR0aW5nc0ltcGwoe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSB3YXMgbm90IGluaXRpYWxpemVkIHVzaW5nIHRoZSBGaXJlYmFzZSBTREsuICdhcHAnIGlzIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHA7XG4gICAgfVxuICAgIGdldCBfaW5pdGlhbGl6ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbjtcbiAgICB9XG4gICAgZ2V0IF90ZXJtaW5hdGVkKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICBfc2V0U2V0dGluZ3MoZSkge1xuICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3NGcm96ZW4pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgaXRzIHNldHRpbmdzIGNhbiBubyBsb25nZXIgYmUgY2hhbmdlZC4gWW91IGNhbiBvbmx5IG1vZGlmeSBzZXR0aW5ncyBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBGaXJlc3RvcmVTZXR0aW5nc0ltcGwoZSksIHZvaWQgMCAhPT0gZS5jcmVkZW50aWFscyAmJiAodGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24gX19QUklWQVRFX21ha2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihlKSB7XG4gICAgICAgICAgICBpZiAoIWUpIHJldHVybiBuZXcgX19QUklWQVRFX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXI7XG4gICAgICAgICAgICBzd2l0Y2ggKGUudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiZmlyc3RQYXJ0eVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0ZpcnN0UGFydHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihlLnNlc3Npb25JbmRleCB8fCBcIjBcIiwgZS5pYW1Ub2tlbiB8fCBudWxsLCBlLmF1dGhUb2tlbkZhY3RvcnkgfHwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInByb3ZpZGVyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuY2xpZW50O1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJtYWtlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShlLmNyZWRlbnRpYWxzKSk7XG4gICAgfVxuICAgIF9nZXRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZnJlZXplU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICEwLCB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2RlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rlcm1pbmF0ZVRhc2sgfHwgKHRoaXMuX3Rlcm1pbmF0ZVRhc2sgPSB0aGlzLl90ZXJtaW5hdGUoKSksIHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgRmlyZXN0b3JlYCBpbnN0YW5jZS4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXBwOiB0aGlzLl9hcHAsXG4gICAgICAgICAgICBkYXRhYmFzZUlkOiB0aGlzLl9kYXRhYmFzZUlkLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuX3NldHRpbmdzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZXMgYWxsIGNvbXBvbmVudHMgdXNlZCBieSB0aGlzIGNsaWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB0byBjbGVhbiB1cCB0aGVpciBvd24gZGVwZW5kZW5jaWVzLCBidXQgbXVzdCBhbHNvIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIE9ubHkgZXZlciBjYWxsZWQgb25jZS5cbiAgICAgKi8gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIGFsbCBjb21wb25lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgaW5zdGFuY2UuIE11c3QgYmUgY2FsbGVkXG4gKiB3aGVuIHRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyB0ZXJtaW5hdGVkLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3ZlQ29tcG9uZW50cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZmUuZ2V0KGUpO1xuICAgICAgICAgICAgdCAmJiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiQ29tcG9uZW50UHJvdmlkZXJcIiwgXCJSZW1vdmluZyBEYXRhc3RvcmVcIiksIGZlLmRlbGV0ZShlKSwgXG4gICAgICAgICAgICB0LnRlcm1pbmF0ZSgpKTtcbiAgICAgICAgfSh0aGlzKSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1vZGlmeSB0aGlzIGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIENsb3VkIEZpcmVzdG9yZSBlbXVsYXRvci5cbiAqXG4gKiBOb3RlOiBUaGlzIG11c3QgYmUgY2FsbGVkIGJlZm9yZSB0aGlzIGluc3RhbmNlIGhhcyBiZWVuIHVzZWQgdG8gZG8gYW55XG4gKiBvcGVyYXRpb25zLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgdG8gY29uZmlndXJlIHRvIGNvbm5lY3QgdG8gdGhlXG4gKiBlbXVsYXRvci5cbiAqIEBwYXJhbSBob3N0IC0gdGhlIGVtdWxhdG9yIGhvc3QgKGV4OiBsb2NhbGhvc3QpLlxuICogQHBhcmFtIHBvcnQgLSB0aGUgZW11bGF0b3IgcG9ydCAoZXg6IDkwMDApLlxuICogQHBhcmFtIG9wdGlvbnMubW9ja1VzZXJUb2tlbiAtIHRoZSBtb2NrIGF1dGggdG9rZW4gdG8gdXNlIGZvciB1bml0IHRlc3RpbmdcbiAqIFNlY3VyaXR5IFJ1bGVzLlxuICovIGZ1bmN0aW9uIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcihlLCB0LCBuLCByID0ge30pIHtcbiAgICB2YXIgaTtcbiAgICBjb25zdCBzID0gKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUkMSkpLl9nZXRTZXR0aW5ncygpLCBvID0gYCR7dH06JHtufWA7XG4gICAgaWYgKFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIgIT09IHMuaG9zdCAmJiBzLmhvc3QgIT09IG8gJiYgX19QUklWQVRFX2xvZ1dhcm4oXCJIb3N0IGhhcyBiZWVuIHNldCBpbiBib3RoIHNldHRpbmdzKCkgYW5kIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcigpLCBlbXVsYXRvciBob3N0IHdpbGwgYmUgdXNlZC5cIiksIFxuICAgIGUuX3NldFNldHRpbmdzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcyksIHtcbiAgICAgICAgaG9zdDogbyxcbiAgICAgICAgc3NsOiAhMVxuICAgIH0pKSwgci5tb2NrVXNlclRva2VuKSB7XG4gICAgICAgIGxldCB0LCBuO1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2Ygci5tb2NrVXNlclRva2VuKSB0ID0gci5tb2NrVXNlclRva2VuLCBuID0gVXNlci5NT0NLX1VTRVI7IGVsc2Uge1xuICAgICAgICAgICAgLy8gTGV0IGNyZWF0ZU1vY2tVc2VyVG9rZW4gdmFsaWRhdGUgZmlyc3QgKGNhdGNoZXMgY29tbW9uIG1pc3Rha2VzIGxpa2VcbiAgICAgICAgICAgIC8vIGludmFsaWQgZmllbGQgXCJ1aWRcIiBhbmQgbWlzc2luZyBmaWVsZCBcInN1YlwiIC8gXCJ1c2VyX2lkXCIuKVxuICAgICAgICAgICAgdCA9IGNyZWF0ZU1vY2tVc2VyVG9rZW4oci5tb2NrVXNlclRva2VuLCBudWxsID09PSAoaSA9IGUuX2FwcCkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5vcHRpb25zLnByb2plY3RJZCk7XG4gICAgICAgICAgICBjb25zdCBzID0gci5tb2NrVXNlclRva2VuLnN1YiB8fCByLm1vY2tVc2VyVG9rZW4udXNlcl9pZDtcbiAgICAgICAgICAgIGlmICghcykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICAgICAgICAgICAgbiA9IG5ldyBVc2VyKHMpO1xuICAgICAgICB9XG4gICAgICAgIGUuX2F1dGhDcmVkZW50aWFscyA9IG5ldyBfX1BSSVZBVEVfRW11bGF0b3JBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihuZXcgX19QUklWQVRFX09BdXRoVG9rZW4odCwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgUXVlcnlgIHJlZmVycyB0byBhIHF1ZXJ5IHdoaWNoIHlvdSBjYW4gcmVhZCBvciBsaXN0ZW4gdG8uIFlvdSBjYW4gYWxzb1xuICogY29uc3RydWN0IHJlZmluZWQgYFF1ZXJ5YCBvYmplY3RzIGJ5IGFkZGluZyBmaWx0ZXJzIGFuZCBvcmRlcmluZy5cbiAqLyBjbGFzcyBRdWVyeSB7XG4gICAgLy8gVGhpcyBpcyB0aGUgbGl0ZSB2ZXJzaW9uIG9mIHRoZSBRdWVyeSBjbGFzcyBpbiB0aGUgbWFpbiBTREsuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgdCwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IHQsIHRoaXMuX3F1ZXJ5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwicXVlcnlcIiwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgZSwgdGhpcy5fcXVlcnkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBEb2N1bWVudFJlZmVyZW5jZWAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgbG9jYXRpb24gaW4gYSBGaXJlc3RvcmUgZGF0YWJhc2VcbiAqIGFuZCBjYW4gYmUgdXNlZCB0byB3cml0ZSwgcmVhZCwgb3IgbGlzdGVuIHRvIHRoZSBsb2NhdGlvbi4gVGhlIGRvY3VtZW50IGF0XG4gKiB0aGUgcmVmZXJlbmNlZCBsb2NhdGlvbiBtYXkgb3IgbWF5IG5vdCBleGlzdC5cbiAqLyBjbGFzcyBEb2N1bWVudFJlZmVyZW5jZSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICB0LCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gdCwgdGhpcy5fa2V5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZG9jdW1lbnRcIiwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICBnZXQgX3BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRvY3VtZW50J3MgaWRlbnRpZmllciB3aXRoaW4gaXRzIGNvbGxlY3Rpb24uXG4gICAgICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudCAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgYmVsb25ncyB0by5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCB0aGlzLmNvbnZlcnRlciwgdGhpcy5fa2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGUsIHRoaXMuX2tleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYENvbGxlY3Rpb25SZWZlcmVuY2VgIG9iamVjdCBjYW4gYmUgdXNlZCBmb3IgYWRkaW5nIGRvY3VtZW50cywgZ2V0dGluZ1xuICogZG9jdW1lbnQgcmVmZXJlbmNlcywgYW5kIHF1ZXJ5aW5nIGZvciBkb2N1bWVudHMgKHVzaW5nIHtAbGluayAocXVlcnk6MSl9KS5cbiAqLyBjbGFzcyBDb2xsZWN0aW9uUmVmZXJlbmNlIGV4dGVuZHMgUXVlcnkge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcihlLCB0LCBfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKG4pKSwgdGhpcy5fcGF0aCA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImNvbGxlY3Rpb25cIjtcbiAgICB9XG4gICAgLyoqIFRoZSBjb2xsZWN0aW9uJ3MgaWRlbnRpZmllci4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgY29sbGVjdGlvbiAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBjb250YWluaW5nIGBEb2N1bWVudFJlZmVyZW5jZWAgaWYgdGhpcyBpcyBhXG4gICAgICogc3ViY29sbGVjdGlvbi4gSWYgdGhpcyBpc24ndCBhIHN1YmNvbGxlY3Rpb24sIHRoZSByZWZlcmVuY2UgaXMgbnVsbC5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3BhdGgucG9wTGFzdCgpO1xuICAgICAgICByZXR1cm4gZS5pc0VtcHR5KCkgPyBudWxsIDogbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgRG9jdW1lbnRLZXkoZSkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBlLCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3Rpb24oZSwgdCwgLi4ubikge1xuICAgIGlmIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCBfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50KFwiY29sbGVjdGlvblwiLCBcInBhdGhcIiwgdCksIGUgaW5zdGFuY2VvZiBGaXJlc3RvcmUkMSkge1xuICAgICAgICBjb25zdCByID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCwgLi4ubik7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVDb2xsZWN0aW9uUGF0aChyKSwgbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UoZSwgLyogY29udmVydGVyPSAqLyBudWxsLCByKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHIgPSBlLl9wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHQsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZUNvbGxlY3Rpb25QYXRoKHIpLCBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZShlLmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcik7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWxpdGUpOiBDb25zaWRlciB1c2luZyBFcnJvckZhY3RvcnkgLVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iLzAxMzFlMWYvcGFja2FnZXMvdXRpbC9zcmMvZXJyb3JzLnRzI0wxMDZcbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBgUXVlcnlgIGluc3RhbmNlIHRoYXQgaW5jbHVkZXMgYWxsIGRvY3VtZW50cyBpbiB0aGVcbiAqIGRhdGFiYXNlIHRoYXQgYXJlIGNvbnRhaW5lZCBpbiBhIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoZVxuICogZ2l2ZW4gYGNvbGxlY3Rpb25JZGAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSByb290IGBGaXJlc3RvcmVgIGluc3RhbmNlLlxuICogQHBhcmFtIGNvbGxlY3Rpb25JZCAtIElkZW50aWZpZXMgdGhlIGNvbGxlY3Rpb25zIHRvIHF1ZXJ5IG92ZXIuIEV2ZXJ5XG4gKiBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGlzIElEIGFzIHRoZSBsYXN0IHNlZ21lbnQgb2YgaXRzIHBhdGhcbiAqIHdpbGwgYmUgaW5jbHVkZWQuIENhbm5vdCBjb250YWluIGEgc2xhc2guXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBgUXVlcnlgLlxuICovIGZ1bmN0aW9uIGNvbGxlY3Rpb25Hcm91cChlLCB0KSB7XG4gICAgaWYgKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUkMSksIF9fUFJJVkFURV92YWxpZGF0ZU5vbkVtcHR5QXJndW1lbnQoXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJjb2xsZWN0aW9uIGlkXCIsIHQpLCBcbiAgICB0LmluZGV4T2YoXCIvXCIpID49IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gSUQgJyR7dH0nIHBhc3NlZCB0byBmdW5jdGlvbiBjb2xsZWN0aW9uR3JvdXAoKS4gQ29sbGVjdGlvbiBJRHMgbXVzdCBub3QgY29udGFpbiAnLycuYCk7XG4gICAgcmV0dXJuIG5ldyBRdWVyeShlLCBcbiAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUZvckNvbGxlY3Rpb25Hcm91cChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChSZXNvdXJjZVBhdGguZW1wdHlQYXRoKCksIGUpO1xuICAgIH0odCkpO1xufVxuXG5mdW5jdGlvbiBkb2MoZSwgdCwgLi4ubikge1xuICAgIGlmIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCBcbiAgICAvLyBXZSBhbGxvdyBvbWlzc2lvbiBvZiAncGF0aFN0cmluZycgYnV0IGV4cGxpY2l0bHkgcHJvaGliaXQgcGFzc2luZyBpbiBib3RoXG4gICAgLy8gJ3VuZGVmaW5lZCcgYW5kICdudWxsJy5cbiAgICAxID09PSBhcmd1bWVudHMubGVuZ3RoICYmICh0ID0gX19QUklWQVRFX0F1dG9JZC5WKCkpLCBfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50KFwiZG9jXCIsIFwicGF0aFwiLCB0KSwgXG4gICAgZSBpbnN0YW5jZW9mIEZpcmVzdG9yZSQxKSB7XG4gICAgICAgIGNvbnN0IHIgPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0LCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZURvY3VtZW50UGF0aChyKSwgbmV3IERvY3VtZW50UmVmZXJlbmNlKGUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBEb2N1bWVudEtleShyKSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCByID0gZS5fcGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0LCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVEb2N1bWVudFBhdGgociksIG5ldyBEb2N1bWVudFJlZmVyZW5jZShlLmZpcmVzdG9yZSwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UgPyBlLmNvbnZlcnRlciA6IG51bGwsIG5ldyBEb2N1bWVudEtleShyKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlcyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiByZWZFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIChlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpICYmICh0IGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgdCBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpICYmIChlLmZpcmVzdG9yZSA9PT0gdC5maXJlc3RvcmUgJiYgZS5wYXRoID09PSB0LnBhdGggJiYgZS5jb252ZXJ0ZXIgPT09IHQuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBxdWVyeUVxdWFsKGUsIHQpIHtcbiAgICByZXR1cm4gZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSBpbnN0YW5jZW9mIFF1ZXJ5ICYmIHQgaW5zdGFuY2VvZiBRdWVyeSAmJiAoZS5maXJlc3RvcmUgPT09IHQuZmlyZXN0b3JlICYmIF9fUFJJVkFURV9xdWVyeUVxdWFscyhlLl9xdWVyeSwgdC5fcXVlcnkpICYmIGUuY29udmVydGVyID09PSB0LmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9Bc3luY1F1ZXVlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHByb21pc2UgaW4gdGhlIHF1ZXVlLlxuICAgICAgICB0aGlzLldhID0gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICAvLyBBIGxpc3Qgb2YgcmV0cnlhYmxlIG9wZXJhdGlvbnMuIFJldHJ5YWJsZSBvcGVyYXRpb25zIGFyZSBydW4gaW4gb3JkZXIgYW5kXG4gICAgICAgIC8vIHJldHJpZWQgd2l0aCBiYWNrb2ZmLlxuICAgICAgICB0aGlzLkdhID0gW10sIFxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBPbmNlIGl0IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIG5vdFxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxuICAgICAgICB0aGlzLnphID0gITEsIFxuICAgICAgICAvLyBPcGVyYXRpb25zIHNjaGVkdWxlZCB0byBiZSBxdWV1ZWQgaW4gdGhlIGZ1dHVyZS4gT3BlcmF0aW9ucyBhcmVcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cbiAgICAgICAgdGhpcy5qYSA9IFtdLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICB0aGlzLkhhID0gbnVsbCwgXG4gICAgICAgIC8vIEZsYWcgc2V0IHdoaWxlIHRoZXJlJ3MgYW4gb3V0c3RhbmRpbmcgQXN5bmNRdWV1ZSBvcGVyYXRpb24sIHVzZWQgZm9yXG4gICAgICAgIC8vIGFzc2VydGlvbiBzYW5pdHktY2hlY2tzLlxuICAgICAgICB0aGlzLkphID0gITEsIFxuICAgICAgICAvLyBFbmFibGVkIGR1cmluZyBzaHV0ZG93biBvbiBTYWZhcmkgdG8gcHJldmVudCBmdXR1cmUgYWNjZXNzIHRvIEluZGV4ZWREQi5cbiAgICAgICAgdGhpcy5ZYSA9ICExLCBcbiAgICAgICAgLy8gTGlzdCBvZiBUaW1lcklkcyB0byBmYXN0LWZvcndhcmQgZGVsYXlzIGZvci5cbiAgICAgICAgdGhpcy5aYSA9IFtdLCBcbiAgICAgICAgLy8gQmFja29mZiB0aW1lciB1c2VkIHRvIHNjaGVkdWxlIHJldHJpZXMgZm9yIHJldHJ5YWJsZSBvcGVyYXRpb25zXG4gICAgICAgIHRoaXMuS28gPSBuZXcgX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZih0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogVGltZXJJZC5Bc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLlhhID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGdldERvY3VtZW50KCk7XG4gICAgICAgICAgICBlICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkFzeW5jUXVldWVcIiwgXCJWaXNpYmlsaXR5IHN0YXRlIGNoYW5nZWQgdG8gXCIgKyBlLnZpc2liaWxpdHlTdGF0ZSksIFxuICAgICAgICAgICAgdGhpcy5Lby5ObygpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgICAgZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUuYWRkRXZlbnRMaXN0ZW5lciAmJiBlLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuWGEpO1xuICAgIH1cbiAgICBnZXQgaXNTaHV0dGluZ0Rvd24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnphO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAoaS5lLlxuICAgICAqIHdlIGlnbm9yZSB0aGUgUHJvbWlzZSByZXN1bHQpLlxuICAgICAqLyAgICBlbnF1ZXVlQW5kRm9yZ2V0KGUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLmVucXVldWUoZSk7XG4gICAgfVxuICAgIGVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKGUpIHtcbiAgICAgICAgdGhpcy5ldSgpLCBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLnR1KGUpO1xuICAgIH1cbiAgICBlbnRlclJlc3RyaWN0ZWRNb2RlKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnphKSB7XG4gICAgICAgICAgICB0aGlzLnphID0gITAsIHRoaXMuWWEgPSBlIHx8ICExO1xuICAgICAgICAgICAgY29uc3QgdCA9IGdldERvY3VtZW50KCk7XG4gICAgICAgICAgICB0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5yZW1vdmVFdmVudExpc3RlbmVyICYmIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5YYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5xdWV1ZShlKSB7XG4gICAgICAgIGlmICh0aGlzLmV1KCksIHRoaXMuemEpIFxuICAgICAgICAvLyBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIG5ldmVyIHJlc29sdmVzLlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCgpID0+IHt9KSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIGRlZmVycmVkIFByb21pc2UgdGhhdCB3ZSBjYW4gcmV0dXJuIHRvIHRoZSBjYWxsZWUuIFRoaXNcbiAgICAgICAgLy8gYWxsb3dzIHVzIHRvIHJldHVybiBhIFwiaGFuZ2luZyBQcm9taXNlXCIgb25seSB0byB0aGUgY2FsbGVlIGFuZCBzdGlsbFxuICAgICAgICAvLyBhZHZhbmNlIHRoZSBxdWV1ZSBldmVuIHdoZW4gdGhlIG9wZXJhdGlvbiBpcyBub3QgcnVuLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gdGhpcy50dSgoKCkgPT4gdGhpcy56YSAmJiB0aGlzLllhID8gUHJvbWlzZS5yZXNvbHZlKCkgOiAoZSgpLnRoZW4odC5yZXNvbHZlLCB0LnJlamVjdCksIFxuICAgICAgICB0LnByb21pc2UpKSkudGhlbigoKCkgPT4gdC5wcm9taXNlKSk7XG4gICAgfVxuICAgIGVucXVldWVSZXRyeWFibGUoZSkge1xuICAgICAgICB0aGlzLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLkdhLnB1c2goZSksIHRoaXMubnUoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgbmV4dCBvcGVyYXRpb24gZnJvbSB0aGUgcmV0cnlhYmxlIHF1ZXVlLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLFxuICAgICAqIHJlc2NoZWR1bGVzIHdpdGggYmFja29mZi5cbiAgICAgKi8gICAgYXN5bmMgbnUoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLkdhLmxlbmd0aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLkdhWzBdKCksIHRoaXMuR2Euc2hpZnQoKSwgdGhpcy5Lby5yZXNldCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSkgdGhyb3cgZTtcbiAvLyBGYWlsdXJlIHdpbGwgYmUgaGFuZGxlZCBieSBBc3luY1F1ZXVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkFzeW5jUXVldWVcIiwgXCJPcGVyYXRpb24gZmFpbGVkIHdpdGggcmV0cnlhYmxlIGVycm9yOiBcIiArIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5HYS5sZW5ndGggPiAwICYmIFxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGFkZGl0aW9uYWwgb3BlcmF0aW9ucywgd2UgcmUtc2NoZWR1bGUgYHJldHJ5TmV4dE9wKClgLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gcnVuIHJldHJ5YWJsZSBvcGVyYXRpb25zIHRoYXQgZmFpbGVkIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlaXIgaW5pdGlhbCBhdHRlbXB0IHNpbmNlIHdlIGRvbid0IGtub3cgd2hldGhlciB0aGV5IGFyZSBhbHJlYWR5XG4gICAgICAgICAgICAvLyBlbnF1ZXVlZC4gSWYsIGZvciBleGFtcGxlLCBgb3AxYCwgYG9wMmAsIGBvcDNgIGFyZSBlbnF1ZXVlZCBhbmQgYG9wMWBcbiAgICAgICAgICAgIC8vIG5lZWRzIHRvICBiZSByZS1ydW4sIHdlIHdpbGwgcnVuIGBvcDFgLCBgb3AxYCwgYG9wMmAgdXNpbmcgdGhlXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGVucXVldWVkIGNhbGxzIHRvIGByZXRyeU5leHRPcCgpYC4gYG9wMygpYCB3aWxsIHRoZW4gcnVuIGluIHRoZVxuICAgICAgICAgICAgLy8gY2FsbCBzY2hlZHVsZWQgaGVyZS5cbiAgICAgICAgICAgIC8vIFNpbmNlIGBiYWNrb2ZmQW5kUnVuKClgIGNhbmNlbHMgYW4gZXhpc3RpbmcgYmFja29mZiBhbmQgc2NoZWR1bGVzIGFcbiAgICAgICAgICAgIC8vIG5ldyBiYWNrb2ZmIG9uIGV2ZXJ5IGNhbGwsIHRoZXJlIGlzIG9ubHkgZXZlciBhIHNpbmdsZSBhZGRpdGlvbmFsXG4gICAgICAgICAgICAvLyBvcGVyYXRpb24gaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgdGhpcy5Lby54bygoKCkgPT4gdGhpcy5udSgpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5XYS50aGVuKCgoKSA9PiAodGhpcy5KYSA9ICEwLCBlKCkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5IYSA9IGUsIHRoaXMuSmEgPSAhMTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgICAgIC8qKlxuICogQ2hyb21lIGluY2x1ZGVzIEVycm9yLm1lc3NhZ2UgaW4gRXJyb3Iuc3RhY2suIE90aGVyIGJyb3dzZXJzIGRvIG5vdC5cbiAqIFRoaXMgcmV0dXJucyBleHBlY3RlZCBvdXRwdXQgb2YgbWVzc2FnZSArIHN0YWNrIHdoZW4gYXZhaWxhYmxlLlxuICogQHBhcmFtIGVycm9yIC0gRXJyb3Igb3IgRmlyZXN0b3JlRXJyb3JcbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2dldE1lc3NhZ2VPclN0YWNrKGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IGUubWVzc2FnZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIGUuc3RhY2sgJiYgKHQgPSBlLnN0YWNrLmluY2x1ZGVzKGUubWVzc2FnZSkgPyBlLnN0YWNrIDogZS5tZXNzYWdlICsgXCJcXG5cIiArIGUuc3RhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKGUpO1xuICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxuICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXG4gICAgICAgICAgICB0aHJvdyBfX1BSSVZBVEVfbG9nRXJyb3IoXCJJTlRFUk5BTCBVTkhBTkRMRUQgRVJST1I6IFwiLCB0KSwgZTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4gKHRoaXMuSmEgPSAhMSwgZSkpKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuV2EgPSB0LCB0O1xuICAgIH1cbiAgICBlbnF1ZXVlQWZ0ZXJEZWxheShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuZXUoKSwgXG4gICAgICAgIC8vIEZhc3QtZm9yd2FyZCBkZWxheXMgZm9yIHRpbWVySWRzIHRoYXQgaGF2ZSBiZWVuIG92ZXJyaWRlbi5cbiAgICAgICAgdGhpcy5aYS5pbmRleE9mKGUpID4gLTEgJiYgKHQgPSAwKTtcbiAgICAgICAgY29uc3QgciA9IERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgZSwgdCwgbiwgKGUgPT4gdGhpcy5ydShlKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5qYS5wdXNoKHIpLCByO1xuICAgIH1cbiAgICBldSgpIHtcbiAgICAgICAgdGhpcy5IYSAmJiBmYWlsKCk7XG4gICAgfVxuICAgIHZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSB7fVxuICAgIC8qKlxuICAgICAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcXVldWVkIHRhc2tzIGFyZSBmaW5pc2hlZCBleGVjdXRpbmcuIERlbGF5ZWRcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxuICAgICAqLyAgICBhc3luYyBpdSgpIHtcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBpbiB0aGUgcXVldWUgcHJpb3IgdG8gZHJhaW5pbmcgbWF5IGhhdmUgZW5xdWV1ZWQgYWRkaXRpb25hbFxuICAgICAgICAvLyBvcGVyYXRpb25zLiBLZWVwIGRyYWluaW5nIHRoZSBxdWV1ZSB1bnRpbCB0aGUgdGFpbCBpcyBubyBsb25nZXIgYWR2YW5jZWQsXG4gICAgICAgIC8vIHdoaWNoIGluZGljYXRlcyB0aGF0IG5vIG1vcmUgbmV3IG9wZXJhdGlvbnMgd2VyZSBlbnF1ZXVlZCBhbmQgdGhhdCBhbGxcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB3ZXJlIGV4ZWN1dGVkLlxuICAgICAgICBsZXQgZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgZSA9IHRoaXMuV2EsIGF3YWl0IGU7XG4gICAgICAgIH0gd2hpbGUgKGUgIT09IHRoaXMuV2EpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IERldGVybWluZSBpZiBhIGRlbGF5ZWQgb3BlcmF0aW9uIHdpdGggYSBwYXJ0aWN1bGFyIFRpbWVySWRcbiAgICAgKiBleGlzdHMuXG4gICAgICovICAgIHN1KGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuamEpIGlmICh0LnRpbWVySWQgPT09IGUpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhc3RUaW1lcklkIC0gRGVsYXllZCBvcGVyYXRpb25zIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhpcyBUaW1lcklkXG4gICAgICogd2lsbCBiZSBkcmFpbmVkLiBQYXNzIFRpbWVySWQuQWxsIHRvIHJ1biBhbGwgZGVsYXllZCBvcGVyYXRpb25zLlxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKi8gICAgb3UoZSkge1xuICAgICAgICAvLyBOb3RlIHRoYXQgZHJhaW5pbmcgbWF5IGdlbmVyYXRlIG1vcmUgZGVsYXllZCBvcHMsIHNvIHdlIGRvIHRoYXQgZmlyc3QuXG4gICAgICAgIHJldHVybiB0aGlzLml1KCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgLy8gUnVuIG9wcyBpbiB0aGUgc2FtZSBvcmRlciB0aGV5J2QgcnVuIGlmIHRoZXkgcmFuIG5hdHVyYWxseS5cbiAgICAgICAgICAgIHRoaXMuamEuc29ydCgoKGUsIHQpID0+IGUudGFyZ2V0VGltZU1zIC0gdC50YXJnZXRUaW1lTXMpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmphKSBpZiAodC5za2lwRGVsYXkoKSwgXCJhbGxcIiAvKiBUaW1lcklkLkFsbCAqLyAhPT0gZSAmJiB0LnRpbWVySWQgPT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICBfdShlKSB7XG4gICAgICAgIHRoaXMuWmEucHVzaChlKTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIHJ1KGUpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmphLmluZGV4T2YoZSk7XG4gICAgICAgIHRoaXMuamEuc3BsaWNlKHQsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKGUpIHtcbiAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYW4gb2JqZWN0IGFuZCBjb250YWlucyBhdCBsZWFzdCBvbmUgb2YgdGhlIHNwZWNpZmllZFxuICogbWV0aG9kcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfaW1wbGVtZW50c0FueU1ldGhvZHMoZSwgdCkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBlO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkgaWYgKGUgaW4gbiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG5bZV0pIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUmVwcmVzZW50cyB0aGUgdGFzayBvZiBsb2FkaW5nIGEgRmlyZXN0b3JlIGJ1bmRsZS4gSXQgcHJvdmlkZXMgcHJvZ3Jlc3Mgb2YgYnVuZGxlXG4gKiBsb2FkaW5nLCBhcyB3ZWxsIGFzIHRhc2sgY29tcGxldGlvbiBhbmQgZXJyb3IgZXZlbnRzLlxuICpcbiAqIFRoZSBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyAoZSwgWyBcIm5leHRcIiwgXCJlcnJvclwiLCBcImNvbXBsZXRlXCIgXSk7XG59XG5cbmNsYXNzIExvYWRCdW5kbGVUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHt9LCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgXG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiAwLFxuICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IDAsXG4gICAgICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgZnVuY3Rpb25zIHRvIGxpc3RlbiB0byBidW5kbGUgbG9hZGluZyBwcm9ncmVzcyBldmVudHMuXG4gICAgICogQHBhcmFtIG5leHQgLSBDYWxsZWQgd2hlbiB0aGVyZSBpcyBhIHByb2dyZXNzIHVwZGF0ZSBmcm9tIGJ1bmRsZSBsb2FkaW5nLiBUeXBpY2FsbHkgYG5leHRgIGNhbGxzIG9jY3VyXG4gICAgICogICBlYWNoIHRpbWUgYSBGaXJlc3RvcmUgZG9jdW1lbnQgaXMgbG9hZGVkIGZyb20gdGhlIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLiBUaGUgdGFzayBhYm9ydHMgYWZ0ZXIgcmVwb3J0aW5nIHRoZVxuICAgICAqICAgZXJyb3IsIGFuZCB0aGVyZSBzaG91bGQgYmUgbm8gbW9yZSB1cGRhdGVzIGFmdGVyIHRoaXMuXG4gICAgICogQHBhcmFtIGNvbXBsZXRlIC0gQ2FsbGVkIHdoZW4gdGhlIGxvYWRpbmcgdGFzayBpcyBjb21wbGV0ZS5cbiAgICAgKi8gICAgb25Qcm9ncmVzcyhlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiBlLFxuICAgICAgICAgICAgZXJyb3I6IHQsXG4gICAgICAgICAgICBjb21wbGV0ZTogblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi5jYXRjaGAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UuY2F0Y2goZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LnRoZW5gIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIENhbGxlZCBvbiB0aGUgY29tcGxldGlvbiBvZiB0aGUgbG9hZGluZyB0YXNrIHdpdGggYSBmaW5hbCBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgdXBkYXRlLlxuICAgICAqICAgVGhlIHVwZGF0ZSB3aWxsIGFsd2F5cyBoYXZlIGl0cyBgdGFza1N0YXRlYCBzZXQgdG8gYFwiU3VjY2Vzc1wiYC5cbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIHRoZW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4oZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgY29tcGxldGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2NvbXBsZXRlV2l0aChlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKGUpLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUoKSwgXG4gICAgICAgIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBmYWlsZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBFcnJvcmAgYXMgdGhlIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9mYWlsV2l0aChlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcy50YXNrU3RhdGUgPSBcIkVycm9yXCIsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodGhpcy5fbGFzdFByb2dyZXNzKSwgXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvcihlKSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGEgcHJvZ3Jlc3MgdXBkYXRlIG9mIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gVGhlIG5ldyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF91cGRhdGVQcm9ncmVzcyhlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IGUsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb25zdGFudCB1c2VkIHRvIGluZGljYXRlIHRoZSBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uIHNob3VsZCBiZSBkaXNhYmxlZC5cbiAqIFNldCB0aGlzIHZhbHVlIGFzIHRoZSBgY2FjaGVTaXplQnl0ZXNgIG9uIHRoZSBzZXR0aW5ncyBwYXNzZWQgdG8gdGhlXG4gKiB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBjb25zdCBnZSA9IC0xO1xuXG4vKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqLyBjbGFzcyBGaXJlc3RvcmUgZXh0ZW5kcyBGaXJlc3RvcmUkMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHN1cGVyKGUsIHQsIG4sIHIpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3QXN5bmNRdWV1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0FzeW5jUXVldWVJbXBsO1xuICAgICAgICB9KCksIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gKG51bGwgPT0gciA/IHZvaWQgMCA6IHIubmFtZSkgfHwgXCJbREVGQVVMVF1cIjtcbiAgICB9XG4gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCB8fCBcbiAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRpYWxpemVkIHRvIGVuc3VyZSB0aGF0IGFsbCBzdWJzZXF1ZW50IEFQSVxuICAgICAgICAvLyB1c2FnZSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICBfX1BSSVZBVEVfY29uZmlndXJlRmlyZXN0b3JlKHRoaXMpLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBGaXJlc3RvcmV9IHdpdGggdGhlIHByb3ZpZGVkIHNldHRpbmdzLlxuICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb24sIGluY2x1ZGluZ1xuICoge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LiBJZiB0aGUgY3VzdG9tIHNldHRpbmdzIGFyZSBlbXB0eSwgdGhpcyBmdW5jdGlvbiBpc1xuICogZXF1aXZhbGVudCB0byBjYWxsaW5nIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB3aXRoIHdoaWNoIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHNldHRpbmdzIC0gQSBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIG5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHJldHVybnMgQSBuZXdseSBpbml0aWFsaXplZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBmdW5jdGlvbiBpbml0aWFsaXplRmlyZXN0b3JlKGUsIHQsIG4pIHtcbiAgICBuIHx8IChuID0gXCIoZGVmYXVsdClcIik7XG4gICAgY29uc3QgciA9IF9nZXRQcm92aWRlcihlLCBcImZpcmVzdG9yZVwiKTtcbiAgICBpZiAoci5pc0luaXRpYWxpemVkKG4pKSB7XG4gICAgICAgIGNvbnN0IGUgPSByLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICBpZGVudGlmaWVyOiBuXG4gICAgICAgIH0pLCBpID0gci5nZXRPcHRpb25zKG4pO1xuICAgICAgICBpZiAoZGVlcEVxdWFsKGksIHQpKSByZXR1cm4gZTtcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJpbml0aWFsaXplRmlyZXN0b3JlKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplRmlyZXN0b3JlKCkgd2l0aCB0aGUgc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEZpcmVzdG9yZSgpIHRvIHJldHVybiB0aGUgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS5cIik7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdm9pZCAwICE9PSB0LmxvY2FsQ2FjaGUpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGUgYW5kIGNhY2hlU2l6ZUJ5dGVzIGNhbm5vdCBiZSBzcGVjaWZpZWQgYXQgdGhlIHNhbWUgdGltZSBhcyBjYWNoZVNpemVCeXRlcyB3aWxsYmUgZGVwcmVjYXRlZC4gSW5zdGVhZCwgc3BlY2lmeSB0aGUgY2FjaGUgc2l6ZSBpbiB0aGUgY2FjaGUgb2JqZWN0XCIpO1xuICAgIGlmICh2b2lkIDAgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgLTEgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdC5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgIHJldHVybiByLmluaXRpYWxpemUoe1xuICAgICAgICBvcHRpb25zOiB0LFxuICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0RmlyZXN0b3JlKHQsIG4pIHtcbiAgICBjb25zdCByID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQgOiBnZXRBcHAoKSwgaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyB0IDogbiB8fCBcIihkZWZhdWx0KVwiLCBzID0gX2dldFByb3ZpZGVyKHIsIFwiZmlyZXN0b3JlXCIpLmdldEltbWVkaWF0ZSh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlcbiAgICB9KTtcbiAgICBpZiAoIXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIGNvbnN0IGUgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQoXCJmaXJlc3RvcmVcIik7XG4gICAgICAgIGUgJiYgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yKHMsIC4uLmUpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpIHtcbiAgICByZXR1cm4gZS5fZmlyZXN0b3JlQ2xpZW50IHx8IF9fUFJJVkFURV9jb25maWd1cmVGaXJlc3RvcmUoZSksIGUuX2ZpcmVzdG9yZUNsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCksIFxuICAgIGUuX2ZpcmVzdG9yZUNsaWVudDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbmZpZ3VyZUZpcmVzdG9yZShlKSB7XG4gICAgdmFyIHQsIG4sIHI7XG4gICAgY29uc3QgaSA9IGUuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbWFrZURhdGFiYXNlSW5mbyhlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJbmZvKGUsIHQsIG4sIHIuaG9zdCwgci5zc2wsIHIuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgci5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIF9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyhyLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyksIHIudXNlRmV0Y2hTdHJlYW1zKTtcbiAgICB9KGUuX2RhdGFiYXNlSWQsIChudWxsID09PSAodCA9IGUuX2FwcCkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5vcHRpb25zLmFwcElkKSB8fCBcIlwiLCBlLl9wZXJzaXN0ZW5jZUtleSwgaSk7XG4gICAgZS5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IEZpcmVzdG9yZUNsaWVudChlLl9hdXRoQ3JlZGVudGlhbHMsIGUuX2FwcENoZWNrQ3JlZGVudGlhbHMsIGUuX3F1ZXVlLCBzKSwgXG4gICAgKG51bGwgPT09IChuID0gaS5sb2NhbENhY2hlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIpICYmIChudWxsID09PSAociA9IGkubG9jYWxDYWNoZSkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIpICYmIChlLl9maXJlc3RvcmVDbGllbnQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgPSB7XG4gICAgICAgIF9vZmZsaW5lS2luZDogaS5sb2NhbENhY2hlLmtpbmQsXG4gICAgICAgIF9vZmZsaW5lOiBpLmxvY2FsQ2FjaGUuX29mZmxpbmVDb21wb25lbnRQcm92aWRlcixcbiAgICAgICAgX29ubGluZTogaS5sb2NhbENhY2hlLl9vbmxpbmVDb21wb25lbnRQcm92aWRlclxuICAgIH0pO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLlxuICpcbiAqIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb25zIChvdGhlciB0aGFuXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUZpcmVzdG9yZX0sIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfSBvclxuICoge0BsaW5rIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2V9LlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZSBpdFxuICogcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogUGVyc2lzdGVuY2UgY2Fubm90IGJlIHVzZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIG1ham9yIHJlbGVhc2UuIEluc3RlYWQsIHNldFxuICogYEZpcmVzdG9yZVNldHRpbmdzLmxvY2FsQ2FjaGVgIHRvIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50TG9jYWxDYWNoZWAgdG9cbiAqIHR1cm4gb24gSW5kZXhlZERiIGNhY2hlLiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2hlbiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWBcbiAqIGlzIGFscmVhZHkgc3BlY2lmaWVkIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uLlxuICovIGZ1bmN0aW9uIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKGUsIHQpIHtcbiAgICBfX1BSSVZBVEVfdmVyaWZ5Tm90SW5pdGlhbGl6ZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpO1xuICAgIGNvbnN0IG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpO1xuICAgIGlmIChuLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlNESyBjYWNoZSBpcyBhbHJlYWR5IHNwZWNpZmllZC5cIik7XG4gICAgX19QUklWQVRFX2xvZ1dhcm4oXCJlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLCB5b3UgY2FuIHVzZSBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIGluc3RlYWQuXCIpO1xuICAgIGNvbnN0IHIgPSBlLl9mcmVlemVTZXR0aW5ncygpLCBpID0gbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIHJldHVybiBfX1BSSVZBVEVfc2V0UGVyc2lzdGVuY2VQcm92aWRlcnMobiwgaSwgbmV3IF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoaSwgci5jYWNoZVNpemVCeXRlcywgbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5mb3JjZU93bmVyc2hpcCkpO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBtdWx0aS10YWIgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS4gSWYgZW5hYmxlZFxuICogYWNyb3NzIGFsbCB0YWJzLCBhbGwgb3BlcmF0aW9ucyBzaGFyZSBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UsIGluY2x1ZGluZ1xuICogc2hhcmVkIGV4ZWN1dGlvbiBvZiBxdWVyaWVzIGFuZCBsYXRlbmN5LWNvbXBlbnNhdGVkIGxvY2FsIGRvY3VtZW50IHVwZGF0ZXNcbiAqIGFjcm9zcyBhbGwgY29ubmVjdGVkIGluc3RhbmNlcy5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZVxuICogaXQgcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiIGFuZFxuICogICAgIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZC5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudFxuICogc3RvcmFnZS5cbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIG1ham9yIHJlbGVhc2UuIEluc3RlYWQsIHNldFxuICogYEZpcmVzdG9yZVNldHRpbmdzLmxvY2FsQ2FjaGVgIHRvIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50TG9jYWxDYWNoZWAgdG9cbiAqIHR1cm4gb24gaW5kZXhlZGRiIGNhY2hlLiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2hlbiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWBcbiAqIGlzIGFscmVhZHkgc3BlY2lmaWVkIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uLlxuICovIGZ1bmN0aW9uIGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoZSkge1xuICAgIF9fUFJJVkFURV92ZXJpZnlOb3RJbml0aWFsaXplZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSk7XG4gICAgY29uc3QgdCA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSk7XG4gICAgaWYgKHQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LkZBSUxFRF9QUkVDT05ESVRJT04sIFwiU0RLIGNhY2hlIGlzIGFscmVhZHkgc3BlY2lmaWVkLlwiKTtcbiAgICBfX1BSSVZBVEVfbG9nV2FybihcImVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gdGhlIGZ1dHVyZSwgeW91IGNhbiB1c2UgYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCBpbnN0ZWFkLlwiKTtcbiAgICBjb25zdCBuID0gZS5fZnJlZXplU2V0dGluZ3MoKSwgciA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlcjtcbiAgICByZXR1cm4gX19QUklWQVRFX3NldFBlcnNpc3RlbmNlUHJvdmlkZXJzKHQsIHIsIG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIociwgbi5jYWNoZVNpemVCeXRlcykpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBib3RoIHRoZSBgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyYCBhbmQgYE9ubGluZUNvbXBvbmVudFByb3ZpZGVyYC5cbiAqIElmIHRoZSBvcGVyYXRpb24gZmFpbHMgd2l0aCBhIHJlY292ZXJhYmxlIGVycm9yIChzZWVcbiAqIGBjYW5SZWNvdmVyRnJvbUluZGV4ZWREYkVycm9yKClgIGJlbG93KSwgdGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVqZWN0ZWRcbiAqIGJ1dCB0aGUgY2xpZW50IHJlbWFpbnMgdXNhYmxlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRQZXJzaXN0ZW5jZVByb3ZpZGVycyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIG4pLCBhd2FpdCBfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgdCksIFxuICAgICAgICAgICAgci5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlO1xuICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfY2FuRmFsbGJhY2tGcm9tSW5kZXhlZERiRXJyb3IodCkpIHRocm93IHQ7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nV2FybihcIkVycm9yIGVuYWJsaW5nIGluZGV4ZWRkYiBjYWNoZS4gRmFsbGluZyBiYWNrIHRvIG1lbW9yeSBjYWNoZTogXCIgKyB0KSwgXG4gICAgICAgICAgICByLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH0pKS50aGVuKCgoKSA9PiByLnByb21pc2UpKTtcbn1cblxuLyoqXG4gKiBDbGVhcnMgdGhlIHBlcnNpc3RlbnQgc3RvcmFnZS4gVGhpcyBpbmNsdWRlcyBwZW5kaW5nIHdyaXRlcyBhbmQgY2FjaGVkXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgd2hpbGUgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGlzIG5vdCBzdGFydGVkIChhZnRlciB0aGUgYXBwIGlzXG4gKiB0ZXJtaW5hdGVkIG9yIHdoZW4gdGhlIGFwcCBpcyBmaXJzdCBpbml0aWFsaXplZCkuIE9uIHN0YXJ0dXAsIHRoaXMgZnVuY3Rpb25cbiAqIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW4ge0BsaW5rXG4gKiBpbml0aWFsaXplRmlyZXN0b3JlfSBvciB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0pKS4gSWYgdGhlIHtAbGluayBGaXJlc3RvcmV9XG4gKiBpbnN0YW5jZSBpcyBzdGlsbCBydW5uaW5nLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGggdGhlIGVycm9yIGNvZGVcbiAqIG9mIGBmYWlsZWQtcHJlY29uZGl0aW9uYC5cbiAqXG4gKiBOb3RlOiBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBpcyBwcmltYXJpbHkgaW50ZW5kZWQgdG8gaGVscCB3cml0ZVxuICogcmVsaWFibGUgdGVzdHMgdGhhdCB1c2UgQ2xvdWQgRmlyZXN0b3JlLiBJdCB1c2VzIGFuIGVmZmljaWVudCBtZWNoYW5pc20gZm9yXG4gKiBkcm9wcGluZyBleGlzdGluZyBkYXRhIGJ1dCBkb2VzIG5vdCBhdHRlbXB0IHRvIHNlY3VyZWx5IG92ZXJ3cml0ZSBvclxuICogb3RoZXJ3aXNlIG1ha2UgY2FjaGVkIGRhdGEgdW5yZWNvdmVyYWJsZS4gRm9yIGFwcGxpY2F0aW9ucyB0aGF0IGFyZSBzZW5zaXRpdmVcbiAqIHRvIHRoZSBkaXNjbG9zdXJlIG9mIGNhY2hlZCBkYXRhIGluIGJldHdlZW4gdXNlciBzZXNzaW9ucywgd2Ugc3Ryb25nbHlcbiAqIHJlY29tbWVuZCBub3QgZW5hYmxpbmcgcGVyc2lzdGVuY2UgYXQgYWxsLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gY2xlYXIgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBwZXJzaXN0ZW50IHN0b3JhZ2UgaXNcbiAqIGNsZWFyZWQuIE90aGVyd2lzZSwgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCBhbiBlcnJvci5cbiAqLyBmdW5jdGlvbiBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKGUpIHtcbiAgICBpZiAoZS5faW5pdGlhbGl6ZWQgJiYgIWUuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LkZBSUxFRF9QUkVDT05ESVRJT04sIFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7XG4gICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuX3F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhlZERiQ2xlYXJQZXJzaXN0ZW5jZShlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfU2ltcGxlRGIudigpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUgKyBcIm1haW5cIjtcbiAgICAgICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfU2ltcGxlRGIuZGVsZXRlKHQpO1xuICAgICAgICAgICAgfShfX1BSSVZBVEVfaW5kZXhlZERiU3RvcmFnZVByZWZpeChlLl9kYXRhYmFzZUlkLCBlLl9wZXJzaXN0ZW5jZUtleSkpLCB0LnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdC5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9KSksIHQucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGZvciB0aGUgYWN0aXZlIHVzZXIgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgaW1tZWRpYXRlbHkgaWYgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHdyaXRlcy5cbiAqIE90aGVyd2lzZSwgdGhlIHByb21pc2Ugd2FpdHMgZm9yIGFsbCBwcmV2aW91c2x5IGlzc3VlZCB3cml0ZXMgKGluY2x1ZGluZ1xuICogdGhvc2Ugd3JpdHRlbiBpbiBhIHByZXZpb3VzIGFwcCBzZXNzaW9uKSwgYnV0IGl0IGRvZXMgbm90IHdhaXQgZm9yIHdyaXRlc1xuICogdGhhdCB3ZXJlIGFkZGVkIGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIElmIHlvdSB3YW50IHRvIHdhaXQgZm9yXG4gKiBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgYWdhaW4uXG4gKlxuICogQW55IG91dHN0YW5kaW5nIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgZHVyaW5nIHVzZXJcbiAqIGNoYW5nZXMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIHdhaXRGb3JQZW5kaW5nV3JpdGVzKGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFdhaXRGb3JQZW5kaW5nV3JpdGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVSZWdpc3RlclBlbmRpbmdXcml0ZXNDYWxsYmFjayhhd2FpdCBfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZShlKSwgdCkpKSwgXG4gICAgICAgIHQucHJvbWlzZTtcbiAgICB9KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpKTtcbn1cblxuLyoqXG4gKiBSZS1lbmFibGVzIHVzZSBvZiB0aGUgbmV0d29yayBmb3IgdGhpcyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBhZnRlciBhIHByaW9yXG4gKiBjYWxsIHRvIHtAbGluayBkaXNhYmxlTmV0d29ya30uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGVuYWJsZWQuXG4gKi8gZnVuY3Rpb24gZW5hYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRFbmFibGVOZXR3b3JrKGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpKTtcbn1cblxuLyoqXG4gKiBEaXNhYmxlcyBuZXR3b3JrIHVzYWdlIGZvciB0aGlzIGluc3RhbmNlLiBJdCBjYW4gYmUgcmUtZW5hYmxlZCB2aWEge0BsaW5rXG4gKiBlbmFibGVOZXR3b3JrfS4gV2hpbGUgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQsIGFueSBzbmFwc2hvdCBsaXN0ZW5lcnMsXG4gKiBgZ2V0RG9jKClgIG9yIGBnZXREb2NzKClgIGNhbGxzIHdpbGwgcmV0dXJuIHJlc3VsdHMgZnJvbSBjYWNoZSwgYW5kIGFueSB3cml0ZVxuICogb3BlcmF0aW9ucyB3aWxsIGJlIHF1ZXVlZCB1bnRpbCB0aGUgbmV0d29yayBpcyByZXN0b3JlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZGlzYWJsZWQuXG4gKi8gZnVuY3Rpb24gZGlzYWJsZU5ldHdvcmsoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RGlzYWJsZU5ldHdvcmsoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSkpO1xufVxuXG4vKipcbiAqIFRlcm1pbmF0ZXMgdGhlIHByb3ZpZGVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBvbmx5IHRoZSBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBmdW5jdGlvblxuICogbWF5IGJlIHVzZWQuIEFueSBvdGhlciBmdW5jdGlvbiB3aWxsIHRocm93IGEgYEZpcmVzdG9yZUVycm9yYC5cbiAqXG4gKiBUbyByZXN0YXJ0IGFmdGVyIHRlcm1pbmF0aW9uLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgRmlyZWJhc2VGaXJlc3RvcmUgd2l0aFxuICoge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LlxuICpcbiAqIFRlcm1pbmF0aW9uIGRvZXMgbm90IGNhbmNlbCBhbnkgcGVuZGluZyB3cml0ZXMsIGFuZCBhbnkgcHJvbWlzZXMgdGhhdCBhcmVcbiAqIGF3YWl0aW5nIGEgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHdpbGwgbm90IGJlIHJlc29sdmVkLiBJZiB5b3UgaGF2ZVxuICogcGVyc2lzdGVuY2UgZW5hYmxlZCwgdGhlIG5leHQgdGltZSB5b3Ugc3RhcnQgdGhpcyBpbnN0YW5jZSwgaXQgd2lsbCByZXN1bWVcbiAqIHNlbmRpbmcgdGhlc2Ugd3JpdGVzIHRvIHRoZSBzZXJ2ZXIuXG4gKlxuICogTm90ZTogVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBpcyBub3QgcmVxdWlyZWQuIFRoaXNcbiAqIGZ1bmN0aW9uIGlzIHVzZWZ1bCBvbmx5IHdoZW4geW91IHdhbnQgdG8gZm9yY2UgdGhpcyBpbnN0YW5jZSB0byByZWxlYXNlIGFsbFxuICogb2YgaXRzIHJlc291cmNlcyBvciBpbiBjb21iaW5hdGlvbiB3aXRoIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHRvXG4gKiBlbnN1cmUgdGhhdCBhbGwgbG9jYWwgc3RhdGUgaXMgZGVzdHJveWVkIGJldHdlZW4gdGVzdCBydW5zLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgaW5zdGFuY2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiB0ZXJtaW5hdGVkLlxuICovIGZ1bmN0aW9uIHRlcm1pbmF0ZShlKSB7XG4gICAgcmV0dXJuIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoZS5hcHAsIFwiZmlyZXN0b3JlXCIsIGUuX2RhdGFiYXNlSWQuZGF0YWJhc2UpLCBlLl9kZWxldGUoKTtcbn1cblxuLyoqXG4gKiBMb2FkcyBhIEZpcmVzdG9yZSBidW5kbGUgaW50byB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBsb2FkIGJ1bmRsZXMgZm9yLlxuICogQHBhcmFtIGJ1bmRsZURhdGEgLSBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBidW5kbGUgdG8gYmUgbG9hZGVkLiBWYWxpZFxuICogb2JqZWN0cyBhcmUgYEFycmF5QnVmZmVyYCwgYFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+YCBvciBgc3RyaW5nYC5cbiAqXG4gKiBAcmV0dXJucyBBIGBMb2FkQnVuZGxlVGFza2Agb2JqZWN0LCB3aGljaCBub3RpZmllcyBjYWxsZXJzIHdpdGggcHJvZ3Jlc3NcbiAqIHVwZGF0ZXMsIGFuZCBjb21wbGV0aW9uIG9yIGVycm9yIGV2ZW50cy4gSXQgY2FuIGJlIHVzZWQgYXMgYVxuICogYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz5gLlxuICovIGZ1bmN0aW9uIGxvYWRCdW5kbGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSwgciA9IG5ldyBMb2FkQnVuZGxlVGFzaztcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudExvYWRCdW5kbGUobiwgZS5fZGF0YWJhc2VJZCwgdCwgciksIHI7XG59XG5cbi8qKlxuICogUmVhZHMgYSBGaXJlc3RvcmUge0BsaW5rIFF1ZXJ5fSBmcm9tIGxvY2FsIGNhY2hlLCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlblxuICogbmFtZS5cbiAqXG4gKiBUaGUgbmFtZWQgcXVlcmllcyBhcmUgcGFja2FnZWQgIGludG8gYnVuZGxlcyBvbiB0aGUgc2VydmVyIHNpZGUgKGFsb25nXG4gKiB3aXRoIHJlc3VsdGluZyBkb2N1bWVudHMpLCBhbmQgbG9hZGVkIHRvIGxvY2FsIGNhY2hlIHVzaW5nIGBsb2FkQnVuZGxlYC4gT25jZVxuICogaW4gbG9jYWwgY2FjaGUsIHVzZSB0aGlzIG1ldGhvZCB0byBleHRyYWN0IGEge0BsaW5rIFF1ZXJ5fSBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gcmVhZCB0aGUgcXVlcnkgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aXRoIHRoZSBRdWVyeSBvciBgbnVsbGAuXG4gKi8gZnVuY3Rpb24gbmFtZWRRdWVyeShlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXROYW1lZFF1ZXJ5KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpLCB0KS50aGVuKCh0ID0+IHQgPyBuZXcgUXVlcnkoZSwgbnVsbCwgdC5xdWVyeSkgOiBudWxsKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92ZXJpZnlOb3RJbml0aWFsaXplZChlKSB7XG4gICAgaWYgKGUuX2luaXRpYWxpemVkIHx8IGUuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgcGVyc2lzdGVuY2UgY2FuIG5vIGxvbmdlciBiZSBlbmFibGVkLiBZb3UgY2FuIG9ubHkgZW5hYmxlIHBlcnNpc3RlbmNlIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC5cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGFnZ3JlZ2F0aW9uIHRoYXQgY2FuIGJlIHBlcmZvcm1lZCBieSBGaXJlc3RvcmUuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbmNsYXNzIEFnZ3JlZ2F0ZUZpZWxkIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQWdncmVnYXRlRmllbGQ8VD5cbiAgICAgKiBAcGFyYW0gX2FnZ3JlZ2F0ZVR5cGUgU3BlY2lmaWVzIHRoZSB0eXBlIG9mIGFnZ3JlZ2F0aW9uIG9wZXJhdGlvbiB0byBwZXJmb3JtLlxuICAgICAqIEBwYXJhbSBfaW50ZXJuYWxGaWVsZFBhdGggT3B0aW9uYWxseSBzcGVjaWZpZXMgdGhlIGZpZWxkIHRoYXQgaXMgYWdncmVnYXRlZC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBUT0RPIChzdW0vYXZnKSBtYWtlIGFnZ3JlZ2F0ZVR5cGUgcHVibGljIHdoZW4gdGhlIGZlYXR1cmUgaXMgc3VwcG9ydGVkXG4gICAgZSA9IFwiY291bnRcIiwgdCkge1xuICAgICAgICB0aGlzLl9hZ2dyZWdhdGVUeXBlID0gZSwgdGhpcy5faW50ZXJuYWxGaWVsZFBhdGggPSB0LCBcbiAgICAgICAgLyoqIEEgdHlwZSBzdHJpbmcgdG8gdW5pcXVlbHkgaWRlbnRpZnkgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiQWdncmVnYXRlRmllbGRcIjtcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIHJlc3VsdHMgb2YgZXhlY3V0aW5nIGFuIGFnZ3JlZ2F0aW9uIHF1ZXJ5LlxuICovIGNsYXNzIEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3Qge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IHQsIHRoaXMuX2RhdGEgPSBuLCBcbiAgICAgICAgLyoqIEEgdHlwZSBzdHJpbmcgdG8gdW5pcXVlbHkgaWRlbnRpZnkgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiQWdncmVnYXRlUXVlcnlTbmFwc2hvdFwiLCB0aGlzLnF1ZXJ5ID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcmVzdWx0cyBvZiB0aGUgYWdncmVnYXRpb25zIHBlcmZvcm1lZCBvdmVyIHRoZSB1bmRlcmx5aW5nXG4gICAgICogcXVlcnkuXG4gICAgICpcbiAgICAgKiBUaGUga2V5cyBvZiB0aGUgcmV0dXJuZWQgb2JqZWN0IHdpbGwgYmUgdGhlIHNhbWUgYXMgdGhvc2Ugb2YgdGhlXG4gICAgICogYEFnZ3JlZ2F0ZVNwZWNgIG9iamVjdCBzcGVjaWZpZWQgdG8gdGhlIGFnZ3JlZ2F0aW9uIG1ldGhvZCwgYW5kIHRoZSB2YWx1ZXNcbiAgICAgKiB3aWxsIGJlIHRoZSBjb3JyZXNwb25kaW5nIGFnZ3JlZ2F0aW9uIHJlc3VsdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSByZXN1bHRzIG9mIHRoZSBhZ2dyZWdhdGlvbnMgcGVyZm9ybWVkIG92ZXIgdGhlIHVuZGVybHlpbmdcbiAgICAgKiBxdWVyeS5cbiAgICAgKi8gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRPYmplY3RNYXAodGhpcy5fZGF0YSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhcnJheSBvZiBieXRlcy5cbiAqLyBjbGFzcyBCeXRlcyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuX2J5dGVTdHJpbmcgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIEJhc2U2NCBzdHJpbmcsIGNvbnZlcnRpbmcgaXQgdG9cbiAgICAgKiBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNlNjQgLSBUaGUgQmFzZTY0IHN0cmluZyB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnl0ZXMoQnl0ZVN0cmluZy5mcm9tQmFzZTY0U3RyaW5nKGUpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gY29uc3RydWN0IGRhdGEgZnJvbSBCYXNlNjQgc3RyaW5nOiBcIiArIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gVWludDhBcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSBVaW50OEFycmF5IHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21VaW50OEFycmF5KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlcyhCeXRlU3RyaW5nLmZyb21VaW50OEFycmF5KGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBhcyBhIEJhc2U2NC1lbmNvZGVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmcgY3JlYXRlZCBmcm9tIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvQmFzZTY0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgYnl0ZXMgaW4gYSBuZXcgYFVpbnQ4QXJyYXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFVpbnQ4QXJyYXkgY3JlYXRlZCBmcm9tIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b1VpbnQ4QXJyYXkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJCeXRlcyhiYXNlNjQ6IFwiICsgdGhpcy50b0Jhc2U2NCgpICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEJ5dGVzYCBvYmplY3QgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgQnl0ZXNgIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcuaXNFcXVhbChlLl9ieXRlU3RyaW5nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqLyBjbGFzcyBGaWVsZFBhdGgge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgRmllbGRQYXRoYCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLmUpIHtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLmxlbmd0aDsgKyt0KSBpZiAoMCA9PT0gZVt0XS5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBmaWVsZCBuYW1lIGF0IGFyZ3VtZW50ICQoaSArIDEpLiBGaWVsZCBuYW1lcyBtdXN0IG5vdCBiZSBlbXB0eS5cIik7XG4gICAgICAgIHRoaXMuX2ludGVybmFsUGF0aCA9IG5ldyBGaWVsZFBhdGgkMShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgRmllbGRQYXRoYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxQYXRoLmlzRXF1YWwoZS5faW50ZXJuYWxQYXRoKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgc2VudGluZWwgYEZpZWxkUGF0aGAgdG8gcmVmZXIgdG8gdGhlIElEIG9mIGEgZG9jdW1lbnQuXG4gKiBJdCBjYW4gYmUgdXNlZCBpbiBxdWVyaWVzIHRvIHNvcnQgb3IgZmlsdGVyIGJ5IHRoZSBkb2N1bWVudCBJRC5cbiAqLyBmdW5jdGlvbiBkb2N1bWVudElkKCkge1xuICAgIHJldHVybiBuZXcgRmllbGRQYXRoKFwiX19uYW1lX19cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNlbnRpbmVsIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIHdoZW4gd3JpdGluZyBkb2N1bWVudCBmaWVsZHMgd2l0aCBgc2V0KClgXG4gKiBvciBgdXBkYXRlKClgLlxuICovIGNsYXNzIEZpZWxkVmFsdWUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWMgQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyB0aGlzIGNsYXNzLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBsYXRpdHVkZS9sb25naXR1ZGUgcGFpci5cbiAqXG4gKiBMYXRpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTkwLCA5MF0uXG4gKiBMb25naXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy0xODAsIDE4MF0uXG4gKi8gY2xhc3MgR2VvUG9pbnQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGBHZW9Qb2ludGAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGxhdGl0dWRlIGFuZFxuICAgICAqIGxvbmdpdHVkZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSAtIFRoZSBsb25naXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShlKSB8fCBlIDwgLTkwIHx8IGUgPiA5MCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJMYXRpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MCwgYnV0IHdhczogXCIgKyBlKTtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0KSB8fCB0IDwgLTE4MCB8fCB0ID4gMTgwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIkxvbmdpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLCBidXQgd2FzOiBcIiArIHQpO1xuICAgICAgICB0aGlzLl9sYXQgPSBlLCB0aGlzLl9sb25nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhdGl0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxhdGl0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9uZ2l0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxvbmdpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgR2VvUG9pbnRgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdCA9PT0gZS5fbGF0ICYmIHRoaXMuX2xvbmcgPT09IGUuX2xvbmc7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBHZW9Qb2ludC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IHRoaXMuX2xhdCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5fbG9uZ1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3R1YWxseSBwcml2YXRlIHRvIEpTIGNvbnN1bWVycyBvZiBvdXIgQVBJLCBzbyB0aGlzIGZ1bmN0aW9uIGlzIHByZWZpeGVkXG4gICAgICogd2l0aCBhbiB1bmRlcnNjb3JlLlxuICAgICAqLyAgICBfY29tcGFyZVRvKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuX2xhdCwgZS5fbGF0KSB8fCBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLl9sb25nLCBlLl9sb25nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHBlID0gL15fXy4qX18kLztcblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBkb2N1bWVudCBkYXRhIChlLmcuIGZvciBhIHNldERhdGEgY2FsbCkuICovIGNsYXNzIFBhcnNlZFNldERhdGEge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZSwgdGhpcy5maWVsZE1hc2sgPSB0LCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5maWVsZE1hc2sgPyBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oZSwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgdCwgdGhpcy5maWVsZFRyYW5zZm9ybXMpIDogbmV3IF9fUFJJVkFURV9TZXRNdXRhdGlvbihlLCB0aGlzLmRhdGEsIHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgXCJ1cGRhdGVcIiBkYXRhIChpLmUuIGZvciBhbiB1cGRhdGVEYXRhIGNhbGwpLiAqLyBjbGFzcyBQYXJzZWRVcGRhdGVEYXRhIHtcbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvLyBUaGUgZmllbGRNYXNrIGRvZXMgbm90IGluY2x1ZGUgZG9jdW1lbnQgdHJhbnNmb3Jtcy5cbiAgICB0LCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGUsIHRoaXMuZmllbGRNYXNrID0gdCwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCB0LCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaXNXcml0ZShlKSB7XG4gICAgc3dpdGNoIChlKSB7XG4gICAgICBjYXNlIDAgLyogVXNlckRhdGFTb3VyY2UuU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovIDpcbiAgICAgIGNhc2UgNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovIDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxufVxuXG4vKiogQSBcImNvbnRleHRcIiBvYmplY3QgcGFzc2VkIGFyb3VuZCB3aGlsZSBwYXJzaW5nIHVzZXIgZGF0YS4gKi8gY2xhc3MgX19QUklWQVRFX1BhcnNlQ29udGV4dEltcGwge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUGFyc2VDb250ZXh0IHdpdGggdGhlIGdpdmVuIHNvdXJjZSBhbmQgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZXR0aW5ncyAtIFRoZSBzZXR0aW5ncyBmb3IgdGhlIHBhcnNlci5cbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSBJRCBvZiB0aGUgRmlyZXN0b3JlIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHRvIGdlbmVyYXRlIHRoZSBWYWx1ZSBwcm90by5cbiAgICAgKiBAcGFyYW0gaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAtIFdoZXRoZXIgdG8gaWdub3JlIHVuZGVmaW5lZCBwcm9wZXJ0aWVzXG4gICAgICogcmF0aGVyIHRoYW4gdGhyb3cuXG4gICAgICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHRyYW5zZm9ybXMgZW5jb3VudGVyZWRcbiAgICAgKiB3aGlsZSBwYXJzaW5nIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBmaWVsZE1hc2sgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCBwYXRocyBlbmNvdW50ZXJlZCB3aGlsZSBwYXJzaW5nXG4gICAgICogdGhlIGRhdGEuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdywgc28gcGF0aCBjYW4gYmVcbiAgICAgKiBudWxsIHRvIGluZGljYXRlIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgYW55IGxvY2F0aW9uIHdpdGhpbiBhbiBhcnJheSAoaW5cbiAgICAgKiB3aGljaCBjYXNlIGNlcnRhaW4gZmVhdHVyZXMgd2lsbCBub3Qgd29yayBhbmQgZXJyb3JzIHdpbGwgYmUgc29tZXdoYXRcbiAgICAgKiBjb21wcm9taXNlZCkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gZSwgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5zZXJpYWxpemVyID0gbiwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gciwgXG4gICAgICAgIC8vIE1pbm9yIGhhY2s6IElmIGZpZWxkVHJhbnNmb3JtcyBpcyB1bmRlZmluZWQsIHdlIGFzc3VtZSB0aGlzIGlzIGFuXG4gICAgICAgIC8vIGV4dGVybmFsIGNhbGwgYW5kIHdlIG5lZWQgdG8gdmFsaWRhdGUgdGhlIGVudGlyZSBwYXRoLlxuICAgICAgICB2b2lkIDAgPT09IGkgJiYgdGhpcy5hdSgpLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGkgfHwgW10sIHRoaXMuZmllbGRNYXNrID0gcyB8fCBbXTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnBhdGg7XG4gICAgfVxuICAgIGdldCB1dSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MudXU7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbmV3IGNvbnRleHQgd2l0aCB0aGUgc3BlY2lmaWVkIHNldHRpbmdzIG92ZXJ3cml0dGVuLiAqLyAgICBjdShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhcnNlQ29udGV4dEltcGwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNldHRpbmdzKSwgZSksIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XG4gICAgfVxuICAgIGx1KGUpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAodCA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5jaGlsZChlKSwgciA9IHRoaXMuY3Uoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIGh1OiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHIuUHUoZSksIHI7XG4gICAgfVxuICAgIEl1KGUpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAodCA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5jaGlsZChlKSwgciA9IHRoaXMuY3Uoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIGh1OiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHIuYXUoKSwgcjtcbiAgICB9XG4gICAgVHUoZSkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdzsgc28gbWFrZSBwYXRoXG4gICAgICAgIC8vIHVuZGVmaW5lZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuY3Uoe1xuICAgICAgICAgICAgcGF0aDogdm9pZCAwLFxuICAgICAgICAgICAgaHU6ICEwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBFdShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoZSwgdGhpcy5zZXR0aW5ncy5tZXRob2ROYW1lLCB0aGlzLnNldHRpbmdzLmR1IHx8ICExLCB0aGlzLnBhdGgsIHRoaXMuc2V0dGluZ3MuQXUpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgJ2ZpZWxkUGF0aCcgd2FzIHRyYXZlcnNlZCB3aGVuIGNyZWF0aW5nIHRoaXMgY29udGV4dC4gKi8gICAgY29udGFpbnMoZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmZpZWxkTWFzay5maW5kKCh0ID0+IGUuaXNQcmVmaXhPZih0KSkpIHx8IHZvaWQgMCAhPT0gdGhpcy5maWVsZFRyYW5zZm9ybXMuZmluZCgodCA9PiBlLmlzUHJlZml4T2YodC5maWVsZCkpKTtcbiAgICB9XG4gICAgYXUoKSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFJlbW92ZSBudWxsIGNoZWNrIG9uY2Ugd2UgaGF2ZSBwcm9wZXIgcGF0aHMgZm9yIGZpZWxkc1xuICAgICAgICAvLyB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAodGhpcy5wYXRoKSBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMucGF0aC5sZW5ndGg7IGUrKykgdGhpcy5QdSh0aGlzLnBhdGguZ2V0KGUpKTtcbiAgICB9XG4gICAgUHUoZSkge1xuICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHRocm93IHRoaXMuRXUoXCJEb2N1bWVudCBmaWVsZHMgbXVzdCBub3QgYmUgZW1wdHlcIik7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfaXNXcml0ZSh0aGlzLnV1KSAmJiBwZS50ZXN0KGUpKSB0aHJvdyB0aGlzLkV1KCdEb2N1bWVudCBmaWVsZHMgY2Fubm90IGJlZ2luIGFuZCBlbmQgd2l0aCBcIl9fXCInKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZvciBwYXJzaW5nIHJhdyB1c2VyIGlucHV0IChwcm92aWRlZCB2aWEgdGhlIEFQSSkgaW50byBpbnRlcm5hbCBtb2RlbFxuICogY2xhc3Nlcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfVXNlckRhdGFSZWFkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gZSwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gdCwgdGhpcy5zZXJpYWxpemVyID0gbiB8fCBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdG9wLWxldmVsIHBhcnNlIGNvbnRleHQuICovICAgIFJ1KGUsIHQsIG4sIHIgPSAhMSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsKHtcbiAgICAgICAgICAgIHV1OiBlLFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogdCxcbiAgICAgICAgICAgIEF1OiBuLFxuICAgICAgICAgICAgcGF0aDogRmllbGRQYXRoJDEuZW1wdHlQYXRoKCksXG4gICAgICAgICAgICBodTogITEsXG4gICAgICAgICAgICBkdTogclxuICAgICAgICB9LCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuc2VyaWFsaXplciwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlKSB7XG4gICAgY29uc3QgdCA9IGUuX2ZyZWV6ZVNldHRpbmdzKCksIG4gPSBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlLl9kYXRhYmFzZUlkKTtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9Vc2VyRGF0YVJlYWRlcihlLl9kYXRhYmFzZUlkLCAhIXQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgbik7XG59XG5cbi8qKiBQYXJzZSBkb2N1bWVudCBkYXRhIGZyb20gYSBzZXQoKSBjYWxsLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKGUsIHQsIG4sIHIsIGksIHMgPSB7fSkge1xuICAgIGNvbnN0IG8gPSBlLlJ1KHMubWVyZ2UgfHwgcy5tZXJnZUZpZWxkcyA/IDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gOiAwIC8qIFVzZXJEYXRhU291cmNlLlNldCAqLyAsIHQsIG4sIGkpO1xuICAgIF9fUFJJVkFURV92YWxpZGF0ZVBsYWluT2JqZWN0KFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgbywgcik7XG4gICAgY29uc3QgXyA9IF9fUFJJVkFURV9wYXJzZU9iamVjdChyLCBvKTtcbiAgICBsZXQgYSwgdTtcbiAgICBpZiAocy5tZXJnZSkgYSA9IG5ldyBGaWVsZE1hc2soby5maWVsZE1hc2spLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7IGVsc2UgaWYgKHMubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2Ygcy5tZXJnZUZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMSh0LCByLCBuKTtcbiAgICAgICAgICAgIGlmICghby5jb250YWlucyhpKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgYEZpZWxkICcke2l9JyBpcyBzcGVjaWZpZWQgaW4geW91ciBmaWVsZCBtYXNrIGJ1dCBtaXNzaW5nIGZyb20geW91ciBpbnB1dCBkYXRhLmApO1xuICAgICAgICAgICAgX19QUklWQVRFX2ZpZWxkTWFza0NvbnRhaW5zKGUsIGkpIHx8IGUucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICBhID0gbmV3IEZpZWxkTWFzayhlKSwgdSA9IG8uZmllbGRUcmFuc2Zvcm1zLmZpbHRlcigoZSA9PiBhLmNvdmVycyhlLmZpZWxkKSkpO1xuICAgIH0gZWxzZSBhID0gbnVsbCwgdSA9IG8uZmllbGRUcmFuc2Zvcm1zO1xuICAgIHJldHVybiBuZXcgUGFyc2VkU2V0RGF0YShuZXcgT2JqZWN0VmFsdWUoXyksIGEsIHUpO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfRGVsZXRlRmllbGRWYWx1ZUltcGwgZXh0ZW5kcyBGaWVsZFZhbHVlIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybShlKSB7XG4gICAgICAgIGlmICgyIC8qIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0ICovICE9PSBlLnV1KSB0aHJvdyAxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyA9PT0gZS51dSA/IGUuRXUoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCBvZiB5b3VyIHVwZGF0ZSBkYXRhYCkgOiBlLkV1KGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3Mge21lcmdlOnRydWV9YCk7XG4gICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXG4gICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXG4gICAgICAgIHJldHVybiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCksIG51bGw7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbDtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNoaWxkIGNvbnRleHQgZm9yIHBhcnNpbmcgU2VyaWFsaXphYmxlRmllbGRWYWx1ZXMuXG4gKlxuICogVGhpcyBpcyBkaWZmZXJlbnQgdGhhbiBjYWxsaW5nIGBQYXJzZUNvbnRleHQuY29udGV4dFdpdGhgIGJlY2F1c2UgaXQga2VlcHNcbiAqIHRoZSBmaWVsZFRyYW5zZm9ybXMgYW5kIGZpZWxkTWFzayBzZXBhcmF0ZS5cbiAqXG4gKiBUaGUgY3JlYXRlZCBjb250ZXh0IGhhcyBpdHMgYGRhdGFTb3VyY2VgIHNldCB0byBgVXNlckRhdGFTb3VyY2UuQXJndW1lbnRgLlxuICogQWx0aG91Z2ggdGhlc2UgdmFsdWVzIGFyZSB1c2VkIHdpdGggd3JpdGVzLCBhbnkgZWxlbWVudHMgaW4gdGhlc2UgRmllbGRWYWx1ZXNcbiAqIGFyZSBub3QgY29uc2lkZXJlZCB3cml0ZXMgc2luY2UgdGhleSBjYW5ub3QgY29udGFpbiBhbnkgRmllbGRWYWx1ZSBzZW50aW5lbHMsXG4gKiBldGMuXG4gKlxuICogQHBhcmFtIGZpZWxkVmFsdWUgLSBUaGUgc2VudGluZWwgRmllbGRWYWx1ZSBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgY2hpbGRcbiAqICAgICBjb250ZXh0LlxuICogQHBhcmFtIGNvbnRleHQgLSBUaGUgcGFyZW50IGNvbnRleHQuXG4gKiBAcGFyYW0gYXJyYXlFbGVtZW50IC0gV2hldGhlciBvciBub3QgdGhlIEZpZWxkVmFsdWUgaGFzIGFuIGFycmF5LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVTZW50aW5lbENoaWxkQ29udGV4dChlLCB0LCBuKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGFyc2VDb250ZXh0SW1wbCh7XG4gICAgICAgIHV1OiAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovICxcbiAgICAgICAgQXU6IHQuc2V0dGluZ3MuQXUsXG4gICAgICAgIG1ldGhvZE5hbWU6IGUuX21ldGhvZE5hbWUsXG4gICAgICAgIGh1OiBuXG4gICAgfSwgdC5kYXRhYmFzZUlkLCB0LnNlcmlhbGl6ZXIsIHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFRyYW5zZm9ybShlLnBhdGgsIG5ldyBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0FycmF5VW5pb25GaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSksIHRoaXMuVnUgPSB0O1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY3JlYXRlU2VudGluZWxDaGlsZENvbnRleHQodGhpcywgZSwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy5WdS5tYXAoKGUgPT4gX19QUklWQVRFX3BhcnNlRGF0YShlLCB0KSkpLCByID0gbmV3IF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgcik7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gZTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9BcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5WdSA9IHQ7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jcmVhdGVTZW50aW5lbENoaWxkQ29udGV4dCh0aGlzLCBlLCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlZ1Lm1hcCgoZSA9PiBfX1BSSVZBVEVfcGFyc2VEYXRhKGUsIHQpKSksIHIgPSBuZXcgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgcik7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gZTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwgZXh0ZW5kcyBGaWVsZFZhbHVlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUpLCB0aGlzLm11ID0gdDtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0oZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKGUuc2VyaWFsaXplciwgdG9OdW1iZXIoZS5zZXJpYWxpemVyLCB0aGlzLm11KSk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0oZS5wYXRoLCB0KTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSBlO1xuICAgIH1cbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYW4gdXBkYXRlKCkgY2FsbC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YShlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IGUuUnUoMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gLCB0LCBuKTtcbiAgICBfX1BSSVZBVEVfdmFsaWRhdGVQbGFpbk9iamVjdChcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIGksIHIpO1xuICAgIGNvbnN0IHMgPSBbXSwgbyA9IE9iamVjdFZhbHVlLmVtcHR5KCk7XG4gICAgZm9yRWFjaChyLCAoKGUsIHIpID0+IHtcbiAgICAgICAgY29uc3QgXyA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKHQsIGUsIG4pO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgciA9IGdldE1vZHVsYXJJbnN0YW5jZShyKTtcbiAgICAgICAgY29uc3QgYSA9IGkuSXUoXyk7XG4gICAgICAgIGlmIChyIGluc3RhbmNlb2YgX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsKSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHMucHVzaChfKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX3BhcnNlRGF0YShyLCBhKTtcbiAgICAgICAgICAgIG51bGwgIT0gZSAmJiAocy5wdXNoKF8pLCBvLnNldChfLCBlKSk7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgY29uc3QgXyA9IG5ldyBGaWVsZE1hc2socyk7XG4gICAgcmV0dXJuIG5ldyBQYXJzZWRVcGRhdGVEYXRhKG8sIF8sIGkuZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYSBsaXN0IG9mIGZpZWxkL3ZhbHVlIGFyZ3VtZW50cy4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlVXBkYXRlVmFyYXJncyhlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgY29uc3QgbyA9IGUuUnUoMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gLCB0LCBuKSwgXyA9IFsgX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKHQsIHIsIG4pIF0sIGEgPSBbIGkgXTtcbiAgICBpZiAocy5sZW5ndGggJSAyICE9IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzIHRoYXQgYWx0ZXJuYXRlIGJldHdlZW4gZmllbGQgbmFtZXMgYW5kIHZhbHVlcy5gKTtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHMubGVuZ3RoOyBlICs9IDIpIF8ucHVzaChfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEodCwgc1tlXSkpLCBcbiAgICBhLnB1c2goc1tlICsgMV0pO1xuICAgIGNvbnN0IHUgPSBbXSwgYyA9IE9iamVjdFZhbHVlLmVtcHR5KCk7XG4gICAgLy8gV2UgaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIHRvIHBpY2sgdGhlIGxhc3QgdmFsdWUgZm9yIGEgZmllbGQgaWYgdGhlXG4gICAgLy8gdXNlciBzcGVjaWZpZWQgdGhlIGZpZWxkIG11bHRpcGxlIHRpbWVzLlxuICAgIGZvciAobGV0IGUgPSBfLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSBpZiAoIV9fUFJJVkFURV9maWVsZE1hc2tDb250YWlucyh1LCBfW2VdKSkge1xuICAgICAgICBjb25zdCB0ID0gX1tlXTtcbiAgICAgICAgbGV0IG4gPSBhW2VdO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKTtcbiAgICAgICAgY29uc3QgciA9IG8uSXUodCk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsKSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHUucHVzaCh0KTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX3BhcnNlRGF0YShuLCByKTtcbiAgICAgICAgICAgIG51bGwgIT0gZSAmJiAodS5wdXNoKHQpLCBjLnNldCh0LCBlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbCA9IG5ldyBGaWVsZE1hc2sodSk7XG4gICAgcmV0dXJuIG5ldyBQYXJzZWRVcGRhdGVEYXRhKGMsIGwsIG8uZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIFwicXVlcnkgdmFsdWVcIiAoZS5nLiB2YWx1ZSBpbiBhIHdoZXJlIGZpbHRlciBvciBhIHZhbHVlIGluIGEgY3Vyc29yXG4gKiBib3VuZCkuXG4gKlxuICogQHBhcmFtIGFsbG93QXJyYXlzIC0gV2hldGhlciB0aGUgcXVlcnkgdmFsdWUgaXMgYW4gYXJyYXkgdGhhdCBtYXkgZGlyZWN0bHlcbiAqIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlUXVlcnlWYWx1ZShlLCB0LCBuLCByID0gITEpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3BhcnNlRGF0YShuLCBlLlJ1KHIgPyA0IC8qIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgKi8gOiAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovICwgdCkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB1c2VyIGRhdGEgdG8gUHJvdG9idWYgVmFsdWVzLlxuICpcbiAqIEBwYXJhbSBpbnB1dCAtIERhdGEgdG8gYmUgcGFyc2VkLlxuICogQHBhcmFtIGNvbnRleHQgLSBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcbiAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlLCBvciBudWxsIGlmIHRoZSB2YWx1ZSB3YXMgYSBGaWVsZFZhbHVlIHNlbnRpbmVsXG4gKiB0aGF0IHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBwYXJzZWQgZGF0YS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VEYXRhKGUsIHQpIHtcbiAgICBpZiAoX19QUklWQVRFX2xvb2tzTGlrZUpzb25PYmplY3QoXG4gICAgLy8gVW53cmFwIHRoZSBBUEkgdHlwZSBmcm9tIHRoZSBDb21wYXQgU0RLLiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBBUEkgdHlwZVxuICAgIC8vIGZyb20gZmlyZXN0b3JlLWV4cC5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSkgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZVBsYWluT2JqZWN0KFwiVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6XCIsIHQsIGUpLCBcbiAgICBfX1BSSVZBVEVfcGFyc2VPYmplY3QoZSwgdCk7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBGaWVsZFZhbHVlKSBcbiAgICAvLyBGaWVsZFZhbHVlcyB1c3VhbGx5IHBhcnNlIGludG8gdHJhbnNmb3JtcyAoZXhjZXB0IGRlbGV0ZUZpZWxkKCkpXG4gICAgLy8gaW4gd2hpY2ggY2FzZSB3ZSBkbyBub3Qgd2FudCB0byBpbmNsdWRlIHRoaXMgZmllbGQgaW4gb3VyIHBhcnNlZCBkYXRhXG4gICAgLy8gKGFzIGRvaW5nIHNvIHdpbGwgb3ZlcndyaXRlIHRoZSBmaWVsZCBkaXJlY3RseSBwcmlvciB0byB0aGUgdHJhbnNmb3JtXG4gICAgLy8gdHJ5aW5nIHRvIHRyYW5zZm9ybSBpdCkuIFNvIHdlIGRvbid0IGFkZCB0aGlzIGxvY2F0aW9uIHRvXG4gICAgLy8gY29udGV4dC5maWVsZE1hc2sgYW5kIHdlIHJldHVybiBudWxsIGFzIG91ciBwYXJzaW5nIHJlc3VsdC5cbiAgICAvKipcbiAqIFwiUGFyc2VzXCIgdGhlIHByb3ZpZGVkIEZpZWxkVmFsdWVJbXBsLCBhZGRpbmcgYW55IG5lY2Vzc2FyeSB0cmFuc2Zvcm1zIHRvXG4gKiBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VTZW50aW5lbEZpZWxkVmFsdWUoZSwgdCkge1xuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICghX19QUklWQVRFX2lzV3JpdGUodC51dSkpIHRocm93IHQuRXUoYCR7ZS5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpYCk7XG4gICAgICAgIGlmICghdC5wYXRoKSB0aHJvdyB0LkV1KGAke2UuX21ldGhvZE5hbWV9KCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c2ApO1xuICAgICAgICBjb25zdCBuID0gZS5fdG9GaWVsZFRyYW5zZm9ybSh0KTtcbiAgICAgICAgbiAmJiB0LmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlXG4gKi8gKGUsIHQpLCBudWxsO1xuICAgIGlmICh2b2lkIDAgPT09IGUgJiYgdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKSBcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkIGl0IGNhbiBuZXZlciBwYXJ0aWNpcGF0ZSBpbiB0aGUgZmllbGRNYXNrLCBzb1xuICAgIC8vIGRvbid0IGhhbmRsZSB0aGlzIGJlbG93LiBJZiBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AgaXMgZmFsc2UsXG4gICAgLy8gYHBhcnNlU2NhbGFyVmFsdWVgIHdpbGwgcmVqZWN0IGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoXG4gICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXG4gICAgdC5wYXRoICYmIHQuZmllbGRNYXNrLnB1c2godC5wYXRoKSwgZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXG4gICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XG4gICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcbiAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cbiAgICAgICAgaWYgKHQuc2V0dGluZ3MuaHUgJiYgNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovICE9PSB0LnV1KSB0aHJvdyB0LkV1KFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZUFycmF5KGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgIGxldCByID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSBfX1BSSVZBVEVfcGFyc2VEYXRhKGksIHQuVHUocikpO1xuICAgICAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gSnVzdCBpbmNsdWRlIG51bGxzIGluIHRoZSBhcnJheSBmb3IgZmllbGRzIGJlaW5nIHJlcGxhY2VkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIHNlbnRpbmVsLlxuICAgICAgICAgICAgICAgIGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgICAgICAgICB9KSwgbi5wdXNoKGUpLCByKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVNjYWxhclZhbHVlKGUsIHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIGUpIHJldHVybiB0b051bWJlcih0LnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICBpZiAoXCJib29sZWFuXCIgPT0gdHlwZW9mIGUpIHJldHVybiB7XG4gICAgICAgICAgICBib29sZWFuVmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiB7XG4gICAgICAgICAgICBzdHJpbmdWYWx1ZTogZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBUaW1lc3RhbXAuZnJvbURhdGUoZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB0b1RpbWVzdGFtcCh0LnNlcmlhbGl6ZXIsIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAvLyBGaXJlc3RvcmUgYmFja2VuZCB0cnVuY2F0ZXMgcHJlY2lzaW9uIGRvd24gdG8gbWljcm9zZWNvbmRzLiBUbyBlbnN1cmVcbiAgICAgICAgICAgIC8vIG9mZmxpbmUgbW9kZSB3b3JrcyB0aGUgc2FtZSB3aXRoIHJlZ2FyZHMgdG8gdHJ1bmNhdGlvbiwgcGVyZm9ybSB0aGVcbiAgICAgICAgICAgIC8vIHRydW5jYXRpb24gaW1tZWRpYXRlbHkgd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgYmFja2VuZCB0byBkbyB0aGF0LlxuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBUaW1lc3RhbXAoZS5zZWNvbmRzLCAxZTMgKiBNYXRoLmZsb29yKGUubmFub3NlY29uZHMgLyAxZTMpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHRvVGltZXN0YW1wKHQuc2VyaWFsaXplciwgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBHZW9Qb2ludCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogZS5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGUubG9uZ2l0dWRlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQnl0ZXMpIHJldHVybiB7XG4gICAgICAgICAgICBieXRlc1ZhbHVlOiBfX1BSSVZBVEVfdG9CeXRlcyh0LnNlcmlhbGl6ZXIsIGUuX2J5dGVTdHJpbmcpXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmRhdGFiYXNlSWQsIHIgPSBlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZDtcbiAgICAgICAgICAgIGlmICghci5pc0VxdWFsKG4pKSB0aHJvdyB0LkV1KGBEb2N1bWVudCByZWZlcmVuY2UgaXMgZm9yIGRhdGFiYXNlICR7ci5wcm9qZWN0SWR9LyR7ci5kYXRhYmFzZX0gYnV0IHNob3VsZCBiZSBmb3IgZGF0YWJhc2UgJHtuLnByb2plY3RJZH0vJHtuLmRhdGFiYXNlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VWYWx1ZTogX19QUklWQVRFX3RvUmVzb3VyY2VOYW1lKGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkIHx8IHQuZGF0YWJhc2VJZCwgZS5fa2V5LnBhdGgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IHQuRXUoYFVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOiAke19fUFJJVkFURV92YWx1ZURlc2NyaXB0aW9uKGUpfWApO1xuICAgIH1cbiAgICAvKipcbiAqIENoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBsb29rcyBsaWtlIGEgSlNPTiBvYmplY3QgdGhhdCBzaG91bGQgYmUgY29udmVydGVkXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcbiAqIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJ1Y3QgdmFsdWUuIEFycmF5cywgRGF0ZXMsXG4gKiBHZW9Qb2ludHMsIGV0Yy4gYXJlIG5vdCBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZSBKU09OIG9iamVjdHMgc2luY2UgdGhleSBtYXBcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cbiAqLyAoZSwgdCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZU9iamVjdChlLCB0KSB7XG4gICAgY29uc3QgbiA9IHt9O1xuICAgIHJldHVybiBpc0VtcHR5KGUpID8gXG4gICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgZXhwbGljaXRseSBhZGQgaXQgdG8gdGhlIHVwZGF0ZVxuICAgIC8vIG1hc2sgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBjcmVhdGVzIGEgbWFwIGVudHJ5LlxuICAgIHQucGF0aCAmJiB0LnBhdGgubGVuZ3RoID4gMCAmJiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCkgOiBmb3JFYWNoKGUsICgoZSwgcikgPT4ge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX3BhcnNlRGF0YShyLCB0Lmx1KGUpKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChuW2VdID0gaSk7XG4gICAgfSkpLCB7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb29rc0xpa2VKc29uT2JqZWN0KGUpIHtcbiAgICByZXR1cm4gIShcIm9iamVjdFwiICE9IHR5cGVvZiBlIHx8IG51bGwgPT09IGUgfHwgZSBpbnN0YW5jZW9mIEFycmF5IHx8IGUgaW5zdGFuY2VvZiBEYXRlIHx8IGUgaW5zdGFuY2VvZiBUaW1lc3RhbXAgfHwgZSBpbnN0YW5jZW9mIEdlb1BvaW50IHx8IGUgaW5zdGFuY2VvZiBCeXRlcyB8fCBlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgZSBpbnN0YW5jZW9mIEZpZWxkVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVQbGFpbk9iamVjdChlLCB0LCBuKSB7XG4gICAgaWYgKCFfX1BSSVZBVEVfbG9va3NMaWtlSnNvbk9iamVjdChuKSB8fCAhZnVuY3Rpb24gX19QUklWQVRFX2lzUGxhaW5PYmplY3QoZSkge1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSAmJiBudWxsICE9PSBlICYmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkgPT09IE9iamVjdC5wcm90b3R5cGUgfHwgbnVsbCA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKTtcbiAgICB9KG4pKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihuKTtcbiAgICAgICAgdGhyb3cgXCJhbiBvYmplY3RcIiA9PT0gciA/IHQuRXUoZSArIFwiIGEgY3VzdG9tIG9iamVjdFwiKSA6IHQuRXUoZSArIFwiIFwiICsgcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKSBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEoZSwgdCwgbikge1xuICAgIGlmICgoXG4gICAgLy8gSWYgcmVxdWlyZWQsIHJlcGxhY2UgdGhlIEZpZWxkUGF0aCBDb21wYXQgY2xhc3Mgd2l0aCB3aXRoIHRoZSBmaXJlc3RvcmUtZXhwXG4gICAgLy8gRmllbGRQYXRoLlxuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpIGluc3RhbmNlb2YgRmllbGRQYXRoKSByZXR1cm4gdC5faW50ZXJuYWxQYXRoO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoZSwgdCk7XG4gICAgdGhyb3cgX19QUklWQVRFX2NyZWF0ZUVycm9yKFwiRmllbGQgcGF0aCBhcmd1bWVudHMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZyBvciBcIiwgZSwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbn1cblxuLyoqXG4gKiBNYXRjaGVzIGFueSBjaGFyYWN0ZXJzIGluIGEgZmllbGQgcGF0aCBzdHJpbmcgdGhhdCBhcmUgcmVzZXJ2ZWQuXG4gKi8gY29uc3QgeWUgPSBuZXcgUmVnRXhwKFwiW35cXFxcKi9cXFxcW1xcXFxdXVwiKTtcblxuLyoqXG4gKiBXcmFwcyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nIHdpdGggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCB0aGUgbWV0aG9kIHRoYXRcbiAqIHdhcyB0aHJvd24uXG4gKiBAcGFyYW0gbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWNseSB2aXNpYmxlIG1ldGhvZCBuYW1lXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBkb3Qtc2VwYXJhdGVkIHN0cmluZyBmb3JtIG9mIGEgZmllbGQgcGF0aCB3aGljaCB3aWxsIGJlXG4gKiBzcGxpdCBvbiBkb3RzLlxuICogQHBhcmFtIHRhcmdldERvYyAtIFRoZSBkb2N1bWVudCBhZ2FpbnN0IHdoaWNoIHRoZSBmaWVsZCBwYXRoIHdpbGwgYmVcbiAqIGV2YWx1YXRlZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhlLCB0LCBuKSB7XG4gICAgaWYgKHQuc2VhcmNoKHllKSA+PSAwKSB0aHJvdyBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoYEludmFsaWQgZmllbGQgcGF0aCAoJHt0fSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gJ34nLCAnKicsICcvJywgJ1snLCBvciAnXSdgLCBlLCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoKC4uLnQuc3BsaXQoXCIuXCIpKS5faW50ZXJuYWxQYXRoO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgdGhyb3cgX19QUklWQVRFX2NyZWF0ZUVycm9yKGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7dH0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCwgZSwgXG4gICAgICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgICAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUVycm9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICBjb25zdCBzID0gciAmJiAhci5pc0VtcHR5KCksIG8gPSB2b2lkIDAgIT09IGk7XG4gICAgbGV0IF8gPSBgRnVuY3Rpb24gJHt0fSgpIGNhbGxlZCB3aXRoIGludmFsaWQgZGF0YWA7XG4gICAgbiAmJiAoXyArPSBcIiAodmlhIGB0b0ZpcmVzdG9yZSgpYClcIiksIF8gKz0gXCIuIFwiO1xuICAgIGxldCBhID0gXCJcIjtcbiAgICByZXR1cm4gKHMgfHwgbykgJiYgKGEgKz0gXCIgKGZvdW5kXCIsIHMgJiYgKGEgKz0gYCBpbiBmaWVsZCAke3J9YCksIG8gJiYgKGEgKz0gYCBpbiBkb2N1bWVudCAke2l9YCksIFxuICAgIGEgKz0gXCIpXCIpLCBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBfICsgZSArIGEpO1xufVxuXG4vKiogQ2hlY2tzIGBoYXlzdGFja2AgaWYgRmllbGRQYXRoIGBuZWVkbGVgIGlzIHByZXNlbnQuIFJ1bnMgaW4gTyhuKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkTWFza0NvbnRhaW5zKGUsIHQpIHtcbiAgICByZXR1cm4gZS5zb21lKChlID0+IGUuaXNFcXVhbCh0KSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIERvY3VtZW50U25hcHNob3QkMSB7XG4gICAgLy8gTm90ZTogVGhpcyBjbGFzcyBpcyBzdHJpcHBlZCBkb3duIHZlcnNpb24gb2YgdGhlIERvY3VtZW50U25hcHNob3QgaW5cbiAgICAvLyB0aGUgbGVnYWN5IFNESy4gVGhlIGNoYW5nZXMgYXJlOlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RNZXRhZGF0YS5cbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90T3B0aW9ucy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gdCwgdGhpcy5fa2V5ID0gbiwgdGhpcy5fZG9jdW1lbnQgPSByLCBcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gaTtcbiAgICB9XG4gICAgLyoqIFByb3BlcnR5IG9mIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwcm92aWRlcyB0aGUgZG9jdW1lbnQncyBJRC4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGBEb2N1bWVudFJlZmVyZW5jZWAgZm9yIHRoZSBkb2N1bWVudCBpbmNsdWRlZCBpbiB0aGUgYERvY3VtZW50U25hcHNob3RgLlxuICAgICAqLyAgICBnZXQgcmVmKCkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyLCB0aGlzLl9rZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaWduYWxzIHdoZXRoZXIgb3Igbm90IHRoZSBkb2N1bWVudCBhdCB0aGUgc25hcHNob3QncyBsb2NhdGlvbiBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuX2RvY3VtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGBcbiAgICAgKiBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90JDEodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZmllbGQgc3BlY2lmaWVkIGJ5IGBmaWVsZFBhdGhgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IG9yIGZpZWxkIGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgZSkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQpIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBRdWVyeURvY3VtZW50U25hcHNob3QkMSBleHRlbmRzIERvY3VtZW50U25hcHNob3QkMSB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpYCBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50KGUsIHQpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKGUsIHQpIDogdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IHQuX2ludGVybmFsUGF0aCA6IHQuX2RlbGVnYXRlLl9pbnRlcm5hbFBhdGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0KGUpIHtcbiAgICBpZiAoXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8gPT09IGUubGltaXRUeXBlICYmIDAgPT09IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuVU5JTVBMRU1FTlRFRCwgXCJsaW1pdFRvTGFzdCgpIHF1ZXJpZXMgcmVxdWlyZSBzcGVjaWZ5aW5nIGF0IGxlYXN0IG9uZSBvcmRlckJ5KCkgY2xhdXNlXCIpO1xufVxuXG4vKipcbiAqIEFuIGBBcHBsaWFibGVDb25zdHJhaW50YCBpcyBhbiBhYnN0cmFjdGlvbiBvZiBhIGNvbnN0cmFpbnQgdGhhdCBjYW4gYmUgYXBwbGllZFxuICogdG8gYSBGaXJlc3RvcmUgcXVlcnkuXG4gKi8gY2xhc3MgQXBwbGlhYmxlQ29uc3RyYWludCB7fVxuXG4vKipcbiAqIEEgYFF1ZXJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnkgYVxuICogRmlyZXN0b3JlIHF1ZXJ5LiBgUXVlcnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIHdoZXJlfSxcbiAqIHtAbGluayBvcmRlckJ5fSwge0BsaW5rIChzdGFydEF0OjEpfSwge0BsaW5rIChzdGFydEFmdGVyOjEpfSwge0BsaW5rXG4gKiAoZW5kQmVmb3JlOjEpfSwge0BsaW5rIChlbmRBdDoxKX0sIHtAbGluayBsaW1pdH0sIHtAbGluayBsaW1pdFRvTGFzdH0gYW5kXG4gKiBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXRcbiAqIGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUNvbnN0cmFpbnQgZXh0ZW5kcyBBcHBsaWFibGVDb25zdHJhaW50IHt9XG5cbmZ1bmN0aW9uIHF1ZXJ5KGUsIHQsIC4uLm4pIHtcbiAgICBsZXQgciA9IFtdO1xuICAgIHQgaW5zdGFuY2VvZiBBcHBsaWFibGVDb25zdHJhaW50ICYmIHIucHVzaCh0KSwgciA9IHIuY29uY2F0KG4pLCBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVRdWVyeUNvbnN0cmFpbnRBcnJheShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcigoZSA9PiBlIGluc3RhbmNlb2YgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50KSkubGVuZ3RoLCBuID0gZS5maWx0ZXIoKGUgPT4gZSBpbnN0YW5jZW9mIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50KSkubGVuZ3RoO1xuICAgICAgICBpZiAodCA+IDEgfHwgdCA+IDAgJiYgbiA+IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZFF1ZXJ5LiBXaGVuIHVzaW5nIGNvbXBvc2l0ZSBmaWx0ZXJzLCB5b3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lIGZpbHRlciBhdCB0aGUgdG9wIGxldmVsLiBDb25zaWRlciBuZXN0aW5nIHRoZSBtdWx0aXBsZSBmaWx0ZXJzIHdpdGhpbiBhbiBgYW5kKC4uLilgIHN0YXRlbWVudC4gRm9yIGV4YW1wbGU6IGNoYW5nZSBgcXVlcnkocXVlcnksIHdoZXJlKC4uLiksIG9yKC4uLikpYCB0byBgcXVlcnkocXVlcnksIGFuZCh3aGVyZSguLi4pLCBvciguLi4pKSlgLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIENvbnZlcnRzIEZpcmVzdG9yZSdzIGludGVybmFsIHR5cGVzIHRvIHRoZSBKYXZhU2NyaXB0IHR5cGVzIHRoYXQgd2UgZXhwb3NlXG4gKiB0byB0aGUgdXNlci5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyAocik7XG4gICAgZm9yIChjb25zdCB0IG9mIHIpIGUgPSB0Ll9hcHBseShlKTtcbiAgICByZXR1cm4gZTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnlcbiAqIGEgRmlyZXN0b3JlIHF1ZXJ5IGJ5IGZpbHRlcmluZyBvbiBvbmUgb3IgbW9yZSBkb2N1bWVudCBmaWVsZHMuXG4gKiBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9IGFuZCBjYW4gdGhlblxuICogYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnNcbiAqIHRoaXMgYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLl9maWVsZCA9IGUsIHRoaXMuX29wID0gdCwgdGhpcy5fdmFsdWUgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIndoZXJlXCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludChlLCB0LCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX3BhcnNlKGUpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlTmV3RmllbGRGaWx0ZXIoZS5fcXVlcnksIHQpLCBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRGaWx0ZXIoZS5fcXVlcnksIHQpKTtcbiAgICB9XG4gICAgX3BhcnNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlLmZpcmVzdG9yZSksIG4gPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlGaWx0ZXIoZSwgdCwgbiwgciwgaSwgcywgbykge1xuICAgICAgICAgICAgbGV0IF87XG4gICAgICAgICAgICBpZiAoaS5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBzIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBzKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJyR7c30nIHF1ZXJpZXMgb24gZG9jdW1lbnRJZCgpLmApO1xuICAgICAgICAgICAgICAgIGlmIChcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHMgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHMpIHtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX3ZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyhvLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbykgdC5wdXNoKF9fUFJJVkFURV9wYXJzZURvY3VtZW50SWRWYWx1ZShyLCBlLCBuKSk7XG4gICAgICAgICAgICAgICAgICAgIF8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB0XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIF8gPSBfX1BSSVZBVEVfcGFyc2VEb2N1bWVudElkVmFsdWUociwgZSwgbyk7XG4gICAgICAgICAgICB9IGVsc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICE9PSBzICYmIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICE9PSBzICYmIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovICE9PSBzIHx8IF9fUFJJVkFURV92YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHMobywgcyksIFxuICAgICAgICAgICAgXyA9IF9fUFJJVkFURV9wYXJzZVF1ZXJ5VmFsdWUobiwgdCwgbywgXG4gICAgICAgICAgICAvKiBhbGxvd0FycmF5cz0gKi8gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBzIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSBzKTtcbiAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUoaSwgcywgXyk7XG4gICAgICAgIH0oZS5fcXVlcnksIFwid2hlcmVcIiwgdCwgZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHRoaXMuX2ZpZWxkLCB0aGlzLl9vcCwgdGhpcy5fdmFsdWUpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH0gdGhhdCBlbmZvcmNlcyB0aGF0IGRvY3VtZW50c1xuICogbXVzdCBjb250YWluIHRoZSBzcGVjaWZpZWQgZmllbGQgYW5kIHRoYXQgdGhlIHZhbHVlIHNob3VsZCBzYXRpc2Z5IHRoZVxuICogcmVsYXRpb24gY29uc3RyYWludCBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggdG8gY29tcGFyZVxuICogQHBhcmFtIG9wU3RyIC0gVGhlIG9wZXJhdGlvbiBzdHJpbmcgKGUuZyBcIiZsdDtcIiwgXCImbHQ7PVwiLCBcIj09XCIsIFwiJmx0O1wiLFxuICogICBcIiZsdDs9XCIsIFwiIT1cIikuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgZm9yIGNvbXBhcmlzb25cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gd2hlcmUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSB0LCBpID0gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChcIndoZXJlXCIsIGUpO1xuICAgIHJldHVybiBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludC5fY3JlYXRlKGksIHIsIG4pO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHNcbiAqIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5IGJ5IHBlcmZvcm1pbmcgdGhlIGxvZ2ljYWwgT1Igb3IgQU5EIG9mIG11bHRpcGxlXG4gKiB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9cyBvciB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fXMuXG4gKiBgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIG9yfSBvclxuICoge0BsaW5rIGFuZH0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnlcbiAqIGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGUgYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50IGV4dGVuZHMgQXBwbGlhYmxlQ29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fcXVlcnlDb25zdHJhaW50cyA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQoZSwgdCk7XG4gICAgfVxuICAgIF9wYXJzZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9xdWVyeUNvbnN0cmFpbnRzLm1hcCgodCA9PiB0Ll9wYXJzZShlKSkpLmZpbHRlcigoZSA9PiBlLmdldEZpbHRlcnMoKS5sZW5ndGggPiAwKSk7XG4gICAgICAgIHJldHVybiAxID09PSB0Lmxlbmd0aCA/IHRbMF0gOiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKHQsIHRoaXMuX2dldE9wZXJhdG9yKCkpO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGFyc2UoZSk7XG4gICAgICAgIHJldHVybiAwID09PSB0LmdldEZpbHRlcnMoKS5sZW5ndGggPyBlIDogKGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZU5ld0ZpbHRlcihlLCB0KSB7XG4gICAgICAgICAgICBsZXQgbiA9IGU7XG4gICAgICAgICAgICBjb25zdCByID0gdC5nZXRGbGF0dGVuZWRGaWx0ZXJzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcikgX19QUklWQVRFX3ZhbGlkYXRlTmV3RmllbGRGaWx0ZXIobiwgZSksIG4gPSBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRGaWx0ZXIobiwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2tzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgZmlsdGVyIG9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIGdpdmVuIGxpc3Qgb2YgZmlsdGVycyBhbmRcbiAgICAgICAgLy8gcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXG4gICAgICAgIChlLl9xdWVyeSwgdCksIG5ldyBRdWVyeShlLmZpcmVzdG9yZSwgZS5jb252ZXJ0ZXIsIF9fUFJJVkFURV9xdWVyeVdpdGhBZGRlZEZpbHRlcihlLl9xdWVyeSwgdCkpKTtcbiAgICB9XG4gICAgX2dldFF1ZXJ5Q29uc3RyYWludHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeUNvbnN0cmFpbnRzO1xuICAgIH1cbiAgICBfZ2V0T3BlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBcImFuZFwiID09PSB0aGlzLnR5cGUgPyBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyA6IFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLztcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fSB0aGF0IGlzIGEgZGlzanVuY3Rpb24gb2ZcbiAqIHRoZSBnaXZlbiBmaWx0ZXIgY29uc3RyYWludHMuIEEgZGlzanVuY3Rpb24gZmlsdGVyIGluY2x1ZGVzIGEgZG9jdW1lbnQgaWYgaXRcbiAqIHNhdGlzZmllcyBhbnkgb2YgdGhlIGdpdmVuIGZpbHRlcnMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5Q29uc3RyYWludHMgLSBPcHRpb25hbC4gVGhlIGxpc3Qgb2ZcbiAqIHtAbGluayBRdWVyeUZpbHRlckNvbnN0cmFpbnR9cyB0byBwZXJmb3JtIGEgZGlzanVuY3Rpb24gZm9yLiBUaGVzZSBtdXN0IGJlXG4gKiBjcmVhdGVkIHdpdGggY2FsbHMgdG8ge0BsaW5rIHdoZXJlfSwge0BsaW5rIG9yfSwgb3Ige0BsaW5rIGFuZH0uXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBvciguLi5lKSB7XG4gICAgLy8gT25seSBzdXBwb3J0IFF1ZXJ5RmlsdGVyQ29uc3RyYWludHNcbiAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IF9fUFJJVkFURV92YWxpZGF0ZVF1ZXJ5RmlsdGVyQ29uc3RyYWludChcIm9yXCIsIGUpKSksIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludC5fY3JlYXRlKFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyAsIGUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0gdGhhdCBpcyBhIGNvbmp1bmN0aW9uIG9mXG4gKiB0aGUgZ2l2ZW4gZmlsdGVyIGNvbnN0cmFpbnRzLiBBIGNvbmp1bmN0aW9uIGZpbHRlciBpbmNsdWRlcyBhIGRvY3VtZW50IGlmIGl0XG4gKiBzYXRpc2ZpZXMgYWxsIG9mIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICpcbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gT3B0aW9uYWwuIFRoZSBsaXN0IG9mXG4gKiB7QGxpbmsgUXVlcnlGaWx0ZXJDb25zdHJhaW50fXMgdG8gcGVyZm9ybSBhIGNvbmp1bmN0aW9uIGZvci4gVGhlc2UgbXVzdCBiZVxuICogY3JlYXRlZCB3aXRoIGNhbGxzIHRvIHtAbGluayB3aGVyZX0sIHtAbGluayBvcn0sIG9yIHtAbGluayBhbmR9LlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gYW5kKC4uLmUpIHtcbiAgICAvLyBPbmx5IHN1cHBvcnQgUXVlcnlGaWx0ZXJDb25zdHJhaW50c1xuICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4gX19QUklWQVRFX3ZhbGlkYXRlUXVlcnlGaWx0ZXJDb25zdHJhaW50KFwiYW5kXCIsIGUpKSksIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludC5fY3JlYXRlKFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovICwgZSk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBzb3J0IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZ1xuICoge0BsaW5rIG9yZGVyQnl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5XG4gKiBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGAuXG4gKlxuICogTm90ZTogRG9jdW1lbnRzIHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIG9yZGVyQnkgZmllbGQgd2lsbCBub3QgYmUgcHJlc2VudCBpblxuICogdGhlIHF1ZXJ5IHJlc3VsdC5cbiAqLyBjbGFzcyBRdWVyeU9yZGVyQnlDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuX2ZpZWxkID0gZSwgdGhpcy5fZGlyZWN0aW9uID0gdCwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJvcmRlckJ5XCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeU9yZGVyQnlDb25zdHJhaW50KGUsIHQpO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5T3JkZXJCeShlLCB0LCBuKSB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5zdGFydEF0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIHN0YXJ0QXQoKSBvciBzdGFydEFmdGVyKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlLmVuZEF0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIGVuZEF0KCkgb3IgZW5kQmVmb3JlKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgT3JkZXJCeSh0LCBuKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVOZXdPcmRlckJ5KGUsIHQpIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gX19QUklWQVRFX2dldEZpcnN0T3JkZXJCeUZpZWxkKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IG9yZGVyIGJ5LiBJdCBtdXN0IG1hdGNoIGFueSBpbmVxdWFsaXR5LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2dldEluZXF1YWxpdHlGaWx0ZXJGaWVsZChlKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBfX1BSSVZBVEVfdmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoKGUsIG4sIHQuZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0oZSwgciksIHI7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGUgYSBgQm91bmRgIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIGBCb3VuZGAgd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUga2V5IG9mIHRoZSBkb2N1bWVudFxuICogYW5kIHNvIG9ubHkgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHdpbGwgY29tcGFyZSBlcXVhbCB0byB0aGUgcmV0dXJuZWRcbiAqIHBvc2l0aW9uLlxuICpcbiAqIFdpbGwgdGhyb3cgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYWxsIGZpZWxkcyBvZiB0aGUgb3JkZXIgYnlcbiAqIG9mIHRoZSBxdWVyeSBvciBpZiBhbnkgb2YgdGhlIGZpZWxkcyBpbiB0aGUgb3JkZXIgYnkgYXJlIGFuIHVuY29tbWl0dGVkXG4gKiBzZXJ2ZXIgdGltZXN0YW1wLlxuICovIChlLl9xdWVyeSwgdGhpcy5fZmllbGQsIHRoaXMuX2RpcmVjdGlvbik7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRPcmRlckJ5KGUsIHQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGUgdGhhdCBvcmRlckJ5IGRvZXMgbm90IGxpc3QgdGhlIHNhbWUga2V5IHR3aWNlLlxuICAgICAgICAgICAgY29uc3QgbiA9IGUuZXhwbGljaXRPcmRlckJ5LmNvbmNhdChbIHQgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgbiwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xuICAgICAgICB9KGUuX3F1ZXJ5LCB0KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlPcmRlckJ5Q29uc3RyYWludH0gdGhhdCBzb3J0cyB0aGUgcXVlcnkgcmVzdWx0IGJ5IHRoZVxuICogc3BlY2lmaWVkIGZpZWxkLCBvcHRpb25hbGx5IGluIGRlc2NlbmRpbmcgb3JkZXIgaW5zdGVhZCBvZiBhc2NlbmRpbmcuXG4gKlxuICogTm90ZTogRG9jdW1lbnRzIHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCBmaWVsZCB3aWxsIG5vdCBiZSBwcmVzZW50XG4gKiBpbiB0aGUgcXVlcnkgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgZmllbGQgdG8gc29ydCBieS5cbiAqIEBwYXJhbSBkaXJlY3Rpb25TdHIgLSBPcHRpb25hbCBkaXJlY3Rpb24gdG8gc29ydCBieSAoJ2FzYycgb3IgJ2Rlc2MnKS4gSWZcbiAqIG5vdCBzcGVjaWZpZWQsIG9yZGVyIHdpbGwgYmUgYXNjZW5kaW5nLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIG9yZGVyQnkoZSwgdCA9IFwiYXNjXCIpIHtcbiAgICBjb25zdCBuID0gdCwgciA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoXCJvcmRlckJ5XCIsIGUpO1xuICAgIHJldHVybiBRdWVyeU9yZGVyQnlDb25zdHJhaW50Ll9jcmVhdGUociwgbik7XG59XG5cbi8qKlxuICogQSBgUXVlcnlMaW1pdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbGltaXQgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnlcbiAqIGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5TGltaXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIGxpbWl0fSBvclxuICoge0BsaW5rIGxpbWl0VG9MYXN0fSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ld1xuICogcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5TGltaXRDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUxpbWl0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fbGltaXQgPSB0LCB0aGlzLl9saW1pdFR5cGUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlMaW1pdENvbnN0cmFpbnQoZSwgdCwgbik7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQoZS5fcXVlcnksIHRoaXMuX2xpbWl0LCB0aGlzLl9saW1pdFR5cGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nXG4gKiBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gbGltaXQoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVQb3NpdGl2ZU51bWJlcihcImxpbWl0XCIsIGUpLCBRdWVyeUxpbWl0Q29uc3RyYWludC5fY3JlYXRlKFwibGltaXRcIiwgZSwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgbGFzdCBtYXRjaGluZ1xuICogZG9jdW1lbnRzLlxuICpcbiAqIFlvdSBtdXN0IHNwZWNpZnkgYXQgbGVhc3Qgb25lIGBvcmRlckJ5YCBjbGF1c2UgZm9yIGBsaW1pdFRvTGFzdGAgcXVlcmllcyxcbiAqIG90aGVyd2lzZSBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24gZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBsaW1pdFRvTGFzdChlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKFwibGltaXRUb0xhc3RcIiwgZSksIFF1ZXJ5TGltaXRDb25zdHJhaW50Ll9jcmVhdGUoXCJsaW1pdFRvTGFzdFwiLCBlLCBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAgaXMgdXNlZCB0byBleGNsdWRlIGRvY3VtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhXG4gKiByZXN1bHQgc2V0IHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKHN0YXJ0QXQ6MSl9IG9yXG4gKiB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGFcbiAqIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlTdGFydEF0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fZG9jT3JGaWVsZHMgPSB0LCB0aGlzLl9pbmNsdXNpdmUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlTdGFydEF0Q29uc3RyYWludChlLCB0LCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzKGUsIHRoaXMudHlwZSwgdGhpcy5fZG9jT3JGaWVsZHMsIHRoaXMuX2luY2x1c2l2ZSk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoU3RhcnRBdChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCB0LCBlLmVuZEF0KTtcbiAgICAgICAgfShlLl9xdWVyeSwgdCkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3RhcnRBdCguLi5lKSB7XG4gICAgcmV0dXJuIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQuX2NyZWF0ZShcInN0YXJ0QXRcIiwgZSwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiBzdGFydEFmdGVyKC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlTdGFydEF0Q29uc3RyYWludC5fY3JlYXRlKFwic3RhcnRBZnRlclwiLCBlLCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlFbmRBdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gZXhjbHVkZSBkb2N1bWVudHMgZnJvbSB0aGUgZW5kIG9mIGFcbiAqIHJlc3VsdCBzZXQgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlFbmRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKGVuZEF0OjEpfSBvclxuICoge0BsaW5rIChlbmRCZWZvcmU6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3XG4gKiBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlFbmRBdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5RW5kQXRDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSBlLCB0aGlzLl9kb2NPckZpZWxkcyA9IHQsIHRoaXMuX2luY2x1c2l2ZSA9IG47XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUVuZEF0Q29uc3RyYWludChlLCB0LCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzKGUsIHRoaXMudHlwZSwgdGhpcy5fZG9jT3JGaWVsZHMsIHRoaXMuX2luY2x1c2l2ZSk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoRW5kQXQoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIGUuZmlsdGVycy5zbGljZSgpLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgZS5zdGFydEF0LCB0KTtcbiAgICAgICAgfShlLl9xdWVyeSwgdCkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZW5kQmVmb3JlKC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlFbmRBdENvbnN0cmFpbnQuX2NyZWF0ZShcImVuZEJlZm9yZVwiLCBlLCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbmZ1bmN0aW9uIGVuZEF0KC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlFbmRBdENvbnN0cmFpbnQuX2NyZWF0ZShcImVuZEF0XCIsIGUsIFxuICAgIC8qaW5jbHVzaXZlPSovICEwKTtcbn1cblxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBib3VuZCBmcm9tIGEgZG9jdW1lbnQgb3IgZmllbGRzICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzKGUsIHQsIG4sIHIpIHtcbiAgICBpZiAoblswXSA9IGdldE1vZHVsYXJJbnN0YW5jZShuWzBdKSwgblswXSBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QkMSkgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY3VtZW50KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgaWYgKCFyKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5OT1RfRk9VTkQsIGBDYW4ndCB1c2UgYSBEb2N1bWVudFNuYXBzaG90IHRoYXQgZG9lc24ndCBleGlzdCBmb3IgJHtufSgpLmApO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIC8vIEJlY2F1c2UgcGVvcGxlIGV4cGVjdCB0byBjb250aW51ZS9lbmQgYSBxdWVyeSBhdCB0aGUgZXhhY3QgZG9jdW1lbnRcbiAgICAgICAgLy8gcHJvdmlkZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBpbXBsaWNpdCBzb3J0IG9yZGVyIHJhdGhlciB0aGFuIHRoZSBleHBsaWNpdFxuICAgICAgICAvLyBzb3J0IG9yZGVyLCBiZWNhdXNlIGl0J3MgZ3VhcmFudGVlZCB0byBjb250YWluIHRoZSBkb2N1bWVudCBrZXkuIFRoYXQgd2F5XG4gICAgICAgIC8vIHRoZSBwb3NpdGlvbiBiZWNvbWVzIHVuYW1iaWd1b3VzIGFuZCB0aGUgcXVlcnkgY29udGludWVzL2VuZHMgZXhhY3RseSBhdFxuICAgICAgICAvLyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuIFdpdGhvdXQgdGhlIGtleSAoYnkgdXNpbmcgdGhlIGV4cGxpY2l0IHNvcnRcbiAgICAgICAgLy8gb3JkZXJzKSwgbXVsdGlwbGUgZG9jdW1lbnRzIGNvdWxkIG1hdGNoIHRoZSBwb3NpdGlvbiwgeWllbGRpbmcgZHVwbGljYXRlXG4gICAgICAgIC8vIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV9xdWVyeU9yZGVyQnkoZSkpIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgcy5wdXNoKF9fUFJJVkFURV9yZWZWYWx1ZSh0LCByLmtleSkpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSByLmRhdGEuZmllbGQobi5maWVsZCk7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKGUpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArIG4uZmllbGQgKyAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgJyR7ZX0nICh1c2VkIGFzIHRoZSBvcmRlckJ5KSBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKHMsIGkpO1xuICAgIH1cbiAgICAvKipcbiAqIENvbnZlcnRzIGEgbGlzdCBvZiBmaWVsZCB2YWx1ZXMgdG8gYSBgQm91bmRgIGZvciB0aGUgZ2l2ZW4gcXVlcnkuXG4gKi8gKGUuX3F1ZXJ5LCBlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgdCwgblswXS5fZG9jdW1lbnQsIHIpO1xuICAgIHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlLmZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21GaWVsZHMoZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IG8gPSBlLmV4cGxpY2l0T3JkZXJCeTtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IG8ubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvICR7cn0oKS4gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBvcmRlckJ5KCkgY2xhdXNlc2ApO1xuICAgICAgICAgICAgY29uc3QgXyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBpLmxlbmd0aDsgcysrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IGlbc107XG4gICAgICAgICAgICAgICAgaWYgKG9bc10uZmllbGQuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBhKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIGRvY3VtZW50IElEIGluICR7cn0oKSwgYnV0IGdvdCBhICR7dHlwZW9mIGF9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkoZSkgJiYgLTEgIT09IGEuaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7cn0oKSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHthfScgY29udGFpbnMgYSBzbGFzaC5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGUucGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhhKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShuKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBvcmRlcmluZyBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtyfSgpIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke259JyBpcyBub3QgYmVjYXVzZSBpdCBjb250YWlucyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IERvY3VtZW50S2V5KG4pO1xuICAgICAgICAgICAgICAgICAgICBfLnB1c2goX19QUklWQVRFX3JlZlZhbHVlKHQsIGkpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX3BhcnNlUXVlcnlWYWx1ZShuLCByLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgXy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmQoXywgcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBkb2N1bWVudElkVmFsdWVgIGludG8gYSBgUmVmZXJlbmNlVmFsdWVgLCB0aHJvd2luZ1xuICogYXBwcm9wcmlhdGUgZXJyb3JzIGlmIHRoZSB2YWx1ZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGEgYERvY3VtZW50UmVmZXJlbmNlYFxuICogb3IgYHN0cmluZ2AsIG9yIGlmIHRoZSBzdHJpbmcgaXMgbWFsZm9ybWVkLlxuICovIChlLl9xdWVyeSwgZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGksIHQsIG4sIHIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlRG9jdW1lbnRJZFZhbHVlKGUsIHQsIG4pIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgKG4gPSBnZXRNb2R1bGFySW5zdGFuY2UobikpKSB7XG4gICAgICAgIGlmIChcIlwiID09PSBuKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBkb2N1bWVudCBJRCwgYnV0IGl0IHdhcyBhbiBlbXB0eSBzdHJpbmcuXCIpO1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHQpICYmIC0xICE9PSBuLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYnkgZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHtufScgY29udGFpbnMgYSAnLycgY2hhcmFjdGVyLmApO1xuICAgICAgICBjb25zdCByID0gdC5wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKG4pKTtcbiAgICAgICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHIpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcHJvdmlkZWQgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7cn0nIGlzIG5vdCBiZWNhdXNlIGl0IGhhcyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzICgke3IubGVuZ3RofSkuYCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVmVmFsdWUoZSwgbmV3IERvY3VtZW50S2V5KHIpKTtcbiAgICB9XG4gICAgaWYgKG4gaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSkgcmV0dXJuIF9fUFJJVkFURV9yZWZWYWx1ZShlLCBuLl9rZXkpO1xuICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgc3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UsIGJ1dCBpdCB3YXM6ICR7X19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24obil9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW50byBhIGRpc2p1bmN0aXZlIGZpbHRlciBzYXRpc2ZpZXMgYWxsXG4gKiBhcnJheSByZXF1aXJlbWVudHMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyhlLCB0KSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGUpIHx8IDAgPT09IGUubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gQSBub24tZW1wdHkgYXJyYXkgaXMgcmVxdWlyZWQgZm9yICcke3QudG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG59XG5cbi8qKlxuICogR2l2ZW4gYW4gb3BlcmF0b3IsIHJldHVybnMgdGhlIHNldCBvZiBvcGVyYXRvcnMgdGhhdCBjYW5ub3QgYmUgdXNlZCB3aXRoIGl0LlxuICpcbiAqIFRoaXMgaXMgbm90IGEgY29tcHJlaGVuc2l2ZSBjaGVjaywgYW5kIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIHJlbW92ZWQgaW4gdGhlXG4gKiBsb25nIHRlcm0uIFZhbGlkYXRpb25zIHNob3VsZCBvY2N1ciBpbiB0aGUgRmlyZXN0b3JlIGJhY2tlbmQuXG4gKlxuICogT3BlcmF0b3JzIGluIGEgcXVlcnkgbXVzdCBhZGhlcmUgdG8gdGhlIGZvbGxvd2luZyBzZXQgb2YgcnVsZXM6XG4gKiAxLiBPbmx5IG9uZSBpbmVxdWFsaXR5IHBlciBxdWVyeS5cbiAqIDIuIGBOT1RfSU5gIGNhbm5vdCBiZSB1c2VkIHdpdGggYXJyYXksIGRpc2p1bmN0aXZlLCBvciBgTk9UX0VRVUFMYCBvcGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlTmV3RmllbGRGaWx0ZXIoZSwgdCkge1xuICAgIGlmICh0LmlzSW5lcXVhbGl0eSgpKSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKGUpLCByID0gdC5maWVsZDtcbiAgICAgICAgaWYgKG51bGwgIT09IG4gJiYgIW4uaXNFcXVhbChyKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEFsbCB3aGVyZSBmaWx0ZXJzIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBtdXN0IGJlIG9uIHRoZSBzYW1lIGZpZWxkLiBCdXQgeW91IGhhdmUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uICcke24udG9TdHJpbmcoKX0nIGFuZCAnJHtyLnRvU3RyaW5nKCl9J2ApO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2dldEZpcnN0T3JkZXJCeUZpZWxkKGUpO1xuICAgICAgICBudWxsICE9PSBpICYmIF9fUFJJVkFURV92YWxpZGF0ZU9yZGVyQnlBbmRJbmVxdWFsaXR5TWF0Y2goZSwgciwgaSk7XG4gICAgfVxuICAgIGNvbnN0IG4gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZmluZE9wSW5zaWRlRmlsdGVycyhlLCB0KSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSBmb3IgKGNvbnN0IGUgb2Ygbi5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpIGlmICh0LmluZGV4T2YoZS5vcCkgPj0gMCkgcmV0dXJuIGUub3A7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0oZS5maWx0ZXJzLCBmdW5jdGlvbiBfX1BSSVZBVEVfY29uZmxpY3RpbmdPcHMoZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIF07XG5cbiAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gWyBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyBdO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH0odC5vcCkpO1xuICAgIGlmIChudWxsICE9PSBuKSBcbiAgICAvLyBTcGVjaWFsIGNhc2Ugd2hlbiBpdCdzIGEgZHVwbGljYXRlIG9wIHRvIGdpdmUgYSBzbGlnaHRseSBjbGVhcmVyIGVycm9yIG1lc3NhZ2UuXG4gICAgdGhyb3cgbiA9PT0gdC5vcCA/IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lICcke3Qub3AudG9TdHJpbmcoKX0nIGZpbHRlci5gKSA6IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSAnJHt0Lm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXJzIHdpdGggJyR7bi50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlT3JkZXJCeUFuZEluZXF1YWxpdHlNYXRjaChlLCB0LCBuKSB7XG4gICAgaWYgKCFuLmlzRXF1YWwodCkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgaGF2ZSBhIHdoZXJlIGZpbHRlciB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgb24gZmllbGQgJyR7dC50b1N0cmluZygpfScgYW5kIHNvIHlvdSBtdXN0IGFsc28gdXNlICcke3QudG9TdHJpbmcoKX0nIGFzIHlvdXIgZmlyc3QgYXJndW1lbnQgdG8gb3JkZXJCeSgpLCBidXQgeW91ciBmaXJzdCBvcmRlckJ5KCkgaXMgb24gZmllbGQgJyR7bi50b1N0cmluZygpfScgaW5zdGVhZC5gKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlUXVlcnlGaWx0ZXJDb25zdHJhaW50KGUsIHQpIHtcbiAgICBpZiAoISh0IGluc3RhbmNlb2YgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQgfHwgdCBpbnN0YW5jZW9mIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgcmVxdWlyZXMgQXBwbGlhYmxlQ29uc3RyYWludHMgY3JlYXRlZCB3aXRoIGEgY2FsbCB0byAnd2hlcmUoLi4uKScsICdvciguLi4pJywgb3IgJ2FuZCguLi4pJy5gKTtcbn1cblxuY2xhc3MgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciB7XG4gICAgY29udmVydFZhbHVlKGUsIHQgPSBcIm5vbmVcIikge1xuICAgICAgICBzd2l0Y2ggKF9fUFJJVkFURV90eXBlT3JkZXIoZSkpIHtcbiAgICAgICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBlLmJvb2xlYW5WYWx1ZTtcblxuICAgICAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAoZS50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAoZSwgdCk7XG5cbiAgICAgICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBlLnN0cmluZ1ZhbHVlO1xuXG4gICAgICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEJ5dGVzKF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUuYnl0ZXNWYWx1ZSkpO1xuXG4gICAgICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0UmVmZXJlbmNlKGUucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRHZW9Qb2ludChlLmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRBcnJheShlLmFycmF5VmFsdWUsIHQpO1xuXG4gICAgICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdChlLm1hcFZhbHVlLCB0KTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydE9iamVjdChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRPYmplY3RNYXAoZS5maWVsZHMsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgY29udmVydE9iamVjdE1hcChlLCB0ID0gXCJub25lXCIpIHtcbiAgICAgICAgY29uc3QgbiA9IHt9O1xuICAgICAgICByZXR1cm4gZm9yRWFjaChlLCAoKGUsIHIpID0+IHtcbiAgICAgICAgICAgIG5bZV0gPSB0aGlzLmNvbnZlcnRWYWx1ZShyLCB0KTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBjb252ZXJ0R2VvUG9pbnQoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEdlb1BvaW50KF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5sYXRpdHVkZSksIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5sb25naXR1ZGUpKTtcbiAgICB9XG4gICAgY29udmVydEFycmF5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIChlLnZhbHVlcyB8fCBbXSkubWFwKChlID0+IHRoaXMuY29udmVydFZhbHVlKGUsIHQpKSk7XG4gICAgfVxuICAgIGNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAoZSwgdCkge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwicHJldmlvdXNcIjpcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZ2V0UHJldmlvdXNWYWx1ZShlKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDogdGhpcy5jb252ZXJ0VmFsdWUobiwgdCk7XG5cbiAgICAgICAgICBjYXNlIFwiZXN0aW1hdGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAoX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lKGUpKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0VGltZXN0YW1wKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSk7XG4gICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wKHQuc2Vjb25kcywgdC5uYW5vcyk7XG4gICAgfVxuICAgIGNvbnZlcnREb2N1bWVudEtleShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhlKTtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoX19QUklWQVRFX2lzVmFsaWRSZXNvdXJjZU5hbWUobikpO1xuICAgICAgICBjb25zdCByID0gbmV3IERhdGFiYXNlSWQobi5nZXQoMSksIG4uZ2V0KDMpKSwgaSA9IG5ldyBEb2N1bWVudEtleShuLnBvcEZpcnN0KDUpKTtcbiAgICAgICAgcmV0dXJuIHIuaXNFcXVhbCh0KSB8fCBcbiAgICAgICAgLy8gVE9ETyhiLzY0MTMwMjAyKTogU29tZWhvdyBzdXBwb3J0IGZvcmVpZ24gcmVmZXJlbmNlcy5cbiAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKGBEb2N1bWVudCAke2l9IGNvbnRhaW5zIGEgZG9jdW1lbnQgcmVmZXJlbmNlIHdpdGhpbiBhIGRpZmZlcmVudCBkYXRhYmFzZSAoJHtyLnByb2plY3RJZH0vJHtyLmRhdGFiYXNlfSkgd2hpY2ggaXMgbm90IHN1cHBvcnRlZC4gSXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgcmVmZXJlbmNlIGluIHRoZSBjdXJyZW50IGRhdGFiYXNlICgke3QucHJvamVjdElkfS8ke3QuZGF0YWJhc2V9KSBpbnN0ZWFkLmApLCBcbiAgICAgICAgaTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbnZlcnRzIGN1c3RvbSBtb2RlbCBvYmplY3Qgb2YgdHlwZSBUIGludG8gYERvY3VtZW50RGF0YWAgYnkgYXBwbHlpbmcgdGhlXG4gKiBjb252ZXJ0ZXIgaWYgaXQgZXhpc3RzLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIGNvbnZlcnRpbmcgdXNlciBvYmplY3RzIHRvIGBEb2N1bWVudERhdGFgXG4gKiBiZWNhdXNlIHdlIHdhbnQgdG8gcHJvdmlkZSB0aGUgdXNlciB3aXRoIGEgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlIGlmXG4gKiB0aGVpciBgc2V0KClgIG9yIGZhaWxzIGR1ZSB0byBpbnZhbGlkIGRhdGEgb3JpZ2luYXRpbmcgZnJvbSBhIGB0b0ZpcmVzdG9yZSgpYFxuICogY2FsbC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKGUsIHQsIG4pIHtcbiAgICBsZXQgcjtcbiAgICAvLyBDYXN0IHRvIGBhbnlgIGluIG9yZGVyIHRvIHNhdGlzZnkgdGhlIHVuaW9uIHR5cGUgY29uc3RyYWludCBvblxuICAgIC8vIHRvRmlyZXN0b3JlKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gciA9IGUgPyBuICYmIChuLm1lcmdlIHx8IG4ubWVyZ2VGaWVsZHMpID8gZS50b0ZpcmVzdG9yZSh0LCBuKSA6IGUudG9GaXJlc3RvcmUodCkgOiB0LCBcbiAgICByO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfTGl0ZVVzZXJEYXRhV3JpdGVyIGV4dGVuZHMgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IGU7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyhlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQnl0ZXMoZSk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkoZSwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIHN1bSBvZlxuICogYSBzcGVjaWZpZWQgZmllbGQgb3ZlciBhIHJhbmdlIG9mIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiBhIHF1ZXJ5LlxuICogQHBhcmFtIGZpZWxkIFNwZWNpZmllcyB0aGUgZmllbGQgdG8gc3VtIGFjcm9zcyB0aGUgcmVzdWx0IHNldC5cbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBzdW0oZSkge1xuICAgIHJldHVybiBuZXcgQWdncmVnYXRlRmllbGQoXCJzdW1cIiwgX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKFwic3VtXCIsIGUpKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gQWdncmVnYXRlRmllbGQgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcHV0ZSB0aGUgYXZlcmFnZSBvZlxuICogYSBzcGVjaWZpZWQgZmllbGQgb3ZlciBhIHJhbmdlIG9mIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiBhIHF1ZXJ5LlxuICogQHBhcmFtIGZpZWxkIFNwZWNpZmllcyB0aGUgZmllbGQgdG8gYXZlcmFnZSBhY3Jvc3MgdGhlIHJlc3VsdCBzZXQuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gYXZlcmFnZShlKSB7XG4gICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVGaWVsZChcImF2Z1wiLCBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEoXCJhdmVyYWdlXCIsIGUpKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gQWdncmVnYXRlRmllbGQgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcHV0ZSB0aGUgY291bnQgb2ZcbiAqIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiBhIHF1ZXJ5LlxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIGNvdW50KCkge1xuICAgIHJldHVybiBuZXcgQWdncmVnYXRlRmllbGQoXCJjb3VudFwiKTtcbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0d28gJ0FnZ3JlZ2F0ZUZpZWxkYCBpbnN0YW5jZXMgZm9yIGVxdWFsaXR5LlxuICpcbiAqIEBwYXJhbSBsZWZ0IENvbXBhcmUgdGhpcyBBZ2dyZWdhdGVGaWVsZCB0byB0aGUgYHJpZ2h0YC5cbiAqIEBwYXJhbSByaWdodCBDb21wYXJlIHRoaXMgQWdncmVnYXRlRmllbGQgdG8gdGhlIGBsZWZ0YC5cbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBhZ2dyZWdhdGVGaWVsZEVxdWFsKGUsIHQpIHtcbiAgICB2YXIgbiwgcjtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEFnZ3JlZ2F0ZUZpZWxkICYmIHQgaW5zdGFuY2VvZiBBZ2dyZWdhdGVGaWVsZCAmJiBlLl9hZ2dyZWdhdGVUeXBlID09PSB0Ll9hZ2dyZWdhdGVUeXBlICYmIChudWxsID09PSAobiA9IGUuX2ludGVybmFsRmllbGRQYXRoKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbm9uaWNhbFN0cmluZygpKSA9PT0gKG51bGwgPT09IChyID0gdC5faW50ZXJuYWxGaWVsZFBhdGgpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuY2Fub25pY2FsU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgaW5zdGFuY2VzIGZvciBlcXVhbGl0eS5cbiAqXG4gKiBUd28gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCBcImVxdWFsXCIgaWYgdGhleSBoYXZlXG4gKiB1bmRlcmx5aW5nIHF1ZXJpZXMgdGhhdCBjb21wYXJlIGVxdWFsLCBhbmQgdGhlIHNhbWUgZGF0YS5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIFRoZSBmaXJzdCBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIFRoZSBzZWNvbmQgYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIHRvIGNvbXBhcmUuXG4gKlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBcImVxdWFsXCIsIGFzIGRlZmluZWQgYWJvdmUsIG9yIGBmYWxzZWBcbiAqIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBhZ2dyZWdhdGVRdWVyeVNuYXBzaG90RXF1YWwoZSwgdCkge1xuICAgIHJldHVybiBxdWVyeUVxdWFsKGUucXVlcnksIHQucXVlcnkpICYmIGRlZXBFcXVhbChlLmRhdGEoKSwgdC5kYXRhKCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3MgU25hcHNob3RNZXRhZGF0YSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9IGUsIHRoaXMuZnJvbUNhY2hlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFNuYXBzaG90TWV0YWRhdGFgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNQZW5kaW5nV3JpdGVzID09PSBlLmhhc1BlbmRpbmdXcml0ZXMgJiYgdGhpcy5mcm9tQ2FjaGUgPT09IGUuZnJvbUNhY2hlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIERvY3VtZW50U25hcHNob3QgZXh0ZW5kcyBEb2N1bWVudFNuYXBzaG90JDEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgbiwgciwgcyksIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX2ZpcmVzdG9yZUltcGwgPSBlLCB0aGlzLm1ldGFkYXRhID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YSBleGlzdHMuIFRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZXhpc3RzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKGUgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUodCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIGUuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYHNlcnZlclRpbWVzdGFtcCgpYCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2V0IHRvXG4gICAgICogaXRzIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgYnlcbiAgICAgKiBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgdGhlIGZpZWxkIGlzIHJldHJpZXZlZFxuICAgICAqIGZyb20gdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQoZSwgdCA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIGUpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKG4sIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBRdWVyeURvY3VtZW50U25hcHNob3QgZXh0ZW5kcyBEb2N1bWVudFNuYXBzaG90IHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoZSA9IHt9KSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeVNuYXBzaG90YCBjb250YWlucyB6ZXJvIG9yIG1vcmUgYERvY3VtZW50U25hcHNob3RgIG9iamVjdHNcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0cyBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnRzIGNhbiBiZSBhY2Nlc3NlZCBhcyBhblxuICogYXJyYXkgdmlhIHRoZSBgZG9jc2AgcHJvcGVydHkgb3IgZW51bWVyYXRlZCB1c2luZyB0aGUgYGZvckVhY2hgIG1ldGhvZC4gVGhlXG4gKiBudW1iZXIgb2YgZG9jdW1lbnRzIGNhbiBiZSBkZXRlcm1pbmVkIHZpYSB0aGUgYGVtcHR5YCBhbmQgYHNpemVgXG4gKiBwcm9wZXJ0aWVzLlxuICovIGNsYXNzIFF1ZXJ5U25hcHNob3Qge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBlLCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IHQsIHRoaXMuX3NuYXBzaG90ID0gciwgdGhpcy5tZXRhZGF0YSA9IG5ldyBTbmFwc2hvdE1ldGFkYXRhKHIuaGFzUGVuZGluZ1dyaXRlcywgci5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0KSkpLCBlO1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaChlLCB0KSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBlLmNhbGwodCwgbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBuLmtleSwgbiwgbmV3IFNuYXBzaG90TWV0YWRhdGEodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyhlID0ge30pIHtcbiAgICAgICAgY29uc3QgdCA9ICEhZS5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAodCAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJUbyBpbmNsdWRlIG1ldGFkYXRhIGNoYW5nZXMgd2l0aCB5b3VyIGRvY3VtZW50IGNoYW5nZXMsIHlvdSBtdXN0IGFsc28gcGFzcyB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6dHJ1ZSB9IHRvIG9uU25hcHNob3QoKS5cIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzICYmIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID09PSB0IHx8ICh0aGlzLl9jYWNoZWRDaGFuZ2VzID0gXG4gICAgICAgIC8qKiBDYWxjdWxhdGVzIHRoZSBhcnJheSBvZiBgRG9jdW1lbnRDaGFuZ2VgcyBmb3IgYSBnaXZlbiBgVmlld1NuYXBzaG90YC4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2NoYW5nZXNGcm9tU25hcHNob3QoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUuX3NuYXBzaG90Lm9sZERvY3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLl9zbmFwc2hvdC5kb2NDaGFuZ2VzLm1hcCgobiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KGUuX2ZpcmVzdG9yZSwgZS5fdXNlckRhdGFXcml0ZXIsIG4uZG9jLmtleSwgbi5kb2MsIG5ldyBTbmFwc2hvdE1ldGFkYXRhKGUuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmRvYy5rZXkpLCBlLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLCBlLnF1ZXJ5LmNvbnZlcnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmRvYywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhZGRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiByLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IHQrK1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBBIGBEb2N1bWVudFNldGAgdGhhdCBpcyB1cGRhdGVkIGluY3JlbWVudGFsbHkgYXMgY2hhbmdlcyBhcmUgYXBwbGllZCB0byB1c2VcbiAgICAgICAgICAgICAgICAvLyB0byBsb29rdXAgdGhlIGluZGV4IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBlLl9zbmFwc2hvdC5vbGREb2NzO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLl9zbmFwc2hvdC5kb2NDaGFuZ2VzLmZpbHRlcigoZSA9PiB0IHx8IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAhPT0gZS50eXBlKSkubWFwKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QoZS5fZmlyZXN0b3JlLCBlLl91c2VyRGF0YVdyaXRlciwgdC5kb2Mua2V5LCB0LmRvYywgbmV3IFNuYXBzaG90TWV0YWRhdGEoZS5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKHQuZG9jLmtleSksIGUuX3NuYXBzaG90LmZyb21DYWNoZSksIGUucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMSwgcyA9IC0xO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICE9PSB0LnR5cGUgJiYgKGkgPSBuLmluZGV4T2YodC5kb2Mua2V5KSwgbiA9IG4uZGVsZXRlKHQuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gIT09IHQudHlwZSAmJiAobiA9IG4uYWRkKHQuZG9jKSwgcyA9IG4uaW5kZXhPZih0LmRvYy5rZXkpKSwgXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IF9fUFJJVkFURV9yZXN1bHRDaGFuZ2VUeXBlKHQudHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiBzXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHRoaXMsIHQpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IHQpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3Jlc3VsdENoYW5nZVR5cGUoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJhZGRlZFwiO1xuXG4gICAgICBjYXNlIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA6XG4gICAgICBjYXNlIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA6XG4gICAgICAgIHJldHVybiBcIm1vZGlmaWVkXCI7XG5cbiAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJyZW1vdmVkXCI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWV4cCk6IEFkZCB0ZXN0cyBmb3Igc25hcHNob3RFcXVhbCB3aXRoIGRpZmZlcmVudCBzbmFwc2hvdFxuLy8gbWV0YWRhdGFcbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqLyBmdW5jdGlvbiBzbmFwc2hvdEVxdWFsKGUsIHQpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QgJiYgdCBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QgPyBlLl9maXJlc3RvcmUgPT09IHQuX2ZpcmVzdG9yZSAmJiBlLl9rZXkuaXNFcXVhbCh0Ll9rZXkpICYmIChudWxsID09PSBlLl9kb2N1bWVudCA/IG51bGwgPT09IHQuX2RvY3VtZW50IDogZS5fZG9jdW1lbnQuaXNFcXVhbCh0Ll9kb2N1bWVudCkpICYmIGUuX2NvbnZlcnRlciA9PT0gdC5fY29udmVydGVyIDogZSBpbnN0YW5jZW9mIFF1ZXJ5U25hcHNob3QgJiYgdCBpbnN0YW5jZW9mIFF1ZXJ5U25hcHNob3QgJiYgKGUuX2ZpcmVzdG9yZSA9PT0gdC5fZmlyZXN0b3JlICYmIHF1ZXJ5RXF1YWwoZS5xdWVyeSwgdC5xdWVyeSkgJiYgZS5tZXRhZGF0YS5pc0VxdWFsKHQubWV0YWRhdGEpICYmIGUuX3NuYXBzaG90LmlzRXF1YWwodC5fc25hcHNob3QpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBOb3RlOiBgZ2V0RG9jKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnkgd2FpdGluZ1xuICogZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmIHlvdSBhcmVcbiAqIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvciwgaW52b2tlXG4gKiB7QGxpbmsgZ2V0RG9jRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jRnJvbVNlcnZlcn0uXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIFRoZSByZWZlcmVuY2Ugb2YgdGhlIGRvY3VtZW50IHRvIGZldGNoLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRG9jdW1lbnRSZWZlcmVuY2UpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50VmlhU25hcHNob3RMaXN0ZW5lcihlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCBlLl9rZXkpLnRoZW4oKG4gPT4gX19QUklWQVRFX2NvbnZlcnRUb0RvY1NuYXBzaG90KHQsIGUsIG4pKSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlciBleHRlbmRzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKGUpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KGUsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBnZXREb2NGcm9tQ2FjaGUoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBuID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodCk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudEZyb21Mb2NhbENhY2hlKG4sIGUuX2tleSkudGhlbigobiA9PiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0LCByLCBlLl9rZXksIG4sIG5ldyBTbmFwc2hvdE1ldGFkYXRhKG51bGwgIT09IG4gJiYgbi5oYXNMb2NhbE11dGF0aW9ucywgXG4gICAgLyogZnJvbUNhY2hlPSAqLyAhMCksIGUuY29udmVydGVyKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSB0aGUgc2VydmVyLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jRnJvbVNlcnZlcihlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgZS5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gX19QUklWQVRFX2NvbnZlcnRUb0RvY1NuYXBzaG90KHQsIGUsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgLlxuICpcbiAqIE5vdGU6IGBnZXREb2NzKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnlcbiAqIHdhaXRpbmcgZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmXG4gKiB5b3UgYXJlIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvcixcbiAqIGludm9rZSB7QGxpbmsgZ2V0RG9jc0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY3NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jcyhlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIFF1ZXJ5KTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QoZS5fcXVlcnkpLCBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lcihuLCBlLl9xdWVyeSkudGhlbigobiA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0LCByLCBlLCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlbXB0eSByZXN1bHQgc2V0IGlmIG5vIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgcXVlcnkgYXJlIGN1cnJlbnRseVxuICogY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBnZXREb2NzRnJvbUNhY2hlKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzRnJvbUxvY2FsQ2FjaGUobiwgZS5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IFF1ZXJ5U25hcHNob3QodCwgciwgZSwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSB0aGVcbiAqIHNlcnZlci4gUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBnZXREb2NzRnJvbVNlcnZlcihlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIFF1ZXJ5KTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIobiwgZS5fcXVlcnksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0LCByLCBlLCBuKSkpO1xufVxuXG5mdW5jdGlvbiBzZXREb2MoZSwgdCwgbikge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihlLmNvbnZlcnRlciwgdCwgbik7XG4gICAgcmV0dXJuIGV4ZWN1dGVXcml0ZShyLCBbIF9fUFJJVkFURV9wYXJzZVNldERhdGEoX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKHIpLCBcInNldERvY1wiLCBlLl9rZXksIGksIG51bGwgIT09IGUuY29udmVydGVyLCBuKS50b011dGF0aW9uKGUuX2tleSwgUHJlY29uZGl0aW9uLm5vbmUoKSkgXSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURvYyhlLCB0LCBuLCAuLi5yKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIHMgPSBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoaSk7XG4gICAgbGV0IG87XG4gICAgbyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChcbiAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSB8fCB0IGluc3RhbmNlb2YgRmllbGRQYXRoID8gX19QUklWQVRFX3BhcnNlVXBkYXRlVmFyYXJncyhzLCBcInVwZGF0ZURvY1wiLCBlLl9rZXksIHQsIG4sIHIpIDogX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YShzLCBcInVwZGF0ZURvY1wiLCBlLl9rZXksIHQpO1xuICAgIHJldHVybiBleGVjdXRlV3JpdGUoaSwgWyBvLnRvTXV0YXRpb24oZS5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkgXSk7XG59XG5cbi8qKlxuICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHNwZWNpZmllZCBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gZGVsZXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIGRvY3VtZW50IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogZGVsZXRlZCBmcm9tIHRoZSBiYWNrZW5kIChub3RlIHRoYXQgaXQgd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gZGVsZXRlRG9jKGUpIHtcbiAgICByZXR1cm4gZXhlY3V0ZVdyaXRlKF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBbIG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24oZS5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSBdKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gc3BlY2lmaWVkIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCB3aXRoIHRoZSBnaXZlbiBkYXRhLFxuICogYXNzaWduaW5nIGl0IGEgZG9jdW1lbnQgSUQgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb24gdG8gYWRkIHRoaXMgZG9jdW1lbnQgdG8uXG4gKiBAcGFyYW0gZGF0YSAtIEFuIE9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIGZvciB0aGUgbmV3IGRvY3VtZW50LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgKE5vdGUgdGhhdCBpdFxuICogd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gYWRkRG9jKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIHIgPSBkb2MoZSksIGkgPSBfX1BSSVZBVEVfYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKGUuY29udmVydGVyLCB0KTtcbiAgICByZXR1cm4gZXhlY3V0ZVdyaXRlKG4sIFsgX19QUklWQVRFX3BhcnNlU2V0RGF0YShfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZS5maXJlc3RvcmUpLCBcImFkZERvY1wiLCByLl9rZXksIGksIG51bGwgIT09IGUuY29udmVydGVyLCB7fSkudG9NdXRhdGlvbihyLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHMoITEpKSBdKS50aGVuKCgoKSA9PiByKSk7XG59XG5cbmZ1bmN0aW9uIG9uU25hcHNob3QoZSwgLi4udCkge1xuICAgIHZhciBuLCByLCBpO1xuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSk7XG4gICAgbGV0IHMgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICExXG4gICAgfSwgbyA9IDA7XG4gICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgdFtvXSB8fCBfX1BSSVZBVEVfaXNQYXJ0aWFsT2JzZXJ2ZXIodFtvXSkgfHwgKHMgPSB0W29dLCBvKyspO1xuICAgIGNvbnN0IF8gPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IHMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlc1xuICAgIH07XG4gICAgaWYgKF9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlcih0W29dKSkge1xuICAgICAgICBjb25zdCBlID0gdFtvXTtcbiAgICAgICAgdFtvXSA9IG51bGwgPT09IChuID0gZS5uZXh0KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmJpbmQoZSksIHRbbyArIDFdID0gbnVsbCA9PT0gKHIgPSBlLmVycm9yKSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLmJpbmQoZSksIFxuICAgICAgICB0W28gKyAyXSA9IG51bGwgPT09IChpID0gZS5jb21wbGV0ZSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5iaW5kKGUpO1xuICAgIH1cbiAgICBsZXQgYSwgdSwgYztcbiAgICBpZiAoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSB1ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIFxuICAgIGMgPSBfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKGUuX2tleS5wYXRoKSwgYSA9IHtcbiAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICB0W29dICYmIHRbb10oX19QUklWQVRFX2NvbnZlcnRUb0RvY1NuYXBzaG90KHUsIGUsIG4pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IHRbbyArIDFdLFxuICAgICAgICBjb21wbGV0ZTogdFtvICsgMl1cbiAgICB9OyBlbHNlIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9jYXN0KGUsIFF1ZXJ5KTtcbiAgICAgICAgdSA9IF9fUFJJVkFURV9jYXN0KG4uZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBjID0gbi5fcXVlcnk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHUpO1xuICAgICAgICBhID0ge1xuICAgICAgICAgICAgbmV4dDogZSA9PiB7XG4gICAgICAgICAgICAgICAgdFtvXSAmJiB0W29dKG5ldyBRdWVyeVNuYXBzaG90KHUsIHIsIG4sIGUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdFtvICsgMV0sXG4gICAgICAgICAgICBjb21wbGV0ZTogdFtvICsgMl1cbiAgICAgICAgfSwgX19QUklWQVRFX3ZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QoZS5fcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudExpc3RlbihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIociksIHMgPSBuZXcgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIodCwgaSwgbik7XG4gICAgICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gX19QUklWQVRFX2V2ZW50TWFuYWdlckxpc3Rlbihhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBzKSkpLCBcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgaS5DYSgpLCBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gX19QUklWQVRFX2V2ZW50TWFuYWdlclVubGlzdGVuKGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIHMpKSk7XG4gICAgICAgIH07XG4gICAgfShlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHUpLCBjLCBfLCBhKTtcbn1cblxuZnVuY3Rpb24gb25TbmFwc2hvdHNJblN5bmMoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50QWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSksIF9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlcih0KSA/IHQgOiB7XG4gICAgICAgIG5leHQ6IHRcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBMb2NhbGx5IHdyaXRlcyBgbXV0YXRpb25zYCBvbiB0aGUgYXN5bmMgcXVldWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBleGVjdXRlV3JpdGUoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50V3JpdGUoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZVdyaXRlKGF3YWl0IF9fUFJJVkFURV9nZXRTeW5jRW5naW5lKGUpLCB0LCBuKSkpLCBcbiAgICAgICAgbi5wcm9taXNlO1xuICAgIH0oZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKSwgdCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSB7QGxpbmsgVmlld1NuYXBzaG90fSB0aGF0IGNvbnRhaW5zIHRoZSBzaW5nbGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGByZWZgXG4gKiB0byBhIHtAbGluayBEb2N1bWVudFNuYXBzaG90fS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBuLmRvY3MuZ2V0KHQuX2tleSksIGkgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKGUpO1xuICAgIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdChlLCBpLCB0Ll9rZXksIHIsIG5ldyBTbmFwc2hvdE1ldGFkYXRhKG4uaGFzUGVuZGluZ1dyaXRlcywgbi5mcm9tQ2FjaGUpLCB0LmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgdGhlIGdpdmVuIHF1ZXJ5LFxuICogd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gY291bnQgdGhlIGRvY3VtZW50cyBpcyBlZmZpY2llbnQgYmVjYXVzZSBvbmx5IHRoZVxuICogZmluYWwgY291bnQsIG5vdCB0aGUgZG9jdW1lbnRzJyBkYXRhLCBpcyBkb3dubG9hZGVkLiBUaGlzIGZ1bmN0aW9uIGNhbiBldmVuXG4gKiBjb3VudCB0aGUgZG9jdW1lbnRzIGlmIHRoZSByZXN1bHQgc2V0IHdvdWxkIGJlIHByb2hpYml0aXZlbHkgbGFyZ2UgdG9cbiAqIGRvd25sb2FkIGVudGlyZWx5IChlLmcuIHRob3VzYW5kcyBvZiBkb2N1bWVudHMpLlxuICpcbiAqIFRoZSByZXN1bHQgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGlzIHByZXNlbnRlZCwgdW5hbHRlcmVkLCB3aXRob3V0XG4gKiBjb25zaWRlcmluZyBhbnkgbG9jYWwgc3RhdGUuIFRoYXQgaXMsIGRvY3VtZW50cyBpbiB0aGUgbG9jYWwgY2FjaGUgYXJlIG5vdFxuICogdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLCBuZWl0aGVyIGFyZSBsb2NhbCBtb2RpZmljYXRpb25zIG5vdCB5ZXRcbiAqIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzZXJ2ZXIuIFByZXZpb3VzbHktZG93bmxvYWRlZCByZXN1bHRzLCBpZiBhbnksIGFyZSBub3RcbiAqIHVzZWQ6IGV2ZXJ5IHJlcXVlc3QgdXNpbmcgdGhpcyBzb3VyY2UgbmVjZXNzYXJpbHkgaW52b2x2ZXMgYSByb3VuZCB0cmlwIHRvXG4gKiB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB3aG9zZSByZXN1bHQgc2V0IHNpemUgdG8gY2FsY3VsYXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSBjb3VudDsgdGhlIGNvdW50IGNhbiBiZVxuICogcmV0cmlldmVkIGZyb20gYHNuYXBzaG90LmRhdGEoKS5jb3VudGAsIHdoZXJlIGBzbmFwc2hvdGAgaXMgdGhlXG4gKiBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gd2hpY2ggdGhlIHJldHVybmVkIFByb21pc2UgcmVzb2x2ZXMuXG4gKi8gZnVuY3Rpb24gZ2V0Q291bnRGcm9tU2VydmVyKGUpIHtcbiAgICByZXR1cm4gZ2V0QWdncmVnYXRlRnJvbVNlcnZlcihlLCB7XG4gICAgICAgIGNvdW50OiBjb3VudCgpXG4gICAgfSk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3BlY2lmaWVkIGFnZ3JlZ2F0aW9ucyBvdmVyIHRoZSBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdFxuICogc2V0IG9mIHRoZSBnaXZlbiBxdWVyeSwgd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seSB0aGVcbiAqIGZpbmFsIGFnZ3JlZ2F0aW9uIHZhbHVlcywgbm90IHRoZSBkb2N1bWVudHMnIGRhdGEsIGlzIGRvd25sb2FkZWQuIFRoaXNcbiAqIGZ1bmN0aW9uIGNhbiBldmVuIHBlcmZvcm0gYWdncmVnYXRpb25zIG9mIHRoZSBkb2N1bWVudHMgaWYgdGhlIHJlc3VsdCBzZXRcbiAqIHdvdWxkIGJlIHByb2hpYml0aXZlbHkgbGFyZ2UgdG8gZG93bmxvYWQgZW50aXJlbHkgKGUuZy4gdGhvdXNhbmRzIG9mIGRvY3VtZW50cykuXG4gKlxuICogVGhlIHJlc3VsdCByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgaXMgcHJlc2VudGVkLCB1bmFsdGVyZWQsIHdpdGhvdXRcbiAqIGNvbnNpZGVyaW5nIGFueSBsb2NhbCBzdGF0ZS4gVGhhdCBpcywgZG9jdW1lbnRzIGluIHRoZSBsb2NhbCBjYWNoZSBhcmUgbm90XG4gKiB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24sIG5laXRoZXIgYXJlIGxvY2FsIG1vZGlmaWNhdGlvbnMgbm90IHlldFxuICogc3luY2hyb25pemVkIHdpdGggdGhlIHNlcnZlci4gUHJldmlvdXNseS1kb3dubG9hZGVkIHJlc3VsdHMsIGlmIGFueSwgYXJlIG5vdFxuICogdXNlZDogZXZlcnkgcmVxdWVzdCB1c2luZyB0aGlzIHNvdXJjZSBuZWNlc3NhcmlseSBpbnZvbHZlcyBhIHJvdW5kIHRyaXAgdG9cbiAqIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB3aG9zZSByZXN1bHQgc2V0IHRvIGFnZ3JlZ2F0ZSBvdmVyLlxuICogQHBhcmFtIGFnZ3JlZ2F0ZVNwZWMgQW4gYEFnZ3JlZ2F0ZVNwZWNgIG9iamVjdCB0aGF0IHNwZWNpZmllcyB0aGUgYWdncmVnYXRlc1xuICogdG8gcGVyZm9ybSBvdmVyIHRoZSByZXN1bHQgc2V0LiBUaGUgQWdncmVnYXRlU3BlYyBzcGVjaWZpZXMgYWxpYXNlcyBmb3IgZWFjaFxuICogYWdncmVnYXRlLCB3aGljaCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYWdncmVnYXRlIHJlc3VsdC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhZ2dyZWdhdGVTbmFwc2hvdCA9IGF3YWl0IGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIocXVlcnksIHtcbiAqICAgY291bnRPZkRvY3M6IGNvdW50KCksXG4gKiAgIHRvdGFsSG91cnM6IHN1bSgnaG91cnMnKSxcbiAqICAgYXZlcmFnZVNjb3JlOiBhdmVyYWdlKCdzY29yZScpXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBjb3VudE9mRG9jczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLmNvdW50T2ZEb2NzO1xuICogY29uc3QgdG90YWxIb3VyczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLnRvdGFsSG91cnM7XG4gKiBjb25zdCBhdmVyYWdlU2NvcmU6IG51bWJlciB8IG51bGwgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkuYXZlcmFnZVNjb3JlO1xuICogYGBgXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gZ2V0QWdncmVnYXRlRnJvbVNlcnZlcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCByID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChuKSwgaSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9tYXBUb0FycmF5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHIgaW4gZSkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHIpICYmIG4ucHVzaCh0KGVbcl0sIHIsIGUpKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfSh0LCAoKGUsIHQpID0+IG5ldyBfX1BSSVZBVEVfQWdncmVnYXRlSW1wbCh0LCBlLl9hZ2dyZWdhdGVUeXBlLCBlLl9pbnRlcm5hbEZpZWxkUGF0aCkpKTtcbiAgICAvLyBSdW4gdGhlIGFnZ3JlZ2F0aW9uIGFuZCBjb252ZXJ0IHRoZSByZXN1bHRzXG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRSdW5BZ2dyZWdhdGVRdWVyeShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8gKHN1bS9hdmcpIHNob3VsZCB3ZSB1cGRhdGUgdGhpcyB0byB1c2UgdGhlIGV2ZW50IG1hbmFnZXI/XG4gICAgICAgICAgICAvLyBJbXBsZW1lbnQgYW5kIGNhbGwgZXhlY3V0ZUFnZ3JlZ2F0ZVF1ZXJ5VmlhU25hcHNob3RMaXN0ZW5lciwgc2ltaWxhclxuICAgICAgICAgICAgLy8gdG8gdGhlIGltcGxlbWVudGF0aW9uIGluIGZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXJcbiAgICAgICAgICAgIC8vIGFib3ZlXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8yNzc2MjgzODQpOiBjaGVjayBgY2FuVXNlTmV0d29yaygpYCBhbmQgaGFuZGxlIG11bHRpLXRhYi5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gYXdhaXQgX19QUklWQVRFX2dldERhdGFzdG9yZShlKTtcbiAgICAgICAgICAgICAgICByLnJlc29sdmUoX19QUklWQVRFX2ludm9rZVJ1bkFnZ3JlZ2F0aW9uUXVlcnlScGMoaSwgdCwgbikpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHIucmVqZWN0KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHIucHJvbWlzZTtcbiAgICB9KHIsIGUuX3F1ZXJ5LCBpKS50aGVuKCh0ID0+IFxuICAgIC8qKlxuICogQ29udmVydHMgdGhlIGNvcmUgYWdncmVncmF0aW9uIHJlc3VsdCB0byBhbiBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGBcbiAqIHRoYXQgY2FuIGJlIHJldHVybmVkIHRvIHRoZSBjb25zdW1lci5cbiAqIEBwYXJhbSBxdWVyeVxuICogQHBhcmFtIGFnZ3JlZ2F0ZVJlc3VsdCBDb3JlIGFnZ3JlZ2F0aW9uIHJlc3VsdFxuICogQGludGVybmFsXG4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfY29udmVydFRvQWdncmVnYXRlUXVlcnlTbmFwc2hvdChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKGUpO1xuICAgICAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3QodCwgciwgbik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuLCBlLCB0KSkpO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5TG9jYWxDYWNoZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJtZW1vcnlcIiwgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgT25saW5lQ29tcG9uZW50UHJvdmlkZXIsIFxuICAgICAgICAobnVsbCA9PSBlID8gdm9pZCAwIDogZS5nYXJiYWdlQ29sbGVjdG9yKSA/IHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IGUuZ2FyYmFnZUNvbGxlY3Rvci5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIDogdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfUGVyc2lzdGVudExvY2FsQ2FjaGVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIGxldCB0O1xuICAgICAgICB0aGlzLmtpbmQgPSBcInBlcnNpc3RlbnRcIiwgKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUudGFiTWFuYWdlcikgPyAoZS50YWJNYW5hZ2VyLl9pbml0aWFsaXplKGUpLCBcbiAgICAgICAgdCA9IGUudGFiTWFuYWdlcikgOiAodCA9IHBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyKHZvaWQgMCksIHQuX2luaXRpYWxpemUoZSkpLCBcbiAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSB0Ll9vbmxpbmVDb21wb25lbnRQcm92aWRlciwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gdC5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlFYWdlckdhYmFnZUNvbGxlY3RvckltcGwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeUVhZ2VyXCIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUxydUdhYmFnZUNvbGxlY3RvckltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJtZW1vcnlMcnVcIiwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IF9fUFJJVkFURV9McnVHY01lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYE1lbW9yeUVhZ2VyR2FyYmFnZUNvbGxlY3RvcmAuIFRoaXMgaXMgYWxzbyB0aGVcbiAqIGRlZmF1bHQgZ2FyYmFnZSBjb2xsZWN0b3IgdW5sZXNzIGl0IGlzIGV4cGxpY2l0bHkgc3BlY2lmaWVkIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBtZW1vcnlFYWdlckdhcmJhZ2VDb2xsZWN0b3IoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5RWFnZXJHYWJhZ2VDb2xsZWN0b3JJbXBsO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYE1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3JgLlxuICpcbiAqIEEgdGFyZ2V0IHNpemUgY2FuIGJlIHNwZWNpZmllZCBhcyBwYXJ0IG9mIHRoZSBzZXR0aW5nIHBhcmFtZXRlci4gVGhlXG4gKiBjb2xsZWN0b3Igd2lsbCBzdGFydCBkZWxldGluZyBkb2N1bWVudHMgb25jZSB0aGUgY2FjaGUgc2l6ZSBleGNlZWRzXG4gKiB0aGUgZ2l2ZW4gc2l6ZS4gVGhlIGRlZmF1bHQgY2FjaGUgc2l6ZSBpcyA0ME1CICg0MCAqIDEwMjQgKiAxMDI0IGJ5dGVzKS5cbiAqLyBmdW5jdGlvbiBtZW1vcnlMcnVHYXJiYWdlQ29sbGVjdG9yKGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlMcnVHYWJhZ2VDb2xsZWN0b3JJbXBsKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuY2FjaGVTaXplQnl0ZXMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYE1lbW9yeUxvY2FsQ2FjaGVgLiBUaGUgaW5zdGFuY2UgY2FuIGJlIHNldCB0b1xuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byB0ZWxsIHRoZSBTREsgd2hpY2ggY2FjaGUgbGF5ZXIgdG8gdXNlLlxuICovIGZ1bmN0aW9uIG1lbW9yeUxvY2FsQ2FjaGUoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUxvY2FsQ2FjaGVJbXBsKGUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRMb2NhbENhY2hlYC4gVGhlIGluc3RhbmNlIGNhbiBiZSBzZXQgdG9cbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgdG8gdGVsbCB0aGUgU0RLIHdoaWNoIGNhY2hlIGxheWVyIHRvIHVzZS5cbiAqXG4gKiBQZXJzaXN0ZW50IGNhY2hlIGNhbm5vdCBiZSB1c2VkIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudC5cbiAqLyBmdW5jdGlvbiBwZXJzaXN0ZW50TG9jYWxDYWNoZShlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGVyc2lzdGVudExvY2FsQ2FjaGVJbXBsKGUpO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfU2luZ2xlVGFiTWFuYWdlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5mb3JjZU93bmVyc2hpcCA9IGUsIHRoaXMua2luZCA9IFwicGVyc2lzdGVudFNpbmdsZVRhYlwiO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIF9pbml0aWFsaXplKGUpIHtcbiAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgT25saW5lQ29tcG9uZW50UHJvdmlkZXIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCBudWxsID09IGUgPyB2b2lkIDAgOiBlLmNhY2hlU2l6ZUJ5dGVzLCB0aGlzLmZvcmNlT3duZXJzaGlwKTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NdWx0aVRhYk1hbmFnZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJQZXJzaXN0ZW50TXVsdGlwbGVUYWJcIjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqLyAgICBfaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgX19QUklWQVRFX011bHRpVGFiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCBudWxsID09IGUgPyB2b2lkIDAgOiBlLmNhY2hlU2l6ZUJ5dGVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXJgLlxuICpcbiAqIEBwYXJhbSBzZXR0aW5ncyBDb25maWd1cmVzIHRoZSBjcmVhdGVkIHRhYiBtYW5hZ2VyLlxuICovIGZ1bmN0aW9uIHBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyKGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9TaW5nbGVUYWJNYW5hZ2VySW1wbChudWxsID09IGUgPyB2b2lkIDAgOiBlLmZvcmNlT3duZXJzaGlwKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50TXVsdGlwbGVUYWJNYW5hZ2VyYC5cbiAqLyBmdW5jdGlvbiBwZXJzaXN0ZW50TXVsdGlwbGVUYWJNYW5hZ2VyKCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX011bHRpVGFiTWFuYWdlckltcGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHdlID0ge1xuICAgIG1heEF0dGVtcHRzOiA1XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHdyaXRlIGJhdGNoLCB1c2VkIHRvIHBlcmZvcm0gbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICpcbiAqIEEgYFdyaXRlQmF0Y2hgIG9iamVjdCBjYW4gYmUgYWNxdWlyZWQgYnkgY2FsbGluZyB7QGxpbmsgd3JpdGVCYXRjaH0uIEl0XG4gKiBwcm92aWRlcyBtZXRob2RzIGZvciBhZGRpbmcgd3JpdGVzIHRvIHRoZSB3cml0ZSBiYXRjaC4gTm9uZSBvZiB0aGUgd3JpdGVzXG4gKiB3aWxsIGJlIGNvbW1pdHRlZCAob3IgdmlzaWJsZSBsb2NhbGx5KSB1bnRpbCB7QGxpbmsgV3JpdGVCYXRjaC5jb21taXR9IGlzXG4gKiBjYWxsZWQuXG4gKi9cbmNsYXNzIFdyaXRlQmF0Y2gge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBlLCB0aGlzLl9jb21taXRIYW5kbGVyID0gdCwgdGhpcy5fbXV0YXRpb25zID0gW10sIHRoaXMuX2NvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgdGhpcy5fZGF0YVJlYWRlciA9IF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlKTtcbiAgICB9XG4gICAgc2V0KGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IF9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoci5jb252ZXJ0ZXIsIHQsIG4pLCBzID0gX19QUklWQVRFX3BhcnNlU2V0RGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2guc2V0XCIsIHIuX2tleSwgaSwgbnVsbCAhPT0gci5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zLnB1c2gocy50b011dGF0aW9uKHIuX2tleSwgUHJlY29uZGl0aW9uLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUoZSwgdCwgbiwgLi4ucikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgIHJldHVybiBzID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpIHx8IHQgaW5zdGFuY2VvZiBGaWVsZFBhdGggPyBfX1BSSVZBVEVfcGFyc2VVcGRhdGVWYXJhcmdzKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCB0LCBuLCByKSA6IF9fUFJJVkFURV9wYXJzZVVwZGF0ZURhdGEodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIHQpLCBcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zLnB1c2gocy50b011dGF0aW9uKGkuX2tleSwgUHJlY29uZGl0aW9uLmV4aXN0cyghMCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBXcml0ZUJhdGNoYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChuZXcgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uKHQuX2tleSwgUHJlY29uZGl0aW9uLm5vbmUoKSkpLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tbWl0cyBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGlzIHdyaXRlIGJhdGNoIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICAgICAqXG4gICAgICogVGhlIHJlc3VsdCBvZiB0aGVzZSB3cml0ZXMgd2lsbCBvbmx5IGJlIHJlZmxlY3RlZCBpbiBkb2N1bWVudCByZWFkcyB0aGF0XG4gICAgICogb2NjdXIgYWZ0ZXIgdGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMuIElmIHRoZSBjbGllbnQgaXMgb2ZmbGluZSwgdGhlXG4gICAgICogd3JpdGUgZmFpbHMuIElmIHlvdSB3b3VsZCBsaWtlIHRvIHNlZSBsb2NhbCBtb2RpZmljYXRpb25zIG9yIGJ1ZmZlciB3cml0ZXNcbiAgICAgKiB1bnRpbCB0aGUgY2xpZW50IGlzIG9ubGluZSwgdXNlIHRoZSBmdWxsIEZpcmVzdG9yZSBTREsuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCBvbmNlIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoZSBiYXRjaCBoYXZlIGJlZW5cbiAgICAgKiBzdWNjZXNzZnVsbHkgd3JpdHRlbiB0byB0aGUgYmFja2VuZCBhcyBhbiBhdG9taWMgdW5pdCAobm90ZSB0aGF0IGl0IHdvbid0XG4gICAgICogcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gICAgICovICAgIGNvbW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpLCB0aGlzLl9jb21taXR0ZWQgPSAhMCwgdGhpcy5fbXV0YXRpb25zLmxlbmd0aCA+IDAgPyB0aGlzLl9jb21taXRIYW5kbGVyKHRoaXMuX211dGF0aW9ucykgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgX3ZlcmlmeU5vdENvbW1pdHRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbW1pdHRlZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIHdyaXRlIGJhdGNoIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlciBjb21taXQoKSBoYXMgYmVlbiBjYWxsZWQuXCIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHQpIHtcbiAgICBpZiAoKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpLmZpcmVzdG9yZSAhPT0gdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKHYuSU5WQUxJRF9BUkdVTUVOVCwgXCJQcm92aWRlZCBkb2N1bWVudCByZWZlcmVuY2UgaXMgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgaW5zdGFuY2UuXCIpO1xuICAgIHJldHVybiBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVE9ETyhtcnNjaG1pZHQpIENvbnNpZGVyIHVzaW5nIGBCYXNlVHJhbnNhY3Rpb25gIGFzIHRoZSBiYXNlIGNsYXNzIGluIHRoZVxuLy8gbGVnYWN5IFNESy5cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbmNsYXNzIFRyYW5zYWN0aW9uIGV4dGVuZHMgY2xhc3MgVHJhbnNhY3Rpb24kMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX3RyYW5zYWN0aW9uID0gdCwgdGhpcy5fZGF0YVJlYWRlciA9IF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBfX1BSSVZBVEVfTGl0ZVVzZXJEYXRhV3JpdGVyKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5sb29rdXAoWyB0Ll9rZXkgXSkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUgfHwgMSAhPT0gZS5sZW5ndGgpIHJldHVybiBmYWlsKCk7XG4gICAgICAgICAgICBjb25zdCByID0gZVswXTtcbiAgICAgICAgICAgIGlmIChyLmlzRm91bmREb2N1bWVudCgpKSByZXR1cm4gbmV3IERvY3VtZW50U25hcHNob3QkMSh0aGlzLl9maXJlc3RvcmUsIG4sIHIua2V5LCByLCB0LmNvbnZlcnRlcik7XG4gICAgICAgICAgICBpZiAoci5pc05vRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBEb2N1bWVudFNuYXBzaG90JDEodGhpcy5fZmlyZXN0b3JlLCBuLCB0Ll9rZXksIG51bGwsIHQuY29udmVydGVyKTtcbiAgICAgICAgICAgIHRocm93IGZhaWwoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXQoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBfX1BSSVZBVEVfYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKHIuY29udmVydGVyLCB0LCBuKSwgcyA9IF9fUFJJVkFURV9wYXJzZVNldERhdGEodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi5zZXRcIiwgci5fa2V5LCBpLCBudWxsICE9PSByLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5zZXQoci5fa2V5LCBzKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKGUsIHQsIG4sIC4uLnIpIHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgIHJldHVybiBzID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpIHx8IHQgaW5zdGFuY2VvZiBGaWVsZFBhdGggPyBfX1BSSVZBVEVfcGFyc2VVcGRhdGVWYXJhcmdzKHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgdCwgbiwgcikgOiBfX1BSSVZBVEVfcGFyc2VVcGRhdGVEYXRhKHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgdCksIFxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi51cGRhdGUoaS5fa2V5LCBzKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uZGVsZXRlKHQuX2tleSksIHRoaXM7XG4gICAgfVxufSB7XG4gICAgLy8gVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHRoZSBzYW1lIGxvZ2ljIGFzIHRoZSBUcmFuc2FjdGlvbiBBUEkgaW4gdGhlIExpdGUgU0RLXG4gICAgLy8gYnV0IGlzIHN1YmNsYXNzZWQgaW4gb3JkZXIgdG8gcmV0dXJuIGl0cyBvd24gRG9jdW1lbnRTbmFwc2hvdCB0eXBlcy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgdCksIHRoaXMuX2ZpcmVzdG9yZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXQoZSkudGhlbigoZSA9PiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIG4sIHQuX2tleSwgZS5fZG9jdW1lbnQsIG5ldyBTbmFwc2hvdE1ldGFkYXRhKFxuICAgICAgICAvKiBoYXNQZW5kaW5nV3JpdGVzPSAqLyAhMSwgXG4gICAgICAgIC8qIGZyb21DYWNoZT0gKi8gITEpLCB0LmNvbnZlcnRlcikpKTtcbiAgICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIGdpdmVuIGB1cGRhdGVGdW5jdGlvbmAgYW5kIHRoZW4gYXR0ZW1wdHMgdG8gY29tbWl0IHRoZSBjaGFuZ2VzXG4gKiBhcHBsaWVkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24uIElmIGFueSBkb2N1bWVudCByZWFkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGhhcyBjaGFuZ2VkLCBDbG91ZCBGaXJlc3RvcmUgcmV0cmllcyB0aGUgYHVwZGF0ZUZ1bmN0aW9uYC4gSWYgaXQgZmFpbHMgdG9cbiAqIGNvbW1pdCBhZnRlciA1IGF0dGVtcHRzLCB0aGUgdHJhbnNhY3Rpb24gZmFpbHMuXG4gKlxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHRyYW5zYWN0aW9uIGlzIDUwMC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIEZpcmVzdG9yZSBkYXRhYmFzZSB0byBydW4gdGhpc1xuICogdHJhbnNhY3Rpb24gYWdhaW5zdC5cbiAqIEBwYXJhbSB1cGRhdGVGdW5jdGlvbiAtIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGNvbnRleHQuXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBtYXhpbXVtIG51bWJlciBvZiBhdHRlbXB0cyB0b1xuICogY29tbWl0LlxuICogQHJldHVybnMgSWYgdGhlIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgb3Igd2FzIGV4cGxpY2l0bHkgYWJvcnRlZFxuICogKHRoZSBgdXBkYXRlRnVuY3Rpb25gIHJldHVybmVkIGEgZmFpbGVkIHByb21pc2UpLCB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGVcbiAqIGB1cGRhdGVGdW5jdGlvbiBgaXMgcmV0dXJuZWQgaGVyZS4gT3RoZXJ3aXNlLCBpZiB0aGUgdHJhbnNhY3Rpb24gZmFpbGVkLCBhXG4gKiByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZmFpbHVyZSBlcnJvciBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBydW5UcmFuc2FjdGlvbihlLCB0LCBuKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSk7XG4gICAgY29uc3QgciA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgd2UpLCBuKTtcbiAgICAhZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlVHJhbnNhY3Rpb25PcHRpb25zKGUpIHtcbiAgICAgICAgaWYgKGUubWF4QXR0ZW1wdHMgPCAxKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIk1heCBhdHRlbXB0cyBtdXN0IGJlIGF0IGxlYXN0IDFcIik7XG4gICAgfShyKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFRyYW5zYWN0aW9uKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGF3YWl0IF9fUFJJVkFURV9nZXREYXRhc3RvcmUoZSk7XG4gICAgICAgICAgICBuZXcgX19QUklWQVRFX1RyYW5zYWN0aW9uUnVubmVyKGUuYXN5bmNRdWV1ZSwgaSwgbiwgdCwgcikucnVuKCk7XG4gICAgICAgIH0pKSwgci5wcm9taXNlO1xuICAgIH0oZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKSwgKG4gPT4gdChuZXcgVHJhbnNhY3Rpb24oZSwgbikpKSwgcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCBmb3IgdXNlIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSBvclxuICoge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSB3aXRoIGB7bWVyZ2U6IHRydWV9YCB0byBtYXJrIGEgZmllbGQgZm9yIGRlbGV0aW9uLlxuICovIGZ1bmN0aW9uIGRlbGV0ZUZpZWxkKCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsKFwiZGVsZXRlRmllbGRcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdG9cbiAqIGluY2x1ZGUgYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcCBpbiB0aGUgd3JpdHRlbiBkYXRhLlxuICovIGZ1bmN0aW9uIHNlcnZlclRpbWVzdGFtcCgpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbChcInNlcnZlclRpbWVzdGFtcFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gdW5pb24gdGhlIGdpdmVuIGVsZW1lbnRzIHdpdGggYW55IGFycmF5XG4gKiB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEVhY2ggc3BlY2lmaWVkIGVsZW1lbnQgdGhhdCBkb2Vzbid0XG4gKiBhbHJlYWR5IGV4aXN0IGluIHRoZSBhcnJheSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbmQuIElmIHRoZSBmaWVsZCBiZWluZ1xuICogbW9kaWZpZWQgaXMgbm90IGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGFycmF5XG4gKiBjb250YWluaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmllZCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gdW5pb24gaW50byB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWAuXG4gKi8gZnVuY3Rpb24gYXJyYXlVbmlvbiguLi5lKSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9BcnJheVVuaW9uRmllbGRWYWx1ZUltcGwoXCJhcnJheVVuaW9uXCIsIGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiB1cGRhdGVEb2M6MX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHJlbW92ZSB0aGUgZ2l2ZW4gZWxlbWVudHMgZnJvbSBhbnlcbiAqIGFycmF5IHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gQWxsIGluc3RhbmNlcyBvZiBlYWNoIGVsZW1lbnRcbiAqIHNwZWNpZmllZCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgYXJyYXkuIElmIHRoZSBmaWVsZCBiZWluZyBtb2RpZmllZCBpcyBub3RcbiAqIGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGVtcHR5IGFycmF5LlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byByZW1vdmUgZnJvbSB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWBcbiAqLyBmdW5jdGlvbiBhcnJheVJlbW92ZSguLi5lKSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9BcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsKFwiYXJyYXlSZW1vdmVcIiwgZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIGluY3JlbWVudCB0aGUgZmllbGQncyBjdXJyZW50IHZhbHVlIGJ5XG4gKiB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogSWYgZWl0aGVyIHRoZSBvcGVyYW5kIG9yIHRoZSBjdXJyZW50IGZpZWxkIHZhbHVlIHVzZXMgZmxvYXRpbmcgcG9pbnRcbiAqIHByZWNpc2lvbiwgYWxsIGFyaXRobWV0aWMgZm9sbG93cyBJRUVFIDc1NCBzZW1hbnRpY3MuIElmIGJvdGggdmFsdWVzIGFyZVxuICogaW50ZWdlcnMsIHZhbHVlcyBvdXRzaWRlIG9mIEphdmFTY3JpcHQncyBzYWZlIG51bWJlciByYW5nZVxuICogKGBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUmAgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYCkgYXJlIGFsc28gc3ViamVjdCB0b1xuICogcHJlY2lzaW9uIGxvc3MuIEZ1cnRoZXJtb3JlLCBvbmNlIHByb2Nlc3NlZCBieSB0aGUgRmlyZXN0b3JlIGJhY2tlbmQsIGFsbFxuICogaW50ZWdlciBvcGVyYXRpb25zIGFyZSBjYXBwZWQgYmV0d2VlbiAtMl42MyBhbmQgMl42My0xLlxuICpcbiAqIElmIHRoZSBjdXJyZW50IGZpZWxkIHZhbHVlIGlzIG5vdCBvZiB0eXBlIGBudW1iZXJgLCBvciBpZiB0aGUgZmllbGQgZG9lcyBub3RcbiAqIHlldCBleGlzdCwgdGhlIHRyYW5zZm9ybWF0aW9uIHNldHMgdGhlIGZpZWxkIHRvIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gbiAtIFRoZSB2YWx1ZSB0byBpbmNyZW1lbnQgYnkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWBcbiAqLyBmdW5jdGlvbiBpbmNyZW1lbnQoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRGaWVsZFZhbHVlSW1wbChcImluY3JlbWVudFwiLCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIHdyaXRlIGJhdGNoLCB1c2VkIGZvciBwZXJmb3JtaW5nIG11bHRpcGxlIHdyaXRlcyBhcyBhIHNpbmdsZVxuICogYXRvbWljIG9wZXJhdGlvbi4gVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHtAbGluayBXcml0ZUJhdGNofVxuICogaXMgNTAwLlxuICpcbiAqIFVubGlrZSB0cmFuc2FjdGlvbnMsIHdyaXRlIGJhdGNoZXMgYXJlIHBlcnNpc3RlZCBvZmZsaW5lIGFuZCB0aGVyZWZvcmUgYXJlXG4gKiBwcmVmZXJhYmxlIHdoZW4geW91IGRvbid0IG5lZWQgdG8gY29uZGl0aW9uIHlvdXIgd3JpdGVzIG9uIHJlYWQgZGF0YS5cbiAqXG4gKiBAcmV0dXJucyBBIHtAbGluayBXcml0ZUJhdGNofSB0aGF0IGNhbiBiZSB1c2VkIHRvIGF0b21pY2FsbHkgZXhlY3V0ZSBtdWx0aXBsZVxuICogd3JpdGVzLlxuICovIGZ1bmN0aW9uIHdyaXRlQmF0Y2goZSkge1xuICAgIHJldHVybiBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSwgbmV3IFdyaXRlQmF0Y2goZSwgKHQgPT4gZXhlY3V0ZVdyaXRlKGUsIHQpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIHNldEluZGV4Q29uZmlndXJhdGlvbihlLCB0KSB7XG4gICAgdmFyIG47XG4gICAgY29uc3QgciA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpO1xuICAgIGlmICghci5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciB8fCBcIm1lbW9yeVwiID09PSAobnVsbCA9PT0gKG4gPSByLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLl9vZmZsaW5lS2luZCkpIFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgcmV0dXJuIGFuIGVycm9yIGlmIHRoZSB1c2VyIGhhcyBub3QgZW5hYmxlZFxuICAgIC8vIHBlcnNpc3RlbmNlIHNpbmNlIGBlbmFibGVJbmRleGVkZGJQZXJzaXN0ZW5jZSgpYCBjYW4gZmFpbCBvbiB0aGUgV2ViLlxuICAgIHJldHVybiBfX1BSSVZBVEVfbG9nV2FybihcIkNhbm5vdCBlbmFibGUgaW5kZXhlcyB3aGVuIHBlcnNpc3RlbmNlIGlzIGRpc2FibGVkXCIpLCBcbiAgICBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlSW5kZXhlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gZnVuY3Rpb24gX19QUklWQVRFX3RyeVBhcnNlSnNvbihlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcih2LklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIHBhcnNlIEpTT046IFwiICsgKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUubWVzc2FnZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KGUpIDogZSwgbiA9IFtdO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0LmluZGV4ZXMpKSBmb3IgKGNvbnN0IGUgb2YgdC5pbmRleGVzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3RyeUdldFN0cmluZyhlLCBcImNvbGxlY3Rpb25Hcm91cFwiKSwgciA9IFtdO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZS5maWVsZHMpKSBmb3IgKGNvbnN0IHQgb2YgZS5maWVsZHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoXCJzZXRJbmRleENvbmZpZ3VyYXRpb25cIiwgX19QUklWQVRFX3RyeUdldFN0cmluZyh0LCBcImZpZWxkUGF0aFwiKSk7XG4gICAgICAgICAgICAgICAgXCJDT05UQUlOU1wiID09PSB0LmFycmF5Q29uZmlnID8gci5wdXNoKG5ldyBJbmRleFNlZ21lbnQoZSwgMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8pKSA6IFwiQVNDRU5ESU5HXCIgPT09IHQub3JkZXIgPyByLnB1c2gobmV3IEluZGV4U2VnbWVudChlLCAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8pKSA6IFwiREVTQ0VORElOR1wiID09PSB0Lm9yZGVyICYmIHIucHVzaChuZXcgSW5kZXhTZWdtZW50KGUsIDEgLyogSW5kZXhLaW5kLkRFU0NFTkRJTkcgKi8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG4ucHVzaChuZXcgRmllbGRJbmRleChGaWVsZEluZGV4LlVOS05PV05fSUQsIHQsIHIsIEluZGV4U3RhdGUuZW1wdHkoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH0odCk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRTZXRJbmRleENvbmZpZ3VyYXRpb24ociwgaSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90cnlHZXRTdHJpbmcoZSwgdCkge1xuICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBlW3RdKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCBcIk1pc3Npbmcgc3RyaW5nIHZhbHVlIGZvcjogXCIgKyB0KTtcbiAgICByZXR1cm4gZVt0XTtcbn1cblxuLyoqXG4gKiBDbG91ZCBGaXJlc3RvcmVcbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqLyAhZnVuY3Rpb24gX19QUklWQVRFX3JlZ2lzdGVyRmlyZXN0b3JlKGUsIHQgPSAhMCkge1xuICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfc2V0U0RLVmVyc2lvbihlKSB7XG4gICAgICAgIGIgPSBlO1xuICAgIH0oU0RLX1ZFUlNJT04pLCBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImZpcmVzdG9yZVwiLCAoKGUsIHtpbnN0YW5jZUlkZW50aWZpZXI6IG4sIG9wdGlvbnM6IHJ9KSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSBlLmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLCBzID0gbmV3IEZpcmVzdG9yZShuZXcgX19QUklWQVRFX0ZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIoZS5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIikpLCBuZXcgX19QUklWQVRFX0ZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyKGUuZ2V0UHJvdmlkZXIoXCJhcHAtY2hlY2staW50ZXJuYWxcIikpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZGF0YWJhc2VJZEZyb21BcHAoZSwgdCkge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmFwcGx5KGUub3B0aW9ucywgWyBcInByb2plY3RJZFwiIF0pKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3Iodi5JTlZBTElEX0FSR1VNRU5ULCAnXCJwcm9qZWN0SWRcIiBub3QgcHJvdmlkZWQgaW4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcC4nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJZChlLm9wdGlvbnMucHJvamVjdElkLCB0KTtcbiAgICAgICAgfShpLCBuKSwgaSk7XG4gICAgICAgIHJldHVybiByID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB1c2VGZXRjaFN0cmVhbXM6IHRcbiAgICAgICAgfSwgciksIHMuX3NldFNldHRpbmdzKHIpLCBzO1xuICAgIH0pLCBcIlBVQkxJQ1wiKS5zZXRNdWx0aXBsZUluc3RhbmNlcyghMCkpLCByZWdpc3RlclZlcnNpb24oUywgXCI0LjEuMFwiLCBlKSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24oUywgXCI0LjEuMFwiLCBcImVzbTIwMTdcIik7XG59KCk7XG5cbmV4cG9ydCB7IEFic3RyYWN0VXNlckRhdGFXcml0ZXIsIEFnZ3JlZ2F0ZUZpZWxkLCBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90LCBCeXRlcywgZ2UgYXMgQ0FDSEVfU0laRV9VTkxJTUlURUQsIENvbGxlY3Rpb25SZWZlcmVuY2UsIERvY3VtZW50UmVmZXJlbmNlLCBEb2N1bWVudFNuYXBzaG90LCBGaWVsZFBhdGgsIEZpZWxkVmFsdWUsIEZpcmVzdG9yZSwgRmlyZXN0b3JlRXJyb3IsIEdlb1BvaW50LCBMb2FkQnVuZGxlVGFzaywgUXVlcnksIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCwgUXVlcnlDb25zdHJhaW50LCBRdWVyeURvY3VtZW50U25hcHNob3QsIFF1ZXJ5RW5kQXRDb25zdHJhaW50LCBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCwgUXVlcnlMaW1pdENvbnN0cmFpbnQsIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnQsIFF1ZXJ5U25hcHNob3QsIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQsIFNuYXBzaG90TWV0YWRhdGEsIFRpbWVzdGFtcCwgVHJhbnNhY3Rpb24sIFdyaXRlQmF0Y2gsIEJ5dGVTdHJpbmcgYXMgX0J5dGVTdHJpbmcsIERhdGFiYXNlSWQgYXMgX0RhdGFiYXNlSWQsIERvY3VtZW50S2V5IGFzIF9Eb2N1bWVudEtleSwgX19QUklWQVRFX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyIGFzIF9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciwgX19QUklWQVRFX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgYXMgX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIsIEZpZWxkUGF0aCQxIGFzIF9GaWVsZFBhdGgsIF9fUFJJVkFURV9UZXN0aW5nSG9va3MgYXMgX1Rlc3RpbmdIb29rcywgX19QUklWQVRFX2Nhc3QgYXMgX2Nhc3QsIF9fUFJJVkFURV9kZWJ1Z0Fzc2VydCBhcyBfZGVidWdBc3NlcnQsIF9fUFJJVkFURV9pc0Jhc2U2NEF2YWlsYWJsZSBhcyBfaXNCYXNlNjRBdmFpbGFibGUsIF9fUFJJVkFURV9sb2dXYXJuIGFzIF9sb2dXYXJuLCBfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciBhcyBfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciwgYWRkRG9jLCBhZ2dyZWdhdGVGaWVsZEVxdWFsLCBhZ2dyZWdhdGVRdWVyeVNuYXBzaG90RXF1YWwsIGFuZCwgYXJyYXlSZW1vdmUsIGFycmF5VW5pb24sIGF2ZXJhZ2UsIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UsIGNvbGxlY3Rpb24sIGNvbGxlY3Rpb25Hcm91cCwgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yLCBjb3VudCwgZGVsZXRlRG9jLCBkZWxldGVGaWVsZCwgZGlzYWJsZU5ldHdvcmssIGRvYywgZG9jdW1lbnRJZCwgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UsIGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UsIGVuYWJsZU5ldHdvcmssIGVuZEF0LCBlbmRCZWZvcmUsIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQsIGV4ZWN1dGVXcml0ZSwgZ2V0QWdncmVnYXRlRnJvbVNlcnZlciwgZ2V0Q291bnRGcm9tU2VydmVyLCBnZXREb2MsIGdldERvY0Zyb21DYWNoZSwgZ2V0RG9jRnJvbVNlcnZlciwgZ2V0RG9jcywgZ2V0RG9jc0Zyb21DYWNoZSwgZ2V0RG9jc0Zyb21TZXJ2ZXIsIGdldEZpcmVzdG9yZSwgaW5jcmVtZW50LCBpbml0aWFsaXplRmlyZXN0b3JlLCBsaW1pdCwgbGltaXRUb0xhc3QsIGxvYWRCdW5kbGUsIG1lbW9yeUVhZ2VyR2FyYmFnZUNvbGxlY3RvciwgbWVtb3J5TG9jYWxDYWNoZSwgbWVtb3J5THJ1R2FyYmFnZUNvbGxlY3RvciwgbmFtZWRRdWVyeSwgb25TbmFwc2hvdCwgb25TbmFwc2hvdHNJblN5bmMsIG9yLCBvcmRlckJ5LCBwZXJzaXN0ZW50TG9jYWxDYWNoZSwgcGVyc2lzdGVudE11bHRpcGxlVGFiTWFuYWdlciwgcGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXIsIHF1ZXJ5LCBxdWVyeUVxdWFsLCByZWZFcXVhbCwgcnVuVHJhbnNhY3Rpb24sIHNlcnZlclRpbWVzdGFtcCwgc2V0RG9jLCBzZXRJbmRleENvbmZpZ3VyYXRpb24sIHNldExvZ0xldmVsLCBzbmFwc2hvdEVxdWFsLCBzdGFydEFmdGVyLCBzdGFydEF0LCBzdW0sIHRlcm1pbmF0ZSwgdXBkYXRlRG9jLCB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgd2hlcmUsIHdyaXRlQmF0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xuaW1wb3J0IHtcbiAgZ2V0RmlyZXN0b3JlLFxuICBjb2xsZWN0aW9uLFxuICBkb2MsXG4gIGFkZERvYyxcbiAgcXVlcnksXG4gIG9yZGVyQnksXG4gIHdoZXJlLFxuICBkZWxldGVEb2MsXG4gIGdldERvYyxcbiAgZ2V0RG9jcyxcbiAgc2V0RG9jLFxufSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG4vLyBpbXBvcnQgeyBnZXRBbmFseXRpY3MgfSBmcm9tIFwiZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICBhcGlLZXk6IHByb2Nlc3MuZW52LkZJUkVCQVNFX0FQSV9LRVksXG4gIGF1dGhEb21haW46IFwidGhlLWFnZ3JlZ2F0b3ItYjUxYmQuZmlyZWJhc2VhcHAuY29tXCIsXG4gIHByb2plY3RJZDogXCJ0aGUtYWdncmVnYXRvci1iNTFiZFwiLFxuICBzdG9yYWdlQnVja2V0OiBcInRoZS1hZ2dyZWdhdG9yLWI1MWJkLmFwcHNwb3QuY29tXCIsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjI4MDAyODg2ODMyMlwiLFxuICBhcHBJZDogXCIxOjI4MDAyODg2ODMyMjp3ZWI6ZjY1NGE5MjhkYTk2MjhkNmMzNzhiYlwiLFxuICBtZWFzdXJlbWVudElkOiBcIkctNDA4TkNGUUxDRlwiLFxufTtcblxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZVxuY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG4vLyBjb25zdCBhbmFseXRpY3MgPSBnZXRBbmFseXRpY3MoYXBwKTtcblxuY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoYXBwKTtcblxuZXhwb3J0IHtcbiAgYXBwLFxuICBkYixcbiAgY29sbGVjdGlvbixcbiAgZG9jLFxuICBhZGREb2MsXG4gIHdoZXJlLFxuICBkZWxldGVEb2MsXG4gIHF1ZXJ5LFxuICBvcmRlckJ5LFxuICBnZXREb2MsXG4gIGdldERvY3MsXG4gIHNldERvYyxcbn07XG4iLCJpbXBvcnQge1xuICBkYixcbiAgY29sbGVjdGlvbixcbiAgZG9jLFxuICBhZGREb2MsXG4gIGdldERvYyxcbiAgZ2V0RG9jcyxcbiAgcXVlcnksXG4gIHdoZXJlLFxuICBkZWxldGVEb2MsXG4gIG9yZGVyQnksXG4gIHNldERvYyxcbn0gZnJvbSBcIi4vZmlyZWJhc2VcIjtcblxuLy8gQVBJOiBhcG5ld3MsIGJiY1xuXG5jb25zdCByc3NGZWVkZXIgPSAoKCkgPT4ge1xuICBjb25zdCBmZWVkVXJscyA9IFtcbiAgICB7IG9wZW5haTogXCJodHRwczovL29wZW5haS5jb20vYmxvZy9yc3MueG1sXCIgfSxcbiAgICB7IGRlZXBtaW5kOiBcImh0dHBzOi8vd3d3LmRlZXBtaW5kLmNvbS9ibG9nL3Jzcy54bWxcIiB9LFxuICAgIHsgbWl0TmV3czogXCJodHRwczovL25ld3MubWl0LmVkdS90b3BpYy9taXRtYWNoaW5lLWxlYXJuaW5nLXJzcy54bWxcIiB9LFxuICBdO1xuXG4gIGZ1bmN0aW9uIHBhcnNlRGF0YShkYXRhKSB7XG4gICAgLy8gVXRpbGl6aW5nIHRoZSBtYXAgZnVuY3Rpb24gdG8gaXRlcmF0ZSB0aHJvdWdoIGVhY2ggb2JqZWN0IGluIHRoZSAnaXRlbXMnIGFycmF5LFxuICAgIC8vIGFuZCB0cmFuc2Zvcm1pbmcgaXQgaW50byB0aGUgc3RydWN0dXJlZCBmb3JtYXQgZGVzY3JpYmVkIGJlbG93LlxuICAgIGNvbnN0IHBhcnNlZERhdGEgPSBkYXRhLml0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gRXh0cmFjdCB0aGUgdGl0bGUsIGxpbmssIGRlc2NyaXB0aW9uLCBzb3VyY2UgYW5kIGRhdGUgcHJvcGVydHkgZnJvbSB0aGUgY3VycmVudCBpdGVtXG4gICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLFxuICAgICAgICBsaW5rOiBpdGVtLmxpbmssXG4gICAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRlc2NyaXB0aW9uIHx8IFwiTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlXCIsXG4gICAgICAgIHNvdXJjZTogZGF0YS50aXRsZSxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoaXRlbS5wdWJsaXNoZWQpLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBwYXJzZWREYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hEYXRhKHVybCkge1xuICAgIGNvbnN0IGFwaVVybCA9IGBodHRwczovL3Jzcy10by1qc29uLXNlcnZlcmxlc3MtYXBpLnZlcmNlbC5hcHAvYXBpP2ZlZWRVUkw9JHt1cmx9YDtcbiAgICByZXR1cm4gZmV0Y2goYXBpVXJsKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IHBhcnNlRGF0YShkYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2cocGFyc2VkRGF0YSk7XG4gICAgICAgIHJldHVybiBwYXJzZWREYXRhO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGRhdGE6XCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEV4aXN0aW5nVGl0bGVzKCkge1xuICAgIHJldHVybiBnZXREb2NzKGNvbGxlY3Rpb24oZGIsIFwiYWlcIikpXG4gICAgICAudGhlbigocXVlcnlTbmFwc2hvdCkgPT4ge1xuICAgICAgICBjb25zdCB0aXRsZXMgPSBbXTtcbiAgICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgICB0aXRsZXMucHVzaChkb2MuZGF0YSgpLnRpdGxlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRpdGxlcyk7XG4gICAgICAgIHJldHVybiB0aXRsZXM7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBleGlzdGluZyB0aXRsZXM6XCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFRvRmlyZXN0b3JlKCkge1xuICAgIC8vIC4uLlxuICB9XG5cbiAgZnVuY3Rpb24gZGVsZXRlT2xkRGF0YSgpIHtcbiAgICAvLyAuLi5cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZmVlZFVybHMsXG4gICAgZmV0Y2hEYXRhLFxuICAgIGdldEV4aXN0aW5nVGl0bGVzLFxuICB9O1xufSkoKTtcblxucnNzRmVlZGVyLmZldGNoRGF0YShcImh0dHBzOi8vb3BlbmFpLmNvbS9ibG9nL3Jzcy54bWxcIik7XG5yc3NGZWVkZXIuZ2V0RXhpc3RpbmdUaXRsZXMoKTtcblxuLy8gaHR0cHM6Ly9vcGVuYWkuY29tL2Jsb2cvcnNzLnhtbFxuLy8gaHR0cHM6Ly93d3cuZGVlcG1pbmQuY29tL2Jsb2cvcnNzLnhtbFxuLy8gaHR0cHM6Ly9uZXdzLm1pdC5lZHUvdG9waWMvbWl0bWFjaGluZS1sZWFybmluZy1yc3MueG1sXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBjb25zdCByc3NGZWVkVXJsID0gXCJodHRwczovL25ld3MubWl0LmVkdS90b3BpYy9taXRtYWNoaW5lLWxlYXJuaW5nLXJzcy54bWxcIjtcbi8vIGNvbnN0IGFwaVVybCA9IGBodHRwczovL3Jzcy10by1qc29uLXNlcnZlcmxlc3MtYXBpLnZlcmNlbC5hcHAvYXBpP2ZlZWRVUkw9JHtyc3NGZWVkVXJsfWA7XG5cbi8vIC8vIE1ha2UgdGhlIEdFVCByZXF1ZXN0IHRvIHRoZSBBUElcbi8vIGZldGNoKGFwaVVybClcbi8vICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4vLyAgIC50aGVuKChkYXRhKSA9PiB7XG4vLyAgICAgY29uc29sZS5sb2coZGF0YSk7XG4vLyAgICAgY29uc29sZS5sb2coZGF0YS5pdGVtcy5sZW5ndGgpO1xuXG4vLyAgICAgLy8gR2V0IHRoZSB0aXRsZXMgb2YgZXhpc3RpbmcgZG9jdW1lbnRzIGluIEZpcmVzdG9yZVxuLy8gICAgIGdldERvY3MoY29sbGVjdGlvbihkYiwgXCJhaVwiKSlcbi8vICAgICAgIC50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7XG4vLyAgICAgICAgIGNvbnN0IGV4aXN0aW5nVGl0bGVzID0gbmV3IFNldCgpO1xuLy8gICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4ge1xuLy8gICAgICAgICAgIGV4aXN0aW5nVGl0bGVzLmFkZChkb2MuZGF0YSgpLnRpdGxlKTtcbi8vICAgICAgICAgfSk7XG5cbi8vICAgICAgICAgLy8gTG9vcCBlbnRpcmUgZGF0YS5pdGVtcyBhcnJheVxuLy8gICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuaXRlbXMubGVuZ3RoOyBpKyspIHtcbi8vICAgICAgICAgICBjb25zb2xlLmxvZyhpKTtcbi8vICAgICAgICAgICBjb25zdCBpdGVtID0gZGF0YS5pdGVtc1tpXTsgLy8gU2VsZWN0IHRoZSBpdGVtXG4vLyAgICAgICAgICAgY29uc3QgdGl0bGVUb0NoZWNrID0gaXRlbS50aXRsZTtcblxuLy8gICAgICAgICAgIGlmICghZXhpc3RpbmdUaXRsZXMuaGFzKHRpdGxlVG9DaGVjaykpIHtcbi8vICAgICAgICAgICAgIC8vIERvY3VtZW50IHdpdGggdGhlIHRpdGxlIGRvZXNuJ3QgZXhpc3QsIGFkZCBpdFxuLy8gICAgICAgICAgICAgYWRkRG9jKGNvbGxlY3Rpb24oZGIsIFwiYWlcIiksIHtcbi8vICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4vLyAgICAgICAgICAgICAgIGxpbms6IGl0ZW0ubGluayxcbi8vICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGl0ZW0uZGVzY3JpcHRpb24gfHwgXCJObyBkZXNjcmlwdGlvbiBhdmFpbGFibGVcIixcbi8vICAgICAgICAgICAgICAgc291cmNlOiBkYXRhLnRpdGxlLFxuLy8gICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZShpdGVtLnB1Ymxpc2hlZCksXG4vLyAgICAgICAgICAgICB9KVxuLy8gICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYERvY3VtZW50ICcke3RpdGxlVG9DaGVja30nIHdyaXR0ZW4gc3VjY2Vzc2Z1bGx5IWApO1xuLy8gICAgICAgICAgICAgICB9KVxuLy8gICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFkZGluZyBkb2N1bWVudCB0byBGaXJlc3RvcmU6XCIsIGVycm9yKTtcbi8vICAgICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuLy8gICAgICAgICAgICAgICBgRG9jdW1lbnQgJyR7dGl0bGVUb0NoZWNrfScgYWxyZWFkeSBleGlzdHMsIHNraXBwaW5nLi4uYFxuLy8gICAgICAgICAgICAgKTtcbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICAgIH0pXG4vLyAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4vLyAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4vLyAgICAgICAgICAgXCJFcnJvciBmZXRjaGluZyBleGlzdGluZyBkb2N1bWVudHMgZnJvbSBGaXJlc3RvcmU6XCIsXG4vLyAgICAgICAgICAgZXJyb3Jcbi8vICAgICAgICAgKTtcbi8vICAgICAgIH0pO1xuLy8gICB9KVxuLy8gICAuY2F0Y2goKGVycm9yKSA9PiB7XG4vLyAgICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VycmVkOlwiLCBlcnJvcik7XG4vLyAgIH0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuLy8gY29uc3Qgb25lWWVhckFnbyA9IG5ldyBEYXRlKCk7XG4vLyBvbmVZZWFyQWdvLnNldEZ1bGxZZWFyKHRvZGF5LmdldEZ1bGxZZWFyKCkgLSAxKTtcblxuLy8gY29uc29sZS5sb2coXCJUb2RheTpcIiwgdG9kYXkpO1xuLy8gY29uc29sZS5sb2coXCJPbmUgWWVhciBBZ286XCIsIG9uZVllYXJBZ28pO1xuXG4vLyBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgXCJhaVwiKSwgd2hlcmUoXCJkYXRlXCIsIFwiPFwiLCBvbmVZZWFyQWdvKSk7XG5cbi8vIGdldERvY3MocSlcbi8vICAgLnRoZW4oKHF1ZXJ5U25hcHNob3QpID0+IHtcbi8vICAgICBjb25zb2xlLmxvZyhcIlF1ZXJ5IHNuYXBzaG90IGxlbmd0aDpcIiwgcXVlcnlTbmFwc2hvdC5zaXplKTtcbi8vICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4ge1xuLy8gICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0gZG9jLmRhdGEoKTtcbi8vICAgICAgIGNvbnNvbGUubG9nKFwiRG9jdW1lbnQgZGF0YTpcIiwgZG9jdW1lbnREYXRhKTtcbi8vICAgICAgIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcgZG9jdW1lbnQ6XCIsIGRvY3VtZW50RGF0YS50aXRsZSk7XG4vLyAgICAgICBkZWxldGVEb2MoZG9jLnJlZilcbi8vICAgICAgICAgLnRoZW4oKCkgPT4ge1xuLy8gICAgICAgICAgIGNvbnNvbGUubG9nKFwiRG9jdW1lbnQgZGVsZXRlZCBzdWNjZXNzZnVsbHkhXCIpO1xuLy8gICAgICAgICB9KVxuLy8gICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4vLyAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIGRvY3VtZW50OlwiLCBlcnJvcik7XG4vLyAgICAgICAgIH0pO1xuLy8gICAgIH0pO1xuLy8gICB9KVxuLy8gICAuY2F0Y2goKGVycm9yKSA9PiB7XG4vLyAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGFuZCBkZWxldGluZyBkb2N1bWVudHM6XCIsIGVycm9yKTtcbi8vICAgfSk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsInN0cmluZ1RvQnl0ZUFycmF5JDEiLCJzdHIiLCJvdXQiLCJwIiwiaSIsImxlbmd0aCIsImMiLCJjaGFyQ29kZUF0IiwiYmFzZTY0IiwiYnl0ZVRvQ2hhck1hcF8iLCJjaGFyVG9CeXRlTWFwXyIsImJ5dGVUb0NoYXJNYXBXZWJTYWZlXyIsImNoYXJUb0J5dGVNYXBXZWJTYWZlXyIsIkVOQ09ERURfVkFMU19CQVNFIiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJIQVNfTkFUSVZFX1NVUFBPUlQiLCJhdG9iIiwiZW5jb2RlQnl0ZUFycmF5IiwiaW5wdXQiLCJ3ZWJTYWZlIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJpbml0XyIsImJ5dGVUb0NoYXJNYXAiLCJvdXRwdXQiLCJieXRlMSIsImhhdmVCeXRlMiIsImJ5dGUyIiwiaGF2ZUJ5dGUzIiwiYnl0ZTMiLCJvdXRCeXRlMSIsIm91dEJ5dGUyIiwib3V0Qnl0ZTMiLCJvdXRCeXRlNCIsInB1c2giLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJhcmd1bWVudHMiLCJuYW1lIiwiYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmciLCJ1dGY4Qnl0ZXMiLCJiYXNlNjRFbmNvZGUiLCJyZXBsYWNlIiwiZ2V0RGVmYXVsdHMiLCJzZWxmIiwiZ2V0R2xvYmFsIiwiX19GSVJFQkFTRV9ERUZBVUxUU19fIiwicHJvY2VzcyIsImRlZmF1bHRzSnNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwiZG9jdW1lbnQiLCJtYXRjaCIsImNvb2tpZSIsImRlY29kZWQiLCJjb25zb2xlIiwiZXJyb3IiLCJiYXNlNjREZWNvZGUiLCJnZXREZWZhdWx0c0Zyb21Db29raWUiLCJpbmZvIiwiZ2V0RGVmYXVsdEFwcENvbmZpZyIsIl9hIiwiY29uZmlnIiwiRGVmZXJyZWQiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsIlByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJjYWxsYmFjayIsInZhbHVlIiwiY2F0Y2giLCJGaXJlYmFzZUVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJjdXN0b21EYXRhIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsImNyZWF0ZSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsIl8iLCJrZXkiLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImEiLCJiIiwiYUtleXMiLCJrZXlzIiwiYktleXMiLCJrIiwiaW5jbHVkZXMiLCJhUHJvcCIsImJQcm9wIiwiaXNPYmplY3QiLCJ0aGluZyIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsIm1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInByb3BzIiwic2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2siLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsImdldCIsImlkZW50aWZpZXIiLCJub3JtYWxpemVkSWRlbnRpZmllciIsIm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciIsImhhcyIsImRlZmVycmVkIiwic2V0IiwiaXNJbml0aWFsaXplZCIsInNob3VsZEF1dG9Jbml0aWFsaXplIiwiaW5zdGFuY2UiLCJnZXRPckluaXRpYWxpemVTZXJ2aWNlIiwiaW5zdGFuY2VJZGVudGlmaWVyIiwiZ2V0SW1tZWRpYXRlIiwib3B0aW9ucyIsIm9wdGlvbmFsIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJlbnRyaWVzIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsInNlcnZpY2VzIiwiZnJvbSIsInZhbHVlcyIsImFsbCIsImZpbHRlciIsIm1hcCIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvcHRzIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJTZXQiLCJhZGQiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwidW5kZWZpbmVkIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwibm93IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWV0aG9kIiwiTG9nZ2VyIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJfdXNlckxvZ0hhbmRsZXIiLCJ2YWwiLCJUeXBlRXJyb3IiLCJzZXRMb2dMZXZlbCIsImxvZ0hhbmRsZXIiLCJ1c2VyTG9nSGFuZGxlciIsImRlYnVnIiwibG9nIiwid2FybiIsImluc3RhbmNlT2ZBbnkiLCJvYmplY3QiLCJjb25zdHJ1Y3RvcnMiLCJzb21lIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwidGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwiSURCVHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZU5hbWVzIiwib2JqZWN0U3RvcmUiLCJ0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlIiwiZnVuYyIsIklEQkRhdGFiYXNlIiwidHJhbnNhY3Rpb24iLCJJREJDdXJzb3IiLCJhZHZhbmNlIiwiY29udGludWUiLCJjb250aW51ZVByaW1hcnlLZXkiLCJhcHBseSIsInVud3JhcCIsInN0b3JlTmFtZXMiLCJ0eCIsImNhbGwiLCJzb3J0IiwiZG9uZSIsInVubGlzdGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlIiwiRE9NRXhjZXB0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbiIsIklEQk9iamVjdFN0b3JlIiwiSURCSW5kZXgiLCJQcm94eSIsIklEQlJlcXVlc3QiLCJyZXF1ZXN0Iiwic3VjY2VzcyIsInJlc3VsdCIsInRoZW4iLCJwcm9taXNpZnlSZXF1ZXN0IiwibmV3VmFsdWUiLCJyZWFkTWV0aG9kcyIsIndyaXRlTWV0aG9kcyIsImNhY2hlZE1ldGhvZHMiLCJnZXRNZXRob2QiLCJ0YXJnZXRGdW5jTmFtZSIsInVzZUluZGV4IiwiaXNXcml0ZSIsImFzeW5jIiwic3RvcmVOYW1lIiwic3RvcmUiLCJpbmRleCIsInNoaWZ0Iiwib2xkVHJhcHMiLCJQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibGlicmFyeSIsInZlcnNpb24iLCJsb2dTdHJpbmciLCJuYW1lJG8iLCJ2ZXJzaW9uJDEiLCJsb2dnZXIiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfY29tcG9uZW50cyIsIl9hZGRDb21wb25lbnQiLCJhcHAiLCJfcmVnaXN0ZXJDb21wb25lbnQiLCJjb21wb25lbnROYW1lIiwiRVJST1JfRkFDVE9SWSIsIkZpcmViYXNlQXBwSW1wbCIsIl9pc0RlbGV0ZWQiLCJfb3B0aW9ucyIsImFzc2lnbiIsIl9jb25maWciLCJfbmFtZSIsIl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJfY29udGFpbmVyIiwiY2hlY2tEZXN0cm95ZWQiLCJpc0RlbGV0ZWQiLCJhcHBOYW1lIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwicmVnaXN0ZXJWZXJzaW9uIiwibGlicmFyeUtleU9yTmFtZSIsInZhcmlhbnQiLCJsaWJyYXJ5TWlzbWF0Y2giLCJ2ZXJzaW9uTWlzbWF0Y2giLCJ3YXJuaW5nIiwiREJfTkFNRSIsIkRCX1ZFUlNJT04iLCJTVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwiYmxvY2tlZCIsInVwZ3JhZGUiLCJibG9ja2luZyIsInRlcm1pbmF0ZWQiLCJpbmRleGVkREIiLCJvcGVuIiwib3BlblByb21pc2UiLCJldmVudCIsIm9sZFZlcnNpb24iLCJuZXdWZXJzaW9uIiwiZGIiLCJvcGVuREIiLCJjcmVhdGVPYmplY3RTdG9yZSIsIm9yaWdpbmFsRXJyb3JNZXNzYWdlIiwid3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIiLCJoZWFydGJlYXRPYmplY3QiLCJwdXQiLCJjb21wdXRlS2V5IiwiaWRiR2V0RXJyb3IiLCJhcHBJZCIsIkhlYXJ0YmVhdFNlcnZpY2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZSIsIl9zdG9yYWdlIiwiSGVhcnRiZWF0U3RvcmFnZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlUHJvbWlzZSIsInJlYWQiLCJ0cmlnZ2VySGVhcnRiZWF0IiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImxhc3RTZW50SGVhcnRiZWF0RGF0ZSIsImhlYXJ0YmVhdHMiLCJzaW5nbGVEYXRlSGVhcnRiZWF0IiwiaGJUaW1lc3RhbXAiLCJ2YWx1ZU9mIiwib3ZlcndyaXRlIiwiZ2V0SGVhcnRiZWF0c0hlYWRlciIsImhlYXJ0YmVhdHNUb1NlbmQiLCJ1bnNlbnRFbnRyaWVzIiwiaGVhcnRiZWF0c0NhY2hlIiwibWF4U2l6ZSIsInNsaWNlIiwiaGVhcnRiZWF0RW50cnkiLCJmaW5kIiwiaGIiLCJkYXRlcyIsImNvdW50Qnl0ZXMiLCJwb3AiLCJleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlciIsImhlYWRlclN0cmluZyIsInN0cmluZ2lmeSIsInN1YnN0cmluZyIsIl9jYW5Vc2VJbmRleGVkREJQcm9taXNlIiwicnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjayIsInByZUV4aXN0IiwiREJfQ0hFQ0tfTkFNRSIsIm9uc3VjY2VzcyIsImNsb3NlIiwiZGVsZXRlRGF0YWJhc2UiLCJvbnVwZ3JhZGVuZWVkZWQiLCJvbmVycm9yIiwiaWRiSGVhcnRiZWF0T2JqZWN0IiwicmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCIiwiaGVhcnRiZWF0c09iamVjdCIsImV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCIsImNvbW1vbmpzR2xvYmFsIiwiZ2xvYmFsIiwiZXNtIiwiZ29vZyIsImwiLCJhYSIsImNhIiwiTWF0aCIsInJhbmRvbSIsImRhIiwiZWEiLCJiaW5kIiwiZmEiLCJkIiwidW5zaGlmdCIsInEiLCJ0b1N0cmluZyIsImluZGV4T2YiLCJoYSIsInIiLCIkIiwiYWMiLCJmIiwiaCIsIm4iLCJ2IiwicyIsIm8iLCJzYSIsIk4iLCJoYXNPd25Qcm9wZXJ0eSIsImthIiwibWEiLCJuYSIsInciLCJkZWZhdWx0UHJldmVudGVkIiwib2EiLCJkZWZpbmVQcm9wZXJ0eSIsIngiLCJ0ZXN0IiwicGEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ5IiwicWEiLCJ6YSIsIkRhIiwidGEiLCJ6IiwidWEiLCJ2YSIsIndhIiwidG9Mb3dlckNhc2UiLCJ4YSIsInlhIiwiZG9jdW1lbnRNb2RlIiwiQWEiLCJCYSIsImV4ZWMiLCJDYSIsInBhcnNlRmxvYXQiLCJwYXJzZUludCIsIkZhIiwiQSIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b24iLCJzY3JlZW5ZIiwic2NyZWVuWCIsImNsaWVudFkiLCJjbGllbnRYIiwibWV0YUtleSIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsInN0YXRlIiwicG9pbnRlcklkIiwicG9pbnRlclR5cGUiLCJjaGFuZ2VkVG91Y2hlcyIsInNyY0VsZW1lbnQiLCJub2RlTmFtZSIsImZyb21FbGVtZW50IiwidG9FbGVtZW50IiwicGFnZVgiLCJwYWdlWSIsIkdhIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsIkhhIiwiSWEiLCJKYSIsImxpc3RlbmVyIiwicHJveHkiLCJzcmMiLCJjYXB0dXJlIiwibGEiLCJpYSIsIkthIiwiTmEiLCJQYSIsIlFhIiwic3BsaXQiLCJSYSIsIlNhIiwiVWEiLCJzcGxpY2UiLCJUYSIsIlZhIiwiV2EiLCJZYSIsIm9uY2UiLCJaYSIsIiRhIiwiTyIsImFiIiwiYmIiLCJlYiIsImNiIiwiYXR0YWNoRXZlbnQiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwiUCIsImZiIiwiZ2IiLCJkZXRhY2hFdmVudCIsImhhbmRsZUV2ZW50IiwiQiIsIlMiLCJKIiwiQyIsImliIiwiY29uY2F0IiwidCIsImpiIiwibGIiLCJtYiIsIm5leHQiLCJvYiIsImoiLCJwYiIsInJlc2V0IiwicWIiLCJyYiIsInNldFRpbWVvdXQiLCJzYiIsInRiIiwidmIiLCJ1YiIsIndiIiwieGIiLCJnYSIsIlQiLCJjbGVhclRpbWVvdXQiLCJ5YiIsIk51bWJlciIsInpiIiwibSIsInN0YXJ0IiwiQWIiLCJCYiIsIkNiIiwiRGIiLCJGYiIsIkdiIiwiRCIsIkpiIiwiRWEiLCJFIiwiTGIiLCJNYiIsIk5iIiwiT2IiLCJQYiIsIlNUQVRfRVZFTlQiLCJzdGF0IiwiRiIsIlFiIiwic2l6ZSIsIlJiIiwiU2IiLCJOT19FUlJPUiIsIkViIiwiVElNRU9VVCIsIkliIiwiVGIiLCJLYiIsIiRiIiwiVWIiLCJWYiIsIldiIiwiWGIiLCJPUEVOIiwiSGIiLCJZYiIsIlpiIiwiYmMiLCJXIiwiVSIsImNjIiwiViIsIkkiLCJMIiwiRyIsIlkiLCJNIiwiYmEiLCJLIiwiZGMiLCJYTUxIdHRwUmVxdWVzdCIsImVjIiwiZmMiLCJnYyIsImhjIiwiaWMiLCJqYyIsImtjIiwibGMiLCJuYiIsIm9jIiwicmMiLCJ1YyIsInFjIiwidmMiLCJwYyIsImlzTmFOIiwid2MiLCJuYyIsIkgiLCJzYyIsImFib3J0IiwieGMiLCJ5YyIsInpjIiwiQWMiLCJCYyIsInJhIiwiTGEiLCJNYSIsImdldFJlc3BvbnNlSGVhZGVyIiwiQ2MiLCJEYyIsIkVjIiwiRmMiLCJHYyIsIkhjIiwiS2MiLCJmb3JFYWNoIiwiWiIsIkpjIiwiSWMiLCJqYSIsIm1jIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJzdHJlYW0iLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJ0cmltIiwiT2EiLCJ0YyIsImNhbmNlbCIsIkxjIiwiUmVnRXhwIiwiTmMiLCJPYyIsIlBjIiwiUWMiLCJSYyIsIiRjIiwiWGMiLCJTYyIsIlljIiwiZmxvb3IiLCJhYnMiLCJkZWNvZGVVUkkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJlbmNvZGVVUkkiLCJaYyIsIlRjIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiVWMiLCJWYyIsIldjIiwiTWMiLCJhZCIsImNkIiwiZGQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJlZCIsImZkIiwiY2xlYXIiLCJnZCIsImhkIiwiaWQiLCJrZCIsIm9ubG9hZCIsIm9uYWJvcnQiLCJvbnRpbWVvdXQiLCJsZCIsIm1kIiwicmVhZHlTdGF0ZSIsIm5kIiwic3RhdHVzIiwicmVzcG9uc2VUeXBlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiSGVhZGVycyIsInFkIiwiWGEiLCJwZCIsIm9kIiwic2VuZCIsImhlYWRlcnMiLCJjcmVkZW50aWFscyIsImNhY2hlIiwiYm9keSIsImZldGNoIiwiUmVxdWVzdCIsImFycmF5QnVmZmVyIiwiUmVhZGFibGVTdHJlYW0iLCJnZXRSZWFkZXIiLCJ0ZXh0IiwiVWludDhBcnJheSIsInNldFJlcXVlc3RIZWFkZXIiLCJhcHBlbmQiLCJyZCIsInNkIiwidGQiLCJ1ZCIsInZkIiwieWQiLCJ6ZCIsIkFkIiwibG9jYXRpb24iLCJwcm90b2NvbCIsIndkIiwibW96UmVzcG9uc2VBcnJheUJ1ZmZlciIsIkJkIiwiQ2QiLCJEZCIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsIkVkIiwieG1sSHR0cEZhY3RvcnkiLCJzdXBwb3J0c0Nyb3NzRG9tYWluWGhyIiwiY29uY3VycmVudFJlcXVlc3RMaW1pdCIsImZhc3RIYW5kc2hha2UiLCJlbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMiLCJmb3JjZUxvbmdQb2xsaW5nIiwiZGV0ZWN0QnVmZmVyaW5nUHJveHkiLCJsb25nUG9sbGluZ1RpbWVvdXQiLCJGZCIsIkdkIiwic2VuZEJlYWNvbiIsIkltYWdlIiwiSGQiLCJMZCIsIktkIiwicm91bmQiLCJtaW4iLCJtYXgiLCJKZCIsIk1kIiwiSWQiLCJpc0FjdGl2ZSIsImpkIiwiaG9zdG5hbWUiLCJwb3J0IiwiTmQiLCJPZCIsIlEiLCJtZXNzYWdlVXJsUGFyYW1zIiwibWVzc2FnZUhlYWRlcnMiLCJjbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwic2VuZFJhd0pzb24iLCJodHRwU2Vzc2lvbklkUGFyYW0iLCJSIiwiUGQiLCJfX2hlYWRlcnNfXyIsInN0YXR1c0NvZGUiLCJfX3N0YXR1c19fIiwiX19zbV9fIiwiUWQiLCJibG9ja1NpemUiLCJTZCIsInRvVXBwZXJDYXNlIiwiZ2V0UHJvdG90eXBlT2YiLCJGb3JtRGF0YSIsIndpdGhDcmVkZW50aWFscyIsInRpbWVvdXQiLCJ4ZCIsImtiIiwiX19kYXRhX18iLCJUZCIsImlzRmluaXRlIiwiVWQiLCJXZCIsIlhkIiwiWCIsIlpkIiwiJGQiLCJhZSIsIllkIiwiYmUiLCJjZWlsIiwiTE4yIiwicG93IiwiYW5kIiwib3IiLCJ4b3IiLCJjcmVhdGVXZWJDaGFubmVsIiwiSFRUUF9FUlJPUiIsIkNPTVBMRVRFIiwiRXZlbnRUeXBlIiwiQ0xPU0UiLCJNRVNTQUdFIiwibGlzdGVuIiwibGlzdGVuT25jZSIsImdldExhc3RFcnJvciIsImdldExhc3RFcnJvckNvZGUiLCJnZXRTdGF0dXMiLCJnZXRSZXNwb25zZUpzb24iLCJnZXRSZXNwb25zZVRleHQiLCJzZXRXaXRoQ3JlZGVudGlhbHMiLCJkaWdlc3QiLCJ1cGRhdGUiLCJtdWx0aXBseSIsIm1vZHVsbyIsImNvbXBhcmUiLCJ0b051bWJlciIsImdldEJpdHMiLCJmcm9tTnVtYmVyIiwiZnJvbVN0cmluZyIsIlZkIiwiY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCIsImdldFN0YXRFdmVudFRhcmdldCIsIkVycm9yQ29kZSIsIkV2ZW50IiwiU3RhdCIsIlBST1hZIiwiTk9QUk9YWSIsIkZldGNoWG1sSHR0cEZhY3RvcnkiLCJXZWJDaGFubmVsIiwiWGhySW8iLCJNZDUiLCJJbnRlZ2VyIiwiVXNlciIsInVpZCIsImlzQXV0aGVudGljYXRlZCIsInRvS2V5IiwiaXNFcXVhbCIsIlVOQVVUSEVOVElDQVRFRCIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiTU9DS19VU0VSIiwiX19QUklWQVRFX2dldExvZ0xldmVsIiwiX19QUklWQVRFX2xvZ0RlYnVnIiwiX19QUklWQVRFX2FyZ1RvU3RyaW5nIiwiX19QUklWQVRFX2xvZ0Vycm9yIiwiX19QUklWQVRFX2xvZ1dhcm4iLCJmYWlsIiwiX19QUklWQVRFX2hhcmRBc3NlcnQiLCJfX1BSSVZBVEVfZGVidWdDYXN0IiwiT0siLCJDQU5DRUxMRUQiLCJVTktOT1dOIiwiSU5WQUxJRF9BUkdVTUVOVCIsIkRFQURMSU5FX0VYQ0VFREVEIiwiTk9UX0ZPVU5EIiwiQUxSRUFEWV9FWElTVFMiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlJFU09VUkNFX0VYSEFVU1RFRCIsIkZBSUxFRF9QUkVDT05ESVRJT04iLCJBQk9SVEVEIiwiT1VUX09GX1JBTkdFIiwiVU5JTVBMRU1FTlRFRCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiRmlyZXN0b3JlRXJyb3IiLCJfX1BSSVZBVEVfRGVmZXJyZWQiLCJfX1BSSVZBVEVfT0F1dGhUb2tlbiIsInVzZXIiLCJfX1BSSVZBVEVfRW1wdHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsImdldFRva2VuIiwiaW52YWxpZGF0ZVRva2VuIiwiZW5xdWV1ZVJldHJ5YWJsZSIsInNodXRkb3duIiwiX19QUklWQVRFX0VtdWxhdG9yQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIiLCJ0b2tlbiIsImNoYW5nZUxpc3RlbmVyIiwiX19QUklWQVRFX0ZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIiLCJjdXJyZW50VXNlciIsImZvcmNlUmVmcmVzaCIsImF1dGgiLCJfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyIiwiX19QUklWQVRFX2F3YWl0TmV4dFRva2VuIiwiX19QUklWQVRFX3JlZ2lzdGVyQXV0aCIsImFkZEF1dGhUb2tlbkxpc3RlbmVyIiwiYWNjZXNzVG9rZW4iLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImdldFVpZCIsIl9fUFJJVkFURV9GaXJzdFBhcnR5VG9rZW4iLCJfX1BSSVZBVEVfRmlyc3RQYXJ0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiQXBwQ2hlY2tUb2tlbiIsIl9fUFJJVkFURV9GaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlciIsImFwcENoZWNrIiwib25Ub2tlbkNoYW5nZWQiLCJfX1BSSVZBVEVfcmVnaXN0ZXJBcHBDaGVjayIsImFkZFRva2VuTGlzdGVuZXIiLCJyZW1vdmVUb2tlbkxpc3RlbmVyIiwiX19QUklWQVRFX3JhbmRvbUJ5dGVzIiwiY3J5cHRvIiwibXNDcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJfX1BSSVZBVEVfQXV0b0lkIiwiX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IiLCJfX1BSSVZBVEVfYXJyYXlFcXVhbHMiLCJldmVyeSIsIlRpbWVzdGFtcCIsInNlY29uZHMiLCJuYW5vc2Vjb25kcyIsImZyb21NaWxsaXMiLCJmcm9tRGF0ZSIsImdldFRpbWUiLCJ0b0RhdGUiLCJ0b01pbGxpcyIsIl9jb21wYXJlVG8iLCJ0b0pTT04iLCJwYWRTdGFydCIsIlNuYXBzaG90VmVyc2lvbiIsInRpbWVzdGFtcCIsImZyb21UaW1lc3RhbXAiLCJjb21wYXJlVG8iLCJ0b01pY3Jvc2Vjb25kcyIsInRvVGltZXN0YW1wIiwiQmFzZVBhdGgiLCJzZWdtZW50cyIsIm9mZnNldCIsImxlbiIsImNvbXBhcmF0b3IiLCJjaGlsZCIsImxpbWl0IiwiY29uc3RydWN0IiwicG9wRmlyc3QiLCJwb3BMYXN0IiwiZmlyc3RTZWdtZW50IiwibGFzdFNlZ21lbnQiLCJpc0VtcHR5IiwiaXNQcmVmaXhPZiIsImlzSW1tZWRpYXRlUGFyZW50T2YiLCJ0b0FycmF5IiwiUmVzb3VyY2VQYXRoIiwiY2Fub25pY2FsU3RyaW5nIiwiZW1wdHlQYXRoIiwiRmllbGRQYXRoJDEiLCJpc1ZhbGlkSWRlbnRpZmllciIsImlzS2V5RmllbGQiLCJrZXlGaWVsZCIsImZyb21TZXJ2ZXJGb3JtYXQiLCJfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQiLCJEb2N1bWVudEtleSIsInBhdGgiLCJmcm9tUGF0aCIsImZyb21OYW1lIiwiZW1wdHkiLCJjb2xsZWN0aW9uR3JvdXAiLCJoYXNDb2xsZWN0aW9uSWQiLCJnZXRDb2xsZWN0aW9uR3JvdXAiLCJnZXRDb2xsZWN0aW9uUGF0aCIsImlzRG9jdW1lbnRLZXkiLCJmcm9tU2VnbWVudHMiLCJfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRGcm9tRG9jdW1lbnQiLCJJbmRleE9mZnNldCIsInJlYWRUaW1lIiwiZG9jdW1lbnRLZXkiLCJsYXJnZXN0QmF0Y2hJZCIsIl9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IiLCJQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIiwib25Db21taXR0ZWRMaXN0ZW5lcnMiLCJhZGRPbkNvbW1pdHRlZExpc3RlbmVyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyIsIlBlcnNpc3RlbmNlUHJvbWlzZSIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwibWFwQXJyYXkiLCJkb1doaWxlIiwiX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvciIsIl9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZSIsInByZXZpb3VzVmFsdWUiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJvZSIsIl9lIiwid3JpdGVTZXF1ZW5jZU51bWJlciIsIl9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCIsIl9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyIsIl9fUFJJVkFURV9vYmplY3RTaXplIiwiU29ydGVkTWFwIiwicm9vdCIsIkxMUkJOb2RlIiwiRU1QVFkiLCJpbnNlcnQiLCJjb3B5IiwiQkxBQ0siLCJyZW1vdmUiLCJsZWZ0IiwicmlnaHQiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiU29ydGVkTWFwSXRlcmF0b3IiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwiaXNSZXZlcnNlIiwibm9kZVN0YWNrIiwiZ2V0TmV4dCIsImhhc05leHQiLCJwZWVrIiwiY29sb3IiLCJSRUQiLCJmaXhVcCIsInJlbW92ZU1pbiIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVja01heERlcHRoIiwiY2hlY2siLCJTb3J0ZWRTZXQiLCJmaXJzdCIsImxhc3QiLCJmb3JFYWNoSW5SYW5nZSIsImZvckVhY2hXaGlsZSIsImZpcnN0QWZ0ZXJPckVxdWFsIiwiU29ydGVkU2V0SXRlcmF0b3IiLCJ1bmlvbldpdGgiLCJpdGVyIiwiRmllbGRNYXNrIiwiZmllbGRzIiwiY292ZXJzIiwiX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yIiwiQnl0ZVN0cmluZyIsImJpbmFyeVN0cmluZyIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidG9CYXNlNjQiLCJ0b1VpbnQ4QXJyYXkiLCJhcHByb3hpbWF0ZUJ5dGVTaXplIiwiRU1QVFlfQllURV9TVFJJTkciLCJ0ZSIsIl9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAiLCJzdWJzdHIiLCJuYW5vcyIsIl9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIiLCJfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyIsIl9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcCIsIm1hcFZhbHVlIiwiX190eXBlX18iLCJzdHJpbmdWYWx1ZSIsIl9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlIiwiX19wcmV2aW91c192YWx1ZV9fIiwiX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lIiwiX19sb2NhbF93cml0ZV90aW1lX18iLCJ0aW1lc3RhbXBWYWx1ZSIsIkRhdGFiYXNlSW5mbyIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJsb25nUG9sbGluZ09wdGlvbnMiLCJ1c2VGZXRjaFN0cmVhbXMiLCJEYXRhYmFzZUlkIiwicHJvamVjdElkIiwiZGF0YWJhc2UiLCJpc0RlZmF1bHREYXRhYmFzZSIsIm5lIiwiX19QUklWQVRFX3R5cGVPcmRlciIsIl9fUFJJVkFURV9pc01heFZhbHVlIiwiX19QUklWQVRFX3ZhbHVlRXF1YWxzIiwiYm9vbGVhblZhbHVlIiwiYnl0ZXNWYWx1ZSIsInJlZmVyZW5jZVZhbHVlIiwiZ2VvUG9pbnRWYWx1ZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiaW50ZWdlclZhbHVlIiwiZG91YmxlVmFsdWUiLCJhcnJheVZhbHVlIiwiX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyIsIl9fUFJJVkFURV92YWx1ZUNvbXBhcmUiLCJfX1BSSVZBVEVfY29tcGFyZVRpbWVzdGFtcHMiLCJjYW5vbmljYWxJZCIsIl9fUFJJVkFURV9jYW5vbmlmeVZhbHVlIiwiaXNJbnRlZ2VyIiwiX19QUklWQVRFX2lzTnVsbFZhbHVlIiwiX19QUklWQVRFX2lzTmFuVmFsdWUiLCJfX1BSSVZBVEVfaXNNYXBWYWx1ZSIsIl9fUFJJVkFURV9kZWVwQ2xvbmUiLCJPYmplY3RWYWx1ZSIsImZpZWxkIiwiZ2V0RmllbGRzTWFwIiwic2V0QWxsIiwiYXBwbHlDaGFuZ2VzIiwiY2xvbmUiLCJNdXRhYmxlRG9jdW1lbnQiLCJkb2N1bWVudFR5cGUiLCJjcmVhdGVUaW1lIiwiZG9jdW1lbnRTdGF0ZSIsIm5ld0ludmFsaWREb2N1bWVudCIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJuZXdOb0RvY3VtZW50IiwibmV3VW5rbm93bkRvY3VtZW50IiwiY29udmVydFRvRm91bmREb2N1bWVudCIsImNvbnZlcnRUb05vRG9jdW1lbnQiLCJjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQiLCJzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJzZXRIYXNMb2NhbE11dGF0aW9ucyIsInNldFJlYWRUaW1lIiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJoYXNQZW5kaW5nV3JpdGVzIiwiaXNWYWxpZERvY3VtZW50IiwiaXNGb3VuZERvY3VtZW50IiwiaXNOb0RvY3VtZW50IiwiaXNVbmtub3duRG9jdW1lbnQiLCJtdXRhYmxlQ29weSIsIkJvdW5kIiwicG9zaXRpb24iLCJpbmNsdXNpdmUiLCJfX1BSSVZBVEVfYm91bmRDb21wYXJlVG9Eb2N1bWVudCIsImRpciIsIl9fUFJJVkFURV9ib3VuZEVxdWFscyIsIk9yZGVyQnkiLCJfX1BSSVZBVEVfb3JkZXJCeUVxdWFscyIsIkZpbHRlciIsIkZpZWxkRmlsdGVyIiwib3AiLCJjcmVhdGVLZXlGaWVsZEluRmlsdGVyIiwiX19QUklWQVRFX0tleUZpZWxkRmlsdGVyIiwiX19QUklWQVRFX0FycmF5Q29udGFpbnNGaWx0ZXIiLCJfX1BSSVZBVEVfSW5GaWx0ZXIiLCJfX1BSSVZBVEVfTm90SW5GaWx0ZXIiLCJfX1BSSVZBVEVfQXJyYXlDb250YWluc0FueUZpbHRlciIsIl9fUFJJVkFURV9LZXlGaWVsZEluRmlsdGVyIiwiX19QUklWQVRFX0tleUZpZWxkTm90SW5GaWx0ZXIiLCJtYXRjaGVzIiwibWF0Y2hlc0NvbXBhcmlzb24iLCJpc0luZXF1YWxpdHkiLCJnZXRGbGF0dGVuZWRGaWx0ZXJzIiwiZ2V0RmlsdGVycyIsImdldEZpcnN0SW5lcXVhbGl0eUZpZWxkIiwiQ29tcG9zaXRlRmlsdGVyIiwiZmlsdGVycyIsImNlIiwiX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24iLCJyZWR1Y2UiLCJsZSIsIl9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbiIsIl9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQiLCJfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIiLCJfX1BSSVZBVEVfZmlsdGVyRXF1YWxzIiwiX19QUklWQVRFX3N0cmluZ2lmeUZpbHRlciIsIl9fUFJJVkFURV9leHRyYWN0RG9jdW1lbnRLZXlzRnJvbUFycmF5VmFsdWUiLCJudWxsVmFsdWUiLCJfX1BSSVZBVEVfVGFyZ2V0SW1wbCIsIm9yZGVyQnkiLCJzdGFydEF0IiwiZW5kQXQiLCJoZSIsIl9fUFJJVkFURV9uZXdUYXJnZXQiLCJfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQiLCJfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzIiwiX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQiLCJfX1BSSVZBVEVfUXVlcnlJbXBsIiwiZXhwbGljaXRPcmRlckJ5IiwibGltaXRUeXBlIiwiUGUiLCJJZSIsIl9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgiLCJfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzIiwiX19QUklWQVRFX3F1ZXJ5T3JkZXJCeSIsIl9fUFJJVkFURV9nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQiLCJfX1BSSVZBVEVfZ2V0Rmlyc3RPcmRlckJ5RmllbGQiLCJfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCIsIl9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCIsIl9fUFJJVkFURV9xdWVyeUVxdWFscyIsIl9fUFJJVkFURV9jYW5vbmlmeVF1ZXJ5IiwiX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5IiwiX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyIsIl9fUFJJVkFURV9uZXdRdWVyeUNvbXBhcmF0b3IiLCJfX1BSSVZBVEVfY29tcGFyZURvY3MiLCJPYmplY3RNYXAiLCJtYXBLZXlGbiIsImVxdWFsc0ZuIiwiaW5uZXIiLCJpbm5lclNpemUiLCJpZSIsIl9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAiLCJzZSIsImRvY3VtZW50TWFwIiwiX19QUklWQVRFX2NvbnZlcnRPdmVybGF5ZWREb2N1bWVudE1hcFRvRG9jdW1lbnRNYXAiLCJvdmVybGF5ZWREb2N1bWVudCIsIl9fUFJJVkFURV9uZXdPdmVybGF5TWFwIiwiX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwIiwiX19QUklWQVRFX25ld011dGF0aW9uTWFwIiwiX19QUklWQVRFX2RvY3VtZW50S2V5U2V0IiwiVHJhbnNmb3JtT3BlcmF0aW9uIiwiX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9Mb2NhbFZpZXciLCJfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtIiwiX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfYXBwbHlBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIiwiX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uIiwiX19QUklWQVRFX2FwcGx5QXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiIsIl9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlIiwiYXNOdW1iZXIiLCJUZSIsIl9fUFJJVkFURV90b0ludGVnZXIiLCJ1c2VQcm90bzNKc29uIiwiX19QUklWQVRFX3RvRG91YmxlIiwic2VyaWFsaXplciIsIl9fUFJJVkFURV9hcHBseVRyYW5zZm9ybU9wZXJhdGlvblRvUmVtb3RlRG9jdW1lbnQiLCJlbGVtZW50cyIsIl9fUFJJVkFURV9jb2VyY2VkRmllbGRWYWx1ZXNBcnJheSIsIlByZWNvbmRpdGlvbiIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJub25lIiwiaXNOb25lIiwiX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudCIsIk11dGF0aW9uIiwiX19QUklWQVRFX2NhbGN1bGF0ZU92ZXJsYXlNdXRhdGlvbiIsIl9fUFJJVkFURV9EZWxldGVNdXRhdGlvbiIsIl9fUFJJVkFURV9TZXRNdXRhdGlvbiIsIl9fUFJJVkFURV9QYXRjaE11dGF0aW9uIiwiX19QUklWQVRFX211dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50IiwiX19QUklWQVRFX3NlcnZlclRyYW5zZm9ybVJlc3VsdHMiLCJmaWVsZFRyYW5zZm9ybXMiLCJ0cmFuc2Zvcm1SZXN1bHRzIiwicHJlY29uZGl0aW9uIiwiX19QUklWQVRFX2dldFBhdGNoIiwiX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyIsIl9fUFJJVkFURV9sb2NhbFRyYW5zZm9ybVJlc3VsdHMiLCJmaWVsZE1hc2siLCJfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMiLCJ0cmFuc2Zvcm0iLCJfX1BSSVZBVEVfZmllbGRUcmFuc2Zvcm1FcXVhbHMiLCJnZXRGaWVsZE1hc2siLCJNdXRhdGlvbkJhdGNoIiwiYmF0Y2hJZCIsImxvY2FsV3JpdGVUaW1lIiwiYmFzZU11dGF0aW9ucyIsIm11dGF0aW9ucyIsImFwcGx5VG9SZW1vdGVEb2N1bWVudCIsIm11dGF0aW9uUmVzdWx0cyIsImFwcGx5VG9Mb2NhbFZpZXciLCJhcHBseVRvTG9jYWxEb2N1bWVudFNldCIsIm11dGF0ZWRGaWVsZHMiLCJPdmVybGF5IiwibXV0YXRpb24iLCJnZXRLZXkiLCJFeGlzdGVuY2VGaWx0ZXIiLCJjb3VudCIsInVuY2hhbmdlZE5hbWVzIiwidWUiLCJfX1BSSVZBVEVfbWFwQ29kZUZyb21ScGNDb2RlIiwiX19QUklWQVRFX1Rlc3RpbmdIb29rcyIsIm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hDYWxsYmFja3MiLCJnZXRPckNyZWF0ZUluc3RhbmNlIiwib25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCIsIm5vdGlmeU9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2giLCJfX1BSSVZBVEVfZ2V0TWQ1SGFzaFZhbHVlIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyIsIkRhdGFWaWV3IiwiYnVmZmVyIiwiZ2V0VWludDMyIiwiQmxvb21GaWx0ZXIiLCJiaXRtYXAiLCJwYWRkaW5nIiwiaGFzaENvdW50IiwiX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IiLCJkZSIsIkFlIiwiUmUiLCJWZSIsIm1pZ2h0Q29udGFpbiIsIm1lIiwiUmVtb3RlRXZlbnQiLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSIsIlRhcmdldENoYW5nZSIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwiX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UiLCJmZSIsInJlbW92ZWRUYXJnZXRJZHMiLCJnZSIsIl9fUFJJVkFURV9FeGlzdGVuY2VGaWx0ZXJDaGFuZ2UiLCJ0YXJnZXRJZCIsInBlIiwiX19QUklWQVRFX1dhdGNoVGFyZ2V0Q2hhbmdlIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJfX1BSSVZBVEVfVGFyZ2V0U3RhdGUiLCJ5ZSIsIndlIiwiX19QUklWQVRFX3NuYXBzaG90Q2hhbmdlc01hcCIsIlNlIiwiRGUiLCJ2ZSIsIkNlIiwiRmUiLCJNZSIsInhlIiwiT2UiLCJOZSIsIkJlIiwiTGUiLCJrZSIsIl9fUFJJVkFURV9XYXRjaENoYW5nZUFnZ3JlZ2F0b3IiLCJxZSIsIlFlIiwiS2UiLCIkZSIsIl9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCIsIlVlIiwiV2UiLCJHZSIsInplIiwiamUiLCJmb3JFYWNoVGFyZ2V0IiwiSGUiLCJKZSIsInJlbW92ZVRhcmdldCIsIlllIiwiWmUiLCJYZSIsImV0IiwidHQiLCJsb2NhbENhY2hlQ291bnQiLCJleGlzdGVuY2VGaWx0ZXJDb3VudCIsImJsb29tRmlsdGVyIiwiYXBwbGllZCIsImJpdG1hcExlbmd0aCIsImJpdHMiLCJudCIsIl9fUFJJVkFURV9ibG9vbUZpbHRlck1pZ2h0Q29udGFpbiIsInJ0IiwiaXQiLCJnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0Iiwic3QiLCJvdCIsInB1cnBvc2UiLCJfdCIsInV0IiwiYXNjIiwiZGVzYyIsImluIiwiSnNvblByb3RvU2VyaWFsaXplciIsIl9fUFJJVkFURV90b0ludDMyUHJvdG8iLCJfX1BSSVZBVEVfZnJvbVZlcnNpb24iLCJfX1BSSVZBVEVfZnJvbVJlc291cmNlTmFtZSIsIl9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lIiwiX19QUklWQVRFX2V4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lIiwiX19QUklWQVRFX3RvUXVlcnlQYXRoIiwiX19QUklWQVRFX3RvUmVzb3VyY2VOYW1lIiwiX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkIiwiX19QUklWQVRFX3RvRG9jdW1lbnRzVGFyZ2V0IiwiZG9jdW1lbnRzIiwiX19QUklWQVRFX3RvUXVlcnlUYXJnZXQiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJwYXJlbnQiLCJjb2xsZWN0aW9uSWQiLCJhbGxEZXNjZW5kYW50cyIsIl9fUFJJVkFURV90b0ZpbHRlciIsIndoZXJlIiwiX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlIiwiZGlyZWN0aW9uIiwiX19QUklWQVRFX3RvRGlyZWN0aW9uIiwiYmVmb3JlIiwiX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkiLCJfX1BSSVZBVEVfZnJvbVF1ZXJ5UGF0aCIsIl9fUFJJVkFURV9mcm9tRmlsdGVyIiwiX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UiLCJfX1BSSVZBVEVfbmV3UXVlcnkiLCJ1bmFyeUZpbHRlciIsIk5hTiIsImZpZWxkRmlsdGVyIiwiY29tcG9zaXRlRmlsdGVyIiwiX19QUklWQVRFX3RvT3BlcmF0b3JOYW1lIiwiX19QUklWQVRFX3RvQ29tcG9zaXRlT3BlcmF0b3JOYW1lIiwiZmllbGRQYXRoIiwiVGFyZ2V0RGF0YSIsInNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsImV4cGVjdGVkQ291bnQiLCJ3aXRoU2VxdWVuY2VOdW1iZXIiLCJ3aXRoUmVzdW1lVG9rZW4iLCJ3aXRoRXhwZWN0ZWRDb3VudCIsIndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiX19QUklWQVRFX0xvY2FsU2VyaWFsaXplciIsImN0IiwiX19QUklWQVRFX2Zyb21CdW5kbGVkUXVlcnkiLCJfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlciIsIlB0IiwiSXQiLCJUdCIsIkV0IiwiZHQiLCJBdCIsIlJ0IiwiVnQiLCJmdCIsImd0IiwiTUFYX1NBRkVfSU5URUdFUiIsInl0Iiwid3QiLCJTdCIsImJ0IiwiX19QUklWQVRFX01lbW9yeUluZGV4TWFuYWdlciIsInNuIiwiX19QUklWQVRFX01lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiZ2V0Q29sbGVjdGlvblBhcmVudHMiLCJnZXRFbnRyaWVzIiwiYWRkRmllbGRJbmRleCIsImRlbGV0ZUZpZWxkSW5kZXgiLCJnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCIsImdldEluZGV4VHlwZSIsImdldEZpZWxkSW5kZXhlcyIsImdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSIsImdldE1pbk9mZnNldCIsImdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVDb2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVJbmRleEVudHJpZXMiLCJMcnVQYXJhbXMiLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJ3aXRoQ2FjaGVTaXplIiwiREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUiLCJERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QiLCJERUZBVUxUIiwiRElTQUJMRUQiLCJfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IiLCJNbiIsInhuIiwiT24iLCJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsImFkZEVudHJ5IiwiYXNzZXJ0Tm90QXBwbGllZCIsInJlbW92ZUVudHJ5IiwiZ2V0RW50cnkiLCJnZXRGcm9tQ2FjaGUiLCJnZXRBbGxGcm9tQ2FjaGUiLCJPdmVybGF5ZWREb2N1bWVudCIsIkxvY2FsRG9jdW1lbnRzVmlldyIsInJlbW90ZURvY3VtZW50Q2FjaGUiLCJtdXRhdGlvblF1ZXVlIiwiZG9jdW1lbnRPdmVybGF5Q2FjaGUiLCJpbmRleE1hbmFnZXIiLCJnZXREb2N1bWVudCIsImdldE92ZXJsYXkiLCJnZXREb2N1bWVudHMiLCJnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyIsInBvcHVsYXRlT3ZlcmxheXMiLCJjb21wdXRlVmlld3MiLCJnZXRPdmVybGF5ZWREb2N1bWVudHMiLCJnZXRPdmVybGF5cyIsInJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwic2F2ZU92ZXJsYXlzIiwicmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5IiwiX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkiLCJnZXROZXh0RG9jdW1lbnRzIiwiZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwIiwiZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uIiwiX19QUklWQVRFX01lbW9yeUJ1bmRsZUNhY2hlIiwiYXIiLCJ1ciIsImdldEJ1bmRsZU1ldGFkYXRhIiwic2F2ZUJ1bmRsZU1ldGFkYXRhIiwiZ2V0TmFtZWRRdWVyeSIsInNhdmVOYW1lZFF1ZXJ5IiwicXVlcnkiLCJidW5kbGVkUXVlcnkiLCJfX1BSSVZBVEVfTWVtb3J5RG9jdW1lbnRPdmVybGF5Q2FjaGUiLCJvdmVybGF5cyIsImNyIiwiaHQiLCJyZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQiLCJfX1BSSVZBVEVfUmVmZXJlbmNlU2V0IiwibHIiLCJfX1BSSVZBVEVfRG9jUmVmZXJlbmNlIiwiaHIiLCJQciIsIklyIiwiYWRkUmVmZXJlbmNlIiwiVHIiLCJyZW1vdmVSZWZlcmVuY2UiLCJFciIsImRyIiwiQXIiLCJSciIsIlZyIiwiY29udGFpbnNLZXkiLCJtciIsIl9fUFJJVkFURV9NZW1vcnlNdXRhdGlvblF1ZXVlIiwicmVmZXJlbmNlRGVsZWdhdGUiLCJnciIsInByIiwiY2hlY2tFbXB0eSIsImFkZE11dGF0aW9uQmF0Y2giLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwieXIiLCJnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCIsIndyIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsImdldEFsbE11dGF0aW9uQmF0Y2hlcyIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5IiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJTciIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwicmVtb3ZlTXV0YXRpb25CYXRjaCIsImJyIiwibWFya1BvdGVudGlhbGx5T3JwaGFuZWQiLCJDbiIsInBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrIiwiX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGVJbXBsIiwiRHIiLCJkb2NzIiwic2V0SW5kZXhNYW5hZ2VyIiwidnIiLCJuZXdDaGFuZ2VCdWZmZXIiLCJfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIiLCJnZXRTaXplIiwic3IiLCJfX1BSSVZBVEVfTWVtb3J5VGFyZ2V0Q2FjaGUiLCJwZXJzaXN0ZW5jZSIsIkNyIiwibGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImhpZ2hlc3RUYXJnZXRJZCIsIkZyIiwiTXIiLCJ0YXJnZXRDb3VudCIsIk9yIiwiZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJMbiIsImFkZFRhcmdldERhdGEiLCJ1cGRhdGVUYXJnZXREYXRhIiwicmVtb3ZlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldHMiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsImdldFRhcmdldENvdW50IiwiZ2V0VGFyZ2V0RGF0YSIsImFkZE1hdGNoaW5nS2V5cyIsInJlbW92ZU1hdGNoaW5nS2V5cyIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlIiwiTnIiLCJCciIsIkxyIiwia3IiLCJxciIsIlFyIiwic3RhcnRlZCIsInNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyIiwic2V0TmV0d29ya0VuYWJsZWQiLCJnZXRJbmRleE1hbmFnZXIiLCJnZXREb2N1bWVudE92ZXJsYXlDYWNoZSIsImdldE11dGF0aW9uUXVldWUiLCJnZXRUYXJnZXRDYWNoZSIsImdldFJlbW90ZURvY3VtZW50Q2FjaGUiLCJnZXRCdW5kbGVDYWNoZSIsInJ1blRyYW5zYWN0aW9uIiwiX19QUklWQVRFX01lbW9yeVRyYW5zYWN0aW9uIiwiS3IiLCIkciIsIlVyIiwiY3VycmVudFNlcXVlbmNlTnVtYmVyIiwiX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUiLCJXciIsIkdyIiwienIiLCJqciIsIkhyIiwidXBkYXRlTGltYm9Eb2N1bWVudCIsIl9fUFJJVkFURV9Mb2NhbFZpZXdDaGFuZ2VzIiwiZnJvbUNhY2hlIiwiTGkiLCJraSIsInFpIiwiZG9jQ2hhbmdlcyIsImRvYyIsIl9fUFJJVkFURV9RdWVyeUVuZ2luZSIsIlFpIiwiS2kiLCIkaSIsIlVpIiwiV2kiLCJHaSIsInppIiwiamkiLCJfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUiLCJfX1BSSVZBVEVfTG9jYWxTdG9yZUltcGwiLCJIaSIsIkppIiwiWWkiLCJaaSIsIlhpIiwiZXMiLCJsb2NhbERvY3VtZW50cyIsImNvbGxlY3RHYXJiYWdlIiwiY29sbGVjdCIsIl9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZSIsInRzIiwicmVtb3ZlZEJhdGNoSWRzIiwiYWRkZWRCYXRjaElkcyIsIl9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsIl9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldCIsIl9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5IiwiX19QUklWQVRFX3NldE1heFJlYWRUaW1lIiwiX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwIiwic3MiLCJfX1BSSVZBVEVfTG9jYWxDbGllbnRTdGF0ZSIsImFjdGl2ZVRhcmdldElkcyIsImhzIiwiUHMiLCJscyIsInVwZGF0ZVRpbWVNcyIsIl9fUFJJVkFURV9NZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSIsIkhzIiwiSnMiLCJvbmxpbmVTdGF0ZUhhbmRsZXIiLCJhZGRQZW5kaW5nTXV0YXRpb24iLCJ1cGRhdGVNdXRhdGlvblN0YXRlIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsInVwZGF0ZVF1ZXJ5U3RhdGUiLCJyZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0IiwiaXNMb2NhbFF1ZXJ5VGFyZ2V0IiwiY2xlYXJRdWVyeVN0YXRlIiwiZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzIiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImhhbmRsZVVzZXJDaGFuZ2UiLCJzZXRPbmxpbmVTdGF0ZSIsIm5vdGlmeUJ1bmRsZUxvYWRlZCIsIl9fUFJJVkFURV9Ob29wQ29ubmVjdGl2aXR5TW9uaXRvciIsIllzIiwiX19QUklWQVRFX0Jyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yIiwiWnMiLCJYcyIsImVvIiwibm8iLCJybyIsImlvIiwiX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCIsIkJhdGNoR2V0RG9jdW1lbnRzIiwiQ29tbWl0IiwiUnVuUXVlcnkiLCJSdW5BZ2dyZWdhdGlvblF1ZXJ5IiwiX19QUklWQVRFX1N0cmVhbUJyaWRnZSIsInNvIiwib28iLCJfbyIsImFvIiwidW8iLCJjbyIsIm9uTWVzc2FnZSIsImxvIiwiaG8iLCJQbyIsIklvIiwiX19QUklWQVRFX1dlYkNoYW5uZWxDb25uZWN0aW9uIiwiZGF0YWJhc2VJbmZvIiwiVG8iLCJFbyIsIkFvIiwiUm8iLCJWbyIsIm1vIiwiZm8iLCJwbyIsInlvIiwid28iLCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXMiLCJ0aW1lb3V0U2Vjb25kcyIsIl9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbiIsIl9fUFJJVkFURV9uZXdTZXJpYWxpemVyIiwiX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZiIsImlpIiwidGltZXJJZCIsIlNvIiwiYm8iLCJEbyIsInZvIiwiQ28iLCJGbyIsIk1vIiwieG8iLCJPbyIsImVucXVldWVBZnRlckRlbGF5IiwiTm8iLCJza2lwRGVsYXkiLCJfX1BSSVZBVEVfUGVyc2lzdGVudFN0cmVhbSIsIkJvIiwiTG8iLCJjb25uZWN0aW9uIiwiYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIiLCJhcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIiLCJrbyIsInFvIiwiUW8iLCJLbyIsIiRvIiwiVW8iLCJXbyIsInN0b3AiLCJHbyIsInpvIiwiam8iLCJIbyIsIkpvIiwiWW8iLCJabyIsIlhvIiwiZV8iLCJ0XyIsIm5fIiwiZW5xdWV1ZUFuZEZvcmdldCIsIl9fUFJJVkFURV9QZXJzaXN0ZW50TGlzdGVuU3RyZWFtIiwidGFyZ2V0Q2hhbmdlIiwidGFyZ2V0Q2hhbmdlVHlwZSIsImRvY3VtZW50Q2hhbmdlIiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsIl9fUFJJVkFURV9mcm9tV2F0Y2hDaGFuZ2UiLCJyXyIsImlfIiwiYWRkVGFyZ2V0IiwiX19QUklWQVRFX3RvQnl0ZXMiLCJfX1BSSVZBVEVfdG9MaXN0ZW5SZXF1ZXN0TGFiZWxzIiwibGFiZWxzIiwic18iLCJfX1BSSVZBVEVfRGF0YXN0b3JlSW1wbCIsImF1dGhDcmVkZW50aWFscyIsImFwcENoZWNrQ3JlZGVudGlhbHMiLCJoXyIsIlBfIiwidGVybWluYXRlIiwiX19QUklWQVRFX09ubGluZVN0YXRlVHJhY2tlciIsImFzeW5jUXVldWUiLCJUXyIsIkVfIiwiZF8iLCJBXyIsIlJfIiwiVl8iLCJtXyIsImZfIiwiX19QUklWQVRFX1JlbW90ZVN0b3JlSW1wbCIsImxvY2FsU3RvcmUiLCJkYXRhc3RvcmUiLCJyZW1vdGVTeW5jZXIiLCJnXyIsInBfIiwieV8iLCJ3XyIsIlNfIiwiX19QUklWQVRFX2NhblVzZU5ldHdvcmsiLCJfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCIsImJfIiwiX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbCIsIl9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbiIsIl9fUFJJVkFURV9zaG91bGRTdGFydFdhdGNoU3RyZWFtIiwiX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0iLCJfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0iLCJfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdCIsIl9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuIiwiX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdCIsIkRfIiwiX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlIiwiX19QUklWQVRFX29uV2F0Y2hTdHJlYW1PcGVuIiwiX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DbG9zZSIsIl9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2hhbmdlIiwicmVqZWN0TGlzdGVuIiwiX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeSIsImFwcGx5UmVtb3RlRXZlbnQiLCJfX1BSSVZBVEVfcmVtb3RlU3RvcmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlIiwidmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcyIsImhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJ2XyIsIkRlbGF5ZWRPcGVyYXRpb24iLCJ0YXJnZXRUaW1lTXMiLCJyZW1vdmFsQ2FsbGJhY2siLCJjcmVhdGVBbmRTY2hlZHVsZSIsInRpbWVySGFuZGxlIiwiaGFuZGxlRGVsYXlFbGFwc2VkIiwiX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUiLCJEb2N1bWVudFNldCIsImtleWVkTWFwIiwic29ydGVkU2V0IiwiZW1wdHlTZXQiLCJfX1BSSVZBVEVfRG9jdW1lbnRDaGFuZ2VTZXQiLCJGXyIsInRyYWNrIiwiTV8iLCJWaWV3U25hcHNob3QiLCJvbGREb2NzIiwibXV0YXRlZEtleXMiLCJzeW5jU3RhdGVDaGFuZ2VkIiwiZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMiLCJoYXNDYWNoZWRSZXN1bHRzIiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcnNJbmZvIiwieF8iLCJsaXN0ZW5lcnMiLCJfX1BSSVZBVEVfRXZlbnRNYW5hZ2VySW1wbCIsInF1ZXJpZXMiLCJvbmxpbmVTdGF0ZSIsIk9fIiwiX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hDaGFuZ2UiLCJCXyIsIl9fUFJJVkFURV9yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50IiwiX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hFcnJvciIsIm9uRXJyb3IiLCJfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lciIsIkxfIiwia18iLCJxXyIsImluY2x1ZGVNZXRhZGF0YUNoYW5nZXMiLCJRXyIsIktfIiwiVV8iLCJOXyIsIldfIiwiX19QUklWQVRFX0FkZGVkTGltYm9Eb2N1bWVudCIsIl9fUFJJVkFURV9SZW1vdmVkTGltYm9Eb2N1bWVudCIsIl9fUFJJVkFURV9WaWV3IiwiWF8iLCJvcmRlciIsInNuYXBzaG90IiwiX19QUklWQVRFX1F1ZXJ5VmlldyIsInZpZXciLCJMaW1ib1Jlc29sdXRpb24iLCJfX1BSSVZBVEVfU3luY0VuZ2luZUltcGwiLCJyZW1vdGVTdG9yZSIsImV2ZW50TWFuYWdlciIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJpc1ByaW1hcnlDbGllbnQiLCJfX1BSSVZBVEVfc3luY0VuZ2luZUxpc3RlbiIsIl9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlSZW1vdGVFdmVudCIsIl9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsIl9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0TGlzdGVuIiwiX19QUklWQVRFX2Vuc3VyZVdhdGNoQ2FsbGJhY2tzIiwiX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldCIsIl9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zIiwiX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90IiwiX19QUklWQVRFX3N5bmNFbmdpbmVVbmxpc3RlbiIsIl9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0IiwidHJhY2tSZW1vdmFscyIsIm5zIiwicnMiLCJfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsIl9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlSZW1vdGVFdmVudFRvTG9jYWxDYWNoZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSIsIl9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zIiwiX19QUklWQVRFX3JlbW92ZUxpbWJvVGFyZ2V0IiwiX19QUklWQVRFX3RyYWNrTGltYm9DaGFuZ2UiLCJfX1BSSVZBVEVfc3luY0VuZ2luZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIiLCJzeW5jaHJvbml6ZVRhYnMiLCJjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSIsImNyZWF0ZVBlcnNpc3RlbmNlIiwiY3JlYXRlTG9jYWxTdG9yZSIsImdjU2NoZWR1bGVyIiwiY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIiLCJpbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIiLCJjcmVhdGVJbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIiLCJfX1BSSVZBVEVfbmV3TG9jYWxTdG9yZSIsImluaXRpYWxVc2VyIiwiT25saW5lQ29tcG9uZW50UHJvdmlkZXIiLCJjcmVhdGVEYXRhc3RvcmUiLCJjcmVhdGVSZW1vdGVTdG9yZSIsImNyZWF0ZUV2ZW50TWFuYWdlciIsInN5bmNFbmdpbmUiLCJjcmVhdGVTeW5jRW5naW5lIiwiX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUiLCJfX1BSSVZBVEVfQXN5bmNPYnNlcnZlciIsIm9ic2VydmVyIiwibXV0ZWQiLCJGaXJlc3RvcmVDbGllbnQiLCJjbGllbnRJZCIsImF1dGhDcmVkZW50aWFsTGlzdGVuZXIiLCJhcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciIsImdldENvbmZpZ3VyYXRpb24iLCJzZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIiLCJzZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIiLCJ2ZXJpZnlOb3RUZXJtaW5hdGVkIiwiaXNTaHV0dGluZ0Rvd24iLCJlbnRlclJlc3RyaWN0ZWRNb2RlIiwiZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQiLCJfb25saW5lQ29tcG9uZW50cyIsIl9vZmZsaW5lQ29tcG9uZW50cyIsIl9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIiLCJfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIiLCJfdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciIsIl9vZmZsaW5lIiwiX19QUklWQVRFX2NhbkZhbGxiYWNrRnJvbUluZGV4ZWREYkVycm9yIiwiX19QUklWQVRFX2Vuc3VyZU9mZmxpbmVDb21wb25lbnRzIiwiX19QUklWQVRFX2dldEV2ZW50TWFuYWdlciIsIl9vbmxpbmUiLCJfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyIsIm9uTGlzdGVuIiwib25Vbmxpc3RlbiIsIl9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNWaWFTbmFwc2hvdExpc3RlbmVyIiwiX19QUklWQVRFX2V2ZW50TWFuYWdlclVubGlzdGVuIiwic291cmNlIiwiX19QUklWQVRFX2V2ZW50TWFuYWdlckxpc3RlbiIsIl9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyIsIl9fUFJJVkFURV92YWxpZGF0ZUNvbGxlY3Rpb25QYXRoIiwiX19QUklWQVRFX2Nhc3QiLCJfZGVsZWdhdGUiLCJfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbiIsIkZpcmVzdG9yZVNldHRpbmdzSW1wbCIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJsb2NhbENhY2hlIiwiY2FjaGVTaXplQnl0ZXMiLCJfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMiLCJGaXJlc3RvcmUkMSIsIl9hdXRoQ3JlZGVudGlhbHMiLCJfYXBwQ2hlY2tDcmVkZW50aWFscyIsIl9kYXRhYmFzZUlkIiwiX2FwcCIsIl9wZXJzaXN0ZW5jZUtleSIsIl9zZXR0aW5ncyIsIl9zZXR0aW5nc0Zyb3plbiIsIl9pbml0aWFsaXplZCIsIl90ZXJtaW5hdGVkIiwiX3Rlcm1pbmF0ZVRhc2siLCJfc2V0U2V0dGluZ3MiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsImF1dGhUb2tlbkZhY3RvcnkiLCJjbGllbnQiLCJfZ2V0U2V0dGluZ3MiLCJfZnJlZXplU2V0dGluZ3MiLCJfdGVybWluYXRlIiwic2V0dGluZ3MiLCJRdWVyeSIsImNvbnZlcnRlciIsIl9xdWVyeSIsImZpcmVzdG9yZSIsIndpdGhDb252ZXJ0ZXIiLCJEb2N1bWVudFJlZmVyZW5jZSIsIl9rZXkiLCJfcGF0aCIsIkNvbGxlY3Rpb25SZWZlcmVuY2UiLCJfX1BSSVZBVEVfQXN5bmNRdWV1ZUltcGwiLCJ2aXNpYmlsaXR5U3RhdGUiLCJlbnF1ZXVlIiwiZXUiLCJ0dSIsIm51Iiwic3RhY2siLCJydSIsIml1Iiwic3UiLCJvdSIsIl91IiwiRmlyZXN0b3JlIiwiX3F1ZXVlIiwiX2ZpcmVzdG9yZUNsaWVudCIsIl9fUFJJVkFURV9jb25maWd1cmVGaXJlc3RvcmUiLCJfb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX29ubGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX29mZmxpbmVLaW5kIiwia2luZCIsIkJ5dGVzIiwiX2J5dGVTdHJpbmciLCJGaWVsZFBhdGgiLCJfaW50ZXJuYWxQYXRoIiwiR2VvUG9pbnQiLCJfbGF0IiwiX2xvbmciLCJfX1BSSVZBVEVfY3JlYXRlRXJyb3IiLCJEb2N1bWVudFNuYXBzaG90JDEiLCJfZmlyZXN0b3JlIiwiX3VzZXJEYXRhV3JpdGVyIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsInJlZiIsIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxIiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsIl9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQiLCJzZWFyY2giLCJfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyIsIkFic3RyYWN0VXNlckRhdGFXcml0ZXIiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0IiwiY29udmVydE9iamVjdE1hcCIsImNvbnZlcnREb2N1bWVudEtleSIsIlNuYXBzaG90TWV0YWRhdGEiLCJEb2N1bWVudFNuYXBzaG90IiwiX2ZpcmVzdG9yZUltcGwiLCJtZXRhZGF0YSIsIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCIsInNlcnZlclRpbWVzdGFtcHMiLCJRdWVyeVNuYXBzaG90IiwiX3NuYXBzaG90IiwiX2NhY2hlZENoYW5nZXMiLCJfY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMiLCJvbGRJbmRleCIsIm5ld0luZGV4IiwiX19QUklWQVRFX3Jlc3VsdENoYW5nZVR5cGUiLCJfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIiLCJoZWFydGJlYXRDb250cm9sbGVyIiwiZ2V0QXBwIiwicHJvZHVjdE5hbWUiLCJfYiIsImVtdWxhdG9ySG9zdHMiLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0Iiwic2VwYXJhdG9ySW5kZXgiLCJsYXN0SW5kZXhPZiIsImdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCIsIm1vY2tVc2VyVG9rZW4iLCJwcm9qZWN0IiwiaWF0Iiwic3ViIiwidXNlcl9pZCIsInBheWxvYWQiLCJpc3MiLCJhdWQiLCJleHAiLCJhdXRoX3RpbWUiLCJmaXJlYmFzZSIsInNpZ25faW5fcHJvdmlkZXIiLCJpZGVudGl0aWVzIiwiYWxnIiwiY3JlYXRlTW9ja1VzZXJUb2tlbiIsImNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciIsImdldEZpcmVzdG9yZSIsImFwaUtleSIsImF1dGhEb21haW4iLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJtZWFzdXJlbWVudElkIiwicnNzRmVlZGVyIiwiZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCIsIl9fUFJJVkFURV92YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0IiwiZ2V0RG9jcyIsIl9fUFJJVkFURV92YWxpZGF0ZU5vbkVtcHR5QXJndW1lbnQiLCJjb2xsZWN0aW9uIiwicXVlcnlTbmFwc2hvdCIsInRpdGxlcyIsInRpdGxlIiwidXJsIiwianNvbiIsInBhcnNlZERhdGEiLCJpdGVtcyIsIml0ZW0iLCJsaW5rIiwiZGVzY3JpcHRpb24iLCJwdWJsaXNoZWQiLCJwYXJzZURhdGEiXSwic291cmNlUm9vdCI6IiJ9