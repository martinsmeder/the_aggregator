/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,h=a?t[e+2]:0,c=i>>2,u=(3&i)<<4|o>>4;let l=(15&o)<<2|h>>6,d=63&h;a||(d=64,s||(l=64)),r.push(n[c],n[u],n[l],n[d])}return r.join("")},encodeString(t,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(t):this.encodeByteArray(e(t),n)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const h=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==o||null==a||null==h)throw new r;const c=s<<2|o>>4;if(i.push(c),64!==a){const t=o<<4&240|a>>2;if(i.push(t),64!==h){const t=a<<6&192|h;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i=function(t){return function(t){const r=e(t);return n.encodeByteArray(r,!0)}(t).replace(/\./g,"")},s=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const t="MISSING_ENV_VAR".__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return n.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},o=()=>{var t;return null===(t=s())||void 0===t?void 0:t.config};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}class h extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c.prototype.create)}}class c{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(u,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new h(r,o,n)}}const u=/\{\$([^}]+)}/g;function l(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(d(n)&&d(s)){if(!l(n,s))return!1}else if(n!==s)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function d(t){return null!==t&&"object"==typeof t}function f(t){return t&&t._delegate?t._delegate:t}class g{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const p="[DEFAULT]";class m{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new a;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:p})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=p){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=p){return this.instances.has(t)}getOptions(t=p){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===p?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=p){return this.component?this.component.multipleInstances?t:p:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class y{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new m(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const v=[];var w,_;(_=w||(w={}))[_.DEBUG=0]="DEBUG",_[_.VERBOSE=1]="VERBOSE",_[_.INFO=2]="INFO",_[_.WARN=3]="WARN",_[_.ERROR=4]="ERROR",_[_.SILENT=5]="SILENT";const E={debug:w.DEBUG,verbose:w.VERBOSE,info:w.INFO,warn:w.WARN,error:w.ERROR,silent:w.SILENT},b=w.INFO,T={[w.DEBUG]:"log",[w.VERBOSE]:"log",[w.INFO]:"info",[w.WARN]:"warn",[w.ERROR]:"error"},I=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=T[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class S{constructor(t){this.name=t,this._logLevel=b,this._logHandler=I,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in w))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?E[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,w.DEBUG,...t),this._logHandler(this,w.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,w.VERBOSE,...t),this._logHandler(this,w.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,w.INFO,...t),this._logHandler(this,w.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,w.WARN,...t),this._logHandler(this,w.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,w.ERROR,...t),this._logHandler(this,w.ERROR,...t)}}const C=(t,e)=>e.some((e=>t instanceof e));let A,D;const N=new WeakMap,k=new WeakMap,R=new WeakMap,L=new WeakMap,x=new WeakMap;let O={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return k.get(t);if("objectStoreNames"===e)return t.objectStoreNames||R.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return P(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function M(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(D||(D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(V(this),t),P(N.get(this))}:function(...t){return P(e.apply(V(this),t))}:function(t,...n){const r=e.call(V(this),t,...n);return R.set(r,t.sort?t.sort():[t]),P(r)}:(t instanceof IDBTransaction&&function(t){if(k.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));k.set(t,e)}(t),C(t,A||(A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,O):t);var e}function P(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(P(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&N.set(e,t)})).catch((()=>{})),x.set(e,t),e}(t);if(L.has(t))return L.get(t);const e=M(t);return e!==t&&(L.set(t,e),x.set(e,t)),e}const V=t=>x.get(t),F=["get","getKey","getAll","getAllKeys","count"],U=["put","add","delete","clear"],B=new Map;function q(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(B.get(e))return B.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=U.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!F.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return B.set(e,s),s}var j;j=O,O={...j,get:(t,e,n)=>q(t,e)||j.get(t,e,n),has:(t,e)=>!!q(t,e)||j.has(t,e)};class ${constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const z="@firebase/app",K="0.9.19",G=new S("@firebase/app"),H="[DEFAULT]",Q={[z]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},W=new Map,Y=new Map;function X(t,e){try{t.container.addComponent(e)}catch(n){G.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function J(t){const e=t.name;if(Y.has(e))return G.debug(`There were multiple attempts to register component ${e}.`),!1;Y.set(e,t);for(const e of W.values())X(e,t);return!0}const Z=new c("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class tt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new g("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Z.create("app-deleted",{appName:this._name})}}function et(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:H,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Z.create("bad-app-name",{appName:String(i)});if(n||(n=o()),!n)throw Z.create("no-options");const s=W.get(i);if(s){if(l(n,s.options)&&l(r,s.config))return s;throw Z.create("duplicate-app",{appName:i})}const a=new y(i);for(const t of Y.values())a.addComponent(t);const h=new tt(n,r,a);return W.set(i,h),h}function nt(t,e,n){var r;let i=null!==(r=Q[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void G.warn(t.join(" "))}J(new g(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const rt="firebase-heartbeat-database",it=1,st="firebase-heartbeat-store";let ot=null;function at(){return ot||(ot=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=P(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(P(o.result),t.oldVersion,t.newVersion,P(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(rt,it,{upgrade:(t,e)=>{0===e&&t.createObjectStore(st)}}).catch((t=>{throw Z.create("idb-open",{originalErrorMessage:t.message})}))),ot}async function ht(t,e){try{const n=(await at()).transaction(st,"readwrite"),r=n.objectStore(st);await r.put(e,ct(t)),await n.done}catch(t){if(t instanceof h)G.warn(t.message);else{const e=Z.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});G.warn(e.message)}}}function ct(t){return`${t.name}!${t.options.appId}`}class ut{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new dt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=lt();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=lt(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),ft(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ft(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=i(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function lt(){return(new Date).toISOString().substring(0,10)}class dt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await at();return await e.transaction(st).objectStore(st).get(ct(t))}catch(t){if(t instanceof h)G.warn(t.message);else{const e=Z.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});G.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function ft(t){return i(JSON.stringify({version:2,heartbeats:t})).length}J(new g("platform-logger",(t=>new $(t)),"PRIVATE")),J(new g("heartbeat",(t=>new ut(t)),"PRIVATE")),nt(z,K,""),nt(z,K,"esm2017"),nt("fire-js","");var gt,pt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},mt={},yt=yt||{},vt=pt||self;function wt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function _t(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Et="closure_uid_"+(1e9*Math.random()>>>0),bt=0;function Tt(t,e,n){return t.call.apply(t.bind,arguments)}function It(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function St(t,e,n){return(St=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Tt:It).apply(null,arguments)}function Ct(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function At(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function Dt(){this.s=this.s,this.o=this.o}Dt.prototype.s=!1,Dt.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Et)&&t[Et]||(t[Et]=++bt))},Dt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function kt(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Rt(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(wt(n)){const e=t.length||0,r=n.length||0;t.length=e+r;for(let i=0;i<r;i++)t[e+i]=n[i]}else t.push(n)}}function Lt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Lt.prototype.h=function(){this.defaultPrevented=!0};var xt=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{vt.addEventListener("test",(()=>{}),e),vt.removeEventListener("test",(()=>{}),e)}catch(t){}return t}();function Ot(t){return/^[\s\xa0]*$/.test(t)}function Mt(){var t=vt.navigator;return t&&(t=t.userAgent)?t:""}function Pt(t){return-1!=Mt().indexOf(t)}function Vt(t){return Vt[" "](t),t}Vt[" "]=function(){};var Ft,Ut,Bt,qt=Pt("Opera"),jt=Pt("Trident")||Pt("MSIE"),$t=Pt("Edge"),zt=$t||jt,Kt=Pt("Gecko")&&!(-1!=Mt().toLowerCase().indexOf("webkit")&&!Pt("Edge"))&&!(Pt("Trident")||Pt("MSIE"))&&!Pt("Edge"),Gt=-1!=Mt().toLowerCase().indexOf("webkit")&&!Pt("Edge");function Ht(){var t=vt.document;return t?t.documentMode:void 0}t:{var Qt="",Wt=(Ut=Mt(),Kt?/rv:([^\);]+)(\)|;)/.exec(Ut):$t?/Edge\/([\d\.]+)/.exec(Ut):jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ut):Gt?/WebKit\/(\S+)/.exec(Ut):qt?/(?:Version)[ \/]?(\S+)/.exec(Ut):void 0);if(Wt&&(Qt=Wt?Wt[1]:""),jt){var Yt=Ht();if(null!=Yt&&Yt>parseFloat(Qt)){Ft=String(Yt);break t}}Ft=Qt}vt.document&&jt?Bt=Ht()||parseInt(Ft,10)||void 0:Bt=void 0;var Xt=Bt;function Jt(t,e){if(Lt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Kt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Zt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Jt.$.h.call(this)}}At(Jt,Lt);var Zt={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),ee=0;function ne(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++ee,this.fa=this.ia=!1}function re(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ie(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function se(t){const e={};for(const n in t)e[n]=t[n];return e}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<oe.length;e++)n=oe[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function he(t){this.src=t,this.g={},this.h=0}function ce(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Nt(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(re(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ue(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}he.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=ue(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new ne(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var le="closure_lm_"+(1e6*Math.random()|0),de={};function fe(t,e,n,r,i){if(r&&r.once)return pe(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)fe(t,e[s],n,r,i);return null}return n=be(n),t&&t[te]?t.O(e,n,_t(r)?!!r.capture:!!r,i):ge(t,e,n,!1,r,i)}function ge(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=_t(i)?!!i.capture:!!i,a=_e(t);if(a||(t[le]=a=new he(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){const t=we;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xt||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ve(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function pe(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)pe(t,e[s],n,r,i);return null}return n=be(n),t&&t[te]?t.P(e,n,_t(r)?!!r.capture:!!r,i):ge(t,e,n,!0,r,i)}function me(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)me(t,e[s],n,r,i);else r=_t(r)?!!r.capture:!!r,n=be(n),t&&t[te]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=ue(s=t.g[e],n,r,i))&&(re(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=_e(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ue(e,n,r,i)),(n=-1<t?e[t]:null)&&ye(n))}function ye(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[te])ce(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ve(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_e(e))?(ce(n,t),0==n.h&&(n.src=null,e[le]=null)):re(t)}}}function ve(t){return t in de?de[t]:de[t]="on"+t}function we(t,e){if(t.fa)t=!0;else{e=new Jt(e,this);var n=t.listener,r=t.la||t.src;t.ia&&ye(t),t=n.call(r,e)}return t}function _e(t){return(t=t[le])instanceof he?t:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(t){return"function"==typeof t?t:(t[Ee]||(t[Ee]=function(e){return t.handleEvent(e)}),t[Ee])}function Te(){Dt.call(this),this.i=new he(this),this.S=this,this.J=null}function Ie(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Lt(e,t);else if(e instanceof Lt)e.target=e.target||t;else{var i=e;ae(e=new Lt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Se(o,r,!0,e)&&i}if(i=Se(o=e.g=t,r,!0,e)&&i,i=Se(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Se(o=e.g=n[s],r,!1,e)&&i}function Se(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,h=o.la||o.src;o.ia&&ce(t.i,o),i=!1!==a.call(h,r)&&i}}return i&&!r.defaultPrevented}At(Te,Dt),Te.prototype[te]=!0,Te.prototype.removeEventListener=function(t,e,n,r){me(this,t,e,n,r)},Te.prototype.N=function(){if(Te.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)re(n[r]);delete e.g[t],e.h--}}this.J=null},Te.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Te.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ce=vt.JSON.stringify;function Ae(){var t=Oe;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var De=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Ne),(t=>t.reset()));class Ne{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ke(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Re(t){vt.setTimeout((()=>{throw t}),0)}let Le,xe=!1,Oe=new class{constructor(){this.h=this.g=null}add(t,e){const n=De.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Me=()=>{const t=vt.Promise.resolve(void 0);Le=()=>{t.then(Pe)}};var Pe=()=>{for(var t;t=Ae();){try{t.h.call(t.g)}catch(t){Re(t)}var e=De;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}xe=!1};function Ve(t,e){Te.call(this),this.h=t||1,this.g=e||vt,this.j=St(this.qb,this),this.l=Date.now()}function Fe(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Ue(t,e,n){if("function"==typeof t)n&&(t=St(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=St(t.handleEvent,t)}return 2147483647<Number(e)?-1:vt.setTimeout(t,e||0)}function Be(t){t.g=Ue((()=>{t.g=null,t.i&&(t.i=!1,Be(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}At(Ve,Te),(gt=Ve.prototype).ga=!1,gt.T=null,gt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ie(this,"tick"),this.ga&&(Fe(this),this.start()))}},gt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.N=function(){Ve.$.N.call(this),Fe(this),delete this.g};class qe extends Dt{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Be(this)}N(){super.N(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(t){Dt.call(this),this.h=t,this.g={}}At(je,Dt);var $e=[];function ze(t,e,n,r){Array.isArray(n)||(n&&($e[0]=n.toString()),n=$e);for(var i=0;i<n.length;i++){var s=fe(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Ke(t){ie(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ye(t)}),t),t.g={}}function Ge(){this.g=!0}function He(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ce(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}je.prototype.N=function(){je.$.N.call(this),Ke(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ge.prototype.Ea=function(){this.g=!1},Ge.prototype.info=function(){};var Qe={},We=null;function Ye(){return We=We||new Te}function Xe(t){Lt.call(this,Qe.Ta,t)}function Je(t){const e=Ye();Ie(e,new Xe(e))}function Ze(t,e){Lt.call(this,Qe.STAT_EVENT,t),this.stat=e}function tn(t){const e=Ye();Ie(e,new Ze(e,t))}function en(t,e){Lt.call(this,Qe.Ua,t),this.size=e}function nn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return vt.setTimeout((function(){t()}),e)}Qe.Ta="serverreachability",At(Xe,Lt),Qe.STAT_EVENT="statevent",At(Ze,Lt),Qe.Ua="timingevent",At(en,Lt);var rn={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},sn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function on(){}function an(t){return t.h||(t.h=t.i())}function hn(){}on.prototype.h=null;var cn,un={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ln(){Lt.call(this,"d")}function dn(){Lt.call(this,"c")}function fn(){}function gn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new je(this),this.P=mn,t=zt?125:void 0,this.V=new Ve(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}At(ln,Lt),At(dn,Lt),At(fn,on),fn.prototype.g=function(){return new XMLHttpRequest},fn.prototype.i=function(){return{}},cn=new fn;var mn=45e3,yn={},vn={};function wn(t,e,n){t.L=1,t.v=Fn(xn(e)),t.s=n,t.S=!0,_n(t,null)}function _n(t,e){t.G=Date.now(),In(t),t.A=xn(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Xn(n.i,"t",r),t.C=0,n=t.l.J,t.h=new pn,t.g=Yr(t.l,n?e:null,!t.s),0<t.O&&(t.M=new qe(St(t.Pa,t,t.g),t.O)),ze(t.U,t.g,"readystatechange",t.nb),e=t.I?se(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Je(),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),h=0;h<a.length;h++){var c=a[h].split("=");if(1<c.length){var u=c[0];c=c[1];var l=u.split("_");o=2<=l.length&&"type"==l[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.W,t.s)}function En(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function bn(t,e,n){let r,i=!0;for(;!t.J&&t.C<n.length;){if(r=Tn(t,n),r==vn){4==e&&(t.o=4,tn(14),i=!1),He(t.j,t.m,null,"[Incomplete Response]");break}if(r==yn){t.o=4,tn(15),He(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}He(t.j,t.m,r,null),Nn(t,r)}En(t)&&r!=vn&&r!=yn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,tn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),jr(e),e.M=!0,tn(11))):(He(t.j,t.m,n,"[Invalid Chunked Response]"),Dn(t),An(t))}function Tn(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?vn:(n=Number(e.substring(n,r)),isNaN(n)?yn:(r+=1)+n>e.length?vn:(e=e.slice(r,r+n),t.C=r+n,e))}function In(t){t.Y=Date.now()+t.P,Sn(t,t.P)}function Sn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=nn(St(t.lb,t),e)}function Cn(t){t.B&&(vt.clearTimeout(t.B),t.B=null)}function An(t){0==t.l.H||t.J||Kr(t.l,t)}function Dn(t){Cn(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Fe(t.V),Ke(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Nn(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||rr(n.i,t)))if(!t.K&&rr(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;zr(n),Or(n)}qr(n),tn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=nn(St(n.ib,n),6e3));if(1>=nr(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Hr(n,11)}else if((t.K||n.g==t)&&zr(n),!Ot(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const e=c[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const l=t.g;if(l){const t=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ir(s,s.h),s.h=null))}if(r.F){const t=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.Da=t,Vn(r.I,r.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Wr(r,r.J?r.pa:null,r.Y),o.K){sr(r.i,o);var a=o,h=r.L;h&&a.setTimeout(h),a.B&&(Cn(a),In(a)),r.g=o}else Br(r);0<n.j.length&&Pr(n)}else"stop"!=c[0]&&"close"!=c[0]||Hr(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Hr(n,7):xr(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Je()}catch(t){}}function kn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(wt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(wt(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(wt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(gt=gn.prototype).setTimeout=function(t){this.P=t},gt.nb=function(t){t=t.target;const e=this.M;e&&3==Ar(t)?e.l():this.Pa(t)},gt.Pa=function(t){try{if(t==this.g)t:{const u=Ar(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||zt||this.g&&(this.h.h||this.g.ja()||Dr(this.g)))){this.J||4!=u||7==e||Je(),Cn(this);var n=this.g.da();this.ca=n;e:if(En(this)){var r=Dr(this.g);t="";var i=r.length,s=4==Ar(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Dn(this),An(this);var o="";break e}this.h.i=new vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,h=this.g;if((a=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ot(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,tn(12),Dn(this),An(this);break t}He(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nn(this,n)}this.S?(bn(this,u,o),zt&&this.i&&3==u&&(ze(this.U,this.V,"tick",this.mb),this.V.start())):(He(this.j,this.m,o,null),Nn(this,o)),4==u&&Dn(this),this.i&&!this.J&&(4==u?Kr(this.l,this):(this.i=!1,In(this)))}else(function(t){const e={};t=(t.g&&2<=Ar(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Ot(t[r]))continue;var n=ke(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,tn(12)):(this.o=0,tn(13)),Dn(this),An(this)}}}catch(t){}},gt.mb=function(){if(this.g){var t=Ar(this.g),e=this.g.ja();this.C<e.length&&(Cn(this),bn(this,t,e),this.i&&4!=t&&In(this))}},gt.cancel=function(){this.J=!0,Dn(this)},gt.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.L&&(Je(),tn(17)),Dn(this),this.o=2,An(this)):Sn(this,this.Y-t)};var Rn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ln(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ln){this.h=t.h,On(this,t.j),this.s=t.s,this.g=t.g,Mn(this,t.m),this.l=t.l;var e=t.i,n=new Hn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Pn(this,n),this.o=t.o}else t&&(e=String(t).match(Rn))?(this.h=!1,On(this,e[1]||"",!0),this.s=Un(e[2]||""),this.g=Un(e[3]||"",!0),Mn(this,e[4]),this.l=Un(e[5]||"",!0),Pn(this,e[6]||"",!0),this.o=Un(e[7]||"")):(this.h=!1,this.i=new Hn(null,this.h))}function xn(t){return new Ln(t)}function On(t,e,n){t.j=n?Un(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Mn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Pn(t,e,n){e instanceof Hn?(t.i=e,function(t,e){e&&!t.j&&(Qn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Wn(this,e),Xn(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Bn(e,Kn)),t.i=new Hn(e,t.h))}function Vn(t,e,n){t.i.set(e,n)}function Fn(t){return Vn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Bn(e,jn,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Bn(e,jn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Bn(n,"/"==n.charAt(0)?zn:$n,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Bn(n,Gn)),t.join("")};var jn=/[#\/\?@]/g,$n=/[#\?:]/g,zn=/[#\?]/g,Kn=/[#\?@]/g,Gn=/#/g;function Hn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qn(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Wn(t,e){Qn(t),e=Jn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Yn(t,e){return Qn(t),e=Jn(t,e),t.g.has(e)}function Xn(t,e,n){Wn(t,e),0<n.length&&(t.i=null,t.g.set(Jn(t,e),kt(n)),t.h+=n.length)}function Jn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Zn(t){this.l=t||tr,t=vt.PerformanceNavigationTiming?0<(t=vt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(vt.g&&vt.g.Ka&&vt.g.Ka()&&vt.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=Hn.prototype).add=function(t,e){Qn(this),this.i=null,t=Jn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},gt.forEach=function(t,e){Qn(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},gt.ta=function(){Qn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},gt.Z=function(t){Qn(this);let e=[];if("string"==typeof t)Yn(this,t)&&(e=e.concat(this.g.get(Jn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},gt.set=function(t,e){return Qn(this),this.i=null,Yn(this,t=Jn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},gt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var tr=10;function er(t){return!!t.h||!!t.g&&t.g.size>=t.j}function nr(t){return t.h?1:t.g?t.g.size:0}function rr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ir(t,e){t.g?t.g.add(e):t.h=e}function sr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function or(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return kt(t.i)}Zn.prototype.cancel=function(){if(this.i=or(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ar=class{stringify(t){return vt.JSON.stringify(t,void 0)}parse(t){return vt.JSON.parse(t,void 0)}};function hr(){this.g=new ar}function cr(t,e,n){const r=n||"";try{kn(t,(function(t,n){let i=t;_t(t)&&(i=Ce(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function ur(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function lr(t){this.l=t.ec||null,this.j=t.ob||!1}function dr(t,e){Te.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=fr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}At(lr,on),lr.prototype.g=function(){return new dr(this.l,this.j)},lr.prototype.i=function(t){return function(){return t}}({}),At(dr,Te);var fr=0;function gr(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function pr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,mr(t)}function mr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(gt=dr.prototype).open=function(t,e){if(this.readyState!=fr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,mr(this)},gt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||vt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pr(this)),this.readyState=fr},gt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==vt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gr(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},gt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?pr(this):mr(this),3==this.readyState&&gr(this)}},gt.Za=function(t){this.g&&(this.response=this.responseText=t,pr(this))},gt.Ya=function(t){this.g&&(this.response=t,pr(this))},gt.ka=function(){this.g&&pr(this)},gt.setRequestHeader=function(t,e){this.v.append(t,e)},gt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(dr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var yr=vt.JSON.parse;function vr(t){Te.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wr,this.L=this.M=!1}At(vr,Te);var wr="",_r=/^https?$/i,Er=["POST","PUT"];function br(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Tr(t),Sr(t)}function Tr(t){t.F||(t.F=!0,Ie(t,"complete"),Ie(t,"error"))}function Ir(t){if(t.h&&void 0!==yt&&(!t.C[1]||4!=Ar(t)||2!=t.da()))if(t.v&&4==Ar(t))Ue(t.La,0,t);else if(Ie(t,"readystatechange"),4==Ar(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(Rn)[1]||null;!i&&vt.self&&vt.self.location&&(i=vt.self.location.protocol.slice(0,-1)),r=!_r.test(i?i.toLowerCase():"")}n=r}if(n)Ie(t,"complete"),Ie(t,"success");else{t.m=6;try{var s=2<Ar(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",Tr(t)}}finally{Sr(t)}}}function Sr(t,e){if(t.g){Cr(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ie(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Cr(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(vt.clearTimeout(t.A),t.A=null)}function Ar(t){return t.g?t.g.readyState:0}function Dr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case wr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Nr(t){let e="";return ie(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function kr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Nr(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Vn(t,e,n))}function Rr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Lr(t){this.Ga=0,this.j=[],this.l=new Ge,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rr("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rr("baseRetryDelayMs",5e3,t),this.hb=Rr("retryDelaySeedMs",1e4,t),this.eb=Rr("forwardChannelMaxRetries",2,t),this.xa=Rr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Zn(t&&t.concurrentRequestLimit),this.Ja=new hr,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function xr(t){if(Mr(t),3==t.H){var e=t.W++,n=xn(t.I);if(Vn(n,"SID",t.K),Vn(n,"RID",e),Vn(n,"TYPE","terminate"),Fr(t,n),(e=new gn(t,t.l,e)).L=2,e.v=Fn(xn(n)),n=!1,vt.navigator&&vt.navigator.sendBeacon)try{n=vt.navigator.sendBeacon(e.v.toString(),"")}catch(t){}!n&&vt.Image&&((new Image).src=e.v,n=!0),n||(e.g=Yr(e.l,null),e.g.ha(e.v)),e.G=Date.now(),In(e)}Qr(t)}function Or(t){t.g&&(jr(t),t.g.cancel(),t.g=null)}function Mr(t){Or(t),t.u&&(vt.clearTimeout(t.u),t.u=null),zr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&vt.clearTimeout(t.m),t.m=null)}function Pr(t){if(!er(t.i)&&!t.m){t.m=!0;var e=t.Na;Le||Me(),xe||(Le(),xe=!0),Oe.add(e,t),t.C=0}}function Vr(t,e){var n;n=e?e.m:t.W++;const r=xn(t.I);Vn(r,"SID",t.K),Vn(r,"RID",n),Vn(r,"AID",t.V),Fr(t,r),t.o&&t.s&&kr(r,t.o,t.s),n=new gn(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ur(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ir(t.i,n),wn(n,r,e)}function Fr(t,e){t.na&&ie(t.na,(function(t,n){Vn(e,n,t)})),t.h&&kn({},(function(t,n){Vn(e,n,t)}))}function Ur(t,e,n){n=Math.min(t.j.length,n);var r=t.h?St(t.h.Va,t.h,t):null;t:{var i=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=e,0>n)e=Math.max(0,i[o].g-100),s=!1;else try{cr(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,r}function Br(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Le||Me(),xe||(Le(),xe=!0),Oe.add(e,t),t.A=0}}function qr(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=nn(St(t.Ma,t),Gr(t,t.A)),t.A++,0))}function jr(t){null!=t.B&&(vt.clearTimeout(t.B),t.B=null)}function $r(t){t.g=new gn(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=xn(t.wa);Vn(e,"RID","rpc"),Vn(e,"SID",t.K),Vn(e,"AID",t.V),Vn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Vn(e,"TO",t.qa),Vn(e,"TYPE","xmlhttp"),Fr(t,e),t.o&&t.s&&kr(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Fn(xn(e)),n.s=null,n.S=!0,_n(n,t)}function zr(t){null!=t.v&&(vt.clearTimeout(t.v),t.v=null)}function Kr(t,e){var n=null;if(t.g==e){zr(t),jr(t),t.g=null;var r=2}else{if(!rr(t.i,e))return;n=e.F,sr(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Ie(r=Ye(),new en(r,n)),Pr(t)}else Br(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function(t,e){return!(nr(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=nn(St(t.Na,t,e),Gr(t,t.C)),t.C++,0)))}(t,e)||2==r&&qr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Hr(t,5);break;case 4:Hr(t,10);break;case 3:Hr(t,6);break;default:Hr(t,2)}}function Gr(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hr(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=St(t.pb,t);n||(n=new Ln("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||On(n,"https"),Fn(n)),function(t,e){const n=new Ge;if(vt.Image){const r=new Image;r.onload=Ct(ur,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ct(ur,n,r,"TestLoadImage: error",!1,e),r.onabort=Ct(ur,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ct(ur,n,r,"TestLoadImage: timeout",!1,e),vt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else tn(2);t.H=0,t.h&&t.h.za(e),Qr(t),Mr(t)}function Qr(t){if(t.H=0,t.ma=[],t.h){const e=or(t.i);0==e.length&&0==t.j.length||(Rt(t.ma,e),Rt(t.ma,t.j),t.i.i.length=0,kt(t.j),t.j.length=0),t.h.ya()}}function Wr(t,e,n){var r=n instanceof Ln?xn(n):new Ln(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Mn(r,r.m);else{var i=vt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ln(null);r&&On(s,r),e&&(s.g=e),i&&Mn(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Vn(r,n,e),Vn(r,"VER",t.ra),Fr(t,r),r}function Yr(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ha&&!t.va?new vr(new lr({ob:!0})):new vr(t.va)).Oa(t.J),e}function Xr(){}function Jr(){if(jt&&!(10<=Number(Xt)))throw Error("Environmental error: no available transport.")}function Zr(t,e){Te.call(this),this.g=new Lr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ot(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ot(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ni(this)}function ti(t){ln.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ei(){dn.call(this),this.status=1}function ni(t){this.g=t}function ri(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ii(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function si(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(gt=vr.prototype).Oa=function(t){this.M=t},gt.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cn.g(),this.C=this.u?an(this.u):an(cn),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void br(this,t)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),i=vt.FormData&&t instanceof vt.FormData,!(0<=Nt(Er,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Cr(this),0<this.B&&((this.L=function(t){return jt&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=Ue(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){br(this,t)}},gt.ua=function(){void 0!==yt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ie(this,"timeout"),this.abort(8))},gt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ie(this,"complete"),Ie(this,"abort"),Sr(this))},gt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sr(this,!0)),vr.$.N.call(this)},gt.La=function(){this.s||(this.G||this.v||this.l?Ir(this):this.kb())},gt.kb=function(){Ir(this)},gt.isActive=function(){return!!this.g},gt.da=function(){try{return 2<Ar(this)?this.g.status:-1}catch(t){return-1}},gt.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},gt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),yr(e)}},gt.Ia=function(){return this.m},gt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=Lr.prototype).ra=8,gt.H=1,gt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new gn(this,this.l,t);let s=this.s;if(this.U&&(s?(s=se(s),ae(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Ur(this,i,e),Vn(n=xn(this.I),"RID",t),Vn(n,"CVER",22),this.F&&Vn(n,"X-HTTP-Session-Id",this.F),Fr(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Nr(s)))+"&"+e:this.o&&kr(n,this.o,s)),ir(this.i,i),this.bb&&Vn(n,"TYPE","init"),this.P?(Vn(n,"$req",e),Vn(n,"SID","null"),i.aa=!0,wn(i,n,null)):wn(i,n,e),this.H=2}}else 3==this.H&&(t?Vr(this,t):0==this.j.length||er(this.i)||Vr(this))},gt.Ma=function(){if(this.u=null,$r(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=nn(St(this.jb,this),t)}},gt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,tn(10),Or(this),$r(this))},gt.ib=function(){null!=this.v&&(this.v=null,Or(this),qr(this),tn(19))},gt.pb=function(t){t?(this.l.info("Successfully pinged google.com"),tn(2)):(this.l.info("Failed to ping google.com"),tn(1))},gt.isActive=function(){return!!this.h&&this.h.isActive(this)},(gt=Xr.prototype).Ba=function(){},gt.Aa=function(){},gt.za=function(){},gt.ya=function(){},gt.isActive=function(){return!0},gt.Va=function(){},Jr.prototype.g=function(t,e){return new Zr(t,e)},At(Zr,Te),Zr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;tn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Wr(t,null,t.Y),Pr(t)},Zr.prototype.close=function(){xr(this.g)},Zr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Ce(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Pr(e)},Zr.prototype.N=function(){this.g.h=null,delete this.j,xr(this.g),delete this.g,Zr.$.N.call(this)},At(ti,ln),At(ei,dn),At(ni,Xr),ni.prototype.Ba=function(){Ie(this.g,"a")},ni.prototype.Aa=function(t){Ie(this.g,new ti(t))},ni.prototype.za=function(t){Ie(this.g,new ei)},ni.prototype.ya=function(){Ie(this.g,"b")},At(ri,(function(){this.blockSize=-1})),ri.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ri.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)ii(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ii(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ii(this,r),i=0;break}}this.h=i,this.i+=e},ri.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var oi={};function ai(t){return-128<=t&&128>t?function(t,e){var n=oi;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new si([0|t],0>t?-1:0)}(t)}(t):new si([0|t],0>t?-1:0)}function hi(t){if(isNaN(t)||!isFinite(t))return ui;if(0>t)return pi(hi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ci;return new si(e,0)}var ci=4294967296,ui=ai(0),li=ai(1),di=ai(16777216);function fi(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function gi(t){return-1==t.h}function pi(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new si(n,~t.h).add(li)}function mi(t,e){return t.add(pi(e))}function yi(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function vi(t,e){this.g=t,this.h=e}function wi(t,e){if(fi(e))throw Error("division by zero");if(fi(t))return new vi(ui,ui);if(gi(t))return e=wi(pi(t),e),new vi(pi(e.g),pi(e.h));if(gi(e))return e=wi(t,pi(e)),new vi(pi(e.g),e.h);if(30<t.g.length){if(gi(t)||gi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=li,r=e;0>=r.X(t);)n=_i(n),r=_i(r);var i=Ei(n,1),s=Ei(r,1);for(r=Ei(r,2),n=Ei(n,2);!fi(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ei(r,1),n=Ei(n,1)}return e=mi(t,i.R(e)),new vi(i,e)}for(i=ui;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=hi(n)).R(e);gi(o)||0<o.X(t);)o=(s=hi(n-=r)).R(e);fi(s)&&(s=li),i=i.add(s),t=mi(t,o)}return new vi(i,t)}function _i(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new si(n,t.h)}function Ei(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new si(i,t.h)}(gt=si.prototype).ea=function(){if(gi(this))return-pi(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ci+r)*e,e*=ci}return t},gt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(fi(this))return"0";if(gi(this))return"-"+pi(this).toString(t);for(var e=hi(Math.pow(t,6)),n=this,r="";;){var i=wi(n,e).g,s=((0<(n=mi(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(fi(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},gt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},gt.X=function(t){return gi(t=mi(this,t))?-1:fi(t)?0:1},gt.abs=function(){return gi(this)?pi(this):this},gt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new si(n,-2147483648&n[n.length-1]?-1:0)},gt.R=function(t){if(fi(this)||fi(t))return ui;if(gi(this))return gi(t)?pi(this).R(pi(t)):pi(pi(this).R(t));if(gi(t))return pi(this.R(pi(t)));if(0>this.X(di)&&0>t.X(di))return hi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,h=65535&t.D(i);n[2*r+2*i]+=o*h,yi(n,2*r+2*i),n[2*r+2*i+1]+=s*h,yi(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,yi(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,yi(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new si(n,0)},gt.gb=function(t){return wi(this,t).h},gt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new si(n,this.h&t.h)},gt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new si(n,this.h|t.h)},gt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new si(n,this.h^t.h)},Jr.prototype.createWebChannel=Jr.prototype.g,Zr.prototype.send=Zr.prototype.u,Zr.prototype.open=Zr.prototype.m,Zr.prototype.close=Zr.prototype.close,rn.NO_ERROR=0,rn.TIMEOUT=8,rn.HTTP_ERROR=6,sn.COMPLETE="complete",hn.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",Te.prototype.listen=Te.prototype.O,vr.prototype.listenOnce=vr.prototype.P,vr.prototype.getLastError=vr.prototype.Sa,vr.prototype.getLastErrorCode=vr.prototype.Ia,vr.prototype.getStatus=vr.prototype.da,vr.prototype.getResponseJson=vr.prototype.Wa,vr.prototype.getResponseText=vr.prototype.ja,vr.prototype.send=vr.prototype.ha,vr.prototype.setWithCredentials=vr.prototype.Oa,ri.prototype.digest=ri.prototype.l,ri.prototype.reset=ri.prototype.reset,ri.prototype.update=ri.prototype.j,si.prototype.add=si.prototype.add,si.prototype.multiply=si.prototype.R,si.prototype.modulo=si.prototype.gb,si.prototype.compare=si.prototype.X,si.prototype.toNumber=si.prototype.ea,si.prototype.toString=si.prototype.toString,si.prototype.getBits=si.prototype.D,si.fromNumber=hi,si.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return pi(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=hi(Math.pow(n,8)),i=ui,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=hi(Math.pow(n,o)),i=i.R(o).add(hi(a))):i=(i=i.R(r)).add(hi(a))}return i};var bi=mt.createWebChannelTransport=function(){return new Jr},Ti=mt.getStatEventTarget=function(){return Ye()},Ii=mt.ErrorCode=rn,Si=mt.EventType=sn,Ci=mt.Event=Qe,Ai=mt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Di=(mt.FetchXmlHttpFactory=lr,mt.WebChannel=hn),Ni=mt.XhrIo=vr,ki=mt.Md5=ri,Ri=mt.Integer=si;const Li="@firebase/firestore";class xi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");let Oi="10.4.0";const Mi=new S("@firebase/firestore");function Pi(){return Mi.logLevel}function Vi(t,...e){if(Mi.logLevel<=w.DEBUG){const n=e.map(Bi);Mi.debug(`Firestore (${Oi}): ${t}`,...n)}}function Fi(t,...e){if(Mi.logLevel<=w.ERROR){const n=e.map(Bi);Mi.error(`Firestore (${Oi}): ${t}`,...n)}}function Ui(t,...e){if(Mi.logLevel<=w.WARN){const n=e.map(Bi);Mi.warn(`Firestore (${Oi}): ${t}`,...n)}}function Bi(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function qi(t="Unexpected state"){const e=`FIRESTORE (${Oi}) INTERNAL ASSERTION FAILED: `+t;throw Fi(e),new Error(e)}function ji(t,e){t||qi()}function $i(t,e){return t}const zi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ki extends h{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gi{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Hi{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Qi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(xi.UNAUTHENTICATED)))}shutdown(){}}class Wi{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Yi{constructor(t){this.t=t,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gi,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{Vi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Vi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gi)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Vi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(ji("string"==typeof e.accessToken),new Hi(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ji(null===t||"string"==typeof t),new xi(t)}}class Xi{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ji{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Xi(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(xi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ts{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Vi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Vi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{Vi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):Vi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(ji("string"==typeof t.token),this.R=t.token,new Zi(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function es(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class ns{static V(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=es(40);for(let r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return e}}function rs(t,e){return t<e?-1:t>e?1:0}function is(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class ss{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ki(zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ss.fromMillis(Date.now())}static fromDate(t){return ss.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new ss(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?rs(this.nanoseconds,t.nanoseconds):rs(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class os{constructor(t){this.timestamp=t}static fromTimestamp(t){return new os(t)}static min(){return new os(new ss(0,0))}static max(){return new os(new ss(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class as{constructor(t,e,n){void 0===e?e=0:e>t.length&&qi(),void 0===n?n=t.length-e:n>t.length-e&&qi(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===as.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof as?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class hs extends as{construct(t,e,n){return new hs(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Ki(zi.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new hs(e)}static emptyPath(){return new hs([])}}const cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class us extends as{construct(t,e,n){return new us(t,e,n)}static isValidIdentifier(t){return cs.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),us.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new us(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ki(zi.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Ki(zi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Ki(zi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new Ki(zi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new us(e)}static emptyPath(){return new us([])}}class ls{constructor(t){this.path=t}static fromPath(t){return new ls(hs.fromString(t))}static fromName(t){return new ls(hs.fromString(t).popFirst(5))}static empty(){return new ls(hs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===hs.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return hs.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ls(new hs(t.slice()))}}function ds(t){return new fs(t.readTime,t.key,-1)}class fs{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new fs(os.min(),ls.empty(),-1)}static max(){return new fs(os.max(),ls.empty(),-1)}}function gs(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ls.comparator(t.documentKey,e.documentKey),0!==n?n:rs(t.largestBatchId,e.largestBatchId))}const ps="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ms{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function ys(t){if(t.code!==zi.FAILED_PRECONDITION||t.message!==ps)throw t;Vi("LocalStore","Unexpectedly lost primary lease")}class vs{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&qi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new vs(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof vs?e:vs.resolve(e)}catch(t){return vs.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):vs.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):vs.reject(e)}static resolve(t){return new vs(((e,n)=>{e(t)}))}static reject(t){return new vs(((e,n)=>{n(t)}))}static waitFor(t){return new vs(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=vs.resolve(!1);for(const n of t)e=e.next((t=>t?vs.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new vs(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const h=a;e(t[h]).next((t=>{s[h]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new vs(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}function ws(t){return"IndexedDbTransactionError"===t.name}class _s{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.oe(t),this._e=t=>e.writeSequenceNumber(t))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}function Es(t){return null==t}function bs(t){return 0===t&&1/t==-1/0}_s.ae=-1;function Ts(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ss(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Cs{constructor(t,e){this.comparator=t,this.root=e||Ds.EMPTY}insert(t,e){return new Cs(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ds.BLACK,null,null))}remove(t){return new Cs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ds.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new As(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new As(this.root,t,this.comparator,!1)}getReverseIterator(){return new As(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new As(this.root,t,this.comparator,!0)}}class As{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ds{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ds.RED,this.left=null!=r?r:Ds.EMPTY,this.right=null!=i?i:Ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new Ds(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ds.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Ds.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qi();if(this.right.isRed())throw qi();const t=this.left.check();if(t!==this.right.check())throw qi();return t+(this.isRed()?0:1)}}Ds.EMPTY=null,Ds.RED=!0,Ds.BLACK=!1,Ds.EMPTY=new class{constructor(){this.size=0}get key(){throw qi()}get value(){throw qi()}get color(){throw qi()}get left(){throw qi()}get right(){throw qi()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Ds(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ns{constructor(t){this.comparator=t,this.data=new Cs(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ks(this.data.getIterator())}getIteratorFrom(t){return new ks(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Ns))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ns(this.comparator);return e.data=t,e}}class ks{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Rs{constructor(t){this.fields=t,t.sort(us.comparator)}static empty(){return new Rs([])}unionWith(t){let e=new Ns(us.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Rs(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return is(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Ls extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class xs{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Ls("Invalid base64 string: "+t):t}}(t);return new xs(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new xs(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rs(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}xs.EMPTY_BYTE_STRING=new xs("");const Os=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(t){if(ji(!!t),"string"==typeof t){let e=0;const n=Os.exec(t);if(ji(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ps(t.seconds),nanos:Ps(t.nanos)}}function Ps(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vs(t){return"string"==typeof t?xs.fromBase64String(t):xs.fromUint8Array(t)}function Fs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Us(t){const e=t.mapValue.fields.__previous_value__;return Fs(e)?Us(e):e}function Bs(t){const e=Ms(t.mapValue.fields.__local_write_time__.timestampValue);return new ss(e.seconds,e.nanos)}class qs{constructor(t,e,n,r,i,s,o,a,h){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=h}}class js{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new js("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof js&&t.projectId===this.projectId&&t.database===this.database}}const $s={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fs(t)?4:io(t)?9007199254740991:10:qi()}function Ks(t,e){if(t===e)return!0;const n=zs(t);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bs(t).isEqual(Bs(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Ms(t.timestampValue),r=Ms(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Vs(t.bytesValue).isEqual(Vs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ps(t.geoPointValue.latitude)===Ps(e.geoPointValue.latitude)&&Ps(t.geoPointValue.longitude)===Ps(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ps(t.integerValue)===Ps(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ps(t.doubleValue),r=Ps(e.doubleValue);return n===r?bs(n)===bs(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return is(t.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ts(n)!==Ts(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!Ks(n[t],r[t])))return!1;return!0}(t,e);default:return qi()}}function Gs(t,e){return void 0!==(t.values||[]).find((t=>Ks(t,e)))}function Hs(t,e){if(t===e)return 0;const n=zs(t),r=zs(e);if(n!==r)return rs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rs(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ps(t.integerValue||t.doubleValue),r=Ps(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Qs(t.timestampValue,e.timestampValue);case 4:return Qs(Bs(t),Bs(e));case 5:return rs(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Vs(t),r=Vs(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=rs(n[t],r[t]);if(0!==e)return e}return rs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=rs(Ps(t.latitude),Ps(e.latitude));return 0!==n?n:rs(Ps(t.longitude),Ps(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=Hs(n[t],r[t]);if(e)return e}return rs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===$s.mapValue&&e===$s.mapValue)return 0;if(t===$s.mapValue)return 1;if(e===$s.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=rs(r[t],s[t]);if(0!==e)return e;const o=Hs(n[r[t]],i[s[t]]);if(0!==o)return o}return rs(r.length,s.length)}(t.mapValue,e.mapValue);default:throw qi()}}function Qs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rs(t,e);const n=Ms(t),r=Ms(e),i=rs(n.seconds,r.seconds);return 0!==i?i:rs(n.nanos,r.nanos)}function Ws(t){return Ys(t)}function Ys(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Ms(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Vs(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return ls.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Ys(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${Ys(t.fields[i])}`;return n+"}"}(t.mapValue):qi()}function Xs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Js(t){return!!t&&"integerValue"in t}function Zs(t){return!!t&&"arrayValue"in t}function to(t){return!!t&&"nullValue"in t}function eo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function no(t){return!!t&&"mapValue"in t}function ro(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Is(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=ro(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ro(t.arrayValue.values[n]);return e}return Object.assign({},t)}function io(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class so{constructor(t){this.value=t}static empty(){return new so({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!no(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ro(e)}setAll(t){let e=us.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=ro(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());no(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ks(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];no(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Is(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new so(ro(this.value))}}class oo{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new oo(t,0,os.min(),os.min(),os.min(),so.empty(),0)}static newFoundDocument(t,e,n,r){return new oo(t,1,e,os.min(),n,r,0)}static newNoDocument(t,e){return new oo(t,2,e,os.min(),os.min(),so.empty(),0)}static newUnknownDocument(t,e){return new oo(t,3,e,os.min(),os.min(),so.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(os.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=so.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=so.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=os.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof oo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new oo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ao{constructor(t,e){this.position=t,this.inclusive=e}}function ho(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ls.comparator(ls.fromName(o.referenceValue),n.key):Hs(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function co(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ks(t.position[n],e.position[n]))return!1;return!0}class uo{constructor(t,e="asc"){this.field=t,this.dir=e}}function lo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class fo{}class go extends fo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Eo(t,e,n):"array-contains"===e?new So(t,n):"in"===e?new Co(t,n):"not-in"===e?new Ao(t,n):"array-contains-any"===e?new Do(t,n):new go(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new bo(t,n):new To(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Hs(e,this.value)):null!==e&&zs(this.value)===zs(e)&&this.matchesComparison(Hs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return qi()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class po extends fo{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new po(t,e)}matches(t){return mo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.le((t=>t.isInequality()));return null!==t?t.field:null}le(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function mo(t){return"and"===t.op}function yo(t){return function(t){for(const e of t.filters)if(e instanceof po)return!1;return!0}(t)&&mo(t)}function vo(t){if(t instanceof go)return t.field.canonicalString()+t.op.toString()+Ws(t.value);if(yo(t))return t.filters.map((t=>vo(t))).join(",");{const e=t.filters.map((t=>vo(t))).join(",");return`${t.op}(${e})`}}function wo(t,e){return t instanceof go?function(t,e){return e instanceof go&&t.op===e.op&&t.field.isEqual(e.field)&&Ks(t.value,e.value)}(t,e):t instanceof po?function(t,e){return e instanceof po&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&wo(n,e.filters[r])),!0)}(t,e):void qi()}function _o(t){return t instanceof go?function(t){return`${t.field.canonicalString()} ${t.op} ${Ws(t.value)}`}(t):t instanceof po?function(t){return t.op.toString()+" {"+t.getFilters().map(_o).join(" ,")+"}"}(t):"Filter"}class Eo extends go{constructor(t,e,n){super(t,e,n),this.key=ls.fromName(n.referenceValue)}matches(t){const e=ls.comparator(t.key,this.key);return this.matchesComparison(e)}}class bo extends go{constructor(t,e){super(t,"in",e),this.keys=Io(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class To extends go{constructor(t,e){super(t,"not-in",e),this.keys=Io(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Io(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>ls.fromName(t.referenceValue)))}class So extends go{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Zs(e)&&Gs(e.arrayValue,this.value)}}class Co extends go{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Gs(this.value.arrayValue,e)}}class Ao extends go{constructor(t,e){super(t,"not-in",e)}matches(t){if(Gs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Gs(this.value.arrayValue,e)}}class Do extends go{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Zs(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Gs(this.value.arrayValue,t)))}}class No{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.he=null}}function ko(t,e=null,n=[],r=[],i=null,s=null,o=null){return new No(t,e,n,r,i,s,o)}function Ro(t){const e=$i(t);if(null===e.he){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>vo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Es(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Ws(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Ws(t))).join(",")),e.he=t}return e.he}function Lo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wo(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!co(t.startAt,e.startAt)&&co(t.endAt,e.endAt)}function xo(t){return ls.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Oo{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Mo(t){return new Oo(t)}function Po(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Vo(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Fo(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Uo(t){return null!==t.collectionGroup}function Bo(t){const e=$i(t);if(null===e.Pe){e.Pe=[];const t=Fo(e),n=Vo(e);if(null!==t&&null===n)t.isKeyField()||e.Pe.push(new uo(t)),e.Pe.push(new uo(us.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.Pe.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new uo(us.keyField(),t))}}}return e.Pe}function qo(t){const e=$i(t);return e.Ie||(e.Ie=function(t,e){if("F"===t.limitType)return ko(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new uo(t.field,e)}));const n=t.endAt?new ao(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ao(t.startAt.position,t.startAt.inclusive):null;return ko(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Bo(t))),e.Ie}function jo(t,e){e.getFirstInequalityField(),Fo(t);const n=t.filters.concat([e]);return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $o(t,e,n){return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zo(t,e){return Lo(qo(t),qo(e))&&t.limitType===e.limitType}function Ko(t){return`${Ro(qo(t))}|lt:${t.limitType}`}function Go(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>_o(t))).join(", ")}]`),Es(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Ws(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Ws(t))).join(",")),`Target(${e})`}(qo(t))}; limitType=${t.limitType})`}function Ho(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ls.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Bo(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=ho(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Bo(t),e)||t.endAt&&!function(t,e,n){const r=ho(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Bo(t),e))}(t,e)}function Qo(t){return(e,n)=>{let r=!1;for(const i of Bo(t)){const t=Wo(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Wo(t,e,n){const r=t.field.isKeyField()?ls.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Hs(r,i):qi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return qi()}}class Yo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Is(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return Ss(this.inner)}size(){return this.innerSize}}const Xo=new Cs(ls.comparator);function Jo(){return Xo}const Zo=new Cs(ls.comparator);function ta(...t){let e=Zo;for(const n of t)e=e.insert(n.key,n);return e}function ea(t){let e=Zo;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function na(){return ia()}function ra(){return ia()}function ia(){return new Yo((t=>t.toString()),((t,e)=>t.isEqual(e)))}new Cs(ls.comparator);const sa=new Ns(ls.comparator);function oa(...t){let e=sa;for(const n of t)e=e.add(n);return e}const aa=new Ns(rs);function ha(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bs(e)?"-0":e}}function ca(t){return{integerValue:""+t}}function ua(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!bs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?ca(e):ha(t,e)}class la{constructor(){this._=void 0}}function da(t,e,n){return t instanceof ga?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Fs(e)&&(e=Us(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof pa?ma(t,e):t instanceof ya?va(t,e):function(t,e){const n=function(t,e){return t instanceof wa?function(t){return Js(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}(t,e),r=_a(n)+_a(t.Te);return Js(n)&&Js(t.Te)?ca(r):ha(t.serializer,r)}(t,e)}function fa(t,e,n){return t instanceof pa?ma(t,e):t instanceof ya?va(t,e):n}class ga extends la{}class pa extends la{constructor(t){super(),this.elements=t}}function ma(t,e){const n=Ea(e);for(const e of t.elements)n.some((t=>Ks(t,e)))||n.push(e);return{arrayValue:{values:n}}}class ya extends la{constructor(t){super(),this.elements=t}}function va(t,e){let n=Ea(e);for(const e of t.elements)n=n.filter((t=>!Ks(t,e)));return{arrayValue:{values:n}}}class wa extends la{constructor(t,e){super(),this.serializer=t,this.Te=e}}function _a(t){return Ps(t.integerValue||t.doubleValue)}function Ea(t){return Zs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ba{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ba}static exists(t){return new ba(void 0,t)}static updateTime(t){return new ba(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ta(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ia{}function Sa(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Oa(t.key,ba.none()):new Na(t.key,t.data,ba.none());{const n=t.data,r=so.empty();let i=new Ns(us.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new ka(t.key,r,new Rs(i.toArray()),ba.none())}}function Ca(t,e,n){t instanceof Na?function(t,e,n){const r=t.value.clone(),i=La(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ka?function(t,e,n){if(!Ta(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=La(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ra(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Aa(t,e,n,r){return t instanceof Na?function(t,e,n,r){if(!Ta(t.precondition,e))return n;const i=t.value.clone(),s=xa(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof ka?function(t,e,n,r){if(!Ta(t.precondition,e))return n;const i=xa(t.fieldTransforms,r,e),s=e.data;return s.setAll(Ra(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return Ta(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Da(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&is(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof pa&&e instanceof pa||t instanceof ya&&e instanceof ya?is(t.elements,e.elements,Ks):t instanceof wa&&e instanceof wa?Ks(t.Te,e.Te):t instanceof ga&&e instanceof ga}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Na extends Ia{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ka extends Ia{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ra(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function La(t,e,n){const r=new Map;ji(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,fa(o,a,n[i]))}return r}function xa(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,da(t,s,e))}return r}class Oa extends Ia{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ma{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&Ca(r,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Aa(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Aa(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=ra();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=Sa(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(os.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),oa())}isEqual(t){return this.batchId===t.batchId&&is(this.mutations,t.mutations,((t,e)=>Da(t,e)))&&is(this.baseMutations,t.baseMutations,((t,e)=>Da(t,e)))}}class Pa{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Va{constructor(t,e){this.count=t,this.unchangedNames=e}}var Fa,Ua;function Ba(t){if(void 0===t)return Fi("GRPC error has no .code"),zi.UNKNOWN;switch(t){case Fa.OK:return zi.OK;case Fa.CANCELLED:return zi.CANCELLED;case Fa.UNKNOWN:return zi.UNKNOWN;case Fa.DEADLINE_EXCEEDED:return zi.DEADLINE_EXCEEDED;case Fa.RESOURCE_EXHAUSTED:return zi.RESOURCE_EXHAUSTED;case Fa.INTERNAL:return zi.INTERNAL;case Fa.UNAVAILABLE:return zi.UNAVAILABLE;case Fa.UNAUTHENTICATED:return zi.UNAUTHENTICATED;case Fa.INVALID_ARGUMENT:return zi.INVALID_ARGUMENT;case Fa.NOT_FOUND:return zi.NOT_FOUND;case Fa.ALREADY_EXISTS:return zi.ALREADY_EXISTS;case Fa.PERMISSION_DENIED:return zi.PERMISSION_DENIED;case Fa.FAILED_PRECONDITION:return zi.FAILED_PRECONDITION;case Fa.ABORTED:return zi.ABORTED;case Fa.OUT_OF_RANGE:return zi.OUT_OF_RANGE;case Fa.UNIMPLEMENTED:return zi.UNIMPLEMENTED;case Fa.DATA_LOSS:return zi.DATA_LOSS;default:return qi()}}(Ua=Fa||(Fa={}))[Ua.OK=0]="OK",Ua[Ua.CANCELLED=1]="CANCELLED",Ua[Ua.UNKNOWN=2]="UNKNOWN",Ua[Ua.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ua[Ua.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ua[Ua.NOT_FOUND=5]="NOT_FOUND",Ua[Ua.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ua[Ua.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ua[Ua.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ua[Ua.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ua[Ua.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ua[Ua.ABORTED=10]="ABORTED",Ua[Ua.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ua[Ua.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ua[Ua.INTERNAL=13]="INTERNAL",Ua[Ua.UNAVAILABLE=14]="UNAVAILABLE",Ua[Ua.DATA_LOSS=15]="DATA_LOSS";const qa=new Ri([4294967295,4294967295],0);function ja(t){const e=(new TextEncoder).encode(t),n=new ki;return n.update(e),new Uint8Array(n.digest())}function $a(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([i,s],0)]}class za{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ka(`Invalid padding: ${e}`);if(n<0)throw new Ka(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Ka(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Ka(`Invalid padding when bitmap length is 0: ${e}`);this.Ae=8*t.length-e,this.Re=Ri.fromNumber(this.Ae)}Ve(t,e,n){let r=t.add(e.multiply(Ri.fromNumber(n)));return 1===r.compare(qa)&&(r=new Ri([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}me(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ae)return!1;const e=ja(t),[n,r]=$a(e);for(let t=0;t<this.hashCount;t++){const e=this.Ve(n,r,t);if(!this.me(e))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new za(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Ae)return;const e=ja(t),[n,r]=$a(e);for(let t=0;t<this.hashCount;t++){const e=this.Ve(n,r,t);this.fe(e)}}fe(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ga{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,Ha.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Ga(os.min(),r,new Cs(rs),Jo(),oa())}}class Ha{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Ha(n,e,oa(),oa(),oa())}}class Qa{constructor(t,e,n,r){this.ge=t,this.removedTargetIds=e,this.key=n,this.pe=r}}class Wa{constructor(t,e){this.targetId=t,this.ye=e}}class Ya{constructor(t,e,n=xs.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Xa{constructor(){this.we=0,this.Se=th(),this.be=xs.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return 0!==this.we}get Fe(){return this.Ce}Me(t){t.approximateByteSize()>0&&(this.Ce=!0,this.be=t)}xe(){let t=oa(),e=oa(),n=oa();return this.Se.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:qi()}})),new Ha(this.be,this.De,t,e,n)}Oe(){this.Ce=!1,this.Se=th()}Ne(t,e){this.Ce=!0,this.Se=this.Se.insert(t,e)}Be(t){this.Ce=!0,this.Se=this.Se.remove(t)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class Ja{constructor(t){this.Qe=t,this.Ke=new Map,this.$e=Jo(),this.Ue=Za(),this.We=new Cs(rs)}Ge(t){for(const e of t.ge)t.pe&&t.pe.isFoundDocument()?this.ze(e,t.pe):this.je(e,t.key,t.pe);for(const e of t.removedTargetIds)this.je(e,t.key,t.pe)}He(t){this.forEachTarget(t,(e=>{const n=this.Je(e);switch(t.state){case 0:this.Ye(e)&&n.Me(t.resumeToken);break;case 1:n.ke(),n.ve||n.Oe(),n.Me(t.resumeToken);break;case 2:n.ke(),n.ve||this.removeTarget(e);break;case 3:this.Ye(e)&&(n.qe(),n.Me(t.resumeToken));break;case 4:this.Ye(e)&&(this.Ze(e),n.Me(t.resumeToken));break;default:qi()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ke.forEach(((t,n)=>{this.Ye(n)&&e(n)}))}Xe(t){const e=t.targetId,n=t.ye.count,r=this.et(e);if(r){const i=r.target;if(xo(i))if(0===n){const t=new ls(i.path);this.je(e,t,oo.newNoDocument(t,os.min()))}else ji(1===n);else{const r=this.tt(e);if(r!==n){const n=this.nt(t),i=n?this.rt(n,t,r):1;if(0!==i){this.Ze(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(e,t)}}}}}nt(t){const e=t.ye.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=e;let s,o;try{s=Vs(n).toUint8Array()}catch(t){if(t instanceof Ls)return Ui("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new za(s,r,i)}catch(t){return Ui(t instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Ae?null:o}rt(t,e,n){return e.ye.count===n-this.ot(t,e.targetId)?0:2}ot(t,e){const n=this.Qe.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Qe.st(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.je(e,n,null),r++)})),r}_t(t){const e=new Map;this.Ke.forEach(((n,r)=>{const i=this.et(r);if(i){if(n.current&&xo(i.target)){const e=new ls(i.target.path);null!==this.$e.get(e)||this.ut(r,e)||this.je(r,e,oo.newNoDocument(e,t))}n.Fe&&(e.set(r,n.xe()),n.Oe())}}));let n=oa();this.Ue.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.et(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.$e.forEach(((e,n)=>n.setReadTime(t)));const r=new Ga(t,e,this.We,this.$e,n);return this.$e=Jo(),this.Ue=Za(),this.We=new Cs(rs),r}ze(t,e){if(!this.Ye(t))return;const n=this.ut(t,e.key)?2:0;this.Je(t).Ne(e.key,n),this.$e=this.$e.insert(e.key,e),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}je(t,e,n){if(!this.Ye(t))return;const r=this.Je(t);this.ut(t,e)?r.Ne(e,1):r.Be(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),n&&(this.$e=this.$e.insert(e,n))}removeTarget(t){this.Ke.delete(t)}tt(t){const e=this.Je(t).xe();return this.Qe.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Le(t){this.Je(t).Le()}Je(t){let e=this.Ke.get(t);return e||(e=new Xa,this.Ke.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Ns(rs),this.Ue=this.Ue.insert(t,e)),e}Ye(t){const e=null!==this.et(t);return e||Vi("WatchChangeAggregator","Detected inactive target",t),e}et(t){const e=this.Ke.get(t);return e&&e.ve?null:this.Qe.lt(t)}Ze(t){this.Ke.set(t,new Xa),this.Qe.getRemoteKeysForTarget(t).forEach((e=>{this.je(t,e,null)}))}ut(t,e){return this.Qe.getRemoteKeysForTarget(t).has(e)}}function Za(){return new Cs(ls.comparator)}function th(){return new Cs(ls.comparator)}const eh={asc:"ASCENDING",desc:"DESCENDING"},nh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rh={and:"AND",or:"OR"};class ih{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function sh(t,e){return t.useProto3Json||Es(e)?e:{value:e}}function oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ah(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hh(t){return ji(!!t),os.fromTimestamp(function(t){const e=Ms(t);return new ss(e.seconds,e.nanos)}(t))}function ch(t,e){return function(t){return new hs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function uh(t){const e=hs.fromString(t);return ji(Sh(e)),e}function lh(t,e){const n=uh(e);if(n.get(1)!==t.databaseId.projectId)throw new Ki(zi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ki(zi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ls(gh(n))}function dh(t,e){return ch(t.databaseId,e)}function fh(t){return new hs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gh(t){return ji(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ph(t,e){return{documents:[dh(t,e.path)]}}function mh(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=dh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=dh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0!==t.length)return Ih(po.create(t,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:bh(t.field),direction:wh(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=sh(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function yh(t){let e=function(t){const e=uh(t);return 4===e.length?hs.emptyPath():gh(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ji(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=vh(t);return e instanceof po&&yo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new uo(Th(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Es(e)?null:e}(n.limit));let h=null;n.startAt&&(h=function(t){const e=!!t.before,n=t.values||[];return new ao(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new ao(n,e)}(n.endAt)),function(t,e,n,r,i,s,o,a){return new Oo(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",h,c)}function vh(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Th(t.unaryFilter.field);return go.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Th(t.unaryFilter.field);return go.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Th(t.unaryFilter.field);return go.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Th(t.unaryFilter.field);return go.create(i,"!=",{nullValue:"NULL_VALUE"});default:return qi()}}(t):void 0!==t.fieldFilter?function(t){return go.create(Th(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qi()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return po.create(t.compositeFilter.filters.map((t=>vh(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return qi()}}(t.compositeFilter.op))}(t):qi()}function wh(t){return eh[t]}function _h(t){return nh[t]}function Eh(t){return rh[t]}function bh(t){return{fieldPath:t.canonicalString()}}function Th(t){return us.fromServerFormat(t.fieldPath)}function Ih(t){return t instanceof go?function(t){if("=="===t.op){if(eo(t.value))return{unaryFilter:{field:bh(t.field),op:"IS_NAN"}};if(to(t.value))return{unaryFilter:{field:bh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(eo(t.value))return{unaryFilter:{field:bh(t.field),op:"IS_NOT_NAN"}};if(to(t.value))return{unaryFilter:{field:bh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(t.field),op:_h(t.op),value:t.value}}}(t):t instanceof po?function(t){const e=t.getFilters().map((t=>Ih(t)));return 1===e.length?e[0]:{compositeFilter:{op:Eh(t.op),filters:e}}}(t):qi()}function Sh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ch{constructor(t,e,n,r,i=os.min(),s=os.min(),o=xs.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Ch(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Ah{constructor(t){this.ht=t}}function Dh(t){const e=yh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$o(e,e.limit,"L"):e}class Nh{constructor(){}dt(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.At(e,5);else if("booleanValue"in t)this.At(e,10),e.Rt(t.booleanValue?1:0);else if("integerValue"in t)this.At(e,15),e.Rt(Ps(t.integerValue));else if("doubleValue"in t){const n=Ps(t.doubleValue);isNaN(n)?this.At(e,13):(this.At(e,15),bs(n)?e.Rt(0):e.Rt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.At(e,20),"string"==typeof n?e.Vt(n):(e.Vt(`${n.seconds||""}`),e.Rt(n.nanos||0))}else if("stringValue"in t)this.ft(t.stringValue,e),this.gt(e);else if("bytesValue"in t)this.At(e,30),e.yt(Vs(t.bytesValue)),this.gt(e);else if("referenceValue"in t)this.wt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.At(e,45),e.Rt(n.latitude||0),e.Rt(n.longitude||0)}else"mapValue"in t?io(t)?this.At(e,Number.MAX_SAFE_INTEGER):(this.St(t.mapValue,e),this.gt(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.gt(e)):qi()}ft(t,e){this.At(e,25),this.Dt(t,e)}Dt(t,e){e.Vt(t)}St(t,e){const n=t.fields||{};this.At(e,55);for(const t of Object.keys(n))this.ft(t,e),this.Tt(n[t],e)}bt(t,e){const n=t.values||[];this.At(e,50);for(const t of n)this.Tt(t,e)}wt(t,e){this.At(e,37),ls.fromName(t).path.forEach((t=>{this.At(e,60),this.Dt(t,e)}))}At(t,e){t.Rt(e)}gt(t){t.Rt(2)}}Nh.Ct=new Nh;class kh{constructor(){this.an=new Rh}addToCollectionParentIndex(t,e){return this.an.add(e),vs.resolve()}getCollectionParents(t,e){return vs.resolve(this.an.getEntries(e))}addFieldIndex(t,e){return vs.resolve()}deleteFieldIndex(t,e){return vs.resolve()}deleteAllFieldIndexes(t){return vs.resolve()}createTargetIndexes(t,e){return vs.resolve()}getDocumentsMatchingTarget(t,e){return vs.resolve(null)}getIndexType(t,e){return vs.resolve(0)}getFieldIndexes(t,e){return vs.resolve([])}getNextCollectionGroupToUpdate(t){return vs.resolve(null)}getMinOffset(t,e){return vs.resolve(fs.min())}getMinOffsetFromCollectionGroup(t,e){return vs.resolve(fs.min())}updateCollectionGroup(t,e,n){return vs.resolve()}updateIndexEntries(t,e){return vs.resolve()}}class Rh{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ns(hs.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Ns(hs.comparator)).toArray()}}new Uint8Array(0);class Lh{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Lh(t,Lh.DEFAULT_COLLECTION_PERCENTILE,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Lh.DEFAULT_COLLECTION_PERCENTILE=10,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lh.DEFAULT=new Lh(41943040,Lh.DEFAULT_COLLECTION_PERCENTILE,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lh.DISABLED=new Lh(-1,0,0);class xh{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Bn(){return new xh(0)}static Ln(){return new xh(-1)}}class Oh{constructor(){this.changes=new Yo((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,oo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?vs.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Mh{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Ph{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Aa(n.mutation,t,Rs.empty(),ss.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,oa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=oa()){const r=na();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=ta();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=na();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,oa())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=Jo();const s=ia(),o=ia();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof ka)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Aa(o.mutation,e,o.mutation.getFieldMask(),ss.now())):s.set(e.key,Rs.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Mh(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=ia();let r=new Cs(((t,e)=>t-e)),i=oa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Rs.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||oa()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,h=r.value,c=ra();h.forEach((t=>{if(!i.has(t)){const r=Sa(e.get(t),n.get(t));null!==r&&c.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return vs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return ls.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Uo(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):vs.resolve(na());let o=-1,a=i;return s.next((e=>vs.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?vs.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,oa()))).next((t=>({batchId:o,changes:ea(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ls(e)).next((t=>{let e=ta();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let s=ta();return this.indexManager.getCollectionParents(t,i).next((o=>vs.forEach(o,(o=>{const a=function(t,e){return new Oo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,oo.newInvalidDocument(r)))}));let n=ta();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&Aa(s.mutation,r,Rs.empty(),ss.now()),Ho(e,r)&&(n=n.insert(t,r))})),n}))}}class Vh{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,e){return vs.resolve(this.lr.get(e))}saveBundleMetadata(t,e){return this.lr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:hh(t.createTime)}}(e)),vs.resolve()}getNamedQuery(t,e){return vs.resolve(this.hr.get(e))}saveNamedQuery(t,e){return this.hr.set(e.name,function(t){return{name:t.name,query:Dh(t.bundledQuery),readTime:hh(t.readTime)}}(e)),vs.resolve()}}class Fh{constructor(){this.overlays=new Cs(ls.comparator),this.Pr=new Map}getOverlay(t,e){return vs.resolve(this.overlays.get(e))}getOverlays(t,e){const n=na();return vs.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.It(t,e,r)})),vs.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.Pr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.Pr.delete(n)),vs.resolve()}getOverlaysForCollection(t,e,n){const r=na(),i=e.length+1,s=new ls(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return vs.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new Cs(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=na(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=na(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return vs.resolve(o)}It(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Pa(e,n));let i=this.Pr.get(e);void 0===i&&(i=oa(),this.Pr.set(e,i)),this.Pr.set(e,i.add(n.key))}}class Uh{constructor(){this.Ir=new Ns(Bh.dr),this.Tr=new Ns(Bh.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(t,e){const n=new Bh(t,e);this.Ir=this.Ir.add(n),this.Tr=this.Tr.add(n)}Ar(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Rr(new Bh(t,e))}Vr(t,e){t.forEach((t=>this.removeReference(t,e)))}mr(t){const e=new ls(new hs([])),n=new Bh(e,t),r=new Bh(e,t+1),i=[];return this.Tr.forEachInRange([n,r],(t=>{this.Rr(t),i.push(t.key)})),i}gr(){this.Ir.forEach((t=>this.Rr(t)))}Rr(t){this.Ir=this.Ir.delete(t),this.Tr=this.Tr.delete(t)}pr(t){const e=new ls(new hs([])),n=new Bh(e,t),r=new Bh(e,t+1);let i=oa();return this.Tr.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new Bh(t,0),n=this.Ir.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Bh{constructor(t,e){this.key=t,this.yr=e}static dr(t,e){return ls.comparator(t.key,e.key)||rs(t.yr,e.yr)}static Er(t,e){return rs(t.yr,e.yr)||ls.comparator(t.key,e.key)}}class qh{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.wr=1,this.Sr=new Ns(Bh.dr)}checkEmpty(t){return vs.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ma(i,e,n,r);this.mutationQueue.push(s);for(const e of r)this.Sr=this.Sr.add(new Bh(e.key,i)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return vs.resolve(s)}lookupMutationBatch(t,e){return vs.resolve(this.br(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.Dr(n),i=r<0?0:r;return vs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return vs.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(t){return vs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Bh(e,0),r=new Bh(e,Number.POSITIVE_INFINITY),i=[];return this.Sr.forEachInRange([n,r],(t=>{const e=this.br(t.yr);i.push(e)})),vs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ns(rs);return e.forEach((t=>{const e=new Bh(t,0),r=new Bh(t,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([e,r],(t=>{n=n.add(t.yr)}))})),vs.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;ls.isDocumentKey(i)||(i=i.child(""));const s=new Bh(new ls(i),0);let o=new Ns(rs);return this.Sr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.yr)),!0)}),s),vs.resolve(this.Cr(o))}Cr(t){const e=[];return t.forEach((t=>{const n=this.br(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){ji(0===this.vr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Sr;return vs.forEach(e.mutations,(r=>{const i=new Bh(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Sr=n}))}xn(t){}containsKey(t,e){const n=new Bh(e,0),r=this.Sr.firstAfterOrEqual(n);return vs.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,vs.resolve()}vr(t,e){return this.Dr(t)}Dr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}br(t){const e=this.Dr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class jh{constructor(t){this.Fr=t,this.docs=new Cs(ls.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.Fr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return vs.resolve(n?n.document.mutableCopy():oo.newInvalidDocument(e))}getEntries(t,e){let n=Jo();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():oo.newInvalidDocument(t))})),vs.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=Jo();const s=e.path,o=new ls(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||gs(ds(o),n)<=0||(r.has(o.key)||Ho(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return vs.resolve(i)}getAllFromCollectionGroup(t,e,n,r){qi()}Mr(t,e){return vs.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new $h(this)}getSize(t){return vs.resolve(this.size)}}class $h extends Oh{constructor(t){super(),this.ur=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.ur.addEntry(t,r)):this.ur.removeEntry(n)})),vs.waitFor(e)}getFromCache(t,e){return this.ur.getEntry(t,e)}getAllFromCache(t,e){return this.ur.getEntries(t,e)}}class zh{constructor(t){this.persistence=t,this.Or=new Yo((t=>Ro(t)),Lo),this.lastRemoteSnapshotVersion=os.min(),this.highestTargetId=0,this.Nr=0,this.Br=new Uh,this.targetCount=0,this.Lr=xh.Bn()}forEachTarget(t,e){return this.Or.forEach(((t,n)=>e(n))),vs.resolve()}getLastRemoteSnapshotVersion(t){return vs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return vs.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),vs.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Nr&&(this.Nr=e),vs.resolve()}Qn(t){this.Or.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new xh(e),this.highestTargetId=e),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,e){return this.Qn(e),this.targetCount+=1,vs.resolve()}updateTargetData(t,e){return this.Qn(e),vs.resolve()}removeTargetData(t,e){return this.Or.delete(e.target),this.Br.mr(e.targetId),this.targetCount-=1,vs.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Or.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Or.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),vs.waitFor(i).next((()=>r))}getTargetCount(t){return vs.resolve(this.targetCount)}getTargetData(t,e){const n=this.Or.get(e)||null;return vs.resolve(n)}addMatchingKeys(t,e,n){return this.Br.Ar(e,n),vs.resolve()}removeMatchingKeys(t,e,n){this.Br.Vr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),vs.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Br.mr(e),vs.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Br.pr(e);return vs.resolve(n)}containsKey(t,e){return vs.resolve(this.Br.containsKey(e))}}class Kh{constructor(t,e){this.kr={},this.overlays={},this.qr=new _s(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new zh(this),this.indexManager=new kh,this.remoteDocumentCache=function(t){return new jh(t)}((t=>this.referenceDelegate.$r(t))),this.serializer=new Ah(e),this.Ur=new Vh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Fh,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.kr[t.toKey()];return n||(n=new qh(e,this.referenceDelegate),this.kr[t.toKey()]=n),n}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(t,e,n){Vi("MemoryPersistence","Starting transaction:",t);const r=new Gh(this.qr.next());return this.referenceDelegate.Wr(),n(r).next((t=>this.referenceDelegate.Gr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}zr(t,e){return vs.or(Object.values(this.kr).map((n=>()=>n.containsKey(t,e))))}}class Gh extends ms{constructor(t){super(),this.currentSequenceNumber=t}}class Hh{constructor(t){this.persistence=t,this.jr=new Uh,this.Hr=null}static Jr(t){return new Hh(t)}get Yr(){if(this.Hr)return this.Hr;throw qi()}addReference(t,e,n){return this.jr.addReference(n,e),this.Yr.delete(n.toString()),vs.resolve()}removeReference(t,e,n){return this.jr.removeReference(n,e),this.Yr.add(n.toString()),vs.resolve()}markPotentiallyOrphaned(t,e){return this.Yr.add(e.toString()),vs.resolve()}removeTarget(t,e){this.jr.mr(e.targetId).forEach((t=>this.Yr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Yr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Wr(){this.Hr=new Set}Gr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vs.forEach(this.Yr,(n=>{const r=ls.fromPath(n);return this.Zr(t,r).next((t=>{t||e.removeEntry(r,os.min())}))})).next((()=>(this.Hr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Zr(t,e).next((t=>{t?this.Yr.delete(e.toString()):this.Yr.add(e.toString())}))}$r(t){return 0}Zr(t,e){return vs.or([()=>vs.resolve(this.jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.zr(t,e)])}}class Qh{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Qi=n,this.Ki=r}static $i(t,e){let n=oa(),r=oa();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new Qh(t,e.fromCache,n,r)}}class Wh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Yh{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(t,e){this.ji=t,this.indexManager=e,this.Ui=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.Hi(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.Ji(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new Wh;return this.Yi(t,e,n).next((r=>{if(i.result=r,this.Wi)return this.Zi(t,e,n,r.size)}))})).next((()=>i.result))}Zi(t,e,n,r){return n.documentReadCount<this.Gi?(Pi()<=w.DEBUG&&Vi("QueryEngine","SDK will not create cache indexes for query:",Go(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),vs.resolve()):(Pi()<=w.DEBUG&&Vi("QueryEngine","Query:",Go(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.zi*r?(Pi()<=w.DEBUG&&Vi("QueryEngine","The SDK decides to create cache indexes for query:",Go(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qo(e))):vs.resolve())}Hi(t,e){if(Po(e))return vs.resolve(null);let n=qo(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=$o(e,null,"F"),n=qo(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=oa(...r);return this.ji.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Xi(e,r);return this.es(e,s,i,n.readTime)?this.Hi(t,$o(e,null,"F")):this.ts(t,s,e,n)}))))})))))}Ji(t,e,n,r){return Po(e)||r.isEqual(os.min())?vs.resolve(null):this.ji.getDocuments(t,n).next((i=>{const s=this.Xi(e,i);return this.es(e,s,n,r)?vs.resolve(null):(Pi()<=w.DEBUG&&Vi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Go(e)),this.ts(t,s,e,function(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=os.fromTimestamp(1e9===r?new ss(n+1,0):new ss(n,r));return new fs(i,ls.empty(),e)}(r,-1)).next((t=>t)))}))}Xi(t,e){let n=new Ns(Qo(t));return e.forEach(((e,r)=>{Ho(t,r)&&(n=n.add(r))})),n}es(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Yi(t,e,n){return Pi()<=w.DEBUG&&Vi("QueryEngine","Using full collection scan to execute query:",Go(e)),this.ji.getDocumentsMatchingQuery(t,e,fs.min(),n)}ts(t,e,n,r){return this.ji.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Xh{constructor(t,e,n,r){this.persistence=t,this.ns=e,this.serializer=r,this.rs=new Cs(rs),this.ss=new Yo((t=>Ro(t)),Lo),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(n)}us(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ph(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.rs)))}}async function Jh(t,e){const n=$i(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.us(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=oa();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({cs:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function Zh(t){const e=$i(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Kr.getLastRemoteSnapshotVersion(t)))}async function tc(t,e,n){const r=$i(t),i=r.rs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!ws(t))throw t;Vi("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}function ec(t,e,n){const r=$i(t);let i=os.min(),s=oa();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=$i(t),i=r.ss.get(n);return void 0!==i?vs.resolve(r.rs.get(i)):r.Kr.getTargetData(e,n)}(r,t,qo(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.ns.getDocumentsMatchingQuery(t,e,n?i:os.min(),n?s:oa()))).next((t=>(function(t,e,n){let r=t.os.get(e)||os.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.os.set(e,r)}(r,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,Ps:s})))))}class nc{constructor(){this.activeTargetIds=aa}Rs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}As(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class rc{constructor(){this.ro=new nc,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.ro.Rs(t),this.io[t]||"not-current"}updateQueryState(t,e,n){this.io[t]=e}removeLocalQueryTarget(t){this.ro.Vs(t)}isLocalQueryTarget(t){return this.ro.activeTargetIds.has(t)}clearQueryState(t){delete this.io[t]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(t){return this.ro.activeTargetIds.has(t)}start(){return this.ro=new nc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class ic{so(t){}shutdown(){}}class sc{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(t){this.co.push(t)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){Vi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.co)t(0)}uo(){Vi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.co)t(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oc=null;function ac(){return null===oc?oc=268435456+Math.round(2147483648*Math.random()):oc++,"0x"+oc.toString(16)}const hc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cc{constructor(t){this.ho=t.ho,this.Po=t.Po}Io(t){this.To=t}Eo(t){this.Ao=t}onMessage(t){this.Ro=t}close(){this.Po()}send(t){this.ho(t)}Vo(){this.To()}mo(t){this.Ao(t)}fo(t){this.Ro(t)}}const uc="WebChannelConnection";class lc extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${n}/databases/${r}`,this.wo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get So(){return!1}bo(t,e,n,r,i){const s=ac(),o=this.Do(t,e);Vi("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(a,r,i),this.vo(t,o,a,n).then((e=>(Vi("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Ui("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Fo(t,e,n,r,i,s){return this.bo(t,e,n,r,i)}Co(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Oi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}Do(t,e){const n=hc[t];return`${this.po}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,n,r){const i=ac();return new Promise(((s,o)=>{const a=new Ni;a.setWithCredentials(!0),a.listenOnce(Si.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ii.NO_ERROR:const e=a.getResponseJson();Vi(uc,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case Ii.TIMEOUT:Vi(uc,`RPC '${t}' ${i} timed out`),o(new Ki(zi.DEADLINE_EXCEEDED,"Request time out"));break;case Ii.HTTP_ERROR:const n=a.getStatus();if(Vi(uc,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(zi).indexOf(e)>=0?e:zi.UNKNOWN}(e.status);o(new Ki(t,e.message))}else o(new Ki(zi.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ki(zi.UNAVAILABLE,"Connection failed."));break;default:qi()}}finally{Vi(uc,`RPC '${t}' ${i} completed.`)}}));const h=JSON.stringify(r);Vi(uc,`RPC '${t}' ${i} sending request:`,r),a.send(e,"POST",h,n,15)}))}Mo(t,e,n){const r=ac(),i=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=bi(),o=Ti(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;void 0!==h&&(a.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Co(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Vi(uc,`Creating RPC '${t}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let l=!1,d=!1;const f=new cc({ho:e=>{d?Vi(uc,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(l||(Vi(uc,`Opening RPC '${t}' stream ${r} transport.`),u.open(),l=!0),Vi(uc,`RPC '${t}' stream ${r} sending:`,e),u.send(e))},Po:()=>u.close()}),g=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return g(u,Di.EventType.OPEN,(()=>{d||Vi(uc,`RPC '${t}' stream ${r} transport opened.`)})),g(u,Di.EventType.CLOSE,(()=>{d||(d=!0,Vi(uc,`RPC '${t}' stream ${r} transport closed`),f.mo())})),g(u,Di.EventType.ERROR,(e=>{d||(d=!0,Ui(uc,`RPC '${t}' stream ${r} transport errored:`,e),f.mo(new Ki(zi.UNAVAILABLE,"The operation could not be completed")))})),g(u,Di.EventType.MESSAGE,(e=>{var n;if(!d){const i=e.data[0];ji(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Vi(uc,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=Fa[t];if(void 0!==e)return Ba(e)}(e),i=o.message;void 0===n&&(n=zi.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),d=!0,f.mo(new Ki(n,i)),u.close()}else Vi(uc,`RPC '${t}' stream ${r} received:`,i),f.fo(i)}})),g(o,Ci.STAT_EVENT,(e=>{e.stat===Ai.PROXY?Vi(uc,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===Ai.NOPROXY&&Vi(uc,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.Vo()}),0),f}}function dc(){return"undefined"!=typeof document?document:null}function fc(t){return new ih(t,!0)}class gc{constructor(t,e,n=1e3,r=1.5,i=6e4){this._i=t,this.timerId=e,this.xo=n,this.Oo=r,this.No=i,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(t){this.cancel();const e=Math.floor(this.Bo+this.Ko()),n=Math.max(0,Date.now()-this.ko),r=Math.max(0,e-n);r>0&&Vi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Bo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,r,(()=>(this.ko=Date.now(),t()))),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}class pc{constructor(t,e,n,r,i,s,o,a){this._i=t,this.Uo=n,this.Wo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new gc(t,e)}Jo(){return 1===this.state||5===this.state||this.Yo()}Yo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,(()=>this.t_())))}n_(t){this.r_(),this.stream.send(t)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(t,e){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,4!==t?this.Ho.reset():e&&e.code===zi.RESOURCE_EXHAUSTED?(Fi(e.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):e&&e.code===zi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Eo(e)}s_(){}auth(){this.state=1;const t=this.o_(this.Go),e=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Go===e&&this.__(t,n)}),(e=>{t((()=>{const t=new Ki(zi.UNKNOWN,"Fetching auth token failed: "+e.message);return this.a_(t)}))}))}__(t,e){const n=this.o_(this.Go);this.stream=this.u_(t,e),this.stream.Io((()=>{n((()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,(()=>(this.Yo()&&(this.state=3),Promise.resolve()))),this.listener.Io())))})),this.stream.Eo((t=>{n((()=>this.a_(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Zo(){this.state=5,this.Ho.Qo((async()=>{this.state=0,this.start()}))}a_(t){return Vi("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}o_(t){return e=>{this._i.enqueueAndForget((()=>this.Go===t?e():(Vi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mc extends pc{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}u_(t,e){return this.connection.Mo("Listen",t,e)}onMessage(t){this.Ho.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:qi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(ji(void 0===e||"string"==typeof e),xs.fromBase64String(e||"")):(ji(void 0===e||e instanceof Uint8Array),xs.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?zi.UNKNOWN:Ba(t.code);return new Ki(e,t.message||"")}(o);n=new Ya(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lh(t,r.document.name),s=hh(r.document.updateTime),o=r.document.createTime?hh(r.document.createTime):os.min(),a=new so({mapValue:{fields:r.document.fields}}),h=oo.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Qa(c,u,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lh(t,r.document),s=r.readTime?hh(r.readTime):os.min(),o=oo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lh(t,r.document),s=r.removedTargetIds||[];n=new Qa([],s,i,null)}else{if(!("filter"in e))return qi();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new Va(r,i),o=t.targetId;n=new Wa(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return os.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?os.min():e.readTime?hh(e.readTime):os.min()}(t);return this.listener.c_(e,n)}l_(t){const e={};e.database=fh(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=xo(r)?{documents:ph(t,r)}:{query:mh(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=ah(t,e.resumeToken);const r=sh(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(os.min())>0){n.readTime=oh(t,e.snapshotVersion.toTimestamp());const r=sh(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qi()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.n_(e)}h_(t){const e={};e.database=fh(this.serializer),e.removeTarget=t,this.n_(e)}}class yc extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.R_=!1}V_(){if(this.R_)throw new Ki(zi.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,e,n){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.bo(t,e,n,r,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ki(zi.UNKNOWN,t.toString())}))}Fo(t,e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Fo(t,e,n,i,s,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ki(zi.UNKNOWN,t.toString())}))}terminate(){this.R_=!0}}class vc{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve()))))}b_(t){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.w_("Offline")))}set(t){this.D_(),this.f_=0,"Online"===t&&(this.p_=!1),this.w_(t)}w_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}S_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(Fi(e),this.p_=!1):Vi("OnlineStateTracker",e)}D_(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}class wc{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=i,this.x_.so((t=>{n.enqueueAndForget((async()=>{Dc(this)&&(Vi("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=$i(t);e.F_.add(4),await Ec(e),e.O_.set("Unknown"),e.F_.delete(4),await _c(e)}(this))}))})),this.O_=new vc(n,r)}}async function _c(t){if(Dc(t))for(const e of t.M_)await e(!0)}async function Ec(t){for(const e of t.M_)await e(!1)}function bc(t,e){const n=$i(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),Ac(n)?Cc(n):Mc(n).Yo()&&Ic(n,e))}function Tc(t,e){const n=$i(t),r=Mc(n);n.v_.delete(e),r.Yo()&&Sc(n,e),0===n.v_.size&&(r.Yo()?r.e_():Dc(n)&&n.O_.set("Unknown"))}function Ic(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(os.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mc(t).l_(e)}function Sc(t,e){t.N_.Le(e),Mc(t).h_(e)}function Cc(t){t.N_=new Ja({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Mc(t).start(),t.O_.y_()}function Ac(t){return Dc(t)&&!Mc(t).Jo()&&t.v_.size>0}function Dc(t){return 0===$i(t).F_.size}function Nc(t){t.N_=void 0}async function kc(t){t.v_.forEach(((e,n)=>{Ic(t,e)}))}async function Rc(t,e){Nc(t),Ac(t)?(t.O_.b_(e),Cc(t)):t.O_.set("Unknown")}async function Lc(t,e,n){if(t.O_.set("Online"),e instanceof Ya&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.v_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.v_.delete(r),t.N_.removeTarget(r))}(t,e)}catch(n){Vi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await xc(t,n)}else if(e instanceof Qa?t.N_.Ge(e):e instanceof Wa?t.N_.Xe(e):t.N_.He(e),!n.isEqual(os.min()))try{const e=await Zh(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.N_._t(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.v_.get(r);i&&t.v_.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.v_.get(e);if(!r)return;t.v_.set(e,r.withResumeToken(xs.EMPTY_BYTE_STRING,r.snapshotVersion)),Sc(t,e);const i=new Ch(r.target,e,n,r.sequenceNumber);Ic(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Vi("RemoteStore","Failed to raise snapshot:",e),await xc(t,e)}}async function xc(t,e,n){if(!ws(e))throw e;t.F_.add(1),await Ec(t),t.O_.set("Offline"),n||(n=()=>Zh(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Vi("RemoteStore","Retrying IndexedDB access"),await n(),t.F_.delete(1),await _c(t)}))}async function Oc(t,e){const n=$i(t);n.asyncQueue.verifyOperationInProgress(),Vi("RemoteStore","RemoteStore received new credentials");const r=Dc(n);n.F_.add(3),await Ec(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),await _c(n)}function Mc(t){return t.B_||(t.B_=function(t,e,n){const r=$i(t);return r.V_(),new mc(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Io:kc.bind(null,t),Eo:Rc.bind(null,t),c_:Lc.bind(null,t)}),t.M_.push((async e=>{e?(t.B_.Xo(),Ac(t)?Cc(t):t.O_.set("Unknown")):(await t.B_.stop(),Nc(t))}))),t.B_}class Pc{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new Pc(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ki(zi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vc(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),ws(t))return new Ki(zi.UNAVAILABLE,`${e}: ${t}`);throw t}class Fc{constructor(t){this.comparator=t?(e,n)=>t(e,n)||ls.comparator(e.key,n.key):(t,e)=>ls.comparator(t.key,e.key),this.keyedMap=ta(),this.sortedSet=new Cs(this.comparator)}static emptySet(t){return new Fc(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Fc))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Fc;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Uc{constructor(){this.k_=new Cs(ls.comparator)}track(t){const e=t.doc.key,n=this.k_.get(e);n?0!==t.type&&3===n.type?this.k_=this.k_.insert(e,t):3===t.type&&1!==n.type?this.k_=this.k_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.k_=this.k_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.k_=this.k_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.k_=this.k_.remove(e):1===t.type&&2===n.type?this.k_=this.k_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.k_=this.k_.insert(e,{type:2,doc:t.doc}):qi():this.k_=this.k_.insert(e,t)}q_(){const t=[];return this.k_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Bc{constructor(t,e,n,r,i,s,o,a,h){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=h}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Bc(t,e,Fc.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class qc{constructor(){this.Q_=void 0,this.listeners=[]}}class jc{constructor(){this.queries=new Yo((t=>Ko(t)),zo),this.onlineState="Unknown",this.K_=new Set}}function $c(t,e){const n=$i(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.W_(t)&&(r=!0);i.Q_=t}}r&&Kc(n)}function zc(t,e,n){const r=$i(t),i=r.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);r.queries.delete(e)}function Kc(t){t.K_.forEach((t=>{t.next()}))}class Gc{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Bc(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=Bc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}class Hc{constructor(t){this.key=t}}class Qc{constructor(t){this.key=t}}class Wc{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=oa(),this.mutatedKeys=oa(),this.ua=Qo(t),this.ca=new Fc(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new Uc,r=e?e.ca:this.ca;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,h="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const c=r.get(t),u=Ho(this.query,e)?e:null,l=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?l!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||h&&this.ua(u,h)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||h)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{ca:s,Pa:n,es:o,mutatedKeys:i}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const i=t.Pa.q_();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qi()}};return n(t)-n(e)}(t.type,e.type)||this.ua(t.doc,e.doc))),this.da(n);const s=e?this.Ta():[],o=0===this.aa.size&&this.current?1:0,a=o!==this._a;return this._a=o,0!==i.length||a?{snapshot:new Bc(this.query,t.ca,r,i,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:s}:{Ea:s}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Uc,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}da(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ta(){if(!this.current)return[];const t=this.aa;this.aa=oa(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new Qc(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new Hc(n))})),e}Ra(t){this.oa=t.Ps,this.aa=oa();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return Bc.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Yc{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Xc{constructor(t){this.key=t,this.ma=!1}}class Jc{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Yo((t=>Ko(t)),zo),this.pa=new Map,this.ya=new Set,this.wa=new Cs(ls.comparator),this.Sa=new Map,this.ba=new Uh,this.Da={},this.Ca=new Map,this.va=xh.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Zc(t,e){const n=function(t){const e=$i(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eu.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ru.bind(null,e),e.fa.c_=$c.bind(null,e.eventManager),e.fa.xa=zc.bind(null,e.eventManager),e}(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const t=await function(t,e){const n=$i(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Kr.getTargetData(t,e).next((i=>i?(r=i,vs.resolve(r)):n.Kr.allocateTargetId(t).next((i=>(r=new Ch(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Kr.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.rs.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.rs=n.rs.insert(t.targetId,t),n.ss.set(e,t.targetId)),t}))}(n.localStore,qo(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await async function(t,e,n,r,i){t.Ma=(e,n,r)=>async function(t,e,n,r){let i=e.view.ha(n);i.es&&(i=await ec(t.localStore,e.query,!1).then((({documents:t})=>e.view.ha(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return ou(t,e.targetId,o.Ea),o.snapshot}(t,e,n,r);const s=await ec(t.localStore,e,!0),o=new Wc(e,s.Ps),a=o.ha(s.documents),h=Ha.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,h);ou(t,n,c.Ea);const u=new Yc(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}(n,e,r,"current"===s,t.resumeToken),n.isPrimaryClient&&bc(n.remoteStore,t)}return i}async function tu(t,e){const n=$i(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((t=>!zo(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await tc(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Tc(n.remoteStore,r.targetId),iu(n,r.targetId)})).catch(ys)):(iu(n,r.targetId),await tc(n.localStore,r.targetId,!0))}async function eu(t,e){const n=$i(t);try{const t=await function(t,e){const n=$i(t),r=e.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const o=[];e.targetChanges.forEach(((s,a)=>{const h=i.get(a);if(!h)return;o.push(n.Kr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Kr.addMatchingKeys(t,s.addedDocuments,a))));let c=h.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?c=c.withResumeToken(xs.EMPTY_BYTE_STRING,os.min()).withLastLimboFreeSnapshotVersion(os.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(h,c,s)&&o.push(n.Kr.updateTargetData(t,c))}));let a=Jo(),h=oa();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n){let r=oa(),i=oa();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=Jo();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(os.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):Vi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{ls:r,hs:i}}))}(t,s,e.documentUpdates).next((t=>{a=t.ls,h=t.hs}))),!r.isEqual(os.min())){const e=n.Kr.getLastRemoteSnapshotVersion(t).next((e=>n.Kr.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return vs.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,h))).next((()=>a))})).then((t=>(n.rs=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Sa.get(e);r&&(ji(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.ma=!0:t.modifiedDocuments.size>0?ji(r.ma):t.removedDocuments.size>0&&(ji(r.ma),r.ma=!1))})),await cu(n,t,e)}catch(t){await ys(t)}}function nu(t,e,n){const r=$i(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=$i(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.U_(e)&&(r=!0)})),r&&Kc(n)}(r.eventManager,e),t.length&&r.fa.c_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ru(t,e,n){const r=$i(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let t=new Cs(ls.comparator);t=t.insert(s,oo.newNoDocument(s,os.min()));const n=oa().add(s),i=new Ga(os.min(),new Map,new Cs(rs),t,n);await eu(r,i),r.wa=r.wa.remove(s),r.Sa.delete(e),hu(r)}else await tc(r.localStore,e,!1).then((()=>iu(r,e,n))).catch(ys)}function iu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach((e=>{t.ba.containsKey(e)||su(t,e)}))}function su(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(Tc(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),hu(t))}function ou(t,e,n){for(const r of n)r instanceof Hc?(t.ba.addReference(r.key,e),au(t,r)):r instanceof Qc?(Vi("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||su(t,r.key)):qi()}function au(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(Vi("SyncEngine","New document in limbo: "+n),t.ya.add(r),hu(t))}function hu(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new ls(hs.fromString(e)),r=t.va.next();t.Sa.set(r,new Xc(n)),t.wa=t.wa.insert(n,r),bc(t.remoteStore,new Ch(qo(Mo(n.path)),r,"TargetPurposeLimboResolution",_s.ae))}}async function cu(t,e,n){const r=$i(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((t,a)=>{o.push(r.Ma(a,e,n).then((t=>{if((t||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){i.push(t);const e=Qh.$i(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.fa.c_(i),await async function(t,e){const n=$i(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>vs.forEach(e,(e=>vs.forEach(e.Qi,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>vs.forEach(e.Ki,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!ws(t))throw t;Vi("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.rs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.rs=n.rs.insert(e,i)}}}(r.localStore,s))}async function uu(t,e){const n=$i(t);if(!n.currentUser.isEqual(e)){Vi("SyncEngine","User change. New user:",e.toKey());const t=await Jh(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new Ki(zi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await cu(n,t.cs)}}function lu(t,e){const n=$i(t),r=n.Sa.get(e);if(r&&r.ma)return oa().add(r.key);{let t=oa();const r=n.pa.get(e);if(!r)return t;for(const e of r){const r=n.ga.get(e);t=t.unionWith(r.view.la)}return t}}class du{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=fc(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,r){return new Xh(t,e,n,r)}(this.persistence,new Yh,t.initialUser,this.serializer)}createPersistence(t){return new Kh(Hh.Jr,this.serializer)}createSharedClientState(t){return new rc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class fu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>nu(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=uu.bind(null,this.syncEngine),await async function(t,e){const n=$i(t);e?(n.F_.delete(2),await _c(n)):e||(n.F_.add(2),await Ec(n),n.O_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new jc}createDatastore(t){const e=fc(t.databaseInfo.databaseId),n=function(t){return new lc(t)}(t.databaseInfo);return function(t,e,n,r){return new yc(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new wc(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>nu(this.syncEngine,t,0)),sc.C()?new sc:new ic)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Jc(t,e,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=$i(t);Vi("RemoteStore","RemoteStore shutting down."),e.F_.add(5),await Ec(e),e.x_.shutdown(),e.O_.set("Unknown")}(this.remoteStore)}}class gu{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Fi("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class pu{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=xi.UNAUTHENTICATED,this.clientId=ns.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Vi("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Vi("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ki(zi.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Vc(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function mu(t,e){t.asyncQueue.verifyOperationInProgress(),Vi("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await Jh(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function yu(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Vi("FirestoreClient","Using user provided OfflineComponentProvider");try{await mu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===zi.FAILED_PRECONDITION||t.code===zi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Ui("Error using user provided cache. Falling back to memory cache: "+n),await mu(t,new du)}}else Vi("FirestoreClient","Using default OfflineComponentProvider"),await mu(t,new du);return t._offlineComponents}(t);Vi("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>Oc(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Oc(e.remoteStore,n))),t._onlineComponents=e}async function vu(t){const e=await async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Vi("FirestoreClient","Using user provided OnlineComponentProvider"),await yu(t,t._uninitializedComponentsProvider._online)):(Vi("FirestoreClient","Using default OnlineComponentProvider"),await yu(t,new fu))),t._onlineComponents}(t),n=e.eventManager;return n.onListen=Zc.bind(null,e.syncEngine),n.onUnlisten=tu.bind(null,e.syncEngine),n}function wu(t,e,n={}){const r=new Gi;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new gu({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=$i(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(t,o))),n.fromCache&&"server"===r.source?i.reject(new Ki(zi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Gc(n,s,{includeMetadataChanges:!0,Z_:!0});return async function(t,e){const n=$i(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new qc),i)try{s.Q_=await n.onListen(r)}catch(t){const n=Vc(t,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.U_(n.onlineState),s.Q_&&e.W_(s.Q_)&&Kc(n)}(t,o)}(await vu(t),t.asyncQueue,e,n,r))),r.promise}function _u(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Eu=new Map;function bu(t){if(ls.isDocumentKey(t))throw new Ki(zi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tu(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":qi()}function Iu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ki(zi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tu(t);throw new Ki(zi.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Su{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Ki(zi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ki(zi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new Ki(zi.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_u(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Ki(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Ki(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Ki(zi.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Cu{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Su({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ki(zi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ki(zi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Su(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Qi;switch(t.type){case"firstParty":return new Ji(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ki(zi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Eu.get(t);e&&(Vi("ComponentProvider","Removing Datastore"),Eu.delete(t),e.terminate())}(this),Promise.resolve()}}class Au{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Au(this.firestore,t,this._query)}}class Du{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Du(this.firestore,t,this._key)}}class Nu extends Au{constructor(t,e,n){super(t,e,Mo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Du(this.firestore,null,new ls(t))}withConverter(t){return new Nu(this.firestore,t,this._path)}}function ku(t,e,...n){if(t=f(t),function(t,e,n){if(!n)throw new Ki(zi.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}("collection","path",e),t instanceof Cu){const r=hs.fromString(e,...n);return bu(r),new Nu(t,null,r)}{if(!(t instanceof Du||t instanceof Nu))throw new Ki(zi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(hs.fromString(e,...n));return bu(r),new Nu(t.firestore,null,r)}}class Ru{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new gc(this,"async_queue_retry"),this.ou=()=>{const t=dc();t&&Vi("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ho.$o()};const t=dc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this._u(),this.au(t)}enterRestrictedMode(t){if(!this.eu){this.eu=!0,this.iu=t||!1;const e=dc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.ou)}}enqueue(t){if(this._u(),this.eu)return new Promise((()=>{}));const e=new Gi;return this.au((()=>this.eu&&this.iu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xa.push(t),this.uu())))}async uu(){if(0!==this.Xa.length){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(t){if(!ws(t))throw t;Vi("AsyncQueue","Operation failed with retryable error: "+t)}this.Xa.length>0&&this.Ho.Qo((()=>this.uu()))}}au(t){const e=this.Za.then((()=>(this.ru=!0,t().catch((t=>{this.nu=t,this.ru=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Fi("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.ru=!1,t))))));return this.Za=e,e}enqueueAfterDelay(t,e,n){this._u(),this.su.indexOf(t)>-1&&(e=0);const r=Pc.createAndSchedule(this,t,e,n,(t=>this.cu(t)));return this.tu.push(r),r}_u(){this.nu&&qi()}verifyOperationInProgress(){}async lu(){let t;do{t=this.Za,await t}while(t!==this.Za)}hu(t){for(const e of this.tu)if(e.timerId===t)return!0;return!1}Pu(t){return this.lu().then((()=>{this.tu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.tu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.lu()}))}Iu(t){this.su.push(t)}cu(t){const e=this.tu.indexOf(t);this.tu.splice(e,1)}}class Lu extends Cu{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new Ru,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xu(this),this._firestoreClient.terminate()}}function xu(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new qs(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,_u(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new pu(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Ou{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ou(xs.fromBase64String(t))}catch(t){throw new Ki(zi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Ou(xs.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Mu{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ki(zi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new us(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Pu{constructor(t){this._methodName=t}}class Vu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ki(zi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ki(zi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return rs(this._lat,t._lat)||rs(this._long,t._long)}}const Fu=/^__.*__$/;function Uu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qi()}}class Bu{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.du(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(t){return new Bu(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Eu({path:n,Ru:!1});return r.Vu(t),r}mu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Eu({path:n,Ru:!1});return r.du(),r}fu(t){return this.Eu({path:void 0,Ru:!0})}gu(t){return Hu(t,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}du(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vu(this.path.get(t))}Vu(t){if(0===t.length)throw this.gu("Document fields must not be empty");if(Uu(this.Tu)&&Fu.test(t))throw this.gu('Document fields cannot begin and end with "__"')}}class qu{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||fc(t)}wu(t,e,n,r=!1){return new Bu({Tu:t,methodName:e,yu:n,path:us.emptyPath(),Ru:!1,pu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ju(t){const e=t._freezeSettings(),n=fc(t._databaseId);return new qu(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $u(t,e,n,r=!1){return zu(n,t.wu(r?4:3,e))}function zu(t,e){if(Ku(t=f(t)))return function(t,e,n){if(!Ku(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=Tu(n);throw"an object"===r?e.gu(t+" a custom object"):e.gu(t+" "+r)}}("Unsupported field value:",e,t),function(t,e){const n={};return Ss(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(t,((t,r)=>{const i=zu(r,e.Au(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}(t,e);if(t instanceof Pu)return function(t,e){if(!Uu(e.Tu))throw e.gu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.gu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ru&&4!==e.Tu)throw e.gu("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=zu(i,e.fu(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=f(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ua(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=ss.fromDate(t);return{timestampValue:oh(e.serializer,n)}}if(t instanceof ss){const n=new ss(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:oh(e.serializer,n)}}if(t instanceof Vu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ou)return{bytesValue:ah(e.serializer,t._byteString)};if(t instanceof Du){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.gu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ch(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.gu(`Unsupported field value: ${Tu(t)}`)}(t,e)}function Ku(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ss||t instanceof Vu||t instanceof Ou||t instanceof Du||t instanceof Pu)}const Gu=new RegExp("[~\\*/\\[\\]]");function Hu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let h="";return(s||o)&&(h+=" (found",s&&(h+=` in field ${r}`),o&&(h+=` in document ${i}`),h+=")"),new Ki(zi.INVALID_ARGUMENT,a+t+h)}class Qu{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Du(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Wu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Yu("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Wu extends Qu{data(){return super.data()}}function Yu(t,e){return"string"==typeof e?function(t,e,n){if(e.search(Gu)>=0)throw Hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mu(...e.split("."))._internalPath}catch(r){throw Hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e):e instanceof Mu?e._internalPath:e._delegate._internalPath}class Xu{}class Ju extends Xu{}function Zu(t,e,...n){let r=[];e instanceof Xu&&r.push(e),r=r.concat(n),function(t){const e=t.filter((t=>t instanceof nl)).length,n=t.filter((t=>t instanceof tl)).length;if(e>1||e>0&&n>0)throw new Ki(zi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const e of r)t=e._apply(t);return t}class tl extends Ju{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new tl(t,e,n)}_apply(t){const e=this._parse(t);return ll(t._query,e),new Au(t.firestore,t.converter,jo(t._query,e))}_parse(t){const e=ju(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ki(zi.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){ul(o,s);const e=[];for(const n of o)e.push(cl(r,t,n));a={arrayValue:{values:e}}}else a=cl(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ul(o,s),a=$u(n,"where",o,"in"===s||"not-in"===s);return go.create(i,s,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function el(t,e,n){const r=e,i=Yu("where",t);return tl._create(i,r,n)}class nl extends Xu{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new nl(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:po.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const r=e.getFlattenedFilters();for(const t of r)ll(n,t),n=jo(n,t)}(t._query,e),new Au(t.firestore,t.converter,jo(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rl extends Ju{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new rl(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Ki(zi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ki(zi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new uo(e,n);return function(t,e){if(null===Vo(t)){const n=Fo(t);null!==n&&dl(0,n,e.field)}}(t,r),r}(t._query,this._field,this._direction);return new Au(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Oo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function il(t,e="asc"){const n=e,r=Yu("orderBy",t);return rl._create(r,n)}class sl extends Ju{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new sl(t,e,n)}_apply(t){return new Au(t.firestore,t.converter,$o(t._query,this._limit,this._limitType))}}function ol(t){return function(t,e){if(e<=0)throw new Ki(zi.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}("limit",t),sl._create("limit",t,"F")}class al extends Ju{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new al(t,e,n)}_apply(t){const e=function(t,e,n,r){if(n[0]=f(n[0]),n[0]instanceof Qu)return function(t,e,n,r,i){if(!r)throw new Ki(zi.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of Bo(t))if(n.field.isKeyField())s.push(Xs(e,r.key));else{const t=r.data.field(n.field);if(Fs(t))throw new Ki(zi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=n.field.canonicalString();throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new ao(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=ju(t.firestore);return function(t,e,n,r,i,s){const o=t.explicitOrderBy;if(i.length>o.length)throw new Ki(zi.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const h=i[s];if(o[s].field.isKeyField()){if("string"!=typeof h)throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof h}`);if(!Uo(t)&&-1!==h.indexOf("/"))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${h}' contains a slash.`);const n=t.path.child(hs.fromString(h));if(!ls.isDocumentKey(n))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ls(n);a.push(Xs(e,i))}else{const t=$u(n,r,h);a.push(t)}}return new ao(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}}(t,this.type,this._docOrFields,this._inclusive);return new Au(t.firestore,t.converter,function(t,e){return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function hl(...t){return al._create("startAfter",t,!1)}function cl(t,e,n){if("string"==typeof(n=f(n))){if(""===n)throw new Ki(zi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uo(e)&&-1!==n.indexOf("/"))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(hs.fromString(n));if(!ls.isDocumentKey(r))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xs(t,new ls(r))}if(n instanceof Du)return Xs(t,n._key);throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tu(n)}.`)}function ul(t,e){if(!Array.isArray(t)||0===t.length)throw new Ki(zi.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ll(t,e){if(e.isInequality()){const n=Fo(t),r=e.field;if(null!==n&&!n.isEqual(r))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=Vo(t);null!==i&&dl(0,r,i)}const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Ki(zi.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ki(zi.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function dl(t,e,n){if(!n.isEqual(e))throw new Ki(zi.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class fl{convertValue(t,e="none"){switch(zs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ps(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw qi()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Is(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Vu(Ps(t.latitude),Ps(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Us(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Bs(t));default:return null}}convertTimestamp(t){const e=Ms(t);return new ss(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=hs.fromString(t);ji(Sh(n));const r=new js(n.get(1),n.get(3)),i=new ls(n.popFirst(5));return r.isEqual(e)||Fi(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}class gl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class pl extends Qu{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Yu("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class ml extends pl{data(t={}){return super.data(t)}}class yl{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new gl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new ml(this._firestore,this._userDataWriter,n.key,n,new gl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ki(zi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new ml(t._firestore,t._userDataWriter,n.doc.key,n.doc,new gl(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new ml(t._firestore,t._userDataWriter,e.doc.key,e.doc,new gl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:vl(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vl(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qi()}}class wl extends fl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ou(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Du(this.firestore,null,e)}}function _l(t){t=Iu(t,Au);const e=Iu(t.firestore,Lu),n=function(t){return t._firestoreClient||xu(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(e),r=new wl(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Ki(zi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),wu(n,t._query).then((n=>new yl(e,r,t,n)))}new WeakMap,function(t,e=!0){Oi="10.4.0",J(new g("firestore",((t,{instanceIdentifier:n,options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Lu(new Yi(t.getProvider("auth-internal")),new ts(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ki(zi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new js(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),nt(Li,"4.2.0",t),nt(Li,"4.2.0","esm2017")}(),nt("firebase","10.4.0","app");const El=function(t,e){const n="string"==typeof t?t:"(default)",r=function(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}("object"==typeof t?t:function(t=H){const e=W.get(t);if(!e&&t===H&&o())return et();if(!e)throw Z.create("no-app",{appName:t});return e}(),"firestore").getImmediate({identifier:n});if(!r._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=s())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");t&&function(t,e,n,r={}){var s;const o=(t=Iu(t,Cu))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&Ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=xi.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i(JSON.stringify({alg:"none",type:"JWT"})),i(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Ki(zi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new xi(o)}t._authCredentials=new Wi(new Hi(e,n))}}(r,...t)}return r}(et({apiKey:"AIzaSyDtEkRwxjahEQUlY6FzBMCvmlCPAhCQiiA",authDomain:"the-aggregator-test.firebaseapp.com",projectId:"the-aggregator-test",storageBucket:"the-aggregator-test.appspot.com",messagingSenderId:"935577100983",appId:"1:935577100983:web:6aba1d3741f773010ce332"})),bl=function(t){const e=document.getElementById("itemContainer");e.innerHTML="",t.forEach((t=>{const n=t.data(),r=document.createElement("div");r.innerHTML=`\n        <div>\n          <h3>${n.title}</h3>\n          <p>Date: ${n.date}</p>\n          <p>${n.description}</p>\n          <p>Source: ${n.source}</p>\n          <a href="${n.url}" target="_blank">Read more</a>\n        </div>\n        <hr>\n      `,e.appendChild(r)}))},Tl=(()=>{function t(t){return t?t.docs[t.docs.length-1]:null}return{getHomeQuery:function(e,n=null){const r=ku(e,"all-items"),i=t(n);let s=Zu(r,il("timestamp","desc"),ol(10));return i&&(s=Zu(r,il("timestamp","desc"),ol(10),hl(i))),_l(s)},getCategoryQuery:function(e,n,r=null){const i=ku(e,"all-items"),s=t(r);let o=Zu(i,il("timestamp","desc"),ol(10),el("category","==",n));return s&&(o=Zu(i,il("timestamp","desc"),ol(10),el("category","==",n),hl(s))),_l(o)}}})();Tl.getCategoryQuery(El,"ai",null).then((t=>(console.log("First: "),t.forEach((t=>console.log(t.data().title))),bl(t),Tl.getCategoryQuery(El,"ai",t)))).then((t=>(console.log("Second: "),t.forEach((t=>console.log(t.data().title))),bl(t),Tl.getCategoryQuery(El,"ai",t)))).then((t=>{console.log("Third: "),t.forEach((t=>console.log(t.data().title))),bl(t)})).catch((t=>console.error(t)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3Ivd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2luZGV4LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdGhlX2FnZ3JlZ2F0b3IvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL3NyYy9maXJlYmFzZS10ZXN0LmpzIiwid2VicGFjazovL3RoZV9hZ2dyZWdhdG9yLy4vc3JjL3JlbmRlci5qcyIsIndlYnBhY2s6Ly90aGVfYWdncmVnYXRvci8uL3NyYy9sb2dpYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxuY29uc3QgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG5jb25zdCBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBFcnJvcignRmlyZWJhc2UgRGF0YWJhc2UgKCcgK1xyXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXHJcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXHJcbiAgICAgICAgbWVzc2FnZSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxyXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcclxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXHJcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cclxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXHJcbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cclxuICovXHJcbmNvbnN0IGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMTkxICYmIGMxIDwgMjI0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxuY29uc3QgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERlY29kZUJhc2U2NFN0cmluZ0Vycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cclxuICovXHJcbmNsYXNzIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3InO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbmNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cclxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxyXG4gKi9cclxuY29uc3QgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBVc2UgYmFzZTY0dXJsIGVuY29kaW5nIGFuZCByZW1vdmUgcGFkZGluZyBpbiB0aGUgZW5kIChkb3QgY2hhcmFjdGVycykuXHJcbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxuY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdiYXNlNjREZWNvZGUgZmFpbGVkOiAnLCBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICpcclxuICogTm90ZTogd2UgZG9uJ3QgbWVyZ2UgX19wcm90b19fIHRvIHByZXZlbnQgcHJvdG90eXBlIHBvbGx1dGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIGNhc2UgRGF0ZTpcclxuICAgICAgICAgICAgLy8gVHJlYXQgRGF0ZXMgbGlrZSBzY2FsYXJzOyBpZiB0aGUgdGFyZ2V0IGRhdGUgb2JqZWN0IGhhZCBhbnkgY2hpbGRcclxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBpc1ZhbGlkS2V5IHRvIGd1YXJkIGFnYWluc3QgcHJvdG90eXBlIHBvbGx1dGlvbi4gU2VlIGh0dHBzOi8vc255ay5pby92dWxuL1NOWUstSlMtTE9EQVNILTQ1MDIwMlxyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcclxuICAgIHJldHVybiBrZXkgIT09ICdfX3Byb3RvX18nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdC4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0c0Zyb21HbG9iYWwgPSAoKSA9PiBnZXRHbG9iYWwoKS5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbi8qKlxyXG4gKiBBdHRlbXB0IHRvIHJlYWQgZGVmYXVsdHMgZnJvbSBhIEpTT04gc3RyaW5nIHByb3ZpZGVkIHRvXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb3IgYSBKU09OIGZpbGUgd2hvc2UgcGF0aCBpcyBpblxyXG4gKiBwcm9jZXNzKC4pZW52KC4pX19GSVJFQkFTRV9ERUZBVUxUU19QQVRIX19cclxuICogVGhlIGRvdHMgYXJlIGluIHBhcmVucyBiZWNhdXNlIGNlcnRhaW4gY29tcGlsZXJzIChWaXRlPykgY2Fubm90XHJcbiAqIGhhbmRsZSBzZWVpbmcgdGhhdCB2YXJpYWJsZSBpbiBjb21tZW50cy5cclxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzY4MzhcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVmYXVsdHNKc29uU3RyaW5nID0gcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xyXG4gICAgaWYgKGRlZmF1bHRzSnNvblN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlZmF1bHRzSnNvblN0cmluZyk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUNvb2tpZSA9ICgpID0+IHtcclxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG1hdGNoO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgvX19GSVJFQkFTRV9ERUZBVUxUU19fPShbXjtdKykvKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gU29tZSBlbnZpcm9ubWVudHMgc3VjaCBhcyBBbmd1bGFyIFVuaXZlcnNhbCBTU1IgaGF2ZSBhXHJcbiAgICAgICAgLy8gYGRvY3VtZW50YCBvYmplY3QgYnV0IGVycm9yIG9uIGFjY2Vzc2luZyBgZG9jdW1lbnQuY29va2llYC5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWNvZGVkID0gbWF0Y2ggJiYgYmFzZTY0RGVjb2RlKG1hdGNoWzFdKTtcclxuICAgIHJldHVybiBkZWNvZGVkICYmIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbn07XHJcbi8qKlxyXG4gKiBHZXQgdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuIEl0IGNoZWNrcyBpbiBvcmRlcjpcclxuICogKDEpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBhcyBhIHByb3BlcnR5IG9mIGBnbG9iYWxUaGlzYFxyXG4gKiAoMikgaWYgc3VjaCBhbiBvYmplY3Qgd2FzIHByb3ZpZGVkIG9uIGEgc2hlbGwgZW52aXJvbm1lbnQgdmFyaWFibGVcclxuICogKDMpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBpbiBhIGNvb2tpZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0cyA9ICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChnZXREZWZhdWx0c0Zyb21HbG9iYWwoKSB8fFxyXG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21FbnZWYXJpYWJsZSgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUNvb2tpZSgpKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2F0Y2gtYWxsIGZvciBiZWluZyB1bmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWVcclxuICAgICAgICAgKiB0byBhbnkgZW52aXJvbm1lbnQgY2FzZSB3ZSBoYXZlIG5vdCBhY2NvdW50ZWQgZm9yLiBMb2cgdG9cclxuICAgICAgICAgKiBpbmZvIGluc3RlYWQgb2Ygc3dhbGxvd2luZyBzbyB3ZSBjYW4gZmluZCB0aGVzZSB1bmtub3duIGNhc2VzXHJcbiAgICAgICAgICogYW5kIGFkZCBwYXRocyBmb3IgdGhlbSBpZiBuZWVkZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc29sZS5pbmZvKGBVbmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWUgdG86ICR7ZX1gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3Qgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBVUkwgaG9zdCBmb3JtYXR0ZWQgbGlrZSBgMTI3LjAuMC4xOjk5OTlgIG9yIGBbOjoxXTo0MDAwYCBpZiBhdmFpbGFibGVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCA9IChwcm9kdWN0TmFtZSkgPT4geyB2YXIgX2EsIF9iOyByZXR1cm4gKF9iID0gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtdWxhdG9ySG9zdHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYltwcm9kdWN0TmFtZV07IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3RuYW1lIGFuZCBwb3J0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxyXG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXHJcbiAqIEByZXR1cm5zIGEgcGFpciBvZiBob3N0bmFtZSBhbmQgcG9ydCBsaWtlIGBbXCI6OjFcIiwgNDAwMF1gIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQgPSAocHJvZHVjdE5hbWUpID0+IHtcclxuICAgIGNvbnN0IGhvc3QgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0KHByb2R1Y3ROYW1lKTtcclxuICAgIGlmICghaG9zdCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IGhvc3QubGFzdEluZGV4T2YoJzonKTsgLy8gRmluZGluZyB0aGUgbGFzdCBzaW5jZSBJUHY2IGFkZHIgYWxzbyBoYXMgY29sb25zLlxyXG4gICAgaWYgKHNlcGFyYXRvckluZGV4IDw9IDAgfHwgc2VwYXJhdG9ySW5kZXggKyAxID09PSBob3N0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBob3N0ICR7aG9zdH0gd2l0aCBubyBzZXBhcmF0ZSBob3N0bmFtZSBhbmQgcG9ydCFgKTtcclxuICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuICAgIGNvbnN0IHBvcnQgPSBwYXJzZUludChob3N0LnN1YnN0cmluZyhzZXBhcmF0b3JJbmRleCArIDEpLCAxMCk7XHJcbiAgICBpZiAoaG9zdFswXSA9PT0gJ1snKSB7XHJcbiAgICAgICAgLy8gQnJhY2tldC1xdW90ZWQgYFtpcHY2YWRkcl06cG9ydGAgPT4gcmV0dXJuIFwiaXB2NmFkZHJcIiAod2l0aG91dCBicmFja2V0cykuXHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygxLCBzZXBhcmF0b3JJbmRleCAtIDEpLCBwb3J0XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLCBwb3J0XTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgRmlyZWJhc2UgYXBwIGNvbmZpZyBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRBcHBDb25maWcgPSAoKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb25maWc7IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIGV4cGVyaW1lbnRhbCBzZXR0aW5nIG9uIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0IChwcm9wZXJ0aWVzXHJcbiAqIHByZWZpeGVkIGJ5IFwiX1wiKVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXRFeHBlcmltZW50YWxTZXR0aW5nID0gKG5hbWUpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2BfJHtuYW1lfWBdOyB9O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBEZWZlcnJlZCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICB3cmFwQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xyXG4gICAgaWYgKHRva2VuLnVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXHJcbiAgICBjb25zdCBoZWFkZXIgPSB7XHJcbiAgICAgICAgYWxnOiAnbm9uZScsXHJcbiAgICAgICAgdHlwZTogJ0pXVCdcclxuICAgIH07XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkIHx8ICdkZW1vLXByb2plY3QnO1xyXG4gICAgY29uc3QgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XHJcbiAgICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcclxuICAgIGlmICghc3ViKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKHsgXHJcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXHJcbiAgICAgICAgaXNzOiBgaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tLyR7cHJvamVjdH1gLCBhdWQ6IHByb2plY3QsIGlhdCwgZXhwOiBpYXQgKyAzNjAwLCBhdXRoX3RpbWU6IGlhdCwgc3ViLCB1c2VyX2lkOiBzdWIsIGZpcmViYXNlOiB7XHJcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0gfSwgdG9rZW4pO1xyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXHJcbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgXS5qb2luKCcuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQgb3Igc3BlY2lmaWVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGZvcmNlRW52aXJvbm1lbnQgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yY2VFbnZpcm9ubWVudDtcclxuICAgIGlmIChmb3JjZUVudmlyb25tZW50ID09PSAnbm9kZScpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdicm93c2VyJykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBpc0Jyb3dzZXJFeHRlbnNpb24oKSB7XHJcbiAgICBjb25zdCBydW50aW1lID0gdHlwZW9mIGNocm9tZSA9PT0gJ29iamVjdCdcclxuICAgICAgICA/IGNocm9tZS5ydW50aW1lXHJcbiAgICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgPyBicm93c2VyLnJ1bnRpbWVcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJ1bnRpbWUgPT09ICdvYmplY3QnICYmIHJ1bnRpbWUuaWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKiBEZXRlY3RzIEVsZWN0cm9uIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdFbGVjdHJvbi8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xyXG5mdW5jdGlvbiBpc0lFKCkge1xyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpO1xyXG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUgJykgPj0gMCB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgVW5pdmVyc2FsIFdpbmRvd3MgUGxhdGZvcm0gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNVV1AoKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdNU0FwcEhvc3QvJykgPj0gMDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTm9kZVNkaygpIHtcclxuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XHJcbn1cclxuLyoqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgcnVubmluZyBpbiBTYWZhcmkuICovXHJcbmZ1bmN0aW9uIGlzU2FmYXJpKCkge1xyXG4gICAgcmV0dXJuICghaXNOb2RlKCkgJiZcclxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxyXG4gICAgICAgICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKSk7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqICAgLy8gVHlwZXNjcmlwdCBzdHJpbmcgbGl0ZXJhbHMgZm9yIHR5cGUtc2FmZSBjb2Rlc1xyXG4gKiAgIHR5cGUgRXJyID1cclxuICogICAgICd1bmtub3duJyB8XHJcbiAqICAgICAnb2JqZWN0LW5vdC1mb3VuZCdcclxuICogICAgIDtcclxuICpcclxuICogICAvLyBDbG9zdXJlIGVudW0gZm9yIHR5cGUtc2FmZSBlcnJvciBjb2Rlc1xyXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cclxuICogICB2YXIgRXJyID0ge1xyXG4gKiAgICAgVU5LTk9XTjogJ3Vua25vd24nLFxyXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxyXG4gKiAgIH1cclxuICpcclxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xyXG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcclxuICogICAgICdmaWxlLW5vdC1mb3VuZCc6IFwiQ291bGQgbm90IGZpbmQgZmlsZTogeyRmaWxlfVwiLFxyXG4gKiAgIH07XHJcbiAqXHJcbiAqICAgLy8gVHlwZS1zYWZlIGZ1bmN0aW9uIC0gbXVzdCBwYXNzIGEgdmFsaWQgZXJyb3IgY29kZSBhcyBwYXJhbS5cclxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XHJcbiAqXHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkZJTEVfTk9UX0ZPVU5ELCB7J2ZpbGUnOiBmaWxlTmFtZX0pO1xyXG4gKiAgIC4uLlxyXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxyXG4gKlxyXG4gKiAgIGNhdGNoIChlKSB7XHJcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xyXG4gKiAgICAgaWYgKChlIGFzIEZpcmViYXNlRXJyb3IpPy5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIFRoZSBlcnJvciBjb2RlIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY29kZSwgbWVzc2FnZSwgXHJcbiAgICAvKiogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZWplY3RzIGlmIHRoZSBnaXZlbiBwcm9taXNlIGRvZXNuJ3QgcmVzb2x2ZSBpbiB0aW1lSW5NUyBtaWxsaXNlY29uZHMuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gcHJvbWlzZVdpdGhUaW1lb3V0KHByb21pc2UsIHRpbWVJbk1TID0gMjAwMCkge1xyXG4gICAgY29uc3QgZGVmZXJyZWRQcm9taXNlID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IGRlZmVycmVkUHJvbWlzZS5yZWplY3QoJ3RpbWVvdXQhJyksIHRpbWVJbk1TKTtcclxuICAgIHByb21pc2UudGhlbihkZWZlcnJlZFByb21pc2UucmVzb2x2ZSwgZGVmZXJyZWRQcm9taXNlLnJlamVjdCk7XHJcbiAgICByZXR1cm4gZGVmZXJyZWRQcm9taXNlLnByb21pc2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goYXJyYXlWYWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxyXG4gKiAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XHJcbiAgICBjb25zdCBvYmogPSB7fTtcclxuICAgIGNvbnN0IHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkge1xyXG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XHJcbiAgICBpZiAoIXF1ZXJ5U3RhcnQpIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFnbWVudFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnLCBxdWVyeVN0YXJ0KTtcclxuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxuY2xhc3MgU2hhMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xyXG4gICAgICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFpbl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cclxuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuV18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWRfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xyXG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKGxldCBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xyXG4gICAgICAgICAgICBXW2ldID0gKCh0IDw8IDEpIHwgKHQgPj4+IDMxKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5jaGFpbl9bMV07XHJcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xyXG4gICAgICAgIGxldCBlID0gdGhpcy5jaGFpbl9bNF07XHJcbiAgICAgICAgbGV0IGYsIGs7XHJcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGQgXiAoYiAmIChjIF4gZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgNjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxlbmd0aE1pbnVzQmxvY2sgPSBsZW5ndGggLSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXHJcbiAgICAgICAgY29uc3QgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIGxldCBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBkaWdlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcclxuICAgICAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXHJcbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XHJcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xyXG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xyXG4gICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWdlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXHJcbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSBvbk5vT2JzZXJ2ZXJzO1xyXG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxyXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cclxuICAgICAgICAvLyBjYW4gc3RpbGwgcmVjZWl2ZSB0aGUgdmVyeSBmaXJzdCB2YWx1ZSBnZW5lcmF0ZWQgaW4gdGhlIGV4ZWN1dG9yLlxyXG4gICAgICAgIHRoaXMudGFza1xyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKHRoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5leHQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9XHJcbiAgICBjb21wbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBzdWJzY3JpYmUobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIGxldCBvYnNlcnZlcjtcclxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBlcnJvciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxyXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xyXG4gICAgICAgICAgICAnbmV4dCcsXHJcbiAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICdjb21wbGV0ZSdcclxuICAgICAgICBdKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcclxuICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxyXG4gICAgICAgIC8vIGp1c3QgcmVzcG9uZCB0byB0aGUgT2JzZXJ2ZXIgd2l0aCB0aGUgZmluYWwgZXJyb3Igb3IgY29tcGxldGVcclxuICAgICAgICAvLyBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9XHJcbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xyXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cclxuICAgIHVuc3Vic2NyaWJlT25lKGkpIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvckVhY2hPYnNlcnZlcihmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgc2VuZE9uZShpLCBmbikge1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbih0aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKGVycikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgbGV0IGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBmbk5hbWUgK1xyXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBhcmdDb3VudCArXHJcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcclxuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xyXG4gICAgICAgICAgICBhcmdFcnJvciArXHJcbiAgICAgICAgICAgICcuJztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIGFyZ05hbWUgVGhlIG5hbWUgb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJnTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke2ZuTmFtZX0gZmFpbGVkOiAke2FyZ05hbWV9IGFyZ3VtZW50IGA7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIG5hbWVzcGFjZSwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ25hbWVzcGFjZScpICsgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TmFtZSwgXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE5hbWUsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cclxuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbmNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb3BpZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyM1xyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgdXVpZC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgdXVpZHY0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgYyA9PiB7XHJcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XHJcbiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgfSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcclxuLyoqXHJcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgTUFYX1ZBTFVFX01JTExJUyA9IDQgKiA2MCAqIDYwICogMTAwMDsgLy8gRm91ciBob3VycywgbGlrZSBpT1MgYW5kIEFuZHJvaWQuXHJcbi8qKlxyXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxyXG4gKiBTZWVcclxuICogaHR0cDovL2dvL3NhZmUtY2xpZW50LWJlaGF2aW9yI3N0ZXAtMS1kZXRlcm1pbmUtdGhlLWFwcHJvcHJpYXRlLXJldHJ5LWludGVydmFsLXRvLWhhbmRsZS1zcGlrZS10cmFmZmljXHJcbiAqIGZvciBjb250ZXh0LlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUywgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpIHtcclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIGNvbnN0IGN1cnJCYXNlVmFsdWUgPSBpbnRlcnZhbE1pbGxpcyAqIE1hdGgucG93KGJhY2tvZmZGYWN0b3IsIGJhY2tvZmZDb3VudCk7XHJcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxyXG4gICAgLy8gRGV2aWF0aW9uOiByYW5kb21GYWN0b3IgaXMgcmVxdWlyZWQuXHJcbiAgICBjb25zdCByYW5kb21XYWl0ID0gTWF0aC5yb3VuZChcclxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXHJcbiAgICBSQU5ET01fRkFDVE9SICpcclxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcclxuICAgICAgICAvLyBBIHJhbmRvbSBmbG9hdCAocm91bmRlZCB0byBpbnQgYnkgTWF0aC5yb3VuZCBhYm92ZSkgaW4gdGhlIHJhbmdlIFstMSwgMV0uIERldGVybWluZXNcclxuICAgICAgICAvLyBpZiB3ZSBhZGQgb3Igc3VidHJhY3QuXHJcbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcclxuICAgICAgICAyKTtcclxuICAgIC8vIExpbWl0cyBiYWNrb2ZmIHRvIG1heCB0byBhdm9pZCBlZmZlY3RpdmVseSBwZXJtYW5lbnQgYmFja29mZi5cclxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcclxuICovXHJcbmZ1bmN0aW9uIG9yZGluYWwoaSkge1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcclxuICAgICAgICByZXR1cm4gYCR7aX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XHJcbn1cclxuZnVuY3Rpb24gaW5kaWNhdG9yKGkpIHtcclxuICAgIGkgPSBNYXRoLmFicyhpKTtcclxuICAgIGNvbnN0IGNlbnQgPSBpICUgMTAwO1xyXG4gICAgaWYgKGNlbnQgPj0gMTAgJiYgY2VudCA8PSAyMCkge1xyXG4gICAgICAgIHJldHVybiAndGgnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2UpIHtcclxuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciwgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBlcnJvclByZWZpeCwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBnZXREZWZhdWx0QXBwQ29uZmlnLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0LCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldERlZmF1bHRzLCBnZXRFeHBlcmltZW50YWxTZXR0aW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0VsZWN0cm9uLCBpc0VtcHR5LCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc05vZGUsIGlzTm9kZVNkaywgaXNSZWFjdE5hdGl2ZSwgaXNTYWZhcmksIGlzVVdQLCBpc1ZhbGlkRm9ybWF0LCBpc1ZhbGlkVGltZXN0YW1wLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHByb21pc2VXaXRoVGltZW91dCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5LCBzdHJpbmdpZnksIHV1aWR2NCwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGV0aGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkxBWlkgKi87XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRNdWx0aXBsZUluc3RhbmNlcyhtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBjYWxsYmFjaztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbmNsYXNzIFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIGdldChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH1cclxuICAgIGdldEltbWVkaWF0ZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3B0aW9uYWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSW4gY2FzZSBhIGNvbXBvbmVudCBpcyBub3QgaW5pdGlhbGl6ZWQgYW5kIHNob3VsZC9jYW4gbm90IGJlIGF1dG8taW5pdGlhbGl6ZWQgYXQgdGhlIG1vbWVudCwgcmV0dXJuIG51bGwgaWYgdGhlIG9wdGlvbmFsIGZsYWcgaXMgc2V0LCBvciB0aHJvd1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFNlcnZpY2UgJHt0aGlzLm5hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldENvbXBvbmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc21hdGNoaW5nIENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmb3IgUHJvdmlkZXIgJHt0aGlzLm5hbWV9LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhckluc3RhbmNlKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlKSAvLyBsZWdhY3kgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKSksXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuX2RlbGV0ZSgpKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgaXNDb21wb25lbnRTZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpc0luaXRpYWxpemVkKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKG9wdHMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGAke3RoaXMubmFtZX0oJHtub3JtYWxpemVkSWRlbnRpZmllcn0pIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcclxuICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZSB3YWl0aW5nIGZvciB0aGUgc2VydmljZSBpbnN0YW5jZVxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gaXMgaW52b2tlZCBTWU5DSFJPTk9VU0xZLCBzbyBpdCBzaG91bGQgbm90IGV4ZWN1dGUgYW55IGxvbmdydW5uaW5nIHRhc2tzIGluIG9yZGVyIHRvIG5vdCBibG9jayB0aGUgcHJvZ3JhbS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXHJcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIG9uSW5pdChjYWxsYmFjaywgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gKF9hID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IFNldCgpO1xyXG4gICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3Muc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBleGlzdGluZ0NhbGxiYWNrcyk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcclxuICAgICAqL1xyXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgKiBOb3RlIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkIGlzIGRpZmZlcmVudCwgd2hpY2ggaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IGNyZWF0b3IsXHJcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAqIG9uSW5zdGFuY2VDcmVhdGVkKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7IHdoaWNoXHJcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIG5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3VsZEF1dG9Jbml0aWFsaXplKCkge1xyXG4gICAgICAgIHJldHVybiAoISF0aGlzLmNvbXBvbmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSAhPT0gXCJFWFBMSUNJVFwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVYUExJQ0lUICovKTtcclxuICAgIH1cclxufVxyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxyXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XHJcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcclxuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxyXG4gICAgICovXHJcbiAgICBhZGRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBhZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJvdmlkZXIobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH1cclxuICAgIGdldFByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJjb25zdCBpbnN0YW5jZU9mQW55ID0gKG9iamVjdCwgY29uc3RydWN0b3JzKSA9PiBjb25zdHJ1Y3RvcnMuc29tZSgoYykgPT4gb2JqZWN0IGluc3RhbmNlb2YgYyk7XG5cbmxldCBpZGJQcm94eWFibGVUeXBlcztcbmxldCBjdXJzb3JBZHZhbmNlTWV0aG9kcztcbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSB7XG4gICAgcmV0dXJuIChpZGJQcm94eWFibGVUeXBlcyB8fFxuICAgICAgICAoaWRiUHJveHlhYmxlVHlwZXMgPSBbXG4gICAgICAgICAgICBJREJEYXRhYmFzZSxcbiAgICAgICAgICAgIElEQk9iamVjdFN0b3JlLFxuICAgICAgICAgICAgSURCSW5kZXgsXG4gICAgICAgICAgICBJREJDdXJzb3IsXG4gICAgICAgICAgICBJREJUcmFuc2FjdGlvbixcbiAgICAgICAgXSkpO1xufVxuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpIHtcbiAgICByZXR1cm4gKGN1cnNvckFkdmFuY2VNZXRob2RzIHx8XG4gICAgICAgIChjdXJzb3JBZHZhbmNlTWV0aG9kcyA9IFtcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuYWR2YW5jZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWUsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlUHJpbWFyeUtleSxcbiAgICAgICAgXSkpO1xufVxuY29uc3QgY3Vyc29yUmVxdWVzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvbkRvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUod3JhcChyZXF1ZXN0LnJlc3VsdCkpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICB9KTtcbiAgICBwcm9taXNlXG4gICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyBTaW5jZSBjdXJzb3JpbmcgcmV1c2VzIHRoZSBJREJSZXF1ZXN0ICgqc2lnaCopLCB3ZSBjYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsXG4gICAgICAgIC8vIChzZWUgd3JhcEZ1bmN0aW9uKS5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCQ3Vyc29yKSB7XG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0TWFwLnNldCh2YWx1ZSwgcmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2F0Y2hpbmcgdG8gYXZvaWQgXCJVbmNhdWdodCBQcm9taXNlIGV4Y2VwdGlvbnNcIlxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIC8vIFRoaXMgbWFwcGluZyBleGlzdHMgaW4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGJ1dCBkb2Vzbid0IGRvZXNuJ3QgZXhpc3QgaW4gdHJhbnNmb3JtQ2FjaGUuIFRoaXNcbiAgICAvLyBpcyBiZWNhdXNlIHdlIGNyZWF0ZSBtYW55IHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdC5cbiAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KHByb21pc2UsIHJlcXVlc3QpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHR4KSB7XG4gICAgLy8gRWFybHkgYmFpbCBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBkb25lIHByb21pc2UgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgaWYgKHRyYW5zYWN0aW9uRG9uZU1hcC5oYXModHgpKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgZG9uZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QodHguZXJyb3IgfHwgbmV3IERPTUV4Y2VwdGlvbignQWJvcnRFcnJvcicsICdBYm9ydEVycm9yJykpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICB9KTtcbiAgICAvLyBDYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsLlxuICAgIHRyYW5zYWN0aW9uRG9uZU1hcC5zZXQodHgsIGRvbmUpO1xufVxubGV0IGlkYlByb3h5VHJhcHMgPSB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciB0cmFuc2FjdGlvbi5kb25lLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkb25lJylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Eb25lTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgLy8gUG9seWZpbGwgZm9yIG9iamVjdFN0b3JlTmFtZXMgYmVjYXVzZSBvZiBFZGdlLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdvYmplY3RTdG9yZU5hbWVzJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQub2JqZWN0U3RvcmVOYW1lcyB8fCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYWtlIHR4LnN0b3JlIHJldHVybiB0aGUgb25seSBzdG9yZSBpbiB0aGUgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbWFueS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc3RvcmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiByZWNlaXZlci5vYmplY3RTdG9yZShyZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIHRyYW5zZm9ybSB3aGF0ZXZlciB3ZSBnZXQgYmFjay5cbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0W3Byb3BdKTtcbiAgICB9LFxuICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uICYmXG4gICAgICAgICAgICAocHJvcCA9PT0gJ2RvbmUnIHx8IHByb3AgPT09ICdzdG9yZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcCBpbiB0YXJnZXQ7XG4gICAgfSxcbn07XG5mdW5jdGlvbiByZXBsYWNlVHJhcHMoY2FsbGJhY2spIHtcbiAgICBpZGJQcm94eVRyYXBzID0gY2FsbGJhY2soaWRiUHJveHlUcmFwcyk7XG59XG5mdW5jdGlvbiB3cmFwRnVuY3Rpb24oZnVuYykge1xuICAgIC8vIER1ZSB0byBleHBlY3RlZCBvYmplY3QgZXF1YWxpdHkgKHdoaWNoIGlzIGVuZm9yY2VkIGJ5IHRoZSBjYWNoaW5nIGluIGB3cmFwYCksIHdlXG4gICAgLy8gb25seSBjcmVhdGUgb25lIG5ldyBmdW5jIHBlciBmdW5jLlxuICAgIC8vIEVkZ2UgZG9lc24ndCBzdXBwb3J0IG9iamVjdFN0b3JlTmFtZXMgKGJvb28pLCBzbyB3ZSBwb2x5ZmlsbCBpdCBoZXJlLlxuICAgIGlmIChmdW5jID09PSBJREJEYXRhYmFzZS5wcm90b3R5cGUudHJhbnNhY3Rpb24gJiZcbiAgICAgICAgISgnb2JqZWN0U3RvcmVOYW1lcycgaW4gSURCVHJhbnNhY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0b3JlTmFtZXMsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZnVuYy5jYWxsKHVud3JhcCh0aGlzKSwgc3RvcmVOYW1lcywgLi4uYXJncyk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuc2V0KHR4LCBzdG9yZU5hbWVzLnNvcnQgPyBzdG9yZU5hbWVzLnNvcnQoKSA6IFtzdG9yZU5hbWVzXSk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcCh0eCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEN1cnNvciBtZXRob2RzIGFyZSBzcGVjaWFsLCBhcyB0aGUgYmVoYXZpb3VyIGlzIGEgbGl0dGxlIG1vcmUgZGlmZmVyZW50IHRvIHN0YW5kYXJkIElEQi4gSW5cbiAgICAvLyBJREIsIHlvdSBhZHZhbmNlIHRoZSBjdXJzb3IgYW5kIHdhaXQgZm9yIGEgbmV3ICdzdWNjZXNzJyBvbiB0aGUgSURCUmVxdWVzdCB0aGF0IGdhdmUgeW91IHRoZVxuICAgIC8vIGN1cnNvci4gSXQncyBraW5kYSBsaWtlIGEgcHJvbWlzZSB0aGF0IGNhbiByZXNvbHZlIHdpdGggbWFueSB2YWx1ZXMuIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlXG4gICAgLy8gd2l0aCByZWFsIHByb21pc2VzLCBzbyBlYWNoIGFkdmFuY2UgbWV0aG9kcyByZXR1cm5zIGEgbmV3IHByb21pc2UgZm9yIHRoZSBjdXJzb3Igb2JqZWN0LCBvclxuICAgIC8vIHVuZGVmaW5lZCBpZiB0aGUgZW5kIG9mIHRoZSBjdXJzb3IgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICBpZiAoZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKS5pbmNsdWRlcyhmdW5jKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgICAgICBmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcChjdXJzb3JSZXF1ZXN0TWFwLmdldCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgIHJldHVybiB3cmFwKGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICByZXR1cm4gd3JhcEZ1bmN0aW9uKHZhbHVlKTtcbiAgICAvLyBUaGlzIGRvZXNuJ3QgcmV0dXJuLCBpdCBqdXN0IGNyZWF0ZXMgYSAnZG9uZScgcHJvbWlzZSBmb3IgdGhlIHRyYW5zYWN0aW9uLFxuICAgIC8vIHdoaWNoIGlzIGxhdGVyIHJldHVybmVkIGZvciB0cmFuc2FjdGlvbi5kb25lIChzZWUgaWRiT2JqZWN0SGFuZGxlcikuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pXG4gICAgICAgIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih2YWx1ZSk7XG4gICAgaWYgKGluc3RhbmNlT2ZBbnkodmFsdWUsIGdldElkYlByb3h5YWJsZVR5cGVzKCkpKVxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHZhbHVlLCBpZGJQcm94eVRyYXBzKTtcbiAgICAvLyBSZXR1cm4gdGhlIHNhbWUgdmFsdWUgYmFjayBpZiB3ZSdyZSBub3QgZ29pbmcgdG8gdHJhbnNmb3JtIGl0LlxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHdyYXAodmFsdWUpIHtcbiAgICAvLyBXZSBzb21ldGltZXMgZ2VuZXJhdGUgbXVsdGlwbGUgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0IChlZyB3aGVuIGN1cnNvcmluZyksIGJlY2F1c2VcbiAgICAvLyBJREIgaXMgd2VpcmQgYW5kIGEgc2luZ2xlIElEQlJlcXVlc3QgY2FuIHlpZWxkIG1hbnkgcmVzcG9uc2VzLCBzbyB0aGVzZSBjYW4ndCBiZSBjYWNoZWQuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCUmVxdWVzdClcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QodmFsdWUpO1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgdHJhbnNmb3JtZWQgdGhpcyB2YWx1ZSBiZWZvcmUsIHJldXNlIHRoZSB0cmFuc2Zvcm1lZCB2YWx1ZS5cbiAgICAvLyBUaGlzIGlzIGZhc3RlciwgYnV0IGl0IGFsc28gcHJvdmlkZXMgb2JqZWN0IGVxdWFsaXR5LlxuICAgIGlmICh0cmFuc2Zvcm1DYWNoZS5oYXModmFsdWUpKVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpO1xuICAgIC8vIE5vdCBhbGwgdHlwZXMgYXJlIHRyYW5zZm9ybWVkLlxuICAgIC8vIFRoZXNlIG1heSBiZSBwcmltaXRpdmUgdHlwZXMsIHNvIHRoZXkgY2FuJ3QgYmUgV2Vha01hcCBrZXlzLlxuICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdHJhbnNmb3JtQ2FjaGUuc2V0KHZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQobmV3VmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuY29uc3QgdW53cmFwID0gKHZhbHVlKSA9PiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcblxuZXhwb3J0IHsgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGFzIGEsIGluc3RhbmNlT2ZBbnkgYXMgaSwgcmVwbGFjZVRyYXBzIGFzIHIsIHVud3JhcCBhcyB1LCB3cmFwIGFzIHcgfTtcbiIsImltcG9ydCB7IHcgYXMgd3JhcCwgciBhcyByZXBsYWNlVHJhcHMgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcbmV4cG9ydCB7IHUgYXMgdW53cmFwLCB3IGFzIHdyYXAgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcblxuLyoqXG4gKiBPcGVuIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKiBAcGFyYW0gdmVyc2lvbiBTY2hlbWEgdmVyc2lvbi5cbiAqIEBwYXJhbSBjYWxsYmFja3MgQWRkaXRpb25hbCBjYWxsYmFja3MuXG4gKi9cbmZ1bmN0aW9uIG9wZW5EQihuYW1lLCB2ZXJzaW9uLCB7IGJsb2NrZWQsIHVwZ3JhZGUsIGJsb2NraW5nLCB0ZXJtaW5hdGVkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcbiAgICBjb25zdCBvcGVuUHJvbWlzZSA9IHdyYXAocmVxdWVzdCk7XG4gICAgaWYgKHVwZ3JhZGUpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB1cGdyYWRlKHdyYXAocmVxdWVzdC5yZXN1bHQpLCBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCB3cmFwKHJlcXVlc3QudHJhbnNhY3Rpb24pLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoZXZlbnQpID0+IGJsb2NrZWQoXG4gICAgICAgIC8vIENhc3RpbmcgZHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC1ET00tbGliLWdlbmVyYXRvci9wdWxsLzE0MDVcbiAgICAgICAgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICB9XG4gICAgb3BlblByb21pc2VcbiAgICAgICAgLnRoZW4oKGRiKSA9PiB7XG4gICAgICAgIGlmICh0ZXJtaW5hdGVkKVxuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB0ZXJtaW5hdGVkKCkpO1xuICAgICAgICBpZiAoYmxvY2tpbmcpIHtcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ3ZlcnNpb25jaGFuZ2UnLCAoZXZlbnQpID0+IGJsb2NraW5nKGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICByZXR1cm4gb3BlblByb21pc2U7XG59XG4vKipcbiAqIERlbGV0ZSBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICovXG5mdW5jdGlvbiBkZWxldGVEQihuYW1lLCB7IGJsb2NrZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShuYW1lKTtcbiAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoZXZlbnQpID0+IGJsb2NrZWQoXG4gICAgICAgIC8vIENhc3RpbmcgZHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC1ET00tbGliLWdlbmVyYXRvci9wdWxsLzE0MDVcbiAgICAgICAgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyYXAocmVxdWVzdCkudGhlbigoKSA9PiB1bmRlZmluZWQpO1xufVxuXG5jb25zdCByZWFkTWV0aG9kcyA9IFsnZ2V0JywgJ2dldEtleScsICdnZXRBbGwnLCAnZ2V0QWxsS2V5cycsICdjb3VudCddO1xuY29uc3Qgd3JpdGVNZXRob2RzID0gWydwdXQnLCAnYWRkJywgJ2RlbGV0ZScsICdjbGVhciddO1xuY29uc3QgY2FjaGVkTWV0aG9kcyA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHtcbiAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBJREJEYXRhYmFzZSAmJlxuICAgICAgICAhKHByb3AgaW4gdGFyZ2V0KSAmJlxuICAgICAgICB0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApKVxuICAgICAgICByZXR1cm4gY2FjaGVkTWV0aG9kcy5nZXQocHJvcCk7XG4gICAgY29uc3QgdGFyZ2V0RnVuY05hbWUgPSBwcm9wLnJlcGxhY2UoL0Zyb21JbmRleCQvLCAnJyk7XG4gICAgY29uc3QgdXNlSW5kZXggPSBwcm9wICE9PSB0YXJnZXRGdW5jTmFtZTtcbiAgICBjb25zdCBpc1dyaXRlID0gd3JpdGVNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKTtcbiAgICBpZiAoXG4gICAgLy8gQmFpbCBpZiB0aGUgdGFyZ2V0IGRvZXNuJ3QgZXhpc3Qgb24gdGhlIHRhcmdldC4gRWcsIGdldEFsbCBpc24ndCBpbiBFZGdlLlxuICAgICEodGFyZ2V0RnVuY05hbWUgaW4gKHVzZUluZGV4ID8gSURCSW5kZXggOiBJREJPYmplY3RTdG9yZSkucHJvdG90eXBlKSB8fFxuICAgICAgICAhKGlzV3JpdGUgfHwgcmVhZE1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1ldGhvZCA9IGFzeW5jIGZ1bmN0aW9uIChzdG9yZU5hbWUsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogdW5kZWZpbmVkIGd6aXBwcyBiZXR0ZXIsIGJ1dCBmYWlscyBpbiBFZGdlIDooXG4gICAgICAgIGNvbnN0IHR4ID0gdGhpcy50cmFuc2FjdGlvbihzdG9yZU5hbWUsIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seScpO1xuICAgICAgICBsZXQgdGFyZ2V0ID0gdHguc3RvcmU7XG4gICAgICAgIGlmICh1c2VJbmRleClcbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5pbmRleChhcmdzLnNoaWZ0KCkpO1xuICAgICAgICAvLyBNdXN0IHJlamVjdCBpZiBvcCByZWplY3RzLlxuICAgICAgICAvLyBJZiBpdCdzIGEgd3JpdGUgb3BlcmF0aW9uLCBtdXN0IHJlamVjdCBpZiB0eC5kb25lIHJlamVjdHMuXG4gICAgICAgIC8vIE11c3QgcmVqZWN0IHdpdGggb3AgcmVqZWN0aW9uIGZpcnN0LlxuICAgICAgICAvLyBNdXN0IHJlc29sdmUgd2l0aCBvcCB2YWx1ZS5cbiAgICAgICAgLy8gTXVzdCBoYW5kbGUgYm90aCBwcm9taXNlcyAobm8gdW5oYW5kbGVkIHJlamVjdGlvbnMpXG4gICAgICAgIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGFyZ2V0W3RhcmdldEZ1bmNOYW1lXSguLi5hcmdzKSxcbiAgICAgICAgICAgIGlzV3JpdGUgJiYgdHguZG9uZSxcbiAgICAgICAgXSkpWzBdO1xuICAgIH07XG4gICAgY2FjaGVkTWV0aG9kcy5zZXQocHJvcCwgbWV0aG9kKTtcbiAgICByZXR1cm4gbWV0aG9kO1xufVxucmVwbGFjZVRyYXBzKChvbGRUcmFwcykgPT4gKHtcbiAgICAuLi5vbGRUcmFwcyxcbiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlciksXG4gICAgaGFzOiAodGFyZ2V0LCBwcm9wKSA9PiAhIWdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmhhcyh0YXJnZXQsIHByb3ApLFxufSkpO1xuXG5leHBvcnQgeyBkZWxldGVEQiwgb3BlbkRCIH07XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBzZXRVc2VyTG9nSGFuZGxlciwgc2V0TG9nTGV2ZWwgYXMgc2V0TG9nTGV2ZWwkMSB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBnZXREZWZhdWx0QXBwQ29uZmlnLCBkZWVwRXF1YWwsIEZpcmViYXNlRXJyb3IsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmV4cG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBvcGVuREIgfSBmcm9tICdpZGInO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXHJcbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cclxuICAgIGdldFBsYXRmb3JtSW5mb1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXHJcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VydmljZS5saWJyYXJ5fS8ke3NlcnZpY2UudmVyc2lvbn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGxvZ1N0cmluZyA9PiBsb2dTdHJpbmcpXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcclxuICpcclxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXHJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xyXG4gKiBwcm92aWRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xyXG4gICAgY29uc3QgY29tcG9uZW50ID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCk7XHJcbiAgICByZXR1cm4gKGNvbXBvbmVudCA9PT0gbnVsbCB8fCBjb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbXBvbmVudC50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovO1xyXG59XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcFwiO1xuY29uc3QgdmVyc2lvbiQxID0gXCIwLjkuMTlcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FwcCcpO1xuXG5jb25zdCBuYW1lJG4gPSBcIkBmaXJlYmFzZS9hcHAtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbSA9IFwiQGZpcmViYXNlL2FuYWx5dGljcy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRsID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5cbmNvbnN0IG5hbWUkayA9IFwiQGZpcmViYXNlL2FwcC1jaGVjay1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRqID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrXCI7XG5cbmNvbnN0IG5hbWUkaSA9IFwiQGZpcmViYXNlL2F1dGhcIjtcblxuY29uc3QgbmFtZSRoID0gXCJAZmlyZWJhc2UvYXV0aC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRnID0gXCJAZmlyZWJhc2UvZGF0YWJhc2VcIjtcblxuY29uc3QgbmFtZSRmID0gXCJAZmlyZWJhc2UvZGF0YWJhc2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZSA9IFwiQGZpcmViYXNlL2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGQgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYyA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcblxuY29uc3QgbmFtZSRiID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRhID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nXCI7XG5cbmNvbnN0IG5hbWUkOSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ4ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2VcIjtcblxuY29uc3QgbmFtZSQ3ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNiA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWdcIjtcblxuY29uc3QgbmFtZSQ1ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ0ID0gXCJAZmlyZWJhc2Uvc3RvcmFnZVwiO1xuXG5jb25zdCBuYW1lJDMgPSBcIkBmaXJlYmFzZS9zdG9yYWdlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDIgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuY29uc3QgbmFtZSQxID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lID0gXCJmaXJlYmFzZVwiO1xuY29uc3QgdmVyc2lvbiA9IFwiMTAuNC4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBhcHAgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xyXG5jb25zdCBQTEFURk9STV9MT0dfU1RSSU5HID0ge1xyXG4gICAgW25hbWUkb106ICdmaXJlLWNvcmUnLFxyXG4gICAgW25hbWUkbl06ICdmaXJlLWNvcmUtY29tcGF0JyxcclxuICAgIFtuYW1lJGxdOiAnZmlyZS1hbmFseXRpY3MnLFxyXG4gICAgW25hbWUkbV06ICdmaXJlLWFuYWx5dGljcy1jb21wYXQnLFxyXG4gICAgW25hbWUkal06ICdmaXJlLWFwcC1jaGVjaycsXHJcbiAgICBbbmFtZSRrXTogJ2ZpcmUtYXBwLWNoZWNrLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRpXTogJ2ZpcmUtYXV0aCcsXHJcbiAgICBbbmFtZSRoXTogJ2ZpcmUtYXV0aC1jb21wYXQnLFxyXG4gICAgW25hbWUkZ106ICdmaXJlLXJ0ZGInLFxyXG4gICAgW25hbWUkZl06ICdmaXJlLXJ0ZGItY29tcGF0JyxcclxuICAgIFtuYW1lJGVdOiAnZmlyZS1mbicsXHJcbiAgICBbbmFtZSRkXTogJ2ZpcmUtZm4tY29tcGF0JyxcclxuICAgIFtuYW1lJGNdOiAnZmlyZS1paWQnLFxyXG4gICAgW25hbWUkYl06ICdmaXJlLWlpZC1jb21wYXQnLFxyXG4gICAgW25hbWUkYV06ICdmaXJlLWZjbScsXHJcbiAgICBbbmFtZSQ5XTogJ2ZpcmUtZmNtLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ4XTogJ2ZpcmUtcGVyZicsXHJcbiAgICBbbmFtZSQ3XTogJ2ZpcmUtcGVyZi1jb21wYXQnLFxyXG4gICAgW25hbWUkNl06ICdmaXJlLXJjJyxcclxuICAgIFtuYW1lJDVdOiAnZmlyZS1yYy1jb21wYXQnLFxyXG4gICAgW25hbWUkNF06ICdmaXJlLWdjcycsXHJcbiAgICBbbmFtZSQzXTogJ2ZpcmUtZ2NzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQyXTogJ2ZpcmUtZnN0JyxcclxuICAgIFtuYW1lJDFdOiAnZmlyZS1mc3QtY29tcGF0JyxcclxuICAgICdmaXJlLWpzJzogJ2ZpcmUtanMnLFxyXG4gICAgW25hbWVdOiAnZmlyZS1qcy1hbGwnXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IF9hcHBzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogUmVnaXN0ZXJlZCBjb21wb25lbnRzLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmNvbnN0IF9jb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgYmVpbmcgYWRkZWQgdG8gdGhpcyBhcHAncyBjb250YWluZXJcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGFwcC5jb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZhaWxlZCB0byByZWdpc3RlciB3aXRoIEZpcmViYXNlQXBwICR7YXBwLm5hbWV9YCwgZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICBhcHAuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyXHJcbiAqIEByZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICBpZiAoX2NvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9LmApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIF9jb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xyXG4gICAgLy8gYWRkIHRoZSBjb21wb25lbnQgdG8gZXhpc3RpbmcgYXBwIGluc3RhbmNlc1xyXG4gICAgZm9yIChjb25zdCBhcHAgb2YgX2FwcHMudmFsdWVzKCkpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICpcclxuICogQHJldHVybnMgdGhlIHByb3ZpZGVyIGZvciB0aGUgc2VydmljZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkge1xyXG4gICAgY29uc3QgaGVhcnRiZWF0Q29udHJvbGxlciA9IGFwcC5jb250YWluZXJcclxuICAgICAgICAuZ2V0UHJvdmlkZXIoJ2hlYXJ0YmVhdCcpXHJcbiAgICAgICAgLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdENvbnRyb2xsZXIpIHtcclxuICAgICAgICB2b2lkIGhlYXJ0YmVhdENvbnRyb2xsZXIudHJpZ2dlckhlYXJ0YmVhdCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcC5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShhcHAsIG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkuY2xlYXJJbnN0YW5jZShpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG59XHJcbi8qKlxyXG4gKiBUZXN0IG9ubHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2xlYXJDb21wb25lbnRzKCkge1xyXG4gICAgX2NvbXBvbmVudHMuY2xlYXIoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi9dOiBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBpbml0aWFsaXplQXBwKCkgZmlyc3QnLFxyXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgW1wiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcclxuICAgIFtcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBbXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqL106ICdOZWVkIHRvIHByb3ZpZGUgb3B0aW9ucywgd2hlbiBub3QgYmVpbmcgZGVwbG95ZWQgdG8gaG9zdGluZyB2aWEgc291cmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcclxuICAgIFtcImlkYi1vcGVuXCIgLyogQXBwRXJyb3IuSURCX09QRU4gKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gb3BlbmluZyBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gcmVhZGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItc2V0XCIgLyogQXBwRXJyb3IuSURCX1dSSVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIHdyaXRpbmcgdG8gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1kZWxldGVcIiAvKiBBcHBFcnJvci5JREJfREVMRVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIGRlbGV0aW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAoX29wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICBsZXQgb3B0aW9ucyA9IF9vcHRpb25zO1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEFwcEVycm9yLkJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSBnZXREZWZhdWx0QXBwQ29uZmlnKCkpO1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqLyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCAmJiBuYW1lID09PSBERUZBVUxUX0VOVFJZX05BTUUgJiYgZ2V0RGVmYXVsdEFwcENvbmZpZygpKSB7XHJcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemVBcHAoKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHA7XHJcbn1cclxuLyoqXHJcbiAqIEEgKHJlYWQtb25seSkgYXJyYXkgb2YgYWxsIGluaXRpYWxpemVkIGFwcHMuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShfYXBwcy52YWx1ZXMoKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcclxuICogc2VydmljZXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZGVsZXRlQXBwKGFwcClcclxuICogICAudGhlbihmdW5jdGlvbigpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiQXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gKiAgIH0pXHJcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGRlbGV0aW5nIGFwcDpcIiwgZXJyb3IpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwKGFwcCkge1xyXG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhcHAuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcnMoKVxyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKSk7XHJcbiAgICAgICAgYXBwLmlzRGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhIGxpYnJhcnkncyBuYW1lIGFuZCB2ZXJzaW9uIGZvciBwbGF0Zm9ybSBsb2dnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcGFyYW0gbGlicmFyeSAtIE5hbWUgb2YgMXAgb3IgM3AgbGlicmFyeSAoZS5nLiBmaXJlc3RvcmUsIGFuZ3VsYXJmaXJlKVxyXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXHJcbiAqIEBwYXJhbSB2YXJpYW50IC0gQnVuZGxlIHZhcmlhbnQsIGUuZy4sIG5vZGUsIHJuLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcclxuICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgbGV0IGxpYnJhcnkgPSAoX2EgPSBQTEFURk9STV9MT0dfU1RSSU5HW2xpYnJhcnlLZXlPck5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBsaWJyYXJ5S2V5T3JOYW1lO1xyXG4gICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBpZiAobGlicmFyeU1pc21hdGNoIHx8IHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBbXHJcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoYCR7bGlicmFyeX0tdmVyc2lvbmAsICgpID0+ICh7IGxpYnJhcnksIHZlcnNpb24gfSksIFwiVkVSU0lPTlwiIC8qIENvbXBvbmVudFR5cGUuVkVSU0lPTiAqLykpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBoYW5kbGVyIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICogQHBhcmFtIGxvZ0NhbGxiYWNrIC0gQW4gb3B0aW9uYWwgY3VzdG9tIGxvZyBoYW5kbGVyIHRoYXQgZXhlY3V0ZXMgdXNlciBjb2RlIHdoZW5ldmVyXHJcbiAqIHRoZSBGaXJlYmFzZSBTREsgbWFrZXMgYSBsb2dnaW5nIGNhbGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uTG9nKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfTE9HX0FSR1VNRU5UICovKTtcclxuICAgIH1cclxuICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgbGV2ZWwgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgYXJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgaW5mb2AsIGVycm9ycyBhcmUgbG9nZ2VkLCBidXQgYGRlYnVnYCBhbmRcclxuICogYHZlcmJvc2VgIGxvZ3MgYXJlIG5vdCkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxvZ0xldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxvZ0xldmVsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1kYXRhYmFzZSc7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBTVE9SRV9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1zdG9yZSc7XHJcbmxldCBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQl9OQU1FLCBEQl9WRVJTSU9OLCB7XHJcbiAgICAgICAgICAgIHVwZ3JhZGU6IChkYiwgb2xkVmVyc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cclxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJcclxuICAgICAgICAgICAgLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUpXHJcbiAgICAgICAgICAgIC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKVxyXG4gICAgICAgICAgICAuZ2V0KGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKGFwcCwgaGVhcnRiZWF0T2JqZWN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQoaGVhcnRiZWF0T2JqZWN0LCBjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgICAgIGF3YWl0IHR4LmRvbmU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNvbXB1dGVLZXkoYXBwKSB7XHJcbiAgICByZXR1cm4gYCR7YXBwLm5hbWV9ISR7YXBwLm9wdGlvbnMuYXBwSWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBNQVhfSEVBREVSX0JZVEVTID0gMTAyNDtcclxuLy8gMzAgZGF5c1xyXG5jb25zdCBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTID0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBIZWFydGJlYXRTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbi1tZW1vcnkgY2FjaGUgZm9yIGhlYXJ0YmVhdHMsIHVzZWQgYnkgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHRvIGdlbmVyYXRlXHJcbiAgICAgICAgICogdGhlIGhlYWRlciBzdHJpbmcuXHJcbiAgICAgICAgICogU3RvcmVzIG9uZSByZWNvcmQgcGVyIGRhdGUuIFRoaXMgd2lsbCBiZSBjb25zb2xpZGF0ZWQgaW50byB0aGUgc3RhbmRhcmRcclxuICAgICAgICAgKiBmb3JtYXQgb2Ygb25lIHJlY29yZCBwZXIgdXNlciBhZ2VudCBzdHJpbmcgYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBoZWFkZXIuXHJcbiAgICAgICAgICogUG9wdWxhdGVkIGZyb20gaW5kZXhlZERCIHdoZW4gdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGFuZCBzaG91bGRcclxuICAgICAgICAgKiBiZSBrZXB0IGluIHN5bmMgd2l0aCBpbmRleGVkREIuXHJcbiAgICAgICAgICogTGVhdmUgcHVibGljIGZvciBlYXNpZXIgdGVzdGluZy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB0aGlzLl9zdG9yYWdlID0gbmV3IEhlYXJ0YmVhdFN0b3JhZ2VJbXBsKGFwcCk7XHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZSA9IHRoaXMuX3N0b3JhZ2UucmVhZCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgdG8gcmVwb3J0IGEgaGVhcnRiZWF0LiBUaGUgZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZVxyXG4gICAgICogYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgb2JqZWN0LCB1cGRhdGUgaGVhcnRiZWF0c0NhY2hlLCBhbmQgcGVyc2lzdCBpdFxyXG4gICAgICogdG8gSW5kZXhlZERCLlxyXG4gICAgICogTm90ZSB0aGF0IHdlIG9ubHkgc3RvcmUgb25lIGhlYXJ0YmVhdCBwZXIgZGF5LiBTbyBpZiBhIGhlYXJ0YmVhdCBmb3IgdG9kYXkgaXNcclxuICAgICAqIGFscmVhZHkgbG9nZ2VkLCBzdWJzZXF1ZW50IGNhbGxzIHRvIHRoaXMgZnVuY3Rpb24gaW4gdGhlIHNhbWUgZGF5IHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdHJpZ2dlckhlYXJ0YmVhdCgpIHtcclxuICAgICAgICBjb25zdCBwbGF0Zm9ybUxvZ2dlciA9IHRoaXMuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcigncGxhdGZvcm0tbG9nZ2VyJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIFwiRmlyZWJhc2UgdXNlciBhZ2VudFwiIHN0cmluZyBmcm9tIHRoZSBwbGF0Zm9ybSBsb2dnZXJcclxuICAgICAgICAvLyBzZXJ2aWNlLCBub3QgdGhlIGJyb3dzZXIgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBhZ2VudCA9IHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEbyBub3Qgc3RvcmUgYSBoZWFydGJlYXQgaWYgb25lIGlzIGFscmVhZHkgc3RvcmVkIGZvciB0aGlzIGRheVxyXG4gICAgICAgIC8vIG9yIGlmIGEgaGVhZGVyIGhhcyBhbHJlYWR5IGJlZW4gc2VudCB0b2RheS5cclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9PT0gZGF0ZSB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5zb21lKHNpbmdsZURhdGVIZWFydGJlYXQgPT4gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlID09PSBkYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBlbnRyeSBmb3IgdGhpcyBkYXRlLiBDcmVhdGUgb25lLlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5wdXNoKHsgZGF0ZSwgYWdlbnQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBlbnRyaWVzIG9sZGVyIHRoYW4gMzAgZGF5cy5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmZpbHRlcihzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGJUaW1lc3RhbXAgPSBuZXcgRGF0ZShzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpLnZhbHVlT2YoKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vdyAtIGhiVGltZXN0YW1wIDw9IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgd2hpY2ggY2FuIGJlIGF0dGFjaGVkIHRvIHRoZSBoZWFydGJlYXQtc3BlY2lmaWMgaGVhZGVyIGRpcmVjdGx5LlxyXG4gICAgICogSXQgYWxzbyBjbGVhcnMgYWxsIGhlYXJ0YmVhdHMgZnJvbSBtZW1vcnkgYXMgd2VsbCBhcyBpbiBJbmRleGVkREIuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogQ29uc3VtaW5nIHByb2R1Y3QgU0RLcyBzaG91bGQgbm90IHNlbmQgdGhlIGhlYWRlciBpZiB0aGlzIG1ldGhvZFxyXG4gICAgICogcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIC8vIEV4dHJhY3QgYXMgbWFueSBoZWFydGJlYXRzIGZyb20gdGhlIGNhY2hlIGFzIHdpbGwgZml0IHVuZGVyIHRoZSBzaXplIGxpbWl0LlxyXG4gICAgICAgIGNvbnN0IHsgaGVhcnRiZWF0c1RvU2VuZCwgdW5zZW50RW50cmllcyB9ID0gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIodGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlclN0cmluZyA9IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c1RvU2VuZCB9KSk7XHJcbiAgICAgICAgLy8gU3RvcmUgbGFzdCBzZW50IGRhdGUgdG8gcHJldmVudCBhbm90aGVyIGJlaW5nIGxvZ2dlZC9zZW50IGZvciB0aGUgc2FtZSBkYXkuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgaWYgKHVuc2VudEVudHJpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBTdG9yZSBhbnkgdW5zZW50IGVudHJpZXMgaWYgdGhleSBleGlzdC5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB1bnNlbnRFbnRyaWVzO1xyXG4gICAgICAgICAgICAvLyBUaGlzIHNlZW1zIG1vcmUgbGlrZWx5IHRoYW4gZW1wdHlpbmcgdGhlIGFycmF5IChiZWxvdykgdG8gbGVhZCB0byBzb21lIG9kZCBzdGF0ZVxyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgY2FjaGUgaXNuJ3QgZW1wdHkgYW5kIHRoaXMgd2lsbCBiZSBjYWxsZWQgYWdhaW4gb24gdGhlIG5leHQgcmVxdWVzdCxcclxuICAgICAgICAgICAgLy8gYW5kIGlzIHByb2JhYmx5IHNhZmVzdCBpZiB3ZSBhd2FpdCBpdC5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gW107XHJcbiAgICAgICAgICAgIC8vIERvIG5vdCB3YWl0IGZvciB0aGlzLCB0byByZWR1Y2UgbGF0ZW5jeS5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGVhZGVyU3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFVUQ0RhdGVTdHJpbmcoKSB7XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAvLyBSZXR1cm5zIGRhdGUgZm9ybWF0ICdZWVlZLU1NLUREJ1xyXG4gICAgcmV0dXJuIHRvZGF5LnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcihoZWFydGJlYXRzQ2FjaGUsIG1heFNpemUgPSBNQVhfSEVBREVSX0JZVEVTKSB7XHJcbiAgICAvLyBIZWFydGJlYXRzIGdyb3VwZWQgYnkgdXNlciBhZ2VudCBpbiB0aGUgc3RhbmRhcmQgZm9ybWF0IHRvIGJlIHNlbnQgaW5cclxuICAgIC8vIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRzVG9TZW5kID0gW107XHJcbiAgICAvLyBTaW5nbGUgZGF0ZSBmb3JtYXQgaGVhcnRiZWF0cyB0aGF0IGFyZSBub3Qgc2VudC5cclxuICAgIGxldCB1bnNlbnRFbnRyaWVzID0gaGVhcnRiZWF0c0NhY2hlLnNsaWNlKCk7XHJcbiAgICBmb3IgKGNvbnN0IHNpbmdsZURhdGVIZWFydGJlYXQgb2YgaGVhcnRiZWF0c0NhY2hlKSB7XHJcbiAgICAgICAgLy8gTG9vayBmb3IgYW4gZXhpc3RpbmcgZW50cnkgd2l0aCB0aGUgc2FtZSB1c2VyIGFnZW50LlxyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdEVudHJ5ID0gaGVhcnRiZWF0c1RvU2VuZC5maW5kKGhiID0+IGhiLmFnZW50ID09PSBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50KTtcclxuICAgICAgICBpZiAoIWhlYXJ0YmVhdEVudHJ5KSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGVudHJ5IGZvciB0aGlzIHVzZXIgYWdlbnQgZXhpc3RzLCBjcmVhdGUgb25lLlxyXG4gICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW3NpbmdsZURhdGVIZWFydGJlYXQuZGF0ZV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgaGVhcnRiZWF0XHJcbiAgICAgICAgICAgICAgICAvLyBlbnRyeSBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucHVzaChzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBkYXRlXHJcbiAgICAgICAgICAgIC8vIGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUG9wIHVuc2VudCBlbnRyeSBmcm9tIHF1ZXVlLiAoU2tpcHBlZCBpZiBhZGRpbmcgdGhlIGVudHJ5IGV4Y2VlZGVkXHJcbiAgICAgICAgLy8gcXVvdGEgYW5kIHRoZSBsb29wIGJyZWFrcyBlYXJseS4pXHJcbiAgICAgICAgdW5zZW50RW50cmllcyA9IHVuc2VudEVudHJpZXMuc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQsXHJcbiAgICAgICAgdW5zZW50RW50cmllc1xyXG4gICAgfTtcclxufVxyXG5jbGFzcyBIZWFydGJlYXRTdG9yYWdlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlID0gdGhpcy5ydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCkge1xyXG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgYWxsIGhlYXJ0YmVhdHMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJlYWQoKSB7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiSGVhcnRiZWF0T2JqZWN0ID0gYXdhaXQgcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkYkhlYXJ0YmVhdE9iamVjdCB8fCB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwidmFyIGNvbW1vbmpzR2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307XG5cbnZhciBlc20gPSB7fTtcblxuLypcblxuIENvcHlyaWdodCBUaGUgQ2xvc3VyZSBMaWJyYXJ5IEF1dGhvcnMuXG4gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiovXG5cbnZhciBrLGdvb2c9Z29vZ3x8e30sbD1jb21tb25qc0dsb2JhbHx8c2VsZjtmdW5jdGlvbiBhYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBiYShhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsY2EpJiZhW2NhXXx8KGFbY2FdPSsrZGEpfXZhciBjYT1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGRhPTA7ZnVuY3Rpb24gZWEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBmYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBxKGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3E9ZWE6cT1mYTtyZXR1cm4gcS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBoYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiByKGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLiQ9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLmFjPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxuPTI7bjxhcmd1bWVudHMubGVuZ3RoO24rKyloW24tMl09YXJndW1lbnRzW25dO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24gdigpe3RoaXMucz10aGlzLnM7dGhpcy5vPXRoaXMubzt9dmFyIGlhPTA7di5wcm90b3R5cGUucz0hMTt2LnByb3RvdHlwZS5zYT1mdW5jdGlvbigpe2lmKCF0aGlzLnMmJih0aGlzLnM9ITAsdGhpcy5OKCksMCE9aWEpKXtiYSh0aGlzKTt9fTt2LnByb3RvdHlwZS5OPWZ1bmN0aW9uKCl7aWYodGhpcy5vKWZvcig7dGhpcy5vLmxlbmd0aDspdGhpcy5vLnNoaWZ0KCkoKTt9O2NvbnN0IGthPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYSxiLHZvaWQgMCl9OmZ1bmN0aW9uKGEsYil7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBcInN0cmluZ1wiIT09dHlwZW9mIGJ8fDEhPWIubGVuZ3RoPy0xOmEuaW5kZXhPZihiLDApO2ZvcihsZXQgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGMgaW4gYSYmYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuIC0xfTtmdW5jdGlvbiBtYShhKXtjb25zdCBiPWEubGVuZ3RoO2lmKDA8Yil7Y29uc3QgYz1BcnJheShiKTtmb3IobGV0IGQ9MDtkPGI7ZCsrKWNbZF09YVtkXTtyZXR1cm4gY31yZXR1cm4gW119XG5mdW5jdGlvbiBuYShhLGIpe2ZvcihsZXQgYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe2NvbnN0IGQ9YXJndW1lbnRzW2NdO2lmKGFhKGQpKXtjb25zdCBlPWEubGVuZ3RofHwwLGY9ZC5sZW5ndGh8fDA7YS5sZW5ndGg9ZStmO2ZvcihsZXQgaD0wO2g8ZjtoKyspYVtlK2hdPWRbaF07fWVsc2UgYS5wdXNoKGQpO319ZnVuY3Rpb24gdyhhLGIpe3RoaXMudHlwZT1hO3RoaXMuZz10aGlzLnRhcmdldD1iO3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMTt9dy5wcm90b3R5cGUuaD1mdW5jdGlvbigpe3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMDt9O3ZhciBvYT1mdW5jdGlvbigpe2lmKCFsLmFkZEV2ZW50TGlzdGVuZXJ8fCFPYmplY3QuZGVmaW5lUHJvcGVydHkpcmV0dXJuICExO3ZhciBhPSExLGI9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwicGFzc2l2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXthPSEwO319KTt0cnl7bC5hZGRFdmVudExpc3RlbmVyKFwidGVzdFwiLCgpPT57fSxiKSxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsKCk9Pnt9LGIpO31jYXRjaChjKXt9cmV0dXJuIGF9KCk7ZnVuY3Rpb24geChhKXtyZXR1cm4gL15bXFxzXFx4YTBdKiQvLnRlc3QoYSl9ZnVuY3Rpb24gcGEoKXt2YXIgYT1sLm5hdmlnYXRvcjtyZXR1cm4gYSYmKGE9YS51c2VyQWdlbnQpP2E6XCJcIn1mdW5jdGlvbiB5KGEpe3JldHVybiAtMSE9cGEoKS5pbmRleE9mKGEpfWZ1bmN0aW9uIHFhKGEpe3FhW1wiIFwiXShhKTtyZXR1cm4gYX1xYVtcIiBcIl09ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIHJhKGEsYil7dmFyIGM9c2E7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjLGEpP2NbYV06Y1thXT1iKGEpfXZhciB0YT15KFwiT3BlcmFcIiksej15KFwiVHJpZGVudFwiKXx8eShcIk1TSUVcIiksdWE9eShcIkVkZ2VcIiksdmE9dWF8fHosd2E9eShcIkdlY2tvXCIpJiYhKC0xIT1wYSgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIndlYmtpdFwiKSYmIXkoXCJFZGdlXCIpKSYmISh5KFwiVHJpZGVudFwiKXx8eShcIk1TSUVcIikpJiYheShcIkVkZ2VcIikseGE9LTEhPXBhKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwid2Via2l0XCIpJiYheShcIkVkZ2VcIik7ZnVuY3Rpb24geWEoKXt2YXIgYT1sLmRvY3VtZW50O3JldHVybiBhP2EuZG9jdW1lbnRNb2RlOnZvaWQgMH12YXIgemE7XG5hOnt2YXIgQWE9XCJcIixCYT1mdW5jdGlvbigpe3ZhciBhPXBhKCk7aWYod2EpcmV0dXJuIC9ydjooW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZih1YSlyZXR1cm4gL0VkZ2VcXC8oW1xcZFxcLl0rKS8uZXhlYyhhKTtpZih6KXJldHVybiAvXFxiKD86TVNJRXxydilbOiBdKFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoeGEpcmV0dXJuIC9XZWJLaXRcXC8oXFxTKykvLmV4ZWMoYSk7aWYodGEpcmV0dXJuIC8oPzpWZXJzaW9uKVsgXFwvXT8oXFxTKykvLmV4ZWMoYSl9KCk7QmEmJihBYT1CYT9CYVsxXTpcIlwiKTtpZih6KXt2YXIgQ2E9eWEoKTtpZihudWxsIT1DYSYmQ2E+cGFyc2VGbG9hdChBYSkpe3phPVN0cmluZyhDYSk7YnJlYWsgYX19emE9QWE7fXZhciBEYTtpZihsLmRvY3VtZW50JiZ6KXt2YXIgRWE9eWEoKTtEYT1FYT9FYTpwYXJzZUludCh6YSwxMCl8fHZvaWQgMDt9ZWxzZSBEYT12b2lkIDA7dmFyIEZhPURhO2Z1bmN0aW9uIEEoYSxiKXt3LmNhbGwodGhpcyxhP2EudHlwZTpcIlwiKTt0aGlzLnJlbGF0ZWRUYXJnZXQ9dGhpcy5nPXRoaXMudGFyZ2V0PW51bGw7dGhpcy5idXR0b249dGhpcy5zY3JlZW5ZPXRoaXMuc2NyZWVuWD10aGlzLmNsaWVudFk9dGhpcy5jbGllbnRYPTA7dGhpcy5rZXk9XCJcIjt0aGlzLm1ldGFLZXk9dGhpcy5zaGlmdEtleT10aGlzLmFsdEtleT10aGlzLmN0cmxLZXk9ITE7dGhpcy5zdGF0ZT1udWxsO3RoaXMucG9pbnRlcklkPTA7dGhpcy5wb2ludGVyVHlwZT1cIlwiO3RoaXMuaT1udWxsO2lmKGEpe3ZhciBjPXRoaXMudHlwZT1hLnR5cGUsZD1hLmNoYW5nZWRUb3VjaGVzJiZhLmNoYW5nZWRUb3VjaGVzLmxlbmd0aD9hLmNoYW5nZWRUb3VjaGVzWzBdOm51bGw7dGhpcy50YXJnZXQ9YS50YXJnZXR8fGEuc3JjRWxlbWVudDt0aGlzLmc9YjtpZihiPWEucmVsYXRlZFRhcmdldCl7aWYod2Epe2E6e3RyeXtxYShiLm5vZGVOYW1lKTt2YXIgZT0hMDticmVhayBhfWNhdGNoKGYpe31lPVxuITE7fWV8fChiPW51bGwpO319ZWxzZSBcIm1vdXNlb3ZlclwiPT1jP2I9YS5mcm9tRWxlbWVudDpcIm1vdXNlb3V0XCI9PWMmJihiPWEudG9FbGVtZW50KTt0aGlzLnJlbGF0ZWRUYXJnZXQ9YjtkPyh0aGlzLmNsaWVudFg9dm9pZCAwIT09ZC5jbGllbnRYP2QuY2xpZW50WDpkLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1kLmNsaWVudFk/ZC5jbGllbnRZOmQucGFnZVksdGhpcy5zY3JlZW5YPWQuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9ZC5zY3JlZW5ZfHwwKToodGhpcy5jbGllbnRYPXZvaWQgMCE9PWEuY2xpZW50WD9hLmNsaWVudFg6YS5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09YS5jbGllbnRZP2EuY2xpZW50WTphLnBhZ2VZLHRoaXMuc2NyZWVuWD1hLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWEuc2NyZWVuWXx8MCk7dGhpcy5idXR0b249YS5idXR0b247dGhpcy5rZXk9YS5rZXl8fFwiXCI7dGhpcy5jdHJsS2V5PWEuY3RybEtleTt0aGlzLmFsdEtleT1hLmFsdEtleTt0aGlzLnNoaWZ0S2V5PVxuYS5zaGlmdEtleTt0aGlzLm1ldGFLZXk9YS5tZXRhS2V5O3RoaXMucG9pbnRlcklkPWEucG9pbnRlcklkfHwwO3RoaXMucG9pbnRlclR5cGU9XCJzdHJpbmdcIj09PXR5cGVvZiBhLnBvaW50ZXJUeXBlP2EucG9pbnRlclR5cGU6R2FbYS5wb2ludGVyVHlwZV18fFwiXCI7dGhpcy5zdGF0ZT1hLnN0YXRlO3RoaXMuaT1hO2EuZGVmYXVsdFByZXZlbnRlZCYmQS4kLmguY2FsbCh0aGlzKTt9fXIoQSx3KTt2YXIgR2E9ezI6XCJ0b3VjaFwiLDM6XCJwZW5cIiw0OlwibW91c2VcIn07QS5wcm90b3R5cGUuaD1mdW5jdGlvbigpe0EuJC5oLmNhbGwodGhpcyk7dmFyIGE9dGhpcy5pO2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITE7fTt2YXIgSGE9XCJjbG9zdXJlX2xpc3RlbmFibGVfXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApO3ZhciBJYT0wO2Z1bmN0aW9uIEphKGEsYixjLGQsZSl7dGhpcy5saXN0ZW5lcj1hO3RoaXMucHJveHk9bnVsbDt0aGlzLnNyYz1iO3RoaXMudHlwZT1jO3RoaXMuY2FwdHVyZT0hIWQ7dGhpcy5sYT1lO3RoaXMua2V5PSsrSWE7dGhpcy5mYT10aGlzLmlhPSExO31mdW5jdGlvbiBLYShhKXthLmZhPSEwO2EubGlzdGVuZXI9bnVsbDthLnByb3h5PW51bGw7YS5zcmM9bnVsbDthLmxhPW51bGw7fWZ1bmN0aW9uIE5hKGEsYixjKXtmb3IoY29uc3QgZCBpbiBhKWIuY2FsbChjLGFbZF0sZCxhKTt9ZnVuY3Rpb24gT2EoYSxiKXtmb3IoY29uc3QgYyBpbiBhKWIuY2FsbCh2b2lkIDAsYVtjXSxjLGEpO31mdW5jdGlvbiBQYShhKXtjb25zdCBiPXt9O2Zvcihjb25zdCBjIGluIGEpYltjXT1hW2NdO3JldHVybiBifWNvbnN0IFFhPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIFJhKGEsYil7bGV0IGMsZDtmb3IobGV0IGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IobGV0IGY9MDtmPFFhLmxlbmd0aDtmKyspYz1RYVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiBTYShhKXt0aGlzLnNyYz1hO3RoaXMuZz17fTt0aGlzLmg9MDt9U2EucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuZ1tmXTthfHwoYT10aGlzLmdbZl09W10sdGhpcy5oKyspO3ZhciBoPVRhKGEsYixkLGUpOy0xPGg/KGI9YVtoXSxjfHwoYi5pYT0hMSkpOihiPW5ldyBKYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuaWE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBVYShhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuZyl7dmFyIGQ9YS5nW2NdLGU9a2EoZCxiKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihLYShiKSwwPT1hLmdbY10ubGVuZ3RoJiYoZGVsZXRlIGEuZ1tjXSxhLmgtLSkpO319XG5mdW5jdGlvbiBUYShhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5mYSYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYubGE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBWYT1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLFdhPXt9O2Z1bmN0aW9uIFlhKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBaYShhLGIsYyxkLGUpO2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKVlhKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz0kYShjKTtyZXR1cm4gYSYmYVtIYV0/YS5PKGIsYyxwKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTphYihhLGIsYywhMSxkLGUpfVxuZnVuY3Rpb24gYWIoYSxiLGMsZCxlLGYpe2lmKCFiKXRocm93IEVycm9yKFwiSW52YWxpZCBldmVudCB0eXBlXCIpO3ZhciBoPXAoZSk/ISFlLmNhcHR1cmU6ISFlLG49YmIoYSk7bnx8KGFbVmFdPW49bmV3IFNhKGEpKTtjPW4uYWRkKGIsYyxkLGgsZik7aWYoYy5wcm94eSlyZXR1cm4gYztkPWNiKCk7Yy5wcm94eT1kO2Quc3JjPWE7ZC5saXN0ZW5lcj1jO2lmKGEuYWRkRXZlbnRMaXN0ZW5lcilvYXx8KGU9aCksdm9pZCAwPT09ZSYmKGU9ITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihiLnRvU3RyaW5nKCksZCxlKTtlbHNlIGlmKGEuYXR0YWNoRXZlbnQpYS5hdHRhY2hFdmVudChkYihiLnRvU3RyaW5nKCkpLGQpO2Vsc2UgaWYoYS5hZGRMaXN0ZW5lciYmYS5yZW1vdmVMaXN0ZW5lcilhLmFkZExpc3RlbmVyKGQpO2Vsc2UgdGhyb3cgRXJyb3IoXCJhZGRFdmVudExpc3RlbmVyIGFuZCBhdHRhY2hFdmVudCBhcmUgdW5hdmFpbGFibGUuXCIpO3JldHVybiBjfVxuZnVuY3Rpb24gY2IoKXtmdW5jdGlvbiBhKGMpe3JldHVybiBiLmNhbGwoYS5zcmMsYS5saXN0ZW5lcixjKX1jb25zdCBiPWViO3JldHVybiBhfWZ1bmN0aW9uIFphKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspWmEoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPSRhKGMpO3JldHVybiBhJiZhW0hhXT9hLlAoYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmFiKGEsYixjLCEwLGQsZSl9XG5mdW5jdGlvbiBmYihhLGIsYyxkLGUpe2lmKEFycmF5LmlzQXJyYXkoYikpZm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZmIoYSxiW2ZdLGMsZCxlKTtlbHNlIChkPXAoZCk/ISFkLmNhcHR1cmU6ISFkLGM9JGEoYyksYSYmYVtIYV0pPyhhPWEuaSxiPVN0cmluZyhiKS50b1N0cmluZygpLGIgaW4gYS5nJiYoZj1hLmdbYl0sYz1UYShmLGMsZCxlKSwtMTxjJiYoS2EoZltjXSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGYsYywxKSwwPT1mLmxlbmd0aCYmKGRlbGV0ZSBhLmdbYl0sYS5oLS0pKSkpOmEmJihhPWJiKGEpKSYmKGI9YS5nW2IudG9TdHJpbmcoKV0sYT0tMSxiJiYoYT1UYShiLGMsZCxlKSksKGM9LTE8YT9iW2FdOm51bGwpJiZnYihjKSk7fVxuZnVuY3Rpb24gZ2IoYSl7aWYoXCJudW1iZXJcIiE9PXR5cGVvZiBhJiZhJiYhYS5mYSl7dmFyIGI9YS5zcmM7aWYoYiYmYltIYV0pVWEoYi5pLGEpO2Vsc2Uge3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQoZGIoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1iYihiKSk/KFVhKGMsYSksMD09Yy5oJiYoYy5zcmM9bnVsbCxiW1ZhXT1udWxsKSk6S2EoYSk7fX19ZnVuY3Rpb24gZGIoYSl7cmV0dXJuIGEgaW4gV2E/V2FbYV06V2FbYV09XCJvblwiK2F9ZnVuY3Rpb24gZWIoYSxiKXtpZihhLmZhKWE9ITA7ZWxzZSB7Yj1uZXcgQShiLHRoaXMpO3ZhciBjPWEubGlzdGVuZXIsZD1hLmxhfHxhLnNyYzthLmlhJiZnYihhKTthPWMuY2FsbChkLGIpO31yZXR1cm4gYX1cbmZ1bmN0aW9uIGJiKGEpe2E9YVtWYV07cmV0dXJuIGEgaW5zdGFuY2VvZiBTYT9hOm51bGx9dmFyIGhiPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiAkYShhKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSlyZXR1cm4gYTthW2hiXXx8KGFbaGJdPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhbmRsZUV2ZW50KGIpfSk7cmV0dXJuIGFbaGJdfWZ1bmN0aW9uIEIoKXt2LmNhbGwodGhpcyk7dGhpcy5pPW5ldyBTYSh0aGlzKTt0aGlzLlM9dGhpczt0aGlzLko9bnVsbDt9cihCLHYpO0IucHJvdG90eXBlW0hhXT0hMDtCLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjLGQpe2ZiKHRoaXMsYSxiLGMsZCk7fTtcbmZ1bmN0aW9uIEMoYSxiKXt2YXIgYyxkPWEuSjtpZihkKWZvcihjPVtdO2Q7ZD1kLkopYy5wdXNoKGQpO2E9YS5TO2Q9Yi50eXBlfHxiO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYiliPW5ldyB3KGIsYSk7ZWxzZSBpZihiIGluc3RhbmNlb2YgdyliLnRhcmdldD1iLnRhcmdldHx8YTtlbHNlIHt2YXIgZT1iO2I9bmV3IHcoZCxhKTtSYShiLGUpO31lPSEwO2lmKGMpZm9yKHZhciBmPWMubGVuZ3RoLTE7MDw9ZjtmLS0pe3ZhciBoPWIuZz1jW2ZdO2U9aWIoaCxkLCEwLGIpJiZlO31oPWIuZz1hO2U9aWIoaCxkLCEwLGIpJiZlO2U9aWIoaCxkLCExLGIpJiZlO2lmKGMpZm9yKGY9MDtmPGMubGVuZ3RoO2YrKyloPWIuZz1jW2ZdLGU9aWIoaCxkLCExLGIpJiZlO31cbkIucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtCLiQuTi5jYWxsKHRoaXMpO2lmKHRoaXMuaSl7dmFyIGE9dGhpcy5pLGM7Zm9yKGMgaW4gYS5nKXtmb3IodmFyIGQ9YS5nW2NdLGU9MDtlPGQubGVuZ3RoO2UrKylLYShkW2VdKTtkZWxldGUgYS5nW2NdO2EuaC0tO319dGhpcy5KPW51bGw7fTtCLnByb3RvdHlwZS5PPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmkuYWRkKFN0cmluZyhhKSxiLCExLGMsZCl9O0IucHJvdG90eXBlLlA9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITAsYyxkKX07XG5mdW5jdGlvbiBpYihhLGIsYyxkKXtiPWEuaS5nW1N0cmluZyhiKV07aWYoIWIpcmV0dXJuICEwO2I9Yi5jb25jYXQoKTtmb3IodmFyIGU9ITAsZj0wO2Y8Yi5sZW5ndGg7KytmKXt2YXIgaD1iW2ZdO2lmKGgmJiFoLmZhJiZoLmNhcHR1cmU9PWMpe3ZhciBuPWgubGlzdGVuZXIsdD1oLmxhfHxoLnNyYztoLmlhJiZVYShhLmksaCk7ZT0hMSE9PW4uY2FsbCh0LGQpJiZlO319cmV0dXJuIGUmJiFkLmRlZmF1bHRQcmV2ZW50ZWR9dmFyIGpiPWwuSlNPTi5zdHJpbmdpZnk7Y2xhc3Mga2J7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmk9YTt0aGlzLmo9Yjt0aGlzLmg9MDt0aGlzLmc9bnVsbDt9Z2V0KCl7bGV0IGE7MDx0aGlzLmg/KHRoaXMuaC0tLGE9dGhpcy5nLHRoaXMuZz1hLm5leHQsYS5uZXh0PW51bGwpOmE9dGhpcy5pKCk7cmV0dXJuIGF9fWZ1bmN0aW9uIGxiKCl7dmFyIGE9bWI7bGV0IGI9bnVsbDthLmcmJihiPWEuZyxhLmc9YS5nLm5leHQsYS5nfHwoYS5oPW51bGwpLGIubmV4dD1udWxsKTtyZXR1cm4gYn1jbGFzcyBuYntjb25zdHJ1Y3Rvcigpe3RoaXMuaD10aGlzLmc9bnVsbDt9YWRkKGEsYil7Y29uc3QgYz1vYi5nZXQoKTtjLnNldChhLGIpO3RoaXMuaD90aGlzLmgubmV4dD1jOnRoaXMuZz1jO3RoaXMuaD1jO319dmFyIG9iPW5ldyBrYigoKT0+bmV3IHBiLGE9PmEucmVzZXQoKSk7Y2xhc3MgcGJ7Y29uc3RydWN0b3IoKXt0aGlzLm5leHQ9dGhpcy5nPXRoaXMuaD1udWxsO31zZXQoYSxiKXt0aGlzLmg9YTt0aGlzLmc9Yjt0aGlzLm5leHQ9bnVsbDt9cmVzZXQoKXt0aGlzLm5leHQ9dGhpcy5nPXRoaXMuaD1udWxsO319ZnVuY3Rpb24gcWIoYSl7dmFyIGI9MTthPWEuc3BsaXQoXCI6XCIpO2NvbnN0IGM9W107Zm9yKDswPGImJmEubGVuZ3RoOyljLnB1c2goYS5zaGlmdCgpKSxiLS07YS5sZW5ndGgmJmMucHVzaChhLmpvaW4oXCI6XCIpKTtyZXR1cm4gY31mdW5jdGlvbiByYihhKXtsLnNldFRpbWVvdXQoKCk9Pnt0aHJvdyBhO30sMCk7fWxldCBzYix0Yj0hMSxtYj1uZXcgbmIsdmI9KCk9Pntjb25zdCBhPWwuUHJvbWlzZS5yZXNvbHZlKHZvaWQgMCk7c2I9KCk9PnthLnRoZW4odWIpO307fTt2YXIgdWI9KCk9Pntmb3IodmFyIGE7YT1sYigpOyl7dHJ5e2EuaC5jYWxsKGEuZyk7fWNhdGNoKGMpe3JiKGMpO312YXIgYj1vYjtiLmooYSk7MTAwPmIuaCYmKGIuaCsrLGEubmV4dD1iLmcsYi5nPWEpO310Yj0hMTt9O2Z1bmN0aW9uIHdiKGEsYil7Qi5jYWxsKHRoaXMpO3RoaXMuaD1hfHwxO3RoaXMuZz1ifHxsO3RoaXMuaj1xKHRoaXMucWIsdGhpcyk7dGhpcy5sPURhdGUubm93KCk7fXIod2IsQik7az13Yi5wcm90b3R5cGU7ay5nYT0hMTtrLlQ9bnVsbDtrLnFiPWZ1bmN0aW9uKCl7aWYodGhpcy5nYSl7dmFyIGE9RGF0ZS5ub3coKS10aGlzLmw7MDxhJiZhPC44KnRoaXMuaD90aGlzLlQ9dGhpcy5nLnNldFRpbWVvdXQodGhpcy5qLHRoaXMuaC1hKToodGhpcy5UJiYodGhpcy5nLmNsZWFyVGltZW91dCh0aGlzLlQpLHRoaXMuVD1udWxsKSxDKHRoaXMsXCJ0aWNrXCIpLHRoaXMuZ2EmJih4Yih0aGlzKSx0aGlzLnN0YXJ0KCkpKTt9fTtrLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5nYT0hMDt0aGlzLlR8fCh0aGlzLlQ9dGhpcy5nLnNldFRpbWVvdXQodGhpcy5qLHRoaXMuaCksdGhpcy5sPURhdGUubm93KCkpO307XG5mdW5jdGlvbiB4YihhKXthLmdhPSExO2EuVCYmKGEuZy5jbGVhclRpbWVvdXQoYS5UKSxhLlQ9bnVsbCk7fWsuTj1mdW5jdGlvbigpe3diLiQuTi5jYWxsKHRoaXMpO3hiKHRoaXMpO2RlbGV0ZSB0aGlzLmc7fTtmdW5jdGlvbiB5YihhLGIsYyl7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEpYyYmKGE9cShhLGMpKTtlbHNlIGlmKGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuaGFuZGxlRXZlbnQpYT1xKGEuaGFuZGxlRXZlbnQsYSk7ZWxzZSB0aHJvdyBFcnJvcihcIkludmFsaWQgbGlzdGVuZXIgYXJndW1lbnRcIik7cmV0dXJuIDIxNDc0ODM2NDc8TnVtYmVyKGIpPy0xOmwuc2V0VGltZW91dChhLGJ8fDApfWZ1bmN0aW9uIHpiKGEpe2EuZz15YigoKT0+e2EuZz1udWxsO2EuaSYmKGEuaT0hMSx6YihhKSk7fSxhLmopO2NvbnN0IGI9YS5oO2EuaD1udWxsO2EubS5hcHBseShudWxsLGIpO31jbGFzcyBBYiBleHRlbmRzIHZ7Y29uc3RydWN0b3IoYSxiKXtzdXBlcigpO3RoaXMubT1hO3RoaXMuaj1iO3RoaXMuaD1udWxsO3RoaXMuaT0hMTt0aGlzLmc9bnVsbDt9bChhKXt0aGlzLmg9YXJndW1lbnRzO3RoaXMuZz90aGlzLmk9ITA6emIodGhpcyk7fU4oKXtzdXBlci5OKCk7dGhpcy5nJiYobC5jbGVhclRpbWVvdXQodGhpcy5nKSx0aGlzLmc9bnVsbCx0aGlzLmk9ITEsdGhpcy5oPW51bGwpO319ZnVuY3Rpb24gQmIoYSl7di5jYWxsKHRoaXMpO3RoaXMuaD1hO3RoaXMuZz17fTt9cihCYix2KTt2YXIgQ2I9W107ZnVuY3Rpb24gRGIoYSxiLGMsZCl7QXJyYXkuaXNBcnJheShjKXx8KGMmJihDYlswXT1jLnRvU3RyaW5nKCkpLGM9Q2IpO2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1ZYShiLGNbZV0sZHx8YS5oYW5kbGVFdmVudCwhMSxhLmh8fGEpO2lmKCFmKWJyZWFrO2EuZ1tmLmtleV09Zjt9fWZ1bmN0aW9uIEZiKGEpe05hKGEuZyxmdW5jdGlvbihiLGMpe3RoaXMuZy5oYXNPd25Qcm9wZXJ0eShjKSYmZ2IoYik7fSxhKTthLmc9e307fUJiLnByb3RvdHlwZS5OPWZ1bmN0aW9uKCl7QmIuJC5OLmNhbGwodGhpcyk7RmIodGhpcyk7fTtCYi5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIkV2ZW50SGFuZGxlci5oYW5kbGVFdmVudCBub3QgaW1wbGVtZW50ZWRcIik7fTtmdW5jdGlvbiBHYigpe3RoaXMuZz0hMDt9R2IucHJvdG90eXBlLkVhPWZ1bmN0aW9uKCl7dGhpcy5nPSExO307ZnVuY3Rpb24gSGIoYSxiLGMsZCxlLGYpe2EuaW5mbyhmdW5jdGlvbigpe2lmKGEuZylpZihmKXt2YXIgaD1cIlwiO2Zvcih2YXIgbj1mLnNwbGl0KFwiJlwiKSx0PTA7dDxuLmxlbmd0aDt0Kyspe3ZhciBtPW5bdF0uc3BsaXQoXCI9XCIpO2lmKDE8bS5sZW5ndGgpe3ZhciB1PW1bMF07bT1tWzFdO3ZhciBMPXUuc3BsaXQoXCJfXCIpO2g9Mjw9TC5sZW5ndGgmJlwidHlwZVwiPT1MWzFdP2grKHUrXCI9XCIrbStcIiZcIik6aCsodStcIj1yZWRhY3RlZCZcIik7fX19ZWxzZSBoPW51bGw7ZWxzZSBoPWY7cmV0dXJuIFwiWE1MSFRUUCBSRVEgKFwiK2QrXCIpIFthdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2h9KTt9XG5mdW5jdGlvbiBJYihhLGIsYyxkLGUsZixoKXthLmluZm8oZnVuY3Rpb24oKXtyZXR1cm4gXCJYTUxIVFRQIFJFU1AgKFwiK2QrXCIpIFsgYXR0ZW1wdCBcIitlK1wiXTogXCIrYitcIlxcblwiK2MrXCJcXG5cIitmK1wiIFwiK2h9KTt9ZnVuY3Rpb24gRChhLGIsYyxkKXthLmluZm8oZnVuY3Rpb24oKXtyZXR1cm4gXCJYTUxIVFRQIFRFWFQgKFwiK2IrXCIpOiBcIitKYihhLGMpKyhkP1wiIFwiK2Q6XCJcIil9KTt9ZnVuY3Rpb24gS2IoYSxiKXthLmluZm8oZnVuY3Rpb24oKXtyZXR1cm4gXCJUSU1FT1VUOiBcIitifSk7fUdiLnByb3RvdHlwZS5pbmZvPWZ1bmN0aW9uKCl7fTtcbmZ1bmN0aW9uIEpiKGEsYil7aWYoIWEuZylyZXR1cm4gYjtpZighYilyZXR1cm4gbnVsbDt0cnl7dmFyIGM9SlNPTi5wYXJzZShiKTtpZihjKWZvcihhPTA7YTxjLmxlbmd0aDthKyspaWYoQXJyYXkuaXNBcnJheShjW2FdKSl7dmFyIGQ9Y1thXTtpZighKDI+ZC5sZW5ndGgpKXt2YXIgZT1kWzFdO2lmKEFycmF5LmlzQXJyYXkoZSkmJiEoMT5lLmxlbmd0aCkpe3ZhciBmPWVbMF07aWYoXCJub29wXCIhPWYmJlwic3RvcFwiIT1mJiZcImNsb3NlXCIhPWYpZm9yKHZhciBoPTE7aDxlLmxlbmd0aDtoKyspZVtoXT1cIlwiO319fXJldHVybiBqYihjKX1jYXRjaChuKXtyZXR1cm4gYn19dmFyIEU9e30sTGI9bnVsbDtmdW5jdGlvbiBNYigpe3JldHVybiBMYj1MYnx8bmV3IEJ9RS5UYT1cInNlcnZlcnJlYWNoYWJpbGl0eVwiO2Z1bmN0aW9uIE5iKGEpe3cuY2FsbCh0aGlzLEUuVGEsYSk7fXIoTmIsdyk7ZnVuY3Rpb24gT2IoYSl7Y29uc3QgYj1NYigpO0MoYixuZXcgTmIoYikpO31FLlNUQVRfRVZFTlQ9XCJzdGF0ZXZlbnRcIjtmdW5jdGlvbiBQYihhLGIpe3cuY2FsbCh0aGlzLEUuU1RBVF9FVkVOVCxhKTt0aGlzLnN0YXQ9Yjt9cihQYix3KTtmdW5jdGlvbiBGKGEpe2NvbnN0IGI9TWIoKTtDKGIsbmV3IFBiKGIsYSkpO31FLlVhPVwidGltaW5nZXZlbnRcIjtmdW5jdGlvbiBRYihhLGIpe3cuY2FsbCh0aGlzLEUuVWEsYSk7dGhpcy5zaXplPWI7fXIoUWIsdyk7XG5mdW5jdGlvbiBSYihhLGIpe2lmKFwiZnVuY3Rpb25cIiE9PXR5cGVvZiBhKXRocm93IEVycm9yKFwiRm4gbXVzdCBub3QgYmUgbnVsbCBhbmQgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiBsLnNldFRpbWVvdXQoZnVuY3Rpb24oKXthKCk7fSxiKX12YXIgU2I9e05PX0VSUk9SOjAscmI6MSxFYjoyLERiOjMseWI6NCxDYjo1LEZiOjYsUWE6NyxUSU1FT1VUOjgsSWI6OX07dmFyIFRiPXt3YjpcImNvbXBsZXRlXCIsU2I6XCJzdWNjZXNzXCIsUmE6XCJlcnJvclwiLFFhOlwiYWJvcnRcIixLYjpcInJlYWR5XCIsTGI6XCJyZWFkeXN0YXRlY2hhbmdlXCIsVElNRU9VVDpcInRpbWVvdXRcIixHYjpcImluY3JlbWVudGFsZGF0YVwiLEpiOlwicHJvZ3Jlc3NcIix6YjpcImRvd25sb2FkcHJvZ3Jlc3NcIiwkYjpcInVwbG9hZHByb2dyZXNzXCJ9O2Z1bmN0aW9uIFViKCl7fVViLnByb3RvdHlwZS5oPW51bGw7ZnVuY3Rpb24gVmIoYSl7cmV0dXJuIGEuaHx8KGEuaD1hLmkoKSl9ZnVuY3Rpb24gV2IoKXt9dmFyIFhiPXtPUEVOOlwiYVwiLHZiOlwiYlwiLFJhOlwiY1wiLEhiOlwiZFwifTtmdW5jdGlvbiBZYigpe3cuY2FsbCh0aGlzLFwiZFwiKTt9cihZYix3KTtmdW5jdGlvbiBaYigpe3cuY2FsbCh0aGlzLFwiY1wiKTt9cihaYix3KTt2YXIgJGI7ZnVuY3Rpb24gYWMoKXt9cihhYyxVYik7YWMucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fTthYy5wcm90b3R5cGUuaT1mdW5jdGlvbigpe3JldHVybiB7fX07JGI9bmV3IGFjO2Z1bmN0aW9uIGJjKGEsYixjLGQpe3RoaXMubD1hO3RoaXMuaj1iO3RoaXMubT1jO3RoaXMuVz1kfHwxO3RoaXMuVT1uZXcgQmIodGhpcyk7dGhpcy5QPWNjO2E9dmE/MTI1OnZvaWQgMDt0aGlzLlY9bmV3IHdiKGEpO3RoaXMuST1udWxsO3RoaXMuaT0hMTt0aGlzLnM9dGhpcy5BPXRoaXMudj10aGlzLkw9dGhpcy5HPXRoaXMuWT10aGlzLkI9bnVsbDt0aGlzLkY9W107dGhpcy5nPW51bGw7dGhpcy5DPTA7dGhpcy5vPXRoaXMudT1udWxsO3RoaXMuY2E9LTE7dGhpcy5KPSExO3RoaXMuTz0wO3RoaXMuTT1udWxsO3RoaXMuYmE9dGhpcy5LPXRoaXMuYWE9dGhpcy5TPSExO3RoaXMuaD1uZXcgZGM7fWZ1bmN0aW9uIGRjKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgY2M9NDVFMyxlYz17fSxmYz17fTtrPWJjLnByb3RvdHlwZTtrLnNldFRpbWVvdXQ9ZnVuY3Rpb24oYSl7dGhpcy5QPWE7fTtcbmZ1bmN0aW9uIGdjKGEsYixjKXthLkw9MTthLnY9aGMoRyhiKSk7YS5zPWM7YS5TPSEwO2ljKGEsbnVsbCk7fWZ1bmN0aW9uIGljKGEsYil7YS5HPURhdGUubm93KCk7amMoYSk7YS5BPUcoYS52KTt2YXIgYz1hLkEsZD1hLlc7QXJyYXkuaXNBcnJheShkKXx8KGQ9W1N0cmluZyhkKV0pO2tjKGMuaSxcInRcIixkKTthLkM9MDtjPWEubC5KO2EuaD1uZXcgZGM7YS5nPWxjKGEubCxjP2I6bnVsbCwhYS5zKTswPGEuTyYmKGEuTT1uZXcgQWIocShhLlBhLGEsYS5nKSxhLk8pKTtEYihhLlUsYS5nLFwicmVhZHlzdGF0ZWNoYW5nZVwiLGEubmIpO2I9YS5JP1BhKGEuSSk6e307YS5zPyhhLnV8fChhLnU9XCJQT1NUXCIpLGJbXCJDb250ZW50LVR5cGVcIl09XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixhLmcuaGEoYS5BLGEudSxhLnMsYikpOihhLnU9XCJHRVRcIixhLmcuaGEoYS5BLGEudSxudWxsLGIpKTtPYigpO0hiKGEuaixhLnUsYS5BLGEubSxhLlcsYS5zKTt9XG5rLm5iPWZ1bmN0aW9uKGEpe2E9YS50YXJnZXQ7Y29uc3QgYj10aGlzLk07YiYmMz09SChhKT9iLmwoKTp0aGlzLlBhKGEpO307XG5rLlBhPWZ1bmN0aW9uKGEpe3RyeXtpZihhPT10aGlzLmcpYTp7Y29uc3QgdT1IKHRoaXMuZyk7dmFyIGI9dGhpcy5nLklhKCk7Y29uc3QgTD10aGlzLmcuZGEoKTtpZighKDM+dSkmJigzIT11fHx2YXx8dGhpcy5nJiYodGhpcy5oLmh8fHRoaXMuZy5qYSgpfHxtYyh0aGlzLmcpKSkpe3RoaXMuSnx8NCE9dXx8Nz09Ynx8KDg9PWJ8fDA+PUw/T2IoMyk6T2IoMikpO25jKHRoaXMpO3ZhciBjPXRoaXMuZy5kYSgpO3RoaXMuY2E9YztiOmlmKG9jKHRoaXMpKXt2YXIgZD1tYyh0aGlzLmcpO2E9XCJcIjt2YXIgZT1kLmxlbmd0aCxmPTQ9PUgodGhpcy5nKTtpZighdGhpcy5oLmkpe2lmKFwidW5kZWZpbmVkXCI9PT10eXBlb2YgVGV4dERlY29kZXIpe0kodGhpcyk7cGModGhpcyk7dmFyIGg9XCJcIjticmVhayBifXRoaXMuaC5pPW5ldyBsLlRleHREZWNvZGVyO31mb3IoYj0wO2I8ZTtiKyspdGhpcy5oLmg9ITAsYSs9dGhpcy5oLmkuZGVjb2RlKGRbYl0se3N0cmVhbTpmJiZiPT1lLTF9KTtkLnNwbGljZSgwLFxuZSk7dGhpcy5oLmcrPWE7dGhpcy5DPTA7aD10aGlzLmguZzt9ZWxzZSBoPXRoaXMuZy5qYSgpO3RoaXMuaT0yMDA9PWM7SWIodGhpcy5qLHRoaXMudSx0aGlzLkEsdGhpcy5tLHRoaXMuVyx1LGMpO2lmKHRoaXMuaSl7aWYodGhpcy5hYSYmIXRoaXMuSyl7Yjp7aWYodGhpcy5nKXt2YXIgbix0PXRoaXMuZztpZigobj10Lmc/dC5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIik6bnVsbCkmJiF4KG4pKXt2YXIgbT1uO2JyZWFrIGJ9fW09bnVsbDt9aWYoYz1tKUQodGhpcy5qLHRoaXMubSxjLFwiSW5pdGlhbCBoYW5kc2hha2UgcmVzcG9uc2UgdmlhIFgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpLHRoaXMuSz0hMCxxYyh0aGlzLGMpO2Vsc2Uge3RoaXMuaT0hMTt0aGlzLm89MztGKDEyKTtJKHRoaXMpO3BjKHRoaXMpO2JyZWFrIGF9fXRoaXMuUz8ocmModGhpcyx1LGgpLHZhJiZ0aGlzLmkmJjM9PXUmJihEYih0aGlzLlUsdGhpcy5WLFwidGlja1wiLHRoaXMubWIpLFxudGhpcy5WLnN0YXJ0KCkpKTooRCh0aGlzLmosdGhpcy5tLGgsbnVsbCkscWModGhpcyxoKSk7ND09dSYmSSh0aGlzKTt0aGlzLmkmJiF0aGlzLkomJig0PT11P3NjKHRoaXMubCx0aGlzKToodGhpcy5pPSExLGpjKHRoaXMpKSk7fWVsc2UgdGModGhpcy5nKSw0MDA9PWMmJjA8aC5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMubz0zLEYoMTIpKToodGhpcy5vPTAsRigxMykpLEkodGhpcykscGModGhpcyk7fX19Y2F0Y2godSl7fWZpbmFsbHl7fX07ZnVuY3Rpb24gb2MoYSl7cmV0dXJuIGEuZz9cIkdFVFwiPT1hLnUmJjIhPWEuTCYmYS5sLkhhOiExfVxuZnVuY3Rpb24gcmMoYSxiLGMpe2xldCBkPSEwLGU7Zm9yKDshYS5KJiZhLkM8Yy5sZW5ndGg7KWlmKGU9dWMoYSxjKSxlPT1mYyl7ND09YiYmKGEubz00LEYoMTQpLGQ9ITEpO0QoYS5qLGEubSxudWxsLFwiW0luY29tcGxldGUgUmVzcG9uc2VdXCIpO2JyZWFrfWVsc2UgaWYoZT09ZWMpe2Eubz00O0YoMTUpO0QoYS5qLGEubSxjLFwiW0ludmFsaWQgQ2h1bmtdXCIpO2Q9ITE7YnJlYWt9ZWxzZSBEKGEuaixhLm0sZSxudWxsKSxxYyhhLGUpO29jKGEpJiZlIT1mYyYmZSE9ZWMmJihhLmguZz1cIlwiLGEuQz0wKTs0IT1ifHwwIT1jLmxlbmd0aHx8YS5oLmh8fChhLm89MSxGKDE2KSxkPSExKTthLmk9YS5pJiZkO2Q/MDxjLmxlbmd0aCYmIWEuYmEmJihhLmJhPSEwLGI9YS5sLGIuZz09YSYmYi5jYSYmIWIuTSYmKGIubC5pbmZvKFwiR3JlYXQsIG5vIGJ1ZmZlcmluZyBwcm94eSBkZXRlY3RlZC4gQnl0ZXMgcmVjZWl2ZWQ6IFwiK2MubGVuZ3RoKSx2YyhiKSxiLk09ITAsRigxMSkpKTooRChhLmosYS5tLFxuYyxcIltJbnZhbGlkIENodW5rZWQgUmVzcG9uc2VdXCIpLEkoYSkscGMoYSkpO31rLm1iPWZ1bmN0aW9uKCl7aWYodGhpcy5nKXt2YXIgYT1IKHRoaXMuZyksYj10aGlzLmcuamEoKTt0aGlzLkM8Yi5sZW5ndGgmJihuYyh0aGlzKSxyYyh0aGlzLGEsYiksdGhpcy5pJiY0IT1hJiZqYyh0aGlzKSk7fX07ZnVuY3Rpb24gdWMoYSxiKXt2YXIgYz1hLkMsZD1iLmluZGV4T2YoXCJcXG5cIixjKTtpZigtMT09ZClyZXR1cm4gZmM7Yz1OdW1iZXIoYi5zdWJzdHJpbmcoYyxkKSk7aWYoaXNOYU4oYykpcmV0dXJuIGVjO2QrPTE7aWYoZCtjPmIubGVuZ3RoKXJldHVybiBmYztiPWIuc2xpY2UoZCxkK2MpO2EuQz1kK2M7cmV0dXJuIGJ9ay5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLko9ITA7SSh0aGlzKTt9O2Z1bmN0aW9uIGpjKGEpe2EuWT1EYXRlLm5vdygpK2EuUDt3YyhhLGEuUCk7fVxuZnVuY3Rpb24gd2MoYSxiKXtpZihudWxsIT1hLkIpdGhyb3cgRXJyb3IoXCJXYXRjaERvZyB0aW1lciBub3QgbnVsbFwiKTthLkI9UmIocShhLmxiLGEpLGIpO31mdW5jdGlvbiBuYyhhKXthLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ay5sYj1mdW5jdGlvbigpe3RoaXMuQj1udWxsO2NvbnN0IGE9RGF0ZS5ub3coKTswPD1hLXRoaXMuWT8oS2IodGhpcy5qLHRoaXMuQSksMiE9dGhpcy5MJiYoT2IoKSxGKDE3KSksSSh0aGlzKSx0aGlzLm89MixwYyh0aGlzKSk6d2ModGhpcyx0aGlzLlktYSk7fTtmdW5jdGlvbiBwYyhhKXswPT1hLmwuSHx8YS5KfHxzYyhhLmwsYSk7fWZ1bmN0aW9uIEkoYSl7bmMoYSk7dmFyIGI9YS5NO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIuc2EmJmIuc2EoKTthLk09bnVsbDt4YihhLlYpO0ZiKGEuVSk7YS5nJiYoYj1hLmcsYS5nPW51bGwsYi5hYm9ydCgpLGIuc2EoKSk7fVxuZnVuY3Rpb24gcWMoYSxiKXt0cnl7dmFyIGM9YS5sO2lmKDAhPWMuSCYmKGMuZz09YXx8eGMoYy5pLGEpKSlpZighYS5LJiZ4YyhjLmksYSkmJjM9PWMuSCl7dHJ5e3ZhciBkPWMuSmEuZy5wYXJzZShiKTt9Y2F0Y2gobSl7ZD1udWxsO31pZihBcnJheS5pc0FycmF5KGQpJiYzPT1kLmxlbmd0aCl7dmFyIGU9ZDtpZigwPT1lWzBdKWE6e2lmKCFjLnUpe2lmKGMuZylpZihjLmcuRyszRTM8YS5HKXljKGMpLHpjKGMpO2Vsc2UgYnJlYWsgYTtBYyhjKTtGKDE4KTt9fWVsc2UgYy5GYT1lWzFdLDA8Yy5GYS1jLlYmJjM3NTAwPmVbMl0mJmMuRyYmMD09Yy5BJiYhYy52JiYoYy52PVJiKHEoYy5pYixjKSw2RTMpKTtpZigxPj1CYyhjLmkpJiZjLm9hKXt0cnl7Yy5vYSgpO31jYXRjaChtKXt9Yy5vYT12b2lkIDA7fX1lbHNlIEooYywxMSk7fWVsc2UgaWYoKGEuS3x8Yy5nPT1hKSYmeWMoYyksIXgoYikpZm9yKGU9Yy5KYS5nLnBhcnNlKGIpLGI9MDtiPGUubGVuZ3RoO2IrKyl7bGV0IG09ZVtiXTtjLlY9XG5tWzBdO209bVsxXTtpZigyPT1jLkgpaWYoXCJjXCI9PW1bMF0pe2MuSz1tWzFdO2MucGE9bVsyXTtjb25zdCB1PW1bM107bnVsbCE9dSYmKGMucmE9dSxjLmwuaW5mbyhcIlZFUj1cIitjLnJhKSk7Y29uc3QgTD1tWzRdO251bGwhPUwmJihjLkdhPUwsYy5sLmluZm8oXCJTVkVSPVwiK2MuR2EpKTtjb25zdCBMYT1tWzVdO251bGwhPUxhJiZcIm51bWJlclwiPT09dHlwZW9mIExhJiYwPExhJiYoZD0xLjUqTGEsYy5MPWQsYy5sLmluZm8oXCJiYWNrQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNfPVwiK2QpKTtkPWM7Y29uc3QgbGE9YS5nO2lmKGxhKXtjb25zdCBNYT1sYS5nP2xhLmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUNsaWVudC1XaXJlLVByb3RvY29sXCIpOm51bGw7aWYoTWEpe3ZhciBmPWQuaTtmLmd8fC0xPT1NYS5pbmRleE9mKFwic3BkeVwiKSYmLTE9PU1hLmluZGV4T2YoXCJxdWljXCIpJiYtMT09TWEuaW5kZXhPZihcImgyXCIpfHwoZi5qPWYubCxmLmc9bmV3IFNldCxmLmgmJihDYyhmLGYuaCksZi5oPW51bGwpKTt9aWYoZC5GKXtjb25zdCBFYj1cbmxhLmc/bGEuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1TZXNzaW9uLUlkXCIpOm51bGw7RWImJihkLkRhPUViLEsoZC5JLGQuRixFYikpO319Yy5IPTM7Yy5oJiZjLmguQmEoKTtjLmNhJiYoYy5TPURhdGUubm93KCktYS5HLGMubC5pbmZvKFwiSGFuZHNoYWtlIFJUVDogXCIrYy5TK1wibXNcIikpO2Q9Yzt2YXIgaD1hO2Qud2E9RGMoZCxkLko/ZC5wYTpudWxsLGQuWSk7aWYoaC5LKXtFYyhkLmksaCk7dmFyIG49aCx0PWQuTDt0JiZuLnNldFRpbWVvdXQodCk7bi5CJiYobmMobiksamMobikpO2QuZz1oO31lbHNlIEZjKGQpOzA8Yy5qLmxlbmd0aCYmR2MoYyk7fWVsc2UgXCJzdG9wXCIhPW1bMF0mJlwiY2xvc2VcIiE9bVswXXx8SihjLDcpO2Vsc2UgMz09Yy5IJiYoXCJzdG9wXCI9PW1bMF18fFwiY2xvc2VcIj09bVswXT9cInN0b3BcIj09bVswXT9KKGMsNyk6SGMoYyk6XCJub29wXCIhPW1bMF0mJmMuaCYmYy5oLkFhKG0pLGMuQT0wKTt9T2IoNCk7fWNhdGNoKG0pe319ZnVuY3Rpb24gSWMoYSl7aWYoYS5aJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlopcmV0dXJuIGEuWigpO2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgTWFwJiZhIGluc3RhbmNlb2YgTWFwfHxcInVuZGVmaW5lZFwiIT09dHlwZW9mIFNldCYmYSBpbnN0YW5jZW9mIFNldClyZXR1cm4gQXJyYXkuZnJvbShhLnZhbHVlcygpKTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpcmV0dXJuIGEuc3BsaXQoXCJcIik7aWYoYWEoYSkpe2Zvcih2YXIgYj1bXSxjPWEubGVuZ3RoLGQ9MDtkPGM7ZCsrKWIucHVzaChhW2RdKTtyZXR1cm4gYn1iPVtdO2M9MDtmb3IoZCBpbiBhKWJbYysrXT1hW2RdO3JldHVybiBifVxuZnVuY3Rpb24gSmMoYSl7aWYoYS50YSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS50YSlyZXR1cm4gYS50YSgpO2lmKCFhLlp8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGEuWil7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBNYXAmJmEgaW5zdGFuY2VvZiBNYXApcmV0dXJuIEFycmF5LmZyb20oYS5rZXlzKCkpO2lmKCEoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBTZXQmJmEgaW5zdGFuY2VvZiBTZXQpKXtpZihhYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYj1bXTthPWEubGVuZ3RoO2Zvcih2YXIgYz0wO2M8YTtjKyspYi5wdXNoKGMpO3JldHVybiBifWI9W107Yz0wO2Zvcihjb25zdCBkIGluIGEpYltjKytdPWQ7cmV0dXJuIGJ9fX1cbmZ1bmN0aW9uIEtjKGEsYil7aWYoYS5mb3JFYWNoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmZvckVhY2gpYS5mb3JFYWNoKGIsdm9pZCAwKTtlbHNlIGlmKGFhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGIsdm9pZCAwKTtlbHNlIGZvcih2YXIgYz1KYyhhKSxkPUljKGEpLGU9ZC5sZW5ndGgsZj0wO2Y8ZTtmKyspYi5jYWxsKHZvaWQgMCxkW2ZdLGMmJmNbZl0sYSk7fXZhciBMYz1SZWdFeHAoXCJeKD86KFteOi8/Iy5dKyk6KT8oPzovLyg/OihbXlxcXFxcXFxcLz8jXSopQCk/KFteXFxcXFxcXFwvPyNdKj8pKD86OihbMC05XSspKT8oPz1bXFxcXFxcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXFxcPyhbXiNdKikpPyg/OiMoW1xcXFxzXFxcXFNdKikpPyRcIik7ZnVuY3Rpb24gTWMoYSxiKXtpZihhKXthPWEuc3BsaXQoXCImXCIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLmluZGV4T2YoXCI9XCIpLGU9bnVsbDtpZigwPD1kKXt2YXIgZj1hW2NdLnN1YnN0cmluZygwLGQpO2U9YVtjXS5zdWJzdHJpbmcoZCsxKTt9ZWxzZSBmPWFbY107YihmLGU/ZGVjb2RlVVJJQ29tcG9uZW50KGUucmVwbGFjZSgvXFwrL2csXCIgXCIpKTpcIlwiKTt9fX1mdW5jdGlvbiBNKGEpe3RoaXMuZz10aGlzLnM9dGhpcy5qPVwiXCI7dGhpcy5tPW51bGw7dGhpcy5vPXRoaXMubD1cIlwiO3RoaXMuaD0hMTtpZihhIGluc3RhbmNlb2YgTSl7dGhpcy5oPWEuaDtOYyh0aGlzLGEuaik7dGhpcy5zPWEuczt0aGlzLmc9YS5nO09jKHRoaXMsYS5tKTt0aGlzLmw9YS5sO3ZhciBiPWEuaTt2YXIgYz1uZXcgUGM7Yy5pPWIuaTtiLmcmJihjLmc9bmV3IE1hcChiLmcpLGMuaD1iLmgpO1FjKHRoaXMsYyk7dGhpcy5vPWEubzt9ZWxzZSBhJiYoYj1TdHJpbmcoYSkubWF0Y2goTGMpKT8odGhpcy5oPSExLE5jKHRoaXMsYlsxXXx8XCJcIiwhMCksdGhpcy5zPVJjKGJbMl18fFwiXCIpLHRoaXMuZz1SYyhiWzNdfHxcIlwiLCEwKSxPYyh0aGlzLGJbNF0pLHRoaXMubD1SYyhiWzVdfHxcIlwiLCEwKSxRYyh0aGlzLGJbNl18fFwiXCIsITApLHRoaXMubz1SYyhiWzddfHxcIlwiKSk6KHRoaXMuaD0hMSx0aGlzLmk9bmV3IFBjKG51bGwsdGhpcy5oKSk7fVxuTS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuajtiJiZhLnB1c2goU2MoYixUYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuZztpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLnMpJiZhLnB1c2goU2MoYixUYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5tLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5sKXRoaXMuZyYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChTYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9VYzpWYywhMCkpOyhjPXRoaXMuaS50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMubykmJmEucHVzaChcIiNcIixTYyhjLFdjKSk7cmV0dXJuIGEuam9pbihcIlwiKX07ZnVuY3Rpb24gRyhhKXtyZXR1cm4gbmV3IE0oYSl9XG5mdW5jdGlvbiBOYyhhLGIsYyl7YS5qPWM/UmMoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIE9jKGEsYil7aWYoYil7Yj1OdW1iZXIoYik7aWYoaXNOYU4oYil8fDA+Yil0aHJvdyBFcnJvcihcIkJhZCBwb3J0IG51bWJlciBcIitiKTthLm09Yjt9ZWxzZSBhLm09bnVsbDt9ZnVuY3Rpb24gUWMoYSxiLGMpe2IgaW5zdGFuY2VvZiBQYz8oYS5pPWIsWGMoYS5pLGEuaCkpOihjfHwoYj1TYyhiLFljKSksYS5pPW5ldyBQYyhiLGEuaCkpO31mdW5jdGlvbiBLKGEsYixjKXthLmkuc2V0KGIsYyk7fWZ1bmN0aW9uIGhjKGEpe0soYSxcInp4XCIsTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KStNYXRoLmFicyhNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSleRGF0ZS5ub3coKSkudG9TdHJpbmcoMzYpKTtyZXR1cm4gYX1cbmZ1bmN0aW9uIFJjKGEsYil7cmV0dXJuIGE/Yj9kZWNvZGVVUkkoYS5yZXBsYWNlKC8lMjUvZyxcIiUyNTI1XCIpKTpkZWNvZGVVUklDb21wb25lbnQoYSk6XCJcIn1mdW5jdGlvbiBTYyhhLGIsYyl7cmV0dXJuIFwic3RyaW5nXCI9PT10eXBlb2YgYT8oYT1lbmNvZGVVUkkoYSkucmVwbGFjZShiLFpjKSxjJiYoYT1hLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYSk6bnVsbH1mdW5jdGlvbiBaYyhhKXthPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gXCIlXCIrKGE+PjQmMTUpLnRvU3RyaW5nKDE2KSsoYSYxNSkudG9TdHJpbmcoMTYpfXZhciBUYz0vWyNcXC9cXD9AXS9nLFZjPS9bI1xcPzpdL2csVWM9L1sjXFw/XS9nLFljPS9bI1xcP0BdL2csV2M9LyMvZztmdW5jdGlvbiBQYyhhLGIpe3RoaXMuaD10aGlzLmc9bnVsbDt0aGlzLmk9YXx8bnVsbDt0aGlzLmo9ISFiO31cbmZ1bmN0aW9uIE4oYSl7YS5nfHwoYS5nPW5ldyBNYXAsYS5oPTAsYS5pJiZNYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9az1QYy5wcm90b3R5cGU7ay5hZGQ9ZnVuY3Rpb24oYSxiKXtOKHRoaXMpO3RoaXMuaT1udWxsO2E9Tyh0aGlzLGEpO3ZhciBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O2Z1bmN0aW9uICRjKGEsYil7TihhKTtiPU8oYSxiKTthLmcuaGFzKGIpJiYoYS5pPW51bGwsYS5oLT1hLmcuZ2V0KGIpLmxlbmd0aCxhLmcuZGVsZXRlKGIpKTt9ZnVuY3Rpb24gYWQoYSxiKXtOKGEpO2I9TyhhLGIpO3JldHVybiBhLmcuaGFzKGIpfVxuay5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Tih0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe2MuZm9yRWFjaChmdW5jdGlvbihlKXthLmNhbGwoYixlLGQsdGhpcyk7fSx0aGlzKTt9LHRoaXMpO307ay50YT1mdW5jdGlvbigpe04odGhpcyk7Y29uc3QgYT1BcnJheS5mcm9tKHRoaXMuZy52YWx1ZXMoKSksYj1BcnJheS5mcm9tKHRoaXMuZy5rZXlzKCkpLGM9W107Zm9yKGxldCBkPTA7ZDxiLmxlbmd0aDtkKyspe2NvbnN0IGU9YVtkXTtmb3IobGV0IGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7fXJldHVybiBjfTtrLlo9ZnVuY3Rpb24oYSl7Tih0aGlzKTtsZXQgYj1bXTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpYWQodGhpcyxhKSYmKGI9Yi5jb25jYXQodGhpcy5nLmdldChPKHRoaXMsYSkpKSk7ZWxzZSB7YT1BcnJheS5mcm9tKHRoaXMuZy52YWx1ZXMoKSk7Zm9yKGxldCBjPTA7YzxhLmxlbmd0aDtjKyspYj1iLmNvbmNhdChhW2NdKTt9cmV0dXJuIGJ9O1xuay5zZXQ9ZnVuY3Rpb24oYSxiKXtOKHRoaXMpO3RoaXMuaT1udWxsO2E9Tyh0aGlzLGEpO2FkKHRoaXMsYSkmJih0aGlzLmgtPXRoaXMuZy5nZXQoYSkubGVuZ3RoKTt0aGlzLmcuc2V0KGEsW2JdKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O2suZ2V0PWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIGI7YT10aGlzLlooYSk7cmV0dXJuIDA8YS5sZW5ndGg/U3RyaW5nKGFbMF0pOmJ9O2Z1bmN0aW9uIGtjKGEsYixjKXskYyhhLGIpOzA8Yy5sZW5ndGgmJihhLmk9bnVsbCxhLmcuc2V0KE8oYSxiKSxtYShjKSksYS5oKz1jLmxlbmd0aCk7fVxuay50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuaSlyZXR1cm4gdGhpcy5pO2lmKCF0aGlzLmcpcmV0dXJuIFwiXCI7Y29uc3QgYT1bXSxiPUFycmF5LmZyb20odGhpcy5nLmtleXMoKSk7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107Y29uc3QgZj1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGQpKSxoPXRoaXMuWihkKTtmb3IoZD0wO2Q8aC5sZW5ndGg7ZCsrKXt2YXIgZT1mO1wiXCIhPT1oW2RdJiYoZSs9XCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhoW2RdKSkpO2EucHVzaChlKTt9fXJldHVybiB0aGlzLmk9YS5qb2luKFwiJlwiKX07ZnVuY3Rpb24gTyhhLGIpe2I9U3RyaW5nKGIpO2EuaiYmKGI9Yi50b0xvd2VyQ2FzZSgpKTtyZXR1cm4gYn1cbmZ1bmN0aW9uIFhjKGEsYil7YiYmIWEuaiYmKE4oYSksYS5pPW51bGwsYS5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKCRjKHRoaXMsZCksa2ModGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9dmFyIGJkPWNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5nPWE7dGhpcy5tYXA9Yjt9fTtmdW5jdGlvbiBjZChhKXt0aGlzLmw9YXx8ZGQ7bC5QZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmc/KGE9bC5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKSxhPTA8YS5sZW5ndGgmJihcImhxXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sfHxcImgyXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sKSk6YT0hIShsLmcmJmwuZy5LYSYmbC5nLkthKCkmJmwuZy5LYSgpLmRjKTt0aGlzLmo9YT90aGlzLmw6MTt0aGlzLmc9bnVsbDsxPHRoaXMuaiYmKHRoaXMuZz1uZXcgU2V0KTt0aGlzLmg9bnVsbDt0aGlzLmk9W107fXZhciBkZD0xMDtmdW5jdGlvbiBlZChhKXtyZXR1cm4gYS5oPyEwOmEuZz9hLmcuc2l6ZT49YS5qOiExfWZ1bmN0aW9uIEJjKGEpe3JldHVybiBhLmg/MTphLmc/YS5nLnNpemU6MH1mdW5jdGlvbiB4YyhhLGIpe3JldHVybiBhLmg/YS5oPT1iOmEuZz9hLmcuaGFzKGIpOiExfWZ1bmN0aW9uIENjKGEsYil7YS5nP2EuZy5hZGQoYik6YS5oPWI7fVxuZnVuY3Rpb24gRWMoYSxiKXthLmgmJmEuaD09Yj9hLmg9bnVsbDphLmcmJmEuZy5oYXMoYikmJmEuZy5kZWxldGUoYik7fWNkLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLmk9ZmQodGhpcyk7aWYodGhpcy5oKXRoaXMuaC5jYW5jZWwoKSx0aGlzLmg9bnVsbDtlbHNlIGlmKHRoaXMuZyYmMCE9PXRoaXMuZy5zaXplKXtmb3IoY29uc3QgYSBvZiB0aGlzLmcudmFsdWVzKCkpYS5jYW5jZWwoKTt0aGlzLmcuY2xlYXIoKTt9fTtmdW5jdGlvbiBmZChhKXtpZihudWxsIT1hLmgpcmV0dXJuIGEuaS5jb25jYXQoYS5oLkYpO2lmKG51bGwhPWEuZyYmMCE9PWEuZy5zaXplKXtsZXQgYj1hLmk7Zm9yKGNvbnN0IGMgb2YgYS5nLnZhbHVlcygpKWI9Yi5jb25jYXQoYy5GKTtyZXR1cm4gYn1yZXR1cm4gbWEoYS5pKX12YXIgZ2Q9Y2xhc3N7c3RyaW5naWZ5KGEpe3JldHVybiBsLkpTT04uc3RyaW5naWZ5KGEsdm9pZCAwKX1wYXJzZShhKXtyZXR1cm4gbC5KU09OLnBhcnNlKGEsdm9pZCAwKX19O2Z1bmN0aW9uIGhkKCl7dGhpcy5nPW5ldyBnZDt9ZnVuY3Rpb24gaWQoYSxiLGMpe2NvbnN0IGQ9Y3x8XCJcIjt0cnl7S2MoYSxmdW5jdGlvbihlLGYpe2xldCBoPWU7cChlKSYmKGg9amIoZSkpO2IucHVzaChkK2YrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGgpKTt9KTt9Y2F0Y2goZSl7dGhyb3cgYi5wdXNoKGQrXCJ0eXBlPVwiK2VuY29kZVVSSUNvbXBvbmVudChcIl9iYWRtYXBcIikpLGU7fX1mdW5jdGlvbiBqZChhLGIpe2NvbnN0IGM9bmV3IEdiO2lmKGwuSW1hZ2Upe2NvbnN0IGQ9bmV3IEltYWdlO2Qub25sb2FkPWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGxvYWRlZFwiLCEwLGIpO2Qub25lcnJvcj1oYShrZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBlcnJvclwiLCExLGIpO2Qub25hYm9ydD1oYShrZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBhYm9ydFwiLCExLGIpO2Qub250aW1lb3V0PWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IHRpbWVvdXRcIiwhMSxiKTtsLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihkLm9udGltZW91dClkLm9udGltZW91dCgpO30sMUU0KTtkLnNyYz1hO31lbHNlIGIoITEpO31mdW5jdGlvbiBrZChhLGIsYyxkLGUpe3RyeXtiLm9ubG9hZD1udWxsLGIub25lcnJvcj1udWxsLGIub25hYm9ydD1udWxsLGIub250aW1lb3V0PW51bGwsZShkKTt9Y2F0Y2goZil7fX1mdW5jdGlvbiBsZChhKXt0aGlzLmw9YS5lY3x8bnVsbDt0aGlzLmo9YS5vYnx8ITE7fXIobGQsVWIpO2xkLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBtZCh0aGlzLmwsdGhpcy5qKX07bGQucHJvdG90eXBlLmk9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGF9fSh7fSk7ZnVuY3Rpb24gbWQoYSxiKXtCLmNhbGwodGhpcyk7dGhpcy5GPWE7dGhpcy51PWI7dGhpcy5tPXZvaWQgMDt0aGlzLnJlYWR5U3RhdGU9bmQ7dGhpcy5zdGF0dXM9MDt0aGlzLnJlc3BvbnNlVHlwZT10aGlzLnJlc3BvbnNlVGV4dD10aGlzLnJlc3BvbnNlPXRoaXMuc3RhdHVzVGV4dD1cIlwiO3RoaXMub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7dGhpcy52PW5ldyBIZWFkZXJzO3RoaXMuaD1udWxsO3RoaXMuQz1cIkdFVFwiO3RoaXMuQj1cIlwiO3RoaXMuZz0hMTt0aGlzLkE9dGhpcy5qPXRoaXMubD1udWxsO31yKG1kLEIpO3ZhciBuZD0wO2s9bWQucHJvdG90eXBlO1xuay5vcGVuPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5yZWFkeVN0YXRlIT1uZCl0aHJvdyB0aGlzLmFib3J0KCksRXJyb3IoXCJFcnJvciByZW9wZW5pbmcgYSBjb25uZWN0aW9uXCIpO3RoaXMuQz1hO3RoaXMuQj1iO3RoaXMucmVhZHlTdGF0ZT0xO29kKHRoaXMpO307ay5zZW5kPWZ1bmN0aW9uKGEpe2lmKDEhPXRoaXMucmVhZHlTdGF0ZSl0aHJvdyB0aGlzLmFib3J0KCksRXJyb3IoXCJuZWVkIHRvIGNhbGwgb3BlbigpIGZpcnN0LiBcIik7dGhpcy5nPSEwO2NvbnN0IGI9e2hlYWRlcnM6dGhpcy52LG1ldGhvZDp0aGlzLkMsY3JlZGVudGlhbHM6dGhpcy5tLGNhY2hlOnZvaWQgMH07YSYmKGIuYm9keT1hKTsodGhpcy5GfHxsKS5mZXRjaChuZXcgUmVxdWVzdCh0aGlzLkIsYikpLnRoZW4odGhpcy4kYS5iaW5kKHRoaXMpLHRoaXMua2EuYmluZCh0aGlzKSk7fTtcbmsuYWJvcnQ9ZnVuY3Rpb24oKXt0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCI7dGhpcy52PW5ldyBIZWFkZXJzO3RoaXMuc3RhdHVzPTA7dGhpcy5qJiZ0aGlzLmouY2FuY2VsKFwiUmVxdWVzdCB3YXMgYWJvcnRlZC5cIikuY2F0Y2goKCk9Pnt9KTsxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuZyYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5nPSExLHBkKHRoaXMpKTt0aGlzLnJlYWR5U3RhdGU9bmQ7fTtcbmsuJGE9ZnVuY3Rpb24oYSl7aWYodGhpcy5nJiYodGhpcy5sPWEsdGhpcy5ofHwodGhpcy5zdGF0dXM9dGhpcy5sLnN0YXR1cyx0aGlzLnN0YXR1c1RleHQ9dGhpcy5sLnN0YXR1c1RleHQsdGhpcy5oPWEuaGVhZGVycyx0aGlzLnJlYWR5U3RhdGU9MixvZCh0aGlzKSksdGhpcy5nJiYodGhpcy5yZWFkeVN0YXRlPTMsb2QodGhpcyksdGhpcy5nKSkpaWYoXCJhcnJheWJ1ZmZlclwiPT09dGhpcy5yZXNwb25zZVR5cGUpYS5hcnJheUJ1ZmZlcigpLnRoZW4odGhpcy5ZYS5iaW5kKHRoaXMpLHRoaXMua2EuYmluZCh0aGlzKSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGwuUmVhZGFibGVTdHJlYW0mJlwiYm9keVwiaW4gYSl7dGhpcy5qPWEuYm9keS5nZXRSZWFkZXIoKTtpZih0aGlzLnUpe2lmKHRoaXMucmVzcG9uc2VUeXBlKXRocm93IEVycm9yKCdyZXNwb25zZVR5cGUgbXVzdCBiZSBlbXB0eSBmb3IgXCJzdHJlYW1CaW5hcnlDaHVua3NcIiBtb2RlIHJlc3BvbnNlcy4nKTt0aGlzLnJlc3BvbnNlPVxuW107fWVsc2UgdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiLHRoaXMuQT1uZXcgVGV4dERlY29kZXI7cWQodGhpcyk7fWVsc2UgYS50ZXh0KCkudGhlbih0aGlzLlphLmJpbmQodGhpcyksdGhpcy5rYS5iaW5kKHRoaXMpKTt9O2Z1bmN0aW9uIHFkKGEpe2Euai5yZWFkKCkudGhlbihhLlhhLmJpbmQoYSkpLmNhdGNoKGEua2EuYmluZChhKSk7fWsuWGE9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXtpZih0aGlzLnUmJmEudmFsdWUpdGhpcy5yZXNwb25zZS5wdXNoKGEudmFsdWUpO2Vsc2UgaWYoIXRoaXMudSl7dmFyIGI9YS52YWx1ZT9hLnZhbHVlOm5ldyBVaW50OEFycmF5KDApO2lmKGI9dGhpcy5BLmRlY29kZShiLHtzdHJlYW06IWEuZG9uZX0pKXRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQrPWI7fWEuZG9uZT9wZCh0aGlzKTpvZCh0aGlzKTszPT10aGlzLnJlYWR5U3RhdGUmJnFkKHRoaXMpO319O1xuay5aYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PWEscGQodGhpcykpO307ay5ZYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPWEscGQodGhpcykpO307ay5rYT1mdW5jdGlvbigpe3RoaXMuZyYmcGQodGhpcyk7fTtmdW5jdGlvbiBwZChhKXthLnJlYWR5U3RhdGU9NDthLmw9bnVsbDthLmo9bnVsbDthLkE9bnVsbDtvZChhKTt9ay5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy52LmFwcGVuZChhLGIpO307ay5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oP3RoaXMuaC5nZXQoYS50b0xvd2VyQ2FzZSgpKXx8XCJcIjpcIlwifTtcbmsuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaClyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9dGhpcy5oLmVudHJpZXMoKTtmb3IodmFyIGM9Yi5uZXh0KCk7IWMuZG9uZTspYz1jLnZhbHVlLGEucHVzaChjWzBdK1wiOiBcIitjWzFdKSxjPWIubmV4dCgpO3JldHVybiBhLmpvaW4oXCJcXHJcXG5cIil9O2Z1bmN0aW9uIG9kKGEpe2Eub25yZWFkeXN0YXRlY2hhbmdlJiZhLm9ucmVhZHlzdGF0ZWNoYW5nZS5jYWxsKGEpO31PYmplY3QuZGVmaW5lUHJvcGVydHkobWQucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBcImluY2x1ZGVcIj09PXRoaXMubX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMubT1hP1wiaW5jbHVkZVwiOlwic2FtZS1vcmlnaW5cIjt9fSk7dmFyIHJkPWwuSlNPTi5wYXJzZTtmdW5jdGlvbiBQKGEpe0IuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IE1hcDt0aGlzLnU9YXx8bnVsbDt0aGlzLmg9ITE7dGhpcy5DPXRoaXMuZz1udWxsO3RoaXMuST1cIlwiO3RoaXMubT0wO3RoaXMuaj1cIlwiO3RoaXMubD10aGlzLkc9dGhpcy52PXRoaXMuRj0hMTt0aGlzLkI9MDt0aGlzLkE9bnVsbDt0aGlzLks9c2Q7dGhpcy5MPXRoaXMuTT0hMTt9cihQLEIpO3ZhciBzZD1cIlwiLHRkPS9eaHR0cHM/JC9pLHVkPVtcIlBPU1RcIixcIlBVVFwiXTtrPVAucHJvdG90eXBlO2suT2E9ZnVuY3Rpb24oYSl7dGhpcy5NPWE7fTtcbmsuaGE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5nKXRocm93IEVycm9yKFwiW2dvb2cubmV0LlhocklvXSBPYmplY3QgaXMgYWN0aXZlIHdpdGggYW5vdGhlciByZXF1ZXN0PVwiK3RoaXMuSStcIjsgbmV3VXJpPVwiK2EpO2I9Yj9iLnRvVXBwZXJDYXNlKCk6XCJHRVRcIjt0aGlzLkk9YTt0aGlzLmo9XCJcIjt0aGlzLm09MDt0aGlzLkY9ITE7dGhpcy5oPSEwO3RoaXMuZz10aGlzLnU/dGhpcy51LmcoKTokYi5nKCk7dGhpcy5DPXRoaXMudT9WYih0aGlzLnUpOlZiKCRiKTt0aGlzLmcub25yZWFkeXN0YXRlY2hhbmdlPXEodGhpcy5MYSx0aGlzKTt0cnl7dGhpcy5HPSEwLHRoaXMuZy5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLkc9ITE7fWNhdGNoKGYpe3ZkKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjtjPW5ldyBNYXAodGhpcy5oZWFkZXJzKTtpZihkKWlmKE9iamVjdC5nZXRQcm90b3R5cGVPZihkKT09PU9iamVjdC5wcm90b3R5cGUpZm9yKHZhciBlIGluIGQpYy5zZXQoZSxkW2VdKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09PVxudHlwZW9mIGQua2V5cyYmXCJmdW5jdGlvblwiPT09dHlwZW9mIGQuZ2V0KWZvcihjb25zdCBmIG9mIGQua2V5cygpKWMuc2V0KGYsZC5nZXQoZikpO2Vsc2UgdGhyb3cgRXJyb3IoXCJVbmtub3duIGlucHV0IHR5cGUgZm9yIG9wdF9oZWFkZXJzOiBcIitTdHJpbmcoZCkpO2Q9QXJyYXkuZnJvbShjLmtleXMoKSkuZmluZChmPT5cImNvbnRlbnQtdHlwZVwiPT1mLnRvTG93ZXJDYXNlKCkpO2U9bC5Gb3JtRGF0YSYmYSBpbnN0YW5jZW9mIGwuRm9ybURhdGE7ISgwPD1rYSh1ZCxiKSl8fGR8fGV8fGMuc2V0KFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOFwiKTtmb3IoY29uc3QgW2YsaF1vZiBjKXRoaXMuZy5zZXRSZXF1ZXN0SGVhZGVyKGYsaCk7dGhpcy5LJiYodGhpcy5nLnJlc3BvbnNlVHlwZT10aGlzLkspO1wid2l0aENyZWRlbnRpYWxzXCJpbiB0aGlzLmcmJnRoaXMuZy53aXRoQ3JlZGVudGlhbHMhPT10aGlzLk0mJih0aGlzLmcud2l0aENyZWRlbnRpYWxzPVxudGhpcy5NKTt0cnl7d2QodGhpcyksMDx0aGlzLkImJigodGhpcy5MPXhkKHRoaXMuZykpPyh0aGlzLmcudGltZW91dD10aGlzLkIsdGhpcy5nLm9udGltZW91dD1xKHRoaXMudWEsdGhpcykpOnRoaXMuQT15Yih0aGlzLnVhLHRoaXMuQix0aGlzKSksdGhpcy52PSEwLHRoaXMuZy5zZW5kKGEpLHRoaXMudj0hMTt9Y2F0Y2goZil7dmQodGhpcyxmKTt9fTtmdW5jdGlvbiB4ZChhKXtyZXR1cm4geiYmXCJudW1iZXJcIj09PXR5cGVvZiBhLnRpbWVvdXQmJnZvaWQgMCE9PWEub250aW1lb3V0fWsudWE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5nJiYodGhpcy5qPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMuQitcIm1zLCBhYm9ydGluZ1wiLHRoaXMubT04LEModGhpcyxcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiB2ZChhLGIpe2EuaD0hMTthLmcmJihhLmw9ITAsYS5nLmFib3J0KCksYS5sPSExKTthLmo9YjthLm09NTt5ZChhKTt6ZChhKTt9XG5mdW5jdGlvbiB5ZChhKXthLkZ8fChhLkY9ITAsQyhhLFwiY29tcGxldGVcIiksQyhhLFwiZXJyb3JcIikpO31rLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuZyYmdGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEsdGhpcy5tPWF8fDcsQyh0aGlzLFwiY29tcGxldGVcIiksQyh0aGlzLFwiYWJvcnRcIiksemQodGhpcykpO307ay5OPWZ1bmN0aW9uKCl7dGhpcy5nJiYodGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEpLHpkKHRoaXMsITApKTtQLiQuTi5jYWxsKHRoaXMpO307ay5MYT1mdW5jdGlvbigpe3RoaXMuc3x8KHRoaXMuR3x8dGhpcy52fHx0aGlzLmw/QWQodGhpcyk6dGhpcy5rYigpKTt9O2sua2I9ZnVuY3Rpb24oKXtBZCh0aGlzKTt9O1xuZnVuY3Rpb24gQWQoYSl7aWYoYS5oJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLkNbMV18fDQhPUgoYSl8fDIhPWEuZGEoKSkpaWYoYS52JiY0PT1IKGEpKXliKGEuTGEsMCxhKTtlbHNlIGlmKEMoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09SChhKSl7YS5oPSExO3RyeXtjb25zdCBoPWEuZGEoKTthOnN3aXRjaChoKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGI9ITA7YnJlYWsgYTtkZWZhdWx0OmI9ITE7fXZhciBjO2lmKCEoYz1iKSl7dmFyIGQ7aWYoZD0wPT09aCl7dmFyIGU9U3RyaW5nKGEuSSkubWF0Y2goTGMpWzFdfHxudWxsOyFlJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbiYmKGU9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sLnNsaWNlKDAsLTEpKTtkPSF0ZC50ZXN0KGU/ZS50b0xvd2VyQ2FzZSgpOlwiXCIpO31jPWQ7fWlmKGMpQyhhLFwiY29tcGxldGVcIiksQyhhLFwic3VjY2Vzc1wiKTtlbHNlIHthLm09XG42O3RyeXt2YXIgZj0yPEgoYSk/YS5nLnN0YXR1c1RleHQ6XCJcIjt9Y2F0Y2gobil7Zj1cIlwiO31hLmo9ZitcIiBbXCIrYS5kYSgpK1wiXVwiO3lkKGEpO319ZmluYWxseXt6ZChhKTt9fX1mdW5jdGlvbiB6ZChhLGIpe2lmKGEuZyl7d2QoYSk7Y29uc3QgYz1hLmcsZD1hLkNbMF0/KCk9Pnt9Om51bGw7YS5nPW51bGw7YS5DPW51bGw7Ynx8QyhhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIHdkKGEpe2EuZyYmYS5MJiYoYS5nLm9udGltZW91dD1udWxsKTthLkEmJihsLmNsZWFyVGltZW91dChhLkEpLGEuQT1udWxsKTt9ay5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiAhIXRoaXMuZ307ZnVuY3Rpb24gSChhKXtyZXR1cm4gYS5nP2EuZy5yZWFkeVN0YXRlOjB9ay5kYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxIKHRoaXMpP3RoaXMuZy5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5rLmphPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmc/dGhpcy5nLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07ay5XYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe3ZhciBiPXRoaXMuZy5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiByZChiKX19O2Z1bmN0aW9uIG1jKGEpe3RyeXtpZighYS5nKXJldHVybiBudWxsO2lmKFwicmVzcG9uc2VcImluIGEuZylyZXR1cm4gYS5nLnJlc3BvbnNlO3N3aXRjaChhLkspe2Nhc2Ugc2Q6Y2FzZSBcInRleHRcIjpyZXR1cm4gYS5nLnJlc3BvbnNlVGV4dDtjYXNlIFwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIGEuZylyZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9cmV0dXJuIG51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fVxuZnVuY3Rpb24gdGMoYSl7Y29uc3QgYj17fTthPShhLmcmJjI8PUgoYSk/YS5nLmdldEFsbFJlc3BvbnNlSGVhZGVycygpfHxcIlwiOlwiXCIpLnNwbGl0KFwiXFxyXFxuXCIpO2ZvcihsZXQgZD0wO2Q8YS5sZW5ndGg7ZCsrKXtpZih4KGFbZF0pKWNvbnRpbnVlO3ZhciBjPXFiKGFbZF0pO2NvbnN0IGU9Y1swXTtjPWNbMV07aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBjKWNvbnRpbnVlO2M9Yy50cmltKCk7Y29uc3QgZj1iW2VdfHxbXTtiW2VdPWY7Zi5wdXNoKGMpO31PYShiLGZ1bmN0aW9uKGQpe3JldHVybiBkLmpvaW4oXCIsIFwiKX0pO31rLklhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubX07ay5TYT1mdW5jdGlvbigpe3JldHVybiBcInN0cmluZ1wiPT09dHlwZW9mIHRoaXMuaj90aGlzLmo6U3RyaW5nKHRoaXMuail9O2Z1bmN0aW9uIEJkKGEpe2xldCBiPVwiXCI7TmEoYSxmdW5jdGlvbihjLGQpe2IrPWQ7Yis9XCI6XCI7Yis9YztiKz1cIlxcclxcblwiO30pO3JldHVybiBifWZ1bmN0aW9uIENkKGEsYixjKXthOntmb3IoZCBpbiBjKXt2YXIgZD0hMTticmVhayBhfWQ9ITA7fWR8fChjPUJkKGMpLFwic3RyaW5nXCI9PT10eXBlb2YgYT8obnVsbCE9YyYmZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSkpOksoYSxiLGMpKTt9ZnVuY3Rpb24gRGQoYSxiLGMpe3JldHVybiBjJiZjLmludGVybmFsQ2hhbm5lbFBhcmFtcz9jLmludGVybmFsQ2hhbm5lbFBhcmFtc1thXXx8YjpifVxuZnVuY3Rpb24gRWQoYSl7dGhpcy5HYT0wO3RoaXMuaj1bXTt0aGlzLmw9bmV3IEdiO3RoaXMucGE9dGhpcy53YT10aGlzLkk9dGhpcy5ZPXRoaXMuZz10aGlzLkRhPXRoaXMuRj10aGlzLm5hPXRoaXMubz10aGlzLlU9dGhpcy5zPW51bGw7dGhpcy5mYj10aGlzLlc9MDt0aGlzLmNiPURkKFwiZmFpbEZhc3RcIiwhMSxhKTt0aGlzLkc9dGhpcy52PXRoaXMudT10aGlzLm09dGhpcy5oPW51bGw7dGhpcy5hYT0hMDt0aGlzLkZhPXRoaXMuVj0tMTt0aGlzLmJhPXRoaXMuQT10aGlzLkM9MDt0aGlzLmFiPURkKFwiYmFzZVJldHJ5RGVsYXlNc1wiLDVFMyxhKTt0aGlzLmhiPURkKFwicmV0cnlEZWxheVNlZWRNc1wiLDFFNCxhKTt0aGlzLmViPURkKFwiZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsMixhKTt0aGlzLnhhPURkKFwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsMkU0LGEpO3RoaXMudmE9YSYmYS54bWxIdHRwRmFjdG9yeXx8dm9pZCAwO3RoaXMuSGE9YSYmYS51c2VGZXRjaFN0cmVhbXN8fFxuITE7dGhpcy5MPXZvaWQgMDt0aGlzLko9YSYmYS5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLks9XCJcIjt0aGlzLmk9bmV3IGNkKGEmJmEuY29uY3VycmVudFJlcXVlc3RMaW1pdCk7dGhpcy5KYT1uZXcgaGQ7dGhpcy5QPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5PPWEmJmEuZW5jb2RlSW5pdE1lc3NhZ2VIZWFkZXJzfHwhMTt0aGlzLlAmJnRoaXMuTyYmKHRoaXMuTz0hMSk7dGhpcy5iYj1hJiZhLmJjfHwhMTthJiZhLkVhJiZ0aGlzLmwuRWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLmFhPSExKTt0aGlzLmNhPSF0aGlzLlAmJnRoaXMuYWEmJmEmJmEuZGV0ZWN0QnVmZmVyaW5nUHJveHl8fCExO3RoaXMucWE9dm9pZCAwO2EmJmEubG9uZ1BvbGxpbmdUaW1lb3V0JiYwPGEubG9uZ1BvbGxpbmdUaW1lb3V0JiYodGhpcy5xYT1hLmxvbmdQb2xsaW5nVGltZW91dCk7dGhpcy5vYT12b2lkIDA7dGhpcy5TPTA7dGhpcy5NPSExO3RoaXMubWE9dGhpcy5CPW51bGw7fVxuaz1FZC5wcm90b3R5cGU7ay5yYT04O2suSD0xO2Z1bmN0aW9uIEhjKGEpe0ZkKGEpO2lmKDM9PWEuSCl7dmFyIGI9YS5XKyssYz1HKGEuSSk7SyhjLFwiU0lEXCIsYS5LKTtLKGMsXCJSSURcIixiKTtLKGMsXCJUWVBFXCIsXCJ0ZXJtaW5hdGVcIik7R2QoYSxjKTtiPW5ldyBiYyhhLGEubCxiKTtiLkw9MjtiLnY9aGMoRyhjKSk7Yz0hMTtpZihsLm5hdmlnYXRvciYmbC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbil0cnl7Yz1sLm5hdmlnYXRvci5zZW5kQmVhY29uKGIudi50b1N0cmluZygpLFwiXCIpO31jYXRjaChkKXt9IWMmJmwuSW1hZ2UmJigobmV3IEltYWdlKS5zcmM9Yi52LGM9ITApO2N8fChiLmc9bGMoYi5sLG51bGwpLGIuZy5oYShiLnYpKTtiLkc9RGF0ZS5ub3coKTtqYyhiKTt9SGQoYSk7fWZ1bmN0aW9uIHpjKGEpe2EuZyYmKHZjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gRmQoYSl7emMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7eWMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gR2MoYSl7aWYoIWVkKGEuaSkmJiFhLm0pe2EubT0hMDt2YXIgYj1hLk5hO3NifHx2YigpO3RifHwoc2IoKSx0Yj0hMCk7bWIuYWRkKGIsYSk7YS5DPTA7fX1mdW5jdGlvbiBJZChhLGIpe2lmKEJjKGEuaSk+PWEuaS5qLShhLm0/MTowKSlyZXR1cm4gITE7aWYoYS5tKXJldHVybiBhLmo9Yi5GLmNvbmNhdChhLmopLCEwO2lmKDE9PWEuSHx8Mj09YS5IfHxhLkM+PShhLmNiPzA6YS5lYikpcmV0dXJuICExO2EubT1SYihxKGEuTmEsYSxiKSxKZChhLGEuQykpO2EuQysrO3JldHVybiAhMH1cbmsuTmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5tKWlmKHRoaXMubT1udWxsLDE9PXRoaXMuSCl7aWYoIWEpe3RoaXMuVz1NYXRoLmZsb29yKDFFNSpNYXRoLnJhbmRvbSgpKTthPXRoaXMuVysrO2NvbnN0IGU9bmV3IGJjKHRoaXMsdGhpcy5sLGEpO2xldCBmPXRoaXMuczt0aGlzLlUmJihmPyhmPVBhKGYpLFJhKGYsdGhpcy5VKSk6Zj10aGlzLlUpO251bGwhPT10aGlzLm98fHRoaXMuT3x8KGUuST1mLGY9bnVsbCk7aWYodGhpcy5QKWE6e3ZhciBiPTA7Zm9yKHZhciBjPTA7Yzx0aGlzLmoubGVuZ3RoO2MrKyl7Yjp7dmFyIGQ9dGhpcy5qW2NdO2lmKFwiX19kYXRhX19cImluIGQubWFwJiYoZD1kLm1hcC5fX2RhdGFfXyxcInN0cmluZ1wiPT09dHlwZW9mIGQpKXtkPWQubGVuZ3RoO2JyZWFrIGJ9ZD12b2lkIDA7fWlmKHZvaWQgMD09PWQpYnJlYWs7Yis9ZDtpZig0MDk2PGIpe2I9YzticmVhayBhfWlmKDQwOTY9PT1ifHxjPT09dGhpcy5qLmxlbmd0aC0xKXtiPWMrMTticmVhayBhfX1iPTFFMzt9ZWxzZSBiPVxuMUUzO2I9S2QodGhpcyxlLGIpO2M9Ryh0aGlzLkkpO0soYyxcIlJJRFwiLGEpO0soYyxcIkNWRVJcIiwyMik7dGhpcy5GJiZLKGMsXCJYLUhUVFAtU2Vzc2lvbi1JZFwiLHRoaXMuRik7R2QodGhpcyxjKTtmJiYodGhpcy5PP2I9XCJoZWFkZXJzPVwiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoQmQoZikpKStcIiZcIitiOnRoaXMubyYmQ2QoYyx0aGlzLm8sZikpO0NjKHRoaXMuaSxlKTt0aGlzLmJiJiZLKGMsXCJUWVBFXCIsXCJpbml0XCIpO3RoaXMuUD8oSyhjLFwiJHJlcVwiLGIpLEsoYyxcIlNJRFwiLFwibnVsbFwiKSxlLmFhPSEwLGdjKGUsYyxudWxsKSk6Z2MoZSxjLGIpO3RoaXMuSD0yO319ZWxzZSAzPT10aGlzLkgmJihhP0xkKHRoaXMsYSk6MD09dGhpcy5qLmxlbmd0aHx8ZWQodGhpcy5pKXx8TGQodGhpcykpO307XG5mdW5jdGlvbiBMZChhLGIpe3ZhciBjO2I/Yz1iLm06Yz1hLlcrKztjb25zdCBkPUcoYS5JKTtLKGQsXCJTSURcIixhLkspO0soZCxcIlJJRFwiLGMpO0soZCxcIkFJRFwiLGEuVik7R2QoYSxkKTthLm8mJmEucyYmQ2QoZCxhLm8sYS5zKTtjPW5ldyBiYyhhLGEubCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5JPWEucyk7YiYmKGEuaj1iLkYuY29uY2F0KGEuaikpO2I9S2QoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS54YSkrTWF0aC5yb3VuZCguNSphLnhhKk1hdGgucmFuZG9tKCkpKTtDYyhhLmksYyk7Z2MoYyxkLGIpO31mdW5jdGlvbiBHZChhLGIpe2EubmEmJk5hKGEubmEsZnVuY3Rpb24oYyxkKXtLKGIsZCxjKTt9KTthLmgmJktjKHt9LGZ1bmN0aW9uKGMsZCl7SyhiLGQsYyk7fSk7fVxuZnVuY3Rpb24gS2QoYSxiLGMpe2M9TWF0aC5taW4oYS5qLmxlbmd0aCxjKTt2YXIgZD1hLmg/cShhLmguVmEsYS5oLGEpOm51bGw7YTp7dmFyIGU9YS5qO2xldCBmPS0xO2Zvcig7Oyl7Y29uc3QgaD1bXCJjb3VudD1cIitjXTstMT09Zj8wPGM/KGY9ZVswXS5nLGgucHVzaChcIm9mcz1cIitmKSk6Zj0wOmgucHVzaChcIm9mcz1cIitmKTtsZXQgbj0hMDtmb3IobGV0IHQ9MDt0PGM7dCsrKXtsZXQgbT1lW3RdLmc7Y29uc3QgdT1lW3RdLm1hcDttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt0XS5nLTEwMCksbj0hMTtlbHNlIHRyeXtpZCh1LGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goTCl7ZCYmZCh1KTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmouc3BsaWNlKDAsYyk7Yi5GPWE7cmV0dXJuIGR9ZnVuY3Rpb24gRmMoYSl7aWYoIWEuZyYmIWEudSl7YS5iYT0xO3ZhciBiPWEuTWE7c2J8fHZiKCk7dGJ8fChzYigpLHRiPSEwKTttYi5hZGQoYixhKTthLkE9MDt9fVxuZnVuY3Rpb24gQWMoYSl7aWYoYS5nfHxhLnV8fDM8PWEuQSlyZXR1cm4gITE7YS5iYSsrO2EudT1SYihxKGEuTWEsYSksSmQoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5NYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO01kKHRoaXMpO2lmKHRoaXMuY2EmJiEodGhpcy5NfHxudWxsPT10aGlzLmd8fDA+PXRoaXMuUykpe3ZhciBhPTIqdGhpcy5TO3RoaXMubC5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVyIGVuYWJsZWQ6IFwiK2EpO3RoaXMuQj1SYihxKHRoaXMuamIsdGhpcyksYSk7fX07ay5qYj1mdW5jdGlvbigpe3RoaXMuQiYmKHRoaXMuQj1udWxsLHRoaXMubC5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVvdXQgcmVhY2hlZC5cIiksdGhpcy5sLmluZm8oXCJCdWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQgYW5kIHN3aXRjaCB0byBsb25nLXBvbGxpbmchXCIpLHRoaXMuRz0hMSx0aGlzLk09ITAsRigxMCksemModGhpcyksTWQodGhpcykpO307XG5mdW5jdGlvbiB2YyhhKXtudWxsIT1hLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ZnVuY3Rpb24gTWQoYSl7YS5nPW5ldyBiYyhhLGEubCxcInJwY1wiLGEuYmEpO251bGw9PT1hLm8mJihhLmcuST1hLnMpO2EuZy5PPTA7dmFyIGI9RyhhLndhKTtLKGIsXCJSSURcIixcInJwY1wiKTtLKGIsXCJTSURcIixhLkspO0soYixcIkFJRFwiLGEuVik7SyhiLFwiQ0lcIixhLkc/XCIwXCI6XCIxXCIpOyFhLkcmJmEucWEmJksoYixcIlRPXCIsYS5xYSk7SyhiLFwiVFlQRVwiLFwieG1saHR0cFwiKTtHZChhLGIpO2EubyYmYS5zJiZDZChiLGEubyxhLnMpO2EuTCYmYS5nLnNldFRpbWVvdXQoYS5MKTt2YXIgYz1hLmc7YT1hLnBhO2MuTD0xO2Mudj1oYyhHKGIpKTtjLnM9bnVsbDtjLlM9ITA7aWMoYyxhKTt9ay5pYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLHpjKHRoaXMpLEFjKHRoaXMpLEYoMTkpKTt9O1xuZnVuY3Rpb24geWMoYSl7bnVsbCE9YS52JiYobC5jbGVhclRpbWVvdXQoYS52KSxhLnY9bnVsbCk7fWZ1bmN0aW9uIHNjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3ljKGEpO3ZjKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeGMoYS5pLGIpKWM9Yi5GLEVjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47aWYoMCE9YS5IKWlmKGIuaSlpZigxPT1kKXtjPWIucz9iLnMubGVuZ3RoOjA7Yj1EYXRlLm5vdygpLWIuRzt2YXIgZT1hLkM7ZD1NYigpO0MoZCxuZXcgUWIoZCxjKSk7R2MoYSk7fWVsc2UgRmMoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGIuY2F8fCEoMT09ZCYmSWQoYSxiKXx8Mj09ZCYmQWMoYSkpKXN3aXRjaChjJiYwPGMubGVuZ3RoJiYoYj1hLmksYi5pPWIuaS5jb25jYXQoYykpLGUpe2Nhc2UgMTpKKGEsNSk7YnJlYWs7Y2FzZSA0OkooYSwxMCk7YnJlYWs7Y2FzZSAzOkooYSw2KTticmVhaztkZWZhdWx0OkooYSwyKTt9fVxuZnVuY3Rpb24gSmQoYSxiKXtsZXQgYz1hLmFiK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSphLmhiKTthLmlzQWN0aXZlKCl8fChjKj0yKTtyZXR1cm4gYypifWZ1bmN0aW9uIEooYSxiKXthLmwuaW5mbyhcIkVycm9yIGNvZGUgXCIrYik7aWYoMj09Yil7dmFyIGM9bnVsbDthLmgmJihjPW51bGwpO3ZhciBkPXEoYS5wYixhKTtjfHwoYz1uZXcgTShcIi8vd3d3Lmdvb2dsZS5jb20vaW1hZ2VzL2NsZWFyZG90LmdpZlwiKSxsLmxvY2F0aW9uJiZcImh0dHBcIj09bC5sb2NhdGlvbi5wcm90b2NvbHx8TmMoYyxcImh0dHBzXCIpLGhjKGMpKTtqZChjLnRvU3RyaW5nKCksZCk7fWVsc2UgRigyKTthLkg9MDthLmgmJmEuaC56YShiKTtIZChhKTtGZChhKTt9ay5wYj1mdW5jdGlvbihhKXthPyh0aGlzLmwuaW5mbyhcIlN1Y2Nlc3NmdWxseSBwaW5nZWQgZ29vZ2xlLmNvbVwiKSxGKDIpKToodGhpcy5sLmluZm8oXCJGYWlsZWQgdG8gcGluZyBnb29nbGUuY29tXCIpLEYoMSkpO307XG5mdW5jdGlvbiBIZChhKXthLkg9MDthLm1hPVtdO2lmKGEuaCl7Y29uc3QgYj1mZChhLmkpO2lmKDAhPWIubGVuZ3RofHwwIT1hLmoubGVuZ3RoKW5hKGEubWEsYiksbmEoYS5tYSxhLmopLGEuaS5pLmxlbmd0aD0wLG1hKGEuaiksYS5qLmxlbmd0aD0wO2EuaC55YSgpO319ZnVuY3Rpb24gRGMoYSxiLGMpe3ZhciBkPWMgaW5zdGFuY2VvZiBNP0coYyk6bmV3IE0oYyk7aWYoXCJcIiE9ZC5nKWImJihkLmc9YitcIi5cIitkLmcpLE9jKGQsZC5tKTtlbHNlIHt2YXIgZT1sLmxvY2F0aW9uO2Q9ZS5wcm90b2NvbDtiPWI/YitcIi5cIitlLmhvc3RuYW1lOmUuaG9zdG5hbWU7ZT0rZS5wb3J0O3ZhciBmPW5ldyBNKG51bGwpO2QmJk5jKGYsZCk7YiYmKGYuZz1iKTtlJiZPYyhmLGUpO2MmJihmLmw9Yyk7ZD1mO31jPWEuRjtiPWEuRGE7YyYmYiYmSyhkLGMsYik7SyhkLFwiVkVSXCIsYS5yYSk7R2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIGxjKGEsYixjKXtpZihiJiYhYS5KKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5IYSYmIWEudmE/bmV3IFAobmV3IGxkKHtvYjohMH0pKTpuZXcgUChhLnZhKTtiLk9hKGEuSik7cmV0dXJuIGJ9ay5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiAhIXRoaXMuaCYmdGhpcy5oLmlzQWN0aXZlKHRoaXMpfTtmdW5jdGlvbiBOZCgpe31rPU5kLnByb3RvdHlwZTtrLkJhPWZ1bmN0aW9uKCl7fTtrLkFhPWZ1bmN0aW9uKCl7fTtrLnphPWZ1bmN0aW9uKCl7fTtrLnlhPWZ1bmN0aW9uKCl7fTtrLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEwfTtrLlZhPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBPZCgpe2lmKHomJiEoMTA8PU51bWJlcihGYSkpKXRocm93IEVycm9yKFwiRW52aXJvbm1lbnRhbCBlcnJvcjogbm8gYXZhaWxhYmxlIHRyYW5zcG9ydC5cIik7fU9kLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBRKGEsYil9O1xuZnVuY3Rpb24gUShhLGIpe0IuY2FsbCh0aGlzKTt0aGlzLmc9bmV3IEVkKGIpO3RoaXMubD1hO3RoaXMuaD1iJiZiLm1lc3NhZ2VVcmxQYXJhbXN8fG51bGw7YT1iJiZiLm1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIuY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCYmKGE/YVtcIlgtQ2xpZW50LVByb3RvY29sXCJdPVwid2ViY2hhbm5lbFwiOmE9e1wiWC1DbGllbnQtUHJvdG9jb2xcIjpcIndlYmNoYW5uZWxcIn0pO3RoaXMuZy5zPWE7YT1iJiZiLmluaXRNZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLm1lc3NhZ2VDb250ZW50VHlwZSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIl09Yi5tZXNzYWdlQ29udGVudFR5cGU6YT17XCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCI6Yi5tZXNzYWdlQ29udGVudFR5cGV9KTtiJiZiLkNhJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCJdPWIuQ2E6YT17XCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIjpiLkNhfSk7dGhpcy5nLlU9XG5hOyhhPWImJmIuY2MpJiYheChhKSYmKHRoaXMuZy5vPWEpO3RoaXMuQT1iJiZiLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMudj1iJiZiLnNlbmRSYXdKc29ufHwhMTsoYj1iJiZiLmh0dHBTZXNzaW9uSWRQYXJhbSkmJiF4KGIpJiYodGhpcy5nLkY9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgUih0aGlzKTt9cihRLEIpO1EucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaD10aGlzLmo7dGhpcy5BJiYodGhpcy5nLko9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO0YoMCk7YS5ZPWI7YS5uYT1jfHx7fTthLkc9YS5hYTthLkk9RGMoYSxudWxsLGEuWSk7R2MoYSk7fTtRLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0hjKHRoaXMuZyk7fTtcblEucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSl7dmFyIGM9e307Yy5fX2RhdGFfXz1hO2E9Yzt9ZWxzZSB0aGlzLnYmJihjPXt9LGMuX19kYXRhX189amIoYSksYT1jKTtiLmoucHVzaChuZXcgYmQoYi5mYisrLGEpKTszPT1iLkgmJkdjKGIpO307US5wcm90b3R5cGUuTj1mdW5jdGlvbigpe3RoaXMuZy5oPW51bGw7ZGVsZXRlIHRoaXMuajtIYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7US4kLk4uY2FsbCh0aGlzKTt9O1xuZnVuY3Rpb24gUGQoYSl7WWIuY2FsbCh0aGlzKTthLl9faGVhZGVyc19fJiYodGhpcy5oZWFkZXJzPWEuX19oZWFkZXJzX18sdGhpcy5zdGF0dXNDb2RlPWEuX19zdGF0dXNfXyxkZWxldGUgYS5fX2hlYWRlcnNfXyxkZWxldGUgYS5fX3N0YXR1c19fKTt2YXIgYj1hLl9fc21fXztpZihiKXthOntmb3IoY29uc3QgYyBpbiBiKXthPWM7YnJlYWsgYX1hPXZvaWQgMDt9aWYodGhpcy5pPWEpYT10aGlzLmksYj1udWxsIT09YiYmYSBpbiBiP2JbYV06dm9pZCAwO3RoaXMuZGF0YT1iO31lbHNlIHRoaXMuZGF0YT1hO31yKFBkLFliKTtmdW5jdGlvbiBRZCgpe1piLmNhbGwodGhpcyk7dGhpcy5zdGF0dXM9MTt9cihRZCxaYik7ZnVuY3Rpb24gUihhKXt0aGlzLmc9YTt9cihSLE5kKTtSLnByb3RvdHlwZS5CYT1mdW5jdGlvbigpe0ModGhpcy5nLFwiYVwiKTt9O1IucHJvdG90eXBlLkFhPWZ1bmN0aW9uKGEpe0ModGhpcy5nLG5ldyBQZChhKSk7fTtcblIucHJvdG90eXBlLnphPWZ1bmN0aW9uKGEpe0ModGhpcy5nLG5ldyBRZCgpKTt9O1IucHJvdG90eXBlLnlhPWZ1bmN0aW9uKCl7Qyh0aGlzLmcsXCJiXCIpO307ZnVuY3Rpb24gUmQoKXt0aGlzLmJsb2NrU2l6ZT0tMTt9ZnVuY3Rpb24gUygpe3RoaXMuYmxvY2tTaXplPS0xO3RoaXMuYmxvY2tTaXplPTY0O3RoaXMuZz1BcnJheSg0KTt0aGlzLm09QXJyYXkodGhpcy5ibG9ja1NpemUpO3RoaXMuaT10aGlzLmg9MDt0aGlzLnJlc2V0KCk7fXIoUyxSZCk7Uy5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmdbMF09MTczMjU4NDE5Mzt0aGlzLmdbMV09NDAyMzIzMzQxNzt0aGlzLmdbMl09MjU2MjM4MzEwMjt0aGlzLmdbM109MjcxNzMzODc4O3RoaXMuaT10aGlzLmg9MDt9O1xuZnVuY3Rpb24gU2QoYSxiLGMpe2N8fChjPTApO3ZhciBkPUFycmF5KDE2KTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpZm9yKHZhciBlPTA7MTY+ZTsrK2UpZFtlXT1iLmNoYXJDb2RlQXQoYysrKXxiLmNoYXJDb2RlQXQoYysrKTw8OHxiLmNoYXJDb2RlQXQoYysrKTw8MTZ8Yi5jaGFyQ29kZUF0KGMrKyk8PDI0O2Vsc2UgZm9yKGU9MDsxNj5lOysrZSlkW2VdPWJbYysrXXxiW2MrK108PDh8YltjKytdPDwxNnxiW2MrK108PDI0O2I9YS5nWzBdO2M9YS5nWzFdO2U9YS5nWzJdO3ZhciBmPWEuZ1szXTt2YXIgaD1iKyhmXmMmKGVeZikpK2RbMF0rMzYxNDA5MDM2MCY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbMV0rMzkwNTQwMjcxMCY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTImNDI5NDk2NzI5NXxoPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzJdKzYwNjEwNTgxOSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO1xuaD1jKyhiXmUmKGZeYikpK2RbM10rMzI1MDQ0MTk2NiY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZl5jJihlXmYpKStkWzRdKzQxMTg1NDgzOTkmNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzVdKzEyMDAwODA0MjYmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8aD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFs2XSsyODIxNzM1OTU1JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7aD1jKyhiXmUmKGZeYikpK2RbN10rNDI0OTI2MTMxMyY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZl5jJihlXmYpKStkWzhdKzE3NzAwMzU0MTYmNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzldKzIzMzY1NTI4NzkmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8XG5oPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzEwXSs0Mjk0OTI1MjMzJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7aD1jKyhiXmUmKGZeYikpK2RbMTFdKzIzMDQ1NjMxMzQmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGZeYyYoZV5mKSkrZFsxMl0rMTgwNDYwMzY4MiY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbMTNdKzQyNTQ2MjYxOTUmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8aD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFsxNF0rMjc5Mjk2NTAwNiY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO2g9YysoYl5lJihmXmIpKStkWzE1XSsxMjM2NTM1MzI5JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhlXmYmKGNeZSkpK2RbMV0rNDEyOTE3MDc4NiY0Mjk0OTY3Mjk1O2I9YysoaDw8XG41JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFs2XSszMjI1NDY1NjY0JjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFsxMV0rNjQzNzE3NzEzJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbMF0rMzkyMTA2OTk5NCY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoZV5mJihjXmUpKStkWzVdKzM1OTM0MDg2MDUmNDI5NDk2NzI5NTtiPWMrKGg8PDUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzEwXSszODAxNjA4MyY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbMTVdKzM2MzQ0ODg5NjEmNDI5NDk2NzI5NTtlPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFs0XSszODg5NDI5NDQ4JjQyOTQ5NjcyOTU7Yz1cbmUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGVeZiYoY15lKSkrZFs5XSs1Njg0NDY0MzgmNDI5NDk2NzI5NTtiPWMrKGg8PDUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzE0XSszMjc1MTYzNjA2JjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFszXSs0MTA3NjAzMzM1JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbOF0rMTE2MzUzMTUwMSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoZV5mJihjXmUpKStkWzEzXSsyODUwMjg1ODI5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw1JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFsyXSs0MjQzNTYzNTEyJjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFs3XSsxNzM1MzI4NDczJjQyOTQ5NjcyOTU7XG5lPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFsxMl0rMjM2ODM1OTU2MiY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoY15lXmYpK2RbNV0rNDI5NDU4ODczOCY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFs4XSsyMjcyMzkyODMzJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fGg+Pj4yMSk7aD1lKyhmXmJeYykrZFsxMV0rMTgzOTAzMDU2MiY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbMTRdKzQyNTk2NTc3NDAmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoY15lXmYpK2RbMV0rMjc2Mzk3NTIzNiY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFs0XSsxMjcyODkzMzUzJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fFxuaD4+PjIxKTtoPWUrKGZeYl5jKStkWzddKzQxMzk0Njk2NjQmNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzEwXSszMjAwMjM2NjU2JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGNeZV5mKStkWzEzXSs2ODEyNzkxNzQmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbMF0rMzkzNjQzMDA3NCY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxoPj4+MjEpO2g9ZSsoZl5iXmMpK2RbM10rMzU3MjQ0NTMxNyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbNl0rNzYwMjkxODkmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoY15lXmYpK2RbOV0rMzY1NDYwMjgwOSY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFsxMl0rXG4zODczMTUxNDYxJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fGg+Pj4yMSk7aD1lKyhmXmJeYykrZFsxNV0rNTMwNzQyNTIwJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFsyXSszMjk5NjI4NjQ1JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGVeKGN8fmYpKStkWzBdKzQwOTYzMzY0NTImNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbN10rMTEyNjg5MTQxNSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbMTRdKzI4Nzg2MTIzOTEmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzVdKzQyMzc1MzMyNDEmNDI5NDk2NzI5NTtjPWUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKTtoPWIrKGVeKGN8fmYpKStkWzEyXSsxNzAwNDg1NTcxJlxuNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbM10rMjM5OTk4MDY5MCY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbMTBdKzQyOTM5MTU3NzMmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzFdKzIyNDAwNDQ0OTcmNDI5NDk2NzI5NTtjPWUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKTtoPWIrKGVeKGN8fmYpKStkWzhdKzE4NzMzMTMzNTkmNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbMTVdKzQyNjQzNTU1NTImNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzZdKzI3MzQ3Njg5MTYmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzEzXSsxMzA5MTUxNjQ5JlxuNDI5NDk2NzI5NTtjPWUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKTtoPWIrKGVeKGN8fmYpKStkWzRdKzQxNDk0NDQyMjYmNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbMTFdKzMxNzQ3NTY5MTcmNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzJdKzcxODc4NzI1OSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTUmNDI5NDk2NzI5NXxoPj4+MTcpO2g9YysoZl4oZXx+YikpK2RbOV0rMzk1MTQ4MTc0NSY0Mjk0OTY3Mjk1O2EuZ1swXT1hLmdbMF0rYiY0Mjk0OTY3Mjk1O2EuZ1sxXT1hLmdbMV0rKGUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKSkmNDI5NDk2NzI5NTthLmdbMl09YS5nWzJdK2UmNDI5NDk2NzI5NTthLmdbM109YS5nWzNdK2YmNDI5NDk2NzI5NTt9XG5TLnByb3RvdHlwZS5qPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9YS5sZW5ndGgpO2Zvcih2YXIgYz1iLXRoaXMuYmxvY2tTaXplLGQ9dGhpcy5tLGU9dGhpcy5oLGY9MDtmPGI7KXtpZigwPT1lKWZvcig7Zjw9YzspU2QodGhpcyxhLGYpLGYrPXRoaXMuYmxvY2tTaXplO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlmb3IoO2Y8Yjspe2lmKGRbZSsrXT1hLmNoYXJDb2RlQXQoZisrKSxlPT10aGlzLmJsb2NrU2l6ZSl7U2QodGhpcyxkKTtlPTA7YnJlYWt9fWVsc2UgZm9yKDtmPGI7KWlmKGRbZSsrXT1hW2YrK10sZT09dGhpcy5ibG9ja1NpemUpe1NkKHRoaXMsZCk7ZT0wO2JyZWFrfX10aGlzLmg9ZTt0aGlzLmkrPWI7fTtcblMucHJvdG90eXBlLmw9ZnVuY3Rpb24oKXt2YXIgYT1BcnJheSgoNTY+dGhpcy5oP3RoaXMuYmxvY2tTaXplOjIqdGhpcy5ibG9ja1NpemUpLXRoaXMuaCk7YVswXT0xMjg7Zm9yKHZhciBiPTE7YjxhLmxlbmd0aC04OysrYilhW2JdPTA7dmFyIGM9OCp0aGlzLmk7Zm9yKGI9YS5sZW5ndGgtODtiPGEubGVuZ3RoOysrYilhW2JdPWMmMjU1LGMvPTI1Njt0aGlzLmooYSk7YT1BcnJheSgxNik7Zm9yKGI9Yz0wOzQ+YjsrK2IpZm9yKHZhciBkPTA7MzI+ZDtkKz04KWFbYysrXT10aGlzLmdbYl0+Pj5kJjI1NTtyZXR1cm4gYX07ZnVuY3Rpb24gVChhLGIpe3RoaXMuaD1iO2Zvcih2YXIgYz1bXSxkPSEwLGU9YS5sZW5ndGgtMTswPD1lO2UtLSl7dmFyIGY9YVtlXXwwO2QmJmY9PWJ8fChjW2VdPWYsZD0hMSk7fXRoaXMuZz1jO312YXIgc2E9e307ZnVuY3Rpb24gVGQoYSl7cmV0dXJuIC0xMjg8PWEmJjEyOD5hP3JhKGEsZnVuY3Rpb24oYil7cmV0dXJuIG5ldyBUKFtifDBdLDA+Yj8tMTowKX0pOm5ldyBUKFthfDBdLDA+YT8tMTowKX1mdW5jdGlvbiBVKGEpe2lmKGlzTmFOKGEpfHwhaXNGaW5pdGUoYSkpcmV0dXJuIFY7aWYoMD5hKXJldHVybiBXKFUoLWEpKTtmb3IodmFyIGI9W10sYz0xLGQ9MDthPj1jO2QrKyliW2RdPWEvY3wwLGMqPVVkO3JldHVybiBuZXcgVChiLDApfVxuZnVuY3Rpb24gVmQoYSxiKXtpZigwPT1hLmxlbmd0aCl0aHJvdyBFcnJvcihcIm51bWJlciBmb3JtYXQgZXJyb3I6IGVtcHR5IHN0cmluZ1wiKTtiPWJ8fDEwO2lmKDI+Ynx8MzY8Yil0aHJvdyBFcnJvcihcInJhZGl4IG91dCBvZiByYW5nZTogXCIrYik7aWYoXCItXCI9PWEuY2hhckF0KDApKXJldHVybiBXKFZkKGEuc3Vic3RyaW5nKDEpLGIpKTtpZigwPD1hLmluZGV4T2YoXCItXCIpKXRocm93IEVycm9yKCdudW1iZXIgZm9ybWF0IGVycm9yOiBpbnRlcmlvciBcIi1cIiBjaGFyYWN0ZXInKTtmb3IodmFyIGM9VShNYXRoLnBvdyhiLDgpKSxkPVYsZT0wO2U8YS5sZW5ndGg7ZSs9OCl7dmFyIGY9TWF0aC5taW4oOCxhLmxlbmd0aC1lKSxoPXBhcnNlSW50KGEuc3Vic3RyaW5nKGUsZStmKSxiKTs4PmY/KGY9VShNYXRoLnBvdyhiLGYpKSxkPWQuUihmKS5hZGQoVShoKSkpOihkPWQuUihjKSxkPWQuYWRkKFUoaCkpKTt9cmV0dXJuIGR9XG52YXIgVWQ9NDI5NDk2NzI5NixWPVRkKDApLFdkPVRkKDEpLFhkPVRkKDE2Nzc3MjE2KTtrPVQucHJvdG90eXBlO2suZWE9ZnVuY3Rpb24oKXtpZihYKHRoaXMpKXJldHVybiAtVyh0aGlzKS5lYSgpO2Zvcih2YXIgYT0wLGI9MSxjPTA7Yzx0aGlzLmcubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5EKGMpO2ErPSgwPD1kP2Q6VWQrZCkqYjtiKj1VZDt9cmV0dXJuIGF9O1xuay50b1N0cmluZz1mdW5jdGlvbihhKXthPWF8fDEwO2lmKDI+YXx8MzY8YSl0aHJvdyBFcnJvcihcInJhZGl4IG91dCBvZiByYW5nZTogXCIrYSk7aWYoWSh0aGlzKSlyZXR1cm4gXCIwXCI7aWYoWCh0aGlzKSlyZXR1cm4gXCItXCIrVyh0aGlzKS50b1N0cmluZyhhKTtmb3IodmFyIGI9VShNYXRoLnBvdyhhLDYpKSxjPXRoaXMsZD1cIlwiOzspe3ZhciBlPVlkKGMsYikuZztjPVpkKGMsZS5SKGIpKTt2YXIgZj0oKDA8Yy5nLmxlbmd0aD9jLmdbMF06Yy5oKT4+PjApLnRvU3RyaW5nKGEpO2M9ZTtpZihZKGMpKXJldHVybiBmK2Q7Zm9yKDs2PmYubGVuZ3RoOylmPVwiMFwiK2Y7ZD1mK2Q7fX07ay5EPWZ1bmN0aW9uKGEpe3JldHVybiAwPmE/MDphPHRoaXMuZy5sZW5ndGg/dGhpcy5nW2FdOnRoaXMuaH07ZnVuY3Rpb24gWShhKXtpZigwIT1hLmgpcmV0dXJuICExO2Zvcih2YXIgYj0wO2I8YS5nLmxlbmd0aDtiKyspaWYoMCE9YS5nW2JdKXJldHVybiAhMTtyZXR1cm4gITB9XG5mdW5jdGlvbiBYKGEpe3JldHVybiAtMT09YS5ofWsuWD1mdW5jdGlvbihhKXthPVpkKHRoaXMsYSk7cmV0dXJuIFgoYSk/LTE6WShhKT8wOjF9O2Z1bmN0aW9uIFcoYSl7Zm9yKHZhciBiPWEuZy5sZW5ndGgsYz1bXSxkPTA7ZDxiO2QrKyljW2RdPX5hLmdbZF07cmV0dXJuIChuZXcgVChjLH5hLmgpKS5hZGQoV2QpfWsuYWJzPWZ1bmN0aW9uKCl7cmV0dXJuIFgodGhpcyk/Vyh0aGlzKTp0aGlzfTtrLmFkZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MCxlPTA7ZTw9YjtlKyspe3ZhciBmPWQrKHRoaXMuRChlKSY2NTUzNSkrKGEuRChlKSY2NTUzNSksaD0oZj4+PjE2KSsodGhpcy5EKGUpPj4+MTYpKyhhLkQoZSk+Pj4xNik7ZD1oPj4+MTY7ZiY9NjU1MzU7aCY9NjU1MzU7Y1tlXT1oPDwxNnxmO31yZXR1cm4gbmV3IFQoYyxjW2MubGVuZ3RoLTFdJi0yMTQ3NDgzNjQ4Py0xOjApfTtcbmZ1bmN0aW9uIFpkKGEsYil7cmV0dXJuIGEuYWRkKFcoYikpfVxuay5SPWZ1bmN0aW9uKGEpe2lmKFkodGhpcyl8fFkoYSkpcmV0dXJuIFY7aWYoWCh0aGlzKSlyZXR1cm4gWChhKT9XKHRoaXMpLlIoVyhhKSk6VyhXKHRoaXMpLlIoYSkpO2lmKFgoYSkpcmV0dXJuIFcodGhpcy5SKFcoYSkpKTtpZigwPnRoaXMuWChYZCkmJjA+YS5YKFhkKSlyZXR1cm4gVSh0aGlzLmVhKCkqYS5lYSgpKTtmb3IodmFyIGI9dGhpcy5nLmxlbmd0aCthLmcubGVuZ3RoLGM9W10sZD0wO2Q8MipiO2QrKyljW2RdPTA7Zm9yKGQ9MDtkPHRoaXMuZy5sZW5ndGg7ZCsrKWZvcih2YXIgZT0wO2U8YS5nLmxlbmd0aDtlKyspe3ZhciBmPXRoaXMuRChkKT4+PjE2LGg9dGhpcy5EKGQpJjY1NTM1LG49YS5EKGUpPj4+MTYsdD1hLkQoZSkmNjU1MzU7Y1syKmQrMiplXSs9aCp0OyRkKGMsMipkKzIqZSk7Y1syKmQrMiplKzFdKz1mKnQ7JGQoYywyKmQrMiplKzEpO2NbMipkKzIqZSsxXSs9aCpuOyRkKGMsMipkKzIqZSsxKTtjWzIqZCsyKmUrMl0rPWYqbjskZChjLDIqZCsyKmUrMik7fWZvcihkPVxuMDtkPGI7ZCsrKWNbZF09Y1syKmQrMV08PDE2fGNbMipkXTtmb3IoZD1iO2Q8MipiO2QrKyljW2RdPTA7cmV0dXJuIG5ldyBUKGMsMCl9O2Z1bmN0aW9uICRkKGEsYil7Zm9yKDsoYVtiXSY2NTUzNSkhPWFbYl07KWFbYisxXSs9YVtiXT4+PjE2LGFbYl0mPTY1NTM1LGIrKzt9ZnVuY3Rpb24gYWUoYSxiKXt0aGlzLmc9YTt0aGlzLmg9Yjt9XG5mdW5jdGlvbiBZZChhLGIpe2lmKFkoYikpdGhyb3cgRXJyb3IoXCJkaXZpc2lvbiBieSB6ZXJvXCIpO2lmKFkoYSkpcmV0dXJuIG5ldyBhZShWLFYpO2lmKFgoYSkpcmV0dXJuIGI9WWQoVyhhKSxiKSxuZXcgYWUoVyhiLmcpLFcoYi5oKSk7aWYoWChiKSlyZXR1cm4gYj1ZZChhLFcoYikpLG5ldyBhZShXKGIuZyksYi5oKTtpZigzMDxhLmcubGVuZ3RoKXtpZihYKGEpfHxYKGIpKXRocm93IEVycm9yKFwic2xvd0RpdmlkZV8gb25seSB3b3JrcyB3aXRoIHBvc2l0aXZlIGludGVnZXJzLlwiKTtmb3IodmFyIGM9V2QsZD1iOzA+PWQuWChhKTspYz1iZShjKSxkPWJlKGQpO3ZhciBlPVooYywxKSxmPVooZCwxKTtkPVooZCwyKTtmb3IoYz1aKGMsMik7IVkoZCk7KXt2YXIgaD1mLmFkZChkKTswPj1oLlgoYSkmJihlPWUuYWRkKGMpLGY9aCk7ZD1aKGQsMSk7Yz1aKGMsMSk7fWI9WmQoYSxlLlIoYikpO3JldHVybiBuZXcgYWUoZSxiKX1mb3IoZT1WOzA8PWEuWChiKTspe2M9TWF0aC5tYXgoMSxNYXRoLmZsb29yKGEuZWEoKS9cbmIuZWEoKSkpO2Q9TWF0aC5jZWlsKE1hdGgubG9nKGMpL01hdGguTE4yKTtkPTQ4Pj1kPzE6TWF0aC5wb3coMixkLTQ4KTtmPVUoYyk7Zm9yKGg9Zi5SKGIpO1goaCl8fDA8aC5YKGEpOyljLT1kLGY9VShjKSxoPWYuUihiKTtZKGYpJiYoZj1XZCk7ZT1lLmFkZChmKTthPVpkKGEsaCk7fXJldHVybiBuZXcgYWUoZSxhKX1rLmdiPWZ1bmN0aW9uKGEpe3JldHVybiBZZCh0aGlzLGEpLmh9O2suYW5kPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wO2Q8YjtkKyspY1tkXT10aGlzLkQoZCkmYS5EKGQpO3JldHVybiBuZXcgVChjLHRoaXMuaCZhLmgpfTtrLm9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wO2Q8YjtkKyspY1tkXT10aGlzLkQoZCl8YS5EKGQpO3JldHVybiBuZXcgVChjLHRoaXMuaHxhLmgpfTtcbmsueG9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wO2Q8YjtkKyspY1tkXT10aGlzLkQoZCleYS5EKGQpO3JldHVybiBuZXcgVChjLHRoaXMuaF5hLmgpfTtmdW5jdGlvbiBiZShhKXtmb3IodmFyIGI9YS5nLmxlbmd0aCsxLGM9W10sZD0wO2Q8YjtkKyspY1tkXT1hLkQoZCk8PDF8YS5EKGQtMSk+Pj4zMTtyZXR1cm4gbmV3IFQoYyxhLmgpfWZ1bmN0aW9uIFooYSxiKXt2YXIgYz1iPj41O2IlPTMyO2Zvcih2YXIgZD1hLmcubGVuZ3RoLWMsZT1bXSxmPTA7ZjxkO2YrKyllW2ZdPTA8Yj9hLkQoZitjKT4+PmJ8YS5EKGYrYysxKTw8MzItYjphLkQoZitjKTtyZXR1cm4gbmV3IFQoZSxhLmgpfU9kLnByb3RvdHlwZS5jcmVhdGVXZWJDaGFubmVsPU9kLnByb3RvdHlwZS5nO1EucHJvdG90eXBlLnNlbmQ9US5wcm90b3R5cGUudTtRLnByb3RvdHlwZS5vcGVuPVEucHJvdG90eXBlLm07US5wcm90b3R5cGUuY2xvc2U9US5wcm90b3R5cGUuY2xvc2U7U2IuTk9fRVJST1I9MDtTYi5USU1FT1VUPTg7U2IuSFRUUF9FUlJPUj02O1RiLkNPTVBMRVRFPVwiY29tcGxldGVcIjtXYi5FdmVudFR5cGU9WGI7WGIuT1BFTj1cImFcIjtYYi5DTE9TRT1cImJcIjtYYi5FUlJPUj1cImNcIjtYYi5NRVNTQUdFPVwiZFwiO0IucHJvdG90eXBlLmxpc3Rlbj1CLnByb3RvdHlwZS5PO1AucHJvdG90eXBlLmxpc3Rlbk9uY2U9UC5wcm90b3R5cGUuUDtQLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9UC5wcm90b3R5cGUuU2E7UC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1QLnByb3RvdHlwZS5JYTtQLnByb3RvdHlwZS5nZXRTdGF0dXM9UC5wcm90b3R5cGUuZGE7UC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVAucHJvdG90eXBlLldhO1xuUC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVAucHJvdG90eXBlLmphO1AucHJvdG90eXBlLnNlbmQ9UC5wcm90b3R5cGUuaGE7UC5wcm90b3R5cGUuc2V0V2l0aENyZWRlbnRpYWxzPVAucHJvdG90eXBlLk9hO1MucHJvdG90eXBlLmRpZ2VzdD1TLnByb3RvdHlwZS5sO1MucHJvdG90eXBlLnJlc2V0PVMucHJvdG90eXBlLnJlc2V0O1MucHJvdG90eXBlLnVwZGF0ZT1TLnByb3RvdHlwZS5qO1QucHJvdG90eXBlLmFkZD1ULnByb3RvdHlwZS5hZGQ7VC5wcm90b3R5cGUubXVsdGlwbHk9VC5wcm90b3R5cGUuUjtULnByb3RvdHlwZS5tb2R1bG89VC5wcm90b3R5cGUuZ2I7VC5wcm90b3R5cGUuY29tcGFyZT1ULnByb3RvdHlwZS5YO1QucHJvdG90eXBlLnRvTnVtYmVyPVQucHJvdG90eXBlLmVhO1QucHJvdG90eXBlLnRvU3RyaW5nPVQucHJvdG90eXBlLnRvU3RyaW5nO1QucHJvdG90eXBlLmdldEJpdHM9VC5wcm90b3R5cGUuRDtULmZyb21OdW1iZXI9VTtULmZyb21TdHJpbmc9VmQ7XG52YXIgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCA9IGVzbS5jcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPZH07dmFyIGdldFN0YXRFdmVudFRhcmdldCA9IGVzbS5nZXRTdGF0RXZlbnRUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gTWIoKX07dmFyIEVycm9yQ29kZSA9IGVzbS5FcnJvckNvZGU9U2I7dmFyIEV2ZW50VHlwZSA9IGVzbS5FdmVudFR5cGU9VGI7dmFyIEV2ZW50ID0gZXNtLkV2ZW50PUU7dmFyIFN0YXQgPSBlc20uU3RhdD17eGI6MCxBYjoxLEJiOjIsVWI6MyxaYjo0LFdiOjUsWGI6NixWYjo3LFRiOjgsWWI6OSxQUk9YWToxMCxOT1BST1hZOjExLFJiOjEyLE5iOjEzLE9iOjE0LE1iOjE1LFBiOjE2LFFiOjE3LHRiOjE4LHNiOjE5LHViOjIwfTt2YXIgRmV0Y2hYbWxIdHRwRmFjdG9yeSA9IGVzbS5GZXRjaFhtbEh0dHBGYWN0b3J5PWxkO3ZhciBXZWJDaGFubmVsID0gZXNtLldlYkNoYW5uZWw9V2I7dmFyIFhocklvID0gZXNtLlhocklvPVA7dmFyIE1kNSA9IGVzbS5NZDU9Uzt2YXIgSW50ZWdlciA9IGVzbS5JbnRlZ2VyPVQ7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgSW50ZWdlciwgTWQ1LCBTdGF0LCBXZWJDaGFubmVsLCBYaHJJbywgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZXNtIGFzIGRlZmF1bHQsIGdldFN0YXRFdmVudFRhcmdldCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgU0RLX1ZFUlNJT04gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBMb2dMZXZlbCB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRmlyZWJhc2VFcnJvciwgY3JlYXRlTW9ja1VzZXJUb2tlbiwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0VUEsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc1NhZmFyaSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IEludGVnZXIsIFhocklvLCBFdmVudFR5cGUsIEVycm9yQ29kZSwgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZ2V0U3RhdEV2ZW50VGFyZ2V0LCBXZWJDaGFubmVsLCBFdmVudCwgU3RhdCwgTWQ1IH0gZnJvbSAnQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlcic7XG5cbmNvbnN0IHcgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIGEgbnVsbGFibGUgVUlELiBNb3N0bHkgZXhpc3RzIHRvIG1ha2UgY29kZSBtb3JlXG4gKiByZWFkYWJsZS5cbiAqL1xuY2xhc3MgVXNlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnVpZCA9IGU7XG4gICAgfVxuICAgIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy51aWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBrZXkgcmVwcmVzZW50aW5nIHRoaXMgdXNlciwgc3VpdGFibGUgZm9yIGluY2x1c2lvbiBpbiBhXG4gICAgICogZGljdGlvbmFyeS5cbiAgICAgKi8gICAgdG9LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzQXV0aGVudGljYXRlZCgpID8gXCJ1aWQ6XCIgKyB0aGlzLnVpZCA6IFwiYW5vbnltb3VzLXVzZXJcIjtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlLnVpZCA9PT0gdGhpcy51aWQ7XG4gICAgfVxufVxuXG4vKiogQSB1c2VyIHdpdGggYSBudWxsIFVJRC4gKi8gVXNlci5VTkFVVEhFTlRJQ0FURUQgPSBuZXcgVXNlcihudWxsKSwgXG4vLyBUT0RPKG1pa2VsZWhlbik6IExvb2sgaW50byBnZXR0aW5nIGEgcHJvcGVyIHVpZC1lcXVpdmFsZW50IGZvclxuLy8gbm9uLUZpcmViYXNlQXV0aCBwcm92aWRlcnMuXG5Vc2VyLkdPT0dMRV9DUkVERU5USUFMUyA9IG5ldyBVc2VyKFwiZ29vZ2xlLWNyZWRlbnRpYWxzLXVpZFwiKSwgVXNlci5GSVJTVF9QQVJUWSA9IG5ldyBVc2VyKFwiZmlyc3QtcGFydHktdWlkXCIpLCBcblVzZXIuTU9DS19VU0VSID0gbmV3IFVzZXIoXCJtb2NrLXVzZXJcIik7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5sZXQgUyA9IFwiMTAuNC4wXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBiID0gbmV3IExvZ2dlcihcIkBmaXJlYmFzZS9maXJlc3RvcmVcIik7XG5cbi8vIEhlbHBlciBtZXRob2RzIGFyZSBuZWVkZWQgYmVjYXVzZSB2YXJpYWJsZXMgY2FuJ3QgYmUgZXhwb3J0ZWQgYXMgcmVhZC93cml0ZVxuZnVuY3Rpb24gX19QUklWQVRFX2dldExvZ0xldmVsKCkge1xuICAgIHJldHVybiBiLmxvZ0xldmVsO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHZlcmJvc2l0eSBvZiBDbG91ZCBGaXJlc3RvcmUgbG9ncyAoZGVidWcsIGVycm9yLCBvciBzaWxlbnQpLlxuICpcbiAqIEBwYXJhbSBsb2dMZXZlbCAtIFRoZSB2ZXJib3NpdHkgeW91IHNldCBmb3IgYWN0aXZpdHkgYW5kIGVycm9yIGxvZ2dpbmcuIENhblxuICogICBiZSBhbnkgb2YgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gKlxuICogICA8dWw+XG4gKiAgICAgPGxpPmBkZWJ1Z2AgZm9yIHRoZSBtb3N0IHZlcmJvc2UgbG9nZ2luZyBsZXZlbCwgcHJpbWFyaWx5IGZvclxuICogICAgIGRlYnVnZ2luZy48L2xpPlxuICogICAgIDxsaT5gZXJyb3JgIHRvIGxvZyBlcnJvcnMgb25seS48L2xpPlxuICogICAgIDxsaT48Y29kZT5gc2lsZW50YCB0byB0dXJuIG9mZiBsb2dnaW5nLjwvbGk+XG4gKiAgIDwvdWw+XG4gKi8gZnVuY3Rpb24gc2V0TG9nTGV2ZWwoZSkge1xuICAgIGIuc2V0TG9nTGV2ZWwoZSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2dEZWJ1ZyhlLCAuLi50KSB7XG4gICAgaWYgKGIubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgY29uc3QgbiA9IHQubWFwKF9fUFJJVkFURV9hcmdUb1N0cmluZyk7XG4gICAgICAgIGIuZGVidWcoYEZpcmVzdG9yZSAoJHtTfSk6ICR7ZX1gLCAuLi5uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2dFcnJvcihlLCAuLi50KSB7XG4gICAgaWYgKGIubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuRVJST1IpIHtcbiAgICAgICAgY29uc3QgbiA9IHQubWFwKF9fUFJJVkFURV9hcmdUb1N0cmluZyk7XG4gICAgICAgIGIuZXJyb3IoYEZpcmVzdG9yZSAoJHtTfSk6ICR7ZX1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvZ1dhcm4oZSwgLi4udCkge1xuICAgIGlmIChiLmxvZ0xldmVsIDw9IExvZ0xldmVsLldBUk4pIHtcbiAgICAgICAgY29uc3QgbiA9IHQubWFwKF9fUFJJVkFURV9hcmdUb1N0cmluZyk7XG4gICAgICAgIGIud2FybihgRmlyZXN0b3JlICgke1N9KTogJHtlfWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhZGRpdGlvbmFsIGxvZyBwYXJhbWV0ZXIgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FyZ1RvU3RyaW5nKGUpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkgcmV0dXJuIGU7XG4gICAgdHJ5IHtcbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLyoqIEZvcm1hdHMgYW4gb2JqZWN0IGFzIGEgSlNPTiBzdHJpbmcsIHN1aXRhYmxlIGZvciBsb2dnaW5nLiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2Zvcm1hdEpTT04oZSkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgICAgICB9KGUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgLy8gQ29udmVydGluZyB0byBKU09OIGZhaWxlZCwganVzdCBsb2cgdGhlIG9iamVjdCBkaXJlY3RseVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqXG4gKiBSZXR1cm5zIGBuZXZlcmAgYW5kIGNhbiBiZSB1c2VkIGluIGV4cHJlc3Npb25zOlxuICogQGV4YW1wbGVcbiAqIGxldCBmdXR1cmVWYXIgPSBmYWlsKCdub3QgaW1wbGVtZW50ZWQgeWV0Jyk7XG4gKi8gZnVuY3Rpb24gZmFpbChlID0gXCJVbmV4cGVjdGVkIHN0YXRlXCIpIHtcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXG4gICAgLy8gZXhjZXB0aW9uIGlzIHN3YWxsb3dlZC5cbiAgICBjb25zdCB0ID0gYEZJUkVTVE9SRSAoJHtTfSkgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogYCArIGU7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgdXNlIEZpcmVzdG9yZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxuICAgIC8vIGRlcGVuZGVuY3kgYmV0d2VlbiB0aGUgZXJyb3IgYW5kIGFzc2VydCBtb2R1bGVzIHdoaWNoIGRvZXNuJ3Qgd29yay4pXG4gICAgdGhyb3cgX19QUklWQVRFX2xvZ0Vycm9yKHQpLCBuZXcgRXJyb3IodCk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2hhcmRBc3NlcnQoZSwgdCkge1xuICAgIGUgfHwgZmFpbCgpO1xufVxuXG4vKipcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXG4gKlxuICogVGhlIGNvZGUgb2YgY2FsbHNpdGVzIGludm9raW5nIHRoaXMgZnVuY3Rpb24gYXJlIHN0cmlwcGVkIG91dCBpbiBwcm9kdWN0aW9uXG4gKiBidWlsZHMuIEFueSBzaWRlLWVmZmVjdHMgb2YgY29kZSB3aXRoaW4gdGhlIGRlYnVnQXNzZXJ0KCkgaW52b2NhdGlvbiB3aWxsIG5vdFxuICogaGFwcGVuIGluIHRoaXMgY2FzZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGVidWdBc3NlcnQoZSwgdCkge1xuICAgIGUgfHwgZmFpbCgpO1xufVxuXG4vKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYC4gSW4gbm9uLXByb2R1Y3Rpb24gYnVpbGRzLCB2ZXJpZmllcyB0aGF0IGBvYmpgIGlzIGFuXG4gKiBpbnN0YW5jZSBvZiBgVGAgYmVmb3JlIGNhc3RpbmcuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlYnVnQ2FzdChlLCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG50KSB7XG4gICAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEQgPSB7XG4gICAgLy8gQ2F1c2VzIGFyZSBjb3BpZWQgZnJvbTpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICAgIC8qKiBOb3QgYW4gZXJyb3I7IHJldHVybmVkIG9uIHN1Y2Nlc3MuICovXG4gICAgT0s6IFwib2tcIixcbiAgICAvKiogVGhlIG9wZXJhdGlvbiB3YXMgY2FuY2VsbGVkICh0eXBpY2FsbHkgYnkgdGhlIGNhbGxlcikuICovXG4gICAgQ0FOQ0VMTEVEOiBcImNhbmNlbGxlZFwiLFxuICAgIC8qKiBVbmtub3duIGVycm9yIG9yIGFuIGVycm9yIGZyb20gYSBkaWZmZXJlbnQgZXJyb3IgZG9tYWluLiAqL1xuICAgIFVOS05PV046IFwidW5rbm93blwiLFxuICAgIC8qKlxuICAgICAqIENsaWVudCBzcGVjaWZpZWQgYW4gaW52YWxpZCBhcmd1bWVudC4gTm90ZSB0aGF0IHRoaXMgZGlmZmVycyBmcm9tXG4gICAgICogRkFJTEVEX1BSRUNPTkRJVElPTi4gSU5WQUxJRF9BUkdVTUVOVCBpbmRpY2F0ZXMgYXJndW1lbnRzIHRoYXQgYXJlXG4gICAgICogcHJvYmxlbWF0aWMgcmVnYXJkbGVzcyBvZiB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSAoZS5nLiwgYSBtYWxmb3JtZWQgZmlsZVxuICAgICAqIG5hbWUpLlxuICAgICAqL1xuICAgIElOVkFMSURfQVJHVU1FTlQ6IFwiaW52YWxpZC1hcmd1bWVudFwiLFxuICAgIC8qKlxuICAgICAqIERlYWRsaW5lIGV4cGlyZWQgYmVmb3JlIG9wZXJhdGlvbiBjb3VsZCBjb21wbGV0ZS4gRm9yIG9wZXJhdGlvbnMgdGhhdFxuICAgICAqIGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSwgdGhpcyBlcnJvciBtYXkgYmUgcmV0dXJuZWQgZXZlbiBpZiB0aGVcbiAgICAgKiBvcGVyYXRpb24gaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIEZvciBleGFtcGxlLCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICAgKiBmcm9tIGEgc2VydmVyIGNvdWxkIGhhdmUgYmVlbiBkZWxheWVkIGxvbmcgZW5vdWdoIGZvciB0aGUgZGVhZGxpbmUgdG9cbiAgICAgKiBleHBpcmUuXG4gICAgICovXG4gICAgREVBRExJTkVfRVhDRUVERUQ6IFwiZGVhZGxpbmUtZXhjZWVkZWRcIixcbiAgICAvKiogU29tZSByZXF1ZXN0ZWQgZW50aXR5IChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgd2FzIG5vdCBmb3VuZC4gKi9cbiAgICBOT1RfRk9VTkQ6IFwibm90LWZvdW5kXCIsXG4gICAgLyoqXG4gICAgICogU29tZSBlbnRpdHkgdGhhdCB3ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgYWxyZWFkeVxuICAgICAqIGV4aXN0cy5cbiAgICAgKi9cbiAgICBBTFJFQURZX0VYSVNUUzogXCJhbHJlYWR5LWV4aXN0c1wiLFxuICAgIC8qKlxuICAgICAqIFRoZSBjYWxsZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGV4ZWN1dGUgdGhlIHNwZWNpZmllZCBvcGVyYXRpb24uXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBmb3IgcmVqZWN0aW9ucyBjYXVzZWQgYnkgZXhoYXVzdGluZ1xuICAgICAqIHNvbWUgcmVzb3VyY2UgKHVzZSBSRVNPVVJDRV9FWEhBVVNURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGlmIHRoZSBjYWxsZXIgY2FuIG5vdCBiZSBpZGVudGlmaWVkXG4gICAgICogKHVzZSBVTkFVVEhFTlRJQ0FURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKi9cbiAgICBQRVJNSVNTSU9OX0RFTklFRDogXCJwZXJtaXNzaW9uLWRlbmllZFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0IGRvZXMgbm90IGhhdmUgdmFsaWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgZm9yIHRoZVxuICAgICAqIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBVTkFVVEhFTlRJQ0FURUQ6IFwidW5hdXRoZW50aWNhdGVkXCIsXG4gICAgLyoqXG4gICAgICogU29tZSByZXNvdXJjZSBoYXMgYmVlbiBleGhhdXN0ZWQsIHBlcmhhcHMgYSBwZXItdXNlciBxdW90YSwgb3IgcGVyaGFwcyB0aGVcbiAgICAgKiBlbnRpcmUgZmlsZSBzeXN0ZW0gaXMgb3V0IG9mIHNwYWNlLlxuICAgICAqL1xuICAgIFJFU09VUkNFX0VYSEFVU1RFRDogXCJyZXNvdXJjZS1leGhhdXN0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIHJlamVjdGVkIGJlY2F1c2UgdGhlIHN5c3RlbSBpcyBub3QgaW4gYSBzdGF0ZSByZXF1aXJlZCBmb3JcbiAgICAgKiB0aGUgb3BlcmF0aW9uJ3MgZXhlY3V0aW9uLiBGb3IgZXhhbXBsZSwgZGlyZWN0b3J5IHRvIGJlIGRlbGV0ZWQgbWF5IGJlXG4gICAgICogbm9uLWVtcHR5LCBhbiBybWRpciBvcGVyYXRpb24gaXMgYXBwbGllZCB0byBhIG5vbi1kaXJlY3RvcnksIGV0Yy5cbiAgICAgKlxuICAgICAqIEEgbGl0bXVzIHRlc3QgdGhhdCBtYXkgaGVscCBhIHNlcnZpY2UgaW1wbGVtZW50b3IgaW4gZGVjaWRpbmdcbiAgICAgKiBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsIGFuZCBVTkFWQUlMQUJMRTpcbiAgICAgKiAgKGEpIFVzZSBVTkFWQUlMQUJMRSBpZiB0aGUgY2xpZW50IGNhbiByZXRyeSBqdXN0IHRoZSBmYWlsaW5nIGNhbGwuXG4gICAgICogIChiKSBVc2UgQUJPUlRFRCBpZiB0aGUgY2xpZW50IHNob3VsZCByZXRyeSBhdCBhIGhpZ2hlci1sZXZlbFxuICAgICAqICAgICAgKGUuZy4sIHJlc3RhcnRpbmcgYSByZWFkLW1vZGlmeS13cml0ZSBzZXF1ZW5jZSkuXG4gICAgICogIChjKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW50aWxcbiAgICAgKiAgICAgIHRoZSBzeXN0ZW0gc3RhdGUgaGFzIGJlZW4gZXhwbGljaXRseSBmaXhlZC4gRS5nLiwgaWYgYW4gXCJybWRpclwiXG4gICAgICogICAgICBmYWlscyBiZWNhdXNlIHRoZSBkaXJlY3RvcnkgaXMgbm9uLWVtcHR5LCBGQUlMRURfUFJFQ09ORElUSU9OXG4gICAgICogICAgICBzaG91bGQgYmUgcmV0dXJuZWQgc2luY2UgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVubGVzc1xuICAgICAqICAgICAgdGhleSBoYXZlIGZpcnN0IGZpeGVkIHVwIHRoZSBkaXJlY3RvcnkgYnkgZGVsZXRpbmcgZmlsZXMgZnJvbSBpdC5cbiAgICAgKiAgKGQpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgcGVyZm9ybXMgY29uZGl0aW9uYWxcbiAgICAgKiAgICAgIFJFU1QgR2V0L1VwZGF0ZS9EZWxldGUgb24gYSByZXNvdXJjZSBhbmQgdGhlIHJlc291cmNlIG9uIHRoZVxuICAgICAqICAgICAgc2VydmVyIGRvZXMgbm90IG1hdGNoIHRoZSBjb25kaXRpb24uIEUuZy4sIGNvbmZsaWN0aW5nXG4gICAgICogICAgICByZWFkLW1vZGlmeS13cml0ZSBvbiB0aGUgc2FtZSByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBGQUlMRURfUFJFQ09ORElUSU9OOiBcImZhaWxlZC1wcmVjb25kaXRpb25cIixcbiAgICAvKipcbiAgICAgKiBUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLCB0eXBpY2FsbHkgZHVlIHRvIGEgY29uY3VycmVuY3kgaXNzdWUgbGlrZVxuICAgICAqIHNlcXVlbmNlciBjaGVjayBmYWlsdXJlcywgdHJhbnNhY3Rpb24gYWJvcnRzLCBldGMuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgQUJPUlRFRDogXCJhYm9ydGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyBhdHRlbXB0ZWQgcGFzdCB0aGUgdmFsaWQgcmFuZ2UuIEUuZy4sIHNlZWtpbmcgb3IgcmVhZGluZ1xuICAgICAqIHBhc3QgZW5kIG9mIGZpbGUuXG4gICAgICpcbiAgICAgKiBVbmxpa2UgSU5WQUxJRF9BUkdVTUVOVCwgdGhpcyBlcnJvciBpbmRpY2F0ZXMgYSBwcm9ibGVtIHRoYXQgbWF5IGJlIGZpeGVkXG4gICAgICogaWYgdGhlIHN5c3RlbSBzdGF0ZSBjaGFuZ2VzLiBGb3IgZXhhbXBsZSwgYSAzMi1iaXQgZmlsZSBzeXN0ZW0gd2lsbFxuICAgICAqIGdlbmVyYXRlIElOVkFMSURfQVJHVU1FTlQgaWYgYXNrZWQgdG8gcmVhZCBhdCBhbiBvZmZzZXQgdGhhdCBpcyBub3QgaW4gdGhlXG4gICAgICogcmFuZ2UgWzAsMl4zMi0xXSwgYnV0IGl0IHdpbGwgZ2VuZXJhdGUgT1VUX09GX1JBTkdFIGlmIGFza2VkIHRvIHJlYWQgZnJvbVxuICAgICAqIGFuIG9mZnNldCBwYXN0IHRoZSBjdXJyZW50IGZpbGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIFRoZXJlIGlzIGEgZmFpciBiaXQgb2Ygb3ZlcmxhcCBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICogT1VUX09GX1JBTkdFLiBXZSByZWNvbW1lbmQgdXNpbmcgT1VUX09GX1JBTkdFICh0aGUgbW9yZSBzcGVjaWZpYyBlcnJvcilcbiAgICAgKiB3aGVuIGl0IGFwcGxpZXMgc28gdGhhdCBjYWxsZXJzIHdobyBhcmUgaXRlcmF0aW5nIHRocm91Z2ggYSBzcGFjZSBjYW5cbiAgICAgKiBlYXNpbHkgbG9vayBmb3IgYW4gT1VUX09GX1JBTkdFIGVycm9yIHRvIGRldGVjdCB3aGVuIHRoZXkgYXJlIGRvbmUuXG4gICAgICovXG4gICAgT1VUX09GX1JBTkdFOiBcIm91dC1vZi1yYW5nZVwiLFxuICAgIC8qKiBPcGVyYXRpb24gaXMgbm90IGltcGxlbWVudGVkIG9yIG5vdCBzdXBwb3J0ZWQvZW5hYmxlZCBpbiB0aGlzIHNlcnZpY2UuICovXG4gICAgVU5JTVBMRU1FTlRFRDogXCJ1bmltcGxlbWVudGVkXCIsXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgZXJyb3JzLiBNZWFucyBzb21lIGludmFyaWFudHMgZXhwZWN0ZWQgYnkgdW5kZXJseWluZyBTeXN0ZW0gaGFzXG4gICAgICogYmVlbiBicm9rZW4uIElmIHlvdSBzZWUgb25lIG9mIHRoZXNlIGVycm9ycywgU29tZXRoaW5nIGlzIHZlcnkgYnJva2VuLlxuICAgICAqL1xuICAgIElOVEVSTkFMOiBcImludGVybmFsXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHNlcnZpY2UgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlLiBUaGlzIGlzIGEgbW9zdCBsaWtlbHkgYSB0cmFuc2llbnRcbiAgICAgKiBjb25kaXRpb24gYW5kIG1heSBiZSBjb3JyZWN0ZWQgYnkgcmV0cnlpbmcgd2l0aCBhIGJhY2tvZmYuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgVU5BVkFJTEFCTEU6IFwidW5hdmFpbGFibGVcIixcbiAgICAvKiogVW5yZWNvdmVyYWJsZSBkYXRhIGxvc3Mgb3IgY29ycnVwdGlvbi4gKi9cbiAgICBEQVRBX0xPU1M6IFwiZGF0YS1sb3NzXCJcbn07XG5cbi8qKiBBbiBlcnJvciByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBvcGVyYXRpb24uICovIGNsYXNzIEZpcmVzdG9yZUVycm9yIGV4dGVuZHMgRmlyZWJhc2VFcnJvciB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgYmFja2VuZCBlcnJvciBjb2RlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGVycm9yLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgY3VzdG9tIGVycm9yIGRlc2NyaXB0aW9uLlxuICAgICAqL1xuICAgIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgdCksIHRoaXMuY29kZSA9IGUsIHRoaXMubWVzc2FnZSA9IHQsIFxuICAgICAgICAvLyBIQUNLOiBXZSB3cml0ZSBhIHRvU3RyaW5nIHByb3BlcnR5IGRpcmVjdGx5IGJlY2F1c2UgRXJyb3IgaXMgbm90IGEgcmVhbFxuICAgICAgICAvLyBjbGFzcyBhbmQgc28gaW5oZXJpdGFuY2UgZG9lcyBub3Qgd29yayBjb3JyZWN0bHkuIFdlIGNvdWxkIGFsdGVybmF0aXZlbHlcbiAgICAgICAgLy8gZG8gdGhlIHNhbWUgXCJiYWNrLWRvb3IgaW5oZXJpdGFuY2VcIiB0cmljayB0aGF0IEZpcmViYXNlRXJyb3IgZG9lcy5cbiAgICAgICAgdGhpcy50b1N0cmluZyA9ICgpID0+IGAke3RoaXMubmFtZX06IFtjb2RlPSR7dGhpcy5jb2RlfV06ICR7dGhpcy5tZXNzYWdlfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRGVmZXJyZWQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IGUsIHRoaXMucmVqZWN0ID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX09BdXRoVG9rZW4ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdCwgdGhpcy50eXBlID0gXCJPQXV0aFwiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0aGlzLmhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBgQmVhcmVyICR7ZX1gKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIF9fUFJJVkFURV9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydChlLCB0KSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdChVc2VyLlVOQVVUSEVOVElDQVRFRCkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyByZXR1cm5zIGEgY29uc3RhbnQgdG9rZW4uIFVzZWQgZm9yXG4gKiBlbXVsYXRvciB0b2tlbiBtb2NraW5nLlxuICovIGNsYXNzIF9fUFJJVkFURV9FbXVsYXRvckF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyB0aGUgbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIHNldENoYW5nZUxpc3RlbmVyKClcbiAgICAgICAgICogVGhpcyBpc24ndCBhY3R1YWxseSBuZWNlc3Nhcnkgc2luY2UgdGhlIFVJRCBuZXZlciBjaGFuZ2VzLCBidXQgd2UgdXNlIHRoaXNcbiAgICAgICAgICogdG8gdmVyaWZ5IHRoZSBsaXN0ZW4gY29udHJhY3QgaXMgYWRoZXJlZCB0byBpbiB0ZXN0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnRva2VuKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydChlLCB0KSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSB0LCBcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0KHRoaXMudG9rZW4udXNlcikpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0ZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy50ID0gZSwgXG4gICAgICAgIC8qKiBUcmFja3MgdGhlIGN1cnJlbnQgVXNlci4gKi9cbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IFVzZXIuVU5BVVRIRU5USUNBVEVELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvdW50ZXIgdXNlZCB0byBkZXRlY3QgaWYgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgYSBnZXRUb2tlbiByZXF1ZXN0IHdhc1xuICAgICAgICAgKiBvdXRzdGFuZGluZy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaSA9IDAsIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmk7XG4gICAgICAgIC8vIEEgY2hhbmdlIGxpc3RlbmVyIHRoYXQgcHJldmVudHMgZG91YmxlLWZpcmluZyBmb3IgdGhlIHNhbWUgdG9rZW4gY2hhbmdlLlxuICAgICAgICAgICAgICAgIGNvbnN0IF9fUFJJVkFURV9ndWFyZGVkQ2hhbmdlTGlzdGVuZXIgPSBlID0+IHRoaXMuaSAhPT0gbiA/IChuID0gdGhpcy5pLCBcbiAgICAgICAgdChlKSkgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgLy8gQSBwcm9taXNlIHRoYXQgY2FuIGJlIHdhaXRlZCBvbiB0byBibG9jayBvbiB0aGUgbmV4dCB0b2tlbiBjaGFuZ2UuXG4gICAgICAgIC8vIFRoaXMgcHJvbWlzZSBpcyByZS1jcmVhdGVkIGFmdGVyIGVhY2ggY2hhbmdlLlxuICAgICAgICAgICAgICAgIGxldCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgdGhpcy5vID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pKyssIHRoaXMuY3VycmVudFVzZXIgPSB0aGlzLnUoKSwgci5yZXNvbHZlKCksIHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkLCBcbiAgICAgICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gX19QUklWQVRFX2d1YXJkZWRDaGFuZ2VMaXN0ZW5lcih0aGlzLmN1cnJlbnRVc2VyKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcjtcbiAgICAgICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHQucHJvbWlzZSwgYXdhaXQgX19QUklWQVRFX2d1YXJkZWRDaGFuZ2VMaXN0ZW5lcih0aGlzLmN1cnJlbnRVc2VyKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSwgX19QUklWQVRFX3JlZ2lzdGVyQXV0aCA9IGUgPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggZGV0ZWN0ZWRcIiksIHRoaXMuYXV0aCA9IGUsIFxuICAgICAgICAgICAgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIF9fUFJJVkFURV9hd2FpdE5leHRUb2tlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnQub25Jbml0KChlID0+IF9fUFJJVkFURV9yZWdpc3RlckF1dGgoZSkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBdXRoIHJpZ2h0IGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yayBiZWZvcmUgd2VcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gc3RhcnQgdXAgaW4gdW5hdXRoZW50aWNhdGVkIG1vZGUuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudC5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlID8gX19QUklWQVRFX3JlZ2lzdGVyQXV0aChlKSA6IChcbiAgICAgICAgICAgICAgICAvLyBJZiBhdXRoIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aCBgbnVsbGAgdXNlclxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIG5vdCB5ZXQgZGV0ZWN0ZWRcIiksIFxuICAgICAgICAgICAgICAgIHIucmVzb2x2ZSgpLCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAwKSwgX19QUklWQVRFX2F3YWl0TmV4dFRva2VuKCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICAvLyBUYWtlIG5vdGUgb2YgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHRva2VuQ291bnRlciBzbyB0aGF0IHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGNhbiBmYWlsICh3aXRoIGFuIEFCT1JURUQgZXJyb3IpIGlmIHRoZXJlIGlzIGEgdG9rZW4gY2hhbmdlIHdoaWxlIHRoZVxuICAgICAgICAvLyByZXF1ZXN0IGlzIG91dHN0YW5kaW5nLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5pLCB0ID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPyB0aGlzLmF1dGguZ2V0VG9rZW4odCkudGhlbigodCA9PiBcbiAgICAgICAgLy8gQ2FuY2VsIHRoZSByZXF1ZXN0IHNpbmNlIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIHRoZSByZXF1ZXN0IHdhc1xuICAgICAgICAvLyBvdXRzdGFuZGluZyBzbyB0aGUgcmVzcG9uc2UgaXMgcG90ZW50aWFsbHkgZm9yIGEgcHJldmlvdXMgdXNlciAod2hpY2hcbiAgICAgICAgLy8gdXNlciwgd2UgY2FuJ3QgYmUgc3VyZSkuXG4gICAgICAgIHRoaXMuaSAhPT0gZSA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiZ2V0VG9rZW4gYWJvcnRlZCBkdWUgdG8gdG9rZW4gY2hhbmdlLlwiKSwgXG4gICAgICAgIHRoaXMuZ2V0VG9rZW4oKSkgOiB0ID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwic3RyaW5nXCIgPT0gdHlwZW9mIHQuYWNjZXNzVG9rZW4pLCBcbiAgICAgICAgbmV3IF9fUFJJVkFURV9PQXV0aFRva2VuKHQuYWNjZXNzVG9rZW4sIHRoaXMuY3VycmVudFVzZXIpKSA6IG51bGwpKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge1xuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9ICEwO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5yZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgIH1cbiAgICAvLyBBdXRoLmdldFVpZCgpIGNhbiByZXR1cm4gbnVsbCBldmVuIHdpdGggYSB1c2VyIGxvZ2dlZCBpbi4gSXQgaXMgYmVjYXVzZVxuICAgIC8vIGdldFVpZCgpIGlzIHN5bmNocm9ub3VzLCBidXQgdGhlIGF1dGggY29kZSBwb3B1bGF0aW5nIFVpZCBpcyBhc3luY2hyb25vdXMuXG4gICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGluIHRoZSBBdXRoVG9rZW5MaXN0ZW5lciBjYWxsYmFja1xuICAgIC8vIHRvIGd1YXJhbnRlZSB0byBnZXQgdGhlIGFjdHVhbCB1c2VyLlxuICAgIHUoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLmdldFVpZCgpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQobnVsbCA9PT0gZSB8fCBcInN0cmluZ1wiID09IHR5cGVvZiBlKSwgbmV3IFVzZXIoZSk7XG4gICAgfVxufVxuXG4vKlxuICogRmlyc3RQYXJ0eVRva2VuIHByb3ZpZGVzIGEgZnJlc2ggdG9rZW4gZWFjaCB0aW1lIGl0cyB2YWx1ZVxuICogaXMgcmVxdWVzdGVkLCBiZWNhdXNlIGlmIHRoZSB0b2tlbiBpcyB0b28gb2xkLCByZXF1ZXN0cyB3aWxsIGJlIHJlamVjdGVkLlxuICogVGVjaG5pY2FsbHkgdGhpcyBtYXkgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBzaW5jZSB0aGUgU0RLIHNob3VsZCBncmFjZWZ1bGx5XG4gKiByZWNvdmVyIGZyb20gdW5hdXRoZW50aWNhdGVkIGVycm9ycyAoc2VlIGIvMzMxNDc4MTggZm9yIGNvbnRleHQpLCBidXQgaXQnc1xuICogc2FmZXIgdG8ga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gYXMtaXMuXG4gKi8gY2xhc3MgX19QUklWQVRFX0ZpcnN0UGFydHlUb2tlbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmwgPSBlLCB0aGlzLmggPSB0LCB0aGlzLlAgPSBuLCB0aGlzLnR5cGUgPSBcIkZpcnN0UGFydHlcIiwgdGhpcy51c2VyID0gVXNlci5GSVJTVF9QQVJUWSwgXG4gICAgICAgIHRoaXMuSSA9IG5ldyBNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gYXV0aG9yaXphdGlvbiB0b2tlbiwgdXNpbmcgYSBwcm92aWRlZCBmYWN0b3J5IGZ1bmN0aW9uLCBvciByZXR1cm5cbiAgICAgKiBudWxsLlxuICAgICAqLyAgICBUKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5QID8gdGhpcy5QKCkgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgaGVhZGVycygpIHtcbiAgICAgICAgdGhpcy5JLnNldChcIlgtR29vZy1BdXRoVXNlclwiLCB0aGlzLmwpO1xuICAgICAgICAvLyBVc2UgYXJyYXkgbm90YXRpb24gdG8gcHJldmVudCBtaW5pZmljYXRpb25cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuVCgpO1xuICAgICAgICByZXR1cm4gZSAmJiB0aGlzLkkuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBlKSwgdGhpcy5oICYmIHRoaXMuSS5zZXQoXCJYLUdvb2ctSWFtLUF1dGhvcml6YXRpb24tVG9rZW5cIiwgdGhpcy5oKSwgXG4gICAgICAgIHRoaXMuSTtcbiAgICB9XG59XG5cbi8qXG4gKiBQcm92aWRlcyB1c2VyIGNyZWRlbnRpYWxzIHJlcXVpcmVkIGZvciB0aGUgRmlyZXN0b3JlIEphdmFTY3JpcHQgU0RLXG4gKiB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIsIHVzaW5nIHRlY2huaXF1ZSB0aGF0IGlzIG9ubHkgYXZhaWxhYmxlXG4gKiB0byBhcHBsaWNhdGlvbnMgaG9zdGVkIGJ5IEdvb2dsZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRmlyc3RQYXJ0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMubCA9IGUsIHRoaXMuaCA9IHQsIHRoaXMuUCA9IG47XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBfX1BSSVZBVEVfRmlyc3RQYXJ0eVRva2VuKHRoaXMubCwgdGhpcy5oLCB0aGlzLlApKTtcbiAgICB9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1aWQuXG4gICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdChVc2VyLkZJUlNUX1BBUlRZKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbn1cblxuY2xhc3MgQXBwQ2hlY2tUb2tlbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gZSwgdGhpcy50eXBlID0gXCJBcHBDaGVja1wiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCBlICYmIGUubGVuZ3RoID4gMCAmJiB0aGlzLmhlYWRlcnMuc2V0KFwieC1maXJlYmFzZS1hcHBjaGVja1wiLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9GaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLkEgPSBlLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID0gbnVsbCwgdGhpcy5SID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICBjb25zdCBvblRva2VuQ2hhbmdlZCA9IGUgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPSBlLmVycm9yICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBFcnJvciBnZXR0aW5nIEFwcCBDaGVjayB0b2tlbjsgdXNpbmcgcGxhY2Vob2xkZXIgdG9rZW4gaW5zdGVhZC4gRXJyb3I6ICR7ZS5lcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgY29uc3QgbiA9IGUudG9rZW4gIT09IHRoaXMuUjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlIgPSBlLnRva2VuLCBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBgUmVjZWl2ZWQgJHtuID8gXCJuZXdcIiA6IFwiZXhpc3RpbmdcIn0gdG9rZW4uYCksIFxuICAgICAgICAgICAgbiA/IHQoZS50b2tlbikgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vID0gdCA9PiB7XG4gICAgICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IG9uVG9rZW5DaGFuZ2VkKHQpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9yZWdpc3RlckFwcENoZWNrID0gZSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBcIkFwcENoZWNrIGRldGVjdGVkXCIpLCB0aGlzLmFwcENoZWNrID0gZSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrLmFkZFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5BLm9uSW5pdCgoZSA9PiBfX1BSSVZBVEVfcmVnaXN0ZXJBcHBDaGVjayhlKSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEFwcENoZWNrIGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yay5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcENoZWNrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuQS5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlID8gX19QUklWQVRFX3JlZ2lzdGVyQXBwQ2hlY2soZSkgOiBcbiAgICAgICAgICAgICAgICAvLyBJZiBBcHBDaGVjayBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGhvdXQgaXQuXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBub3QgeWV0IGRldGVjdGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID8gdGhpcy5hcHBDaGVjay5nZXRUb2tlbihlKS50aGVuKChlID0+IGUgPyAoX19QUklWQVRFX2hhcmRBc3NlcnQoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50b2tlbiksIFxuICAgICAgICB0aGlzLlIgPSBlLnRva2VuLCBuZXcgQXBwQ2hlY2tUb2tlbihlLnRva2VuKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2sgJiYgdGhpcy5hcHBDaGVjay5yZW1vdmVUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIEFwcENoZWNrIHRva2VuIHByb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIF9fUFJJVkFURV9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEFwcENoZWNrVG9rZW4oXCJcIikpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KGUsIHQpIHt9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEJ1aWxkcyBhIENyZWRlbnRpYWxzUHJvdmlkZXIgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mXG4gKiB0aGUgY3JlZGVudGlhbHMgcGFzc2VkIGluLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYG5CeXRlc2Agb2YgcmFuZG9tIGJ5dGVzLlxuICpcbiAqIElmIGBuQnl0ZXMgPCAwYCAsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmFuZG9tQnl0ZXMoZSkge1xuICAgIC8vIFBvbHlmaWxscyBmb3IgSUUgYW5kIFdlYldvcmtlciBieSB1c2luZyBgc2VsZmAgYW5kIGBtc0NyeXB0b2Agd2hlbiBgY3J5cHRvYCBpcyBub3QgYXZhaWxhYmxlLlxuICAgIGNvbnN0IHQgPSBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHNlbGYgJiYgKHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG8pLCBuID0gbmV3IFVpbnQ4QXJyYXkoZSk7XG4gICAgaWYgKHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LmdldFJhbmRvbVZhbHVlcykgdC5nZXRSYW5kb21WYWx1ZXMobik7IGVsc2UgXG4gICAgLy8gRmFsbHMgYmFjayB0byBNYXRoLnJhbmRvbVxuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZTsgdCsrKSBuW3RdID0gTWF0aC5mbG9vcigyNTYgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICByZXR1cm4gbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX0F1dG9JZCB7XG4gICAgc3RhdGljIFYoKSB7XG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgIGNvbnN0IGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIsIHQgPSBNYXRoLmZsb29yKDI1NiAvIGUubGVuZ3RoKSAqIGUubGVuZ3RoO1xuICAgICAgICAvLyBUaGUgbGFyZ2VzdCBieXRlIHZhbHVlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiBgY2hhci5sZW5ndGhgLlxuICAgICAgICAgICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgZm9yICg7bi5sZW5ndGggPCAyMDsgKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3JhbmRvbUJ5dGVzKDQwKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgci5sZW5ndGg7ICsraSkgXG4gICAgICAgICAgICAvLyBPbmx5IGFjY2VwdCB2YWx1ZXMgdGhhdCBhcmUgWzAsIG1heE11bHRpcGxlKSwgdGhpcyBlbnN1cmVzIHRoZXkgY2FuXG4gICAgICAgICAgICAvLyBiZSBldmVubHkgbWFwcGVkIHRvIGluZGljZXMgb2YgYGNoYXJzYCB2aWEgYSBtb2R1bG8gb3BlcmF0aW9uLlxuICAgICAgICAgICAgbi5sZW5ndGggPCAyMCAmJiByW2ldIDwgdCAmJiAobiArPSBlLmNoYXJBdChyW2ldICUgZS5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUsIHQpIHtcbiAgICByZXR1cm4gZSA8IHQgPyAtMSA6IGUgPiB0ID8gMSA6IDA7XG59XG5cbi8qKiBIZWxwZXIgdG8gY29tcGFyZSBhcnJheXMgdXNpbmcgaXNFcXVhbCgpLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXJyYXlFcXVhbHMoZSwgdCwgbikge1xuICAgIHJldHVybiBlLmxlbmd0aCA9PT0gdC5sZW5ndGggJiYgZS5ldmVyeSgoKGUsIHIpID0+IG4oZSwgdFtyXSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cbiAqIGNvbnN0cnVjdCBhbiBpbmNsdXNpdmUgcmFuZ2UgZm9yIGluZGV4ZWRkYiBpdGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ltbWVkaWF0ZVN1Y2Nlc3NvcihlKSB7XG4gICAgLy8gUmV0dXJuIHRoZSBpbnB1dCBzdHJpbmcsIHdpdGggYW4gYWRkaXRpb25hbCBOVUwgYnl0ZSBhcHBlbmRlZC5cbiAgICByZXR1cm4gZSArIFwiXFwwXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUaGUgZWFybGllc3QgZGF0ZSBzdXBwb3J0ZWQgYnkgRmlyZXN0b3JlIHRpbWVzdGFtcHMgKDAwMDEtMDEtMDFUMDA6MDA6MDBaKS5cbi8qKlxuICogQSBgVGltZXN0YW1wYCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yXG4gKiBjYWxlbmRhciwgcmVwcmVzZW50ZWQgYXMgc2Vjb25kcyBhbmQgZnJhY3Rpb25zIG9mIHNlY29uZHMgYXQgbmFub3NlY29uZFxuICogcmVzb2x1dGlvbiBpbiBVVEMgRXBvY2ggdGltZS5cbiAqXG4gKiBJdCBpcyBlbmNvZGVkIHVzaW5nIHRoZSBQcm9sZXB0aWMgR3JlZ29yaWFuIENhbGVuZGFyIHdoaWNoIGV4dGVuZHMgdGhlXG4gKiBHcmVnb3JpYW4gY2FsZW5kYXIgYmFja3dhcmRzIHRvIHllYXIgb25lLiBJdCBpcyBlbmNvZGVkIGFzc3VtaW5nIGFsbCBtaW51dGVzXG4gKiBhcmUgNjAgc2Vjb25kcyBsb25nLCBpLmUuIGxlYXAgc2Vjb25kcyBhcmUgXCJzbWVhcmVkXCIgc28gdGhhdCBubyBsZWFwIHNlY29uZFxuICogdGFibGUgaXMgbmVlZGVkIGZvciBpbnRlcnByZXRhdGlvbi4gUmFuZ2UgaXMgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICogOTk5OS0xMi0zMVQyMzo1OTo1OS45OTk5OTk5OTlaLlxuICpcbiAqIEZvciBleGFtcGxlcyBhbmQgZnVydGhlciBzcGVjaWZpY2F0aW9ucywgcmVmZXIgdG8gdGhlXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9wcm90b2J1Zi9ibG9iL21hc3Rlci9zcmMvZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcC5wcm90byB8IFRpbWVzdGFtcCBkZWZpbml0aW9ufS5cbiAqL1xuY2xhc3MgVGltZXN0YW1wIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICAgICAqICAgICA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIG5hbm9zZWNvbmRzIC0gVGhlIG5vbi1uZWdhdGl2ZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZFxuICAgICAqICAgICByZXNvbHV0aW9uLiBOZWdhdGl2ZSBzZWNvbmQgdmFsdWVzIHdpdGggZnJhY3Rpb25zIG11c3Qgc3RpbGwgaGF2ZVxuICAgICAqICAgICBub24tbmVnYXRpdmUgbmFub3NlY29uZHMgdmFsdWVzIHRoYXQgY291bnQgZm9yd2FyZCBpbiB0aW1lLiBNdXN0IGJlXG4gICAgICogICAgIGZyb20gMCB0byA5OTksOTk5LDk5OSBpbmNsdXNpdmUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uKlxuICAgICAqL1xuICAgIHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9IGUsIHRoaXMubmFub3NlY29uZHMgPSB0LCB0IDwgMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICBpZiAodCA+PSAxZTkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICAgICAgaWYgKGUgPCAtNjIxMzU1OTY4MDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICAvLyBUaGlzIHdpbGwgYnJlYWsgaW4gdGhlIHllYXIgMTAsMDAwLlxuICAgICAgICAgICAgICAgIGlmIChlID49IDI1MzQwMjMwMDgwMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIHdpdGggdGhlIGN1cnJlbnQgZGF0ZSwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIG5ldyB0aW1lc3RhbXAgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBub3coKSB7XG4gICAgICAgIHJldHVybiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gaW5pdGlhbGl6ZSB0aGUgYFRpbWVzdGFtcGAgZnJvbS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIGZyb21EYXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIFRpbWVzdGFtcC5mcm9tTWlsbGlzKGUuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWxsaXNlY29uZHMgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tTWlsbGlzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IE1hdGguZmxvb3IoZSAvIDFlMyksIG4gPSBNYXRoLmZsb29yKDFlNiAqIChlIC0gMWUzICogdCkpO1xuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcCh0LCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdC4gVGhpcyBjb252ZXJzaW9uXG4gICAgICogY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24gc2luY2UgYERhdGVgIG9iamVjdHMgb25seSBzdXBwb3J0IG1pbGxpc2Vjb25kXG4gICAgICogcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzXG4gICAgICogICAgIHRoaXMgYFRpbWVzdGFtcGAsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqLyAgICB0b0RhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnRvTWlsbGlzKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgbnVtZXJpYyB0aW1lc3RhbXAgKGluIG1pbGxpc2Vjb25kcyBzaW5jZVxuICAgICAqIGVwb2NoKS4gVGhpcyBvcGVyYXRpb24gY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcG9pbnQgaW4gdGltZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgdGltZXN0YW1wLCByZXByZXNlbnRlZCBhc1xuICAgICAqICAgICB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqLyAgICB0b01pbGxpcygpIHtcbiAgICAgICAgcmV0dXJuIDFlMyAqIHRoaXMuc2Vjb25kcyArIHRoaXMubmFub3NlY29uZHMgLyAxZTY7XG4gICAgfVxuICAgIF9jb21wYXJlVG8oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRzID09PSBlLnNlY29uZHMgPyBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLm5hbm9zZWNvbmRzLCBlLm5hbm9zZWNvbmRzKSA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuc2Vjb25kcywgZS5zZWNvbmRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgVGltZXN0YW1wYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZS5zZWNvbmRzID09PSB0aGlzLnNlY29uZHMgJiYgZS5uYW5vc2Vjb25kcyA9PT0gdGhpcy5uYW5vc2Vjb25kcztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB0ZXh0dWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJUaW1lc3RhbXAoc2Vjb25kcz1cIiArIHRoaXMuc2Vjb25kcyArIFwiLCBuYW5vc2Vjb25kcz1cIiArIHRoaXMubmFub3NlY29uZHMgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiB0aGlzLnNlY29uZHMsXG4gICAgICAgICAgICBuYW5vc2Vjb25kczogdGhpcy5uYW5vc2Vjb25kc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIG9iamVjdCB0byBhIHByaW1pdGl2ZSBzdHJpbmcsIHdoaWNoIGFsbG93cyBgVGltZXN0YW1wYCBvYmplY3RzXG4gICAgICogdG8gYmUgY29tcGFyZWQgdXNpbmcgdGhlIGA+YCwgYDw9YCwgYD49YCBhbmQgYD5gIG9wZXJhdG9ycy5cbiAgICAgKi8gICAgdmFsdWVPZigpIHtcbiAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHN0cmluZyBvZiB0aGUgZm9ybSA8c2Vjb25kcz4uPG5hbm9zZWNvbmRzPiB3aGVyZVxuICAgICAgICAvLyA8c2Vjb25kcz4gaXMgdHJhbnNsYXRlZCB0byBoYXZlIGEgbm9uLW5lZ2F0aXZlIHZhbHVlIGFuZCBib3RoIDxzZWNvbmRzPlxuICAgICAgICAvLyBhbmQgPG5hbm9zZWNvbmRzPiBhcmUgbGVmdC1wYWRkZWQgd2l0aCB6ZXJvZXMgdG8gYmUgYSBjb25zaXN0ZW50IGxlbmd0aC5cbiAgICAgICAgLy8gU3RyaW5ncyB3aXRoIHRoaXMgZm9ybWF0IHRoZW4gaGF2ZSBhIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nIHRoYXQgbWF0Y2hlc1xuICAgICAgICAvLyB0aGUgZXhwZWN0ZWQgb3JkZXJpbmcuIFRoZSA8c2Vjb25kcz4gdHJhbnNsYXRpb24gaXMgZG9uZSB0byBhdm9pZCBoYXZpbmdcbiAgICAgICAgLy8gYSBsZWFkaW5nIG5lZ2F0aXZlIHNpZ24gKGkuZS4gYSBsZWFkaW5nICctJyBjaGFyYWN0ZXIpIGluIGl0cyBzdHJpbmdcbiAgICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdoaWNoIHdvdWxkIGFmZmVjdCBpdHMgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNlY29uZHMgLSAtNjIxMzU1OTY4MDA7XG4gICAgICAgIC8vIE5vdGU6IFVwIHRvIDEyIGRlY2ltYWwgZGlnaXRzIGFyZSByZXF1aXJlZCB0byByZXByZXNlbnQgYWxsIHZhbGlkXG4gICAgICAgIC8vICdzZWNvbmRzJyB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhlKS5wYWRTdGFydCgxMiwgXCIwXCIpICsgXCIuXCIgKyBTdHJpbmcodGhpcy5uYW5vc2Vjb25kcykucGFkU3RhcnQoOSwgXCIwXCIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB2ZXJzaW9uIG9mIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSB2ZXJzaW9uXG4gKiB0aW1lc3RhbXAsIHN1Y2ggYXMgdXBkYXRlX3RpbWUgb3IgcmVhZF90aW1lLlxuICovIGNsYXNzIFNuYXBzaG90VmVyc2lvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVGltZXN0YW1wKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTbmFwc2hvdFZlcnNpb24oZSk7XG4gICAgfVxuICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKG5ldyBUaW1lc3RhbXAoMCwgMCkpO1xuICAgIH1cbiAgICBzdGF0aWMgbWF4KCkge1xuICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90VmVyc2lvbihuZXcgVGltZXN0YW1wKDI1MzQwMjMwMDc5OSwgOTk5OTk5OTk5KSk7XG4gICAgfVxuICAgIGNvbXBhcmVUbyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKGUudGltZXN0YW1wKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5pc0VxdWFsKGUudGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlcnNpb24gZm9yIHVzZSBpbiBzcGVjIHRlc3RzLiAqLyAgICB0b01pY3Jvc2Vjb25kcygpIHtcbiAgICAgICAgLy8gQ29udmVydCB0byBtaWNyb3NlY29uZHMuXG4gICAgICAgIHJldHVybiAxZTYgKiB0aGlzLnRpbWVzdGFtcC5zZWNvbmRzICsgdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMgLyAxZTM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJTbmFwc2hvdFZlcnNpb24oXCIgKyB0aGlzLnRpbWVzdGFtcC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIHRvVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQYXRoIHJlcHJlc2VudHMgYW4gb3JkZXJlZCBzZXF1ZW5jZSBvZiBzdHJpbmcgc2VnbWVudHMuXG4gKi9cbmNsYXNzIEJhc2VQYXRoIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gdCA/IHQgPSAwIDogdCA+IGUubGVuZ3RoICYmIGZhaWwoKSwgdm9pZCAwID09PSBuID8gbiA9IGUubGVuZ3RoIC0gdCA6IG4gPiBlLmxlbmd0aCAtIHQgJiYgZmFpbCgpLCBcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IGUsIHRoaXMub2Zmc2V0ID0gdCwgdGhpcy5sZW4gPSBuO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZW47XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gMCA9PT0gQmFzZVBhdGguY29tcGFyYXRvcih0aGlzLCBlKTtcbiAgICB9XG4gICAgY2hpbGQoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBCYXNlUGF0aCA/IGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZSk7XG4gICAgICAgIH0pKSA6IHQucHVzaChlKSwgdGhpcy5jb25zdHJ1Y3QodCk7XG4gICAgfVxuICAgIC8qKiBUaGUgaW5kZXggb2Ygb25lIHBhc3QgdGhlIGxhc3Qgc2VnbWVudCBvZiB0aGUgcGF0aC4gKi8gICAgbGltaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldCArIHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBwb3BGaXJzdChlKSB7XG4gICAgICAgIHJldHVybiBlID0gdm9pZCAwID09PSBlID8gMSA6IGUsIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0ICsgZSwgdGhpcy5sZW5ndGggLSBlKTtcbiAgICB9XG4gICAgcG9wTGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBmaXJzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0XTtcbiAgICB9XG4gICAgbGFzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldCArIGVdO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIGlzUHJlZml4T2YoZSkge1xuICAgICAgICBpZiAoZS5sZW5ndGggPCB0aGlzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMubGVuZ3RoOyB0KyspIGlmICh0aGlzLmdldCh0KSAhPT0gZS5nZXQodCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpc0ltbWVkaWF0ZVBhcmVudE9mKGUpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoICsgMSAhPT0gZS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLmxlbmd0aDsgdCsrKSBpZiAodGhpcy5nZXQodCkgIT09IGUuZ2V0KHQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIGZvciAobGV0IHQgPSB0aGlzLm9mZnNldCwgbiA9IHRoaXMubGltaXQoKTsgdCA8IG47IHQrKykgZSh0aGlzLnNlZ21lbnRzW3RdKTtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IE1hdGgubWluKGUubGVuZ3RoLCB0Lmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgbjsgcisrKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5nZXQociksIGkgPSB0LmdldChyKTtcbiAgICAgICAgICAgIGlmIChuIDwgaSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKG4gPiBpKSByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZS5sZW5ndGggPCB0Lmxlbmd0aCA/IC0xIDogZS5sZW5ndGggPiB0Lmxlbmd0aCA/IDEgOiAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIHNsYXNoLXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHJlc291cmNlcyAoZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucylcbiAqIHdpdGhpbiBGaXJlc3RvcmUuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgUmVzb3VyY2VQYXRoIGV4dGVuZHMgQmFzZVBhdGgge1xuICAgIGNvbnN0cnVjdChlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKGUsIHQsIG4pO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcmVzb3VyY2UgcGF0aCBmcm9tIHRoZSBnaXZlbiBzbGFzaC1kZWxpbWl0ZWQgc3RyaW5nLiBJZiBtdWx0aXBsZVxuICAgICAqIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQsIGFsbCBjb21wb25lbnRzIGFyZSBjb21iaW5lZC4gTGVhZGluZyBhbmQgdHJhaWxpbmdcbiAgICAgKiBzbGFzaGVzIGZyb20gYWxsIGNvbXBvbmVudHMgYXJlIGlnbm9yZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU3RyaW5nKC4uLmUpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZSkge1xuICAgICAgICAgICAgaWYgKG4uaW5kZXhPZihcIi8vXCIpID49IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHNlZ21lbnQgKCR7bn0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluIC8vIGluIHRoZW0uYCk7XG4gICAgICAgICAgICAvLyBTdHJpcCBsZWFkaW5nIGFuZCB0cmFsaW5nIHNsYXNoZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICB0LnB1c2goLi4ubi5zcGxpdChcIi9cIikuZmlsdGVyKChlID0+IGUubGVuZ3RoID4gMCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aCh0KTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoW10pO1xuICAgIH1cbn1cblxuY29uc3QgQyA9IC9eW19hLXpBLVpdW19hLXpBLVowLTldKiQvO1xuXG4vKipcbiAqIEEgZG90LXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHN1Yi1vYmplY3RzIHdpdGhpbiBhIGRvY3VtZW50LlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgRmllbGRQYXRoJDEgZXh0ZW5kcyBCYXNlUGF0aCB7XG4gICAgY29uc3RydWN0KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgkMShlLCB0LCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJpbmcgY291bGQgYmUgdXNlZCBhcyBhIHNlZ21lbnQgaW4gYSBmaWVsZCBwYXRoXG4gICAgICogd2l0aG91dCBlc2NhcGluZy5cbiAgICAgKi8gICAgc3RhdGljIGlzVmFsaWRJZGVudGlmaWVyKGUpIHtcbiAgICAgICAgcmV0dXJuIEMudGVzdChlKTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkubWFwKChlID0+IChlID0gZS5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXFxcXFxcIikucmVwbGFjZSgvYC9nLCBcIlxcXFxgXCIpLCBcbiAgICAgICAgRmllbGRQYXRoJDEuaXNWYWxpZElkZW50aWZpZXIoZSkgfHwgKGUgPSBcImBcIiArIGUgKyBcImBcIiksIGUpKSkuam9pbihcIi5cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmllbGQgcmVmZXJlbmNlcyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIGlzS2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiAxID09PSB0aGlzLmxlbmd0aCAmJiBcIl9fbmFtZV9fXCIgPT09IHRoaXMuZ2V0KDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGQgZGVzaWduYXRpbmcgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBzdGF0aWMga2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoJDEoWyBcIl9fbmFtZV9fXCIgXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGZpZWxkIHN0cmluZyBmcm9tIHRoZSBnaXZlbiBzZXJ2ZXItZm9ybWF0dGVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqIC0gU3BsaXR0aW5nIHRoZSBlbXB0eSBzdHJpbmcgaXMgbm90IGFsbG93ZWQgKGZvciBub3cgYXQgbGVhc3QpLlxuICAgICAqIC0gRW1wdHkgc2VnbWVudHMgd2l0aGluIHRoZSBzdHJpbmcgKGUuZy4gaWYgdGhlcmUgYXJlIHR3byBjb25zZWN1dGl2ZVxuICAgICAqICAgc2VwYXJhdG9ycykgYXJlIG5vdCBhbGxvd2VkLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM3MjQ0MTU3KTogd2Ugc2hvdWxkIG1ha2UgdGhpcyBtb3JlIHN0cmljdC4gUmlnaHQgbm93LCBpdCBhbGxvd3NcbiAgICAgKiBub24taWRlbnRpZmllciBwYXRoIGNvbXBvbmVudHMsIGV2ZW4gaWYgdGhleSBhcmVuJ3QgZXNjYXBlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TZXJ2ZXJGb3JtYXQoZSkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBuID0gXCJcIiwgciA9IDA7XG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9hZGRDdXJyZW50U2VnbWVudCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICgwID09PSBuLmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgKTtcbiAgICAgICAgICAgIHQucHVzaChuKSwgbiA9IFwiXCI7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBpID0gITE7XG4gICAgICAgIGZvciAoO3IgPCBlLmxlbmd0aDsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZVtyXTtcbiAgICAgICAgICAgIGlmIChcIlxcXFxcIiA9PT0gdCkge1xuICAgICAgICAgICAgICAgIGlmIChyICsgMSA9PT0gZS5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgdHJhaWxpbmcgZXNjYXBlIGNoYXJhY3RlcjogXCIgKyBlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZVtyICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKFwiXFxcXFwiICE9PSB0ICYmIFwiLlwiICE9PSB0ICYmIFwiYFwiICE9PSB0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIGludmFsaWQgZXNjYXBlIHNlcXVlbmNlOiBcIiArIGUpO1xuICAgICAgICAgICAgICAgIG4gKz0gdCwgciArPSAyO1xuICAgICAgICAgICAgfSBlbHNlIFwiYFwiID09PSB0ID8gKGkgPSAhaSwgcisrKSA6IFwiLlwiICE9PSB0IHx8IGkgPyAobiArPSB0LCByKyspIDogKF9fUFJJVkFURV9hZGRDdXJyZW50U2VnbWVudCgpLCBcbiAgICAgICAgICAgIHIrKyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9fUFJJVkFURV9hZGRDdXJyZW50U2VnbWVudCgpLCBpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlVudGVybWluYXRlZCBgIGluIHBhdGg6IFwiICsgZSk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoJDEodCk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoJDEoW10pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgRG9jdW1lbnRLZXkge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21QYXRoKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhlKSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTmFtZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZSkucG9wRmlyc3QoNSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpKTtcbiAgICB9XG4gICAgZ2V0IGNvbGxlY3Rpb25Hcm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5wb3BMYXN0KCkubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgaXMgaW4gdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uSWQuICovICAgIGhhc0NvbGxlY3Rpb25JZChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgubGVuZ3RoID49IDIgJiYgdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMikgPT09IGU7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBjb2xsZWN0aW9uIGdyb3VwIChpLmUuIHRoZSBuYW1lIG9mIHRoZSBwYXJlbnQgY29sbGVjdGlvbikgZm9yIHRoaXMga2V5LiAqLyAgICBnZXRDb2xsZWN0aW9uR3JvdXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGZ1bGx5IHF1YWxpZmllZCBwYXRoIHRvIHRoZSBwYXJlbnQgY29sbGVjdGlvbi4gKi8gICAgZ2V0Q29sbGVjdGlvblBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgucG9wTGFzdCgpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgMCA9PT0gUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IodGhpcy5wYXRoLCBlLnBhdGgpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC50b1N0cmluZygpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBSZXNvdXJjZVBhdGguY29tcGFyYXRvcihlLnBhdGgsIHQucGF0aCk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0RvY3VtZW50S2V5KGUpIHtcbiAgICAgICAgcmV0dXJuIGUubGVuZ3RoICUgMiA9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGRvY3VtZW50IGtleSB3aXRoIHRoZSBnaXZlbiBzZWdtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWdtZW50cyAtIFRoZSBzZWdtZW50cyBvZiB0aGUgcGF0aCB0byB0aGUgZG9jdW1lbnRcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlZ21lbnRzKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShuZXcgUmVzb3VyY2VQYXRoKGUuc2xpY2UoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIGluaXRpYWwgbXV0YXRpb24gYmF0Y2ggaWQgZm9yIGVhY2ggaW5kZXguIEdldHMgdXBkYXRlZCBkdXJpbmcgaW5kZXhcbiAqIGJhY2tmaWxsLlxuICovXG4vKipcbiAqIEFuIGluZGV4IGRlZmluaXRpb24gZm9yIGZpZWxkIGluZGV4ZXMgaW4gRmlyZXN0b3JlLlxuICpcbiAqIEV2ZXJ5IGluZGV4IGlzIGFzc29jaWF0ZWQgd2l0aCBhIGNvbGxlY3Rpb24uIFRoZSBkZWZpbml0aW9uIGNvbnRhaW5zIGEgbGlzdFxuICogb2YgZmllbGRzIGFuZCB0aGVpciBpbmRleCBraW5kICh3aGljaCBjYW4gYmUgYEFTQ0VORElOR2AsIGBERVNDRU5ESU5HYCBvclxuICogYENPTlRBSU5TYCBmb3IgQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55IHF1ZXJpZXMpLlxuICpcbiAqIFVubGlrZSB0aGUgYmFja2VuZCwgdGhlIFNESyBkb2VzIG5vdCBkaWZmZXJlbnRpYXRlIGJldHdlZW4gY29sbGVjdGlvbiBvclxuICogY29sbGVjdGlvbiBncm91cC1zY29wZWQgaW5kaWNlcy4gRXZlcnkgaW5kZXggY2FuIGJlIHVzZWQgZm9yIGJvdGggc2luZ2xlXG4gKiBjb2xsZWN0aW9uIGFuZCBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJpZXMuXG4gKi9cbmNsYXNzIEZpZWxkSW5kZXgge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBJRC4gUmV0dXJucyAtMSBpZiB0aGUgaW5kZXggSUQgaXMgbm90IGF2YWlsYWJsZSAoZS5nLiB0aGUgaW5kZXhcbiAgICAgKiBoYXMgbm90IHlldCBiZWVuIHBlcnNpc3RlZCkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBjb2xsZWN0aW9uIElEIHRoaXMgaW5kZXggYXBwbGllcyB0by4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGZpZWxkIHNlZ21lbnRzIGZvciB0aGlzIGluZGV4LiAqL1xuICAgIG4sIFxuICAgIC8qKiBTaG93cyBob3cgdXAtdG8tZGF0ZSB0aGUgaW5kZXggaXMgZm9yIHRoZSBjdXJyZW50IHVzZXIuICovXG4gICAgcikge1xuICAgICAgICB0aGlzLmluZGV4SWQgPSBlLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IHQsIHRoaXMuZmllbGRzID0gbiwgdGhpcy5pbmRleFN0YXRlID0gcjtcbiAgICB9XG59XG5cbi8qKiBBbiBJRCBmb3IgYW4gaW5kZXggdGhhdCBoYXMgbm90IHlldCBiZWVuIGFkZGVkIHRvIHBlcnNpc3RlbmNlLiAgKi9cbi8qKiBSZXR1cm5zIHRoZSBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgc2VnbWVudCBmb3IgdGhpcyBpbmRleC4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEluZGV4R2V0QXJyYXlTZWdtZW50KGUpIHtcbiAgICByZXR1cm4gZS5maWVsZHMuZmluZCgoZSA9PiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyA9PT0gZS5raW5kKSk7XG59XG5cbi8qKiBSZXR1cm5zIGFsbCBkaXJlY3Rpb25hbCAoYXNjZW5kaW5nL2Rlc2NlbmRpbmcpIHNlZ21lbnRzIGZvciB0aGlzIGluZGV4LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSkge1xuICAgIHJldHVybiBlLmZpZWxkcy5maWx0ZXIoKGUgPT4gMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8gIT09IGUua2luZCkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIG9yZGVyIG9mIHRoZSBkb2N1bWVudCBrZXkgY29tcG9uZW50IGZvciB0aGUgZ2l2ZW4gaW5kZXguXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgV2ViIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBDb21wYXJlcyBpbmRleGVzIGJ5IGNvbGxlY3Rpb24gZ3JvdXAgYW5kIHNlZ21lbnRzLiBJZ25vcmVzIHVwZGF0ZSB0aW1lIGFuZFxuICogaW5kZXggSUQuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEluZGV4U2VtYW50aWNDb21wYXJhdG9yKGUsIHQpIHtcbiAgICBsZXQgbiA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuY29sbGVjdGlvbkdyb3VwLCB0LmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgaWYgKDAgIT09IG4pIHJldHVybiBuO1xuICAgIGZvciAobGV0IHIgPSAwOyByIDwgTWF0aC5taW4oZS5maWVsZHMubGVuZ3RoLCB0LmZpZWxkcy5sZW5ndGgpOyArK3IpIGlmIChuID0gX19QUklWQVRFX2luZGV4U2VnbWVudENvbXBhcmF0b3IoZS5maWVsZHNbcl0sIHQuZmllbGRzW3JdKSwgXG4gICAgMCAhPT0gbikgcmV0dXJuIG47XG4gICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuZmllbGRzLmxlbmd0aCwgdC5maWVsZHMubGVuZ3RoKTtcbn1cblxuLyoqIFJldHVybnMgYSBkZWJ1ZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZmllbGQgaW5kZXggKi8gRmllbGRJbmRleC5VTktOT1dOX0lEID0gLTE7XG5cbi8qKiBBbiBpbmRleCBjb21wb25lbnQgY29uc2lzdGluZyBvZiBmaWVsZCBwYXRoIGFuZCBpbmRleCB0eXBlLiAgKi9cbmNsYXNzIEluZGV4U2VnbWVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBmaWVsZCBwYXRoIG9mIHRoZSBjb21wb25lbnQuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBmaWVsZHMgc29ydGluZyBvcmRlci4gKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMuZmllbGRQYXRoID0gZSwgdGhpcy5raW5kID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleFNlZ21lbnRDb21wYXJhdG9yKGUsIHQpIHtcbiAgICBjb25zdCBuID0gRmllbGRQYXRoJDEuY29tcGFyYXRvcihlLmZpZWxkUGF0aCwgdC5maWVsZFBhdGgpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUua2luZCwgdC5raW5kKTtcbn1cblxuLyoqXG4gKiBTdG9yZXMgdGhlIFwiaGlnaCB3YXRlciBtYXJrXCIgdGhhdCBpbmRpY2F0ZXMgaG93IHVwZGF0ZWQgdGhlIEluZGV4IGlzIGZvciB0aGVcbiAqIGN1cnJlbnQgdXNlci5cbiAqLyBjbGFzcyBJbmRleFN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hlbiB0aGUgaW5kZXggd2FzIGxhc3QgdXBkYXRlZCAocmVsYXRpdmUgdG8gb3RoZXIgaW5kZXhlcykuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSB0aGUgbGF0ZXN0IGluZGV4ZWQgcmVhZCB0aW1lLCBkb2N1bWVudCBhbmQgYmF0Y2ggaWQuICovXG4gICAgdCkge1xuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gZSwgdGhpcy5vZmZzZXQgPSB0O1xuICAgIH1cbiAgICAvKiogVGhlIHN0YXRlIG9mIGFuIGluZGV4IHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBiYWNrZmlsbGVkLiAqLyAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhTdGF0ZSgwLCBJbmRleE9mZnNldC5taW4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gb2Zmc2V0IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIHdpdGggYSByZWFkIHRpbWUgaGlnaGVyIHRoYW5cbiAqIGByZWFkVGltZWAuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld0luZGV4T2Zmc2V0U3VjY2Vzc29yRnJvbVJlYWRUaW1lKGUsIHQpIHtcbiAgICAvLyBXZSB3YW50IHRvIGNyZWF0ZSBhbiBvZmZzZXQgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgd2l0aCBhIHJlYWQgdGltZVxuICAgIC8vIGdyZWF0ZXIgdGhhbiB0aGUgcHJvdmlkZWQgcmVhZCB0aW1lLiBUbyBkbyBzbywgd2UgdGVjaG5pY2FsbHkgbmVlZCB0b1xuICAgIC8vIGNyZWF0ZSBhbiBvZmZzZXQgZm9yIGAocmVhZFRpbWUsIE1BWF9ET0NVTUVOVF9LRVkpYC4gV2hpbGUgd2UgY291bGQgdXNlXG4gICAgLy8gVW5pY29kZSBjb2RlcG9pbnRzIHRvIGdlbmVyYXRlIE1BWF9ET0NVTUVOVF9LRVksIGl0IGlzIG11Y2ggZWFzaWVyIHRvIHVzZVxuICAgIC8vIGAocmVhZFRpbWUgKyAxLCBEb2N1bWVudEtleS5lbXB0eSgpKWAgc2luY2UgYD4gRG9jdW1lbnRLZXkuZW1wdHkoKWAgbWF0Y2hlc1xuICAgIC8vIGFsbCB2YWxpZCBkb2N1bWVudCBJRHMuXG4gICAgY29uc3QgbiA9IGUudG9UaW1lc3RhbXAoKS5zZWNvbmRzLCByID0gZS50b1RpbWVzdGFtcCgpLm5hbm9zZWNvbmRzICsgMSwgaSA9IFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKDFlOSA9PT0gciA/IG5ldyBUaW1lc3RhbXAobiArIDEsIDApIDogbmV3IFRpbWVzdGFtcChuLCByKSk7XG4gICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldChpLCBEb2N1bWVudEtleS5lbXB0eSgpLCB0KTtcbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgb2Zmc2V0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld0luZGV4T2Zmc2V0RnJvbURvY3VtZW50KGUpIHtcbiAgICByZXR1cm4gbmV3IEluZGV4T2Zmc2V0KGUucmVhZFRpbWUsIGUua2V5LCAtMSk7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBsYXRlc3QgcmVhZCB0aW1lLCBkb2N1bWVudCBhbmQgYmF0Y2ggSUQgdGhhdCB3ZXJlIHByb2Nlc3NlZCBmb3IgYW5cbiAqIGluZGV4LlxuICovIGNsYXNzIEluZGV4T2Zmc2V0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbGF0ZXN0IHJlYWQgdGltZSB2ZXJzaW9uIHRoYXQgaGFzIGJlZW4gaW5kZXhlZCBieSBGaXJlc3RvcmUgZm9yIHRoaXNcbiAgICAgKiBmaWVsZCBpbmRleC5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUga2V5IG9mIHRoZSBsYXN0IGRvY3VtZW50IHRoYXQgd2FzIGluZGV4ZWQgZm9yIHRoaXMgcXVlcnkuIFVzZVxuICAgICAqIGBEb2N1bWVudEtleS5lbXB0eSgpYCBpZiBubyBkb2N1bWVudCBoYXMgYmVlbiBpbmRleGVkLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qXG4gICAgICogVGhlIGxhcmdlc3QgbXV0YXRpb24gYmF0Y2ggaWQgdGhhdCdzIGJlZW4gcHJvY2Vzc2VkIGJ5IEZpcmVzdG9yZS5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSBlLCB0aGlzLmRvY3VtZW50S2V5ID0gdCwgdGhpcy5sYXJnZXN0QmF0Y2hJZCA9IG47XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFuIG9mZnNldCB0aGF0IHNvcnRzIGJlZm9yZSBhbGwgcmVndWxhciBvZmZzZXRzLiAqLyAgICBzdGF0aWMgbWluKCkge1xuICAgICAgICByZXR1cm4gbmV3IEluZGV4T2Zmc2V0KFNuYXBzaG90VmVyc2lvbi5taW4oKSwgRG9jdW1lbnRLZXkuZW1wdHkoKSwgLTEpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbiBvZmZzZXQgdGhhdCBzb3J0cyBhZnRlciBhbGwgcmVndWxhciBvZmZzZXRzLiAqLyAgICBzdGF0aWMgbWF4KCkge1xuICAgICAgICByZXR1cm4gbmV3IEluZGV4T2Zmc2V0KFNuYXBzaG90VmVyc2lvbi5tYXgoKSwgRG9jdW1lbnRLZXkuZW1wdHkoKSwgLTEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2luZGV4T2Zmc2V0Q29tcGFyYXRvcihlLCB0KSB7XG4gICAgbGV0IG4gPSBlLnJlYWRUaW1lLmNvbXBhcmVUbyh0LnJlYWRUaW1lKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiAobiA9IERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZS5kb2N1bWVudEtleSwgdC5kb2N1bWVudEtleSksIFxuICAgIDAgIT09IG4gPyBuIDogX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5sYXJnZXN0QmF0Y2hJZCwgdC5sYXJnZXN0QmF0Y2hJZCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB2ID0gXCJUaGUgY3VycmVudCB0YWIgaXMgbm90IGluIHRoZSByZXF1aXJlZCBzdGF0ZSB0byBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uLiBJdCBtaWdodCBiZSBuZWNlc3NhcnkgdG8gcmVmcmVzaCB0aGUgYnJvd3NlciB0YWIuXCI7XG5cbi8qKlxuICogQSBiYXNlIGNsYXNzIHJlcHJlc2VudGluZyBhIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLCBlbmNhcHN1bGF0aW5nIGJvdGggdGhlXG4gKiB0cmFuc2FjdGlvbidzIHNlcXVlbmNlIG51bWJlcnMgYXMgd2VsbCBhcyBhIGxpc3Qgb2Ygb25Db21taXR0ZWQgbGlzdGVuZXJzLlxuICpcbiAqIFdoZW4geW91IGNhbGwgUGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oKSwgaXQgd2lsbCBjcmVhdGUgYSB0cmFuc2FjdGlvbiBhbmRcbiAqIHBhc3MgaXQgdG8geW91ciBjYWxsYmFjay4gWW91IHRoZW4gcGFzcyBpdCB0byBhbnkgbWV0aG9kIHRoYXQgb3BlcmF0ZXNcbiAqIG9uIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIGFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoZSkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2goZSk7XG4gICAgfVxuICAgIHJhaXNlT25Db21taXR0ZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKChlID0+IGUoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVmVyaWZpZXMgdGhlIGVycm9yIHRocm93biBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLiBJZiBhIExvY2FsU3RvcmVcbiAqIG9wZXJhdGlvbiBmYWlscyBiZWNhdXNlIHRoZSBwcmltYXJ5IGxlYXNlIGhhcyBiZWVuIHRha2VuIGJ5IGFub3RoZXIgY2xpZW50LFxuICogd2UgaWdub3JlIHRoZSBlcnJvciAodGhlIHBlcnNpc3RlbmNlIGxheWVyIHdpbGwgaW1tZWRpYXRlbHkgY2FsbFxuICogYGFwcGx5UHJpbWFyeUxlYXNlYCB0byBwcm9wYWdhdGUgdGhlIHByaW1hcnkgc3RhdGUgY2hhbmdlKS4gQWxsIG90aGVyIGVycm9yc1xuICogYXJlIHJlLXRocm93bi5cbiAqXG4gKiBAcGFyYW0gZXJyIC0gQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHdlIHJlY292ZXJlZCwgb3IgdGhlIG9yaWdpbmFsIGVycm9yLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSkge1xuICAgIGlmIChlLmNvZGUgIT09IEQuRkFJTEVEX1BSRUNPTkRJVElPTiB8fCBlLm1lc3NhZ2UgIT09IHYpIHRocm93IGU7XG4gICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTG9jYWxTdG9yZVwiLCBcIlVuZXhwZWN0ZWRseSBsb3N0IHByaW1hcnkgbGVhc2VcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBlcnNpc3RlbmNlUHJvbWlzZSBpcyBlc3NlbnRpYWxseSBhIHJlLWltcGxlbWVudGF0aW9uIG9mIFByb21pc2UgZXhjZXB0XG4gKiBpdCBoYXMgYSAubmV4dCgpIG1ldGhvZCBpbnN0ZWFkIG9mIC50aGVuKCkgYW5kIC5uZXh0KCkgYW5kIC5jYXRjaCgpIGNhbGxiYWNrc1xuICogYXJlIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSByZXNvbHZlcyByYXRoZXIgdGhhblxuICogYXN5bmNocm9ub3VzbHkgKFByb21pc2UgaW1wbGVtZW50YXRpb25zIHVzZSBzZXRJbW1lZGlhdGUoKSBvciBzaW1pbGFyKS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBpbnRlcm9wZXJhdGUgd2l0aCBJbmRleGVkREIgd2hpY2ggd2lsbCBhdXRvbWF0aWNhbGx5XG4gKiBjb21taXQgdHJhbnNhY3Rpb25zIGlmIGNvbnRyb2wgaXMgcmV0dXJuZWQgdG8gdGhlIGV2ZW50IGxvb3Agd2l0aG91dFxuICogc3luY2hyb25vdXNseSBpbml0aWF0aW5nIGFub3RoZXIgb3BlcmF0aW9uIG9uIHRoZSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBOT1RFOiAudGhlbigpIGFuZCAuY2F0Y2goKSBvbmx5IGFsbG93IGEgc2luZ2xlIGNvbnN1bWVyLCB1bmxpa2Ugbm9ybWFsXG4gKiBQcm9taXNlcy5cbiAqLyBjbGFzcyBQZXJzaXN0ZW5jZVByb21pc2Uge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgLy8gTk9URTogbmV4dC9jYXRjaENhbGxiYWNrIHdpbGwgYWx3YXlzIHBvaW50IHRvIG91ciBvd24gd3JhcHBlciBmdW5jdGlvbnMsXG4gICAgICAgIC8vIG5vdCB0aGUgdXNlcidzIHJhdyBuZXh0KCkgb3IgY2F0Y2goKSBjYWxsYmFja3MuXG4gICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gbnVsbCwgdGhpcy5jYXRjaENhbGxiYWNrID0gbnVsbCwgXG4gICAgICAgIC8vIFdoZW4gdGhlIG9wZXJhdGlvbiByZXNvbHZlcywgd2UnbGwgc2V0IHJlc3VsdCBvciBlcnJvciBhbmQgbWFyayBpc0RvbmUuXG4gICAgICAgIHRoaXMucmVzdWx0ID0gdm9pZCAwLCB0aGlzLmVycm9yID0gdm9pZCAwLCB0aGlzLmlzRG9uZSA9ICExLCBcbiAgICAgICAgLy8gU2V0IHRvIHRydWUgd2hlbiAudGhlbigpIG9yIC5jYXRjaCgpIGFyZSBjYWxsZWQgYW5kIHByZXZlbnRzIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gY2hhaW5pbmcuXG4gICAgICAgIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9ICExLCBlKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNEb25lID0gITAsIHRoaXMucmVzdWx0ID0gZSwgdGhpcy5uZXh0Q2FsbGJhY2sgJiYgXG4gICAgICAgICAgICAvLyB2YWx1ZSBzaG91bGQgYmUgZGVmaW5lZCB1bmxlc3MgVCBpcyBWb2lkLCBidXQgd2UgY2FuJ3QgZXhwcmVzc1xuICAgICAgICAgICAgLy8gdGhhdCBpbiB0aGUgdHlwZSBzeXN0ZW0uXG4gICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjayhlKTtcbiAgICAgICAgfSksIChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNEb25lID0gITAsIHRoaXMuZXJyb3IgPSBlLCB0aGlzLmNhdGNoQ2FsbGJhY2sgJiYgdGhpcy5jYXRjaENhbGxiYWNrKGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCh2b2lkIDAsIGUpO1xuICAgIH1cbiAgICBuZXh0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCAmJiBmYWlsKCksIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9ICEwLCB0aGlzLmlzRG9uZSA/IHRoaXMuZXJyb3IgPyB0aGlzLndyYXBGYWlsdXJlKHQsIHRoaXMuZXJyb3IpIDogdGhpcy53cmFwU3VjY2VzcyhlLCB0aGlzLnJlc3VsdCkgOiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBTdWNjZXNzKGUsIHQpLm5leHQobiwgcik7XG4gICAgICAgICAgICB9LCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBGYWlsdXJlKHQsIGUpLm5leHQobiwgcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0KGUsIHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHdyYXBVc2VyRnVuY3Rpb24oZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUoKTtcbiAgICAgICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgUGVyc2lzdGVuY2VQcm9taXNlID8gdCA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHQpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cmFwU3VjY2VzcyhlLCB0KSB7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiBlKHQpKSkgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0KTtcbiAgICB9XG4gICAgd3JhcEZhaWx1cmUoZSwgdCkge1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gZSh0KSkpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdCh0KTtcbiAgICB9XG4gICAgc3RhdGljIHJlc29sdmUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHQoZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHJlamVjdChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgbihlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgd2FpdEZvcihcbiAgICAvLyBBY2NlcHQgYWxsIFByb21pc2UgdHlwZXMgaW4gd2FpdEZvcigpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGxldCByID0gMCwgaSA9IDAsIHMgPSAhMTtcbiAgICAgICAgICAgIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgKytyLCBlLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgKytpLCBzICYmIGkgPT09IHIgJiYgdCgpO1xuICAgICAgICAgICAgICAgIH0pLCAoZSA9PiBuKGUpKSk7XG4gICAgICAgICAgICB9KSksIHMgPSAhMCwgaSA9PT0gciAmJiB0KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgcHJlZGljYXRlIGZ1bmN0aW9ucyB0aGF0IGFzeW5jaHJvbm91c2x5IGV2YWx1YXRlIHRvIGFcbiAgICAgKiBib29sZWFuLCBpbXBsZW1lbnRzIGEgc2hvcnQtY2lyY3VpdGluZyBgb3JgIGJldHdlZW4gdGhlIHJlc3VsdHMuIFByZWRpY2F0ZXNcbiAgICAgKiB3aWxsIGJlIGV2YWx1YXRlZCB1bnRpbCBvbmUgb2YgdGhlbSByZXR1cm5zIGB0cnVlYCwgdGhlbiBzdG9wLiBUaGUgZmluYWxcbiAgICAgKiByZXN1bHQgd2lsbCBiZSB3aGV0aGVyIGFueSBvZiB0aGVtIHJldHVybmVkIGB0cnVlYC5cbiAgICAgKi8gICAgc3RhdGljIG9yKGUpIHtcbiAgICAgICAgbGV0IHQgPSBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSghMSk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSB0ID0gdC5uZXh0KChlID0+IGUgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShlKSA6IG4oKSkpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgc3RhdGljIGZvckVhY2goZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKChlLCByKSA9PiB7XG4gICAgICAgICAgICBuLnB1c2godC5jYWxsKHRoaXMsIGUsIHIpKTtcbiAgICAgICAgfSkpLCB0aGlzLndhaXRGb3Iobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbmN1cnJlbnRseSBtYXAgYWxsIGFycmF5IGVsZW1lbnRzIHRocm91Z2ggYXN5bmNocm9ub3VzIGZ1bmN0aW9uLlxuICAgICAqLyAgICBzdGF0aWMgbWFwQXJyYXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBlLmxlbmd0aCwgcyA9IG5ldyBBcnJheShpKTtcbiAgICAgICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IF8gPSAwOyBfIDwgaTsgXysrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IF87XG4gICAgICAgICAgICAgICAgdChlW2FdKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc1thXSA9IGUsICsrbywgbyA9PT0gaSAmJiBuKHMpO1xuICAgICAgICAgICAgICAgIH0pLCAoZSA9PiByKGUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgdG8gcmVjdXJzaXZlIFBlcnNpc3RlbmNlUHJvbWlzZSBjYWxscywgdGhhdCBhdm9pZHNcbiAgICAgKiBwb3RlbnRpYWwgbWVtb3J5IHByb2JsZW1zIGZyb20gdW5ib3VuZGVkIGNoYWlucyBvZiBwcm9taXNlcy5cbiAgICAgKlxuICAgICAqIFRoZSBgYWN0aW9uYCB3aWxsIGJlIGNhbGxlZCByZXBlYXRlZGx5IHdoaWxlIGBjb25kaXRpb25gIGlzIHRydWUuXG4gICAgICovICAgIHN0YXRpYyBkb1doaWxlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICEwID09PSBlKCkgPyB0KCkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzKCk7XG4gICAgICAgICAgICAgICAgfSksIHIpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHByb2Nlc3MoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFJlZmVyZW5jZXMgdG8gYHdpbmRvd2AgYXJlIGd1YXJkZWQgYnkgU2ltcGxlRGIuaXNBdmFpbGFibGUoKVxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKipcbiAqIFdyYXBzIGFuIElEQlRyYW5zYWN0aW9uIGFuZCBleHBvc2VzIGEgc3RvcmUoKSBtZXRob2QgdG8gZ2V0IGEgaGFuZGxlIHRvIGFcbiAqIHNwZWNpZmljIG9iamVjdCBzdG9yZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1NpbXBsZURiVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSBlLCB0aGlzLnRyYW5zYWN0aW9uID0gdCwgdGhpcy5hYm9ydGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIEluZGV4ZWREYiB0cmFuc2FjdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubSA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIHRoaXMudHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubS5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25hYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgIHQuZXJyb3IgPyB0aGlzLm0ucmVqZWN0KG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlLCB0LmVycm9yKSkgOiB0aGlzLm0ucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcih0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB0aGlzLm0ucmVqZWN0KG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlLCBuKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBvcGVuKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpbXBsZURiVHJhbnNhY3Rpb24odCwgZS50cmFuc2FjdGlvbihyLCBuKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcih0LCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubS5wcm9taXNlO1xuICAgIH1cbiAgICBhYm9ydChlKSB7XG4gICAgICAgIGUgJiYgdGhpcy5tLnJlamVjdChlKSwgdGhpcy5hYm9ydGVkIHx8IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIkFib3J0aW5nIHRyYW5zYWN0aW9uOlwiLCBlID8gZS5tZXNzYWdlIDogXCJDbGllbnQtaW5pdGlhdGVkIGFib3J0XCIpLCBcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gITAsIHRoaXMudHJhbnNhY3Rpb24uYWJvcnQoKSk7XG4gICAgfVxuICAgIHAoKSB7XG4gICAgICAgIC8vIElmIHRoZSBicm93c2VyIHN1cHBvcnRzIFYzIEluZGV4ZWREQiwgd2UgaW52b2tlIGNvbW1pdCgpIGV4cGxpY2l0bHkgdG9cbiAgICAgICAgLy8gc3BlZWQgdXAgaW5kZXggREIgcHJvY2Vzc2luZyBpZiB0aGUgZXZlbnQgbG9vcCByZW1haW5zIGJsb2Nrcy5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudHJhbnNhY3Rpb247XG4gICAgICAgIHRoaXMuYWJvcnRlZCB8fCBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGUuY29tbWl0IHx8IGUuY29tbWl0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBTaW1wbGVEYlN0b3JlPEtleVR5cGUsIFZhbHVlVHlwZT4gZm9yIHRoZSBzcGVjaWZpZWQgc3RvcmUuIEFsbFxuICAgICAqIG9wZXJhdGlvbnMgcGVyZm9ybWVkIG9uIHRoZSBTaW1wbGVEYlN0b3JlIGhhcHBlbiB3aXRoaW4gdGhlIGNvbnRleHQgb2YgdGhpc1xuICAgICAqIHRyYW5zYWN0aW9uIGFuZCBpdCBjYW5ub3QgYmUgdXNlZCBhbnltb3JlIG9uY2UgdGhlIHRyYW5zYWN0aW9uIGlzXG4gICAgICogY29tcGxldGVkLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHdlIGNhbid0IGFjdHVhbGx5IGVuZm9yY2UgdGhhdCB0aGUgS2V5VHlwZSBhbmQgVmFsdWVUeXBlIGFyZVxuICAgICAqIGNvcnJlY3QsIGJ1dCB0aGV5IGFsbG93IHR5cGUgc2FmZXR5IHRocm91Z2ggdGhlIHJlc3Qgb2YgdGhlIGNvbnN1bWluZyBjb2RlLlxuICAgICAqLyAgICBzdG9yZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9TaW1wbGVEYlN0b3JlKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhIHdyYXBwZXIgYXJvdW5kIEluZGV4ZWREYiB3aXRoIGEgc2ltcGxpZmllZCBpbnRlcmZhY2UgdGhhdCB1c2VzXG4gKiBQcm9taXNlLWxpa2UgcmV0dXJuIHZhbHVlcyB0byBjaGFpbiBvcGVyYXRpb25zLiBSZWFsIHByb21pc2VzIGNhbm5vdCBiZSB1c2VkXG4gKiBzaW5jZSAudGhlbigpIGNvbnRpbnVhdGlvbnMgYXJlIGV4ZWN1dGVkIGFzeW5jaHJvbm91c2x5IChlLmcuIHZpYVxuICogLnNldEltbWVkaWF0ZSksIHdoaWNoIHdvdWxkIGNhdXNlIEluZGV4ZWREQiB0byBlbmQgdGhlIHRyYW5zYWN0aW9uLlxuICogU2VlIFBlcnNpc3RlbmNlUHJvbWlzZSBmb3IgbW9yZSBkZXRhaWxzLlxuICovIGNsYXNzIF9fUFJJVkFURV9TaW1wbGVEYiB7XG4gICAgLypcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNpbXBsZURiIHdyYXBwZXIgZm9yIEluZGV4ZWREYiBkYXRhYmFzZSBgbmFtZWAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgYHZlcnNpb25gIG11c3Qgbm90IGJlIGEgZG93bmdyYWRlLiBJbmRleGVkREIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAqIGRvd25ncmFkaW5nIHRoZSBzY2hlbWEgdmVyc2lvbi4gV2UgY3VycmVudGx5IGRvIG5vdCBzdXBwb3J0IGFueSB3YXkgdG8gZG9cbiAgICAgKiB2ZXJzaW9uaW5nIG91dHNpZGUgb2YgSW5kZXhlZERCJ3MgdmVyc2lvbmluZyBtZWNoYW5pc20sIGFzIG9ubHlcbiAgICAgKiB2ZXJzaW9uLXVwZ3JhZGUgdHJhbnNhY3Rpb25zIGFyZSBhbGxvd2VkIHRvIGRvIHRoaW5ncyBsaWtlIGNyZWF0ZVxuICAgICAqIG9iamVjdHN0b3Jlcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IGUsIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuUyA9IG47XG4gICAgICAgIC8vIE5PVEU6IEFjY29yZGluZyB0byBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk3MDUwLCB0aGVcbiAgICAgICAgLy8gYnVnIHdlJ3JlIGNoZWNraW5nIGZvciBzaG91bGQgZXhpc3QgaW4gaU9TID49IDEyLjIgYW5kIDwgMTMsIGJ1dCBmb3JcbiAgICAgICAgLy8gd2hhdGV2ZXIgcmVhc29uIGl0J3MgbXVjaCBoYXJkZXIgdG8gaGl0IGFmdGVyIDEyLjIgc28gd2Ugb25seSBwcm9hY3RpdmVseVxuICAgICAgICAvLyBsb2cgb24gMTIuMi5cbiAgICAgICAgMTIuMiA9PT0gX19QUklWQVRFX1NpbXBsZURiLkQoZ2V0VUEoKSkgJiYgX19QUklWQVRFX2xvZ0Vycm9yKFwiRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiBTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuICovICAgIHN0YXRpYyBkZWxldGUoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJSZW1vdmluZyBkYXRhYmFzZTpcIiwgZSksIF9fUFJJVkFURV93cmFwUmVxdWVzdCh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKGUpKS50b1Byb21pc2UoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgQygpIHtcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSByZXR1cm4gITE7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfU2ltcGxlRGIudigpKSByZXR1cm4gITA7XG4gICAgICAgIC8vIFdlIGV4dGVuc2l2ZWx5IHVzZSBpbmRleGVkIGFycmF5IHZhbHVlcyBhbmQgY29tcG91bmQga2V5cyxcbiAgICAgICAgLy8gd2hpY2ggSUUgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQuIEhvd2V2ZXIsIHRoZXkgc3RpbGwgaGF2ZSBpbmRleGVkREJcbiAgICAgICAgLy8gZGVmaW5lZCBvbiB0aGUgd2luZG93LCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGZvciB0aGVtIGhlcmUgYW5kIG1ha2Ugc3VyZVxuICAgICAgICAvLyB0byByZXR1cm4gdGhhdCBwZXJzaXN0ZW5jZSBpcyBub3QgZW5hYmxlZCBmb3IgdGhvc2UgYnJvd3NlcnMuXG4gICAgICAgIC8vIEZvciB0cmFja2luZyBzdXBwb3J0IG9mIHRoaXMgZmVhdHVyZSwgc2VlIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vc3RhdHVzL2luZGV4ZWRkYmFycmF5c2FuZG11bHRpZW50cnlzdXBwb3J0L1xuICAgICAgICAvLyBDaGVjayB0aGUgVUEgc3RyaW5nIHRvIGZpbmQgb3V0IHRoZSBicm93c2VyLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBnZXRVQSgpLCB0ID0gX19QUklWQVRFX1NpbXBsZURiLkQoZSksIG4gPSAwIDwgdCAmJiB0IDwgMTAsIHIgPSBfX1BSSVZBVEVfU2ltcGxlRGIuRihlKSwgaSA9IDAgPCByICYmIHIgPCA0LjU7XG4gICAgICAgIC8vIElFIDEwXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgTlQgNi4yOyBUcmlkZW50LzYuMCknO1xuICAgICAgICAvLyBJRSAxMVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjM7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvJztcbiAgICAgICAgLy8gRWRnZVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCxcbiAgICAgICAgLy8gbGlrZSBHZWNrbykgQ2hyb21lLzM5LjAuMjE3MS43MSBTYWZhcmkvNTM3LjM2IEVkZ2UvMTIuMCc7XG4gICAgICAgIC8vIGlPUyBTYWZhcmk6IERpc2FibGUgZm9yIHVzZXJzIHJ1bm5pbmcgaU9TIHZlcnNpb24gPCAxMC5cbiAgICAgICAgICAgICAgICByZXR1cm4gIShlLmluZGV4T2YoXCJNU0lFIFwiKSA+IDAgfHwgZS5pbmRleE9mKFwiVHJpZGVudC9cIikgPiAwIHx8IGUuaW5kZXhPZihcIkVkZ2UvXCIpID4gMCB8fCBuIHx8IGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJhY2tpbmcgSW5kZXhlZERCIHN0b3JlIGlzIHRoZSBOb2RlIEluZGV4ZWREQlNoaW1cbiAgICAgKiAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbSkuXG4gICAgICovICAgIHN0YXRpYyB2KCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHByb2Nlc3MgJiYgXCJZRVNcIiA9PT0gKG51bGwgPT09IChlID0gcHJvY2Vzcy5lbnYpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuTSk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovICAgIHN0YXRpYyBPKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUuc3RvcmUodCk7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgaU9TIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBEKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubWF0Y2goL2koPzpwaG9uZXxwYWR8cG9kKSBvcyAoW1xcZF9dKykvaSksIG4gPSB0ID8gdFsxXS5zcGxpdChcIl9cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgICAgIHJldHVybiBOdW1iZXIobik7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgQW5kcm9pZCB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgRihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLm1hdGNoKC9BbmRyb2lkIChbXFxkLl0rKS9pKSwgbiA9IHQgPyB0WzFdLnNwbGl0KFwiLlwiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZSwgY3JlYXRpbmcgb3IgdXBncmFkaW5nIGl0IGlmIG5lY2Vzc2FyeS5cbiAgICAgKi8gICAgYXN5bmMgTihlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiIHx8IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIk9wZW5pbmcgZGF0YWJhc2U6XCIsIHRoaXMubmFtZSksIFxuICAgICAgICB0aGlzLmRiID0gYXdhaXQgbmV3IFByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEludmVzdGlnYXRlIGJyb3dzZXIgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbmRleGVkREJfQVBJL1VzaW5nX0luZGV4ZWREQlxuICAgICAgICAgICAgLy8gc3VnZ2VzdHMgSUU5IGFuZCBvbGRlciBXZWJLaXQgYnJvd3NlcnMgaGFuZGxlIHVwZ3JhZGVcbiAgICAgICAgICAgIC8vIGRpZmZlcmVudGx5LiBUaGV5IGV4cGVjdCBzZXRWZXJzaW9uLCBhcyBkZXNjcmliZWQgaGVyZTpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJWZXJzaW9uQ2hhbmdlUmVxdWVzdC9zZXRWZXJzaW9uXG4gICAgICAgICAgICBjb25zdCByID0gaW5kZXhlZERCLm9wZW4odGhpcy5uYW1lLCB0aGlzLnZlcnNpb24pO1xuICAgICAgICAgICAgci5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHQobik7XG4gICAgICAgICAgICB9LCByLm9uYmxvY2tlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuKG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlLCBcIkNhbm5vdCB1cGdyYWRlIEluZGV4ZWREQiBzY2hlbWEgd2hpbGUgYW5vdGhlciB0YWIgaXMgb3Blbi4gQ2xvc2UgYWxsIHRhYnMgdGhhdCBhY2Nlc3MgRmlyZXN0b3JlIGFuZCByZWxvYWQgdGhpcyBwYWdlIHRvIHByb2NlZWQuXCIpKTtcbiAgICAgICAgICAgIH0sIHIub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0LnRhcmdldC5lcnJvcjtcbiAgICAgICAgICAgICAgICBcIlZlcnNpb25FcnJvclwiID09PSByLm5hbWUgPyBuKG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBGaXJlc3RvcmUgU0RLIHdhcyBwcmV2aW91c2x5IHVzZWQgYW5kIHNvIHRoZSBwZXJzaXN0ZWQgZGF0YSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB2ZXJzaW9uIG9mIHRoZSBTREsgeW91IGFyZSBub3cgdXNpbmcuIFRoZSBTREsgd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgcmUtdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIFNESyBvciBlbHNlIGNsZWFyIHRoZSBwZXJzaXN0ZWQgSW5kZXhlZERCIGRhdGEgZm9yIHlvdXIgYXBwIHRvIHN0YXJ0IGZyZXNoLlwiKSkgOiBcIkludmFsaWRTdGF0ZUVycm9yXCIgPT09IHIubmFtZSA/IG4obmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJVbmFibGUgdG8gb3BlbiBhbiBJbmRleGVkREIgY29ubmVjdGlvbi4gVGhpcyBjb3VsZCBiZSBkdWUgdG8gcnVubmluZyBpbiBhIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbiBvbiBhIGJyb3dzZXIgd2hvc2UgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9ucyBkbyBub3Qgc3VwcG9ydCBJbmRleGVkREI6IFwiICsgcikpIDogbihuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSwgcikpO1xuICAgICAgICAgICAgfSwgci5vbnVwZ3JhZGVuZWVkZWQgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCAnRGF0YWJhc2UgXCInICsgdGhpcy5uYW1lICsgJ1wiIHJlcXVpcmVzIHVwZ3JhZGUgZnJvbSB2ZXJzaW9uOicsIGUub2xkVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLlMuQih0LCByLnRyYW5zYWN0aW9uLCBlLm9sZFZlcnNpb24sIHRoaXMudmVyc2lvbikubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIkRhdGFiYXNlIHVwZ3JhZGUgdG8gdmVyc2lvbiBcIiArIHRoaXMudmVyc2lvbiArIFwiIGNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSksIHRoaXMuTCAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSBlID0+IHRoaXMuTChlKSksIHRoaXMuZGI7XG4gICAgfVxuICAgIGsoZSkge1xuICAgICAgICB0aGlzLkwgPSBlLCB0aGlzLmRiICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IHQgPT4gZSh0KSk7XG4gICAgfVxuICAgIGFzeW5jIHJ1blRyYW5zYWN0aW9uKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IFwicmVhZG9ubHlcIiA9PT0gdDtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICArK3M7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGIgPSBhd2FpdCB0aGlzLk4oZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9TaW1wbGVEYlRyYW5zYWN0aW9uLm9wZW4odGhpcy5kYiwgZSwgaSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCIsIG4pLCBzID0gcih0KS5uZXh0KChlID0+ICh0LnAoKSwgXG4gICAgICAgICAgICAgICAgZSkpKS5jYXRjaCgoZSA9PiAoXG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhlIHRyYW5zYWN0aW9uIGlmIHRoZXJlIHdhcyBhbiBlcnJvci5cbiAgICAgICAgICAgICAgICB0LmFib3J0KGUpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGUpKSkpLnRvUHJvbWlzZSgpO1xuICAgICAgICAgICAgICAgIC8vIEFzIG5vdGVkIGFib3ZlLCBlcnJvcnMgYXJlIHByb3BhZ2F0ZWQgYnkgYWJvcnRpbmcgdGhlIHRyYW5zYWN0aW9uLiBTb1xuICAgICAgICAgICAgICAgIC8vIHdlIHN3YWxsb3cgYW55IGVycm9yIGhlcmUgdG8gYXZvaWQgdGhlIGJyb3dzZXIgbG9nZ2luZyBpdCBhcyB1bmhhbmRsZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHMuY2F0Y2goKCgpID0+IHt9KSksIFxuICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSB0cmFuc2FjdGlvbiB0byBjb21wbGV0ZSAoaS5lLiBJbmRleGVkRGIncyBvbnN1Y2Nlc3MgZXZlbnQgdG9cbiAgICAgICAgICAgICAgICAvLyBmaXJlKSwgYnV0IHN0aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgdHJhbnNhY3Rpb25GblJlc3VsdCBiYWNrIHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNhbGxlci5cbiAgICAgICAgICAgICAgICBhd2FpdCB0LmcsIHM7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUsIG4gPSBcIkZpcmViYXNlRXJyb3JcIiAhPT0gdC5uYW1lICYmIHMgPCAzO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oc2NobWlkdC1zZWJhc3RpYW4pOiBXZSBjb3VsZCBwcm9iYWJseSBiZSBzbWFydGVyIGFib3V0IHRoaXMgYW5kXG4gICAgICAgICAgICAgICAgLy8gbm90IHJldHJ5IGV4Y2VwdGlvbnMgdGhhdCBhcmUgbGlrZWx5IHVucmVjb3ZlcmFibGUgKHN1Y2ggYXMgcXVvdGFcbiAgICAgICAgICAgICAgICAvLyBleGNlZWRlZCBlcnJvcnMpLlxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFdlIGNhbm5vdCB1c2UgYW4gaW5zdGFuY2VvZiBjaGVjayBmb3IgRmlyZXN0b3JlRXhjZXB0aW9uLCBzaW5jZSB0aGVcbiAgICAgICAgICAgICAgICAvLyBleGNlcHRpb24gaXMgd3JhcHBlZCBpbiBhIGdlbmVyaWMgZXJyb3IgYnkgb3VyIGFzeW5jL2F3YWl0IGhhbmRsaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJUcmFuc2FjdGlvbiBmYWlsZWQgd2l0aCBlcnJvcjpcIiwgdC5tZXNzYWdlLCBcIlJldHJ5aW5nOlwiLCBuKSwgXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpLCAhbikgcmV0dXJuIFByb21pc2UucmVqZWN0KHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmRiICYmIHRoaXMuZGIuY2xvc2UoKSwgdGhpcy5kYiA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjb250cm9sbGVyIGZvciBpdGVyYXRpbmcgb3ZlciBhIGtleSByYW5nZSBvciBpbmRleC4gSXQgYWxsb3dzIGFuIGl0ZXJhdGVcbiAqIGNhbGxiYWNrIHRvIGRlbGV0ZSB0aGUgY3VycmVudGx5LXJlZmVyZW5jZWQgb2JqZWN0LCBvciBqdW1wIHRvIGEgbmV3IGtleVxuICogd2l0aGluIHRoZSBrZXkgcmFuZ2Ugb3IgaW5kZXguXG4gKi8gY2xhc3MgX19QUklWQVRFX0l0ZXJhdGlvbkNvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5xID0gZSwgdGhpcy5LID0gITEsIHRoaXMuJCA9IG51bGw7XG4gICAgfVxuICAgIGdldCBpc0RvbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLks7XG4gICAgfVxuICAgIGdldCBVKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kO1xuICAgIH1cbiAgICBzZXQgY3Vyc29yKGUpIHtcbiAgICAgICAgdGhpcy5xID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHN0b3AgaXRlcmF0aW9uIGF0IGFueSBwb2ludC5cbiAgICAgKi8gICAgZG9uZSgpIHtcbiAgICAgICAgdGhpcy5LID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBza2lwIHRvIHRoYXQgbmV4dCBrZXksIHdoaWNoIGNvdWxkIGJlXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cbiAgICAgKi8gICAgVyhlKSB7XG4gICAgICAgIHRoaXMuJCA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSB0aGUgY3VycmVudCBjdXJzb3IgdmFsdWUgZnJvbSB0aGUgb2JqZWN0IHN0b3JlLlxuICAgICAqXG4gICAgICogTk9URTogWW91IENBTk5PVCBkbyB0aGlzIHdpdGggYSBrZXlzT25seSBxdWVyeS5cbiAgICAgKi8gICAgZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyYXBSZXF1ZXN0KHRoaXMucS5kZWxldGUoKSk7XG4gICAgfVxufVxuXG4vKiogQW4gZXJyb3IgdGhhdCB3cmFwcyBleGNlcHRpb25zIHRoYXQgdGhyb3duIGR1cmluZyBJbmRleGVkREIgZXhlY3V0aW9uLiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvciBleHRlbmRzIEZpcmVzdG9yZUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKEQuVU5BVkFJTEFCTEUsIGBJbmRleGVkREIgdHJhbnNhY3Rpb24gJyR7ZX0nIGZhaWxlZDogJHt0fWApLCB0aGlzLm5hbWUgPSBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKiBWZXJpZmllcyB3aGV0aGVyIGBlYCBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpIHtcbiAgICAvLyBVc2UgbmFtZSBlcXVhbGl0eSwgYXMgaW5zdGFuY2VvZiBjaGVja3Mgb24gZXJyb3JzIGRvbid0IHdvcmsgd2l0aCBlcnJvcnNcbiAgICAvLyB0aGF0IHdyYXAgb3RoZXIgZXJyb3JzLlxuICAgIHJldHVybiBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIiA9PT0gZS5uYW1lO1xufVxuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgYW4gSURCT2JqZWN0U3RvcmUgcHJvdmlkaW5nIGFuIEFQSSB0aGF0OlxuICpcbiAqIDEpIEhhcyBnZW5lcmljIEtleVR5cGUgLyBWYWx1ZVR5cGUgcGFyYW1ldGVycyB0byBwcm92aWRlIHN0cm9uZ2x5LXR5cGVkXG4gKiBtZXRob2RzIGZvciBhY3RpbmcgYWdhaW5zdCB0aGUgb2JqZWN0IHN0b3JlLlxuICogMikgRGVhbHMgd2l0aCBJbmRleGVkREIncyBvbnN1Y2Nlc3MgLyBvbmVycm9yIGV2ZW50IGNhbGxiYWNrcywgbWFraW5nIGV2ZXJ5XG4gKiBtZXRob2QgcmV0dXJuIGEgUGVyc2lzdGVuY2VQcm9taXNlIGluc3RlYWQuXG4gKiAzKSBQcm92aWRlcyBhIGhpZ2hlci1sZXZlbCBBUEkgdG8gYXZvaWQgbmVlZGluZyB0byBkbyBleGNlc3NpdmUgd3JhcHBpbmcgb2ZcbiAqIGludGVybWVkaWF0ZSBJbmRleGVkREIgdHlwZXMgKElEQkN1cnNvcldpdGhWYWx1ZSwgZXRjLilcbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2ltcGxlRGJTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnN0b3JlID0gZTtcbiAgICB9XG4gICAgcHV0KGUsIHQpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBlLCB0KSwgXG4gICAgICAgIG4gPSB0aGlzLnN0b3JlLnB1dCh0LCBlKSkgOiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBcIjxhdXRvLWtleT5cIiwgZSksIFxuICAgICAgICBuID0gdGhpcy5zdG9yZS5wdXQoZSkpLCBfX1BSSVZBVEVfd3JhcFJlcXVlc3Qobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgdmFsdWUgaW50byBhbiBPYmplY3QgU3RvcmUgYW5kIHJldHVybnMgdGhlIG5ldyBrZXkuIFNpbWlsYXIgdG9cbiAgICAgKiBJbmRleGVkRGIncyBgYWRkKClgLCB0aGlzIG1ldGhvZCB3aWxsIGZhaWwgb24gcHJpbWFyeSBrZXkgY29sbGlzaW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBvYmplY3QgdG8gd3JpdGUuXG4gICAgICogQHJldHVybnMgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gYWRkLlxuICAgICAqLyAgICBhZGQoZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIkFERFwiLCB0aGlzLnN0b3JlLm5hbWUsIGUsIGUpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyYXBSZXF1ZXN0KHRoaXMuc3RvcmUuYWRkKGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgZnJvbSB0aGUgc3BlY2lmaWVkIHN0b3JlLCBvciBudWxsXG4gICAgICogaWYgbm8gb2JqZWN0IGV4aXN0cyB3aXRoIHRoZSBzcGVjaWZpZWQga2V5LlxuICAgICAqXG4gICAgICogQGtleSBUaGUga2V5IG9mIHRoZSBvYmplY3QgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIFRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBvciBudWxsIGlmIG5vIG9iamVjdCBleGlzdHMuXG4gICAgICovICAgIGdldChlKSB7XG4gICAgICAgIC8vIFdlJ3JlIGRvaW5nIGFuIHVuc2FmZSBjYXN0IHRvIFZhbHVlVHlwZS5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdCh0aGlzLnN0b3JlLmdldChlKSkubmV4dCgodCA9PiAoXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBub25leGlzdGVuY2UgdG8gbnVsbC5cbiAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gbnVsbCksIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiR0VUXCIsIHRoaXMuc3RvcmUubmFtZSwgZSwgdCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICBkZWxldGUoZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIkRFTEVURVwiLCB0aGlzLnN0b3JlLm5hbWUsIGUpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyYXBSZXF1ZXN0KHRoaXMuc3RvcmUuZGVsZXRlKGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgd2UgZXZlciBuZWVkIG1vcmUgb2YgdGhlIGNvdW50IHZhcmlhbnRzLCB3ZSBjYW4gYWRkIG92ZXJsb2Fkcy4gRm9yIG5vdyxcbiAgICAgKiBhbGwgd2UgbmVlZCBpcyB0byBjb3VudCBldmVyeXRoaW5nIGluIGEgc3RvcmUuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgc3RvcmUuXG4gICAgICovICAgIGNvdW50KCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIkNPVU5UXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5zdG9yZS5jb3VudCgpKTtcbiAgICB9XG4gICAgRyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnMoZSwgdCk7XG4gICAgICAgIC8vIFVzZSBgZ2V0QWxsKClgIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIEluZGV4ZWREQiB2MywgYXMgaXQgaXMgcm91Z2hseVxuICAgICAgICAvLyAyMCUgZmFzdGVyLiBVbmZvcnR1bmF0ZWx5LCBnZXRBbGwoKSBkb2VzIG5vdCBzdXBwb3J0IGN1c3RvbSBpbmRpY2VzLlxuICAgICAgICAgICAgICAgIGlmIChuLmluZGV4IHx8IFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdGhpcy5zdG9yZS5nZXRBbGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmN1cnNvcihuKSwgdCA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaihlLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0LnB1c2gobik7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gdCkpO1xuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnN0b3JlLmdldEFsbChuLnJhbmdlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGUub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICB9LCBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0KGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyB0aGUgZmlyc3QgYGNvdW50YCBlbGVtZW50cyBmcm9tIHRoZSBwcm92aWRlZCBpbmRleCByYW5nZS4gTG9hZHMgYWxsXG4gICAgICogZWxlbWVudHMgaWYgbm8gbGltaXQgaXMgcHJvdmlkZWQuXG4gICAgICovICAgIEgoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5nZXRBbGwoZSwgbnVsbCA9PT0gdCA/IHZvaWQgMCA6IHQpO1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIG4ub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHQoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgbi5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBlKHQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEooZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIkRFTEVURSBBTExcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyhlLCB0KTtcbiAgICAgICAgbi5ZID0gITE7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaihyLCAoKGUsIHQsIG4pID0+IG4uZGVsZXRlKCkpKTtcbiAgICB9XG4gICAgWihlLCB0KSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICB0ID8gbiA9IGUgOiAobiA9IHt9LCB0ID0gZSk7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaihyLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHN0b3JlLCBidXQgd2FpdHMgZm9yIHRoZSBnaXZlbiBjYWxsYmFjayB0byBjb21wbGV0ZSBmb3JcbiAgICAgKiBlYWNoIGVudHJ5IGJlZm9yZSBpdGVyYXRpbmcgdGhlIG5leHQgZW50cnkuIFRoaXMgYWxsb3dzIHRoZSBjYWxsYmFjayB0byBkb1xuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gY29udGludWUgaXRlcmF0aW9uLCBhbmRcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi8gICAgWChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmN1cnNvcih7fSk7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgdC5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICByKHQpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHIgPyBlKHIucHJpbWFyeUtleSwgci52YWx1ZSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUgPyByLmNvbnRpbnVlKCkgOiBuKCk7XG4gICAgICAgICAgICAgICAgfSkpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBqKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHIsIGkpID0+IHtcbiAgICAgICAgICAgIGUub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGkoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0l0ZXJhdGlvbkNvbnRyb2xsZXIoaSksIG8gPSB0KGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcyk7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZVByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uY2F0Y2goKGUgPT4gKHMuZG9uZSgpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGUpKSkpO1xuICAgICAgICAgICAgICAgICAgICBuLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHMuaXNEb25lID8gcigpIDogbnVsbCA9PT0gcy5VID8gaS5jb250aW51ZSgpIDogaS5jb250aW51ZShzLlUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKG4pKSk7XG4gICAgfVxuICAgIG9wdGlvbnMoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IG4gPSBlIDogdCA9IGUpLCB7XG4gICAgICAgICAgICBpbmRleDogbixcbiAgICAgICAgICAgIHJhbmdlOiB0XG4gICAgICAgIH07XG4gICAgfVxuICAgIGN1cnNvcihlKSB7XG4gICAgICAgIGxldCB0ID0gXCJuZXh0XCI7XG4gICAgICAgIGlmIChlLnJldmVyc2UgJiYgKHQgPSBcInByZXZcIiksIGUuaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmluZGV4KGUuaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuWSA/IG4ub3BlbktleUN1cnNvcihlLnJhbmdlLCB0KSA6IG4ub3BlbkN1cnNvcihlLnJhbmdlLCB0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKGUucmFuZ2UsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV93cmFwUmVxdWVzdChlKSB7XG4gICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgdChuKTtcbiAgICAgICAgfSwgZS5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgbih0KTtcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8vIEd1YXJkIHNvIHdlIG9ubHkgcmVwb3J0IHRoZSBlcnJvciBvbmNlLlxubGV0IEYgPSAhMTtcblxuZnVuY3Rpb24gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfU2ltcGxlRGIuRChnZXRVQSgpKTtcbiAgICBpZiAodCA+PSAxMi4yICYmIHQgPCAxMykge1xuICAgICAgICBjb25zdCB0ID0gXCJBbiBpbnRlcm5hbCBlcnJvciB3YXMgZW5jb3VudGVyZWQgaW4gdGhlIEluZGV4ZWQgRGF0YWJhc2Ugc2VydmVyXCI7XG4gICAgICAgIGlmIChlLm1lc3NhZ2UuaW5kZXhPZih0KSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBXcmFwIGVycm9yIGluIGEgbW9yZSBkZXNjcmlwdGl2ZSBvbmUuXG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IEZpcmVzdG9yZUVycm9yKFwiaW50ZXJuYWxcIiwgYElPU19JTkRFWEVEREJfQlVHMTogSW5kZXhlZERiIGhhcyB0aHJvd24gJyR7dH0nLiBUaGlzIGlzIGxpa2VseSBkdWUgdG8gYW4gdW5hdm9pZGFibGUgYnVnIGluIGlPUy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuYCk7XG4gICAgICAgICAgICByZXR1cm4gRiB8fCAoRiA9ICEwLCBcbiAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSksIDApKSwgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxuLyoqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIEluZGV4IEJhY2tmaWxsZXIuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMuZWUgPSB0LCB0aGlzLnRhc2sgPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy50ZSgxNWUzKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy50YXNrICYmICh0aGlzLnRhc2suY2FuY2VsKCksIHRoaXMudGFzayA9IG51bGwpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMudGFzaztcbiAgICB9XG4gICAgdGUoZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleEJhY2tpbGxlclwiLCBgU2NoZWR1bGVkIGluICR7ZX1tc2ApLCB0aGlzLnRhc2sgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJpbmRleF9iYWNrZmlsbFwiIC8qIFRpbWVySWQuSW5kZXhCYWNrZmlsbCAqLyAsIGUsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleEJhY2tpbGxlclwiLCBgRG9jdW1lbnRzIHdyaXR0ZW46ICR7YXdhaXQgdGhpcy5lZS5uZSgpfWApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkgPyBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleEJhY2tpbGxlclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgaW5kZXggYmFja2ZpbGw6IFwiLCBlKSA6IGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRlKDZlNCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgYmFja2ZpbGxpbmcgaW5kZXhlcy4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4QmFja2ZpbGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogTG9jYWxTdG9yZSBwcm92aWRlcyBhY2Nlc3MgdG8gSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50Vmlldy5cbiAgICAgKiBUaGVzZSBwcm9wZXJ0aWVzIHdpbGwgdXBkYXRlIHdoZW4gdGhlIHVzZXIgY2hhbmdlcy4gQ29uc2VxdWVudGx5LFxuICAgICAqIG1ha2luZyBhIGxvY2FsIGNvcHkgb2YgSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50VmlldyB3aWxsIHJlcXVpcmVcbiAgICAgKiB1cGRhdGVzIG92ZXIgdGltZS4gVGhlIHNpbXBsZXIgc29sdXRpb24gaXMgdG8gcmVseSBvbiBMb2NhbFN0b3JlIHRvIGhhdmVcbiAgICAgKiBhbiB1cC10by1kYXRlIHJlZmVyZW5jZXMgdG8gSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50U3RvcmUuXG4gICAgICovXG4gICAgZSwgdCkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLnBlcnNpc3RlbmNlID0gdDtcbiAgICB9XG4gICAgYXN5bmMgbmUoZSA9IDUwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQmFja2ZpbGwgSW5kZXhlc1wiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHRoaXMucmUodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBpbmRleCBlbnRyaWVzIHVudGlsIHRoZSBjYXAgaXMgcmVhY2hlZC4gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBwcm9jZXNzZWQuICovICAgIHJlKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBTZXQ7XG4gICAgICAgIGxldCByID0gdCwgaSA9ICEwO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmRvV2hpbGUoKCgpID0+ICEwID09PSBpICYmIHIgPiAwKSwgKCgpID0+IHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIuZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgIW4uaGFzKHQpKSByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNraWxsZXJcIiwgYFByb2Nlc3NpbmcgY29sbGVjdGlvbjogJHt0fWApLCBcbiAgICAgICAgICAgIHRoaXMuaWUoZSwgdCwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgciAtPSBlLCBuLmFkZCh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGkgPSAhMTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gdCAtIHIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIGVudHJpZXMgZm9yIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHByb2Nlc3NlZC5cbiAgICAgKi8gICAgaWUoZSwgdCwgbikge1xuICAgICAgICAvLyBVc2UgdGhlIGVhcmxpZXN0IG9mZnNldCBvZiBhbGwgZmllbGQgaW5kZXhlcyB0byBxdWVyeSB0aGUgbG9jYWwgY2FjaGUuXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLmdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCkubmV4dCgociA9PiB0aGlzLmxvY2FsU3RvcmUubG9jYWxEb2N1bWVudHMuZ2V0TmV4dERvY3VtZW50cyhlLCB0LCByLCBuKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmNoYW5nZXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci51cGRhdGVJbmRleEVudHJpZXMoZSwgaSkubmV4dCgoKCkgPT4gdGhpcy5zZShyLCBuKSkpLm5leHQoKG4gPT4gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4QmFja2lsbGVyXCIsIGBVcGRhdGluZyBvZmZzZXQ6ICR7bn1gKSwgXG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLnVwZGF0ZUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuKSkpKS5uZXh0KCgoKSA9PiBpLnNpemUpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBuZXh0IG9mZnNldCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAqLyAgICBzZShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gZTtcbiAgICAgICAgcmV0dXJuIHQuY2hhbmdlcy5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudCh0KTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IociwgbikgPiAwICYmIChuID0gcik7XG4gICAgICAgIH0pKSwgbmV3IEluZGV4T2Zmc2V0KG4ucmVhZFRpbWUsIG4uZG9jdW1lbnRLZXksIE1hdGgubWF4KHQuYmF0Y2hJZCwgZS5sYXJnZXN0QmF0Y2hJZCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogYExpc3RlblNlcXVlbmNlYCBpcyBhIG1vbm90b25pYyBzZXF1ZW5jZS4gSXQgaXMgaW5pdGlhbGl6ZWQgd2l0aCBhIG1pbmltdW0gdmFsdWUgdG9cbiAqIGV4Y2VlZC4gQWxsIHN1YnNlcXVlbnQgY2FsbHMgdG8gbmV4dCB3aWxsIHJldHVybiBpbmNyZWFzaW5nIHZhbHVlcy4gSWYgcHJvdmlkZWQgd2l0aCBhXG4gKiBgU2VxdWVuY2VOdW1iZXJTeW5jZXJgLCBpdCB3aWxsIGFkZGl0aW9uYWxseSBidW1wIGl0cyBuZXh0IHZhbHVlIHdoZW4gdG9sZCBvZiBhIG5ldyB2YWx1ZSwgYXNcbiAqIHdlbGwgYXMgd3JpdGUgb3V0IHNlcXVlbmNlIG51bWJlcnMgdGhhdCBpdCBwcm9kdWNlcyB2aWEgYG5leHQoKWAuXG4gKi8gY2xhc3MgX19QUklWQVRFX0xpc3RlblNlcXVlbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IGUsIHQgJiYgKHQuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gZSA9PiB0aGlzLm9lKGUpLCB0aGlzLl9lID0gZSA9PiB0LndyaXRlU2VxdWVuY2VOdW1iZXIoZSkpO1xuICAgIH1cbiAgICBvZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heChlLCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2UgJiYgdGhpcy5fZShlKSwgZTtcbiAgICB9XG59XG5cbl9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSA9IC0xO1xuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKGUpIHtcbiAgICByZXR1cm4gbnVsbCA9PSBlO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIHRoZSB2YWx1ZSByZXByZXNlbnRzIC0wLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8oZSkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSBlICYmIDEgLyBlID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBpc1NhZmVJbnRlZ2VyKGUpIHtcbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgZSAmJiBOdW1iZXIuaXNJbnRlZ2VyKGUpICYmICFfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8oZSkgJiYgZSA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiBlID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZSkge1xuICAgIGxldCB0ID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHQubGVuZ3RoID4gMCAmJiAodCA9IF9fUFJJVkFURV9lbmNvZGVTZXBhcmF0b3IodCkpLCBcbiAgICB0ID0gX19QUklWQVRFX2VuY29kZVNlZ21lbnQoZS5nZXQobiksIHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5jb2RlU2VwYXJhdG9yKHQpO1xufVxuXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZVNlZ21lbnQoZSwgdCkge1xuICAgIGxldCBuID0gdDtcbiAgICBjb25zdCByID0gZS5sZW5ndGg7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCByOyB0KyspIHtcbiAgICAgICAgY29uc3QgciA9IGUuY2hhckF0KHQpO1xuICAgICAgICBzd2l0Y2ggKHIpIHtcbiAgICAgICAgICBjYXNlIFwiXFwwXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDEwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTFcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gKz0gcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZVNlcGFyYXRvcihlKSB7XG4gICAgcmV0dXJuIGUgKyBcIlx1MDAwMVx1MDAwMVwiO1xufVxuXG4vKipcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcbiAqIHN0cmluZ3MuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChlKSB7XG4gICAgLy8gRXZlbnQgdGhlIGVtcHR5IHBhdGggbXVzdCBlbmNvZGUgYXMgYSBwYXRoIG9mIGF0IGxlYXN0IGxlbmd0aCAyLiBBIHBhdGhcbiAgICAvLyB3aXRoIGV4YWN0bHkgMiBtdXN0IGJlIHRoZSBlbXB0eSBwYXRoLlxuICAgIGNvbnN0IHQgPSBlLmxlbmd0aDtcbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQodCA+PSAyKSwgMiA9PT0gdCkgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwiXHUwMDAxXCIgPT09IGUuY2hhckF0KDApICYmIFwiXHUwMDAxXCIgPT09IGUuY2hhckF0KDEpKSwgXG4gICAgUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpO1xuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIGNhbm5vdCBleGlzdCBwYXN0IHRoZSBzZWNvbmQtdG8tbGFzdCBwb3NpdGlvbiBpbiB0aGVcbiAgICAvLyBzb3VyY2UgdmFsdWUuXG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4ID0gdCAtIDIsIG4gPSBbXTtcbiAgICBsZXQgciA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0OyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCB0ID0gZS5pbmRleE9mKFwiXHUwMDAxXCIsIGkpO1xuICAgICAgICAodCA8IDAgfHwgdCA+IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4KSAmJiBmYWlsKCk7XG4gICAgICAgIHN3aXRjaCAoZS5jaGFyQXQodCArIDEpKSB7XG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgY29uc3QgcyA9IGUuc3Vic3RyaW5nKGksIHQpO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICAwID09PSByLmxlbmd0aCA/IFxuICAgICAgICAgICAgLy8gQXZvaWQgY29weWluZyBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGEgc2VnbWVudCB0aGF0IGV4Y2x1ZGVzIFxcMFxuICAgICAgICAgICAgLy8gYW5kIFxcMDAxXG4gICAgICAgICAgICBvID0gcyA6IChyICs9IHMsIG8gPSByLCByID0gXCJcIiksIG4ucHVzaChvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMFwiOlxuICAgICAgICAgICAgciArPSBlLnN1YnN0cmluZyhpLCB0KSwgciArPSBcIlxcMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDExXCI6XG4gICAgICAgICAgICAvLyBUaGUgZXNjYXBlIGNoYXJhY3RlciBjYW4gYmUgdXNlZCBpbiB0aGUgb3V0cHV0IHRvIGVuY29kZSBpdHNlbGYuXG4gICAgICAgICAgICByICs9IGUuc3Vic3RyaW5nKGksIHQgKyAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGZhaWwoKTtcbiAgICAgICAgfVxuICAgICAgICBpID0gdCArIDI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKG4pO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBNID0gWyBcInVzZXJJZFwiLCBcImJhdGNoSWRcIiBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgbmFtZSAnb3duZXInIGlzIGNob3NlbiB0byBlbnN1cmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxuICogb2xkZXIgY2xpZW50cyB0aGF0IG9ubHkgc3VwcG9ydGVkIHNpbmdsZSBsb2NrZWQgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIFt1c2VySWQsIGVuY29kZWRQYXRoXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9uc1xuICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgoZSwgdCkge1xuICAgIHJldHVybiBbIGUsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCkgXTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAqIGFuZCBkZWxldGluZyBpbnRvIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25LZXkoZSwgdCwgbikge1xuICAgIHJldHVybiBbIGUsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCksIG4gXTtcbn1cblxuLyoqXG4gKiBCZWNhdXNlIHdlIHN0b3JlIGFsbCB0aGUgdXNlZnVsIGluZm9ybWF0aW9uIGZvciB0aGlzIHN0b3JlIGluIHRoZSBrZXksXG4gKiB0aGVyZSBpcyBubyB1c2VmdWwgaW5mb3JtYXRpb24gdG8gc3RvcmUgYXMgdGhlIHZhbHVlLiBUaGUgcmF3ICh1bmVuY29kZWQpXG4gKiBwYXRoIGNhbm5vdCBiZSBzdG9yZWQgYmVjYXVzZSBJbmRleGVkRGIgZG9lc24ndCBzdG9yZSBwcm90b3R5cGVcbiAqIGluZm9ybWF0aW9uLlxuICovIGNvbnN0IHggPSB7fSwgTyA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJkb2N1bWVudElkXCIgXSwgTiA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiZG9jdW1lbnRJZFwiIF0sIEIgPSBbIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJwcmVmaXhQYXRoXCIsIFwiZG9jdW1lbnRJZFwiIF0sIEwgPSBbIFwiY2Fub25pY2FsSWRcIiwgXCJ0YXJnZXRJZFwiIF0sIGsgPSBbIFwidGFyZ2V0SWRcIiwgXCJwYXRoXCIgXSwgcSA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdLCBRID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF0sIEsgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiIF0sICQgPSBbIFwidWlkXCIsIFwic2VxdWVuY2VOdW1iZXJcIiBdLCBVID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiwgXCJhcnJheVZhbHVlXCIsIFwiZGlyZWN0aW9uYWxWYWx1ZVwiLCBcIm9yZGVyZWREb2N1bWVudEtleVwiLCBcImRvY3VtZW50S2V5XCIgXSwgVyA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIsIFwib3JkZXJlZERvY3VtZW50S2V5XCIgXSwgRyA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImRvY3VtZW50SWRcIiBdLCB6ID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25QYXRoXCIsIFwibGFyZ2VzdEJhdGNoSWRcIiBdLCBqID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgSCA9IFsgLi4uWyAuLi5bIC4uLlsgLi4uWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiBdLCBcImNsaWVudE1ldGFkYXRhXCIgXSwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiIF0sIFwiY29sbGVjdGlvblBhcmVudHNcIiBdLCBcImJ1bmRsZXNcIiwgXCJuYW1lZFF1ZXJpZXNcIiBdLCBKID0gWyAuLi5ILCBcImRvY3VtZW50T3ZlcmxheXNcIiBdLCBZID0gWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNWMTRcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiwgXCJjbGllbnRNZXRhZGF0YVwiLCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIsIFwiY29sbGVjdGlvblBhcmVudHNcIiwgXCJidW5kbGVzXCIsIFwibmFtZWRRdWVyaWVzXCIsIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIFogPSBZLCBYID0gWyAuLi5aLCBcImluZGV4Q29uZmlndXJhdGlvblwiLCBcImluZGV4U3RhdGVcIiwgXCJpbmRleEVudHJpZXNcIiBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uIGV4dGVuZHMgUGVyc2lzdGVuY2VUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnVlID0gZSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldFN0b3JlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gX19QUklWQVRFX1NpbXBsZURiLk8obi51ZSwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9vYmplY3RTaXplKGUpIHtcbiAgICBsZXQgdCA9IDA7XG4gICAgZm9yIChjb25zdCBuIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBuKSAmJiB0Kys7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIGZvckVhY2goZSwgdCkge1xuICAgIGZvciAoY29uc3QgbiBpbiBlKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgbikgJiYgdChuLCBlW25dKTtcbn1cblxuZnVuY3Rpb24gaXNFbXB0eShlKSB7XG4gICAgZm9yIChjb25zdCB0IGluIGUpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgdCkpIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBBbiBpbW11dGFibGUgc29ydGVkIG1hcCBpbXBsZW1lbnRhdGlvbiwgYmFzZWQgb24gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrXG4vLyB0cmVlLlxuY2xhc3MgU29ydGVkTWFwIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGUsIHRoaXMucm9vdCA9IHQgfHwgTExSQk5vZGUuRU1QVFk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQgb3IgcmVwbGFjZWQuXG4gICAgaW5zZXJ0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QuaW5zZXJ0KGUsIHQsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QucmVtb3ZlKGUsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwuXG4gICAgZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyF0LmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5jb21wYXJhdG9yKGUsIHQua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSByZXR1cm4gdC52YWx1ZTtcbiAgICAgICAgICAgIG4gPCAwID8gdCA9IHQubGVmdCA6IG4gPiAwICYmICh0ID0gdC5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoaXMgc29ydGVkIG1hcCwgb3IgLTEgaWYgaXQgZG9lc24ndFxuICAgIC8vIGV4aXN0LlxuICAgIGluZGV4T2YoZSkge1xuICAgICAgICAvLyBOdW1iZXIgb2Ygbm9kZXMgdGhhdCB3ZXJlIHBydW5lZCB3aGVuIGRlc2NlbmRpbmcgcmlnaHRcbiAgICAgICAgbGV0IHQgPSAwLCBuID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshbi5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY29tcGFyYXRvcihlLCBuLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcikgcmV0dXJuIHQgKyBuLmxlZnQuc2l6ZTtcbiAgICAgICAgICAgIHIgPCAwID8gbiA9IG4ubGVmdCA6IChcbiAgICAgICAgICAgIC8vIENvdW50IGFsbCBub2RlcyBsZWZ0IG9mIHRoZSBub2RlIHBsdXMgdGhlIG5vZGUgaXRzZWxmXG4gICAgICAgICAgICB0ICs9IG4ubGVmdC5zaXplICsgMSwgbiA9IG4ucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vZGUgbm90IGZvdW5kXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3Quc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWluS2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pbm9yZGVyVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4gKGUodCwgbiksICExKSkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4gKGUucHVzaChgJHt0fToke259YCksICExKSkpLCBgeyR7ZS5qb2luKFwiLCBcIil9fWA7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXNcbiAgICAvLyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5yZXZlcnNlVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIFNvcnRlZE1hcC5cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20oZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgZSwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3JGcm9tKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIGUsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBcbi8vIEFuIGl0ZXJhdG9yIG92ZXIgYW4gTExSQk5vZGUuXG5jbGFzcyBTb3J0ZWRNYXBJdGVyYXRvciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLmlzUmV2ZXJzZSA9IHIsIHRoaXMubm9kZVN0YWNrID0gW107XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgZm9yICg7IWUuaXNFbXB0eSgpOyApIGlmIChpID0gdCA/IG4oZS5rZXksIHQpIDogMSwgXG4gICAgICAgIC8vIGZsaXAgdGhlIGNvbXBhcmlzb24gaWYgd2UncmUgZ29pbmcgaW4gcmV2ZXJzZVxuICAgICAgICB0ICYmIHIgJiYgKGkgKj0gLTEpLCBpIDwgMCkgXG4gICAgICAgIC8vIFRoaXMgbm9kZSBpcyBsZXNzIHRoYW4gb3VyIHN0YXJ0IGtleS4gaWdub3JlIGl0XG4gICAgICAgIGUgPSB0aGlzLmlzUmV2ZXJzZSA/IGUubGVmdCA6IGUucmlnaHQ7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKDAgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjayxcbiAgICAgICAgICAgICAgICAvLyBidXQgc3RvcCBpdGVyYXRpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBncmVhdGVyIHRoYW4gb3VyIHN0YXJ0IGtleSwgYWRkIGl0IHRvIHRoZSBzdGFjayBhbmQgbW92ZVxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgb25lXG4gICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKGUpLCBlID0gdGhpcy5pc1JldmVyc2UgPyBlLnJpZ2h0IDogZS5sZWZ0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5ub2RlU3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBrZXk6IGUua2V5LFxuICAgICAgICAgICAgdmFsdWU6IGUudmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSBmb3IgKGUgPSBlLmxlZnQ7ICFlLmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKGUpLCBlID0gZS5yaWdodDsgZWxzZSBmb3IgKGUgPSBlLnJpZ2h0OyAhZS5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaChlKSwgXG4gICAgICAgIGUgPSBlLmxlZnQ7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMDtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubm9kZVN0YWNrLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogZS5rZXksXG4gICAgICAgICAgICB2YWx1ZTogZS52YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBJdGVyYXRvclxuLy8gUmVwcmVzZW50cyBhIG5vZGUgaW4gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrIHRyZWUuXG5jbGFzcyBMTFJCTm9kZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmtleSA9IGUsIHRoaXMudmFsdWUgPSB0LCB0aGlzLmNvbG9yID0gbnVsbCAhPSBuID8gbiA6IExMUkJOb2RlLlJFRCwgdGhpcy5sZWZ0ID0gbnVsbCAhPSByID8gciA6IExMUkJOb2RlLkVNUFRZLCBcbiAgICAgICAgdGhpcy5yaWdodCA9IG51bGwgIT0gaSA/IGkgOiBMTFJCTm9kZS5FTVBUWSwgdGhpcy5zaXplID0gdGhpcy5sZWZ0LnNpemUgKyAxICsgdGhpcy5yaWdodC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXG4gICAgY29weShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgTExSQk5vZGUobnVsbCAhPSBlID8gZSA6IHRoaXMua2V5LCBudWxsICE9IHQgPyB0IDogdGhpcy52YWx1ZSwgbnVsbCAhPSBuID8gbiA6IHRoaXMuY29sb3IsIG51bGwgIT0gciA/IHIgOiB0aGlzLmxlZnQsIG51bGwgIT0gaSA/IGkgOiB0aGlzLnJpZ2h0KTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKGUpIHx8IGUodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbChlKTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbChlKSB8fCBlKHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbChlKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBub2RlIGluIHRoZSB0cmVlLlxuICAgIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pc0VtcHR5KCkgPyB0aGlzIDogdGhpcy5sZWZ0Lm1pbigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigpLmtleTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5pc0VtcHR5KCkgPyB0aGlzLmtleSA6IHRoaXMucmlnaHQubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQoZSwgdCwgbikge1xuICAgICAgICBsZXQgciA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGkgPSBuKGUsIHIua2V5KTtcbiAgICAgICAgcmV0dXJuIHIgPSBpIDwgMCA/IHIuY29weShudWxsLCBudWxsLCBudWxsLCByLmxlZnQuaW5zZXJ0KGUsIHQsIG4pLCBudWxsKSA6IDAgPT09IGkgPyByLmNvcHkobnVsbCwgdCwgbnVsbCwgbnVsbCwgbnVsbCkgOiByLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgci5yaWdodC5pbnNlcnQoZSwgdCwgbikpLCBcbiAgICAgICAgci5maXhVcCgpO1xuICAgIH1cbiAgICByZW1vdmVNaW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSByZXR1cm4gTExSQk5vZGUuRU1QVFk7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGUubGVmdC5pc1JlZCgpIHx8IGUubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKGUgPSBlLm1vdmVSZWRMZWZ0KCkpLCBlID0gZS5jb3B5KG51bGwsIG51bGwsIG51bGwsIGUubGVmdC5yZW1vdmVNaW4oKSwgbnVsbCksIFxuICAgICAgICBlLmZpeFVwKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBpdGVtIHJlbW92ZWQuXG4gICAgcmVtb3ZlKGUsIHQpIHtcbiAgICAgICAgbGV0IG4sIHIgPSB0aGlzO1xuICAgICAgICBpZiAodChlLCByLmtleSkgPCAwKSByLmxlZnQuaXNFbXB0eSgpIHx8IHIubGVmdC5pc1JlZCgpIHx8IHIubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHIgPSByLm1vdmVSZWRMZWZ0KCkpLCBcbiAgICAgICAgciA9IHIuY29weShudWxsLCBudWxsLCBudWxsLCByLmxlZnQucmVtb3ZlKGUsIHQpLCBudWxsKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoci5sZWZ0LmlzUmVkKCkgJiYgKHIgPSByLnJvdGF0ZVJpZ2h0KCkpLCByLnJpZ2h0LmlzRW1wdHkoKSB8fCByLnJpZ2h0LmlzUmVkKCkgfHwgci5yaWdodC5sZWZ0LmlzUmVkKCkgfHwgKHIgPSByLm1vdmVSZWRSaWdodCgpKSwgXG4gICAgICAgICAgICAwID09PSB0KGUsIHIua2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChyLnJpZ2h0LmlzRW1wdHkoKSkgcmV0dXJuIExMUkJOb2RlLkVNUFRZO1xuICAgICAgICAgICAgICAgIG4gPSByLnJpZ2h0Lm1pbigpLCByID0gci5jb3B5KG4ua2V5LCBuLnZhbHVlLCBudWxsLCBudWxsLCByLnJpZ2h0LnJlbW92ZU1pbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIgPSByLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgci5yaWdodC5yZW1vdmUoZSwgdCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByLmZpeFVwKCk7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSBhZnRlciBwZXJmb3JtaW5nIGFueSBuZWVkZWQgcm90YXRpb25zLlxuICAgIGZpeFVwKCkge1xuICAgICAgICBsZXQgZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBlLnJpZ2h0LmlzUmVkKCkgJiYgIWUubGVmdC5pc1JlZCgpICYmIChlID0gZS5yb3RhdGVMZWZ0KCkpLCBlLmxlZnQuaXNSZWQoKSAmJiBlLmxlZnQubGVmdC5pc1JlZCgpICYmIChlID0gZS5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIGUubGVmdC5pc1JlZCgpICYmIGUucmlnaHQuaXNSZWQoKSAmJiAoZSA9IGUuY29sb3JGbGlwKCkpLCBlO1xuICAgIH1cbiAgICBtb3ZlUmVkTGVmdCgpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gZS5yaWdodC5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgZS5yaWdodC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIGUgPSBlLnJvdGF0ZUxlZnQoKSwgZSA9IGUuY29sb3JGbGlwKCkpLCBlO1xuICAgIH1cbiAgICBtb3ZlUmVkUmlnaHQoKSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIGUubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLnJvdGF0ZVJpZ2h0KCksIGUgPSBlLmNvbG9yRmxpcCgpKSwgZTtcbiAgICB9XG4gICAgcm90YXRlTGVmdCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5SRUQsIG51bGwsIHRoaXMucmlnaHQubGVmdCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgZSwgbnVsbCk7XG4gICAgfVxuICAgIHJvdGF0ZVJpZ2h0KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG51bGwsIGUpO1xuICAgIH1cbiAgICBjb2xvckZsaXAoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCAhdGhpcy5sZWZ0LmNvbG9yLCBudWxsLCBudWxsKSwgdCA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkobnVsbCwgbnVsbCwgIXRoaXMuY29sb3IsIGUsIHQpO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jaGVjaygpO1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coMiwgZSkgPD0gdGhpcy5zaXplICsgMTtcbiAgICB9XG4gICAgLy8gSW4gYSBiYWxhbmNlZCBSQiB0cmVlLCB0aGUgYmxhY2stZGVwdGggKG51bWJlciBvZiBibGFjayBub2RlcykgZnJvbSByb290IHRvXG4gICAgLy8gbGVhdmVzIGlzIGVxdWFsIG9uIGJvdGggc2lkZXMuICBUaGlzIGZ1bmN0aW9uIHZlcmlmaWVzIHRoYXQgb3IgYXNzZXJ0cy5cbiAgICBjaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWQoKSAmJiB0aGlzLmxlZnQuaXNSZWQoKSkgdGhyb3cgZmFpbCgpO1xuICAgICAgICBpZiAodGhpcy5yaWdodC5pc1JlZCgpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxlZnQuY2hlY2soKTtcbiAgICAgICAgaWYgKGUgIT09IHRoaXMucmlnaHQuY2hlY2soKSkgdGhyb3cgZmFpbCgpO1xuICAgICAgICByZXR1cm4gZSArICh0aGlzLmlzUmVkKCkgPyAwIDogMSk7XG4gICAgfVxufVxuXG4gLy8gZW5kIExMUkJOb2RlXG4vLyBFbXB0eSBub2RlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBMTFJCIHRyZWVzLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbkxMUkJOb2RlLkVNUFRZID0gbnVsbCwgTExSQk5vZGUuUkVEID0gITAsIExMUkJOb2RlLkJMQUNLID0gITE7XG5cbi8vIGVuZCBMTFJCRW1wdHlOb2RlXG5MTFJCTm9kZS5FTVBUWSA9IG5ldyBcbi8vIFJlcHJlc2VudHMgYW4gZW1wdHkgbm9kZSAoYSBsZWFmIG5vZGUgaW4gdGhlIFJlZC1CbGFjayBUcmVlKS5cbmNsYXNzIExMUkJFbXB0eU5vZGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBnZXQga2V5KCkge1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbiAgICBnZXQgY29sb3IoKSB7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgZ2V0IHJpZ2h0KCkge1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUuXG4gICAgY29weShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IExMUkJOb2RlKGUsIHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlub3JkZXJUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldmVyc2VUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgY2hlY2soKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNvcnRlZFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBlbGVtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLlxuICpcbiAqIE5PVEU6IGlmIHByb3ZpZGVkIGNvbXBhcmF0b3IgcmV0dXJucyAwIGZvciB0d28gZWxlbWVudHMsIHdlIGNvbnNpZGVyIHRoZW0gdG9cbiAqIGJlIGVxdWFsIVxuICovXG5jbGFzcyBTb3J0ZWRTZXQge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gZSwgdGhpcy5kYXRhID0gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXMoZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5kYXRhLmdldChlKTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWF4S2V5KCk7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNpemU7XG4gICAgfVxuICAgIGluZGV4T2YoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmluZGV4T2YoZSk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBlbGVtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2goZSkge1xuICAgICAgICB0aGlzLmRhdGEuaW5vcmRlclRyYXZlcnNhbCgoKHQsIG4pID0+IChlKHQpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHJhbmdlWzBdICZsdDs9IGVsZW0gJmx0OyByYW5nZVsxXS4gKi8gICAgZm9yRWFjaEluUmFuZ2UoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlWzBdKTtcbiAgICAgICAgZm9yICg7bi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgciA9IG4uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcihyLmtleSwgZVsxXSkgPj0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgdChyLmtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogc3RhcnQgJmx0Oz0gZWxlbSB1bnRpbCBmYWxzZSBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgZm9yRWFjaFdoaWxlKGUsIHQpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiA9IHZvaWQgMCAhPT0gdCA/IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCkgOiB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTsgbi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKCFlKG4uZ2V0TmV4dCgpLmtleSkpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogRmluZHMgdGhlIGxlYXN0IGVsZW1lbnQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBlbGVtYC4gKi8gICAgZmlyc3RBZnRlck9yRXF1YWwoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKTtcbiAgICAgICAgcmV0dXJuIHQuaGFzTmV4dCgpID8gdC5nZXROZXh0KCkua2V5IDogbnVsbDtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkU2V0SXRlcmF0b3IodGhpcy5kYXRhLmdldEl0ZXJhdG9yKCkpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20oZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZFNldEl0ZXJhdG9yKHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZSkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGFuIGVsZW1lbnQgKi8gICAgYWRkKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKGUpLmluc2VydChlLCAhMCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhbiBlbGVtZW50ICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhcyhlKSA/IHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKGUpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpO1xuICAgIH1cbiAgICB1bmlvbldpdGgoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBgcmVzdWx0YCBhbHdheXMgcmVmZXJzIHRvIHRoZSBsYXJnZXIgb25lIG9mIHRoZSB0d28gc2V0cy5cbiAgICAgICAgICAgICAgICByZXR1cm4gdC5zaXplIDwgZS5zaXplICYmICh0ID0gZSwgZSA9IHRoaXMpLCBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdCA9IHQuYWRkKGUpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgU29ydGVkU2V0KSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSBlLnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpLCBuID0gZS5kYXRhLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO3QuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmdldE5leHQoKS5rZXksIHIgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdGhpcy5jb21wYXJhdG9yKGUsIHIpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHQpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKHQgPT4gZS5wdXNoKHQpKSksIFwiU29ydGVkU2V0KFwiICsgZS50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIGNvcHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IFNvcnRlZFNldCh0aGlzLmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdC5kYXRhID0gZSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIFNvcnRlZFNldEl0ZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuaXRlciA9IGU7XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuZ2V0TmV4dCgpLmtleTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5oYXNOZXh0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byBzb3J0ZWQgc2V0cyBmb3IgZXF1YWxpdHkgdXNpbmcgdGhlaXIgbmF0dXJhbCBvcmRlcmluZy4gVGhlXG4gKiBtZXRob2QgY29tcHV0ZXMgdGhlIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXRcbiAqIGlzIGluIGBhZnRlcmAgYnV0IG5vdCBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluXG4gKiBgYmVmb3JlYCBidXQgbWlzc2luZyBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBzZXQuXG4gKiBAcGFyYW0gYWZ0ZXIgLSBUaGUgZWxlbWVudHMgdG8gZGlmZiBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBzZXQuXG4gKiBAcGFyYW0gY29tcGFyYXRvciAtIFRoZSBjb21wYXJhdG9yIGZvciB0aGUgZWxlbWVudHMgaW4gYmVmb3JlIGFuZCBhZnRlci5cbiAqIEBwYXJhbSBvbkFkZCAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZiBgXG4gKiBhZnRlcmAgYnV0IG5vdCBgYmVmb3JlYC5cbiAqIEBwYXJhbSBvblJlbW92ZSAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZlxuICogYGJlZm9yZWAgYnV0IG5vdCBgYWZ0ZXJgLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIG5leHQgZWxlbWVudCBmcm9tIHRoZSBpdGVyYXRvciBvciBgdW5kZWZpbmVkYCBpZiBub25lIGF2YWlsYWJsZS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihlKSB7XG4gICAgcmV0dXJuIGUuaGFzTmV4dCgpID8gZS5nZXROZXh0KCkgOiB2b2lkIDA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2V0IG9mIGZpZWxkcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHBhcnRpYWxseSBwYXRjaCBhIGRvY3VtZW50LlxuICogRmllbGRNYXNrIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBPYmplY3RWYWx1ZS5cbiAqIEV4YW1wbGVzOlxuICogICBmb28gLSBPdmVyd3JpdGVzIGZvbyBlbnRpcmVseSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZS4gSWYgZm9vIGlzIG5vdFxuICogICAgICAgICBwcmVzZW50IGluIHRoZSBjb21wYW5pb24gT2JqZWN0VmFsdWUsIHRoZSBmaWVsZCBpcyBkZWxldGVkLlxuICogICBmb28uYmFyIC0gT3ZlcndyaXRlcyBvbmx5IHRoZSBmaWVsZCBiYXIgb2YgdGhlIG9iamVjdCBmb28uXG4gKiAgICAgICAgICAgICBJZiBmb28gaXMgbm90IGFuIG9iamVjdCwgZm9vIGlzIHJlcGxhY2VkIHdpdGggYW4gb2JqZWN0XG4gKiAgICAgICAgICAgICBjb250YWluaW5nIGZvb1xuICovIGNsYXNzIEZpZWxkTWFzayB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmZpZWxkcyA9IGUsIFxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRpb24gb2YgRmllbGRNYXNrXG4gICAgICAgIC8vIFNvcnQgdGhlIGZpZWxkIG1hc2sgdG8gc3VwcG9ydCBgRmllbGRNYXNrLmlzRXF1YWwoKWAgYW5kIGFzc2VydCBiZWxvdy5cbiAgICAgICAgZS5zb3J0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRNYXNrKFtdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBGaWVsZE1hc2sgb2JqZWN0IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhZGRpbmcgYWxsIHRoZSBnaXZlblxuICAgICAqIGZpZWxkcyBwYXRocyB0byB0aGlzIGZpZWxkIG1hc2suXG4gICAgICovICAgIHVuaW9uV2l0aChlKSB7XG4gICAgICAgIGxldCB0ID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGgkMS5jb21wYXJhdG9yKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZmllbGRzKSB0ID0gdC5hZGQoZSk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSB0ID0gdC5hZGQobik7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRNYXNrKHQudG9BcnJheSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCBgZmllbGRQYXRoYCBpcyBpbmNsdWRlZCBieSBhdCBsZWFzdCBvbmUgZmllbGQgaW4gdGhpcyBmaWVsZFxuICAgICAqIG1hc2suXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGFuIE8obikgb3BlcmF0aW9uLCB3aGVyZSBgbmAgaXMgdGhlIHNpemUgb2YgdGhlIGZpZWxkIG1hc2suXG4gICAgICovICAgIGNvdmVycyhlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmZpZWxkcykgaWYgKHQuaXNQcmVmaXhPZihlKSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2FycmF5RXF1YWxzKHRoaXMuZmllbGRzLCBlLmZpZWxkcywgKChlLCB0KSA9PiBlLmlzRXF1YWwodCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGVycm9yIGVuY291bnRlcmVkIHdoaWxlIGRlY29kaW5nIGJhc2U2NCBzdHJpbmcuXG4gKi8gY2xhc3MgX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpLCB0aGlzLm5hbWUgPSBcIkJhc2U2NERlY29kZUVycm9yXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIENvbnZlcnRzIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIGEgYmluYXJ5IHN0cmluZy4gKi9cbi8qKiBUcnVlIGlmIGFuZCBvbmx5IGlmIHRoZSBCYXNlNjQgY29udmVyc2lvbiBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc0Jhc2U2NEF2YWlsYWJsZSgpIHtcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgYXRvYjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1tdXRhYmxlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIFwicHJvdG9cIiBieXRlIHN0cmluZy5cbiAqXG4gKiBQcm90byBieXRlIHN0cmluZ3MgY2FuIGVpdGhlciBiZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmdzIG9yIFVpbnQ4QXJyYXlzIHdoZW5cbiAqIHNlbnQgb24gdGhlIHdpcmUuIFRoaXMgY2xhc3MgYWJzdHJhY3RzIGF3YXkgdGhpcyBkaWZmZXJlbnRpYXRpb24gYnkgaG9sZGluZ1xuICogdGhlIHByb3RvIGJ5dGUgc3RyaW5nIGluIGEgY29tbW9uIGNsYXNzIHRoYXQgbXVzdCBiZSBjb252ZXJ0ZWQgaW50byBhIHN0cmluZ1xuICogYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBwcm90by5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIEJ5dGVTdHJpbmcge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5iaW5hcnlTdHJpbmcgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZGVjb2RlQmFzZTY0KGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0b2IoZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCBgRE9NRXhjZXB0aW9uYCBpcyBkZWZpbmVkIGJlZm9yZSB1c2luZyBpdCB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIFwiUmVmZXJlbmNlRXJyb3I6IFByb3BlcnR5ICdET01FeGNlcHRpb24nIGRvZXNuJ3QgZXhpc3RcIiBpbiByZWFjdC1uYXRpdmUuXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzcxMTUpXG4gICAgICAgICAgICAgICAgdGhyb3cgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRE9NRXhjZXB0aW9uICYmIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gPyBuZXcgX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yKFwiSW52YWxpZCBiYXNlNjQgc3RyaW5nOiBcIiArIGUpIDogZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiogQ29udmVydHMgYSBiaW5hcnkgc3RyaW5nIHRvIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nLiAqLyAoZSk7XG4gICAgICAgIHJldHVybiBuZXcgQnl0ZVN0cmluZyh0KTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KGUpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk7IFJlbW92ZSB0aGUgY29weSBvZiB0aGUgYnl0ZSBzdHJpbmcgaGVyZSBhcyB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBpcyBmcmVxdWVudGx5IGNhbGxlZCBkdXJpbmcgaW5kZXhpbmcuXG4gICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhbiBVaW50OGFycmF5IHRvIGEgYmluYXJ5IHN0cmluZy5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfYmluYXJ5U3RyaW5nRnJvbVVpbnQ4QXJyYXkoZSkge1xuICAgICAgICAgICAgbGV0IHQgPSBcIlwiO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgKytuKSB0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZVtuXSk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGEgYmluYXJ5IHN0cmluZyB0byBhbiBVaW50OEFycmF5LlxuICovIChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlU3RyaW5nKHQpO1xuICAgIH1cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV4dDogKCkgPT4gZSA8IHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aCA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5iaW5hcnlTdHJpbmcuY2hhckNvZGVBdChlKyspLFxuICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZW5jb2RlQmFzZTY0KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBidG9hKGUpO1xuICAgICAgICB9KHRoaXMuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3VpbnQ4QXJyYXlGcm9tQmluYXJ5U3RyaW5nKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgVWludDhBcnJheShlLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHRbbl0gPSBlLmNoYXJDb2RlQXQobik7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvLyBBIFJlZ0V4cCBtYXRjaGluZyBJU08gODYwMSBVVEMgdGltZXN0YW1wcyB3aXRoIG9wdGlvbmFsIGZyYWN0aW9uLlxuICAgICAgICAodGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBhcHByb3hpbWF0ZUJ5dGVTaXplKCkge1xuICAgICAgICByZXR1cm4gMiAqIHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgY29tcGFyZVRvKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuYmluYXJ5U3RyaW5nLCBlLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlTdHJpbmcgPT09IGUuYmluYXJ5U3RyaW5nO1xuICAgIH1cbn1cblxuQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORyA9IG5ldyBCeXRlU3RyaW5nKFwiXCIpO1xuXG5jb25zdCBlZSA9IG5ldyBSZWdFeHAoL15cXGR7NH0tXFxkXFxkLVxcZFxcZFRcXGRcXGQ6XFxkXFxkOlxcZFxcZCg/OlxcLihcXGQrKSk/WiQvKTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdmFsdWVzIGZvciBhIHRpbWVzdGFtcCB2YWx1ZSBpbnRvIGEgXCJzZWNvbmRzIGFuZFxuICogbmFub3NcIiByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpIHtcbiAgICAvLyBUaGUganNvbiBpbnRlcmZhY2UgKGZvciB0aGUgYnJvd3Nlcikgd2lsbCByZXR1cm4gYW4gaXNvIHRpbWVzdGFtcCBzdHJpbmcsXG4gICAgLy8gd2hpbGUgdGhlIHByb3RvIGpzIGxpYnJhcnkgKGZvciBub2RlKSB3aWxsIHJldHVybiBhXG4gICAgLy8gZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBpbnN0YW5jZS5cbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoISFlKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkge1xuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcbiAgICAgICAgLy8gKG1pbGxpcyksIHNvIHdlIGRvIHNvbWUgY3VzdG9tIHBhcnNpbmcgaGVyZS5cbiAgICAgICAgLy8gUGFyc2UgdGhlIG5hbm9zIHJpZ2h0IG91dCBvZiB0aGUgc3RyaW5nLlxuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIGNvbnN0IG4gPSBlZS5leGVjKGUpO1xuICAgICAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoISFuKSwgblsxXSkge1xuICAgICAgICAgICAgLy8gUGFkIHRoZSBmcmFjdGlvbiBvdXQgdG8gOSBkaWdpdHMgKG5hbm9zKS5cbiAgICAgICAgICAgIGxldCBlID0gblsxXTtcbiAgICAgICAgICAgIGUgPSAoZSArIFwiMDAwMDAwMDAwXCIpLnN1YnN0cigwLCA5KSwgdCA9IE51bWJlcihlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQYXJzZSB0aGUgZGF0ZSB0byBnZXQgdGhlIHNlY29uZHMuXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBEYXRlKGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogTWF0aC5mbG9vcihyLmdldFRpbWUoKSAvIDFlMyksXG4gICAgICAgICAgICBuYW5vczogdFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuc2Vjb25kcyksXG4gICAgICAgIG5hbm9zOiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubmFub3MpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIG51bWJlcnMgaW50byBhIEphdmFTY3JpcHQgbnVtYmVyLlxuICogUmV0dXJucyAwIGlmIHRoZSB2YWx1ZSBpcyBub3QgbnVtZXJpYy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUpIHtcbiAgICAvLyBUT0RPKGJqb3JuaWNrKTogSGFuZGxlIGludDY0IGdyZWF0ZXIgdGhhbiA1MyBiaXRzLlxuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiBlID8gZSA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBOdW1iZXIoZSkgOiAwO1xufVxuXG4vKiogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBCbG9icyBpbnRvIGEgQnl0ZVN0cmluZy4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZSkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gQnl0ZVN0cmluZy5mcm9tQmFzZTY0U3RyaW5nKGUpIDogQnl0ZVN0cmluZy5mcm9tVWludDhBcnJheShlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsbHktYXBwbGllZCBTZXJ2ZXJUaW1lc3RhbXAuXG4gKlxuICogU2VydmVyIFRpbWVzdGFtcHMgYXJlIGJhY2tlZCBieSBNYXBWYWx1ZXMgdGhhdCBjb250YWluIGFuIGludGVybmFsIGZpZWxkXG4gKiBgX190eXBlX19gIHdpdGggYSB2YWx1ZSBvZiBgc2VydmVyX3RpbWVzdGFtcGAuIFRoZSBwcmV2aW91cyB2YWx1ZSBhbmQgbG9jYWxcbiAqIHdyaXRlIHRpbWUgYXJlIHN0b3JlZCBpbiBpdHMgYF9fcHJldmlvdXNfdmFsdWVfX2AgYW5kIGBfX2xvY2FsX3dyaXRlX3RpbWVfX2BcbiAqIGZpZWxkcyByZXNwZWN0aXZlbHkuXG4gKlxuICogTm90ZXM6XG4gKiAtIFNlcnZlclRpbWVzdGFtcFZhbHVlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhcyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGFcbiAqICAgdHJhbnNmb3JtLiBUaGV5IGNhbiBvbmx5IGV4aXN0IGluIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIFRoZXJlZm9yZVxuICogICB0aGV5IGRvIG5vdCBuZWVkIHRvIGJlIHBhcnNlZCBvciBzZXJpYWxpemVkLlxuICogLSBXaGVuIGV2YWx1YXRlZCBsb2NhbGx5IChlLmcuIGZvciBzbmFwc2hvdC5kYXRhKCkpLCB0aGV5IGJ5IGRlZmF1bHRcbiAqICAgZXZhbHVhdGUgdG8gYG51bGxgLiBUaGlzIGJlaGF2aW9yIGNhbiBiZSBjb25maWd1cmVkIGJ5IHBhc3NpbmcgY3VzdG9tXG4gKiAgIEZpZWxkVmFsdWVPcHRpb25zIHRvIHZhbHVlKCkuXG4gKiAtIFdpdGggcmVzcGVjdCB0byBvdGhlciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMsIHRoZXkgc29ydCBieSB0aGVpclxuICogICBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNTZXJ2ZXJUaW1lc3RhbXAoZSkge1xuICAgIHZhciB0LCBuO1xuICAgIHJldHVybiBcInNlcnZlcl90aW1lc3RhbXBcIiA9PT0gKG51bGwgPT09IChuID0gKChudWxsID09PSAodCA9IG51bGwgPT0gZSA/IHZvaWQgMCA6IGUubWFwVmFsdWUpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZmllbGRzKSB8fCB7fSkuX190eXBlX18pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uc3RyaW5nVmFsdWUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgU2VydmVyVGltZXN0YW1wIHByb3RvIHZhbHVlICh1c2luZyB0aGUgaW50ZXJuYWwgZm9ybWF0KS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgYmVmb3JlIHRoaXMgU2VydmVyVGltZXN0YW1wIHdhcyBzZXQuXG4gKlxuICogUHJlc2VydmluZyB0aGUgcHJldmlvdXMgdmFsdWVzIGFsbG93cyB0aGUgdXNlciB0byBkaXNwbGF5IHRoZSBsYXN0IHJlc29sZWRcbiAqIHZhbHVlIHVudGlsIHRoZSBiYWNrZW5kIHJlc3BvbmRzIHdpdGggdGhlIHRpbWVzdGFtcC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUoZSkge1xuICAgIGNvbnN0IHQgPSBlLm1hcFZhbHVlLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX187XG4gICAgcmV0dXJuIF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcCh0KSA/IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKHQpIDogdDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsb2NhbCB0aW1lIGF0IHdoaWNoIHRoaXMgdGltZXN0YW1wIHdhcyBmaXJzdCBzZXQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlLm1hcFZhbHVlLmZpZWxkcy5fX2xvY2FsX3dyaXRlX3RpbWVfXy50aW1lc3RhbXBWYWx1ZSk7XG4gICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodC5zZWNvbmRzLCB0Lm5hbm9zKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRGF0YWJhc2VJbmZvIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRGF0YWJhc2VJbmZvIHVzaW5nIHRoZSBwcm92aWRlZCBob3N0LCBkYXRhYmFzZUlkIGFuZFxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgdG8gdXNlLlxuICAgICAqIEBwYXJhbSBhcHBJZCAtIFRoZSBGaXJlYmFzZSBBcHAgSWQuXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IC0gQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxuICAgICAqIHN0b3JhZ2UgKHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGF0YWJhc2VJZCkuXG4gICAgICogQHBhcmFtIGhvc3QgLSBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgaG9zdCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSBzc2wgLSBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSBmb3JjZUxvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGZvcmNlTG9uZ1BvbGxpbmcgb3B0aW9uXG4gICAgICogd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gYXV0b0RldGVjdExvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGRldGVjdEJ1ZmZlcmluZ1Byb3h5XG4gICAgICogb3B0aW9uIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGxvbmdQb2xsaW5nT3B0aW9ucyBPcHRpb25zIHRoYXQgY29uZmlndXJlIGxvbmctcG9sbGluZy5cbiAgICAgKiBAcGFyYW0gdXNlRmV0Y2hTdHJlYW1zIFdoZXRoZXIgdG8gdXNlIHRoZSBGZXRjaCBBUEkgaW5zdGVhZCBvZlxuICAgICAqIFhNTEhUVFBSZXF1ZXN0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcywgbywgXywgYSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLmFwcElkID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuaG9zdCA9IHIsIHRoaXMuc3NsID0gaSwgXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHMsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gbywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSBfLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSBhO1xuICAgIH1cbn1cblxuLyoqIFRoZSBkZWZhdWx0IGRhdGFiYXNlIG5hbWUgZm9yIGEgcHJvamVjdC4gKi9cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZGF0YWJhc2UgSUQgYSBGaXJlc3RvcmUgY2xpZW50IGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBEYXRhYmFzZUlkIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gZSwgdGhpcy5kYXRhYmFzZSA9IHQgfHwgXCIoZGVmYXVsdClcIjtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlSWQoXCJcIiwgXCJcIik7XG4gICAgfVxuICAgIGdldCBpc0RlZmF1bHREYXRhYmFzZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiKGRlZmF1bHQpXCIgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIERhdGFiYXNlSWQgJiYgZS5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIGUuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgdGUgPSB7XG4gICAgbWFwVmFsdWU6IHtcbiAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcIl9fbWF4X19cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSwgbmUgPSB7XG4gICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxufTtcblxuLyoqIEV4dHJhY3RzIHRoZSBiYWNrZW5kJ3MgdHlwZSBvcmRlciBmb3IgdGhlIHByb3ZpZGVkIHZhbHVlLiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3R5cGVPcmRlcihlKSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gZSA/IDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSB8fCBcImRvdWJsZVZhbHVlXCIgaW4gZSA/IDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUgPyAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6IFwic3RyaW5nVmFsdWVcIiBpbiBlID8gNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8gNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGUgPyA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUgPyA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOiBcIm1hcFZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcChlKSA/IDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDogX19QUklWQVRFX2lzTWF4VmFsdWUoZSkgPyA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6IDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6IGZhaWwoKTtcbn1cblxuLyoqIFRlc3RzIGBsZWZ0YCBhbmQgYHJpZ2h0YCBmb3IgZXF1YWxpdHkgYmFzZWQgb24gdGhlIGJhY2tlbmQgc2VtYW50aWNzLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZSwgdCkge1xuICAgIGlmIChlID09PSB0KSByZXR1cm4gITA7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV90eXBlT3JkZXIoZSk7XG4gICAgaWYgKG4gIT09IF9fUFJJVkFURV90eXBlT3JkZXIodCkpIHJldHVybiAhMTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgOTAwNzE5OTI1NDc0MDk5MSAvKiBUeXBlT3JkZXIuTWF4VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGUuYm9vbGVhblZhbHVlID09PSB0LmJvb2xlYW5WYWx1ZTtcblxuICAgICAgY2FzZSA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSkuaXNFcXVhbChfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUodCkpO1xuXG4gICAgICBjYXNlIDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV90aW1lc3RhbXBFcXVhbHMoZSwgdCkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUudGltZXN0YW1wVmFsdWUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSAmJiBlLnRpbWVzdGFtcFZhbHVlLmxlbmd0aCA9PT0gdC50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBlcXVhbGl0eSBmb3IgSVNPIDg2MDEgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIGUudGltZXN0YW1wVmFsdWUgPT09IHQudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlLnRpbWVzdGFtcFZhbHVlKSwgciA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAodC50aW1lc3RhbXBWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5zZWNvbmRzID09PSByLnNlY29uZHMgJiYgbi5uYW5vcyA9PT0gci5uYW5vcztcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBlLnN0cmluZ1ZhbHVlID09PSB0LnN0cmluZ1ZhbHVlO1xuXG4gICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfYmxvYkVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZS5ieXRlc1ZhbHVlKS5pc0VxdWFsKF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKHQuYnl0ZXNWYWx1ZSkpO1xuICAgICAgICB9KGUsIHQpO1xuXG4gICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGUucmVmZXJlbmNlVmFsdWUgPT09IHQucmVmZXJlbmNlVmFsdWU7XG5cbiAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZ2VvUG9pbnRFcXVhbHMoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlKSA9PT0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0Lmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpICYmIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSkgPT09IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSk7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX251bWJlckVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiBlICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gdCkgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5pbnRlZ2VyVmFsdWUpID09PSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuaW50ZWdlclZhbHVlKTtcbiAgICAgICAgICAgIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gZSAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuZG91YmxlVmFsdWUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiA9PT0gciA/IF9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyhuKSA9PT0gX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKHIpIDogaXNOYU4obikgJiYgaXNOYU4ocik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfYXJyYXlFcXVhbHMoZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgdC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgX19QUklWQVRFX3ZhbHVlRXF1YWxzKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX29iamVjdEVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5tYXBWYWx1ZS5maWVsZHMgfHwge30sIHIgPSB0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfb2JqZWN0U2l6ZShuKSAhPT0gX19QUklWQVRFX29iamVjdFNpemUocikpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBpbiBuKSBpZiAobi5oYXNPd25Qcm9wZXJ0eShlKSAmJiAodm9pZCAwID09PSByW2VdIHx8ICFfX1BSSVZBVEVfdmFsdWVFcXVhbHMobltlXSwgcltlXSkpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgQXJyYXlWYWx1ZSBjb250YWlucyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuICovIChlLCB0KTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnMoZSwgdCkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IChlLnZhbHVlcyB8fCBbXSkuZmluZCgoZSA9PiBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShlLCB0KSB7XG4gICAgaWYgKGUgPT09IHQpIHJldHVybiAwO1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdHlwZU9yZGVyKGUpLCByID0gX19QUklWQVRFX3R5cGVPcmRlcih0KTtcbiAgICBpZiAobiAhPT0gcikgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4sIHIpO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmJvb2xlYW5WYWx1ZSwgdC5ib29sZWFuVmFsdWUpO1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlTnVtYmVycyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKSwgciA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbiA8IHIgPyAtMSA6IG4gPiByID8gMSA6IG4gPT09IHIgPyAwIDogXG4gICAgICAgICAgICAvLyBvbmUgb3IgYm90aCBhcmUgTmFOLlxuICAgICAgICAgICAgaXNOYU4obikgPyBpc05hTihyKSA/IDAgOiAtMSA6IDE7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbXBhcmVUaW1lc3RhbXBzKGUudGltZXN0YW1wVmFsdWUsIHQudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb21wYXJlVGltZXN0YW1wcyhfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSksIF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZSh0KSk7XG5cbiAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5zdHJpbmdWYWx1ZSwgdC5zdHJpbmdWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQmxvYnMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcodCk7XG4gICAgICAgICAgICByZXR1cm4gbi5jb21wYXJlVG8ocik7XG4gICAgICAgIH0oZS5ieXRlc1ZhbHVlLCB0LmJ5dGVzVmFsdWUpO1xuXG4gICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlUmVmZXJlbmNlcyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5zcGxpdChcIi9cIiksIHIgPSB0LnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgbi5sZW5ndGggJiYgZSA8IHIubGVuZ3RoOyBlKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IobltlXSwgcltlXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IHQpIHJldHVybiB0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4ubGVuZ3RoLCByLmxlbmd0aCk7XG4gICAgICAgIH0oZS5yZWZlcmVuY2VWYWx1ZSwgdC5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUdlb1BvaW50cyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxhdGl0dWRlKSwgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmxhdGl0dWRlKSk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxvbmdpdHVkZSksIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5sb25naXR1ZGUpKTtcbiAgICAgICAgfShlLmdlb1BvaW50VmFsdWUsIHQuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUFycmF5cyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS52YWx1ZXMgfHwgW10sIHIgPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgbi5sZW5ndGggJiYgZSA8IHIubGVuZ3RoOyArK2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShuW2VdLCByW2VdKTtcbiAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfShlLmFycmF5VmFsdWUsIHQuYXJyYXlWYWx1ZSk7XG5cbiAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlTWFwcyhlLCB0KSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdGUubWFwVmFsdWUgJiYgdCA9PT0gdGUubWFwVmFsdWUpIHJldHVybiAwO1xuICAgICAgICAgICAgaWYgKGUgPT09IHRlLm1hcFZhbHVlKSByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmICh0ID09PSB0ZS5tYXBWYWx1ZSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZmllbGRzIHx8IHt9LCByID0gT2JqZWN0LmtleXMobiksIGkgPSB0LmZpZWxkcyB8fCB7fSwgcyA9IE9iamVjdC5rZXlzKGkpO1xuICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggTWFwVmFsdWVzIGFyZSBsaWtlbHkgc29ydGVkIGNvcnJlY3RseSBiYXNlZCBvbiB0aGVpciBpbnNlcnRpb25cbiAgICAgICAgICAgIC8vIG9yZGVyIChlLmcuIHdoZW4gcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCksIGxvY2FsIG1vZGlmaWNhdGlvbnMgY2FuIGJyaW5nXG4gICAgICAgICAgICAvLyBlbGVtZW50cyBvdXQgb2Ygb3JkZXIuIFdlIG5lZWQgdG8gcmUtc29ydCB0aGUgZWxlbWVudHMgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgICAgIC8vIGNhbm9uaWNhbCBJRHMgYXJlIGluZGVwZW5kZW50IG9mIGluc2VydGlvbiBvcmRlci5cbiAgICAgICAgICAgIHIuc29ydCgpLCBzLnNvcnQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgci5sZW5ndGggJiYgZSA8IHMubGVuZ3RoOyArK2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IocltlXSwgc1tlXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IHQpIHJldHVybiB0O1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKG5bcltlXV0sIGlbc1tlXV0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBvKSByZXR1cm4gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihyLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogR2VuZXJhdGVzIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZSBwcm92aWRlZCBmaWVsZCB2YWx1ZSAoYXMgdXNlZCBpbiBUYXJnZXRcbiAqIHNlcmlhbGl6YXRpb24pLlxuICovIChlLm1hcFZhbHVlLCB0Lm1hcFZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVUaW1lc3RhbXBzKGUsIHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIGUubGVuZ3RoID09PSB0Lmxlbmd0aCkgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUsIHQpO1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcCh0KSwgaSA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4uc2Vjb25kcywgci5zZWNvbmRzKTtcbiAgICByZXR1cm4gMCAhPT0gaSA/IGkgOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLm5hbm9zLCByLm5hbm9zKTtcbn1cblxuZnVuY3Rpb24gY2Fub25pY2FsSWQoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2Fub25pZnlWYWx1ZShlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5VmFsdWUoZSkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIGUgPyBcIm51bGxcIiA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IFwiXCIgKyBlLmJvb2xlYW5WYWx1ZSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSA/IFwiXCIgKyBlLmludGVnZXJWYWx1ZSA6IFwiZG91YmxlVmFsdWVcIiBpbiBlID8gXCJcIiArIGUuZG91YmxlVmFsdWUgOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVRpbWVzdGFtcChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpO1xuICAgICAgICByZXR1cm4gYHRpbWUoJHt0LnNlY29uZHN9LCR7dC5uYW5vc30pYDtcbiAgICB9KGUudGltZXN0YW1wVmFsdWUpIDogXCJzdHJpbmdWYWx1ZVwiIGluIGUgPyBlLnN0cmluZ1ZhbHVlIDogXCJieXRlc1ZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeUJ5dGVTdHJpbmcoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZSkudG9CYXNlNjQoKTtcbiAgICB9KGUuYnl0ZXNWYWx1ZSkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVJlZmVyZW5jZShlKSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudEtleS5mcm9tTmFtZShlKS50b1N0cmluZygpO1xuICAgIH0oZS5yZWZlcmVuY2VWYWx1ZSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5R2VvUG9pbnQoZSkge1xuICAgICAgICByZXR1cm4gYGdlbygke2UubGF0aXR1ZGV9LCR7ZS5sb25naXR1ZGV9KWA7XG4gICAgfShlLmdlb1BvaW50VmFsdWUpIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeUFycmF5KGUpIHtcbiAgICAgICAgbGV0IHQgPSBcIltcIiwgbiA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZS52YWx1ZXMgfHwgW10pIG4gPyBuID0gITEgOiB0ICs9IFwiLFwiLCB0ICs9IF9fUFJJVkFURV9jYW5vbmlmeVZhbHVlKHIpO1xuICAgICAgICByZXR1cm4gdCArIFwiXVwiO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgKGFuZCB3aWxkbHkgaW5hY2N1cmF0ZSkgaW4tbWVtb3J5IHNpemUgZm9yIHRoZSBmaWVsZFxuICogdmFsdWUuXG4gKlxuICogVGhlIG1lbW9yeSBzaXplIHRha2VzIGludG8gYWNjb3VudCBvbmx5IHRoZSBhY3R1YWwgdXNlciBkYXRhIGFzIGl0IHJlc2lkZXNcbiAqIGluIG1lbW9yeSBhbmQgaWdub3JlcyBvYmplY3Qgb3ZlcmhlYWQuXG4gKi8gKGUuYXJyYXlWYWx1ZSkgOiBcIm1hcFZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeU1hcChlKSB7XG4gICAgICAgIC8vIEl0ZXJhdGlvbiBvcmRlciBpbiBKYXZhU2NyaXB0IGlzIG5vdCBndWFyYW50ZWVkLiBUbyBlbnN1cmUgdGhhdCB3ZSBnZW5lcmF0ZVxuICAgICAgICAvLyBtYXRjaGluZyBjYW5vbmljYWwgSURzIGZvciBpZGVudGljYWwgbWFwcywgd2UgbmVlZCB0byBzb3J0IHRoZSBrZXlzLlxuICAgICAgICBjb25zdCB0ID0gT2JqZWN0LmtleXMoZS5maWVsZHMgfHwge30pLnNvcnQoKTtcbiAgICAgICAgbGV0IG4gPSBcIntcIiwgciA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdCkgciA/IHIgPSAhMSA6IG4gKz0gXCIsXCIsIG4gKz0gYCR7aX06JHtfX1BSSVZBVEVfY2Fub25pZnlWYWx1ZShlLmZpZWxkc1tpXSl9YDtcbiAgICAgICAgcmV0dXJuIG4gKyBcIn1cIjtcbiAgICB9KGUubWFwVmFsdWUpIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZShlKSB7XG4gICAgc3dpdGNoIChfX1BSSVZBVEVfdHlwZU9yZGVyKGUpKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiA0O1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDg7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgLy8gR2VvUG9pbnRzIGFyZSBtYWRlIHVwIG9mIHR3byBkaXN0aW5jdCBudW1iZXJzIChsYXRpdHVkZSArIGxvbmdpdHVkZSlcbiAgICAgICAgcmV0dXJuIDE2O1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKGUpO1xuICAgICAgICByZXR1cm4gdCA/IDE2ICsgX19QUklWQVRFX2VzdGltYXRlQnl0ZVNpemUodCkgOiAxNjtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0RhdGFfc3RydWN0dXJlczpcbiAgICAgICAgLy8gXCJKYXZhU2NyaXB0J3MgU3RyaW5nIHR5cGUgaXMgWy4uLl0gYSBzZXQgb2YgZWxlbWVudHMgb2YgMTYtYml0IHVuc2lnbmVkXG4gICAgICAgIC8vIGludGVnZXIgdmFsdWVzXCJcbiAgICAgICAgcmV0dXJuIDIgKiBlLnN0cmluZ1ZhbHVlLmxlbmd0aDtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZS5ieXRlc1ZhbHVlKS5hcHByb3hpbWF0ZUJ5dGVTaXplKCk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5yZWZlcmVuY2VWYWx1ZS5sZW5ndGg7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZXN0aW1hdGVBcnJheUJ5dGVTaXplKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAoZS52YWx1ZXMgfHwgW10pLnJlZHVjZSgoKGUsIHQpID0+IGUgKyBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZSh0KSksIDApO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZGF0YWJhc2UgYW5kIGtleS4gKi8gKGUuYXJyYXlWYWx1ZSk7XG5cbiAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9lc3RpbWF0ZU1hcEJ5dGVTaXplKGUpIHtcbiAgICAgICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgICAgIHJldHVybiBmb3JFYWNoKGUuZmllbGRzLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0ICs9IGUubGVuZ3RoICsgX19QUklWQVRFX2VzdGltYXRlQnl0ZVNpemUobik7XG4gICAgICAgICAgICB9KSksIHQ7XG4gICAgICAgIH0oZS5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZWZWYWx1ZShlLCB0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVmZXJlbmNlVmFsdWU6IGBwcm9qZWN0cy8ke2UucHJvamVjdElkfS9kYXRhYmFzZXMvJHtlLmRhdGFiYXNlfS9kb2N1bWVudHMvJHt0LnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YFxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBJbnRlZ2VyVmFsdWUgLiAqLyBmdW5jdGlvbiBpc0ludGVnZXIoZSkge1xuICAgIHJldHVybiAhIWUgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiBlO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBEb3VibGVWYWx1ZS4gKi9cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBBcnJheVZhbHVlLiAqL1xuZnVuY3Rpb24gaXNBcnJheShlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcImFycmF5VmFsdWVcIiBpbiBlO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBOdWxsVmFsdWUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc051bGxWYWx1ZShlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcIm51bGxWYWx1ZVwiIGluIGU7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBOYU4uICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc05hblZhbHVlKGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwiZG91YmxlVmFsdWVcIiBpbiBlICYmIGlzTmFOKE51bWJlcihlLmRvdWJsZVZhbHVlKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE1hcFZhbHVlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNNYXBWYWx1ZShlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcIm1hcFZhbHVlXCIgaW4gZTtcbn1cblxuLyoqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgYHNvdXJjZWAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kZWVwQ2xvbmUoZSkge1xuICAgIGlmIChlLmdlb1BvaW50VmFsdWUpIHJldHVybiB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIGUuZ2VvUG9pbnRWYWx1ZSlcbiAgICB9O1xuICAgIGlmIChlLnRpbWVzdGFtcFZhbHVlICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUudGltZXN0YW1wVmFsdWUpIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCBlLnRpbWVzdGFtcFZhbHVlKVxuICAgIH07XG4gICAgaWYgKGUubWFwVmFsdWUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZm9yRWFjaChlLm1hcFZhbHVlLmZpZWxkcywgKChlLCBuKSA9PiB0Lm1hcFZhbHVlLmZpZWxkc1tlXSA9IF9fUFJJVkFURV9kZWVwQ2xvbmUobikpKSwgXG4gICAgICAgIHQ7XG4gICAgfVxuICAgIGlmIChlLmFycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgKGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pLmxlbmd0aDsgKytuKSB0LmFycmF5VmFsdWUudmFsdWVzW25dID0gX19QUklWQVRFX2RlZXBDbG9uZShlLmFycmF5VmFsdWUudmFsdWVzW25dKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBlKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgVmFsdWUgcmVwcmVzZW50cyB0aGUgY2Fub25pY2FsIHtAbGluayAjTUFYX1ZBTFVFfSAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc01heFZhbHVlKGUpIHtcbiAgICByZXR1cm4gXCJfX21heF9fXCIgPT09ICgoKGUubWFwVmFsdWUgfHwge30pLmZpZWxkcyB8fCB7fSkuX190eXBlX18gfHwge30pLnN0cmluZ1ZhbHVlO1xufVxuXG4vKiogUmV0dXJucyB0aGUgbG93ZXN0IHZhbHVlIGZvciB0aGUgZ2l2ZW4gdmFsdWUgdHlwZSAoaW5jbHVzaXZlKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlc0dldExvd2VyQm91bmQoZSkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIGUgPyBuZSA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYm9vbGVhblZhbHVlOiAhMVxuICAgIH0gOiBcImludGVnZXJWYWx1ZVwiIGluIGUgfHwgXCJkb3VibGVWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICB9IDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlxuICAgICAgICB9XG4gICAgfSA6IFwic3RyaW5nVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBzdHJpbmdWYWx1ZTogXCJcIlxuICAgIH0gOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBieXRlc1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiBlID8gX19QUklWQVRFX3JlZlZhbHVlKERhdGFiYXNlSWQuZW1wdHkoKSwgRG9jdW1lbnRLZXkuZW1wdHkoKSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogLTkwLFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiAtMTgwXG4gICAgICAgIH1cbiAgICB9IDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYXJyYXlWYWx1ZToge31cbiAgICB9IDogXCJtYXBWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIG1hcFZhbHVlOiB7fVxuICAgIH0gOiBmYWlsKCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBsYXJnZXN0IHZhbHVlIGZvciB0aGUgZ2l2ZW4gdmFsdWUgdHlwZSAoZXhjbHVzaXZlKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlc0dldFVwcGVyQm91bmQoZSkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGJvb2xlYW5WYWx1ZTogITFcbiAgICB9IDogXCJib29sZWFuVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgfSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSB8fCBcImRvdWJsZVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgIHNlY29uZHM6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXG4gICAgICAgIH1cbiAgICB9IDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIHN0cmluZ1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwic3RyaW5nVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBieXRlc1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwiYnl0ZXNWYWx1ZVwiIGluIGUgPyBfX1BSSVZBVEVfcmVmVmFsdWUoRGF0YWJhc2VJZC5lbXB0eSgpLCBEb2N1bWVudEtleS5lbXB0eSgpKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogLTkwLFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiAtMTgwXG4gICAgICAgIH1cbiAgICB9IDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYXJyYXlWYWx1ZToge31cbiAgICB9IDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgfSA6IFwibWFwVmFsdWVcIiBpbiBlID8gdGUgOiBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb3dlckJvdW5kQ29tcGFyZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUoZS52YWx1ZSwgdC52YWx1ZSk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogZS5pbmNsdXNpdmUgJiYgIXQuaW5jbHVzaXZlID8gLTEgOiAhZS5pbmNsdXNpdmUgJiYgdC5pbmNsdXNpdmUgPyAxIDogMDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3VwcGVyQm91bmRDb21wYXJlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShlLnZhbHVlLCB0LnZhbHVlKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBlLmluY2x1c2l2ZSAmJiAhdC5pbmNsdXNpdmUgPyAxIDogIWUuaW5jbHVzaXZlICYmIHQuaW5jbHVzaXZlID8gLTEgOiAwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBPYmplY3RWYWx1ZSByZXByZXNlbnRzIGEgTWFwVmFsdWUgaW4gdGhlIEZpcmVzdG9yZSBQcm90byBhbmQgb2ZmZXJzIHRoZVxuICogYWJpbGl0eSB0byBhZGQgYW5kIHJlbW92ZSBmaWVsZHMgKHZpYSB0aGUgT2JqZWN0VmFsdWVCdWlsZGVyKS5cbiAqLyBjbGFzcyBPYmplY3RWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IE9iamVjdFZhbHVlKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgYXQgdGhlIGdpdmVuIHBhdGggb3IgbnVsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gdGhlIHBhdGggdG8gc2VhcmNoXG4gICAgICogQHJldHVybnMgVGhlIHZhbHVlIGF0IHRoZSBwYXRoIG9yIG51bGwgaWYgdGhlIHBhdGggaXMgbm90IHNldC5cbiAgICAgKi8gICAgZmllbGQoZSkge1xuICAgICAgICBpZiAoZS5pc0VtcHR5KCkpIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgdCA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoIC0gMTsgKytuKSBpZiAodCA9ICh0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fSlbZS5nZXQobildLCBcbiAgICAgICAgICAgICFfX1BSSVZBVEVfaXNNYXBWYWx1ZSh0KSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdCA9ICh0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fSlbZS5sYXN0U2VnbWVudCgpXSwgdCB8fCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGZpZWxkIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gc2V0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICovICAgIHNldChlLCB0KSB7XG4gICAgICAgIHRoaXMuZ2V0RmllbGRzTWFwKGUucG9wTGFzdCgpKVtlLmxhc3RTZWdtZW50KCldID0gX19QUklWQVRFX2RlZXBDbG9uZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvdmlkZWQgZmllbGRzIHRvIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSAtIEEgbWFwIG9mIGZpZWxkcyB0byB2YWx1ZXMgKG9yIG51bGwgZm9yIGRlbGV0ZXMpLlxuICAgICAqLyAgICBzZXRBbGwoZSkge1xuICAgICAgICBsZXQgdCA9IEZpZWxkUGF0aCQxLmVtcHR5UGF0aCgpLCBuID0ge30sIHIgPSBbXTtcbiAgICAgICAgZS5mb3JFYWNoKCgoZSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0LmlzSW1tZWRpYXRlUGFyZW50T2YoaSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYXQgdGhpcyBwYXJlbnQgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5nZXRGaWVsZHNNYXAodCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoZSwgbiwgciksIG4gPSB7fSwgciA9IFtdLCB0ID0gaS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlID8gbltpLmxhc3RTZWdtZW50KCldID0gX19QUklWQVRFX2RlZXBDbG9uZShlKSA6IHIucHVzaChpLmxhc3RTZWdtZW50KCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmdldEZpZWxkc01hcCh0KTtcbiAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoaSwgbiwgcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGZpZWxkIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4gSWYgdGhlcmUgaXMgbm8gZmllbGQgYXQgdGhlXG4gICAgICogc3BlY2lmaWVkIHBhdGgsIG5vdGhpbmcgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gcmVtb3ZlLlxuICAgICAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5maWVsZChlLnBvcExhc3QoKSk7XG4gICAgICAgIF9fUFJJVkFURV9pc01hcFZhbHVlKHQpICYmIHQubWFwVmFsdWUuZmllbGRzICYmIGRlbGV0ZSB0Lm1hcFZhbHVlLmZpZWxkc1tlLmxhc3RTZWdtZW50KCldO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWx1ZUVxdWFscyh0aGlzLnZhbHVlLCBlLnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHRoYXQgY29udGFpbnMgdGhlIGxlYWYgZWxlbWVudCBvZiBgcGF0aGAuIElmIHRoZSBwYXJlbnRcbiAgICAgKiBlbnRyeSBkb2VzIG5vdCB5ZXQgZXhpc3QsIG9yIGlmIGl0IGlzIG5vdCBhIG1hcCwgYSBuZXcgbWFwIHdpbGwgYmUgY3JlYXRlZC5cbiAgICAgKi8gICAgZ2V0RmllbGRzTWFwKGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLnZhbHVlO1xuICAgICAgICB0Lm1hcFZhbHVlLmZpZWxkcyB8fCAodC5tYXBWYWx1ZSA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgbGV0IHIgPSB0Lm1hcFZhbHVlLmZpZWxkc1tlLmdldChuKV07XG4gICAgICAgICAgICBfX1BSSVZBVEVfaXNNYXBWYWx1ZShyKSAmJiByLm1hcFZhbHVlLmZpZWxkcyB8fCAociA9IHtcbiAgICAgICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdC5tYXBWYWx1ZS5maWVsZHNbZS5nZXQobildID0gciksIHQgPSByO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lm1hcFZhbHVlLmZpZWxkcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYGZpZWxkc01hcGAgYnkgYWRkaW5nLCByZXBsYWNpbmcgb3IgZGVsZXRpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIGFwcGx5Q2hhbmdlcyhlLCB0LCBuKSB7XG4gICAgICAgIGZvckVhY2godCwgKCh0LCBuKSA9PiBlW3RdID0gbikpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgZGVsZXRlIGVbdF07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IE9iamVjdFZhbHVlKF9fUFJJVkFURV9kZWVwQ2xvbmUodGhpcy52YWx1ZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmllbGRNYXNrIGJ1aWx0IGZyb20gYWxsIGZpZWxkcyBpbiBhIE1hcFZhbHVlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9leHRyYWN0RmllbGRNYXNrKGUpIHtcbiAgICBjb25zdCB0ID0gW107XG4gICAgcmV0dXJuIGZvckVhY2goZS5maWVsZHMsICgoZSwgbikgPT4ge1xuICAgICAgICBjb25zdCByID0gbmV3IEZpZWxkUGF0aCQxKFsgZSBdKTtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9pc01hcFZhbHVlKG4pKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX2V4dHJhY3RGaWVsZE1hc2sobi5tYXBWYWx1ZSkuZmllbGRzO1xuICAgICAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXG4gICAgICAgICAgICB0LnB1c2gocik7IGVsc2UgXG4gICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGxlYWYgbm9kZXMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdC5wdXNoKHIuY2hpbGQobikpO1xuICAgICAgICB9IGVsc2UgXG4gICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZSBsZWFmXG4gICAgICAgIC8vIG5vZGVzLlxuICAgICAgICB0LnB1c2gocik7XG4gICAgfSkpLCBuZXcgRmllbGRNYXNrKHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlIHdpdGggYSBrZXksIHZlcnNpb24sIGRhdGEgYW5kIHdoZXRoZXIgaXRcbiAqIGhhcyBsb2NhbCBtdXRhdGlvbnMgYXBwbGllZCB0byBpdC5cbiAqXG4gKiBEb2N1bWVudHMgY2FuIHRyYW5zaXRpb24gYmV0d2VlbiBzdGF0ZXMgdmlhIGBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KClgLFxuICogYGNvbnZlcnRUb05vRG9jdW1lbnQoKWAgYW5kIGBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQoKWAuIElmIGEgZG9jdW1lbnQgZG9lc1xuICogbm90IHRyYW5zaXRpb24gdG8gb25lIG9mIHRoZXNlIHN0YXRlcyBldmVuIGFmdGVyIGFsbCBtdXRhdGlvbnMgaGF2ZSBiZWVuXG4gKiBhcHBsaWVkLCBgaXNWYWxpZERvY3VtZW50KClgIHJldHVybnMgZmFsc2UgYW5kIHRoZSBkb2N1bWVudCBzaG91bGQgYmUgcmVtb3ZlZFxuICogZnJvbSBhbGwgdmlld3MuXG4gKi8gY2xhc3MgTXV0YWJsZURvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzLCBvKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZSwgdGhpcy5kb2N1bWVudFR5cGUgPSB0LCB0aGlzLnZlcnNpb24gPSBuLCB0aGlzLnJlYWRUaW1lID0gciwgdGhpcy5jcmVhdGVUaW1lID0gaSwgXG4gICAgICAgIHRoaXMuZGF0YSA9IHMsIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkb2N1bWVudCB3aXRoIG5vIGtub3duIHZlcnNpb24gb3IgZGF0YSwgYnV0IHdoaWNoIGNhbiBzZXJ2ZSBhc1xuICAgICAqIGJhc2UgZG9jdW1lbnQgZm9yIG11dGF0aW9ucy5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ludmFsaWREb2N1bWVudChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YWJsZURvY3VtZW50KGUsIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgT2JqZWN0VmFsdWUuZW1wdHkoKSwgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCB3aXRoIHRoZSBnaXZlbiBkYXRhIGF0IHRoZVxuICAgICAqIGdpdmVuIHZlcnNpb24uXG4gICAgICovICAgIHN0YXRpYyBuZXdGb3VuZERvY3VtZW50KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQoZSwgMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyB0LCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBuLCByLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBub3QgZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24uICovICAgIHN0YXRpYyBuZXdOb0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQoZSwgMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyB0LCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIE9iamVjdFZhbHVlLmVtcHR5KCksIDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogd2hvc2UgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBzdGF0aWMgbmV3VW5rbm93bkRvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQoZSwgMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHQsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgT2JqZWN0VmFsdWUuZW1wdHkoKSwgMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhbmQgdGhhdCBpdHMgdmVyc2lvblxuICAgICAqIGFuZCBkYXRhIGFyZSBrbm93bi5cbiAgICAgKi8gICAgY29udmVydFRvRm91bmREb2N1bWVudChlLCB0KSB7XG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgaXMgc3dpdGNoaW5nIHN0YXRlIGZyb20gYmVpbmcgYW4gaW52YWxpZCBvciBkZWxldGVkXG4gICAgICAgIC8vIGRvY3VtZW50IHRvIGEgdmFsaWQgKEZPVU5EX0RPQ1VNRU5UKSBkb2N1bWVudCwgZWl0aGVyIGR1ZSB0byByZWNlaXZpbmcgYW5cbiAgICAgICAgLy8gdXBkYXRlIGZyb20gV2F0Y2ggb3IgZHVlIHRvIGFwcGx5aW5nIGEgbG9jYWwgc2V0IG11dGF0aW9uIG9uIHRvcFxuICAgICAgICAvLyBvZiBhIGRlbGV0ZWQgZG9jdW1lbnQsIG91ciBiZXN0IGd1ZXNzIGFib3V0IGl0cyBjcmVhdGVUaW1lIHdvdWxkIGJlIHRoZVxuICAgICAgICAvLyB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBkb2N1bWVudCB0cmFuc2l0aW9uZWQgdG8gYSBGT1VORF9ET0NVTUVOVC5cbiAgICAgICAgcmV0dXJuICF0aGlzLmNyZWF0ZVRpbWUuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpIHx8IDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovICE9PSB0aGlzLmRvY3VtZW50VHlwZSAmJiAwIC8qIERvY3VtZW50VHlwZS5JTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZSB8fCAodGhpcy5jcmVhdGVUaW1lID0gZSksIFxuICAgICAgICB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLmRvY3VtZW50VHlwZSA9IDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gdCwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndCBleGlzdCBhdCB0aGUgZ2l2ZW5cbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqLyAgICBjb252ZXJ0VG9Ob0RvY3VtZW50KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuZG9jdW1lbnRUeXBlID0gMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgdGhpcy5kYXRhID0gT2JqZWN0VmFsdWUuZW1wdHkoKSwgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyAsIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGF0IGEgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB0aGF0IGl0cyBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLmRvY3VtZW50VHlwZSA9IDMgLyogRG9jdW1lbnRUeXBlLlVOS05PV05fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgdGhpcy5kYXRhID0gT2JqZWN0VmFsdWUuZW1wdHkoKSwgdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgXG4gICAgICAgIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMSAvKiBEb2N1bWVudFN0YXRlLkhBU19MT0NBTF9NVVRBVElPTlMgKi8gLCB0aGlzLnZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICBzZXRSZWFkVGltZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRUaW1lID0gZSwgdGhpcztcbiAgICB9XG4gICAgZ2V0IGhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBEb2N1bWVudFN0YXRlLkhBU19MT0NBTF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgfVxuICAgIGlzVmFsaWREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0ZvdW5kRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzTm9Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNVbmtub3duRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgTXV0YWJsZURvY3VtZW50ICYmIHRoaXMua2V5LmlzRXF1YWwoZS5rZXkpICYmIHRoaXMudmVyc2lvbi5pc0VxdWFsKGUudmVyc2lvbikgJiYgdGhpcy5kb2N1bWVudFR5cGUgPT09IGUuZG9jdW1lbnRUeXBlICYmIHRoaXMuZG9jdW1lbnRTdGF0ZSA9PT0gZS5kb2N1bWVudFN0YXRlICYmIHRoaXMuZGF0YS5pc0VxdWFsKGUuZGF0YSk7XG4gICAgfVxuICAgIG11dGFibGVDb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudCh0aGlzLmtleSwgdGhpcy5kb2N1bWVudFR5cGUsIHRoaXMudmVyc2lvbiwgdGhpcy5yZWFkVGltZSwgdGhpcy5jcmVhdGVUaW1lLCB0aGlzLmRhdGEuY2xvbmUoKSwgdGhpcy5kb2N1bWVudFN0YXRlKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgRG9jdW1lbnQoJHt0aGlzLmtleX0sICR7dGhpcy52ZXJzaW9ufSwgJHtKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEudmFsdWUpfSwge2NyZWF0ZVRpbWU6ICR7dGhpcy5jcmVhdGVUaW1lfX0pLCB7ZG9jdW1lbnRUeXBlOiAke3RoaXMuZG9jdW1lbnRUeXBlfX0pLCB7ZG9jdW1lbnRTdGF0ZTogJHt0aGlzLmRvY3VtZW50U3RhdGV9fSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0aGUgdmFsdWUgZm9yIGZpZWxkIGBmaWVsZGAgaW4gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gVGhyb3dzIGlmXG4gKiB0aGUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gYm90aCBkb2N1bWVudHMuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBib3VuZCBvZiBhIHF1ZXJ5LlxuICpcbiAqIFRoZSBib3VuZCBpcyBzcGVjaWZpZWQgd2l0aCB0aGUgZ2l2ZW4gY29tcG9uZW50cyByZXByZXNlbnRpbmcgYSBwb3NpdGlvbiBhbmRcbiAqIHdoZXRoZXIgaXQncyBqdXN0IGJlZm9yZSBvciBqdXN0IGFmdGVyIHRoZSBwb3NpdGlvbiAocmVsYXRpdmUgdG8gd2hhdGV2ZXIgdGhlXG4gKiBxdWVyeSBvcmRlciBpcykuXG4gKlxuICogVGhlIHBvc2l0aW9uIHJlcHJlc2VudHMgYSBsb2dpY2FsIGluZGV4IHBvc2l0aW9uIGZvciBhIHF1ZXJ5LiBJdCdzIGEgcHJlZml4XG4gKiBvZiB2YWx1ZXMgZm9yIHRoZSAocG90ZW50aWFsbHkgaW1wbGljaXQpIG9yZGVyIGJ5IGNsYXVzZXMgb2YgYSBxdWVyeS5cbiAqXG4gKiBCb3VuZCBwcm92aWRlcyBhIGZ1bmN0aW9uIHRvIGRldGVybWluZSB3aGV0aGVyIGEgZG9jdW1lbnQgY29tZXMgYmVmb3JlIG9yXG4gKiBhZnRlciBhIGJvdW5kLiBUaGlzIGlzIGluZmx1ZW5jZWQgYnkgd2hldGhlciB0aGUgcG9zaXRpb24gaXMganVzdCBiZWZvcmUgb3JcbiAqIGp1c3QgYWZ0ZXIgdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAqL1xuY2xhc3MgQm91bmQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IGUsIHRoaXMuaW5jbHVzaXZlID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZENvbXBhcmVUb0RvY3VtZW50KGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlLnBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0W2ldLCBvID0gZS5wb3NpdGlvbltpXTtcbiAgICAgICAgaWYgKHMuZmllbGQuaXNLZXlGaWVsZCgpKSByID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihEb2N1bWVudEtleS5mcm9tTmFtZShvLnJlZmVyZW5jZVZhbHVlKSwgbi5rZXkpOyBlbHNlIHtcbiAgICAgICAgICAgIHIgPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKG8sIG4uZGF0YS5maWVsZChzLmZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovID09PSBzLmRpciAmJiAociAqPSAtMSksIDAgIT09IHIpIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBhZnRlciBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYm91bmRFcXVhbHMoZSwgdCkge1xuICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gbnVsbCA9PT0gdDtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuICExO1xuICAgIGlmIChlLmluY2x1c2l2ZSAhPT0gdC5pbmNsdXNpdmUgfHwgZS5wb3NpdGlvbi5sZW5ndGggIT09IHQucG9zaXRpb24ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLnBvc2l0aW9uLmxlbmd0aDsgbisrKSB7XG4gICAgICAgIGlmICghX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUucG9zaXRpb25bbl0sIHQucG9zaXRpb25bbl0pKSByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXG4gKi8gY2xhc3MgT3JkZXJCeSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCA9IFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLykge1xuICAgICAgICB0aGlzLmZpZWxkID0gZSwgdGhpcy5kaXIgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX29yZGVyQnlFcXVhbHMoZSwgdCkge1xuICAgIHJldHVybiBlLmRpciA9PT0gdC5kaXIgJiYgZS5maWVsZC5pc0VxdWFsKHQuZmllbGQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBGaWx0ZXIge31cblxuY2xhc3MgRmllbGRGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWVsZCA9IGUsIHRoaXMub3AgPSB0LCB0aGlzLnZhbHVlID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIGUuaXNLZXlGaWVsZCgpID8gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSB0IHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSB0ID8gdGhpcy5jcmVhdGVLZXlGaWVsZEluRmlsdGVyKGUsIHQsIG4pIDogbmV3IF9fUFJJVkFURV9LZXlGaWVsZEZpbHRlcihlLCB0LCBuKSA6IFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gdCA/IG5ldyBfX1BSSVZBVEVfQXJyYXlDb250YWluc0ZpbHRlcihlLCBuKSA6IFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gdCA/IG5ldyBfX1BSSVZBVEVfSW5GaWx0ZXIoZSwgbikgOiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gdCA/IG5ldyBfX1BSSVZBVEVfTm90SW5GaWx0ZXIoZSwgbikgOiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gdCA/IG5ldyBfX1BSSVZBVEVfQXJyYXlDb250YWluc0FueUZpbHRlcihlLCBuKSA6IG5ldyBGaWVsZEZpbHRlcihlLCB0LCBuKTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9LZXlGaWVsZEluRmlsdGVyKGUsIG4pIDogbmV3IF9fUFJJVkFURV9LZXlGaWVsZE5vdEluRmlsdGVyKGUsIG4pO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgLy8gVHlwZXMgZG8gbm90IGhhdmUgdG8gbWF0Y2ggaW4gTk9UX0VRVUFMIGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IHRoaXMub3AgPyBudWxsICE9PSB0ICYmIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24oX19QUklWQVRFX3ZhbHVlQ29tcGFyZSh0LCB0aGlzLnZhbHVlKSkgOiBudWxsICE9PSB0ICYmIF9fUFJJVkFURV90eXBlT3JkZXIodGhpcy52YWx1ZSkgPT09IF9fUFJJVkFURV90eXBlT3JkZXIodCkgJiYgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihfX1BSSVZBVEVfdmFsdWVDb21wYXJlKHQsIHRoaXMudmFsdWUpKTtcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHR5cGVzIHdpdGggbWF0Y2hpbmcgYmFja2VuZCBvcmRlciAoc3VjaCBhcyBkb3VibGUgYW5kIGludCkuXG4gICAgICAgIH1cbiAgICBtYXRjaGVzQ29tcGFyaXNvbihlKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiBlIDwgMDtcblxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZSA8PSAwO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgPT09IGU7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgIT09IGU7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZSA+IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUgPj0gMDtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzSW5lcXVhbGl0eSgpIHtcbiAgICAgICAgcmV0dXJuIFsgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovICwgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyAsIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyAsIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXS5pbmRleE9mKHRoaXMub3ApID49IDA7XG4gICAgfVxuICAgIGdldEZsYXR0ZW5lZEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBbIHRoaXMgXTtcbiAgICB9XG4gICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIFsgdGhpcyBdO1xuICAgIH1cbiAgICBnZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJbmVxdWFsaXR5KCkgPyB0aGlzLmZpZWxkIDogbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIENvbXBvc2l0ZUZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpbHRlcnMgPSBlLCB0aGlzLm9wID0gdCwgdGhpcy5jZSA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmaWx0ZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRlRmlsdGVyKGUsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKHRoaXMpID8gdm9pZCAwID09PSB0aGlzLmZpbHRlcnMuZmluZCgodCA9PiAhdC5tYXRjaGVzKGUpKSkgOiB2b2lkIDAgIT09IHRoaXMuZmlsdGVycy5maW5kKCh0ID0+IHQubWF0Y2hlcyhlKSkpO1xuICAgIH1cbiAgICBnZXRGbGF0dGVuZWRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5jZSB8fCAodGhpcy5jZSA9IHRoaXMuZmlsdGVycy5yZWR1Y2UoKChlLCB0KSA9PiBlLmNvbmNhdCh0LmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkpLCBbXSkpLCBcbiAgICAgICAgdGhpcy5jZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIG11dGFibGUgY29weSBvZiBgdGhpcy5maWx0ZXJzYFxuICAgIGdldEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFtdLCB0aGlzLmZpbHRlcnMpO1xuICAgIH1cbiAgICBnZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubGUoKGUgPT4gZS5pc0luZXF1YWxpdHkoKSkpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSA/IGUuZmllbGQgOiBudWxsO1xuICAgIH1cbiAgICAvLyBQZXJmb3JtcyBhIGRlcHRoLWZpcnN0IHNlYXJjaCB0byBmaW5kIGFuZCByZXR1cm4gdGhlIGZpcnN0IEZpZWxkRmlsdGVyIGluIHRoZSBjb21wb3NpdGUgZmlsdGVyXG4gICAgLy8gdGhhdCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZS4gUmV0dXJucyBgbnVsbGAgaWYgbm9uZSBvZiB0aGUgRmllbGRGaWx0ZXJzIHNhdGlzZnkgdGhlXG4gICAgLy8gcHJlZGljYXRlLlxuICAgIGxlKGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBpZiAoZSh0KSkgcmV0dXJuIHQ7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24oZSkge1xuICAgIHJldHVybiBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyA9PT0gZS5vcDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRGlzanVuY3Rpb24oZSkge1xuICAgIHJldHVybiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8gPT09IGUub3A7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmlsdGVyIGlzIGEgY29uanVuY3Rpb24gb2YgZmllbGQgZmlsdGVycyBvbmx5LiBSZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0Q29uanVuY3Rpb24oZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0KGUpICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpbHRlciBkb2VzIG5vdCBjb250YWluIGFueSBjb21wb3NpdGUgZmlsdGVycy4gUmV0dXJucyBmYWxzZSBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdChlKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIGUuZmlsdGVycykgaWYgKHQgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikgXG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogVGVjaG5pY2FsbHksIHRoaXMgd29uJ3QgYmUgdW5pcXVlIGlmIHR3byB2YWx1ZXMgaGF2ZVxuICAgIC8vIHRoZSBzYW1lIGRlc2NyaXB0aW9uLCBzdWNoIGFzIHRoZSBpbnQgMyBhbmQgdGhlIHN0cmluZyBcIjNcIi4gU28gd2Ugc2hvdWxkXG4gICAgLy8gYWRkIHRoZSB0eXBlcyBpbiBoZXJlIHNvbWVob3csIHRvby5cbiAgICByZXR1cm4gZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIGUub3AudG9TdHJpbmcoKSArIGNhbm9uaWNhbElkKGUudmFsdWUpO1xuICAgIGlmIChfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0Q29uanVuY3Rpb24oZSkpIFxuICAgIC8vIE9sZGVyIFNESyB2ZXJzaW9ucyB1c2UgYW4gaW1wbGljaXQgQU5EIG9wZXJhdGlvbiBiZXR3ZWVuIHRoZWlyIGZpbHRlcnMuXG4gICAgLy8gSW4gdGhlIG5ldyBTREsgdmVyc2lvbnMsIHRoZSBkZXZlbG9wZXIgbWF5IHVzZSBhbiBleHBsaWNpdCBBTkQgZmlsdGVyLlxuICAgIC8vIFRvIHN0YXkgY29uc2lzdGVudCB3aXRoIHRoZSBvbGQgdXNhZ2VzLCB3ZSBhZGQgYSBzcGVjaWFsIGNhc2UgdG8gZW5zdXJlXG4gICAgLy8gdGhlIGNhbm9uaWNhbCBJRCBmb3IgdGhlc2UgdHdvIGFyZSB0aGUgc2FtZS4gRm9yIGV4YW1wbGU6XG4gICAgLy8gYGNvbC53aGVyZUVxdWFscyhcImFcIiwgMSkud2hlcmVFcXVhbHMoXCJiXCIsIDIpYCBzaG91bGQgaGF2ZSB0aGUgc2FtZVxuICAgIC8vIGNhbm9uaWNhbCBJRCBhcyBgY29sLndoZXJlKGFuZChlcXVhbHMoXCJhXCIsMSksIGVxdWFscyhcImJcIiwyKSkpYC5cbiAgICByZXR1cm4gZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIoZSkpKS5qb2luKFwiLFwiKTtcbiAgICB7XG4gICAgICAgIC8vIGZpbHRlciBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlclxuICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIoZSkpKS5qb2luKFwiLFwiKTtcbiAgICAgICAgcmV0dXJuIGAke2Uub3B9KCR7dH0pYDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maWx0ZXJFcXVhbHMoZSwgdCkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRGaWx0ZXJFcXVhbHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyICYmIGUub3AgPT09IHQub3AgJiYgZS5maWVsZC5pc0VxdWFsKHQuZmllbGQpICYmIF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLnZhbHVlLCB0LnZhbHVlKTtcbiAgICB9KGUsIHQpIDogZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJFcXVhbHMoZSwgdCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiBlLm9wID09PSB0Lm9wICYmIGUuZmlsdGVycy5sZW5ndGggPT09IHQuZmlsdGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBlLmZpbHRlcnMucmVkdWNlKCgoZSwgbiwgcikgPT4gZSAmJiBfX1BSSVZBVEVfZmlsdGVyRXF1YWxzKG4sIHQuZmlsdGVyc1tyXSkpLCAhMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBuZXcgY29tcG9zaXRlIGZpbHRlciB0aGF0IGNvbnRhaW5zIGFsbCBmaWx0ZXIgZnJvbVxuICogYGNvbXBvc2l0ZUZpbHRlcmAgcGx1cyBhbGwgdGhlIGdpdmVuIGZpbHRlcnMgaW4gYG90aGVyRmlsdGVyc2AuXG4gKi8gKGUsIHQpIDogdm9pZCBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJXaXRoQWRkZWRGaWx0ZXJzKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZS5maWx0ZXJzLmNvbmNhdCh0KTtcbiAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShuLCBlLm9wKTtcbn1cblxuLyoqIFJldHVybnMgYSBkZWJ1ZyBkZXNjcmlwdGlvbiBmb3IgYGZpbHRlcmAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlGaWx0ZXIoZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5RmllbGRGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gYCR7ZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gJHtlLm9wfSAke2Nhbm9uaWNhbElkKGUudmFsdWUpfWA7XG4gICAgfVxuICAgIC8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgKGkuZS4gJ19fbmFtZV9fJykuICovIChlKSA6IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5Q29tcG9zaXRlRmlsdGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIGUub3AudG9TdHJpbmcoKSArIFwiIHtcIiArIGUuZ2V0RmlsdGVycygpLm1hcChfX1BSSVZBVEVfc3RyaW5naWZ5RmlsdGVyKS5qb2luKFwiICxcIikgKyBcIn1cIjtcbiAgICB9KGUpIDogXCJGaWx0ZXJcIjtcbn1cblxuY2xhc3MgX19QUklWQVRFX0tleUZpZWxkRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgbiksIHRoaXMua2V5ID0gRG9jdW1lbnRLZXkuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdGhpcy5rZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVzQ29tcGFyaXNvbih0KTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBfX1BSSVZBVEVfS2V5RmllbGRJbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIHQpLCB0aGlzLmtleXMgPSBfX1BSSVZBVEVfZXh0cmFjdERvY3VtZW50S2V5c0Zyb21BcnJheVZhbHVlKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5zb21lKCh0ID0+IHQuaXNFcXVhbChlLmtleSkpKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgbm90IHByZXNlbnQgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBfX1BSSVZBVEVfS2V5RmllbGROb3RJbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgdCksIHRoaXMua2V5cyA9IF9fUFJJVkFURV9leHRyYWN0RG9jdW1lbnRLZXlzRnJvbUFycmF5VmFsdWUoXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCB0KTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5rZXlzLnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUua2V5KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2V4dHJhY3REb2N1bWVudEtleXNGcm9tQXJyYXlWYWx1ZShlLCB0KSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuICgobnVsbCA9PT0gKG4gPSB0LmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmFsdWVzKSB8fCBbXSkubWFwKChlID0+IERvY3VtZW50S2V5LmZyb21OYW1lKGUucmVmZXJlbmNlVmFsdWUpKSk7XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqLyBjbGFzcyBfX1BSSVZBVEVfQXJyYXlDb250YWluc0ZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodCkgJiYgX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0LmFycmF5VmFsdWUsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgSU4gb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9JbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHQpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgbm90LWluIG9wZXJhdG9yLiAqLyBjbGFzcyBfX1BSSVZBVEVfTm90SW5GaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnModGhpcy52YWx1ZS5hcnJheVZhbHVlLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmICFfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucy1hbnkgb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9BcnJheUNvbnRhaW5zQW55RmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gLCB0KTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiAhKCFpc0FycmF5KHQpIHx8ICF0LmFycmF5VmFsdWUudmFsdWVzKSAmJiB0LmFycmF5VmFsdWUudmFsdWVzLnNvbWUoKGUgPT4gX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgX19QUklWQVRFX1RhcmdldEltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQgPSBudWxsLCBuID0gW10sIHIgPSBbXSwgaSA9IG51bGwsIHMgPSBudWxsLCBvID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSBlLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IHQsIHRoaXMub3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHIsIHRoaXMubGltaXQgPSBpLCBcbiAgICAgICAgdGhpcy5zdGFydEF0ID0gcywgdGhpcy5lbmRBdCA9IG8sIHRoaXMuaGUgPSBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIFRhcmdldCB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gKlxuICogTk9URTogeW91IHNob3VsZCBhbHdheXMgY29uc3RydWN0IGBUYXJnZXRgIGZyb20gYFF1ZXJ5LnRvVGFyZ2V0YCBpbnN0ZWFkIG9mXG4gKiB1c2luZyB0aGlzIGZhY3RvcnkgbWV0aG9kLCBiZWNhdXNlIGBRdWVyeWAgcHJvdmlkZXMgYW4gaW1wbGljaXQgYG9yZGVyQnlgXG4gKiBwcm9wZXJ0eS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGFyZ2V0KGUsIHQgPSBudWxsLCBuID0gW10sIHIgPSBbXSwgaSA9IG51bGwsIHMgPSBudWxsLCBvID0gbnVsbCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1RhcmdldEltcGwoZSwgdCwgbiwgciwgaSwgcywgbyk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldChlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKG51bGwgPT09IHQuaGUpIHtcbiAgICAgICAgbGV0IGUgPSB0LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwICYmIChlICs9IFwifGNnOlwiICsgdC5jb2xsZWN0aW9uR3JvdXApLCBlICs9IFwifGY6XCIsIGUgKz0gdC5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIoZSkpKS5qb2luKFwiLFwiKSwgXG4gICAgICAgIGUgKz0gXCJ8b2I6XCIsIGUgKz0gdC5vcmRlckJ5Lm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlPcmRlckJ5KGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgICAgICAgICAgcmV0dXJuIGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyBlLmRpcjtcbiAgICAgICAgfShlKSkpLmpvaW4oXCIsXCIpLCBfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQodC5saW1pdCkgfHwgKGUgKz0gXCJ8bDpcIiwgZSArPSB0LmxpbWl0KSwgXG4gICAgICAgIHQuc3RhcnRBdCAmJiAoZSArPSBcInxsYjpcIiwgZSArPSB0LnN0YXJ0QXQuaW5jbHVzaXZlID8gXCJiOlwiIDogXCJhOlwiLCBlICs9IHQuc3RhcnRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICB0LmVuZEF0ICYmIChlICs9IFwifHViOlwiLCBlICs9IHQuZW5kQXQuaW5jbHVzaXZlID8gXCJhOlwiIDogXCJiOlwiLCBlICs9IHQuZW5kQXQucG9zaXRpb24ubWFwKChlID0+IGNhbm9uaWNhbElkKGUpKSkuam9pbihcIixcIikpLCBcbiAgICAgICAgdC5oZSA9IGU7XG4gICAgfVxuICAgIHJldHVybiB0LmhlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKGUsIHQpIHtcbiAgICBpZiAoZS5saW1pdCAhPT0gdC5saW1pdCkgcmV0dXJuICExO1xuICAgIGlmIChlLm9yZGVyQnkubGVuZ3RoICE9PSB0Lm9yZGVyQnkubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLm9yZGVyQnkubGVuZ3RoOyBuKyspIGlmICghX19QUklWQVRFX29yZGVyQnlFcXVhbHMoZS5vcmRlckJ5W25dLCB0Lm9yZGVyQnlbbl0pKSByZXR1cm4gITE7XG4gICAgaWYgKGUuZmlsdGVycy5sZW5ndGggIT09IHQuZmlsdGVycy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUuZmlsdGVycy5sZW5ndGg7IG4rKykgaWYgKCFfX1BSSVZBVEVfZmlsdGVyRXF1YWxzKGUuZmlsdGVyc1tuXSwgdC5maWx0ZXJzW25dKSkgcmV0dXJuICExO1xuICAgIHJldHVybiBlLmNvbGxlY3Rpb25Hcm91cCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgKCEhZS5wYXRoLmlzRXF1YWwodC5wYXRoKSAmJiAoISFfX1BSSVZBVEVfYm91bmRFcXVhbHMoZS5zdGFydEF0LCB0LnN0YXJ0QXQpICYmIF9fUFJJVkFURV9ib3VuZEVxdWFscyhlLmVuZEF0LCB0LmVuZEF0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldChlKSB7XG4gICAgcmV0dXJuIERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZS5wYXRoKSAmJiBudWxsID09PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSBlLmZpbHRlcnMubGVuZ3RoO1xufVxuXG4vKiogUmV0dXJucyB0aGUgZmllbGQgZmlsdGVycyB0aGF0IHRhcmdldCB0aGUgZ2l2ZW4gZmllbGQgcGF0aC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldEZpZWxkRmlsdGVyc0ZvclBhdGgoZSwgdCkge1xuICAgIHJldHVybiBlLmZpbHRlcnMuZmlsdGVyKChlID0+IGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciAmJiBlLmZpZWxkLmlzRXF1YWwodCkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZXMgdGhhdCBhcmUgdXNlZCBpbiBBUlJBWV9DT05UQUlOUyBvciBBUlJBWV9DT05UQUlOU19BTllcbiAqIGZpbHRlcnMuIFJldHVybnMgYG51bGxgIGlmIHRoZXJlIGFyZSBubyBzdWNoIGZpbHRlcnMuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIGFzIHRoZSBsb3dlciBib3VuZCBmb3IgYXNjZW5kaW5nIGluZGV4IHNlZ21lbnQgYXRcbiAqIHRoZSBwcm92aWRlZCBgZmllbGRQYXRoYCAob3IgdGhlIHVwcGVyIGJvdW5kIGZvciBhbiBkZXNjZW5kaW5nIHNlZ21lbnQpLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0QXNjZW5kaW5nQm91bmQoZSwgdCwgbikge1xuICAgIGxldCByID0gbmUsIGkgPSAhMDtcbiAgICAvLyBQcm9jZXNzIGFsbCBmaWx0ZXJzIHRvIGZpbmQgYSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgZmllbGQgc2VnbWVudFxuICAgIGZvciAoY29uc3QgbiBvZiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCB0KSkge1xuICAgICAgICBsZXQgZSA9IG5lLCB0ID0gITA7XG4gICAgICAgIHN3aXRjaCAobi5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgZSA9IF9fUFJJVkFURV92YWx1ZXNHZXRMb3dlckJvdW5kKG4udmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgZSA9IG4udmFsdWUsIHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIGUgPSBuZTtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyBsb3dlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBfX1BSSVZBVEVfbG93ZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IGUsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRcbiAgICAgICAgfSkgPCAwICYmIChyID0gZSwgaSA9IHQpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCBzID0gMDsgcyA8IGUub3JkZXJCeS5sZW5ndGg7ICsrcykge1xuICAgICAgICBpZiAoZS5vcmRlckJ5W3NdLmZpZWxkLmlzRXF1YWwodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLnBvc2l0aW9uW3NdO1xuICAgICAgICAgICAgX19QUklWQVRFX2xvd2VyQm91bmRDb21wYXJlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IG4uaW5jbHVzaXZlXG4gICAgICAgICAgICB9KSA8IDAgJiYgKHIgPSBlLCBpID0gbi5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgIGluY2x1c2l2ZTogaVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIGFzIHRoZSB1cHBlciBib3VuZCBmb3IgYXNjZW5kaW5nIGluZGV4IHNlZ21lbnQgYXRcbiAqIHRoZSBwcm92aWRlZCBgZmllbGRQYXRoYCAob3IgdGhlIGxvd2VyIGJvdW5kIGZvciBhIGRlc2NlbmRpbmcgc2VnbWVudCkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldERlc2NlbmRpbmdCb3VuZChlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSB0ZSwgaSA9ICEwO1xuICAgIC8vIFByb2Nlc3MgYWxsIGZpbHRlcnMgdG8gZmluZCBhIHZhbHVlIGZvciB0aGUgY3VycmVudCBmaWVsZCBzZWdtZW50XG4gICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIHQpKSB7XG4gICAgICAgIGxldCBlID0gdGUsIHQgPSAhMDtcbiAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICBlID0gX19QUklWQVRFX3ZhbHVlc0dldFVwcGVyQm91bmQobi52YWx1ZSksIHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgZSA9IG4udmFsdWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIGUgPSBuLnZhbHVlLCB0ID0gITE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICBlID0gdGU7XG4gLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgdXBwZXIgYm91bmRzLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgX19QUklWQVRFX3VwcGVyQm91bmRDb21wYXJlKHtcbiAgICAgICAgICAgIHZhbHVlOiByLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHZhbHVlOiBlLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0XG4gICAgICAgIH0pID4gMCAmJiAociA9IGUsIGkgPSB0KTtcbiAgICB9XG4gICAgLy8gSWYgdGhlcmUgaXMgYW4gYWRkaXRpb25hbCBib3VuZCwgY29tcGFyZSB0aGUgdmFsdWVzIGFnYWluc3QgdGhlIGV4aXN0aW5nXG4gICAgLy8gcmFuZ2UgdG8gc2VlIGlmIHdlIGNhbiBuYXJyb3cgdGhlIHNjb3BlLlxuICAgICAgICBpZiAobnVsbCAhPT0gbikgZm9yIChsZXQgcyA9IDA7IHMgPCBlLm9yZGVyQnkubGVuZ3RoOyArK3MpIHtcbiAgICAgICAgaWYgKGUub3JkZXJCeVtzXS5maWVsZC5pc0VxdWFsKHQpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbi5wb3NpdGlvbltzXTtcbiAgICAgICAgICAgIF9fUFJJVkFURV91cHBlckJvdW5kQ29tcGFyZSh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGUsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBuLmluY2x1c2l2ZVxuICAgICAgICAgICAgfSkgPiAwICYmIChyID0gZSwgaSA9IG4uaW5jbHVzaXZlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiByLFxuICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICB9O1xufVxuXG4vKiogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHNlZ21lbnRzIG9mIGEgcGVyZmVjdCBpbmRleCBmb3IgdGhpcyB0YXJnZXQuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXG4gKiBiZSBydW4gYWdhaW5zdCB0aGUgTG9jYWxTdG9yZSwgYXMgd2VsbCBhcyBiZSBjb252ZXJ0ZWQgdG8gYSBgVGFyZ2V0YCB0b1xuICogcXVlcnkgdGhlIFJlbW90ZVN0b3JlIHJlc3VsdHMuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1F1ZXJ5SW1wbCB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBRdWVyeSB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAgICAgKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQgPSBudWxsLCBuID0gW10sIHIgPSBbXSwgaSA9IG51bGwsIHMgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gLCBvID0gbnVsbCwgXyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gZSwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSB0LCB0aGlzLmV4cGxpY2l0T3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHIsIFxuICAgICAgICB0aGlzLmxpbWl0ID0gaSwgdGhpcy5saW1pdFR5cGUgPSBzLCB0aGlzLnN0YXJ0QXQgPSBvLCB0aGlzLmVuZEF0ID0gXywgdGhpcy5QZSA9IG51bGwsIFxuICAgICAgICAvLyBUaGUgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCBvZiB0aGlzIGBRdWVyeWAgaW5zdGFuY2UsIGZvciB1c2Ugd2l0aFxuICAgICAgICAvLyBub24tYWdncmVnYXRlIHF1ZXJpZXMuXG4gICAgICAgIHRoaXMuSWUgPSBudWxsLCBcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLCBmb3IgdXNlIHdpdGhcbiAgICAgICAgLy8gYWdncmVnYXRlIHF1ZXJpZXMuIFVubGlrZSB0YXJnZXRzIGZvciBub24tYWdncmVnYXRlIHF1ZXJpZXMsXG4gICAgICAgIC8vIGFnZ3JlZ2F0ZSBxdWVyeSB0YXJnZXRzIGRvIG5vdCBjb250YWluIG5vcm1hbGl6ZWQgb3JkZXItYnlzLCB0aGV5IG9ubHlcbiAgICAgICAgLy8gY29udGFpbiBleHBsaWNpdCBvcmRlci1ieXMuXG4gICAgICAgIHRoaXMuZGUgPSBudWxsLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQ7XG4gICAgfVxufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBpbnN0YW5jZSB3aXRoIHRoZSBvcHRpb25zIHByb3ZpZGVkLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnkoZSwgdCwgbiwgciwgaSwgcywgbywgXykge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLCB0LCBuLCByLCBpLCBzLCBvLCBfKTtcbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgYXQgYHBhdGhgICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgaW50byBhIGNvbGxlY3Rpb24gcXVlcnkgYXQgYVxuICogc3BlY2lmaWMgcGF0aC4gVGhpcyBpcyB1c2VkIHdoZW4gZXhlY3V0aW5nIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcywgc2luY2VcbiAqIHdlIGhhdmUgdG8gc3BsaXQgdGhlIHF1ZXJ5IGludG8gYSBzZXQgb2YgY29sbGVjdGlvbiBxdWVyaWVzIGF0IG11bHRpcGxlXG4gKiBwYXRocy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBxdWVyeSBkb2VzIG5vdCBzcGVjaWZ5IGFueSBxdWVyeSBjb25zdHJhaW50cyB0aGF0XG4gKiBjb3VsZCByZW1vdmUgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc0FsbERvY3VtZW50cyhlKSB7XG4gICAgcmV0dXJuIDAgPT09IGUuZmlsdGVycy5sZW5ndGggJiYgbnVsbCA9PT0gZS5saW1pdCAmJiBudWxsID09IGUuc3RhcnRBdCAmJiBudWxsID09IGUuZW5kQXQgJiYgKDAgPT09IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCB8fCAxID09PSBlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggJiYgZS5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQuaXNLZXlGaWVsZCgpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldEZpcnN0T3JkZXJCeUZpZWxkKGUpIHtcbiAgICByZXR1cm4gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IGUuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldEluZXF1YWxpdHlGaWx0ZXJGaWVsZChlKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIGUuZmlsdGVycykge1xuICAgICAgICBjb25zdCBlID0gdC5nZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpO1xuICAgICAgICBpZiAobnVsbCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50c1xuICogd2l0aGluIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLlxuICovXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcmF0aGVyIHRoYW4gYSBzcGVjaWZpY1xuICogY29sbGVjdGlvbi5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkoZSkge1xuICAgIHJldHVybiBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBub3JtYWxpemVkIG9yZGVyLWJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlci1ieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLiBUaGUgbm9ybWFsaXplZCBvcmRlci1ieVxuICogaW5jbHVkZXMgaW1wbGljaXQgb3JkZXItYnlzIGluIGFkZGl0aW9uIHRvIHRoZSBleHBsaWNpdCB1c2VyIHByb3ZpZGVkXG4gKiBvcmRlci1ieXMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGlmIChudWxsID09PSB0LlBlKSB7XG4gICAgICAgIHQuUGUgPSBbXTtcbiAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQodCksIG4gPSBfX1BSSVZBVEVfZ2V0Rmlyc3RPcmRlckJ5RmllbGQodCk7XG4gICAgICAgIGlmIChudWxsICE9PSBlICYmIG51bGwgPT09IG4pIFxuICAgICAgICAvLyBJbiBvcmRlciB0byBpbXBsaWNpdGx5IGFkZCBrZXkgb3JkZXJpbmcsIHdlIG11c3QgYWxzbyBhZGQgdGhlXG4gICAgICAgIC8vIGluZXF1YWxpdHkgZmlsdGVyIGZpZWxkIGZvciBpdCB0byBiZSBhIHZhbGlkIHF1ZXJ5LlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgaW5lcXVhbGl0eSBmaWVsZCBhbmQga2V5IG9yZGVyaW5nIGlzIGFzY2VuZGluZy5cbiAgICAgICAgZS5pc0tleUZpZWxkKCkgfHwgdC5QZS5wdXNoKG5ldyBPcmRlckJ5KGUpKSwgdC5QZS5wdXNoKG5ldyBPcmRlckJ5KEZpZWxkUGF0aCQxLmtleUZpZWxkKCksIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCBlID0gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5leHBsaWNpdE9yZGVyQnkpIHQuUGUucHVzaChuKSwgbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgKGUgPSAhMCk7XG4gICAgICAgICAgICBpZiAoIWUpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxuICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0IG9yZGVyLWJ5XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyB0LmV4cGxpY2l0T3JkZXJCeVt0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXIgOiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi87XG4gICAgICAgICAgICAgICAgdC5QZS5wdXNoKG5ldyBPcmRlckJ5KEZpZWxkUGF0aCQxLmtleUZpZWxkKCksIGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdC5QZTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXRzIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiB0LkllIHx8ICh0LkllID0gX19QUklWQVRFX19xdWVyeVRvVGFyZ2V0KHQsIF9fUFJJVkFURV9xdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KGUpKSksIFxuICAgIHQuSWU7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0cyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLFxuICogZm9yIHVzZSB3aXRoaW4gYW4gYWdncmVnYXRlIHF1ZXJ5LiBVbmxpa2UgdGFyZ2V0cyBmb3Igbm9uLWFnZ3JlZ2F0ZSBxdWVyaWVzLFxuICogYWdncmVnYXRlIHF1ZXJ5IHRhcmdldHMgZG8gbm90IGNvbnRhaW4gbm9ybWFsaXplZCBvcmRlci1ieXMsIHRoZXkgb25seVxuICogY29udGFpbiBleHBsaWNpdCBvcmRlci1ieXMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX19xdWVyeVRvVGFyZ2V0KGUsIHQpIHtcbiAgICBpZiAoXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSBlLmxpbWl0VHlwZSkgcmV0dXJuIF9fUFJJVkFURV9uZXdUYXJnZXQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgdCwgZS5maWx0ZXJzLCBlLmxpbWl0LCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xuICAgIHtcbiAgICAgICAgLy8gRmxpcCB0aGUgb3JkZXJCeSBkaXJlY3Rpb25zIHNpbmNlIHdlIHdhbnQgdGhlIGxhc3QgcmVzdWx0c1xuICAgICAgICB0ID0gdC5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovID09PSBlLmRpciA/IFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA6IFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPcmRlckJ5KGUuZmllbGQsIHQpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gc3dhcCB0aGUgY3Vyc29ycyB0byBtYXRjaCB0aGUgbm93LWZsaXBwZWQgcXVlcnkgb3JkZXJpbmcuXG4gICAgICAgIGNvbnN0IG4gPSBlLmVuZEF0ID8gbmV3IEJvdW5kKGUuZW5kQXQucG9zaXRpb24sIGUuZW5kQXQuaW5jbHVzaXZlKSA6IG51bGwsIHIgPSBlLnN0YXJ0QXQgPyBuZXcgQm91bmQoZS5zdGFydEF0LnBvc2l0aW9uLCBlLnN0YXJ0QXQuaW5jbHVzaXZlKSA6IG51bGw7XG4gICAgICAgIC8vIE5vdyByZXR1cm4gYXMgYSBMaW1pdFR5cGUuRmlyc3QgcXVlcnkuXG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmV3VGFyZ2V0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIHQsIGUuZmlsdGVycywgZS5saW1pdCwgbiwgcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRGaWx0ZXIoZSwgdCkge1xuICAgIHQuZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQoKSwgX19QUklWQVRFX2dldEluZXF1YWxpdHlGaWx0ZXJGaWVsZChlKTtcbiAgICBjb25zdCBuID0gZS5maWx0ZXJzLmNvbmNhdChbIHQgXSk7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIG4sIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQoZSwgdCwgbikge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBlLmZpbHRlcnMuc2xpY2UoKSwgdCwgbiwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5RXF1YWxzKGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldEVxdWFscyhfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlKSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpICYmIGUubGltaXRUeXBlID09PSB0LmxpbWl0VHlwZTtcbn1cblxuLy8gVE9ETyhiLzI5MTgzMTY1KTogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHVuaXF1ZSBzdHJpbmcgZnJvbSBhIHF1ZXJ5IHRvLCBmb3Jcbi8vIGV4YW1wbGUsIHVzZSBhcyBhIGRpY3Rpb25hcnkga2V5LCBidXQgdGhlIGltcGxlbWVudGF0aW9uIGlzIHN1YmplY3QgdG9cbi8vIGNvbGxpc2lvbnMuIE1ha2UgaXQgY29sbGlzaW9uLWZyZWUuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlRdWVyeShlKSB7XG4gICAgcmV0dXJuIGAke19fUFJJVkFURV9jYW5vbmlmeVRhcmdldChfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlKSl9fGx0OiR7ZS5saW1pdFR5cGV9YDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KGUpIHtcbiAgICByZXR1cm4gYFF1ZXJ5KHRhcmdldD0ke2Z1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlUYXJnZXQoZSkge1xuICAgICAgICBsZXQgdCA9IGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwICYmICh0ICs9IFwiIGNvbGxlY3Rpb25Hcm91cD1cIiArIGUuY29sbGVjdGlvbkdyb3VwKSwgXG4gICAgICAgIGUuZmlsdGVycy5sZW5ndGggPiAwICYmICh0ICs9IGAsIGZpbHRlcnM6IFske2UuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX3N0cmluZ2lmeUZpbHRlcihlKSkpLmpvaW4oXCIsIFwiKX1dYCksIFxuICAgICAgICBfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQoZS5saW1pdCkgfHwgKHQgKz0gXCIsIGxpbWl0OiBcIiArIGUubGltaXQpLCBlLm9yZGVyQnkubGVuZ3RoID4gMCAmJiAodCArPSBgLCBvcmRlckJ5OiBbJHtlLm9yZGVyQnkubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlPcmRlckJ5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHtlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAoJHtlLmRpcn0pYDtcbiAgICAgICAgfShlKSkpLmpvaW4oXCIsIFwiKX1dYCksIGUuc3RhcnRBdCAmJiAodCArPSBcIiwgc3RhcnRBdDogXCIsIHQgKz0gZS5zdGFydEF0LmluY2x1c2l2ZSA/IFwiYjpcIiA6IFwiYTpcIiwgXG4gICAgICAgIHQgKz0gZS5zdGFydEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgZS5lbmRBdCAmJiAodCArPSBcIiwgZW5kQXQ6IFwiLCBcbiAgICAgICAgdCArPSBlLmVuZEF0LmluY2x1c2l2ZSA/IFwiYTpcIiA6IFwiYjpcIiwgdCArPSBlLmVuZEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGBUYXJnZXQoJHt0fSlgO1xuICAgIH0oX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoZSkpfTsgbGltaXRUeXBlPSR7ZS5saW1pdFR5cGV9KWA7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgYGRvY2AgbWF0Y2hlcyB0aGUgY29uc3RyYWludHMgb2YgYHF1ZXJ5YC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyhlLCB0KSB7XG4gICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgJiYgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc1BhdGhBbmRDb2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC5rZXkucGF0aDtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwID8gdC5rZXkuaGFzQ29sbGVjdGlvbklkKGUuY29sbGVjdGlvbkdyb3VwKSAmJiBlLnBhdGguaXNQcmVmaXhPZihuKSA6IERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZS5wYXRoKSA/IGUucGF0aC5pc0VxdWFsKG4pIDogZS5wYXRoLmlzSW1tZWRpYXRlUGFyZW50T2Yobik7XG4gICAgfVxuICAgIC8qKlxuICogQSBkb2N1bWVudCBtdXN0IGhhdmUgYSB2YWx1ZSBmb3IgZXZlcnkgb3JkZXJpbmcgY2xhdXNlIGluIG9yZGVyIHRvIHNob3cgdXBcbiAqIGluIHRoZSByZXN1bHRzLlxuICovIChlLCB0KSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzT3JkZXJCeShlLCB0KSB7XG4gICAgICAgIC8vIFdlIG11c3QgdXNlIGBxdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KClgIHRvIGdldCB0aGUgbGlzdCBvZiBhbGwgb3JkZXJCeXMgKGJvdGggaW1wbGljaXQgYW5kIGV4cGxpY2l0KS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGZvciBPUiBxdWVyaWVzLCBvcmRlckJ5IGFwcGxpZXMgdG8gYWxsIGRpc2p1bmN0aW9uIHRlcm1zIGFuZCBpbXBsaWNpdCBvcmRlckJ5cyBtdXN0XG4gICAgICAgIC8vIGJlIHRha2VuIGludG8gYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBxdWVyeSBcImEgPiAxIHx8IGI9PTFcIiBoYXMgYW4gaW1wbGljaXQgXCJvcmRlckJ5IGFcIiBkdWVcbiAgICAgICAgLy8gdG8gdGhlIGluZXF1YWxpdHksIGFuZCBpcyBldmFsdWF0ZWQgYXMgXCJhID4gMSBvcmRlckJ5IGEgfHwgYj09MSBvcmRlckJ5IGFcIi5cbiAgICAgICAgLy8gQSBkb2N1bWVudCB3aXRoIGNvbnRlbnQgb2Yge2I6MX0gbWF0Y2hlcyB0aGUgZmlsdGVycywgYnV0IGRvZXMgbm90IG1hdGNoIHRoZSBvcmRlckJ5IGJlY2F1c2VcbiAgICAgICAgLy8gaXQncyBtaXNzaW5nIHRoZSBmaWVsZCAnYScuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkgXG4gICAgICAgIC8vIG9yZGVyLWJ5IGtleSBhbHdheXMgbWF0Y2hlc1xuICAgICAgICBpZiAoIW4uZmllbGQuaXNLZXlGaWVsZCgpICYmIG51bGwgPT09IHQuZGF0YS5maWVsZChuLmZpZWxkKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfShlLCB0KSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzRmlsdGVycyhlLCB0KSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlLmZpbHRlcnMpIGlmICghbi5tYXRjaGVzKHQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuICovIChlLCB0KSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQm91bmRzKGUsIHQpIHtcbiAgICAgICAgaWYgKGUuc3RhcnRBdCAmJiAhXG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZG9jdW1lbnQgc29ydHMgYmVmb3JlIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZFNvcnRzQmVmb3JlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9ib3VuZENvbXBhcmVUb0RvY3VtZW50KGUsIHQsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGUuaW5jbHVzaXZlID8gciA8PSAwIDogciA8IDA7XG4gICAgICAgIH0oZS5zdGFydEF0LCBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKGUuZW5kQXQgJiYgIWZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZFNvcnRzQWZ0ZXJEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2JvdW5kQ29tcGFyZVRvRG9jdW1lbnQoZSwgdCwgbik7XG4gICAgICAgICAgICByZXR1cm4gZS5pbmNsdXNpdmUgPyByID49IDAgOiByID4gMDtcbiAgICAgICAgfShlLmVuZEF0LCBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAgdGhhdCB0aGlzIHF1ZXJ5IHRhcmdldHMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgV2ViIFNESyB0byBmYWNpbGl0YXRlIG11bHRpLXRhYlxuICogc3luY2hyb25pemF0aW9uIGZvciBxdWVyeSByZXN1bHRzLlxuICovIChlLCB0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwKGUpIHtcbiAgICByZXR1cm4gZS5jb2xsZWN0aW9uR3JvdXAgfHwgKGUucGF0aC5sZW5ndGggJSAyID09IDEgPyBlLnBhdGgubGFzdFNlZ21lbnQoKSA6IGUucGF0aC5nZXQoZS5wYXRoLmxlbmd0aCAtIDIpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBhcmF0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wYXJlIHR3byBkb2N1bWVudHNcbiAqIGJhc2VkIG9uIHRoZSBRdWVyeSdzIG9yZGVyaW5nIGNvbnN0cmFpbnQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvcihlKSB7XG4gICAgcmV0dXJuICh0LCBuKSA9PiB7XG4gICAgICAgIGxldCByID0gITE7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9jb21wYXJlRG9jcyhpLCB0LCBuKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIHIgPSByIHx8IGkuZmllbGQuaXNLZXlGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlRG9jcyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IGUuZmllbGQuaXNLZXlGaWVsZCgpID8gRG9jdW1lbnRLZXkuY29tcGFyYXRvcih0LmtleSwgbi5rZXkpIDogZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVEb2N1bWVudHNCeUZpZWxkKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IHQuZGF0YS5maWVsZChlKSwgaSA9IG4uZGF0YS5maWVsZChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHIgJiYgbnVsbCAhPT0gaSA/IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUociwgaSkgOiBmYWlsKCk7XG4gICAgfShlLmZpZWxkLCB0LCBuKTtcbiAgICBzd2l0Y2ggKGUuZGlyKSB7XG4gICAgICBjYXNlIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiByO1xuXG4gICAgICBjYXNlIFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIC0xICogcjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWFwIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBvYmplY3RzIGFzIGtleXMuIE9iamVjdHMgbXVzdCBoYXZlIGFuXG4gKiBhc3NvY2lhdGVkIGVxdWFscyBmdW5jdGlvbiBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmVcbiAqIHN0b3JlZCB0b2dldGhlciB3aXRoIHRoZSBrZXkgYmVpbmcgcHJvZHVjZWQgZnJvbSB0aGUgbWFwS2V5Rm4uIFRoaXMgbWFwXG4gKiBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29sbGlzaW9ucyBvZiBrZXlzLlxuICovIGNsYXNzIE9iamVjdE1hcCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLm1hcEtleUZuID0gZSwgdGhpcy5lcXVhbHNGbiA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkvdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZiBjb2xsaXNpb25zIHdlXG4gICAgICAgICAqIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaCB0byBmaW5kIGFuIGFjdHVhbFxuICAgICAgICAgKiBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsIGV4cGVjdCBuZWFyXG4gICAgICAgICAqIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fSwgXG4gICAgICAgIC8qKiBUaGUgbnVtYmVyIG9mIGVudHJpZXMgc3RvcmVkIGluIHRoZSBtYXAgKi9cbiAgICAgICAgdGhpcy5pbm5lclNpemUgPSAwO1xuICAgIH1cbiAgICAvKiogR2V0IGEgdmFsdWUgZm9yIHRoaXMga2V5LCBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuICovICAgIGdldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm1hcEtleUZuKGUpLCBuID0gdGhpcy5pbm5lclt0XTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgZm9yIChjb25zdCBbdCwgcl0gb2YgbikgaWYgKHRoaXMuZXF1YWxzRm4odCwgZSkpIHJldHVybiByO1xuICAgIH1cbiAgICBoYXMoZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmdldChlKTtcbiAgICB9XG4gICAgLyoqIFB1dCB0aGlzIGtleSBhbmQgdmFsdWUgaW4gdGhlIG1hcC4gKi8gICAgc2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMubWFwS2V5Rm4oZSksIHIgPSB0aGlzLmlubmVyW25dO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gdGhpcy5pbm5lcltuXSA9IFsgWyBlLCB0IF0gXSwgdm9pZCB0aGlzLmlubmVyU2l6ZSsrO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHIubGVuZ3RoOyBuKyspIGlmICh0aGlzLmVxdWFsc0ZuKHJbbl1bMF0sIGUpKSBcbiAgICAgICAgLy8gVGhpcyBpcyB1cGRhdGluZyBhbiBleGlzdGluZyBlbnRyeSBhbmQgZG9lcyBub3QgaW5jcmVhc2UgYGlubmVyU2l6ZWAuXG4gICAgICAgIHJldHVybiB2b2lkIChyW25dID0gWyBlLCB0IF0pO1xuICAgICAgICByLnB1c2goWyBlLCB0IF0pLCB0aGlzLmlubmVyU2l6ZSsrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgbWFwLiBSZXR1cm5zIGEgYm9vbGVhbiBpZiBhbnl0aGluZyB3YXMgZGVsZXRlZC5cbiAgICAgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubWFwS2V5Rm4oZSksIG4gPSB0aGlzLmlubmVyW3RdO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgbi5sZW5ndGg7IHIrKykgaWYgKHRoaXMuZXF1YWxzRm4obltyXVswXSwgZSkpIHJldHVybiAxID09PSBuLmxlbmd0aCA/IGRlbGV0ZSB0aGlzLmlubmVyW3RdIDogbi5zcGxpY2UociwgMSksIFxuICAgICAgICB0aGlzLmlubmVyU2l6ZS0tLCAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgZm9yRWFjaCh0aGlzLmlubmVyLCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3QsIHJdIG9mIG4pIGUodCwgcik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW1wdHkodGhpcy5pbm5lcik7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyU2l6ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHJlID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpIHtcbiAgICByZXR1cm4gcmU7XG59XG5cbmNvbnN0IGllID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gZG9jdW1lbnRNYXAoLi4uZSkge1xuICAgIGxldCB0ID0gaWU7XG4gICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSB0Lmluc2VydChuLmtleSwgbik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwKGUpIHtcbiAgICBsZXQgdCA9IGllO1xuICAgIHJldHVybiBlLmZvckVhY2goKChlLCBuKSA9PiB0ID0gdC5pbnNlcnQoZSwgbi5vdmVybGF5ZWREb2N1bWVudCkpKSwgdDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3TXV0YXRpb25NYXAoKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RNYXAoKGUgPT4gZS50b1N0cmluZygpKSwgKChlLCB0KSA9PiBlLmlzRXF1YWwodCkpKTtcbn1cblxuY29uc3Qgc2UgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuXG5jb25zdCBvZSA9IG5ldyBTb3J0ZWRTZXQoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCguLi5lKSB7XG4gICAgbGV0IHQgPSBvZTtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IHQuYWRkKG4pO1xuICAgIHJldHVybiB0O1xufVxuXG5jb25zdCBfZSA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0SWRTZXQoKSB7XG4gICAgcmV0dXJuIF9lO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGFuIERvdWJsZVZhbHVlIGZvciBgdmFsdWVgIHRoYXQgaXMgZW5jb2RlZCBiYXNlZCB0aGUgc2VyaWFsaXplcidzXG4gKiBgdXNlUHJvdG8zSnNvbmAgc2V0dGluZy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb3VibGUoZSwgdCkge1xuICAgIGlmIChlLnVzZVByb3RvM0pzb24pIHtcbiAgICAgICAgaWYgKGlzTmFOKHQpKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiTmFOXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgPT09IDEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAodCA9PT0gLTEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiLUluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG91YmxlVmFsdWU6IF9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyh0KSA/IFwiLTBcIiA6IHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSW50ZWdlclZhbHVlIGZvciBgdmFsdWVgLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0ludGVnZXIoZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogXCJcIiArIGVcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKiBUaGUgcmV0dXJuIHZhbHVlIGlzIGFuIEludGVnZXJWYWx1ZSBpZiBpdCBjYW4gc2FmZWx5IHJlcHJlc2VudCB0aGUgdmFsdWUsXG4gKiBvdGhlcndpc2UgYSBEb3VibGVWYWx1ZSBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiB0b051bWJlcihlLCB0KSB7XG4gICAgcmV0dXJuIGlzU2FmZUludGVnZXIodCkgPyBfX1BSSVZBVEVfdG9JbnRlZ2VyKHQpIDogX19QUklWQVRFX3RvRG91YmxlKGUsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFVzZWQgdG8gcmVwcmVzZW50IGEgZmllbGQgdHJhbnNmb3JtIG9uIGEgbXV0YXRpb24uICovIGNsYXNzIFRyYW5zZm9ybU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBzdHJ1Y3R1cmFsIHR5cGUgb2YgYFRyYW5zZm9ybU9wZXJhdGlvbmAgaXMgdW5pcXVlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy81NDUxXG4gICAgICAgIHRoaXMuXyA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxvY2FsIHRyYW5zZm9ybSByZXN1bHQgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYHByZXZpb3VzVmFsdWVgLFxuICogb3B0aW9uYWxseSB1c2luZyB0aGUgcHJvdmlkZWQgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9Mb2NhbFZpZXcoZSwgdCwgbikge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSA/IGZ1bmN0aW9uIHNlcnZlclRpbWVzdGFtcCQxKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcInNlcnZlcl90aW1lc3RhbXBcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgX19sb2NhbF93cml0ZV90aW1lX186IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IGUuc2Vjb25kcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbm9zOiBlLm5hbm9zZWNvbmRzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIFdlIHNob3VsZCBhdm9pZCBzdG9yaW5nIGRlZXBseSBuZXN0ZWQgc2VydmVyIHRpbWVzdGFtcCBtYXAgdmFsdWVzXG4gICAgICAgIC8vIGJlY2F1c2Ugd2UgbmV2ZXIgdXNlIHRoZSBpbnRlcm1lZGlhdGUgXCJwcmV2aW91cyB2YWx1ZXNcIi5cbiAgICAgICAgLy8gRm9yIGV4YW1wbGU6XG4gICAgICAgIC8vIHByZXZpb3VzOiA0MkwsIGFkZDogdDEsIHJlc3VsdDogdDEgLT4gNDJMXG4gICAgICAgIC8vIHByZXZpb3VzOiB0MSwgIGFkZDogdDIsIHJlc3VsdDogdDIgLT4gNDJMIChOT1QgdDIgLT4gdDEgLT4gNDJMKVxuICAgICAgICAvLyBwcmV2aW91czogdDIsICBhZGQ6IHQzLCByZXN1bHQ6IHQzIC0+IDQyTCAoTk9UIHQzIC0+IHQyIC0+IHQxIC0+IDQyTClcbiAgICAgICAgLy8gYGdldFByZXZpb3VzVmFsdWVgIHJlY3Vyc2l2ZWx5IHRyYXZlcnNlcyBzZXJ2ZXIgdGltZXN0YW1wcyB0byBmaW5kIHRoZVxuICAgICAgICAvLyBsZWFzdCByZWNlbnQgVmFsdWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKHQpICYmICh0ID0gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUodCkpLCBcbiAgICAgICAgdCAmJiAobi5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fID0gdCksIHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiBuXG4gICAgICAgIH07XG4gICAgfShuLCB0KSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcHBseUFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FwcGx5QXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkgOiBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uVG9Mb2NhbFZpZXcoZSwgdCkge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFNpbmNlIEphdmFTY3JpcHQncyBpbnRlZ2VyIGFyaXRobWV0aWMgaXMgbGltaXRlZCB0byA1MyBiaXRcbiAgICAgICAgLy8gcHJlY2lzaW9uIGFuZCByZXNvbHZlcyBvdmVyZmxvd3MgYnkgcmVkdWNpbmcgcHJlY2lzaW9uLCB3ZSBkbyBub3RcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2NvbXB1dGVUcmFuc2Zvcm1PcGVyYXRpb25CYXNlVmFsdWUoZSwgdCksIHIgPSBhc051bWJlcihuKSArIGFzTnVtYmVyKGUuVGUpO1xuICAgICAgICByZXR1cm4gaXNJbnRlZ2VyKG4pICYmIGlzSW50ZWdlcihlLlRlKSA/IF9fUFJJVkFURV90b0ludGVnZXIocikgOiBfX1BSSVZBVEVfdG9Eb3VibGUoZS5zZXJpYWxpemVyLCByKTtcbiAgICB9KGUsIHQpO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIGEgZmluYWwgdHJhbnNmb3JtIHJlc3VsdCBhZnRlciB0aGUgdHJhbnNmb3JtIGhhcyBiZWVuIGFja25vd2xlZGdlZFxuICogYnkgdGhlIHNlcnZlciwgcG90ZW50aWFsbHkgdXNpbmcgdGhlIHNlcnZlci1wcm92aWRlZCB0cmFuc2Zvcm1SZXN1bHQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgLy8gVGhlIHNlcnZlciBqdXN0IHNlbmRzIG51bGwgYXMgdGhlIHRyYW5zZm9ybSByZXN1bHQgZm9yIGFycmF5IG9wZXJhdGlvbnMsXG4gICAgLy8gc28gd2UgaGF2ZSB0byBjYWxjdWxhdGUgYSByZXN1bHQgdGhlIHNhbWUgYXMgd2UgZG8gZm9yIGxvY2FsXG4gICAgLy8gYXBwbGljYXRpb25zLlxuICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXBwbHlBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcHBseUFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIDogbjtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIHRyYW5zZm9ybSBvcGVyYXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG9cbiAqIHBlcnNpc3QgZm9yIHRoaXMgdHJhbnNmb3JtLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSB0cmFuc2Zvcm1cbiAqIG9wZXJhdGlvbiBpcyBhbHdheXMgYXBwbGllZCB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzXG4gKiBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBCYXNlIHZhbHVlcyBwcm92aWRlIGNvbnNpc3RlbnQgYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kXG4gKiBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWUgbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kXG4gKiBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZSB0cmFuc2Zvcm0gb3BlcmF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLCBhcyB0aGV5IGNhbiBiZSByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXNcbiAqIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3Jtcy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcHV0ZVRyYW5zZm9ybU9wZXJhdGlvbkJhc2VWYWx1ZShlLCB0KSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiA/IFxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBlaXRoZXIgYW4gSW50ZWdlclZhbHVlIG9yIGEgRG91YmxlVmFsdWUuICovXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2lzTnVtYmVyKGUpIHtcbiAgICAgICAgcmV0dXJuIGlzSW50ZWdlcihlKSB8fCBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEb3VibGUoZSkge1xuICAgICAgICAgICAgcmV0dXJuICEhZSAmJiBcImRvdWJsZVZhbHVlXCIgaW4gZTtcbiAgICAgICAgfShlKTtcbiAgICB9KHQpID8gdCA6IHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiAwXG4gICAgfSA6IG51bGw7XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGEgdmFsdWUgaW50byBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wLiAqL1xuY2xhc3MgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSBleHRlbmRzIFRyYW5zZm9ybU9wZXJhdGlvbiB7fVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSB1bmlvbiBvcGVyYXRpb24uICovIGNsYXNzIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIGV4dGVuZHMgVHJhbnNmb3JtT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5QXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9jb2VyY2VkRmllbGRWYWx1ZXNBcnJheSh0KTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5lbGVtZW50cykgbi5zb21lKChlID0+IF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLCB0KSkpIHx8IG4ucHVzaCh0KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHJlbW92ZSBvcGVyYXRpb24uICovIGNsYXNzIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiBleHRlbmRzIFRyYW5zZm9ybU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseUFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIHtcbiAgICBsZXQgbiA9IF9fUFJJVkFURV9jb2VyY2VkRmllbGRWYWx1ZXNBcnJheSh0KTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5lbGVtZW50cykgbiA9IG4uZmlsdGVyKChlID0+ICFfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZSwgdCkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgYmFja2VuZCBzZW1hbnRpY3MgZm9yIGxvY2FsbHkgY29tcHV0ZWQgTlVNRVJJQ19BREQgKGluY3JlbWVudClcbiAqIHRyYW5zZm9ybXMuIENvbnZlcnRzIGFsbCBmaWVsZCB2YWx1ZXMgdG8gaW50ZWdlcnMgb3IgZG91YmxlcywgYnV0IHVubGlrZSB0aGVcbiAqIGJhY2tlbmQgZG9lcyBub3QgY2FwIGludGVnZXIgdmFsdWVzIGF0IDJeNjMuIEluc3RlYWQsIEphdmFTY3JpcHQgbnVtYmVyXG4gKiBhcml0aG1ldGljIGlzIHVzZWQgYW5kIHByZWNpc2lvbiBsb3NzIGNhbiBvY2N1ciBmb3IgdmFsdWVzIGdyZWF0ZXIgdGhhbiAyXjUzLlxuICovIGNsYXNzIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uIGV4dGVuZHMgVHJhbnNmb3JtT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuc2VyaWFsaXplciA9IGUsIHRoaXMuVGUgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYXNOdW1iZXIoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkoZSkge1xuICAgIHJldHVybiBpc0FycmF5KGUpICYmIGUuYXJyYXlWYWx1ZS52YWx1ZXMgPyBlLmFycmF5VmFsdWUudmFsdWVzLnNsaWNlKCkgOiBbXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqLyBjbGFzcyBGaWVsZFRyYW5zZm9ybSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmZpZWxkID0gZSwgdGhpcy50cmFuc2Zvcm0gPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkVHJhbnNmb3JtRXF1YWxzKGUsIHQpIHtcbiAgICByZXR1cm4gZS5maWVsZC5pc0VxdWFsKHQuZmllbGQpICYmIGZ1bmN0aW9uIF9fUFJJVkFURV90cmFuc2Zvcm1PcGVyYXRpb25FcXVhbHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uICYmIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiB8fCBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uICYmIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXJyYXlFcXVhbHMoZS5lbGVtZW50cywgdC5lbGVtZW50cywgX19QUklWQVRFX3ZhbHVlRXF1YWxzKSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiAmJiB0IGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZS5UZSwgdC5UZSkgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSAmJiB0IGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybTtcbiAgICB9KGUudHJhbnNmb3JtLCB0LnRyYW5zZm9ybSk7XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHN1Y2Nlc3NmdWxseSBhcHBseWluZyBhIG11dGF0aW9uIHRvIHRoZSBiYWNrZW5kLiAqL1xuY2xhc3MgTXV0YXRpb25SZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBtdXRhdGlvbiB3YXMgY29tbWl0dGVkOlxuICAgICAqXG4gICAgICogLSBGb3IgbW9zdCBvcGVyYXRpb25zLCB0aGlzIGlzIHRoZSB1cGRhdGVUaW1lIGluIHRoZSBXcml0ZVJlc3VsdC5cbiAgICAgKiAtIEZvciBkZWxldGVzLCB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSAoYmVjYXVzZSBkZWxldGVzIGFyZVxuICAgICAqICAgbm90IHN0b3JlZCBhbmQgaGF2ZSBubyB1cGRhdGVUaW1lKS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGVzZSB2ZXJzaW9ucyBjYW4gYmUgZGlmZmVyZW50OiBOby1vcCB3cml0ZXMgd2lsbCBub3QgY2hhbmdlXG4gICAgICogdGhlIHVwZGF0ZVRpbWUgZXZlbiB0aG91Z2ggdGhlIGNvbW1pdFRpbWUgYWR2YW5jZXMuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3VsdGluZyBmaWVsZHMgcmV0dXJuZWQgZnJvbSB0aGUgYmFja2VuZCBhZnRlciBhIG11dGF0aW9uXG4gICAgICogY29udGFpbmluZyBmaWVsZCB0cmFuc2Zvcm1zIGhhcyBiZWVuIGNvbW1pdHRlZC4gQ29udGFpbnMgb25lIEZpZWxkVmFsdWVcbiAgICAgKiBmb3IgZWFjaCBGaWVsZFRyYW5zZm9ybSB0aGF0IHdhcyBpbiB0aGUgbXV0YXRpb24uXG4gICAgICpcbiAgICAgKiBXaWxsIGJlIGVtcHR5IGlmIHRoZSBtdXRhdGlvbiBkaWQgbm90IGNvbnRhaW4gYW55IGZpZWxkIHRyYW5zZm9ybXMuXG4gICAgICovXG4gICAgdCkge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLnRyYW5zZm9ybVJlc3VsdHMgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgcHJlY29uZGl0aW9uIGZvciBhIG11dGF0aW9uLiBUaGlzIGZvbGxvd3MgdGhlIG1vZGVsIHRoYXQgdGhlXG4gKiBiYWNrZW5kIGFjY2VwdHMgd2l0aCB0aGUgc3BlY2lhbCBjYXNlIG9mIGFuIGV4cGxpY2l0IFwiZW1wdHlcIiBwcmVjb25kaXRpb25cbiAqIChtZWFuaW5nIG5vIHByZWNvbmRpdGlvbikuXG4gKi8gY2xhc3MgUHJlY29uZGl0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGltZSA9IGUsIHRoaXMuZXhpc3RzID0gdDtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZW1wdHkgUHJlY29uZGl0aW9uLiAqLyAgICBzdGF0aWMgbm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb247XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiB3aXRoIGFuIGV4aXN0cyBmbGFnLiAqLyAgICBzdGF0aWMgZXhpc3RzKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb24odm9pZCAwLCBlKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIGJhc2VkIG9uIGEgdmVyc2lvbiBhIGRvY3VtZW50IGV4aXN0cyBhdC4gKi8gICAgc3RhdGljIHVwZGF0ZVRpbWUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByZWNvbmRpdGlvbihlKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciB0aGlzIFByZWNvbmRpdGlvbiBpcyBlbXB0eS4gKi8gICAgZ2V0IGlzTm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdGhpcy51cGRhdGVUaW1lICYmIHZvaWQgMCA9PT0gdGhpcy5leGlzdHM7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5leGlzdHMgPT09IGUuZXhpc3RzICYmICh0aGlzLnVwZGF0ZVRpbWUgPyAhIWUudXBkYXRlVGltZSAmJiB0aGlzLnVwZGF0ZVRpbWUuaXNFcXVhbChlLnVwZGF0ZVRpbWUpIDogIWUudXBkYXRlVGltZSk7XG4gICAgfVxufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBwcmVjb25kaXRpb25zIGlzIHZhbGlkIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZSwgdCkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IGUudXBkYXRlVGltZSA/IHQuaXNGb3VuZERvY3VtZW50KCkgJiYgdC52ZXJzaW9uLmlzRXF1YWwoZS51cGRhdGVUaW1lKSA6IHZvaWQgMCA9PT0gZS5leGlzdHMgfHwgZS5leGlzdHMgPT09IHQuaXNGb3VuZERvY3VtZW50KCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiBkZXNjcmliZXMgYSBzZWxmLWNvbnRhaW5lZCBjaGFuZ2UgdG8gYSBkb2N1bWVudC4gTXV0YXRpb25zIGNhblxuICogY3JlYXRlLCByZXBsYWNlLCBkZWxldGUsIGFuZCB1cGRhdGUgc3Vic2V0cyBvZiBkb2N1bWVudHMuXG4gKlxuICogTXV0YXRpb25zIG5vdCBvbmx5IGFjdCBvbiB0aGUgdmFsdWUgb2YgdGhlIGRvY3VtZW50IGJ1dCBhbHNvIGl0cyB2ZXJzaW9uLlxuICpcbiAqIEZvciBsb2NhbCBtdXRhdGlvbnMgKG11dGF0aW9ucyB0aGF0IGhhdmVuJ3QgYmVlbiBjb21taXR0ZWQgeWV0KSwgd2UgcHJlc2VydmVcbiAqIHRoZSBleGlzdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gRm9yIERlbGV0ZSBtdXRhdGlvbnMsIHdlXG4gKiByZXNldCB0aGUgdmVyc2lvbiB0byAwLlxuICpcbiAqIEhlcmUncyB0aGUgZXhwZWN0ZWQgdHJhbnNpdGlvbiB0YWJsZS5cbiAqXG4gKiBNVVRBVElPTiAgICAgICAgICAgQVBQTElFRCBUTyAgICAgICAgICAgIFJFU1VMVFMgSU5cbiAqXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogU2V0TXV0YXRpb24gICAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBEb2N1bWVudCh2MClcbiAqIFNldE11dGF0aW9uICAgICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgRG9jdW1lbnQodjApXG4gKiBQYXRjaE11dGF0aW9uICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBVbmtub3duRG9jdW1lbnQodjMpXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIE5vRG9jdW1lbnQodjApXG4gKlxuICogRm9yIGFja25vd2xlZGdlZCBtdXRhdGlvbnMsIHdlIHVzZSB0aGUgdXBkYXRlVGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBhc1xuICogdGhlIHJlc3VsdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gQXMgZGVsZXRlcyBoYXZlIG5vXG4gKiBleHBsaWNpdCB1cGRhdGUgdGltZSwgd2UgdXNlIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGZvclxuICogRGVsZXRlIG11dGF0aW9ucy5cbiAqXG4gKiBJZiBhIG11dGF0aW9uIGlzIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZCBidXQgZmFpbHMgdGhlIHByZWNvbmRpdGlvbiBjaGVja1xuICogbG9jYWxseSwgd2UgdHJhbnNpdGlvbiB0byBhbiBgVW5rbm93bkRvY3VtZW50YCBhbmQgcmVseSBvbiBXYXRjaCB0byBzZW5kIHVzXG4gKiB0aGUgdXBkYXRlZCB2ZXJzaW9uLlxuICpcbiAqIEZpZWxkIHRyYW5zZm9ybXMgYXJlIHVzZWQgb25seSB3aXRoIFBhdGNoIGFuZCBTZXQgTXV0YXRpb25zLiBXZSB1c2UgdGhlXG4gKiBgdXBkYXRlVHJhbnNmb3Jtc2AgbWVzc2FnZSB0byBzdG9yZSB0cmFuc2Zvcm1zLCByYXRoZXIgdGhhbiB0aGUgYHRyYW5zZm9ybXNgc1xuICogbWVzc2FnZXMuXG4gKlxuICogIyMgU3ViY2xhc3NpbmcgTm90ZXNcbiAqXG4gKiBFdmVyeSB0eXBlIG9mIG11dGF0aW9uIG5lZWRzIHRvIGltcGxlbWVudCBpdHMgb3duIGFwcGx5VG9SZW1vdGVEb2N1bWVudCgpIGFuZFxuICogYXBwbHlUb0xvY2FsVmlldygpIHRvIGltcGxlbWVudCB0aGUgYWN0dWFsIGJlaGF2aW9yIG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvblxuICogdG8gc29tZSBzb3VyY2UgZG9jdW1lbnQgKHNlZSBgc2V0TXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoKWAgZm9yIGFuXG4gKiBleGFtcGxlKS5cbiAqLyBjbGFzcyBNdXRhdGlvbiB7fVxuXG4vKipcbiAqIEEgdXRpbGl0eSBtZXRob2QgdG8gY2FsY3VsYXRlIGEgYE11dGF0aW9uYCByZXByZXNlbnRpbmcgdGhlIG92ZXJsYXkgZnJvbSB0aGVcbiAqIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgYW5kIGEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIHRoZSBmaWVsZHMgdGhhdFxuICogYXJlIG11dGF0ZWQgYnkgdGhlIGxvY2FsIG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY2FsY3VsYXRlT3ZlcmxheU11dGF0aW9uKGUsIHQpIHtcbiAgICBpZiAoIWUuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdCAmJiAwID09PSB0LmZpZWxkcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIC8vIG1hc2sgaXMgbnVsbCB3aGVuIHNldHMgb3IgZGVsZXRlcyBhcmUgYXBwbGllZCB0byB0aGUgY3VycmVudCBkb2N1bWVudC5cbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBlLmlzTm9Eb2N1bWVudCgpID8gbmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihlLmtleSwgUHJlY29uZGl0aW9uLm5vbmUoKSkgOiBuZXcgX19QUklWQVRFX1NldE11dGF0aW9uKGUua2V5LCBlLmRhdGEsIFByZWNvbmRpdGlvbi5ub25lKCkpO1xuICAgIHtcbiAgICAgICAgY29uc3QgbiA9IGUuZGF0YSwgciA9IE9iamVjdFZhbHVlLmVtcHR5KCk7XG4gICAgICAgIGxldCBpID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGgkMS5jb21wYXJhdG9yKTtcbiAgICAgICAgZm9yIChsZXQgZSBvZiB0LmZpZWxkcykgaWYgKCFpLmhhcyhlKSkge1xuICAgICAgICAgICAgbGV0IHQgPSBuLmZpZWxkKGUpO1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGRlbGV0aW5nIGEgbmVzdGVkIGZpZWxkLCB3ZSB0YWtlIHRoZSBpbW1lZGlhdGUgcGFyZW50IGFzXG4gICAgICAgICAgICAvLyB0aGUgbWFzayB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgcmVzdWx0aW5nIG11dGF0aW9uLlxuICAgICAgICAgICAgLy8gSnVzdGlmaWNhdGlvbjogTmVzdGVkIGZpZWxkcyBjYW4gY3JlYXRlIHBhcmVudCBmaWVsZHMgaW1wbGljaXRseS4gSWZcbiAgICAgICAgICAgIC8vIG9ubHkgYSBsZWFmIGVudHJ5IGlzIGRlbGV0ZWQgaW4gbGF0ZXIgbXV0YXRpb25zLCB0aGUgcGFyZW50IGZpZWxkXG4gICAgICAgICAgICAvLyBzaG91bGQgc3RpbGwgcmVtYWluLCBidXQgd2UgbWF5IGhhdmUgbG9zdCB0aGlzIGluZm9ybWF0aW9uLlxuICAgICAgICAgICAgLy8gQ29uc2lkZXIgbXV0YXRpb24gKGZvby5iYXIgMSksIHRoZW4gbXV0YXRpb24gKGZvby5iYXIgZGVsZXRlKCkpLlxuICAgICAgICAgICAgLy8gVGhpcyBsZWF2ZXMgdGhlIGZpbmFsIHJlc3VsdCAoZm9vLCB7fSkuIERlc3BpdGUgdGhlIGZhY3QgdGhhdCBgZG9jYFxuICAgICAgICAgICAgLy8gaGFzIHRoZSBjb3JyZWN0IHJlc3VsdCwgYGZvb2AgaXMgbm90IGluIGBtYXNrYCwgYW5kIHRoZSByZXN1bHRpbmdcbiAgICAgICAgICAgIC8vIG11dGF0aW9uIHdvdWxkIG1pc3MgYGZvb2AuXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSB0ICYmIGUubGVuZ3RoID4gMSAmJiAoZSA9IGUucG9wTGFzdCgpLCB0ID0gbi5maWVsZChlKSksIG51bGwgPT09IHQgPyByLmRlbGV0ZShlKSA6IHIuc2V0KGUsIHQpLCBcbiAgICAgICAgICAgIGkgPSBpLmFkZChlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXRjaE11dGF0aW9uKGUua2V5LCByLCBuZXcgRmllbGRNYXNrKGkudG9BcnJheSgpKSwgUHJlY29uZGl0aW9uLm5vbmUoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmcgYVxuICogbmV3IHJlbW90ZSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHN0YXRlXG4gKiAoZS5nLiBpdCBpcyBpbnZhbGlkIG9yIG91dGRhdGVkKSwgdGhlIGRvY3VtZW50IHR5cGUgbWF5IHRyYW5zaXRpb24gdG9cbiAqIHVua25vd24uXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbXV0YXRpb25SZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvbiBmcm9tIHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXRNdXRhdGlvbiA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBzZXRNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYVxuICAgICAgICAvLyByZW1vdGUgZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbXVzdCBoYXZlIGhlbGQuXG4gICAgICAgIGNvbnN0IHIgPSBlLnZhbHVlLmNsb25lKCksIGkgPSBfX1BSSVZBVEVfc2VydmVyVHJhbnNmb3JtUmVzdWx0cyhlLmZpZWxkVHJhbnNmb3JtcywgdCwgbi50cmFuc2Zvcm1SZXN1bHRzKTtcbiAgICAgICAgci5zZXRBbGwoaSksIHQuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIHIpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oZSwgdCwgbikgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24gPyBmdW5jdGlvbiBfX1BSSVZBVEVfcGF0Y2hNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgIGlmICghX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLnByZWNvbmRpdGlvbiwgdCkpIFxuICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cbiAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgY29udmVydCB0byBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCBhXG4gICAgICAgIC8vIGtub3duIHVwZGF0ZVRpbWUuXG4gICAgICAgIHJldHVybiB2b2lkIHQuY29udmVydFRvVW5rbm93bkRvY3VtZW50KG4udmVyc2lvbik7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfc2VydmVyVHJhbnNmb3JtUmVzdWx0cyhlLmZpZWxkVHJhbnNmb3JtcywgdCwgbi50cmFuc2Zvcm1SZXN1bHRzKSwgaSA9IHQuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoX19QUklWQVRFX2dldFBhdGNoKGUpKSwgaS5zZXRBbGwociksIHQuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIGkpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oZSwgdCwgbikgOiBmdW5jdGlvbiBfX1BSSVZBVEVfZGVsZXRlTXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICAvLyBVbmxpa2UgYXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhIHJlbW90ZVxuICAgICAgICAvLyBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvbiBtdXN0XG4gICAgICAgIC8vIGhhdmUgaGVsZC5cbiAgICAgICAgdC5jb252ZXJ0VG9Ob0RvY3VtZW50KG4udmVyc2lvbikuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSgwLCB0LCBuKTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nXG4gKiB0aGUgbmV3IGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlXG4gKiBleHBlY3RlZCBzdGF0ZSwgdGhlIGRvY3VtZW50IGlzIG5vdCBtb2RpZmllZC5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBwcmV2aW91c01hc2sgLSBUaGUgZmllbGRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgYmVmb3JlIGFwcGx5aW5nIHRoaXMgbXV0YXRpb24uXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBBIHRpbWVzdGFtcCBpbmRpY2F0aW5nIHRoZSBsb2NhbCB3cml0ZSB0aW1lIG9mIHRoZVxuICogICAgIGJhdGNoIHRoaXMgbXV0YXRpb24gaXMgYSBwYXJ0IG9mLlxuICogQHJldHVybnMgQSBgRmllbGRNYXNrYCByZXByZXNlbnRpbmcgdGhlIGZpZWxkcyB0aGF0IGFyZSBjaGFuZ2VkIGJ5IGFwcGx5aW5nIHRoaXMgbXV0YXRpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhlLCB0LCBuLCByKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2V0TXV0YXRpb24gPyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0TXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUucHJlY29uZGl0aW9uLCB0KSkgXG4gICAgICAgIC8vIFRoZSBtdXRhdGlvbiBmYWlsZWQgdG8gYXBwbHkgKGUuZy4gYSBkb2N1bWVudCBJRCBjcmVhdGVkIHdpdGggYWRkKClcbiAgICAgICAgLy8gY2F1c2VkIGEgbmFtZSBjb2xsaXNpb24pLlxuICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IGUudmFsdWUuY2xvbmUoKSwgcyA9IF9fUFJJVkFURV9sb2NhbFRyYW5zZm9ybVJlc3VsdHMoZS5maWVsZFRyYW5zZm9ybXMsIHIsIHQpO1xuICAgICAgICByZXR1cm4gaS5zZXRBbGwocyksIHQuY29udmVydFRvRm91bmREb2N1bWVudCh0LnZlcnNpb24sIGkpLnNldEhhc0xvY2FsTXV0YXRpb25zKCksIFxuICAgICAgICBudWxsO1xuIC8vIFNldE11dGF0aW9uIG92ZXJ3cml0ZXMgYWxsIGZpZWxkcy5cbiAgICAgICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IG1vZGlmaWVzIGZpZWxkcyBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogZ2l2ZW4gdmFsdWVzLiBUaGUgdmFsdWVzIGFyZSBhcHBsaWVkIHRocm91Z2ggYSBmaWVsZCBtYXNrOlxuICpcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBib3RoIHRoZSBtYXNrIGFuZCB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgdXBkYXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBuZWl0aGVyIHRoZSBtYXNrIG5vciB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZ1xuICogICAgZmllbGQgaXMgdW5tb2RpZmllZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiB0aGUgbWFzayBidXQgbm90IGluIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyBkZWxldGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIG5vdCBpbiB0aGUgbWFzayBidXQgaXMgaW4gdGhlIHZhbHVlcywgdGhlIHZhbHVlcyBtYXAgaXNcbiAqICAgIGlnbm9yZWQuXG4gKi8gKGUsIHQsIG4sIHIpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9QYXRjaE11dGF0aW9uID8gZnVuY3Rpb24gX19QUklWQVRFX3BhdGNoTXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUucHJlY29uZGl0aW9uLCB0KSkgcmV0dXJuIG47XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfbG9jYWxUcmFuc2Zvcm1SZXN1bHRzKGUuZmllbGRUcmFuc2Zvcm1zLCByLCB0KSwgcyA9IHQuZGF0YTtcbiAgICAgICAgaWYgKHMuc2V0QWxsKF9fUFJJVkFURV9nZXRQYXRjaChlKSksIHMuc2V0QWxsKGkpLCB0LmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQodC52ZXJzaW9uLCBzKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbCA9PT0gbikgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBuLnVuaW9uV2l0aChlLmZpZWxkTWFzay5maWVsZHMpLnVuaW9uV2l0aChlLmZpZWxkVHJhbnNmb3Jtcy5tYXAoKGUgPT4gZS5maWVsZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgRmllbGRQYXRoL1ZhbHVlIG1hcCB3aXRoIHRoZSBjb250ZW50IG9mIHRoZSBQYXRjaE11dGF0aW9uLlxuICovIChlLCB0LCBuLCByKSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9kZWxldGVNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcoZSwgdCwgbikge1xuICAgICAgICBpZiAoX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLnByZWNvbmRpdGlvbiwgdCkpIHJldHVybiB0LmNvbnZlcnRUb05vRG9jdW1lbnQodC52ZXJzaW9uKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbDtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IHZlcmlmaWVzIHRoZSBleGlzdGVuY2Ugb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aFxuICogdGhlIHByb3ZpZGVkIHByZWNvbmRpdGlvbi5cbiAqXG4gKiBUaGUgYHZlcmlmeWAgb3BlcmF0aW9uIGlzIG9ubHkgdXNlZCBpbiBUcmFuc2FjdGlvbnMsIGFuZCB0aGlzIGNsYXNzIHNlcnZlc1xuICogcHJpbWFyaWx5IHRvIGZhY2lsaXRhdGUgc2VyaWFsaXphdGlvbiBpbnRvIHByb3Rvcy5cbiAqLyAoZSwgdCwgbik7XG59XG5cbi8qKlxuICogSWYgdGhpcyBtdXRhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0byBwZXJzaXN0IHdpdGhcbiAqIHRoaXMgbXV0YXRpb24uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIG11dGF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkXG4gKiB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIFRoZSBiYXNlIHZhbHVlIGlzIGEgc3BhcnNlIG9iamVjdCB0aGF0IGNvbnNpc3RzIG9mIG9ubHkgdGhlIGRvY3VtZW50XG4gKiBmaWVsZHMgZm9yIHdoaWNoIHRoaXMgbXV0YXRpb24gY29udGFpbnMgYSBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1hdGlvblxuICogKGUuZy4gYSBudW1lcmljIGluY3JlbWVudCkuIFRoZSBwcm92aWRlZCB2YWx1ZSBndWFyYW50ZWVzIGNvbnNpc3RlbnRcbiAqIGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZCBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWVcbiAqIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZVxuICogbXV0YXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yIGlkZW1wb3RlbnQgbXV0YXRpb25zLCBhcyB0aGV5IGNhbiBiZVxuICogcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbkV4dHJhY3RCYXNlVmFsdWUoZSwgdCkge1xuICAgIGxldCBuID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHIgb2YgZS5maWVsZFRyYW5zZm9ybXMpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZChyLmZpZWxkKSwgaSA9IF9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlKHIudHJhbnNmb3JtLCBlIHx8IG51bGwpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG51bGwgPT09IG4gJiYgKG4gPSBPYmplY3RWYWx1ZS5lbXB0eSgpKSwgbi5zZXQoci5maWVsZCwgaSkpO1xuICAgIH1cbiAgICByZXR1cm4gbiB8fCBudWxsO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMoZSwgdCkge1xuICAgIHJldHVybiBlLnR5cGUgPT09IHQudHlwZSAmJiAoISFlLmtleS5pc0VxdWFsKHQua2V5KSAmJiAoISFlLnByZWNvbmRpdGlvbi5pc0VxdWFsKHQucHJlY29uZGl0aW9uKSAmJiAoISFmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRUcmFuc2Zvcm1zQXJlRXF1YWwoZSwgdCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlICYmIHZvaWQgMCA9PT0gdCB8fCAhKCFlIHx8ICF0KSAmJiBfX1BSSVZBVEVfYXJyYXlFcXVhbHMoZSwgdCwgKChlLCB0KSA9PiBfX1BSSVZBVEVfZmllbGRUcmFuc2Zvcm1FcXVhbHMoZSwgdCkpKTtcbiAgICB9KGUuZmllbGRUcmFuc2Zvcm1zLCB0LmZpZWxkVHJhbnNmb3JtcykgJiYgKDAgLyogTXV0YXRpb25UeXBlLlNldCAqLyA9PT0gZS50eXBlID8gZS52YWx1ZS5pc0VxdWFsKHQudmFsdWUpIDogMSAvKiBNdXRhdGlvblR5cGUuUGF0Y2ggKi8gIT09IGUudHlwZSB8fCBlLmRhdGEuaXNFcXVhbCh0LmRhdGEpICYmIGUuZmllbGRNYXNrLmlzRXF1YWwodC5maWVsZE1hc2spKSkpKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgY3JlYXRlcyBvciByZXBsYWNlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxuICovIGNsYXNzIF9fUFJJVkFURV9TZXRNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSBlLCB0aGlzLnZhbHVlID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBuLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IHIsIFxuICAgICAgICB0aGlzLnR5cGUgPSAwIC8qIE11dGF0aW9uVHlwZS5TZXQgKi87XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSBlLCB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IG4sIHRoaXMucHJlY29uZGl0aW9uID0gciwgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSwgdGhpcy50eXBlID0gMSAvKiBNdXRhdGlvblR5cGUuUGF0Y2ggKi87XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRNYXNrO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldFBhdGNoKGUpIHtcbiAgICBjb25zdCB0ID0gbmV3IE1hcDtcbiAgICByZXR1cm4gZS5maWVsZE1hc2suZmllbGRzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICBpZiAoIW4uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjb25zdCByID0gZS5kYXRhLmZpZWxkKG4pO1xuICAgICAgICAgICAgdC5zZXQobiwgcik7XG4gICAgICAgIH1cbiAgICB9KSksIHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2UgYWZ0ZXIgYSBtdXRhdGlvblxuICogY29udGFpbmluZyB0cmFuc2Zvcm1zIGhhcyBiZWVuIGFja25vd2xlZGdlZCBieSB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhcHBseWluZyBhbGxcbiAqIHByZXZpb3VzIG11dGF0aW9ucy5cbiAqIEBwYXJhbSBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzIC0gVGhlIHRyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IHRoZSBzZXJ2ZXIuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc2VydmVyVHJhbnNmb3JtUmVzdWx0cyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG5ldyBNYXA7XG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcyA9IGVbaV0sIG8gPSBzLnRyYW5zZm9ybSwgXyA9IHQuZGF0YS5maWVsZChzLmZpZWxkKTtcbiAgICAgICAgci5zZXQocy5maWVsZCwgX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9SZW1vdGVEb2N1bWVudChvLCBfLCBuW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIHdoZW4gYXBwbHlpbmcgYVxuICogdHJhbnNmb3JtIGxvY2FsbHkuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgbG9jYWwgdGltZSBvZiB0aGUgbXV0YXRpb24gKHVzZWQgdG9cbiAqICAgICBnZW5lcmF0ZSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMpLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSB0cmFuc2Zvcm1zIG9uLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG5ldyBNYXA7XG4gICAgZm9yIChjb25zdCBpIG9mIGUpIHtcbiAgICAgICAgY29uc3QgZSA9IGkudHJhbnNmb3JtLCBzID0gbi5kYXRhLmZpZWxkKGkuZmllbGQpO1xuICAgICAgICByLnNldChpLmZpZWxkLCBfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub0xvY2FsVmlldyhlLCBzLCB0KSk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovIGNsYXNzIF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSB0LCB0aGlzLnR5cGUgPSAyIC8qIE11dGF0aW9uVHlwZS5EZWxldGUgKi8gLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9WZXJpZnlNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSB0LCB0aGlzLnR5cGUgPSAzIC8qIE11dGF0aW9uVHlwZS5WZXJpZnkgKi8gLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxuICovIGNsYXNzIE11dGF0aW9uQmF0Y2gge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIHVuaXF1ZSBJRCBvZiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBvcmlnaW5hbCB3cml0ZSB0aW1lIG9mIHRoaXMgbXV0YXRpb24uXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgLSBNdXRhdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBwb3B1bGF0ZSB0aGUgYmFzZVxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcbiAgICAgKiBvdmVyd3JpdGUgdmFsdWVzIHRoYXQgYXJlIHBlcnNpc3RlZCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBCYXNlXG4gICAgICogbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgLSBUaGUgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMgaW4gdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLmJhdGNoSWQgPSBlLCB0aGlzLmxvY2FsV3JpdGVUaW1lID0gdCwgdGhpcy5iYXNlTXV0YXRpb25zID0gbiwgdGhpcy5tdXRhdGlvbnMgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXMgTXV0YXRpb25CYXRjaCB0byB0aGUgc3BlY2lmaWVkIGRvY3VtZW50XG4gICAgICogdG8gY29tcHV0ZSB0aGUgc3RhdGUgb2YgdGhlIHJlbW90ZSBkb2N1bWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gYmF0Y2hSZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBNdXRhdGlvbkJhdGNoIHRvIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovICAgIGFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm11dGF0aW9uUmVzdWx0cztcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMubXV0YXRpb25zW3RdO1xuICAgICAgICAgICAgaWYgKHIua2V5LmlzRXF1YWwoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KHIsIGUsIG5bdF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQgZ2l2ZW4gYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpc1xuICAgICAqIGJhdGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gbXV0YXRlZEZpZWxkcyAtIEZpZWxkcyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEByZXR1cm5zIEEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIGFsbCB0aGUgZmllbGRzIHRoYXQgYXJlIG11dGF0ZWQuXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbFZpZXcoZSwgdCkge1xuICAgICAgICAvLyBGaXJzdCwgYXBwbHkgdGhlIGJhc2Ugc3RhdGUuIFRoaXMgYWxsb3dzIHVzIHRvIGFwcGx5IG5vbi1pZGVtcG90ZW50XG4gICAgICAgIC8vIHRyYW5zZm9ybSBhZ2FpbnN0IGEgY29uc2lzdGVudCBzZXQgb2YgdmFsdWVzLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5iYXNlTXV0YXRpb25zKSBuLmtleS5pc0VxdWFsKGUua2V5KSAmJiAodCA9IF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcobiwgZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSkpO1xuICAgICAgICAvLyBTZWNvbmQsIGFwcGx5IGFsbCB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5tdXRhdGlvbnMpIG4ua2V5LmlzRXF1YWwoZS5rZXkpICYmICh0ID0gX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhuLCBlLCB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lKSk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgYWxsIHByb3ZpZGVkIGRvY3VtZW50cyBnaXZlbiB0aGUgbXV0YXRpb25zIGluXG4gICAgICogdGhpcyBiYXRjaC4gUmV0dXJucyBhIGBEb2N1bWVudEtleWAgdG8gYE11dGF0aW9uYCBtYXAgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXBsYWNlIGFsbCB0aGUgbXV0YXRpb24gYXBwbGljYXRpb25zLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldChlLCB0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3TXV0YXRpb25NYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLmZvckVhY2goKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGUuZ2V0KHIua2V5KSwgcyA9IGkub3ZlcmxheWVkRG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBUT0RPKG11dGFibGVkb2N1bWVudHMpOiBUaGlzIG1ldGhvZCBzaG91bGQgdGFrZSBhIE11dGFibGVEb2N1bWVudE1hcFxuICAgICAgICAgICAgLy8gYW5kIHdlIHNob3VsZCByZW1vdmUgdGhpcyBjYXN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG8gPSB0aGlzLmFwcGx5VG9Mb2NhbFZpZXcocywgaS5tdXRhdGVkRmllbGRzKTtcbiAgICAgICAgICAgIC8vIFNldCBtdXRhdGVkRmllbGRzIHRvIG51bGwgaWYgdGhlIGRvY3VtZW50IGlzIG9ubHkgZnJvbSBsb2NhbCBtdXRhdGlvbnMuXG4gICAgICAgICAgICAvLyBUaGlzIGNyZWF0ZXMgYSBTZXQgb3IgRGVsZXRlIG11dGF0aW9uLCBpbnN0ZWFkIG9mIHRyeWluZyB0byBjcmVhdGUgYVxuICAgICAgICAgICAgLy8gcGF0Y2ggbXV0YXRpb24gYXMgdGhlIG92ZXJsYXkuXG4gICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5oYXMoci5rZXkpID8gbnVsbCA6IG87XG4gICAgICAgICAgICBjb25zdCBfID0gX19QUklWQVRFX2NhbGN1bGF0ZU92ZXJsYXlNdXRhdGlvbihzLCBvKTtcbiAgICAgICAgICAgIG51bGwgIT09IF8gJiYgbi5zZXQoci5rZXksIF8pLCBzLmlzVmFsaWREb2N1bWVudCgpIHx8IHMuY29udmVydFRvTm9Eb2N1bWVudChTbmFwc2hvdFZlcnNpb24ubWluKCkpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIGtleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5yZWR1Y2UoKChlLCB0KSA9PiBlLmFkZCh0LmtleSkpLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaElkID09PSBlLmJhdGNoSWQgJiYgX19QUklWQVRFX2FycmF5RXF1YWxzKHRoaXMubXV0YXRpb25zLCBlLm11dGF0aW9ucywgKChlLCB0KSA9PiBfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMoZSwgdCkpKSAmJiBfX1BSSVZBVEVfYXJyYXlFcXVhbHModGhpcy5iYXNlTXV0YXRpb25zLCBlLmJhc2VNdXRhdGlvbnMsICgoZSwgdCkgPT4gX19QUklWQVRFX211dGF0aW9uRXF1YWxzKGUsIHQpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyBNdXRhdGlvbkJhdGNoUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCBcbiAgICAvKipcbiAgICAgKiBBIHByZS1jb21wdXRlZCBtYXBwaW5nIGZyb20gZWFjaCBtdXRhdGVkIGRvY3VtZW50IHRvIHRoZSByZXN1bHRpbmdcbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy5iYXRjaCA9IGUsIHRoaXMuY29tbWl0VmVyc2lvbiA9IHQsIHRoaXMubXV0YXRpb25SZXN1bHRzID0gbiwgdGhpcy5kb2NWZXJzaW9ucyA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdCBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCByZXN1bHRzLiBUaGVyZVxuICAgICAqIG11c3QgYmUgb25lIHJlc3VsdCBmb3IgZWFjaCBtdXRhdGlvbiBpbiB0aGUgYmF0Y2guIFRoaXMgc3RhdGljIGZhY3RvcnlcbiAgICAgKiBjYWNoZXMgYSBkb2N1bWVudD0mZ3Q7dmVyc2lvbiBtYXBwaW5nIChkb2NWZXJzaW9ucykuXG4gICAgICovICAgIHN0YXRpYyBmcm9tKGUsIHQsIG4pIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgICAgIGxldCByID0gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50VmVyc2lvbk1hcCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZTtcbiAgICAgICAgfSgpO1xuICAgICAgICBjb25zdCBpID0gZS5tdXRhdGlvbnM7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgaS5sZW5ndGg7IGUrKykgciA9IHIuaW5zZXJ0KGlbZV0ua2V5LCBuW2VdLnZlcnNpb24pO1xuICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQoZSwgdCwgbiwgcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhbiBvdmVybGF5IGNvbXB1dGVkIGJ5IEZpcmVzdG9yZS5cbiAqXG4gKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCBhIG11dGF0aW9uIGFuZCB0aGUgbGFyZ2VzdCBiYXRjaCBpZCBpbiBGaXJlc3RvcmUgd2hlblxuICogdGhlIG11dGF0aW9uIHdhcyBjcmVhdGVkLlxuICovIGNsYXNzIE92ZXJsYXkge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5sYXJnZXN0QmF0Y2hJZCA9IGUsIHRoaXMubXV0YXRpb24gPSB0O1xuICAgIH1cbiAgICBnZXRLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uLmtleTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIHRoaXMubXV0YXRpb24gPT09IGUubXV0YXRpb247XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYE92ZXJsYXl7XFxuICAgICAgbGFyZ2VzdEJhdGNoSWQ6ICR7dGhpcy5sYXJnZXN0QmF0Y2hJZH0sXFxuICAgICAgbXV0YXRpb246ICR7dGhpcy5tdXRhdGlvbi50b1N0cmluZygpfVxcbiAgICB9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbmNyZXRlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBBZ2dyZWdhdGUgdHlwZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQWdncmVnYXRlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmFsaWFzID0gZSwgdGhpcy5FZSA9IHQsIHRoaXMuZmllbGRQYXRoID0gbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEV4aXN0ZW5jZUZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmNvdW50ID0gZSwgdGhpcy51bmNoYW5nZWROYW1lcyA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFcnJvciBDb2RlcyBkZXNjcmliaW5nIHRoZSBkaWZmZXJlbnQgd2F5cyBHUlBDIGNhbiBmYWlsLiBUaGVzZSBhcmUgY29waWVkXG4gKiBkaXJlY3RseSBmcm9tIEdSUEMncyBzb3VyY2VzIGhlcmU6XG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAqXG4gKiBJbXBvcnRhbnQhIFRoZSBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBtYXR0ZXIgYmVjYXVzZSB0aGUgc3RyaW5nIGZvcm1zXG4gKiBhcmUgdXNlZCBmb3IgcmV2ZXJzZSBsb29rdXBzIGZyb20gdGhlIHdlYmNoYW5uZWwgc3RyZWFtLiBEbyBOT1QgY2hhbmdlIHRoZVxuICogbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgb3IgY2hhbmdlIHRoaXMgaW50byBhIGNvbnN0IGVudW0uXG4gKi8gdmFyIGFlLCB1ZTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgbm9uLXdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBTZWUgaXNQZXJtYW5lbnRXcml0ZUVycm9yIGZvciBjbGFzc2lmeWluZyB3cml0ZSBlcnJvcnMuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc1Blcm1hbmVudEVycm9yKGUpIHtcbiAgICBzd2l0Y2ggKGUpIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKCk7XG5cbiAgICAgIGNhc2UgRC5DQU5DRUxMRUQ6XG4gICAgICBjYXNlIEQuVU5LTk9XTjpcbiAgICAgIGNhc2UgRC5ERUFETElORV9FWENFRURFRDpcbiAgICAgIGNhc2UgRC5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICBjYXNlIEQuSU5URVJOQUw6XG4gICAgICBjYXNlIEQuVU5BVkFJTEFCTEU6XG4gLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgIGNhc2UgRC5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgY2FzZSBELklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICBjYXNlIEQuTk9UX0ZPVU5EOlxuICAgICAgY2FzZSBELkFMUkVBRFlfRVhJU1RTOlxuICAgICAgY2FzZSBELlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgY2FzZSBELkZBSUxFRF9QUkVDT05ESVRJT046XG4gLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cbiAgICAgICAgICAgICAgY2FzZSBELkFCT1JURUQ6XG4gICAgICBjYXNlIEQuT1VUX09GX1JBTkdFOlxuICAgICAgY2FzZSBELlVOSU1QTEVNRU5URUQ6XG4gICAgICBjYXNlIEQuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXG4gKlxuICogV3JpdGUgb3BlcmF0aW9ucyBtdXN0IGJlIGhhbmRsZWQgc3BlY2lhbGx5IGJlY2F1c2UgYXMgb2YgYi8xMTk0Mzc3NjQsIEFCT1JURURcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcbiAqIGFyZSBub3QgZ2VuZXJhbGx5IHJldHJ5YWJsZSkuXG4gKlxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXG4gKiBzaWduYWxzIHRoYXQgd2Ugc2hvdWxkIGRpc2NhcmQgb3VyIHN0cmVhbSB0b2tlbiAoaS5lLiBpdCBpcyBwZXJtYW5lbnQpLiBUaGlzXG4gKiBtZWFucyBhIGhhbmRzaGFrZSBlcnJvciBzaG91bGQgYmUgY2xhc3NpZmllZCB3aXRoIGlzUGVybWFuZW50RXJyb3IsIGFib3ZlLlxuICovXG4vKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIEdSUEMgc3RhdHVzIGNvZGUgbnVtYmVyLCBsaWtlIDAsIDEsIG9yIDE0LiBUaGVzZVxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyBIVFRQIHN0YXR1cyBjb2Rlcy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBHUlBDIHN0YXR1cyBjb2RlLiBGYWlscyBpZiB0aGVyZVxuICogICAgIGlzIG5vIG1hdGNoLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbWFwQ29kZUZyb21ScGNDb2RlKGUpIHtcbiAgICBpZiAodm9pZCAwID09PSBlKSBcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBub3JtYWxseSBoYXBwZW4sIGJ1dCBpbiBjZXJ0YWluIGVycm9yIGNhc2VzIChsaWtlIHRyeWluZ1xuICAgIC8vIHRvIHNlbmQgaW52YWxpZCBwcm90byBtZXNzYWdlcykgd2UgbWF5IGdldCBhbiBlcnJvciB3aXRoIG5vIEdSUEMgY29kZS5cbiAgICByZXR1cm4gX19QUklWQVRFX2xvZ0Vycm9yKFwiR1JQQyBlcnJvciBoYXMgbm8gLmNvZGVcIiksIEQuVU5LTk9XTjtcbiAgICBzd2l0Y2ggKGUpIHtcbiAgICAgIGNhc2UgYWUuT0s6XG4gICAgICAgIHJldHVybiBELk9LO1xuXG4gICAgICBjYXNlIGFlLkNBTkNFTExFRDpcbiAgICAgICAgcmV0dXJuIEQuQ0FOQ0VMTEVEO1xuXG4gICAgICBjYXNlIGFlLlVOS05PV046XG4gICAgICAgIHJldHVybiBELlVOS05PV047XG5cbiAgICAgIGNhc2UgYWUuREVBRExJTkVfRVhDRUVERUQ6XG4gICAgICAgIHJldHVybiBELkRFQURMSU5FX0VYQ0VFREVEO1xuXG4gICAgICBjYXNlIGFlLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgICAgcmV0dXJuIEQuUkVTT1VSQ0VfRVhIQVVTVEVEO1xuXG4gICAgICBjYXNlIGFlLklOVEVSTkFMOlxuICAgICAgICByZXR1cm4gRC5JTlRFUk5BTDtcblxuICAgICAgY2FzZSBhZS5VTkFWQUlMQUJMRTpcbiAgICAgICAgcmV0dXJuIEQuVU5BVkFJTEFCTEU7XG5cbiAgICAgIGNhc2UgYWUuVU5BVVRIRU5USUNBVEVEOlxuICAgICAgICByZXR1cm4gRC5VTkFVVEhFTlRJQ0FURUQ7XG5cbiAgICAgIGNhc2UgYWUuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgICAgcmV0dXJuIEQuSU5WQUxJRF9BUkdVTUVOVDtcblxuICAgICAgY2FzZSBhZS5OT1RfRk9VTkQ6XG4gICAgICAgIHJldHVybiBELk5PVF9GT1VORDtcblxuICAgICAgY2FzZSBhZS5BTFJFQURZX0VYSVNUUzpcbiAgICAgICAgcmV0dXJuIEQuQUxSRUFEWV9FWElTVFM7XG5cbiAgICAgIGNhc2UgYWUuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICAgIHJldHVybiBELlBFUk1JU1NJT05fREVOSUVEO1xuXG4gICAgICBjYXNlIGFlLkZBSUxFRF9QUkVDT05ESVRJT046XG4gICAgICAgIHJldHVybiBELkZBSUxFRF9QUkVDT05ESVRJT047XG5cbiAgICAgIGNhc2UgYWUuQUJPUlRFRDpcbiAgICAgICAgcmV0dXJuIEQuQUJPUlRFRDtcblxuICAgICAgY2FzZSBhZS5PVVRfT0ZfUkFOR0U6XG4gICAgICAgIHJldHVybiBELk9VVF9PRl9SQU5HRTtcblxuICAgICAgY2FzZSBhZS5VTklNUExFTUVOVEVEOlxuICAgICAgICByZXR1cm4gRC5VTklNUExFTUVOVEVEO1xuXG4gICAgICBjYXNlIGFlLkRBVEFfTE9TUzpcbiAgICAgICAgcmV0dXJuIEQuREFUQV9MT1NTO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBIVFRQIHJlc3BvbnNlJ3MgZXJyb3Igc3RhdHVzIHRvIHRoZSBlcXVpdmFsZW50IGVycm9yIGNvZGUuXG4gKlxuICogQHBhcmFtIHN0YXR1cyAtIEFuIEhUVFAgZXJyb3IgcmVzcG9uc2Ugc3RhdHVzIChcIkZBSUxFRF9QUkVDT05ESVRJT05cIixcbiAqIFwiVU5LTk9XTlwiLCBldGMuKVxuICogQHJldHVybnMgVGhlIGVxdWl2YWxlbnQgQ29kZS4gTm9uLW1hdGNoaW5nIHJlc3BvbnNlcyBhcmUgbWFwcGVkIHRvXG4gKiAgICAgQ29kZS5VTktOT1dOLlxuICovICh1ZSA9IGFlIHx8IChhZSA9IHt9KSlbdWUuT0sgPSAwXSA9IFwiT0tcIiwgdWVbdWUuQ0FOQ0VMTEVEID0gMV0gPSBcIkNBTkNFTExFRFwiLCBcbnVlW3VlLlVOS05PV04gPSAyXSA9IFwiVU5LTk9XTlwiLCB1ZVt1ZS5JTlZBTElEX0FSR1VNRU5UID0gM10gPSBcIklOVkFMSURfQVJHVU1FTlRcIiwgXG51ZVt1ZS5ERUFETElORV9FWENFRURFRCA9IDRdID0gXCJERUFETElORV9FWENFRURFRFwiLCB1ZVt1ZS5OT1RfRk9VTkQgPSA1XSA9IFwiTk9UX0ZPVU5EXCIsIFxudWVbdWUuQUxSRUFEWV9FWElTVFMgPSA2XSA9IFwiQUxSRUFEWV9FWElTVFNcIiwgdWVbdWUuUEVSTUlTU0lPTl9ERU5JRUQgPSA3XSA9IFwiUEVSTUlTU0lPTl9ERU5JRURcIiwgXG51ZVt1ZS5VTkFVVEhFTlRJQ0FURUQgPSAxNl0gPSBcIlVOQVVUSEVOVElDQVRFRFwiLCB1ZVt1ZS5SRVNPVVJDRV9FWEhBVVNURUQgPSA4XSA9IFwiUkVTT1VSQ0VfRVhIQVVTVEVEXCIsIFxudWVbdWUuRkFJTEVEX1BSRUNPTkRJVElPTiA9IDldID0gXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsIHVlW3VlLkFCT1JURUQgPSAxMF0gPSBcIkFCT1JURURcIiwgXG51ZVt1ZS5PVVRfT0ZfUkFOR0UgPSAxMV0gPSBcIk9VVF9PRl9SQU5HRVwiLCB1ZVt1ZS5VTklNUExFTUVOVEVEID0gMTJdID0gXCJVTklNUExFTUVOVEVEXCIsIFxudWVbdWUuSU5URVJOQUwgPSAxM10gPSBcIklOVEVSTkFMXCIsIHVlW3VlLlVOQVZBSUxBQkxFID0gMTRdID0gXCJVTkFWQUlMQUJMRVwiLCB1ZVt1ZS5EQVRBX0xPU1MgPSAxNV0gPSBcIkRBVEFfTE9TU1wiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgZ2xvYmFsLCBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgVGVzdGluZ0hvb2tzU3BpLlxuICpcbiAqIFRoaXMgdmFyaWFibGUgd2lsbCBiZSBgbnVsbGAgaW4gYWxsIGNhc2VzIF9leGNlcHRfIHdoZW4gcnVubmluZyBmcm9tXG4gKiBpbnRlZ3JhdGlvbiB0ZXN0cyB0aGF0IGhhdmUgcmVnaXN0ZXJlZCBjYWxsYmFja3MgdG8gYmUgbm90aWZpZWQgb2YgZXZlbnRzXG4gKiB0aGF0IGhhcHBlbiBkdXJpbmcgdGhlIHRlc3QgZXhlY3V0aW9uLlxuICovXG5sZXQgY2UgPSBudWxsO1xuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBgdGVzdGluZ0hvb2tzU3BpYCBvYmplY3QuXG4gKiBAcGFyYW0gaW5zdGFuY2UgdGhlIGluc3RhbmNlIHRvIHNldC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHRFbmNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX25ld1RleHRFbmNvZGVyKCkge1xuICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXI7XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHREZWNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGxlID0gbmV3IEludGVnZXIoWyA0Mjk0OTY3Mjk1LCA0Mjk0OTY3Mjk1IF0sIDApO1xuXG4vLyBIYXNoIGEgc3RyaW5nIHVzaW5nIG1kNSBoYXNoaW5nIGFsZ29yaXRobS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3VGV4dEVuY29kZXIoKS5lbmNvZGUoZSksIG4gPSBuZXcgTWQ1O1xuICAgIHJldHVybiBuLnVwZGF0ZSh0KSwgbmV3IFVpbnQ4QXJyYXkobi5kaWdlc3QoKSk7XG59XG5cbi8vIEludGVycHJldCB0aGUgMTYgYnl0ZXMgYXJyYXkgYXMgdHdvIDY0LWJpdCB1bnNpZ25lZCBpbnRlZ2VycywgZW5jb2RlZCB1c2luZ1xuLy8gMuKAmXMgY29tcGxlbWVudCB1c2luZyBsaXR0bGUgZW5kaWFuLlxuZnVuY3Rpb24gX19QUklWQVRFX2dldDY0Qml0VWludHMoZSkge1xuICAgIGNvbnN0IHQgPSBuZXcgRGF0YVZpZXcoZS5idWZmZXIpLCBuID0gdC5nZXRVaW50MzIoMCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHIgPSB0LmdldFVpbnQzMig0LCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgaSA9IHQuZ2V0VWludDMyKDgsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCBzID0gdC5nZXRVaW50MzIoMTIsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApO1xuICAgIHJldHVybiBbIG5ldyBJbnRlZ2VyKFsgbiwgciBdLCAwKSwgbmV3IEludGVnZXIoWyBpLCBzIF0sIDApIF07XG59XG5cbmNsYXNzIEJsb29tRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIGlmICh0aGlzLmJpdG1hcCA9IGUsIHRoaXMucGFkZGluZyA9IHQsIHRoaXMuaGFzaENvdW50ID0gbiwgdCA8IDAgfHwgdCA+PSA4KSB0aHJvdyBuZXcgX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IoYEludmFsaWQgcGFkZGluZzogJHt0fWApO1xuICAgICAgICBpZiAobiA8IDApIHRocm93IG5ldyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvcihgSW52YWxpZCBoYXNoIGNvdW50OiAke259YCk7XG4gICAgICAgIGlmIChlLmxlbmd0aCA+IDAgJiYgMCA9PT0gdGhpcy5oYXNoQ291bnQpIFxuICAgICAgICAvLyBPbmx5IGVtcHR5IGJsb29tIGZpbHRlciBjYW4gaGF2ZSAwIGhhc2ggY291bnQuXG4gICAgICAgIHRocm93IG5ldyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvcihgSW52YWxpZCBoYXNoIGNvdW50OiAke259YCk7XG4gICAgICAgIGlmICgwID09PSBlLmxlbmd0aCAmJiAwICE9PSB0KSBcbiAgICAgICAgLy8gRW1wdHkgYmxvb20gZmlsdGVyIHNob3VsZCBoYXZlIDAgcGFkZGluZy5cbiAgICAgICAgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIHBhZGRpbmcgd2hlbiBiaXRtYXAgbGVuZ3RoIGlzIDA6ICR7dH1gKTtcbiAgICAgICAgdGhpcy5BZSA9IDggKiBlLmxlbmd0aCAtIHQsIFxuICAgICAgICAvLyBTZXQgdGhlIGJpdCBjb3VudCBpbiBJbnRlZ2VyIHRvIGF2b2lkIHJlcGV0aXRpb24gaW4gbWlnaHRDb250YWluKCkuXG4gICAgICAgIHRoaXMuUmUgPSBJbnRlZ2VyLmZyb21OdW1iZXIodGhpcy5BZSk7XG4gICAgfVxuICAgIC8vIENhbGN1bGF0ZSB0aGUgaXRoIGhhc2ggdmFsdWUgYmFzZWQgb24gdGhlIGhhc2hlZCA2NGJpdCBpbnRlZ2VycyxcbiAgICAvLyBhbmQgY2FsY3VsYXRlIGl0cyBjb3JyZXNwb25kaW5nIGJpdCBpbmRleCBpbiB0aGUgYml0bWFwIHRvIGJlIGNoZWNrZWQuXG4gICAgVmUoZSwgdCwgbikge1xuICAgICAgICAvLyBDYWxjdWxhdGUgaGFzaGVkIHZhbHVlIGgoaSkgPSBoMSArIChpICogaDIpLlxuICAgICAgICBsZXQgciA9IGUuYWRkKHQubXVsdGlwbHkoSW50ZWdlci5mcm9tTnVtYmVyKG4pKSk7XG4gICAgICAgIC8vIFdyYXAgaWYgaGFzaCB2YWx1ZSBvdmVyZmxvdyA2NGJpdC5cbiAgICAgICAgICAgICAgICByZXR1cm4gMSA9PT0gci5jb21wYXJlKGxlKSAmJiAociA9IG5ldyBJbnRlZ2VyKFsgci5nZXRCaXRzKDApLCByLmdldEJpdHMoMSkgXSwgMCkpLCBcbiAgICAgICAgci5tb2R1bG8odGhpcy5SZSkudG9OdW1iZXIoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHdoZXRoZXIgdGhlIGJpdCBvbiB0aGUgZ2l2ZW4gaW5kZXggaW4gdGhlIGJpdG1hcCBpcyBzZXQgdG8gMS5cbiAgICBtZShlKSB7XG4gICAgICAgIHJldHVybiAwICE9ICh0aGlzLmJpdG1hcFtNYXRoLmZsb29yKGUgLyA4KV0gJiAxIDw8IGUgJSA4KTtcbiAgICB9XG4gICAgbWlnaHRDb250YWluKGUpIHtcbiAgICAgICAgLy8gRW1wdHkgYml0bWFwIHNob3VsZCBhbHdheXMgcmV0dXJuIGZhbHNlIG9uIG1lbWJlcnNoaXAgY2hlY2suXG4gICAgICAgIGlmICgwID09PSB0aGlzLkFlKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZ2V0TWQ1SGFzaFZhbHVlKGUpLCBbbiwgcl0gPSBfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyh0KTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmhhc2hDb3VudDsgZSsrKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5WZShuLCByLCBlKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5tZSh0KSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIENyZWF0ZSBibG9vbSBmaWx0ZXIgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS4gKi8gICAgc3RhdGljIGNyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBlICUgOCA9PSAwID8gMCA6IDggLSBlICUgOCwgaSA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbChlIC8gOCkpLCBzID0gbmV3IEJsb29tRmlsdGVyKGksIHIsIHQpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHMuaW5zZXJ0KGUpKSksIHM7XG4gICAgfVxuICAgIGluc2VydChlKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkFlKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZ2V0TWQ1SGFzaFZhbHVlKGUpLCBbbiwgcl0gPSBfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyh0KTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmhhc2hDb3VudDsgZSsrKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5WZShuLCByLCBlKTtcbiAgICAgICAgICAgIHRoaXMuZmUodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmUoZSkge1xuICAgICAgICBjb25zdCB0ID0gTWF0aC5mbG9vcihlIC8gOCksIG4gPSBlICUgODtcbiAgICAgICAgdGhpcy5iaXRtYXBbdF0gfD0gMSA8PCBuO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMubmFtZSA9IFwiQmxvb21GaWx0ZXJFcnJvclwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXZlbnQgZnJvbSB0aGUgUmVtb3RlU3RvcmUuIEl0IGlzIHNwbGl0IGludG8gdGFyZ2V0Q2hhbmdlcyAoY2hhbmdlcyB0byB0aGVcbiAqIHN0YXRlIG9yIHRoZSBzZXQgb2YgZG9jdW1lbnRzIGluIG91ciB3YXRjaGVkIHRhcmdldHMpIGFuZCBkb2N1bWVudFVwZGF0ZXNcbiAqIChjaGFuZ2VzIHRvIHRoZSBhY3R1YWwgZG9jdW1lbnRzKS5cbiAqLyBjbGFzcyBSZW1vdGVFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHNuYXBzaG90IHZlcnNpb24gdGhpcyBldmVudCBicmluZ3MgdXMgdXAgdG8sIG9yIE1JTiBpZiBub3Qgc2V0LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIGZyb20gdGFyZ2V0IHRvIGNoYW5nZXMgdG8gdGhlIHRhcmdldC4gU2VlIFRhcmdldENoYW5nZS5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiB0YXJnZXRzIHRoYXQgaXMga25vd24gdG8gYmUgaW5jb25zaXN0ZW50LCBhbmQgdGhlIHB1cnBvc2UgZm9yXG4gICAgICogcmUtbGlzdGVuaW5nLiBMaXN0ZW5zIGZvciB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0XG4gICAgICogcmVzdW1lIHRva2Vucy5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudHMgaGF2ZSBjaGFuZ2VkIG9yIGJlZW4gZGVsZXRlZCwgYWxvbmcgd2l0aCB0aGVcbiAgICAgKiBkb2MncyBuZXcgdmFsdWVzIChpZiBub3QgZGVsZXRlZCkuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnQgdXBkYXRlcyBhcmUgZHVlIG9ubHkgdG8gbGltYm8gcmVzb2x1dGlvbiB0YXJnZXRzLlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBlLCB0aGlzLnRhcmdldENoYW5nZXMgPSB0LCB0aGlzLnRhcmdldE1pc21hdGNoZXMgPSBuLCB0aGlzLmRvY3VtZW50VXBkYXRlcyA9IHIsIFxuICAgICAgICB0aGlzLnJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIQUNLOiBWaWV3cyByZXF1aXJlIFJlbW90ZUV2ZW50cyBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgdmlldyBpc1xuICAgICAqIENVUlJFTlQsIGJ1dCBzZWNvbmRhcnkgdGFicyBkb24ndCByZWNlaXZlIHJlbW90ZSBldmVudHMuIFNvIHRoaXMgbWV0aG9kIGlzXG4gICAgICogdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBSZW1vdGVFdmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IGFcbiAgICAgKiBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3LCBmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudCB0YWIuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gci5zZXQoZSwgVGFyZ2V0Q2hhbmdlLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShlLCB0LCBuKSksIFxuICAgICAgICBuZXcgUmVtb3RlRXZlbnQoU25hcHNob3RWZXJzaW9uLm1pbigpLCByLCBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKSwgX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgVGFyZ2V0Q2hhbmdlIHNwZWNpZmllcyB0aGUgc2V0IG9mIGNoYW5nZXMgZm9yIGEgc3BlY2lmaWMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAqIGEgUmVtb3RlRXZlbnQuIFRoZXNlIGNoYW5nZXMgdHJhY2sgd2hpY2ggZG9jdW1lbnRzIGFyZSBhZGRlZCwgbW9kaWZpZWQgb3JcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXG4gKiBtYXJrZWQgQ1VSUkVOVC5cbiAqIFRoZSBhY3R1YWwgY2hhbmdlcyAqdG8qIGRvY3VtZW50cyBhcmUgbm90IHBhcnQgb2YgdGhlIFRhcmdldENoYW5nZSBzaW5jZVxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXG4gKi8gY2xhc3MgVGFyZ2V0Q2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlIHJlc3VtZWRcbiAgICAgKiBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXQgbWF0Y2hlcyB0aGVcbiAgICAgKiBxdWVyeS4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW4gdGltZSBmcm9tIHdoaWNoXG4gICAgICogdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgXCJjdXJyZW50XCIgKHN5bmNlZCkgc3RhdHVzIG9mIHRoaXMgdGFyZ2V0LiBOb3RlIHRoYXQgXCJjdXJyZW50XCJcbiAgICAgKiBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2wgdGhhdCBpbXBsaWVzIHRoYXQgYSB0YXJnZXQgaXNcbiAgICAgKiBib3RoIHVwLXRvLWRhdGUgYW5kIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2ggc3RyZWFtLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBuZXdseSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mXG4gICAgICogdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIGFscmVhZHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYnV0IHJlY2VpdmVkXG4gICAgICogYW4gdXBkYXRlIGR1cmluZyB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICByLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgcmVtb3ZlZCBmcm9tIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2YgdGhpc1xuICAgICAqIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSBlLCB0aGlzLmN1cnJlbnQgPSB0LCB0aGlzLmFkZGVkRG9jdW1lbnRzID0gbiwgdGhpcy5tb2RpZmllZERvY3VtZW50cyA9IHIsIFxuICAgICAgICB0aGlzLnJlbW92ZWREb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFRhcmdldENoYW5nZXMgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIGFwcGx5IGEgQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldyAoZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnRcbiAgICAgKiB0YWIpIG9yIGZvciBuZXcgcXVlcmllcyAodG8gcmFpc2Ugc25hcHNob3RzIHdpdGggY29ycmVjdCBDVVJSRU5UIHN0YXR1cykuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldENoYW5nZShuLCB0LCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGFuZ2VkIGRvY3VtZW50IGFuZCBhIGxpc3Qgb2YgdGFyZ2V0IGlkcyB0byB3aGljaCB0aGlzIGNoYW5nZVxuICogYXBwbGllcy5cbiAqXG4gKiBJZiBkb2N1bWVudCBoYXMgYmVlbiBkZWxldGVkIE5vRG9jdW1lbnQgd2lsbCBiZSBwcm92aWRlZC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgYXBwbGllcyB0byBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBpcyByZW1vdmVkIGZyb20gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IGZvciB0aGlzIGNoYW5nZS4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGRvY3VtZW50IG9yIE5vRG9jdW1lbnQgaWYgaXQgd2FzIGRlbGV0ZWQuIElzIG51bGwgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgd2VudCBvdXQgb2YgdmlldyB3aXRob3V0IHRoZSBzZXJ2ZXIgc2VuZGluZyBhIG5ldyBkb2N1bWVudC5cbiAgICAgKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMuZ2UgPSBlLCB0aGlzLnJlbW92ZWRUYXJnZXRJZHMgPSB0LCB0aGlzLmtleSA9IG4sIHRoaXMucGUgPSByO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0V4aXN0ZW5jZUZpbHRlckNoYW5nZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gZSwgdGhpcy55ZSA9IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBXaGF0IGtpbmQgb2YgY2hhbmdlIG9jY3VycmVkIHRvIHRoZSB3YXRjaCB0YXJnZXQuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSB0YXJnZXQgSURzIHRoYXQgd2VyZSBhZGRlZC9yZW1vdmVkL3NldC4gKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIG4gPSBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HXG4gICAgLyoqIEFuIFJQQyBlcnJvciBpbmRpY2F0aW5nIHdoeSB0aGUgd2F0Y2ggZmFpbGVkLiAqLyAsIHIgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBlLCB0aGlzLnRhcmdldElkcyA9IHQsIHRoaXMucmVzdW1lVG9rZW4gPSBuLCB0aGlzLmNhdXNlID0gcjtcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgdGhlIGludGVybmFsIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0LiAqLyBjbGFzcyBfX1BSSVZBVEVfVGFyZ2V0U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyAoYWRkcyBvciByZW1vdmVzKSB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLlxuICAgICAgICAgKiBXZSBvbmx5IGNvbnNpZGVyIHRhcmdldHMgYWN0aXZlIHRoYXQgaGF2ZSBubyBwZW5kaW5nIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2UgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgY2hhbmdlcyBhcmUgY29udGludW91c2x5IHVwZGF0ZWQgYXMgd2UgcmVjZWl2ZSBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAgICAgKiBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcyBhZ2FpbnN0IHRoZSBsYXN0IGlzc3VlZCBzbmFwc2hvdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuU2UgPSBfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwKCksIFxuICAgICAgICAvKiogU2VlIHB1YmxpYyBnZXR0ZXJzIGZvciBleHBsYW5hdGlvbnMgb2YgdGhlc2UgZmllbGRzLiAqL1xuICAgICAgICB0aGlzLmJlID0gQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORywgdGhpcy5EZSA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgc3RhdGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBuZXh0IHNuYXBzaG90LiBXZVxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxuICAgICAgICAgKiBSZW1vdGVFdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQ2UgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgYmVlbiBtYXJrZWQgJ2N1cnJlbnQnLlxuICAgICAqXG4gICAgICogJ0N1cnJlbnQnIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbDogSXQgaW1wbGllcyB0aGF0IHRoZVxuICAgICAqIFdhdGNoIGJhY2tlbmQgaGFzIHNlbnQgdXMgYWxsIGNoYW5nZXMgdXAgdG8gdGhlIHBvaW50IGF0IHdoaWNoIHRoZSB0YXJnZXRcbiAgICAgKiB3YXMgYWRkZWQgYW5kIHRoYXQgdGhlIHRhcmdldCBpcyBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoXG4gICAgICogc3RyZWFtLlxuICAgICAqLyAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRGU7XG4gICAgfVxuICAgIC8qKiBUaGUgbGFzdCByZXN1bWUgdG9rZW4gc2VudCB0byB1cyBmb3IgdGhpcyB0YXJnZXQuICovICAgIGdldCByZXN1bWVUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmU7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBwZW5kaW5nIHRhcmdldCBhZGRzIG9yIHRhcmdldCByZW1vdmVzLiAqLyAgICBnZXQgdmUoKSB7XG4gICAgICAgIHJldHVybiAwICE9PSB0aGlzLndlO1xuICAgIH1cbiAgICAvKiogV2hldGhlciB3ZSBoYXZlIG1vZGlmaWVkIGFueSBzdGF0ZSB0aGF0IHNob3VsZCB0cmlnZ2VyIGEgc25hcHNob3QuICovICAgIGdldCBGZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIHJlc3VtZSB0b2tlbiB0byB0aGUgVGFyZ2V0Q2hhbmdlLCBidXQgb25seSB3aGVuIGl0IGhhcyBhIG5ld1xuICAgICAqIHZhbHVlLiBFbXB0eSByZXN1bWVUb2tlbnMgYXJlIGRpc2NhcmRlZC5cbiAgICAgKi8gICAgTWUoZSkge1xuICAgICAgICBlLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKHRoaXMuQ2UgPSAhMCwgdGhpcy5iZSA9IGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGFyZ2V0IGNoYW5nZSBmcm9tIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogVG8gcmVzZXQgdGhlIGRvY3VtZW50IGNoYW5nZXMgYWZ0ZXIgcmFpc2luZyB0aGlzIHNuYXBzaG90LCBjYWxsXG4gICAgICogYGNsZWFyUGVuZGluZ0NoYW5nZXMoKWAuXG4gICAgICovICAgIHhlKCkge1xuICAgICAgICBsZXQgZSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCB0ID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuU2UuZm9yRWFjaCgoKHIsIGkpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgZSA9IGUuYWRkKHIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICB0ID0gdC5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIG5ldyBUYXJnZXRDaGFuZ2UodGhpcy5iZSwgdGhpcy5EZSwgZSwgdCwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhbmQgc2V0cyBgaGFzUGVuZGluZ0NoYW5nZXNgIHRvIGZhbHNlLlxuICAgICAqLyAgICBPZSgpIHtcbiAgICAgICAgdGhpcy5DZSA9ICExLCB0aGlzLlNlID0gX19QUklWQVRFX3NuYXBzaG90Q2hhbmdlc01hcCgpO1xuICAgIH1cbiAgICBOZShlLCB0KSB7XG4gICAgICAgIHRoaXMuQ2UgPSAhMCwgdGhpcy5TZSA9IHRoaXMuU2UuaW5zZXJ0KGUsIHQpO1xuICAgIH1cbiAgICBCZShlKSB7XG4gICAgICAgIHRoaXMuQ2UgPSAhMCwgdGhpcy5TZSA9IHRoaXMuU2UucmVtb3ZlKGUpO1xuICAgIH1cbiAgICBMZSgpIHtcbiAgICAgICAgdGhpcy53ZSArPSAxO1xuICAgIH1cbiAgICBrZSgpIHtcbiAgICAgICAgdGhpcy53ZSAtPSAxO1xuICAgIH1cbiAgICBxZSgpIHtcbiAgICAgICAgdGhpcy5DZSA9ICEwLCB0aGlzLkRlID0gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIHRvIGFjY3VtdWxhdGUgd2F0Y2ggY2hhbmdlcyBpbnRvIGEgUmVtb3RlRXZlbnQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9XYXRjaENoYW5nZUFnZ3JlZ2F0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5RZSA9IGUsIFxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIG9mIGFsbCB0cmFja2VkIHRhcmdldHMuICovXG4gICAgICAgIHRoaXMuS2UgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudHMgdG8gdXBkYXRlIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC4gKi9cbiAgICAgICAgdGhpcy4kZSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgXG4gICAgICAgIC8qKiBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5cyB0byB0aGVpciBzZXQgb2YgdGFyZ2V0IElEcy4gKi9cbiAgICAgICAgdGhpcy5VZSA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCgpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwIG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuV2UgPSBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBEb2N1bWVudFdhdGNoQ2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqLyAgICBHZShlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmdlKSBlLnBlICYmIGUucGUuaXNGb3VuZERvY3VtZW50KCkgPyB0aGlzLnplKHQsIGUucGUpIDogdGhpcy5qZSh0LCBlLmtleSwgZS5wZSk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLnJlbW92ZWRUYXJnZXRJZHMpIHRoaXMuamUodCwgZS5rZXksIGUucGUpO1xuICAgIH1cbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi8gICAgSGUoZSkge1xuICAgICAgICB0aGlzLmZvckVhY2hUYXJnZXQoZSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuSmUodCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuc3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2UgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMuWWUodCkgJiYgbi5NZShlLnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLmtlKCksIG4udmUgfHwgXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGZyZXNobHkgYWRkZWQgdGFyZ2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzdGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcbiAgICAgICAgICAgICAgICAvLyBiYWNrIGEgdGFyZ2V0IGZvciBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICAgICAgbi5PZSgpLCBuLk1lKGUucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLmtlKCksIG4udmUgfHwgdGhpcy5yZW1vdmVUYXJnZXQodCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAzIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5ZZSh0KSAmJiAobi5xZSgpLCBuLk1lKGUucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5ZZSh0KSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRhcmdldCBhbmQgc3ludGhlc2l6ZXMgcmVtb3ZlcyBmb3IgYWxsIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzLiBUaGUgYmFja2VuZCB3aWxsIHJlLWFkZCBhbnkgZG9jdW1lbnRzIHRoYXQgc3RpbGxcbiAgICAgICAgICAgICAgICAvLyBtYXRjaCB0aGUgdGFyZ2V0IGJlZm9yZSBpdCBzZW5kcyB0aGUgbmV4dCBnbG9iYWwgc25hcHNob3QuXG4gICAgICAgICAgICAgICAgdGhpcy5aZSh0KSwgbi5NZShlLnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmYWlsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XG4gICAgICogYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICBlLnRhcmdldElkcy5sZW5ndGggPiAwID8gZS50YXJnZXRJZHMuZm9yRWFjaCh0KSA6IHRoaXMuS2UuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMuWWUobikgJiYgdChuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cbiAgICAgKi8gICAgWGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRJZCwgbiA9IGUueWUuY291bnQsIHIgPSB0aGlzLmV0KHQpO1xuICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgY29uc3QgaSA9IHIudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KGkpKSBpZiAoMCA9PT0gbikge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBEb2N1bWVudEtleShpLnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuamUodCwgZSwgTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQoZSwgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgICAgICB9IGVsc2UgX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gbik7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLnR0KHQpO1xuICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guIE1hcmsgdGhlIGRvY3VtZW50cyBhcyBiZWluZyBpbiBsaW1ibywgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmFpc2UgYSBzbmFwc2hvdCB3aXRoIGBpc0Zyb21DYWNoZTp0cnVlYC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgIT09IG4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgYmxvb20gZmlsdGVyIHRvIGlkZW50aWZ5IGFuZCBtYXJrIHJlbW92ZWQgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5udChlKSwgaSA9IG4gPyB0aGlzLnJ0KG4sIGUsIHIpIDogMSAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlNraXBwZWQgKi87XG4gICAgICAgICAgICAgICAgICAgIGlmICgwIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU3VjY2VzcyAqLyAhPT0gaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYmxvb20gZmlsdGVyIGFwcGxpY2F0aW9uIGZhaWxzLCB3ZSByZXNldCB0aGUgbWFwcGluZyBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXIgcmUtcnVuIG9mIHRoZSBxdWVyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuWmUodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gMiAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLkZhbHNlUG9zaXRpdmUgKi8gPT09IGkgPyBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tXCIgLyogVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tICovIDogXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5XZSA9IHRoaXMuV2UuaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG51bGwgPT0gY2UgfHwgY2UuaXQoZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoSW5mb0ZvclRlc3RpbmdIb29rcyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcywgbywgXywgYSwgdSwgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGwgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxDYWNoZUNvdW50OiBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0ZW5jZUZpbHRlckNvdW50OiB0LmNvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlSWQ6IG4uZGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdElkOiBuLnByb2plY3RJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgaCA9IHQudW5jaGFuZ2VkTmFtZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBoICYmIChsLmJsb29tRmlsdGVyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWQ6IDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovID09PSBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hDb3VudDogbnVsbCAhPT0gKHMgPSBudWxsID09IGggPyB2b2lkIDAgOiBoLmhhc2hDb3VudCkgJiYgdm9pZCAwICE9PSBzID8gcyA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0bWFwTGVuZ3RoOiBudWxsICE9PSAoYSA9IG51bGwgPT09IChfID0gbnVsbCA9PT0gKG8gPSBudWxsID09IGggPyB2b2lkIDAgOiBoLmJpdHMpIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8uYml0bWFwKSB8fCB2b2lkIDAgPT09IF8gPyB2b2lkIDAgOiBfLmxlbmd0aCkgJiYgdm9pZCAwICE9PSBhID8gYSA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogbnVsbCAhPT0gKGMgPSBudWxsID09PSAodSA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguYml0cykgfHwgdm9pZCAwID09PSB1ID8gdm9pZCAwIDogdS5wYWRkaW5nKSAmJiB2b2lkIDAgIT09IGMgPyBjIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWdodENvbnRhaW46IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09ICh0ID0gbnVsbCA9PSByID8gdm9pZCAwIDogci5taWdodENvbnRhaW4oZSkpICYmIHZvaWQgMCAhPT0gdCAmJiB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHIsIGUueWUsIHRoaXMuUWUuc3QoKSwgbiwgaSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgYmxvb20gZmlsdGVyIGZyb20gdGhlIFwidW5jaGFuZ2VkX25hbWVzXCIgZmllbGQgb2YgYW4gZXhpc3RlbmNlXG4gICAgICogZmlsdGVyLlxuICAgICAqLyAgICBudChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLnllLnVuY2hhbmdlZE5hbWVzO1xuICAgICAgICBpZiAoIXQgfHwgIXQuYml0cykgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHtiaXRzOiB7Yml0bWFwOiBuID0gXCJcIiwgcGFkZGluZzogciA9IDB9LCBoYXNoQ291bnQ6IGkgPSAwfSA9IHQ7XG4gICAgICAgIGxldCBzLCBvO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcyA9IF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKG4pLnRvVWludDhBcnJheSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9CYXNlNjREZWNvZGVFcnJvcikgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKFwiRGVjb2RpbmcgdGhlIGJhc2U2NCBibG9vbSBmaWx0ZXIgaW4gZXhpc3RlbmNlIGZpbHRlciBmYWlsZWQgKFwiICsgZS5tZXNzYWdlICsgXCIpOyBpZ25vcmluZyB0aGUgYmxvb20gZmlsdGVyIGFuZCBmYWxsaW5nIGJhY2sgdG8gZnVsbCByZS1xdWVyeS5cIiksIFxuICAgICAgICAgICAgbnVsbDtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEJsb29tRmlsdGVyIHRocm93cyBlcnJvciBpZiB0aGUgaW5wdXRzIGFyZSBpbnZhbGlkLlxuICAgICAgICAgICAgbyA9IG5ldyBCbG9vbUZpbHRlcihzLCByLCBpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciA/IFwiQmxvb21GaWx0ZXIgZXJyb3I6IFwiIDogXCJBcHBseWluZyBibG9vbSBmaWx0ZXIgZmFpbGVkOiBcIiwgZSksIFxuICAgICAgICAgICAgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMCA9PT0gby5BZSA/IG51bGwgOiBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSBibG9vbSBmaWx0ZXIgdG8gcmVtb3ZlIHRoZSBkZWxldGVkIGRvY3VtZW50cywgYW5kIHJldHVybiB0aGVcbiAgICAgKiBhcHBsaWNhdGlvbiBzdGF0dXMuXG4gICAgICovICAgIHJ0KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHQueWUuY291bnQgPT09IG4gLSB0aGlzLm90KGUsIHQudGFyZ2V0SWQpID8gMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi8gOiAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlsdGVyIG91dCByZW1vdmVkIGRvY3VtZW50cyBiYXNlZCBvbiBibG9vbSBmaWx0ZXIgbWVtYmVyc2hpcCByZXN1bHQgYW5kXG4gICAgICogcmV0dXJuIG51bWJlciBvZiBkb2N1bWVudHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgb3QoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5RZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuUWUuc3QoKSwgcyA9IGBwcm9qZWN0cy8ke2kucHJvamVjdElkfS9kYXRhYmFzZXMvJHtpLmRhdGFiYXNlfS9kb2N1bWVudHMvJHtuLnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YDtcbiAgICAgICAgICAgIGUubWlnaHRDb250YWluKHMpIHx8ICh0aGlzLmplKHQsIG4sIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpLCByKyspO1xuICAgICAgICB9KSksIHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjdXJyZW50bHkgYWNjdW11bGF0ZWQgc3RhdGUgaW50byBhIHJlbW90ZSBldmVudCBhdCB0aGVcbiAgICAgKiBwcm92aWRlZCBzbmFwc2hvdCB2ZXJzaW9uLiBSZXNldHMgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYmVmb3JlIHJldHVybmluZy5cbiAgICAgKi8gICAgX3QoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5LZS5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuZXQocik7XG4gICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgIGlmIChuLmN1cnJlbnQgJiYgX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQoaS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvY3VtZW50IHF1ZXJpZXMgZm9yIGRvY3VtZW50IHRoYXQgZG9uJ3QgZXhpc3QgY2FuIHByb2R1Y2UgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IHNldC4gVG8gdXBkYXRlIG91ciBsb2NhbCBjYWNoZSwgd2Ugc3ludGhlc2l6ZSBhIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBpZiB3ZSBoYXZlIG5vdCBwcmV2aW91c2x5IHJlY2VpdmVkIHRoZSBkb2N1bWVudC4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgbGltYm8gc3RhdGUgb2YgdGhlIGRvY3VtZW50LCByZW1vdmluZyBpdCBmcm9tXG4gICAgICAgICAgICAgICAgICAgIC8vIGxpbWJvRG9jdW1lbnRSZWZzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElkZWFsbHkgd2Ugd291bGQgaGF2ZSBhbiBleHBsaWNpdCBsb29rdXAgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQgcmVzdWx0aW5nIGluIGFuIGV4cGxpY2l0IGRlbGV0ZSBtZXNzYWdlIGFuZCB3ZSBjb3VsZFxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhpcyBzcGVjaWFsIGxvZ2ljLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IERvY3VtZW50S2V5KGkudGFyZ2V0LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLiRlLmdldCh0KSB8fCB0aGlzLnV0KHIsIHQpIHx8IHRoaXMuamUociwgdCwgTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQodCwgZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuLkZlICYmICh0LnNldChyLCBuLnhlKCkpLCBuLk9lKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIC8vIFdlIGV4dHJhY3QgdGhlIHNldCBvZiBsaW1iby1vbmx5IGRvY3VtZW50IHVwZGF0ZXMgYXMgdGhlIEdDIGxvZ2ljXG4gICAgICAgIC8vIHNwZWNpYWwtY2FzZXMgZG9jdW1lbnRzIHRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgdGFyZ2V0IGNhY2hlLlxuICAgICAgICBcbiAgICAgICAgLy8gVE9ETyhnc29sdGlzKTogRXhwYW5kIG9uIHRoaXMgY29tbWVudCBvbmNlIEdDIGlzIGF2YWlsYWJsZSBpbiB0aGUgSlNcbiAgICAgICAgLy8gY2xpZW50LlxuICAgICAgICAgICAgICAgIHRoaXMuVWUuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGxldCByID0gITA7XG4gICAgICAgICAgICB0LmZvckVhY2hXaGlsZSgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZXQoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF0IHx8IFwiVGFyZ2V0UHVycG9zZUxpbWJvUmVzb2x1dGlvblwiIC8qIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uICovID09PSB0LnB1cnBvc2UgfHwgKHIgPSAhMSwgXG4gICAgICAgICAgICAgICAgITEpO1xuICAgICAgICAgICAgfSkpLCByICYmIChuID0gbi5hZGQoZSkpO1xuICAgICAgICB9KSksIHRoaXMuJGUuZm9yRWFjaCgoKHQsIG4pID0+IG4uc2V0UmVhZFRpbWUoZSkpKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBSZW1vdGVFdmVudChlLCB0LCB0aGlzLldlLCB0aGlzLiRlLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGUgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIHRoaXMuVWUgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRNYXAoKSwgXG4gICAgICAgIHRoaXMuV2UgPSBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKSwgcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgdG8gdGhlIGludGVybmFsIGxpc3Qgb2YgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgKiBpdHMgZG9jdW1lbnQga2V5IHRvIHRoZSBnaXZlbiB0YXJnZXQncyBtYXBwaW5nLlxuICAgICAqL1xuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAgemUoZSwgdCkge1xuICAgICAgICBpZiAoIXRoaXMuWWUoZSkpIHJldHVybjtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMudXQoZSwgdC5rZXkpID8gMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovO1xuICAgICAgICB0aGlzLkplKGUpLk5lKHQua2V5LCBuKSwgdGhpcy4kZSA9IHRoaXMuJGUuaW5zZXJ0KHQua2V5LCB0KSwgdGhpcy5VZSA9IHRoaXMuVWUuaW5zZXJ0KHQua2V5LCB0aGlzLmN0KHQua2V5KS5hZGQoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBwcm92aWRlZCBkb2N1bWVudCBmcm9tIHRoZSB0YXJnZXQgbWFwcGluZy4gSWYgdGhlXG4gICAgICogZG9jdW1lbnQgbm8gbG9uZ2VyIG1hdGNoZXMgdGhlIHRhcmdldCwgYnV0IHRoZSBkb2N1bWVudCdzIHN0YXRlIGlzIHN0aWxsXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXG4gICAgICogdGhhdCBjYXVzZWQgdGhlIGZpbHRlciBtaXNtYXRjaCksIHRoZSBuZXcgZG9jdW1lbnQgY2FuIGJlIHByb3ZpZGVkXG4gICAgICogdG8gdXBkYXRlIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBqZShlLCB0LCBuKSB7XG4gICAgICAgIGlmICghdGhpcy5ZZShlKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCByID0gdGhpcy5KZShlKTtcbiAgICAgICAgdGhpcy51dChlLCB0KSA/IHIuTmUodCwgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8pIDogXG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCBtYXkgaGF2ZSBlbnRlcmVkIGFuZCBsZWZ0IHRoZSB0YXJnZXQgYmVmb3JlIHdlIHJhaXNlZCBhXG4gICAgICAgIC8vIHNuYXBzaG90LCBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGNoYW5nZS5cbiAgICAgICAgci5CZSh0KSwgdGhpcy5VZSA9IHRoaXMuVWUuaW5zZXJ0KHQsIHRoaXMuY3QodCkuZGVsZXRlKGUpKSwgbiAmJiAodGhpcy4kZSA9IHRoaXMuJGUuaW5zZXJ0KHQsIG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KGUpIHtcbiAgICAgICAgdGhpcy5LZS5kZWxldGUoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgY291bnQgb2YgZG9jdW1lbnRzIGluIHRoZSB0YXJnZXQuIFRoaXMgaW5jbHVkZXMgYm90aFxuICAgICAqIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogdGFyZ2V0IGFzIHdlbGwgYXMgYW55IGFjY3VtdWxhdGVkIGNoYW5nZXMuXG4gICAgICovICAgIHR0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuSmUoZSkueGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUWUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKS5zaXplICsgdC5hZGRlZERvY3VtZW50cy5zaXplIC0gdC5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBMZShlKSB7XG4gICAgICAgIHRoaXMuSmUoZSkuTGUoKTtcbiAgICB9XG4gICAgSmUoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuS2UuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdCB8fCAodCA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0U3RhdGUsIHRoaXMuS2Uuc2V0KGUsIHQpKSwgdDtcbiAgICB9XG4gICAgY3QoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuVWUuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdCB8fCAodCA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCB0aGlzLlVlID0gdGhpcy5VZS5pbnNlcnQoZSwgdCkpLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgdXNlciBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0IChieSBjYWxsaW5nXG4gICAgICogYGdldFRhcmdldERhdGFGb3JUYXJnZXQoKWApIGFuZCB0aGF0IHdlIGFyZSBub3Qgd2FpdGluZyBmb3IgcGVuZGluZyBBRERzXG4gICAgICogZnJvbSB3YXRjaC5cbiAgICAgKi8gICAgWWUoZSkge1xuICAgICAgICBjb25zdCB0ID0gbnVsbCAhPT0gdGhpcy5ldChlKTtcbiAgICAgICAgcmV0dXJuIHQgfHwgX19QUklWQVRFX2xvZ0RlYnVnKFwiV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yXCIsIFwiRGV0ZWN0ZWQgaW5hY3RpdmUgdGFyZ2V0XCIsIGUpLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBmb3IgYW4gYWN0aXZlIHRhcmdldCAoaS5lLiBhIHRhcmdldCB0aGF0IHRoZSB1c2VyXG4gICAgICogaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGF0IGhhcyBubyBvdXRzdGFuZGluZyB0YXJnZXQgY2hhbmdlIHJlcXVlc3RzKS5cbiAgICAgKi8gICAgZXQoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5LZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0ICYmIHQudmUgPyBudWxsIDogdGhpcy5RZS5sdChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxuICAgICAqLyAgICBaZShlKSB7XG4gICAgICAgIHRoaXMuS2Uuc2V0KGUsIG5ldyBfX1BSSVZBVEVfVGFyZ2V0U3RhdGUpO1xuICAgICAgICB0aGlzLlFlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmplKGUsIHQsIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdGhlIGRvY3VtZW50IHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogc3BlY2lmaWVkIHRhcmdldC5cbiAgICAgKi8gICAgdXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5RZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUpLmhhcyh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCgpIHtcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3NuYXBzaG90Q2hhbmdlc01hcCgpIHtcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbn1cblxuY29uc3QgaGUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIGFzYzogXCJBU0NFTkRJTkdcIixcbiAgICAgICAgZGVzYzogXCJERVNDRU5ESU5HXCJcbiAgICB9O1xuICAgIHJldHVybiBlO1xufSkoKSwgUGUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIFwiPFwiOiBcIkxFU1NfVEhBTlwiLFxuICAgICAgICBcIjw9XCI6IFwiTEVTU19USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPlwiOiBcIkdSRUFURVJfVEhBTlwiLFxuICAgICAgICBcIj49XCI6IFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPT1cIjogXCJFUVVBTFwiLFxuICAgICAgICBcIiE9XCI6IFwiTk9UX0VRVUFMXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnNcIjogXCJBUlJBWV9DT05UQUlOU1wiLFxuICAgICAgICBpbjogXCJJTlwiLFxuICAgICAgICBcIm5vdC1pblwiOiBcIk5PVF9JTlwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zLWFueVwiOiBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiXG4gICAgfTtcbiAgICByZXR1cm4gZTtcbn0pKCksIEllID0gKCgpID0+IHtcbiAgICBjb25zdCBlID0ge1xuICAgICAgICBhbmQ6IFwiQU5EXCIsXG4gICAgICAgIG9yOiBcIk9SXCJcbiAgICB9O1xuICAgIHJldHVybiBlO1xufSkoKTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdlbmVyYXRlcyBKc29uT2JqZWN0IHZhbHVlcyBmb3IgdGhlIERhdGFzdG9yZSBBUEkgc3VpdGFibGUgZm9yXG4gKiBzZW5kaW5nIHRvIGVpdGhlciBHUlBDIHN0dWIgbWV0aG9kcyBvciB2aWEgdGhlIEpTT04vSFRUUCBSRVNUIEFQSS5cbiAqXG4gKiBUaGUgc2VyaWFsaXplciBzdXBwb3J0cyBib3RoIFByb3RvYnVmLmpzIGFuZCBQcm90bzMgSlNPTiBmb3JtYXRzLiBCeVxuICogc2V0dGluZyBgdXNlUHJvdG8zSnNvbmAgdG8gdHJ1ZSwgdGhlIHNlcmlhbGl6ZXIgd2lsbCB1c2UgdGhlIFByb3RvMyBKU09OXG4gKiBmb3JtYXQuXG4gKlxuICogRm9yIGEgZGVzY3JpcHRpb24gb2YgdGhlIFByb3RvMyBKU09OIGZvcm1hdCBjaGVja1xuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9kb2NzL3Byb3RvMyNqc29uXG4gKlxuICogVE9ETyhrbGltdCk6IFdlIGNhbiByZW1vdmUgdGhlIGRhdGFiYXNlSWQgYXJndW1lbnQgaWYgd2Uga2VlcCB0aGUgZnVsbFxuICogcmVzb3VyY2UgbmFtZSBpbiBkb2N1bWVudHMuXG4gKi9cbmNsYXNzIEpzb25Qcm90b1NlcmlhbGl6ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gZSwgdGhpcy51c2VQcm90bzNKc29uID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXG4gKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxuICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcbiAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxuICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQpIHtcbiAgICByZXR1cm4gZS51c2VQcm90bzNKc29uIHx8IF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0KSA/IHQgOiB7XG4gICAgICAgIHZhbHVlOiB0XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIERhdGUgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKi9cbmZ1bmN0aW9uIHRvVGltZXN0YW1wKGUsIHQpIHtcbiAgICBpZiAoZS51c2VQcm90bzNKc29uKSB7XG4gICAgICAgIHJldHVybiBgJHtuZXcgRGF0ZSgxZTMgKiB0LnNlY29uZHMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKi8sIFwiXCIpLnJlcGxhY2UoXCJaXCIsIFwiXCIpfS4keyhcIjAwMDAwMDAwMFwiICsgdC5uYW5vc2Vjb25kcykuc2xpY2UoLTkpfVpgO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBcIlwiICsgdC5zZWNvbmRzLFxuICAgICAgICBuYW5vczogdC5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZXMoZSwgdCkge1xuICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gPyB0LnRvQmFzZTY0KCkgOiB0LnRvVWludDhBcnJheSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBCeXRlU3RyaW5nIGJhc2VkIG9uIHRoZSBwcm90byBzdHJpbmcgdmFsdWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvVmVyc2lvbihlLCB0KSB7XG4gICAgcmV0dXJuIHRvVGltZXN0YW1wKGUsIHQudG9UaW1lc3RhbXAoKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tVmVyc2lvbihlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhZSksIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKGZ1bmN0aW9uIGZyb21UaW1lc3RhbXAoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodC5zZWNvbmRzLCB0Lm5hbm9zKTtcbiAgICB9KGUpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvUmVzb3VyY2VOYW1lKGUsIHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2Z1bGx5UXVhbGlmaWVkUHJlZml4UGF0aChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKFsgXCJwcm9qZWN0c1wiLCBlLnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgZS5kYXRhYmFzZSBdKTtcbiAgICB9KGUpLmNoaWxkKFwiZG9jdW1lbnRzXCIpLmNoaWxkKHQpLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVJlc291cmNlTmFtZShlKSB7XG4gICAgY29uc3QgdCA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChfX1BSSVZBVEVfaXNWYWxpZFJlc291cmNlTmFtZSh0KSksIHQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b05hbWUoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZS5kYXRhYmFzZUlkLCB0LnBhdGgpO1xufVxuXG5mdW5jdGlvbiBmcm9tTmFtZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9mcm9tUmVzb3VyY2VOYW1lKHQpO1xuICAgIGlmIChuLmdldCgxKSAhPT0gZS5kYXRhYmFzZUlkLnByb2plY3RJZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogXCIgKyBuLmdldCgxKSArIFwiIHZzIFwiICsgZS5kYXRhYmFzZUlkLnByb2plY3RJZCk7XG4gICAgaWYgKG4uZ2V0KDMpICE9PSBlLmRhdGFiYXNlSWQuZGF0YWJhc2UpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiBcIiArIG4uZ2V0KDMpICsgXCIgdnMgXCIgKyBlLmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2V4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKG4pKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvUXVlcnlQYXRoKGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3RvUmVzb3VyY2VOYW1lKGUuZGF0YWJhc2VJZCwgdCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUXVlcnlQYXRoKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21SZXNvdXJjZU5hbWUoZSk7XG4gICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xuICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXG4gICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxuICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXG4gICAgICAgIHJldHVybiA0ID09PSB0Lmxlbmd0aCA/IFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKSA6IF9fUFJJVkFURV9leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZSh0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKGUpIHtcbiAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChbIFwicHJvamVjdHNcIiwgZS5kYXRhYmFzZUlkLnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgZS5kYXRhYmFzZUlkLmRhdGFiYXNlIF0pLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChlLmxlbmd0aCA+IDQgJiYgXCJkb2N1bWVudHNcIiA9PT0gZS5nZXQoNCkpLCBlLnBvcEZpcnN0KDUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIERvY3VtZW50IHByb3RvIGZyb20ga2V5IGFuZCBmaWVsZHMgKGJ1dCBubyBjcmVhdGUvdXBkYXRlIHRpbWUpICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b011dGF0aW9uRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IF9fUFJJVkFURV90b05hbWUoZSwgdCksXG4gICAgICAgIGZpZWxkczogbi52YWx1ZS5tYXBWYWx1ZS5maWVsZHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gZnJvbU5hbWUoZSwgdC5uYW1lKSwgaSA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LnVwZGF0ZVRpbWUpLCBzID0gdC5jcmVhdGVUaW1lID8gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQuY3JlYXRlVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG8gPSBuZXcgT2JqZWN0VmFsdWUoe1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiB0LmZpZWxkc1xuICAgICAgICB9XG4gICAgfSksIF8gPSBNdXRhYmxlRG9jdW1lbnQubmV3Rm91bmREb2N1bWVudChyLCBpLCBzLCBvKTtcbiAgICByZXR1cm4gbiAmJiBfLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpLCBuID8gXy5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSA6IF87XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQmF0Y2hHZXREb2N1bWVudHNSZXNwb25zZShlLCB0KSB7XG4gICAgcmV0dXJuIFwiZm91bmRcIiBpbiB0ID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Gb3VuZChlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhdC5mb3VuZCksIHQuZm91bmQubmFtZSwgdC5mb3VuZC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBuID0gZnJvbU5hbWUoZSwgdC5mb3VuZC5uYW1lKSwgciA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LmZvdW5kLnVwZGF0ZVRpbWUpLCBpID0gdC5mb3VuZC5jcmVhdGVUaW1lID8gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQuZm91bmQuY3JlYXRlVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIHMgPSBuZXcgT2JqZWN0VmFsdWUoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHQuZm91bmQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gTXV0YWJsZURvY3VtZW50Lm5ld0ZvdW5kRG9jdW1lbnQobiwgciwgaSwgcyk7XG4gICAgfShlLCB0KSA6IFwibWlzc2luZ1wiIGluIHQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU1pc3NpbmcoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIXQubWlzc2luZyksIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhdC5yZWFkVGltZSk7XG4gICAgICAgIGNvbnN0IG4gPSBmcm9tTmFtZShlLCB0Lm1pc3NpbmcpLCByID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQucmVhZFRpbWUpO1xuICAgICAgICByZXR1cm4gTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQobiwgcik7XG4gICAgfShlLCB0KSA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21XYXRjaENoYW5nZShlLCB0KSB7XG4gICAgbGV0IG47XG4gICAgaWYgKFwidGFyZ2V0Q2hhbmdlXCIgaW4gdCkge1xuICAgICAgICB0LnRhcmdldENoYW5nZTtcbiAgICAgICAgLy8gcHJvdG8zIGRlZmF1bHQgdmFsdWUgaXMgdW5zZXQgaW4gSlNPTiAodW5kZWZpbmVkKSwgc28gdXNlICdOT19DSEFOR0UnXG4gICAgICAgIC8vIGlmIHVuc2V0XG4gICAgICAgIGNvbnN0IHIgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9fQ0hBTkdFXCIgPT09IGUgPyAwIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2UgKi8gOiBcIkFERFwiID09PSBlID8gMSAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkICovIDogXCJSRU1PVkVcIiA9PT0gZSA/IDIgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkICovIDogXCJDVVJSRU5UXCIgPT09IGUgPyAzIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudCAqLyA6IFwiUkVTRVRcIiA9PT0gZSA/IDQgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldCAqLyA6IGZhaWwoKTtcbiAgICAgICAgfSh0LnRhcmdldENoYW5nZS50YXJnZXRDaGFuZ2VUeXBlIHx8IFwiTk9fQ0hBTkdFXCIpLCBpID0gdC50YXJnZXRDaGFuZ2UudGFyZ2V0SWRzIHx8IFtdLCBzID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21CeXRlcyhlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gZS51c2VQcm90bzNKc29uID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHZvaWQgMCA9PT0gdCB8fCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSwgXG4gICAgICAgICAgICBCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcodCB8fCBcIlwiKSkgOiAoX19QUklWQVRFX2hhcmRBc3NlcnQodm9pZCAwID09PSB0IHx8IHQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSwgXG4gICAgICAgICAgICBCeXRlU3RyaW5nLmZyb21VaW50OEFycmF5KHQgfHwgbmV3IFVpbnQ4QXJyYXkpKTtcbiAgICAgICAgfShlLCB0LnRhcmdldENoYW5nZS5yZXN1bWVUb2tlbiksIG8gPSB0LnRhcmdldENoYW5nZS5jYXVzZSwgXyA9IG8gJiYgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21ScGNTdGF0dXMoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHZvaWQgMCA9PT0gZS5jb2RlID8gRC5VTktOT1dOIDogX19QUklWQVRFX21hcENvZGVGcm9tUnBjQ29kZShlLmNvZGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaXJlc3RvcmVFcnJvcih0LCBlLm1lc3NhZ2UgfHwgXCJcIik7XG4gICAgICAgIH0obyk7XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX1dhdGNoVGFyZ2V0Q2hhbmdlKHIsIGksIHMsIF8gfHwgbnVsbCk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50Q2hhbmdlXCIgaW4gdCkge1xuICAgICAgICB0LmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBjb25zdCByID0gdC5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgci5kb2N1bWVudCwgci5kb2N1bWVudC5uYW1lLCByLmRvY3VtZW50LnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50Lm5hbWUpLCBzID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHIuZG9jdW1lbnQudXBkYXRlVGltZSksIG8gPSByLmRvY3VtZW50LmNyZWF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5kb2N1bWVudC5jcmVhdGVUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogci5kb2N1bWVudC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIGEgPSBNdXRhYmxlRG9jdW1lbnQubmV3Rm91bmREb2N1bWVudChpLCBzLCBvLCBfKSwgdSA9IHIudGFyZ2V0SWRzIHx8IFtdLCBjID0gci5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IF9fUFJJVkFURV9Eb2N1bWVudFdhdGNoQ2hhbmdlKHUsIGMsIGEua2V5LCBhKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnREZWxldGVcIiBpbiB0KSB7XG4gICAgICAgIHQuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIGNvbnN0IHIgPSB0LmRvY3VtZW50RGVsZXRlO1xuICAgICAgICByLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gZnJvbU5hbWUoZSwgci5kb2N1bWVudCksIHMgPSByLnJlYWRUaW1lID8gX19QUklWQVRFX2Zyb21WZXJzaW9uKHIucmVhZFRpbWUpIDogU25hcHNob3RWZXJzaW9uLm1pbigpLCBvID0gTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQoaSwgcyksIF8gPSByLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UoW10sIF8sIG8ua2V5LCBvKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRSZW1vdmVcIiBpbiB0KSB7XG4gICAgICAgIHQuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIGNvbnN0IHIgPSB0LmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICByLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gZnJvbU5hbWUoZSwgci5kb2N1bWVudCksIHMgPSByLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UoW10sIHMsIGksIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghKFwiZmlsdGVyXCIgaW4gdCkpIHJldHVybiBmYWlsKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIHQuZmlsdGVyO1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZmlsdGVyO1xuICAgICAgICAgICAgZS50YXJnZXRJZDtcbiAgICAgICAgICAgIGNvbnN0IHtjb3VudDogciA9IDAsIHVuY2hhbmdlZE5hbWVzOiBpfSA9IGUsIHMgPSBuZXcgRXhpc3RlbmNlRmlsdGVyKHIsIGkpLCBvID0gZS50YXJnZXRJZDtcbiAgICAgICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0V4aXN0ZW5jZUZpbHRlckNoYW5nZShvLCBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gdG9NdXRhdGlvbihlLCB0KSB7XG4gICAgbGV0IG47XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2V0TXV0YXRpb24pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LmtleSwgdC52YWx1ZSlcbiAgICB9OyBlbHNlIGlmICh0IGluc3RhbmNlb2YgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uKSBuID0ge1xuICAgICAgICBkZWxldGU6IF9fUFJJVkFURV90b05hbWUoZSwgdC5rZXkpXG4gICAgfTsgZWxzZSBpZiAodCBpbnN0YW5jZW9mIF9fUFJJVkFURV9QYXRjaE11dGF0aW9uKSBuID0ge1xuICAgICAgICB1cGRhdGU6IF9fUFJJVkFURV90b011dGF0aW9uRG9jdW1lbnQoZSwgdC5rZXksIHQuZGF0YSksXG4gICAgICAgIHVwZGF0ZU1hc2s6IF9fUFJJVkFURV90b0RvY3VtZW50TWFzayh0LmZpZWxkTWFzaylcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIF9fUFJJVkFURV9WZXJpZnlNdXRhdGlvbikpIHJldHVybiBmYWlsKCk7XG4gICAgICAgIG4gPSB7XG4gICAgICAgICAgICB2ZXJpZnk6IF9fUFJJVkFURV90b05hbWUoZSwgdC5rZXkpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0LmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggPiAwICYmIChuLnVwZGF0ZVRyYW5zZm9ybXMgPSB0LmZpZWxkVHJhbnNmb3Jtcy5tYXAoKGUgPT4gZnVuY3Rpb24gX19QUklWQVRFX3RvRmllbGRUcmFuc2Zvcm0oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC50cmFuc2Zvcm07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6IFwiUkVRVUVTVF9USU1FXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbikgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGFwcGVuZE1pc3NpbmdFbGVtZW50czoge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbikgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHJlbW92ZUFsbEZyb21BcnJheToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgaW5jcmVtZW50OiBuLlRlXG4gICAgICAgIH07XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9KDAsIGUpKSkpLCB0LnByZWNvbmRpdGlvbi5pc05vbmUgfHwgKG4uY3VycmVudERvY3VtZW50ID0gZnVuY3Rpb24gX19QUklWQVRFX3RvUHJlY29uZGl0aW9uKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8ge1xuICAgICAgICAgICAgdXBkYXRlVGltZTogX19QUklWQVRFX3RvVmVyc2lvbihlLCB0LnVwZGF0ZVRpbWUpXG4gICAgICAgIH0gOiB2b2lkIDAgIT09IHQuZXhpc3RzID8ge1xuICAgICAgICAgICAgZXhpc3RzOiB0LmV4aXN0c1xuICAgICAgICB9IDogZmFpbCgpO1xuICAgIH0oZSwgdC5wcmVjb25kaXRpb24pKSwgbjtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21NdXRhdGlvbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQuY3VycmVudERvY3VtZW50ID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21QcmVjb25kaXRpb24oZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyBQcmVjb25kaXRpb24udXBkYXRlVGltZShfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS51cGRhdGVUaW1lKSkgOiB2b2lkIDAgIT09IGUuZXhpc3RzID8gUHJlY29uZGl0aW9uLmV4aXN0cyhlLmV4aXN0cykgOiBQcmVjb25kaXRpb24ubm9uZSgpO1xuICAgIH0odC5jdXJyZW50RG9jdW1lbnQpIDogUHJlY29uZGl0aW9uLm5vbmUoKSwgciA9IHQudXBkYXRlVHJhbnNmb3JtcyA/IHQudXBkYXRlVHJhbnNmb3Jtcy5tYXAoKHQgPT4gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21GaWVsZFRyYW5zZm9ybShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgaWYgKFwic2V0VG9TZXJ2ZXJWYWx1ZVwiIGluIHQpIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwiUkVRVUVTVF9USU1FXCIgPT09IHQuc2V0VG9TZXJ2ZXJWYWx1ZSksIFxuICAgICAgICBuID0gbmV3IF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm07IGVsc2UgaWYgKFwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuYXBwZW5kTWlzc2luZ0VsZW1lbnRzLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24oZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJyZW1vdmVBbGxGcm9tQXJyYXlcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5yZW1vdmVBbGxGcm9tQXJyYXkudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24oZSk7XG4gICAgICAgIH0gZWxzZSBcImluY3JlbWVudFwiIGluIHQgPyBuID0gbmV3IF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQuaW5jcmVtZW50KSA6IGZhaWwoKTtcbiAgICAgICAgY29uc3QgciA9IEZpZWxkUGF0aCQxLmZyb21TZXJ2ZXJGb3JtYXQodC5maWVsZFBhdGgpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKHIsIG4pO1xuICAgIH0oZSwgdCkpKSA6IFtdO1xuICAgIGlmICh0LnVwZGF0ZSkge1xuICAgICAgICB0LnVwZGF0ZS5uYW1lO1xuICAgICAgICBjb25zdCBpID0gZnJvbU5hbWUoZSwgdC51cGRhdGUubmFtZSksIHMgPSBuZXcgT2JqZWN0VmFsdWUoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHQudXBkYXRlLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHQudXBkYXRlTWFzaykge1xuICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRG9jdW1lbnRNYXNrKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5maWVsZFBhdGhzIHx8IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGRNYXNrKHQubWFwKChlID0+IEZpZWxkUGF0aCQxLmZyb21TZXJ2ZXJGb3JtYXQoZSkpKSk7XG4gICAgICAgICAgICB9KHQudXBkYXRlTWFzayk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXRjaE11dGF0aW9uKGksIHMsIGUsIG4sIHIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NldE11dGF0aW9uKGksIHMsIG4sIHIpO1xuICAgIH1cbiAgICBpZiAodC5kZWxldGUpIHtcbiAgICAgICAgY29uc3QgciA9IGZyb21OYW1lKGUsIHQuZGVsZXRlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24ociwgbik7XG4gICAgfVxuICAgIGlmICh0LnZlcmlmeSkge1xuICAgICAgICBjb25zdCByID0gZnJvbU5hbWUoZSwgdC52ZXJpZnkpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9WZXJpZnlNdXRhdGlvbihyLCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Xcml0ZVJlc3VsdHMoZSwgdCkge1xuICAgIHJldHVybiBlICYmIGUubGVuZ3RoID4gMCA/IChfX1BSSVZBVEVfaGFyZEFzc2VydCh2b2lkIDAgIT09IHQpLCBlLm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdyaXRlUmVzdWx0KGUsIHQpIHtcbiAgICAgICAgLy8gTk9URTogRGVsZXRlcyBkb24ndCBoYXZlIGFuIHVwZGF0ZVRpbWUuXG4gICAgICAgIGxldCBuID0gZS51cGRhdGVUaW1lID8gX19QUklWQVRFX2Zyb21WZXJzaW9uKGUudXBkYXRlVGltZSkgOiBfX1BSSVZBVEVfZnJvbVZlcnNpb24odCk7XG4gICAgICAgIHJldHVybiBuLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSAmJiAoXG4gICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcbiAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXG4gICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXG4gICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxuICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxuICAgICAgICBuID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQpKSwgbmV3IE11dGF0aW9uUmVzdWx0KG4sIGUudHJhbnNmb3JtUmVzdWx0cyB8fCBbXSk7XG4gICAgfShlLCB0KSkpKSA6IFtdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb2N1bWVudHNUYXJnZXQoZSwgdCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRvY3VtZW50czogWyBfX1BSSVZBVEVfdG9RdWVyeVBhdGgoZSwgdC5wYXRoKSBdXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvUXVlcnlUYXJnZXQoZSwgdCkge1xuICAgIC8vIERpc3NlY3QgdGhlIHBhdGggaW50byBwYXJlbnQsIGNvbGxlY3Rpb25JZCwgYW5kIG9wdGlvbmFsIGtleSBmaWx0ZXIuXG4gICAgY29uc3QgbiA9IHtcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB7fVxuICAgIH0sIHIgPSB0LnBhdGg7XG4gICAgbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgPyAobi5wYXJlbnQgPSBfX1BSSVZBVEVfdG9RdWVyeVBhdGgoZSwgciksIG4uc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbIHtcbiAgICAgICAgY29sbGVjdGlvbklkOiB0LmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgYWxsRGVzY2VuZGFudHM6ICEwXG4gICAgfSBdKSA6IChuLnBhcmVudCA9IF9fUFJJVkFURV90b1F1ZXJ5UGF0aChlLCByLnBvcExhc3QoKSksIG4uc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbIHtcbiAgICAgICAgY29sbGVjdGlvbklkOiByLmxhc3RTZWdtZW50KClcbiAgICB9IF0pO1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWx0ZXJzKGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdG9GaWx0ZXIoQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShlLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpO1xuICAgIH0odC5maWx0ZXJzKTtcbiAgICBpICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IGkpO1xuICAgIGNvbnN0IHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9PcmRlcihlKSB7XG4gICAgICAgIGlmICgwID09PSBlLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gZS5tYXAoKGUgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3RvUHJvcGVydHlPcmRlcihlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBfX1BSSVZBVEVfdG9EaXJlY3Rpb24oZS5kaXIpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSk7XG4gICAgfSh0Lm9yZGVyQnkpO1xuICAgIHMgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSBzKTtcbiAgICBjb25zdCBvID0gX19QUklWQVRFX3RvSW50MzJQcm90byhlLCB0LmxpbWl0KTtcbiAgICByZXR1cm4gbnVsbCAhPT0gbyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBvKSwgdC5zdGFydEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0gZnVuY3Rpb24gX19QUklWQVRFX3RvU3RhcnRBdEN1cnNvcihlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWZvcmU6IGUuaW5jbHVzaXZlLFxuICAgICAgICAgICAgdmFsdWVzOiBlLnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfSh0LnN0YXJ0QXQpKSwgdC5lbmRBdCAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkuZW5kQXQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9FbmRBdEN1cnNvcihlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWZvcmU6ICFlLmluY2x1c2l2ZSxcbiAgICAgICAgICAgIHZhbHVlczogZS5wb3NpdGlvblxuICAgICAgICB9O1xuICAgIH0odC5lbmRBdCkpLCBuO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29udmVydFF1ZXJ5VGFyZ2V0VG9RdWVyeShlKSB7XG4gICAgbGV0IHQgPSBfX1BSSVZBVEVfZnJvbVF1ZXJ5UGF0aChlLnBhcmVudCk7XG4gICAgY29uc3QgbiA9IGUuc3RydWN0dXJlZFF1ZXJ5LCByID0gbi5mcm9tID8gbi5mcm9tLmxlbmd0aCA6IDA7XG4gICAgbGV0IGkgPSBudWxsO1xuICAgIGlmIChyID4gMCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgxID09PSByKTtcbiAgICAgICAgY29uc3QgZSA9IG4uZnJvbVswXTtcbiAgICAgICAgZS5hbGxEZXNjZW5kYW50cyA/IGkgPSBlLmNvbGxlY3Rpb25JZCA6IHQgPSB0LmNoaWxkKGUuY29sbGVjdGlvbklkKTtcbiAgICB9XG4gICAgbGV0IHMgPSBbXTtcbiAgICBuLndoZXJlICYmIChzID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21GaWx0ZXJzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tRmlsdGVyKGUpO1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0Q29uanVuY3Rpb24odCkpIHJldHVybiB0LmdldEZpbHRlcnMoKTtcbiAgICAgICAgcmV0dXJuIFsgdCBdO1xuICAgIH0obi53aGVyZSkpO1xuICAgIGxldCBvID0gW107XG4gICAgbi5vcmRlckJ5ICYmIChvID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21PcmRlcihlKSB7XG4gICAgICAgIHJldHVybiBlLm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVByb3BlcnR5T3JkZXIoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPcmRlckJ5KF9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLCBcbiAgICAgICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGlyZWN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJBU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICAgICAgY2FzZSBcIkRFU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAgICAgKGUuZGlyZWN0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAoZSkpKTtcbiAgICB9KG4ub3JkZXJCeSkpO1xuICAgIGxldCBfID0gbnVsbDtcbiAgICBuLmxpbWl0ICYmIChfID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21JbnQzMlByb3RvKGUpIHtcbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIHJldHVybiB0ID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSA/IGUudmFsdWUgOiBlLCBfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQodCkgPyBudWxsIDogdDtcbiAgICB9KG4ubGltaXQpKTtcbiAgICBsZXQgYSA9IG51bGw7XG4gICAgbi5zdGFydEF0ICYmIChhID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21TdGFydEF0Q3Vyc29yKGUpIHtcbiAgICAgICAgY29uc3QgdCA9ICEhZS5iZWZvcmUsIG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChuLCB0KTtcbiAgICB9KG4uc3RhcnRBdCkpO1xuICAgIGxldCB1ID0gbnVsbDtcbiAgICByZXR1cm4gbi5lbmRBdCAmJiAodSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRW5kQXRDdXJzb3IoZSkge1xuICAgICAgICBjb25zdCB0ID0gIWUuYmVmb3JlLCBuID0gZS52YWx1ZXMgfHwgW107XG4gICAgICAgIHJldHVybiBuZXcgQm91bmQobiwgdCk7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAobi5lbmRBdCkpLCBfX1BSSVZBVEVfbmV3UXVlcnkodCwgaSwgbywgcywgXywgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgYSwgdSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0xpc3RlblJlcXVlc3RMYWJlbHMoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9MYWJlbChlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlTGlzdGVuXCIgLyogVGFyZ2V0UHVycG9zZS5MaXN0ZW4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoXCIgLyogVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoXCI7XG5cbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb21cIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb20gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwiZXhpc3RlbmNlLWZpbHRlci1taXNtYXRjaC1ibG9vbVwiO1xuXG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VMaW1ib1Jlc29sdXRpb25cIiAvKiBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJsaW1iby1kb2N1bWVudFwiO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgICAgIH1cbiAgICB9KHQucHVycG9zZSk7XG4gICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB7XG4gICAgICAgIFwiZ29vZy1saXN0ZW4tdGFnc1wiOiBuXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21GaWx0ZXIoZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IGUudW5hcnlGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVVuYXJ5RmlsdGVyKGUpIHtcbiAgICAgICAgc3dpdGNoIChlLnVuYXJ5RmlsdGVyLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIklTX05BTlwiOlxuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGUudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZSh0LCBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTlVMTFwiOlxuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGUudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZShuLCBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTk9UX05BTlwiOlxuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGUudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZShyLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwge1xuICAgICAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2FzZSBcIklTX05PVF9OVUxMXCI6XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKGksIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgfVxuICAgIH0oZSkgOiB2b2lkIDAgIT09IGUuZmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkRmlsdGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZShfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkRmlsdGVyLmZpZWxkKSwgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21PcGVyYXRvck5hbWUoZSkge1xuICAgICAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJFUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIk5PVF9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTEVTU19USEFOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTEVTU19USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiSU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpblwiIC8qIE9wZXJhdG9yLklOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJOT1RfSU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZS5maWVsZEZpbHRlci5vcCksIGUuZmllbGRGaWx0ZXIudmFsdWUpO1xuICAgIH0oZSkgOiB2b2lkIDAgIT09IGUuY29tcG9zaXRlRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Db21wb3NpdGVGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShlLmNvbXBvc2l0ZUZpbHRlci5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfZnJvbUZpbHRlcihlKSkpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUNvbXBvc2l0ZU9wZXJhdG9yTmFtZShlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFORFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiT1JcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShlLmNvbXBvc2l0ZUZpbHRlci5vcCkpO1xuICAgIH0oZSkgOiBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RpcmVjdGlvbihlKSB7XG4gICAgcmV0dXJuIGhlW2VdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9PcGVyYXRvck5hbWUoZSkge1xuICAgIHJldHVybiBQZVtlXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvQ29tcG9zaXRlT3BlcmF0b3JOYW1lKGUpIHtcbiAgICByZXR1cm4gSWVbZV07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmllbGRQYXRoOiBlLmNhbm9uaWNhbFN0cmluZygpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZSkge1xuICAgIHJldHVybiBGaWVsZFBhdGgkMS5mcm9tU2VydmVyRm9ybWF0KGUuZmllbGRQYXRoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRmlsdGVyKGUpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX3RvVW5hcnlPckZpZWxkRmlsdGVyKGUpIHtcbiAgICAgICAgaWYgKFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA9PT0gZS5vcCkge1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc05hblZhbHVlKGUudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05BTlwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNOdWxsVmFsdWUoZS52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTlVMTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmIChcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovID09PSBlLm9wKSB7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzTmFuVmFsdWUoZS52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05BTlwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNOdWxsVmFsdWUoZS52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05VTExcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICBvcDogX19QUklWQVRFX3RvT3BlcmF0b3JOYW1lKGUub3ApLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBlLnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfShlKSA6IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Db21wb3NpdGVGaWx0ZXIoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5nZXRGaWx0ZXJzKCkubWFwKChlID0+IF9fUFJJVkFURV90b0ZpbHRlcihlKSkpO1xuICAgICAgICBpZiAoMSA9PT0gdC5sZW5ndGgpIHJldHVybiB0WzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcG9zaXRlRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgb3A6IF9fUFJJVkFURV90b0NvbXBvc2l0ZU9wZXJhdG9yTmFtZShlLm9wKSxcbiAgICAgICAgICAgICAgICBmaWx0ZXJzOiB0XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfShlKSA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRG9jdW1lbnRNYXNrKGUpIHtcbiAgICBjb25zdCB0ID0gW107XG4gICAgcmV0dXJuIGUuZmllbGRzLmZvckVhY2goKGUgPT4gdC5wdXNoKGUuY2Fub25pY2FsU3RyaW5nKCkpKSksIHtcbiAgICAgICAgZmllbGRQYXRoczogdFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lKGUpIHtcbiAgICAvLyBSZXNvdXJjZSBuYW1lcyBoYXZlIGF0IGxlYXN0IDQgY29tcG9uZW50cyAocHJvamVjdCBJRCwgZGF0YWJhc2UgSUQpXG4gICAgcmV0dXJuIGUubGVuZ3RoID49IDQgJiYgXCJwcm9qZWN0c1wiID09PSBlLmdldCgwKSAmJiBcImRhdGFiYXNlc1wiID09PSBlLmdldCgyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIHNldCBvZiBtZXRhZGF0YSB0aGF0IHRoZSBsb2NhbCBzdG9yZSB0cmFja3MgZm9yIGVhY2ggdGFyZ2V0LlxuICovIGNsYXNzIFRhcmdldERhdGEge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgSUQgdG8gd2hpY2ggdGhlIHRhcmdldCBjb3JyZXNwb25kczsgQXNzaWduZWQgYnkgdGhlXG4gICAgICogTG9jYWxTdG9yZSBmb3IgdXNlciBsaXN0ZW5zIGFuZCBieSB0aGUgU3luY0VuZ2luZSBmb3IgbGltYm8gd2F0Y2hlcy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHB1cnBvc2Ugb2YgdGhlIHRhcmdldC4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0IHRyYW5zYWN0aW9uIGR1cmluZyB3aGljaCB0aGlzIHRhcmdldCBkYXRhXG4gICAgICogd2FzIG1vZGlmaWVkLlxuICAgICAqL1xuICAgIHIsIFxuICAgIC8qKiBUaGUgbGF0ZXN0IHNuYXBzaG90IHZlcnNpb24gc2VlbiBmb3IgdGhpcyB0YXJnZXQuICovXG4gICAgaSA9IFNuYXBzaG90VmVyc2lvbi5taW4oKVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgdmlld1xuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuXG4gICAgICovICwgcyA9IFNuYXBzaG90VmVyc2lvbi5taW4oKVxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovICwgbyA9IEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IGxhc3QgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIHJlc3VtZSB0b2tlbiBvclxuICAgICAqIHJlYWQgdGltZS4gRG9jdW1lbnRzIGFyZSBjb3VudGVkIG9ubHkgd2hlbiBtYWtpbmcgYSBsaXN0ZW4gcmVxdWVzdCB3aXRoXG4gICAgICogcmVzdW1lIHRva2VuIG9yIHJlYWQgdGltZSwgb3RoZXJ3aXNlLCBrZWVwIGl0IG51bGwuXG4gICAgICovICwgXyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBlLCB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5wdXJwb3NlID0gbiwgdGhpcy5zZXF1ZW5jZU51bWJlciA9IHIsIHRoaXMuc25hcHNob3RWZXJzaW9uID0gaSwgXG4gICAgICAgIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IHMsIHRoaXMucmVzdW1lVG9rZW4gPSBvLCB0aGlzLmV4cGVjdGVkQ291bnQgPSBfO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgc2VxdWVuY2UgbnVtYmVyLiAqLyAgICB3aXRoU2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgZSwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbiwgdGhpcy5leHBlY3RlZENvdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXG4gICAgICovICAgIHdpdGhSZXN1bWVUb2tlbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0LCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIGUsIFxuICAgICAgICAvKiBleHBlY3RlZENvdW50PSAqLyBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgZXhwZWN0ZWQgY291bnQuXG4gICAgICovICAgIHdpdGhFeHBlY3RlZENvdW50KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIHRoaXMuc25hcHNob3RWZXJzaW9uLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHRoaXMucmVzdW1lVG9rZW4sIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBsYXN0IGxpbWJvIGZyZWVcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uIG51bWJlci5cbiAgICAgKi8gICAgd2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24oZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIGUsIHRoaXMucmVzdW1lVG9rZW4sIHRoaXMuZXhwZWN0ZWRDb3VudCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovIGNsYXNzIF9fUFJJVkFURV9Mb2NhbFNlcmlhbGl6ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5odCA9IGU7XG4gICAgfVxufVxuXG4vKiogRGVjb2RlcyBhIHJlbW90ZSBkb2N1bWVudCBmcm9tIHN0b3JhZ2UgbG9jYWxseSB0byBhIERvY3VtZW50LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiUmVtb3RlRG9jdW1lbnQoZSwgdCkge1xuICAgIGxldCBuO1xuICAgIGlmICh0LmRvY3VtZW50KSBuID0gX19QUklWQVRFX2Zyb21Eb2N1bWVudChlLmh0LCB0LmRvY3VtZW50LCAhIXQuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTsgZWxzZSBpZiAodC5ub0RvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHModC5ub0RvY3VtZW50LnBhdGgpLCByID0gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcCh0Lm5vRG9jdW1lbnQucmVhZFRpbWUpO1xuICAgICAgICBuID0gTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQoZSwgciksIHQuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmIG4uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0LnVua25vd25Eb2N1bWVudCkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyh0LnVua25vd25Eb2N1bWVudC5wYXRoKSwgciA9IF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAodC51bmtub3duRG9jdW1lbnQudmVyc2lvbik7XG4gICAgICAgICAgICBuID0gTXV0YWJsZURvY3VtZW50Lm5ld1Vua25vd25Eb2N1bWVudChlLCByKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdC5yZWFkVGltZSAmJiBuLnNldFJlYWRUaW1lKGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXBLZXkoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IFRpbWVzdGFtcChlWzBdLCBlWzFdKTtcbiAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKHQpO1xuICAgIH0odC5yZWFkVGltZSkpLCBuO1xufVxuXG4vKiogRW5jb2RlcyBhIGRvY3VtZW50IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiUmVtb3RlRG9jdW1lbnQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSB0LmtleSwgciA9IHtcbiAgICAgICAgcHJlZml4UGF0aDogbi5nZXRDb2xsZWN0aW9uUGF0aCgpLnBvcExhc3QoKS50b0FycmF5KCksXG4gICAgICAgIGNvbGxlY3Rpb25Hcm91cDogbi5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgIGRvY3VtZW50SWQ6IG4ucGF0aC5sYXN0U2VnbWVudCgpLFxuICAgICAgICByZWFkVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXBLZXkodC5yZWFkVGltZSksXG4gICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogdC5oYXNDb21taXR0ZWRNdXRhdGlvbnNcbiAgICB9O1xuICAgIGlmICh0LmlzRm91bmREb2N1bWVudCgpKSByLmRvY3VtZW50ID0gZnVuY3Rpb24gX19QUklWQVRFX3RvRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSksXG4gICAgICAgICAgICBmaWVsZHM6IHQuZGF0YS52YWx1ZS5tYXBWYWx1ZS5maWVsZHMsXG4gICAgICAgICAgICB1cGRhdGVUaW1lOiB0b1RpbWVzdGFtcChlLCB0LnZlcnNpb24udG9UaW1lc3RhbXAoKSksXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiB0b1RpbWVzdGFtcChlLCB0LmNyZWF0ZVRpbWUudG9UaW1lc3RhbXAoKSlcbiAgICAgICAgfTtcbiAgICB9KGUuaHQsIHQpOyBlbHNlIGlmICh0LmlzTm9Eb2N1bWVudCgpKSByLm5vRG9jdW1lbnQgPSB7XG4gICAgICAgIHBhdGg6IG4ucGF0aC50b0FycmF5KCksXG4gICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcCh0LnZlcnNpb24pXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGlmICghdC5pc1Vua25vd25Eb2N1bWVudCgpKSByZXR1cm4gZmFpbCgpO1xuICAgICAgICByLnVua25vd25Eb2N1bWVudCA9IHtcbiAgICAgICAgICAgIHBhdGg6IG4ucGF0aC50b0FycmF5KCksXG4gICAgICAgICAgICB2ZXJzaW9uOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcCh0LnZlcnNpb24pXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleShlKSB7XG4gICAgY29uc3QgdCA9IGUudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4gWyB0LnNlY29uZHMsIHQubmFub3NlY29uZHMgXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoZSkge1xuICAgIGNvbnN0IHQgPSBlLnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogdC5zZWNvbmRzLFxuICAgICAgICBuYW5vc2Vjb25kczogdC5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAoZSkge1xuICAgIGNvbnN0IHQgPSBuZXcgVGltZXN0YW1wKGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyk7XG4gICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKHQpO1xufVxuXG4vKiogRW5jb2RlcyBhIGJhdGNoIG9mIG11dGF0aW9ucyBpbnRvIGEgRGJNdXRhdGlvbkJhdGNoIGZvciBsb2NhbCBzdG9yYWdlLiAqL1xuLyoqIERlY29kZXMgYSBEYk11dGF0aW9uQmF0Y2ggaW50byBhIE11dGF0aW9uQmF0Y2ggKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICBjb25zdCBuID0gKHQuYmFzZU11dGF0aW9ucyB8fCBbXSkubWFwKCh0ID0+IF9fUFJJVkFURV9mcm9tTXV0YXRpb24oZS5odCwgdCkpKTtcbiAgICAvLyBTcXVhc2ggb2xkIHRyYW5zZm9ybSBtdXRhdGlvbnMgaW50byBleGlzdGluZyBwYXRjaCBvciBzZXQgbXV0YXRpb25zLlxuICAgIC8vIFRoZSByZXBsYWNlbWVudCBvZiByZXByZXNlbnRpbmcgYHRyYW5zZm9ybXNgIHdpdGggYHVwZGF0ZV90cmFuc2Zvcm1zYFxuICAgIC8vIG9uIHRoZSBTREsgbWVhbnMgdGhhdCBvbGQgYHRyYW5zZm9ybWAgbXV0YXRpb25zIHN0b3JlZCBpbiBJbmRleGVkREIgbmVlZFxuICAgIC8vIHRvIGJlIHVwZGF0ZWQgdG8gYHVwZGF0ZV90cmFuc2Zvcm1zYC5cbiAgICAvLyBUT0RPKGIvMTc0NjA4Mzc0KTogUmVtb3ZlIHRoaXMgY29kZSBvbmNlIHdlIHBlcmZvcm0gYSBzY2hlbWEgbWlncmF0aW9uLlxuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubXV0YXRpb25zLmxlbmd0aCAtIDE7ICsrZSkge1xuICAgICAgICBjb25zdCBuID0gdC5tdXRhdGlvbnNbZV07XG4gICAgICAgIGlmIChlICsgMSA8IHQubXV0YXRpb25zLmxlbmd0aCAmJiB2b2lkIDAgIT09IHQubXV0YXRpb25zW2UgKyAxXS50cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0Lm11dGF0aW9uc1tlICsgMV07XG4gICAgICAgICAgICBuLnVwZGF0ZVRyYW5zZm9ybXMgPSByLnRyYW5zZm9ybS5maWVsZFRyYW5zZm9ybXMsIHQubXV0YXRpb25zLnNwbGljZShlICsgMSwgMSksIFxuICAgICAgICAgICAgKytlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHIgPSB0Lm11dGF0aW9ucy5tYXAoKHQgPT4gX19QUklWQVRFX2Zyb21NdXRhdGlvbihlLmh0LCB0KSkpLCBpID0gVGltZXN0YW1wLmZyb21NaWxsaXModC5sb2NhbFdyaXRlVGltZU1zKTtcbiAgICByZXR1cm4gbmV3IE11dGF0aW9uQmF0Y2godC5iYXRjaElkLCBpLCBuLCByKTtcbn1cblxuLyoqIERlY29kZXMgYSBEYlRhcmdldCBpbnRvIFRhcmdldERhdGEgKi8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYlRhcmdldChlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAoZS5yZWFkVGltZSksIG4gPSB2b2lkIDAgIT09IGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA/IF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAoZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKTtcbiAgICBsZXQgcjtcbiAgICByZXR1cm4gciA9IFxuICAgIC8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZpZ3VyaW5nIG91dCB3aGF0IGtpbmQgb2YgcXVlcnkgaGFzIGJlZW4gc3RvcmVkLlxuICovXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2lzRG9jdW1lbnRRdWVyeShlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUuZG9jdW1lbnRzO1xuICAgIH1cbiAgICAvKiogRW5jb2RlcyBhIERiQnVuZGxlIHRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqLyAoZS5xdWVyeSkgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURvY3VtZW50c1RhcmdldChlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydCgxID09PSBlLmRvY3VtZW50cy5sZW5ndGgpLCBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKF9fUFJJVkFURV9mcm9tUXVlcnlQYXRoKGUuZG9jdW1lbnRzWzBdKSkpO1xuICAgIH0oZS5xdWVyeSkgOiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9jb252ZXJ0UXVlcnlUYXJnZXRUb1F1ZXJ5KGUpKTtcbiAgICB9KGUucXVlcnkpLCBuZXcgVGFyZ2V0RGF0YShyLCBlLnRhcmdldElkLCBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyAsIGUubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLCB0LCBuLCBCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcoZS5yZXN1bWVUb2tlbikpO1xufVxuXG4vKiogRW5jb2RlcyBUYXJnZXREYXRhIGludG8gYSBEYlRhcmdldCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYlRhcmdldChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHQuc25hcHNob3RWZXJzaW9uKSwgciA9IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XG4gICAgbGV0IGk7XG4gICAgaSA9IF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KHQudGFyZ2V0KSA/IF9fUFJJVkFURV90b0RvY3VtZW50c1RhcmdldChlLmh0LCB0LnRhcmdldCkgOiBfX1BSSVZBVEVfdG9RdWVyeVRhcmdldChlLmh0LCB0LnRhcmdldCk7XG4gICAgLy8gV2UgY2FuJ3Qgc3RvcmUgdGhlIHJlc3VtZVRva2VuIGFzIGEgQnl0ZVN0cmluZyBpbiBJbmRleGVkRGIsIHNvIHdlXG4gICAgLy8gY29udmVydCBpdCB0byBhIGJhc2U2NCBzdHJpbmcgZm9yIHN0b3JhZ2UuXG4gICAgICAgIGNvbnN0IHMgPSB0LnJlc3VtZVRva2VuLnRvQmFzZTY0KCk7XG4gICAgLy8gbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIGFsd2F5cyAwIHVudGlsIHdlIGRvIHJlYWwgR0MuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgIHRhcmdldElkOiB0LnRhcmdldElkLFxuICAgICAgICBjYW5vbmljYWxJZDogX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KHQudGFyZ2V0KSxcbiAgICAgICAgcmVhZFRpbWU6IG4sXG4gICAgICAgIHJlc3VtZVRva2VuOiBzLFxuICAgICAgICBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI6IHQuc2VxdWVuY2VOdW1iZXIsXG4gICAgICAgIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb246IHIsXG4gICAgICAgIHF1ZXJ5OiBpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgYEJ1bmRsZWRRdWVyeWAgZnJvbSBidW5kbGUgcHJvdG8gdG8gYSBRdWVyeSBvYmplY3QuXG4gKlxuICogVGhpcyByZWNvbnN0cnVjdHMgdGhlIG9yaWdpbmFsIHF1ZXJ5IHVzZWQgdG8gYnVpbGQgdGhlIGJ1bmRsZSBiZWluZyBsb2FkZWQsXG4gKiBpbmNsdWRpbmcgZmVhdHVyZXMgZXhpc3RzIG9ubHkgaW4gU0RLcyAoZm9yIGV4YW1wbGU6IGxpbWl0LXRvLWxhc3QpLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUJ1bmRsZWRRdWVyeShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jb252ZXJ0UXVlcnlUYXJnZXRUb1F1ZXJ5KHtcbiAgICAgICAgcGFyZW50OiBlLnBhcmVudCxcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiBlLnN0cnVjdHVyZWRRdWVyeVxuICAgIH0pO1xuICAgIHJldHVybiBcIkxBU1RcIiA9PT0gZS5saW1pdFR5cGUgPyBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQodCwgdC5saW1pdCwgXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8pIDogdDtcbn1cblxuLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IHByb3RvIG9iamVjdCB0byBhIE5hbWVkUXVlcnkgbW9kZWwgb2JqZWN0LiAqL1xuLyoqIEVuY29kZXMgYSBEYkRvY3VtZW50T3ZlcmxheSBvYmplY3QgdG8gYW4gT3ZlcmxheSBtb2RlbCBvYmplY3QuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiRG9jdW1lbnRPdmVybGF5KGUsIHQpIHtcbiAgICByZXR1cm4gbmV3IE92ZXJsYXkodC5sYXJnZXN0QmF0Y2hJZCwgX19QUklWQVRFX2Zyb21NdXRhdGlvbihlLmh0LCB0Lm92ZXJsYXlNdXRhdGlvbikpO1xufVxuXG4vKiogRGVjb2RlcyBhbiBPdmVybGF5IG1vZGVsIG9iamVjdCBpbnRvIGEgRGJEb2N1bWVudE92ZXJsYXkgb2JqZWN0LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBEYkRvY3VtZW50T3ZlcmxheUtleSBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiB1c2VyIGFuZFxuICogZG9jdW1lbnQga2V5LlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EYkRvY3VtZW50T3ZlcmxheUtleShlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIHJldHVybiBbIGUsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodC5wYXRoLnBvcExhc3QoKSksIG4gXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRGJJbmRleFN0YXRlKGUsIHQsIG4sIHIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbmRleElkOiBlLFxuICAgICAgICB1aWQ6IHQudWlkIHx8IFwiXCIsXG4gICAgICAgIHNlcXVlbmNlTnVtYmVyOiBuLFxuICAgICAgICByZWFkVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoci5yZWFkVGltZSksXG4gICAgICAgIGRvY3VtZW50S2V5OiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHIuZG9jdW1lbnRLZXkucGF0aCksXG4gICAgICAgIGxhcmdlc3RCYXRjaElkOiByLmxhcmdlc3RCYXRjaElkXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYkJ1bmRsZUNhY2hlIHtcbiAgICBnZXRCdW5kbGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfYnVuZGxlc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYkJ1bmRsZShlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGUuYnVuZGxlSWQsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAoZS5jcmVhdGVUaW1lKSxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogZS52ZXJzaW9uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgdG8gYSBEYkJ1bmRsZS4gKi8gKGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfYnVuZGxlc1N0b3JlKGUpLnB1dChmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYkJ1bmRsZShlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGJ1bmRsZUlkOiBlLmlkLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLmNyZWF0ZVRpbWUpKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEVuY29kZXMgYSBEYk5hbWVkUXVlcnkgdG8gYSBOYW1lZFF1ZXJ5LiAqLyAodCkpO1xuICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uYW1lZFF1ZXJpZXNTdG9yZShlKS5nZXQodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoZSkgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJOYW1lZFF1ZXJ5KGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBfX1BSSVZBVEVfZnJvbUJ1bmRsZWRRdWVyeShlLmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKGUucmVhZFRpbWUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBmcm9tIGEgYnVuZGxlIHByb3RvIHRvIGEgRGJOYW1lZFF1ZXJ5LiAqLyAoZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25hbWVkUXVlcmllc1N0b3JlKGUpLnB1dChmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYk5hbWVkUXVlcnkoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBlLm5hbWUsXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLnJlYWRUaW1lKSksXG4gICAgICAgICAgICAgICAgYnVuZGxlZFF1ZXJ5OiBlLmJ1bmRsZWRRdWVyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgYnVuZGxlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2J1bmRsZXNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImJ1bmRsZXNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBuYW1lZFF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uYW1lZFF1ZXJpZXNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcIm5hbWVkUXVlcmllc1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1wbGVtZW50YXRpb24gb2YgRG9jdW1lbnRPdmVybGF5Q2FjaGUgdXNpbmcgSW5kZXhlZERiLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJEb2N1bWVudE92ZXJsYXlDYWNoZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXJJZCBmb3Igd2hpY2ggd2UgYXJlIGFjY2Vzc2luZyBvdmVybGF5cy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGUsIHRoaXMudXNlcklkID0gdDtcbiAgICB9XG4gICAgc3RhdGljIFB0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQudWlkIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYkRvY3VtZW50T3ZlcmxheUNhY2hlKGUsIG4pO1xuICAgIH1cbiAgICBnZXRPdmVybGF5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKS5nZXQoX19QUklWQVRFX3RvRGJEb2N1bWVudE92ZXJsYXlLZXkodGhpcy51c2VySWQsIHQpKS5uZXh0KChlID0+IGUgPyBfX1BSSVZBVEVfZnJvbURiRG9jdW1lbnRPdmVybGF5KHRoaXMuc2VyaWFsaXplciwgZSkgOiBudWxsKSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiB0aGlzLmdldE92ZXJsYXkoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBudWxsICE9PSBlICYmIG4uc2V0KHQsIGUpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHNhdmVPdmVybGF5cyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgT3ZlcmxheSh0LCBpKTtcbiAgICAgICAgICAgIHIucHVzaCh0aGlzLkl0KGUsIHMpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBTZXQ7XG4gICAgICAgIC8vIEdldCB0aGUgc2V0IG9mIHVuaXF1ZSBjb2xsZWN0aW9uIHBhdGhzLlxuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoZSA9PiByLmFkZChfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUuZ2V0Q29sbGVjdGlvblBhdGgoKSkpKSk7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHIuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgdCwgbiBdLCBbIHRoaXMudXNlcklkLCB0LCBuICsgMSBdLCBcbiAgICAgICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgICAgIGkucHVzaChfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkuSihcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHIpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCksIGkgPSBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgaSwgbiBdLCBbIHRoaXMudXNlcklkLCBpLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKS5HKFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgcykubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZnJvbURiRG9jdW1lbnRPdmVybGF5KHRoaXMuc2VyaWFsaXplciwgdCk7XG4gICAgICAgICAgICAgICAgci5zZXQoZS5nZXRLZXkoKSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cChlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgLy8gV2Ugd2FudCBiYXRjaCBJRHMgbGFyZ2VyIHRoYW4gYHNpbmNlQmF0Y2hJZGAsIGFuZCBzbyB0aGUgbG93ZXIgYm91bmRcbiAgICAgICAgLy8gaXMgbm90IGluY2x1c2l2ZS5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgdCwgbiBdLCBbIHRoaXMudXNlcklkLCB0LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcImNvbGxlY3Rpb25Hcm91cE92ZXJsYXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IG9cbiAgICAgICAgfSwgKChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBkbyBub3Qgd2FudCB0byByZXR1cm4gcGFydGlhbCBiYXRjaCBvdmVybGF5cywgZXZlbiBpZiB0aGUgc2l6ZVxuICAgICAgICAgICAgLy8gb2YgdGhlIHJlc3VsdCBzZXQgZXhjZWVkcyB0aGUgZ2l2ZW4gYGNvdW50YCBhcmd1bWVudC4gVGhlcmVmb3JlLCB3ZVxuICAgICAgICAgICAgLy8gY29udGludWUgdG8gYWdncmVnYXRlIHJlc3VsdHMgZXZlbiBhZnRlciB0aGUgcmVzdWx0IHNpemUgZXhjZWVkc1xuICAgICAgICAgICAgLy8gYGNvdW50YCBpZiB0aGVyZSBhcmUgbW9yZSBvdmVybGF5cyBmcm9tIHRoZSBgY3VycmVudEJhdGNoSWRgLlxuICAgICAgICAgICAgY29uc3QgbyA9IF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgIGkuc2l6ZSgpIDwgciB8fCBvLmxhcmdlc3RCYXRjaElkID09PSBzID8gKGkuc2V0KG8uZ2V0S2V5KCksIG8pLCBzID0gby5sYXJnZXN0QmF0Y2hJZCkgOiBuLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgSXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLnB1dChmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYkRvY3VtZW50T3ZlcmxheShlLCB0LCBuKSB7XG4gICAgICAgICAgICBjb25zdCBbciwgaSwgc10gPSBfX1BSSVZBVEVfdG9EYkRvY3VtZW50T3ZlcmxheUtleSh0LCBuLm11dGF0aW9uLmtleSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVzZXJJZDogdCxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uUGF0aDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkOiBzLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogbi5tdXRhdGlvbi5rZXkuZ2V0Q29sbGVjdGlvbkdyb3VwKCksXG4gICAgICAgICAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IG4ubGFyZ2VzdEJhdGNoSWQsXG4gICAgICAgICAgICAgICAgb3ZlcmxheU11dGF0aW9uOiB0b011dGF0aW9uKGUuaHQsIG4ubXV0YXRpb24pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHRoaXMuc2VyaWFsaXplciwgdGhpcy51c2VySWQsIHQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCBvdmVybGF5IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJkb2N1bWVudE92ZXJsYXlzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gTm90ZTogVGhpcyBjb2RlIGlzIGNvcGllZCBmcm9tIHRoZSBiYWNrZW5kLiBDb2RlIHRoYXQgaXMgbm90IHVzZWQgYnlcbi8vIEZpcmVzdG9yZSB3YXMgcmVtb3ZlZC5cbi8qKiBGaXJlc3RvcmUgaW5kZXggdmFsdWUgd3JpdGVyLiAgKi9cbmNsYXNzIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHt9XG4gICAgLy8gVGhlIHdyaXRlIG1ldGhvZHMgYmVsb3cgc2hvcnQtY2lyY3VpdCB3cml0aW5nIHRlcm1pbmF0b3JzIGZvciB2YWx1ZXNcbiAgICAvLyBjb250YWluaW5nIGEgKHRlcm1pbmF0aW5nKSB0cnVuY2F0ZWQgdmFsdWUuXG4gICAgLy8gQXMgYW4gZXhhbXBsZSwgY29uc2lkZXIgdGhlIHJlc3VsdGluZyBlbmNvZGluZyBmb3I6XG4gICAgLy8gW1wiYmFyXCIsIFsyLCBcImZvb1wiXV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVksIE5VTUJFUiwgMiwgU1RSSU5HLCBcImZvb1wiLCBURVJNLCBURVJNLCBURVJNKVxuICAgIC8vIFtcImJhclwiLCBbMiwgdHJ1bmNhdGVkKFwiZm9vXCIpXV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVksIE5VTUJFUiwgMiwgU1RSSU5HLCBcImZvb1wiLCBUUlVOQylcbiAgICAvLyBbXCJiYXJcIiwgdHJ1bmNhdGVkKFtcImZvb1wiXSldIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLiBTVFJJTkcsIFwiZm9vXCIsIFRFUk0sIFRSVU5DKVxuICAgIC8qKiBXcml0ZXMgYW4gaW5kZXggdmFsdWUuICAqL1xuICAgIGR0KGUsIHQpIHtcbiAgICAgICAgdGhpcy5UdChlLCB0KSwgXG4gICAgICAgIC8vIFdyaXRlIHNlcGFyYXRvciB0byBzcGxpdCBpbmRleCB2YWx1ZXNcbiAgICAgICAgLy8gKHNlZSBnby9maXJlc3RvcmUtc3RvcmFnZS1mb3JtYXQjZW5jb2RpbmdzKS5cbiAgICAgICAgdC5FdCgpO1xuICAgIH1cbiAgICBUdChlLCB0KSB7XG4gICAgICAgIGlmIChcIm51bGxWYWx1ZVwiIGluIGUpIHRoaXMuQXQodCwgNSk7IGVsc2UgaWYgKFwiYm9vbGVhblZhbHVlXCIgaW4gZSkgdGhpcy5BdCh0LCAxMCksIFxuICAgICAgICB0LlJ0KGUuYm9vbGVhblZhbHVlID8gMSA6IDApOyBlbHNlIGlmIChcImludGVnZXJWYWx1ZVwiIGluIGUpIHRoaXMuQXQodCwgMTUpLCB0LlJ0KF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5pbnRlZ2VyVmFsdWUpKTsgZWxzZSBpZiAoXCJkb3VibGVWYWx1ZVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgaXNOYU4obikgPyB0aGlzLkF0KHQsIDEzKSA6ICh0aGlzLkF0KHQsIDE1KSwgX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKG4pID8gXG4gICAgICAgICAgICAvLyAtMC4wLCAwIGFuZCAwLjAgYXJlIGFsbCBjb25zaWRlcmVkIHRoZSBzYW1lXG4gICAgICAgICAgICB0LlJ0KDApIDogdC5SdChuKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnRpbWVzdGFtcFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5BdCh0LCAyMCksIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4gPyB0LlZ0KG4pIDogKHQuVnQoYCR7bi5zZWNvbmRzIHx8IFwiXCJ9YCksIHQuUnQobi5uYW5vcyB8fCAwKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJzdHJpbmdWYWx1ZVwiIGluIGUpIHRoaXMuZnQoZS5zdHJpbmdWYWx1ZSwgdCksIHRoaXMuZ3QodCk7IGVsc2UgaWYgKFwiYnl0ZXNWYWx1ZVwiIGluIGUpIHRoaXMuQXQodCwgMzApLCBcbiAgICAgICAgdC55dChfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlLmJ5dGVzVmFsdWUpKSwgdGhpcy5ndCh0KTsgZWxzZSBpZiAoXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGUpIHRoaXMud3QoZS5yZWZlcmVuY2VWYWx1ZSwgdCk7IGVsc2UgaWYgKFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmdlb1BvaW50VmFsdWU7XG4gICAgICAgICAgICB0aGlzLkF0KHQsIDQ1KSwgdC5SdChuLmxhdGl0dWRlIHx8IDApLCB0LlJ0KG4ubG9uZ2l0dWRlIHx8IDApO1xuICAgICAgICB9IGVsc2UgXCJtYXBWYWx1ZVwiIGluIGUgPyBfX1BSSVZBVEVfaXNNYXhWYWx1ZShlKSA/IHRoaXMuQXQodCwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIDogKHRoaXMuU3QoZS5tYXBWYWx1ZSwgdCksIFxuICAgICAgICB0aGlzLmd0KHQpKSA6IFwiYXJyYXlWYWx1ZVwiIGluIGUgPyAodGhpcy5idChlLmFycmF5VmFsdWUsIHQpLCB0aGlzLmd0KHQpKSA6IGZhaWwoKTtcbiAgICB9XG4gICAgZnQoZSwgdCkge1xuICAgICAgICB0aGlzLkF0KHQsIDI1KSwgdGhpcy5EdChlLCB0KTtcbiAgICB9XG4gICAgRHQoZSwgdCkge1xuICAgICAgICB0LlZ0KGUpO1xuICAgIH1cbiAgICBTdChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgdGhpcy5BdCh0LCA1NSk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBPYmplY3Qua2V5cyhuKSkgdGhpcy5mdChlLCB0KSwgdGhpcy5UdChuW2VdLCB0KTtcbiAgICB9XG4gICAgYnQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gZS52YWx1ZXMgfHwgW107XG4gICAgICAgIHRoaXMuQXQodCwgNTApO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgdGhpcy5UdChlLCB0KTtcbiAgICB9XG4gICAgd3QoZSwgdCkge1xuICAgICAgICB0aGlzLkF0KHQsIDM3KTtcbiAgICAgICAgRG9jdW1lbnRLZXkuZnJvbU5hbWUoZSkucGF0aC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuQXQodCwgNjApLCB0aGlzLkR0KGUsIHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEF0KGUsIHQpIHtcbiAgICAgICAgZS5SdCh0KTtcbiAgICB9XG4gICAgZ3QoZSkge1xuICAgICAgICAvLyBXaGlsZSB0aGUgU0RLIGRvZXMgbm90IGltcGxlbWVudCB0cnVuY2F0aW9uLCB0aGUgdHJ1bmNhdGlvbiBtYXJrZXIgaXNcbiAgICAgICAgLy8gdXNlZCB0byB0ZXJtaW5hdGUgYWxsIHZhcmlhYmxlIGxlbmd0aCB2YWx1ZXMgKHdoaWNoIGFyZSBzdHJpbmdzLCBieXRlcyxcbiAgICAgICAgLy8gcmVmZXJlbmNlcywgYXJyYXlzIGFuZCBtYXBzKS5cbiAgICAgICAgZS5SdCgyKTtcbiAgICB9XG59XG5cbl9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLkN0ID0gbmV3IF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyO1xuXG4vKipcbiAqIENvdW50cyB0aGUgbnVtYmVyIG9mIHplcm9zIGluIGEgYnl0ZS5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbnVtYmVyT2ZMZWFkaW5nWmVyb3NJbkJ5dGUoZSkge1xuICAgIGlmICgwID09PSBlKSByZXR1cm4gODtcbiAgICBsZXQgdCA9IDA7XG4gICAgcmV0dXJuIGUgPj4gNCA9PSAwICYmIChcbiAgICAvLyBUZXN0IGlmIHRoZSBmaXJzdCBmb3VyIGJpdHMgYXJlIHplcm8uXG4gICAgdCArPSA0LCBlIDw8PSA0KSwgZSA+PiA2ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIGZpcnN0IHR3byAob3IgbmV4dCB0d28pIGJpdHMgYXJlIHplcm8uXG4gICAgdCArPSAyLCBlIDw8PSAyKSwgZSA+PiA3ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIHJlbWFpbmluZyBiaXQgaXMgemVyby5cbiAgICB0ICs9IDEpLCB0O1xufVxuXG4vKiogQ291bnRzIHRoZSBudW1iZXIgb2YgbGVhZGluZyB6ZXJvcyBpbiB0aGUgZ2l2ZW4gYnl0ZSBhcnJheS4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlcXVpcmVkIHRvIHN0b3JlIFwidmFsdWVcIi4gTGVhZGluZyB6ZXJvIGJ5dGVzXG4gKiBhcmUgc2tpcHBlZC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKGUpIHtcbiAgICAvLyBUaGlzIGlzIGp1c3QgdGhlIG51bWJlciBvZiBieXRlcyBmb3IgdGhlIHVuc2lnbmVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBudW1iZXIuXG4gICAgY29uc3QgdCA9IDY0IC0gZnVuY3Rpb24gX19QUklWQVRFX251bWJlck9mTGVhZGluZ1plcm9zKGUpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IDg7ICsrbikge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9udW1iZXJPZkxlYWRpbmdaZXJvc0luQnl0ZSgyNTUgJiBlW25dKTtcbiAgICAgICAgICAgIGlmICh0ICs9IHIsIDggIT09IHIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH0oZSk7XG4gICAgcmV0dXJuIE1hdGguY2VpbCh0IC8gOCk7XG59XG5cbi8qKlxuICogT3JkZXJlZENvZGVXcml0ZXIgaXMgYSBtaW5pbWFsLWFsbG9jYXRpb24gaW1wbGVtZW50YXRpb24gb2YgdGhlIHdyaXRpbmdcbiAqIGJlaGF2aW9yIGRlZmluZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIGNvZGUgaXMgcG9ydGVkIGZyb20gaXRzIEphdmEgY291bnRlcnBhcnQuXG4gKi8gY2xhc3MgX19QUklWQVRFX09yZGVyZWRDb2RlV3JpdGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSgxMDI0KSwgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgfVxuICAgIHZ0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IHQubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuRnQobi52YWx1ZSksIG4gPSB0Lm5leHQoKTtcbiAgICAgICAgdGhpcy5NdCgpO1xuICAgIH1cbiAgICB4dChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICAgICAgbGV0IG4gPSB0Lm5leHQoKTtcbiAgICAgICAgZm9yICg7IW4uZG9uZTsgKSB0aGlzLk90KG4udmFsdWUpLCBuID0gdC5uZXh0KCk7XG4gICAgICAgIHRoaXMuTnQoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBhc2NlbmRpbmcuICovICAgIEJ0KGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAoZSA8IDEyOCkgdGhpcy5GdChlKTsgZWxzZSBpZiAoZSA8IDIwNDgpIHRoaXMuRnQoOTYwIHwgZSA+Pj4gNiksIHRoaXMuRnQoMTI4IHwgNjMgJiBlKTsgZWxzZSBpZiAodCA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgdCkgdGhpcy5GdCg0ODAgfCBlID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5GdCgxMjggfCA2MyAmIGUgPj4+IDYpLCB0aGlzLkZ0KDEyOCB8IDYzICYgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuRnQoMjQwIHwgZSA+Pj4gMTgpLCB0aGlzLkZ0KDEyOCB8IDYzICYgZSA+Pj4gMTIpLCB0aGlzLkZ0KDEyOCB8IDYzICYgZSA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuRnQoMTI4IHwgNjMgJiBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLk10KCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgdXRmOCBieXRlcyBpbnRvIHRoaXMgYnl0ZSBzZXF1ZW5jZSwgZGVzY2VuZGluZyAqLyAgICBMdChlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgaWYgKGUgPCAxMjgpIHRoaXMuT3QoZSk7IGVsc2UgaWYgKGUgPCAyMDQ4KSB0aGlzLk90KDk2MCB8IGUgPj4+IDYpLCB0aGlzLk90KDEyOCB8IDYzICYgZSk7IGVsc2UgaWYgKHQgPCBcIlxcdWQ4MDBcIiB8fCBcIlxcdWRiZmZcIiA8IHQpIHRoaXMuT3QoNDgwIHwgZSA+Pj4gMTIpLCBcbiAgICAgICAgICAgIHRoaXMuT3QoMTI4IHwgNjMgJiBlID4+PiA2KSwgdGhpcy5PdCgxMjggfCA2MyAmIGUpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5jb2RlUG9pbnRBdCgwKTtcbiAgICAgICAgICAgICAgICB0aGlzLk90KDI0MCB8IGUgPj4+IDE4KSwgdGhpcy5PdCgxMjggfCA2MyAmIGUgPj4+IDEyKSwgdGhpcy5PdCgxMjggfCA2MyAmIGUgPj4+IDYpLCBcbiAgICAgICAgICAgICAgICB0aGlzLk90KDEyOCB8IDYzICYgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5OdCgpO1xuICAgIH1cbiAgICBrdChlKSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGFjdHVhbCB2YWx1ZSBpbiBiaWctZW5kaWFuIGZvcm1hdCB3aXRoIGxlYWRpbmcgMCBieXRlcyBkcm9wcGVkLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5xdChlKSwgbiA9IF9fUFJJVkFURV91bnNpZ25lZE51bUxlbmd0aCh0KTtcbiAgICAgICAgdGhpcy5RdCgxICsgbiksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiBuO1xuICAgICAgICAvLyBXcml0ZSB0aGUgbGVuZ3RoXG4gICAgICAgIGZvciAobGV0IGUgPSB0Lmxlbmd0aCAtIG47IGUgPCB0Lmxlbmd0aDsgKytlKSB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gMjU1ICYgdFtlXTtcbiAgICB9XG4gICAgS3QoZSkge1xuICAgICAgICAvLyBWYWx1ZXMgYXJlIGVuY29kZWQgd2l0aCBhIHNpbmdsZSBieXRlIGxlbmd0aCBwcmVmaXgsIGZvbGxvd2VkIGJ5IHRoZVxuICAgICAgICAvLyBpbnZlcnRlZCB2YWx1ZSBpbiBiaWctZW5kaWFuIGZvcm1hdCB3aXRoIGxlYWRpbmcgMCBieXRlcyBkcm9wcGVkLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5xdChlKSwgbiA9IF9fUFJJVkFURV91bnNpZ25lZE51bUxlbmd0aCh0KTtcbiAgICAgICAgdGhpcy5RdCgxICsgbiksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+KDI1NSAmIG4pO1xuICAgICAgICAvLyBXcml0ZSB0aGUgbGVuZ3RoXG4gICAgICAgIGZvciAobGV0IGUgPSB0Lmxlbmd0aCAtIG47IGUgPCB0Lmxlbmd0aDsgKytlKSB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfigyNTUgJiB0W2VdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBcImluZmluaXR5XCIgYnl0ZSBzZXF1ZW5jZSB0aGF0IHNvcnRzIGFmdGVyIGFsbCBvdGhlciBieXRlXG4gICAgICogc2VxdWVuY2VzIHdyaXR0ZW4gaW4gYXNjZW5kaW5nIG9yZGVyLlxuICAgICAqLyAgICAkdCgpIHtcbiAgICAgICAgdGhpcy5VdCgyNTUpLCB0aGlzLlV0KDI1NSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyaXRlcyB0aGUgXCJpbmZpbml0eVwiIGJ5dGUgc2VxdWVuY2UgdGhhdCBzb3J0cyBiZWZvcmUgYWxsIG90aGVyIGJ5dGVcbiAgICAgKiBzZXF1ZW5jZXMgd3JpdHRlbiBpbiBkZXNjZW5kaW5nIG9yZGVyLlxuICAgICAqLyAgICBXdCgpIHtcbiAgICAgICAgdGhpcy5HdCgyNTUpLCB0aGlzLkd0KDI1NSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYnVmZmVyIHN1Y2ggdGhhdCBpdCBpcyB0aGUgc2FtZSBhcyB3aGVuIGl0IHdhcyBuZXdseVxuICAgICAqIGNvbnN0cnVjdGVkLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgfVxuICAgIHNlZWQoZSkge1xuICAgICAgICB0aGlzLlF0KGUubGVuZ3RoKSwgdGhpcy5idWZmZXIuc2V0KGUsIHRoaXMucG9zaXRpb24pLCB0aGlzLnBvc2l0aW9uICs9IGUubGVuZ3RoO1xuICAgIH1cbiAgICAvKiogTWFrZXMgYSBjb3B5IG9mIHRoZSBlbmNvZGVkIGJ5dGVzIGluIHRoaXMgYnVmZmVyLiAgKi8gICAgenQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLnBvc2l0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyBgdmFsYCBpbnRvIGFuIGVuY29kaW5nIHNvIHRoYXQgdGhlIG9yZGVyIG1hdGNoZXMgdGhlIElFRUUgNzU0XG4gICAgICogZmxvYXRpbmctcG9pbnQgY29tcGFyaXNvbiByZXN1bHRzIHdpdGggdGhlIGZvbGxvd2luZyBleGNlcHRpb25zOlxuICAgICAqICAgLTAuMCA8IDAuMFxuICAgICAqICAgYWxsIG5vbi1OYU4gPCBOYU5cbiAgICAgKiAgIE5hTiA9IE5hTlxuICAgICAqLyAgICBxdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgLyoqIENvbnZlcnRzIGEgSmF2YVNjcmlwdCBudW1iZXIgdG8gYSBieXRlIGFycmF5ICh1c2luZyBiaWcgZW5kaWFuIGVuY29kaW5nKS4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2RvdWJsZVRvTG9uZ0JpdHMoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoOCkpO1xuICAgICAgICAgICAgcmV0dXJuIHQuc2V0RmxvYXQ2NCgwLCBlLCAvKiBsaXR0bGVFbmRpYW49ICovICExKSwgbmV3IFVpbnQ4QXJyYXkodC5idWZmZXIpO1xuICAgICAgICB9KGUpLCBuID0gMCAhPSAoMTI4ICYgdFswXSk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBmaXJzdCBiaXQgaXMgc2V0LiBXZSB1c2UgYSBiaXQgbWFzayBzaW5jZSB2YWx1ZVswXSBpc1xuICAgICAgICAvLyBlbmNvZGVkIGFzIGEgbnVtYmVyIGZyb20gMCB0byAyNTUuXG4gICAgICAgICAgICAgICAgLy8gUmV2ZXJ0IHRoZSB0d28gY29tcGxlbWVudCB0byBnZXQgbmF0dXJhbCBvcmRlcmluZ1xuICAgICAgICB0WzBdIF49IG4gPyAyNTUgOiAxMjg7XG4gICAgICAgIGZvciAobGV0IGUgPSAxOyBlIDwgdC5sZW5ndGg7ICsrZSkgdFtlXSBePSBuID8gMjU1IDogMDtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBzaW5nbGUgYnl0ZSBhc2NlbmRpbmcgdG8gdGhlIGJ1ZmZlci4gKi8gICAgRnQoZSkge1xuICAgICAgICBjb25zdCB0ID0gMjU1ICYgZTtcbiAgICAgICAgMCA9PT0gdCA/ICh0aGlzLlV0KDApLCB0aGlzLlV0KDI1NSkpIDogMjU1ID09PSB0ID8gKHRoaXMuVXQoMjU1KSwgdGhpcy5VdCgwKSkgOiB0aGlzLlV0KHQpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIGEgc2luZ2xlIGJ5dGUgZGVzY2VuZGluZyB0byB0aGUgYnVmZmVyLiAgKi8gICAgT3QoZSkge1xuICAgICAgICBjb25zdCB0ID0gMjU1ICYgZTtcbiAgICAgICAgMCA9PT0gdCA/ICh0aGlzLkd0KDApLCB0aGlzLkd0KDI1NSkpIDogMjU1ID09PSB0ID8gKHRoaXMuR3QoMjU1KSwgdGhpcy5HdCgwKSkgOiB0aGlzLkd0KGUpO1xuICAgIH1cbiAgICBNdCgpIHtcbiAgICAgICAgdGhpcy5VdCgwKSwgdGhpcy5VdCgxKTtcbiAgICB9XG4gICAgTnQoKSB7XG4gICAgICAgIHRoaXMuR3QoMCksIHRoaXMuR3QoMSk7XG4gICAgfVxuICAgIFV0KGUpIHtcbiAgICAgICAgdGhpcy5RdCgxKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IGU7XG4gICAgfVxuICAgIEd0KGUpIHtcbiAgICAgICAgdGhpcy5RdCgxKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH5lO1xuICAgIH1cbiAgICBRdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlICsgdGhpcy5wb3NpdGlvbjtcbiAgICAgICAgaWYgKHQgPD0gdGhpcy5idWZmZXIubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIC8vIFRyeSBkb3VibGluZy5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IDIgKiB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIC8vIFN0aWxsIG5vdCBiaWcgZW5vdWdoPyBKdXN0IGFsbG9jYXRlIHRoZSByaWdodCBzaXplLlxuICAgICAgICAgICAgICAgIG4gPCB0ICYmIChuID0gdCk7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IGJ1ZmZlci5cbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFVpbnQ4QXJyYXkobik7XG4gICAgICAgIHIuc2V0KHRoaXMuYnVmZmVyKSwgLy8gY29weSBvbGQgZGF0YVxuICAgICAgICB0aGlzLmJ1ZmZlciA9IHI7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQXNjZW5kaW5nSW5kZXhCeXRlRW5jb2RlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmp0ID0gZTtcbiAgICB9XG4gICAgeXQoZSkge1xuICAgICAgICB0aGlzLmp0LnZ0KGUpO1xuICAgIH1cbiAgICBWdChlKSB7XG4gICAgICAgIHRoaXMuanQuQnQoZSk7XG4gICAgfVxuICAgIFJ0KGUpIHtcbiAgICAgICAgdGhpcy5qdC5rdChlKTtcbiAgICB9XG4gICAgRXQoKSB7XG4gICAgICAgIHRoaXMuanQuJHQoKTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9EZXNjZW5kaW5nSW5kZXhCeXRlRW5jb2RlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmp0ID0gZTtcbiAgICB9XG4gICAgeXQoZSkge1xuICAgICAgICB0aGlzLmp0Lnh0KGUpO1xuICAgIH1cbiAgICBWdChlKSB7XG4gICAgICAgIHRoaXMuanQuTHQoZSk7XG4gICAgfVxuICAgIFJ0KGUpIHtcbiAgICAgICAgdGhpcy5qdC5LdChlKTtcbiAgICB9XG4gICAgRXQoKSB7XG4gICAgICAgIHRoaXMuanQuV3QoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBgRGlyZWN0aW9uYWxJbmRleEJ5dGVFbmNvZGVyYCB1c2luZyBgT3JkZXJlZENvZGVXcml0ZXJgIGZvciB0aGVcbiAqIGFjdHVhbCBlbmNvZGluZy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2RlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuanQgPSBuZXcgX19QUklWQVRFX09yZGVyZWRDb2RlV3JpdGVyLCB0aGlzLkh0ID0gbmV3IF9fUFJJVkFURV9Bc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyKHRoaXMuanQpLCBcbiAgICAgICAgdGhpcy5KdCA9IG5ldyBfX1BSSVZBVEVfRGVzY2VuZGluZ0luZGV4Qnl0ZUVuY29kZXIodGhpcy5qdCk7XG4gICAgfVxuICAgIHNlZWQoZSkge1xuICAgICAgICB0aGlzLmp0LnNlZWQoZSk7XG4gICAgfVxuICAgIFl0KGUpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gZSA/IHRoaXMuSHQgOiB0aGlzLkp0O1xuICAgIH1cbiAgICB6dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuanQuenQoKTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuanQucmVzZXQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUmVwcmVzZW50cyBhbiBpbmRleCBlbnRyeSBzYXZlZCBieSB0aGUgU0RLIGluIHBlcnNpc3RlZCBzdG9yYWdlLiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhFbnRyeSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLmluZGV4SWQgPSBlLCB0aGlzLmRvY3VtZW50S2V5ID0gdCwgdGhpcy5hcnJheVZhbHVlID0gbiwgdGhpcy5kaXJlY3Rpb25hbFZhbHVlID0gcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBJbmRleEVudHJ5IGVudHJ5IHRoYXQgc29ydHMgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGN1cnJlbnRcbiAgICAgKiBkaXJlY3Rpb25hbCB2YWx1ZS5cbiAgICAgKi8gICAgWnQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRpcmVjdGlvbmFsVmFsdWUubGVuZ3RoLCB0ID0gMCA9PT0gZSB8fCAyNTUgPT09IHRoaXMuZGlyZWN0aW9uYWxWYWx1ZVtlIC0gMV0gPyBlICsgMSA6IGUsIG4gPSBuZXcgVWludDhBcnJheSh0KTtcbiAgICAgICAgcmV0dXJuIG4uc2V0KHRoaXMuZGlyZWN0aW9uYWxWYWx1ZSwgMCksIHQgIT09IGUgPyBuLnNldChbIDAgXSwgdGhpcy5kaXJlY3Rpb25hbFZhbHVlLmxlbmd0aCkgOiArK25bbi5sZW5ndGggLSAxXSwgXG4gICAgICAgIG5ldyBfX1BSSVZBVEVfSW5kZXhFbnRyeSh0aGlzLmluZGV4SWQsIHRoaXMuZG9jdW1lbnRLZXksIHRoaXMuYXJyYXlWYWx1ZSwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoZSwgdCkge1xuICAgIGxldCBuID0gZS5pbmRleElkIC0gdC5pbmRleElkO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IChuID0gX19QUklWQVRFX2NvbXBhcmVCeXRlQXJyYXlzKGUuYXJyYXlWYWx1ZSwgdC5hcnJheVZhbHVlKSwgXG4gICAgMCAhPT0gbiA/IG4gOiAobiA9IF9fUFJJVkFURV9jb21wYXJlQnl0ZUFycmF5cyhlLmRpcmVjdGlvbmFsVmFsdWUsIHQuZGlyZWN0aW9uYWxWYWx1ZSksIFxuICAgIDAgIT09IG4gPyBuIDogRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmRvY3VtZW50S2V5LCB0LmRvY3VtZW50S2V5KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUJ5dGVBcnJheXMoZSwgdCkge1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGggJiYgbiA8IHQubGVuZ3RoOyArK24pIHtcbiAgICAgICAgY29uc3QgciA9IGVbbl0gLSB0W25dO1xuICAgICAgICBpZiAoMCAhPT0gcikgcmV0dXJuIHI7XG4gICAgfVxuICAgIHJldHVybiBlLmxlbmd0aCAtIHQubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGxpZ2h0IHF1ZXJ5IHBsYW5uZXIgZm9yIEZpcmVzdG9yZS5cbiAqXG4gKiBUaGlzIGNsYXNzIG1hdGNoZXMgYSBgRmllbGRJbmRleGAgYWdhaW5zdCBhIEZpcmVzdG9yZSBRdWVyeSBgVGFyZ2V0YC4gSXRcbiAqIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGluZGV4IGNhbiBiZSB1c2VkIHRvIHNlcnZlIHRoZSBzcGVjaWZpZWQgdGFyZ2V0LlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgdGFibGUgc2hvd2Nhc2VzIHNvbWUgcG9zc2libGUgaW5kZXggY29uZmlndXJhdGlvbnM6XG4gKlxuICogUXVlcnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSW5kZXhcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBhIEFTQywgYiBERVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnPT0nLCAnYScpLndoZXJlKCdiJywgJz09JywgJ2InKSAgICAgICAgIHwgYiBERVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpICAgICAgICAgICAgICAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnLCAnZGVzYycpICAgICAgICAgIHwgYSBERVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpLm9yZGVyQnkoJ2InKSAgICAgfCBhIEFTQywgYiBBU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TLCBiIEFTQ0VORElOR1xuICogd2hlcmUoJ2EnLCAnYXJyYXktY29udGFpbnMnLCAnYScpLm9yZGVyQnkoJ2InKSAgICAgIHwgYSBDT05UQUlOU1xuICovIGNsYXNzIF9fUFJJVkFURV9UYXJnZXRJbmRleE1hdGNoZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uSWQgPSBudWxsICE9IGUuY29sbGVjdGlvbkdyb3VwID8gZS5jb2xsZWN0aW9uR3JvdXAgOiBlLnBhdGgubGFzdFNlZ21lbnQoKSwgXG4gICAgICAgIHRoaXMuWHQgPSBlLm9yZGVyQnksIHRoaXMuZW4gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZmlsdGVycykge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQ7XG4gICAgICAgICAgICBlLmlzSW5lcXVhbGl0eSgpID8gdGhpcy50biA9IGUgOiB0aGlzLmVuLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBpbmRleCBjYW4gYmUgdXNlZCB0byBzZXJ2ZSB0aGUgVGFyZ2V0SW5kZXhNYXRjaGVyJ3NcbiAgICAgKiB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBBbiBpbmRleCBpcyBjb25zaWRlcmVkIGNhcGFibGUgb2Ygc2VydmluZyB0aGUgdGFyZ2V0IHdoZW46XG4gICAgICogLSBUaGUgdGFyZ2V0IHVzZXMgYWxsIGluZGV4IHNlZ21lbnRzIGZvciBpdHMgZmlsdGVycyBhbmQgb3JkZXJCeSBjbGF1c2VzLlxuICAgICAqICAgVGhlIHRhcmdldCBjYW4gaGF2ZSBhZGRpdGlvbmFsIGZpbHRlciBhbmQgb3JkZXJCeSBjbGF1c2VzLCBidXQgbm90XG4gICAgICogICBmZXdlci5cbiAgICAgKiAtIElmIGFuIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueWZpbHRlciBpcyB1c2VkLCB0aGUgaW5kZXggbXVzdCBhbHNvXG4gICAgICogICBoYXZlIGEgY29ycmVzcG9uZGluZyBgQ09OVEFJTlNgIHNlZ21lbnQuXG4gICAgICogLSBBbGwgZGlyZWN0aW9uYWwgaW5kZXggc2VnbWVudHMgY2FuIGJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0IGFzIGEgc2VyaWVzIG9mXG4gICAgICogICBlcXVhbGl0eSBmaWx0ZXJzLCBhIHNpbmdsZSBpbmVxdWFsaXR5IGZpbHRlciBhbmQgYSBzZXJpZXMgb2Ygb3JkZXJCeVxuICAgICAqICAgY2xhdXNlcy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGUgZXF1YWxpdHkgZmlsdGVycyBtYXkgYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgKiAtIFRoZSBvcHRpb25hbCBzZWdtZW50IGZvciB0aGUgaW5lcXVhbGl0eSBmaWx0ZXIgbXVzdCBhcHBlYXIgYWZ0ZXIgYWxsXG4gICAgICogICBlcXVhbGl0eSBzZWdtZW50cy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGF0IG9yZGVyQnkgY2xhdXNlIG9mIHRoZSB0YXJnZXQgbXVzdCBhcHBlYXJcbiAgICAgKiAgIGluIG9yZGVyIGFmdGVyIGFsbCBlcXVhbGl0eSBhbmQgaW5lcXVhbGl0eSBzZWdtZW50cy4gU2luZ2xlIG9yZGVyQnlcbiAgICAgKiAgIGNsYXVzZXMgY2Fubm90IGJlIHNraXBwZWQsIGJ1dCBhIGNvbnRpbnVvdXMgb3JkZXJCeSBzdWZmaXggbWF5IGJlXG4gICAgICogICBvbWl0dGVkLlxuICAgICAqLyAgICBubihlKSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUuY29sbGVjdGlvbkdyb3VwID09PSB0aGlzLmNvbGxlY3Rpb25JZCk7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGFycmF5IGVsZW1lbnQsIGZpbmQgYSBtYXRjaGluZyBmaWx0ZXIuXG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldEFycmF5U2VnbWVudChlKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdCAmJiAhdGhpcy5ybih0KSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKGUpO1xuICAgICAgICBsZXQgciA9IG5ldyBTZXQsIGkgPSAwLCBzID0gMDtcbiAgICAgICAgLy8gUHJvY2VzcyBhbGwgZXF1YWxpdGllcyBmaXJzdC4gRXF1YWxpdGllcyBjYW4gYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgICAgZm9yICg7aSA8IG4ubGVuZ3RoICYmIHRoaXMucm4obltpXSk7ICsraSkgciA9IHIuYWRkKG5baV0uZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBoYXZlIHByb2Nlc3NlZCBhbGwgc2VnbWVudHMsIGFsbCBzZWdtZW50cyBhcmUgdXNlZCB0byBzZXJ2ZVxuICAgICAgICAvLyB0aGUgZXF1YWxpdHkgZmlsdGVycyBhbmQgd2UgZG8gbm90IG5lZWQgdG8gbWFwIGFueSBzZWdtZW50cyB0byB0aGVcbiAgICAgICAgLy8gdGFyZ2V0J3MgaW5lcXVhbGl0eSBhbmQgb3JkZXJCeSBjbGF1c2VzLlxuICAgICAgICAgICAgICAgIGlmIChpID09PSBuLmxlbmd0aCkgcmV0dXJuICEwO1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLnRuKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBpbmVxdWFsaXR5IGZpbHRlciBhbmQgdGhlIGZpZWxkIHdhcyBub3QgaW4gb25lIG9mIHRoZVxuICAgICAgICAgICAgLy8gZXF1YWxpdHkgZmlsdGVycyBhYm92ZSwgdGhlIG5leHQgc2VnbWVudCBtdXN0IG1hdGNoIGJvdGggdGhlIGZpbHRlclxuICAgICAgICAgICAgLy8gYW5kIHRoZSBmaXJzdCBvcmRlckJ5IGNsYXVzZS5cbiAgICAgICAgICAgIGlmICghci5oYXModGhpcy50bi5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbltpXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc24odGhpcy50biwgZSkgfHwgIXRoaXMub24odGhpcy5YdFtzKytdLCBlKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsbCByZW1haW5pbmcgc2VnbWVudHMgbmVlZCB0byByZXByZXNlbnQgdGhlIHByZWZpeCBvZiB0aGUgdGFyZ2V0J3NcbiAgICAgICAgLy8gb3JkZXJCeS5cbiAgICAgICAgICAgICAgICBmb3IgKDtpIDwgbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5baV07XG4gICAgICAgICAgICBpZiAocyA+PSB0aGlzLlh0Lmxlbmd0aCB8fCAhdGhpcy5vbih0aGlzLlh0W3MrK10sIGUpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIGZ1bGwgbWF0Y2hlZCBmaWVsZCBpbmRleCBmb3IgdGhpcyB0YXJnZXQuICovICAgIF9uKCkge1xuICAgICAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBvbmx5IG9uZSBzZWdtZW50IGNyZWF0ZWQgZm9yIG9uZSBmaWVsZC4gRm9yIGV4YW1wbGUsXG4gICAgICAgIC8vIGluIGNhc2UgbGlrZSBhID09IDMgYW5kIGEgPiAyLCBJbmRleCB7YSBBU0NFTkRJTkd9IHdpbGwgb25seSBiZSBjcmVhdGVkXG4gICAgICAgIC8vIG9uY2UuXG4gICAgICAgIGxldCBlID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGgkMS5jb21wYXJhdG9yKTtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5lbikge1xuICAgICAgICAgICAgaWYgKG4uZmllbGQuaXNLZXlGaWVsZCgpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IG4ub3AgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IG4ub3ApIHQucHVzaChuZXcgSW5kZXhTZWdtZW50KG4uZmllbGQsIDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovKSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlLmhhcyhuLmZpZWxkKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgZSA9IGUuYWRkKG4uZmllbGQpLCB0LnB1c2gobmV3IEluZGV4U2VnbWVudChuLmZpZWxkLCAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBOb3RlOiBXZSBkbyBub3QgZXhwbGljaXRseSBjaGVjayBgdGhpcy5pbmVxdWFsaXR5RmlsdGVyYCBidXQgcmF0aGVyIHJlbHlcbiAgICAgICAgLy8gb24gdGhlIHRhcmdldCBkZWZpbmluZyBhbiBhcHByb3ByaWF0ZSBcIm9yZGVyIGJ5XCIgdG8gZW5zdXJlIHRoYXQgdGhlXG4gICAgICAgIC8vIHJlcXVpcmVkIGluZGV4IHNlZ21lbnQgaXMgYWRkZWQuIFRoZSBxdWVyeSBlbmdpbmUgd291bGQgcmVqZWN0IGEgcXVlcnlcbiAgICAgICAgLy8gd2l0aCBhbiBpbmVxdWFsaXR5IGZpbHRlciB0aGF0IGxhY2tzIHRoZSByZXF1aXJlZCBvcmRlci1ieSBjbGF1c2UuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMuWHQpIFxuICAgICAgICAvLyBTdG9wIGFkZGluZyBtb3JlIHNlZ21lbnRzIGlmIHdlIHNlZSBhIG9yZGVyLWJ5IG9uIGtleS4gVHlwaWNhbGx5IHRoaXNcbiAgICAgICAgLy8gaXMgdGhlIGRlZmF1bHQgaW1wbGljaXQgb3JkZXItYnkgd2hpY2ggaXMgY292ZXJlZCBpbiB0aGUgaW5kZXhfZW50cnlcbiAgICAgICAgLy8gdGFibGUgYXMgYSBzZXBhcmF0ZSBjb2x1bW4uIElmIGl0IGlzIG5vdCB0aGUgZGVmYXVsdCBvcmRlci1ieSwgdGhlXG4gICAgICAgIC8vIGdlbmVyYXRlZCBpbmRleCB3aWxsIGJlIG1pc3Npbmcgc29tZSBzZWdtZW50cyBvcHRpbWl6ZWQgZm9yIG9yZGVyLWJ5cyxcbiAgICAgICAgLy8gd2hpY2ggaXMgcHJvYmFibHkgZmluZS5cbiAgICAgICAgbi5maWVsZC5pc0tleUZpZWxkKCkgfHwgZS5oYXMobi5maWVsZCkgfHwgKGUgPSBlLmFkZChuLmZpZWxkKSwgdC5wdXNoKG5ldyBJbmRleFNlZ21lbnQobi5maWVsZCwgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovID09PSBuLmRpciA/IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA6IDEgLyogSW5kZXhLaW5kLkRFU0NFTkRJTkcgKi8pKSk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRJbmRleChGaWVsZEluZGV4LlVOS05PV05fSUQsIHRoaXMuY29sbGVjdGlvbklkLCB0LCBJbmRleFN0YXRlLmVtcHR5KCkpO1xuICAgIH1cbiAgICBybihlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmVuKSBpZiAodGhpcy5zbih0LCBlKSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHNuKGUsIHQpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSB8fCAhZS5maWVsZC5pc0VxdWFsKHQuZmllbGRQYXRoKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBlLm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBlLm9wO1xuICAgICAgICByZXR1cm4gMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8gPT09IHQua2luZCA9PT0gbjtcbiAgICB9XG4gICAgb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gISFlLmZpZWxkLmlzRXF1YWwodC5maWVsZFBhdGgpICYmICgwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IHQua2luZCAmJiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gPT09IGUuZGlyIHx8IDEgLyogSW5kZXhLaW5kLkRFU0NFTkRJTkcgKi8gPT09IHQua2luZCAmJiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA9PT0gZS5kaXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgdXRpbGl0eSBmdW5jdGlvbnMgdGhhdCBoZWxwIHdpdGggYm9vbGVhbiBsb2dpYyB0cmFuc2Zvcm1hdGlvbnMgbmVlZGVkIGZvciBoYW5kbGluZ1xuICogY29tcGxleCBmaWx0ZXJzIHVzZWQgaW4gcXVlcmllcy5cbiAqL1xuLyoqXG4gKiBUaGUgYGluYCBmaWx0ZXIgaXMgb25seSBhIHN5bnRhY3RpYyBzdWdhciBvdmVyIGEgZGlzanVuY3Rpb24gb2YgZXF1YWxpdGllcy4gRm9yIGluc3RhbmNlOiBgYSBpblxuICogWzEsMiwzXWAgaXMgaW4gZmFjdCBgYT09MSB8fCBhPT0yIHx8IGE9PTNgLiBUaGlzIG1ldGhvZCBleHBhbmRzIGFueSBgaW5gIGZpbHRlciBpbiB0aGUgZ2l2ZW5cbiAqIGlucHV0IGludG8gYSBkaXNqdW5jdGlvbiBvZiBlcXVhbGl0eSBmaWx0ZXJzIGFuZCByZXR1cm5zIHRoZSBleHBhbmRlZCBmaWx0ZXIuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXB1dGVJbkV4cGFuc2lvbihlKSB7XG4gICAgdmFyIHQsIG47XG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgX19QUklWQVRFX0luRmlsdGVyKSB7XG4gICAgICAgICAgICBjb25zdCByID0gKG51bGwgPT09IChuID0gbnVsbCA9PT0gKHQgPSBlLnZhbHVlLmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQudmFsdWVzKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLm1hcCgodCA9PiBGaWVsZEZpbHRlci5jcmVhdGUoZS5maWVsZCwgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovICwgdCkpKSkgfHwgW107XG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShyLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIGhhdmUgcmVhY2hlZCBvdGhlciBraW5kcyBvZiBmaWVsZCBmaWx0ZXJzLlxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLy8gV2UgaGF2ZSBhIGNvbXBvc2l0ZSBmaWx0ZXIuXG4gICAgICAgIGNvbnN0IHIgPSBlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jb21wdXRlSW5FeHBhbnNpb24oZSkpKTtcbiAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShyLCBlLm9wKTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhIGNvbXBvc2l0ZSBmaWx0ZXIsIHJldHVybnMgdGhlIGxpc3Qgb2YgdGVybXMgaW4gaXRzIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtLlxuICpcbiAqIDxwPkVhY2ggZWxlbWVudCBpbiB0aGUgcmV0dXJuIHZhbHVlIGlzIG9uZSB0ZXJtIG9mIHRoZSByZXN1bHRpbmcgRE5GLiBGb3IgaW5zdGFuY2U6IEZvciB0aGVcbiAqIGlucHV0OiAoQSB8fCBCKSAmJiBDLCB0aGUgRE5GIGZvcm0gaXM6IChBICYmIEMpIHx8IChCICYmIEMpLCBhbmQgdGhlIHJldHVybiB2YWx1ZSBpcyBhIGxpc3RcbiAqIHdpdGggdHdvIGVsZW1lbnRzOiBhIGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdCBwZXJmb3JtcyAoQSAmJiBDKSwgYW5kIGEgY29tcG9zaXRlIGZpbHRlciB0aGF0XG4gKiBwZXJmb3JtcyAoQiAmJiBDKS5cbiAqXG4gKiBAcGFyYW0gZmlsdGVyIHRoZSBjb21wb3NpdGUgZmlsdGVyIHRvIGNhbGN1bGF0ZSBETkYgdHJhbnNmb3JtIGZvci5cbiAqIEByZXR1cm4gdGhlIHRlcm1zIGluIHRoZSBETkYgdHJhbnNmb3JtLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXREbmZUZXJtcyhlKSB7XG4gICAgaWYgKDAgPT09IGUuZ2V0RmlsdGVycygpLmxlbmd0aCkgcmV0dXJuIFtdO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY29tcHV0ZURpc3RyaWJ1dGVkTm9ybWFsRm9ybShfX1BSSVZBVEVfY29tcHV0ZUluRXhwYW5zaW9uKGUpKTtcbiAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoX19QUklWQVRFX2lzRGlzanVuY3RpdmVOb3JtYWxGb3JtKHQpKSwgX19QUklWQVRFX2lzU2luZ2xlRmllbGRGaWx0ZXIodCkgfHwgX19QUklWQVRFX2lzRmxhdENvbmp1bmN0aW9uKHQpID8gWyB0IF0gOiB0LmdldEZpbHRlcnMoKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZmlsdGVyIGlzIGEgc2luZ2xlIGZpZWxkIGZpbHRlci4gZS5nLiAoYSA9PSAxMCkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc1NpbmdsZUZpZWxkRmlsdGVyKGUpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZmlsdGVyIGlzIHRoZSBjb25qdW5jdGlvbiBvZiBvbmUgb3IgbW9yZSBmaWVsZCBmaWx0ZXJzLiBlLmcuIChhID09IDEwXG4gKiAmJiBiID09IDIwKVxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0ZsYXRDb25qdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdENvbmp1bmN0aW9uKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGdpdmVuIGZpbHRlciBpcyBpbiBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKS5cbiAqXG4gKiA8cD5JbiBib29sZWFuIGxvZ2ljLCBhIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpIGlzIGEgY2Fub25pY2FsIG5vcm1hbCBmb3JtIG9mIGEgbG9naWNhbFxuICogZm9ybXVsYSBjb25zaXN0aW5nIG9mIGEgZGlzanVuY3Rpb24gb2YgY29uanVuY3Rpb25zOyBpdCBjYW4gYWxzbyBiZSBkZXNjcmliZWQgYXMgYW4gT1Igb2YgQU5Ecy5cbiAqXG4gKiA8cD5Gb3IgbW9yZSBpbmZvLCB2aXNpdDogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGlzanVuY3RpdmVfbm9ybWFsX2Zvcm1cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEaXNqdW5jdGl2ZU5vcm1hbEZvcm0oZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfaXNTaW5nbGVGaWVsZEZpbHRlcihlKSB8fCBfX1BSSVZBVEVfaXNGbGF0Q29uanVuY3Rpb24oZSkgfHwgXG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyB0aGUgZGlzanVuY3Rpb24gb2Ygb25lIG9yIG1vcmUgXCJmbGF0IGNvbmp1bmN0aW9uc1wiIGFuZFxuICogZmllbGQgZmlsdGVycy4gZS5nLiAoYSA9PSAxMCkgfHwgKGI9PTIwICYmIGM9PTMwKVxuICovXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2lzRGlzanVuY3Rpb25PZkZpZWxkRmlsdGVyc0FuZEZsYXRDb25qdW5jdGlvbnMoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNEaXNqdW5jdGlvbihlKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZ2V0RmlsdGVycygpKSBpZiAoIV9fUFJJVkFURV9pc1NpbmdsZUZpZWxkRmlsdGVyKHQpICYmICFfX1BSSVZBVEVfaXNGbGF0Q29uanVuY3Rpb24odCkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfShlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXB1dGVEaXN0cmlidXRlZE5vcm1hbEZvcm0oZSkge1xuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgfHwgZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciksIFxuICAgIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikgcmV0dXJuIGU7XG4gICAgaWYgKDEgPT09IGUuZmlsdGVycy5sZW5ndGgpIHJldHVybiBfX1BSSVZBVEVfY29tcHV0ZURpc3RyaWJ1dGVkTm9ybWFsRm9ybShlLmZpbHRlcnNbMF0pO1xuICAgIC8vIENvbXB1dGUgRE5GIGZvciBlYWNoIG9mIHRoZSBzdWJmaWx0ZXJzIGZpcnN0XG4gICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jb21wdXRlRGlzdHJpYnV0ZWROb3JtYWxGb3JtKGUpKSk7XG4gICAgbGV0IG4gPSBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKHQsIGUub3ApO1xuICAgIHJldHVybiBuID0gX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24obiksIF9fUFJJVkFURV9pc0Rpc2p1bmN0aXZlTm9ybWFsRm9ybShuKSA/IG4gOiAoX19QUklWQVRFX2hhcmRBc3NlcnQobiBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciksIFxuICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKG4pKSwgX19QUklWQVRFX2hhcmRBc3NlcnQobi5maWx0ZXJzLmxlbmd0aCA+IDEpLCBcbiAgICBuLmZpbHRlcnMucmVkdWNlKCgoZSwgdCkgPT4gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHQpKSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb24oZSwgdCkge1xuICAgIGxldCBuO1xuICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgfHwgZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciksIFxuICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KHQgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCB0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgLy8gRmllbGRGaWx0ZXIgRmllbGRGaWx0ZXJcbiAgICBuID0gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gdCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uRmllbGRGaWx0ZXJzKGUsIHQpIHtcbiAgICAgICAgLy8gQ29uanVuY3Rpb24gZGlzdHJpYnV0aW9uIGZvciB0d28gZmllbGQgZmlsdGVycyBpcyB0aGUgY29uanVuY3Rpb24gb2YgdGhlbS5cbiAgICAgICAgcmV0dXJuIENvbXBvc2l0ZUZpbHRlci5jcmVhdGUoWyBlLCB0IF0sIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKTtcbiAgICB9KGUsIHQpIDogX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uRmllbGRBbmRDb21wb3NpdGVGaWx0ZXJzKGUsIHQpIDogdCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uRmllbGRBbmRDb21wb3NpdGVGaWx0ZXJzKHQsIGUpIDogZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uQ29tcG9zaXRlRmlsdGVycyhlLCB0KSB7XG4gICAgICAgIC8vIFRoZXJlIGFyZSBmb3VyIGNhc2VzOlxuICAgICAgICAvLyAoQSAmIEIpICYgKEMgJiBEKSAtLT4gKEEgJiBCICYgQyAmIEQpXG4gICAgICAgIC8vIChBICYgQikgJiAoQyB8IEQpIC0tPiAoQSAmIEIgJiBDKSB8IChBICYgQiAmIEQpXG4gICAgICAgIC8vIChBIHwgQikgJiAoQyAmIEQpIC0tPiAoQyAmIEQgJiBBKSB8IChDICYgRCAmIEIpXG4gICAgICAgIC8vIChBIHwgQikgJiAoQyB8IEQpIC0tPiAoQSAmIEMpIHwgKEEgJiBEKSB8IChCICYgQykgfCAoQiAmIEQpXG4gICAgICAgIC8vIENhc2UgMSBpcyBhIG1lcmdlLlxuICAgICAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoZS5maWx0ZXJzLmxlbmd0aCA+IDAgJiYgdC5maWx0ZXJzLmxlbmd0aCA+IDApLCBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbihlKSAmJiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbih0KSkgcmV0dXJuIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJXaXRoQWRkZWRGaWx0ZXJzKGUsIHQuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgLy8gQ2FzZSAyLDMsNCBhbGwgaGF2ZSBhdCBsZWFzdCBvbmUgc2lkZSAobGhzIG9yIHJocykgdGhhdCBpcyBhIGRpc2p1bmN0aW9uLiBJbiBhbGwgdGhyZWUgY2FzZXNcbiAgICAgICAgLy8gd2Ugc2hvdWxkIHRha2UgZWFjaCBlbGVtZW50IG9mIHRoZSBkaXNqdW5jdGlvbiBhbmQgZGlzdHJpYnV0ZSBpdCBvdmVyIHRoZSBvdGhlciBzaWRlLCBhbmRcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBkaXNqdW5jdGlvbiBvZiB0aGUgZGlzdHJpYnV0aW9uIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Rpc2p1bmN0aW9uKGUpID8gZSA6IHQsIHIgPSBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNEaXNqdW5jdGlvbihlKSA/IHQgOiBlLCBpID0gbi5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb24oZSwgcikpKTtcbiAgICAgICAgcmV0dXJuIENvbXBvc2l0ZUZpbHRlci5jcmVhdGUoaSwgXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovKTtcbiAgICB9KGUsIHQpLCBfX1BSSVZBVEVfYXBwbHlBc3NvY2lhdGlvbihuKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uRmllbGRBbmRDb21wb3NpdGVGaWx0ZXJzKGUsIHQpIHtcbiAgICAvLyBUaGVyZSBhcmUgdHdvIGNhc2VzOlxuICAgIC8vIEEgJiAoQiAmIEMpIC0tPiAoQSAmIEIgJiBDKVxuICAgIC8vIEEgJiAoQiB8IEMpIC0tPiAoQSAmIEIpIHwgKEEgJiBDKVxuICAgIGlmIChfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbih0KSkgXG4gICAgLy8gQ2FzZSAxXG4gICAgcmV0dXJuIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJXaXRoQWRkZWRGaWx0ZXJzKHQsIGUuZ2V0RmlsdGVycygpKTtcbiAgICB7XG4gICAgICAgIC8vIENhc2UgMlxuICAgICAgICBjb25zdCBuID0gdC5maWx0ZXJzLm1hcCgodCA9PiBfX1BSSVZBVEVfYXBwbHlEaXN0cmlidXRpb24oZSwgdCkpKTtcbiAgICAgICAgcmV0dXJuIENvbXBvc2l0ZUZpbHRlci5jcmVhdGUobiwgXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGUgYXNzb2NpYXRpdml0eSBwcm9wZXJ0eSB0byB0aGUgZ2l2ZW4gZmlsdGVyIGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgZmlsdGVyLlxuICpcbiAqIDx1bD5cbiAqICAgPGxpPkEgfCAoQiB8IEMpID09IChBIHwgQikgfCBDID09IChBIHwgQiB8IEMpXG4gKiAgIDxsaT5BICYgKEIgJiBDKSA9PSAoQSAmIEIpICYgQyA9PSAoQSAmIEIgJiBDKVxuICogPC91bD5cbiAqXG4gKiA8cD5Gb3IgbW9yZSBpbmZvLCB2aXNpdDogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXNzb2NpYXRpdmVfcHJvcGVydHkjUHJvcG9zaXRpb25hbF9sb2dpY1xuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKGUpIHtcbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHJldHVybiBlO1xuICAgIGNvbnN0IHQgPSBlLmdldEZpbHRlcnMoKTtcbiAgICAvLyBJZiB0aGUgY29tcG9zaXRlIGZpbHRlciBvbmx5IGNvbnRhaW5zIDEgZmlsdGVyLCBhcHBseSBhc3NvY2lhdGl2aXR5IHRvIGl0LlxuICAgICAgICBpZiAoMSA9PT0gdC5sZW5ndGgpIHJldHVybiBfX1BSSVZBVEVfYXBwbHlBc3NvY2lhdGlvbih0WzBdKTtcbiAgICAvLyBBc3NvY2lhdGl2aXR5IGFwcGxpZWQgdG8gYSBmbGF0IGNvbXBvc2l0ZSBmaWx0ZXIgcmVzdWx0cyBpcyBpdHNlbGYuXG4gICAgICAgIGlmIChfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0KGUpKSByZXR1cm4gZTtcbiAgICAvLyBGaXJzdCBhcHBseSBhc3NvY2lhdGl2aXR5IHRvIGFsbCBzdWJmaWx0ZXJzLiBUaGlzIHdpbGwgaW4gdHVybiByZWN1cnNpdmVseSBhcHBseVxuICAgIC8vIGFzc29jaWF0aXZpdHkgdG8gYWxsIG5lc3RlZCBjb21wb3NpdGUgZmlsdGVycyBhbmQgZmllbGQgZmlsdGVycy5cbiAgICAgICAgY29uc3QgbiA9IHQubWFwKChlID0+IF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKGUpKSksIHIgPSBbXTtcbiAgICAvLyBGb3IgY29tcG9zaXRlIHN1YmZpbHRlcnMgdGhhdCBwZXJmb3JtIHRoZSBzYW1lIGtpbmQgb2YgbG9naWNhbCBvcGVyYXRpb24gYXMgYGNvbXBvc2l0ZUZpbHRlcmBcbiAgICAvLyB0YWtlIG91dCB0aGVpciBmaWx0ZXJzIGFuZCBhZGQgdGhlbSB0byBgY29tcG9zaXRlRmlsdGVyYC4gRm9yIGV4YW1wbGU6XG4gICAgLy8gY29tcG9zaXRlRmlsdGVyID0gKEEgfCAoQiB8IEMgfCBEKSlcbiAgICAvLyBjb21wb3NpdGVTdWJmaWx0ZXIgPSAoQiB8IEMgfCBEKVxuICAgIC8vIFJlc3VsdDogKEEgfCBCIHwgQyB8IEQpXG4gICAgLy8gTm90ZSB0aGF0IHRoZSBgY29tcG9zaXRlU3ViZmlsdGVyYCBoYXMgYmVlbiBlbGltaW5hdGVkLCBhbmQgaXRzIGZpbHRlcnMgKEIsIEMsIEQpIGhhdmUgYmVlblxuICAgIC8vIGFkZGVkIHRvIHRoZSB0b3AtbGV2ZWwgXCJjb21wb3NpdGVGaWx0ZXJcIi5cbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IHIucHVzaCh0KSA6IHQgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgJiYgKHQub3AgPT09IGUub3AgPyBcbiAgICAgICAgLy8gY29tcG9zaXRlRmlsdGVyOiAoQSB8IChCIHwgQykpXG4gICAgICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlcjogKEIgfCBDKVxuICAgICAgICAvLyBSZXN1bHQ6IChBIHwgQiB8IEMpXG4gICAgICAgIHIucHVzaCguLi50LmZpbHRlcnMpIDogXG4gICAgICAgIC8vIGNvbXBvc2l0ZUZpbHRlcjogKEEgfCAoQiAmIEMpKVxuICAgICAgICAvLyBjb21wb3NpdGVTdWJmaWx0ZXI6IChCICYgQylcbiAgICAgICAgLy8gUmVzdWx0OiAoQSB8IChCICYgQykpXG4gICAgICAgIHIucHVzaCh0KSk7XG4gICAgfSkpLCAxID09PSByLmxlbmd0aCA/IHJbMF0gOiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKHIsIGUub3ApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlJbmRleE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFuID0gbmV3IF9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXg7XG4gICAgfVxuICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW4uYWRkKHQpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyhlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmFuLmdldEVudHJpZXModCkpO1xuICAgIH1cbiAgICBhZGRGaWVsZEluZGV4KGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGRlbGV0ZUZpZWxkSW5kZXgoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZGVsZXRlQWxsRmllbGRJbmRleGVzKGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGNyZWF0ZVRhcmdldEluZGV4ZXMoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGdldEluZGV4VHlwZShlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgwIC8qIEluZGV4VHlwZS5OT05FICovKTtcbiAgICB9XG4gICAgZ2V0RmllbGRJbmRleGVzKGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgICB9XG4gICAgZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoSW5kZXhPZmZzZXQubWluKCkpO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXRGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKEluZGV4T2Zmc2V0Lm1pbigpKTtcbiAgICB9XG4gICAgdXBkYXRlQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZUluZGV4RW50cmllcyhlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZXhwb3NlZCBieSBNZW1vcnlJbmRleE1hbmFnZXIuXG4gKiBBbHNvIHVzZWQgZm9yIGluLW1lbW9yeSBjYWNoaW5nIGJ5IEluZGV4ZWREYkluZGV4TWFuYWdlciBhbmQgaW5pdGlhbCBpbmRleCBwb3B1bGF0aW9uXG4gKiBpbiBpbmRleGVkZGJfc2NoZW1hLnRzXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSB7fTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBmYWxzZSBpZiB0aGUgZW50cnkgYWxyZWFkeSBleGlzdGVkLlxuICAgIGFkZChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmxhc3RTZWdtZW50KCksIG4gPSBlLnBvcExhc3QoKSwgciA9IHRoaXMuaW5kZXhbdF0gfHwgbmV3IFNvcnRlZFNldChSZXNvdXJjZVBhdGguY29tcGFyYXRvciksIGkgPSAhci5oYXMobik7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4W3RdID0gci5hZGQobiksIGk7XG4gICAgfVxuICAgIGhhcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmxhc3RTZWdtZW50KCksIG4gPSBlLnBvcExhc3QoKSwgciA9IHRoaXMuaW5kZXhbdF07XG4gICAgICAgIHJldHVybiByICYmIHIuaGFzKG4pO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKGUpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmluZGV4W2VdIHx8IG5ldyBTb3J0ZWRTZXQoUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IpKS50b0FycmF5KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBkZSA9IG5ldyBVaW50OEFycmF5KDApO1xuXG4vKipcbiAqIEEgcGVyc2lzdGVkIGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFVubGlrZSBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXZWIgU0RLIGRvZXMgbm90IG1lbW9pemUgaW5kZXhcbiAqIGRhdGEgYXMgaXQgc3VwcG9ydHMgbXVsdGktdGFiIGFjY2Vzcy5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYkluZGV4TWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnVzZXIgPSBlLCB0aGlzLmRhdGFiYXNlSWQgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGluLW1lbW9yeSBjb3B5IG9mIHRoZSBpbmRleCBlbnRyaWVzIHdlJ3ZlIGFscmVhZHkgd3JpdHRlbiBzaW5jZSB0aGUgU0RLXG4gICAgICAgICAqIGxhdW5jaGVkLiBVc2VkIHRvIGF2b2lkIHJlLXdyaXRpbmcgdGhlIHNhbWUgZW50cnkgcmVwZWF0ZWRseS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyAqTk9UKiBhIGNvbXBsZXRlIGNhY2hlIG9mIHdoYXQncyBpbiBwZXJzaXN0ZW5jZSBhbmQgc28gY2FuIG5ldmVyIGJlXG4gICAgICAgICAqIHVzZWQgdG8gc2F0aXNmeSByZWFkcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudW4gPSBuZXcgX19QUklWQVRFX01lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGZyb20gYSB0YXJnZXQgdG8gaXRzIGVxdWl2YWxlbnQgbGlzdCBvZiBzdWItdGFyZ2V0cy4gRWFjaCBzdWItdGFyZ2V0XG4gICAgICAgICAqIGNvbnRhaW5zIG9ubHkgb25lIHRlcm0gZnJvbSB0aGUgdGFyZ2V0J3MgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNuID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQoZSkpLCAoKGUsIHQpID0+IF9fUFJJVkFURV90YXJnZXRFcXVhbHMoZSwgdCkpKSwgXG4gICAgICAgIHRoaXMudWlkID0gZS51aWQgfHwgXCJcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBlbnRyeSB0byB0aGUgY29sbGVjdGlvbiBwYXJlbnQgaW5kZXguXG4gICAgICpcbiAgICAgKiBSZXBlYXRlZCBjYWxscyBmb3IgdGhlIHNhbWUgY29sbGVjdGlvblBhdGggc2hvdWxkIGJlIGF2b2lkZWQgd2l0aGluIGFcbiAgICAgKiB0cmFuc2FjdGlvbiBhcyBJbmRleGVkRGJJbmRleE1hbmFnZXIgb25seSBjYWNoZXMgd3JpdGVzIG9uY2UgYSB0cmFuc2FjdGlvblxuICAgICAqIGhhcyBiZWVuIGNvbW1pdHRlZC5cbiAgICAgKi8gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgdCkge1xuICAgICAgICBpZiAoIXRoaXMudW4uaGFzKHQpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5sYXN0U2VnbWVudCgpLCByID0gdC5wb3BMYXN0KCk7XG4gICAgICAgICAgICBlLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGNvbGxlY3Rpb24gdG8gdGhlIGluIG1lbW9yeSBjYWNoZSBvbmx5IGlmIHRoZSB0cmFuc2FjdGlvbiB3YXNcbiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzZnVsbHkgY29tbWl0dGVkLlxuICAgICAgICAgICAgICAgIHRoaXMudW4uYWRkKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IG4sXG4gICAgICAgICAgICAgICAgcGFyZW50OiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHIpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb2xsZWN0aW9uUGFyZW50c1N0b3JlKGUpLnB1dChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gW10sIHIgPSBJREJLZXlSYW5nZS5ib3VuZChbIHQsIFwiXCIgXSwgWyBfX1BSSVZBVEVfaW1tZWRpYXRlU3VjY2Vzc29yKHQpLCBcIlwiIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb2xsZWN0aW9uUGFyZW50c1N0b3JlKGUpLkcocikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29sbGVjdGlvbklkIGd1YXJkIHNob3VsZG4ndCBiZSBuZWNlc3NhcnkgKGFuZCBpc24ndCBhcyBsb25nXG4gICAgICAgICAgICAgICAgLy8gYXMgd2UncmUgcnVubmluZyBpbiBhIHJlYWwgYnJvd3NlciksIGJ1dCB0aGVyZSdzIGEgYnVnIGluXG4gICAgICAgICAgICAgICAgLy8gaW5kZXhlZGRic2hpbSB0aGF0IGJyZWFrcyBvdXIgcmFuZ2UgaW4gb3VyIHRlc3RzIHJ1bm5pbmcgaW4gbm9kZTpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0vaXNzdWVzLzMzNFxuICAgICAgICAgICAgICAgIGlmIChyLmNvbGxlY3Rpb25JZCAhPT0gdCkgYnJlYWs7XG4gICAgICAgICAgICAgICAgbi5wdXNoKF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoci5wYXJlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgoZSwgdCkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTogVmVyaWZ5IHRoYXQgdGhlIGF1dG8taW5jcmVtZW50aW5nIGluZGV4IElEIHdvcmtzIGluXG4gICAgICAgIC8vIFNhZmFyaSAmIEZpcmVmb3guXG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIHIgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYkluZGV4Q29uZmlndXJhdGlvbihlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGluZGV4SWQ6IGUuaW5kZXhJZCxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IGUuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICAgICAgICAgIGZpZWxkczogZS5maWVsZHMubWFwKChlID0+IFsgZS5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIGUua2luZCBdKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCk7XG4gICAgICAgIGRlbGV0ZSByLmluZGV4SWQ7XG4gICAgICAgIC8vIGBpbmRleElkYCBpcyBhdXRvLXBvcHVsYXRlZCBieSBJbmRleGVkRGJcbiAgICAgICAgY29uc3QgaSA9IG4uYWRkKHIpO1xuICAgICAgICBpZiAodC5pbmRleFN0YXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKTtcbiAgICAgICAgICAgIHJldHVybiBpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIG4ucHV0KF9fUFJJVkFURV90b0RiSW5kZXhTdGF0ZShlLCB0aGlzLnVzZXIsIHQuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlciwgdC5pbmRleFN0YXRlLm9mZnNldCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpLm5leHQoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIHIgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpLCBpID0gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUodC5pbmRleElkKS5uZXh0KCgoKSA9PiByLmRlbGV0ZShJREJLZXlSYW5nZS5ib3VuZChbIHQuaW5kZXhJZCBdLCBbIHQuaW5kZXhJZCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApKSkpLm5leHQoKCgpID0+IGkuZGVsZXRlKElEQktleVJhbmdlLmJvdW5kKFsgdC5pbmRleElkIF0sIFsgdC5pbmRleElkICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCkpKSk7XG4gICAgfVxuICAgIGRlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIG4gPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSksIHIgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5KKCkubmV4dCgoKCkgPT4gbi5KKCkpKS5uZXh0KCgoKSA9PiByLkooKSkpO1xuICAgIH1cbiAgICBjcmVhdGVUYXJnZXRJbmRleGVzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMubG4odCksICh0ID0+IHRoaXMuZ2V0SW5kZXhUeXBlKGUsIHQpLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgaWYgKDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gPT09IG4gfHwgMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLyA9PT0gbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX1RhcmdldEluZGV4TWF0Y2hlcih0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRGaWVsZEluZGV4KGUsIG4uX24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSk7XG4gICAgICAgIGxldCByID0gITA7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5sbih0KSwgKHQgPT4gdGhpcy5obihlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIHIgJiYgKHIgPSAhIWUpLCBpLnNldCh0LCBlKTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goaSwgKChpLCBzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYkluZGV4TWFuYWdlclwiLCBgVXNpbmcgaW5kZXggJHtmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleFRvU3RyaW5nKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgaWQ9JHtlLmluZGV4SWR9fGNnPSR7ZS5jb2xsZWN0aW9uR3JvdXB9fGY9JHtlLmZpZWxkcy5tYXAoKGUgPT4gYCR7ZS5maWVsZFBhdGh9OiR7ZS5raW5kfWApKS5qb2luKFwiLFwiKX1gO1xuICAgICAgICAgICAgICAgICAgICB9KGkpfSB0byBleGVjdXRlICR7X19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KHQpfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldEFycmF5VmFsdWVzKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldEFycmF5U2VnbWVudCh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIG4uZmllbGRQYXRoKSkgc3dpdGNoICh0Lm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnZhbHVlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyB0LnZhbHVlIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtYWluaW5nIGZpbHRlcnMgYXJlIG5vdCBhcnJheSBmaWx0ZXJzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluICE9IG9yIE5PVF9JTiBmaWx0ZXJzLiBSZXR1cm5zXG4gKiBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqLyAocywgaSksIF8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0Tm90SW5WYWx1ZXMoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKHQpKSBmb3IgKGNvbnN0IHQgb2YgX19QUklWQVRFX3RhcmdldEdldEZpZWxkRmlsdGVyc0ZvclBhdGgoZSwgci5maWVsZFBhdGgpKSBzd2l0Y2ggKHQub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5jb2RlIGVxdWFsaXR5IHByZWZpeCwgd2hpY2ggaXMgZW5jb2RlZCBpbiB0aGUgaW5kZXggdmFsdWUgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGluZXF1YWxpdHkgKGUuZy4gYGEgPT0gJ2EnICYmIGIgIT0gJ2InYCBpcyBlbmNvZGVkIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYHZhbHVlICE9ICdhYidgKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnNldChyLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90SW4vTm90RXF1YWwgaXMgYWx3YXlzIGEgc3VmZml4LiBUaGVyZSBjYW5ub3QgYmUgYW55IHJlbWFpbmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlZ21lbnRzIGFuZCBoZW5jZSB3ZSBjYW4gcmV0dXJuIGVhcmx5IGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc2V0KHIuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCB0LnZhbHVlKSwgQXJyYXkuZnJvbShuLnZhbHVlcygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyBub3RJbiBib3VuZHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBsb3dlciBib3VuZCBvZiBmaWVsZCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHN0YXJ0aW5nIHBvaW50IHRvXG4gKiBzY2FuIHRoZSBpbmRleCBkZWZpbmVkIGJ5IGBmaWVsZEluZGV4YC4gUmV0dXJucyBgTUlOX1ZBTFVFYCBpZiBubyBsb3dlciBib3VuZFxuICogZXhpc3RzLlxuICovIChzLCBpKSwgYSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRMb3dlckJvdW5kKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBzZWdtZW50LCByZXRyaWV2ZSBhIGxvd2VyIGJvdW5kIGlmIHRoZXJlIGlzIGEgc3VpdGFibGUgZmlsdGVyIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydEF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IGkua2luZCA/IF9fUFJJVkFURV90YXJnZXRHZXRBc2NlbmRpbmdCb3VuZChlLCBpLmZpZWxkUGF0aCwgZS5zdGFydEF0KSA6IF9fUFJJVkFURV90YXJnZXRHZXREZXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuc3RhcnRBdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQudmFsdWUpLCByICYmIChyID0gdC5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChuLCByKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYW4gdXBwZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gZW5kaW5nIHBvaW50XG4gKiB3aGVuIHNjYW5uaW5nIHRoZSBpbmRleCBkZWZpbmVkIGJ5IGBmaWVsZEluZGV4YC4gUmV0dXJucyBgTUFYX1ZBTFVFYCBpZiBub1xuICogdXBwZXIgYm91bmQgZXhpc3RzLlxuICovIChzLCBpKSwgdSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRVcHBlckJvdW5kKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBzZWdtZW50LCByZXRyaWV2ZSBhbiB1cHBlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5kQXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gaS5raW5kID8gX19QUklWQVRFX3RhcmdldEdldERlc2NlbmRpbmdCb3VuZChlLCBpLmZpZWxkUGF0aCwgZS5lbmRBdCkgOiBfX1BSSVZBVEVfdGFyZ2V0R2V0QXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuZW5kQXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCh0LnZhbHVlKSwgciAmJiAociA9IHQuaW5jbHVzaXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmQobiwgcik7XG4gICAgICAgICAgICAgICAgICAgIH0ocywgaSksIGMgPSB0aGlzLlBuKGksIHMsIGEpLCBsID0gdGhpcy5QbihpLCBzLCB1KSwgaCA9IHRoaXMuSW4oaSwgcywgXyksIFAgPSB0aGlzLmRuKGkuaW5kZXhJZCwgbywgYywgYS5pbmNsdXNpdmUsIGwsIHUuaW5jbHVzaXZlLCBoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKFAsIChpID0+IG4uSChpLCB0LmxpbWl0KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyh0LmRvY3VtZW50S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmhhcyhuKSB8fCAoZSA9IGUuYWRkKG4pLCByLnB1c2gobikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxuKGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNuLmdldChlKTtcbiAgICAgICAgaWYgKHQpIHJldHVybiB0O1xuICAgICAgICBpZiAoMCA9PT0gZS5maWx0ZXJzLmxlbmd0aCkgdCA9IFsgZSBdOyBlbHNlIHtcbiAgICAgICAgICAgIHQgPSBfX1BSSVZBVEVfZ2V0RG5mVGVybXMoQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShlLmZpbHRlcnMsIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKSkubWFwKCh0ID0+IF9fUFJJVkFURV9uZXdUYXJnZXQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5vcmRlckJ5LCB0LmdldEZpbHRlcnMoKSwgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNuLnNldChlLCB0KSwgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIGtleSByYW5nZSBxdWVyeSBvbiBgRGJJbmRleEVudHJ5U3RvcmVgIHRoYXQgdW5pb25zIGFsbFxuICAgICAqIGJvdW5kcy5cbiAgICAgKi8gICAgZG4oZSwgdCwgbiwgciwgaSwgcywgbykge1xuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIHRvdGFsIGluZGV4IHNjYW5zIHdlIHVuaW9uIHRvZ2V0aGVyLiBUaGlzIGlzIHNpbWlsYXIgdG8gYVxuICAgICAgICAvLyBkaXN0cmlidXRlZCBub3JtYWwgZm9ybSwgYnV0IGFkYXB0ZWQgZm9yIGFycmF5IHZhbHVlcy4gV2UgY3JlYXRlIGEgc2luZ2xlXG4gICAgICAgIC8vIGluZGV4IHJhbmdlIHBlciB2YWx1ZSBpbiBhbiBBUlJBWV9DT05UQUlOUyBvciBBUlJBWV9DT05UQUlOU19BTlkgZmlsdGVyXG4gICAgICAgIC8vIGNvbWJpbmVkIHdpdGggdGhlIHZhbHVlcyBmcm9tIHRoZSBxdWVyeSBib3VuZHMuXG4gICAgICAgIGNvbnN0IF8gPSAobnVsbCAhPSB0ID8gdC5sZW5ndGggOiAxKSAqIE1hdGgubWF4KG4ubGVuZ3RoLCBpLmxlbmd0aCksIGEgPSBfIC8gKG51bGwgIT0gdCA/IHQubGVuZ3RoIDogMSksIHUgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBfOyArK2MpIHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSB0ID8gdGhpcy5Ubih0W2MgLyBhXSkgOiBkZSwgbCA9IHRoaXMuRW4oZSwgXywgbltjICUgYV0sIHIpLCBoID0gdGhpcy5BbihlLCBfLCBpW2MgJSBhXSwgcyksIFAgPSBvLm1hcCgodCA9PiB0aGlzLkVuKGUsIF8sIHQsIFxuICAgICAgICAgICAgLyogaW5jbHVzaXZlPSAqLyAhMCkpKTtcbiAgICAgICAgICAgIHUucHVzaCguLi50aGlzLmNyZWF0ZVJhbmdlKGwsIGgsIFApKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdTtcbiAgICB9XG4gICAgLyoqIEdlbmVyYXRlcyB0aGUgbG93ZXIgYm91bmQgZm9yIGBhcnJheVZhbHVlYCBhbmQgYGRpcmVjdGlvbmFsVmFsdWVgLiAqLyAgICBFbihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0luZGV4RW50cnkoZSwgRG9jdW1lbnRLZXkuZW1wdHkoKSwgdCwgbik7XG4gICAgICAgIHJldHVybiByID8gaSA6IGkuWnQoKTtcbiAgICB9XG4gICAgLyoqIEdlbmVyYXRlcyB0aGUgdXBwZXIgYm91bmQgZm9yIGBhcnJheVZhbHVlYCBhbmQgYGRpcmVjdGlvbmFsVmFsdWVgLiAqLyAgICBBbihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0luZGV4RW50cnkoZSwgRG9jdW1lbnRLZXkuZW1wdHkoKSwgdCwgbik7XG4gICAgICAgIHJldHVybiByID8gaS5adCgpIDogaTtcbiAgICB9XG4gICAgaG4oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9UYXJnZXRJbmRleE1hdGNoZXIodCksIHIgPSBudWxsICE9IHQuY29sbGVjdGlvbkdyb3VwID8gdC5jb2xsZWN0aW9uR3JvdXAgOiB0LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBpbmRleCB3aXRoIHRoZSBtb3N0IG51bWJlciBvZiBzZWdtZW50cy5cbiAgICAgICAgICAgIGxldCB0ID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiBlKSB7XG4gICAgICAgICAgICAgICAgbi5ubihyKSAmJiAoIXQgfHwgci5maWVsZHMubGVuZ3RoID4gdC5maWVsZHMubGVuZ3RoKSAmJiAodCA9IHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhUeXBlKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSAyIC8qIEluZGV4VHlwZS5GVUxMICovO1xuICAgICAgICBjb25zdCByID0gdGhpcy5sbih0KTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHIsICh0ID0+IHRoaXMuaG4oZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlID8gMCAvKiBJbmRleFR5cGUuTk9ORSAqLyAhPT0gbiAmJiBlLmZpZWxkcy5sZW5ndGggPCBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0U2VnbWVudENvdW50KGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoJDEuY29tcGFyYXRvciksIG4gPSAhMTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZS5maWx0ZXJzKSBmb3IgKGNvbnN0IGUgb2Ygci5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpIFxuICAgICAgICAgICAgICAgIC8vIF9fbmFtZV9fIGlzIG5vdCBhbiBleHBsaWNpdCBzZWdtZW50IG9mIGFueSBpbmRleCwgc28gd2UgZG9uJ3QgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNvdW50IGl0LlxuICAgICAgICAgICAgICAgIGUuZmllbGQuaXNLZXlGaWVsZCgpIHx8IChcbiAgICAgICAgICAgICAgICAvLyBBUlJBWV9DT05UQUlOUyBvciBBUlJBWV9DT05UQUlOU19BTlkgZmlsdGVycyBtdXN0IGJlIGNvdW50ZWQgc2VwYXJhdGVseS5cbiAgICAgICAgICAgICAgICAvLyBGb3IgaW5zdGFuY2UsIGl0IGlzIHBvc3NpYmxlIHRvIGhhdmUgYW4gaW5kZXggZm9yIFwiYSBBUlJBWSBhIEFTQ1wiLiBFdmVuXG4gICAgICAgICAgICAgICAgLy8gdGhvdWdoIHRoZXNlIGFyZSBvbiB0aGUgc2FtZSBmaWVsZCwgdGhleSBzaG91bGQgYmUgY291bnRlZCBhcyB0d29cbiAgICAgICAgICAgICAgICAvLyBzZXBhcmF0ZSBzZWdtZW50cyBpbiBhbiBpbmRleC5cbiAgICAgICAgICAgICAgICBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IGUub3AgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IGUub3AgPyBuID0gITAgOiB0ID0gdC5hZGQoZS5maWVsZCkpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlLm9yZGVyQnkpIFxuICAgICAgICAgICAgICAgIC8vIF9fbmFtZV9fIGlzIG5vdCBhbiBleHBsaWNpdCBzZWdtZW50IG9mIGFueSBpbmRleCwgc28gd2UgZG9uJ3QgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNvdW50IGl0LlxuICAgICAgICAgICAgICAgIG4uZmllbGQuaXNLZXlGaWVsZCgpIHx8ICh0ID0gdC5hZGQobi5maWVsZCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0LnNpemUgKyAobiA/IDEgOiAwKTtcbiAgICAgICAgICAgIH0odCkgJiYgKG4gPSAxIC8qIEluZGV4VHlwZS5QQVJUSUFMICovKSA6IG4gPSAwIC8qIEluZGV4VHlwZS5OT05FICovO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBcbiAgICAgICAgLy8gT1IgcXVlcmllcyBoYXZlIG1vcmUgdGhhbiBvbmUgc3ViLXRhcmdldCAob25lIHN1Yi10YXJnZXQgcGVyIERORiB0ZXJtKS4gV2UgY3VycmVudGx5IGNvbnNpZGVyXG4gICAgICAgIC8vIE9SIHF1ZXJpZXMgdGhhdCBoYXZlIGEgYGxpbWl0YCB0byBoYXZlIGEgcGFydGlhbCBpbmRleC4gRm9yIHN1Y2ggcXVlcmllcyB3ZSBwZXJmb3JtIHNvcnRpbmdcbiAgICAgICAgLy8gYW5kIGFwcGx5IHRoZSBsaW1pdCBpbiBtZW1vcnkgYXMgYSBwb3N0LXByb2Nlc3Npbmcgc3RlcC5cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEhhc0xpbWl0KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBlLmxpbWl0O1xuICAgICAgICB9KHQpICYmIHIubGVuZ3RoID4gMSAmJiAyIC8qIEluZGV4VHlwZS5GVUxMICovID09PSBuID8gMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLyA6IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYnl0ZSBlbmNvZGVkIGZvcm0gb2YgdGhlIGRpcmVjdGlvbmFsIHZhbHVlcyBpbiB0aGUgZmllbGQgaW5kZXguXG4gICAgICogUmV0dXJucyBgbnVsbGAgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGhhdmUgYWxsIGZpZWxkcyBzcGVjaWZpZWQgaW4gdGhlXG4gICAgICogaW5kZXguXG4gICAgICovICAgIFJuKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2RlcjtcbiAgICAgICAgZm9yIChjb25zdCByIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZChyLmZpZWxkUGF0aCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLll0KHIua2luZCk7XG4gICAgICAgICAgICBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlci5DdC5kdChlLCBpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbi56dCgpO1xuICAgIH1cbiAgICAvKiogRW5jb2RlcyBhIHNpbmdsZSB2YWx1ZSB0byB0aGUgYXNjZW5kaW5nIGluZGV4IGZvcm1hdC4gKi8gICAgVG4oZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuQ3QuZHQoZSwgdC5ZdCgwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8pKSwgXG4gICAgICAgIHQuenQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbmNvZGVkIGZvcm0gb2YgdGhlIGRvY3VtZW50IGtleSB0aGF0IHNvcnRzIGJhc2VkIG9uIHRoZSBrZXlcbiAgICAgKiBvcmRlcmluZyBvZiB0aGUgZmllbGQgaW5kZXguXG4gICAgICovICAgIFZuKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2RlcjtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLkN0LmR0KF9fUFJJVkFURV9yZWZWYWx1ZSh0aGlzLmRhdGFiYXNlSWQsIHQpLCBuLll0KGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEluZGV4R2V0S2V5T3JkZXIoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKTtcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0Lmxlbmd0aCA/IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA6IHRbdC5sZW5ndGggLSAxXS5raW5kO1xuICAgICAgICB9KGUpKSksIG4uenQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gZmllbGQgdmFsdWVzIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBpbiBgdGFyZ2V0YC5cbiAgICAgKiBGb3IgSU4gcXVlcmllcywgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgSW4oZSwgdCwgbikge1xuICAgICAgICBpZiAobnVsbCA9PT0gbikgcmV0dXJuIFtdO1xuICAgICAgICBsZXQgciA9IFtdO1xuICAgICAgICByLnB1c2gobmV3IF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbltpKytdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHIpIGlmICh0aGlzLm1uKHQsIHMuZmllbGRQYXRoKSAmJiBpc0FycmF5KGUpKSByID0gdGhpcy5mbihyLCBzLCBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uWXQocy5raW5kKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlci5DdC5kdChlLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nbihyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gYm91bmRzIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBpbiBgdGFyZ2V0YC4gRm9yIElOXG4gICAgICogcXVlcmllcywgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgUG4oZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5JbihlLCB0LCBuLnBvc2l0aW9uKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGJ5dGUgcmVwcmVzZW50YXRpb24gZm9yIHRoZSBwcm92aWRlZCBlbmNvZGVycy4gKi8gICAgZ24oZSkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7ICsrbikgdFtuXSA9IGVbbl0uenQoKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzZXBhcmF0ZSBlbmNvZGVyIGZvciBlYWNoIGVsZW1lbnQgb2YgYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBUaGUgbWV0aG9kIGFwcGVuZHMgZWFjaCB2YWx1ZSB0byBhbGwgZXhpc3RpbmcgZW5jb2RlcnMgKGUuZy4gZmlsdGVyKFwiYVwiLFxuICAgICAqIFwiPT1cIiwgXCJhMVwiKS5maWx0ZXIoXCJiXCIsIFwiaW5cIiwgW1wiYjFcIiwgXCJiMlwiXSkgYmVjb21lcyBbXCJhMSxiMVwiLCBcImExLGIyXCJdKS4gQVxuICAgICAqIGxpc3Qgb2YgbmV3IGVuY29kZXJzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBmbihlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBbIC4uLmUgXSwgaSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygbi5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkgZm9yIChjb25zdCBuIG9mIHIpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXI7XG4gICAgICAgICAgICByLnNlZWQobi56dCgpKSwgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuQ3QuZHQoZSwgci5ZdCh0LmtpbmQpKSwgaS5wdXNoKHIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBtbihlLCB0KSB7XG4gICAgICAgIHJldHVybiAhIWUuZmlsdGVycy5maW5kKChlID0+IGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciAmJiBlLmZpZWxkLmlzRXF1YWwodCkgJiYgKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gZS5vcCB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gZS5vcCkpKTtcbiAgICB9XG4gICAgZ2V0RmllbGRJbmRleGVzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSwgciA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiAodCA/IG4uRyhcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIElEQktleVJhbmdlLmJvdW5kKHQsIHQpKSA6IG4uRygpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChlLCAoZSA9PiByLmdldChbIGUuaW5kZXhJZCwgdGhpcy51aWQgXSkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgdC5wdXNoKGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJJbmRleENvbmZpZ3VyYXRpb24oZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdCA/IG5ldyBJbmRleFN0YXRlKHQuc2VxdWVuY2VOdW1iZXIsIG5ldyBJbmRleE9mZnNldChfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKHQucmVhZFRpbWUpLCBuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aCh0LmRvY3VtZW50S2V5KSksIHQubGFyZ2VzdEJhdGNoSWQpKSA6IEluZGV4U3RhdGUuZW1wdHkoKSwgciA9IGUuZmllbGRzLm1hcCgoKFtlLCB0XSkgPT4gbmV3IEluZGV4U2VnbWVudChGaWVsZFBhdGgkMS5mcm9tU2VydmVyRm9ybWF0KGUpLCB0KSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkSW5kZXgoZS5pbmRleElkLCBlLmNvbGxlY3Rpb25Hcm91cCwgciwgbik7XG4gICAgICAgICAgICAgICAgfShlLCBuKSk7XG4gICAgICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKGUpLm5leHQoKGUgPT4gMCA9PT0gZS5sZW5ndGggPyBudWxsIDogKGUuc29ydCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXIgLSB0LmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXI7XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNvbGxlY3Rpb25Hcm91cCwgdC5jb2xsZWN0aW9uR3JvdXApO1xuICAgICAgICB9KSksIGVbMF0uY29sbGVjdGlvbkdyb3VwKSkpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpLCBpID0gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucG4oZSkubmV4dCgoZSA9PiByLkcoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBJREJLZXlSYW5nZS5ib3VuZCh0LCB0KSkubmV4dCgodCA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiBpLnB1dChfX1BSSVZBVEVfdG9EYkluZGV4U3RhdGUodC5pbmRleElkLCB0aGlzLnVzZXIsIGUsIG4pKSkpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBgZ2V0RmllbGRJbmRleGVzKClgIG9uIFdlYiBkb2VzIG5vdCBjYWNoZSBpbmRleCBsb29rdXBzIGFzXG4gICAgICAgIC8vIGl0IGNvdWxkIGJlIHVzZWQgYWNyb3NzIGRpZmZlcmVudCBJbmRleGVkREIgdHJhbnNhY3Rpb25zLiBBcyBhbnkgY2FjaGVkXG4gICAgICAgIC8vIGRhdGEgbWlnaHQgYmUgaW52YWxpZGF0ZWQgYnkgb3RoZXIgbXVsdGktdGFiIGNsaWVudHMsIHdlIGNhbiBvbmx5IHRydXN0XG4gICAgICAgIC8vIGRhdGEgd2l0aGluIGEgc2luZ2xlIEluZGV4ZWREQiB0cmFuc2FjdGlvbi4gV2UgdGhlcmVmb3JlIGFkZCBhIGNhY2hlXG4gICAgICAgIC8vIGhlcmUuXG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKCh0LCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5nZXQodC5jb2xsZWN0aW9uR3JvdXApO1xuICAgICAgICAgICAgcmV0dXJuIChpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoaSkgOiB0aGlzLmdldEZpZWxkSW5kZXhlcyhlLCB0LmNvbGxlY3Rpb25Hcm91cCkpLm5leHQoKGkgPT4gKG4uc2V0KHQuY29sbGVjdGlvbkdyb3VwLCBpKSwgXG4gICAgICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChpLCAobiA9PiB0aGlzLnluKGUsIHQsIG4pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnduKHIsIG4pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0LmlzRXF1YWwoaSkgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpIDogdGhpcy5TbihlLCByLCBuLCB0LCBpKTtcbiAgICAgICAgICAgIH0pKSkpKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGJuKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKS5wdXQoe1xuICAgICAgICAgICAgaW5kZXhJZDogci5pbmRleElkLFxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IHIuYXJyYXlWYWx1ZSxcbiAgICAgICAgICAgIGRpcmVjdGlvbmFsVmFsdWU6IHIuZGlyZWN0aW9uYWxWYWx1ZSxcbiAgICAgICAgICAgIG9yZGVyZWREb2N1bWVudEtleTogdGhpcy5WbihuLCB0LmtleSksXG4gICAgICAgICAgICBkb2N1bWVudEtleTogdC5rZXkucGF0aC50b0FycmF5KClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIERuKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKS5kZWxldGUoWyByLmluZGV4SWQsIHRoaXMudWlkLCByLmFycmF5VmFsdWUsIHIuZGlyZWN0aW9uYWxWYWx1ZSwgdGhpcy5WbihuLCB0LmtleSksIHQua2V5LnBhdGgudG9BcnJheSgpIF0pO1xuICAgIH1cbiAgICB5bihlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSk7XG4gICAgICAgIGxldCBpID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gci5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KFsgbi5pbmRleElkLCB0aGlzLnVpZCwgdGhpcy5WbihuLCB0KSBdKVxuICAgICAgICB9LCAoKGUsIHIpID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZChuZXcgX19QUklWQVRFX0luZGV4RW50cnkobi5pbmRleElkLCB0LCByLmFycmF5VmFsdWUsIHIuZGlyZWN0aW9uYWxWYWx1ZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyB0aGUgaW5kZXggZW50cmllcyBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyAgICB3bihlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IpO1xuICAgICAgICBjb25zdCByID0gdGhpcy5Sbih0LCBlKTtcbiAgICAgICAgaWYgKG51bGwgPT0gcikgcmV0dXJuIG47XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldEFycmF5U2VnbWVudCh0KTtcbiAgICAgICAgaWYgKG51bGwgIT0gaSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUuZGF0YS5maWVsZChpLmZpZWxkUGF0aCk7XG4gICAgICAgICAgICBpZiAoaXNBcnJheShzKSkgZm9yIChjb25zdCBpIG9mIHMuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pIG4gPSBuLmFkZChuZXcgX19QUklWQVRFX0luZGV4RW50cnkodC5pbmRleElkLCBlLmtleSwgdGhpcy5UbihpKSwgcikpO1xuICAgICAgICB9IGVsc2UgbiA9IG4uYWRkKG5ldyBfX1BSSVZBVEVfSW5kZXhFbnRyeSh0LmluZGV4SWQsIGUua2V5LCBkZSwgcikpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgaW5kZXggZW50cmllcyBmb3IgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGJ5IGRlbGV0aW5nIGVudHJpZXNcbiAgICAgKiB0aGF0IGFyZSBubyBsb25nZXIgcmVmZXJlbmNlZCBpbiBgbmV3RW50cmllc2AgYW5kIGFkZGluZyBhbGwgbmV3bHkgYWRkZWRcbiAgICAgKiBlbnRyaWVzLlxuICAgICAqLyAgICBTbihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYkluZGV4TWFuYWdlclwiLCBcIlVwZGF0aW5nIGluZGV4IGVudHJpZXMgZm9yIGRvY3VtZW50ICclcydcIiwgdC5rZXkpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZGlmZlNvcnRlZFNldHMoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUuZ2V0SXRlcmF0b3IoKSwgbyA9IHQuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgICAgIGxldCBfID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihzKSwgYSA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3Iobyk7XG4gICAgICAgICAgICAvLyBXYWxrIHRocm91Z2ggdGhlIHR3byBzZXRzIGF0IHRoZSBzYW1lIHRpbWUsIHVzaW5nIHRoZSBvcmRlcmluZyBkZWZpbmVkIGJ5XG4gICAgICAgICAgICAvLyBgY29tcGFyYXRvcmAuXG4gICAgICAgICAgICBmb3IgKDtfIHx8IGE7ICkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gITEsIHQgPSAhMTtcbiAgICAgICAgICAgICAgICBpZiAoXyAmJiBhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuKF8sIGEpO1xuICAgICAgICAgICAgICAgICAgICByIDwgMCA/IFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHdhbGt0aHJvdWdoIGlzIG9ubHkgaW4gYGJlZm9yZWAuXG4gICAgICAgICAgICAgICAgICAgIHQgPSAhMCA6IHIgPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWQgd2Fsa3Rocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgLy8gaXMgb25seSBpbiBgYWZ0ZXJgLlxuICAgICAgICAgICAgICAgICAgICBlID0gITApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBudWxsICE9IF8gPyB0ID0gITAgOiBlID0gITA7XG4gICAgICAgICAgICAgICAgZSA/IChyKGEpLCBhID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihvKSkgOiB0ID8gKGkoXyksIF8gPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKHMpKSA6IChfID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihzKSwgXG4gICAgICAgICAgICAgICAgYSA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IobykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHIsIGksIF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvciwgKFxuICAgICAgICAvKiBvbkFkZD0gKi8gciA9PiB7XG4gICAgICAgICAgICBzLnB1c2godGhpcy5ibihlLCB0LCBuLCByKSk7XG4gICAgICAgIH0pLCAoXG4gICAgICAgIC8qIG9uUmVtb3ZlPSAqLyByID0+IHtcbiAgICAgICAgICAgIHMucHVzaCh0aGlzLkRuKGUsIHQsIG4sIHIpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihzKTtcbiAgICB9XG4gICAgcG4oZSkge1xuICAgICAgICBsZXQgdCA9IDE7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwic2VxdWVuY2VOdW1iZXJJbmRleFwiLFxuICAgICAgICAgICAgcmV2ZXJzZTogITAsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbIHRoaXMudWlkLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBdKVxuICAgICAgICB9LCAoKGUsIG4sIHIpID0+IHtcbiAgICAgICAgICAgIHIuZG9uZSgpLCB0ID0gbi5zZXF1ZW5jZU51bWJlciArIDE7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgc2V0IG9mIElEQiByYW5nZXMgdGhhdCBzcGxpdHMgdGhlIGV4aXN0aW5nIHJhbmdlIGFuZCBleGNsdWRlc1xuICAgICAqIGFueSB2YWx1ZXMgdGhhdCBtYXRjaCB0aGUgYG5vdEluVmFsdWVgIGZyb20gdGhlc2UgcmFuZ2VzLiBBcyBhbiBleGFtcGxlLFxuICAgICAqICdbZm9vID4gMiAmJiBmb28gIT0gM11gIGJlY29tZXMgIGBbZm9vID4gMiAmJiA8IDMsIGZvbyA+IDNdYC5cbiAgICAgKi8gICAgY3JlYXRlUmFuZ2UoZSwgdCwgbikge1xuICAgICAgICAvLyBUaGUgbm90SW4gdmFsdWVzIG5lZWQgdG8gYmUgc29ydGVkIGFuZCB1bmlxdWUgc28gdGhhdCB3ZSBjYW4gcmV0dXJuIGFcbiAgICAgICAgLy8gc29ydGVkIHNldCBvZiBub24tb3ZlcmxhcHBpbmcgcmFuZ2VzLlxuICAgICAgICBuID0gbi5zb3J0KCgoZSwgdCkgPT4gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGUsIHQpKSkuZmlsdGVyKCgoZSwgdCwgbikgPT4gIXQgfHwgMCAhPT0gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGUsIG5bdCAtIDFdKSkpO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHIucHVzaChlKTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoaSwgZSksIHMgPSBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoaSwgdCk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgaXMgdGhlIGxvd2VyIGJvdW5kLiBXZSB0aGVyZWZvcmUgbmVlZCB0byByYWlzZSB0aGUgYm91bmRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgICAgICAgclswXSA9IGUuWnQoKTsgZWxzZSBpZiAobiA+IDAgJiYgcyA8IDApIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIGlzIGluIHRoZSBtaWRkbGUgb2YgdGhlIHJhbmdlXG4gICAgICAgICAgICByLnB1c2goaSksIHIucHVzaChpLlp0KCkpOyBlbHNlIGlmIChzID4gMCkgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgKGFuZCBhbGwgZm9sbG93aW5nIHZhbHVlcykgYXJlIG91dCBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHIubGVuZ3RoOyBlICs9IDIpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGVuY291bnRlciB0d28gYm91bmRzIHRoYXQgd2lsbCBjcmVhdGUgYW4gdW5tYXRjaGFibGUga2V5IHJhbmdlLFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSByZXR1cm4gYW4gZW1wdHkgc2V0IG9mIGtleSByYW5nZXMuXG4gICAgICAgICAgICBpZiAodGhpcy5DbihyW2VdLCByW2UgKyAxXSkpIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBbIHJbZV0uaW5kZXhJZCwgdGhpcy51aWQsIHJbZV0uYXJyYXlWYWx1ZSwgcltlXS5kaXJlY3Rpb25hbFZhbHVlLCBkZSwgW10gXSwgbiA9IFsgcltlICsgMV0uaW5kZXhJZCwgdGhpcy51aWQsIHJbZSArIDFdLmFycmF5VmFsdWUsIHJbZSArIDFdLmRpcmVjdGlvbmFsVmFsdWUsIGRlLCBbXSBdO1xuICAgICAgICAgICAgaS5wdXNoKElEQktleVJhbmdlLmJvdW5kKHQsIG4pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgQ24oZSwgdCkge1xuICAgICAgICAvLyBJZiBsb3dlciBib3VuZCBpcyBncmVhdGVyIHRoYW4gdGhlIHVwcGVyIGJvdW5kLCB0aGVuIHRoZSBrZXlcbiAgICAgICAgLy8gcmFuZ2UgY2FuIG5ldmVyIGJlIG1hdGNoZWQuXG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoZSwgdCkgPiAwO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXRGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKGUsIHQpLm5leHQoX19QUklWQVRFX2dldE1pbk9mZnNldEZyb21GaWVsZEluZGV4ZXMpO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm1hcEFycmF5KHRoaXMubG4odCksICh0ID0+IHRoaXMuaG4oZSwgdCkubmV4dCgoZSA9PiBlIHx8IGZhaWwoKSkpKSkubmV4dChfX1BSSVZBVEVfZ2V0TWluT2Zmc2V0RnJvbUZpZWxkSW5kZXhlcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY29sbGVjdGlvblBhcmVudHNcbiAqIGRvY3VtZW50IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb2xsZWN0aW9uUGFyZW50c1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiY29sbGVjdGlvblBhcmVudHNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBlbnRyeSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiaW5kZXhFbnRyaWVzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggY29uZmlndXJhdGlvbiBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiaW5kZXhDb25maWd1cmF0aW9uXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggc3RhdGUgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJpbmRleFN0YXRlXCIpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0TWluT2Zmc2V0RnJvbUZpZWxkSW5kZXhlcyhlKSB7XG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMCAhPT0gZS5sZW5ndGgpO1xuICAgIGxldCB0ID0gZVswXS5pbmRleFN0YXRlLm9mZnNldCwgbiA9IHQubGFyZ2VzdEJhdGNoSWQ7XG4gICAgZm9yIChsZXQgciA9IDE7IHIgPCBlLmxlbmd0aDsgcisrKSB7XG4gICAgICAgIGNvbnN0IGkgPSBlW3JdLmluZGV4U3RhdGUub2Zmc2V0O1xuICAgICAgICBfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yKGksIHQpIDwgMCAmJiAodCA9IGkpLCBuIDwgaS5sYXJnZXN0QmF0Y2hJZCAmJiAobiA9IGkubGFyZ2VzdEJhdGNoSWQpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEluZGV4T2Zmc2V0KHQucmVhZFRpbWUsIHQuZG9jdW1lbnRLZXksIG4pO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBUZSA9IHtcbiAgICBkaWRSdW46ICExLFxuICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogMCxcbiAgICB0YXJnZXRzUmVtb3ZlZDogMCxcbiAgICBkb2N1bWVudHNSZW1vdmVkOiAwXG59O1xuXG5jbGFzcyBMcnVQYXJhbXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIFdoZW4gd2UgYXR0ZW1wdCB0byBjb2xsZWN0LCB3ZSB3aWxsIG9ubHkgZG8gc28gaWYgdGhlIGNhY2hlIHNpemUgaXMgZ3JlYXRlciB0aGFuIHRoaXNcbiAgICAvLyB0aHJlc2hvbGQuIFBhc3NpbmcgYENPTExFQ1RJT05fRElTQUJMRURgIGhlcmUgd2lsbCBjYXVzZSBjb2xsZWN0aW9uIHRvIGFsd2F5cyBiZSBza2lwcGVkLlxuICAgIGUsIFxuICAgIC8vIFRoZSBwZXJjZW50YWdlIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3ZSB3aWxsIGF0dGVtcHQgdG8gY29sbGVjdFxuICAgIHQsIFxuICAgIC8vIEEgY2FwIG9uIHRoZSB0b3RhbCBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdpbGwgYmUgY29sbGVjdGVkLiBUaGlzIHByZXZlbnRzXG4gICAgLy8gdXMgZnJvbSBjb2xsZWN0aW5nIGEgaHVnZSBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyBpZiB0aGUgY2FjaGUgaGFzIGdyb3duIHZlcnkgbGFyZ2UuXG4gICAgbikge1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPSBlLCB0aGlzLnBlcmNlbnRpbGVUb0NvbGxlY3QgPSB0LCB0aGlzLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgd2l0aENhY2hlU2l6ZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTHJ1UGFyYW1zKGUsIExydVBhcmFtcy5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgTHJ1UGFyYW1zLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEZWxldGUgYSBtdXRhdGlvbiBiYXRjaCBhbmQgdGhlIGFzc29jaWF0ZWQgZG9jdW1lbnQgbXV0YXRpb25zLlxuICogQHJldHVybnMgQSBQZXJzaXN0ZW5jZVByb21pc2Ugb2YgdGhlIGRvY3VtZW50IG11dGF0aW9ucyB0aGF0IHdlcmUgcmVtb3ZlZC5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTXV0YXRpb25CYXRjaChlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IGUuc3RvcmUoXCJtdXRhdGlvbnNcIiksIGkgPSBlLnN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIiksIHMgPSBbXSwgbyA9IElEQktleVJhbmdlLm9ubHkobi5iYXRjaElkKTtcbiAgICBsZXQgXyA9IDA7XG4gICAgY29uc3QgYSA9IHIuWih7XG4gICAgICAgIHJhbmdlOiBvXG4gICAgfSwgKChlLCB0LCBuKSA9PiAoXysrLCBuLmRlbGV0ZSgpKSkpO1xuICAgIHMucHVzaChhLm5leHQoKCgpID0+IHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gXyk7XG4gICAgfSkpKTtcbiAgICBjb25zdCB1ID0gW107XG4gICAgZm9yIChjb25zdCBlIG9mIG4ubXV0YXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uS2V5KHQsIGUua2V5LnBhdGgsIG4uYmF0Y2hJZCk7XG4gICAgICAgIHMucHVzaChpLmRlbGV0ZShyKSksIHUucHVzaChlLmtleSk7XG4gICAgfVxuICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihzKS5uZXh0KCgoKSA9PiB1KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSBzaXplIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RiRG9jdW1lbnRTaXplKGUpIHtcbiAgICBpZiAoIWUpIHJldHVybiAwO1xuICAgIGxldCB0O1xuICAgIGlmIChlLmRvY3VtZW50KSB0ID0gZS5kb2N1bWVudDsgZWxzZSBpZiAoZS51bmtub3duRG9jdW1lbnQpIHQgPSBlLnVua25vd25Eb2N1bWVudDsgZWxzZSB7XG4gICAgICAgIGlmICghZS5ub0RvY3VtZW50KSB0aHJvdyBmYWlsKCk7XG4gICAgICAgIHQgPSBlLm5vRG9jdW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0KS5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBtdXRhdGlvbiBxdWV1ZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCBiYWNrZWQgYnkgSW5kZXhlZERCLiAqLyBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUgPSAxMCwgXG5McnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMWUzLCBMcnVQYXJhbXMuREVGQVVMVCA9IG5ldyBMcnVQYXJhbXMoNDE5NDMwNDAsIExydVBhcmFtcy5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgTHJ1UGFyYW1zLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCksIFxuTHJ1UGFyYW1zLkRJU0FCTEVEID0gbmV3IExydVBhcmFtcygtMSwgMCwgMCk7XG5cbmNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJNdXRhdGlvblF1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VySWQgKGUuZy4gbnVsbCBVSUQgPT4gXCJcIiB1c2VySWQpIHVzZWQgdG8gc3RvcmUgL1xuICAgICAqIHJldHJpZXZlIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICBlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gZSwgdGhpcy5zZXJpYWxpemVyID0gdCwgdGhpcy5pbmRleE1hbmFnZXIgPSBuLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gciwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcy4gSWYgdGhlIG11dGF0aW9uXG4gICAgICAgICAqIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBJbmRleGVkRGIsIHRoZSBjYWNoZWQgdmFsdWUgbWF5IGNvbnRpbnVlIHRvXG4gICAgICAgICAqIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGJhdGNoJ3MgZG9jdW1lbnQga2V5cy4gVG8gcmVtb3ZlIGEgY2FjaGVkIHZhbHVlXG4gICAgICAgICAqIGxvY2FsbHksIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgc2hvdWxkIGJlIGludm9rZWQgZWl0aGVyIGRpcmVjdGx5XG4gICAgICAgICAqIG9yIHRocm91Z2ggYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2l0aCBtdWx0aS10YWIsIHdoZW4gdGhlIHByaW1hcnkgY2xpZW50IGFja25vd2xlZGdlcyBvciByZWplY3RzIGEgbXV0YXRpb24sXG4gICAgICAgICAqIHRoaXMgY2FjaGUgaXMgdXNlZCBieSBzZWNvbmRhcnkgY2xpZW50cyB0byBpbnZhbGlkYXRlIHRoZSBsb2NhbFxuICAgICAgICAgKiB2aWV3IG9mIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWZmZWN0ZWQgYnkgdGhlIG11dGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgdGhpcy52biA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlci5cbiAgICAgKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0byBjcmVhdGUgYSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB3aGVuIHBlcnNpc3RpbmcgdG8gSW5kZXhlZERiLlxuICAgICAqLyAgICBzdGF0aWMgUHQoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBUT0RPKG1jZyk6IEZpZ3VyZSBvdXQgd2hhdCBjb25zdHJhaW50cyB0aGVyZSBhcmUgb24gdXNlcklEc1xuICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBhcmUgdGhlcmUgYW55IHJlc2VydmVkIGNoYXJhY3RlcnM/IGFyZSBlbXB0eSBpZHMgYWxsb3dlZD9cbiAgICAgICAgLy8gRm9yIHRoZSBtb21lbnQgc3RvcmUgdGhlc2UgdG9nZXRoZXIgaW4gdGhlIHNhbWUgbXV0YXRpb25zIHRhYmxlIGFzc3VtaW5nXG4gICAgICAgIC8vIHRoYXQgZW1wdHkgdXNlcklEcyBhcmVuJ3QgYWxsb3dlZC5cbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJcIiAhPT0gZS51aWQpO1xuICAgICAgICBjb25zdCBpID0gZS5pc0F1dGhlbnRpY2F0ZWQoKSA/IGUudWlkIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiTXV0YXRpb25RdWV1ZShpLCB0LCBuLCByKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eShlKSB7XG4gICAgICAgIGxldCB0ID0gITA7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogblxuICAgICAgICB9LCAoKGUsIG4sIHIpID0+IHtcbiAgICAgICAgICAgIHQgPSAhMSwgci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2goZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSksIHMgPSBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSk7XG4gICAgICAgIC8vIFRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gaW4gQ2hyb21lIChhbmQgRmlyZWZveCkgZG9lcyBub3QgaGFuZGxlXG4gICAgICAgIC8vIGNvbXBvdW5kIGluZGljZXMgdGhhdCBpbmNsdWRlIGF1dG8tZ2VuZXJhdGVkIGtleXMgY29ycmVjdGx5LiBUbyBlbnN1cmVcbiAgICAgICAgLy8gdGhhdCB0aGUgaW5kZXggZW50cnkgaXMgYWRkZWQgY29ycmVjdGx5IGluIGFsbCBicm93c2Vycywgd2UgcGVyZm9ybSB0d29cbiAgICAgICAgLy8gd3JpdGVzOiBUaGUgZmlyc3Qgd3JpdGUgaXMgdXNlZCB0byByZXRyaWV2ZSB0aGUgbmV4dCBhdXRvLWdlbmVyYXRlZCBCYXRjaFxuICAgICAgICAvLyBJRCwgYW5kIHRoZSBzZWNvbmQgd3JpdGUgcG9wdWxhdGVzIHRoZSBpbmRleCBhbmQgc3RvcmVzIHRoZSBhY3R1YWxcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2guXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NzAxOTcyXG4gICAgICAgIC8vIFdlIHdyaXRlIGFuIGVtcHR5IG9iamVjdCB0byBvYnRhaW4ga2V5XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBzLmFkZCh7fSkubmV4dCgobyA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChcIm51bWJlclwiID09IHR5cGVvZiBvKTtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBuZXcgTXV0YXRpb25CYXRjaChvLCB0LCBuLCByKSwgYSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiTXV0YXRpb25CYXRjaChlLCB0LCBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG4uYmFzZU11dGF0aW9ucy5tYXAoKHQgPT4gdG9NdXRhdGlvbihlLmh0LCB0KSkpLCBpID0gbi5tdXRhdGlvbnMubWFwKCh0ID0+IHRvTXV0YXRpb24oZS5odCwgdCkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHQsXG4gICAgICAgICAgICAgICAgICAgIGJhdGNoSWQ6IG4uYmF0Y2hJZCxcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxXcml0ZVRpbWVNczogbi5sb2NhbFdyaXRlVGltZS50b01pbGxpcygpLFxuICAgICAgICAgICAgICAgICAgICBiYXNlTXV0YXRpb25zOiByLFxuICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbnM6IGlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIHRoaXMudXNlcklkLCBfKSwgdSA9IFtdO1xuICAgICAgICAgICAgbGV0IGMgPSBuZXcgU29ydGVkU2V0KCgoZSwgdCkgPT4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5jYW5vbmljYWxTdHJpbmcoKSwgdC5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiByKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25LZXkodGhpcy51c2VySWQsIGUua2V5LnBhdGgsIG8pO1xuICAgICAgICAgICAgICAgIGMgPSBjLmFkZChlLmtleS5wYXRoLnBvcExhc3QoKSksIHUucHVzaChzLnB1dChhKSksIHUucHVzaChpLnB1dCh0LCB4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB1LnB1c2godGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgdCkpO1xuICAgICAgICAgICAgfSkpLCBlLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnZuW29dID0gXy5rZXlzKCk7XG4gICAgICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHUpLm5leHQoKCgpID0+IF8pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5nZXQodCkubmV4dCgoZSA9PiBlID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUudXNlcklkID09PSB0aGlzLnVzZXJJZCksIFxuICAgICAgICBfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIGUpKSA6IG51bGwpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgdGhlIG11dGF0aW9uIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQuXG4gICAgICogRm9yIHByaW1hcnkgY2xpZW50cywgdGhpcyBtZXRob2QgcmV0dXJucyBgbnVsbGAgYWZ0ZXJcbiAgICAgKiBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgIGhhcyBiZWVuIGNhbGxlZC4gU2Vjb25kYXJ5IGNsaWVudHMgcmV0dXJuIGFcbiAgICAgKiBjYWNoZWQgcmVzdWx0IHVudGlsIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgaXMgaW52b2tlZC5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIEZuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudm5bdF0gPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnZuW3RdKSA6IHRoaXMubG9va3VwTXV0YXRpb25CYXRjaChlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUua2V5cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZuW3RdID0gbiwgbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgKyAxLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkLCBuIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuWih7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgoZSwgdCwgcikgPT4ge1xuICAgICAgICAgICAgdC51c2VySWQgPT09IHRoaXMudXNlcklkICYmIChfX1BSSVZBVEVfaGFyZEFzc2VydCh0LmJhdGNoSWQgPj0gbiksIGkgPSBfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIHQpKSwgXG4gICAgICAgICAgICByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IG4gPSAtMTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IHQsXG4gICAgICAgICAgICByZXZlcnNlOiAhMFxuICAgICAgICB9LCAoKGUsIHQsIHIpID0+IHtcbiAgICAgICAgICAgIG4gPSB0LmJhdGNoSWQsIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgLTEgXSwgWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLkcoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgdCkubmV4dCgoZSA9PiBlLm1hcCgoZSA9PiBfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIGUpKSkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkoZSwgdCkge1xuICAgICAgICAvLyBTY2FuIHRoZSBkb2N1bWVudC1tdXRhdGlvbiBpbmRleCBzdGFydGluZyB3aXRoIGEgcHJlZml4IHN0YXJ0aW5nIHdpdGhcbiAgICAgICAgLy8gdGhlIGdpdmVuIGRvY3VtZW50S2V5LlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIHQucGF0aCksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKG4pLCBpID0gW107XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgobiwgciwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgW28sIF8sIGFdID0gbiwgdSA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoXyk7XG4gICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXG4gICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcbiAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09PSB0aGlzLnVzZXJJZCAmJiB0LnBhdGguaXNFcXVhbCh1KSkgXG4gICAgICAgICAgICAvLyBMb29rIHVwIHRoZSBtdXRhdGlvbiBiYXRjaCBpbiB0aGUgc3RvcmUuXG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLmdldChhKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWUpIHRocm93IGZhaWwoKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBpLnB1c2goX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uUHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgdC5wYXRoKSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSksIG8gPSBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgICAgICByYW5nZTogc1xuICAgICAgICAgICAgfSwgKChlLCByLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgW3MsIG8sIF9dID0gZSwgYSA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgobyk7XG4gICAgICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPT09IHRoaXMudXNlcklkICYmIHQucGF0aC5pc0VxdWFsKGEpID8gbiA9IG4uYWRkKF8pIDogaS5kb25lKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByLnB1c2gobyk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocikubmV4dCgoKCkgPT4gdGhpcy5NbihlLCBuKSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnBhdGgsIHIgPSBuLmxlbmd0aCArIDEsIGkgPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uUHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgbiksIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpO1xuICAgICAgICAvLyBDb2xsZWN0IHVwIHVuaXF1ZSBiYXRjaElEcyBlbmNvdW50ZXJlZCBkdXJpbmcgYSBzY2FuIG9mIHRoZSBpbmRleC4gVXNlIGFcbiAgICAgICAgLy8gU29ydGVkU2V0IHRvIGFjY3VtdWxhdGUgYmF0Y2ggSURzIHNvIHRoZXkgY2FuIGJlIHRyYXZlcnNlZCBpbiBvcmRlciBpbiBhXG4gICAgICAgIC8vIHNjYW4gb2YgdGhlIG1haW4gdGFibGUuXG4gICAgICAgIGxldCBvID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgoZSwgdCwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3MsIF8sIGFdID0gZSwgdSA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoXyk7XG4gICAgICAgICAgICBzID09PSB0aGlzLnVzZXJJZCAmJiBuLmlzUHJlZml4T2YodSkgPyBcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGVcbiAgICAgICAgICAgIC8vIHF1ZXJ5IHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJ1xuICAgICAgICAgICAgLy8gY2FuJ3QgbWF0Y2ggdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXG4gICAgICAgICAgICB1Lmxlbmd0aCA9PT0gciAmJiAobyA9IG8uYWRkKGEpKSA6IGkuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdGhpcy5NbihlLCBvKSkpO1xuICAgIH1cbiAgICBNbihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgciA9IFtdO1xuICAgICAgICAvLyBUT0RPKHJvY2t3b29kKTogSW1wbGVtZW50IHRoaXMgdXNpbmcgaXRlcmF0ZS5cbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICByLnB1c2goX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZSkgdGhyb3cgZmFpbCgpO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUudXNlcklkID09PSB0aGlzLnVzZXJJZCksIG4ucHVzaChfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIGUpKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocikubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZU11dGF0aW9uQmF0Y2goZS51ZSwgdGhpcy51c2VySWQsIHQpLm5leHQoKG4gPT4gKGUuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy54bih0LmJhdGNoSWQpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKG4sICh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgdCkpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHRoZSBjYWNoZWQga2V5cyBmb3IgYSBtdXRhdGlvbiBiYXRjaC4gVGhpcyBtZXRob2Qgc2hvdWxkIGJlXG4gICAgICogY2FsbGVkIGJ5IHNlY29uZGFyeSBjbGllbnRzIGFmdGVyIHRoZXkgcHJvY2VzcyBtdXRhdGlvbiB1cGRhdGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGRvZXMgbm90IGhhdmUgdG8gYmUgY2FsbGVkIGZyb20gcHJpbWFyeSBjbGllbnRzIGFzXG4gICAgICogdGhlIGNvcnJlc3BvbmRpbmcgY2FjaGUgZW50cmllcyBhcmUgY2xlYXJlZCB3aGVuIGFuIGFja25vd2xlZGdlZCBvclxuICAgICAqIHJlamVjdGVkIGJhdGNoIGlzIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIHhuKGUpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMudm5bZV07XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tFbXB0eShlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICghdCkgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcbiAgICAgICAgICAgIC8vIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFxuICAgICAgICAgICAgLyoqXG4gKiBDcmVhdGVzIGEgW3VzZXJJZF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggdG8gaXRlcmF0ZVxuICogb3ZlciBhbGwgb2YgYSB1c2VyJ3MgZG9jdW1lbnQgbXV0YXRpb25zLlxuICovXG4gICAgICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uUHJlZml4Rm9yVXNlcihlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsgZSBdO1xuICAgICAgICAgICAgfSh0aGlzLnVzZXJJZCkpLCByID0gW107XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuWih7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgICAgIH0sICgoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlWzBdID09PSB0aGlzLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChlWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBuLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMCA9PT0gci5sZW5ndGgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkoZSwgdGhpcy51c2VySWQsIHQpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5IChzdGF0ZSBpcyBoZWxkIGluIG1lbW9yeSBpbiBvdGhlciBjbGllbnRzKS5cbiAgICAvKiogUmV0dXJucyB0aGUgbXV0YXRpb24gcXVldWUncyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi4gKi9cbiAgICBPbihlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZXNTdG9yZShlKS5nZXQodGhpcy51c2VySWQpLm5leHQoKGUgPT4gZSB8fCB7XG4gICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLFxuICAgICAgICAgICAgbGFzdEFja25vd2xlZGdlZEJhdGNoSWQ6IC0xLFxuICAgICAgICAgICAgbGFzdFN0cmVhbVRva2VuOiBcIlwiXG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyIGNvbnRhaW5zIGEgcGVuZGluZ1xuICogICAgICAgICBtdXRhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5KGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgodCwgbi5wYXRoKSwgaSA9IHJbMV0sIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHIpO1xuICAgIGxldCBvID0gITE7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLlooe1xuICAgICAgICByYW5nZTogcyxcbiAgICAgICAgWTogITBcbiAgICB9LCAoKGUsIG4sIHIpID0+IHtcbiAgICAgICAgY29uc3QgW3MsIF8sIC8qYmF0Y2hJRCovIGFdID0gZTtcbiAgICAgICAgcyA9PT0gdCAmJiBfID09PSBpICYmIChvID0gITApLCByLmRvbmUoKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gbykpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGFueSBtdXRhdGlvbiBxdWV1ZSBjb250YWlucyB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25zIG9iamVjdCBzdG9yZS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwibXV0YXRpb25zXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uUXVldWVzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJtdXRhdGlvblF1ZXVlc1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBPZmZzZXQgdG8gZW5zdXJlIG5vbi1vdmVybGFwcGluZyB0YXJnZXQgaWRzLiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIHRhcmdldCBJRHMgZm9yIHNlbmRpbmcgdGFyZ2V0cyB0byB0aGVcbiAqIHdhdGNoIHN0cmVhbS5cbiAqXG4gKiBUaGUgY2xpZW50IGNvbnN0cnVjdHMgdHdvIGdlbmVyYXRvcnMsIG9uZSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgYW5kIG9uZSBmb3JcbiAqIGZvciB0aGUgc3luYyBlbmdpbmUgKHRvIGdlbmVyYXRlIGxpbWJvIGRvY3VtZW50cyB0YXJnZXRzKS4gVGhlc2VcbiAqIGdlbmVyYXRvcnMgcHJvZHVjZSBub24tb3ZlcmxhcHBpbmcgSURzIChieSB1c2luZyBldmVuIGFuZCBvZGQgSURzXG4gKiByZXNwZWN0aXZlbHkpLlxuICpcbiAqIEJ5IHNlcGFyYXRpbmcgdGhlIHRhcmdldCBJRCBzcGFjZSwgdGhlIHF1ZXJ5IGNhY2hlIGNhbiBnZW5lcmF0ZSB0YXJnZXQgSURzXG4gKiB0aGF0IHBlcnNpc3QgYWNyb3NzIGNsaWVudCByZXN0YXJ0cywgd2hpbGUgc3luYyBlbmdpbmUgY2FuIGluZGVwZW5kZW50bHlcbiAqIGdlbmVyYXRlIGluLW1lbW9yeSB0YXJnZXQgSURzIHRoYXQgYXJlIHRyYW5zaWVudCBhbmQgY2FuIGJlIHJldXNlZCBhZnRlciBhXG4gKiByZXN0YXJ0LlxuICovXG5jbGFzcyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5ObiA9IGU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5uICs9IDIsIHRoaXMuTm47XG4gICAgfVxuICAgIHN0YXRpYyBCbigpIHtcbiAgICAgICAgLy8gVGhlIHRhcmdldCBjYWNoZSBnZW5lcmF0b3IgbXVzdCByZXR1cm4gJzInIGluIGl0cyBmaXJzdCBjYWxsIHRvIGBuZXh0KClgXG4gICAgICAgIC8vIGFzIHRoZXJlIGlzIG5vIGRpZmZlcmVudGlhdGlvbiBpbiB0aGUgcHJvdG9jb2wgbGF5ZXIgYmV0d2VlbiBhbiB1bnNldFxuICAgICAgICAvLyBudW1iZXIgYW5kIHRoZSBudW1iZXIgJzAnLiBJZiB3ZSB3ZXJlIHRvIHNlbnQgYSB0YXJnZXQgd2l0aCB0YXJnZXQgSURcbiAgICAgICAgLy8gJzAnLCB0aGUgYmFja2VuZCB3b3VsZCBjb25zaWRlciBpdCB1bnNldCBhbmQgcmVwbGFjZSBpdCB3aXRoIGl0cyBvd24gSUQuXG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yKDApO1xuICAgIH1cbiAgICBzdGF0aWMgTG4oKSB7XG4gICAgICAgIC8vIFN5bmMgZW5naW5lIGFzc2lnbnMgdGFyZ2V0IElEcyBmb3IgbGltYm8gZG9jdW1lbnQgZGV0ZWN0aW9uLlxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvcigtMSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiVGFyZ2V0Q2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIHRoaXMuc2VyaWFsaXplciA9IHQ7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgY2FjaGUgZ2xvYmFsIG1ldGFkYXRhIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBzaW5jZVxuICAgIC8vIHNvbWUgb2YgaXQgKGluIHBhcnRpY3VsYXIgYGhpZ2hlc3RUYXJnZXRJZGApIGNhbiBiZSBtb2RpZmllZCBieSBzZWNvbmRhcnlcbiAgICAvLyB0YWJzLiBXZSBjb3VsZCBwZXJoYXBzIGJlIG1vcmUgZ3JhbnVsYXIgKGFuZCBlLmcuIHN0aWxsIGNhY2hlXG4gICAgLy8gYGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb25gIGluIG1lbW9yeSkgYnV0IGZvciBzaW1wbGljaXR5IHdlIGN1cnJlbnRseSBnb1xuICAgIC8vIHRvIEluZGV4ZWREYiB3aGVuZXZlciB3ZSBuZWVkIHRvIHJlYWQgbWV0YWRhdGEuIFdlIGNhbiByZXZpc2l0IGlmIGl0IHR1cm5zXG4gICAgLy8gb3V0IHRvIGhhdmUgYSBtZWFuaW5nZnVsIHBlcmZvcm1hbmNlIGltcGFjdC5cbiAgICBhbGxvY2F0ZVRhcmdldElkKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua24oZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvcih0LmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgICAgICAgICByZXR1cm4gdC5oaWdoZXN0VGFyZ2V0SWQgPSBuLm5leHQoKSwgdGhpcy5xbihlLCB0KS5uZXh0KCgoKSA9PiB0LmhpZ2hlc3RUYXJnZXRJZCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rbihlKS5uZXh0KChlID0+IFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKG5ldyBUaW1lc3RhbXAoZS5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsIGUubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5uYW5vc2Vjb25kcykpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtuKGUpLm5leHQoKGUgPT4gZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua24oZSkubmV4dCgociA9PiAoci5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0LCBuICYmIChyLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuLnRvVGltZXN0YW1wKCkpLCBcbiAgICAgICAgdCA+IHIuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChyLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IHQpLCB0aGlzLnFuKGUsIHIpKSkpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUW4oZSwgdCkubmV4dCgoKCkgPT4gdGhpcy5rbihlKS5uZXh0KChuID0+IChuLnRhcmdldENvdW50ICs9IDEsIHRoaXMuS24odCwgbiksIFxuICAgICAgICB0aGlzLnFuKGUsIG4pKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5RbihlLCB0KTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQudGFyZ2V0SWQpLm5leHQoKCgpID0+IF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkuZGVsZXRlKHQudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gdGhpcy5rbihlKSkpLm5leHQoKHQgPT4gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHQudGFyZ2V0Q291bnQgPiAwKSwgXG4gICAgICAgIHQudGFyZ2V0Q291bnQgLT0gMSwgdGhpcy5xbihlLCB0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHJvcHMgYW55IHRhcmdldHMgd2l0aCBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCwgZXhjZXB0aW5nIHRob3NlXG4gICAgICogcHJlc2VudCBpbiBgYWN0aXZlVGFyZ2V0SWRzYC4gRG9jdW1lbnQgYXNzb2NpYXRpb25zIGZvciB0aGUgcmVtb3ZlZCB0YXJnZXRzIGFyZSBhbHNvIHJlbW92ZWQuXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5aKCgocywgbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgXyA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobyk7XG4gICAgICAgICAgICBfLnNlcXVlbmNlTnVtYmVyIDw9IHQgJiYgbnVsbCA9PT0gbi5nZXQoXy50YXJnZXRJZCkgJiYgKHIrKywgaS5wdXNoKHRoaXMucmVtb3ZlVGFyZ2V0RGF0YShlLCBfKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSkpKS5uZXh0KCgoKSA9PiByKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gd2l0aCBlYWNoIGBUYXJnZXREYXRhYCB0aGF0IHdlIGhhdmUgY2FjaGVkLlxuICAgICAqLyAgICBmb3JFYWNoVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkuWigoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KG4pO1xuICAgICAgICAgICAgdChyKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBrbihlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZ2xvYmFsVGFyZ2V0U3RvcmUoZSkuZ2V0KFwidGFyZ2V0R2xvYmFsS2V5XCIpLm5leHQoKGUgPT4gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgIT09IGUpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgcW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2dsb2JhbFRhcmdldFN0b3JlKGUpLnB1dChcInRhcmdldEdsb2JhbEtleVwiLCB0KTtcbiAgICB9XG4gICAgUW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5wdXQoX19QUklWQVRFX3RvRGJUYXJnZXQodGhpcy5zZXJpYWxpemVyLCB0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluLXBsYWNlIHVwZGF0ZXMgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIHRvIGFjY291bnQgZm9yIHZhbHVlcyBpbiB0aGUgZ2l2ZW5cbiAgICAgKiBUYXJnZXREYXRhLiBTYXZpbmcgaXMgZG9uZSBzZXBhcmF0ZWx5LiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgd2VyZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSBtZXRhZGF0YS5cbiAgICAgKi8gICAgS24oZSwgdCkge1xuICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICByZXR1cm4gZS50YXJnZXRJZCA+IHQuaGlnaGVzdFRhcmdldElkICYmICh0LmhpZ2hlc3RUYXJnZXRJZCA9IGUudGFyZ2V0SWQsIG4gPSAhMCksIFxuICAgICAgICBlLnNlcXVlbmNlTnVtYmVyID4gdC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZS5zZXF1ZW5jZU51bWJlciwgXG4gICAgICAgIG4gPSAhMCksIG47XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua24oZSkubmV4dCgoZSA9PiBlLnRhcmdldENvdW50KSk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICAvLyBJdGVyYXRpbmcgYnkgdGhlIGNhbm9uaWNhbElkIG1heSB5aWVsZCBtb3JlIHRoYW4gb25lIHJlc3VsdCBiZWNhdXNlXG4gICAgICAgIC8vIGNhbm9uaWNhbElkIHZhbHVlcyBhcmUgbm90IHJlcXVpcmVkIHRvIGJlIHVuaXF1ZSBwZXIgdGFyZ2V0LiBUaGlzIHF1ZXJ5XG4gICAgICAgIC8vIGRlcGVuZHMgb24gdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleCB0byBiZSBlZmZpY2llbnQuXG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQodCksIHIgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4sIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIG4sIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIHJhbmdlOiByLFxuICAgICAgICAgICAgaW5kZXg6IFwicXVlcnlUYXJnZXRzSW5kZXhcIlxuICAgICAgICB9LCAoKGUsIG4sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KG4pO1xuICAgICAgICAgICAgLy8gQWZ0ZXIgZmluZGluZyBhIHBvdGVudGlhbCBtYXRjaCwgY2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzXG4gICAgICAgICAgICAvLyBhY3R1YWxseSBlcXVhbCB0byB0aGUgcmVxdWVzdGVkIHRhcmdldC5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV90YXJnZXRFcXVhbHModCwgcy50YXJnZXQpICYmIChpID0gcywgci5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXMoZSwgdCwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgciA9IFtdLCBpID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodC5wYXRoKTtcbiAgICAgICAgICAgIHIucHVzaChpLnB1dCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG4sXG4gICAgICAgICAgICAgICAgcGF0aDogc1xuICAgICAgICAgICAgfSkpLCByLnB1c2godGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UoZSwgbiwgdCkpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXMoZSwgdCwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodC5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihbIHIuZGVsZXRlKFsgbiwgaSBdKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UoZSwgbiwgdCkgXSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSksIHIgPSBJREJLZXlSYW5nZS5ib3VuZChbIHQgXSwgWyB0ICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZShyKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0IF0sIFsgdCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApLCByID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSk7XG4gICAgICAgIGxldCBpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIHJldHVybiByLlooe1xuICAgICAgICAgICAgcmFuZ2U6IG4sXG4gICAgICAgICAgICBZOiAhMFxuICAgICAgICB9LCAoKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKGVbMV0pLCBzID0gbmV3IERvY3VtZW50S2V5KHIpO1xuICAgICAgICAgICAgaSA9IGkuYWRkKHMpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQucGF0aCksIHIgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4gXSwgWyBfX1BSSVZBVEVfaW1tZWRpYXRlU3VjY2Vzc29yKG4pIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSkuWih7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLFxuICAgICAgICAgICAgWTogITAsXG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKFtlLCB0XSwgbiwgcikgPT4ge1xuICAgICAgICAgICAgLy8gSGF2aW5nIGEgc2VudGluZWwgcm93IGZvciBhIGRvY3VtZW50IGRvZXMgbm90IGNvdW50IGFzIGNvbnRhaW5pbmcgdGhhdCBkb2N1bWVudDtcbiAgICAgICAgICAgIC8vIEZvciB0aGUgdGFyZ2V0IGNhY2hlLCBjb250YWluaW5nIHRoZSBkb2N1bWVudCBtZWFucyB0aGUgZG9jdW1lbnQgaXMgcGFydCBvZiBzb21lXG4gICAgICAgICAgICAvLyB0YXJnZXQuXG4gICAgICAgICAgICAwICE9PSBlICYmIChpKyssIHIuZG9uZSgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkgPiAwKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGEgVGFyZ2V0RGF0YSBlbnRyeSBieSB0YXJnZXQgSUQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0SWQgLSBUaGUgdGFyZ2V0IElEIG9mIHRoZSBUYXJnZXREYXRhIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBUYXJnZXREYXRhIGVudHJ5LCBvciBudWxsIGlmIHRoZSBjYWNoZSBoYXMgbm8gZW50cnkgZm9yXG4gICAgICogdGhlIHRhcmdldC5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIGx0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4gZSA/IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQoZSkgOiBudWxsKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcInRhcmdldHNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSB0YXJnZXQgZ2xvYmFscyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2dsb2JhbFRhcmdldFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwidGFyZ2V0R2xvYmFsXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgdGFyZ2V0IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcInRhcmdldERvY3VtZW50c1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2J1ZmZlckVudHJ5Q29tcGFyYXRvcihbZSwgdF0sIFtuLCByXSkge1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLCBuKTtcbiAgICByZXR1cm4gMCA9PT0gaSA/IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHQsIHIpIDogaTtcbn1cblxuLyoqXG4gKiBVc2VkIHRvIGNhbGN1bGF0ZSB0aGUgbnRoIHNlcXVlbmNlIG51bWJlci4gS2VlcHMgYSByb2xsaW5nIGJ1ZmZlciBvZiB0aGVcbiAqIGxvd2VzdCBuIHZhbHVlcyBwYXNzZWQgdG8gYGFkZEVsZW1lbnRgLCBhbmQgZmluYWxseSByZXBvcnRzIHRoZSBsYXJnZXN0IG9mXG4gKiB0aGVtIGluIGBtYXhWYWx1ZWAuXG4gKi8gY2xhc3MgX19QUklWQVRFX1JvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLiRuID0gZSwgdGhpcy5idWZmZXIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9idWZmZXJFbnRyeUNvbXBhcmF0b3IpLCB0aGlzLlVuID0gMDtcbiAgICB9XG4gICAgV24oKSB7XG4gICAgICAgIHJldHVybiArK3RoaXMuVW47XG4gICAgfVxuICAgIEduKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFsgZSwgdGhpcy5XbigpIF07XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5zaXplIDwgdGhpcy4kbikgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5hZGQodCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuYnVmZmVyLmxhc3QoKTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9idWZmZXJFbnRyeUNvbXBhcmF0b3IodCwgZSkgPCAwICYmICh0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmRlbGV0ZShlKS5hZGQodCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgLy8gR3VhcmFudGVlZCB0byBiZSBub24tZW1wdHkuIElmIHdlIGRlY2lkZSB3ZSBhcmUgbm90IGNvbGxlY3RpbmcgYW55XG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlcnMsIG50aFNlcXVlbmNlTnVtYmVyIGJlbG93IHNob3J0LWNpcmN1aXRzLiBJZiB3ZSBoYXZlXG4gICAgICAgIC8vIGRlY2lkZWQgdGhhdCB3ZSBhcmUgY29sbGVjdGluZyBuIHNlcXVlbmNlIG51bWJlcnMsIGl0J3MgYmVjYXVzZSBuIGlzIHNvbWVcbiAgICAgICAgLy8gcGVyY2VudGFnZSBvZiB0aGUgZXhpc3Rpbmcgc2VxdWVuY2UgbnVtYmVycy4gVGhhdCBtZWFucyB3ZSBzaG91bGQgbmV2ZXJcbiAgICAgICAgLy8gYmUgaW4gYSBzaXR1YXRpb24gd2hlcmUgd2UgYXJlIGNvbGxlY3Rpbmcgc2VxdWVuY2UgbnVtYmVycyBidXQgZG9uJ3RcbiAgICAgICAgLy8gYWN0dWFsbHkgaGF2ZSBhbnkuXG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sYXN0KClbMF07XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uIEl0IGhhbmRsZXMgY2hlY2tpbmdcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXG4gKi8gY2xhc3MgX19QUklWQVRFX0xydVNjaGVkdWxlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLmxvY2FsU3RvcmUgPSBuLCB0aGlzLnpuID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIC0xICE9PSB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgJiYgdGhpcy5qbig2ZTQpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnpuICYmICh0aGlzLnpuLmNhbmNlbCgpLCB0aGlzLnpuID0gbnVsbCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy56bjtcbiAgICB9XG4gICAgam4oZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2NoZWR1bGVkIGluICR7ZX1tc2ApLCBcbiAgICAgICAgdGhpcy56biA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImxydV9nYXJiYWdlX2NvbGxlY3Rpb25cIiAvKiBUaW1lcklkLkxydUdhcmJhZ2VDb2xsZWN0aW9uICovICwgZSwgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuem4gPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvY2FsU3RvcmUuY29sbGVjdEdhcmJhZ2UodGhpcy5nYXJiYWdlQ29sbGVjdG9yKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpID8gX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgZ2FyYmFnZSBjb2xsZWN0aW9uOiBcIiwgZSkgOiBhd2FpdCBfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5qbigzZTUpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIHN0ZXBzIGZvciBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICovIGNsYXNzIF9fUFJJVkFURV9McnVHYXJiYWdlQ29sbGVjdG9ySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLkhuID0gZSwgdGhpcy5wYXJhbXMgPSB0O1xuICAgIH1cbiAgICBjYWxjdWxhdGVUYXJnZXRDb3VudChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhuLkpuKGUpLm5leHQoKGUgPT4gTWF0aC5mbG9vcih0IC8gMTAwICogZSkpKTtcbiAgICB9XG4gICAgbnRoU2VxdWVuY2VOdW1iZXIoZSwgdCkge1xuICAgICAgICBpZiAoMCA9PT0gdCkgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX1JvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlcih0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSG4uZm9yRWFjaFRhcmdldChlLCAoZSA9PiBuLkduKGUuc2VxdWVuY2VOdW1iZXIpKSkubmV4dCgoKCkgPT4gdGhpcy5Ibi5ZbihlLCAoZSA9PiBuLkduKGUpKSkpKS5uZXh0KCgoKSA9PiBuLm1heFZhbHVlKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHMoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Ibi5yZW1vdmVUYXJnZXRzKGUsIHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhuLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKGUsIHQpO1xuICAgIH1cbiAgICBjb2xsZWN0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIC0xID09PSB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgZGlzYWJsZWRcIiksIFxuICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShUZSkpIDogdGhpcy5nZXRDYWNoZVNpemUoZSkubmV4dCgobiA9PiBuIDwgdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgQ2FjaGUgc2l6ZSAke259IGlzIGxvd2VyIHRoYW4gdGhyZXNob2xkICR7dGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZH1gKSwgXG4gICAgICAgIFRlKSA6IHRoaXMuWm4oZSwgdCkpKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSG4uZ2V0Q2FjaGVTaXplKGUpO1xuICAgIH1cbiAgICBabihlLCB0KSB7XG4gICAgICAgIGxldCBuLCByLCBpLCBzLCBvLCBhLCB1O1xuICAgICAgICBjb25zdCBjID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlVGFyZ2V0Q291bnQoZSwgdGhpcy5wYXJhbXMucGVyY2VudGlsZVRvQ29sbGVjdCkubmV4dCgodCA9PiAoXG4gICAgICAgIC8vIENhcCBhdCB0aGUgY29uZmlndXJlZCBtYXhcbiAgICAgICAgdCA+IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgQ2FwcGluZyBzZXF1ZW5jZSBudW1iZXJzIHRvIGNvbGxlY3QgZG93biB0byB0aGUgbWF4aW11bSBvZiAke3RoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3R9IGZyb20gJHt0fWApLCBcbiAgICAgICAgciA9IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIDogciA9IHQsIHMgPSBEYXRlLm5vdygpLCB0aGlzLm50aFNlcXVlbmNlTnVtYmVyKGUsIHIpKSkpLm5leHQoKHIgPT4gKG4gPSByLCBcbiAgICAgICAgbyA9IERhdGUubm93KCksIHRoaXMucmVtb3ZlVGFyZ2V0cyhlLCBuLCB0KSkpKS5uZXh0KCh0ID0+IChpID0gdCwgYSA9IERhdGUubm93KCksIFxuICAgICAgICB0aGlzLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKGUsIG4pKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKHUgPSBEYXRlLm5vdygpLCBfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYExSVSBHYXJiYWdlIENvbGxlY3Rpb25cXG5cXHRDb3VudGVkIHRhcmdldHMgaW4gJHtzIC0gY31tc1xcblxcdERldGVybWluZWQgbGVhc3QgcmVjZW50bHkgdXNlZCAke3J9IGluIGAgKyAobyAtIHMpICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHtpfSB0YXJnZXRzIGluIGAgKyAoYSAtIG8pICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHtlfSBkb2N1bWVudHMgaW4gYCArICh1IC0gYSkgKyBcIm1zXFxuXCIgKyBgVG90YWwgRHVyYXRpb246ICR7dSAtIGN9bXNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgZGlkUnVuOiAhMCxcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IHIsXG4gICAgICAgICAgICAgICAgdGFyZ2V0c1JlbW92ZWQ6IGksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzUmVtb3ZlZDogZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdMcnVHYXJiYWdlQ29sbGVjdG9yKGUsIHQpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9McnVHYXJiYWdlQ29sbGVjdG9ySW1wbChlLCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQcm92aWRlcyBMUlUgZnVuY3Rpb25hbGl0eSBmb3IgSW5kZXhlZERCIHBlcnNpc3RlbmNlLiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiTHJ1RGVsZWdhdGVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuZGIgPSBlLCB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBfX1BSSVZBVEVfbmV3THJ1R2FyYmFnZUNvbGxlY3Rvcih0aGlzLCB0KTtcbiAgICB9XG4gICAgSm4oZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5YbihlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudChlKS5uZXh0KChlID0+IHQubmV4dCgodCA9PiBlICsgdCkpKSk7XG4gICAgfVxuICAgIFhuKGUpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5ZbihlLCAoZSA9PiB7XG4gICAgICAgICAgICB0Kys7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQoZSwgdCk7XG4gICAgfVxuICAgIFluKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXIoZSwgKChlLCBuKSA9PiB0KG4pKSk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JpdGVTZW50aW5lbEtleShlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIG4pO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKGUsIHQsIG4pO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JpdGVTZW50aW5lbEtleShlLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGFueXRoaW5nIHdvdWxkIHByZXZlbnQgdGhpcyBkb2N1bWVudCBmcm9tIGJlaW5nIGdhcmJhZ2VcbiAgICAgKiBjb2xsZWN0ZWQsIGdpdmVuIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGlzIG5vdCBwcmVzZW50IGluIGFueVxuICAgICAqIHRhcmdldHMgYW5kIGhhcyBhIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kIGZvclxuICAgICAqIHRoZSBjb2xsZWN0aW9uIHJ1bi5cbiAgICAgKi8gICAgdHIoZSwgdCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uUXVldWVzQ29udGFpbktleShlLCB0KSB7XG4gICAgICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlc1N0b3JlKGUpLlgoKHIgPT4gX19QUklWQVRFX211dGF0aW9uUXVldWVDb250YWluc0tleShlLCByLCB0KS5uZXh0KChlID0+IChlICYmIChuID0gITApLCBcbiAgICAgICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCFlKSkpKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICAgICAgfShlLCB0KTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCksIHIgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5lcihlLCAoKHMsIG8pID0+IHtcbiAgICAgICAgICAgIGlmIChvIDw9IHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy50cihlLCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0KSBcbiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNpemUgYWNjb3VudGluZyByZXF1aXJlcyB1cyB0byByZWFkIGFsbCBkb2N1bWVudHMgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpKyssIG4uZ2V0RW50cnkoZSwgcykubmV4dCgoKCkgPT4gKG4ucmVtb3ZlRW50cnkocywgU25hcHNob3RWZXJzaW9uLm1pbigpKSwgXG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpLmRlbGV0ZShmdW5jdGlvbiBfX1BSSVZBVEVfc2VudGluZWxLZXkkMShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyAwLCBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUucGF0aCkgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIEByZXR1cm5zIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxuICogc3RvcmUuXG4gKi8gKHMpKSkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocikpKS5uZXh0KCgoKSA9PiBuLmFwcGx5KGUpKSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC53aXRoU2VxdWVuY2VOdW1iZXIoZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEoZSwgbik7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggZG9jdW1lbnQgaW4gdGhlIGNhY2hlIHRoYXQgaXMgJ29ycGhhbmVkJy4gT3JwaGFuZWRcbiAgICAgKiBtZWFucyBub3QgYSBwYXJ0IG9mIGFueSB0YXJnZXQsIHNvIHRoZSBvbmx5IGVudHJ5IGluIHRoZSB0YXJnZXQtZG9jdW1lbnQgaW5kZXggZm9yXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcbiAgICAgKiBudW1iZXIgZm9yIHRoZSBsYXN0IHRpbWUgdGhlIGRvY3VtZW50IHdhcyBhY2Nlc3NlZC5cbiAgICAgKi8gICAgZXIoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSk7XG4gICAgICAgIGxldCByLCBpID0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlO1xuICAgICAgICByZXR1cm4gbi5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50VGFyZ2V0c0luZGV4XCJcbiAgICAgICAgfSwgKChbZSwgbl0sIHtwYXRoOiBzLCBzZXF1ZW5jZU51bWJlcjogb30pID0+IHtcbiAgICAgICAgICAgIDAgPT09IGUgPyAoXG4gICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXG4gICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cbiAgICAgICAgICAgIGkgIT09IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSAmJiB0KG5ldyBEb2N1bWVudEtleShfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHIpKSwgaSksIFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSB0aGlzIHNlcXVlbmNlIG51bWJlci4gSXQncyB0aGUgbmV4dCBvbmUgd2VcbiAgICAgICAgICAgIC8vIG1pZ2h0IHJlcG9ydCwgaWYgd2UgZG9uJ3QgZmluZCBhbnkgdGFyZ2V0cyBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgc2VxdWVuY2UgbnVtYmVyIG11c3QgYmUgZGVmaW5lZCB3aGVuIHRoZSB0YXJnZXRJZFxuICAgICAgICAgICAgLy8gaXMgMC5cbiAgICAgICAgICAgIGkgPSBvLCByID0gcykgOiBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgaW52YWxpZCwgd2Uga25vdyB3ZSBkb24ndCBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgLy8gdGhpcyBvbmUgc2luY2Ugd2UgZm91bmQgYSB0YXJnZXQgZm9yIGl0LlxuICAgICAgICAgICAgaSA9IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHJlcG9ydCBzZXF1ZW5jZSBudW1iZXJzIGFmdGVyIGdldHRpbmcgdG8gdGhlIG5leHQga2V5LCB3ZVxuICAgICAgICAgICAgLy8gbmVlZCB0byBjaGVjayBpZiB0aGUgbGFzdCBrZXkgd2UgaXRlcmF0ZWQgb3ZlciB3YXMgYW4gb3JwaGFuZWRcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGFuZCByZXBvcnQgaXQuXG4gICAgICAgICAgICBpICE9PSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWUgJiYgdChuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChyKSksIGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5nZXRTaXplKGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKS5wdXQoZnVuY3Rpb24gX19QUklWQVRFX3NlbnRpbmVsUm93KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRhcmdldElkOiAwLFxuICAgICAgICAgICAgcGF0aDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChlLnBhdGgpLFxuICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IHRcbiAgICAgICAgfTtcbiAgICB9KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBidWZmZXIgb2YgZW50cmllcyB0byBiZSB3cml0dGVuIHRvIGEgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqIEl0IGNhbiBiZSB1c2VkIHRvIGJhdGNoIHVwIGEgc2V0IG9mIGNoYW5nZXMgdG8gYmUgd3JpdHRlbiB0byB0aGUgY2FjaGUsIGJ1dFxuICogYWRkaXRpb25hbGx5IHN1cHBvcnRzIHJlYWRpbmcgZW50cmllcyBiYWNrIHdpdGggdGhlIGBnZXRFbnRyeSgpYCBtZXRob2QsXG4gKiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSBpZiBubyBlbnRyeSBpc1xuICogYnVmZmVyZWQuXG4gKlxuICogRW50cmllcyBhZGRlZCB0byB0aGUgY2FjaGUgKm11c3QqIGJlIHJlYWQgZmlyc3QuIFRoaXMgaXMgdG8gZmFjaWxpdGF0ZVxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUgZGVsdGEgb2YgdGhlIHBlbmRpbmcgY2hhbmdlcy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgY2xhc3Mgd2FzIGltcGxlbWVudGVkIHRoZW4gcmVtb3ZlZCBmcm9tIG90aGVyIHBsYXRmb3Jtcy5cbiAqIElmIGJ5dGUtY291bnRpbmcgZW5kcyB1cCBiZWluZyBuZWVkZWQgb24gdGhlIG90aGVyIHBsYXRmb3JtcywgY29uc2lkZXJcbiAqIHBvcnRpbmcgdGhpcyBjbGFzcyBhcyBwYXJ0IG9mIHRoYXQgaW1wbGVtZW50YXRpb24gd29yay5cbiAqLyBjbGFzcyBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXkgdG8gdGhlIG5ldyBjYWNoZSBlbnRyeSB0aGF0IHNob3VsZCBiZSB3cml0dGVuLlxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgT2JqZWN0TWFwKChlID0+IGUudG9TdHJpbmcoKSksICgoZSwgdCkgPT4gZS5pc0VxdWFsKHQpKSksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICBhZGRFbnRyeShlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KGUua2V5LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgcmVtb3ZlIGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICByZW1vdmVFbnRyeShlLCB0KSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KGUsIE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkuc2V0UmVhZFRpbWUodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuIFRoZSBidWZmZXJlZCBjaGFuZ2VzIHdpbGwgZmlyc3QgYmUgY2hlY2tlZCxcbiAgICAgKiBhbmQgaWYgbm8gYnVmZmVyZWQgY2hhbmdlIGFwcGxpZXMsIHRoaXMgd2lsbCBmb3J3YXJkIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgb3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZiB3ZSBoYXZlIG5vdGhpbmdcbiAgICAgKiBjYWNoZWQuXG4gICAgICovICAgIGdldEVudHJ5KGUsIHQpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmNoYW5nZXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBuID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobikgOiB0aGlzLmdldEZyb21DYWNoZShlLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgY2FjaGVkIGRvY3VtZW50cywgaW5kZXhlZCBieSBrZXkuIElmIGFuIGVudHJ5IGNhbm5vdCBiZVxuICAgICAqICAgICBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGFuIGludmFsaWQgZG9jdW1lbnQuXG4gICAgICovICAgIGdldEVudHJpZXMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cbiAgICAgKi8gICAgYXBwbHkoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMCwgdGhpcy5hcHBseUNoYW5nZXMoZSk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi8gICAgYXNzZXJ0Tm90QXBwbGllZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZTtcbiAgICB9XG4gICAgc2V0SW5kZXhNYW5hZ2VyKGUpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyaWVzIHRvIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICBhZGRFbnRyeShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkucHV0KG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZG9jdW1lbnQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5kZWxldGUoXG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIHZpYSB0aGUgcHJpbWFyeSBrZXkgb2ZcbiAqIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZGJSZWFkVGltZUtleShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHJldHVybiBbIFxuICAgICAgICAgICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAgICAgICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gbltuLmxlbmd0aCAtIDJdLCBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleSh0KSwgXG4gICAgICAgICAgICAvKiBkb2N1bWVudCBpZCAqLyBuW24ubGVuZ3RoIC0gMV0gXTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyBvbiB0aGVcbiAqIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRDb2xsZWN0aW9uR3JvdXBJbmRleGAgaW5kZXguXG4gKi8gKHQsIG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY3VycmVudCBjYWNoZSBzaXplLlxuICAgICAqXG4gICAgICogQ2FsbGVycyB0byBgYWRkRW50cnkoKWAgYW5kIGByZW1vdmVFbnRyeSgpYCAqbXVzdCogY2FsbCB0aGlzIGFmdGVyd2FyZHMgdG8gdXBkYXRlIHRoZVxuICAgICAqIGNhY2hlJ3MgbWV0YWRhdGEuXG4gICAgICovICAgIHVwZGF0ZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEoZSkubmV4dCgobiA9PiAobi5ieXRlU2l6ZSArPSB0LCB0aGlzLm5yKGUsIG4pKSkpO1xuICAgIH1cbiAgICBnZXRFbnRyeShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gTXV0YWJsZURvY3VtZW50Lm5ld0ludmFsaWREb2N1bWVudCh0KTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5aKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KF9fUFJJVkFURV9kYktleSh0KSlcbiAgICAgICAgfSwgKChlLCByKSA9PiB7XG4gICAgICAgICAgICBuID0gdGhpcy5ycih0LCByKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZS5cbiAgICAgKi8gICAgaXIoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IHtcbiAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICBkb2N1bWVudDogTXV0YWJsZURvY3VtZW50Lm5ld0ludmFsaWREb2N1bWVudCh0KVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLm9ubHkoX19QUklWQVRFX2RiS2V5KHQpKVxuICAgICAgICB9LCAoKGUsIHIpID0+IHtcbiAgICAgICAgICAgIG4gPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMucnIodCwgciksXG4gICAgICAgICAgICAgICAgc2l6ZTogX19QUklWQVRFX2RiRG9jdW1lbnRTaXplKHIpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNyKGUsIHQsICgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMucnIoZSwgdCk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQoZSwgcik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBkb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovICAgIF9yKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIHIgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5zcihlLCB0LCAoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnJyKGUsIHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KGUsIGkpLCByID0gci5pbnNlcnQoZSwgX19QUklWQVRFX2RiRG9jdW1lbnRTaXplKHQpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh7XG4gICAgICAgICAgICBkb2N1bWVudHM6IG4sXG4gICAgICAgICAgICBhcjogclxuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICBzcihlLCB0LCBuKSB7XG4gICAgICAgIGlmICh0LmlzRW1wdHkoKSkgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGxldCByID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfZGJLZXlDb21wYXJhdG9yKTtcbiAgICAgICAgdC5mb3JFYWNoKChlID0+IHIgPSByLmFkZChlKSkpO1xuICAgICAgICBjb25zdCBpID0gSURCS2V5UmFuZ2UuYm91bmQoX19QUklWQVRFX2RiS2V5KHIuZmlyc3QoKSksIF9fUFJJVkFURV9kYktleShyLmxhc3QoKSkpLCBzID0gci5nZXRJdGVyYXRvcigpO1xuICAgICAgICBsZXQgbyA9IHMuZ2V0TmV4dCgpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLlooe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IGlcbiAgICAgICAgfSwgKChlLCB0LCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKFsgLi4udC5wcmVmaXhQYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5kb2N1bWVudElkIF0pO1xuICAgICAgICAgICAgLy8gR28gdGhyb3VnaCBrZXlzIG5vdCBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoO28gJiYgX19QUklWQVRFX2RiS2V5Q29tcGFyYXRvcihvLCBpKSA8IDA7ICkgbihvLCBudWxsKSwgbyA9IHMuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgbyAmJiBvLmlzRXF1YWwoaSkgJiYgKFxuICAgICAgICAgICAgLy8gS2V5IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgbihvLCB0KSwgbyA9IHMuaGFzTmV4dCgpID8gcy5nZXROZXh0KCkgOiBudWxsKSwgXG4gICAgICAgICAgICAvLyBTa2lwIHRvIHRoZSBuZXh0IGtleSAoaWYgdGhlcmUgaXMgb25lKS5cbiAgICAgICAgICAgIG8gPyByLlcoX19QUklWQVRFX2RiS2V5KG8pKSA6IHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGtleXMgYXJlIG5vdCBpbiB0aGUgY2FjaGUuIE9uZSBjYXNlIHdoZXJlIGBpdGVyYXRlYFxuICAgICAgICAgICAgLy8gYWJvdmUgd29uJ3QgZ28gdGhyb3VnaCB0aGVtIGlzIHdoZW4gdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgICAgICAgICAgZm9yICg7bzsgKSBuKG8sIG51bGwpLCBvID0gcy5oYXNOZXh0KCkgPyBzLmdldE5leHQoKSA6IG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0LnBhdGgsIG8gPSBbIHMucG9wTGFzdCgpLnRvQXJyYXkoKSwgcy5sYXN0U2VnbWVudCgpLCBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleShuLnJlYWRUaW1lKSwgbi5kb2N1bWVudEtleS5wYXRoLmlzRW1wdHkoKSA/IFwiXCIgOiBuLmRvY3VtZW50S2V5LnBhdGgubGFzdFNlZ21lbnQoKSBdLCBfID0gWyBzLnBvcExhc3QoKS50b0FycmF5KCksIHMubGFzdFNlZ21lbnQoKSwgWyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgXSwgXCJcIiBdO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLkcoSURCS2V5UmFuZ2UuYm91bmQobywgXywgITApKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIG51bGwgPT0gaSB8fCBpLmluY3JlbWVudERvY3VtZW50UmVhZENvdW50KGUubGVuZ3RoKTtcbiAgICAgICAgICAgIGxldCBuID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5ycihEb2N1bWVudEtleS5mcm9tU2VnbWVudHMoaS5wcmVmaXhQYXRoLmNvbmNhdChpLmNvbGxlY3Rpb25Hcm91cCwgaS5kb2N1bWVudElkKSksIGkpO1xuICAgICAgICAgICAgICAgIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgKF9fUFJJVkFURV9xdWVyeU1hdGNoZXModCwgZSkgfHwgci5oYXMoZS5rZXkpKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gRWl0aGVyIHRoZSBkb2N1bWVudCBtYXRjaGVzIHRoZSBnaXZlbiBxdWVyeSwgb3IgaXQgaXMgbXV0YXRlZC5cbiAgICAgICAgICAgICAgICBuID0gbi5pbnNlcnQoZS5rZXksIGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9kYkNvbGxlY3Rpb25Hcm91cEtleSh0LCBuKSwgbyA9IF9fUFJJVkFURV9kYkNvbGxlY3Rpb25Hcm91cEtleSh0LCBJbmRleE9mZnNldC5tYXgoKSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuWih7XG4gICAgICAgICAgICBpbmRleDogXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLmJvdW5kKHMsIG8sICEwKVxuICAgICAgICB9LCAoKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLnJyKERvY3VtZW50S2V5LmZyb21TZWdtZW50cyh0LnByZWZpeFBhdGguY29uY2F0KHQuY29sbGVjdGlvbkdyb3VwLCB0LmRvY3VtZW50SWQpKSwgdCk7XG4gICAgICAgICAgICBpID0gaS5pbnNlcnQocy5rZXksIHMpLCBpLnNpemUgPT09IHIgJiYgbi5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyKHRoaXMsICEhZSAmJiBlLnRyYWNrUmVtb3ZhbHMpO1xuICAgIH1cbiAgICBnZXRTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEoZSkubmV4dCgoZSA9PiBlLmJ5dGVTaXplKSk7XG4gICAgfVxuICAgIGdldE1ldGFkYXRhKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudEdsb2JhbFN0b3JlKGUpLmdldChcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCIpLm5leHQoKGUgPT4gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhZSksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICBucihlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRHbG9iYWxTdG9yZShlKS5wdXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBgZGJSZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBjb3JyZXNwb25kcyB0byB0aGUgZm9ybWF0IHVzZWQgZm9yIHNlbnRpbmVsIGRlbGV0ZXMpLlxuICAgICAqLyAgICBycihlLCB0KSB7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX2Zyb21EYlJlbW90ZURvY3VtZW50KHRoaXMuc2VyaWFsaXplciwgdCk7XG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRoZSBkb2N1bWVudCBpcyBhIHNlbnRpbmVsIHJlbW92YWwgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXG4gICAgICAgICAgICAvLyBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlLmlzTm9Eb2N1bWVudCgpICYmIGUudmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkpKSByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTXV0YWJsZURvY3VtZW50Lm5ld0ludmFsaWREb2N1bWVudChlKTtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlSW1wbChlKTtcbn1cblxuLyoqXG4gKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIFVubGlrZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIsIHRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gY29tcHV0ZXMgdGhlIHNpemVcbiAqIGRlbHRhIGZvciBhbGwgc3VibWl0dGVkIGNoYW5nZXMuIFRoaXMgYXZvaWRzIGhhdmluZyB0byByZS1yZWFkIGFsbCBkb2N1bWVudHMgZnJvbSBJbmRleGVkRGJcbiAqIHdoZW4gd2UgYXBwbHkgdGhlIGNoYW5nZXMuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIGV4dGVuZHMgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudENhY2hlIC0gVGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUgdG8gYXBwbHkgdGhlIGNoYW5nZXMgdG8uXG4gICAgICogQHBhcmFtIHRyYWNrUmVtb3ZhbHMgLSBXaGV0aGVyIHRvIGNyZWF0ZSBzZW50aW5lbCBkZWxldGVzIHRoYXQgY2FuIGJlIHRyYWNrZWQgYnlcbiAgICAgKiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy51ciA9IGUsIHRoaXMudHJhY2tSZW1vdmFscyA9IHQsIFxuICAgICAgICAvLyBBIG1hcCBvZiBkb2N1bWVudCBzaXplcyBhbmQgcmVhZCB0aW1lcyBwcmlvciB0byBhcHBseWluZyB0aGUgY2hhbmdlcyBpblxuICAgICAgICAvLyB0aGlzIGJ1ZmZlci5cbiAgICAgICAgdGhpcy5jciA9IG5ldyBPYmplY3RNYXAoKGUgPT4gZS50b1N0cmluZygpKSwgKChlLCB0KSA9PiBlLmlzRXF1YWwodCkpKTtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBsZXQgbiA9IDAsIHIgPSBuZXcgU29ydGVkU2V0KCgoZSwgdCkgPT4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5jYW5vbmljYWxTdHJpbmcoKSwgdC5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgoaSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuY3IuZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKHQucHVzaCh0aGlzLnVyLnJlbW92ZUVudHJ5KGUsIGksIG8ucmVhZFRpbWUpKSwgcy5pc1ZhbGlkRG9jdW1lbnQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfdG9EYlJlbW90ZURvY3VtZW50KHRoaXMudXIuc2VyaWFsaXplciwgcyk7XG4gICAgICAgICAgICAgICAgciA9IHIuYWRkKGkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUoXyk7XG4gICAgICAgICAgICAgICAgbiArPSBhIC0gby5zaXplLCB0LnB1c2godGhpcy51ci5hZGRFbnRyeShlLCBpLCBfKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG4gLT0gby5zaXplLCB0aGlzLnRyYWNrUmVtb3ZhbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byB0cmFjayByZW1vdmFscywgd2Ugc3RvcmUgYSBcInNlbnRpbmVsIGRlbGV0ZVwiIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIHZlcnNpb24gb2YgMCBhbmQgaWdub3JlZCBieSBgbWF5YmVEZWNvZGVEb2N1bWVudCgpYCBidXRcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3RvRGJSZW1vdGVEb2N1bWVudCh0aGlzLnVyLnNlcmlhbGl6ZXIsIHMuY29udmVydFRvTm9Eb2N1bWVudChTbmFwc2hvdFZlcnNpb24ubWluKCkpKTtcbiAgICAgICAgICAgICAgICB0LnB1c2godGhpcy51ci5hZGRFbnRyeShlLCBpLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgci5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIHQucHVzaCh0aGlzLnVyLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCBuKSk7XG4gICAgICAgIH0pKSwgdC5wdXNoKHRoaXMudXIudXBkYXRlTWV0YWRhdGEoZSwgbikpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcih0KTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKGUsIHQpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZSBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy51ci5pcihlLCB0KS5uZXh0KChlID0+ICh0aGlzLmNyLnNldCh0LCB7XG4gICAgICAgICAgICBzaXplOiBlLnNpemUsXG4gICAgICAgICAgICByZWFkVGltZTogZS5kb2N1bWVudC5yZWFkVGltZVxuICAgICAgICB9KSwgZS5kb2N1bWVudCkpKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKGUsIHQpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZVxuICAgICAgICAvLyBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy51ci5fcihlLCB0KS5uZXh0KCgoe2RvY3VtZW50czogZSwgYXI6IHR9KSA9PiAoXG4gICAgICAgIC8vIE5vdGU6IGBnZXRBbGxGcm9tQ2FjaGVgIHJldHVybnMgdHdvIG1hcHMgaW5zdGVhZCBvZiBhIHNpbmdsZSBtYXAgZnJvbVxuICAgICAgICAvLyBrZXlzIHRvIGBEb2N1bWVudFNpemVFbnRyeWBzLiBUaGlzIGlzIHRvIGFsbG93IHJldHVybmluZyB0aGVcbiAgICAgICAgLy8gYE11dGFibGVEb2N1bWVudE1hcGAgZGlyZWN0bHksIHdpdGhvdXQgYSBjb252ZXJzaW9uLlxuICAgICAgICB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNyLnNldCh0LCB7XG4gICAgICAgICAgICAgICAgc2l6ZTogbixcbiAgICAgICAgICAgICAgICByZWFkVGltZTogZS5nZXQodCkucmVhZFRpbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIGUpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRHbG9iYWxTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcmVtb3RlRG9jdW1lbnRzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJyZW1vdGVEb2N1bWVudHNWMTRcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIG9uIHRoZVxuICogYERiUmVtb3RlRG9jdW1lbnREb2N1bWVudEtleUluZGV4YCBpbmRleC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGJLZXkoZSkge1xuICAgIGNvbnN0IHQgPSBlLnBhdGgudG9BcnJheSgpO1xuICAgIHJldHVybiBbIFxuICAgIC8qIHByZWZpeCBwYXRoICovIHQuc2xpY2UoMCwgdC5sZW5ndGggLSAyKSwgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyB0W3QubGVuZ3RoIC0gMl0sIFxuICAgIC8qIGRvY3VtZW50IGlkICovIHRbdC5sZW5ndGggLSAxXSBdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZGJDb2xsZWN0aW9uR3JvdXBLZXkoZSwgdCkge1xuICAgIGNvbnN0IG4gPSB0LmRvY3VtZW50S2V5LnBhdGgudG9BcnJheSgpO1xuICAgIHJldHVybiBbIFxuICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gZSwgX19QUklWQVRFX3RvRGJUaW1lc3RhbXBLZXkodC5yZWFkVGltZSksIFxuICAgIC8qIHByZWZpeCBwYXRoICovIG4uc2xpY2UoMCwgbi5sZW5ndGggLSAyKSwgXG4gICAgLyogZG9jdW1lbnQgaWQgKi8gbi5sZW5ndGggPiAwID8gbltuLmxlbmd0aCAtIDFdIDogXCJcIiBdO1xufVxuXG4vKipcbiAqIENvbXBhcmF0b3IgdGhhdCBjb21wYXJlcyBkb2N1bWVudCBrZXlzIGFjY29yZGluZyB0byB0aGUgcHJpbWFyeSBrZXkgc29ydGluZ1xuICogdXNlZCBieSB0aGUgYERiUmVtb3RlRG9jdW1lbnREb2N1bWVudGAgc3RvcmUgKGJ5IHByZWZpeCBwYXRoLCBjb2xsZWN0aW9uIGlkXG4gKiBhbmQgdGhlbiBkb2N1bWVudCBJRCkuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGJLZXlDb21wYXJhdG9yKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZS5wYXRoLnRvQXJyYXkoKSwgciA9IHQucGF0aC50b0FycmF5KCk7XG4gICAgLy8gVGhlIG9yZGVyaW5nIGlzIGJhc2VkIG9uIGh0dHBzOi8vY2hyb21pdW0uZ29vZ2xlc291cmNlLmNvbS9jaHJvbWl1bS9ibGluay8rL2ZlNWMyMWZlZjk0ZGFlNzFjMWMzMzQ0Nzc1YjhkOGE3ZjdlNmQ5ZWMvU291cmNlL21vZHVsZXMvaW5kZXhlZGRiL0lEQktleS5jcHAjNzRcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBuLmxlbmd0aCAtIDIgJiYgZSA8IHIubGVuZ3RoIC0gMjsgKytlKSBpZiAoaSA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG5bZV0sIHJbZV0pLCBcbiAgICBpKSByZXR1cm4gaTtcbiAgICByZXR1cm4gaSA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4ubGVuZ3RoLCByLmxlbmd0aCksIGkgfHwgKGkgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuW24ubGVuZ3RoIC0gMl0sIHJbci5sZW5ndGggLSAyXSksIFxuICAgIGkgfHwgX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IobltuLmxlbmd0aCAtIDFdLCByW3IubGVuZ3RoIC0gMV0pKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxuICogMS4gIEluaXRpYWwgdmVyc2lvbiBpbmNsdWRpbmcgTXV0YXRpb24gUXVldWUsIFF1ZXJ5IENhY2hlLCBhbmQgUmVtb3RlXG4gKiAgICAgRG9jdW1lbnQgQ2FjaGVcbiAqIDIuICBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXG4gKiAgICAgbG9uZ2VyIHJlcXVpcmVkIGJlY2F1c2UgbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAqIDMuICBEcm9wcGVkIGFuZCByZS1jcmVhdGVkIFF1ZXJ5IENhY2hlIHRvIGRlYWwgd2l0aCBjYWNoZSBjb3JydXB0aW9uIHJlbGF0ZWRcbiAqICAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcbiAqICAgICBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtaW9zLXNkay9pc3N1ZXMvMTU0OFxuICogNC4gIE11bHRpLVRhYiBTdXBwb3J0LlxuICogNS4gIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxuICogNi4gIENyZWF0ZSBkb2N1bWVudCBnbG9iYWwgZm9yIHRyYWNraW5nIGRvY3VtZW50IGNhY2hlIHNpemUuXG4gKiA3LiAgRW5zdXJlIGV2ZXJ5IGNhY2hlZCBkb2N1bWVudCBoYXMgYSBzZW50aW5lbCByb3cgd2l0aCBhIHNlcXVlbmNlIG51bWJlci5cbiAqIDguICBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cbiAqIDkuICBDaGFuZ2UgUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIHN0b3JlIHRvIGJlIGtleWVkIGJ5IHJlYWRUaW1lIHJhdGhlciB0aGFuXG4gKiAgICAgYW4gYXV0by1pbmNyZW1lbnRpbmcgSUQuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIEluZGV4LUZyZWUgcXVlcmllcy5cbiAqIDEwLiBSZXdyaXRlIHRoZSBjYW5vbmljYWwgSURzIHRvIHRoZSBleHBsaWNpdCBQcm90b2J1Zi1iYXNlZCBmb3JtYXQuXG4gKiAxMS4gQWRkIGJ1bmRsZXMgYW5kIG5hbWVkX3F1ZXJpZXMgZm9yIGJ1bmRsZSBzdXBwb3J0LlxuICogMTIuIEFkZCBkb2N1bWVudCBvdmVybGF5cy5cbiAqIDEzLiBSZXdyaXRlIHRoZSBrZXlzIG9mIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgdG8gYWxsb3cgZm9yIGVmZmljaWVudFxuICogICAgIGRvY3VtZW50IGxvb2t1cCB2aWEgYGdldEFsbCgpYC5cbiAqIDE0LiBBZGQgb3ZlcmxheXMuXG4gKiAxNS4gQWRkIGluZGV4aW5nIHN1cHBvcnQuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbCB2aWV3IChvdmVybGF5KSBvZiBhIGRvY3VtZW50LCBhbmQgdGhlIGZpZWxkcyB0aGF0IGFyZVxuICogbG9jYWxseSBtdXRhdGVkLlxuICovXG5jbGFzcyBPdmVybGF5ZWREb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkcyB0aGF0IGFyZSBsb2NhbGx5IG11dGF0ZWQgYnkgcGF0Y2ggbXV0YXRpb25zLlxuICAgICAqXG4gICAgICogSWYgdGhlIG92ZXJsYXllZFx0ZG9jdW1lbnQgaXMgZnJvbSBzZXQgb3IgZGVsZXRlIG11dGF0aW9ucywgdGhpcyBpcyBgbnVsbGAuXG4gICAgICogSWYgdGhlcmUgaXMgbm8gb3ZlcmxheSAobXV0YXRpb24pIGZvciB0aGUgZG9jdW1lbnQsIHRoaXMgaXMgYW4gZW1wdHkgYEZpZWxkTWFza2AuXG4gICAgICovXG4gICAgdCkge1xuICAgICAgICB0aGlzLm92ZXJsYXllZERvY3VtZW50ID0gZSwgdGhpcy5tdXRhdGVkRmllbGRzID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVhZG9ubHkgdmlldyBvZiB0aGUgbG9jYWwgc3RhdGUgb2YgYWxsIGRvY3VtZW50cyB3ZSdyZSB0cmFja2luZyAoaS5lLiB3ZVxuICogaGF2ZSBhIGNhY2hlZCB2ZXJzaW9uIGluIHJlbW90ZURvY3VtZW50Q2FjaGUgb3IgbG9jYWwgbXV0YXRpb25zIGZvciB0aGVcbiAqIGRvY3VtZW50KS4gVGhlIHZpZXcgaXMgY29tcHV0ZWQgYnkgYXBwbHlpbmcgdGhlIG11dGF0aW9ucyBpbiB0aGVcbiAqIE11dGF0aW9uUXVldWUgdG8gdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi8gY2xhc3MgTG9jYWxEb2N1bWVudHNWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IGUsIHRoaXMubXV0YXRpb25RdWV1ZSA9IHQsIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUgPSBuLCBcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IGlkZW50aWZpZWQgYnkgYGtleWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBMb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBvciBudWxsIGlmIHdlIGRvbid0IGhhdmUgYW55IGNhY2hlZFxuICAgICAqIHN0YXRlIGZvciBpdC5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnQoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXkoZSwgdCkubmV4dCgociA9PiAobiA9IHIsIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeShlLCB0KSkpKS5uZXh0KChlID0+IChudWxsICE9PSBuICYmIF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcobi5tdXRhdGlvbiwgZSwgRmllbGRNYXNrLmVtcHR5KCksIFRpbWVzdGFtcC5ub3coKSksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgaWRlbnRpZmllZCBieSBga2V5c2AuXG4gICAgICpcbiAgICAgKiBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzdGF0ZSBmb3IgYSBkb2N1bWVudCBpbiBga2V5c2AsIGEgTm9Eb2N1bWVudCB3aWxsXG4gICAgICogYmUgc3RvcmVkIGZvciB0aGF0IGtleSBpbiB0aGUgcmVzdWx0aW5nIHNldC5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyaWVzKGUsIHQpLm5leHQoKHQgPT4gdGhpcy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyhlLCB0LCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkubmV4dCgoKCkgPT4gdCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8gYGdldERvY3VtZW50c2AsIGJ1dCBjcmVhdGVzIHRoZSBsb2NhbCB2aWV3IGZyb20gdGhlIGdpdmVuXG4gICAgICogYGJhc2VEb2NzYCB3aXRob3V0IHJldHJpZXZpbmcgZG9jdW1lbnRzIGZyb20gdGhlIGxvY2FsIHN0b3JlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIHRoaXMgb3BlcmF0aW9uIGlzIHNjb3BlZCB0by5cbiAgICAgKiBAcGFyYW0gZG9jcyAtIFRoZSBkb2N1bWVudHMgdG8gYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIGdldCB0aGUgbG9jYWwgdmlld3MuXG4gICAgICogQHBhcmFtIGV4aXN0ZW5jZVN0YXRlQ2hhbmdlZCAtIFRoZSBzZXQgb2YgZG9jdW1lbnQga2V5cyB3aG9zZSBleGlzdGVuY2Ugc3RhdGVcbiAgICAgKiAgIGlzIGNoYW5nZWQuIFRoaXMgaXMgdXNlZnVsIHRvIGRldGVybWluZSBpZiBzb21lIGRvY3VtZW50cyBvdmVybGF5IG5lZWRzXG4gICAgICogICB0byBiZSByZWNhbGN1bGF0ZWQuXG4gICAgICovICAgIGdldExvY2FsVmlld09mRG9jdW1lbnRzKGUsIHQsIG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9wdWxhdGVPdmVybGF5cyhlLCByLCB0KS5uZXh0KCgoKSA9PiB0aGlzLmNvbXB1dGVWaWV3cyhlLCB0LCByLCBuKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGxldCB0ID0gZG9jdW1lbnRNYXAoKTtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdCA9IHQuaW5zZXJ0KGUsIG4ub3ZlcmxheWVkRG9jdW1lbnQpO1xuICAgICAgICAgICAgfSkpLCB0O1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb3ZlcmxheWVkIGRvY3VtZW50cyBmb3IgdGhlIGdpdmVuIGRvY3VtZW50IG1hcCwgd2hpY2ggd2lsbCBpbmNsdWRlXG4gICAgICogdGhlIGxvY2FsIHZpZXcgb2YgdGhvc2UgZG9jdW1lbnRzIGFuZCBhIGBGaWVsZE1hc2tgIGluZGljYXRpbmcgd2hpY2ggZmllbGRzXG4gICAgICogYXJlIG11dGF0ZWQgbG9jYWxseSwgYG51bGxgIGlmIG92ZXJsYXkgaXMgYSBTZXQgb3IgRGVsZXRlIG11dGF0aW9uLlxuICAgICAqLyAgICBnZXRPdmVybGF5ZWREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9wdWxhdGVPdmVybGF5cyhlLCBuLCB0KS5uZXh0KCgoKSA9PiB0aGlzLmNvbXB1dGVWaWV3cyhlLCB0LCBuLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgb3ZlcmxheXMgZm9yIHtAY29kZSBkb2NzfSBhbmQgYWRkcyB0aGVtIHRvIHByb3ZpZGVkIG92ZXJsYXkgbWFwXG4gICAgICogaWYgdGhlIG1hcCBkb2VzIG5vdCBhbHJlYWR5IGNvbnRhaW4gYW4gZW50cnkgZm9yIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkuXG4gICAgICovICAgIHBvcHVsYXRlT3ZlcmxheXMoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5oYXMoZSkgfHwgci5wdXNoKGUpO1xuICAgICAgICB9KSksIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheXMoZSwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdC5zZXQoZSwgbik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgZm9yIHRoZSBnaXZlbiBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jcyAtIFRoZSBkb2N1bWVudHMgdG8gY29tcHV0ZSB2aWV3cyBmb3IuIEl0IGFsc28gaGFzIHRoZSBiYXNlXG4gICAgICogICB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIG92ZXJsYXlzIC0gVGhlIG92ZXJsYXlzIHRoYXQgbmVlZCB0byBiZSBhcHBsaWVkIHRvIHRoZSBnaXZlbiBiYXNlXG4gICAgICogICB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIGV4aXN0ZW5jZVN0YXRlQ2hhbmdlZCAtIEEgc2V0IG9mIGRvY3VtZW50cyB3aG9zZSBleGlzdGVuY2Ugc3RhdGVzXG4gICAgICogICBtaWdodCBoYXZlIGNoYW5nZWQuIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgd2UgbmVlZCB0byByZS1jYWxjdWxhdGVcbiAgICAgKiAgIG92ZXJsYXlzIGZyb20gbXV0YXRpb24gcXVldWVzLlxuICAgICAqIEByZXR1cm4gQSBtYXAgcmVwcmVzZW50cyB0aGUgbG9jYWwgZG9jdW1lbnRzIHZpZXcuXG4gICAgICovICAgIGNvbXB1dGVWaWV3cyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwKCksIG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3T3ZlcmxheWVkRG9jdW1lbnRNYXAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwKCk7XG4gICAgICAgIH0oKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBuLmdldCh0LmtleSk7XG4gICAgICAgICAgICAvLyBSZWNhbGN1bGF0ZSBhbiBvdmVybGF5IGlmIHRoZSBkb2N1bWVudCdzIGV4aXN0ZW5jZSBzdGF0ZSBjaGFuZ2VkIGR1ZSB0b1xuICAgICAgICAgICAgLy8gYSByZW1vdGUgZXZlbnQgKmFuZCogdGhlIG92ZXJsYXkgaXMgYSBQYXRjaE11dGF0aW9uLiBUaGlzIGlzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGV4aXN0ZW5jZSBzdGF0ZSBjYW4gY2hhbmdlIGlmIHNvbWUgcGF0Y2ggbXV0YXRpb24nc1xuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9ucyBhcmUgbWV0LlxuICAgICAgICAgICAgLy8gTk9URTogd2UgcmVjYWxjdWxhdGUgd2hlbiBgb3ZlcmxheWAgaXMgdW5kZWZpbmVkIGFzIHdlbGwsIGJlY2F1c2UgdGhlcmVcbiAgICAgICAgICAgIC8vIG1pZ2h0IGJlIGEgcGF0Y2ggbXV0YXRpb24gd2hvc2UgcHJlY29uZGl0aW9uIGRvZXMgbm90IG1hdGNoIGJlZm9yZSB0aGVcbiAgICAgICAgICAgIC8vIGNoYW5nZSAoaGVuY2Ugb3ZlcmxheSBpcyB1bmRlZmluZWQpLCBidXQgd291bGQgbm93IG1hdGNoLlxuICAgICAgICAgICAgICAgICAgICAgICAgci5oYXModC5rZXkpICYmICh2b2lkIDAgPT09IG8gfHwgby5tdXRhdGlvbiBpbnN0YW5jZW9mIF9fUFJJVkFURV9QYXRjaE11dGF0aW9uKSA/IGkgPSBpLmluc2VydCh0LmtleSwgdCkgOiB2b2lkIDAgIT09IG8gPyAocy5zZXQodC5rZXksIG8ubXV0YXRpb24uZ2V0RmllbGRNYXNrKCkpLCBcbiAgICAgICAgICAgIF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcoby5tdXRhdGlvbiwgdCwgby5tdXRhdGlvbi5nZXRGaWVsZE1hc2soKSwgVGltZXN0YW1wLm5vdygpKSkgOiBcbiAgICAgICAgICAgIC8vIG5vIG92ZXJsYXkgZXhpc3RzXG4gICAgICAgICAgICAvLyBVc2luZyBFTVBUWSB0byBpbmRpY2F0ZSB0aGVyZSBpcyBubyBvdmVybGF5IGZvciB0aGUgZG9jdW1lbnQuXG4gICAgICAgICAgICBzLnNldCh0LmtleSwgRmllbGRNYXNrLmVtcHR5KCkpO1xuICAgICAgICB9KSksIHRoaXMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXMoZSwgaSkubmV4dCgoZSA9PiAoZS5mb3JFYWNoKCgoZSwgdCkgPT4gcy5zZXQoZSwgdCkpKSwgXG4gICAgICAgIHQuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgcmV0dXJuIG8uc2V0KGUsIG5ldyBPdmVybGF5ZWREb2N1bWVudCh0LCBudWxsICE9PSAobiA9IHMuZ2V0KGUpKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogbnVsbCkpO1xuICAgICAgICB9KSksIG8pKSk7XG4gICAgfVxuICAgIHJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpO1xuICAgICAgICAvLyBBIHJldmVyc2UgbG9va3VwIG1hcCBmcm9tIGJhdGNoIGlkIHRvIHRoZSBkb2N1bWVudHMgd2l0aGluIHRoYXQgYmF0Y2guXG4gICAgICAgICAgICAgICAgbGV0IHIgPSBuZXcgU29ydGVkTWFwKCgoZSwgdCkgPT4gZSAtIHQpKSwgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyhlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSBpLmtleXMoKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdC5nZXQoZSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHMpIHJldHVybjtcbiAgICAgICAgICAgICAgICBsZXQgbyA9IG4uZ2V0KGUpIHx8IEZpZWxkTWFzay5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIG8gPSBpLmFwcGx5VG9Mb2NhbFZpZXcocywgbyksIG4uc2V0KGUsIG8pO1xuICAgICAgICAgICAgICAgIGNvbnN0IF8gPSAoci5nZXQoaS5iYXRjaElkKSB8fCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkuYWRkKGUpO1xuICAgICAgICAgICAgICAgIHIgPSByLmluc2VydChpLmJhdGNoSWQsIF8pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IFtdLCBvID0gci5nZXRSZXZlcnNlSXRlcmF0b3IoKTtcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgaW4gZGVzY2VuZGluZyBvcmRlciBvZiBiYXRjaCBJRHMsIGFuZCBza2lwIGRvY3VtZW50cyB0aGF0IGFyZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBzYXZlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoO28uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gby5nZXROZXh0KCksIF8gPSByLmtleSwgYSA9IHIudmFsdWUsIHUgPSBfX1BSSVZBVEVfbmV3TXV0YXRpb25NYXAoKTtcbiAgICAgICAgICAgICAgICBhLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWkuaGFzKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2NhbGN1bGF0ZU92ZXJsYXlNdXRhdGlvbih0LmdldChlKSwgbi5nZXQoZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gciAmJiB1LnNldChlLCByKSwgaSA9IGkuYWRkKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpLCBzLnB1c2godGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5zYXZlT3ZlcmxheXMoZSwgXywgdSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHMpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNhbGN1bGF0ZXMgb3ZlcmxheXMgYnkgcmVhZGluZyB0aGUgZG9jdW1lbnRzIGZyb20gcmVtb3RlIGRvY3VtZW50IGNhY2hlXG4gICAgICogZmlyc3QsIGFuZCBzYXZlcyB0aGVtIGFmdGVyIHRoZXkgYXJlIGNhbGN1bGF0ZWQuXG4gICAgICovICAgIHJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyaWVzKGUsIHQpLm5leHQoKHQgPT4gdGhpcy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyhlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHZpZXcgb2YgYWxsIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdG8gbWF0Y2ggZG9jdW1lbnRzIGFnYWluc3QuXG4gICAgICogQHBhcmFtIG9mZnNldCAtIFJlYWQgdGltZSBhbmQga2V5IHRvIHN0YXJ0IHNjYW5uaW5nIGJ5IChleGNsdXNpdmUpLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IC0gQSBvcHRpb25hbCB0cmFja2VyIHRvIGtlZXAgYSByZWNvcmQgb2YgaW1wb3J0YW50IGRldGFpbHNcbiAgICAgKiAgIGR1cmluZyBkYXRhYmFzZSBsb2NhbCBxdWVyeSBleGVjdXRpb24uXG4gICAgICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiwgcikge1xuICAgICAgICAvKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIHNpbmdsZSBkb2N1bWVudCBieSBwYXRoIChyYXRoZXIgdGhhbiBhXG4gKiBjb2xsZWN0aW9uKS5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2lzRG9jdW1lbnRRdWVyeSQxKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KGUucGF0aCkgJiYgbnVsbCA9PT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gZS5maWx0ZXJzLmxlbmd0aDtcbiAgICAgICAgfSh0KSA/IHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5KGUsIHQucGF0aCkgOiBfX1BSSVZBVEVfaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSh0KSA/IHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeShlLCB0LCBuLCByKSA6IHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkoZSwgdCwgbiwgcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgY29sbGVjdGlvbiBncm91cCwgcmV0dXJucyB0aGUgbmV4dCBkb2N1bWVudHMgdGhhdCBmb2xsb3cgdGhlIHByb3ZpZGVkIG9mZnNldCwgYWxvbmdcbiAgICAgKiB3aXRoIGFuIHVwZGF0ZWQgYmF0Y2ggSUQuXG4gICAgICpcbiAgICAgKiA8cD5UaGUgZG9jdW1lbnRzIHJldHVybmVkIGJ5IHRoaXMgbWV0aG9kIGFyZSBvcmRlcmVkIGJ5IHJlbW90ZSB2ZXJzaW9uIGZyb20gdGhlIHByb3ZpZGVkXG4gICAgICogb2Zmc2V0LiBJZiB0aGVyZSBhcmUgbm8gbW9yZSByZW1vdGUgZG9jdW1lbnRzIGFmdGVyIHRoZSBwcm92aWRlZCBvZmZzZXQsIGRvY3VtZW50cyB3aXRoXG4gICAgICogbXV0YXRpb25zIGluIG9yZGVyIG9mIGJhdGNoIGlkIGZyb20gdGhlIG9mZnNldCBhcmUgcmV0dXJuZWQuIFNpbmNlIGFsbCBkb2N1bWVudHMgaW4gYSBiYXRjaCBhcmVcbiAgICAgKiByZXR1cm5lZCB0b2dldGhlciwgdGhlIHRvdGFsIG51bWJlciBvZiBkb2N1bWVudHMgcmV0dXJuZWQgY2FuIGV4Y2VlZCB7QGNvZGUgY291bnR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uXG4gICAgICogQHBhcmFtIGNvbGxlY3Rpb25Hcm91cCBUaGUgY29sbGVjdGlvbiBncm91cCBmb3IgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFRoZSBvZmZzZXQgdG8gaW5kZXggaW50by5cbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiBkb2N1bWVudHMgdG8gcmV0dXJuXG4gICAgICogQHJldHVybiBBIExvY2FsV3JpdGVSZXN1bHQgd2l0aCB0aGUgZG9jdW1lbnRzIHRoYXQgZm9sbG93IHRoZSBwcm92aWRlZCBvZmZzZXQgYW5kIHRoZSBsYXN0IHByb2Nlc3NlZCBiYXRjaCBpZC5cbiAgICAgKi8gICAgZ2V0TmV4dERvY3VtZW50cyhlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuLCByKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSByIC0gaS5zaXplID4gMCA/IHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbi5sYXJnZXN0QmF0Y2hJZCwgciAtIGkuc2l6ZSkgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpKTtcbiAgICAgICAgICAgIC8vIFRoZSBjYWxsc2l0ZSB3aWxsIHVzZSB0aGUgbGFyZ2VzdCBiYXRjaCBJRCB0b2dldGhlciB3aXRoIHRoZSBsYXRlc3QgcmVhZCB0aW1lIHRvIGNyZWF0ZVxuICAgICAgICAgICAgLy8gYSBuZXcgaW5kZXggb2Zmc2V0LiBTaW5jZSB3ZSBvbmx5IHByb2Nlc3MgYmF0Y2ggSURzIGlmIGFsbCByZW1vdGUgZG9jdW1lbnRzIGhhdmUgYmVlbiByZWFkLFxuICAgICAgICAgICAgLy8gbm8gb3ZlcmxheSB3aWxsIGluY3JlYXNlIHRoZSBvdmVyYWxsIHJlYWQgdGltZS4gVGhpcyBpcyB3aHkgd2Ugb25seSBuZWVkIHRvIHNwZWNpYWwgY2FzZVxuICAgICAgICAgICAgLy8gdGhlIGJhdGNoIGlkLlxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG8gPSAtMSwgXyA9IGk7XG4gICAgICAgICAgICByZXR1cm4gcy5uZXh0KCh0ID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICgodCwgbikgPT4gKG8gPCBuLmxhcmdlc3RCYXRjaElkICYmIChvID0gbi5sYXJnZXN0QmF0Y2hJZCksIFxuICAgICAgICAgICAgaS5nZXQodCkgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpIDogdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIF8gPSBfLmluc2VydCh0LCBlKTtcbiAgICAgICAgICAgIH0pKSkpKS5uZXh0KCgoKSA9PiB0aGlzLnBvcHVsYXRlT3ZlcmxheXMoZSwgdCwgaSkpKS5uZXh0KCgoKSA9PiB0aGlzLmNvbXB1dGVWaWV3cyhlLCBfLCB0LCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkpKS5uZXh0KChlID0+ICh7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogbyxcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiBfX1BSSVZBVEVfY29udmVydE92ZXJsYXllZERvY3VtZW50TWFwVG9Eb2N1bWVudE1hcChlKVxuICAgICAgICAgICAgfSkpKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeShlLCB0KSB7XG4gICAgICAgIC8vIEp1c3QgZG8gYSBzaW1wbGUgZG9jdW1lbnQgbG9va3VwLlxuICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudChlLCBuZXcgRG9jdW1lbnRLZXkodCkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgbGV0IHQgPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgKHQgPSB0Lmluc2VydChlLmtleSwgZSkpLCB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkoZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gdC5jb2xsZWN0aW9uR3JvdXA7XG4gICAgICAgIGxldCBzID0gZG9jdW1lbnRNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyLmdldENvbGxlY3Rpb25QYXJlbnRzKGUsIGkpLm5leHQoKG8gPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gobywgKG8gPT4ge1xuICAgICAgICAgICAgY29uc3QgXyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9hc0NvbGxlY3Rpb25RdWVyeUF0UGF0aChlLCB0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKHQsIFxuICAgICAgICAgICAgICAgIC8qY29sbGVjdGlvbkdyb3VwPSovIG51bGwsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIGUuZmlsdGVycy5zbGljZSgpLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbiAgICAgICAgICAgIH0odCwgby5jaGlsZChpKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeShlLCBfLCBuLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBlLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSBzLmluc2VydChlLCB0KTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBzKSkpKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBRdWVyeSB0aGUgcmVtb3RlIGRvY3VtZW50cyBhbmQgb3ZlcmxheSBtdXRhdGlvbnMuXG4gICAgICAgIGxldCBpO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24oZSwgdC5wYXRoLCBuLmxhcmdlc3RCYXRjaElkKS5uZXh0KChzID0+IChpID0gcywgXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIGksIHIpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgLy8gQXMgZG9jdW1lbnRzIG1pZ2h0IG1hdGNoIHRoZSBxdWVyeSBiZWNhdXNlIG9mIHRoZWlyIG92ZXJsYXkgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gaW5jbHVkZSBkb2N1bWVudHMgZm9yIGFsbCBvdmVybGF5cyBpbiB0aGUgaW5pdGlhbCBkb2N1bWVudCBzZXQuXG4gICAgICAgICAgICBpLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZ2V0S2V5KCk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gZS5nZXQocikgJiYgKGUgPSBlLmluc2VydChyLCBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KHIpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAvLyBBcHBseSB0aGUgb3ZlcmxheXMgYW5kIG1hdGNoIGFnYWluc3QgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgbGV0IG4gPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIHIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gaS5nZXQoZSk7XG4gICAgICAgICAgICAgICAgdm9pZCAwICE9PSBzICYmIF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcocy5tdXRhdGlvbiwgciwgRmllbGRNYXNrLmVtcHR5KCksIFRpbWVzdGFtcC5ub3coKSksIFxuICAgICAgICAgICAgICAgIC8vIEZpbmFsbHksIGluc2VydCB0aGUgZG9jdW1lbnRzIHRoYXQgc3RpbGwgbWF0Y2ggdGhlIHF1ZXJ5XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyh0LCByKSAmJiAobiA9IG4uaW5zZXJ0KGUsIHIpKTtcbiAgICAgICAgICAgIH0pKSwgbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeUJ1bmRsZUNhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGUsIHRoaXMubHIgPSBuZXcgTWFwLCB0aGlzLmhyID0gbmV3IE1hcDtcbiAgICB9XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5sci5nZXQodCkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sci5zZXQodC5pZCwgXG4gICAgICAgIC8qKiBEZWNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgcHJvdG8gaW50byBhIEJ1bmRsZU1ldGFkYXRhIG9iamVjdC4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21CdW5kbGVNZXRhZGF0YShlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBlLmlkLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvbixcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS5jcmVhdGVUaW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5oci5nZXQodCkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhyLnNldCh0Lm5hbWUsIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUHJvdG9OYW1lZFF1ZXJ5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogZS5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBfX1BSSVZBVEVfZnJvbUJ1bmRsZWRRdWVyeShlLmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLnJlYWRUaW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgRG9jdW1lbnRPdmVybGF5Q2FjaGUuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeURvY3VtZW50T3ZlcmxheUNhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBtYXAgc29ydGVkIGJ5IERvY3VtZW50S2V5LCB3aG9zZSB2YWx1ZSBpcyBhIHBhaXIgb2YgdGhlIGxhcmdlc3QgYmF0Y2ggaWRcbiAgICAgICAgLy8gZm9yIHRoZSBvdmVybGF5IGFuZCB0aGUgb3ZlcmxheSBpdHNlbGYuXG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpLCB0aGlzLlByID0gbmV3IE1hcDtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm92ZXJsYXlzLmdldCh0KSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiB0aGlzLmdldE92ZXJsYXkoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBudWxsICE9PSBlICYmIG4uc2V0KHQsIGUpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHNhdmVPdmVybGF5cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkl0KGUsIHQsIHIpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLlByLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gciAmJiAoci5mb3JFYWNoKChlID0+IHRoaXMub3ZlcmxheXMgPSB0aGlzLm92ZXJsYXlzLnJlbW92ZShlKSkpLCBcbiAgICAgICAgdGhpcy5Qci5kZWxldGUobikpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSwgaSA9IHQubGVuZ3RoICsgMSwgcyA9IG5ldyBEb2N1bWVudEtleSh0LmNoaWxkKFwiXCIpKSwgbyA9IHRoaXMub3ZlcmxheXMuZ2V0SXRlcmF0b3JGcm9tKHMpO1xuICAgICAgICBmb3IgKDtvLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gby5nZXROZXh0KCkudmFsdWUsIHMgPSBlLmdldEtleSgpO1xuICAgICAgICAgICAgaWYgKCF0LmlzUHJlZml4T2Yocy5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICAvLyBEb2N1bWVudHMgZnJvbSBzdWItY29sbGVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHMucGF0aC5sZW5ndGggPT09IGkgJiYgKGUubGFyZ2VzdEJhdGNoSWQgPiBuICYmIHIuc2V0KGUuZ2V0S2V5KCksIGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocik7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBuZXcgU29ydGVkTWFwKCgoZSwgdCkgPT4gZSAtIHQpKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMub3ZlcmxheXMuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7cy5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHMuZ2V0TmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgaWYgKGUuZ2V0S2V5KCkuZ2V0Q29sbGVjdGlvbkdyb3VwKCkgPT09IHQgJiYgZS5sYXJnZXN0QmF0Y2hJZCA+IG4pIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IGkuZ2V0KGUubGFyZ2VzdEJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIG51bGwgPT09IHQgJiYgKHQgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpLCBpID0gaS5pbnNlcnQoZS5sYXJnZXN0QmF0Y2hJZCwgdCkpLCBcbiAgICAgICAgICAgICAgICB0LnNldChlLmdldEtleSgpLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSwgXyA9IGkuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7Xy5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKF8uZ2V0TmV4dCgpLnZhbHVlLmZvckVhY2goKChlLCB0KSA9PiBvLnNldChlLCB0KSkpLCBvLnNpemUoKSA+PSByKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobyk7XG4gICAgfVxuICAgIEl0KGUsIHQsIG4pIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGUgb3ZlcmxheSB0byBpdHMgYmF0Y2ggaWQuXG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm92ZXJsYXlzLmdldChuLmtleSk7XG4gICAgICAgIGlmIChudWxsICE9PSByKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Qci5nZXQoci5sYXJnZXN0QmF0Y2hJZCkuZGVsZXRlKG4ua2V5KTtcbiAgICAgICAgICAgIHRoaXMuUHIuc2V0KHIubGFyZ2VzdEJhdGNoSWQsIGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSB0aGlzLm92ZXJsYXlzLmluc2VydChuLmtleSwgbmV3IE92ZXJsYXkodCwgbikpO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGFzc29jaWF0aW9uIG9mIHRoaXMgb3ZlcmxheSB0byB0aGUgZ2l2ZW4gbGFyZ2VzdEJhdGNoSWQuXG4gICAgICAgIGxldCBpID0gdGhpcy5Qci5nZXQodCk7XG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiAoaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCB0aGlzLlByLnNldCh0LCBpKSksIHRoaXMuUHIuc2V0KHQsIGkuYWRkKG4ua2V5KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbGxlY3Rpb24gb2YgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IGZyb20gc29tZSBraW5kIG9mIG51bWJlcmVkIGVudGl0eVxuICogKGVpdGhlciBhIHRhcmdldCBJRCBvciBiYXRjaCBJRCkuIEFzIHJlZmVyZW5jZXMgYXJlIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbVxuICogdGhlIHNldCBjb3JyZXNwb25kaW5nIGV2ZW50cyBhcmUgZW1pdHRlZCB0byBhIHJlZ2lzdGVyZWQgZ2FyYmFnZSBjb2xsZWN0b3IuXG4gKlxuICogRWFjaCByZWZlcmVuY2UgaXMgcmVwcmVzZW50ZWQgYnkgYSBEb2N1bWVudFJlZmVyZW5jZSBvYmplY3QuIEVhY2ggb2YgdGhlbVxuICogY29udGFpbnMgZW5vdWdoIGluZm9ybWF0aW9uIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoZSByZWZlcmVuY2UuIFRoZXkgYXJlIGFsbFxuICogc3RvcmVkIHByaW1hcmlseSBpbiBhIHNldCBzb3J0ZWQgYnkga2V5LiBBIGRvY3VtZW50IGlzIGNvbnNpZGVyZWQgZ2FyYmFnZSBpZlxuICogdGhlcmUncyBubyByZWZlcmVuY2VzIGluIHRoYXQgc2V0ICh0aGlzIGNhbiBiZSBlZmZpY2llbnRseSBjaGVja2VkIHRoYW5rcyB0b1xuICogc29ydGluZyBieSBrZXkpLlxuICpcbiAqIFJlZmVyZW5jZVNldCBhbHNvIGtlZXBzIGEgc2Vjb25kYXJ5IHNldCB0aGF0IGNvbnRhaW5zIHJlZmVyZW5jZXMgc29ydGVkIGJ5XG4gKiBJRHMuIFRoaXMgb25lIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgaW1wbGVtZW50IHJlbW92YWwgb2YgYWxsIHJlZmVyZW5jZXMgYnlcbiAqIHNvbWUgdGFyZ2V0IElELlxuICovIGNsYXNzIF9fUFJJVkFURV9SZWZlcmVuY2VTZXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIHNldCBvZiBvdXRzdGFuZGluZyByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgc29ydGVkIGJ5IGtleS5cbiAgICAgICAgdGhpcy5JciA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX0RvY1JlZmVyZW5jZS5kciksIFxuICAgICAgICAvLyBBIHNldCBvZiBvdXRzdGFuZGluZyByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgc29ydGVkIGJ5IHRhcmdldCBpZC5cbiAgICAgICAgdGhpcy5UciA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX0RvY1JlZmVyZW5jZS5Fcik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZSBzZXQgY29udGFpbnMgbm8gcmVmZXJlbmNlcy4gKi8gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSXIuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKiogQWRkcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIGFkZFJlZmVyZW5jZShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShlLCB0KTtcbiAgICAgICAgdGhpcy5JciA9IHRoaXMuSXIuYWRkKG4pLCB0aGlzLlRyID0gdGhpcy5Uci5hZGQobik7XG4gICAgfVxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBBcihlLCB0KSB7XG4gICAgICAgIGUuZm9yRWFjaCgoZSA9PiB0aGlzLmFkZFJlZmVyZW5jZShlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlblxuICAgICAqIElELlxuICAgICAqLyAgICByZW1vdmVSZWZlcmVuY2UoZSwgdCkge1xuICAgICAgICB0aGlzLlJyKG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKGUsIHQpKTtcbiAgICB9XG4gICAgVnIoZSwgdCkge1xuICAgICAgICBlLmZvckVhY2goKGUgPT4gdGhpcy5yZW1vdmVSZWZlcmVuY2UoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCByZWZlcmVuY2VzIHdpdGggYSBnaXZlbiBJRC4gQ2FsbHMgcmVtb3ZlUmVmKCkgZm9yIGVhY2gga2V5XG4gICAgICogcmVtb3ZlZC5cbiAgICAgKi8gICAgbXIoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IERvY3VtZW50S2V5KG5ldyBSZXNvdXJjZVBhdGgoW10pKSwgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIGUpLCByID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgZSArIDEpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLlRyLmZvckVhY2hJblJhbmdlKFsgbiwgciBdLCAoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLlJyKGUpLCBpLnB1c2goZS5rZXkpO1xuICAgICAgICB9KSksIGk7XG4gICAgfVxuICAgIGdyKCkge1xuICAgICAgICB0aGlzLklyLmZvckVhY2goKGUgPT4gdGhpcy5ScihlKSkpO1xuICAgIH1cbiAgICBScihlKSB7XG4gICAgICAgIHRoaXMuSXIgPSB0aGlzLklyLmRlbGV0ZShlKSwgdGhpcy5UciA9IHRoaXMuVHIuZGVsZXRlKGUpO1xuICAgIH1cbiAgICBwcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgRG9jdW1lbnRLZXkobmV3IFJlc291cmNlUGF0aChbXSkpLCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgZSksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBlICsgMSk7XG4gICAgICAgIGxldCBpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLlRyLmZvckVhY2hJblJhbmdlKFsgbiwgciBdLCAoZSA9PiB7XG4gICAgICAgICAgICBpID0gaS5hZGQoZS5rZXkpO1xuICAgICAgICB9KSksIGk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKGUsIDApLCBuID0gdGhpcy5Jci5maXJzdEFmdGVyT3JFcXVhbCh0KTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IG4gJiYgZS5pc0VxdWFsKG4ua2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9Eb2NSZWZlcmVuY2Uge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlLCB0aGlzLnlyID0gdDtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkga2V5IHRoZW4gYnkgSUQgKi8gICAgc3RhdGljIGRyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZS5rZXksIHQua2V5KSB8fCBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLnlyLCB0LnlyKTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkgSUQgdGhlbiBieSBrZXkgKi8gICAgc3RhdGljIEVyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUueXIsIHQueXIpIHx8IERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZS5rZXksIHQua2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlNdXRhdGlvblF1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gZSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gW10sIFxuICAgICAgICAvKiogTmV4dCB2YWx1ZSB0byB1c2Ugd2hlbiBhc3NpZ25pbmcgc2VxdWVudGlhbCBJRHMgdG8gZWFjaCBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgdGhpcy53ciA9IDEsIFxuICAgICAgICAvKiogQW4gb3JkZXJlZCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgbXV0YXRpb25zIGJhdGNoIElEcy4gKi9cbiAgICAgICAgdGhpcy5TciA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX0RvY1JlZmVyZW5jZS5kcik7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkoZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2goZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy53cjtcbiAgICAgICAgdGhpcy53cisrLCB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID4gMCAmJiB0aGlzLm11dGF0aW9uUXVldWVbdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCBzID0gbmV3IE11dGF0aW9uQmF0Y2goaSwgdCwgbiwgcik7XG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5wdXNoKHMpO1xuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgcikgdGhpcy5TciA9IHRoaXMuU3IuYWRkKG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQua2V5LCBpKSksIFxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCB0LmtleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShzKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmJyKHQpKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdCArIDEsIHIgPSB0aGlzLkRyKG4pLCBpID0gciA8IDAgPyAwIDogcjtcbiAgICAgICAgLy8gVGhlIHJlcXVlc3RlZCBiYXRjaElkIG1heSBzdGlsbCBiZSBvdXQgb2YgcmFuZ2Ugc28gbm9ybWFsaXplIGl0IHRvIHRoZVxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiBpID8gdGhpcy5tdXRhdGlvblF1ZXVlW2ldIDogbnVsbCk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID8gLTEgOiB0aGlzLndyIC0gMSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyhlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUuc2xpY2UoKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIDApLCByID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5Tci5mb3JFYWNoSW5SYW5nZShbIG4sIHIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnIoZS55cik7XG4gICAgICAgICAgICBpLnB1c2godCk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKGUsIDApLCByID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgICAgIHRoaXMuU3IuZm9yRWFjaEluUmFuZ2UoWyB0LCByIF0sIChlID0+IHtcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQoZS55cik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5DcihuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KGUsIHQpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBxdWVyeSBwYXRoIGFzIGEgcHJlZml4IGZvciB0ZXN0aW5nIGlmIGEgZG9jdW1lbnQgbWF0Y2hlcyB0aGVcbiAgICAgICAgLy8gcXVlcnkuXG4gICAgICAgIGNvbnN0IG4gPSB0LnBhdGgsIHIgPSBuLmxlbmd0aCArIDE7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhIGRvY3VtZW50IHJlZmVyZW5jZSBmb3IgYWN0dWFsbHkgc2Nhbm5pbmcgdGhlIGluZGV4LiBVbmxpa2VcbiAgICAgICAgLy8gdGhlIHByZWZpeCB0aGUgZG9jdW1lbnQga2V5IGluIHRoaXMgcmVmZXJlbmNlIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZlxuICAgICAgICAvLyBzZWdtZW50cy4gVGhlIGVtcHR5IHNlZ21lbnQgY2FuIGJlIHVzZWQgYSBzdWZmaXggb2YgdGhlIHF1ZXJ5IHBhdGhcbiAgICAgICAgLy8gYmVjYXVzZSBpdCBwcmVjZWRlcyBhbGwgb3RoZXIgc2VnbWVudHMgaW4gYW4gb3JkZXJlZCB0cmF2ZXJzYWwuXG4gICAgICAgIGxldCBpID0gbjtcbiAgICAgICAgRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShpKSB8fCAoaSA9IGkuY2hpbGQoXCJcIikpO1xuICAgICAgICBjb25zdCBzID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UobmV3IERvY3VtZW50S2V5KGkpLCAwKTtcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgICAgICAgICBsZXQgbyA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5Tci5mb3JFYWNoV2hpbGUoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUua2V5LnBhdGg7XG4gICAgICAgICAgICByZXR1cm4gISFuLmlzUHJlZml4T2YodCkgJiYgKFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIGNhbid0IG1hdGNoXG4gICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIHQubGVuZ3RoID09PSByICYmIChvID0gby5hZGQoZS55cikpLCAhMCk7XG4gICAgICAgIH0pLCBzKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5DcihvKSk7XG4gICAgfVxuICAgIENyKGUpIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IGFuIGFycmF5IG9mIG1hdGNoaW5nIGJhdGNoZXMsIHNvcnRlZCBieSBiYXRjaElEIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgIC8vIG11bHRpcGxlIG11dGF0aW9ucyBhZmZlY3RpbmcgdGhlIHNhbWUgZG9jdW1lbnQga2V5IGFyZSBhcHBsaWVkIGluIG9yZGVyLlxuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuYnIoZSk7XG4gICAgICAgICAgICBudWxsICE9PSBuICYmIHQucHVzaChuKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMCA9PT0gdGhpcy52cih0LmJhdGNoSWQsIFwicmVtb3ZlZFwiKSksIHRoaXMubXV0YXRpb25RdWV1ZS5zaGlmdCgpO1xuICAgICAgICBsZXQgbiA9IHRoaXMuU3I7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0Lm11dGF0aW9ucywgKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHIua2V5LCB0LmJhdGNoSWQpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPSBuLmRlbGV0ZShpKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCByLmtleSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlNyID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB4bihlKSB7XG4gICAgICAgIC8vIE5vLW9wIHNpbmNlIHRoZSBtZW1vcnkgbXV0YXRpb24gcXVldWUgZG9lcyBub3QgbWFpbnRhaW4gYSBzZXBhcmF0ZSBjYWNoZS5cbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgMCksIHIgPSB0aGlzLlNyLmZpcnN0QWZ0ZXJPckVxdWFsKG4pO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodC5pc0VxdWFsKHIgJiYgci5rZXkpKTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2soZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZSBhbmQgYXNzZXJ0cyB0aGF0XG4gICAgICogdGhlIHJlc3VsdGluZyBpbmRleCBpcyB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSBiYXRjaElkIHRvIHNlYXJjaCBmb3JcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQSBkZXNjcmlwdGlvbiBvZiB3aGF0IHRoZSBjYWxsZXIgaXMgZG9pbmcsIHBocmFzZWQgaW4gcGFzc2l2ZVxuICAgICAqIGZvcm0gKGUuZy4gXCJhY2tub3dsZWRnZWRcIiBpbiBhIHJvdXRpbmUgdGhhdCBhY2tub3dsZWRnZXMgYmF0Y2hlcykuXG4gICAgICovICAgIHZyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRHIoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUuIFRoaXMgb3BlcmF0aW9uXG4gICAgICogaXMgTygxKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wdXRlZCBpbmRleCBvZiB0aGUgYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZCwgYmFzZWQgb25cbiAgICAgKiB0aGUgc3RhdGUgb2YgdGhlIHF1ZXVlLiBOb3RlIHRoaXMgaW5kZXggY2FuIGJlIG5lZ2F0aXZlIGlmIHRoZSByZXF1ZXN0ZWRcbiAgICAgKiBiYXRjaElkIGhhcyBhbHJlYWR5IGJlZW4gcmVtdm9lZCBmcm9tIHRoZSBxdWV1ZSBvciBwYXN0IHRoZSBlbmQgb2YgdGhlXG4gICAgICogcXVldWUgaWYgdGhlIGJhdGNoSWQgaXMgbGFyZ2VyIHRoYW4gdGhlIGxhc3QgYWRkZWQgYmF0Y2guXG4gICAgICovICAgIERyKGUpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgpIFxuICAgICAgICAvLyBBcyBhbiBpbmRleCB0aGlzIGlzIHBhc3QgdGhlIGVuZCBvZiB0aGUgcXVldWVcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIC8vIEV4YW1pbmUgdGhlIGZyb250IG9mIHRoZSBxdWV1ZSB0byBmaWd1cmUgb3V0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlXG4gICAgICAgIC8vIGJhdGNoSWQgYW5kIGluZGV4ZXMgaW4gdGhlIGFycmF5LiBOb3RlIHRoYXQgc2luY2UgdGhlIHF1ZXVlIGlzIG9yZGVyZWRcbiAgICAgICAgLy8gYnkgYmF0Y2hJZCwgaWYgdGhlIGZpcnN0IGJhdGNoIGhhcyBhIGxhcmdlciBiYXRjaElkIHRoZW4gdGhlIHJlcXVlc3RlZFxuICAgICAgICAvLyBiYXRjaElkIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBlIC0gdGhpcy5tdXRhdGlvblF1ZXVlWzBdLmJhdGNoSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBsb29rdXBNdXRhdGlvbkJhdGNoIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlLCB0aGlzIG1ha2VzXG4gICAgICogb3RoZXIgZnVuY3Rpb25zIHRoYXQgdXNlcyB0aGlzIGNvZGUgZWFzaWVyIHRvIHJlYWQgYW5kIG1vcmUgZWZmaWNlbnQuXG4gICAgICovICAgIGJyKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuRHIoZSk7XG4gICAgICAgIGlmICh0IDwgMCB8fCB0ID49IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlW3RdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZUltcGwge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICAgICAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICAgICAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5GciA9IGUsIFxuICAgICAgICAvKiogVW5kZXJseWluZyBjYWNoZSBvZiBkb2N1bWVudHMgYW5kIHRoZWlyIHJlYWQgdGltZXMuICovXG4gICAgICAgIHRoaXMuZG9jcyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudEVudHJ5TWFwKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG4gICAgICAgIH0oKSwgXG4gICAgICAgIC8qKiBTaXplIG9mIGFsbCBjYWNoZWQgZG9jdW1lbnRzLiAqL1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBzZXRJbmRleE1hbmFnZXIoZSkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICBhZGRFbnRyeShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LmtleSwgciA9IHRoaXMuZG9jcy5nZXQobiksIGkgPSByID8gci5zaXplIDogMCwgcyA9IHRoaXMuRnIodCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KG4sIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiB0Lm11dGFibGVDb3B5KCksXG4gICAgICAgICAgICBzaXplOiBzXG4gICAgICAgIH0pLCB0aGlzLnNpemUgKz0gcyAtIGksIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIG4ucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgZW50cnkgZnJvbSB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICByZW1vdmVFbnRyeShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRvY3MuZ2V0KGUpO1xuICAgICAgICB0ICYmICh0aGlzLmRvY3MgPSB0aGlzLmRvY3MucmVtb3ZlKGUpLCB0aGlzLnNpemUgLT0gdC5zaXplKTtcbiAgICB9XG4gICAgZ2V0RW50cnkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG4gPyBuLmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KHQpKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmRvY3MuZ2V0KGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KGUsIHQgPyB0LmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KGUpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICAvLyBEb2N1bWVudHMgYXJlIG9yZGVyZWQgYnkga2V5LCBzbyB3ZSBjYW4gdXNlIGEgcHJlZml4IHNjYW4gdG8gbmFycm93IGRvd25cbiAgICAgICAgLy8gdGhlIGRvY3VtZW50cyB3ZSBuZWVkIHRvIG1hdGNoIHRoZSBxdWVyeSBhZ2FpbnN0LlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0LnBhdGgsIG8gPSBuZXcgRG9jdW1lbnRLZXkocy5jaGlsZChcIlwiKSksIF8gPSB0aGlzLmRvY3MuZ2V0SXRlcmF0b3JGcm9tKG8pO1xuICAgICAgICBmb3IgKDtfLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB7a2V5OiBlLCB2YWx1ZToge2RvY3VtZW50OiBvfX0gPSBfLmdldE5leHQoKTtcbiAgICAgICAgICAgIGlmICghcy5pc1ByZWZpeE9mKGUucGF0aCkpIGJyZWFrO1xuICAgICAgICAgICAgZS5wYXRoLmxlbmd0aCA+IHMubGVuZ3RoICsgMSB8fCAoX19QUklWQVRFX2luZGV4T2Zmc2V0Q29tcGFyYXRvcihfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRGcm9tRG9jdW1lbnQobyksIG4pIDw9IDAgfHwgKHIuaGFzKG8ua2V5KSB8fCBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKHQsIG8pKSAmJiAoaSA9IGkuaW5zZXJ0KG8ua2V5LCBvLm11dGFibGVDb3B5KCkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gdGhlIEluZGV4QmFja2ZpbGxlciBpZiBwZXJzaXN0ZW5jZVxuICAgICAgICAvLyBpcyBlbmFibGVkLlxuICAgICAgICBmYWlsKCk7XG4gICAgfVxuICAgIE1yKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuZG9jcywgKGUgPT4gdChlKSkpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIoZSkge1xuICAgICAgICAvLyBgdHJhY2tSZW1vdmFsc2AgaXMgaWdub3JlcyBzaW5jZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSBrZWVwc1xuICAgICAgICAvLyBhIHNlcGFyYXRlIGNoYW5nZWxvZyBhbmQgZG9lcyBub3QgbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGZvciByZW1vdmFscy5cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIodGhpcyk7XG4gICAgfVxuICAgIGdldFNpemUoZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5zaXplKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAqL1xuLyoqXG4gKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgZXh0ZW5kcyBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnVyID0gZTtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICByLmlzVmFsaWREb2N1bWVudCgpID8gdC5wdXNoKHRoaXMudXIuYWRkRW50cnkoZSwgcikpIDogdGhpcy51ci5yZW1vdmVFbnRyeShuKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcih0KTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXIuZ2V0RW50cnkoZSwgdCk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVyLmdldEVudHJpZXMoZSwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5VGFyZ2V0Q2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldCB0byB0aGUgZGF0YSBhYm91dCB0aGF0IHRhcmdldFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5PciA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpKSwgX19QUklWQVRFX3RhcmdldEVxdWFscyksIFxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBJRCBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSAwLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IHNlcXVlbmNlIG51bWJlciBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5OciA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBvcmRlcmVkIGJpZGlyZWN0aW9uYWwgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIHJlbW90ZSB0YXJnZXRcbiAgICAgICAgICogSURzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5CciA9IG5ldyBfX1BSSVZBVEVfUmVmZXJlbmNlU2V0LCB0aGlzLnRhcmdldENvdW50ID0gMCwgdGhpcy5MciA9IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvci5CbigpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuT3IuZm9yRWFjaCgoKGUsIG4pID0+IHQobikpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5Ocik7XG4gICAgfVxuICAgIGFsbG9jYXRlVGFyZ2V0SWQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0aGlzLkxyLm5leHQoKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbiAmJiAodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbiksIHQgPiB0aGlzLk5yICYmICh0aGlzLk5yID0gdCksIFxuICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBRbihlKSB7XG4gICAgICAgIHRoaXMuT3Iuc2V0KGUudGFyZ2V0LCBlKTtcbiAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0SWQ7XG4gICAgICAgIHQgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCAmJiAodGhpcy5MciA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IodCksIHRoaXMuaGlnaGVzdFRhcmdldElkID0gdCksIFxuICAgICAgICBlLnNlcXVlbmNlTnVtYmVyID4gdGhpcy5OciAmJiAodGhpcy5OciA9IGUuc2VxdWVuY2VOdW1iZXIpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUW4odCksIHRoaXMudGFyZ2V0Q291bnQgKz0gMSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFuKHQpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuT3IuZGVsZXRlKHQudGFyZ2V0KSwgdGhpcy5Cci5tcih0LnRhcmdldElkKSwgdGhpcy50YXJnZXRDb3VudCAtPSAxLCBcbiAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5Pci5mb3JFYWNoKCgocywgbykgPT4ge1xuICAgICAgICAgICAgby5zZXF1ZW5jZU51bWJlciA8PSB0ICYmIG51bGwgPT09IG4uZ2V0KG8udGFyZ2V0SWQpICYmICh0aGlzLk9yLmRlbGV0ZShzKSwgaS5wdXNoKHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgby50YXJnZXRJZCkpLCBcbiAgICAgICAgICAgIHIrKyk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSkubmV4dCgoKCkgPT4gcikpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudChlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnRhcmdldENvdW50KTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLk9yLmdldCh0KSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobik7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJyLkFyKHQsIG4pLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXMoZSwgdCwgbikge1xuICAgICAgICB0aGlzLkJyLlZyKHQsIG4pO1xuICAgICAgICBjb25zdCByID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gciAmJiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHIubWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgdCkpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJyLm1yKHQpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkJyLnByKHQpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobik7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuQnIuY29udGFpbnNLZXkodCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtZW1vcnktYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBvbmx5IGluIFJBTSBhbmRcbiAqIG5vdCBwZXJzaXN0ZWQgYWNyb3NzIHNlc3Npb25zLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5UGVyc2lzdGVuY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBhY2NlcHRzIGEgZmFjdG9yeSBmb3IgY3JlYXRpbmcgYSByZWZlcmVuY2UgZGVsZWdhdGUuIFRoaXNcbiAgICAgKiBhbGxvd3MgYm90aCB0aGUgZGVsZWdhdGUgYW5kIHRoaXMgaW5zdGFuY2UgdG8gaGF2ZSBzdHJvbmcgcmVmZXJlbmNlcyB0b1xuICAgICAqIGVhY2ggb3RoZXIgd2l0aG91dCBoYXZpbmcgbnVsbGFibGUgZmllbGRzIHRoYXQgd291bGQgdGhlbiBuZWVkIHRvIGJlXG4gICAgICogY2hlY2tlZCBvciBhc3NlcnRlZCBvbiBldmVyeSBhY2Nlc3MuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmtyID0ge30sIHRoaXMub3ZlcmxheXMgPSB7fSwgdGhpcy5xciA9IG5ldyBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UoMCksIHRoaXMuUXIgPSAhMSwgXG4gICAgICAgIHRoaXMuUXIgPSAhMCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUodGhpcyksIHRoaXMuS3IgPSBuZXcgX19QUklWQVRFX01lbW9yeVRhcmdldENhY2hlKHRoaXMpO1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5SW5kZXhNYW5hZ2VyLCB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3TWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZShlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlSW1wbChlKTtcbiAgICAgICAgfSgoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLiRyKGUpKSksIHRoaXMuc2VyaWFsaXplciA9IG5ldyBfX1BSSVZBVEVfTG9jYWxTZXJpYWxpemVyKHQpLCBcbiAgICAgICAgdGhpcy5VciA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5QnVuZGxlQ2FjaGUodGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vIGR1cmFibGUgc3RhdGUgdG8gZW5zdXJlIGlzIGNsb3NlZCBvbiBzaHV0ZG93bi5cbiAgICAgICAgcmV0dXJuIHRoaXMuUXIgPSAhMSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5RcjtcbiAgICB9XG4gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXROZXR3b3JrRW5hYmxlZCgpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIC8vIFdlIGRvIG5vdCBjdXJyZW50bHkgc3VwcG9ydCBpbmRpY2VzIGZvciBtZW1vcnkgcGVyc2lzdGVuY2UsIHNvIHdlIGNhblxuICAgICAgICAvLyByZXR1cm4gdGhlIHNhbWUgc2hhcmVkIGluc3RhbmNlIG9mIHRoZSBtZW1vcnkgaW5kZXggbWFuYWdlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyO1xuICAgIH1cbiAgICBnZXREb2N1bWVudE92ZXJsYXlDYWNoZShlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5vdmVybGF5c1tlLnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gdCB8fCAodCA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5RG9jdW1lbnRPdmVybGF5Q2FjaGUsIHRoaXMub3ZlcmxheXNbZS50b0tleSgpXSA9IHQpLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5rcltlLnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gbiB8fCAobiA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5TXV0YXRpb25RdWV1ZSh0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKSwgdGhpcy5rcltlLnRvS2V5KCldID0gbiksIFxuICAgICAgICBuO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuS3I7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5VcjtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJNZW1vcnlQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCBlKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5VHJhbnNhY3Rpb24odGhpcy5xci5uZXh0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5XcigpLCBuKHIpLm5leHQoKGUgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5HcihyKS5uZXh0KCgoKSA9PiBlKSkpKS50b1Byb21pc2UoKS50aGVuKChlID0+IChyLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgenIoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKE9iamVjdC52YWx1ZXModGhpcy5rcikubWFwKChuID0+ICgpID0+IG4uY29udGFpbnNLZXkoZSwgdCkpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1lbW9yeSBwZXJzaXN0ZW5jZSBpcyBub3QgYWN0dWFsbHkgdHJhbnNhY3Rpb25hbCwgYnV0IGZ1dHVyZSBpbXBsZW1lbnRhdGlvbnNcbiAqIG1heSBoYXZlIHRyYW5zYWN0aW9uLXNjb3BlZCBzdGF0ZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5VHJhbnNhY3Rpb24gZXh0ZW5kcyBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlFYWdlckRlbGVnYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBlLCBcbiAgICAgICAgLyoqIFRyYWNrcyBhbGwgZG9jdW1lbnRzIHRoYXQgYXJlIGFjdGl2ZSBpbiBRdWVyeSB2aWV3cy4gKi9cbiAgICAgICAgdGhpcy5qciA9IG5ldyBfX1BSSVZBVEVfUmVmZXJlbmNlU2V0LCBcbiAgICAgICAgLyoqIFRoZSBsaXN0IG9mIGRvY3VtZW50cyB0aGF0IGFyZSBwb3RlbnRpYWxseSBHQ2VkIGFmdGVyIGVhY2ggdHJhbnNhY3Rpb24uICovXG4gICAgICAgIHRoaXMuSHIgPSBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMgSnIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlFYWdlckRlbGVnYXRlKGUpO1xuICAgIH1cbiAgICBnZXQgWXIoKSB7XG4gICAgICAgIGlmICh0aGlzLkhyKSByZXR1cm4gdGhpcy5IcjtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5qci5hZGRSZWZlcmVuY2UobiwgdCksIHRoaXMuWXIuZGVsZXRlKG4udG9TdHJpbmcoKSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpyLnJlbW92ZVJlZmVyZW5jZShuLCB0KSwgdGhpcy5Zci5hZGQobi50b1N0cmluZygpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Zci5hZGQodC50b1N0cmluZygpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgdGhpcy5qci5tcih0LnRhcmdldElkKS5mb3JFYWNoKChlID0+IHRoaXMuWXIuYWRkKGUudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIG4uZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdC50YXJnZXRJZCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlLmZvckVhY2goKGUgPT4gdGhpcy5Zci5hZGQoZS50b1N0cmluZygpKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5yZW1vdmVUYXJnZXREYXRhKGUsIHQpKSk7XG4gICAgfVxuICAgIFdyKCkge1xuICAgICAgICB0aGlzLkhyID0gbmV3IFNldDtcbiAgICB9XG4gICAgR3IoZSkge1xuICAgICAgICAvLyBSZW1vdmUgbmV3bHkgb3JwaGFuZWQgZG9jdW1lbnRzLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0aGlzLllyLCAobiA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gRG9jdW1lbnRLZXkuZnJvbVBhdGgobik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5acihlLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBlIHx8IHQucmVtb3ZlRW50cnkociwgU25hcHNob3RWZXJzaW9uLm1pbigpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh0aGlzLkhyID0gbnVsbCwgdC5hcHBseShlKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlpyKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZSA/IHRoaXMuWXIuZGVsZXRlKHQudG9TdHJpbmcoKSkgOiB0aGlzLllyLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgICRyKGUpIHtcbiAgICAgICAgLy8gRm9yIGVhZ2VyIEdDLCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSBkb2N1bWVudCBzaXplLCB0aGVyZSBhcmUgbm8gc2l6ZSB0aHJlc2hvbGRzLlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgWnIoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKFsgKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5qci5jb250YWluc0tleSh0KSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5jb250YWluc0tleShlLCB0KSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS56cihlLCB0KSBdKTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlMcnVEZWxlZ2F0ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gZSwgdGhpcy5YciA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChlLnBhdGgpKSwgKChlLCB0KSA9PiBlLmlzRXF1YWwodCkpKSwgXG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IF9fUFJJVkFURV9uZXdMcnVHYXJiYWdlQ29sbGVjdG9yKHRoaXMsIHQpO1xuICAgIH1cbiAgICBzdGF0aWMgSnIoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlMcnVEZWxlZ2F0ZShlLCB0KTtcbiAgICB9XG4gICAgLy8gTm8tb3BzLCBwcmVzZW50IHNvIG1lbW9yeSBwZXJzaXN0ZW5jZSBkb2Vzbid0IGhhdmUgdG8gY2FyZSB3aGljaCBkZWxlZ2F0ZVxuICAgIC8vIGl0IGhhcy5cbiAgICBXcigpIHt9XG4gICAgR3IoZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldChlLCB0KTtcbiAgICB9XG4gICAgSm4oZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5YbihlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudChlKS5uZXh0KChlID0+IHQubmV4dCgodCA9PiBlICsgdCkpKSk7XG4gICAgfVxuICAgIFhuKGUpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5ZbihlLCAoZSA9PiB7XG4gICAgICAgICAgICB0Kys7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgfVxuICAgIFluKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuWHIsICgobiwgcikgPT4gdGhpcy50cihlLCBuLCByKS5uZXh0KChlID0+IGUgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpIDogdChyKSkpKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHMoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHMoZSwgdCwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBjb25zdCByID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCksIGkgPSByLm5ld0NoYW5nZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gci5NcihlLCAociA9PiB0aGlzLnRyKGUsIHIsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZSB8fCAobisrLCBpLnJlbW92ZUVudHJ5KHIsIFNuYXBzaG90VmVyc2lvbi5taW4oKSkpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KGUpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlhyLnNldCh0LCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LndpdGhTZXF1ZW5jZU51bWJlcihlLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWHIuc2V0KG4sIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWHIuc2V0KG4sIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlhyLnNldCh0LCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgICRyKGUpIHtcbiAgICAgICAgbGV0IHQgPSBlLmtleS50b1N0cmluZygpLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgKHQgKz0gX19QUklWQVRFX2VzdGltYXRlQnl0ZVNpemUoZS5kYXRhLnZhbHVlKSksIHQ7XG4gICAgfVxuICAgIHRyKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5vcihbICgpID0+IHRoaXMucGVyc2lzdGVuY2UuenIoZSwgdCksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5jb250YWluc0tleShlLCB0KSwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuWHIuZ2V0KHQpO1xuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHZvaWQgMCAhPT0gZSAmJiBlID4gbik7XG4gICAgICAgIH0gXSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5nZXRTaXplKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLiAqLyBjbGFzcyBfX1BSSVZBVEVfU2NoZW1hQ29udmVydGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaW4gcHJvZHVjdGlvbiwgdGhpcyBtZXRob2QgaXMgb25seSBldmVyIHVzZWQgdG8gdXBncmFkZSB0aGUgc2NoZW1hXG4gICAgICogdG8gU0NIRU1BX1ZFUlNJT04uIERpZmZlcmVudCB2YWx1ZXMgb2YgdG9WZXJzaW9uIGFyZSBvbmx5IHVzZWQgZm9yIHRlc3RpbmdcbiAgICAgKiBhbmQgbG9jYWwgZmVhdHVyZSBkZXZlbG9wbWVudC5cbiAgICAgKi8gICAgQihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX1NpbXBsZURiVHJhbnNhY3Rpb24oXCJjcmVhdGVPclVwZ3JhZGVcIiwgdCk7XG4gICAgICAgIG4gPCAxICYmIHIgPj0gMSAmJiAoIWZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVQcmltYXJ5Q2xpZW50U3RvcmUoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcIm93bmVyXCIpO1xuICAgICAgICB9KGUpLCBmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlTXV0YXRpb25RdWV1ZShlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25RdWV1ZXNcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IFwidXNlcklkXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJiYXRjaElkXCIsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwidXNlck11dGF0aW9uc0luZGV4XCIsIE0sIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICB9KSwgZS5jcmVhdGVPYmplY3RTdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovIChlKSwgX19QUklWQVRFX2NyZWF0ZVF1ZXJ5Q2FjaGUoZSksIGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVMZWdhY3lSZW1vdGVEb2N1bWVudENhY2hlKGUpIHtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIH0oZSkpO1xuICAgICAgICAvLyBNaWdyYXRpb24gMiB0byBwb3B1bGF0ZSB0aGUgdGFyZ2V0R2xvYmFsIG9iamVjdCBubyBsb25nZXIgbmVlZGVkIHNpbmNlXG4gICAgICAgIC8vIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHMgPSBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbiA8IDMgJiYgciA+PSAzICYmIChcbiAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXG4gICAgICAgIDAgIT09IG4gJiYgKCFmdW5jdGlvbiBfX1BSSVZBVEVfZHJvcFF1ZXJ5Q2FjaGUoZSkge1xuICAgICAgICAgICAgZS5kZWxldGVPYmplY3RTdG9yZShcInRhcmdldERvY3VtZW50c1wiKSwgZS5kZWxldGVPYmplY3RTdG9yZShcInRhcmdldHNcIiksIGUuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRHbG9iYWxcIik7XG4gICAgICAgIH0oZSksIF9fUFJJVkFURV9jcmVhdGVRdWVyeUNhY2hlKGUpKSwgcyA9IHMubmV4dCgoKCkgPT4gXG4gICAgICAgIC8qKlxuICogQ3JlYXRlcyB0aGUgdGFyZ2V0IGdsb2JhbCBzaW5nbGV0b24gcm93LlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUaGUgdmVyc2lvbiB1cGdyYWRlIHRyYW5zYWN0aW9uIGZvciBpbmRleGVkZGJcbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfd3JpdGVFbXB0eVRhcmdldEdsb2JhbEVudHJ5KGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpLCBuID0ge1xuICAgICAgICAgICAgICAgIGhpZ2hlc3RUYXJnZXRJZDogMCxcbiAgICAgICAgICAgICAgICBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI6IDAsXG4gICAgICAgICAgICAgICAgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbjogU25hcHNob3RWZXJzaW9uLm1pbigpLnRvVGltZXN0YW1wKCksXG4gICAgICAgICAgICAgICAgdGFyZ2V0Q291bnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdC5wdXQoXCJ0YXJnZXRHbG9iYWxLZXlcIiwgbik7XG4gICAgICAgIH0oaSkpKSksIG4gPCA0ICYmIHIgPj0gNCAmJiAoMCAhPT0gbiAmJiAoXG4gICAgICAgIC8vIFNjaGVtYSB2ZXJzaW9uIDMgdXNlcyBhdXRvLWdlbmVyYXRlZCBrZXlzIHRvIGdlbmVyYXRlIGdsb2JhbGx5IHVuaXF1ZVxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaCBJRHMgKHRoaXMgd2FzIHByZXZpb3VzbHkgZW5zdXJlZCBpbnRlcm5hbGx5IGJ5IHRoZVxuICAgICAgICAvLyBjbGllbnQpLiBUbyBtaWdyYXRlIHRvIHRoZSBuZXcgc2NoZW1hLCB3ZSBoYXZlIHRvIHJlYWQgYWxsIG11dGF0aW9uc1xuICAgICAgICAvLyBhbmQgd3JpdGUgdGhlbSBiYWNrIG91dC4gV2UgcHJlc2VydmUgdGhlIGV4aXN0aW5nIGJhdGNoIElEcyB0byBndWFyYW50ZWVcbiAgICAgICAgLy8gY29uc2lzdGVuY3kgd2l0aCBvdGhlciBvYmplY3Qgc3RvcmVzLiBBbnkgZnVydGhlciBtdXRhdGlvbiBiYXRjaCBJRHMgd2lsbFxuICAgICAgICAvLyBiZSBhdXRvLWdlbmVyYXRlZC5cbiAgICAgICAgcyA9IHMubmV4dCgoKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX3VwZ3JhZGVNdXRhdGlvbkJhdGNoU2NoZW1hQW5kTWlncmF0ZURhdGEoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIHQuc3RvcmUoXCJtdXRhdGlvbnNcIikuRygpLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIGUuZGVsZXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvbnNcIik7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYmF0Y2hJZFwiLFxuICAgICAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwidXNlck11dGF0aW9uc0luZGV4XCIsIE0sIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0LnN0b3JlKFwibXV0YXRpb25zXCIpLCBpID0gbi5tYXAoKGUgPT4gci5wdXQoZSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0oZSwgaSkpKSksIHMgPSBzLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlQ2xpZW50TWV0YWRhdGFTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImNsaWVudE1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJjbGllbnRJZFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICB9KSkpLCBuIDwgNSAmJiByID49IDUgJiYgKHMgPSBzLm5leHQoKCgpID0+IHRoaXMuZWkoaSkpKSksIG4gPCA2ICYmIHIgPj0gNiAmJiAocyA9IHMubmV4dCgoKCkgPT4gKGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVEb2N1bWVudEdsb2JhbFN0b3JlKGUpIHtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKTtcbiAgICAgICAgfShlKSwgdGhpcy50aShpKSkpKSksIG4gPCA3ICYmIHIgPj0gNyAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy5uaShpKSkpKSwgbiA8IDggJiYgciA+PSA4ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLnJpKGUsIGkpKSkpLCBcbiAgICAgICAgbiA8IDkgJiYgciA+PSA5ICYmIChzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBNdWx0aS1UYWIgdXNlZCB0byBtYW5hZ2UgaXRzIG93biBjaGFuZ2Vsb2csIGJ1dCB0aGlzIGhhcyBiZWVuIG1vdmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUgaXRzZWxmLiBTaW5jZSB0aGUgcHJldmlvdXMgY2hhbmdlXG4gICAgICAgICAgICAvLyBsb2cgb25seSBjb250YWluZWQgdHJhbnNpZW50IGRhdGEsIHdlIGNhbiBkcm9wIGl0cyBvYmplY3Qgc3RvcmUuXG4gICAgICAgICAgICAhZnVuY3Rpb24gX19QUklWQVRFX2Ryb3BSZW1vdGVEb2N1bWVudENoYW5nZXNTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgZS5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpICYmIGUuZGVsZXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIik7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICAgICAgLy8gTm90ZTogU2NoZW1hIHZlcnNpb24gOSB1c2VkIHRvIGNyZWF0ZSBhIHJlYWQgdGltZSBpbmRleCBmb3IgdGhlXG4gICAgICAgICAgICAvLyBSZW1vdGVEb2N1bWVudENhY2hlLiBUaGlzIGlzIG5vdyBkb25lIHdpdGggc2NoZW1hIHZlcnNpb24gMTMuXG4gICAgICAgICAgICAgICAgfSkpKSwgbiA8IDEwICYmIHIgPj0gMTAgJiYgKHMgPSBzLm5leHQoKCgpID0+IHRoaXMuaWkoaSkpKSksIG4gPCAxMSAmJiByID49IDExICYmIChzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUJ1bmRsZXNTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImJ1bmRsZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJ1bmRsZUlkXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSksIGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVOYW1lZFF1ZXJpZXNTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcIm5hbWVkUXVlcmllc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwibmFtZVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICB9KSkpLCBuIDwgMTIgJiYgciA+PSAxMiAmJiAocyA9IHMubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVEb2N1bWVudE92ZXJsYXlTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJkb2N1bWVudE92ZXJsYXlzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogR1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCB6LCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KSwgdC5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25Hcm91cE92ZXJsYXlJbmRleFwiLCBqLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCAxMyAmJiByID49IDEzICYmIChzID0gcy5uZXh0KCgoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlUmVtb3RlRG9jdW1lbnRDYWNoZShlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1YxNFwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogT1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRLZXlJbmRleFwiLCBOKSwgdC5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIEIpO1xuICAgICAgICB9KGUpKSkubmV4dCgoKCkgPT4gdGhpcy5zaShlLCBpKSkpLm5leHQoKCgpID0+IGUuZGVsZXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikpKSksIFxuICAgICAgICBuIDwgMTQgJiYgciA+PSAxNCAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy5vaShlLCBpKSkpKSwgbiA8IDE1ICYmIHIgPj0gMTUgJiYgKHMgPSBzLm5leHQoKCgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVGaWVsZEluZGV4KGUpIHtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJpbmRleENvbmZpZ3VyYXRpb25cIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiaW5kZXhJZFwiLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJpbmRleFN0YXRlXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBLXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcInNlcXVlbmNlTnVtYmVySW5kZXhcIiwgJCwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4RW50cmllc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogVVxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJkb2N1bWVudEtleUluZGV4XCIsIFcsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfShlKSkpKSwgcztcbiAgICB9XG4gICAgdGkoZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpLlooKChlLCBuKSA9PiB7XG4gICAgICAgICAgICB0ICs9IF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZShuKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB7XG4gICAgICAgICAgICAgICAgYnl0ZVNpemU6IHRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZS5zdG9yZShcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpLnB1dChcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCIsIG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVpKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoXCJtdXRhdGlvblF1ZXVlc1wiKSwgbiA9IGUuc3RvcmUoXCJtdXRhdGlvbnNcIik7XG4gICAgICAgIHJldHVybiB0LkcoKS5uZXh0KCh0ID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBJREJLZXlSYW5nZS5ib3VuZChbIHQudXNlcklkLCAtMSBdLCBbIHQudXNlcklkLCB0Lmxhc3RBY2tub3dsZWRnZWRCYXRjaElkIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG4uRyhcInVzZXJNdXRhdGlvbnNJbmRleFwiLCByKS5uZXh0KChuID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKG4sIChuID0+IHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChuLnVzZXJJZCA9PT0gdC51c2VySWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIG4pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQudXNlcklkLCByKS5uZXh0KCgoKSA9PiB7fSkpO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXG4gICAgICovICAgIG5pKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiksIG4gPSBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpO1xuICAgICAgICByZXR1cm4gZS5zdG9yZShcInRhcmdldEdsb2JhbFwiKS5nZXQoXCJ0YXJnZXRHbG9iYWxLZXlcIikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgICAgICByZXR1cm4gbi5aKCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgUmVzb3VyY2VQYXRoKG4pLCBvID0gZnVuY3Rpb24gX19QUklWQVRFX3NlbnRpbmVsS2V5KGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgMCwgX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChlKSBdO1xuICAgICAgICAgICAgICAgIH0ocyk7XG4gICAgICAgICAgICAgICAgci5wdXNoKHQuZ2V0KG8pLm5leHQoKG4gPT4gbiA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiAobiA9PiB0LnB1dCh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiAwLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKG4pLFxuICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcjogZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSkocykpKSk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocikpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByaShlLCB0KSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgaW5kZXguXG4gICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJjb2xsZWN0aW9uUGFyZW50c1wiLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiBRXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuID0gdC5zdG9yZShcImNvbGxlY3Rpb25QYXJlbnRzXCIpLCByID0gbmV3IF9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgsIGFkZEVudHJ5ID0gZSA9PiB7XG4gICAgICAgICAgICBpZiAoci5hZGQoZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5sYXN0U2VnbWVudCgpLCByID0gZS5wb3BMYXN0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiB0LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgocilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXG4gICAgICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikuWih7XG4gICAgICAgICAgICBZOiAhMFxuICAgICAgICB9LCAoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgUmVzb3VyY2VQYXRoKGUpO1xuICAgICAgICAgICAgcmV0dXJuIGFkZEVudHJ5KG4ucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQuc3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKS5aKHtcbiAgICAgICAgICAgIFk6ICEwXG4gICAgICAgIH0sICgoW2UsIHQsIG5dLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aCh0KTtcbiAgICAgICAgICAgIHJldHVybiBhZGRFbnRyeShpLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICBpaShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLnN0b3JlKFwidGFyZ2V0c1wiKTtcbiAgICAgICAgcmV0dXJuIHQuWigoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KG4pLCBpID0gX19QUklWQVRFX3RvRGJUYXJnZXQodGhpcy5zZXJpYWxpemVyLCByKTtcbiAgICAgICAgICAgIHJldHVybiB0LnB1dChpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzaShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpLCByID0gW107XG4gICAgICAgIHJldHVybiBuLlooKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdC5zdG9yZShcInJlbW90ZURvY3VtZW50c1YxNFwiKSwgcyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9leHRyYWN0S2V5KGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5kb2N1bWVudCA/IG5ldyBEb2N1bWVudEtleShSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhlLmRvY3VtZW50Lm5hbWUpLnBvcEZpcnN0KDUpKSA6IGUubm9Eb2N1bWVudCA/IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhlLm5vRG9jdW1lbnQucGF0aCkgOiBlLnVua25vd25Eb2N1bWVudCA/IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhlLnVua25vd25Eb2N1bWVudC5wYXRoKSA6IGZhaWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuKS5wYXRoLnRvQXJyYXkoKSwgbyA9IHtcbiAgICAgICAgICAgICAgICBwcmVmaXhQYXRoOiBzLnNsaWNlKDAsIHMubGVuZ3RoIC0gMiksXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBzW3MubGVuZ3RoIC0gMl0sXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRJZDogc1tzLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBuLnJlYWRUaW1lIHx8IFsgMCwgMCBdLFxuICAgICAgICAgICAgICAgIHVua25vd25Eb2N1bWVudDogbi51bmtub3duRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgbm9Eb2N1bWVudDogbi5ub0RvY3VtZW50LFxuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBuLmRvY3VtZW50LFxuICAgICAgICAgICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogISFuLmhhc0NvbW1pdHRlZE11dGF0aW9uc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHIucHVzaChpLnB1dChvKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKSkpO1xuICAgIH1cbiAgICBvaShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnN0b3JlKFwibXV0YXRpb25zXCIpLCByID0gX19QUklWQVRFX25ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUodGhpcy5zZXJpYWxpemVyKSwgaSA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5UGVyc2lzdGVuY2UoX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUuSnIsIHRoaXMuc2VyaWFsaXplci5odCk7XG4gICAgICAgIHJldHVybiBuLkcoKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHQ7XG4gICAgICAgICAgICAgICAgbGV0IHIgPSBudWxsICE9PSAodCA9IG4uZ2V0KGUudXNlcklkKSkgJiYgdm9pZCAwICE9PSB0ID8gdCA6IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkua2V5cygpLmZvckVhY2goKGUgPT4gciA9IHIuYWRkKGUpKSksIFxuICAgICAgICAgICAgICAgIG4uc2V0KGUudXNlcklkLCByKTtcbiAgICAgICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gobiwgKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBVc2VyKG4pLCBvID0gX19QUklWQVRFX0luZGV4ZWREYkRvY3VtZW50T3ZlcmxheUNhY2hlLlB0KHRoaXMuc2VyaWFsaXplciwgcyksIF8gPSBpLmdldEluZGV4TWFuYWdlcihzKSwgYSA9IF9fUFJJVkFURV9JbmRleGVkRGJNdXRhdGlvblF1ZXVlLlB0KHMsIHRoaXMuc2VyaWFsaXplciwgXywgaS5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhbERvY3VtZW50c1ZpZXcociwgYSwgbywgXykucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMobmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbih0LCBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWUpLCBlKS5uZXh0KCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVRdWVyeUNhY2hlKGUpIHtcbiAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIsIHtcbiAgICAgICAga2V5UGF0aDoga1xuICAgIH0pLmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIiwgcSwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSk7XG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxuICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRzXCIsIHtcbiAgICAgICAga2V5UGF0aDogXCJ0YXJnZXRJZFwiXG4gICAgfSkuY3JlYXRlSW5kZXgoXCJxdWVyeVRhcmdldHNJbmRleFwiLCBMLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KSwgZS5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldEdsb2JhbFwiKTtcbn1cblxuY29uc3QgRWUgPSBcIkZhaWxlZCB0byBvYnRhaW4gZXhjbHVzaXZlIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2UgbGF5ZXIuIFRvIGFsbG93IHNoYXJlZCBhY2Nlc3MsIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24gaGFzIHRvIGJlIGVuYWJsZWQgaW4gYWxsIHRhYnMuIElmIHlvdSBhcmUgdXNpbmcgYGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiOnRydWVgLCBtYWtlIHN1cmUgdGhhdCBvbmx5IG9uZSB0YWIgaGFzIHBlcnNpc3RlbmNlIGVuYWJsZWQgYXQgYW55IGdpdmVuIHRpbWUuXCI7XG5cbi8qKlxuICogT2xkZXN0IGFjY2VwdGFibGUgYWdlIGluIG1pbGxpc2Vjb25kcyBmb3IgY2xpZW50IG1ldGFkYXRhIGJlZm9yZSB0aGUgY2xpZW50XG4gKiBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCBpdHMgYXNzb2NpYXRlZCBkYXRhIGlzIGdhcmJhZ2UgY29sbGVjdGVkLlxuICovXG4vKipcbiAqIEFuIEluZGV4ZWREQi1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIHBlcnNpc3RlbnRseVxuICogYWNyb3NzIHNlc3Npb25zLlxuICpcbiAqIE9uIFdlYiBvbmx5LCB0aGUgRmlyZXN0b3JlIFNES3Mgc3VwcG9ydCBzaGFyZWQgYWNjZXNzIHRvIGl0cyBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuIFRoaXMgYWxsb3dzIG11bHRpcGxlIGJyb3dzZXIgdGFicyB0byByZWFkIGFuZCB3cml0ZSB0byBJbmRleGVkRGIgYW5kXG4gKiB0byBzeW5jaHJvbml6ZSBzdGF0ZSBldmVuIHdpdGhvdXQgbmV0d29yayBjb25uZWN0aXZpdHkuIFNoYXJlZCBhY2Nlc3MgaXNcbiAqIGN1cnJlbnRseSBvcHRpb25hbCBhbmQgbm90IGVuYWJsZWQgdW5sZXNzIGFsbCBjbGllbnRzIGludm9rZVxuICogYGVuYWJsZVBlcnNpc3RlbmNlKClgIHdpdGggYHtzeW5jaHJvbml6ZVRhYnM6dHJ1ZX1gLlxuICpcbiAqIEluIG11bHRpLXRhYiBtb2RlLCBpZiBtdWx0aXBsZSBjbGllbnRzIGFyZSBhY3RpdmUgYXQgdGhlIHNhbWUgdGltZSwgdGhlIFNES1xuICogd2lsbCBkZXNpZ25hdGUgb25lIGNsaWVudCBhcyB0aGUg4oCccHJpbWFyeSBjbGllbnTigJ0uIEFuIGVmZm9ydCBpcyBtYWRlIHRvIHBpY2tcbiAqIGEgdmlzaWJsZSwgbmV0d29yay1jb25uZWN0ZWQgYW5kIGFjdGl2ZSBjbGllbnQsIGFuZCB0aGlzIGNsaWVudCBpc1xuICogcmVzcG9uc2libGUgZm9yIGxldHRpbmcgb3RoZXIgY2xpZW50cyBrbm93IGFib3V0IGl0cyBwcmVzZW5jZS4gVGhlIHByaW1hcnlcbiAqIGNsaWVudCB3cml0ZXMgYSB1bmlxdWUgY2xpZW50LWdlbmVyYXRlZCBpZGVudGlmaWVyICh0aGUgY2xpZW50IElEKSB0b1xuICogSW5kZXhlZERi4oCZcyDigJxvd25lcuKAnSBzdG9yZSBldmVyeSA0IHNlY29uZHMuIElmIHRoZSBwcmltYXJ5IGNsaWVudCBmYWlscyB0b1xuICogdXBkYXRlIHRoaXMgZW50cnksIGFub3RoZXIgY2xpZW50IGNhbiBhY3F1aXJlIHRoZSBsZWFzZSBhbmQgdGFrZSBvdmVyIGFzXG4gKiBwcmltYXJ5LlxuICpcbiAqIFNvbWUgcGVyc2lzdGVuY2Ugb3BlcmF0aW9ucyBpbiB0aGUgU0RLIGFyZSBkZXNpZ25hdGVkIGFzIHByaW1hcnktY2xpZW50IG9ubHlcbiAqIG9wZXJhdGlvbnMuIFRoaXMgaW5jbHVkZXMgdGhlIGFja25vd2xlZGdtZW50IG9mIG11dGF0aW9ucyBhbmQgYWxsIHVwZGF0ZXMgb2ZcbiAqIHJlbW90ZSBkb2N1bWVudHMuIFRoZSBlZmZlY3RzIG9mIHRoZXNlIG9wZXJhdGlvbnMgYXJlIHdyaXR0ZW4gdG8gcGVyc2lzdGVuY2VcbiAqIGFuZCB0aGVuIGJyb2FkY2FzdCB0byBvdGhlciB0YWJzIHZpYSBMb2NhbFN0b3JhZ2UgKHNlZVxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWApLCB3aGljaCB0aGVuIHJlZnJlc2ggdGhlaXIgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogU2ltaWxhcmx5LCB0aGUgcHJpbWFyeSBjbGllbnQgbGlzdGVucyB0byBub3RpZmljYXRpb25zIHNlbnQgYnkgc2Vjb25kYXJ5XG4gKiBjbGllbnRzIHRvIGRpc2NvdmVyIHBlcnNpc3RlbmNlIGNoYW5nZXMgd3JpdHRlbiBieSBzZWNvbmRhcnkgY2xpZW50cywgc3VjaCBhc1xuICogdGhlIGFkZGl0aW9uIG9mIG5ldyBtdXRhdGlvbnMgYW5kIHF1ZXJ5IHRhcmdldHMuXG4gKlxuICogSWYgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkIGFuZCBhbm90aGVyIHRhYiBhbHJlYWR5IG9idGFpbmVkIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSwgSW5kZXhlZERiUGVyc2lzdGVuY2UgZW50ZXJzIGEgZmFpbGVkIHN0YXRlIGFuZCBhbGwgc3Vic2VxdWVudFxuICogb3BlcmF0aW9ucyB3aWxsIGF1dG9tYXRpY2FsbHkgZmFpbC5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHRoZXJlIGlzIGFuIG9wdGltaXphdGlvbiBzbyB0aGF0IHdoZW4gYSB0YWIgaXMgY2xvc2VkLCB0aGVcbiAqIHByaW1hcnkgbGVhc2UgaXMgcmVsZWFzZWQgaW1tZWRpYXRlbHkgKHRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgdG8gbWFrZVxuICogc3VyZSB0aGF0IGEgcmVmcmVzaGVkIHRhYiBpcyBhYmxlIHRvIGltbWVkaWF0ZWx5IHJlLWFjcXVpcmUgdGhlIHByaW1hcnlcbiAqIGxlYXNlKS4gVW5mb3J0dW5hdGVseSwgSW5kZXhlZERCIGNhbm5vdCBiZSByZWxpYWJseSB1c2VkIGluIHdpbmRvdy51bmxvYWRcbiAqIHNpbmNlIGl0IGlzIGFuIGFzeW5jaHJvbm91cyBBUEkuIFNvIGluIGFkZGl0aW9uIHRvIGF0dGVtcHRpbmcgdG8gZ2l2ZSB1cCB0aGVcbiAqIGxlYXNlLCB0aGUgbGVhc2Vob2xkZXIgd3JpdGVzIGl0cyBjbGllbnQgSUQgdG8gYSBcInpvbWJpZWRDbGllbnRcIiBlbnRyeSBpblxuICogTG9jYWxTdG9yYWdlIHdoaWNoIGFjdHMgYXMgYW4gaW5kaWNhdG9yIHRoYXQgYW5vdGhlciB0YWIgc2hvdWxkIGdvIGFoZWFkIGFuZFxuICogdGFrZSB0aGUgcHJpbWFyeSBsZWFzZSBpbW1lZGlhdGVseSByZWdhcmRsZXNzIG9mIHRoZSBjdXJyZW50IGxlYXNlIHRpbWVzdGFtcC5cbiAqXG4gKiBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIGBzeW5jaHJvbml6ZVRhYnNgIHNlY3Rpb24gd2hlbiBtdWx0aS10YWIgaXMgbm9cbiAqIGxvbmdlciBvcHRpb25hbC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlBlcnNpc3RlbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHN5bmNocm9uaXplIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgbXVsdGlwbGUgdGFicyBhbmQgc2hhcmVcbiAgICAgKiBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gICAgICovXG4gICAgZSwgdCwgbiwgciwgaSwgcywgbywgXywgYSwgXG4gICAgLyoqXG4gICAgICogSWYgc2V0IHRvIHRydWUsIGZvcmNlZnVsbHkgb2J0YWlucyBkYXRhYmFzZSBhY2Nlc3MuIEV4aXN0aW5nIHRhYnMgd2lsbFxuICAgICAqIG5vIGxvbmdlciBiZSBhYmxlIHRvIGFjY2VzcyBJbmRleGVkREIuXG4gICAgICovXG4gICAgdSwgYyA9IDE1KSB7XG4gICAgICAgIGlmICh0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IHQsIHRoaXMuY2xpZW50SWQgPSBuLCBcbiAgICAgICAgdGhpcy5faSA9IGksIHRoaXMud2luZG93ID0gcywgdGhpcy5kb2N1bWVudCA9IG8sIHRoaXMuYWkgPSBhLCB0aGlzLnVpID0gdSwgdGhpcy5jaSA9IGMsIFxuICAgICAgICB0aGlzLnFyID0gbnVsbCwgdGhpcy5RciA9ICExLCB0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLm5ldHdvcmtFbmFibGVkID0gITAsIFxuICAgICAgICAvKiogT3VyIHdpbmRvdy51bmxvYWQgaGFuZGxlciwgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5saSA9IG51bGwsIHRoaXMuaW5Gb3JlZ3JvdW5kID0gITEsIFxuICAgICAgICAvKiogT3VyICd2aXNpYmlsaXR5Y2hhbmdlJyBsaXN0ZW5lciBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgY2xpZW50IG1ldGFkYXRhIHJlZnJlc2ggdGFzay4gKi9cbiAgICAgICAgdGhpcy5QaSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGxhc3QgdGltZSB3ZSBnYXJiYWdlIGNvbGxlY3RlZCB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS4gKi9cbiAgICAgICAgdGhpcy5JaSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgXG4gICAgICAgIC8qKiBBIGxpc3RlbmVyIHRvIG5vdGlmeSBvbiBwcmltYXJ5IHN0YXRlIGNoYW5nZXMuICovXG4gICAgICAgIHRoaXMuZGkgPSBlID0+IFByb21pc2UucmVzb2x2ZSgpLCAhX19QUklWQVRFX0luZGV4ZWREYlBlcnNpc3RlbmNlLkMoKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuVU5JTVBMRU1FTlRFRCwgXCJUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJMcnVEZWxlZ2F0ZUltcGwodGhpcywgciksIHRoaXMuVGkgPSB0ICsgXCJtYWluXCIsIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBuZXcgX19QUklWQVRFX0xvY2FsU2VyaWFsaXplcihfKSwgdGhpcy5FaSA9IG5ldyBfX1BSSVZBVEVfU2ltcGxlRGIodGhpcy5UaSwgdGhpcy5jaSwgbmV3IF9fUFJJVkFURV9TY2hlbWFDb252ZXJ0ZXIodGhpcy5zZXJpYWxpemVyKSksIFxuICAgICAgICB0aGlzLktyID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJUYXJnZXRDYWNoZSh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLCB0aGlzLnNlcmlhbGl6ZXIpLCBcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gX19QUklWQVRFX25ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUodGhpcy5zZXJpYWxpemVyKSwgXG4gICAgICAgIHRoaXMuVXIgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYkJ1bmRsZUNhY2hlLCB0aGlzLndpbmRvdyAmJiB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgPyB0aGlzLkFpID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlIDogKHRoaXMuQWkgPSBudWxsLCBcbiAgICAgICAgITEgPT09IHUgJiYgX19QUklWQVRFX2xvZ0Vycm9yKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJMb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUuIEFzIGEgcmVzdWx0LCBwZXJzaXN0ZW5jZSBtYXkgbm90IHdvcmsgcmVsaWFibHkuIEluIHBhcnRpY3VsYXIgZW5hYmxlUGVyc2lzdGVuY2UoKSBjb3VsZCBmYWlsIGltbWVkaWF0ZWx5IGFmdGVyIHJlZnJlc2hpbmcgdGhlIHBhZ2UuXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGRcbiAgICAgICAgLy8gZG8uXG4gICAgICAgIHJldHVybiB0aGlzLlJpKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAvLyBGYWlsIGBzdGFydCgpYCBpZiBgc3luY2hyb25pemVUYWJzYCBpcyBkaXNhYmxlZCBhbmQgd2UgY2Fubm90XG4gICAgICAgICAgICAvLyBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBFZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5WaSgpLCB0aGlzLm1pKCksIHRoaXMuZmkoKSwgdGhpcy5ydW5UcmFuc2FjdGlvbihcImdldEhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlclwiLCBcInJlYWRvbmx5XCIsIChlID0+IHRoaXMuS3IuZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKGUpKSk7XG4gICAgICAgIH0pKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMucXIgPSBuZXcgX19QUklWQVRFX0xpc3RlblNlcXVlbmNlKGUsIHRoaXMuYWkpO1xuICAgICAgICB9KSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5RciA9ICEwO1xuICAgICAgICB9KSkuY2F0Y2goKGUgPT4gKHRoaXMuRWkgJiYgdGhpcy5FaS5jbG9zZSgpLCBQcm9taXNlLnJlamVjdChlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBwcmltYXJ5IHN0YXRlIG9mIHRoZVxuICAgICAqIGluc3RhbmNlIGNoYW5nZXMuIFVwb24gcmVnaXN0ZXJpbmcsIHRoaXMgbGlzdGVuZXIgaXMgaW52b2tlZCBpbW1lZGlhdGVseVxuICAgICAqIHdpdGggdGhlIGN1cnJlbnQgcHJpbWFyeSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIGdpKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGkgPSBhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHJldHVybiBlKHQpO1xuICAgICAgICB9LCBlKHRoaXMuaXNQcmltYXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBkYXRhYmFzZSByZWNlaXZlcyBhXG4gICAgICogdmVyc2lvbiBjaGFuZ2UgZXZlbnQgaW5kaWNhdGluZyB0aGF0IGl0IGhhcyBkZWxldGVkLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoZSkge1xuICAgICAgICB0aGlzLkVpLmsoKGFzeW5jIHQgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYW4gYXR0ZW1wdCBpcyBtYWRlIHRvIGRlbGV0ZSBJbmRleGVkREIuXG4gICAgICAgICAgICBudWxsID09PSB0Lm5ld1ZlcnNpb24gJiYgYXdhaXQgZSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkanVzdHMgdGhlIGN1cnJlbnQgbmV0d29yayBzdGF0ZSBpbiB0aGUgY2xpZW50J3MgbWV0YWRhdGEsIHBvdGVudGlhbGx5XG4gICAgICogYWZmZWN0aW5nIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0TmV0d29ya0VuYWJsZWQoZSkge1xuICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkICE9PSBlICYmICh0aGlzLm5ldHdvcmtFbmFibGVkID0gZSwgXG4gICAgICAgIC8vIFNjaGVkdWxlIGEgcHJpbWFyeSBsZWFzZSByZWZyZXNoIGZvciBpbW1lZGlhdGUgZXhlY3V0aW9uLiBUaGUgZXZlbnR1YWxcbiAgICAgICAgLy8gbGVhc2UgdXBkYXRlIHdpbGwgYmUgcHJvcGFnYXRlZCB2aWEgYHByaW1hcnlTdGF0ZUxpc3RlbmVyYC5cbiAgICAgICAgdGhpcy5faS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgYXdhaXQgdGhpcy5SaSgpO1xuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjbGllbnQgbWV0YWRhdGEgaW4gSW5kZXhlZERiIGFuZCBhdHRlbXB0cyB0byBlaXRoZXIgb2J0YWluIG9yXG4gICAgICogZXh0ZW5kIHRoZSBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBBc3luY2hyb25vdXNseSBub3RpZmllcyB0aGVcbiAgICAgKiBwcmltYXJ5IHN0YXRlIGxpc3RlbmVyIGlmIHRoZSBjbGllbnQgZWl0aGVyIG5ld2x5IG9idGFpbmVkIG9yIHJlbGVhc2VkIGl0c1xuICAgICAqIHByaW1hcnkgbGVhc2UuXG4gICAgICovICAgIFJpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmFuc2FjdGlvbihcInVwZGF0ZUNsaWVudE1ldGFkYXRhQW5kVHJ5QmVjb21lUHJpbWFyeVwiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiBfX1BSSVZBVEVfY2xpZW50TWV0YWRhdGFTdG9yZShlKS5wdXQoe1xuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KCksXG4gICAgICAgICAgICBuZXR3b3JrRW5hYmxlZDogdGhpcy5uZXR3b3JrRW5hYmxlZCxcbiAgICAgICAgICAgIGluRm9yZWdyb3VuZDogdGhpcy5pbkZvcmVncm91bmRcbiAgICAgICAgfSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5KSByZXR1cm4gdGhpcy5waShlKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBlIHx8ICh0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLl9pLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuZGkoITEpKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdGhpcy55aShlKSkpLm5leHQoKHQgPT4gdGhpcy5pc1ByaW1hcnkgJiYgIXQgPyB0aGlzLndpKGUpLm5leHQoKCgpID0+ICExKSkgOiAhIXQgJiYgdGhpcy5TaShlKS5uZXh0KCgoKSA9PiAhMCkpKSkpKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSkgXG4gICAgICAgICAgICAvLyBQcm9jZWVkIHdpdGggdGhlIGV4aXN0aW5nIHN0YXRlLiBBbnkgc3Vic2VxdWVudCBhY2Nlc3MgdG9cbiAgICAgICAgICAgIC8vIEluZGV4ZWREQiB3aWxsIHZlcmlmeSB0aGUgbGVhc2UuXG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgZSksIFxuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIHRocm93IGU7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgb3duZXIgbGVhc2UgYWZ0ZXIgZXJyb3IgZHVyaW5nIGxlYXNlIHJlZnJlc2hcIiwgZSksIFxuICAgICAgICAgICAgLyogaXNQcmltYXJ5PSAqLyAhMTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgIT09IGUgJiYgdGhpcy5faS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLmRpKGUpKSksIHRoaXMuaXNQcmltYXJ5ID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBwaShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpLmdldChcIm93bmVyXCIpLm5leHQoKGUgPT4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5iaShlKSkpKTtcbiAgICB9XG4gICAgRGkoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NsaWVudE1ldGFkYXRhU3RvcmUoZSkuZGVsZXRlKHRoaXMuY2xpZW50SWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZ2FyYmFnZSBjb2xsZWN0aW9uIHRocmVzaG9sZCBoYXMgcGFzc2VkLCBwcnVuZXMgdGhlXG4gICAgICogUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIGFuZCB0aGUgQ2xpZW50TWV0YWRhdGEgc3RvcmUgYmFzZWQgb24gdGhlIGxhc3QgdXBkYXRlXG4gICAgICogdGltZSBvZiBhbGwgY2xpZW50cy5cbiAgICAgKi8gICAgYXN5bmMgQ2koKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy52aSh0aGlzLklpLCAxOGU1KSkge1xuICAgICAgICAgICAgdGhpcy5JaSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5ydW5UcmFuc2FjdGlvbihcIm1heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJjbGllbnRNZXRhZGF0YVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5HKCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLkZpKGUsIDE4ZTUpLCByID0gZS5maWx0ZXIoKGUgPT4gLTEgPT09IG4uaW5kZXhPZihlKSkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgbWV0YWRhdGEgZm9yIGNsaWVudHMgdGhhdCBhcmUgbm8gbG9uZ2VyIGNvbnNpZGVyZWQgYWN0aXZlLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gociwgKGUgPT4gdC5kZWxldGUoZS5jbGllbnRJZCkpKS5uZXh0KCgoKSA9PiByKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCgoKSA9PiBbXSkpO1xuICAgICAgICAgICAgLy8gRGVsZXRlIHBvdGVudGlhbCBsZWZ0b3ZlciBlbnRyaWVzIHRoYXQgbWF5IGNvbnRpbnVlIHRvIG1hcmsgdGhlXG4gICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGRlbGV0ZSB0aGUgSW5kZXhlZERiIGFuZCBMb2NhbFN0b3JhZ2Ugem9tYmllIGVudHJpZXMgZm9yXG4gICAgICAgICAgICAvLyB0aGUgY2xpZW50IGF0b21pY2FsbHksIGJ1dCB3ZSBjYW4ndC4gU28gd2Ugb3B0IHRvIGRlbGV0ZSB0aGUgSW5kZXhlZERiXG4gICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5BaSkgZm9yIChjb25zdCB0IG9mIGUpIHRoaXMuQWkucmVtb3ZlSXRlbSh0aGlzLk1pKHQuY2xpZW50SWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxuICAgICAqIGV4dGVuZCBvciBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIGlmIHRoZSBjbGllbnQgaXMgZWxpZ2libGUuXG4gICAgICovICAgIGZpKCkge1xuICAgICAgICB0aGlzLlBpID0gdGhpcy5faS5lbnF1ZXVlQWZ0ZXJEZWxheShcImNsaWVudF9tZXRhZGF0YV9yZWZyZXNoXCIgLyogVGltZXJJZC5DbGllbnRNZXRhZGF0YVJlZnJlc2ggKi8gLCA0ZTMsICgoKSA9PiB0aGlzLlJpKCkudGhlbigoKCkgPT4gdGhpcy5DaSgpKSkudGhlbigoKCkgPT4gdGhpcy5maSgpKSkpKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB3aGV0aGVyIGBjbGllbnRgIGlzIHRoZSBsb2NhbCBjbGllbnQuICovICAgIGJpKGUpIHtcbiAgICAgICAgcmV0dXJuICEhZSAmJiBlLm93bmVySWQgPT09IHRoaXMuY2xpZW50SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2YWx1YXRlIHRoZSBzdGF0ZSBvZiBhbGwgYWN0aXZlIGNsaWVudHMgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoZSBsb2NhbFxuICAgICAqIGNsaWVudCBpcyBvciBjYW4gYWN0IGFzIHRoZSBob2xkZXIgb2YgdGhlIHByaW1hcnkgbGVhc2UuIFJldHVybnMgd2hldGhlclxuICAgICAqIHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBsZWFzZSwgYnV0IGRvZXMgbm90IGFjdHVhbGx5IGFjcXVpcmUgaXQuXG4gICAgICogTWF5IHJldHVybiAnZmFsc2UnIGV2ZW4gaWYgdGhlcmUgaXMgbm8gYWN0aXZlIGxlYXNlaG9sZGVyIGFuZCBhbm90aGVyXG4gICAgICogKGZvcmVncm91bmQpIGNsaWVudCBzaG91bGQgYmVjb21lIGxlYXNlaG9sZGVyIGluc3RlYWQuXG4gICAgICovICAgIHlpKGUpIHtcbiAgICAgICAgaWYgKHRoaXMudWkpIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSghMCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpLmdldChcIm93bmVyXCIpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgLy8gQSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBwcmltYXJ5IGxlYXNlIGlmOlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW5cbiAgICAgICAgICAgIC8vICAgdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIHRoZSBgZm9yY2VPd25pbmdUYWJgIHNldHRpbmcgd2FzIHBhc3NlZCBpbi5cbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0ICYmIHRoaXMudmkodC5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLnhpKHQub3duZXJJZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5iaSh0KSAmJiB0aGlzLm5ldHdvcmtFbmFibGVkKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmJpKHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdC5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAgICAgICAgIC8vIEZhaWwgdGhlIGBjYW5BY3RBc1ByaW1hcnlgIGNoZWNrIGlmIHRoZSBjdXJyZW50IGxlYXNlaG9sZGVyIGhhc1xuICAgICAgICAgICAgICAgICAgICAvLyBub3Qgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLiBJZiB0aGlzIGhhcHBlbnMgYXRcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpZW50IHN0YXJ0dXAsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSByZXR1cm5lZCBieVxuICAgICAgICAgICAgICAgICAgICAvLyBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgYW5kIHRoZSB1c2VyIGNhbiBjb250aW51ZSB0byB1c2UgRmlyZXN0b3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZhaWxzIGR1cmluZyBhIGxlYXNlIHJlZnJlc2gsIHdlIHdpbGwgaW5zdGVhZCBibG9jayB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBmcm9tIGV4ZWN1dGluZyBmdXJ0aGVyIG9wZXJhdGlvbnMuIE5vdGUgdGhhdCB0aGlzIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjY2VwdGFibGUgc2luY2UgbWl4aW5nICYgbWF0Y2hpbmcgZGlmZmVyZW50IGBzeW5jaHJvbml6ZVRhYnNgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldHRpbmdzIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhblxuICAgICAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgYmUgdHVybmVkIG9mZi5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgRWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICEoIXRoaXMubmV0d29ya0VuYWJsZWQgfHwgIXRoaXMuaW5Gb3JlZ3JvdW5kKSB8fCBfX1BSSVZBVEVfY2xpZW50TWV0YWRhdGFTdG9yZShlKS5HKCkubmV4dCgoZSA9PiB2b2lkIDAgPT09IHRoaXMuRmkoZSwgNWUzKS5maW5kKChlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGllbnRJZCAhPT0gZS5jbGllbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gIXRoaXMubmV0d29ya0VuYWJsZWQgJiYgZS5uZXR3b3JrRW5hYmxlZCwgbiA9ICF0aGlzLmluRm9yZWdyb3VuZCAmJiBlLmluRm9yZWdyb3VuZCwgciA9IHRoaXMubmV0d29ya0VuYWJsZWQgPT09IGUubmV0d29ya0VuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0IHx8IG4gJiYgcikgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpLm5leHQoKGUgPT4gKHRoaXMuaXNQcmltYXJ5ICE9PSBlICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJHtlID8gXCJpc1wiIDogXCJpcyBub3RcIn0gZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5gKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKCkge1xuICAgICAgICAvLyBUaGUgc2h1dGRvd24oKSBvcGVyYXRpb25zIGFyZSBpZGVtcG90ZW50IGFuZCBjYW4gYmUgY2FsbGVkIGV2ZW4gd2hlblxuICAgICAgICAvLyBzdGFydCgpIGFib3J0ZWQgKGUuZy4gYmVjYXVzZSBpdCBjb3VsZG4ndCBhY3F1aXJlIHRoZSBwZXJzaXN0ZW5jZSBsZWFzZSkuXG4gICAgICAgIHRoaXMuUXIgPSAhMSwgdGhpcy5PaSgpLCB0aGlzLlBpICYmICh0aGlzLlBpLmNhbmNlbCgpLCB0aGlzLlBpID0gbnVsbCksIHRoaXMuTmkoKSwgXG4gICAgICAgIHRoaXMuQmkoKSwgXG4gICAgICAgIC8vIFVzZSBgU2ltcGxlRGIucnVuVHJhbnNhY3Rpb25gIGRpcmVjdGx5IHRvIGF2b2lkIGZhaWxpbmcgaWYgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gaGFzIG9idGFpbmVkIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICBhd2FpdCB0aGlzLkVpLnJ1blRyYW5zYWN0aW9uKFwic2h1dGRvd25cIiwgXCJyZWFkd3JpdGVcIiwgWyBcIm93bmVyXCIsIFwiY2xpZW50TWV0YWRhdGFcIiBdLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbihlLCBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2kodCkubmV4dCgoKCkgPT4gdGhpcy5EaSh0KSkpO1xuICAgICAgICB9KSksIHRoaXMuRWkuY2xvc2UoKSwgXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgZW50cnkgbWFya2luZyB0aGUgY2xpZW50IGFzIHpvbWJpZWQgZnJvbSBMb2NhbFN0b3JhZ2Ugc2luY2VcbiAgICAgICAgLy8gd2Ugc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgaXRzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLlxuICAgICAgICB0aGlzLkxpKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY2xpZW50cyB0aGF0IGFyZSBub3Qgem9tYmllZCBhbmQgaGF2ZSBhbiB1cGRhdGVUaW1lIHdpdGhpbiB0aGVcbiAgICAgKiBwcm92aWRlZCB0aHJlc2hvbGQuXG4gICAgICovICAgIEZpKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUuZmlsdGVyKChlID0+IHRoaXMudmkoZS51cGRhdGVUaW1lTXMsIHQpICYmICF0aGlzLnhpKGUuY2xpZW50SWQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiBJZiBtdWx0aS10YWJcbiAgICAgKiBpcyBub3Qgc3VwcG9ydGVkLCByZXR1cm5zIGFuIGFycmF5IHRoYXQgb25seSBjb250YWlucyB0aGUgbG9jYWwgY2xpZW50J3NcbiAgICAgKiBJRC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIGtpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmFuc2FjdGlvbihcImdldEFjdGl2ZUNsaWVudHNcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBfX1BSSVZBVEVfY2xpZW50TWV0YWRhdGFTdG9yZShlKS5HKCkubmV4dCgoZSA9PiB0aGlzLkZpKGUsIDE4ZTUpLm1hcCgoZSA9PiBlLmNsaWVudElkKSkpKSkpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUXI7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX0luZGV4ZWREYk11dGF0aW9uUXVldWUuUHQoZSwgdGhpcy5zZXJpYWxpemVyLCB0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLktyO1xuICAgIH1cbiAgICBnZXRSZW1vdGVEb2N1bWVudENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlO1xuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJJbmRleE1hbmFnZXIoZSwgdGhpcy5zZXJpYWxpemVyLmh0LmRhdGFiYXNlSWQpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudE92ZXJsYXlDYWNoZShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfSW5kZXhlZERiRG9jdW1lbnRPdmVybGF5Q2FjaGUuUHQodGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlVyO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbihlLCB0LCBuKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIGUpO1xuICAgICAgICBjb25zdCByID0gXCJyZWFkb25seVwiID09PSB0ID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgaSA9IFxuICAgICAgICAvKiogUmV0dXJucyB0aGUgb2JqZWN0IHN0b3JlcyBmb3IgdGhlIHByb3ZpZGVkIHNjaGVtYS4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2dldE9iamVjdFN0b3JlcyhlKSB7XG4gICAgICAgICAgICByZXR1cm4gMTUgPT09IGUgPyBYIDogMTQgPT09IGUgPyBaIDogMTMgPT09IGUgPyBZIDogMTIgPT09IGUgPyBKIDogMTEgPT09IGUgPyBIIDogdm9pZCBmYWlsKCk7XG4gICAgICAgIH0odGhpcy5jaSk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxuICAgICAgICAvLyBhcmUgdGhlIG9ubHkgcmVhZGVyL3dyaXRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5FaS5ydW5UcmFuc2FjdGlvbihlLCByLCBpLCAociA9PiAocyA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb24ociwgdGhpcy5xciA/IHRoaXMucXIubmV4dCgpIDogX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmFlKSwgXG4gICAgICAgIFwicmVhZHdyaXRlLXByaW1hcnlcIiA9PT0gdCA/IHRoaXMucGkocykubmV4dCgoZSA9PiAhIWUgfHwgdGhpcy55aShzKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBfX1BSSVZBVEVfbG9nRXJyb3IoYEZhaWxlZCB0byBvYnRhaW4gcHJpbWFyeSBsZWFzZSBmb3IgYWN0aW9uICcke2V9Jy5gKSwgXG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLl9pLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuZGkoITEpKSksIG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIHYpO1xuICAgICAgICAgICAgcmV0dXJuIG4ocyk7XG4gICAgICAgIH0pKS5uZXh0KChlID0+IHRoaXMuU2kocykubmV4dCgoKCkgPT4gZSkpKSkgOiB0aGlzLnFpKHMpLm5leHQoKCgpID0+IG4ocykpKSkpKS50aGVuKChlID0+IChzLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgY3VycmVudCB0YWIgaXMgdGhlIHByaW1hcnkgbGVhc2Vob2xkZXIgb3IgYWx0ZXJuYXRpdmVseVxuICAgICAqIHRoYXQgdGhlIGxlYXNlaG9sZGVyIGhhcyBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuIG5vIGxvbmdlclxuICAgIC8vIGJlIHR1cm5lZCBvZmYuXG4gICAgcWkoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1hcnlDbGllbnRTdG9yZShlKS5nZXQoXCJvd25lclwiKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlICYmIHRoaXMudmkoZS5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLnhpKGUub3duZXJJZCkgJiYgIXRoaXMuYmkoZSkgJiYgISh0aGlzLnVpIHx8IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gJiYgZS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIEVlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPYnRhaW5zIG9yIGV4dGVuZHMgdGhlIG5ldyBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBUaGlzXG4gICAgICogbWV0aG9kIGRvZXMgbm90IHZlcmlmeSB0aGF0IHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoaXMgbGVhc2UuXG4gICAgICovICAgIFNpKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIG93bmVySWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhbGxvd1RhYlN5bmNocm9uaXphdGlvbjogdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbixcbiAgICAgICAgICAgIGxlYXNlVGltZXN0YW1wTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkucHV0KFwib3duZXJcIiwgdCk7XG4gICAgfVxuICAgIHN0YXRpYyBDKCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1NpbXBsZURiLkMoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgd2koZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ByaW1hcnlDbGllbnRTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHQuZ2V0KFwib3duZXJcIikubmV4dCgoZSA9PiB0aGlzLmJpKGUpID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiUmVsZWFzaW5nIHByaW1hcnkgbGVhc2UuXCIpLCBcbiAgICAgICAgdC5kZWxldGUoXCJvd25lclwiKSkgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIC8qKiBWZXJpZmllcyB0aGF0IGB1cGRhdGVUaW1lTXNgIGlzIHdpdGhpbiBgbWF4QWdlTXNgLiAqLyAgICB2aShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gIShlIDwgbiAtIHQpICYmICghKGUgPiBuKSB8fCAoX19QUklWQVRFX2xvZ0Vycm9yKGBEZXRlY3RlZCBhbiB1cGRhdGUgdGltZSB0aGF0IGlzIGluIHRoZSBmdXR1cmU6ICR7ZX0gPiAke259YCksIFxuICAgICAgICAhMSkpO1xuICAgIH1cbiAgICBWaSgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5kb2N1bWVudCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAodGhpcy5oaSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2kuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlLCBcbiAgICAgICAgICAgIHRoaXMuUmkoKSkpKTtcbiAgICAgICAgfSwgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLmhpKSwgdGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUpO1xuICAgIH1cbiAgICBOaSgpIHtcbiAgICAgICAgdGhpcy5oaSAmJiAodGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLmhpKSwgdGhpcy5oaSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhIHdpbmRvdy51bmxvYWQgaGFuZGxlciB0aGF0IHdpbGwgc3luY2hyb25vdXNseSB3cml0ZSBvdXJcbiAgICAgKiBjbGllbnRJZCB0byBhIFwiem9tYmllIGNsaWVudCBpZFwiIGxvY2F0aW9uIGluIExvY2FsU3RvcmFnZS4gVGhpcyBjYW4gYmUgdXNlZFxuICAgICAqIGJ5IHRhYnMgdHJ5aW5nIHRvIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgdG8gZGV0ZXJtaW5lIHRoYXQgdGhlIGxlYXNlXG4gICAgICogaXMgbm8gbG9uZ2VyIHZhbGlkIGV2ZW4gaWYgdGhlIHRpbWVzdGFtcCBpcyByZWNlbnQuIFRoaXMgaXMgcGFydGljdWxhcmx5XG4gICAgICogaW1wb3J0YW50IGZvciB0aGUgcmVmcmVzaCBjYXNlIChzbyB0aGUgdGFiIGNvcnJlY3RseSByZS1hY3F1aXJlcyB0aGVcbiAgICAgKiBwcmltYXJ5IGxlYXNlKS4gTG9jYWxTdG9yYWdlIGlzIHVzZWQgZm9yIHRoaXMgcmF0aGVyIHRoYW4gSW5kZXhlZERiIGJlY2F1c2VcbiAgICAgKiBpdCBpcyBhIHN5bmNocm9ub3VzIEFQSSBhbmQgc28gY2FuIGJlIHVzZWQgcmVsaWFibHkgZnJvbSAgYW4gdW5sb2FkXG4gICAgICogaGFuZGxlci5cbiAgICAgKi8gICAgbWkoKSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChudWxsID09PSAoZSA9IHRoaXMud2luZG93KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFkZEV2ZW50TGlzdGVuZXIpICYmICh0aGlzLmxpID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gTm90ZTogSW4gdGhlb3J5LCB0aGlzIHNob3VsZCBiZSBzY2hlZHVsZWQgb24gdGhlIEFzeW5jUXVldWUgc2luY2UgaXRcbiAgICAgICAgICAgIC8vIGFjY2Vzc2VzIGludGVybmFsIHN0YXRlLiBXZSBleGVjdXRlIHRoaXMgY29kZSBkaXJlY3RseSBkdXJpbmcgc2h1dGRvd25cbiAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBpdCBnZXRzIGEgY2hhbmNlIHRvIHJ1bi5cbiAgICAgICAgICAgIHRoaXMuT2koKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSAvKD86VmVyc2lvbnxNb2JpbGUpXFwvMVs0NTZdLztcbiAgICAgICAgICAgIGlzU2FmYXJpKCkgJiYgKG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKGUpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goZSkpICYmIFxuICAgICAgICAgICAgLy8gT24gU2FmYXJpIDE0LCAxNSwgYW5kIDE2LCB3ZSBkbyBub3QgcnVuIGFueSBjbGVhbnVwIGFjdGlvbnMgYXMgaXQgbWlnaHRcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgYSBidWcgdGhhdCBwcmV2ZW50cyBTYWZhcmkgZnJvbSByZS1vcGVuaW5nIEluZGV4ZWREQiBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IHBhZ2UgbG9hZC5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjI2NTQ3XG4gICAgICAgICAgICB0aGlzLl9pLmVudGVyUmVzdHJpY3RlZE1vZGUoLyogcHVyZ2VFeGlzdGluZ1Rhc2tzPSAqLyAhMCksIHRoaXMuX2kuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSk7XG4gICAgICAgIH0sIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLmxpKSk7XG4gICAgfVxuICAgIEJpKCkge1xuICAgICAgICB0aGlzLmxpICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5saSksIHRoaXMubGkgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIGEgY2xpZW50IGlzIFwiem9tYmllZFwiIGJhc2VkIG9uIGl0cyBMb2NhbFN0b3JhZ2UgZW50cnkuXG4gICAgICogQ2xpZW50cyBiZWNvbWUgem9tYmllZCB3aGVuIHRoZWlyIHRhYiBjbG9zZXMgd2l0aG91dCBydW5uaW5nIGFsbCBvZiB0aGVcbiAgICAgKiBjbGVhbnVwIGxvZ2ljIGluIGBzaHV0ZG93bigpYC5cbiAgICAgKi8gICAgeGkoZSkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBudWxsICE9PSAobnVsbCA9PT0gKHQgPSB0aGlzLkFpKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmdldEl0ZW0odGhpcy5NaShlKSkpO1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJyR7ZX0nICR7biA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlYCksIFxuICAgICAgICAgICAgbjtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0Vycm9yKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZ2V0IHpvbWJpZWQgY2xpZW50IGlkLlwiLCBlKSwgXG4gICAgICAgICAgICAhMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmQgY2xpZW50IGFzIHpvbWJpZWQgKGEgY2xpZW50IHRoYXQgaGFkIGl0cyB0YWIgY2xvc2VkKS4gWm9tYmllZFxuICAgICAqIGNsaWVudHMgYXJlIGlnbm9yZWQgZHVyaW5nIHByaW1hcnkgdGFiIHNlbGVjdGlvbi5cbiAgICAgKi8gICAgT2koKSB7XG4gICAgICAgIGlmICh0aGlzLkFpKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5BaS5zZXRJdGVtKHRoaXMuTWkodGhpcy5jbGllbnRJZCksIFN0cmluZyhEYXRlLm5vdygpKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgLyB3b3JraW5nLlxuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKFwiRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLlwiLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqLyAgICBMaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuQWkpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLkFpLnJlbW92ZUl0ZW0odGhpcy5NaSh0aGlzLmNsaWVudElkKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9XG4gICAgfVxuICAgIE1pKGUpIHtcbiAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfem9tYmllXyR7dGhpcy5wZXJzaXN0ZW5jZUtleX1fJHtlfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcHJpbWFyeSBjbGllbnQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJvd25lclwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NsaWVudE1ldGFkYXRhU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJjbGllbnRNZXRhZGF0YVwiKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdXNlZCBhcyBhIHByZWZpeCB3aGVuIHN0b3JpbmcgZGF0YSBpbiBJbmRleGVkREIgYW5kXG4gKiBMb2NhbFN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2luZGV4ZWREYlN0b3JhZ2VQcmVmaXgoZSwgdCkge1xuICAgIC8vIFVzZSB0d28gZGlmZmVyZW50IHByZWZpeCBmb3JtYXRzOlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAuIGRhdGFiYXNlSUQgLyAuLi5cbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLyAuLi5cbiAgICAvLyBwcm9qZWN0SURzIGFyZSBETlMtY29tcGF0aWJsZSBuYW1lcyBhbmQgY2Fubm90IGNvbnRhaW4gZG90c1xuICAgIC8vIHNvIHRoZXJlJ3Mgbm8gZGFuZ2VyIG9mIGNvbGxpc2lvbnMuXG4gICAgbGV0IG4gPSBlLnByb2plY3RJZDtcbiAgICByZXR1cm4gZS5pc0RlZmF1bHREYXRhYmFzZSB8fCAobiArPSBcIi5cIiArIGUuZGF0YWJhc2UpLCBcImZpcmVzdG9yZS9cIiArIHQgKyBcIi9cIiArIG4gKyBcIi9cIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBzZXQgb2YgY2hhbmdlcyB0byB3aGF0IGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGluIHZpZXcgYW5kIG91dCBvZiB2aWV3IGZvclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXG4gKiB0aGUgU3luY0VuZ2luZSkgYW5kIGFyZSB1c2VkIHRvIHBpbiAvIHVucGluIGRvY3VtZW50cyBhcyBhcHByb3ByaWF0ZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0xvY2FsVmlld0NoYW5nZXMge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMuZnJvbUNhY2hlID0gdCwgdGhpcy5RaSA9IG4sIHRoaXMuS2kgPSByO1xuICAgIH1cbiAgICBzdGF0aWMgJGkoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCByID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LmRvY0NoYW5nZXMpIHN3aXRjaCAoZS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgbiA9IG4uYWRkKGUuZG9jLmtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgciA9IHIuYWRkKGUuZG9jLmtleSk7XG4gLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTG9jYWxWaWV3Q2hhbmdlcyhlLCB0LmZyb21DYWNoZSwgbiwgcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHRyYWNrZXIgdG8ga2VlcCBhIHJlY29yZCBvZiBpbXBvcnRhbnQgZGV0YWlscyBkdXJpbmcgZGF0YWJhc2UgbG9jYWwgcXVlcnlcbiAqIGV4ZWN1dGlvbi5cbiAqLyBjbGFzcyBRdWVyeUNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRzIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHBhc3NlZCB0aHJvdWdoIGR1cmluZyBsb2NhbCBxdWVyeSBleGVjdXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9kb2N1bWVudFJlYWRDb3VudCA9IDA7XG4gICAgfVxuICAgIGdldCBkb2N1bWVudFJlYWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvY3VtZW50UmVhZENvdW50O1xuICAgIH1cbiAgICBpbmNyZW1lbnREb2N1bWVudFJlYWRDb3VudChlKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50UmVhZENvdW50ICs9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgRmlyZXN0b3JlIHF1ZXJ5IGVuZ2luZS5cbiAqXG4gKiBGaXJlc3RvcmUgcXVlcmllcyBjYW4gYmUgZXhlY3V0ZWQgaW4gdGhyZWUgbW9kZXMuIFRoZSBRdWVyeSBFbmdpbmUgZGV0ZXJtaW5lc1xuICogd2hhdCBtb2RlIHRvIHVzZSBiYXNlZCBvbiB3aGF0IGRhdGEgaXMgcGVyc2lzdGVkLiBUaGUgbW9kZSBvbmx5IGRldGVybWluZXNcbiAqIHRoZSBydW50aW1lIGNvbXBsZXhpdHkgb2YgdGhlIHF1ZXJ5IC0gdGhlIHJlc3VsdCBzZXQgaXMgZXF1aXZhbGVudCBhY3Jvc3MgYWxsXG4gKiBpbXBsZW1lbnRhdGlvbnMuXG4gKlxuICogVGhlIFF1ZXJ5IGVuZ2luZSB3aWxsIHVzZSBpbmRleGVkLWJhc2VkIGV4ZWN1dGlvbiBpZiBhIHVzZXIgaGFzIGNvbmZpZ3VyZWRcbiAqIGFueSBpbmRleCB0aGF0IGNhbiBiZSB1c2VkIHRvIGV4ZWN1dGUgcXVlcnkgKHZpYSBgc2V0SW5kZXhDb25maWd1cmF0aW9uKClgKS5cbiAqIE90aGVyd2lzZSwgdGhlIGVuZ2luZSB3aWxsIHRyeSB0byBvcHRpbWl6ZSB0aGUgcXVlcnkgYnkgcmUtdXNpbmcgYSBwcmV2aW91c2x5XG4gKiBwZXJzaXN0ZWQgcXVlcnkgcmVzdWx0LiBJZiB0aGF0IGlzIG5vdCBwb3NzaWJsZSwgdGhlIHF1ZXJ5IHdpbGwgYmUgZXhlY3V0ZWRcbiAqIHZpYSBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICpcbiAqIEluZGV4LWJhc2VkIGV4ZWN1dGlvbiBpcyB0aGUgZGVmYXVsdCB3aGVuIGF2YWlsYWJsZS4gVGhlIHF1ZXJ5IGVuZ2luZVxuICogc3VwcG9ydHMgcGFydGlhbCBpbmRleGVkIGV4ZWN1dGlvbiBhbmQgbWVyZ2VzIHRoZSByZXN1bHQgZnJvbSB0aGUgaW5kZXhcbiAqIGxvb2t1cCB3aXRoIGRvY3VtZW50cyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGluZGV4ZWQuIFRoZSBpbmRleCBldmFsdWF0aW9uXG4gKiBtYXRjaGVzIHRoZSBiYWNrZW5kJ3MgZm9ybWF0IGFuZCBhcyBzdWNoLCB0aGUgU0RLIGNhbiB1c2UgaW5kZXhpbmcgZm9yIGFsbFxuICogcXVlcmllcyB0aGF0IHRoZSBiYWNrZW5kIHN1cHBvcnRzLlxuICpcbiAqIElmIG5vIGluZGV4IGV4aXN0cywgdGhlIHF1ZXJ5IGVuZ2luZSB0cmllcyB0byB0YWtlIGFkdmFudGFnZSBvZiB0aGUgdGFyZ2V0XG4gKiBkb2N1bWVudCBtYXBwaW5nIGluIHRoZSBUYXJnZXRDYWNoZS4gVGhlc2UgbWFwcGluZ3MgZXhpc3RzIGZvciBhbGwgcXVlcmllc1xuICogdGhhdCBoYXZlIGJlZW4gc3luY2VkIHdpdGggdGhlIGJhY2tlbmQgYXQgbGVhc3Qgb25jZSBhbmQgYWxsb3cgdGhlIHF1ZXJ5XG4gKiBlbmdpbmUgdG8gb25seSByZWFkIGRvY3VtZW50cyB0aGF0IHByZXZpb3VzbHkgbWF0Y2hlZCBhIHF1ZXJ5IHBsdXMgYW55XG4gKiBkb2N1bWVudHMgdGhhdCB3ZXJlIGVkaXRlZCBhZnRlciB0aGUgcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXG4gKlxuICogVGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlbiB0aGlzIG9wdGltaXphdGlvbiBpcyBub3QgZ3VhcmFudGVlZCB0byBwcm9kdWNlXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHF1ZXJ5XG4gKiBwcm9jZXNzaW5nIGZhbGxzIGJhY2sgdG8gZnVsbCBzY2Fucy4gVGhlc2UgY2FzZXMgYXJlOlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgcHJldmlvdXNseSBubyBsb25nZXJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgZWRpdCBtYXkgY2F1c2UgdGhlIGRvY3VtZW50IHRvIHNvcnQgYmVsb3dcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiAtIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIGJlZW4gQ1VSUkVOVCBvciBmcmVlIG9mIGxpbWJvIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1F1ZXJ5RW5naW5lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5VaSA9ICExLCB0aGlzLldpID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU0RLIG9ubHkgZGVjaWRlcyB3aGV0aGVyIGl0IHNob3VsZCBjcmVhdGUgaW5kZXggd2hlbiBjb2xsZWN0aW9uIHNpemUgaXNcbiAgICAgICAgICogbGFyZ2VyIHRoYW4gdGhpcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuR2kgPSAxMDAsIHRoaXMuemkgPSA4O1xuICAgIH1cbiAgICAvKiogU2V0cyB0aGUgZG9jdW1lbnQgdmlldyB0byBxdWVyeSBhZ2FpbnN0LiAqLyAgICBpbml0aWFsaXplKGUsIHQpIHtcbiAgICAgICAgdGhpcy5qaSA9IGUsIHRoaXMuaW5kZXhNYW5hZ2VyID0gdCwgdGhpcy5VaSA9ICEwO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbGwgbG9jYWwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgcXVlcnkuICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBTdG9yZXMgdGhlIHJlc3VsdCBmcm9tIGV4ZWN1dGluZyB0aGUgcXVlcnk7IHVzaW5nIHRoaXMgb2JqZWN0IGlzIG1vcmVcbiAgICAgICAgLy8gY29udmVuaWVudCB0aGFuIHBhc3NpbmcgdGhlIHJlc3VsdCBiZXR3ZWVuIHN0ZXBzIG9mIHRoZSBwZXJzaXN0ZW5jZVxuICAgICAgICAvLyB0cmFuc2FjdGlvbiBhbmQgaW1wcm92ZXMgcmVhZGFiaWxpdHkgY29tcGFyYXRpdmVseS5cbiAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgIHJlc3VsdDogbnVsbFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5IaShlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGkucmVzdWx0ID0gZTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghaS5yZXN1bHQpIHJldHVybiB0aGlzLkppKGUsIHQsIHIsIG4pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGkucmVzdWx0ID0gZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChpLnJlc3VsdCkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBRdWVyeUNvbnRleHQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ZaShlLCB0LCBuKS5uZXh0KChyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaS5yZXN1bHQgPSByLCB0aGlzLldpKSByZXR1cm4gdGhpcy5aaShlLCB0LCBuLCByLnNpemUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaS5yZXN1bHQpKTtcbiAgICB9XG4gICAgWmkoZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gbi5kb2N1bWVudFJlYWRDb3VudCA8IHRoaXMuR2kgPyAoX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJTREsgd2lsbCBub3QgY3JlYXRlIGNhY2hlIGluZGV4ZXMgZm9yIHF1ZXJ5OlwiLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCksIFwic2luY2UgaXQgb25seSBjcmVhdGVzIGNhY2hlIGluZGV4ZXMgZm9yIGNvbGxlY3Rpb24gY29udGFpbnNcIiwgXCJtb3JlIHRoYW4gb3IgZXF1YWwgdG9cIiwgdGhpcy5HaSwgXCJkb2N1bWVudHNcIiksIFxuICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpKSA6IChfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJRdWVyeUVuZ2luZVwiLCBcIlF1ZXJ5OlwiLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCksIFwic2NhbnNcIiwgbi5kb2N1bWVudFJlYWRDb3VudCwgXCJsb2NhbCBkb2N1bWVudHMgYW5kIHJldHVybnNcIiwgciwgXCJkb2N1bWVudHMgYXMgcmVzdWx0cy5cIiksIFxuICAgICAgICBuLmRvY3VtZW50UmVhZENvdW50ID4gdGhpcy56aSAqIHIgPyAoX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJUaGUgU0RLIGRlY2lkZXMgdG8gY3JlYXRlIGNhY2hlIGluZGV4ZXMgZm9yIHF1ZXJ5OlwiLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCksIFwiYXMgdXNpbmcgY2FjaGUgaW5kZXhlcyBtYXkgaGVscCBpbXByb3ZlIHBlcmZvcm1hbmNlLlwiKSwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyLmNyZWF0ZVRhcmdldEluZGV4ZXMoZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhbiBpbmRleGVkIHF1ZXJ5IHRoYXQgZXZhbHVhdGVzIHRoZSBxdWVyeSBiYXNlZCBvbiBhIGNvbGxlY3Rpb24nc1xuICAgICAqIHBlcnNpc3RlZCBpbmRleCB2YWx1ZXMuIFJldHVybnMgYG51bGxgIGlmIGFuIGluZGV4IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICovICAgIEhpKGUsIHQpIHtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9xdWVyeU1hdGNoZXNBbGxEb2N1bWVudHModCkpIFxuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgbWF0Y2ggYWxsIGRvY3VtZW50cyBkb24ndCBiZW5lZml0IGZyb20gdXNpbmdcbiAgICAgICAgLy8ga2V5LWJhc2VkIGxvb2t1cHMuIEl0IGlzIG1vcmUgZWZmaWNpZW50IHRvIHNjYW4gYWxsIGRvY3VtZW50cyBpbiBhXG4gICAgICAgIC8vIGNvbGxlY3Rpb24sIHJhdGhlciB0aGFuIHRvIHBlcmZvcm0gaW5kaXZpZHVhbCBsb29rdXBzLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCk7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlci5nZXRJbmRleFR5cGUoZSwgbikubmV4dCgociA9PiAwIC8qIEluZGV4VHlwZS5OT05FICovID09PSByID8gbnVsbCA6IChudWxsICE9PSB0LmxpbWl0ICYmIDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gPT09IHIgJiYgKFxuICAgICAgICAvLyBXZSBjYW5ub3QgYXBwbHkgYSBsaW1pdCBmb3IgdGFyZ2V0cyB0aGF0IGFyZSBzZXJ2ZWQgdXNpbmcgYSBwYXJ0aWFsXG4gICAgICAgIC8vIGluZGV4LiBJZiBhIHBhcnRpYWwgaW5kZXggd2lsbCBiZSB1c2VkIHRvIHNlcnZlIHRoZSB0YXJnZXQsIHRoZVxuICAgICAgICAvLyBxdWVyeSBtYXkgcmV0dXJuIGEgc3VwZXJzZXQgb2YgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHRhcmdldFxuICAgICAgICAvLyAoZS5nLiBpZiB0aGUgaW5kZXggZG9lc24ndCBpbmNsdWRlIGFsbCB0aGUgdGFyZ2V0J3MgZmlsdGVycyksIG9yXG4gICAgICAgIC8vIG1heSByZXR1cm4gdGhlIGNvcnJlY3Qgc2V0IG9mIGRvY3VtZW50cyBpbiB0aGUgd3Jvbmcgb3JkZXIgKGUuZy4gaWZcbiAgICAgICAgLy8gdGhlIGluZGV4IGRvZXNuJ3QgaW5jbHVkZSBhIHNlZ21lbnQgZm9yIG9uZSBvZiB0aGUgb3JkZXJCeXMpLlxuICAgICAgICAvLyBUaGVyZWZvcmUsIGEgbGltaXQgc2hvdWxkIG5vdCBiZSBhcHBsaWVkIGluIHN1Y2ggY2FzZXMuXG4gICAgICAgIHQgPSBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQodCwgbnVsbCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKSwgbiA9IF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKSwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyLmdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0KGUsIG4pLm5leHQoKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCguLi5yKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmppLmdldERvY3VtZW50cyhlLCBpKS5uZXh0KChyID0+IHRoaXMuaW5kZXhNYW5hZ2VyLmdldE1pbk9mZnNldChlLCBuKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5YaSh0LCByKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lcyh0LCBzLCBpLCBuLnJlYWRUaW1lKSA/IHRoaXMuSGkoZSwgX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0KHQsIG51bGwsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLykpIDogdGhpcy50cyhlLCBzLCB0LCBuKTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYmFzZWQgb24gdGhlIHRhcmdldCdzIHBlcnNpc3RlZCBxdWVyeSBtYXBwaW5nLiBSZXR1cm5zXG4gICAgICogYG51bGxgIGlmIHRoZSBtYXBwaW5nIGlzIG5vdCBhdmFpbGFibGUgb3IgY2Fubm90IGJlIHVzZWQuXG4gICAgICovICAgIEppKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9xdWVyeU1hdGNoZXNBbGxEb2N1bWVudHModCkgfHwgci5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKSA6IHRoaXMuamkuZ2V0RG9jdW1lbnRzKGUsIG4pLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuWGkodCwgaSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcyh0LCBzLCBuLCByKSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpIDogKF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlF1ZXJ5RW5naW5lXCIsIFwiUmUtdXNpbmcgcHJldmlvdXMgcmVzdWx0IGZyb20gJXMgdG8gZXhlY3V0ZSBxdWVyeTogJXNcIiwgci50b1N0cmluZygpLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCkpLCBcbiAgICAgICAgICAgIHRoaXMudHMoZSwgcywgdCwgX19QUklWQVRFX25ld0luZGV4T2Zmc2V0U3VjY2Vzc29yRnJvbVJlYWRUaW1lKHIsIC0xKSkubmV4dCgoZSA9PiBlKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICAgICAgICB9XG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi8gICAgWGkoZSwgdCkge1xuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cbiAgICAgICAgbGV0IG4gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9uZXdRdWVyeUNvbXBhcmF0b3IoZSkpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgcikgPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyhlLCByKSAmJiAobiA9IG4uYWRkKHIpKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgbGltaXQgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgZnJvbSBjYWNoZSwgbWFraW5nIGl0XG4gICAgICogaW5lbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkuXG4gICAgICogQHBhcmFtIHNvcnRlZFByZXZpb3VzUmVzdWx0cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLCBzb3J0ZWQgYnkgdGhlIHF1ZXJ5J3MgY29tcGFyYXRvci5cbiAgICAgKiBAcGFyYW0gcmVtb3RlS2V5cyAtIFRoZSBkb2N1bWVudCBrZXlzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIGxhc3RcbiAgICAgKiBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgdGhlIHNuYXBzaG90IHdoZW4gdGhlXG4gICAgICogcXVlcnkgd2FzIGxhc3Qgc3luY2hyb25pemVkLlxuICAgICAqLyAgICBlcyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGlmIChudWxsID09PSBlLmxpbWl0KSBcbiAgICAgICAgLy8gUXVlcmllcyB3aXRob3V0IGxpbWl0cyBkbyBub3QgbmVlZCB0byBiZSByZWZpbGxlZC5cbiAgICAgICAgcmV0dXJuICExO1xuICAgICAgICBpZiAobi5zaXplICE9PSB0LnNpemUpIFxuICAgICAgICAvLyBUaGUgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgaWYgYSBwcmV2aW91c2x5IG1hdGNoaW5nIGRvY3VtZW50IG5vXG4gICAgICAgIC8vIGxvbmdlciBtYXRjaGVzLlxuICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIC8vIExpbWl0IHF1ZXJpZXMgYXJlIG5vdCBlbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBxdWVyeSBleGVjdXRpb24gaWYgdGhlcmUgaXNcbiAgICAgICAgLy8gYSBwb3RlbnRpYWwgdGhhdCBhbiBvbGRlciBkb2N1bWVudCBmcm9tIGNhY2hlIG5vdyBzb3J0cyBiZWZvcmUgYSBkb2N1bWVudFxuICAgICAgICAvLyB0aGF0IHdhcyBwcmV2aW91c2x5IHBhcnQgb2YgdGhlIGxpbWl0LiBUaGlzLCBob3dldmVyLCBjYW4gb25seSBoYXBwZW4gaWZcbiAgICAgICAgLy8gdGhlIGRvY3VtZW50IGF0IHRoZSBlZGdlIG9mIHRoZSBsaW1pdCBnb2VzIG91dCBvZiBsaW1pdC5cbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCB0aGF0IGlzIG5vdCB0aGUgbGltaXQgYm91bmRhcnkgc29ydHMgZGlmZmVyZW50bHksXG4gICAgICAgIC8vIHRoZSBib3VuZGFyeSBvZiB0aGUgbGltaXQgaXRzZWxmIGRpZCBub3QgY2hhbmdlIGFuZCBkb2N1bWVudHMgZnJvbSBjYWNoZVxuICAgICAgICAvLyB3aWxsIGNvbnRpbnVlIHRvIGJlIFwicmVqZWN0ZWRcIiBieSB0aGlzIGJvdW5kYXJ5LiBUaGVyZWZvcmUsIHdlIGNhbiBpZ25vcmVcbiAgICAgICAgLy8gYW55IG1vZGlmaWNhdGlvbnMgdGhhdCBkb24ndCBhZmZlY3QgdGhlIGxhc3QgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyA9PT0gZS5saW1pdFR5cGUgPyB0Lmxhc3QoKSA6IHQuZmlyc3QoKTtcbiAgICAgICAgcmV0dXJuICEhaSAmJiAoaS5oYXNQZW5kaW5nV3JpdGVzIHx8IGkudmVyc2lvbi5jb21wYXJlVG8ocikgPiAwKTtcbiAgICB9XG4gICAgWWkoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJVc2luZyBmdWxsIGNvbGxlY3Rpb24gc2NhbiB0byBleGVjdXRlIHF1ZXJ5OlwiLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCkpLCBcbiAgICAgICAgdGhpcy5qaS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIEluZGV4T2Zmc2V0Lm1pbigpLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdGhlIHJlc3VsdHMgZnJvbSBhbiBpbmRleGVkIGV4ZWN1dGlvbiB3aXRoIHRoZSByZW1haW5pbmcgZG9jdW1lbnRzXG4gICAgICogdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBpbmRleGVkLlxuICAgICAqLyAgICB0cyhlLCB0LCBuLCByKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIGFsbCByZXN1bHRzIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIHVwZGF0ZWQgc2luY2UgdGhlIG9mZnNldC5cbiAgICAgICAgcmV0dXJuIHRoaXMuamkuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCBuLCByKS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gTWVyZ2Ugd2l0aCBleGlzdGluZyByZXN1bHRzXG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlID0gZS5pbnNlcnQodC5rZXksIHQpO1xuICAgICAgICB9KSksIGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRzIGBMb2NhbFN0b3JlYCBpbnRlcmZhY2UuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Mb2NhbFN0b3JlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xuICAgIGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IGUsIHRoaXMubnMgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSByLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXRJRCB0byBkYXRhIGFib3V0IGl0cyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogV2UgYXJlIHVzaW5nIGFuIGltbXV0YWJsZSBkYXRhIHN0cnVjdHVyZSBvbiBXZWIgdG8gbWFrZSByZS1ydW5zXG4gICAgICAgICAqIG9mIGBhcHBseVJlbW90ZUV2ZW50KClgIGlkZW1wb3RlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJzID0gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLnNzID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQoZSkpLCBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHBlciBjb2xsZWN0aW9uIGdyb3VwIGluZGV4IG9mIHRoZSBsYXN0IHJlYWQgdGltZSBwcm9jZXNzZWQgYnlcbiAgICAgICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3MgPSBuZXcgTWFwLCB0aGlzLl9zID0gZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCksIHRoaXMuS3IgPSBlLmdldFRhcmdldENhY2hlKCksIFxuICAgICAgICB0aGlzLlVyID0gZS5nZXRCdW5kbGVDYWNoZSgpLCB0aGlzLnVzKG4pO1xuICAgIH1cbiAgICB1cyhlKSB7XG4gICAgICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBBZGQgc3BlYyB0ZXN0cyB0aGF0IHRlc3QgdGhlc2UgY29tcG9uZW50cyBjaGFuZ2UgYWZ0ZXIgYVxuICAgICAgICAvLyB1c2VyIGNoYW5nZVxuICAgICAgICB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXREb2N1bWVudE92ZXJsYXlDYWNoZShlKSwgdGhpcy5pbmRleE1hbmFnZXIgPSB0aGlzLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcihlKSwgXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZShlLCB0aGlzLmluZGV4TWFuYWdlciksIHRoaXMubG9jYWxEb2N1bWVudHMgPSBuZXcgTG9jYWxEb2N1bWVudHNWaWV3KHRoaXMuX3MsIHRoaXMubXV0YXRpb25RdWV1ZSwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSwgdGhpcy5pbmRleE1hbmFnZXIpLCBcbiAgICAgICAgdGhpcy5fcy5zZXRJbmRleE1hbmFnZXIodGhpcy5pbmRleE1hbmFnZXIpLCB0aGlzLm5zLmluaXRpYWxpemUodGhpcy5sb2NhbERvY3VtZW50cywgdGhpcy5pbmRleE1hbmFnZXIpO1xuICAgIH1cbiAgICBjb2xsZWN0R2FyYmFnZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29sbGVjdCBnYXJiYWdlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4gZS5jb2xsZWN0KHQsIHRoaXMucnMpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3TG9jYWxTdG9yZShcbi8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbmUsIHQsIG4sIHIpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9Mb2NhbFN0b3JlSW1wbChlLCB0LCBuLCByKTtcbn1cblxuLyoqXG4gKiBUZWxscyB0aGUgTG9jYWxTdG9yZSB0aGF0IHRoZSBjdXJyZW50bHkgYXV0aGVudGljYXRlZCB1c2VyIGhhcyBjaGFuZ2VkLlxuICpcbiAqIEluIHJlc3BvbnNlIHRoZSBsb2NhbCBzdG9yZSBzd2l0Y2hlcyB0aGUgbXV0YXRpb24gcXVldWUgdG8gdGhlIG5ldyB1c2VyIGFuZFxuICogcmV0dXJucyBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogQW5kcm9pZCBhbmQgaU9TIG9ubHkgcmV0dXJuIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgdGhlXG4vLyBjaGFuZ2UuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhbmRsZVVzZXJDaGFuZ2UoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiSGFuZGxlIHVzZXIgY2hhbmdlXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4ge1xuICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcbiAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpLm5leHQoKGkgPT4gKHIgPSBpLCBuLnVzKHQpLCBuLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IFtdLCBzID0gW107XG4gICAgICAgICAgICAvLyBVbmlvbiB0aGUgb2xkL25ldyBjaGFuZ2VkIGtleXMuXG4gICAgICAgICAgICBsZXQgbyA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHIpIHtcbiAgICAgICAgICAgICAgICBpLnB1c2goZS5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5tdXRhdGlvbnMpIG8gPSBvLmFkZCh0LmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgICAgIHMucHVzaChlLmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLm11dGF0aW9ucykgbyA9IG8uYWRkKHQua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc2V0IG9mIGFsbCAocG90ZW50aWFsbHkpIGNoYW5nZWQgZG9jdW1lbnRzIGFuZCB0aGUgbGlzdFxuICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHMoZSwgbykubmV4dCgoZSA9PiAoe1xuICAgICAgICAgICAgICAgIGNzOiBlLFxuICAgICAgICAgICAgICAgIHJlbW92ZWRCYXRjaElkczogaSxcbiAgICAgICAgICAgICAgICBhZGRlZEJhdGNoSWRzOiBzXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSk7XG4gICAgfSkpO1xufVxuXG4vKiBBY2NlcHRzIGxvY2FsbHkgZ2VuZXJhdGVkIE11dGF0aW9ucyBhbmQgY29tbWl0IHRoZW0gdG8gc3RvcmFnZS4gKi9cbi8qKlxuICogQWNrbm93bGVkZ2VzIHRoZSBnaXZlbiBiYXRjaC5cbiAqXG4gKiBPbiB0aGUgaGFwcHkgcGF0aCB3aGVuIGEgYmF0Y2ggaXMgYWNrbm93bGVkZ2VkLCB0aGUgbG9jYWwgc3RvcmUgd2lsbFxuICpcbiAqICArIHJlbW92ZSB0aGUgYmF0Y2ggZnJvbSB0aGUgbXV0YXRpb24gcXVldWU7XG4gKiAgKyBhcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlO1xuICogICsgcmVjYWxjdWxhdGUgdGhlIGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBpbXBsaWVkIGJ5IHRob3NlIGNoYW5nZXMgKHRoZXJlXG4gKiAgICBtYXkgYmUgbXV0YXRpb25zIGluIHRoZSBxdWV1ZSB0aGF0IGFmZmVjdCB0aGUgZG9jdW1lbnRzIGJ1dCBoYXZlbid0IGJlZW5cbiAqICAgIGFja25vd2xlZGdlZCB5ZXQpOyBhbmRcbiAqICArIGdpdmUgdGhlIGNoYW5nZWQgZG9jdW1lbnRzIGJhY2sgdGhlIHN5bmMgZW5naW5lXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyAobW9kaWZpZWQpIGRvY3VtZW50cy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBY2tub3dsZWRnZUJhdGNoKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4ge1xuICAgICAgICBjb25zdCByID0gdC5iYXRjaC5rZXlzKCksIGkgPSBuLl9zLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseVdyaXRlVG9SZW1vdGVEb2N1bWVudHMoZSwgdCwgbiwgcikge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uYmF0Y2gsIHMgPSBpLmtleXMoKTtcbiAgICAgICAgICAgIGxldCBvID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiBzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHIuZ2V0RW50cnkodCwgZSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG4uZG9jVmVyc2lvbnMuZ2V0KGUpO1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChudWxsICE9PSBzKSwgdC52ZXJzaW9uLmNvbXBhcmVUbyhzKSA8IDAgJiYgKGkuYXBwbHlUb1JlbW90ZURvY3VtZW50KHQsIG4pLCBcbiAgICAgICAgICAgICAgICAgICAgdC5pc1ZhbGlkRG9jdW1lbnQoKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICB0LnNldFJlYWRUaW1lKG4uY29tbWl0VmVyc2lvbiksIHIuYWRkRW50cnkodCkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIG8ubmV4dCgoKCkgPT4gZS5tdXRhdGlvblF1ZXVlLnJlbW92ZU11dGF0aW9uQmF0Y2godCwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IGEgbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuLCBlLCB0LCBpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KGUpKSkubmV4dCgoKCkgPT4gbi5tdXRhdGlvblF1ZXVlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKGUpKSkubmV4dCgoKCkgPT4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5yZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQoZSwgciwgdC5iYXRjaC5iYXRjaElkKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMoZSwgZnVuY3Rpb24gX19QUklWQVRFX2dldEtleXNXaXRoVHJhbnNmb3JtUmVzdWx0cyhlKSB7XG4gICAgICAgICAgICBsZXQgdCA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLm11dGF0aW9uUmVzdWx0cy5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgICAgIGUubXV0YXRpb25SZXN1bHRzW25dLnRyYW5zZm9ybVJlc3VsdHMubGVuZ3RoID4gMCAmJiAodCA9IHQuYWRkKGUuYmF0Y2gubXV0YXRpb25zW25dLmtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIG11dGF0aW9ucyBmcm9tIHRoZSBNdXRhdGlvblF1ZXVlIGZvciB0aGUgc3BlY2lmaWVkIGJhdGNoO1xuICogTG9jYWxEb2N1bWVudHMgd2lsbCBiZSByZWNhbGN1bGF0ZWQuXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyBtb2RpZmllZCBkb2N1bWVudHMuXG4gKi8gKHQpKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKGUsIHIpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCBwcm9jZXNzZWQgKHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvXG4gKiBkZXRlcm1pbmUgd2hldGhlciB0byBidWZmZXIgaW5jb21pbmcgc25hcHNob3RzIGZyb20gdGhlIGJhY2tlbmQpLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiB0LnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGxhc3QgcmVtb3RlIHNuYXBzaG90IHZlcnNpb25cIiwgXCJyZWFkb25seVwiLCAoZSA9PiB0LktyLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZSkpKTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpIGRvY3VtZW50cy4gV2UgYXNzdW1lIHRoYXQgdGhlIHJlbW90ZVxuICogZXZlbnQgcmVmbGVjdHMgYW55IHdyaXRlIGJhdGNoZXMgdGhhdCBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIG9yIHJlamVjdGVkXG4gKiAoaS5lLiB3ZSBkbyBub3QgcmUtYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIHVwZGF0ZXMgZnJvbSB0aGlzIGV2ZW50KS5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlSZW1vdGVFdmVudFRvTG9jYWxDYWNoZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSB0LnNuYXBzaG90VmVyc2lvbjtcbiAgICBsZXQgaSA9IG4ucnM7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSByZW1vdGUgZXZlbnRcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBuLl9zLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmVzZXQgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwIGluIGNhc2UgdGhpcyB0cmFuc2FjdGlvbiBnZXRzIHJlLXJ1bi5cbiAgICAgICAgICAgICAgICBpID0gbi5ycztcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICB0LnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKHMsIF8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBpLmdldChfKTtcbiAgICAgICAgICAgIGlmICghYSkgcmV0dXJuO1xuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIHJlbW90ZSBrZXlzIGlmIHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlLiBUaGlzXG4gICAgICAgICAgICAvLyBlbnN1cmVzIHRoYXQgd2UgY2FuIHBlcnNpc3QgdGhlIHVwZGF0ZWQgdGFyZ2V0IGRhdGEgYWxvbmcgd2l0aFxuICAgICAgICAgICAgLy8gdGhlIHVwZGF0ZWQgYXNzaWdubWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuLktyLnJlbW92ZU1hdGNoaW5nS2V5cyhlLCBzLnJlbW92ZWREb2N1bWVudHMsIF8pLm5leHQoKCgpID0+IG4uS3IuYWRkTWF0Y2hpbmdLZXlzKGUsIHMuYWRkZWREb2N1bWVudHMsIF8pKSkpO1xuICAgICAgICAgICAgbGV0IHUgPSBhLndpdGhTZXF1ZW5jZU51bWJlcihlLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICBudWxsICE9PSB0LnRhcmdldE1pc21hdGNoZXMuZ2V0KF8pID8gdSA9IHUud2l0aFJlc3VtZVRva2VuKEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkcsIFNuYXBzaG90VmVyc2lvbi5taW4oKSkud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24oU25hcHNob3RWZXJzaW9uLm1pbigpKSA6IHMucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodSA9IHUud2l0aFJlc3VtZVRva2VuKHMucmVzdW1lVG9rZW4sIHIpKSwgXG4gICAgICAgICAgICBpID0gaS5pbnNlcnQoXywgdSksIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXJnZXQgZGF0YSBpZiB0aGVyZSBhcmUgdGFyZ2V0IGNoYW5nZXMgKG9yIGlmXG4gICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRpbWUgaGFzIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLlxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIG5ld1RhcmdldERhdGEgc2hvdWxkIGJlIHBlcnNpc3RlZCBkdXJpbmcgYW4gdXBkYXRlIG9mXG4gKiBhbiBhY3RpdmUgdGFyZ2V0LiBUYXJnZXREYXRhIHNob3VsZCBhbHdheXMgYmUgcGVyc2lzdGVkIHdoZW4gYSB0YXJnZXQgaXNcbiAqIGJlaW5nIHJlbGVhc2VkIGFuZCBzaG91bGQgbm90IGNhbGwgdGhpcyBmdW5jdGlvbi5cbiAqXG4gKiBXaGlsZSB0aGUgdGFyZ2V0IGlzIGFjdGl2ZSwgVGFyZ2V0RGF0YSB1cGRhdGVzIGNhbiBiZSBvbWl0dGVkIHdoZW4gbm90aGluZ1xuICogYWJvdXQgdGhlIHRhcmdldCBoYXMgY2hhbmdlZCBleGNlcHQgbWV0YWRhdGEgbGlrZSB0aGUgcmVzdW1lIHRva2VuIG9yXG4gKiBzbmFwc2hvdCB2ZXJzaW9uLiBPY2Nhc2lvbmFsbHkgaXQncyB3b3J0aCB0aGUgZXh0cmEgd3JpdGUgdG8gcHJldmVudCB0aGVzZVxuICogdmFsdWVzIGZyb20gZ2V0dGluZyB0b28gc3RhbGUgYWZ0ZXIgYSBjcmFzaCwgYnV0IHRoaXMgZG9lc24ndCBoYXZlIHRvIGJlXG4gKiB0b28gZnJlcXVlbnQuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9zaG91bGRQZXJzaXN0VGFyZ2V0RGF0YShlLCB0LCBuKSB7XG4gICAgICAgICAgICAgICAgLy8gQWx3YXlzIHBlcnNpc3QgdGFyZ2V0IGRhdGEgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgcmVzdW1lIHRva2VuLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgIC8vIGFsbG93cyB1cyB0byBiZSByZWFzb25hYmx5IHVwLXRvLWRhdGUgYWZ0ZXIgYSBjcmFzaCBhbmQgYXZvaWRzIG5lZWRpbmdcbiAgICAgICAgICAgICAgICAvLyB0byBsb29wIG92ZXIgYWxsIGFjdGl2ZSBxdWVyaWVzIG9uIHNodXRkb3duLiBFc3BlY2lhbGx5IGluIHRoZSBicm93c2VyXG4gICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAvLyBjbG9zaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIGUuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGlmIHRoZSBvbmx5IHRoaW5nIHRoYXQgaGFzIGNoYW5nZWQgYWJvdXQgYSB0YXJnZXQgaXMgaXRzIHJlc3VtZVxuICAgICAgICAgICAgICAgIC8vIHRva2VuIGl0J3Mgbm90IHdvcnRoIHBlcnNpc3RpbmcuIE5vdGUgdGhhdCB0aGUgUmVtb3RlU3RvcmUga2VlcHMgYW5cbiAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gcmVzdW1lIHRva2VuLCBzbyBzdHJlYW0gZmFpbHVyZSBvciB1c2VyIGNoYW5nZXMgd2lsbCBzdGlsbCB1c2UgYW5cbiAgICAgICAgICAgICAgICAvLyB1cC10by1kYXRlIHJlc3VtZSB0b2tlbiByZWdhcmRsZXNzIG9mIHdoYXQgd2UgZG8gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWRkZWREb2N1bWVudHMuc2l6ZSArIG4ubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIG4ucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChhLCB1LCBzKSAmJiBvLnB1c2gobi5Lci51cGRhdGVUYXJnZXREYXRhKGUsIHUpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgXyA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgYSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAvLyBIQUNLOiBUaGUgb25seSByZWFzb24gd2UgYWxsb3cgYSBudWxsIHNuYXBzaG90IHZlcnNpb24gaXMgc28gdGhhdCB3ZVxuICAgICAgICAvLyBjYW4gc3ludGhlc2l6ZSByZW1vdGUgZXZlbnRzIHdoZW4gd2UgZ2V0IHBlcm1pc3Npb24gZGVuaWVkIGVycm9ycyB3aGlsZVxuICAgICAgICAvLyB0cnlpbmcgdG8gcmVzb2x2ZSB0aGUgc3RhdGUgb2YgYSBsb2NhbGx5IGNhY2hlZCBkb2N1bWVudCB0aGF0IGlzIGluXG4gICAgICAgIC8vIGxpbWJvLlxuICAgICAgICBpZiAodC5kb2N1bWVudFVwZGF0ZXMuZm9yRWFjaCgociA9PiB7XG4gICAgICAgICAgICB0LnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKHIpICYmIG8ucHVzaChuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnVwZGF0ZUxpbWJvRG9jdW1lbnQoZSwgcikpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBFYWNoIGxvb3AgaXRlcmF0aW9uIG9ubHkgYWZmZWN0cyBpdHMgXCJvd25cIiBkb2MsIHNvIGl0J3Mgc2FmZSB0byBnZXQgYWxsXG4gICAgICAgIC8vIHRoZSByZW1vdGUgZG9jdW1lbnRzIGluIGFkdmFuY2UgaW4gYSBzaW5nbGUgY2FsbC5cbiAgICAgICAgby5wdXNoKF9fUFJJVkFURV9wb3B1bGF0ZURvY3VtZW50Q2hhbmdlQnVmZmVyKGUsIHMsIHQuZG9jdW1lbnRVcGRhdGVzKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIF8gPSBlLmxzLCBhID0gZS5ocztcbiAgICAgICAgfSkpKSwgIXIuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi5Lci5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUpLm5leHQoKHQgPT4gbi5Lci5zZXRUYXJnZXRzTWV0YWRhdGEoZSwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIsIHIpKSk7XG4gICAgICAgICAgICBvLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKG8pLm5leHQoKCgpID0+IHMuYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKGUsIF8sIGEpKSkubmV4dCgoKCkgPT4gXykpO1xuICAgIH0pKS50aGVuKChlID0+IChuLnJzID0gaSwgZSkpKTtcbn1cblxuLyoqXG4gKiBQb3B1bGF0ZXMgZG9jdW1lbnQgY2hhbmdlIGJ1ZmZlciB3aXRoIGRvY3VtZW50cyBmcm9tIGJhY2tlbmQgb3IgYSBidW5kbGUuXG4gKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHJlc3VsdGluZyBmcm9tIGFwcGx5aW5nIHRob3NlIGRvY3VtZW50cywgYW5kXG4gKiBhbHNvIGEgc2V0IG9mIGRvY3VtZW50cyB3aG9zZSBleGlzdGVuY2Ugc3RhdGUgYXJlIGNoYW5nZWQgYXMgYSByZXN1bHQuXG4gKlxuICogQHBhcmFtIHR4biAtIFRyYW5zYWN0aW9uIHRvIHVzZSB0byByZWFkIGV4aXN0aW5nIGRvY3VtZW50cyBmcm9tIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRCdWZmZXIgLSBEb2N1bWVudCBidWZmZXIgdG8gY29sbGVjdCB0aGUgcmVzdWx0ZWQgY2hhbmdlcyB0byBiZVxuICogICAgICAgIGFwcGxpZWQgdG8gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudHMgLSBEb2N1bWVudHMgdG8gYmUgYXBwbGllZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlcihlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4gciA9IHIuYWRkKGUpKSksIHQuZ2V0RW50cmllcyhlLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgbGV0IHIgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gZS5nZXQobik7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzZWUgaWYgdGhlcmUgaXMgYSBleGlzdGVuY2Ugc3RhdGUgY2hhbmdlIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSAhPT0gby5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoaSA9IGkuYWRkKG4pKSwgXG4gICAgICAgICAgICAvLyBOb3RlOiBUaGUgb3JkZXIgb2YgdGhlIHN0ZXBzIGJlbG93IGlzIGltcG9ydGFudCwgc2luY2Ugd2Ugd2FudFxuICAgICAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgcmVqZWN0ZWQgbGltYm8gcmVzb2x1dGlvbnMgKHdoaWNoIGZhYnJpY2F0ZVxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkpIG5ldmVyIGFkZCBkb2N1bWVudHMgdG9cbiAgICAgICAgICAgIC8vIGNhY2hlLlxuICAgICAgICAgICAgcy5pc05vRG9jdW1lbnQoKSAmJiBzLnZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpID8gKFxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkgYXJlIHVzZWQgaW4gbWFudWZhY3R1cmVkXG4gICAgICAgICAgICAvLyBldmVudHMuIFdlIHJlbW92ZSB0aGVzZSBkb2N1bWVudHMgZnJvbSBjYWNoZSBzaW5jZSB3ZSBsb3N0XG4gICAgICAgICAgICAvLyBhY2Nlc3MuXG4gICAgICAgICAgICB0LnJlbW92ZUVudHJ5KG4sIHMucmVhZFRpbWUpLCByID0gci5pbnNlcnQobiwgcykpIDogIW8uaXNWYWxpZERvY3VtZW50KCkgfHwgcy52ZXJzaW9uLmNvbXBhcmVUbyhvLnZlcnNpb24pID4gMCB8fCAwID09PSBzLnZlcnNpb24uY29tcGFyZVRvKG8udmVyc2lvbikgJiYgby5oYXNQZW5kaW5nV3JpdGVzID8gKHQuYWRkRW50cnkocyksIFxuICAgICAgICAgICAgciA9IHIuaW5zZXJ0KG4sIHMpKSA6IF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxvY2FsU3RvcmVcIiwgXCJJZ25vcmluZyBvdXRkYXRlZCB3YXRjaCB1cGRhdGUgZm9yIFwiLCBuLCBcIi4gQ3VycmVudCB2ZXJzaW9uOlwiLCBvLnZlcnNpb24sIFwiIFdhdGNoIHZlcnNpb246XCIsIHMudmVyc2lvbik7XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgbHM6IHIsXG4gICAgICAgICAgICBoczogaVxuICAgICAgICB9O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5leHRNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXh0IG11dGF0aW9uIGJhdGNoXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gKHZvaWQgMCA9PT0gdCAmJiAodCA9IC0xKSwgXG4gICAgbi5tdXRhdGlvblF1ZXVlLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKGUsIHQpKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGEgRG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSBvciBudWxsIGlmIG5vdFxuICogZm91bmQgLSB1c2VkIGZvciB0ZXN0aW5nLlxuICovXG4vKipcbiAqIEFzc2lnbnMgdGhlIGdpdmVuIHRhcmdldCBhbiBpbnRlcm5hbCBJRCBzbyB0aGF0IGl0cyByZXN1bHRzIGNhbiBiZSBwaW5uZWQgc29cbiAqIHRoZXkgZG9uJ3QgZ2V0IEdDJ2QuIEEgdGFyZ2V0IG11c3QgYmUgYWxsb2NhdGVkIGluIHRoZSBsb2NhbCBzdG9yZSBiZWZvcmVcbiAqIHRoZSBzdG9yZSBjYW4gYmUgdXNlZCB0byBtYW5hZ2UgaXRzIHZpZXcuXG4gKlxuICogQWxsb2NhdGluZyBhbiBhbHJlYWR5IGFsbG9jYXRlZCBgVGFyZ2V0YCB3aWxsIHJldHVybiB0aGUgZXhpc3RpbmcgYFRhcmdldERhdGFgXG4gKiBmb3IgdGhhdCBgVGFyZ2V0YC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4ge1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIG4uS3IuZ2V0VGFyZ2V0RGF0YShlLCB0KS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgciA9IGksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHIpKSA6IG4uS3IuYWxsb2NhdGVUYXJnZXRJZChlKS5uZXh0KChpID0+IChyID0gbmV3IFRhcmdldERhdGEodCwgaSwgXCJUYXJnZXRQdXJwb3NlTGlzdGVuXCIgLyogVGFyZ2V0UHVycG9zZS5MaXN0ZW4gKi8gLCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLktyLmFkZFRhcmdldERhdGEoZSwgcikubmV4dCgoKCkgPT4gcikpKSkpKSk7XG4gICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCByID0gbi5ycy5nZXQoZS50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gciB8fCBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8oci5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4ucnMgPSBuLnJzLmluc2VydChlLnRhcmdldElkLCBlKSwgXG4gICAgICAgIG4uc3Muc2V0KHQsIGUudGFyZ2V0SWQpKSwgZTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBpID0gci5ycy5nZXQodCksIHMgPSBuID8gXCJyZWFkd3JpdGVcIiA6IFwicmVhZHdyaXRlLXByaW1hcnlcIjtcbiAgICB0cnkge1xuICAgICAgICBuIHx8IGF3YWl0IHIucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWxlYXNlIHRhcmdldFwiLCBzLCAoZSA9PiByLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVRhcmdldChlLCBpKSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSB0aHJvdyBlO1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTG9jYWxTdG9yZVwiLCBgRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzIGZvciB0YXJnZXQgJHt0fTogJHtlfWApO1xuICAgIH1cbiAgICByLnJzID0gci5ycy5yZW1vdmUodCksIHIuc3MuZGVsZXRlKGkudGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXG4gKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXG4gKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cbiAqXG4gKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIC0gV2hldGhlciByZXN1bHRzIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyBjYW5cbiAqIGJlIHVzZWQgdG8gb3B0aW1pemUgdGhpcyBxdWVyeSBleGVjdXRpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVFeGVjdXRlUXVlcnkoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCBpID0gU25hcHNob3RWZXJzaW9uLm1pbigpLCBzID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgcmV0dXJuIHIucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJFeGVjdXRlIHF1ZXJ5XCIsIFwicmVhZHdyaXRlXCIsICgvLyBVc2UgcmVhZHdyaXRlIGluc3RlYWQgb2YgcmVhZG9ubHkgc28gaW5kZXhlcyBjYW4gYmUgY3JlYXRlZFxuICAgIC8vIFVzZSByZWFkd3JpdGUgaW5zdGVhZCBvZiByZWFkb25seSBzbyBpbmRleGVzIGNhbiBiZSBjcmVhdGVkXG4gICAgZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldFRhcmdldERhdGEoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IHIuc3MuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoci5ycy5nZXQoaSkpIDogci5Lci5nZXRUYXJnZXREYXRhKHQsIG4pO1xuICAgIH0ociwgZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpLm5leHQoKHQgPT4ge1xuICAgICAgICBpZiAodCkgcmV0dXJuIGkgPSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHIuS3IuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdC50YXJnZXRJZCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBzID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiByLm5zLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiA/IGkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG4gPyBzIDogX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpKSkubmV4dCgoZSA9PiAoX19QUklWQVRFX3NldE1heFJlYWRUaW1lKHIsIF9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cCh0KSwgZSksIFxuICAgIHtcbiAgICAgICAgZG9jdW1lbnRzOiBlLFxuICAgICAgICBQczogc1xuICAgIH0pKSkpKTtcbn1cblxuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0Q2FjaGVkVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3Qobi5LciksIGkgPSBuLnJzLmdldCh0KTtcbiAgICByZXR1cm4gaSA/IFByb21pc2UucmVzb2x2ZShpLnRhcmdldCkgOiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IHRhcmdldCBkYXRhXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gci5sdChlLCB0KS5uZXh0KChlID0+IGUgPyBlLnRhcmdldCA6IG51bGwpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxuICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XG4gKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCB0aGF0IGhhdmUgY2hhbmdlZFxuICogc2luY2UgdGhlIHByaW9yIGNhbGwuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5ld0RvY3VtZW50Q2hhbmdlcyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLm9zLmdldCh0KSB8fCBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IG1heGltdW0gcmVhZCB0aW1lIGZvciB0aGUgY29sbGVjdGlvbi4gVGhpcyBzaG91bGQgYWx3YXlzXG4gICAgLy8gZXhpc3QsIGJ1dCB0byByZWR1Y2UgdGhlIGNoYW5jZSBmb3IgcmVncmVzc2lvbnMgd2UgZGVmYXVsdCB0b1xuICAgIC8vIFNuYXBzaG90VmVyc2lvbi5NaW4oKVxuICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBDb25zaWRlciByZW1vdmluZyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXNcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLl9zLmdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgX19QUklWQVRFX25ld0luZGV4T2Zmc2V0U3VjY2Vzc29yRnJvbVJlYWRUaW1lKHIsIC0xKSwgXG4gICAgLyogbGltaXQ9ICovIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkpLnRoZW4oKGUgPT4gKF9fUFJJVkFURV9zZXRNYXhSZWFkVGltZShuLCB0LCBlKSwgXG4gICAgZSkpKTtcbn1cblxuLyoqIFNldHMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAncyBtYXhpbXVtIHJlYWQgdGltZSBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudHMuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gX19QUklWQVRFX3NldE1heFJlYWRUaW1lKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IGUub3MuZ2V0KHQpIHx8IFNuYXBzaG90VmVyc2lvbi5taW4oKTtcbiAgICBuLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgIHQucmVhZFRpbWUuY29tcGFyZVRvKHIpID4gMCAmJiAociA9IHQucmVhZFRpbWUpO1xuICAgIH0pKSwgZS5vcy5zZXQodCwgcik7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgdXNpbmcgdGhlIGdpdmVuIGJ1bmRsZSBuYW1lLCB3aGljaCB3aWxsIGJlIHVzZWQgdG9cbiAqIGhvbGQgdGhlIGtleXMgb2YgYWxsIGRvY3VtZW50cyBmcm9tIHRoZSBidW5kbGUgaW4gcXVlcnktZG9jdW1lbnQgbWFwcGluZ3MuXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCB0aGUgbG9hZGVkIGRvY3VtZW50cyBkbyBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkXG4gKiByaWdodCBhd2F5LlxuICovXG4vKipcbiAqIEFwcGxpZXMgdGhlIGRvY3VtZW50cyBmcm9tIGEgYnVuZGxlIHRvIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseUJ1bmRsZWREb2N1bWVudHMoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCBzID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIG8gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgZm9yIChjb25zdCBlIG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IHQuSXMoZS5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgZS5kb2N1bWVudCAmJiAocyA9IHMuYWRkKG4pKTtcbiAgICAgICAgY29uc3QgciA9IHQuZHMoZSk7XG4gICAgICAgIHIuc2V0UmVhZFRpbWUodC5UcyhlLm1ldGFkYXRhLnJlYWRUaW1lKSksIG8gPSBvLmluc2VydChuLCByKTtcbiAgICB9XG4gICAgY29uc3QgXyA9IGkuX3MubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICB9KSwgYSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoaSwgZnVuY3Rpb24gX19QUklWQVRFX3VtYnJlbGxhVGFyZ2V0KGUpIHtcbiAgICAgICAgLy8gSXQgaXMgT0sgdGhhdCB0aGUgcGF0aCB1c2VkIGZvciB0aGUgcXVlcnkgaXMgbm90IHZhbGlkLCBiZWNhdXNlIHRoaXMgd2lsbFxuICAgICAgICAvLyBub3QgYmUgcmVhZCBhbmQgcXVlcmllZC5cbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoYF9fYnVuZGxlX18vZG9jcy8ke2V9YCkpKTtcbiAgICB9KHIpKTtcbiAgICAvLyBBbGxvY2F0ZXMgYSB0YXJnZXQgdG8gaG9sZCBhbGwgZG9jdW1lbnQga2V5cyBmcm9tIHRoZSBidW5kbGUsIHN1Y2ggdGhhdFxuICAgIC8vIHRoZXkgd2lsbCBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkIHJpZ2h0IGF3YXkuXG4gICAgICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgYnVuZGxlIGRvY3VtZW50c1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiBfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlcihlLCBfLCBvKS5uZXh0KCh0ID0+IChfLmFwcGx5KGUpLCBcbiAgICB0KSkpLm5leHQoKHQgPT4gaS5Lci5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCBhLnRhcmdldElkKS5uZXh0KCgoKSA9PiBpLktyLmFkZE1hdGNoaW5nS2V5cyhlLCBzLCBhLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkubG9jYWxEb2N1bWVudHMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgdC5scywgdC5ocykpKS5uZXh0KCgoKSA9PiB0LmxzKSkpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYm9vbGVhbiB0byBpbmRpY2F0ZSBpZiB0aGUgZ2l2ZW4gYnVuZGxlIGhhcyBhbHJlYWR5XG4gKiBiZWVuIGxvYWRlZCBhbmQgdGhlIGNyZWF0ZSB0aW1lIGlzIG5ld2VyIHRoYW4gdGhlIGN1cnJlbnQgbG9hZGluZyBidW5kbGUuXG4gKi9cbi8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBOYW1lZFF1ZXJ5YCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVTYXZlTmFtZWRRdWVyeShlLCB0LCBuID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpIHtcbiAgICAvLyBBbGxvY2F0ZSBhIHRhcmdldCBmb3IgdGhlIG5hbWVkIHF1ZXJ5IHN1Y2ggdGhhdCBpdCBjYW4gYmUgcmVzdW1lZFxuICAgIC8vIGZyb20gYXNzb2NpYXRlZCByZWFkIHRpbWUgaWYgdXNlcnMgdXNlIGl0IHRvIGxpc3Rlbi5cbiAgICAvLyBOT1RFOiB0aGlzIGFsc28gbWVhbnMgaWYgbm8gY29ycmVzcG9uZGluZyB0YXJnZXQgZXhpc3RzLCB0aGUgbmV3IHRhcmdldFxuICAgIC8vIHdpbGwgcmVtYWluIGFjdGl2ZSBhbmQgd2lsbCBub3QgZ2V0IGNvbGxlY3RlZCwgdW5sZXNzIHVzZXJzIGhhcHBlbiB0b1xuICAgIC8vIHVubGlzdGVuIHRoZSBxdWVyeSBzb21laG93LlxuICAgIGNvbnN0IHIgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KGUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KHQuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4ge1xuICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQucmVhZFRpbWUpO1xuICAgICAgICAvLyBTaW1wbHkgc2F2ZSB0aGUgcXVlcnkgaXRzZWxmIGlmIGl0IGlzIG9sZGVyIHRoYW4gd2hhdCB0aGUgU0RLIGFscmVhZHlcbiAgICAgICAgLy8gaGFzLlxuICAgICAgICAgICAgICAgIGlmIChyLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocykgPj0gMCkgcmV0dXJuIGkuVXIuc2F2ZU5hbWVkUXVlcnkoZSwgdCk7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyB0YXJnZXQgZGF0YSBiZWNhdXNlIHRoZSBxdWVyeSBmcm9tIHRoZSBidW5kbGUgaXMgbmV3ZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IHIud2l0aFJlc3VtZVRva2VuKEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkcsIHMpO1xuICAgICAgICByZXR1cm4gaS5ycyA9IGkucnMuaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLktyLnVwZGF0ZVRhcmdldERhdGEoZSwgbykubmV4dCgoKCkgPT4gaS5Lci5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCByLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuS3IuYWRkTWF0Y2hpbmdLZXlzKGUsIG4sIHIudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5Vci5zYXZlTmFtZWRRdWVyeShlLCB0KSkpO1xuICAgIH0pKTtcbn1cblxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkoZSwgdCkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX2NsaWVudHNfJHtlfV8ke3R9YDtcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIG11dGF0aW9uIHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPlxuLy8gICAgIChmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzKVxuLy8gb3I6IGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPl88dXNlcl91aWQ+XG5cbi8vICd1c2VyX3VpZCcgaXMgbGFzdCB0byBhdm9pZCBuZWVkaW5nIHRvIGVzY2FwZSAnXycgY2hhcmFjdGVycyB0aGF0IGl0IG1pZ2h0XG4vLyBjb250YWluLlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIG11dGF0aW9uIGJhdGNoIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IGBmaXJlc3RvcmVfbXV0YXRpb25zXyR7ZX1fJHtufWA7XG4gICAgcmV0dXJuIHQuaXNBdXRoZW50aWNhdGVkKCkgJiYgKHIgKz0gYF8ke3QudWlkfWApLCByO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyBhIHF1ZXJ5IHRhcmdldCdzIG1ldGFkYXRhIGlzOlxuLy8gICAgIGZpcmVzdG9yZV90YXJnZXRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Xzx0YXJnZXRfaWQ+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgcXVlcnkgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkoZSwgdCkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX3RhcmdldHNfJHtlfV8ke3R9YDtcbn1cblxuLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgc3RvcmVzIHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZS4gVGhlXG4vLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbi8vICAgICBmaXJlc3RvcmVfb25saW5lX3N0YXRlXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIG11dGF0aW9uIGJhdGNoLCBpbmNsdWRpbmcgaXRzIHVzZXIgSUQsIGJhdGNoIElEIGFuZFxuICogd2hldGhlciB0aGUgYmF0Y2ggaXMgJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnVzZXIgPSBlLCB0aGlzLmJhdGNoSWQgPSB0LCB0aGlzLnN0YXRlID0gbiwgdGhpcy5lcnJvciA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIE11dGF0aW9uTWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBFcyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBKU09OLnBhcnNlKG4pO1xuICAgICAgICBsZXQgaSwgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHIgJiYgLTEgIT09IFsgXCJwZW5kaW5nXCIsIFwiYWNrbm93bGVkZ2VkXCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yoci5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gci5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiByLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIHMgJiYgci5lcnJvciAmJiAocyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHIuZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiByLmVycm9yLmNvZGUsIFxuICAgICAgICBzICYmIChpID0gbmV3IEZpcmVzdG9yZUVycm9yKHIuZXJyb3IuY29kZSwgci5lcnJvci5tZXNzYWdlKSkpLCBzID8gbmV3IF9fUFJJVkFURV9NdXRhdGlvbk1ldGFkYXRhKGUsIHQsIHIuc3RhdGUsIGkpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICcke3R9JzogJHtufWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIEFzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKGUuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxuICogdGFyZ2V0IGlzICdub3QtY3VycmVudCcsICdjdXJyZW50JyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gZSwgdGhpcy5zdGF0ZSA9IHQsIHRoaXMuZXJyb3IgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBRdWVyeVRhcmdldE1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgRXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgbGV0IHIsIGkgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIC0xICE9PSBbIFwibm90LWN1cnJlbnRcIiwgXCJjdXJyZW50XCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yobi5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gbi5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBuLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIGkgJiYgbi5lcnJvciAmJiAoaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLmNvZGUsIFxuICAgICAgICBpICYmIChyID0gbmV3IEZpcmVzdG9yZUVycm9yKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhKGUsIG4uc3RhdGUsIHIpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgdGFyZ2V0IHN0YXRlIGZvciBJRCAnJHtlfSc6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBBcygpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmIChlLmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBpbW11dGFibGUgQ2xpZW50U3RhdGUgZm9yIGEgY2xpZW50IHJlYWQgZnJvbVxuICogV2ViU3RvcmFnZSwgY29udGFpbmluZyB0aGUgbGlzdCBvZiBhY3RpdmUgcXVlcnkgdGFyZ2V0cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUmVtb3RlQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGUsIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBFcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICBsZXQgciA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgbi5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheSwgaSA9IF9fUFJJVkFURV90YXJnZXRJZFNldCgpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgciAmJiBlIDwgbi5hY3RpdmVUYXJnZXRJZHMubGVuZ3RoOyArK2UpIHIgPSBpc1NhZmVJbnRlZ2VyKG4uYWN0aXZlVGFyZ2V0SWRzW2VdKSwgXG4gICAgICAgIGkgPSBpLmFkZChuLmFjdGl2ZVRhcmdldElkc1tlXSk7XG4gICAgICAgIHJldHVybiByID8gbmV3IF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZShlLCBpKSA6IChfX1BSSVZBVEVfbG9nRXJyb3IoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnJHtlfSc6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXG4gKi8gY2xhc3MgX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBlLCB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgU2hhcmVkT25saW5lU3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBFcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiAtMSAhPT0gWyBcIlVua25vd25cIiwgXCJPbmxpbmVcIiwgXCJPZmZsaW5lXCIgXS5pbmRleE9mKHQub25saW5lU3RhdGUpICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQuY2xpZW50SWQgPyBuZXcgX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlKHQuY2xpZW50SWQsIHQub25saW5lU3RhdGUpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWV0YWRhdGEgc3RhdGUgb2YgdGhlIGxvY2FsIGNsaWVudC4gVW5saWtlIGBSZW1vdGVDbGllbnRTdGF0ZWAsIHRoaXMgY2xhc3MgaXNcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXG4gKiB1cGRhdGUgdGhlIHJhbmdlIG9mIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2ggSURzIGFzIG5ldyBtdXRhdGlvbnMgYXJlIGFkZGVkIG9yXG4gKiByZW1vdmVkLlxuICpcbiAqIFRoZSBkYXRhIGluIGBMb2NhbENsaWVudFN0YXRlYCBpcyBub3QgcmVhZCBmcm9tIFdlYlN0b3JhZ2UgYW5kIGluc3RlYWRcbiAqIHVwZGF0ZWQgdmlhIGl0cyBpbnN0YW5jZSBtZXRob2RzLiBUaGUgdXBkYXRlZCBzdGF0ZSBjYW4gYmUgc2VyaWFsaXplZCB2aWFcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuY2xhc3MgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IF9fUFJJVkFURV90YXJnZXRJZFNldCgpO1xuICAgIH1cbiAgICBScyhlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKGUpO1xuICAgIH1cbiAgICBWcyhlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGVudHJ5IGludG8gYSBKU09OLWVuY29kZWQgZm9ybWF0IHdlIGNhbiB1c2UgZm9yIFdlYlN0b3JhZ2UuXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXG4gICAgICovICAgIEFzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzOiB0aGlzLmFjdGl2ZVRhcmdldElkcy50b0FycmF5KCksXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCB1c2VzIFdlYlN0b3JhZ2UgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGFzIHRoZVxuICogYmFja2luZyBzdG9yZSBmb3IgdGhlIFNoYXJlZENsaWVudFN0YXRlLiBJdCBrZWVwcyB0cmFjayBvZiBhbGwgYWN0aXZlXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxuICovIGNsYXNzIF9fUFJJVkFURV9XZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSBlLCB0aGlzLl9pID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuZnMgPSByLCB0aGlzLnN5bmNFbmdpbmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGwsIHRoaXMuZ3MgPSB0aGlzLnBzLmJpbmQodGhpcyksIFxuICAgICAgICB0aGlzLnlzID0gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIHRoaXMuc3RhcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcHR1cmVzIFdlYlN0b3JhZ2UgZXZlbnRzIHRoYXQgb2NjdXIgYmVmb3JlIGBzdGFydCgpYCBpcyBjYWxsZWQuIFRoZXNlXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cyA9IFtdO1xuICAgICAgICAvLyBFc2NhcGUgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBtZW50aW9uZWQgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXG4gICAgICAgIGNvbnN0IHMgPSBuLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLCB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5TcyA9IGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmZzKSwgXG4gICAgICAgIHRoaXMuYnMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcktleShlKSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfJHtlfWA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLnlzID0gdGhpcy55cy5pbnNlcnQodGhpcy5mcywgbmV3IF9fUFJJVkFURV9Mb2NhbENsaWVudFN0YXRlKSwgXG4gICAgICAgIHRoaXMuRHMgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX2NsaWVudHNfJHtzfV8oW15fXSopJGApLCB0aGlzLkNzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9tdXRhdGlvbnNfJHtzfV8oXFxcXGQrKSg/Ol8oLiopKT8kYCksIFxuICAgICAgICB0aGlzLnZzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV90YXJnZXRzXyR7c31fKFxcXFxkKykkYCksIHRoaXMuRnMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZU9ubGluZVN0YXRlS2V5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV8ke2V9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBwbGF5cyBhcyBhIGV2ZW50IHRvIGluZGljYXRlIHRoZSByZW1vdGUgZG9jdW1lbnRzXG4gICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCBkdWUgdG8gc29tZSBzZWNvbmRhcnkgdGFicyBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAgICAvLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbiAgICAgICAgLy8gICAgIGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXzxwZXJzaXN0ZW5jZUtleT5cbiAgICAgICAgLy8gVGhlIHZlcnNpb24gZW5kaW5nIHdpdGggXCJ2MlwiIHN0b3JlcyB0aGUgbGlzdCBvZiBtb2RpZmllZCBjb2xsZWN0aW9uIGdyb3Vwcy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLk1zID0gZnVuY3Rpb24gY3JlYXRlQnVuZGxlTG9hZGVkS2V5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfdjJfJHtlfWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5ncyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIEMoZSkge1xuICAgICAgICByZXR1cm4gISghZSB8fCAhZS5sb2NhbFN0b3JhZ2UpO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2xpZW50cyB0byBiYWNrZmlsbCB0aGUgZGF0YSBpblxuICAgICAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuc3luY0VuZ2luZS5raSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHQgPT09IHRoaXMuZnMpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0SXRlbShjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX1JlbW90ZUNsaWVudFN0YXRlLkVzKHQsIGUpO1xuICAgICAgICAgICAgICAgIG4gJiYgKHRoaXMueXMgPSB0aGlzLnlzLmluc2VydChuLmNsaWVudElkLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy54cygpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBvbmxpbmUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIGhhbmRsZXJcbiAgICAgICAgLy8gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMuRnMpO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuT3ModCk7XG4gICAgICAgICAgICBlICYmIHRoaXMuTnMoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMud3MpIHRoaXMucHMoZSk7XG4gICAgICAgIHRoaXMud3MgPSBbXSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cbiAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgoKSA9PiB0aGlzLnNodXRkb3duKCkpKSwgdGhpcy5zdGFydGVkID0gITA7XG4gICAgfVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5icywgSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJzKHRoaXMueXMpO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMueXMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHIuYWN0aXZlVGFyZ2V0SWRzLmhhcyhlKSAmJiAodCA9ICEwKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24oZSkge1xuICAgICAgICB0aGlzLkxzKGUsIFwicGVuZGluZ1wiKTtcbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuTHMoZSwgdCwgbiksIFxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxuICAgICAgICB0aGlzLmtzKGUpO1xuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSBcIm5vdC1jdXJyZW50XCI7XG4gICAgICAgIC8vIExvb2t1cCBhbiBleGlzdGluZyBxdWVyeSBzdGF0ZSBpZiB0aGUgdGFyZ2V0IElEIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgICAgLy8gYnkgYW5vdGhlciB0YWJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KGUpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgICAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX1F1ZXJ5VGFyZ2V0TWV0YWRhdGEuRXMoZSwgbik7XG4gICAgICAgICAgICAgICAgciAmJiAodCA9IHIuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnFzLlJzKGUpLCB0aGlzLnhzKCksIHQ7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLnFzLlZzKGUpLCB0aGlzLnhzKCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFzLmFjdGl2ZVRhcmdldElkcy5oYXMoZSk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZShlKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUoZSwgdCwgbikge1xuICAgICAgICB0aGlzLlFzKGUsIHQsIG4pO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMua3MoZSk7XG4gICAgICAgIH0pKSwgdGhpcy5jdXJyZW50VXNlciA9IGUsIG4uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNdXRhdGlvbihlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZShlKSB7XG4gICAgICAgIHRoaXMuS3MoZSk7XG4gICAgfVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZChlKSB7XG4gICAgICAgIHRoaXMuJHMoZSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuZ3MpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5TcyksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0oZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFQURcIiwgZSwgdCksIHQ7XG4gICAgfVxuICAgIHNldEl0ZW0oZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlNFVFwiLCBlLCB0KSwgdGhpcy5zdG9yYWdlLnNldEl0ZW0oZSwgdCk7XG4gICAgfVxuICAgIHJlbW92ZUl0ZW0oZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCBlKSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oZSk7XG4gICAgfVxuICAgIHBzKGUpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCB0ID0gZTtcbiAgICAgICAgaWYgKHQuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRVZFTlRcIiwgdC5rZXksIHQubmV3VmFsdWUpLCB0LmtleSA9PT0gdGhpcy5TcykgcmV0dXJuIHZvaWQgX19QUklWQVRFX2xvZ0Vycm9yKFwiUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSBnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGVcIik7XG4gICAgICAgICAgICB0aGlzLl9pLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0LmtleSkgaWYgKHRoaXMuRHMudGVzdCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Vcyh0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuV3MoZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuR3ModC5rZXksIHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5XcyhlLmNsaWVudElkLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLkNzLnRlc3QodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnpzKHQua2V5LCB0Lm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIHRoaXMuanMoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy52cy50ZXN0KHQua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Icyh0LmtleSwgdC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiB0aGlzLkpzKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHQua2V5ID09PSB0aGlzLkZzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLk9zKHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5OcyhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0LmtleSA9PT0gdGhpcy5icykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBlKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJudW1iZXJcIiA9PSB0eXBlb2YgbiksIHQgPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlXCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICogYE1lbW9yeVNoYXJlZENsaWVudFN0YXRlYCBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBTaGFyZWRDbGllbnRTdGF0ZSBmb3JcbiAqIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlLiBUaGUgc3RhdGUgaW4gdGhpcyBjbGFzcyByZW1haW5zIGZ1bGx5XG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqLyAodC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlICE9PSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuYWUgJiYgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodC5rZXkgPT09IHRoaXMuTXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLllzKHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGUgPT4gdGhpcy5zeW5jRW5naW5lLlpzKGUpKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMud3MucHVzaCh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgcXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlzLmdldCh0aGlzLmZzKTtcbiAgICB9XG4gICAgeHMoKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLlNzLCB0aGlzLnFzLkFzKCkpO1xuICAgIH1cbiAgICBMcyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX011dGF0aW9uTWV0YWRhdGEodGhpcy5jdXJyZW50VXNlciwgZSwgdCwgbiksIGkgPSBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCBlKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGksIHIuQXMoKSk7XG4gICAgfVxuICAgIGtzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIGUpO1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIEtzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmZzLFxuICAgICAgICAgICAgb25saW5lU3RhdGU6IGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy5GcywgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIH1cbiAgICBRcyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSwgaSA9IG5ldyBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YShlLCB0LCBuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHIsIGkuQXMoKSk7XG4gICAgfVxuICAgICRzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20oZSkpO1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5NcywgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgVXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5Ecy5leGVjKGUpO1xuICAgICAgICByZXR1cm4gdCA/IHRbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgR3MoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5VcyhlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZS5FcyhuLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgbXV0YXRpb24gYmF0Y2ggc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgenMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Dcy5leGVjKGUpLCByID0gTnVtYmVyKG5bMV0pLCBpID0gdm9pZCAwICE9PSBuWzJdID8gblsyXSA6IG51bGw7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YS5FcyhuZXcgVXNlcihpKSwgciwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIHF1ZXJ5IHRhcmdldCBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIEhzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMudnMuZXhlYyhlKSwgciA9IE51bWJlcihuWzFdKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhLkVzKHIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gb25saW5lIHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgT3MoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlLkVzKGUpO1xuICAgIH1cbiAgICBZcyhlKSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGUpO1xuICAgIH1cbiAgICBhc3luYyBqcyhlKSB7XG4gICAgICAgIGlmIChlLnVzZXIudWlkID09PSB0aGlzLmN1cnJlbnRVc2VyLnVpZCkgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5YcyhlLmJhdGNoSWQsIGUuc3RhdGUsIGUuZXJyb3IpO1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgSWdub3JpbmcgbXV0YXRpb24gZm9yIG5vbi1hY3RpdmUgdXNlciAke2UudXNlci51aWR9YCk7XG4gICAgfVxuICAgIEpzKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5lbyhlLnRhcmdldElkLCBlLnN0YXRlLCBlLmVycm9yKTtcbiAgICB9XG4gICAgV3MoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdCA/IHRoaXMueXMuaW5zZXJ0KGUsIHQpIDogdGhpcy55cy5yZW1vdmUoZSksIHIgPSB0aGlzLkJzKHRoaXMueXMpLCBpID0gdGhpcy5CcyhuKSwgcyA9IFtdLCBvID0gW107XG4gICAgICAgIHJldHVybiBpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgci5oYXMoZSkgfHwgcy5wdXNoKGUpO1xuICAgICAgICB9KSksIHIuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBpLmhhcyhlKSB8fCBvLnB1c2goZSk7XG4gICAgICAgIH0pKSwgdGhpcy5zeW5jRW5naW5lLm5vKHMsIG8pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMueXMgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIE5zKGUpIHtcbiAgICAgICAgLy8gV2UgY2hlY2sgd2hldGhlciB0aGUgY2xpZW50IHRoYXQgd3JvdGUgdGhpcyBvbmxpbmUgc3RhdGUgaXMgc3RpbGwgYWN0aXZlXG4gICAgICAgIC8vIGJ5IGNvbXBhcmluZyBpdHMgY2xpZW50IElEIHRvIHRoZSBsaXN0IG9mIGNsaWVudHMga2VwdCBhY3RpdmUgaW5cbiAgICAgICAgLy8gSW5kZXhlZERiLiBJZiBhIGNsaWVudCBkb2VzIG5vdCB1cGRhdGUgdGhlaXIgSW5kZXhlZERiIGNsaWVudCBzdGF0ZVxuICAgICAgICAvLyB3aXRoaW4gNSBzZWNvbmRzLCBpdCBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCB3ZSBkb24ndCBlbWl0IGFuIG9ubGluZVxuICAgICAgICAvLyBzdGF0ZSBldmVudC5cbiAgICAgICAgdGhpcy55cy5nZXQoZS5jbGllbnRJZCkgJiYgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIoZS5vbmxpbmVTdGF0ZSk7XG4gICAgfVxuICAgIEJzKGUpIHtcbiAgICAgICAgbGV0IHQgPSBfX1BSSVZBVEVfdGFyZ2V0SWRTZXQoKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQgPSB0LnVuaW9uV2l0aChuLmFjdGl2ZVRhcmdldElkcyk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucm8gPSBuZXcgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUsIHRoaXMuaW8gPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCBcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24oZSkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm8uUnMoZSksIHRoaXMuaW9bZV0gfHwgXCJub3QtY3VycmVudFwiO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5pb1tlXSA9IHQ7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLnJvLlZzKGUpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yby5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUoZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5pb1tlXTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yby5hY3RpdmVUYXJnZXRJZHM7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yby5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm8gPSBuZXcgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKGUpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKGUpIHt9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKGUpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTm9vcENvbm5lY3Rpdml0eU1vbml0b3Ige1xuICAgIHNvKGUpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub28gPSAoKSA9PiB0aGlzLl9vKCksIHRoaXMuYW8gPSAoKSA9PiB0aGlzLnVvKCksIHRoaXMuY28gPSBbXSwgdGhpcy5sbygpO1xuICAgIH1cbiAgICBzbyhlKSB7XG4gICAgICAgIHRoaXMuY28ucHVzaChlKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMub28pLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5hbyk7XG4gICAgfVxuICAgIGxvKCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLm9vKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuYW8pO1xuICAgIH1cbiAgICBfbygpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuY28pIGUoMCAvKiBOZXR3b3JrU3RhdHVzLkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIHVvKCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogVU5BVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmNvKSBlKDEgLyogTmV0d29ya1N0YXR1cy5VTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyBDKCkge1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHZvaWQgMCAhPT0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgdm9pZCAwICE9PSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBtb3N0IHJlY2VudCBpbnZvY2F0aW9uIG9mXG4gKiBgZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKClgLCBvciBudWxsIGlmIGl0IGhhcyBuZXZlciBiZWVuIGludm9rZWQuXG4gKi8gbGV0IEFlID0gbnVsbDtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYW4gaW5pdGlhbCB2YWx1ZSBmb3IgYGxhc3RVbmlxdWVEZWJ1Z0lkYC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgcmFuZG9tbHkgc2VsZWN0ZWQgZnJvbSBhIHJhbmdlIG9mIGludGVnZXJzIHRoYXQgYXJlXG4gKiByZXByZXNlbnRlZCBhcyA4IGhleGFkZWNpbWFsIGRpZ2l0cy4gVGhpcyBtZWFucyB0aGF0ICh3aXRoaW4gcmVhc29uKSBhbnlcbiAqIG51bWJlcnMgZ2VuZXJhdGVkIGJ5IGluY3JlbWVudGluZyB0aGUgcmV0dXJuZWQgbnVtYmVyIGJ5IDEgd2lsbCBhbHNvIGJlXG4gKiByZXByZXNlbnRlZCBieSA4IGhleGFkZWNpbWFsIGRpZ2l0cy4gVGhpcyBsZWFkcyB0byBhbGwgXCJJRHNcIiBoYXZpbmcgdGhlIHNhbWVcbiAqIGxlbmd0aCB3aGVuIGNvbnZlcnRlZCB0byBhIGhleGFkZWNpbWFsIHN0cmluZywgbWFraW5nIHJlYWRpbmcgbG9ncyBjb250YWluaW5nXG4gKiB0aGVzZSBJRHMgZWFzaWVyIHRvIGZvbGxvdy4gQW5kIHNpbmNlIHRoZSByZXR1cm4gdmFsdWUgaXMgcmFuZG9tbHkgc2VsZWN0ZWRcbiAqIGl0IHdpbGwgaGVscCB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gbG9ncyBmcm9tIGRpZmZlcmVudCBleGVjdXRpb25zLlxuICovXG4vKipcbiAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIHVuaXF1ZSBJRCBhcyBhIGhleGFkZWNpbWFsIHN0cmluZy5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgSUQgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiBkZWJ1ZyBsb2dnaW5nIG1lc3NhZ2VzIHRvIGhlbHBcbiAqIGNvcnJlbGF0ZSBsb2cgbWVzc2FnZXMgdGhhdCBtYXkgYmUgc3BhdGlhbGx5IHNlcGFyYXRlZCBpbiB0aGUgbG9ncywgYnV0XG4gKiBsb2dpY2FsbHkgcmVsYXRlZC4gRm9yIGV4YW1wbGUsIGEgbmV0d29yayBjb25uZWN0aW9uIGNvdWxkIGluY2x1ZGUgdGhlIHNhbWVcbiAqIFwiZGVidWcgSURcIiBzdHJpbmcgaW4gYWxsIG9mIGl0cyBsb2cgbWVzc2FnZXMgdG8gaGVscCB0cmFjZSBhIHNwZWNpZmljXG4gKiBjb25uZWN0aW9uIG92ZXIgdGltZS5cbiAqXG4gKiBAcmV0dXJuIHRoZSAxMC1jaGFyYWN0ZXIgZ2VuZXJhdGVkIElEIChlLmcuIFwiMHhhMWIyYzNkNFwiKS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpIHtcbiAgICByZXR1cm4gbnVsbCA9PT0gQWUgPyBBZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9nZW5lcmF0ZUluaXRpYWxVbmlxdWVEZWJ1Z0lkKCkge1xuICAgICAgICByZXR1cm4gMjY4NDM1NDU2ICsgTWF0aC5yb3VuZCgyMTQ3NDgzNjQ4ICogTWF0aC5yYW5kb20oKSk7XG4gICAgfSgpIDogQWUrKywgXCIweFwiICsgQWUudG9TdHJpbmcoMTYpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBSZSA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiLFxuICAgIFJ1bkFnZ3JlZ2F0aW9uUXVlcnk6IFwicnVuQWdncmVnYXRpb25RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9TdHJlYW1CcmlkZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5obyA9IGUuaG8sIHRoaXMuUG8gPSBlLlBvO1xuICAgIH1cbiAgICBJbyhlKSB7XG4gICAgICAgIHRoaXMuVG8gPSBlO1xuICAgIH1cbiAgICBFbyhlKSB7XG4gICAgICAgIHRoaXMuQW8gPSBlO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoZSkge1xuICAgICAgICB0aGlzLlJvID0gZTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuUG8oKTtcbiAgICB9XG4gICAgc2VuZChlKSB7XG4gICAgICAgIHRoaXMuaG8oZSk7XG4gICAgfVxuICAgIFZvKCkge1xuICAgICAgICB0aGlzLlRvKCk7XG4gICAgfVxuICAgIG1vKGUpIHtcbiAgICAgICAgdGhpcy5BbyhlKTtcbiAgICB9XG4gICAgZm8oZSkge1xuICAgICAgICB0aGlzLlJvKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgVmUgPSBcIldlYkNoYW5uZWxDb25uZWN0aW9uXCI7XG5cbmNsYXNzIF9fUFJJVkFURV9XZWJDaGFubmVsQ29ubmVjdGlvbiBleHRlbmRzIFxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgUmVzdC1iYXNlZCBjb25uZWN0aW9ucyB0byB0aGUgYmFja2VuZCAoV2ViQ2hhbm5lbCBhbmRcbiAqIEhUVFApLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUmVzdENvbm5lY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSBlLCB0aGlzLmRhdGFiYXNlSWQgPSBlLmRhdGFiYXNlSWQ7XG4gICAgICAgIGNvbnN0IHQgPSBlLnNzbCA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiLCBuID0gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQpLCByID0gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgICAgIHRoaXMucG8gPSB0ICsgXCI6Ly9cIiArIGUuaG9zdCwgdGhpcy55byA9IGBwcm9qZWN0cy8ke259L2RhdGFiYXNlcy8ke3J9YCwgdGhpcy53byA9IFwiKGRlZmF1bHQpXCIgPT09IHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSA/IGBwcm9qZWN0X2lkPSR7bn1gIDogYHByb2plY3RfaWQ9JHtufSZkYXRhYmFzZV9pZD0ke3J9YDtcbiAgICB9XG4gICAgZ2V0IFNvKCkge1xuICAgICAgICAvLyBCb3RoIGBpbnZva2VSUEMoKWAgYW5kIGBpbnZva2VTdHJlYW1pbmdSUEMoKWAgdXNlIHRoZWlyIGBwYXRoYCBhcmd1bWVudHMgdG8gZGV0ZXJtaW5lXG4gICAgICAgIC8vIHdoZXJlIHRvIHJ1biB0aGUgcXVlcnksIGFuZCBleHBlY3QgdGhlIGByZXF1ZXN0YCB0byBOT1Qgc3BlY2lmeSB0aGUgXCJwYXRoXCIuXG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgYm8oZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpLCBvID0gdGhpcy5EbyhlLCB0KTtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVzdENvbm5lY3Rpb25cIiwgYFNlbmRpbmcgUlBDICcke2V9JyAke3N9OmAsIG8sIG4pO1xuICAgICAgICBjb25zdCBfID0ge1xuICAgICAgICAgICAgXCJnb29nbGUtY2xvdWQtcmVzb3VyY2UtcHJlZml4XCI6IHRoaXMueW8sXG4gICAgICAgICAgICBcIngtZ29vZy1yZXF1ZXN0LXBhcmFtc1wiOiB0aGlzLndvXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLkNvKF8sIHIsIGkpLCB0aGlzLnZvKGUsIG8sIF8sIG4pLnRoZW4oKHQgPT4gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlc3RDb25uZWN0aW9uXCIsIGBSZWNlaXZlZCBSUEMgJyR7ZX0nICR7c306IGAsIHQpLCBcbiAgICAgICAgdCkpLCAodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBfX1BSSVZBVEVfbG9nV2FybihcIlJlc3RDb25uZWN0aW9uXCIsIGBSUEMgJyR7ZX0nICR7c30gZmFpbGVkIHdpdGggZXJyb3I6IGAsIHQsIFwidXJsOiBcIiwgbywgXCJyZXF1ZXN0OlwiLCBuKSwgXG4gICAgICAgICAgICB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEZvKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgLy8gVGhlIFJFU1QgQVBJIGF1dG9tYXRpY2FsbHkgYWdncmVnYXRlcyBhbGwgb2YgdGhlIHN0cmVhbWVkIHJlc3VsdHMsIHNvIHdlXG4gICAgICAgIC8vIGNhbiBqdXN0IHVzZSB0aGUgbm9ybWFsIGludm9rZSgpIG1ldGhvZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuYm8oZSwgdCwgbiwgciwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIHRoZSBoZWFkZXJzIGZvciBhIHJlcXVlc3QsIGFkZGluZyBhbnkgYXV0aG9yaXphdGlvbiB0b2tlbiBpZlxuICAgICAqIHByZXNlbnQgYW5kIGFueSBhZGRpdGlvbmFsIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0LlxuICAgICAqLyAgICBDbyhlLCB0LCBuKSB7XG4gICAgICAgIGVbXCJYLUdvb2ctQXBpLUNsaWVudFwiXSA9IFxuICAgICAgICAvLyBTREtfVkVSU0lPTiBpcyB1cGRhdGVkIHRvIGRpZmZlcmVudCB2YWx1ZSBhdCBydW50aW1lIGRlcGVuZGluZyBvbiB0aGUgZW50cnkgcG9pbnQsXG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gZ2V0IGl0cyB2YWx1ZSB3aGVuIHdlIG5lZWQgaXQgaW4gYSBmdW5jdGlvbi5cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2dldEdvb2dBcGlDbGllbnRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBcImdsLWpzLyBmaXJlL1wiICsgUztcbiAgICAgICAgfSgpLCBcbiAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XG4gICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXG4gICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGUgJGh0dHBPdmVyd3JpdGVcbiAgICAgICAgLy8gcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWQgdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXG4gICAgICAgIGVbXCJDb250ZW50LVR5cGVcIl0gPSBcInRleHQvcGxhaW5cIiwgdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQgJiYgKGVbXCJYLUZpcmViYXNlLUdNUElEXCJdID0gdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLCBcbiAgICAgICAgdCAmJiB0LmhlYWRlcnMuZm9yRWFjaCgoKHQsIG4pID0+IGVbbl0gPSB0KSksIG4gJiYgbi5oZWFkZXJzLmZvckVhY2goKCh0LCBuKSA9PiBlW25dID0gdCkpO1xuICAgIH1cbiAgICBEbyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBSZVtlXTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMucG99L3YxLyR7dH06JHtufWA7XG4gICAgfVxufSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gZS5mb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IGUuYXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSBlLnVzZUZldGNoU3RyZWFtcywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSBlLmxvbmdQb2xsaW5nT3B0aW9ucztcbiAgICB9XG4gICAgdm8oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBfID0gbmV3IFhocklvO1xuICAgICAgICAgICAgXy5zZXRXaXRoQ3JlZGVudGlhbHMoITApLCBfLmxpc3Rlbk9uY2UoRXZlbnRUeXBlLkNPTVBMRVRFLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoXy5nZXRMYXN0RXJyb3JDb2RlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5OT19FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfLmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgWEhSIGZvciBSUEMgJyR7ZX0nICR7aX0gcmVjZWl2ZWQ6YCwgSlNPTi5zdHJpbmdpZnkodCkpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHModCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLlRJTUVPVVQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nICR7aX0gdGltZWQgb3V0YCksIG8obmV3IEZpcmVzdG9yZUVycm9yKEQuREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gXy5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nICR7aX0gZmFpbGVkIHdpdGggc3RhdHVzOmAsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgXy5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IF8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShlKSAmJiAoZSA9IGVbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBudWxsID09IGUgPyB2b2lkIDAgOiBlLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIHQuc3RhdHVzICYmIHQubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX21hcENvZGVGcm9tSHR0cFJlc3BvbnNlRXJyb3JTdGF0dXMoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIFwiLVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKEQpLmluZGV4T2YodCkgPj0gMCA/IHQgOiBELlVOS05PV047XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odC5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKG5ldyBGaXJlc3RvcmVFcnJvcihlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbyhuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTktOT1dOLCBcIlNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgXCIgKyBfLmdldFN0YXR1cygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBtb3N0IHByb2JhYmx5IGEgY29ubmVjdGlvbiBpc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgbyhuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTkFWQUlMQUJMRSwgXCJDb25uZWN0aW9uIGZhaWxlZC5cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyAke2l9IGNvbXBsZXRlZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBhID0gSlNPTi5zdHJpbmdpZnkocik7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nICR7aX0gc2VuZGluZyByZXF1ZXN0OmAsIHIpLCBfLnNlbmQodCwgXCJQT1NUXCIsIGEsIG4sIDE1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBNbyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKCksIGkgPSBbIHRoaXMucG8sIFwiL1wiLCBcImdvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlXCIsIFwiL1wiLCBlLCBcIi9jaGFubmVsXCIgXSwgcyA9IGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQoKSwgbyA9IGdldFN0YXRFdmVudFRhcmdldCgpLCBfID0ge1xuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGJhY2tlbmQgc3RpY2tpbmVzcywgcm91dGluZyBiZWhhdmlvciBpcyBiYXNlZCBvbiB0aGlzXG4gICAgICAgICAgICAvLyBwYXJhbWV0ZXIuXG4gICAgICAgICAgICBodHRwU2Vzc2lvbklkUGFyYW06IFwiZ3Nlc3Npb25pZFwiLFxuICAgICAgICAgICAgaW5pdE1lc3NhZ2VIZWFkZXJzOiB7fSxcbiAgICAgICAgICAgIG1lc3NhZ2VVcmxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHBhcmFtIGlzIHVzZWQgdG8gaW1wcm92ZSByb3V0aW5nIGFuZCBwcm9qZWN0IGlzb2xhdGlvbiBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyBiYWNrZW5kIGFuZCBtdXN0IGJlIGluY2x1ZGVkIGluIGV2ZXJ5IHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IGBwcm9qZWN0cy8ke3RoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3RoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZX1gXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VuZFJhd0pzb246ICEwLFxuICAgICAgICAgICAgc3VwcG9ydHNDcm9zc0RvbWFpblhocjogITAsXG4gICAgICAgICAgICBpbnRlcm5hbENoYW5uZWxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgZGVmYXVsdCB0aW1lb3V0IChyYW5kb21pemVkIGJldHdlZW4gMTAtMjAgc2Vjb25kcykgc2luY2VcbiAgICAgICAgICAgICAgICAvLyBhIGxhcmdlIHdyaXRlIGJhdGNoIG9uIGEgc2xvdyBpbnRlcm5ldCBjb25uZWN0aW9uIG1heSB0YWtlIGEgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIHRpbWUgdG8gc2VuZCB0byB0aGUgYmFja2VuZC4gUmF0aGVyIHRoYW4gaGF2ZSBXZWJDaGFubmVsIGltcG9zZSBhXG4gICAgICAgICAgICAgICAgLy8gdGlnaHQgdGltZW91dCB3aGljaCBjb3VsZCBsZWFkIHRvIGluZmluaXRlIHRpbWVvdXRzIGFuZCByZXRyaWVzLCB3ZVxuICAgICAgICAgICAgICAgIC8vIHNldCBpdCB2ZXJ5IGxhcmdlICg1LTEwIG1pbnV0ZXMpIGFuZCByZWx5IG9uIHRoZSBicm93c2VyJ3MgYnVpbHRpblxuICAgICAgICAgICAgICAgIC8vIHRpbWVvdXRzIHRvIGtpY2sgaW4gaWYgdGhlIHJlcXVlc3QgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgICAgICBmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXM6IDZlNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcmNlTG9uZ1BvbGxpbmc6IHRoaXMuZm9yY2VMb25nUG9sbGluZyxcbiAgICAgICAgICAgIGRldGVjdEJ1ZmZlcmluZ1Byb3h5OiB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZ1xuICAgICAgICB9LCBhID0gdGhpcy5sb25nUG9sbGluZ09wdGlvbnMudGltZW91dFNlY29uZHM7XG4gICAgICAgIHZvaWQgMCAhPT0gYSAmJiAoXy5sb25nUG9sbGluZ1RpbWVvdXQgPSBNYXRoLnJvdW5kKDFlMyAqIGEpKSwgdGhpcy51c2VGZXRjaFN0cmVhbXMgJiYgKF8udXNlRmV0Y2hTdHJlYW1zID0gITApLCBcbiAgICAgICAgdGhpcy5DbyhfLmluaXRNZXNzYWdlSGVhZGVycywgdCwgbiksIFxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGVuY29kZUluaXRNZXNzYWdlSGVhZGVycyBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW4gdGhlIHJlcXVlc3QncyBQT1NUIHBheWxvYWQsXG4gICAgICAgIC8vIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC5cbiAgICAgICAgXy5lbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMgPSAhMDtcbiAgICAgICAgY29uc3QgdSA9IGkuam9pbihcIlwiKTtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgQ3JlYXRpbmcgUlBDICcke2V9JyBzdHJlYW0gJHtyfTogJHt1fWAsIF8pO1xuICAgICAgICBjb25zdCBjID0gcy5jcmVhdGVXZWJDaGFubmVsKHUsIF8pO1xuICAgICAgICAvLyBXZWJDaGFubmVsIHN1cHBvcnRzIHNlbmRpbmcgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgaGFuZHNoYWtlIC0gc2F2aW5nXG4gICAgICAgIC8vIGEgbmV0d29yayByb3VuZCB0cmlwLiBIb3dldmVyLCBpdCB3aWxsIGhhdmUgdG8gY2FsbCBzZW5kIGluIHRoZSBzYW1lXG4gICAgICAgIC8vIEpTIGV2ZW50IGxvb3AgYXMgb3Blbi4gSW4gb3JkZXIgdG8gZW5mb3JjZSB0aGlzLCB3ZSBkZWxheSBhY3R1YWxseVxuICAgICAgICAvLyBvcGVuaW5nIHRoZSBXZWJDaGFubmVsIHVudGlsIHNlbmQgaXMgY2FsbGVkLiBXaGV0aGVyIHdlIGhhdmUgY2FsbGVkXG4gICAgICAgIC8vIG9wZW4gaXMgdHJhY2tlZCB3aXRoIHRoaXMgdmFyaWFibGUuXG4gICAgICAgICAgICAgICAgbGV0IGwgPSAhMSwgaCA9ICExO1xuICAgICAgICAvLyBBIGZsYWcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHN0cmVhbSB3YXMgY2xvc2VkIChieSB1cyBvciB0aHJvdWdoIGFuXG4gICAgICAgIC8vIGVycm9yL2Nsb3NlIGV2ZW50KSB0byBhdm9pZCBkZWxpdmVyaW5nIG11bHRpcGxlIGNsb3NlIGV2ZW50cyBvciBzZW5kaW5nXG4gICAgICAgIC8vIG9uIGEgY2xvc2VkIHN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbnN0IFAgPSBuZXcgX19QUklWQVRFX1N0cmVhbUJyaWRnZSh7XG4gICAgICAgICAgICBobzogdCA9PiB7XG4gICAgICAgICAgICAgICAgaCA/IF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYE5vdCBzZW5kaW5nIGJlY2F1c2UgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBpcyBjbG9zZWQ6YCwgdCkgOiAobCB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgT3BlbmluZyBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydC5gKSwgXG4gICAgICAgICAgICAgICAgYy5vcGVuKCksIGwgPSAhMCksIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gc2VuZGluZzpgLCB0KSwgXG4gICAgICAgICAgICAgICAgYy5zZW5kKHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBQbzogKCkgPT4gYy5jbG9zZSgpXG4gICAgICAgIH0pLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4gPSAoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBjbG9zdXJlIHR5cGluZyBzZWVtcyBicm9rZW4gYmVjYXVzZSBXZWJDaGFubmVsIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBpbXBsZW1lbnQgZ29vZy5ldmVudHMuTGlzdGVuYWJsZVxuICAgICAgICAgICAgZS5saXN0ZW4odCwgKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG4oZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBDbG9zdXJlIGV2ZW50cyBhcmUgZ3VhcmRlZCBhbmQgZXhjZXB0aW9ucyBhcmUgc3dhbGxvd2VkLCBzbyBjYXRjaCBhbnlcbiAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCByZXRocm93IHVzaW5nIGEgc2V0VGltZW91dCBzbyB0aGV5IGJlY29tZSB2aXNpYmxlIGFnYWluLlxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbnR1YWxseSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGdvIGF3YXkgaWYgd2UgYXJlIGNvbmZpZGVudFxuICAgICAgICAvLyBlbm91Z2ggdGhlIGNvZGUgaXMgZXhjZXB0aW9uIGZyZWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5PUEVOLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydCBvcGVuZWQuYCk7XG4gICAgICAgIH0pKSwgX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydCBjbG9zZWRgKSwgXG4gICAgICAgICAgICBQLm1vKCkpO1xuICAgICAgICB9KSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5FUlJPUiwgKHQgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBfX1BSSVZBVEVfbG9nV2FybihWZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gdHJhbnNwb3J0IGVycm9yZWQ6YCwgdCksIFxuICAgICAgICAgICAgUC5tbyhuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4oYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuTUVTU0FHRSwgKHQgPT4ge1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICBpZiAoIWgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC5kYXRhWzBdO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhaSk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGksIG8gPSBzLmVycm9yIHx8IChudWxsID09PSAobiA9IHNbMF0pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uZXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmIChvKSB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gcmVjZWl2ZWQgZXJyb3I6YCwgbyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX21hcENvZGVGcm9tUnBjU3RhdHVzKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gYWVbZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0KSByZXR1cm4gX19QUklWQVRFX21hcENvZGVGcm9tUnBjQ29kZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgfSh0KSwgaSA9IG8ubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gRC5JTlRFUk5BTCwgaSA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgdCArIFwiIHdpdGggbWVzc2FnZSBcIiArIG8ubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICBoID0gITAsIFAubW8obmV3IEZpcmVzdG9yZUVycm9yKG4sIGkpKSwgYy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHJlY2VpdmVkOmAsIGkpLCBQLmZvKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihvLCBFdmVudC5TVEFUX0VWRU5ULCAodCA9PiB7XG4gICAgICAgICAgICB0LnN0YXQgPT09IFN0YXQuUFJPWFkgPyBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IGRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eWApIDogdC5zdGF0ID09PSBTdGF0Lk5PUFJPWFkgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBkZXRlY3RlZCBubyBidWZmZXJpbmcgcHJveHlgKTtcbiAgICAgICAgfSkpLCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cbiAgICAgICAgICAgIFAuVm8oKTtcbiAgICAgICAgfSksIDApLCBQO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBJbml0aWFsaXplcyB0aGUgV2ViQ2hhbm5lbENvbm5lY3Rpb24gZm9yIHRoZSBicm93c2VyLiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBUaGUgUGxhdGZvcm0ncyAnd2luZG93JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0V2luZG93KCkge1xuICAgIC8vIGB3aW5kb3dgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogbnVsbDtcbn1cblxuLyoqIFRoZSBQbGF0Zm9ybSdzICdkb2N1bWVudCcgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqLyBmdW5jdGlvbiBnZXREb2N1bWVudCgpIHtcbiAgICAvLyBgZG9jdW1lbnRgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IG51bGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUpIHtcbiAgICByZXR1cm4gbmV3IEpzb25Qcm90b1NlcmlhbGl6ZXIoZSwgLyogdXNlUHJvdG8zSnNvbj0gKi8gITApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxuICpcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCByID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuX2kgPSBlLCB0aGlzLnRpbWVySWQgPSB0LCB0aGlzLnhvID0gbiwgdGhpcy5PbyA9IHIsIHRoaXMuTm8gPSBpLCB0aGlzLkJvID0gMCwgXG4gICAgICAgIHRoaXMuTG8gPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLmtvID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5CbyA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICBxbygpIHtcbiAgICAgICAgdGhpcy5CbyA9IHRoaXMuTm87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgUW8oZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgdCA9IE1hdGguZmxvb3IodGhpcy5CbyArIHRoaXMuS28oKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5rbyksIHIgPSBNYXRoLm1heCgwLCB0IC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHIgPiAwICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkV4cG9uZW50aWFsQmFja29mZlwiLCBgQmFja2luZyBvZmYgZm9yICR7cn0gbXMgKGJhc2UgZGVsYXk6ICR7dGhpcy5Cb30gbXMsIGRlbGF5IHdpdGggaml0dGVyOiAke3R9IG1zLCBsYXN0IGF0dGVtcHQ6ICR7bn0gbXMgYWdvKWApLCBcbiAgICAgICAgdGhpcy5MbyA9IHRoaXMuX2kuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy50aW1lcklkLCByLCAoKCkgPT4gKHRoaXMua28gPSBEYXRlLm5vdygpLCBcbiAgICAgICAgZSgpKSkpLCBcbiAgICAgICAgLy8gQXBwbHkgYmFja29mZiBmYWN0b3IgdG8gZGV0ZXJtaW5lIG5leHQgZGVsYXkgYW5kIGVuc3VyZSBpdCBpcyB3aXRoaW5cbiAgICAgICAgLy8gYm91bmRzLlxuICAgICAgICB0aGlzLkJvICo9IHRoaXMuT28sIHRoaXMuQm8gPCB0aGlzLnhvICYmICh0aGlzLkJvID0gdGhpcy54byksIHRoaXMuQm8gPiB0aGlzLk5vICYmICh0aGlzLkJvID0gdGhpcy5Obyk7XG4gICAgfVxuICAgICRvKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLkxvICYmICh0aGlzLkxvLnNraXBEZWxheSgpLCB0aGlzLkxvID0gbnVsbCk7XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5MbyAmJiAodGhpcy5Mby5jYW5jZWwoKSwgdGhpcy5MbyA9IG51bGwpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHJhbmRvbSB2YWx1ZSBpbiB0aGUgcmFuZ2UgWy1jdXJyZW50QmFzZU1zLzIsIGN1cnJlbnRCYXNlTXMvMl0gKi8gICAgS28oKSB7XG4gICAgICAgIHJldHVybiAoTWF0aC5yYW5kb20oKSAtIC41KSAqIHRoaXMuQm87XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gaXMgYW4gYWJzdHJhY3QgYmFzZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBzdHJlYW1pbmcgUlBDXG4gKiB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQuIEl0J3MgYnVpbHQgb24gdG9wIG9mIHRoZSBjb25uZWN0aW9ucyBvd24gc3VwcG9ydFxuICogZm9yIHN0cmVhbWluZyBSUENzLCBhbmQgYWRkcyBzZXZlcmFsIGNyaXRpY2FsIGZlYXR1cmVzIGZvciBvdXIgY2xpZW50czpcbiAqXG4gKiAgIC0gRXhwb25lbnRpYWwgYmFja29mZiBvbiBmYWlsdXJlXG4gKiAgIC0gQXV0aGVudGljYXRpb24gdmlhIENyZWRlbnRpYWxzUHJvdmlkZXJcbiAqICAgLSBEaXNwYXRjaGluZyBhbGwgY2FsbGJhY2tzIGludG8gdGhlIHNoYXJlZCB3b3JrZXIgcXVldWVcbiAqICAgLSBDbG9zaW5nIGlkbGUgc3RyZWFtcyBhZnRlciA2MCBzZWNvbmRzIG9mIGluYWN0aXZpdHlcbiAqXG4gKiBTdWJjbGFzc2VzIG9mIFBlcnNpc3RlbnRTdHJlYW0gaW1wbGVtZW50IHNlcmlhbGl6YXRpb24gb2YgbW9kZWxzIHRvIGFuZFxuICogZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgcHJvdG9jb2wgYnVmZmVycyBmb3IgYSBzcGVjaWZpY1xuICogc3RyZWFtaW5nIFJQQy5cbiAqXG4gKiAjIyBTdGFydGluZyBhbmQgU3RvcHBpbmdcbiAqXG4gKiBTdHJlYW1pbmcgUlBDcyBhcmUgc3RhdGVmdWwgYW5kIG5lZWQgdG8gYmUgc3RhcnQoKWVkIGJlZm9yZSBtZXNzYWdlcyBjYW5cbiAqIGJlIHNlbnQgYW5kIHJlY2VpdmVkLiBUaGUgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIG9uT3BlbigpIGZ1bmN0aW9uXG4gKiBvZiB0aGUgbGlzdGVuZXIgb25jZSB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCByZXF1ZXN0cy5cbiAqXG4gKiBTaG91bGQgYSBzdGFydCgpIGZhaWwsIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSByZWdpc3RlcmVkIG9uQ2xvc2UoKVxuICogbGlzdGVuZXIgd2l0aCBhIEZpcmVzdG9yZUVycm9yIGluZGljYXRpbmcgd2hhdCB3ZW50IHdyb25nLlxuICpcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBjYW4gYmUgc3RhcnRlZCBhbmQgc3RvcHBlZCByZXBlYXRlZGx5LlxuICpcbiAqIEdlbmVyaWMgdHlwZXM6XG4gKiAgU2VuZFR5cGU6IFRoZSB0eXBlIG9mIHRoZSBvdXRnb2luZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIFJlY2VpdmVUeXBlOiBUaGUgdHlwZSBvZiB0aGUgaW5jb21pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBMaXN0ZW5lclR5cGU6IFRoZSB0eXBlIG9mIHRoZSBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgY2FsbGJhY2tzXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9QZXJzaXN0ZW50U3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzLCBvLCBfKSB7XG4gICAgICAgIHRoaXMuX2kgPSBlLCB0aGlzLlVvID0gbiwgdGhpcy5XbyA9IHIsIHRoaXMuY29ubmVjdGlvbiA9IGksIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgPSBzLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIgPSBvLCB0aGlzLmxpc3RlbmVyID0gXywgdGhpcy5zdGF0ZSA9IDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2xvc2UgY291bnQgdGhhdCdzIGluY3JlbWVudGVkIGV2ZXJ5IHRpbWUgdGhlIHN0cmVhbSBpcyBjbG9zZWQ7IHVzZWQgYnlcbiAgICAgICAgICogZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlcigpIHRvIGludmFsaWRhdGUgY2FsbGJhY2tzIHRoYXQgaGFwcGVuIGFmdGVyXG4gICAgICAgICAqIGNsb3NlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5HbyA9IDAsIHRoaXMuem8gPSBudWxsLCB0aGlzLmpvID0gbnVsbCwgdGhpcy5zdHJlYW0gPSBudWxsLCB0aGlzLkhvID0gbmV3IF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBzdGFydCgpIGhhcyBiZWVuIGNhbGxlZCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnVlXG4gICAgICogaW5kaWNhdGVzIHRoZSBzdHJlYW0gaXMgb3BlbiBvciBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nICh3aGljaFxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxuICAgICAqIGFjdHVhbCBSUEMpLiBVc2UgaXNPcGVuKCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgb3BlbiBhbmQgcmVhZHkgZm9yXG4gICAgICogb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIEpvKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcgKi8gPT09IHRoaXMuc3RhdGUgfHwgNSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLllvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIFlvKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovID09PSB0aGlzLnN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIFJQQy4gT25seSBhbGxvd2VkIGlmIGlzU3RhcnRlZCgpIHJldHVybnMgZmFsc2UuIFRoZSBzdHJlYW0gaXNcbiAgICAgKiBub3QgaW1tZWRpYXRlbHkgcmVhZHkgZm9yIHVzZTogb25PcGVuKCkgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIFJQQyBpc1xuICAgICAqIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cywgYXQgd2hpY2ggcG9pbnQgaXNPcGVuKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RhcnQgcmV0dXJucywgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICE9PSB0aGlzLnN0YXRlID8gdGhpcy5hdXRoKCkgOiB0aGlzLlpvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cbiAgICAgKi8gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5KbygpICYmIGF3YWl0IHRoaXMuY2xvc2UoMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFmdGVyIGFuIGVycm9yIHRoZSBzdHJlYW0gd2lsbCB1c3VhbGx5IGJhY2sgb2ZmIG9uIHRoZSBuZXh0IGF0dGVtcHQgdG9cbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxuICAgICAqIHNlbmRlciBjYW4gdXNlIHRoaXMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVjZWl2ZXIgc2hvdWxkIG5vdCBiYWNrIG9mZi5cbiAgICAgKlxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xuICAgICAqIGluaGliaXQgYmFja29mZiBpZiByZXF1aXJlZC5cbiAgICAgKi8gICAgWG8oKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgdGhpcy5Iby5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGlzIHN0cmVhbSBhcyBpZGxlLiBJZiBubyBmdXJ0aGVyIGFjdGlvbnMgYXJlIHBlcmZvcm1lZCBvbiB0aGVcbiAgICAgKiBzdHJlYW0gZm9yIG9uZSBtaW51dGUsIHRoZSBzdHJlYW0gd2lsbCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0c2VsZiBhbmRcbiAgICAgKiBub3RpZnkgdGhlIHN0cmVhbSdzIG9uQ2xvc2UoKSBoYW5kbGVyIHdpdGggU3RhdHVzLk9LLiBUaGUgc3RyZWFtIHdpbGwgdGhlblxuICAgICAqIGJlIGluIGEgIWlzU3RhcnRlZCgpIHN0YXRlLCByZXF1aXJpbmcgdGhlIGNhbGxlciB0byBzdGFydCB0aGUgc3RyZWFtIGFnYWluXG4gICAgICogYmVmb3JlIGZ1cnRoZXIgdXNlLlxuICAgICAqXG4gICAgICogT25seSBzdHJlYW1zIHRoYXQgYXJlIGluIHN0YXRlICdPcGVuJyBjYW4gYmUgbWFya2VkIGlkbGUsIGFzIGFsbCBvdGhlclxuICAgICAqIHN0YXRlcyBpbXBseSBwZW5kaW5nIG5ldHdvcmsgb3BlcmF0aW9ucy5cbiAgICAgKi8gICAgZV8oKSB7XG4gICAgICAgIC8vIFN0YXJ0cyB0aGUgaWRsZSB0aW1lIGlmIHdlIGFyZSBpbiBzdGF0ZSAnT3BlbicgYW5kIGFyZSBub3QgeWV0IGFscmVhZHlcbiAgICAgICAgLy8gcnVubmluZyBhIHRpbWVyIChpbiB3aGljaCBjYXNlIHRoZSBwcmV2aW91cyBpZGxlIHRpbWVvdXQgc3RpbGwgYXBwbGllcykuXG4gICAgICAgIHRoaXMuWW8oKSAmJiBudWxsID09PSB0aGlzLnpvICYmICh0aGlzLnpvID0gdGhpcy5faS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLlVvLCA2ZTQsICgoKSA9PiB0aGlzLnRfKCkpKSk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLiAqLyAgICBuXyhlKSB7XG4gICAgICAgIHRoaXMucl8oKSwgdGhpcy5zdHJlYW0uc2VuZChlKTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBieSB0aGUgaWRsZSB0aW1lciB3aGVuIHRoZSBzdHJlYW0gc2hvdWxkIGNsb3NlIGR1ZSB0byBpbmFjdGl2aXR5LiAqLyAgICBhc3luYyB0XygpIHtcbiAgICAgICAgaWYgKHRoaXMuWW8oKSkgXG4gICAgICAgIC8vIFdoZW4gdGltaW5nIG91dCBhbiBpZGxlIHN0cmVhbSB0aGVyZSdzIG5vIHJlYXNvbiB0byBmb3JjZSB0aGUgc3RyZWFtIGludG8gYmFja29mZiB3aGVuXG4gICAgICAgIC8vIGl0IHJlc3RhcnRzIHNvIHNldCB0aGUgc3RyZWFtIHN0YXRlIHRvIEluaXRpYWwgaW5zdGVhZCBvZiBFcnJvci5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi8gICAgcl8oKSB7XG4gICAgICAgIHRoaXMuem8gJiYgKHRoaXMuem8uY2FuY2VsKCksIHRoaXMuem8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIENhbmNlbHMgdGhlIGhlYWx0aCBjaGVjayBkZWxheWVkIG9wZXJhdGlvbi4gKi8gICAgaV8oKSB7XG4gICAgICAgIHRoaXMuam8gJiYgKHRoaXMuam8uY2FuY2VsKCksIHRoaXMuam8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XG4gICAgICpcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSAtIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cbiAgICAgKi8gICAgYXN5bmMgY2xvc2UoZSwgdCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cbiAgICAgICAgdGhpcy5yXygpLCB0aGlzLmlfKCksIHRoaXMuSG8uY2FuY2VsKCksIFxuICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxuICAgICAgICB0aGlzLkdvKyssIDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICE9PSBlID8gXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gaW50ZW50aW9uYWwgY2xvc2UgZW5zdXJlIHdlIGRvbid0IGRlbGF5IG91ciBuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdC5cbiAgICAgICAgdGhpcy5Iby5yZXNldCgpIDogdCAmJiB0LmNvZGUgPT09IEQuUkVTT1VSQ0VfRVhIQVVTVEVEID8gKFxuICAgICAgICAvLyBMb2cgdGhlIGVycm9yLiAoUHJvYmFibHkgZWl0aGVyICdxdW90YSBleGNlZWRlZCcgb3IgJ21heCBxdWV1ZSBsZW5ndGggcmVhY2hlZCcuKVxuICAgICAgICBfX1BSSVZBVEVfbG9nRXJyb3IodC50b1N0cmluZygpKSwgX19QUklWQVRFX2xvZ0Vycm9yKFwiVXNpbmcgbWF4aW11bSBiYWNrb2ZmIGRlbGF5IHRvIHByZXZlbnQgb3ZlcmxvYWRpbmcgdGhlIGJhY2tlbmQuXCIpLCBcbiAgICAgICAgdGhpcy5Iby5xbygpKSA6IHQgJiYgdC5jb2RlID09PSBELlVOQVVUSEVOVElDQVRFRCAmJiAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovICE9PSB0aGlzLnN0YXRlICYmIChcbiAgICAgICAgLy8gXCJ1bmF1dGhlbnRpY2F0ZWRcIiBlcnJvciBtZWFucyB0aGUgdG9rZW4gd2FzIHJlamVjdGVkLiBUaGlzIHNob3VsZCByYXJlbHlcbiAgICAgICAgLy8gaGFwcGVuIHNpbmNlIGJvdGggQXV0aCBhbmQgQXBwQ2hlY2sgZW5zdXJlIGEgc3VmZmljaWVudCBUVEwgd2hlbiB3ZVxuICAgICAgICAvLyByZXF1ZXN0IGEgdG9rZW4uIElmIGEgdXNlciBtYW51YWxseSByZXNldHMgdGhlaXIgc3lzdGVtIGNsb2NrIHRoaXMgY2FuXG4gICAgICAgIC8vIGZhaWwsIGhvd2V2ZXIuIEluIHRoaXMgY2FzZSwgd2Ugc2hvdWxkIGdldCBhIENvZGUuVU5BVVRIRU5USUNBVEVEIGVycm9yXG4gICAgICAgIC8vIGJlZm9yZSB3ZSByZWNlaXZlZCB0aGUgZmlyc3QgbWVzc2FnZSBhbmQgd2UgbmVlZCB0byBpbnZhbGlkYXRlIHRoZSB0b2tlblxuICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCB3ZSBmZXRjaCBhIG5ldyB0b2tlbi5cbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCkpLCBcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGJlY2F1c2Ugd2UgYXJlIG5vIGxvbmdlciBpbnRlcmVzdGVkIGluIGV2ZW50cy5cbiAgICAgICAgbnVsbCAhPT0gdGhpcy5zdHJlYW0gJiYgKHRoaXMuc18oKSwgdGhpcy5zdHJlYW0uY2xvc2UoKSwgdGhpcy5zdHJlYW0gPSBudWxsKSwgXG4gICAgICAgIC8vIFRoaXMgc3RhdGUgbXVzdCBiZSBhc3NpZ25lZCBiZWZvcmUgY2FsbGluZyBvbkNsb3NlKCkgdG8gYWxsb3cgdGhlIGNhbGxiYWNrIHRvXG4gICAgICAgIC8vIGluaGliaXQgYmFja29mZiBvciBvdGhlcndpc2UgbWFuaXB1bGF0ZSB0aGUgc3RhdGUgaW4gaXRzIG5vbi1zdGFydGVkIHN0YXRlLlxuICAgICAgICB0aGlzLnN0YXRlID0gZSwgXG4gICAgICAgIC8vIE5vdGlmeSB0aGUgbGlzdGVuZXIgdGhhdCB0aGUgc3RyZWFtIGNsb3NlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5saXN0ZW5lci5Fbyh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuIGJlIG92ZXJyaWRkZW4gdG8gcGVyZm9ybSBhZGRpdGlvbmFsIGNsZWFudXAgYmVmb3JlIHRoZSBzdHJlYW0gaXMgY2xvc2VkLlxuICAgICAqIENhbGxpbmcgc3VwZXIudGVhckRvd24oKSBpcyBub3QgcmVxdWlyZWQuXG4gICAgICovICAgIHNfKCkge31cbiAgICBhdXRoKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcgKi87XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm9fKHRoaXMuR28pLCB0ID0gdGhpcy5HbztcbiAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBKdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkLCBidXQgc2VlIFRPRE8gYmVsb3cuXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCkgXSkudGhlbigoKFtlLCBuXSkgPT4ge1xuICAgICAgICAgICAgLy8gU3RyZWFtIGNhbiBiZSBzdG9wcGVkIHdoaWxlIHdhaXRpbmcgZm9yIGF1dGhlbnRpY2F0aW9uLlxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBXZSByZWFsbHkgc2hvdWxkIGp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWRcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgdGhpcyBkaXNwYXRjaCBvbnRvIHRoZSBxdWV1ZSwgYnV0IHRoYXQgb3BlbmVkIGEgc3BlYyB0ZXN0IGNhblxuICAgICAgICAgICAgLy8gb2Ygd29ybXMgdGhhdCBJIGRvbid0IHdhbnQgdG8gZGVhbCB3aXRoIGluIHRoaXMgUFIuXG4gICAgICAgICAgICB0aGlzLkdvID09PSB0ICYmIFxuICAgICAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIHNjaGVkdWxlIHRoZSBjYWxsYmFjayBvbiB0aGUgQXN5bmNRdWV1ZS5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBmb2xsb3dpbmcgY2FsbHMgYXJlIHNhZmUgdG8gYmUgY2FsbGVkIG91dHNpZGUgdGhlXG4gICAgICAgICAgICAvLyBBc3luY1F1ZXVlIHNpbmNlIHRoZXkgZG9uJ3QgY2hhaW4gYXN5bmNocm9ub3VzIGNhbGxzXG4gICAgICAgICAgICB0aGlzLl9fKGUsIG4pO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgZSgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTktOT1dOLCBcIkZldGNoaW5nIGF1dGggdG9rZW4gZmFpbGVkOiBcIiArIHQubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYV8oZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgX18oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vXyh0aGlzLkdvKTtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLnVfKGUsIHQpLCB0aGlzLnN0cmVhbS5JbygoKCkgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gKHRoaXMuc3RhdGUgPSAyIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuICovICwgdGhpcy5qbyA9IHRoaXMuX2kuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5XbywgMWU0LCAoKCkgPT4gKHRoaXMuWW8oKSAmJiAodGhpcy5zdGF0ZSA9IDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8pLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpLCB0aGlzLmxpc3RlbmVyLklvKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0uRW8oKGUgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy5hXyhlKSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgoZSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLm9uTWVzc2FnZShlKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFpvKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiAqLyAsIHRoaXMuSG8uUW8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RzXG4gICAgYV8oZSkge1xuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlIHN0cmVhbSBjb3VsZCBjbG9zZSBjbGVhbmx5LCBob3dldmVyLCBpbiBvdXIgY3VycmVudCBtb2RlbFxuICAgICAgICAvLyB3ZSBuZXZlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVjYXVzZSBpZiB3ZSBzdG9wIGEgc3RyZWFtIG91cnNlbHZlcyxcbiAgICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIG5ldmVyIGJlIGNhbGxlZC4gVG8gcHJldmVudCBjYXNlcyB3aGVyZSB3ZSByZXRyeVxuICAgICAgICAvLyB3aXRob3V0IGEgYmFja29mZiBhY2NpZGVudGFsbHksIHdlIHNldCB0aGUgc3RyZWFtIHRvIGVycm9yIGluIGFsbCBjYXNlcy5cbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlBlcnNpc3RlbnRTdHJlYW1cIiwgYGNsb3NlIHdpdGggZXJyb3I6ICR7ZX1gKSwgdGhpcy5zdHJlYW0gPSBudWxsLCBcbiAgICAgICAgdGhpcy5jbG9zZSg0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBvXyhlKSB7XG4gICAgICAgIHJldHVybiB0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2kuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5HbyA9PT0gZSA/IHQoKSA6IChfX1BSSVZBVEVfbG9nRGVidWcoXCJQZXJzaXN0ZW50U3RyZWFtXCIsIFwic3RyZWFtIGNhbGxiYWNrIHNraXBwZWQgYnkgZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlci5cIiksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIExpc3RlbiBSUEMuXG4gKlxuICogT25jZSB0aGUgTGlzdGVuIHN0cmVhbSBoYXMgY2FsbGVkIHRoZSBvbk9wZW4oKSBsaXN0ZW5lciwgYW55IG51bWJlciBvZlxuICogbGlzdGVuKCkgYW5kIHVubGlzdGVuKCkgY2FsbHMgY2FuIGJlIG1hZGUgdG8gY29udHJvbCB3aGF0IGNoYW5nZXMgd2lsbCBiZVxuICogc2VudCBmcm9tIHRoZSBzZXJ2ZXIgZm9yIExpc3RlblJlc3BvbnNlcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUGVyc2lzdGVudExpc3RlblN0cmVhbSBleHRlbmRzIF9fUFJJVkFURV9QZXJzaXN0ZW50U3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgIHN1cGVyKGUsIFwibGlzdGVuX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBUaW1lcklkLkxpc3RlblN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJsaXN0ZW5fc3RyZWFtX2lkbGVcIiAvKiBUaW1lcklkLkxpc3RlblN0cmVhbUlkbGUgKi8gLCBcImhlYWx0aF9jaGVja190aW1lb3V0XCIgLyogVGltZXJJZC5IZWFsdGhDaGVja1RpbWVvdXQgKi8gLCB0LCBuLCByLCBzKSwgXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGk7XG4gICAgfVxuICAgIHVfKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5NbyhcIkxpc3RlblwiLCBlLCB0KTtcbiAgICB9XG4gICAgb25NZXNzYWdlKGUpIHtcbiAgICAgICAgLy8gQSBzdWNjZXNzZnVsIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeVxuICAgICAgICB0aGlzLkhvLnJlc2V0KCk7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbVdhdGNoQ2hhbmdlKHRoaXMuc2VyaWFsaXplciwgZSksIG4gPSBmdW5jdGlvbiBfX1BSSVZBVEVfdmVyc2lvbkZyb21MaXN0ZW5SZXNwb25zZShlKSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXG4gICAgICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcbiAgICAgICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXG4gICAgICAgICAgICBpZiAoIShcInRhcmdldENoYW5nZVwiIGluIGUpKSByZXR1cm4gU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgICAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAgICAgcmV0dXJuIHQudGFyZ2V0SWRzICYmIHQudGFyZ2V0SWRzLmxlbmd0aCA/IFNuYXBzaG90VmVyc2lvbi5taW4oKSA6IHQucmVhZFRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5yZWFkVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgICAgIH0oZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNfKHQsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIGdpdmVuIHRhcmdldC4gSWYgdGhlIHRhcmdldFxuICAgICAqIGluY2x1ZGVzIGEgcmVzdW1lVG9rZW4gaXQgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVxdWVzdC4gUmVzdWx0cyB0aGF0XG4gICAgICogYWZmZWN0IHRoZSB0YXJnZXQgd2lsbCBiZSBzdHJlYW1lZCBiYWNrIGFzIFdhdGNoQ2hhbmdlIG1lc3NhZ2VzIHRoYXRcbiAgICAgKiByZWZlcmVuY2UgdGhlIHRhcmdldElkLlxuICAgICAqLyAgICBsXyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IF9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZCh0aGlzLnNlcmlhbGl6ZXIpLCB0LmFkZFRhcmdldCA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b1RhcmdldChlLCB0KSB7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LnRhcmdldDtcbiAgICAgICAgICAgIGlmIChuID0gX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQocikgPyB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBfX1BSSVZBVEVfdG9Eb2N1bWVudHNUYXJnZXQoZSwgcilcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IF9fUFJJVkFURV90b1F1ZXJ5VGFyZ2V0KGUsIHIpXG4gICAgICAgICAgICB9LCBuLnRhcmdldElkID0gdC50YXJnZXRJZCwgdC5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgbi5yZXN1bWVUb2tlbiA9IF9fUFJJVkFURV90b0J5dGVzKGUsIHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQuZXhwZWN0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gciAmJiAobi5leHBlY3RlZENvdW50ID0gcik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhTbmFwc2hvdFZlcnNpb24ubWluKCkpID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8od3VhbmR5KTogQ29uc2lkZXIgcmVtb3ZpbmcgYWJvdmUgY2hlY2sgYmVjYXVzZSBpdCBpcyBtb3N0IGxpa2VseSB0cnVlLlxuICAgICAgICAgICAgICAgIC8vIFJpZ2h0IG5vdywgbWFueSB0ZXN0cyBkZXBlbmQgb24gdGhpcyBiZWhhdmlvdXIgdGhvdWdoIChsZWF2aW5nIG1pbigpIG91dFxuICAgICAgICAgICAgICAgIC8vIG9mIHNlcmlhbGl6YXRpb24pLlxuICAgICAgICAgICAgICAgIG4ucmVhZFRpbWUgPSB0b1RpbWVzdGFtcChlLCB0LnNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3RvSW50MzJQcm90byhlLCB0LmV4cGVjdGVkQ291bnQpO1xuICAgICAgICAgICAgICAgIG51bGwgIT09IHIgJiYgKG4uZXhwZWN0ZWRDb3VudCA9IHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV90b0xpc3RlblJlcXVlc3RMYWJlbHModGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgbiAmJiAodC5sYWJlbHMgPSBuKSwgdGhpcy5uXyh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5yZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGggdGhlXG4gICAgICogZ2l2ZW4gdGFyZ2V0SWQuXG4gICAgICovICAgIGhfKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgICB0LmRhdGFiYXNlID0gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKHRoaXMuc2VyaWFsaXplciksIHQucmVtb3ZlVGFyZ2V0ID0gZSwgXG4gICAgICAgIHRoaXMubl8odCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgU3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgV3JpdGUgUlBDLlxuICpcbiAqIFRoZSBXcml0ZSBSUEMgcmVxdWlyZXMgdGhlIGNhbGxlciB0byBtYWludGFpbiBzcGVjaWFsIHN0cmVhbVRva2VuXG4gKiBzdGF0ZSBpbiBiZXR3ZWVuIGNhbGxzLCB0byBoZWxwIHRoZSBzZXJ2ZXIgdW5kZXJzdGFuZCB3aGljaCByZXNwb25zZXMgdGhlXG4gKiBjbGllbnQgaGFzIHByb2Nlc3NlZCBieSB0aGUgdGltZSB0aGUgbmV4dCByZXF1ZXN0IGlzIG1hZGUuIEV2ZXJ5IHJlc3BvbnNlXG4gKiB3aWxsIGNvbnRhaW4gYSBzdHJlYW1Ub2tlbjsgdGhpcyB2YWx1ZSBtdXN0IGJlIHBhc3NlZCB0byB0aGUgbmV4dFxuICogcmVxdWVzdC5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIHN0YXJ0KCkgb24gdGhpcyBzdHJlYW0sIHRoZSBuZXh0IHJlcXVlc3QgbXVzdCBiZSBhIGhhbmRzaGFrZSxcbiAqIGNvbnRhaW5pbmcgd2hhdGV2ZXIgc3RyZWFtVG9rZW4gaXMgb24gaGFuZC4gT25jZSBhIHJlc3BvbnNlIHRvIHRoaXNcbiAqIHJlcXVlc3QgaXMgcmVjZWl2ZWQsIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBtYXkgYmUgc3VibWl0dGVkLiBXaGVuXG4gKiBzdWJtaXR0aW5nIG11bHRpcGxlIGJhdGNoZXMgb2YgbXV0YXRpb25zIGF0IHRoZSBzYW1lIHRpbWUsIGl0J3NcbiAqIG9rYXkgdG8gdXNlIHRoZSBzYW1lIHN0cmVhbVRva2VuIGZvciB0aGUgY2FsbHMgdG8gd3JpdGVNdXRhdGlvbnMuXG4gKlxuICogVE9ETyhiLzMzMjcxMjM1KTogVXNlIHByb3RvIHR5cGVzXG4gKi8gY2xhc3MgX19QUklWQVRFX1BlcnNpc3RlbnRXcml0ZVN0cmVhbSBleHRlbmRzIF9fUFJJVkFURV9QZXJzaXN0ZW50U3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgIHN1cGVyKGUsIFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFRpbWVySWQuV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwid3JpdGVfc3RyZWFtX2lkbGVcIiAvKiBUaW1lcklkLldyaXRlU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBUaW1lcklkLkhlYWx0aENoZWNrVGltZW91dCAqLyAsIHQsIG4sIHIsIHMpLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gaSwgdGhpcy5QXyA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hldGhlciBvciBub3QgYSBoYW5kc2hha2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGV4Y2hhbmdlZCBhbmRcbiAgICAgKiB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCBtdXRhdGlvbnMuXG4gICAgICovICAgIGdldCBJXygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUF87XG4gICAgfVxuICAgIC8vIE92ZXJyaWRlIG9mIFBlcnNpc3RlbnRTdHJlYW0uc3RhcnRcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5QXyA9ICExLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHZvaWQgMCwgc3VwZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgc18oKSB7XG4gICAgICAgIHRoaXMuUF8gJiYgdGhpcy5kXyhbXSk7XG4gICAgfVxuICAgIHVfKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5NbyhcIldyaXRlXCIsIGUsIHQpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoZSkge1xuICAgICAgICBpZiAoXG4gICAgICAgIC8vIEFsd2F5cyBjYXB0dXJlIHRoZSBsYXN0IHN0cmVhbSB0b2tlbi5cbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoISFlLnN0cmVhbVRva2VuKSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBlLnN0cmVhbVRva2VuLCB0aGlzLlBfKSB7XG4gICAgICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgZmlyc3Qgd3JpdGUgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5LFxuICAgICAgICAgICAgLy8gTm90ZSwgdGhhdCB3ZSBjb3VsZCBjb25zaWRlciBhIHN1Y2Nlc3NmdWwgaGFuZHNoYWtlIGhlYWx0aHksIGhvd2V2ZXIsXG4gICAgICAgICAgICAvLyB0aGUgd3JpdGUgaXRzZWxmIG1pZ2h0IGJlIGNhdXNpbmcgYW4gZXJyb3Igd2Ugd2FudCB0byBiYWNrIG9mZiBmcm9tLlxuICAgICAgICAgICAgdGhpcy5Iby5yZXNldCgpO1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHRzKGUud3JpdGVSZXN1bHRzLCBlLmNvbW1pdFRpbWUpLCBuID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKGUuY29tbWl0VGltZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5UXyhuLCB0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCFlLndyaXRlUmVzdWx0cyB8fCAwID09PSBlLndyaXRlUmVzdWx0cy5sZW5ndGgpLCB0aGlzLlBfID0gITAsIFxuICAgICAgICB0aGlzLmxpc3RlbmVyLkVfKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGFuIGluaXRpYWwgc3RyZWFtVG9rZW4gdG8gdGhlIHNlcnZlciwgcGVyZm9ybWluZyB0aGUgaGFuZHNoYWtlXG4gICAgICogcmVxdWlyZWQgdG8gbWFrZSB0aGUgU3RyZWFtaW5nV3JpdGUgUlBDIHdvcmsuIFN1YnNlcXVlbnRcbiAgICAgKiBjYWxscyBzaG91bGQgd2FpdCB1bnRpbCBvbkhhbmRzaGFrZUNvbXBsZXRlIHdhcyBjYWxsZWQuXG4gICAgICovICAgIEFfKCkge1xuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IFN1cHBvcnQgc3RyZWFtIHJlc3VtcHRpb24uIFdlIGludGVudGlvbmFsbHkgZG8gbm90IHNldCB0aGVcbiAgICAgICAgLy8gc3RyZWFtIHRva2VuIG9uIHRoZSBoYW5kc2hha2UsIGlnbm9yaW5nIGFueSBzdHJlYW0gdG9rZW4gd2UgbWlnaHQgaGF2ZS5cbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKHRoaXMuc2VyaWFsaXplciksIHRoaXMubl8oZSk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovICAgIGRfKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcbiAgICAgICAgICAgIHdyaXRlczogZS5tYXAoKGUgPT4gdG9NdXRhdGlvbih0aGlzLnNlcmlhbGl6ZXIsIGUpKSlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5uXyh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERhdGFzdG9yZSBhbmQgaXRzIHJlbGF0ZWQgbWV0aG9kcyBhcmUgYSB3cmFwcGVyIGFyb3VuZCB0aGUgZXh0ZXJuYWwgR29vZ2xlXG4gKiBDbG91ZCBEYXRhc3RvcmUgZ3JwYyBBUEksIHdoaWNoIHByb3ZpZGVzIGFuIGludGVyZmFjZSB0aGF0IGlzIG1vcmUgY29udmVuaWVudFxuICogZm9yIHRoZSByZXN0IG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZSB0byBjb25zdW1lLlxuICovXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIERhdGFzdG9yZSB0aGF0IGV4cG9zZXMgYWRkaXRpb25hbCBzdGF0ZSBmb3IgaW50ZXJuYWxcbiAqIGNvbnN1bXB0aW9uLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfRGF0YXN0b3JlSW1wbCBleHRlbmRzIGNsYXNzIERhdGFzdG9yZSB7fSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmF1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IHQsIHRoaXMuY29ubmVjdGlvbiA9IG4sIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSByLCB0aGlzLlJfID0gITE7XG4gICAgfVxuICAgIFZfKCkge1xuICAgICAgICBpZiAodGhpcy5SXykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIGJvKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVl8oKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3IsIGldKSA9PiB0aGlzLmNvbm5lY3Rpb24uYm8oZSwgdCwgbiwgciwgaSkpKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gZS5uYW1lID8gKGUuY29kZSA9PT0gRC5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIGUpIDogbmV3IEZpcmVzdG9yZUVycm9yKEQuVU5LTk9XTiwgZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKiogSW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDIHdpdGggc3RyZWFtZWQgcmVzdWx0cyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgRm8oZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5WXygpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbaSwgc10pID0+IHRoaXMuY29ubmVjdGlvbi5GbyhlLCB0LCBuLCBpLCBzLCByKSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSBlLm5hbWUgPyAoZS5jb2RlID09PSBELlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgZSkgOiBuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTktOT1dOLCBlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5SXyA9ICEwO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbnZva2VSdW5BZ2dyZWdhdGlvblF1ZXJ5UnBjKGUsIHQsIG4pIHtcbiAgICB2YXIgcjtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwge3JlcXVlc3Q6IHMsIG1fOiBvfSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b1J1bkFnZ3JlZ2F0aW9uUXVlcnlSZXF1ZXN0KGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV90b1F1ZXJ5VGFyZ2V0KGUsIHQpLCBpID0ge30sIHMgPSBbXTtcbiAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIC8vIE1hcCBhbGwgY2xpZW50LXNpZGUgYWxpYXNlcyB0byBhIHVuaXF1ZSBzaG9ydC1mb3JtXG4gICAgICAgICAgICAvLyBhbGlhcy4gVGhpcyBhdm9pZHMgaXNzdWVzIHdpdGggY2xpZW50LXNpZGUgYWxpYXNlcyB0aGF0XG4gICAgICAgICAgICAvLyBleGNlZWQgdGhlIDE1MDAtYnl0ZSBzdHJpbmcgc2l6ZSBsaW1pdC5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBcImFnZ3JlZ2F0ZV9cIiArIG8rKztcbiAgICAgICAgICAgIGlbdF0gPSBlLmFsaWFzLCBcImNvdW50XCIgPT09IGUuRWUgPyBzLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiB0LFxuICAgICAgICAgICAgICAgIGNvdW50OiB7fVxuICAgICAgICAgICAgfSkgOiBcImF2Z1wiID09PSBlLkVlID8gcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgICAgICBhdmc6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkUGF0aClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSA6IFwic3VtXCIgPT09IGUuRWUgJiYgcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgICAgICBzdW06IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkUGF0aClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICByZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgc3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRpb25zOiBzLFxuICAgICAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHIuc3RydWN0dXJlZFF1ZXJ5XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IHIucGFyZW50XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbV86IGlcbiAgICAgICAgfTtcbiAgICB9KGkuc2VyaWFsaXplciwgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5VG9BZ2dyZWdhdGVUYXJnZXQoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgcmV0dXJuIHQuZGUgfHwgKFxuICAgICAgICAvLyBEbyBub3QgaW5jbHVkZSBpbXBsaWNpdCBvcmRlci1ieXMgZm9yIGFnZ3JlZ2F0ZSBxdWVyaWVzLlxuICAgICAgICB0LmRlID0gX19QUklWQVRFX19xdWVyeVRvVGFyZ2V0KHQsIGUuZXhwbGljaXRPcmRlckJ5KSksIHQuZGU7XG4gICAgfSh0KSwgbiksIF8gPSBzLnBhcmVudDtcbiAgICBpLmNvbm5lY3Rpb24uU28gfHwgZGVsZXRlIHMucGFyZW50O1xuICAgIGNvbnN0IGEgPSAoYXdhaXQgaS5GbyhcIlJ1bkFnZ3JlZ2F0aW9uUXVlcnlcIiwgXywgcywgLypleHBlY3RlZFJlc3BvbnNlQ291bnQ9Ki8gMSkpLmZpbHRlcigoZSA9PiAhIWUucmVzdWx0KSk7XG4gICAgLy8gT21pdCBSdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2UgdGhhdCBvbmx5IGNvbnRhaW4gcmVhZFRpbWVzLlxuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgxID09PSBhLmxlbmd0aCk7XG4gICAgLy8gUmVtYXAgdGhlIHNob3J0LWZvcm0gYWxpYXNlcyB0aGF0IHdlcmUgc2VudCB0byB0aGUgc2VydmVyXG4gICAgLy8gdG8gdGhlIGNsaWVudC1zaWRlIGFsaWFzZXMuIFVzZXJzIHdpbGwgYWNjZXNzIHRoZSByZXN1bHRzXG4gICAgLy8gdXNpbmcgdGhlIGNsaWVudC1zaWRlIGFsaWFzLlxuICAgIGNvbnN0IHUgPSBudWxsID09PSAociA9IGFbMF0ucmVzdWx0KSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLmFnZ3JlZ2F0ZUZpZWxkcztcbiAgICByZXR1cm4gT2JqZWN0LmtleXModSkucmVkdWNlKCgoZSwgdCkgPT4gKGVbb1t0XV0gPSB1W3RdLCBlKSksIHt9KTtcbn1cblxuLyoqXG4gKiBBIGNvbXBvbmVudCB1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0byB0cmFjayB0aGUgT25saW5lU3RhdGUgKHRoYXQgaXMsXG4gKiB3aGV0aGVyIG9yIG5vdCB0aGUgY2xpZW50IGFzIGEgd2hvbGUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdG8gYmUgb25saW5lIG9yXG4gKiBvZmZsaW5lKSwgaW1wbGVtZW50aW5nIHRoZSBhcHByb3ByaWF0ZSBoZXVyaXN0aWNzLlxuICpcbiAqIEluIHBhcnRpY3VsYXIsIHdoZW4gdGhlIGNsaWVudCBpcyB0cnlpbmcgdG8gY29ubmVjdCB0byB0aGUgYmFja2VuZCwgd2VcbiAqIGFsbG93IHVwIHRvIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgd2l0aGluIE9OTElORV9TVEFURV9USU1FT1VUX01TIGZvclxuICogYSBjb25uZWN0aW9uIHRvIHN1Y2NlZWQuIElmIHdlIGhhdmUgdG9vIG1hbnkgZmFpbHVyZXMgb3IgdGhlIHRpbWVvdXQgZWxhcHNlcyxcbiAqIHRoZW4gd2Ugc2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lLCBhbmQgdGhlIGNsaWVudCB3aWxsIGJlaGF2ZSBhcyBpZlxuICogaXQgaXMgb2ZmbGluZSAoZ2V0KClzIHdpbGwgcmV0dXJuIGNhY2hlZCBkYXRhLCBldGMuKS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX09ubGluZVN0YXRlVHJhY2tlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IHQsIFxuICAgICAgICAvKiogVGhlIGN1cnJlbnQgT25saW5lU3RhdGUuICovXG4gICAgICAgIHRoaXMuc3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvdW50IG9mIGNvbnNlY3V0aXZlIGZhaWx1cmVzIHRvIG9wZW4gdGhlIHN0cmVhbS4gSWYgaXQgcmVhY2hlcyB0aGVcbiAgICAgICAgICogbWF4aW11bSBkZWZpbmVkIGJ5IE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMsIHdlJ2xsIHNldCB0aGUgT25saW5lU3RhdGUgdG9cbiAgICAgICAgICogT2ZmbGluZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZl8gPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGltZXIgdGhhdCBlbGFwc2VzIGFmdGVyIE9OTElORV9TVEFURV9USU1FT1VUX01TLCBhdCB3aGljaCBwb2ludCB3ZVxuICAgICAgICAgKiB0cmFuc2l0aW9uIGZyb20gT25saW5lU3RhdGUuVW5rbm93biB0byBPbmxpbmVTdGF0ZS5PZmZsaW5lIHdpdGhvdXQgd2FpdGluZ1xuICAgICAgICAgKiBmb3IgdGhlIHN0cmVhbSB0byBhY3R1YWxseSBmYWlsIChNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHRpbWVzKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ18gPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgbG9nIGEgd2FybmluZyBtZXNzYWdlIGlmIGl0IGZhaWxzIHRvIGNvbm5lY3QgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQgKGluaXRpYWxseSB0cnVlLCBjbGVhcmVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBzdHJlYW0sIG9yIGlmIHdlJ3ZlXG4gICAgICAgICAqIGxvZ2dlZCB0aGUgbWVzc2FnZSBhbHJlYWR5KS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucF8gPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IFJlbW90ZVN0b3JlIHdoZW4gYSB3YXRjaCBzdHJlYW0gaXMgc3RhcnRlZCAoaW5jbHVkaW5nIG9uIGVhY2hcbiAgICAgKiBiYWNrb2ZmIGF0dGVtcHQpLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgYXR0ZW1wdCwgaXQgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biBhbmQgc3RhcnRzXG4gICAgICogdGhlIG9ubGluZVN0YXRlVGltZXIuXG4gICAgICovICAgIHlfKCkge1xuICAgICAgICAwID09PSB0aGlzLmZfICYmICh0aGlzLndfKFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCB0aGlzLmdfID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwib25saW5lX3N0YXRlX3RpbWVvdXRcIiAvKiBUaW1lcklkLk9ubGluZVN0YXRlVGltZW91dCAqLyAsIDFlNCwgKCgpID0+ICh0aGlzLmdfID0gbnVsbCwgXG4gICAgICAgIHRoaXMuU18oXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiAxMCBzZWNvbmRzLlwiKSwgdGhpcy53XyhcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXG4gICAgICovICAgIGJfKGUpIHtcbiAgICAgICAgXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8gPT09IHRoaXMuc3RhdGUgPyB0aGlzLndfKFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pIDogKHRoaXMuZl8rKywgXG4gICAgICAgIHRoaXMuZl8gPj0gMSAmJiAodGhpcy5EXygpLCB0aGlzLlNfKGBDb25uZWN0aW9uIGZhaWxlZCAxIHRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogJHtlLnRvU3RyaW5nKCl9YCksIFxuICAgICAgICB0aGlzLndfKFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXG4gICAgICovICAgIHNldChlKSB7XG4gICAgICAgIHRoaXMuRF8oKSwgdGhpcy5mXyA9IDAsIFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovID09PSBlICYmIChcbiAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxuICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXG4gICAgICAgIHRoaXMucF8gPSAhMSksIHRoaXMud18oZSk7XG4gICAgfVxuICAgIHdfKGUpIHtcbiAgICAgICAgZSAhPT0gdGhpcy5zdGF0ZSAmJiAodGhpcy5zdGF0ZSA9IGUsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKGUpKTtcbiAgICB9XG4gICAgU18oZSkge1xuICAgICAgICBjb25zdCB0ID0gYENvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gJHtlfVxcblRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IEludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuYDtcbiAgICAgICAgdGhpcy5wXyA/IChfX1BSSVZBVEVfbG9nRXJyb3IodCksIHRoaXMucF8gPSAhMSkgOiBfX1BSSVZBVEVfbG9nRGVidWcoXCJPbmxpbmVTdGF0ZVRyYWNrZXJcIiwgdCk7XG4gICAgfVxuICAgIERfKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmdfICYmICh0aGlzLmdfLmNhbmNlbCgpLCB0aGlzLmdfID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUmVtb3RlU3RvcmVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cbiAgICB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IGUsIHRoaXMuZGF0YXN0b3JlID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5yZW1vdGVTeW5jZXIgPSB7fSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcbiAgICAgICAgICogc3RyZWFtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQ18gPSBbXSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZfID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiByZWFzb25zIGZvciB3aHkgdGhlIFJlbW90ZVN0b3JlIG1heSBiZSBvZmZsaW5lLiBJZiBlbXB0eSwgdGhlXG4gICAgICAgICAqIFJlbW90ZVN0b3JlIG1heSBzdGFydCBpdHMgbmV0d29yayBjb25uZWN0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRl8gPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXJzIHRoYXQgZ2V0IGNhbGxlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIG9yIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIG9uIHRoZSBXZWIgY2xpZW50IHRvIGNyZWF0ZSB0aGVcbiAgICAgICAgICogdW5kZXJseWluZyBzdHJlYW1zICh0byBzdXBwb3J0IHRyZWUtc2hha2VhYmxlIHN0cmVhbXMpLiBPbiBBbmRyb2lkIGFuZCBpT1MsXG4gICAgICAgICAqIHRoZSBzdHJlYW1zIGFyZSBjcmVhdGVkIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk1fID0gW10sIHRoaXMueF8gPSBpLCB0aGlzLnhfLnNvKChlID0+IHtcbiAgICAgICAgICAgIG4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFBvcnRpbmcgTm90ZTogVW5saWtlIGlPUywgYHJlc3RhcnROZXR3b3JrKClgIGlzIGNhbGxlZCBldmVuIHdoZW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayBiZWNvbWVzIHVucmVhY2hhYmxlIGFzIHdlIGRvbid0IGhhdmUgYW55IG90aGVyIHdheSB0byB0ZWFyXG4gICAgICAgICAgICAgICAgLy8gZG93biBvdXIgc3RyZWFtcy5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayh0aGlzKSAmJiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXN0YXJ0aW5nIHN0cmVhbXMgZm9yIG5ldHdvcmsgcmVhY2hhYmlsaXR5IGNoYW5nZS5cIiksIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZXN0YXJ0TmV0d29yayhlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB0LkZfLmFkZCg0IC8qIE9mZmxpbmVDYXVzZS5Db25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCh0KSwgXG4gICAgICAgICAgICAgICAgICAgIHQuT18uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCB0LkZfLmRlbGV0ZSg0IC8qIE9mZmxpbmVDYXVzZS5Db25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbCh0KTtcbiAgICAgICAgICAgICAgICB9KHRoaXMpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCB0aGlzLk9fID0gbmV3IF9fUFJJVkFURV9PbmxpbmVTdGF0ZVRyYWNrZXIobiwgcik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKGUpIHtcbiAgICBpZiAoX19QUklWQVRFX2NhblVzZU5ldHdvcmsoZSkpIGZvciAoY29uc3QgdCBvZiBlLk1fKSBhd2FpdCB0KC8qIGVuYWJsZWQ9ICovICEwKTtcbn1cblxuLyoqXG4gKiBUZW1wb3JhcmlseSBkaXNhYmxlcyB0aGUgbmV0d29yay4gVGhlIG5ldHdvcmsgY2FuIGJlIHJlLWVuYWJsZWQgdXNpbmdcbiAqIGVuYWJsZU5ldHdvcmsoKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbChlKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIGUuTV8pIGF3YWl0IHQoLyogZW5hYmxlZD0gKi8gITEpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBuZXcgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0LiBVc2VzIHJlc3VtZSB0b2tlbiBpZiBwcm92aWRlZC4gSXRcbiAqIGlzIGEgbm8tb3AgaWYgdGhlIHRhcmdldCBvZiBnaXZlbiBgVGFyZ2V0RGF0YWAgaXMgYWxyZWFkeSBiZWluZyBsaXN0ZW5lZCB0by5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBuLnZfLmhhcyh0LnRhcmdldElkKSB8fCAoXG4gICAgLy8gTWFyayB0aGlzIGFzIHNvbWV0aGluZyB0aGUgY2xpZW50IGlzIGN1cnJlbnRseSBsaXN0ZW5pbmcgZm9yLlxuICAgIG4udl8uc2V0KHQudGFyZ2V0SWQsIHQpLCBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShuKSA/IFxuICAgIC8vIFRoZSBsaXN0ZW4gd2lsbCBiZSBzZW50IGluIG9uV2F0Y2hTdHJlYW1PcGVuXG4gICAgX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0obikgOiBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0obikuWW8oKSAmJiBfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdChuLCB0KSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgbGlzdGVuIGZyb20gc2VydmVyLiBJdCBpcyBhIG5vLW9wIGlmIHRoZSBnaXZlbiB0YXJnZXQgaWQgaXNcbiAqIG5vdCBiZWluZyBsaXN0ZW5lZCB0by5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0obik7XG4gICAgbi52Xy5kZWxldGUodCksIHIuWW8oKSAmJiBfX1BSSVZBVEVfc2VuZFVud2F0Y2hSZXF1ZXN0KG4sIHQpLCAwID09PSBuLnZfLnNpemUgJiYgKHIuWW8oKSA/IHIuZV8oKSA6IF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKG4pICYmIFxuICAgIC8vIFJldmVydCB0byBPbmxpbmVTdGF0ZS5Vbmtub3duIGlmIHRoZSB3YXRjaCBzdHJlYW0gaXMgbm90IG9wZW4gYW5kIHdlXG4gICAgLy8gaGF2ZSBubyBsaXN0ZW5lcnMsIHNpbmNlIHdpdGhvdXQgYW55IGxpc3RlbnMgdG8gc2VuZCB3ZSBjYW5ub3RcbiAgICAvLyBjb25maXJtIGlmIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSBhbmQgdXBncmFkZSB0byBPbmxpbmVTdGF0ZS5PbmxpbmUuXG4gICAgbi5PXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgYWNrIHRvIHByb2Nlc3MgYW55IG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NlbmRXYXRjaFJlcXVlc3QoZSwgdCkge1xuICAgIGlmIChlLk5fLkxlKHQudGFyZ2V0SWQpLCB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgfHwgdC5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPiAwKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQudGFyZ2V0SWQpLnNpemU7XG4gICAgICAgIHQgPSB0LndpdGhFeHBlY3RlZENvdW50KG4pO1xuICAgIH1cbiAgICBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkubF8odCk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIHJlbW92YWwgb24gdGhlIHNlcnZlciBiZWZvcmUgd2UgcHJvY2VzcyBhbnlcbiAqIG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdChlLCB0KSB7XG4gICAgZS5OXy5MZSh0KSwgX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpLmhfKHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbShlKSB7XG4gICAgZS5OXyA9IG5ldyBfX1BSSVZBVEVfV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yKHtcbiAgICAgICAgZ2V0UmVtb3RlS2V5c0ZvclRhcmdldDogdCA9PiBlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLFxuICAgICAgICBsdDogdCA9PiBlLnZfLmdldCh0KSB8fCBudWxsLFxuICAgICAgICBzdDogKCkgPT4gZS5kYXRhc3RvcmUuc2VyaWFsaXplci5kYXRhYmFzZUlkXG4gICAgfSksIF9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShlKS5zdGFydCgpLCBlLk9fLnlfKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpICYmICFfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkuSm8oKSAmJiBlLnZfLnNpemUgPiAwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIDAgPT09IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkuRl8uc2l6ZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlKGUpIHtcbiAgICBlLk5fID0gdm9pZCAwO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbU9wZW4oZSkge1xuICAgIGUudl8uZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgX19QUklWQVRFX3NlbmRXYXRjaFJlcXVlc3QoZSwgdCk7XG4gICAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNsb3NlKGUsIHQpIHtcbiAgICBfX1BSSVZBVEVfY2xlYW5VcFdhdGNoU3RyZWFtU3RhdGUoZSksIFxuICAgIC8vIElmIHdlIHN0aWxsIG5lZWQgdGhlIHdhdGNoIHN0cmVhbSwgcmV0cnkgdGhlIGNvbm5lY3Rpb24uXG4gICAgX19QUklWQVRFX3Nob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oZSkgPyAoZS5PXy5iXyh0KSwgX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0oZSkpIDogXG4gICAgLy8gTm8gbmVlZCB0byByZXN0YXJ0IHdhdGNoIHN0cmVhbSBiZWNhdXNlIHRoZXJlIGFyZSBubyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAvLyBUaGUgb25saW5lIHN0YXRlIGlzIHNldCB0byB1bmtub3duIGJlY2F1c2UgdGhlcmUgaXMgbm8gYWN0aXZlIGF0dGVtcHRcbiAgICAvLyBhdCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uXG4gICAgZS5PXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICBpZiAoXG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBtZXNzYWdlIGZyb20gdGhlIHNlcnZlclxuICAgIGUuT18uc2V0KFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovKSwgdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9XYXRjaFRhcmdldENoYW5nZSAmJiAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA9PT0gdC5zdGF0ZSAmJiB0LmNhdXNlKSBcbiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igb24gYSB0YXJnZXQsIGRvbid0IHdhaXQgZm9yIGEgY29uc2lzdGVudCBzbmFwc2hvdFxuICAgIC8vIHRvIHJhaXNlIGV2ZW50c1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKiogSGFuZGxlcyBhbiBlcnJvciBvbiBhIHRhcmdldCAqL1xuICAgICAgICBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaGFuZGxlVGFyZ2V0RXJyb3IoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuY2F1c2U7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgdC50YXJnZXRJZHMpIFxuICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgZS52Xy5oYXMocikgJiYgKGF3YWl0IGUucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbihyLCBuKSwgZS52Xy5kZWxldGUociksIGUuTl8ucmVtb3ZlVGFyZ2V0KHIpKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEF0dGVtcHRzIHRvIGZpbGwgb3VyIHdyaXRlIHBpcGVsaW5lIHdpdGggd3JpdGVzIGZyb20gdGhlIExvY2FsU3RvcmUuXG4gKlxuICogQ2FsbGVkIGludGVybmFsbHkgdG8gYm9vdHN0cmFwIG9yIHJlZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgYW5kIGJ5XG4gKiBTeW5jRW5naW5lIHdoZW5ldmVyIHRoZXJlIGFyZSBuZXcgbXV0YXRpb25zIHRvIHByb2Nlc3MuXG4gKlxuICogU3RhcnRzIHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICovIChlLCB0KTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJlbW92ZSB0YXJnZXRzICVzOiAlcyBcIiwgdC50YXJnZXRJZHMuam9pbihcIixcIiksIG4pLCBcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeShlLCBuKTtcbiAgICB9IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZSA/IGUuTl8uR2UodCkgOiB0IGluc3RhbmNlb2YgX19QUklWQVRFX0V4aXN0ZW5jZUZpbHRlckNoYW5nZSA/IGUuTl8uWGUodCkgOiBlLk5fLkhlKHQpLCBcbiAgICAhbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkpIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZS5sb2NhbFN0b3JlKTtcbiAgICAgICAgbi5jb21wYXJlVG8odCkgPj0gMCAmJiBcbiAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcbiAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqXG4gKiBUYWtlcyBhIGJhdGNoIG9mIGNoYW5nZXMgZnJvbSB0aGUgRGF0YXN0b3JlLCByZXBhY2thZ2VzIHRoZW0gYXMgYVxuICogUmVtb3RlRXZlbnQsIGFuZCBwYXNzZXMgdGhhdCBvbiB0byB0aGUgbGlzdGVuZXIsIHdoaWNoIGlzIHR5cGljYWxseSB0aGVcbiAqIFN5bmNFbmdpbmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3JhaXNlV2F0Y2hTbmFwc2hvdChlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5OXy5fdCh0KTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBpbi1tZW1vcnkgcmVzdW1lIHRva2Vucy4gTG9jYWxTdG9yZSB3aWxsIHVwZGF0ZSB0aGVcbiAgICAgICAgICAgIC8vIHBlcnNpc3RlbnQgdmlldyBvZiB0aGVzZSB3aGVuIGFwcGx5aW5nIHRoZSBjb21wbGV0ZWQgUmVtb3RlRXZlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gZS52Xy5nZXQocik7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIGUudl8uc2V0KHIsIGkud2l0aFJlc3VtZVRva2VuKG4ucmVzdW1lVG9rZW4sIHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSksIFxuICAgICAgICAgICAgLy8gUmUtZXN0YWJsaXNoIGxpc3RlbnMgZm9yIHRoZSB0YXJnZXRzIHRoYXQgaGF2ZSBiZWVuIGludmFsaWRhdGVkIGJ5XG4gICAgICAgICAgICAvLyBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICBuLnRhcmdldE1pc21hdGNoZXMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gZS52Xy5nZXQodCk7XG4gICAgICAgICAgICAgICAgaWYgKCFyKSBcbiAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSByZXN1bWUgdG9rZW4gZm9yIHRoZSB0YXJnZXQsIHNpbmNlIHdlJ3JlIGluIGEga25vd24gbWlzbWF0Y2hcbiAgICAgICAgICAgICAgICAvLyBzdGF0ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS52Xy5zZXQodCwgci53aXRoUmVzdW1lVG9rZW4oQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORywgci5zbmFwc2hvdFZlcnNpb24pKSwgXG4gICAgICAgICAgICAgICAgLy8gQ2F1c2UgYSBoYXJkIHJlc2V0IGJ5IHVud2F0Y2hpbmcgYW5kIHJld2F0Y2hpbmcgaW1tZWRpYXRlbHksIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGRlbGliZXJhdGVseSBkb24ndCBzZW5kIGEgcmVzdW1lIHRva2VuIHNvIHRoYXQgd2UgZ2V0IGEgZnVsbCB1cGRhdGUuXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdChlLCB0KTtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSB0YXJnZXQgd2Ugc2VuZCBhcyBiZWluZyBvbiBiZWhhbGYgb2YgYW4gZXhpc3RlbmNlIGZpbHRlclxuICAgICAgICAgICAgICAgIC8vIG1pc21hdGNoLCBidXQgZG9uJ3QgYWN0dWFsbHkgcmV0YWluIHRoYXQgaW4gbGlzdGVuVGFyZ2V0cy4gVGhpcyBlbnN1cmVzXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBmbGFnIHRoZSBmaXJzdCByZS1saXN0ZW4gdGhpcyB3YXkgd2l0aG91dCBpbXBhY3RpbmcgZnV0dXJlXG4gICAgICAgICAgICAgICAgLy8gbGlzdGVucyBvZiB0aGlzIHRhcmdldCAodGhhdCBtaWdodCBoYXBwZW4gZS5nLiBvbiByZWNvbm5lY3QpLlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgVGFyZ2V0RGF0YShyLnRhcmdldCwgdCwgbiwgci5zZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX3NlbmRXYXRjaFJlcXVlc3QoZSwgaSk7XG4gICAgICAgICAgICB9KSksIGUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQobik7XG4gICAgICAgIH0oZSwgbik7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJSZW1vdGVTdG9yZVwiLCBcIkZhaWxlZCB0byByYWlzZSBzbmFwc2hvdDpcIiwgdCksIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya1VudGlsUmVjb3ZlcnkoZSwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY292ZXJ5IGxvZ2ljIGZvciBJbmRleGVkREIgZXJyb3JzIHRoYXQgdGFrZXMgdGhlIG5ldHdvcmsgb2ZmbGluZSB1bnRpbFxuICogYG9wYCBzdWNjZWVkcy4gUmV0cmllcyBhcmUgc2NoZWR1bGVkIHdpdGggYmFja29mZiB1c2luZ1xuICogYGVucXVldWVSZXRyeWFibGUoKWAuIElmIGBvcCgpYCBpcyBub3QgcHJvdmlkZWQsIEluZGV4ZWREQiBhY2Nlc3MgaXNcbiAqIHZhbGlkYXRlZCB2aWEgYSBnZW5lcmljIG9wZXJhdGlvbi5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBiZWZvcmVcbiAqIGFueSByZXRyeSBhdHRlbXB0LlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya1VudGlsUmVjb3ZlcnkoZSwgdCwgbikge1xuICAgIGlmICghX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcih0KSkgdGhyb3cgdDtcbiAgICBlLkZfLmFkZCgxIC8qIE9mZmxpbmVDYXVzZS5JbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAvLyBEaXNhYmxlIG5ldHdvcmsgYW5kIHJhaXNlIG9mZmxpbmUgc25hcHNob3RzXG4gICAgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwoZSksIGUuT18uc2V0KFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pLCBcbiAgICBuIHx8IChcbiAgICAvLyBVc2UgYSBzaW1wbGUgcmVhZCBvcGVyYXRpb24gdG8gZGV0ZXJtaW5lIGlmIEluZGV4ZWREQiByZWNvdmVyZWQuXG4gICAgLy8gSWRlYWxseSwgd2Ugd291bGQgZXhwb3NlIGEgaGVhbHRoIGNoZWNrIGRpcmVjdGx5IG9uIFNpbXBsZURiLCBidXRcbiAgICAvLyBSZW1vdGVTdG9yZSBvbmx5IGhhcyBhY2Nlc3MgdG8gcGVyc2lzdGVuY2UgdGhyb3VnaCBMb2NhbFN0b3JlLlxuICAgIG4gPSAoKSA9PiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZS5sb2NhbFN0b3JlKSksIFxuICAgIC8vIFByb2JlIEluZGV4ZWREQiBwZXJpb2RpY2FsbHkgYW5kIHJlLWVuYWJsZSBuZXR3b3JrXG4gICAgZS5hc3luY1F1ZXVlLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXRyeWluZyBJbmRleGVkREIgYWNjZXNzXCIpLCBhd2FpdCBuKCksIGUuRl8uZGVsZXRlKDEgLyogT2ZmbGluZUNhdXNlLkluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKGUpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBgb3BgLiBJZiBgb3BgIGZhaWxzLCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsIGBvcGBcbiAqIHN1Y2NlZWRzLiBSZXR1cm5zIGFmdGVyIHRoZSBmaXJzdCBhdHRlbXB0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9leGVjdXRlV2l0aFJlY292ZXJ5KGUsIHQpIHtcbiAgICByZXR1cm4gdCgpLmNhdGNoKChuID0+IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya1VudGlsUmVjb3ZlcnkoZSwgbiwgdCkpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgbiA9IF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbSh0KTtcbiAgICBsZXQgciA9IHQuQ18ubGVuZ3RoID4gMCA/IHQuQ19bdC5DXy5sZW5ndGggLSAxXS5iYXRjaElkIDogLTE7XG4gICAgZm9yICg7X19QUklWQVRFX2NhbkFkZFRvV3JpdGVQaXBlbGluZSh0KTsgKSB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXROZXh0TXV0YXRpb25CYXRjaCh0LmxvY2FsU3RvcmUsIHIpO1xuICAgICAgICBpZiAobnVsbCA9PT0gZSkge1xuICAgICAgICAgICAgMCA9PT0gdC5DXy5sZW5ndGggJiYgbi5lXygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgciA9IGUuYmF0Y2hJZCwgX19QUklWQVRFX2FkZFRvV3JpdGVQaXBlbGluZSh0LCBlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya1VudGlsUmVjb3ZlcnkodCwgZSk7XG4gICAgfVxuICAgIF9fUFJJVkFURV9zaG91bGRTdGFydFdyaXRlU3RyZWFtKHQpICYmIF9fUFJJVkFURV9zdGFydFdyaXRlU3RyZWFtKHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjYW4gYWRkIHRvIHRoZSB3cml0ZSBwaXBlbGluZSAoaS5lLiB0aGUgbmV0d29yayBpc1xuICogZW5hYmxlZCBhbmQgdGhlIHdyaXRlIHBpcGVsaW5lIGlzIG5vdCBmdWxsKS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY2FuQWRkVG9Xcml0ZVBpcGVsaW5lKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2NhblVzZU5ldHdvcmsoZSkgJiYgZS5DXy5sZW5ndGggPCAxMDtcbn1cblxuLyoqXG4gKiBRdWV1ZXMgYWRkaXRpb25hbCB3cml0ZXMgdG8gYmUgc2VudCB0byB0aGUgd3JpdGUgc3RyZWFtLCBzZW5kaW5nIHRoZW1cbiAqIGltbWVkaWF0ZWx5IGlmIHRoZSB3cml0ZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FkZFRvV3JpdGVQaXBlbGluZShlLCB0KSB7XG4gICAgZS5DXy5wdXNoKHQpO1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSk7XG4gICAgbi5ZbygpICYmIG4uSV8gJiYgbi5kXyh0Lm11dGF0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zaG91bGRTdGFydFdyaXRlU3RyZWFtKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2NhblVzZU5ldHdvcmsoZSkgJiYgIV9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKS5KbygpICYmIGUuQ18ubGVuZ3RoID4gMDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3N0YXJ0V3JpdGVTdHJlYW0oZSkge1xuICAgIF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKS5zdGFydCgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbU9wZW4oZSkge1xuICAgIF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKS5BXygpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25Xcml0ZUhhbmRzaGFrZUNvbXBsZXRlKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpO1xuICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlLkNfKSB0LmRfKG4ubXV0YXRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uTXV0YXRpb25SZXN1bHQoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBlLkNfLnNoaWZ0KCksIGkgPSBNdXRhdGlvbkJhdGNoUmVzdWx0LmZyb20ociwgdCwgbik7XG4gICAgYXdhaXQgX19QUklWQVRFX2V4ZWN1dGVXaXRoUmVjb3ZlcnkoZSwgKCgpID0+IGUucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlKGkpKSksIFxuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb24gYW5vdGhlclxuICAgIC8vIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgIGF3YWl0IF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZShlKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV3JpdGVTdHJlYW1DbG9zZShlLCB0KSB7XG4gICAgLy8gSWYgdGhlIHdyaXRlIHN0cmVhbSBjbG9zZWQgYWZ0ZXIgdGhlIHdyaXRlIGhhbmRzaGFrZSBjb21wbGV0ZXMsIGEgd3JpdGVcbiAgICAvLyBvcGVyYXRpb24gZmFpbGVkIGFuZCB3ZSBmYWlsIHRoZSBwZW5kaW5nIG9wZXJhdGlvbi5cbiAgICB0ICYmIF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKS5JXyAmJiBcbiAgICAvLyBUaGlzIGVycm9yIGFmZmVjdHMgdGhlIGFjdHVhbCB3cml0ZS5cbiAgICBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaGFuZGxlV3JpdGVFcnJvcihlLCB0KSB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIHBlcm1hbmVudCBlcnJvcnMgaGVyZS4gSWYgaXQncyB0cmFuc2llbnQsIGp1c3QgbGV0IHRoZSByZXRyeVxuICAgICAgICAvLyBsb2dpYyBraWNrIGluLlxuICAgICAgICBpZiAoZnVuY3Rpb24gX19QUklWQVRFX2lzUGVybWFuZW50V3JpdGVFcnJvcihlKSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IoZSkgJiYgZSAhPT0gRC5BQk9SVEVEO1xuICAgICAgICB9KHQuY29kZSkpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGEgcGVybWFuZW50IGVycm9yLCB0aGUgcmVxdWVzdCBpdHNlbGYgd2FzIHRoZSBwcm9ibGVtXG4gICAgICAgICAgICAvLyBzbyBpdCdzIG5vdCBnb2luZyB0byBzdWNjZWVkIGlmIHdlIHJlc2VuZCBpdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLkNfLnNoaWZ0KCk7XG4gICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UgaXQncyBhbHNvIHVubGlrZWx5IHRoYXQgdGhlIHNlcnZlciBpdHNlbGYgaXMgbWVsdGluZ1xuICAgICAgICAgICAgLy8gZG93biAtLSB0aGlzIHdhcyBqdXN0IGEgYmFkIHJlcXVlc3Qgc28gaW5oaWJpdCBiYWNrb2ZmIG9uIHRoZSBuZXh0XG4gICAgICAgICAgICAvLyByZXN0YXJ0LlxuICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLlhvKCksIGF3YWl0IF9fUFJJVkFURV9leGVjdXRlV2l0aFJlY292ZXJ5KGUsICgoKSA9PiBlLnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZShuLmJhdGNoSWQsIHQpKSksIFxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvblxuICAgICAgICAgICAgLy8gYW5vdGhlciBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZShlKTtcbiAgICAgICAgfVxuICAgIH0oZSwgdCksIFxuICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxuICAgIC8vIHBpcGVsaW5lIGZvciBmYWlsZWQgd3JpdGVzXG4gICAgX19QUklWQVRFX3Nob3VsZFN0YXJ0V3JpdGVTdHJlYW0oZSkgJiYgX19QUklWQVRFX3N0YXJ0V3JpdGVTdHJlYW0oZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIG4uYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiUmVtb3RlU3RvcmUgcmVjZWl2ZWQgbmV3IGNyZWRlbnRpYWxzXCIpO1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhuKTtcbiAgICAvLyBUZWFyIGRvd24gYW5kIHJlLWNyZWF0ZSBvdXIgbmV0d29yayBzdHJlYW1zLiBUaGlzIHdpbGwgZW5zdXJlIHdlIGdldCBhXG4gICAgLy8gZnJlc2ggYXV0aCB0b2tlbiBmb3IgdGhlIG5ldyB1c2VyIGFuZCByZS1maWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoXG4gICAgLy8gbmV3IG11dGF0aW9ucyBmcm9tIHRoZSBMb2NhbFN0b3JlIChzaW5jZSBtdXRhdGlvbnMgYXJlIHBlci11c2VyKS5cbiAgICAgICAgbi5GXy5hZGQoMyAvKiBPZmZsaW5lQ2F1c2UuQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKG4pLCBcbiAgICByICYmIFxuICAgIC8vIERvbid0IHNldCB0aGUgbmV0d29yayBzdGF0dXMgdG8gVW5rbm93biBpZiB3ZSBhcmUgb2ZmbGluZS5cbiAgICBuLk9fLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSwgYXdhaXQgbi5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSh0KSwgXG4gICAgbi5GXy5kZWxldGUoMyAvKiBPZmZsaW5lQ2F1c2UuQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwobik7XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgbmV0d29yayBzdGF0ZSB3aGVuIHRoZSBjbGllbnQgZ2FpbnMgb3IgbG9zZXMgaXRzIHByaW1hcnkgbGVhc2UuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHQgPyAobi5GXy5kZWxldGUoMiAvKiBPZmZsaW5lQ2F1c2UuSXNTZWNvbmRhcnkgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKG4pKSA6IHQgfHwgKG4uRl8uYWRkKDIgLyogT2ZmbGluZUNhdXNlLklzU2Vjb25kYXJ5ICovKSwgXG4gICAgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwobiksIG4uT18uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdhdGNoU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXYXRjaFN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShlKSB7XG4gICAgcmV0dXJuIGUuQl8gfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICBlLkJfID0gZnVuY3Rpb24gX19QUklWQVRFX25ld1BlcnNpc3RlbnRXYXRjaFN0cmVhbShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICByZXR1cm4gci5WXygpLCBuZXcgX19QUklWQVRFX1BlcnNpc3RlbnRMaXN0ZW5TdHJlYW0odCwgci5jb25uZWN0aW9uLCByLmF1dGhDcmVkZW50aWFscywgci5hcHBDaGVja0NyZWRlbnRpYWxzLCByLnNlcmlhbGl6ZXIsIG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAoZS5kYXRhc3RvcmUsIGUuYXN5bmNRdWV1ZSwge1xuICAgICAgICBJbzogX19QUklWQVRFX29uV2F0Y2hTdHJlYW1PcGVuLmJpbmQobnVsbCwgZSksXG4gICAgICAgIEVvOiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNsb3NlLmJpbmQobnVsbCwgZSksXG4gICAgICAgIGNfOiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNoYW5nZS5iaW5kKG51bGwsIGUpXG4gICAgfSksIGUuTV8ucHVzaCgoYXN5bmMgdCA9PiB7XG4gICAgICAgIHQgPyAoZS5CXy5YbygpLCBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShlKSA/IF9fUFJJVkFURV9zdGFydFdhdGNoU3RyZWFtKGUpIDogZS5PXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpIDogKGF3YWl0IGUuQl8uc3RvcCgpLCBcbiAgICAgICAgX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlKGUpKTtcbiAgICB9KSkpLCBlLkJfO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV3JpdGVTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdyaXRlU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpIHtcbiAgICByZXR1cm4gZS5MXyB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIGUuTF8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UGVyc2lzdGVudFdyaXRlU3RyZWFtKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgIHJldHVybiByLlZfKCksIG5ldyBfX1BSSVZBVEVfUGVyc2lzdGVudFdyaXRlU3RyZWFtKHQsIHIuY29ubmVjdGlvbiwgci5hdXRoQ3JlZGVudGlhbHMsIHIuYXBwQ2hlY2tDcmVkZW50aWFscywgci5zZXJpYWxpemVyLCBuKTtcbiAgICB9KGUuZGF0YXN0b3JlLCBlLmFzeW5jUXVldWUsIHtcbiAgICAgICAgSW86IF9fUFJJVkFURV9vbldyaXRlU3RyZWFtT3Blbi5iaW5kKG51bGwsIGUpLFxuICAgICAgICBFbzogX19QUklWQVRFX29uV3JpdGVTdHJlYW1DbG9zZS5iaW5kKG51bGwsIGUpLFxuICAgICAgICBFXzogX19QUklWQVRFX29uV3JpdGVIYW5kc2hha2VDb21wbGV0ZS5iaW5kKG51bGwsIGUpLFxuICAgICAgICBUXzogX19QUklWQVRFX29uTXV0YXRpb25SZXN1bHQuYmluZChudWxsLCBlKVxuICAgIH0pLCBlLk1fLnB1c2goKGFzeW5jIHQgPT4ge1xuICAgICAgICB0ID8gKGUuTF8uWG8oKSwgXG4gICAgICAgIC8vIFRoaXMgd2lsbCBzdGFydCB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGUpKSA6IChhd2FpdCBlLkxfLnN0b3AoKSwgZS5DXy5sZW5ndGggPiAwICYmIChfX1BSSVZBVEVfbG9nRGVidWcoXCJSZW1vdGVTdG9yZVwiLCBgU3RvcHBpbmcgd3JpdGUgc3RyZWFtIHdpdGggJHtlLkNfLmxlbmd0aH0gcGVuZGluZyB3cml0ZXNgKSwgXG4gICAgICAgIGUuQ18gPSBbXSkpO1xuICAgIH0pKSksIGUuTF87XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gb3BlcmF0aW9uIHNjaGVkdWxlZCB0byBiZSBydW4gaW4gdGhlIGZ1dHVyZSBvbiBhbiBBc3luY1F1ZXVlLlxuICpcbiAqIEl0IGlzIGNyZWF0ZWQgdmlhIERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAqXG4gKiBTdXBwb3J0cyBjYW5jZWxsYXRpb24gKHZpYSBjYW5jZWwoKSkgYW5kIGVhcmx5IGV4ZWN1dGlvbiAodmlhIHNraXBEZWxheSgpKS5cbiAqXG4gKiBOb3RlOiBXZSBpbXBsZW1lbnQgYFByb21pc2VMaWtlYCBpbnN0ZWFkIG9mIGBQcm9taXNlYCwgYXMgdGhlIGBQcm9taXNlYCB0eXBlXG4gKiBpbiBuZXdlciB2ZXJzaW9ucyBvZiBUeXBlU2NyaXB0IGRlZmluZXMgYGZpbmFsbHlgLCB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluXG4gKiBJRS5cbiAqL1xuY2xhc3MgRGVsYXllZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLnRpbWVySWQgPSB0LCB0aGlzLnRhcmdldFRpbWVNcyA9IG4sIHRoaXMub3AgPSByLCB0aGlzLnJlbW92YWxDYWxsYmFjayA9IGksIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgdGhpcy50aGVuID0gdGhpcy5kZWZlcnJlZC5wcm9taXNlLnRoZW4uYmluZCh0aGlzLmRlZmVycmVkLnByb21pc2UpLCBcbiAgICAgICAgLy8gSXQncyBub3JtYWwgZm9yIHRoZSBkZWZlcnJlZCBwcm9taXNlIHRvIGJlIGNhbmNlbGVkIChkdWUgdG8gY2FuY2VsbGF0aW9uKVxuICAgICAgICAvLyBhbmQgc28gd2UgYXR0YWNoIGEgZHVtbXkgY2F0Y2ggY2FsbGJhY2sgdG8gYXZvaWRcbiAgICAgICAgLy8gJ1VuaGFuZGxlZFByb21pc2VSZWplY3Rpb25XYXJuaW5nJyBsb2cgc3BhbS5cbiAgICAgICAgdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoKChlID0+IHt9KSk7XG4gICAgfVxuICAgIGdldCBwcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgRGVsYXllZE9wZXJhdGlvbiB0aGF0IGhhcyBiZWVuIHNjaGVkdWxlZCB0byBiZVxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFzeW5jUXVldWUgLSBUaGUgcXVldWUgdG8gc2NoZWR1bGUgdGhlIG9wZXJhdGlvbiBvbi5cbiAgICAgKiBAcGFyYW0gaWQgLSBBIFRpbWVyIElEIGlkZW50aWZ5aW5nIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGlzIGlzLlxuICAgICAqIEBwYXJhbSBkZWxheU1zIC0gVGhlIGRlbGF5IChtcykgYmVmb3JlIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIHNjaGVkdWxlZC5cbiAgICAgKiBAcGFyYW0gb3AgLSBUaGUgb3BlcmF0aW9uIHRvIHJ1bi5cbiAgICAgKiBAcGFyYW0gcmVtb3ZhbENhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBvbmNlIHRoZVxuICAgICAqICAgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLCBub3RpZnlpbmcgdGhlIEFzeW5jUXVldWUgdG8gcmVtb3ZlIGl0XG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxuICAgICAqICAgUE9SVElORyBOT1RFOiBUaGlzIGV4aXN0cyB0byBwcmV2ZW50IG1ha2luZyByZW1vdmVEZWxheWVkT3BlcmF0aW9uKCkgYW5kXG4gICAgICogICB0aGUgRGVsYXllZE9wZXJhdGlvbiBjbGFzcyBwdWJsaWMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVBbmRTY2hlZHVsZShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBEYXRlLm5vdygpICsgbiwgbyA9IG5ldyBEZWxheWVkT3BlcmF0aW9uKGUsIHQsIHMsIHIsIGkpO1xuICAgICAgICByZXR1cm4gby5zdGFydChuKSwgbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0aW1lci4gVGhpcyBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgY29uc3RydWN0aW9uIGJ5XG4gICAgICogY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAgICAgKi8gICAgc3RhcnQoZSkge1xuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gc2V0VGltZW91dCgoKCkgPT4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKSksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWV1ZXMgdGhlIG9wZXJhdGlvbiB0byBydW4gaW1tZWRpYXRlbHkgKGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gcnVuIG9yXG4gICAgICogY2FuY2VsZWQpLlxuICAgICAqLyAgICBza2lwRGVsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBvcGVyYXRpb24gaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBleGVjdXRlZCBvciBjYW5jZWxlZC4gVGhlXG4gICAgICogcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogQXMgbG9uZyBhcyB0aGUgb3BlcmF0aW9uIGhhcyBub3QgeWV0IGJlZW4gcnVuLCBjYWxsaW5nIGNhbmNlbCgpIHByb3ZpZGVzIGFcbiAgICAgKiBndWFyYW50ZWUgdGhhdCB0aGUgb3BlcmF0aW9uIHdpbGwgbm90IGJlIHJ1bi5cbiAgICAgKi8gICAgY2FuY2VsKGUpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5jbGVhclRpbWVvdXQoKSwgdGhpcy5kZWZlcnJlZC5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKEQuQ0FOQ0VMTEVELCBcIk9wZXJhdGlvbiBjYW5jZWxsZWRcIiArIChlID8gXCI6IFwiICsgZSA6IFwiXCIpKSkpO1xuICAgIH1cbiAgICBoYW5kbGVEZWxheUVsYXBzZWQoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlID8gKHRoaXMuY2xlYXJUaW1lb3V0KCksIFxuICAgICAgICB0aGlzLm9wKCkudGhlbigoZSA9PiB0aGlzLmRlZmVycmVkLnJlc29sdmUoZSkpKSkgOiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpLCBjbGVhclRpbWVvdXQodGhpcy50aW1lckhhbmRsZSksIFxuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaXJlc3RvcmVFcnJvciB0aGF0IGNhbiBiZSBzdXJmYWNlZCB0byB0aGUgdXNlciBpZiB0aGUgcHJvdmlkZWRcbiAqIGVycm9yIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuIFJlLXRocm93cyB0aGUgZXJyb3Igb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIHQpIHtcbiAgICBpZiAoX19QUklWQVRFX2xvZ0Vycm9yKFwiQXN5bmNRdWV1ZVwiLCBgJHt0fTogJHtlfWApLCBfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKEQuVU5BVkFJTEFCTEUsIGAke3R9OiAke2V9YCk7XG4gICAgdGhyb3cgZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZG9jdW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuIFdlIGFsd2F5cyBhZGQgYSBkb2N1bWVudCBrZXlcbiAqIGNvbXBhcmF0b3Igb24gdG9wIG9mIHdoYXQgaXMgcHJvdmlkZWQgdG8gZ3VhcmFudGVlIGRvY3VtZW50IGVxdWFsaXR5IGJhc2VkIG9uXG4gKiB0aGUga2V5LlxuICovIGNsYXNzIERvY3VtZW50U2V0IHtcbiAgICAvKiogVGhlIGRlZmF1bHQgb3JkZXJpbmcgaXMgYnkga2V5IGlmIHRoZSBjb21wYXJhdG9yIGlzIG9taXR0ZWQgKi9cbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIC8vIFdlIGFyZSBhZGRpbmcgZG9jdW1lbnQga2V5IGNvbXBhcmF0b3IgdG8gdGhlIGVuZCBhcyBpdCdzIHRoZSBvbmx5XG4gICAgICAgIC8vIGd1YXJhbnRlZWQgdW5pcXVlIHByb3BlcnR5IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGUgPyAodCwgbikgPT4gZSh0LCBuKSB8fCBEb2N1bWVudEtleS5jb21wYXJhdG9yKHQua2V5LCBuLmtleSkgOiAoZSwgdCkgPT4gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdC5rZXkpLCBcbiAgICAgICAgdGhpcy5rZXllZE1hcCA9IGRvY3VtZW50TWFwKCksIHRoaXMuc29ydGVkU2V0ID0gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxuICAgICAqIGNvbXBhcmF0b3IuXG4gICAgICovICAgIHN0YXRpYyBlbXB0eVNldChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRTZXQoZS5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5rZXllZE1hcC5nZXQoZSk7XG4gICAgfVxuICAgIGdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldChlKTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1heEtleSgpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgcHJvdmlkZWQga2V5IGluIHRoZSBkb2N1bWVudCBzZXQsIG9yIC0xIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2V0O1xuICAgICAqLyAgICBpbmRleE9mKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMua2V5ZWRNYXAuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YodCkgOiAtMTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZG9jdW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZSh0KSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleSAqLyAgICBhZGQoZSkge1xuICAgICAgICAvLyBGaXJzdCByZW1vdmUgdGhlIGVsZW1lbnQgaWYgd2UgaGF2ZSBpdC5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGVsZXRlKGUua2V5KTtcbiAgICAgICAgcmV0dXJuIHQuY29weSh0LmtleWVkTWFwLmluc2VydChlLmtleSwgZSksIHQuc29ydGVkU2V0Lmluc2VydChlLCBudWxsKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy5jb3B5KHRoaXMua2V5ZWRNYXAucmVtb3ZlKGUpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUodCkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBEb2N1bWVudFNldCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gZS5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpLCBuID0gZS5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7dC5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZ2V0TmV4dCgpLmtleSwgciA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICghZS5pc0VxdWFsKHIpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIDAgPT09IGUubGVuZ3RoID8gXCJEb2N1bWVudFNldCAoKVwiIDogXCJEb2N1bWVudFNldCAoXFxuICBcIiArIGUuam9pbihcIiAgXFxuXCIpICsgXCJcXG4pXCI7XG4gICAgfVxuICAgIGNvcHkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IERvY3VtZW50U2V0O1xuICAgICAgICByZXR1cm4gbi5jb21wYXJhdG9yID0gdGhpcy5jb21wYXJhdG9yLCBuLmtleWVkTWFwID0gZSwgbi5zb3J0ZWRTZXQgPSB0LCBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcbiAqIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGRvYy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRG9jdW1lbnRDaGFuZ2VTZXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmtfID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgdHJhY2soZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kb2Mua2V5LCBuID0gdGhpcy5rXy5nZXQodCk7XG4gICAgICAgIG4gPyBcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyBjaGFuZ2Ugd2l0aCB0aGUgZXhpc3RpbmcgY2hhbmdlLlxuICAgICAgICAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gIT09IGUudHlwZSAmJiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gPT09IG4udHlwZSA/IHRoaXMua18gPSB0aGlzLmtfLmluc2VydCh0LCBlKSA6IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA9PT0gZS50eXBlICYmIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLmtfID0gdGhpcy5rXy5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiBlLmRvY1xuICAgICAgICB9KSA6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gZS50eXBlICYmIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5rXyA9IHRoaXMua18uaW5zZXJ0KHQsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IGUuZG9jXG4gICAgICAgIH0pIDogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBlLnR5cGUgJiYgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLmtfID0gdGhpcy5rXy5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogZS5kb2NcbiAgICAgICAgfSkgOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA9PT0gZS50eXBlICYmIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5rXyA9IHRoaXMua18ucmVtb3ZlKHQpIDogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IGUudHlwZSAmJiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMua18gPSB0aGlzLmtfLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IG4uZG9jXG4gICAgICAgIH0pIDogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBlLnR5cGUgJiYgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IG4udHlwZSA/IHRoaXMua18gPSB0aGlzLmtfLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBlLmRvY1xuICAgICAgICB9KSA6IFxuICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIHRoZXNlIGNhc2VzLCB3aGljaCBkb24ndCBtYWtlIHNlbnNlOlxuICAgICAgICAvLyBBZGRlZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+UmVtb3ZlZFxuICAgICAgICAvLyBNb2RpZmllZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TW9kaWZpZWRcbiAgICAgICAgLy8gTWV0YWRhdGEtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1ldGFkYXRhXG4gICAgICAgIGZhaWwoKSA6IHRoaXMua18gPSB0aGlzLmtfLmluc2VydCh0LCBlKTtcbiAgICB9XG4gICAgcV8oKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMua18uaW5vcmRlclRyYXZlcnNhbCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUucHVzaChuKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbn1cblxuY2xhc3MgVmlld1NuYXBzaG90IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzLCBvLCBfLCBhKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBlLCB0aGlzLmRvY3MgPSB0LCB0aGlzLm9sZERvY3MgPSBuLCB0aGlzLmRvY0NoYW5nZXMgPSByLCB0aGlzLm11dGF0ZWRLZXlzID0gaSwgXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gcywgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID0gbywgdGhpcy5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcyA9IF8sIFxuICAgICAgICB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPSBhO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi8gICAgc3RhdGljIGZyb21Jbml0aWFsRG9jdW1lbnRzKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIG5ldyBWaWV3U25hcHNob3QoZSwgdCwgRG9jdW1lbnRTZXQuZW1wdHlTZXQodCksIHMsIG4sIHIsIFxuICAgICAgICAvKiBzeW5jU3RhdGVDaGFuZ2VkPSAqLyAhMCwgXG4gICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSwgaSk7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubXV0YXRlZEtleXMuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgaWYgKCEodGhpcy5mcm9tQ2FjaGUgPT09IGUuZnJvbUNhY2hlICYmIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyA9PT0gZS5oYXNDYWNoZWRSZXN1bHRzICYmIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9PT0gZS5zeW5jU3RhdGVDaGFuZ2VkICYmIHRoaXMubXV0YXRlZEtleXMuaXNFcXVhbChlLm11dGF0ZWRLZXlzKSAmJiBfX1BSSVZBVEVfcXVlcnlFcXVhbHModGhpcy5xdWVyeSwgZS5xdWVyeSkgJiYgdGhpcy5kb2NzLmlzRXF1YWwoZS5kb2NzKSAmJiB0aGlzLm9sZERvY3MuaXNFcXVhbChlLm9sZERvY3MpKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kb2NDaGFuZ2VzLCBuID0gZS5kb2NDaGFuZ2VzO1xuICAgICAgICBpZiAodC5sZW5ndGggIT09IG4ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGg7IGUrKykgaWYgKHRbZV0udHlwZSAhPT0gbltlXS50eXBlIHx8ICF0W2VdLmRvYy5pc0VxdWFsKG5bZV0uZG9jKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIb2xkcyB0aGUgbGlzdGVuZXJzIGFuZCB0aGUgbGFzdCByZWNlaXZlZCBWaWV3U25hcHNob3QgZm9yIGEgcXVlcnkgYmVpbmdcbiAqIHRyYWNrZWQgYnkgRXZlbnRNYW5hZ2VyLlxuICovIGNsYXNzIF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyc0luZm8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLlFfID0gdm9pZCAwLCB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0V2ZW50TWFuYWdlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBuZXcgT2JqZWN0TWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeVF1ZXJ5KGUpKSwgX19QUklWQVRFX3F1ZXJ5RXF1YWxzKSwgXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgdGhpcy5LXyA9IG5ldyBTZXQ7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IHQucXVlcnk7XG4gICAgbGV0IGkgPSAhMSwgcyA9IG4ucXVlcmllcy5nZXQocik7XG4gICAgaWYgKHMgfHwgKGkgPSAhMCwgcyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcnNJbmZvKSwgaSkgdHJ5IHtcbiAgICAgICAgcy5RXyA9IGF3YWl0IG4ub25MaXN0ZW4ocik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgYEluaXRpYWxpemF0aW9uIG9mIHF1ZXJ5ICcke19fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0LnF1ZXJ5KX0nIGZhaWxlZGApO1xuICAgICAgICByZXR1cm4gdm9pZCB0Lm9uRXJyb3Iobik7XG4gICAgfVxuICAgIGlmIChuLnF1ZXJpZXMuc2V0KHIsIHMpLCBzLmxpc3RlbmVycy5wdXNoKHQpLCBcbiAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICB0LlVfKG4ub25saW5lU3RhdGUpLCBzLlFfKSB7XG4gICAgICAgIHQuV18ocy5RXykgJiYgX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQobik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gdC5xdWVyeTtcbiAgICBsZXQgaSA9ICExO1xuICAgIGNvbnN0IHMgPSBuLnF1ZXJpZXMuZ2V0KHIpO1xuICAgIGlmIChzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBzLmxpc3RlbmVycy5pbmRleE9mKHQpO1xuICAgICAgICBlID49IDAgJiYgKHMubGlzdGVuZXJzLnNwbGljZShlLCAxKSwgaSA9IDAgPT09IHMubGlzdGVuZXJzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChpKSByZXR1cm4gbi5xdWVyaWVzLmRlbGV0ZShyKSwgbi5vblVubGlzdGVuKHIpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaENoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbGV0IHIgPSAhMTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICBjb25zdCB0ID0gZS5xdWVyeSwgaSA9IG4ucXVlcmllcy5nZXQodCk7XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgaS5saXN0ZW5lcnMpIHQuV18oZSkgJiYgKHIgPSAhMCk7XG4gICAgICAgICAgICBpLlFfID0gZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByICYmIF9fUFJJVkFURV9yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KG4pO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IHIucXVlcmllcy5nZXQodCk7XG4gICAgaWYgKGkpIGZvciAoY29uc3QgZSBvZiBpLmxpc3RlbmVycykgZS5vbkVycm9yKG4pO1xuICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzLiBOT1RFOiBXZSBkb24ndCBuZWVkIHRvIGNhbGwgc3luY0VuZ2luZS51bmxpc3RlbigpXG4gICAgLy8gYWZ0ZXIgYW4gZXJyb3IuXG4gICAgICAgIHIucXVlcmllcy5kZWxldGUodCk7XG59XG5cbi8vIENhbGwgYWxsIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgdGhhdCBoYXZlIGJlZW4gc2V0LlxuZnVuY3Rpb24gX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQoZSkge1xuICAgIGUuS18uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgIGUubmV4dCgpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBRdWVyeUxpc3RlbmVyIHRha2VzIGEgc2VyaWVzIG9mIGludGVybmFsIHZpZXcgc25hcHNob3RzIGFuZCBkZXRlcm1pbmVzXG4gKiB3aGVuIHRvIHJhaXNlIHRoZSBldmVudC5cbiAqXG4gKiBJdCB1c2VzIGFuIE9ic2VydmVyIHRvIGRpc3BhdGNoIGV2ZW50cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gZSwgdGhpcy5HXyA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbCBzbmFwc2hvdHMgKGUuZy4gZnJvbSBjYWNoZSkgbWF5IG5vdCBiZSBwcm9wYWdhdGVkIHRvIHRoZSB3cmFwcGVkXG4gICAgICAgICAqIG9ic2VydmVyLiBUaGlzIGZsYWcgaXMgc2V0IHRvIHRydWUgb25jZSB3ZSd2ZSBhY3R1YWxseSByYWlzZWQgYW4gZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnpfID0gITEsIHRoaXMual8gPSBudWxsLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBuIHx8IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBuZXcgVmlld1NuYXBzaG90IHRvIHRoaXMgbGlzdGVuZXIsIHJhaXNpbmcgYSB1c2VyLWZhY2luZyBldmVudFxuICAgICAqIGlmIGFwcGxpY2FibGUgKGRlcGVuZGluZyBvbiB3aGF0IGNoYW5nZWQsIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIGludG9cbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcbiAgICAgKiBpbmRlZWQgcmFpc2VkLlxuICAgICAqLyAgICBXXyhlKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxuICAgICAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuZG9jQ2hhbmdlcykgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICE9PSBuLnR5cGUgJiYgdC5wdXNoKG4pO1xuICAgICAgICAgICAgZSA9IG5ldyBWaWV3U25hcHNob3QoZS5xdWVyeSwgZS5kb2NzLCBlLm9sZERvY3MsIHQsIGUubXV0YXRlZEtleXMsIGUuZnJvbUNhY2hlLCBlLnN5bmNTdGF0ZUNoYW5nZWQsIFxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICEwLCBlLmhhc0NhY2hlZFJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLnpfID8gdGhpcy5IXyhlKSAmJiAodGhpcy5HXy5uZXh0KGUpLCB0ID0gITApIDogdGhpcy5KXyhlLCB0aGlzLm9ubGluZVN0YXRlKSAmJiAodGhpcy5ZXyhlKSwgXG4gICAgICAgIHQgPSAhMCksIHRoaXMual8gPSBlLCB0O1xuICAgIH1cbiAgICBvbkVycm9yKGUpIHtcbiAgICAgICAgdGhpcy5HXy5lcnJvcihlKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciBhIHNuYXBzaG90IHdhcyByYWlzZWQuICovICAgIFVfKGUpIHtcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLmpfICYmICF0aGlzLnpfICYmIHRoaXMuSl8odGhpcy5qXywgZSkgJiYgKHRoaXMuWV8odGhpcy5qXyksIHQgPSAhMCksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICBKXyhlLCB0KSB7XG4gICAgICAgIC8vIEFsd2F5cyByYWlzZSB0aGUgZmlyc3QgZXZlbnQgd2hlbiB3ZSdyZSBzeW5jZWRcbiAgICAgICAgaWYgKCFlLmZyb21DYWNoZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBOT1RFOiBXZSBjb25zaWRlciBPbmxpbmVTdGF0ZS5Vbmtub3duIGFzIG9ubGluZSAoaXQgc2hvdWxkIGJlY29tZSBPZmZsaW5lXG4gICAgICAgIC8vIG9yIE9ubGluZSBpZiB3ZSB3YWl0IGxvbmcgZW5vdWdoKS5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gdDtcbiAgICAgICAgLy8gRG9uJ3QgcmFpc2UgdGhlIGV2ZW50IGlmIHdlJ3JlIG9ubGluZSwgYXJlbid0IHN5bmNlZCB5ZXQgKGNoZWNrZWRcbiAgICAgICAgLy8gYWJvdmUpIGFuZCBhcmUgd2FpdGluZyBmb3IgYSBzeW5jLlxuICAgICAgICAgICAgICAgIHJldHVybiAoIXRoaXMub3B0aW9ucy5aXyB8fCAhbikgJiYgKCFlLmRvY3MuaXNFbXB0eSgpIHx8IGUuaGFzQ2FjaGVkUmVzdWx0cyB8fCBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovID09PSB0KTtcbiAgICAgICAgLy8gUmFpc2UgZGF0YSBmcm9tIGNhY2hlIGlmIHdlIGhhdmUgYW55IGRvY3VtZW50cywgaGF2ZSBjYWNoZWQgcmVzdWx0cyBiZWZvcmUsXG4gICAgICAgIC8vIG9yIHdlIGFyZSBvZmZsaW5lLlxuICAgICAgICB9XG4gICAgSF8oZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpbmNsdWRlRG9jdW1lbnRNZXRhZGF0YUNoYW5nZXMgaGVyZSBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSBNZXRhZGF0YSBvbmx5IGNoYW5nZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc3RyaXBwZWQgb3V0IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgb25seSBjaGFuZ2VzIHdlIHdpbGwgc2VlIGFyZSB0aGUgb25lcyB3ZSBzaG91bGRcbiAgICAgICAgLy8gcHJvcGFnYXRlLlxuICAgICAgICBpZiAoZS5kb2NDaGFuZ2VzLmxlbmd0aCA+IDApIHJldHVybiAhMDtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMual8gJiYgdGhpcy5qXy5oYXNQZW5kaW5nV3JpdGVzICE9PSBlLmhhc1BlbmRpbmdXcml0ZXM7XG4gICAgICAgIHJldHVybiAhKCFlLnN5bmNTdGF0ZUNoYW5nZWQgJiYgIXQpICYmICEwID09PSB0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgLy8gR2VuZXJhbGx5IHdlIHNob3VsZCBoYXZlIGhpdCBvbmUgb2YgdGhlIGNhc2VzIGFib3ZlLCBidXQgaXQncyBwb3NzaWJsZVxuICAgICAgICAvLyB0byBnZXQgaGVyZSBpZiB0aGVyZSB3ZXJlIG9ubHkgbWV0YWRhdGEgZG9jQ2hhbmdlcyBhbmQgdGhleSBnb3RcbiAgICAgICAgLy8gc3RyaXBwZWQgb3V0LlxuICAgICAgICB9XG4gICAgWV8oZSkge1xuICAgICAgICBlID0gVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzKGUucXVlcnksIGUuZG9jcywgZS5tdXRhdGVkS2V5cywgZS5mcm9tQ2FjaGUsIGUuaGFzQ2FjaGVkUmVzdWx0cyksIFxuICAgICAgICB0aGlzLnpfID0gITAsIHRoaXMuR18ubmV4dChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29tcGxldGUgZWxlbWVudCBpbiB0aGUgYnVuZGxlIHN0cmVhbSwgdG9nZXRoZXIgd2l0aCB0aGUgYnl0ZSBsZW5ndGggaXRcbiAqIG9jY3VwaWVzIGluIHRoZSBzdHJlYW0uXG4gKi8gY2xhc3MgX19QUklWQVRFX1NpemVkQnVuZGxlRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLy8gSG93IG1hbnkgYnl0ZXMgdGhpcyBlbGVtZW50IHRha2VzIHRvIHN0b3JlIGluIHRoZSBidW5kbGUuXG4gICAgdCkge1xuICAgICAgICB0aGlzLlhfID0gZSwgdGhpcy5ieXRlTGVuZ3RoID0gdDtcbiAgICB9XG4gICAgZWEoKSB7XG4gICAgICAgIHJldHVybiBcIm1ldGFkYXRhXCIgaW4gdGhpcy5YXztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IG9iamVjdHMgZnJvbSBidW5kbGVzIHRvIG1vZGVsIG9iamVjdHMgaW4gdGhlIFNESy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQnVuZGxlQ29udmVydGVySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBlO1xuICAgIH1cbiAgICBJcyhlKSB7XG4gICAgICAgIHJldHVybiBmcm9tTmFtZSh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEJ1bmRsZURvY3VtZW50IHRvIGEgTXV0YWJsZURvY3VtZW50LlxuICAgICAqLyAgICBkcyhlKSB7XG4gICAgICAgIHJldHVybiBlLm1ldGFkYXRhLmV4aXN0cyA/IF9fUFJJVkFURV9mcm9tRG9jdW1lbnQodGhpcy5zZXJpYWxpemVyLCBlLmRvY3VtZW50LCAhMSkgOiBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudCh0aGlzLklzKGUubWV0YWRhdGEubmFtZSksIHRoaXMuVHMoZS5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICBUcyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY2xhc3MgdG8gcHJvY2VzcyB0aGUgZWxlbWVudHMgZnJvbSBhIGJ1bmRsZSwgbG9hZCB0aGVtIGludG8gbG9jYWxcbiAqIHN0b3JhZ2UgYW5kIHByb3ZpZGUgcHJvZ3Jlc3MgdXBkYXRlIHdoaWxlIGxvYWRpbmcuXG4gKi8gY2xhc3MgX19QUklWQVRFX0J1bmRsZUxvYWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnRhID0gZSwgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5zZXJpYWxpemVyID0gbiwgXG4gICAgICAgIC8qKiBCYXRjaGVkIHF1ZXJpZXMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IFtdLCBcbiAgICAgICAgLyoqIFRoZSBjb2xsZWN0aW9uIGdyb3VwcyBhZmZlY3RlZCBieSB0aGlzIGJ1bmRsZS4gKi9cbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXBzID0gbmV3IFNldCwgdGhpcy5wcm9ncmVzcyA9IF9fUFJJVkFURV9idW5kbGVJbml0aWFsUHJvZ3Jlc3MoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZWxlbWVudCBmcm9tIHRoZSBidW5kbGUgdG8gdGhlIGxvYWRlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBuZXcgcHJvZ3Jlc3MgaWYgYWRkaW5nIHRoZSBlbGVtZW50IGxlYWRzIHRvIGEgbmV3IHByb2dyZXNzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICovICAgIG5hKGUpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5ieXRlc0xvYWRlZCArPSBlLmJ5dGVMZW5ndGg7XG4gICAgICAgIGxldCB0ID0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7XG4gICAgICAgIGlmIChlLlhfLm5hbWVkUXVlcnkpIHRoaXMucXVlcmllcy5wdXNoKGUuWF8ubmFtZWRRdWVyeSk7IGVsc2UgaWYgKGUuWF8uZG9jdW1lbnRNZXRhZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kb2N1bWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IGUuWF8uZG9jdW1lbnRNZXRhZGF0YVxuICAgICAgICAgICAgfSksIGUuWF8uZG9jdW1lbnRNZXRhZGF0YS5leGlzdHMgfHwgKyt0O1xuICAgICAgICAgICAgY29uc3QgbiA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUuWF8uZG9jdW1lbnRNZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3Vwcy5hZGQobi5nZXQobi5sZW5ndGggLSAyKSk7XG4gICAgICAgIH0gZWxzZSBlLlhfLmRvY3VtZW50ICYmICh0aGlzLmRvY3VtZW50c1t0aGlzLmRvY3VtZW50cy5sZW5ndGggLSAxXS5kb2N1bWVudCA9IGUuWF8uZG9jdW1lbnQsIFxuICAgICAgICArK3QpO1xuICAgICAgICByZXR1cm4gdCAhPT0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPyAodGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPSB0LCBcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9ncmVzcykpIDogbnVsbDtcbiAgICB9XG4gICAgcmEoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IE1hcCwgbiA9IG5ldyBfX1BSSVZBVEVfQnVuZGxlQ29udmVydGVySW1wbCh0aGlzLnNlcmlhbGl6ZXIpO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZSkgaWYgKHIubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4uSXMoci5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiByLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gKHQuZ2V0KG4pIHx8IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKS5hZGQoZSk7XG4gICAgICAgICAgICAgICAgdC5zZXQobiwgcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcHJvZ3Jlc3MgdG8gJ1N1Y2Nlc3MnIGFuZCByZXR1cm4gdGhlIHVwZGF0ZWQgcHJvZ3Jlc3MuXG4gICAgICovICAgIGFzeW5jIGNvbXBsZXRlKCkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseUJ1bmRsZWREb2N1bWVudHModGhpcy5sb2NhbFN0b3JlLCBuZXcgX19QUklWQVRFX0J1bmRsZUNvbnZlcnRlckltcGwodGhpcy5zZXJpYWxpemVyKSwgdGhpcy5kb2N1bWVudHMsIHRoaXMudGEuaWQpLCB0ID0gdGhpcy5yYSh0aGlzLmRvY3VtZW50cyk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnF1ZXJpZXMpIGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlU2F2ZU5hbWVkUXVlcnkodGhpcy5sb2NhbFN0b3JlLCBlLCB0LmdldChlLm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3MudGFza1N0YXRlID0gXCJTdWNjZXNzXCIsIHtcbiAgICAgICAgICAgIHByb2dyZXNzOiB0aGlzLnByb2dyZXNzLFxuICAgICAgICAgICAgaWE6IHRoaXMuY29sbGVjdGlvbkdyb3VwcyxcbiAgICAgICAgICAgIHNhOiBlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBpbml0aWFsIHByb2dyZXNzIG9mXG4gKiBsb2FkaW5nIGEgYnVuZGxlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9idW5kbGVJbml0aWFsUHJvZ3Jlc3MoZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgIGRvY3VtZW50c0xvYWRlZDogMCxcbiAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgIHRvdGFsRG9jdW1lbnRzOiBlLnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICB0b3RhbEJ5dGVzOiBlLnRvdGFsQnl0ZXNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0aGF0IHRoZSBsb2FkaW5nXG4gKiBoYXMgc3VjY2VlZGVkLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0FkZGVkTGltYm9Eb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtleSA9IGU7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfUmVtb3ZlZExpbWJvRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBWaWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0IGRvY3MgYXJlIGluXG4gKiBhIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyB0byBkb2NzLCBhbmQgYXBwbGllc1xuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxuICovIGNsYXNzIF9fUFJJVkFURV9WaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvKiogRG9jdW1lbnRzIGluY2x1ZGVkIGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgdCkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gZSwgdGhpcy5vYSA9IHQsIHRoaXMuX2EgPSBudWxsLCB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgd2hldGhlciB0aGUgdmlldyBpcyBjdXJyZW50IHdpdGggdGhlIGJhY2tlbmQuIEEgdmlldyBpcyBjb25zaWRlcmVkXG4gICAgICAgICAqIGN1cnJlbnQgYWZ0ZXIgaXQgaGFzIHNlZW4gdGhlIGN1cnJlbnQgZmxhZyBmcm9tIHRoZSBiYWNrZW5kIGFuZCBkaWQgbm90XG4gICAgICAgICAqIGxvc2UgY29uc2lzdGVuY3kgd2l0aGluIHRoZSB3YXRjaCBzdHJlYW0gKGUuZy4gYmVjYXVzZSBvZiBhbiBleGlzdGVuY2VcbiAgICAgICAgICogZmlsdGVyIG1pc21hdGNoKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCBcbiAgICAgICAgLyoqIERvY3VtZW50cyBpbiB0aGUgdmlldyBidXQgbm90IGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgICAgIHRoaXMuYWEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgXG4gICAgICAgIC8qKiBEb2N1bWVudCBLZXlzIHRoYXQgaGF2ZSBsb2NhbCBjaGFuZ2VzICovXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgdGhpcy51YSA9IF9fUFJJVkFURV9uZXdRdWVyeUNvbXBhcmF0b3IoZSksIFxuICAgICAgICB0aGlzLmNhID0gbmV3IERvY3VtZW50U2V0KHRoaXMudWEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIHJlbW90ZSBkb2N1bWVudHMgdGhhdCB0aGUgc2VydmVyIGhhcyB0b2xkIHVzIGJlbG9uZ3MgdG8gdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKiB0aGlzIHZpZXcuXG4gICAgICovICAgIGdldCBsYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2E7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzZXQgb2YgZG9jIGNoYW5nZXMsIGFwcGxpZXMgdGhlIHF1ZXJ5IGxpbWl0LCBhbmQgY29tcHV0ZXNcbiAgICAgKiB3aGF0IHRoZSBuZXcgcmVzdWx0cyBzaG91bGQgYmUsIHdoYXQgdGhlIGNoYW5nZXMgd2VyZSwgYW5kIHdoZXRoZXIgd2UgbWF5XG4gICAgICogbmVlZCB0byBnbyBiYWNrIHRvIHRoZSBsb2NhbCBjYWNoZSBmb3IgbW9yZSByZXN1bHRzLiBEb2VzIG5vdCBtYWtlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgZG9jIGNoYW5nZXMgdG8gYXBwbHkgdG8gdGhpcyB2aWV3LlxuICAgICAqIEBwYXJhbSBwcmV2aW91c0NoYW5nZXMgLSBJZiB0aGlzIGlzIGJlaW5nIGNhbGxlZCB3aXRoIGEgcmVmaWxsLCB0aGVuIHN0YXJ0XG4gICAgICogICAgICAgIHdpdGggdGhpcyBzZXQgb2YgZG9jcyBhbmQgY2hhbmdlcyBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gICAgICogQHJldHVybnMgYSBuZXcgc2V0IG9mIGRvY3MsIGNoYW5nZXMsIGFuZCByZWZpbGwgZmxhZy5cbiAgICAgKi8gICAgaGEoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdCA/IHQuUGEgOiBuZXcgX19QUklWQVRFX0RvY3VtZW50Q2hhbmdlU2V0LCByID0gdCA/IHQuY2EgOiB0aGlzLmNhO1xuICAgICAgICBsZXQgaSA9IHQgPyB0Lm11dGF0ZWRLZXlzIDogdGhpcy5tdXRhdGVkS2V5cywgcyA9IHIsIG8gPSAhMTtcbiAgICAgICAgLy8gVHJhY2sgdGhlIGxhc3QgZG9jIGluIGEgKGZ1bGwpIGxpbWl0LiBUaGlzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBzb21lXG4gICAgICAgIC8vIHVwZGF0ZSAoYSBkZWxldGUsIG9yIGFuIHVwZGF0ZSBtb3ZpbmcgYSBkb2MgcGFzdCB0aGUgb2xkIGxpbWl0KSBtaWdodFxuICAgICAgICAvLyBtZWFuIHRoZXJlIGlzIHNvbWUgb3RoZXIgZG9jdW1lbnQgaW4gdGhlIGxvY2FsIGNhY2hlIHRoYXQgZWl0aGVyIHNob3VsZFxuICAgICAgICAvLyBjb21lICgxKSBiZXR3ZWVuIHRoZSBvbGQgbGFzdCBsaW1pdCBkb2MgYW5kIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlXG4gICAgICAgIC8vIGNhc2Ugb2YgdXBkYXRlcywgb3IgKDIpIGFmdGVyIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlIGNhc2Ugb2ZcbiAgICAgICAgLy8gZGVsZXRlcy4gU28gd2Uga2VlcCB0aGlzIGRvYyBhdCB0aGUgb2xkIGxpbWl0IHRvIGNvbXBhcmUgdGhlIHVwZGF0ZXMgdG8uXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBuZXZlciBnZXQgdXNlZCBpbiBhIHJlZmlsbCAod2hlbiBwcmV2aW91c0NoYW5nZXMgaXNcbiAgICAgICAgLy8gc2V0KSwgYmVjYXVzZSB0aGVyZSB3aWxsIG9ubHkgYmUgYWRkcyAtLSBubyBkZWxldGVzIG9yIHVwZGF0ZXMuXG4gICAgICAgIGNvbnN0IF8gPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlICYmIHIuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHIubGFzdCgpIDogbnVsbCwgYSA9IFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSAmJiByLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyByLmZpcnN0KCkgOiBudWxsO1xuICAgICAgICAvLyBEcm9wIGRvY3VtZW50cyBvdXQgdG8gbWVldCBsaW1pdC9saW1pdFRvTGFzdCByZXF1aXJlbWVudC5cbiAgICAgICAgaWYgKGUuaW5vcmRlclRyYXZlcnNhbCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSByLmdldChlKSwgYyA9IF9fUFJJVkFURV9xdWVyeU1hdGNoZXModGhpcy5xdWVyeSwgdCkgPyB0IDogbnVsbCwgbCA9ICEhdSAmJiB0aGlzLm11dGF0ZWRLZXlzLmhhcyh1LmtleSksIGggPSAhIWMgJiYgKGMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgXG4gICAgICAgICAgICAvLyBXZSBvbmx5IGNvbnNpZGVyIGNvbW1pdHRlZCBtdXRhdGlvbnMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmVcbiAgICAgICAgICAgIC8vIG11dGF0ZWQgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgdmlldy5cbiAgICAgICAgICAgIHRoaXMubXV0YXRlZEtleXMuaGFzKGMua2V5KSAmJiBjLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgICAgICAgICBsZXQgUCA9ICExO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgJiYgYykge1xuICAgICAgICAgICAgICAgIHUuZGF0YS5pc0VxdWFsKGMuZGF0YSkgPyBsICE9PSBoICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBjXG4gICAgICAgICAgICAgICAgfSksIFAgPSAhMCkgOiB0aGlzLklhKHUsIGMpIHx8IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBjXG4gICAgICAgICAgICAgICAgfSksIFAgPSAhMCwgKF8gJiYgdGhpcy51YShjLCBfKSA+IDAgfHwgYSAmJiB0aGlzLnVhKGMsIGEpIDwgMCkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZG9jIG1vdmVkIGZyb20gaW5zaWRlIHRoZSBsaW1pdCB0byBvdXRzaWRlIHRoZSBsaW1pdC5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IG1lYW5zIHRoZXJlIG1heSBiZSBzb21lIG90aGVyIGRvYyBpbiB0aGUgbG9jYWwgY2FjaGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHNob3VsZCBiZSBpbmNsdWRlZCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgfSBlbHNlICF1ICYmIGMgPyAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGNcbiAgICAgICAgICAgIH0pLCBQID0gITApIDogdSAmJiAhYyAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdVxuICAgICAgICAgICAgfSksIFAgPSAhMCwgKF8gfHwgYSkgJiYgKFxuICAgICAgICAgICAgLy8gQSBkb2Mgd2FzIHJlbW92ZWQgZnJvbSBhIGZ1bGwgbGltaXQgcXVlcnkuIFdlJ2xsIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIHJlcXVlcnkgZnJvbSB0aGUgbG9jYWwgY2FjaGUgdG8gc2VlIGlmIHdlIGtub3cgYWJvdXQgc29tZSBvdGhlclxuICAgICAgICAgICAgLy8gZG9jIHRoYXQgc2hvdWxkIGJlIGluIHRoZSByZXN1bHRzLlxuICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICBQICYmIChjID8gKHMgPSBzLmFkZChjKSwgaSA9IGggPyBpLmFkZChlKSA6IGkuZGVsZXRlKGUpKSA6IChzID0gcy5kZWxldGUoZSksIGkgPSBpLmRlbGV0ZShlKSkpO1xuICAgICAgICB9KSksIG51bGwgIT09IHRoaXMucXVlcnkubGltaXQpIGZvciAoO3Muc2l6ZSA+IHRoaXMucXVlcnkubGltaXQ7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyA9PT0gdGhpcy5xdWVyeS5saW1pdFR5cGUgPyBzLmxhc3QoKSA6IHMuZmlyc3QoKTtcbiAgICAgICAgICAgIHMgPSBzLmRlbGV0ZShlLmtleSksIGkgPSBpLmRlbGV0ZShlLmtleSksIG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYTogcyxcbiAgICAgICAgICAgIFBhOiBuLFxuICAgICAgICAgICAgZXM6IG8sXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogaVxuICAgICAgICB9O1xuICAgIH1cbiAgICBJYShlLCB0KSB7XG4gICAgICAgIC8vIFdlIHN1cHByZXNzIHRoZSBpbml0aWFsIGNoYW5nZSBldmVudCBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSBtb2RpZmllZCBhc1xuICAgICAgICAvLyBwYXJ0IG9mIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgKGUuZy4gd2hlbiB0aGUgdmFsdWUgb2YgYSBzZXJ2ZXIgdHJhbnNmb3JtXG4gICAgICAgIC8vIGlzIGFwcGxpZWQpIGFzIFdhdGNoIHdpbGwgc2VuZCB1cyB0aGUgc2FtZSBkb2N1bWVudCBhZ2Fpbi5cbiAgICAgICAgLy8gQnkgc3VwcHJlc3NpbmcgdGhlIGV2ZW50LCB3ZSBvbmx5IHJhaXNlIHR3byB1c2VyIHZpc2libGUgZXZlbnRzIChvbmUgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpIGluc3RlYWQgb2YgdGhyZWVcbiAgICAgICAgLy8gKG9uZSB3aXRoIGBoYXNQZW5kaW5nV3JpdGVzYCwgdGhlIG1vZGlmaWVkIGRvY3VtZW50IHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KS5cbiAgICAgICAgcmV0dXJuIGUuaGFzTG9jYWxNdXRhdGlvbnMgJiYgdC5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiYgIXQuaGFzTG9jYWxNdXRhdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHZpZXcgd2l0aCB0aGUgZ2l2ZW4gVmlld0RvY3VtZW50Q2hhbmdlcyBhbmQgb3B0aW9uYWxseSB1cGRhdGVzXG4gICAgICogbGltYm8gZG9jcyBhbmQgc3luYyBzdGF0ZSBmcm9tIHRoZSBwcm92aWRlZCB0YXJnZXQgY2hhbmdlLlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIHNldCBvZiBjaGFuZ2VzIHRvIG1ha2UgdG8gdGhlIHZpZXcncyBkb2NzLlxuICAgICAqIEBwYXJhbSB1cGRhdGVMaW1ib0RvY3VtZW50cyAtIFdoZXRoZXIgdG8gdXBkYXRlIGxpbWJvIGRvY3VtZW50cyBiYXNlZCBvblxuICAgICAqICAgICAgICB0aGlzIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q2hhbmdlIC0gQSB0YXJnZXQgY2hhbmdlIHRvIGFwcGx5IGZvciBjb21wdXRpbmcgbGltYm8gZG9jcyBhbmRcbiAgICAgKiAgICAgICAgc3luYyBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBWaWV3Q2hhbmdlIHdpdGggdGhlIGdpdmVuIGRvY3MsIGNoYW5nZXMsIGFuZCBzeW5jIHN0YXRlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIGlPUy9BbmRyb2lkIGNsaWVudHMgYWx3YXlzIGNvbXB1dGUgbGltYm8gZG9jdW1lbnQgY2hhbmdlcy5cbiAgICBhcHBseUNoYW5nZXMoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gdGhpcy5jYTtcbiAgICAgICAgdGhpcy5jYSA9IGUuY2EsIHRoaXMubXV0YXRlZEtleXMgPSBlLm11dGF0ZWRLZXlzO1xuICAgICAgICAvLyBTb3J0IGNoYW5nZXMgYmFzZWQgb24gdHlwZSBhbmQgcXVlcnkgY29tcGFyYXRvclxuICAgICAgICBjb25zdCBpID0gZS5QYS5xXygpO1xuICAgICAgICBpLnNvcnQoKChlLCB0KSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUNoYW5nZVR5cGUoZSwgdCkge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBpIGxheWVyLiAgU2luY2Ugd2Ugc29ydCBieSBkb2N1bWVudCBrZXkgYW5kIHRoZW4gY2hhbmdlIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhIGFuZCBtb2RpZmllZCBjaGFuZ2VzIG11c3QgYmUgc29ydGVkIGVxdWl2YWxlbnRseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG9yZGVyKGUpIC0gb3JkZXIodCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKGUudHlwZSwgdC50eXBlKSB8fCB0aGlzLnVhKGUuZG9jLCB0LmRvYykpKSwgdGhpcy5kYShuKTtcbiAgICAgICAgY29uc3QgcyA9IHQgPyB0aGlzLlRhKCkgOiBbXSwgbyA9IDAgPT09IHRoaXMuYWEuc2l6ZSAmJiB0aGlzLmN1cnJlbnQgPyAxIC8qIFN5bmNTdGF0ZS5TeW5jZWQgKi8gOiAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyAsIF8gPSBvICE9PSB0aGlzLl9hO1xuICAgICAgICBpZiAodGhpcy5fYSA9IG8sIDAgIT09IGkubGVuZ3RoIHx8IF8pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IG5ldyBWaWV3U25hcHNob3QodGhpcy5xdWVyeSwgZS5jYSwgciwgaSwgZS5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IG8sIF8sIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSwgISFuICYmIG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksXG4gICAgICAgICAgICAgICAgRWE6IHNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgRWE6IHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgVV8oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IGUgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICBjYTogdGhpcy5jYSxcbiAgICAgICAgICAgIFBhOiBuZXcgX19QUklWQVRFX0RvY3VtZW50Q2hhbmdlU2V0LFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IHRoaXMubXV0YXRlZEtleXMsXG4gICAgICAgICAgICBlczogITFcbiAgICAgICAgfSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyAhMSkpIDoge1xuICAgICAgICAgICAgRWE6IFtdXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgZG9jIGZvciB0aGUgZ2l2ZW4ga2V5IHNob3VsZCBiZSBpbiBsaW1iby5cbiAgICAgKi8gICAgQWEoZSkge1xuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIGVuZCBzYXlzIGl0J3MgcGFydCBvZiB0aGlzIHF1ZXJ5LCBpdCdzIG5vdCBpbiBsaW1iby5cbiAgICAgICAgcmV0dXJuICF0aGlzLm9hLmhhcyhlKSAmJiAoXG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBkb2Vzbid0IHRoaW5rIGl0J3MgYSByZXN1bHQsIHNvIGl0IHNob3VsZG4ndCBiZSBpbiBsaW1iby5cbiAgICAgICAgISF0aGlzLmNhLmhhcyhlKSAmJiAhdGhpcy5jYS5nZXQoZSkuaGFzTG9jYWxNdXRhdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHN5bmNlZERvY3VtZW50cywgY3VycmVudCwgYW5kIGxpbWJvIGRvY3MgYmFzZWQgb24gdGhlIGdpdmVuIGNoYW5nZS5cbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGNoYW5nZXMgdG8gd2hpY2ggZG9jcyBhcmUgaW4gbGltYm8uXG4gICAgICovICAgIGRhKGUpIHtcbiAgICAgICAgZSAmJiAoZS5hZGRlZERvY3VtZW50cy5mb3JFYWNoKChlID0+IHRoaXMub2EgPSB0aGlzLm9hLmFkZChlKSkpLCBlLm1vZGlmaWVkRG9jdW1lbnRzLmZvckVhY2goKGUgPT4ge30pKSwgXG4gICAgICAgIGUucmVtb3ZlZERvY3VtZW50cy5mb3JFYWNoKChlID0+IHRoaXMub2EgPSB0aGlzLm9hLmRlbGV0ZShlKSkpLCB0aGlzLmN1cnJlbnQgPSBlLmN1cnJlbnQpO1xuICAgIH1cbiAgICBUYSgpIHtcbiAgICAgICAgLy8gV2UgY2FuIG9ubHkgZGV0ZXJtaW5lIGxpbWJvIGRvY3VtZW50cyB3aGVuIHdlJ3JlIGluLXN5bmMgd2l0aCB0aGUgc2VydmVyLlxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudCkgcmV0dXJuIFtdO1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogRG8gdGhpcyBpbmNyZW1lbnRhbGx5IHNvIHRoYXQgaXQncyBub3QgcXVhZHJhdGljIHdoZW5cbiAgICAgICAgLy8gdXBkYXRpbmcgbWFueSBkb2N1bWVudHMuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuYWE7XG4gICAgICAgIHRoaXMuYWEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgdGhpcy5jYS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuQWEoZS5rZXkpICYmICh0aGlzLmFhID0gdGhpcy5hYS5hZGQoZS5rZXkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBEaWZmIHRoZSBuZXcgbGltYm8gZG9jcyB3aXRoIHRoZSBvbGQgbGltYm8gZG9jcy5cbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWEuaGFzKGUpIHx8IHQucHVzaChuZXcgX19QUklWQVRFX1JlbW92ZWRMaW1ib0RvY3VtZW50KGUpKTtcbiAgICAgICAgfSkpLCB0aGlzLmFhLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5oYXMobikgfHwgdC5wdXNoKG5ldyBfX1BSSVZBVEVfQWRkZWRMaW1ib0RvY3VtZW50KG4pKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3IHdpdGggdGhlIHN0YXRlIHJlYWQgZnJvbVxuICAgICAqIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogV2UgdXBkYXRlIHRoZSBxdWVyeSB2aWV3IHdoZW5ldmVyIGEgY2xpZW50J3MgcHJpbWFyeSBzdGF0dXMgY2hhbmdlczpcbiAgICAgKiAtIFdoZW4gYSBjbGllbnQgdHJhbnNpdGlvbnMgZnJvbSBwcmltYXJ5IHRvIHNlY29uZGFyeSwgaXQgY2FuIG1pc3NcbiAgICAgKiAgIExvY2FsU3RvcmFnZSB1cGRhdGVzIGFuZCBpdHMgcXVlcnkgdmlld3MgbWF5IHRlbXBvcmFyaWx5IG5vdCBiZVxuICAgICAqICAgc3luY2hyb25pemVkIHdpdGggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICogLSBGb3Igc2Vjb25kYXJ5IHRvIHByaW1hcnkgdHJhbnNpdGlvbnMsIHRoZSBjbGllbnQgbmVlZHMgdG8gdXBkYXRlIHRoZSBsaXN0XG4gICAgICogICBvZiBgc3luY2VkRG9jdW1lbnRzYCBzaW5jZSBzZWNvbmRhcnkgY2xpZW50cyB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3NcbiAgICAgKiAgIGJhc2VkIHB1cmVseSBvbiBzeW50aGVzaXplZCBSZW1vdGVFdmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQuZG9jdW1lbnRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBhY2NvcmRpbmdcbiAgICAgKiB0byB0aGUgTG9jYWxTdG9yZS5cbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQucmVtb3RlS2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGVcbiAgICAgKiBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tlbmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVmlld0NoYW5nZSB0aGF0IHJlc3VsdGVkIGZyb20gdGhpcyBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBSYShlKSB7XG4gICAgICAgIHRoaXMub2EgPSBlLlBzLCB0aGlzLmFhID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmhhKGUuZG9jdW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKHQsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIFZhKCkge1xuICAgICAgICByZXR1cm4gVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzKHRoaXMucXVlcnksIHRoaXMuY2EsIHRoaXMubXV0YXRlZEtleXMsIDAgLyogU3luY1N0YXRlLkxvY2FsICovID09PSB0aGlzLl9hLCB0aGlzLmhhc0NhY2hlZFJlc3VsdHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBRdWVyeVZpZXcgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIHRoYXQgU3luY0VuZ2luZSBuZWVkcyB0byBrZWVwIHRyYWNrIG9mIGZvclxuICogYSBwYXJ0aWN1bGFyIHF1ZXJ5LlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIExpbWJvUmVzb2x1dGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtleSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRvIHRydWUgb25jZSB3ZSd2ZSByZWNlaXZlZCBhIGRvY3VtZW50LiBUaGlzIGlzIHVzZWQgaW5cbiAgICAgICAgICogZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCgpIGFuZCB1bHRpbWF0ZWx5IHVzZWQgYnkgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIHRvXG4gICAgICAgICAqIGRlY2lkZSB3aGV0aGVyIGl0IG5lZWRzIHRvIG1hbnVmYWN0dXJlIGEgZGVsZXRlIGV2ZW50IGZvciB0aGUgdGFyZ2V0IG9uY2VcbiAgICAgICAgICogdGhlIHRhcmdldCBpcyBDVVJSRU5ULlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYSA9ICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgU3luY0VuZ2luZWAgY29vcmRpbmF0aW5nIHdpdGggb3RoZXIgcGFydHMgb2YgU0RLLlxuICpcbiAqIFRoZSBwYXJ0cyBvZiBTeW5jRW5naW5lIHRoYXQgYWN0IGFzIGEgY2FsbGJhY2sgdG8gUmVtb3RlU3RvcmUgbmVlZCB0byBiZVxuICogcmVnaXN0ZXJlZCBpbmRpdmlkdWFsbHkuIFRoaXMgaXMgZG9uZSBpbiBgc3luY0VuZ2luZVdyaXRlKClgIGFuZFxuICogYHN5bmNFbmdpbmVMaXN0ZW4oKWAgKGFzIHdlbGwgYXMgYGFwcGx5UHJpbWFyeVN0YXRlKClgKSBhcyB0aGVzZSBtZXRob2RzXG4gKiBzZXJ2ZSBhcyBlbnRyeSBwb2ludHMgdG8gUmVtb3RlU3RvcmUncyBmdW5jdGlvbmFsaXR5LlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovIGNsYXNzIF9fUFJJVkFURV9TeW5jRW5naW5lSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgIHIsIGksIHMpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5yZW1vdGVTdG9yZSA9IHQsIHRoaXMuZXZlbnRNYW5hZ2VyID0gbiwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHIsIFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyA9IHMsIHRoaXMuZmEgPSB7fSwgdGhpcy5nYSA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkoZSkpLCBfX1BSSVZBVEVfcXVlcnlFcXVhbHMpLCBcbiAgICAgICAgdGhpcy5wYSA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGtleXMgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIGluIGxpbWJvIGZvciB3aGljaCB3ZSBoYXZlbid0IHlldCBzdGFydGVkIGFcbiAgICAgICAgICogbGltYm8gcmVzb2x1dGlvbiBxdWVyeS4gVGhlIHN0cmluZ3MgaW4gdGhpcyBzZXQgYXJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAgICAgKiBga2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKClgIHdoZXJlIGBrZXlgIGlzIGEgYERvY3VtZW50S2V5YCBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBgU2V0YCB0eXBlIHdhcyBjaG9zZW4gYmVjYXVzZSBpdCBwcm92aWRlcyBlZmZpY2llbnQgbG9va3VwIGFuZCByZW1vdmFsXG4gICAgICAgICAqIG9mIGFyYml0cmFyeSBlbGVtZW50cyBhbmQgaXQgYWxzbyBtYWludGFpbnMgaW5zZXJ0aW9uIG9yZGVyLCBwcm92aWRpbmcgdGhlXG4gICAgICAgICAqIGRlc2lyZWQgcXVldWUtbGlrZSBGSUZPIHNlbWFudGljcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueWEgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSB0YXJnZXQgSUQgZm9yIGVhY2ggZG9jdW1lbnQgdGhhdCBpcyBpbiBsaW1ibyB3aXRoIGFuXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndhID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYW4gYWN0aXZlIGxpbWJvIHJlc29sdXRpb24gZm9yIGVhY2hcbiAgICAgICAgICogYWN0aXZlIHRhcmdldCBJRCB0aGF0IHdhcyBzdGFydGVkIGZvciB0aGUgcHVycG9zZSBvZiBsaW1ibyByZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5TYSA9IG5ldyBNYXAsIHRoaXMuYmEgPSBuZXcgX19QUklWQVRFX1JlZmVyZW5jZVNldCwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjb21wbGV0aW9uIGhhbmRsZXJzLCBpbmRleGVkIGJ5IFVzZXIgYW5kIEJhdGNoSWQuICovXG4gICAgICAgIHRoaXMuRGEgPSB7fSwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjYWxsYmFja3Mgd2FpdGluZyBmb3IgYWxsIHBlbmRpbmcgd3JpdGVzIHRvIGJlIGFja25vd2xlZGdlZC4gKi9cbiAgICAgICAgdGhpcy5DYSA9IG5ldyBNYXAsIHRoaXMudmEgPSBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IuTG4oKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXG4gICAgICAgIHRoaXMuRmEgPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBpc1ByaW1hcnlDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiAhMCA9PT0gdGhpcy5GYTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxuICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxuICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgaW5pdGlhbCBzbmFwc2hvdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVMaXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MoZSk7XG4gICAgbGV0IHIsIGk7XG4gICAgY29uc3QgcyA9IG4uZ2EuZ2V0KHQpO1xuICAgIGlmIChzKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcbiAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcbiAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cbiAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xuICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcbiAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cbiAgICByID0gcy50YXJnZXRJZCwgbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHIpLCBpID0gcy52aWV3LlZhKCk7IGVsc2Uge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChuLmxvY2FsU3RvcmUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKSwgcyA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldChlLnRhcmdldElkKTtcbiAgICAgICAgciA9IGUudGFyZ2V0SWQsIGkgPSBhd2FpdCBfX1BSSVZBVEVfaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QobiwgdCwgciwgXCJjdXJyZW50XCIgPT09IHMsIGUucmVzdW1lVG9rZW4pLCBcbiAgICAgICAgbi5pc1ByaW1hcnlDbGllbnQgJiYgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKG4ucmVtb3RlU3RvcmUsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB2aWV3IGZvciBhIHByZXZpb3VzbHkgdW5rbm93biBxdWVyeSBhbmQgY29tcHV0ZXMgaXRzIGluaXRpYWxcbiAqIHNuYXBzaG90LlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChlLCB0LCBuLCByLCBpKSB7XG4gICAgLy8gUE9SVElORyBOT1RFOiBPbiBXZWIgb25seSwgd2UgaW5qZWN0IHRoZSBjb2RlIHRoYXQgcmVnaXN0ZXJzIG5ldyBMaW1ib1xuICAgIC8vIHRhcmdldHMgYmFzZWQgb24gdmlldyBjaGFuZ2VzLiBUaGlzIGFsbG93cyB1cyB0byBvbmx5IGRlcGVuZCBvbiBMaW1ib1xuICAgIC8vIGNoYW5nZXMgd2hlbiB1c2VyIGNvZGUgaW5jbHVkZXMgcXVlcmllcy5cbiAgICBlLk1hID0gKHQsIG4sIHIpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURvY0NoYW5nZXMoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IHQudmlldy5oYShuKTtcbiAgICAgICAgaS5lcyAmJiAoXG4gICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxuICAgICAgICAvLyB0byByZS1ydW4gdGhlIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIHRvIG1ha2Ugc3VyZSB3ZVxuICAgICAgICAvLyBkaWRuJ3QgbG9zZSBhbnkgZ29vZCBkb2NzIHRoYXQgaGFkIGJlZW4gcGFzdCB0aGUgbGltaXQuXG4gICAgICAgIGkgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLmxvY2FsU3RvcmUsIHQucXVlcnksIFxuICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICExKS50aGVuKCgoe2RvY3VtZW50czogZX0pID0+IHQudmlldy5oYShlLCBpKSkpKTtcbiAgICAgICAgY29uc3QgcyA9IHIgJiYgci50YXJnZXRDaGFuZ2VzLmdldCh0LnRhcmdldElkKSwgbyA9IHQudmlldy5hcHBseUNoYW5nZXMoaSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyBlLmlzUHJpbWFyeUNsaWVudCwgcyk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdXBkYXRlVHJhY2tlZExpbWJvcyhlLCB0LnRhcmdldElkLCBvLkVhKSwgby5zbmFwc2hvdDtcbiAgICB9KGUsIHQsIG4sIHIpO1xuICAgIGNvbnN0IHMgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLmxvY2FsU3RvcmUsIHQsIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBvID0gbmV3IF9fUFJJVkFURV9WaWV3KHQsIHMuUHMpLCBfID0gby5oYShzLmRvY3VtZW50cyksIGEgPSBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHIgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gZS5vbmxpbmVTdGF0ZSwgaSksIHUgPSBvLmFwcGx5Q2hhbmdlcyhfLCBcbiAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gZS5pc1ByaW1hcnlDbGllbnQsIGEpO1xuICAgIF9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zKGUsIG4sIHUuRWEpO1xuICAgIGNvbnN0IGMgPSBuZXcgX19QUklWQVRFX1F1ZXJ5Vmlldyh0LCBuLCBvKTtcbiAgICByZXR1cm4gZS5nYS5zZXQodCwgYyksIGUucGEuaGFzKG4pID8gZS5wYS5nZXQobikucHVzaCh0KSA6IGUucGEuc2V0KG4sIFsgdCBdKSwgdS5zbmFwc2hvdDtcbn1cblxuLyoqIFN0b3BzIGxpc3RlbmluZyB0byB0aGUgcXVlcnkuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5nYS5nZXQodCksIGkgPSBuLnBhLmdldChyLnRhcmdldElkKTtcbiAgICBpZiAoaS5sZW5ndGggPiAxKSByZXR1cm4gbi5wYS5zZXQoci50YXJnZXRJZCwgaS5maWx0ZXIoKGUgPT4gIV9fUFJJVkFURV9xdWVyeUVxdWFscyhlLCB0KSkpKSwgXG4gICAgdm9pZCBuLmdhLmRlbGV0ZSh0KTtcbiAgICAvLyBObyBvdGhlciBxdWVyaWVzIGFyZSBtYXBwZWQgdG8gdGhlIHRhcmdldCwgY2xlYW4gdXAgdGhlIHF1ZXJ5IGFuZCB0aGUgdGFyZ2V0LlxuICAgICAgICBpZiAobi5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcbiAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChyLnRhcmdldElkKTtcbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHIudGFyZ2V0SWQpIHx8IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChuLmxvY2FsU3RvcmUsIHIudGFyZ2V0SWQsIFxuICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShyLnRhcmdldElkKSwgX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4obi5yZW1vdGVTdG9yZSwgci50YXJnZXRJZCksIFxuICAgICAgICAgICAgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQobiwgci50YXJnZXRJZCk7XG4gICAgICAgIH0pKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbiAgICB9IGVsc2UgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQobiwgci50YXJnZXRJZCksIGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChuLmxvY2FsU3RvcmUsIHIudGFyZ2V0SWQsIFxuICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApO1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxuICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XG4gKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cbiAqXG4gKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcbiAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxuICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcbiAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVdyaXRlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX3N5bmNFbmdpbmVFbnN1cmVXcml0ZUNhbGxiYWNrcyhlKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVXcml0ZUxvY2FsbHkoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBUaW1lc3RhbXAubm93KCksIGkgPSB0LnJlZHVjZSgoKGUsIHQpID0+IGUuYWRkKHQua2V5KSksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICAgICAgICAgIGxldCBzLCBvO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb2NhbGx5IHdyaXRlIG11dGF0aW9uc1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmlndXJlIG91dCB3aGljaCBrZXlzIGRvIG5vdCBoYXZlIGEgcmVtb3RlIHZlcnNpb24gaW4gdGhlIGNhY2hlLCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gaXMgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgcmlnaHQgb3ZlcmxheSBtdXRhdGlvbjogaWYgbm8gcmVtb3RlIHZlcnNpb25cbiAgICAgICAgICAgICAgICAvLyBwcmVzZW50cywgd2UgZG8gbm90IG5lZWQgdG8gY3JlYXRlIG92ZXJsYXlzIGFzIHBhdGNoIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPKE92ZXJsYXkpOiBJcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZGV0ZXJtaW5lIHRoaXM/IFVzaW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vICBkb2N1bWVudCB2ZXJzaW9uIGRvZXMgbm90IHdvcmsgYmVjYXVzZSBsb2NhbCBtdXRhdGlvbnMgc2V0IHRoZW0gYmFja1xuICAgICAgICAgICAgICAgIC8vICB0byAwLlxuICAgICAgICAgICAgICAgIGxldCBfID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBhID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uX3MuZ2V0RW50cmllcyhlLCBpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgXyA9IGUsIF8uZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuaXNWYWxpZERvY3VtZW50KCkgfHwgKGEgPSBhLmFkZChlKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXRPdmVybGF5ZWREb2N1bWVudHMoZSwgXykpKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IGk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgcmVjb3JkIHRoZSBiYXNlIHN0YXRlIGluIGEgc2VwYXJhdGUgcGF0Y2ggbXV0YXRpb24uIFRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbXV0YXRpb25FeHRyYWN0QmFzZVZhbHVlKGUsIHMuZ2V0KGUua2V5KS5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHQgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oZS5rZXksIHQsIF9fUFJJVkFURV9leHRyYWN0RmllbGRNYXNrKHQudmFsdWUubWFwVmFsdWUpLCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUuYWRkTXV0YXRpb25CYXRjaChlLCByLCBvLCB0KTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG8gPSB0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gdC5hcHBseVRvTG9jYWxEb2N1bWVudFNldChzLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUuc2F2ZU92ZXJsYXlzKGUsIHQuYmF0Y2hJZCwgcik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLnRoZW4oKCgpID0+ICh7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogby5iYXRjaElkLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IF9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwKHMpXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KHIubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKGUuYmF0Y2hJZCksIGZ1bmN0aW9uIF9fUFJJVkFURV9hZGRNdXRhdGlvbkNhbGxiYWNrKGUsIHQsIG4pIHtcbiAgICAgICAgICAgIGxldCByID0gZS5EYVtlLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgICAgICAgICAgciB8fCAociA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpKTtcbiAgICAgICAgICAgIHIgPSByLmluc2VydCh0LCBuKSwgZS5EYVtlLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gcjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlc29sdmVzIG9yIHJlamVjdHMgdGhlIHVzZXIgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgdGhlbiBkaXNjYXJkc1xuICogaXQuXG4gKi8gKHIsIGUuYmF0Y2hJZCwgbiksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShyLCBlLmNoYW5nZXMpLCBcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKHIucmVtb3RlU3RvcmUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgcGVyc2lzdCB0aGUgbXV0YXRpb24sIHdlIHJlamVjdCB0aGUgdXNlciBjYWxsYmFjayBhbmRcbiAgICAgICAgLy8gZG9uJ3Qgc2VuZCB0aGUgbXV0YXRpb24uIFRoZSB1c2VyIGNhbiB0aGVuIHJldHJ5IHRoZSB3cml0ZS5cbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIFwiRmFpbGVkIHRvIHBlcnNpc3Qgd3JpdGVcIik7XG4gICAgICAgIG4ucmVqZWN0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIG9uZSByZW1vdGUgZXZlbnQgdG8gdGhlIHN5bmMgZW5naW5lLCBub3RpZnlpbmcgYW55IHZpZXdzIG9mIHRoZVxuICogY2hhbmdlcywgYW5kIHJlbGVhc2luZyBhbnkgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgd291bGQgYmVjb21lXG4gKiB2aXNpYmxlIGJlY2F1c2Ugb2YgdGhlIHNuYXBzaG90IHZlcnNpb24gdGhlIHJlbW90ZSBldmVudCBjb250YWlucy5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFwcGx5UmVtb3RlRXZlbnRUb0xvY2FsQ2FjaGUobi5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXG4gICAgICAgICAgICAgICAgdC50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gbi5TYS5nZXQodCk7XG4gICAgICAgICAgICByICYmIChcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcbiAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUuYWRkZWREb2N1bWVudHMuc2l6ZSArIGUubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIGUucmVtb3ZlZERvY3VtZW50cy5zaXplIDw9IDEpLCBcbiAgICAgICAgICAgIGUuYWRkZWREb2N1bWVudHMuc2l6ZSA+IDAgPyByLm1hID0gITAgOiBlLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgPiAwID8gX19QUklWQVRFX2hhcmRBc3NlcnQoci5tYSkgOiBlLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDAgJiYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHIubWEpLCBcbiAgICAgICAgICAgIHIubWEgPSAhMSkpO1xuICAgICAgICB9KSksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShuLCBlLCB0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXG4gKiB0aGUgY2hhbmdlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlPbmxpbmVTdGF0ZUNoYW5nZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgLy8gSWYgd2UgYXJlIHRoZSBzZWNvbmRhcnkgY2xpZW50LCB3ZSBleHBsaWNpdGx5IGlnbm9yZSB0aGUgcmVtb3RlIHN0b3JlJ3NcbiAgICAvLyBvbmxpbmUgc3RhdGUgKHRoZSBsb2NhbCBjbGllbnQgbWF5IGdvIG9mZmxpbmUsIGV2ZW4gdGhvdWdoIHRoZSBwcmltYXJ5XG4gICAgLy8gdGFiIHJlbWFpbnMgb25saW5lKSBhbmQgb25seSBhcHBseSB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUgZnJvbVxuICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBpZiAoci5pc1ByaW1hcnlDbGllbnQgJiYgMCAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5SZW1vdGVTdG9yZSAqLyA9PT0gbiB8fCAhci5pc1ByaW1hcnlDbGllbnQgJiYgMSAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSAqLyA9PT0gbikge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHIuZ2EuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSByLnZpZXcuVV8odCk7XG4gICAgICAgICAgICBpLnNuYXBzaG90ICYmIGUucHVzaChpLnNuYXBzaG90KTtcbiAgICAgICAgfSkpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25PbmxpbmVTdGF0ZUNoYW5nZShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIG4ub25saW5lU3RhdGUgPSB0O1xuICAgICAgICAgICAgbGV0IHIgPSAhMTtcbiAgICAgICAgICAgIG4ucXVlcmllcy5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBuLmxpc3RlbmVycykgXG4gICAgICAgICAgICAgICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgICAgICAgICAgICAgZS5VXyh0KSAmJiAociA9ICEwKTtcbiAgICAgICAgICAgIH0pKSwgciAmJiBfX1BSSVZBVEVfcmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudChuKTtcbiAgICAgICAgfShyLmV2ZW50TWFuYWdlciwgdCksIGUubGVuZ3RoICYmIHIuZmEuY18oZSksIHIub25saW5lU3RhdGUgPSB0LCByLmlzUHJpbWFyeUNsaWVudCAmJiByLnNoYXJlZENsaWVudFN0YXRlLnNldE9ubGluZVN0YXRlKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWplY3RzIHRoZSBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXRJRC4gVGhpcyBjYW4gYmUgdHJpZ2dlcmVkIGJ5IHRoZVxuICogYmFja2VuZCBmb3IgYW55IGFjdGl2ZSB0YXJnZXQuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0gdGFyZ2V0SWQgLSBUaGUgdGFyZ2V0SUQgY29ycmVzcG9uZHMgdG8gb25lIHByZXZpb3VzbHkgaW5pdGlhdGVkIGJ5IHRoZVxuICogdXNlciBhcyBwYXJ0IG9mIFRhcmdldERhdGEgcGFzc2VkIHRvIGxpc3RlbigpIG9uIFJlbW90ZVN0b3JlLlxuICogQHBhcmFtIGVyciAtIEEgZGVzY3JpcHRpb24gb2YgdGhlIGNvbmRpdGlvbiB0aGF0IGhhcyBmb3JjZWQgdGhlIHJlamVjdGlvbi5cbiAqIE5lYXJseSBhbHdheXMgdGhpcyB3aWxsIGJlIGFuIGluZGljYXRpb24gdGhhdCB0aGUgdXNlciBpcyBubyBsb25nZXJcbiAqIGF1dGhvcml6ZWQgdG8gc2VlIHRoZSBkYXRhIG1hdGNoaW5nIHRoZSB0YXJnZXQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RMaXN0ZW4oZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZSh0LCBcInJlamVjdGVkXCIsIG4pO1xuICAgIGNvbnN0IGkgPSByLlNhLmdldCh0KSwgcyA9IGkgJiYgaS5rZXk7XG4gICAgaWYgKHMpIHtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IFdlIHJlYWxseSBvbmx5IHNob3VsZCBkbyB0aGUgZm9sbG93aW5nIG9uIHBlcm1pc3Npb25cbiAgICAgICAgLy8gZGVuaWVkIGVycm9ycywgYnV0IHdlIGRvbid0IGhhdmUgdGhlIGNhdXNlIGNvZGUgaGVyZS5cbiAgICAgICAgLy8gSXQncyBhIGxpbWJvIGRvYy4gQ3JlYXRlIGEgc3ludGhldGljIGV2ZW50IHNheWluZyBpdCB3YXMgZGVsZXRlZC5cbiAgICAgICAgLy8gVGhpcyBpcyBraW5kIG9mIGEgaGFjay4gSWRlYWxseSwgd2Ugd291bGQgaGF2ZSBhIG1ldGhvZCBpbiB0aGUgbG9jYWxcbiAgICAgICAgLy8gc3RvcmUgdG8gcHVyZ2UgYSBkb2N1bWVudC4gSG93ZXZlciwgaXQgd291bGQgYmUgdHJpY2t5IHRvIGtlZXAgYWxsIG9mXG4gICAgICAgIC8vIHRoZSBsb2NhbCBzdG9yZSdzIGludmFyaWFudHMgd2l0aCBhbm90aGVyIG1ldGhvZC5cbiAgICAgICAgbGV0IGUgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuICAgICAgICAvLyBUT0RPKGIvMjE3MTg5MjE2KTogVGhpcyBsaW1ibyBkb2N1bWVudCBzaG91bGQgaWRlYWxseSBoYXZlIGEgcmVhZCB0aW1lLFxuICAgICAgICAvLyBzbyB0aGF0IGl0IGlzIHBpY2tlZCB1cCBieSBhbnkgcmVhZC10aW1lIGJhc2VkIHNjYW5zLiBUaGUgYmFja2VuZCxcbiAgICAgICAgLy8gaG93ZXZlciwgZG9lcyBub3Qgc2VuZCBhIHJlYWQgdGltZSBmb3IgdGFyZ2V0IHJlbW92YWxzLlxuICAgICAgICAgICAgICAgIGUgPSBlLmluc2VydChzLCBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChzLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpKTtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLmFkZChzKSwgaSA9IG5ldyBSZW1vdGVFdmVudChTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiB0YXJnZXRDaGFuZ2VzPSAqLyBuZXcgTWFwLCBcbiAgICAgICAgLyogdGFyZ2V0TWlzbWF0Y2hlcz0gKi8gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIGUsIG4pO1xuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQociwgaSksIFxuICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cbiAgICAgICAgLy8gV2Ugb25seSByZW1vdmUgaXQgZnJvbSBib29ra2VlcGluZyBhZnRlciB3ZSBzdWNjZXNzZnVsbHkgYXBwbGllZCB0aGVcbiAgICAgICAgLy8gUmVtb3RlRXZlbnQuIElmIGBhcHBseVJlbW90ZUV2ZW50KClgIHRocm93cywgd2Ugd2FudCB0byByZS1saXN0ZW4gdG9cbiAgICAgICAgLy8gdGhpcyBxdWVyeSB3aGVuIHRoZSBSZW1vdGVTdG9yZSByZXN0YXJ0cyB0aGUgV2F0Y2ggc3RyZWFtLCB3aGljaCBzaG91bGRcbiAgICAgICAgLy8gcmUtdHJpZ2dlciB0aGUgdGFyZ2V0IGZhaWx1cmUuXG4gICAgICAgIHIud2EgPSByLndhLnJlbW92ZShzKSwgci5TYS5kZWxldGUodCksIF9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zKHIpO1xuICAgIH0gZWxzZSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoci5sb2NhbFN0b3JlLCB0LCBcbiAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4gX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQociwgdCwgbikpKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVN1Y2Nlc3NmdWxXcml0ZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSB0LmJhdGNoLmJhdGNoSWQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWNrbm93bGVkZ2VCYXRjaChuLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodFxuICAgICAgICAvLyB1cCksIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuXG4gICAgICAgIC8vIGJlZm9yZSBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKG4sIHIsIC8qZXJyb3I9Ki8gbnVsbCksIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhuLCByKSwgXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShyLCBcImFja25vd2xlZGdlZFwiKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0RmFpbGVkV3JpdGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlamVjdEJhdGNoKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWplY3QgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5sb29rdXBNdXRhdGlvbkJhdGNoKGUsIHQpLm5leHQoKHQgPT4gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgIT09IHQpLCBcbiAgICAgICAgICAgICAgICByID0gdC5rZXlzKCksIG4ubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQpKSkpLm5leHQoKCgpID0+IG4ubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKSkpLm5leHQoKCgpID0+IG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUucmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKGUsIHIsIHQpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhlLCByKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKGUsIHIpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXJnZXN0IChsYXRlc3QpIGJhdGNoIGlkIGluIG11dGF0aW9uIHF1ZXVlIHRoYXQgaXMgcGVuZGluZ1xuICogc2VydmVyIHJlc3BvbnNlLlxuICpcbiAqIFJldHVybnMgYEJBVENISURfVU5LTk9XTmAgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICovIChyLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodCB1cCksXG4gICAgICAgIC8vIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuIGJlZm9yZVxuICAgICAgICAvLyBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKHIsIHQsIG4pLCBfX1BSSVZBVEVfdHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MociwgdCksIFxuICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUodCwgXCJyZWplY3RlZFwiLCBuKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKHIsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVSZWdpc3RlclBlbmRpbmdXcml0ZXNDYWxsYmFjayhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgX19QUklWQVRFX2NhblVzZU5ldHdvcmsobi5yZW1vdGVTdG9yZSkgfHwgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIlRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLiBUaGUgdGFzayByZXR1cm5lZCBieSAnYXdhaXRQZW5kaW5nV3JpdGVzKCknIHdpbGwgbm90IGNvbXBsZXRlIHVudGlsIHRoZSBuZXR3b3JrIGlzIGVuYWJsZWQuXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICByZXR1cm4gdC5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBoaWdoZXN0IHVuYWNrbm93bGVkZ2VkIGJhdGNoIGlkXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gdC5tdXRhdGlvblF1ZXVlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoZSkpKTtcbiAgICAgICAgfShuLmxvY2FsU3RvcmUpO1xuICAgICAgICBpZiAoLTEgPT09IGUpIFxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXG4gICAgICAgIHJldHVybiB2b2lkIHQucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCByID0gbi5DYS5nZXQoZSkgfHwgW107XG4gICAgICAgIHIucHVzaCh0KSwgbi5DYS5zZXQoZSwgcik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgXCJJbml0aWFsaXphdGlvbiBvZiB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIG9wZXJhdGlvbiBmYWlsZWRcIik7XG4gICAgICAgIHQucmVqZWN0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2FsbGJhY2tzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHRoaXMgYmF0Y2ggaWQgdG8gZ2V0IGFja25vd2xlZGdlZCBieSBzZXJ2ZXIsXG4gKiBpZiB0aGVyZSBhcmUgYW55LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhlLCB0KSB7XG4gICAgKGUuQ2EuZ2V0KHQpIHx8IFtdKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgZS5yZXNvbHZlKCk7XG4gICAgfSkpLCBlLkNhLmRlbGV0ZSh0KTtcbn1cblxuLyoqIFJlamVjdCBhbGwgb3V0c3RhbmRpbmcgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHRvIGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcHJvY2Vzc1VzZXJDYWxsYmFjayhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbGV0IGkgPSByLkRhW3IuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgLy8gTk9URTogTXV0YXRpb25zIHJlc3RvcmVkIGZyb20gcGVyc2lzdGVuY2Ugd29uJ3QgaGF2ZSBjYWxsYmFja3MsIHNvIGl0J3NcbiAgICAvLyBva2F5IGZvciB0aGVyZSB0byBiZSBubyBjYWxsYmFjayBmb3IgdGhpcyBJRC5cbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgY29uc3QgZSA9IGkuZ2V0KHQpO1xuICAgICAgICBlICYmIChuID8gZS5yZWplY3QobikgOiBlLnJlc29sdmUoKSwgaSA9IGkucmVtb3ZlKHQpKSwgci5EYVtyLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gaTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KGUsIHQsIG4gPSBudWxsKSB7XG4gICAgZS5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpO1xuICAgIGZvciAoY29uc3QgciBvZiBlLnBhLmdldCh0KSkgZS5nYS5kZWxldGUociksIG4gJiYgZS5mYS54YShyLCBuKTtcbiAgICBpZiAoZS5wYS5kZWxldGUodCksIGUuaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIGUuYmEubXIodCkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLmJhLmNvbnRhaW5zS2V5KHQpIHx8IFxuICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3ZlTGltYm9UYXJnZXQoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVMaW1ib1RhcmdldChlLCB0KSB7XG4gICAgZS55YS5kZWxldGUodC5wYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC4gSW4gdGhhdCBjYXNlLFxuICAgIC8vIHRoZSBrZXkgd29uJ3QgZXhpc3QgaW4gYGxpbWJvVGFyZ2V0c0J5S2V5YC4gT25seSBkbyB0aGUgY2xlYW51cCBpZiB3ZSBzdGlsbCBoYXZlIHRoZSB0YXJnZXQuXG4gICAgY29uc3QgbiA9IGUud2EuZ2V0KHQpO1xuICAgIG51bGwgIT09IG4gJiYgKF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKGUucmVtb3RlU3RvcmUsIG4pLCBlLndhID0gZS53YS5yZW1vdmUodCksIFxuICAgIGUuU2EuZGVsZXRlKG4pLCBfX1BSSVZBVEVfcHVtcEVucXVldWVkTGltYm9SZXNvbHV0aW9ucyhlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zKGUsIHQsIG4pIHtcbiAgICBmb3IgKGNvbnN0IHIgb2YgbikgaWYgKHIgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQWRkZWRMaW1ib0RvY3VtZW50KSBlLmJhLmFkZFJlZmVyZW5jZShyLmtleSwgdCksIFxuICAgIF9fUFJJVkFURV90cmFja0xpbWJvQ2hhbmdlKGUsIHIpOyBlbHNlIGlmIChyIGluc3RhbmNlb2YgX19QUklWQVRFX1JlbW92ZWRMaW1ib0RvY3VtZW50KSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86IFwiICsgci5rZXkpLCBlLmJhLnJlbW92ZVJlZmVyZW5jZShyLmtleSwgdCk7XG4gICAgICAgIGUuYmEuY29udGFpbnNLZXkoci5rZXkpIHx8IFxuICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgX19QUklWQVRFX3JlbW92ZUxpbWJvVGFyZ2V0KGUsIHIua2V5KTtcbiAgICB9IGVsc2UgZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdHJhY2tMaW1ib0NoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQua2V5LCByID0gbi5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIGUud2EuZ2V0KG4pIHx8IGUueWEuaGFzKHIpIHx8IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTeW5jRW5naW5lXCIsIFwiTmV3IGRvY3VtZW50IGluIGxpbWJvOiBcIiArIG4pLCBcbiAgICBlLnlhLmFkZChyKSwgX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMoZSkpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBsaXN0ZW5zIGZvciBkb2N1bWVudHMgaW4gbGltYm8gdGhhdCBhcmUgZW5xdWV1ZWQgZm9yIHJlc29sdXRpb24sXG4gKiBzdWJqZWN0IHRvIGEgbWF4aW11bSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucy5cbiAqXG4gKiBXaXRob3V0IGJvdW5kaW5nIHRoZSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucywgdGhlIHNlcnZlciBjYW4gZmFpbFxuICogd2l0aCBcInJlc291cmNlIGV4aGF1c3RlZFwiIGVycm9ycyB3aGljaCBjYW4gbGVhZCB0byBwYXRob2xvZ2ljYWwgY2xpZW50XG4gKiBiZWhhdmlvciBhcyBzZWVuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI2ODMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMoZSkge1xuICAgIGZvciAoO2UueWEuc2l6ZSA+IDAgJiYgZS53YS5zaXplIDwgZS5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczsgKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLnlhLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgZS55YS5kZWxldGUodCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCkpLCByID0gZS52YS5uZXh0KCk7XG4gICAgICAgIGUuU2Euc2V0KHIsIG5ldyBMaW1ib1Jlc29sdXRpb24obikpLCBlLndhID0gZS53YS5pbnNlcnQobiwgciksIF9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbihlLnJlbW90ZVN0b3JlLCBuZXcgVGFyZ2V0RGF0YShfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKG4ucGF0aCkpLCByLCBcIlRhcmdldFB1cnBvc2VMaW1ib1Jlc29sdXRpb25cIiAvKiBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiAqLyAsIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5hZSkpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IFtdLCBzID0gW10sIG8gPSBbXTtcbiAgICByLmdhLmlzRW1wdHkoKSB8fCAoci5nYS5mb3JFYWNoKCgoZSwgXykgPT4ge1xuICAgICAgICBvLnB1c2goci5NYShfLCB0LCBuKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB2aWV3cyBpZiB0aGVyZSBhcmUgYWN0dWFsIGNoYW5nZXMuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgY2hhbmdlcywgb3Igd2UgYXJlIGhhbmRsaW5nIGEgZ2xvYmFsIHNuYXBzaG90LCBub3RpZnlcbiAgICAgICAgICAgIC8vIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSBxdWVyeSBzdGF0ZS5cbiAgICAgICAgICAgIChlIHx8IG4pICYmIHIuaXNQcmltYXJ5Q2xpZW50ICYmIHIuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShfLnRhcmdldElkLCAobnVsbCA9PSBlID8gdm9pZCAwIDogZS5mcm9tQ2FjaGUpID8gXCJub3QtY3VycmVudFwiIDogXCJjdXJyZW50XCIpLCBcbiAgICAgICAgICAgIGUpIHtcbiAgICAgICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9Mb2NhbFZpZXdDaGFuZ2VzLiRpKF8udGFyZ2V0SWQsIGUpO1xuICAgICAgICAgICAgICAgIHMucHVzaCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKTtcbiAgICB9KSksIGF3YWl0IFByb21pc2UuYWxsKG8pLCByLmZhLmNfKGkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZU5vdGlmeUxvY2FsVmlld0NoYW5nZXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJub3RpZnlMb2NhbFZpZXdDaGFuZ2VzXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQuUWksIChyID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKGUsIHQudGFyZ2V0SWQsIHIpKSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godC5LaSwgKHIgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UoZSwgdC50YXJnZXRJZCwgcikpKSkpKSkpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSB0aHJvdyBlO1xuICAgICAgICAgICAgLy8gSWYgYG5vdGlmeUxvY2FsVmlld0NoYW5nZXNgIGZhaWxzLCB3ZSBkaWQgbm90IGFkdmFuY2UgdGhlIHNlcXVlbmNlXG4gICAgICAgICAgICAvLyBudW1iZXIgZm9yIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIGluY2x1ZGVkIGluIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIG1pZ2h0IHRyaWdnZXIgdGhlbSB0byBiZSBkZWxldGVkIGVhcmxpZXIgdGhhbiB0aGV5IG90aGVyd2lzZVxuICAgICAgICAgICAgLy8gd291bGQgaGF2ZSwgYnV0IGl0IHNob3VsZCBub3QgaW52YWxpZGF0ZSB0aGUgaW50ZWdyaXR5IG9mIHRoZSBkYXRhLlxuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTG9jYWxTdG9yZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIgKyBlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0SWQ7XG4gICAgICAgICAgICBpZiAoIWUuZnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG4ucnMuZ2V0KHQpLCByID0gZS5zbmFwc2hvdFZlcnNpb24sIGkgPSBlLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHIpO1xuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucnMgPSBuLnJzLmluc2VydCh0LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0oci5sb2NhbFN0b3JlLCBzKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lSGFuZGxlQ3JlZGVudGlhbENoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKCFuLmN1cnJlbnRVc2VyLmlzRXF1YWwodCkpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIlVzZXIgY2hhbmdlLiBOZXcgdXNlcjpcIiwgdC50b0tleSgpKTtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZShuLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICBuLmN1cnJlbnRVc2VyID0gdCwgXG4gICAgICAgIC8vIEZhaWxzIHRhc2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHJlcXVlc3RlZCBieSBwcmV2aW91cyB1c2VyLlxuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfcmVqZWN0T3V0c3RhbmRpbmdQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGUsIHQpIHtcbiAgICAgICAgICAgIGUuQ2EuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKEQuQ0FOQ0VMTEVELCB0KSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCBlLkNhLmNsZWFyKCk7XG4gICAgICAgIH0obiwgXCInd2FpdEZvclBlbmRpbmdXcml0ZXMnIHByb21pc2UgaXMgcmVqZWN0ZWQgZHVlIHRvIGEgdXNlciBjaGFuZ2UuXCIpLCBcbiAgICAgICAgLy8gVE9ETyhiLzExNDIyNjQxNyk6IENvbnNpZGVyIGNhbGxpbmcgdGhpcyBvbmx5IGluIHRoZSBwcmltYXJ5IHRhYi5cbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5oYW5kbGVVc2VyQ2hhbmdlKHQsIGUucmVtb3ZlZEJhdGNoSWRzLCBlLmFkZGVkQmF0Y2hJZHMpLCBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUobiwgZS5jcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5TYS5nZXQodCk7XG4gICAgaWYgKHIgJiYgci5tYSkgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLmFkZChyLmtleSk7XG4gICAge1xuICAgICAgICBsZXQgZSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICBjb25zdCByID0gbi5wYS5nZXQodCk7XG4gICAgICAgIGlmICghcikgcmV0dXJuIGU7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiByKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbi5nYS5nZXQodCk7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgoci52aWV3LmxhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXG4gKiBmcm9tIHBlcnNpc3RlbmNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jaHJvbml6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVFeGVjdXRlUXVlcnkobi5sb2NhbFN0b3JlLCB0LnF1ZXJ5LCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgaSA9IHQudmlldy5SYShyKTtcbiAgICByZXR1cm4gbi5pc1ByaW1hcnlDbGllbnQgJiYgX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MobiwgdC50YXJnZXRJZCwgaS5FYSksIFxuICAgIGk7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIG5ld2x5IGNoYW5nZWQgZG9jdW1lbnRzIGZyb20gcmVtb3RlIGRvY3VtZW50IGNhY2hlIGFuZCByYWlzZXNcbiAqIHNuYXBzaG90cyBpZiBuZWVkZWQuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVN5bmNocm9uaXplV2l0aENoYW5nZWREb2N1bWVudHMoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5ld0RvY3VtZW50Q2hhbmdlcyhuLmxvY2FsU3RvcmUsIHQpLnRoZW4oKGUgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUpKSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgbXV0YXRpb24gc3RhdGUgdG8gYW4gZXhpc3RpbmcgYmF0Y2guICAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlCYXRjaFN0YXRlKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgcyA9IGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlTG9va3VwTXV0YXRpb25Eb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3Qobi5tdXRhdGlvblF1ZXVlKTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gci5GbihlLCB0KS5uZXh0KCh0ID0+IHQgPyBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyhlLCB0KSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpKSkpKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCB0KTtcbiAgICBudWxsICE9PSBzID8gKFwicGVuZGluZ1wiID09PSBuID8gXG4gICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXG4gICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxuICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXG4gICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGkucmVtb3RlU3RvcmUpIDogXCJhY2tub3dsZWRnZWRcIiA9PT0gbiB8fCBcInJlamVjdGVkXCIgPT09IG4gPyAoXG4gICAgLy8gTk9URTogQm90aCB0aGVzZSBtZXRob2RzIGFyZSBuby1vcHMgZm9yIGJhdGNoZXMgdGhhdCBvcmlnaW5hdGVkIGZyb21cbiAgICAvLyBvdGhlciBjbGllbnRzLlxuICAgIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKGksIHQsIHIgfHwgbnVsbCksIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhpLCB0KSwgXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVSZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfZGVidWdDYXN0KF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkubXV0YXRpb25RdWV1ZSkueG4odCk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgdCkpIDogZmFpbCgpLCBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoaSwgcykpIDogXG4gICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxuICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXG4gICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXG4gICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxuICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xuICAgIC8vIGFzIGFwcGxpY2FibGUuXG4gICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIkNhbm5vdCBhcHBseSBtdXRhdGlvbiBiYXRjaCB3aXRoIGlkOiBcIiArIHQpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVByaW1hcnlTdGF0ZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhuKSwgX19QUklWQVRFX3N5bmNFbmdpbmVFbnN1cmVXcml0ZUNhbGxiYWNrcyhuKSwgXG4gICAgITAgPT09IHQgJiYgITAgIT09IG4uRmEpIHtcbiAgICAgICAgLy8gU2Vjb25kYXJ5IHRhYnMgb25seSBtYWludGFpbiBWaWV3cyBmb3IgdGhlaXIgbG9jYWwgbGlzdGVuZXJzIGFuZCB0aGVcbiAgICAgICAgLy8gVmlld3MgaW50ZXJuYWwgc3RhdGUgbWF5IG5vdCBiZSAxMDAlIHBvcHVsYXRlZCAoaW4gcGFydGljdWxhclxuICAgICAgICAvLyBzZWNvbmRhcnkgdGFicyBkb24ndCB0cmFjayBzeW5jZWREb2N1bWVudHMsIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoZVxuICAgICAgICAvLyBzZXJ2ZXIgY29uc2lkZXJzIHRvIGJlIGluIHRoZSB0YXJnZXQpLiBTbyB3aGVuIGEgc2Vjb25kYXJ5IGJlY29tZXNcbiAgICAgICAgLy8gcHJpbWFyeSwgd2UgbmVlZCB0byBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGFsbCB2aWV3cyBmb3IgYWxsIHRhcmdldHNcbiAgICAgICAgLy8gbWF0Y2ggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICAgIGNvbnN0IGUgPSBuLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpLCB0ID0gYXdhaXQgX19QUklWQVRFX3N5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKG4sIGUudG9BcnJheSgpKTtcbiAgICAgICAgbi5GYSA9ICEwLCBhd2FpdCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVBcHBseVByaW1hcnlTdGF0ZShuLnJlbW90ZVN0b3JlLCAhMCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSBfX1BSSVZBVEVfcmVtb3RlU3RvcmVMaXN0ZW4obi5yZW1vdGVTdG9yZSwgZSk7XG4gICAgfSBlbHNlIGlmICghMSA9PT0gdCAmJiAhMSAhPT0gbi5GYSkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCB0ID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIG4ucGEuZm9yRWFjaCgoKHIsIGkpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KGkpID8gZS5wdXNoKGkpIDogdCA9IHQudGhlbigoKCkgPT4gKF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KG4sIGkpLCBcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChuLmxvY2FsU3RvcmUsIGksIFxuICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCkpKSksIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKG4ucmVtb3RlU3RvcmUsIGkpO1xuICAgICAgICB9KSksIGF3YWl0IHQsIGF3YWl0IF9fUFJJVkFURV9zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyhuLCBlKSwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9yZXNldExpbWJvRG9jdW1lbnRzKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgdC5TYS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKHQucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICAgICAgfSkpLCB0LmJhLmdyKCksIHQuU2EgPSBuZXcgTWFwLCB0LndhID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxuICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gdGFyZ2V0cyAtIHRoZSBsaXN0IG9mIHRhcmdldHMgd2l0aCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVjb21wdXRlZFxuICogQHBhcmFtIHRyYW5zaXRpb25Ub1ByaW1hcnkgLSBgdHJ1ZWAgaWZmIHRoZSB0YWIgdHJhbnNpdGlvbnMgZnJvbSBhIHNlY29uZGFyeVxuICogdGFiIHRvIGEgcHJpbWFyeSB0YWJcbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiksIG4uRmEgPSAhMSwgYXdhaXQgX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUobi5yZW1vdGVTdG9yZSwgITEpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IFtdLCBzID0gW107XG4gICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIGNvbnN0IG4gPSByLnBhLmdldChlKTtcbiAgICAgICAgaWYgKG4gJiYgMCAhPT0gbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgaGF2ZSBhIGxvY2FsIFZpZXcsIHdlIGZldGNoIHRoZWlyIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIC8vIGZyb20gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCkgYW5kIHJlY29uY2lsZSB0aGVpciB2aWV3cyB3aXRoIHRoZSBwZXJzaXN0ZWRcbiAgICAgICAgICAgIC8vIHN0YXRlICh0aGUgbGlzdCBvZiBzeW5jZWREb2N1bWVudHMgbWF5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jKS5cbiAgICAgICAgICAgIHQgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KHIubG9jYWxTdG9yZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoblswXSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gci5nYS5nZXQoZSksIG4gPSBhd2FpdCBfX1BSSVZBVEVfc3luY2hyb25pemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHIsIHQpO1xuICAgICAgICAgICAgICAgIG4uc25hcHNob3QgJiYgcy5wdXNoKG4uc25hcHNob3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBuZXZlciBleGVjdXRlZCBvbiB0aGlzIGNsaWVudCwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gYWxsb2NhdGUgdGhlIHRhcmdldCBpbiBMb2NhbFN0b3JlIGFuZCBpbml0aWFsaXplIGEgbmV3IFZpZXcuXG4gICAgICAgICAgICBjb25zdCBuID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXRDYWNoZWRUYXJnZXQoci5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgICAgIHQgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KHIubG9jYWxTdG9yZSwgbiksIGF3YWl0IF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChyLCBfX1BSSVZBVEVfc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkobiksIGUsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCB0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBpLnB1c2godCk7XG4gICAgfVxuICAgIHJldHVybiByLmZhLmNfKHMpLCBpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xuICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxuICogb2JqZWN0LlxuICpcbiAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxuICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxuICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXG4gKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zeW50aGVzaXplVGFyZ2V0VG9RdWVyeShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9uZXdRdWVyeShlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLm9yZGVyQnksIGUuZmlsdGVycywgZS5saW1pdCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbn1cblxuLyoqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lR2V0QWN0aXZlQ2xpZW50cyhlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0QWN0aXZlQ2xpZW50cyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZGVidWdDYXN0KF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkucGVyc2lzdGVuY2UpLmtpKCk7XG4gICAgfShfX1BSSVZBVEVfZGVidWdDYXN0KGUpLmxvY2FsU3RvcmUpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVRhcmdldFN0YXRlKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAoaS5GYSkgXG4gICAgLy8gSWYgd2UgcmVjZWl2ZSBhIHRhcmdldCBzdGF0ZSBub3RpZmljYXRpb24gdmlhIFdlYlN0b3JhZ2UsIHdlIGFyZVxuICAgIC8vIGVpdGhlciBhbHJlYWR5IHNlY29uZGFyeSBvciBhbm90aGVyIHRhYiBoYXMgdGFrZW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgcmV0dXJuIHZvaWQgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIklnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLlwiKTtcbiAgICBjb25zdCBzID0gaS5wYS5nZXQodCk7XG4gICAgaWYgKHMgJiYgcy5sZW5ndGggPiAwKSBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgXCJjdXJyZW50XCI6XG4gICAgICBjYXNlIFwibm90LWN1cnJlbnRcIjpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV3RG9jdW1lbnRDaGFuZ2VzKGkubG9jYWxTdG9yZSwgX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwKHNbMF0pKSwgciA9IFJlbW90ZUV2ZW50LmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKHQsIFwiY3VycmVudFwiID09PSBuLCBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HKTtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShpLCBlLCByKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgXCJyZWplY3RlZFwiOlxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoaS5sb2NhbFN0b3JlLCB0LCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCBfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChpLCB0LCByKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGZhaWwoKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5QWN0aXZlVGFyZ2V0c0NoYW5nZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKTtcbiAgICBpZiAoci5GYSkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgaWYgKHIucGEuaGFzKGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gQSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIGFkZGVkIGluIGEgcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXRDYWNoZWRUYXJnZXQoci5sb2NhbFN0b3JlLCBlKSwgbiA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoci5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChyLCBfX1BSSVZBVEVfc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkodCksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCBuLnJlc3VtZVRva2VuKSwgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKHIucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSBcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZSBzaW5jZSB0aGUgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlblxuICAgICAgICAvLyByZW1vdmVkIGlmIGl0IGhhcyBiZWVuIHJlamVjdGVkIGJ5IHRoZSBiYWNrZW5kLlxuICAgICAgICByLnBhLmhhcyhlKSAmJiBcbiAgICAgICAgLy8gUmVsZWFzZSBxdWVyaWVzIHRoYXQgYXJlIHN0aWxsIGFjdGl2ZS5cbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KHIubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihyLnJlbW90ZVN0b3JlLCBlKSwgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQociwgZSk7XG4gICAgICAgIH0pKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQuYmluZChudWxsLCB0KSwgXG4gICAgdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IF9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldC5iaW5kKG51bGwsIHQpLCBcbiAgICB0LnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4gPSBfX1BSSVZBVEVfc3luY0VuZ2luZVJlamVjdExpc3Rlbi5iaW5kKG51bGwsIHQpLCBcbiAgICB0LmZhLmNfID0gX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hDaGFuZ2UuYmluZChudWxsLCB0LmV2ZW50TWFuYWdlciksIHQuZmEueGEgPSBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yLmJpbmQobnVsbCwgdC5ldmVudE1hbmFnZXIpLCBcbiAgICB0O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5U3VjY2Vzc2Z1bFdyaXRlLmJpbmQobnVsbCwgdCksIFxuICAgIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlID0gX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RGYWlsZWRXcml0ZS5iaW5kKG51bGwsIHQpLCBcbiAgICB0O1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUxvYWRCdW5kbGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgKFxuICAgIC8qKiBMb2FkcyBhIGJ1bmRsZSBhbmQgcmV0dXJucyB0aGUgbGlzdCBvZiBhZmZlY3RlZCBjb2xsZWN0aW9uIGdyb3Vwcy4gKi9cbiAgICBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9hZEJ1bmRsZUltcGwoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IHQuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhc05ld2VyQnVuZGxlKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLlVyLmdldEJ1bmRsZU1ldGFkYXRhKGUsIHQuaWQpKSkudGhlbigoZSA9PiAhIWUgJiYgZS5jcmVhdGVUaW1lLmNvbXBhcmVUbyhyKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovIChlLmxvY2FsU3RvcmUsIHIpKSByZXR1cm4gYXdhaXQgdC5jbG9zZSgpLCBuLl9jb21wbGV0ZVdpdGgoZnVuY3Rpb24gX19QUklWQVRFX2J1bmRsZVN1Y2Nlc3NQcm9ncmVzcyhlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1N0YXRlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiBlLnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBieXRlc0xvYWRlZDogZS50b3RhbEJ5dGVzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbERvY3VtZW50czogZS50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxCeXRlczogZS50b3RhbEJ5dGVzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0ocikpLCBQcm9taXNlLnJlc29sdmUobmV3IFNldCk7XG4gICAgICAgICAgICBuLl91cGRhdGVQcm9ncmVzcyhfX1BSSVZBVEVfYnVuZGxlSW5pdGlhbFByb2dyZXNzKHIpKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0J1bmRsZUxvYWRlcihyLCBlLmxvY2FsU3RvcmUsIHQuc2VyaWFsaXplcik7XG4gICAgICAgICAgICBsZXQgcyA9IGF3YWl0IHQuT2EoKTtcbiAgICAgICAgICAgIGZvciAoO3M7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCBpLm5hKHMpO1xuICAgICAgICAgICAgICAgIGUgJiYgbi5fdXBkYXRlUHJvZ3Jlc3MoZSksIHMgPSBhd2FpdCB0Lk9hKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvID0gYXdhaXQgaS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShlLCBvLnNhLCBcbiAgICAgICAgICAgIC8qIHJlbW90ZUV2ZW50ICovIHZvaWQgMCksIFxuICAgICAgICAgICAgLy8gU2F2ZSBtZXRhZGF0YSwgc28gbG9hZGluZyB0aGUgc2FtZSBidW5kbGUgd2lsbCBza2lwLlxuICAgICAgICAgICAgYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVTYXZlQnVuZGxlKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgYnVuZGxlXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IG4uVXIuc2F2ZUJ1bmRsZU1ldGFkYXRhKGUsIHQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYE5hbWVkUXVlcnlgIGFzc29jaWF0ZWQgd2l0aCBnaXZlbiBxdWVyeSBuYW1lLiBQcm9taXNlXG4gKiByZXNvbHZlcyB0byB1bmRlZmluZWQgaWYgbm8gcGVyc2lzdGVkIGRhdGEgY2FuIGJlIGZvdW5kLlxuICovIChlLmxvY2FsU3RvcmUsIHIpLCBuLl9jb21wbGV0ZVdpdGgoby5wcm9ncmVzcyksIFByb21pc2UucmVzb2x2ZShvLmlhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKFwiU3luY0VuZ2luZVwiLCBgTG9hZGluZyBidW5kbGUgZmFpbGVkIHdpdGggJHtlfWApLCBuLl9mYWlsV2l0aChlKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUobmV3IFNldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxuICogVXNlcyBFYWdlckdDIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqLykociwgdCwgbikudGhlbigoZSA9PiB7XG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUubm90aWZ5QnVuZGxlTG9hZGVkKGUpO1xuICAgIH0pKTtcbn1cblxuY2xhc3MgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5jcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSwgXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0aGlzLmNyZWF0ZVBlcnNpc3RlbmNlKGUpLCBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMubG9jYWxTdG9yZSA9IHRoaXMuY3JlYXRlTG9jYWxTdG9yZShlKSwgXG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLmNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHRoaXMubG9jYWxTdG9yZSksIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyID0gdGhpcy5jcmVhdGVJbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIoZSwgdGhpcy5sb2NhbFN0b3JlKTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsU3RvcmUoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25ld0xvY2FsU3RvcmUodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IF9fUFJJVkFURV9RdWVyeUVuZ2luZSwgZS5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZShfX1BSSVZBVEVfTWVtb3J5RWFnZXJEZWxlZ2F0ZS5KciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlU2hhcmVkQ2xpZW50U3RhdGUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlTaGFyZWRDbGllbnRTdGF0ZTtcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTHJ1R2NNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgZXh0ZW5kcyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGU7XG4gICAgfVxuICAgIGNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQodGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9NZW1vcnlMcnVEZWxlZ2F0ZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xydVNjaGVkdWxlcihuLCBlLmFzeW5jUXVldWUsIHQpO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBMcnVQYXJhbXMud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IExydVBhcmFtcy5ERUZBVUxUO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZSgoZSA9PiBfX1BSSVZBVEVfTWVtb3J5THJ1RGVsZWdhdGUuSnIoZSwgdCkpLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIGV4dGVuZHMgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuTmEgPSBlLCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdCwgdGhpcy5mb3JjZU93bmVyc2hpcCA9IG4sIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUoZSkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKGUpLCBhd2FpdCB0aGlzLk5hLmluaXRpYWxpemUodGhpcywgZSksIFxuICAgICAgICAvLyBFbnF1ZXVlIHdyaXRlcyBmcm9tIGEgcHJldmlvdXMgc2Vzc2lvblxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKHRoaXMuTmEuc3luY0VuZ2luZSksIGF3YWl0IF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZSh0aGlzLk5hLnJlbW90ZVN0b3JlKSwgXG4gICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXG4gICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuZ2koKCgpID0+ICh0aGlzLmdjU2NoZWR1bGVyICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5nY1NjaGVkdWxlci5zdGFydCgpLCBcbiAgICAgICAgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIgJiYgIXRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBjcmVhdGVMb2NhbFN0b3JlKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uZXdMb2NhbFN0b3JlKHRoaXMucGVyc2lzdGVuY2UsIG5ldyBfX1BSSVZBVEVfUXVlcnlFbmdpbmUsIGUuaW5pdGlhbFVzZXIsIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxuICAgIGNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTHJ1U2NoZWR1bGVyKG4sIGUuYXN5bmNRdWV1ZSwgdCk7XG4gICAgfVxuICAgIGNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlcihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0luZGV4QmFja2ZpbGxlcih0LCB0aGlzLnBlcnNpc3RlbmNlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKGUuYXN5bmNRdWV1ZSwgbik7XG4gICAgfVxuICAgIGNyZWF0ZVBlcnNpc3RlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIGUuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KSwgbiA9IHZvaWQgMCAhPT0gdGhpcy5jYWNoZVNpemVCeXRlcyA/IExydVBhcmFtcy53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogTHJ1UGFyYW1zLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYlBlcnNpc3RlbmNlKHRoaXMuc3luY2hyb25pemVUYWJzLCB0LCBlLmNsaWVudElkLCBuLCBlLmFzeW5jUXVldWUsIF9fUFJJVkFURV9nZXRXaW5kb3coKSwgZ2V0RG9jdW1lbnQoKSwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCAhIXRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVNoYXJlZENsaWVudFN0YXRlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIG11bHRpLXRhYiBJbmRleGVkREJcbiAqIHBlcnNpc3RlbmNlLlxuICpcbiAqIEluIHRoZSBsZWdhY3kgY2xpZW50LCB0aGlzIHByb3ZpZGVyIGlzIHVzZWQgdG8gcHJvdmlkZSBib3RoIG11bHRpLXRhYiBhbmRcbiAqIG5vbi1tdWx0aS10YWIgcGVyc2lzdGVuY2Ugc2luY2Ugd2UgY2Fubm90IHRlbGwgYXQgYnVpbGQgdGltZSB3aGV0aGVyXG4gKiBgc3luY2hyb25pemVUYWJzYCB3aWxsIGJlIGVuYWJsZWQuXG4gKi8gY2xhc3MgX19QUklWQVRFX011bHRpVGFiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIGV4dGVuZHMgX19QUklWQVRFX0luZGV4ZWREYk9mZmxpbmVDb21wb25lbnRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCB0LCAvKiBmb3JjZU93bmVyc2hpcD0gKi8gITEpLCB0aGlzLk5hID0gZSwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHQsIHRoaXMuc3luY2hyb25pemVUYWJzID0gITA7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUoZSkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKGUpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5OYS5zeW5jRW5naW5lO1xuICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlIGluc3RhbmNlb2YgX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSAmJiAodGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0ge1xuICAgICAgICAgICAgWHM6IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlCYXRjaFN0YXRlLmJpbmQobnVsbCwgdCksXG4gICAgICAgICAgICBlbzogX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVRhcmdldFN0YXRlLmJpbmQobnVsbCwgdCksXG4gICAgICAgICAgICBubzogX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseUFjdGl2ZVRhcmdldHNDaGFuZ2UuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIGtpOiBfX1BSSVZBVEVfc3luY0VuZ2luZUdldEFjdGl2ZUNsaWVudHMuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIFpzOiBfX1BSSVZBVEVfc3luY0VuZ2luZVN5bmNocm9uaXplV2l0aENoYW5nZWREb2N1bWVudHMuYmluZChudWxsLCB0KVxuICAgICAgICB9LCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCkpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5naSgoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UHJpbWFyeVN0YXRlKHRoaXMuTmEuc3luY0VuZ2luZSwgZSksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKGUgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQoKSA6IGUgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpLCBcbiAgICAgICAgICAgIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyICYmIChlICYmICF0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydGVkID8gdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSA6IGUgfHwgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RvcCgpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZ2V0V2luZG93KCk7XG4gICAgICAgIGlmICghX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5DKHQpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTklNUExFTUVOVEVELCBcIkluZGV4ZWREQiBwZXJzaXN0ZW5jZSBpcyBvbmx5IGF2YWlsYWJsZSBvbiBwbGF0Zm9ybXMgdGhhdCBzdXBwb3J0IExvY2FsU3RvcmFnZS5cIik7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhlZERiU3RvcmFnZVByZWZpeChlLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCBlLmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSh0LCBlLmFzeW5jUXVldWUsIG4sIGUuY2xpZW50SWQsIGUuaW5pdGlhbFVzZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgd2lyZXMgdGhlIGNvbXBvbmVudHMgdGhhdCBhcmUgbmVlZGVkIHRvIGludGVyZmFjZSB3aXRoIHRoZVxuICogbmV0d29yay5cbiAqLyBjbGFzcyBPbmxpbmVDb21wb25lbnRQcm92aWRlciB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlLCB0KSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSB8fCAodGhpcy5sb2NhbFN0b3JlID0gZS5sb2NhbFN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gZS5zaGFyZWRDbGllbnRTdGF0ZSwgXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdGhpcy5jcmVhdGVEYXRhc3RvcmUodCksIHRoaXMucmVtb3RlU3RvcmUgPSB0aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKHQpLCBcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TWFuYWdlcih0KSwgdGhpcy5zeW5jRW5naW5lID0gdGhpcy5jcmVhdGVTeW5jRW5naW5lKHQsIFxuICAgICAgICAvKiBzdGFydEFzUHJpbWFyeT0qLyAhZS5zeW5jaHJvbml6ZVRhYnMpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IGUgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseU9ubGluZVN0YXRlQ2hhbmdlKHRoaXMuc3luY0VuZ2luZSwgZSwgMSAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSAqLyksIFxuICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlID0gX19QUklWQVRFX3N5bmNFbmdpbmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9yZW1vdGVTdG9yZUFwcGx5UHJpbWFyeVN0YXRlKHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdFdmVudE1hbmFnZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9FdmVudE1hbmFnZXJJbXBsO1xuICAgICAgICB9KCk7XG4gICAgfVxuICAgIGNyZWF0ZURhdGFzdG9yZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdDb25uZWN0aW9uKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1dlYkNoYW5uZWxDb25uZWN0aW9uKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAoZS5kYXRhYmFzZUluZm8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld0RhdGFzdG9yZShlLCB0LCBuLCByKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EYXRhc3RvcmVJbXBsKGUsIHQsIG4sIHIpO1xuICAgICAgICB9KGUuYXV0aENyZWRlbnRpYWxzLCBlLmFwcENoZWNrQ3JlZGVudGlhbHMsIG4sIHQpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVTdG9yZShlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UmVtb3RlU3RvcmUoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUmVtb3RlU3RvcmVJbXBsKGUsIHQsIG4sIHIsIGkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZS1lbmFibGVzIHRoZSBuZXR3b3JrLiBJZGVtcG90ZW50LiAqLyAodGhpcy5sb2NhbFN0b3JlLCB0aGlzLmRhdGFzdG9yZSwgZS5hc3luY1F1ZXVlLCAoZSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5T25saW5lU3RhdGVDaGFuZ2UodGhpcy5zeW5jRW5naW5lLCBlLCAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovKSksIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdDb25uZWN0aXZpdHlNb25pdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5DKCkgPyBuZXcgX19QUklWQVRFX0Jyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yIDogbmV3IF9fUFJJVkFURV9Ob29wQ29ubmVjdGl2aXR5TW9uaXRvcjtcbiAgICAgICAgfSgpKTtcbiAgICB9XG4gICAgY3JlYXRlU3luY0VuZ2luZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3U3luY0VuZ2luZShlLCB0LCBuLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgICAgICByLCBpLCBzLCBvKSB7XG4gICAgICAgICAgICBjb25zdCBfID0gbmV3IF9fUFJJVkFURV9TeW5jRW5naW5lSW1wbChlLCB0LCBuLCByLCBpLCBzKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmIChfLkZhID0gITApLCBfO1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIGUuaW5pdGlhbFVzZXIsIGUubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIHQpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVTaHV0ZG93bihlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiUmVtb3RlU3RvcmUgc2h1dHRpbmcgZG93bi5cIiksIHQuRl8uYWRkKDUgLyogT2ZmbGluZUNhdXNlLlNodXRkb3duICovKSwgXG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCh0KSwgdC54Xy5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIHQuT18uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlckhlbHBlcihlLCB0ID0gMTAyNDApIHtcbiAgICBsZXQgbiA9IDA7XG4gICAgLy8gVGhlIFR5cGVTY3JpcHQgZGVmaW5pdGlvbiBmb3IgUmVhZGFibGVTdHJlYW1SZWFkZXIgY2hhbmdlZC4gV2UgdXNlXG4gICAgLy8gYGFueWAgaGVyZSB0byBhbGxvdyB0aGlzIGNvZGUgdG8gY29tcGlsZSB3aXRoIGRpZmZlcmVudCB2ZXJzaW9ucy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy80Mjk3MFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGFzeW5jIHJlYWQoKSB7XG4gICAgICAgICAgICBpZiAobiA8IGUuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnNsaWNlKG4sIG4gKyB0KSxcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBuICs9IHQsIHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjYW5jZWwoKSB7fSxcbiAgICAgICAgcmVsZWFzZUxvY2soKSB7fSxcbiAgICAgICAgY2xvc2VkOiBQcm9taXNlLnJlc29sdmUoKVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE9uIHdlYiwgYSBgUmVhZGFibGVTdHJlYW1gIGlzIHdyYXBwZWQgYXJvdW5kIGJ5IGEgYEJ5dGVTdHJlYW1SZWFkZXJgLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLypcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Bc3luY09ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMTtcbiAgICB9XG4gICAgbmV4dChlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIubmV4dCAmJiB0aGlzLkJhKHRoaXMub2JzZXJ2ZXIubmV4dCwgZSk7XG4gICAgfVxuICAgIGVycm9yKGUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5lcnJvciA/IHRoaXMuQmEodGhpcy5vYnNlcnZlci5lcnJvciwgZSkgOiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgTGEoKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMDtcbiAgICB9XG4gICAgQmEoZSwgdCkge1xuICAgICAgICB0aGlzLm11dGVkIHx8IHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0ZWQgfHwgZSh0KTtcbiAgICAgICAgfSksIDApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBidW5kbGUuXG4gKlxuICogVGFrZXMgYSBidW5kbGUgc3RyZWFtIG9yIGJ1ZmZlciwgYW5kIHByZXNlbnRzIGFic3RyYWN0aW9ucyB0byByZWFkIGJ1bmRsZWRcbiAqIGVsZW1lbnRzIG91dCBvZiB0aGUgdW5kZXJseWluZyBjb250ZW50LlxuICovIGNsYXNzIF9fUFJJVkFURV9CdW5kbGVSZWFkZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHJlYWRlciB0byByZWFkIGZyb20gdW5kZXJseWluZyBiaW5hcnkgYnVuZGxlIGRhdGEgc291cmNlLiAqL1xuICAgIGUsIHQpIHtcbiAgICAgICAgdGhpcy5rYSA9IGUsIHRoaXMuc2VyaWFsaXplciA9IHQsIFxuICAgICAgICAvKiogQ2FjaGVkIGJ1bmRsZSBtZXRhZGF0YS4gKi9cbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMucWEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGV4dERlY29kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKFwidXRmLThcIik7XG4gICAgICAgIH0oKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMuUWEoKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIGUgJiYgZS5lYSgpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKGUuWF8ubWV0YWRhdGEpIDogdGhpcy5tZXRhZGF0YS5yZWplY3QobmV3IEVycm9yKGBUaGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYnVuZGxlIGlzIG5vdCBhIG1ldGFkYXRhLCBpdCBpc1xcbiAgICAgICAgICAgICAke0pTT04uc3RyaW5naWZ5KG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuWF8pfWApKTtcbiAgICAgICAgfSksIChlID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KGUpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rYS5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIE9hKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMuUWEoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyBRYSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuS2EoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5xYS5kZWNvZGUoZSksIG4gPSBOdW1iZXIodCk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMuJGEoYGxlbmd0aCBzdHJpbmcgKCR7dH0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMuVWEobik7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpemVkQnVuZGxlRWxlbWVudChKU09OLnBhcnNlKHIpLCBlLmxlbmd0aCArIG4pO1xuICAgIH1cbiAgICAvKiogRmlyc3QgaW5kZXggb2YgJ3snIGZyb20gdGhlIHVuZGVybHlpbmcgYnVmZmVyLiAqLyAgICBXYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmZpbmRJbmRleCgoZSA9PiBlID09PSBcIntcIi5jaGFyQ29kZUF0KDApKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgaW50ZXJuYWwgYnVmZmVyLCB1bnRpbCB0aGUgZmlyc3QgJ3snLCBhbmRcbiAgICAgKiByZXR1cm4gdGhlIGNvbnRlbnQuXG4gICAgICpcbiAgICAgKiBJZiByZWFjaGVkIGVuZCBvZiB0aGUgc3RyZWFtLCByZXR1cm5zIGEgbnVsbC5cbiAgICAgKi8gICAgYXN5bmMgS2EoKSB7XG4gICAgICAgIGZvciAoO3RoaXMuV2EoKSA8IDA7ICkge1xuICAgICAgICAgICAgaWYgKGF3YWl0IHRoaXMuR2EoKSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBhbmQgdGhlcmVcbiAgICAgICAgLy8gaGFwcGVucyB0byBiZSBubyBtb3JlIGRhdGEgdG8gcHJvY2Vzcy5cbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdGhpcy5idWZmZXIubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuV2EoKTtcbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBidXQgc3RpbGxcbiAgICAgICAgLy8gY2Fubm90IGZpbmQgYW4gb3BlbiBicmFja2V0LlxuICAgICAgICAgICAgICAgIGUgPCAwICYmIHRoaXMuJGEoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gYSBsZW5ndGggc3RyaW5nIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGxlbmd0aC5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZShlKSwgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSBhIHNwZWNpZmllZCBwb3NpdGlvbiBmcm9tIHRoZSBpbnRlcm5hbCBidWZmZXIsIGZvciBhIHNwZWNpZmllZFxuICAgICAqIG51bWJlciBvZiBieXRlcywgcHVsbGluZyBtb3JlIGRhdGEgZnJvbSB0aGUgdW5kZXJseWluZyBzdHJlYW0gaWYgbmVlZGVkLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyBkZWNvZGVkIGZyb20gdGhlIHJlYWQgYnl0ZXMuXG4gICAgICovICAgIGFzeW5jIFVhKGUpIHtcbiAgICAgICAgZm9yICg7dGhpcy5idWZmZXIubGVuZ3RoIDwgZTsgKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLkdhKCkgJiYgdGhpcy4kYShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBtb3JlIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ID0gdGhpcy5xYS5kZWNvZGUodGhpcy5idWZmZXIuc2xpY2UoMCwgZSkpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGpzb24gc3RyaW5nLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKGUpLCB0O1xuICAgIH1cbiAgICAkYShlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhyb3cgdGhpcy5rYS5jYW5jZWwoKSwgbmV3IEVycm9yKGBJbnZhbGlkIGJ1bmRsZSBmb3JtYXQ6ICR7ZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVsbHMgbW9yZSBkYXRhIGZyb20gdW5kZXJseWluZyBzdHJlYW0gdG8gaW50ZXJuYWwgYnVmZmVyLlxuICAgICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgc3RyZWFtIGlzIGZpbmlzaGVkLlxuICAgICAqLyAgICBhc3luYyBHYSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMua2EucmVhZCgpO1xuICAgICAgICBpZiAoIWUuZG9uZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLmxlbmd0aCArIGUudmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIHQuc2V0KHRoaXMuYnVmZmVyKSwgdC5zZXQoZS52YWx1ZSwgdGhpcy5idWZmZXIubGVuZ3RoKSwgdGhpcy5idWZmZXIgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLmRvbmU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbnRlcm5hbCB0cmFuc2FjdGlvbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIGFjY3VtdWxhdGluZyB0aGUgbXV0YXRpb25zIHRvXG4gKiBwZXJmb3JtIGFuZCB0aGUgYmFzZSB2ZXJzaW9ucyBmb3IgYW55IGRvY3VtZW50cyByZWFkLlxuICovXG5jbGFzcyBUcmFuc2FjdGlvbiQyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gZSwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAoZSkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJGaXJlc3RvcmUgdHJhbnNhY3Rpb25zIHJlcXVpcmUgYWxsIHJlYWRzIHRvIGJlIGV4ZWN1dGVkIGJlZm9yZSBhbGwgd3JpdGVzLlwiKTtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbnZva2VCYXRjaEdldERvY3VtZW50c1JwYyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZChuLnNlcmlhbGl6ZXIpICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiB0Lm1hcCgoZSA9PiBfX1BSSVZBVEVfdG9OYW1lKG4uc2VyaWFsaXplciwgZSkpKVxuICAgICAgICAgICAgfSwgcyA9IGF3YWl0IG4uRm8oXCJCYXRjaEdldERvY3VtZW50c1wiLCByLCBpLCB0Lmxlbmd0aCksIG8gPSBuZXcgTWFwO1xuICAgICAgICAgICAgcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21CYXRjaEdldERvY3VtZW50c1Jlc3BvbnNlKG4uc2VyaWFsaXplciwgZSk7XG4gICAgICAgICAgICAgICAgby5zZXQodC5rZXkudG9TdHJpbmcoKSwgdCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBfID0gW107XG4gICAgICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5nZXQoZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIXQpLCBfLnB1c2godCk7XG4gICAgICAgICAgICB9KSksIF87XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIGUpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHRoaXMucmVjb3JkVmVyc2lvbihlKSkpLCB0O1xuICAgIH1cbiAgICBzZXQoZSwgdCkge1xuICAgICAgICB0aGlzLndyaXRlKHQudG9NdXRhdGlvbihlLCB0aGlzLnByZWNvbmRpdGlvbihlKSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB1cGRhdGUoZSwgdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cml0ZSh0LnRvTXV0YXRpb24oZSwgdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUoZSkpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQoZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgdGhpcy53cml0ZShuZXcgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uKGUsIHRoaXMucHJlY29uZGl0aW9uKGUpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKGUudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubGFzdFdyaXRlRXJyb3IpIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucztcbiAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxuICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5kZWxldGUodC5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEZvciBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgYnV0IG5vdCB3cml0dGVuIHRvLCB3ZSB3YW50IHRvIHBlcmZvcm1cbiAgICAgICAgLy8gYSBgdmVyaWZ5YCBvcGVyYXRpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBEb2N1bWVudEtleS5mcm9tUGF0aCh0KTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLnB1c2gobmV3IF9fUFJJVkFURV9WZXJpZnlNdXRhdGlvbihuLCB0aGlzLnByZWNvbmRpdGlvbihuKSkpO1xuICAgICAgICB9KSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbnZva2VDb21taXRScGMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQobi5zZXJpYWxpemVyKSArIFwiL2RvY3VtZW50c1wiLCBpID0ge1xuICAgICAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKGUgPT4gdG9NdXRhdGlvbihuLnNlcmlhbGl6ZXIsIGUpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLmJvKFwiQ29tbWl0XCIsIHIsIGkpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24oZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgaWYgKGUuaXNGb3VuZERvY3VtZW50KCkpIHQgPSBlLnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFlLmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgICAgICAvLyBSZXByZXNlbnQgYSBkZWxldGVkIGRvYyB1c2luZyBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgICAgICB0ID0gU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChuKSkgXG4gICAgICAgICAgICAvLyBUaGlzIHRyYW5zYWN0aW9uIHdpbGwgZmFpbCBubyBtYXR0ZXIgd2hhdC5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldChlLmtleS50b1N0cmluZygpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKGUudG9TdHJpbmcoKSkgJiYgdCA/IHQuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpID8gUHJlY29uZGl0aW9uLmV4aXN0cyghMSkgOiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh0KSA6IFByZWNvbmRpdGlvbi5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyhlLnRvU3RyaW5nKCkpICYmIHQpIHtcbiAgICAgICAgICAgIGlmICh0LmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgdXBkYXRlIGEgZG9jdW1lbnQgdGhhdCBkb2Vzbid0IGV4aXN0LlwiKTtcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGV4aXN0cywgYmFzZSBwcmVjb25kaXRpb24gb24gZG9jdW1lbnQgdXBkYXRlIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUoZSkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKGUpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovIGNsYXNzIF9fUFJJVkFURV9UcmFuc2FjdGlvblJ1bm5lciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLmRhdGFzdG9yZSA9IHQsIHRoaXMub3B0aW9ucyA9IG4sIHRoaXMudXBkYXRlRnVuY3Rpb24gPSByLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IGksIHRoaXMuemEgPSBuLm1heEF0dGVtcHRzLCB0aGlzLkhvID0gbmV3IF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYodGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVGltZXJJZC5UcmFuc2FjdGlvblJldHJ5ICovKTtcbiAgICB9XG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovICAgIHJ1bigpIHtcbiAgICAgICAgdGhpcy56YSAtPSAxLCB0aGlzLmphKCk7XG4gICAgfVxuICAgIGphKCkge1xuICAgICAgICB0aGlzLkhvLlFvKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFRyYW5zYWN0aW9uJDIodGhpcy5kYXRhc3RvcmUpLCB0ID0gdGhpcy5IYShlKTtcbiAgICAgICAgICAgIHQgJiYgdC50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gZS5jb21taXQoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVzb2x2ZSh0KTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkphKGUpO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLkphKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEhhKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKGUpO1xuICAgICAgICAgICAgcmV0dXJuICFfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQodCkgJiYgdC5jYXRjaCAmJiB0LnRoZW4gPyB0IDogKHRoaXMuZGVmZXJyZWQucmVqZWN0KEVycm9yKFwiVHJhbnNhY3Rpb24gY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBQcm9taXNlXCIpKSwgXG4gICAgICAgICAgICBudWxsKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gRG8gbm90IHJldHJ5IGVycm9ycyB0aHJvd24gYnkgdXNlciBwcm92aWRlZCB1cGRhdGVGdW5jdGlvbi5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkLnJlamVjdChlKSwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBKYShlKSB7XG4gICAgICAgIHRoaXMuemEgPiAwICYmIHRoaXMuWWEoZSkgPyAodGhpcy56YSAtPSAxLCB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuamEoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKSA6IHRoaXMuZGVmZXJyZWQucmVqZWN0KGUpO1xuICAgIH1cbiAgICBZYShlKSB7XG4gICAgICAgIGlmIChcIkZpcmViYXNlRXJyb3JcIiA9PT0gZS5uYW1lKSB7XG4gICAgICAgICAgICAvLyBJbiB0cmFuc2FjdGlvbnMsIHRoZSBiYWNrZW5kIHdpbGwgZmFpbCBvdXRkYXRlZCByZWFkcyB3aXRoIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICAgICAgICAvLyBub24tbWF0Y2hpbmcgZG9jdW1lbnQgdmVyc2lvbnMgd2l0aCBBQk9SVEVELiBUaGVzZSBlcnJvcnMgc2hvdWxkIGJlIHJldHJpZWQuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jb2RlO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWJvcnRlZFwiID09PSB0IHx8IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiID09PSB0IHx8IFwiYWxyZWFkeS1leGlzdHNcIiA9PT0gdCB8fCAhX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlIC8vXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIC8vXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS4gLy9cbiAqL1xuY2xhc3MgRmlyZXN0b3JlQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBcbiAgICAvKipcbiAgICAgKiBBc3luY2hyb25vdXMgcXVldWUgcmVzcG9uc2libGUgZm9yIGFsbCBvZiBvdXIgaW50ZXJuYWwgcHJvY2Vzc2luZy4gV2hlblxuICAgICAqIHdlIGdldCBpbmNvbWluZyB3b3JrIGZyb20gdGhlIHVzZXIgKHZpYSBwdWJsaWMgQVBJKSBvciB0aGUgbmV0d29ya1xuICAgICAqIChpbmNvbWluZyBHUlBDIG1lc3NhZ2VzKSwgd2Ugc2hvdWxkIGFsd2F5cyBzY2hlZHVsZSBvbnRvIHRoaXMgcXVldWUuXG4gICAgICogVGhpcyBlbnN1cmVzIGFsbCBvZiBvdXIgd29yayBpcyBwcm9wZXJseSBzZXJpYWxpemVkIChlLmcuIHdlIGRvbid0XG4gICAgICogc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBvcGVyYXRpb24gd2hpbGUgdGhlIHByZXZpb3VzIG9uZSBpcyB3YWl0aW5nIGZvclxuICAgICAqIGFuIGFzeW5jIEkvTyB0byBjb21wbGV0ZSkuXG4gICAgICovXG4gICAgbiwgcikge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMuZGF0YWJhc2VJbmZvID0gciwgXG4gICAgICAgIHRoaXMudXNlciA9IFVzZXIuVU5BVVRIRU5USUNBVEVELCB0aGlzLmNsaWVudElkID0gX19QUklWQVRFX0F1dG9JZC5WKCksIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCB0aGlzLmF1dGhDcmVkZW50aWFscy5zdGFydChuLCAoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCB1c2VyPVwiLCBlLnVpZCksIGF3YWl0IHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lcihlKSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSBlO1xuICAgICAgICB9KSksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zdGFydChuLCAoZSA9PiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgbmV3IGFwcCBjaGVjayB0b2tlbj1cIiwgZSksIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyKGUsIHRoaXMudXNlcikpKSk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3luY1F1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXG4gICAgICAgICAgICBkYXRhYmFzZUluZm86IHRoaXMuZGF0YWJhc2VJbmZvLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhdXRoQ3JlZGVudGlhbHM6IHRoaXMuYXV0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgYXBwQ2hlY2tDcmVkZW50aWFsczogdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLFxuICAgICAgICAgICAgaW5pdGlhbFVzZXI6IHRoaXMudXNlcixcbiAgICAgICAgICAgIG1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOiAxMDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKGUpIHtcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gZTtcbiAgICB9XG4gICAgc2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyKGUpIHtcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGF0IHRoZSBjbGllbnQgaGFzIG5vdCBiZWVuIHRlcm1pbmF0ZWQuIEVuc3VyZXMgdGhhdCBvdGhlciBtZXRob2RzIG9uIC8vXG4gICAgICogdGhpcyBjbGFzcyBjYW5ub3QgYmUgY2FsbGVkIGFmdGVyIHRoZSBjbGllbnQgaXMgdGVybWluYXRlZC4gLy9cbiAgICAgKi8gICAgdmVyaWZ5Tm90VGVybWluYXRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXN5bmNRdWV1ZS5pc1NodXR0aW5nRG93bikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVudGVyUmVzdHJpY3RlZE1vZGUoKTtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50cyAmJiBhd2FpdCB0aGlzLl9vbmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50cyAmJiBhd2FpdCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgXG4gICAgICAgICAgICAgICAgLy8gVGhlIGNyZWRlbnRpYWxzIHByb3ZpZGVyIG11c3QgYmUgdGVybWluYXRlZCBhZnRlciBzaHV0dGluZyBkb3duIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZVN0b3JlIGFzIGl0IHdpbGwgcHJldmVudCB0aGUgUmVtb3RlU3RvcmUgZnJvbSByZXRyaWV2aW5nIGF1dGhcbiAgICAgICAgICAgICAgICAvLyB0b2tlbnMuXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLnNodXRkb3duKCksIGUucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfd3JhcEluVXNlckVycm9ySWZSZWNvdmVyYWJsZSh0LCBcIkZhaWxlZCB0byBzaHV0ZG93biBwZXJzaXN0ZW5jZVwiKTtcbiAgICAgICAgICAgICAgICBlLnJlamVjdChuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBlLnByb21pc2U7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIHQpIHtcbiAgICBlLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCBlLmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCB0LmluaXRpYWxpemUobik7XG4gICAgbGV0IHIgPSBuLmluaXRpYWxVc2VyO1xuICAgIGUuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChhc3luYyBlID0+IHtcbiAgICAgICAgci5pc0VxdWFsKGUpIHx8IChhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhbmRsZVVzZXJDaGFuZ2UodC5sb2NhbFN0b3JlLCBlKSwgciA9IGUpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICB0LnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiBlLnRlcm1pbmF0ZSgpKSksIGUuX29mZmxpbmVDb21wb25lbnRzID0gdDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3NldE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIHQpIHtcbiAgICBlLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSk7XG4gICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBlLmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCB0LmluaXRpYWxpemUobiwgciksIFxuICAgIC8vIFRoZSBDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIgb2YgdGhlIG9ubGluZSBjb21wb25lbnQgcHJvdmlkZXIgdGFrZXNcbiAgICAvLyBwcmVjZWRlbmNlIG92ZXIgdGhlIG9mZmxpbmUgY29tcG9uZW50IHByb3ZpZGVyLlxuICAgIGUuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChlID0+IF9fUFJJVkFURV9yZW1vdGVTdG9yZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UodC5yZW1vdGVTdG9yZSwgZSkpKSwgXG4gICAgZS5zZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIoKChlLCBuKSA9PiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHQucmVtb3RlU3RvcmUsIG4pKSksIFxuICAgIGUuX29ubGluZUNvbXBvbmVudHMgPSB0O1xufVxuXG4vKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NhbkZhbGxiYWNrRnJvbUluZGV4ZWREYkVycm9yKGUpIHtcbiAgICByZXR1cm4gXCJGaXJlYmFzZUVycm9yXCIgPT09IGUubmFtZSA/IGUuY29kZSA9PT0gRC5GQUlMRURfUFJFQ09ORElUSU9OIHx8IGUuY29kZSA9PT0gRC5VTklNUExFTUVOVEVEIDogIShcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgfHwgKFxuICAgIC8vIFdoZW4gdGhlIGJyb3dzZXIgaXMgb3V0IG9mIHF1b3RhIHdlIGNvdWxkIGdldCBlaXRoZXIgcXVvdGEgZXhjZWVkZWRcbiAgICAvLyBvciBhbiBhYm9ydGVkIGVycm9yIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBlcnJvciBoYXBwZW5lZCBkdXJpbmdcbiAgICAvLyBzY2hlbWEgbWlncmF0aW9uLlxuICAgIDIyID09PSBlLmNvZGUgfHwgMjAgPT09IGUuY29kZSB8fCBcbiAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgMTEgPT09IGUuY29kZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVPZmZsaW5lQ29tcG9uZW50cyhlKSB7XG4gICAgaWYgKCFlLl9vZmZsaW5lQ29tcG9uZW50cykgaWYgKGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgdXNlciBwcm92aWRlZCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29mZmxpbmUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgICAgIGlmICghX19QUklWQVRFX2NhbkZhbGxiYWNrRnJvbUluZGV4ZWREYkVycm9yKG4pKSB0aHJvdyBuO1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ1dhcm4oXCJFcnJvciB1c2luZyB1c2VyIHByb3ZpZGVkIGNhY2hlLiBGYWxsaW5nIGJhY2sgdG8gbWVtb3J5IGNhY2hlOiBcIiArIG4pLCBcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbmV3IE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcik7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbmV3IE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcik7XG4gICAgcmV0dXJuIGUuX29mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKSB7XG4gICAgcmV0dXJuIGUuX29ubGluZUNvbXBvbmVudHMgfHwgKGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgdXNlciBwcm92aWRlZCBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQgX19QUklWQVRFX3NldE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29ubGluZSkpIDogKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPbmxpbmVDb21wb25lbnRQcm92aWRlcihlLCBuZXcgT25saW5lQ29tcG9uZW50UHJvdmlkZXIpKSksIGUuX29ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRQZXJzaXN0ZW5jZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPZmZsaW5lQ29tcG9uZW50cyhlKS50aGVuKChlID0+IGUucGVyc2lzdGVuY2UpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldFJlbW90ZVN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Vuc3VyZU9ubGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLnJlbW90ZVN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRTeW5jRW5naW5lKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Vuc3VyZU9ubGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLnN5bmNFbmdpbmUpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldERhdGFzdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5kYXRhc3RvcmUpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSB7XG4gICAgY29uc3QgdCA9IGF3YWl0IF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLCBuID0gdC5ldmVudE1hbmFnZXI7XG4gICAgcmV0dXJuIG4ub25MaXN0ZW4gPSBfX1BSSVZBVEVfc3luY0VuZ2luZUxpc3Rlbi5iaW5kKG51bGwsIHQuc3luY0VuZ2luZSksIG4ub25Vbmxpc3RlbiA9IF9fUFJJVkFURV9zeW5jRW5naW5lVW5saXN0ZW4uYmluZChudWxsLCB0LnN5bmNFbmdpbmUpLCBcbiAgICBuO1xufVxuXG4vKiogRW5hYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uIGFuZCByZS1lbnF1ZXVlcyBhbGwgcGVuZGluZyBvcGVyYXRpb25zLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RW5hYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UGVyc2lzdGVuY2UoZSksIG4gPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UmVtb3RlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0LnNldE5ldHdvcmtFbmFibGVkKCEwKSwgZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlRW5hYmxlTmV0d29yayhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHJldHVybiB0LkZfLmRlbGV0ZSgwIC8qIE9mZmxpbmVDYXVzZS5Vc2VyRGlzYWJsZWQgKi8pLCBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKHQpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudERpc2FibGVOZXR3b3JrKGUpIHtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IF9fUFJJVkFURV9nZXRQZXJzaXN0ZW5jZShlKSwgbiA9IGF3YWl0IF9fUFJJVkFURV9nZXRSZW1vdGVTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHQuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVEaXNhYmxlTmV0d29yayhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHQuRl8uYWRkKDAgLyogT2ZmbGluZUNhdXNlLlVzZXJEaXNhYmxlZCAqLyksIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKHQpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSBzbyBnZXQoKXMgcmV0dXJuIGZyb20gY2FjaGUsIGV0Yy5cbiAgICAgICAgICAgIHQuT18uc2V0KFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHdyaXRlcyB0aGF0IHdlcmUgcGVuZGluZyBhdCB0aGUgdGltZVxuICogdGhpcyBtZXRob2Qgd2FzIGNhbGxlZCByZWNlaXZlZCBzZXJ2ZXIgYWNrbm93bGVkZ2VtZW50LiBBbiBhY2tub3dsZWRnZW1lbnRcbiAqIGNhbiBiZSBlaXRoZXIgYWNjZXB0YW5jZSBvciByZWplY3Rpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3JlYWREb2N1bWVudEZyb21DYWNoZShlLCB0LCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVSZWFkRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwicmVhZCBkb2N1bWVudFwiLCBcInJlYWRvbmx5XCIsIChlID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnQoZSwgdCkpKTtcbiAgICAgICAgICAgIH0oZSwgdCk7XG4gICAgICAgICAgICByLmlzRm91bmREb2N1bWVudCgpID8gbi5yZXNvbHZlKHIpIDogci5pc05vRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShudWxsKSA6IG4ucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihELlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7dH0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpLCB0LCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZSwgdCwgbiA9IHt9KSB7XG4gICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfcmVhZERvY3VtZW50VmlhU25hcHNob3RMaXN0ZW5lcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIoe1xuICAgICAgICAgICAgbmV4dDogcyA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgdC5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgbykpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfID0gcy5kb2NzLmhhcyhuKTtcbiAgICAgICAgICAgICAgICAhXyAmJiBzLmZyb21DYWNoZSA/IFxuICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWYgd2UncmUgb25saW5lIGFuZCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgICAgIC8vIGV4aXN0IHRoZW4gd2UgcmVzb2x2ZSB3aXRoIGEgZG9jLmV4aXN0cyBzZXQgdG8gZmFsc2UuIElmXG4gICAgICAgICAgICAgICAgLy8gd2UncmUgb2ZmbGluZSBob3dldmVyLCB3ZSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhpc1xuICAgICAgICAgICAgICAgIC8vIGNhc2UuIFR3byBvcHRpb25zOiAxKSBDYWNoZSB0aGUgbmVnYXRpdmUgcmVzcG9uc2UgZnJvbVxuICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIgc28gd2UgY2FuIGRlbGl2ZXIgdGhhdCBldmVuIHdoZW4geW91J3JlXG4gICAgICAgICAgICAgICAgLy8gb2ZmbGluZSAyKSBBY3R1YWxseSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhlIG9ubGluZSBjYXNlXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAgICAgICAgICAgaS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKEQuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogXyAmJiBzLmZyb21DYWNoZSAmJiByICYmIFwic2VydmVyXCIgPT09IHIuc291cmNlID8gaS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKEQuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBkb2VzIGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50LiknKSkgOiBpLnJlc29sdmUocyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGUgPT4gaS5yZWplY3QoZSlcbiAgICAgICAgfSksIG8gPSBuZXcgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIoX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChuLnBhdGgpLCBzLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIFpfOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgbyk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBlLmFzeW5jUXVldWUsIHQsIG4sIHIpKSksIHIucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c0Zyb21Mb2NhbENhY2hlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9leGVjdXRlUXVlcnlGcm9tQ2FjaGUoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5KGUsIHQsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgX19QUklWQVRFX1ZpZXcodCwgci5QcyksIHMgPSBpLmhhKHIuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHMsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHt0fSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSksIHQsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIoZSwgdCwgbiA9IHt9KSB7XG4gICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZXhlY3V0ZVF1ZXJ5VmlhU25hcHNob3RMaXN0ZW5lcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIoe1xuICAgICAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgdC5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gci5zb3VyY2UgPyBpLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKSA6IGkucmVzb2x2ZShuKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZSA9PiBpLnJlamVjdChlKVxuICAgICAgICB9KSwgbyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcihuLCBzLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIFpfOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgbyk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBlLmFzeW5jUXVldWUsIHQsIG4sIHIpKSksIHIucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEFkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyKGUsIHQpIHtcbiAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Bc3luY09ic2VydmVyKHQpO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2FkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2RlYnVnQ2FzdChlKS5LXy5hZGQodCksIFxuICAgICAgICAvLyBJbW1lZGlhdGVseSBmaXJlIGFuIGluaXRpYWwgZXZlbnQsIGluZGljYXRpbmcgYWxsIGV4aXN0aW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyBhcmUgaW4tc3luYy5cbiAgICAgICAgdC5uZXh0KCk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4uTGEoKSwgZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihlLCB0KSB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLktfLmRlbGV0ZSh0KTtcbiAgICAgICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50TG9hZEJ1bmRsZShlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVCdW5kbGVSZWFkZXIoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBfX1BSSVZBVEVfbmV3VGV4dEVuY29kZXIoKS5lbmNvZGUoZSkgOiBlO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld0J1bmRsZVJlYWRlcihlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9CdW5kbGVSZWFkZXJJbXBsKGUsIHQpO1xuICAgICAgICB9KGZ1bmN0aW9uIF9fUFJJVkFURV90b0J5dGVTdHJlYW1SZWFkZXIoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSByZXR1cm4gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlckhlbHBlcihlLCB0KTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBfX1BSSVZBVEVfdG9CeXRlU3RyZWFtUmVhZGVySGVscGVyKG5ldyBVaW50OEFycmF5KGUpLCB0KTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW0pIHJldHVybiBlLmdldFJlYWRlcigpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU291cmNlIG9mIGB0b0J5dGVTdHJlYW1SZWFkZXJgIGhhcyB0byBiZSBhIEFycmF5QnVmZmVyIG9yIFJlYWRhYmxlU3RyZWFtXCIpO1xuICAgICAgICB9KG4pLCB0KTtcbiAgICB9KG4sIF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKHQpKTtcbiAgICBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfc3luY0VuZ2luZUxvYWRCdW5kbGUoYXdhaXQgX19QUklWQVRFX2dldFN5bmNFbmdpbmUoZSksIGksIHIpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXROYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5hbWVkIHF1ZXJ5XCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gbi5Vci5nZXROYW1lZFF1ZXJ5KGUsIHQpKSk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldEluZGV4Q29uZmlndXJhdGlvbihlLCB0KSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUNvbmZpZ3VyZUZpZWxkSW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5pbmRleE1hbmFnZXIsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb25maWd1cmUgaW5kZXhlc1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiByLmdldEZpZWxkSW5kZXhlcyhlKS5uZXh0KChuID0+IFxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIENvbXBhcmVzIHR3byBhcnJheSBmb3IgZXF1YWxpdHkgdXNpbmcgY29tcGFyYXRvci4gVGhlIG1ldGhvZCBjb21wdXRlcyB0aGVcbiAqIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgaW4gYGFmdGVyYCBidXQgbm90XG4gKiBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluIGBiZWZvcmVgIGJ1dCBtaXNzaW5nXG4gKiBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIGFycmF5LlxuICogQHBhcmFtIGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmb3IgdGhlIGVsZW1lbnRzIGluIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKiBAcGFyYW0gb25BZGQgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2YgYFxuICogYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuXG4gKiBAcGFyYW0gb25SZW1vdmUgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2ZcbiAqIGBiZWZvcmVgIGJ1dCBub3QgYGFmdGVyYC5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZGlmZkFycmF5cyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICBlID0gWyAuLi5lIF0sIHQgPSBbIC4uLnQgXSwgZS5zb3J0KG4pLCB0LnNvcnQobik7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5sZW5ndGgsIG8gPSB0Lmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBfID0gMCwgYSA9IDA7XG4gICAgICAgICAgICBmb3IgKDtfIDwgbyAmJiBhIDwgczsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4oZVthXSwgdFtfXSk7XG4gICAgICAgICAgICAgICAgcyA8IDAgPyBcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkXG4gICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICBpKGVbYSsrXSkgOiBzID4gMCA/IFxuICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgLy8gaXMgb25seSBpbiBgYWZ0ZXJgLlxuICAgICAgICAgICAgICAgIHIodFtfKytdKSA6IChfKyssIGErKyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKDtfIDwgbzsgKSByKHRbXysrXSk7XG4gICAgICAgICAgICBmb3IgKDthIDwgczsgKSBpKGVbYSsrXSk7XG4gICAgICAgIH0obiwgdCwgX19QUklWQVRFX2ZpZWxkSW5kZXhTZW1hbnRpY0NvbXBhcmF0b3IsICh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaChyLmFkZEZpZWxkSW5kZXgoZSwgdCkpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHIuZGVsZXRlRmllbGRJbmRleChlLCB0KSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpKSkpKTtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpLCB0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50U2V0UGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUsIHQpIHtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlU2V0SW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2RlYnVnQ2FzdChlKS5ucy5XaSA9IHQ7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudERlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZURlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBuID0gdC5pbmRleE1hbmFnZXI7XG4gICAgICAgIHJldHVybiB0LnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRGVsZXRlIEFsbCBJbmRleGVzXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IG4uZGVsZXRlQWxsRmllbGRJbmRleGVzKGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgY2xpZW50IHN0YXRlIGlzOlxuICAgIC8vICAgICBmaXJlc3RvcmVfY2xpZW50c188cGVyc2lzdGVuY2VfcHJlZml4Pl88aW5zdGFuY2Vfa2V5PlxuICAgIChhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29tcGFyZXMgdHdvIGBFeHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnNgIG9iamVjdHMgZm9yIGVxdWFsaXR5LlxuICovXG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYEV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9uc2Agd2l0aCB0aGUgc2FtZVxuICogb3B0aW9uIHZhbHVlcyBhcyB0aGUgZ2l2ZW4gaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyhlKSB7XG4gICAgY29uc3QgdCA9IHt9O1xuICAgIHJldHVybiB2b2lkIDAgIT09IGUudGltZW91dFNlY29uZHMgJiYgKHQudGltZW91dFNlY29uZHMgPSBlLnRpbWVvdXRTZWNvbmRzKSwgdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgbWUgPSBuZXcgTWFwO1xuXG4vKipcbiAqIEFuIGluc3RhbmNlIG1hcCB0aGF0IGVuc3VyZXMgb25seSBvbmUgRGF0YXN0b3JlIGV4aXN0cyBwZXIgRmlyZXN0b3JlXG4gKiBpbnN0YW5jZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZU5vbkVtcHR5QXJndW1lbnQoZSwgdCwgbikge1xuICAgIGlmICghbikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSBjYW5ub3QgYmUgY2FsbGVkIHdpdGggYW4gZW1wdHkgJHt0fS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0d28gYm9vbGVhbiBvcHRpb25zIGFyZSBub3Qgc2V0IGF0IHRoZSBzYW1lIHRpbWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlcihlLCB0LCBuLCByKSB7XG4gICAgaWYgKCEwID09PSB0ICYmICEwID09PSByKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgJHtlfSBhbmQgJHtufSBjYW5ub3QgYmUgdXNlZCB0b2dldGhlci5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdCBjb250YWluc1xuICogYW4gZXZlbiBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVEb2N1bWVudFBhdGgoZSkge1xuICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZG9jdW1lbnQgcmVmZXJlbmNlLiBEb2N1bWVudCByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7ZX0gaGFzICR7ZS5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBjb2xsZWN0aW9uIChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXRcbiAqIGNvbnRhaW5zIGFuIG9kZCBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVDb2xsZWN0aW9uUGF0aChlKSB7XG4gICAgaWYgKERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uIHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke2V9IGhhcyAke2UubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxuICogKGkuZS4gZXhjbHVkZXMgQXJyYXksIERhdGUsIGV0Yy4pLlxuICovXG4vKiogUmV0dXJucyBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIC8gdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGlucHV0LiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24oZSkge1xuICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gXCJudWxsXCI7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBlLmxlbmd0aCA+IDIwICYmIChlID0gYCR7ZS5zdWJzdHJpbmcoMCwgMjApfS4uLmApLCBcbiAgICBKU09OLnN0cmluZ2lmeShlKTtcbiAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgZSB8fCBcImJvb2xlYW5cIiA9PSB0eXBlb2YgZSkgcmV0dXJuIFwiXCIgKyBlO1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiBlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBcImFuIGFycmF5XCI7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgICAgIC8qKiB0cnkgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvciBhbiBvYmplY3QuICovXG4gICAgICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfdHJ5R2V0Q3VzdG9tT2JqZWN0VHlwZShlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuY29uc3RydWN0b3IpIHJldHVybiBlLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYCwgb3B0aW9uYWxseSB1bndyYXBwaW5nIENvbXBhdCB0eXBlcyB0byBleHBvc2UgdGhlXG4gKiB1bmRlcmx5aW5nIGluc3RhbmNlLiBUaHJvd3MgaWYgIGBvYmpgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgVGAuXG4gKlxuICogVGhpcyBjYXN0IGlzIHVzZWQgaW4gdGhlIExpdGUgYW5kIEZ1bGwgU0RLIHRvIHZlcmlmeSBpbnN0YW5jZSB0eXBlcyBmb3JcbiAqIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIHB1YmxpYyBBUEkuXG4gKiBAaW50ZXJuYWxcbiAqLyAoZSk7XG4gICAgICAgICAgICByZXR1cm4gdCA/IGBhIGN1c3RvbSAke3R9IG9iamVjdGAgOiBcImFuIG9iamVjdFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgPyBcImEgZnVuY3Rpb25cIiA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhc3QoZSwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxudCkge1xuICAgIGlmIChcIl9kZWxlZ2F0ZVwiIGluIGUgJiYgKFxuICAgIC8vIFVud3JhcCBDb21wYXQgdHlwZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGUgPSBlLl9kZWxlZ2F0ZSksICEoZSBpbnN0YW5jZW9mIHQpKSB7XG4gICAgICAgIGlmICh0Lm5hbWUgPT09IGUuY29uc3RydWN0b3IubmFtZSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUeXBlIGRvZXMgbm90IG1hdGNoIHRoZSBleHBlY3RlZCBpbnN0YW5jZS4gRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIFNESz9cIik7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBFeHBlY3RlZCB0eXBlICcke3QubmFtZX0nLCBidXQgaXQgd2FzOiAke259YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKGUsIHQpIHtcbiAgICBpZiAodCA8PSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIHJlcXVpcmVzIGEgcG9zaXRpdmUgbnVtYmVyLCBidXQgaXQgd2FzOiAke3R9LmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gc2V0dGluZ3MoKSBkZWZhdWx0czpcbi8qKlxuICogQSBjb25jcmV0ZSB0eXBlIGRlc2NyaWJpbmcgYWxsIHRoZSB2YWx1ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB2aWEgYVxuICogdXNlci1zdXBwbGllZCBgRmlyZXN0b3JlU2V0dGluZ3NgIG9iamVjdC4gVGhpcyBpcyBhIHNlcGFyYXRlIHR5cGUgc28gdGhhdFxuICogZGVmYXVsdHMgY2FuIGJlIHN1cHBsaWVkIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5LlxuICovXG5jbGFzcyBGaXJlc3RvcmVTZXR0aW5nc0ltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdmFyIHQsIG47XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUuaG9zdCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZS5zc2wpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgcHJvdmlkZSBzc2wgb3B0aW9uIGlmIGhvc3Qgb3B0aW9uIGlzIG5vdCBzZXRcIik7XG4gICAgICAgICAgICB0aGlzLmhvc3QgPSBcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiLCB0aGlzLnNzbCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB0aGlzLmhvc3QgPSBlLmhvc3QsIHRoaXMuc3NsID0gbnVsbCA9PT0gKHQgPSBlLnNzbCkgfHwgdm9pZCAwID09PSB0IHx8IHQ7XG4gICAgICAgIGlmICh0aGlzLmNyZWRlbnRpYWxzID0gZS5jcmVkZW50aWFscywgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gISFlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIFxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSBlLmxvY2FsQ2FjaGUsIHZvaWQgMCA9PT0gZS5jYWNoZVNpemVCeXRlcykgdGhpcy5jYWNoZVNpemVCeXRlcyA9IDQxOTQzMDQwOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgtMSAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiBlLmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZS5jYWNoZVNpemVCeXRlcztcbiAgICAgICAgfVxuICAgICAgICBfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlcihcImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmdcIiwgZS5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCBcImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZ1wiLCBlLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyksIFxuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPSAhIWUuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID8gdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSAhMSA6IHZvaWQgMCA9PT0gZS5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPyB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9IHRydWUgOiBcbiAgICAgICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCBjb2VyY2UgdGhlIHZhbHVlIHRvIGJvb2xlYW4gZXZlbiB0aG91Z2hcbiAgICAgICAgLy8gdGhlIFR5cGVTY3JpcHQgY29tcGlsZXIgaGFzIG5hcnJvd2VkIHRoZSB0eXBlIHRvIGJvb2xlYW4gYWxyZWFkeS5cbiAgICAgICAgLy8gbm9pbnNwZWN0aW9uIFBvaW50bGVzc0Jvb2xlYW5FeHByZXNzaW9uSlNcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSAhIWUuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMgPSBfX1BSSVZBVEVfY2xvbmVMb25nUG9sbGluZ09wdGlvbnMobnVsbCAhPT0gKG4gPSBlLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucykgJiYgdm9pZCAwICE9PSBuID8gbiA6IHt9KSwgXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZUxvbmdQb2xsaW5nT3B0aW9ucyhlKSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlLnRpbWVvdXRTZWNvbmRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGUudGltZW91dFNlY29uZHMpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgaW52YWxpZCBsb25nIHBvbGxpbmcgdGltZW91dDogJHtlLnRpbWVvdXRTZWNvbmRzfSAobXVzdCBub3QgYmUgTmFOKWApO1xuICAgICAgICAgICAgICAgIGlmIChlLnRpbWVvdXRTZWNvbmRzIDwgNSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7ZS50aW1lb3V0U2Vjb25kc30gKG1pbmltdW0gYWxsb3dlZCB2YWx1ZSBpcyA1KWApO1xuICAgICAgICAgICAgICAgIGlmIChlLnRpbWVvdXRTZWNvbmRzID4gMzApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBpbnZhbGlkIGxvbmcgcG9sbGluZyB0aW1lb3V0OiAke2UudGltZW91dFNlY29uZHN9IChtYXhpbXVtIGFsbG93ZWQgdmFsdWUgaXMgMzApYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKi8gKHRoaXMuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zKSwgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSAhIWUudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdCA9PT0gZS5ob3N0ICYmIHRoaXMuc3NsID09PSBlLnNzbCAmJiB0aGlzLmNyZWRlbnRpYWxzID09PSBlLmNyZWRlbnRpYWxzICYmIHRoaXMuY2FjaGVTaXplQnl0ZXMgPT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID09PSBlLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgJiYgdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPT09IGUuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nICYmIGZ1bmN0aW9uIF9fUFJJVkFURV9sb25nUG9sbGluZ09wdGlvbnNFcXVhbChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gZS50aW1lb3V0U2Vjb25kcyA9PT0gdC50aW1lb3V0U2Vjb25kcztcbiAgICAgICAgfSh0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucywgZS5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpICYmIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9PT0gZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzICYmIHRoaXMudXNlRmV0Y2hTdHJlYW1zID09PSBlLnVzZUZldGNoU3RyZWFtcztcbiAgICB9XG59XG5cbmNsYXNzIEZpcmVzdG9yZSQxIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZSwgdGhpcy5fYXBwQ2hlY2tDcmVkZW50aWFscyA9IHQsIHRoaXMuX2RhdGFiYXNlSWQgPSBuLCBcbiAgICAgICAgdGhpcy5fYXBwID0gciwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgRmlyZXN0b3JlU2V0dGluZ3NJbXBsKHt9KSwgXG4gICAgICAgIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYEZpcmVzdG9yZWAgc2VydmljZVxuICAgICAqIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgYXBwKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2FwcCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwO1xuICAgIH1cbiAgICBnZXQgX2luaXRpYWxpemVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW47XG4gICAgfVxuICAgIGdldCBfdGVybWluYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgX3NldFNldHRpbmdzKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzRnJvemVuKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgRmlyZXN0b3JlU2V0dGluZ3NJbXBsKGUpLCB2b2lkIDAgIT09IGUuY3JlZGVudGlhbHMgJiYgKHRoaXMuX2F1dGhDcmVkZW50aWFscyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9tYWtlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIoZSkge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gbmV3IF9fUFJJVkFURV9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyO1xuICAgICAgICAgICAgc3dpdGNoIChlLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImZpcnN0UGFydHlcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9GaXJzdFBhcnR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIoZS5zZXNzaW9uSW5kZXggfHwgXCIwXCIsIGUuaWFtVG9rZW4gfHwgbnVsbCwgZS5hdXRoVG9rZW5GYWN0b3J5IHx8IG51bGwpO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJwcm92aWRlclwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBlLmNsaWVudDtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwibWFrZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIGZhaWxlZCBkdWUgdG8gaW52YWxpZCBjcmVkZW50aWFsIHR5cGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZS5jcmVkZW50aWFscykpO1xuICAgIH1cbiAgICBfZ2V0U2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2ZyZWV6ZVNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMCwgdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9kZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXJtaW5hdGVUYXNrIHx8ICh0aGlzLl90ZXJtaW5hdGVUYXNrID0gdGhpcy5fdGVybWluYXRlKCkpLCB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYEZpcmVzdG9yZWAgaW5zdGFuY2UuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwcDogdGhpcy5fYXBwLFxuICAgICAgICAgICAgZGF0YWJhc2VJZDogdGhpcy5fZGF0YWJhc2VJZCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLl9zZXR0aW5nc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGVzIGFsbCBjb21wb25lbnRzIHVzZWQgYnkgdGhpcyBjbGllbnQuIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBtZXRob2QgdG8gY2xlYW4gdXAgdGhlaXIgb3duIGRlcGVuZGVuY2llcywgYnV0IG11c3QgYWxzbyBjYWxsIHRoaXNcbiAgICAgKiBtZXRob2QuXG4gICAgICpcbiAgICAgKiBPbmx5IGV2ZXIgY2FsbGVkIG9uY2UuXG4gICAgICovICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIC8qKlxuICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIGluc3RhbmNlLiBNdXN0IGJlIGNhbGxlZFxuICogd2hlbiB0aGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgaXMgdGVybWluYXRlZC5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3JlbW92ZUNvbXBvbmVudHMoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG1lLmdldChlKTtcbiAgICAgICAgICAgIHQgJiYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkNvbXBvbmVudFByb3ZpZGVyXCIsIFwiUmVtb3ZpbmcgRGF0YXN0b3JlXCIpLCBtZS5kZWxldGUoZSksIFxuICAgICAgICAgICAgdC50ZXJtaW5hdGUoKSk7XG4gICAgICAgIH0odGhpcyksIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNb2RpZnkgdGhpcyBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBDbG91ZCBGaXJlc3RvcmUgZW11bGF0b3IuXG4gKlxuICogTm90ZTogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBpbnN0YW5jZSBoYXMgYmVlbiB1c2VkIHRvIGRvIGFueVxuICogb3BlcmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIHRvIGNvbmZpZ3VyZSB0byBjb25uZWN0IHRvIHRoZVxuICogZW11bGF0b3IuXG4gKiBAcGFyYW0gaG9zdCAtIHRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KS5cbiAqIEBwYXJhbSBwb3J0IC0gdGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA5MDAwKS5cbiAqIEBwYXJhbSBvcHRpb25zLm1vY2tVc2VyVG9rZW4gLSB0aGUgbW9jayBhdXRoIHRva2VuIHRvIHVzZSBmb3IgdW5pdCB0ZXN0aW5nXG4gKiBTZWN1cml0eSBSdWxlcy5cbiAqLyBmdW5jdGlvbiBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IoZSwgdCwgbiwgciA9IHt9KSB7XG4gICAgdmFyIGk7XG4gICAgY29uc3QgcyA9IChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlJDEpKS5fZ2V0U2V0dGluZ3MoKSwgbyA9IGAke3R9OiR7bn1gO1xuICAgIGlmIChcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiICE9PSBzLmhvc3QgJiYgcy5ob3N0ICE9PSBvICYmIF9fUFJJVkFURV9sb2dXYXJuKFwiSG9zdCBoYXMgYmVlbiBzZXQgaW4gYm90aCBzZXR0aW5ncygpIGFuZCBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IoKSwgZW11bGF0b3IgaG9zdCB3aWxsIGJlIHVzZWQuXCIpLCBcbiAgICBlLl9zZXRTZXR0aW5ncyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHMpLCB7XG4gICAgICAgIGhvc3Q6IG8sXG4gICAgICAgIHNzbDogITFcbiAgICB9KSksIHIubW9ja1VzZXJUb2tlbikge1xuICAgICAgICBsZXQgdCwgbjtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHIubW9ja1VzZXJUb2tlbikgdCA9IHIubW9ja1VzZXJUb2tlbiwgbiA9IFVzZXIuTU9DS19VU0VSOyBlbHNlIHtcbiAgICAgICAgICAgIC8vIExldCBjcmVhdGVNb2NrVXNlclRva2VuIHZhbGlkYXRlIGZpcnN0IChjYXRjaGVzIGNvbW1vbiBtaXN0YWtlcyBsaWtlXG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpZWxkIFwidWlkXCIgYW5kIG1pc3NpbmcgZmllbGQgXCJzdWJcIiAvIFwidXNlcl9pZFwiLilcbiAgICAgICAgICAgIHQgPSBjcmVhdGVNb2NrVXNlclRva2VuKHIubW9ja1VzZXJUb2tlbiwgbnVsbCA9PT0gKGkgPSBlLl9hcHApIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc3QgcyA9IHIubW9ja1VzZXJUb2tlbi5zdWIgfHwgci5tb2NrVXNlclRva2VuLnVzZXJfaWQ7XG4gICAgICAgICAgICBpZiAoIXMpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgVXNlcihzKTtcbiAgICAgICAgfVxuICAgICAgICBlLl9hdXRoQ3JlZGVudGlhbHMgPSBuZXcgX19QUklWQVRFX0VtdWxhdG9yQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIobmV3IF9fUFJJVkFURV9PQXV0aFRva2VuKHQsIG4pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYFF1ZXJ5YCByZWZlcnMgdG8gYSBxdWVyeSB3aGljaCB5b3UgY2FuIHJlYWQgb3IgbGlzdGVuIHRvLiBZb3UgY2FuIGFsc29cbiAqIGNvbnN0cnVjdCByZWZpbmVkIGBRdWVyeWAgb2JqZWN0cyBieSBhZGRpbmcgZmlsdGVycyBhbmQgb3JkZXJpbmcuXG4gKi8gY2xhc3MgUXVlcnkge1xuICAgIC8vIFRoaXMgaXMgdGhlIGxpdGUgdmVyc2lvbiBvZiB0aGUgUXVlcnkgY2xhc3MgaW4gdGhlIG1haW4gU0RLLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHQsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSB0LCB0aGlzLl9xdWVyeSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcInF1ZXJ5XCIsIHRoaXMuZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIGUsIHRoaXMuX3F1ZXJ5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRSZWZlcmVuY2VgIHJlZmVycyB0byBhIGRvY3VtZW50IGxvY2F0aW9uIGluIGEgRmlyZXN0b3JlIGRhdGFiYXNlXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gd3JpdGUsIHJlYWQsIG9yIGxpc3RlbiB0byB0aGUgbG9jYXRpb24uIFRoZSBkb2N1bWVudCBhdFxuICogdGhlIHJlZmVyZW5jZWQgbG9jYXRpb24gbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gKi8gY2xhc3MgRG9jdW1lbnRSZWZlcmVuY2Uge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgdCwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IHQsIHRoaXMuX2tleSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImRvY3VtZW50XCIsIHRoaXMuZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgZ2V0IF9wYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkb2N1bWVudCdzIGlkZW50aWZpZXIgd2l0aGluIGl0cyBjb2xsZWN0aW9uLlxuICAgICAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQgKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGJlbG9uZ3MgdG8uXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgdGhpcy5jb252ZXJ0ZXIsIHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBlLCB0aGlzLl9rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIGFkZGluZyBkb2N1bWVudHMsIGdldHRpbmdcbiAqIGRvY3VtZW50IHJlZmVyZW5jZXMsIGFuZCBxdWVyeWluZyBmb3IgZG9jdW1lbnRzICh1c2luZyB7QGxpbmsgKHF1ZXJ5OjEpfSkuXG4gKi8gY2xhc3MgQ29sbGVjdGlvblJlZmVyZW5jZSBleHRlbmRzIFF1ZXJ5IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChuKSksIHRoaXMuX3BhdGggPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJjb2xsZWN0aW9uXCI7XG4gICAgfVxuICAgIC8qKiBUaGUgY29sbGVjdGlvbidzIGlkZW50aWZpZXIuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGNvbGxlY3Rpb24gKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgY29udGFpbmluZyBgRG9jdW1lbnRSZWZlcmVuY2VgIGlmIHRoaXMgaXMgYVxuICAgICAqIHN1YmNvbGxlY3Rpb24uIElmIHRoaXMgaXNuJ3QgYSBzdWJjb2xsZWN0aW9uLCB0aGUgcmVmZXJlbmNlIGlzIG51bGwuXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLl9wYXRoLnBvcExhc3QoKTtcbiAgICAgICAgcmV0dXJuIGUuaXNFbXB0eSgpID8gbnVsbCA6IG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IERvY3VtZW50S2V5KGUpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgZSwgdGhpcy5fcGF0aCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb2xsZWN0aW9uKGUsIHQsIC4uLm4pIHtcbiAgICBpZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgX19QUklWQVRFX3ZhbGlkYXRlTm9uRW1wdHlBcmd1bWVudChcImNvbGxlY3Rpb25cIiwgXCJwYXRoXCIsIHQpLCBlIGluc3RhbmNlb2YgRmlyZXN0b3JlJDEpIHtcbiAgICAgICAgY29uc3QgciA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHQsIC4uLm4pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlQ29sbGVjdGlvblBhdGgociksIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKGUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcik7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCByID0gZS5fcGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0LCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVDb2xsZWN0aW9uUGF0aChyKSwgbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UoZS5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHIpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVsaXRlKTogQ29uc2lkZXIgdXNpbmcgRXJyb3JGYWN0b3J5IC1cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi8wMTMxZTFmL3BhY2thZ2VzL3V0aWwvc3JjL2Vycm9ycy50cyNMMTA2XG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYFF1ZXJ5YCBpbnN0YW5jZSB0aGF0IGluY2x1ZGVzIGFsbCBkb2N1bWVudHMgaW4gdGhlXG4gKiBkYXRhYmFzZSB0aGF0IGFyZSBjb250YWluZWQgaW4gYSBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGVcbiAqIGdpdmVuIGBjb2xsZWN0aW9uSWRgLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBgRmlyZXN0b3JlYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSBjb2xsZWN0aW9uSWQgLSBJZGVudGlmaWVzIHRoZSBjb2xsZWN0aW9ucyB0byBxdWVyeSBvdmVyLiBFdmVyeVxuICogY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhpcyBJRCBhcyB0aGUgbGFzdCBzZWdtZW50IG9mIGl0cyBwYXRoXG4gKiB3aWxsIGJlIGluY2x1ZGVkLiBDYW5ub3QgY29udGFpbiBhIHNsYXNoLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYFF1ZXJ5YC5cbiAqLyBmdW5jdGlvbiBjb2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgIGlmIChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlJDEpLCBfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50KFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiY29sbGVjdGlvbiBpZFwiLCB0KSwgXG4gICAgdC5pbmRleE9mKFwiL1wiKSA+PSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke3R9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgUXVlcnkoZSwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlGb3JDb2xsZWN0aW9uR3JvdXAoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpLCBlKTtcbiAgICB9KHQpKTtcbn1cblxuZnVuY3Rpb24gZG9jKGUsIHQsIC4uLm4pIHtcbiAgICBpZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgXG4gICAgLy8gV2UgYWxsb3cgb21pc3Npb24gb2YgJ3BhdGhTdHJpbmcnIGJ1dCBleHBsaWNpdGx5IHByb2hpYml0IHBhc3NpbmcgaW4gYm90aFxuICAgIC8vICd1bmRlZmluZWQnIGFuZCAnbnVsbCcuXG4gICAgMSA9PT0gYXJndW1lbnRzLmxlbmd0aCAmJiAodCA9IF9fUFJJVkFURV9BdXRvSWQuVigpKSwgX19QUklWQVRFX3ZhbGlkYXRlTm9uRW1wdHlBcmd1bWVudChcImRvY1wiLCBcInBhdGhcIiwgdCksIFxuICAgIGUgaW5zdGFuY2VvZiBGaXJlc3RvcmUkMSkge1xuICAgICAgICBjb25zdCByID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCwgLi4ubik7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVEb2N1bWVudFBhdGgociksIG5ldyBEb2N1bWVudFJlZmVyZW5jZShlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgRG9jdW1lbnRLZXkocikpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSB8fCBlIGluc3RhbmNlb2YgQ29sbGVjdGlvblJlZmVyZW5jZSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgciA9IGUuX3BhdGguY2hpbGQoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCwgLi4ubikpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlRG9jdW1lbnRQYXRoKHIpLCBuZXcgRG9jdW1lbnRSZWZlcmVuY2UoZS5maXJlc3RvcmUsIGUgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlID8gZS5jb252ZXJ0ZXIgOiBudWxsLCBuZXcgRG9jdW1lbnRLZXkocikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZXMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gcmVmRXF1YWwoZSwgdCkge1xuICAgIHJldHVybiBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCAoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlKSAmJiAodCBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IHQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlKSAmJiAoZS5maXJlc3RvcmUgPT09IHQuZmlyZXN0b3JlICYmIGUucGF0aCA9PT0gdC5wYXRoICYmIGUuY29udmVydGVyID09PSB0LmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBxdWVyaWVzIHBvaW50IHRvIHRoZSBzYW1lIGNvbGxlY3Rpb24gYW5kIGFwcGx5XG4gKiB0aGUgc2FtZSBjb25zdHJhaW50cy5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gcXVlcnlFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgaW5zdGFuY2VvZiBRdWVyeSAmJiB0IGluc3RhbmNlb2YgUXVlcnkgJiYgKGUuZmlyZXN0b3JlID09PSB0LmZpcmVzdG9yZSAmJiBfX1BSSVZBVEVfcXVlcnlFcXVhbHMoZS5fcXVlcnksIHQuX3F1ZXJ5KSAmJiBlLmNvbnZlcnRlciA9PT0gdC5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQXN5bmNRdWV1ZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBUaGUgbGFzdCBwcm9taXNlIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgdGhpcy5aYSA9IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgLy8gQSBsaXN0IG9mIHJldHJ5YWJsZSBvcGVyYXRpb25zLiBSZXRyeWFibGUgb3BlcmF0aW9ucyBhcmUgcnVuIGluIG9yZGVyIGFuZFxuICAgICAgICAvLyByZXRyaWVkIHdpdGggYmFja29mZi5cbiAgICAgICAgdGhpcy5YYSA9IFtdLCBcbiAgICAgICAgLy8gSXMgdGhpcyBBc3luY1F1ZXVlIGJlaW5nIHNodXQgZG93bj8gT25jZSBpdCBpcyBzZXQgdG8gdHJ1ZSwgaXQgd2lsbCBub3RcbiAgICAgICAgLy8gYmUgY2hhbmdlZCBhZ2Fpbi5cbiAgICAgICAgdGhpcy5ldSA9ICExLCBcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBzY2hlZHVsZWQgdG8gYmUgcXVldWVkIGluIHRoZSBmdXR1cmUuIE9wZXJhdGlvbnMgYXJlXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBhZnRlciB0aGV5IGFyZSBydW4gb3IgY2FuY2VsZWQuXG4gICAgICAgIHRoaXMudHUgPSBbXSwgXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgdGhpcy5udSA9IG51bGwsIFxuICAgICAgICAvLyBGbGFnIHNldCB3aGlsZSB0aGVyZSdzIGFuIG91dHN0YW5kaW5nIEFzeW5jUXVldWUgb3BlcmF0aW9uLCB1c2VkIGZvclxuICAgICAgICAvLyBhc3NlcnRpb24gc2FuaXR5LWNoZWNrcy5cbiAgICAgICAgdGhpcy5ydSA9ICExLCBcbiAgICAgICAgLy8gRW5hYmxlZCBkdXJpbmcgc2h1dGRvd24gb24gU2FmYXJpIHRvIHByZXZlbnQgZnV0dXJlIGFjY2VzcyB0byBJbmRleGVkREIuXG4gICAgICAgIHRoaXMuaXUgPSAhMSwgXG4gICAgICAgIC8vIExpc3Qgb2YgVGltZXJJZHMgdG8gZmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IuXG4gICAgICAgIHRoaXMuc3UgPSBbXSwgXG4gICAgICAgIC8vIEJhY2tvZmYgdGltZXIgdXNlZCB0byBzY2hlZHVsZSByZXRyaWVzIGZvciByZXRyeWFibGUgb3BlcmF0aW9uc1xuICAgICAgICB0aGlzLkhvID0gbmV3IF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYodGhpcywgXCJhc3luY19xdWV1ZV9yZXRyeVwiIC8qIFRpbWVySWQuQXN5bmNRdWV1ZVJldHJ5ICovKSwgXG4gICAgICAgIC8vIFZpc2liaWxpdHkgaGFuZGxlciB0aGF0IHRyaWdnZXJzIGFuIGltbWVkaWF0ZSByZXRyeSBvZiBhbGwgcmV0cnlhYmxlXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIE1lYW50IHRvIHNwZWVkIHVwIHJlY292ZXJ5IHdoZW4gd2UgcmVnYWluIGZpbGUgc3lzdGVtIGFjY2Vzc1xuICAgICAgICAvLyBhZnRlciBwYWdlIGNvbWVzIGludG8gZm9yZWdyb3VuZC5cbiAgICAgICAgdGhpcy5vdSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBnZXREb2N1bWVudCgpO1xuICAgICAgICAgICAgZSAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJBc3luY1F1ZXVlXCIsIFwiVmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VkIHRvIFwiICsgZS52aXNpYmlsaXR5U3RhdGUpLCBcbiAgICAgICAgICAgIHRoaXMuSG8uJG8oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZSA9IGdldERvY3VtZW50KCk7XG4gICAgICAgIGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLmFkZEV2ZW50TGlzdGVuZXIgJiYgZS5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLm91KTtcbiAgICB9XG4gICAgZ2V0IGlzU2h1dHRpbmdEb3duKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ldTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gY29tcGxldGUgKGkuZS5cbiAgICAgKiB3ZSBpZ25vcmUgdGhlIFByb21pc2UgcmVzdWx0KS5cbiAgICAgKi8gICAgZW5xdWV1ZUFuZEZvcmdldChlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5lbnF1ZXVlKGUpO1xuICAgIH1cbiAgICBlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZChlKSB7XG4gICAgICAgIHRoaXMuX3UoKSwgXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5hdShlKTtcbiAgICB9XG4gICAgZW50ZXJSZXN0cmljdGVkTW9kZShlKSB7XG4gICAgICAgIGlmICghdGhpcy5ldSkge1xuICAgICAgICAgICAgdGhpcy5ldSA9ICEwLCB0aGlzLml1ID0gZSB8fCAhMTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBnZXREb2N1bWVudCgpO1xuICAgICAgICAgICAgdCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMub3UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVucXVldWUoZSkge1xuICAgICAgICBpZiAodGhpcy5fdSgpLCB0aGlzLmV1KSBcbiAgICAgICAgLy8gUmV0dXJuIGEgUHJvbWlzZSB3aGljaCBuZXZlciByZXNvbHZlcy5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoKSA9PiB7fSkpO1xuICAgICAgICAvLyBDcmVhdGUgYSBkZWZlcnJlZCBQcm9taXNlIHRoYXQgd2UgY2FuIHJldHVybiB0byB0aGUgY2FsbGVlLiBUaGlzXG4gICAgICAgIC8vIGFsbG93cyB1cyB0byByZXR1cm4gYSBcImhhbmdpbmcgUHJvbWlzZVwiIG9ubHkgdG8gdGhlIGNhbGxlZSBhbmQgc3RpbGxcbiAgICAgICAgLy8gYWR2YW5jZSB0aGUgcXVldWUgZXZlbiB3aGVuIHRoZSBvcGVyYXRpb24gaXMgbm90IHJ1bi5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXUoKCgpID0+IHRoaXMuZXUgJiYgdGhpcy5pdSA/IFByb21pc2UucmVzb2x2ZSgpIDogKGUoKS50aGVuKHQucmVzb2x2ZSwgdC5yZWplY3QpLCBcbiAgICAgICAgdC5wcm9taXNlKSkpLnRoZW4oKCgpID0+IHQucHJvbWlzZSkpO1xuICAgIH1cbiAgICBlbnF1ZXVlUmV0cnlhYmxlKGUpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5YYS5wdXNoKGUpLCB0aGlzLnV1KCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJ1bnMgdGhlIG5leHQgb3BlcmF0aW9uIGZyb20gdGhlIHJldHJ5YWJsZSBxdWV1ZS4gSWYgdGhlIG9wZXJhdGlvbiBmYWlscyxcbiAgICAgKiByZXNjaGVkdWxlcyB3aXRoIGJhY2tvZmYuXG4gICAgICovICAgIGFzeW5jIHV1KCkge1xuICAgICAgICBpZiAoMCAhPT0gdGhpcy5YYS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5YYVswXSgpLCB0aGlzLlhhLnNoaWZ0KCksIHRoaXMuSG8ucmVzZXQoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIHRocm93IGU7XG4gLy8gRmFpbHVyZSB3aWxsIGJlIGhhbmRsZWQgYnkgQXN5bmNRdWV1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJBc3luY1F1ZXVlXCIsIFwiT3BlcmF0aW9uIGZhaWxlZCB3aXRoIHJldHJ5YWJsZSBlcnJvcjogXCIgKyBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuWGEubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBhZGRpdGlvbmFsIG9wZXJhdGlvbnMsIHdlIHJlLXNjaGVkdWxlIGByZXRyeU5leHRPcCgpYC5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHJ1biByZXRyeWFibGUgb3BlcmF0aW9ucyB0aGF0IGZhaWxlZCBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZWlyIGluaXRpYWwgYXR0ZW1wdCBzaW5jZSB3ZSBkb24ndCBrbm93IHdoZXRoZXIgdGhleSBhcmUgYWxyZWFkeVxuICAgICAgICAgICAgLy8gZW5xdWV1ZWQuIElmLCBmb3IgZXhhbXBsZSwgYG9wMWAsIGBvcDJgLCBgb3AzYCBhcmUgZW5xdWV1ZWQgYW5kIGBvcDFgXG4gICAgICAgICAgICAvLyBuZWVkcyB0byAgYmUgcmUtcnVuLCB3ZSB3aWxsIHJ1biBgb3AxYCwgYG9wMWAsIGBvcDJgIHVzaW5nIHRoZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBlbnF1ZXVlZCBjYWxscyB0byBgcmV0cnlOZXh0T3AoKWAuIGBvcDMoKWAgd2lsbCB0aGVuIHJ1biBpbiB0aGVcbiAgICAgICAgICAgIC8vIGNhbGwgc2NoZWR1bGVkIGhlcmUuXG4gICAgICAgICAgICAvLyBTaW5jZSBgYmFja29mZkFuZFJ1bigpYCBjYW5jZWxzIGFuIGV4aXN0aW5nIGJhY2tvZmYgYW5kIHNjaGVkdWxlcyBhXG4gICAgICAgICAgICAvLyBuZXcgYmFja29mZiBvbiBldmVyeSBjYWxsLCB0aGVyZSBpcyBvbmx5IGV2ZXIgYSBzaW5nbGUgYWRkaXRpb25hbFxuICAgICAgICAgICAgLy8gb3BlcmF0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIHRoaXMuSG8uUW8oKCgpID0+IHRoaXMudXUoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF1KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuWmEudGhlbigoKCkgPT4gKHRoaXMucnUgPSAhMCwgZSgpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMubnUgPSBlLCB0aGlzLnJ1ID0gITE7XG4gICAgICAgICAgICBjb25zdCB0ID0gXG4gICAgICAgICAgICAvKipcbiAqIENocm9tZSBpbmNsdWRlcyBFcnJvci5tZXNzYWdlIGluIEVycm9yLnN0YWNrLiBPdGhlciBicm93c2VycyBkbyBub3QuXG4gKiBUaGlzIHJldHVybnMgZXhwZWN0ZWQgb3V0cHV0IG9mIG1lc3NhZ2UgKyBzdGFjayB3aGVuIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSBlcnJvciAtIEVycm9yIG9yIEZpcmVzdG9yZUVycm9yXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRNZXNzYWdlT3JTdGFjayhlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBlLm1lc3NhZ2UgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBlLnN0YWNrICYmICh0ID0gZS5zdGFjay5pbmNsdWRlcyhlLm1lc3NhZ2UpID8gZS5zdGFjayA6IGUubWVzc2FnZSArIFwiXFxuXCIgKyBlLnN0YWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChlKTtcbiAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZSBlcnJvciBzbyB0aGF0IHRoaXMudGFpbCBiZWNvbWVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBhbmRcbiAgICAgICAgICAgIC8vIGFsbCBmdXJ0aGVyIGF0dGVtcHRzIHRvIGNoYWluICh2aWEgLnRoZW4pIHdpbGwganVzdCBzaG9ydC1jaXJjdWl0XG4gICAgICAgICAgICAvLyBhbmQgcmV0dXJuIHRoZSByZWplY3RlZCBQcm9taXNlLlxuICAgICAgICAgICAgdGhyb3cgX19QUklWQVRFX2xvZ0Vycm9yKFwiSU5URVJOQUwgVU5IQU5ETEVEIEVSUk9SOiBcIiwgdCksIGU7XG4gICAgICAgIH0pKS50aGVuKChlID0+ICh0aGlzLnJ1ID0gITEsIGUpKSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLlphID0gdCwgdDtcbiAgICB9XG4gICAgZW5xdWV1ZUFmdGVyRGVsYXkoZSwgdCwgbikge1xuICAgICAgICB0aGlzLl91KCksIFxuICAgICAgICAvLyBGYXN0LWZvcndhcmQgZGVsYXlzIGZvciB0aW1lcklkcyB0aGF0IGhhdmUgYmVlbiBvdmVycmlkZW4uXG4gICAgICAgIHRoaXMuc3UuaW5kZXhPZihlKSA+IC0xICYmICh0ID0gMCk7XG4gICAgICAgIGNvbnN0IHIgPSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKHRoaXMsIGUsIHQsIG4sIChlID0+IHRoaXMuY3UoZSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHUucHVzaChyKSwgcjtcbiAgICB9XG4gICAgX3UoKSB7XG4gICAgICAgIHRoaXMubnUgJiYgZmFpbCgpO1xuICAgIH1cbiAgICB2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCkge31cbiAgICAvKipcbiAgICAgKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHF1ZXVlZCB0YXNrcyBhcmUgZmluaXNoZWQgZXhlY3V0aW5nLiBEZWxheWVkXG4gICAgICogb3BlcmF0aW9ucyBhcmUgbm90IHJ1bi5cbiAgICAgKi8gICAgYXN5bmMgbHUoKSB7XG4gICAgICAgIC8vIE9wZXJhdGlvbnMgaW4gdGhlIHF1ZXVlIHByaW9yIHRvIGRyYWluaW5nIG1heSBoYXZlIGVucXVldWVkIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gS2VlcCBkcmFpbmluZyB0aGUgcXVldWUgdW50aWwgdGhlIHRhaWwgaXMgbm8gbG9uZ2VyIGFkdmFuY2VkLFxuICAgICAgICAvLyB3aGljaCBpbmRpY2F0ZXMgdGhhdCBubyBtb3JlIG5ldyBvcGVyYXRpb25zIHdlcmUgZW5xdWV1ZWQgYW5kIHRoYXQgYWxsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMgd2VyZSBleGVjdXRlZC5cbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGUgPSB0aGlzLlphLCBhd2FpdCBlO1xuICAgICAgICB9IHdoaWxlIChlICE9PSB0aGlzLlphKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBEZXRlcm1pbmUgaWYgYSBkZWxheWVkIG9wZXJhdGlvbiB3aXRoIGEgcGFydGljdWxhciBUaW1lcklkXG4gICAgICogZXhpc3RzLlxuICAgICAqLyAgICBodShlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnR1KSBpZiAodC50aW1lcklkID09PSBlKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBSdW5zIHNvbWUgb3IgYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucyBlYXJseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsYXN0VGltZXJJZCAtIERlbGF5ZWQgb3BlcmF0aW9ucyB1cCB0byBhbmQgaW5jbHVkaW5nIHRoaXMgVGltZXJJZFxuICAgICAqIHdpbGwgYmUgZHJhaW5lZC4gUGFzcyBUaW1lcklkLkFsbCB0byBydW4gYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFsbCBvcGVyYXRpb25zIGhhdmUgYmVlbiBydW4uXG4gICAgICovICAgIFB1KGUpIHtcbiAgICAgICAgLy8gTm90ZSB0aGF0IGRyYWluaW5nIG1heSBnZW5lcmF0ZSBtb3JlIGRlbGF5ZWQgb3BzLCBzbyB3ZSBkbyB0aGF0IGZpcnN0LlxuICAgICAgICByZXR1cm4gdGhpcy5sdSgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFJ1biBvcHMgaW4gdGhlIHNhbWUgb3JkZXIgdGhleSdkIHJ1biBpZiB0aGV5IHJhbiBuYXR1cmFsbHkuXG4gICAgICAgICAgICB0aGlzLnR1LnNvcnQoKChlLCB0KSA9PiBlLnRhcmdldFRpbWVNcyAtIHQudGFyZ2V0VGltZU1zKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy50dSkgaWYgKHQuc2tpcERlbGF5KCksIFwiYWxsXCIgLyogVGltZXJJZC5BbGwgKi8gIT09IGUgJiYgdC50aW1lcklkID09PSBlKSBicmVhaztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmx1KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBTa2lwIGFsbCBzdWJzZXF1ZW50IGRlbGF5cyBmb3IgYSB0aW1lciBpZC5cbiAgICAgKi8gICAgSXUoZSkge1xuICAgICAgICB0aGlzLnN1LnB1c2goZSk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgb25jZSBhIERlbGF5ZWRPcGVyYXRpb24gaXMgcnVuIG9yIGNhbmNlbGVkLiAqLyAgICBjdShlKSB7XG4gICAgICAgIC8vIE5PVEU6IGluZGV4T2YgLyBzbGljZSBhcmUgTyhuKSwgYnV0IGRlbGF5ZWRPcGVyYXRpb25zIGlzIGV4cGVjdGVkIHRvIGJlIHNtYWxsLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy50dS5pbmRleE9mKGUpO1xuICAgICAgICB0aGlzLnR1LnNwbGljZSh0LCAxKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlcihlKSB7XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGFuIG9iamVjdCBhbmQgY29udGFpbnMgYXQgbGVhc3Qgb25lIG9mIHRoZSBzcGVjaWZpZWRcbiAqIG1ldGhvZHMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2ltcGxlbWVudHNBbnlNZXRob2RzKGUsIHQpIHtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gZTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIGlmIChlIGluIG4gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuW2VdKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFJlcHJlc2VudHMgdGhlIHRhc2sgb2YgbG9hZGluZyBhIEZpcmVzdG9yZSBidW5kbGUuIEl0IHByb3ZpZGVzIHByb2dyZXNzIG9mIGJ1bmRsZVxuICogbG9hZGluZywgYXMgd2VsbCBhcyB0YXNrIGNvbXBsZXRpb24gYW5kIGVycm9yIGV2ZW50cy5cbiAqXG4gKiBUaGUgQVBJIGlzIGNvbXBhdGlibGUgd2l0aCBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gKGUsIFsgXCJuZXh0XCIsIFwiZXJyb3JcIiwgXCJjb21wbGV0ZVwiIF0pO1xufVxuXG5jbGFzcyBMb2FkQnVuZGxlVGFzayB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7fSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIFxuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICAgICAgdG90YWxCeXRlczogMCxcbiAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiAwLFxuICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGZ1bmN0aW9ucyB0byBsaXN0ZW4gdG8gYnVuZGxlIGxvYWRpbmcgcHJvZ3Jlc3MgZXZlbnRzLlxuICAgICAqIEBwYXJhbSBuZXh0IC0gQ2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBwcm9ncmVzcyB1cGRhdGUgZnJvbSBidW5kbGUgbG9hZGluZy4gVHlwaWNhbGx5IGBuZXh0YCBjYWxscyBvY2N1clxuICAgICAqICAgZWFjaCB0aW1lIGEgRmlyZXN0b3JlIGRvY3VtZW50IGlzIGxvYWRlZCBmcm9tIHRoZSBidW5kbGUuXG4gICAgICogQHBhcmFtIGVycm9yIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy4gVGhlIHRhc2sgYWJvcnRzIGFmdGVyIHJlcG9ydGluZyB0aGVcbiAgICAgKiAgIGVycm9yLCBhbmQgdGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdXBkYXRlcyBhZnRlciB0aGlzLlxuICAgICAqIEBwYXJhbSBjb21wbGV0ZSAtIENhbGxlZCB3aGVuIHRoZSBsb2FkaW5nIHRhc2sgaXMgY29tcGxldGUuXG4gICAgICovICAgIG9uUHJvZ3Jlc3MoZSwgdCwgbikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge1xuICAgICAgICAgICAgbmV4dDogZSxcbiAgICAgICAgICAgIGVycm9yOiB0LFxuICAgICAgICAgICAgY29tcGxldGU6IG5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4uY2F0Y2hgIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLmNhdGNoKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi50aGVuYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25GdWxmaWxsZWQgLSBDYWxsZWQgb24gdGhlIGNvbXBsZXRpb24gb2YgdGhlIGxvYWRpbmcgdGFzayB3aXRoIGEgZmluYWwgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHVwZGF0ZS5cbiAgICAgKiAgIFRoZSB1cGRhdGUgd2lsbCBhbHdheXMgaGF2ZSBpdHMgYHRhc2tTdGF0ZWAgc2V0IHRvIGBcIlN1Y2Nlc3NcImAuXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICB0aGVuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS50aGVuKGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGNvbXBsZXRlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9jb21wbGV0ZVdpdGgoZSkge1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9ncmVzcyhlKSwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlKCksIFxuICAgICAgICB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlc29sdmUoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgZmFpbGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgRXJyb3JgIGFzIHRoZSByZWFzb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfZmFpbFdpdGgoZSkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MudGFza1N0YXRlID0gXCJFcnJvclwiLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHRoaXMuX2xhc3RQcm9ncmVzcyksIFxuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IoZSksIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVqZWN0KGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhIHByb2dyZXNzIHVwZGF0ZSBvZiBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyAtIFRoZSBuZXcgcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfdXBkYXRlUHJvZ3Jlc3MoZSkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSBlLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29uc3RhbnQgdXNlZCB0byBpbmRpY2F0ZSB0aGUgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbiBzaG91bGQgYmUgZGlzYWJsZWQuXG4gKiBTZXQgdGhpcyB2YWx1ZSBhcyB0aGUgYGNhY2hlU2l6ZUJ5dGVzYCBvbiB0aGUgc2V0dGluZ3MgcGFzc2VkIHRvIHRoZVxuICoge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gY29uc3QgZmUgPSAtMTtcblxuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKi8gY2xhc3MgRmlyZXN0b3JlIGV4dGVuZHMgRmlyZXN0b3JlJDEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICBzdXBlcihlLCB0LCBuLCByKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSB7QGxpbmsgRmlyZXN0b3JlfSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlXCIsIHRoaXMuX3F1ZXVlID0gZnVuY3Rpb24gX19QUklWQVRFX25ld0FzeW5jUXVldWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9Bc3luY1F1ZXVlSW1wbDtcbiAgICAgICAgfSgpLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IChudWxsID09IHIgPyB2b2lkIDAgOiByLm5hbWUpIHx8IFwiW0RFRkFVTFRdXCI7XG4gICAgfVxuICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQgfHwgXG4gICAgICAgIC8vIFRoZSBjbGllbnQgbXVzdCBiZSBpbml0aWFsaXplZCB0byBlbnN1cmUgdGhhdCBhbGwgc3Vic2VxdWVudCBBUElcbiAgICAgICAgLy8gdXNhZ2UgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAgX19QUklWQVRFX2NvbmZpZ3VyZUZpcmVzdG9yZSh0aGlzKSwgdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnRlcm1pbmF0ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB7QGxpbmsgRmlyZXN0b3JlfSB3aXRoIHRoZSBwcm92aWRlZCBzZXR0aW5ncy5cbiAqIENhbiBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9uLCBpbmNsdWRpbmdcbiAqIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS4gSWYgdGhlIGN1c3RvbSBzZXR0aW5ncyBhcmUgZW1wdHksIHRoaXMgZnVuY3Rpb24gaXNcbiAqIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gd2l0aCB3aGljaCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogYmUgYXNzb2NpYXRlZC5cbiAqIEBwYXJhbSBzZXR0aW5ncyAtIEEgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBuYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEByZXR1cm5zIEEgbmV3bHkgaW5pdGlhbGl6ZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gZnVuY3Rpb24gaW5pdGlhbGl6ZUZpcmVzdG9yZShlLCB0LCBuKSB7XG4gICAgbiB8fCAobiA9IFwiKGRlZmF1bHQpXCIpO1xuICAgIGNvbnN0IHIgPSBfZ2V0UHJvdmlkZXIoZSwgXCJmaXJlc3RvcmVcIik7XG4gICAgaWYgKHIuaXNJbml0aWFsaXplZChuKSkge1xuICAgICAgICBjb25zdCBlID0gci5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgaWRlbnRpZmllcjogblxuICAgICAgICB9KSwgaSA9IHIuZ2V0T3B0aW9ucyhuKTtcbiAgICAgICAgaWYgKGRlZXBFcXVhbChpLCB0KSkgcmV0dXJuIGU7XG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggZGlmZmVyZW50IG9wdGlvbnMuIFRvIGF2b2lkIHRoaXMgZXJyb3IsIGNhbGwgaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIHdpdGggdGhlIHNhbWUgb3B0aW9ucyBhcyB3aGVuIGl0IHdhcyBvcmlnaW5hbGx5IGNhbGxlZCwgb3IgY2FsbCBnZXRGaXJlc3RvcmUoKSB0byByZXR1cm4gdGhlIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UuXCIpO1xuICAgIH1cbiAgICBpZiAodm9pZCAwICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHZvaWQgMCAhPT0gdC5sb2NhbENhY2hlKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlIGFuZCBjYWNoZVNpemVCeXRlcyBjYW5ub3QgYmUgc3BlY2lmaWVkIGF0IHRoZSBzYW1lIHRpbWUgYXMgY2FjaGVTaXplQnl0ZXMgd2lsbGJlIGRlcHJlY2F0ZWQuIEluc3RlYWQsIHNwZWNpZnkgdGhlIGNhY2hlIHNpemUgaW4gdGhlIGNhY2hlIG9iamVjdFwiKTtcbiAgICBpZiAodm9pZCAwICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIC0xICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHQuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICByZXR1cm4gci5pbml0aWFsaXplKHtcbiAgICAgICAgb3B0aW9uczogdCxcbiAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBuXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEZpcmVzdG9yZSh0LCBuKSB7XG4gICAgY29uc3QgciA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgPyB0IDogZ2V0QXBwKCksIGkgPSBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gdCA6IG4gfHwgXCIoZGVmYXVsdClcIiwgcyA9IF9nZXRQcm92aWRlcihyLCBcImZpcmVzdG9yZVwiKS5nZXRJbW1lZGlhdGUoe1xuICAgICAgICBpZGVudGlmaWVyOiBpXG4gICAgfSk7XG4gICAgaWYgKCFzLl9pbml0aWFsaXplZCkge1xuICAgICAgICBjb25zdCBlID0gZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0KFwiZmlyZXN0b3JlXCIpO1xuICAgICAgICBlICYmIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcihzLCAuLi5lKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKSB7XG4gICAgcmV0dXJuIGUuX2ZpcmVzdG9yZUNsaWVudCB8fCBfX1BSSVZBVEVfY29uZmlndXJlRmlyZXN0b3JlKGUpLCBlLl9maXJlc3RvcmVDbGllbnQudmVyaWZ5Tm90VGVybWluYXRlZCgpLCBcbiAgICBlLl9maXJlc3RvcmVDbGllbnQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb25maWd1cmVGaXJlc3RvcmUoZSkge1xuICAgIHZhciB0LCBuLCByO1xuICAgIGNvbnN0IGkgPSBlLl9mcmVlemVTZXR0aW5ncygpLCBzID0gZnVuY3Rpb24gX19QUklWQVRFX21ha2VEYXRhYmFzZUluZm8oZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlSW5mbyhlLCB0LCBuLCByLmhvc3QsIHIuc3NsLCByLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHIuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBfX1BSSVZBVEVfY2xvbmVMb25nUG9sbGluZ09wdGlvbnMoci5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpLCByLnVzZUZldGNoU3RyZWFtcyk7XG4gICAgfShlLl9kYXRhYmFzZUlkLCAobnVsbCA9PT0gKHQgPSBlLl9hcHApIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQub3B0aW9ucy5hcHBJZCkgfHwgXCJcIiwgZS5fcGVyc2lzdGVuY2VLZXksIGkpO1xuICAgIGUuX2ZpcmVzdG9yZUNsaWVudCA9IG5ldyBGaXJlc3RvcmVDbGllbnQoZS5fYXV0aENyZWRlbnRpYWxzLCBlLl9hcHBDaGVja0NyZWRlbnRpYWxzLCBlLl9xdWV1ZSwgcyksIFxuICAgIChudWxsID09PSAobiA9IGkubG9jYWxDYWNoZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKSAmJiAobnVsbCA9PT0gKHIgPSBpLmxvY2FsQ2FjaGUpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyKSAmJiAoZS5fZmlyZXN0b3JlQ2xpZW50Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyID0ge1xuICAgICAgICBfb2ZmbGluZUtpbmQ6IGkubG9jYWxDYWNoZS5raW5kLFxuICAgICAgICBfb2ZmbGluZTogaS5sb2NhbENhY2hlLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIsXG4gICAgICAgIF9vbmxpbmU6IGkubG9jYWxDYWNoZS5fb25saW5lQ29tcG9uZW50UHJvdmlkZXJcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhblxuICoge0BsaW5rIGluaXRpYWxpemVGaXJlc3RvcmV9LCB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0gb3JcbiAqIHtAbGluayBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlfS5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2UgaXRcbiAqIHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYi5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFBlcnNpc3RlbmNlIGNhbm5vdCBiZSB1c2VkIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcGFyYW0gcGVyc2lzdGVuY2VTZXR0aW5ncyAtIE9wdGlvbmFsIHNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmVcbiAqIHBlcnNpc3RlbmNlLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50IHN0b3JhZ2UuXG4gKiBAZGVwcmVjYXRlZCBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciByZWxlYXNlLiBJbnN0ZWFkLCBzZXRcbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5sb2NhbENhY2hlYCB0byBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudExvY2FsQ2FjaGVgIHRvXG4gKiB0dXJuIG9uIEluZGV4ZWREYiBjYWNoZS4gQ2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdoZW4gYEZpcmVzdG9yZVNldHRpbmdzLmxvY2FsQ2FjaGVgXG4gKiBpcyBhbHJlYWR5IHNwZWNpZmllZCB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbi5cbiAqLyBmdW5jdGlvbiBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZShlLCB0KSB7XG4gICAgX19QUklWQVRFX3ZlcmlmeU5vdEluaXRpYWxpemVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKTtcbiAgICBjb25zdCBuID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKTtcbiAgICBpZiAobi5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJTREsgY2FjaGUgaXMgYWxyZWFkeSBzcGVjaWZpZWQuXCIpO1xuICAgIF9fUFJJVkFURV9sb2dXYXJuKFwiZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gdGhlIGZ1dHVyZSwgeW91IGNhbiB1c2UgYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCBpbnN0ZWFkLlwiKTtcbiAgICBjb25zdCByID0gZS5fZnJlZXplU2V0dGluZ3MoKSwgaSA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlcjtcbiAgICByZXR1cm4gX19QUklWQVRFX3NldFBlcnNpc3RlbmNlUHJvdmlkZXJzKG4sIGksIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGksIHIuY2FjaGVTaXplQnl0ZXMsIG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuZm9yY2VPd25lcnNoaXApKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgbXVsdGktdGFiIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuIElmIGVuYWJsZWRcbiAqIGFjcm9zcyBhbGwgdGFicywgYWxsIG9wZXJhdGlvbnMgc2hhcmUgYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLCBpbmNsdWRpbmdcbiAqIHNoYXJlZCBleGVjdXRpb24gb2YgcXVlcmllcyBhbmQgbGF0ZW5jeS1jb21wZW5zYXRlZCBsb2NhbCBkb2N1bWVudCB1cGRhdGVzXG4gKiBhY3Jvc3MgYWxsIGNvbm5lY3RlZCBpbnN0YW5jZXMuXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2VcbiAqIGl0IHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYiBhbmRcbiAqICAgICBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnRcbiAqIHN0b3JhZ2UuXG4gKiBAZGVwcmVjYXRlZCBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciByZWxlYXNlLiBJbnN0ZWFkLCBzZXRcbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5sb2NhbENhY2hlYCB0byBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudExvY2FsQ2FjaGVgIHRvXG4gKiB0dXJuIG9uIGluZGV4ZWRkYiBjYWNoZS4gQ2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdoZW4gYEZpcmVzdG9yZVNldHRpbmdzLmxvY2FsQ2FjaGVgXG4gKiBpcyBhbHJlYWR5IHNwZWNpZmllZCB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbi5cbiAqLyBmdW5jdGlvbiBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKGUpIHtcbiAgICBfX1BSSVZBVEVfdmVyaWZ5Tm90SW5pdGlhbGl6ZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpO1xuICAgIGNvbnN0IHQgPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpO1xuICAgIGlmICh0Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlNESyBjYWNoZSBpcyBhbHJlYWR5IHNwZWNpZmllZC5cIik7XG4gICAgX19QUklWQVRFX2xvZ1dhcm4oXCJlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKCkgd2lsbCBiZSBkZXByZWNhdGVkIGluIHRoZSBmdXR1cmUsIHlvdSBjYW4gdXNlIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgaW5zdGVhZC5cIik7XG4gICAgY29uc3QgbiA9IGUuX2ZyZWV6ZVNldHRpbmdzKCksIHIgPSBuZXcgT25saW5lQ29tcG9uZW50UHJvdmlkZXI7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9zZXRQZXJzaXN0ZW5jZVByb3ZpZGVycyh0LCByLCBuZXcgX19QUklWQVRFX011bHRpVGFiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKHIsIG4uY2FjaGVTaXplQnl0ZXMpKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYm90aCB0aGUgYE9mZmxpbmVDb21wb25lbnRQcm92aWRlcmAgYW5kIGBPbmxpbmVDb21wb25lbnRQcm92aWRlcmAuXG4gKiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYSByZWNvdmVyYWJsZSBlcnJvciAoc2VlXG4gKiBgY2FuUmVjb3ZlckZyb21JbmRleGVkRGJFcnJvcigpYCBiZWxvdyksIHRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlamVjdGVkXG4gKiBidXQgdGhlIGNsaWVudCByZW1haW5zIHVzYWJsZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0UGVyc2lzdGVuY2VQcm92aWRlcnMoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlLCBuKSwgYXdhaXQgX19QUklWQVRFX3NldE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIHQpLCBcbiAgICAgICAgICAgIHIucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZTtcbiAgICAgICAgICAgIGlmICghX19QUklWQVRFX2NhbkZhbGxiYWNrRnJvbUluZGV4ZWREYkVycm9yKHQpKSB0aHJvdyB0O1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ1dhcm4oXCJFcnJvciBlbmFibGluZyBpbmRleGVkZGIgY2FjaGUuIEZhbGxpbmcgYmFjayB0byBtZW1vcnkgY2FjaGU6IFwiICsgdCksIFxuICAgICAgICAgICAgci5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSkudGhlbigoKCkgPT4gci5wcm9taXNlKSk7XG59XG5cbi8qKlxuICogQ2xlYXJzIHRoZSBwZXJzaXN0ZW50IHN0b3JhZ2UuIFRoaXMgaW5jbHVkZXMgcGVuZGluZyB3cml0ZXMgYW5kIGNhY2hlZFxuICogZG9jdW1lbnRzLlxuICpcbiAqIE11c3QgYmUgY2FsbGVkIHdoaWxlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBpcyBub3Qgc3RhcnRlZCAoYWZ0ZXIgdGhlIGFwcCBpc1xuICogdGVybWluYXRlZCBvciB3aGVuIHRoZSBhcHAgaXMgZmlyc3QgaW5pdGlhbGl6ZWQpLiBPbiBzdGFydHVwLCB0aGlzIGZ1bmN0aW9uXG4gKiBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgb3RoZXIgZnVuY3Rpb25zIChvdGhlciB0aGFuIHtAbGlua1xuICogaW5pdGlhbGl6ZUZpcmVzdG9yZX0gb3Ige0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9KSkuIElmIHRoZSB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgc3RpbGwgcnVubmluZywgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBlcnJvciBjb2RlXG4gKiBvZiBgZmFpbGVkLXByZWNvbmRpdGlvbmAuXG4gKlxuICogTm90ZTogYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgaXMgcHJpbWFyaWx5IGludGVuZGVkIHRvIGhlbHAgd3JpdGVcbiAqIHJlbGlhYmxlIHRlc3RzIHRoYXQgdXNlIENsb3VkIEZpcmVzdG9yZS4gSXQgdXNlcyBhbiBlZmZpY2llbnQgbWVjaGFuaXNtIGZvclxuICogZHJvcHBpbmcgZXhpc3RpbmcgZGF0YSBidXQgZG9lcyBub3QgYXR0ZW1wdCB0byBzZWN1cmVseSBvdmVyd3JpdGUgb3JcbiAqIG90aGVyd2lzZSBtYWtlIGNhY2hlZCBkYXRhIHVucmVjb3ZlcmFibGUuIEZvciBhcHBsaWNhdGlvbnMgdGhhdCBhcmUgc2Vuc2l0aXZlXG4gKiB0byB0aGUgZGlzY2xvc3VyZSBvZiBjYWNoZWQgZGF0YSBpbiBiZXR3ZWVuIHVzZXIgc2Vzc2lvbnMsIHdlIHN0cm9uZ2x5XG4gKiByZWNvbW1lbmQgbm90IGVuYWJsaW5nIHBlcnNpc3RlbmNlIGF0IGFsbC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGNsZWFyIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcGVyc2lzdGVudCBzdG9yYWdlIGlzXG4gKiBjbGVhcmVkLiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gKi8gZnVuY3Rpb24gY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZShlKSB7XG4gICAgaWYgKGUuX2luaXRpYWxpemVkICYmICFlLl90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlBlcnNpc3RlbmNlIGNhbiBvbmx5IGJlIGNsZWFyZWQgYmVmb3JlIGEgRmlyZXN0b3JlIGluc3RhbmNlIGlzIGluaXRpYWxpemVkIG9yIGFmdGVyIGl0IGlzIHRlcm1pbmF0ZWQuXCIpO1xuICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgIHJldHVybiBlLl9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2luZGV4ZWREYkNsZWFyUGVyc2lzdGVuY2UoZSkge1xuICAgICAgICAgICAgICAgIGlmICghX19QUklWQVRFX1NpbXBsZURiLkMoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlICsgXCJtYWluXCI7XG4gICAgICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX1NpbXBsZURiLmRlbGV0ZSh0KTtcbiAgICAgICAgICAgIH0oX19QUklWQVRFX2luZGV4ZWREYlN0b3JhZ2VQcmVmaXgoZS5fZGF0YWJhc2VJZCwgZS5fcGVyc2lzdGVuY2VLZXkpKSwgdC5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHQucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfSkpLCB0LnByb21pc2U7XG59XG5cbi8qKlxuICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBmb3IgdGhlIGFjdGl2ZSB1c2VyIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICpcbiAqIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIGltbWVkaWF0ZWx5IGlmIHRoZXJlIGFyZSBubyBvdXRzdGFuZGluZyB3cml0ZXMuXG4gKiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIHdhaXRzIGZvciBhbGwgcHJldmlvdXNseSBpc3N1ZWQgd3JpdGVzIChpbmNsdWRpbmdcbiAqIHRob3NlIHdyaXR0ZW4gaW4gYSBwcmV2aW91cyBhcHAgc2Vzc2lvbiksIGJ1dCBpdCBkb2VzIG5vdCB3YWl0IGZvciB3cml0ZXNcbiAqIHRoYXQgd2VyZSBhZGRlZCBhZnRlciB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkLiBJZiB5b3Ugd2FudCB0byB3YWl0IGZvclxuICogYWRkaXRpb25hbCB3cml0ZXMsIGNhbGwgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIGFnYWluLlxuICpcbiAqIEFueSBvdXRzdGFuZGluZyBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgcHJvbWlzZXMgYXJlIHJlamVjdGVkIGR1cmluZyB1c2VyXG4gKiBjaGFuZ2VzLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHdoaWNoIHJlc29sdmVzIHdoZW4gYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiB3YWl0Rm9yUGVuZGluZ1dyaXRlcyhlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRXYWl0Rm9yUGVuZGluZ1dyaXRlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IF9fUFJJVkFURV9zeW5jRW5naW5lUmVnaXN0ZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2soYXdhaXQgX19QUklWQVRFX2dldFN5bmNFbmdpbmUoZSksIHQpKSksIFxuICAgICAgICB0LnByb21pc2U7XG4gICAgfShlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSk7XG59XG5cbi8qKlxuICogUmUtZW5hYmxlcyB1c2Ugb2YgdGhlIG5ldHdvcmsgZm9yIHRoaXMge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgYWZ0ZXIgYSBwcmlvclxuICogY2FsbCB0byB7QGxpbmsgZGlzYWJsZU5ldHdvcmt9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBlbmFibGVkLlxuICovIGZ1bmN0aW9uIGVuYWJsZU5ldHdvcmsoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RW5hYmxlTmV0d29yayhlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSk7XG59XG5cbi8qKlxuICogRGlzYWJsZXMgbmV0d29yayB1c2FnZSBmb3IgdGhpcyBpbnN0YW5jZS4gSXQgY2FuIGJlIHJlLWVuYWJsZWQgdmlhIHtAbGlua1xuICogZW5hYmxlTmV0d29ya30uIFdoaWxlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLCBhbnkgc25hcHNob3QgbGlzdGVuZXJzLFxuICogYGdldERvYygpYCBvciBgZ2V0RG9jcygpYCBjYWxscyB3aWxsIHJldHVybiByZXN1bHRzIGZyb20gY2FjaGUsIGFuZCBhbnkgd3JpdGVcbiAqIG9wZXJhdGlvbnMgd2lsbCBiZSBxdWV1ZWQgdW50aWwgdGhlIG5ldHdvcmsgaXMgcmVzdG9yZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGRpc2FibGVkLlxuICovIGZ1bmN0aW9uIGRpc2FibGVOZXR3b3JrKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudERpc2FibGVOZXR3b3JrKGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpKTtcbn1cblxuLyoqXG4gKiBUZXJtaW5hdGVzIHRoZSBwcm92aWRlZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgb25seSB0aGUgYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgZnVuY3Rpb25cbiAqIG1heSBiZSB1c2VkLiBBbnkgb3RoZXIgZnVuY3Rpb24gd2lsbCB0aHJvdyBhIGBGaXJlc3RvcmVFcnJvcmAuXG4gKlxuICogVG8gcmVzdGFydCBhZnRlciB0ZXJtaW5hdGlvbiwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEZpcmViYXNlRmlyZXN0b3JlIHdpdGhcbiAqIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqXG4gKiBUZXJtaW5hdGlvbiBkb2VzIG5vdCBjYW5jZWwgYW55IHBlbmRpbmcgd3JpdGVzLCBhbmQgYW55IHByb21pc2VzIHRoYXQgYXJlXG4gKiBhd2FpdGluZyBhIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlciB3aWxsIG5vdCBiZSByZXNvbHZlZC4gSWYgeW91IGhhdmVcbiAqIHBlcnNpc3RlbmNlIGVuYWJsZWQsIHRoZSBuZXh0IHRpbWUgeW91IHN0YXJ0IHRoaXMgaW5zdGFuY2UsIGl0IHdpbGwgcmVzdW1lXG4gKiBzZW5kaW5nIHRoZXNlIHdyaXRlcyB0byB0aGUgc2VydmVyLlxuICpcbiAqIE5vdGU6IFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgaXMgbm90IHJlcXVpcmVkLiBUaGlzXG4gKiBmdW5jdGlvbiBpcyB1c2VmdWwgb25seSB3aGVuIHlvdSB3YW50IHRvIGZvcmNlIHRoaXMgaW5zdGFuY2UgdG8gcmVsZWFzZSBhbGxcbiAqIG9mIGl0cyByZXNvdXJjZXMgb3IgaW4gY29tYmluYXRpb24gd2l0aCBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB0b1xuICogZW5zdXJlIHRoYXQgYWxsIGxvY2FsIHN0YXRlIGlzIGRlc3Ryb3llZCBiZXR3ZWVuIHRlc3QgcnVucy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIGluc3RhbmNlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogdGVybWluYXRlZC5cbiAqLyBmdW5jdGlvbiB0ZXJtaW5hdGUoZSkge1xuICAgIHJldHVybiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGUuYXBwLCBcImZpcmVzdG9yZVwiLCBlLl9kYXRhYmFzZUlkLmRhdGFiYXNlKSwgZS5fZGVsZXRlKCk7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gbG9hZCBidW5kbGVzIGZvci5cbiAqIEBwYXJhbSBidW5kbGVEYXRhIC0gQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgYnVuZGxlIHRvIGJlIGxvYWRlZC4gVmFsaWRcbiAqIG9iamVjdHMgYXJlIGBBcnJheUJ1ZmZlcmAsIGBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PmAgb3IgYHN0cmluZ2AuXG4gKlxuICogQHJldHVybnMgQSBgTG9hZEJ1bmRsZVRhc2tgIG9iamVjdCwgd2hpY2ggbm90aWZpZXMgY2FsbGVycyB3aXRoIHByb2dyZXNzXG4gKiB1cGRhdGVzLCBhbmQgY29tcGxldGlvbiBvciBlcnJvciBldmVudHMuIEl0IGNhbiBiZSB1c2VkIGFzIGFcbiAqIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyBmdW5jdGlvbiBsb2FkQnVuZGxlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSksIHIgPSBuZXcgTG9hZEJ1bmRsZVRhc2s7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRMb2FkQnVuZGxlKG4sIGUuX2RhdGFiYXNlSWQsIHQsIHIpLCByO1xufVxuXG4vKipcbiAqIFJlYWRzIGEgRmlyZXN0b3JlIHtAbGluayBRdWVyeX0gZnJvbSBsb2NhbCBjYWNoZSwgaWRlbnRpZmllZCBieSB0aGUgZ2l2ZW5cbiAqIG5hbWUuXG4gKlxuICogVGhlIG5hbWVkIHF1ZXJpZXMgYXJlIHBhY2thZ2VkICBpbnRvIGJ1bmRsZXMgb24gdGhlIHNlcnZlciBzaWRlIChhbG9uZ1xuICogd2l0aCByZXN1bHRpbmcgZG9jdW1lbnRzKSwgYW5kIGxvYWRlZCB0byBsb2NhbCBjYWNoZSB1c2luZyBgbG9hZEJ1bmRsZWAuIE9uY2VcbiAqIGluIGxvY2FsIGNhY2hlLCB1c2UgdGhpcyBtZXRob2QgdG8gZXh0cmFjdCBhIHtAbGluayBRdWVyeX0gYnkgbmFtZS5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIHJlYWQgdGhlIHF1ZXJ5IGZyb20uXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgUXVlcnkgb3IgYG51bGxgLlxuICovIGZ1bmN0aW9uIG5hbWVkUXVlcnkoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0TmFtZWRRdWVyeShlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSwgdCkudGhlbigodCA9PiB0ID8gbmV3IFF1ZXJ5KGUsIG51bGwsIHQucXVlcnkpIDogbnVsbCkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmVyaWZ5Tm90SW5pdGlhbGl6ZWQoZSkge1xuICAgIGlmIChlLl9pbml0aWFsaXplZCB8fCBlLl90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIHBlcnNpc3RlbmNlIGNhbiBubyBsb25nZXIgYmUgZW5hYmxlZC4gWW91IGNhbiBvbmx5IGVuYWJsZSBwZXJzaXN0ZW5jZSBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBhZ2dyZWdhdGlvbiB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgYnkgRmlyZXN0b3JlLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG5jbGFzcyBBZ2dyZWdhdGVGaWVsZCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEFnZ3JlZ2F0ZUZpZWxkPFQ+XG4gICAgICogQHBhcmFtIF9hZ2dyZWdhdGVUeXBlIFNwZWNpZmllcyB0aGUgdHlwZSBvZiBhZ2dyZWdhdGlvbiBvcGVyYXRpb24gdG8gcGVyZm9ybS5cbiAgICAgKiBAcGFyYW0gX2ludGVybmFsRmllbGRQYXRoIE9wdGlvbmFsbHkgc3BlY2lmaWVzIHRoZSBmaWVsZCB0aGF0IGlzIGFnZ3JlZ2F0ZWQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gVE9ETyAoc3VtL2F2ZykgbWFrZSBhZ2dyZWdhdGVUeXBlIHB1YmxpYyB3aGVuIHRoZSBmZWF0dXJlIGlzIHN1cHBvcnRlZFxuICAgIGUgPSBcImNvdW50XCIsIHQpIHtcbiAgICAgICAgdGhpcy5fYWdncmVnYXRlVHlwZSA9IGUsIHRoaXMuX2ludGVybmFsRmllbGRQYXRoID0gdCwgXG4gICAgICAgIC8qKiBBIHR5cGUgc3RyaW5nIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIkFnZ3JlZ2F0ZUZpZWxkXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoZSByZXN1bHRzIG9mIGV4ZWN1dGluZyBhbiBhZ2dyZWdhdGlvbiBxdWVyeS5cbiAqLyBjbGFzcyBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSB0LCB0aGlzLl9kYXRhID0gbiwgXG4gICAgICAgIC8qKiBBIHR5cGUgc3RyaW5nIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIkFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RcIiwgdGhpcy5xdWVyeSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdHMgb2YgdGhlIGFnZ3JlZ2F0aW9ucyBwZXJmb3JtZWQgb3ZlciB0aGUgdW5kZXJseWluZ1xuICAgICAqIHF1ZXJ5LlxuICAgICAqXG4gICAgICogVGhlIGtleXMgb2YgdGhlIHJldHVybmVkIG9iamVjdCB3aWxsIGJlIHRoZSBzYW1lIGFzIHRob3NlIG9mIHRoZVxuICAgICAqIGBBZ2dyZWdhdGVTcGVjYCBvYmplY3Qgc3BlY2lmaWVkIHRvIHRoZSBhZ2dyZWdhdGlvbiBtZXRob2QsIGFuZCB0aGUgdmFsdWVzXG4gICAgICogd2lsbCBiZSB0aGUgY29ycmVzcG9uZGluZyBhZ2dyZWdhdGlvbiByZXN1bHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0cyBvZiB0aGUgYWdncmVnYXRpb25zIHBlcmZvcm1lZCBvdmVyIHRoZSB1bmRlcmx5aW5nXG4gICAgICogcXVlcnkuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0T2JqZWN0TWFwKHRoaXMuX2RhdGEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gKi8gY2xhc3MgQnl0ZXMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLl9ieXRlU3RyaW5nID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBCYXNlNjQgc3RyaW5nLCBjb252ZXJ0aW5nIGl0IHRvXG4gICAgICogYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmFzZTY0IC0gVGhlIEJhc2U2NCBzdHJpbmcgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyhlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKEJ5dGVTdHJpbmcuZnJvbUJhc2U2NFN0cmluZyhlKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCBkYXRhIGZyb20gQmFzZTY0IHN0cmluZzogXCIgKyBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIFVpbnQ4QXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXJyYXkgLSBUaGUgVWludDhBcnJheSB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tVWludDhBcnJheShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQnl0ZXMoQnl0ZVN0cmluZy5mcm9tVWludDhBcnJheShlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgYnl0ZXMgYXMgYSBCYXNlNjQtZW5jb2RlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgQmFzZTY0LWVuY29kZWQgc3RyaW5nIGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b0Jhc2U2NCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGluIGEgbmV3IGBVaW50OEFycmF5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBVaW50OEFycmF5IGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9VaW50OEFycmF5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiQnl0ZXMoYmFzZTY0OiBcIiArIHRoaXMudG9CYXNlNjQoKSArIFwiKVwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgQnl0ZXNgIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBCeXRlc2Agb2JqZWN0IHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLmlzRXF1YWwoZS5fYnl0ZVN0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBGaWVsZFBhdGhgIHJlZmVycyB0byBhIGZpZWxkIGluIGEgZG9jdW1lbnQuIFRoZSBwYXRoIG1heSBjb25zaXN0IG9mIGFcbiAqIHNpbmdsZSBmaWVsZCBuYW1lIChyZWZlcnJpbmcgdG8gYSB0b3AtbGV2ZWwgZmllbGQgaW4gdGhlIGRvY3VtZW50KSwgb3IgYVxuICogbGlzdCBvZiBmaWVsZCBuYW1lcyAocmVmZXJyaW5nIHRvIGEgbmVzdGVkIGZpZWxkIGluIHRoZSBkb2N1bWVudCkuXG4gKlxuICogQ3JlYXRlIGEgYEZpZWxkUGF0aGAgYnkgcHJvdmlkaW5nIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXG4gKiBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIHBvaW50IHRvIGEgbmVzdGVkIGZpZWxkIGluIGEgZG9jdW1lbnQuXG4gKi8gY2xhc3MgRmllbGRQYXRoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYEZpZWxkUGF0aGAgZnJvbSB0aGUgcHJvdmlkZWQgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAgICAgKiBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIHBvaW50IHRvIGEgbmVzdGVkIGZpZWxkIGluIGEgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGROYW1lcyAtIEEgbGlzdCBvZiBmaWVsZCBuYW1lcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciguLi5lKSB7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5sZW5ndGg7ICsrdCkgaWYgKDAgPT09IGVbdF0ubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgbmFtZSBhdCBhcmd1bWVudCAkKGkgKyAxKS4gRmllbGQgbmFtZXMgbXVzdCBub3QgYmUgZW1wdHkuXCIpO1xuICAgICAgICB0aGlzLl9pbnRlcm5hbFBhdGggPSBuZXcgRmllbGRQYXRoJDEoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEZpZWxkUGF0aGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsUGF0aC5pc0VxdWFsKGUuX2ludGVybmFsUGF0aCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHNlbnRpbmVsIGBGaWVsZFBhdGhgIHRvIHJlZmVyIHRvIHRoZSBJRCBvZiBhIGRvY3VtZW50LlxuICogSXQgY2FuIGJlIHVzZWQgaW4gcXVlcmllcyB0byBzb3J0IG9yIGZpbHRlciBieSB0aGUgZG9jdW1lbnQgSUQuXG4gKi8gZnVuY3Rpb24gZG9jdW1lbnRJZCgpIHtcbiAgICByZXR1cm4gbmV3IEZpZWxkUGF0aChcIl9fbmFtZV9fXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTZW50aW5lbCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCB3aGVuIHdyaXRpbmcgZG9jdW1lbnQgZmllbGRzIHdpdGggYHNldCgpYFxuICogb3IgYHVwZGF0ZSgpYC5cbiAqLyBjbGFzcyBGaWVsZFZhbHVlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gX21ldGhvZE5hbWUgLSBUaGUgcHVibGljIEFQSSBlbmRwb2ludCB0aGF0IHJldHVybnMgdGhpcyBjbGFzcy5cbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLl9tZXRob2ROYW1lID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGEgZ2VvZ3JhcGhpYyBsb2NhdGlvbiBpbiBGaXJlc3RvcmUuIFRoZVxuICogbG9jYXRpb24gaXMgcmVwcmVzZW50ZWQgYXMgbGF0aXR1ZGUvbG9uZ2l0dWRlIHBhaXIuXG4gKlxuICogTGF0aXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy05MCwgOTBdLlxuICogTG9uZ2l0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstMTgwLCAxODBdLlxuICovIGNsYXNzIEdlb1BvaW50IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGltbXV0YWJsZSBgR2VvUG9pbnRgIG9iamVjdCB3aXRoIHRoZSBwcm92aWRlZCBsYXRpdHVkZSBhbmRcbiAgICAgKiBsb25naXR1ZGUgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBsYXRpdHVkZSAtIFRoZSBsYXRpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLlxuICAgICAqIEBwYXJhbSBsb25naXR1ZGUgLSBUaGUgbG9uZ2l0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIGlmICghaXNGaW5pdGUoZSkgfHwgZSA8IC05MCB8fCBlID4gOTApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiTGF0aXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAsIGJ1dCB3YXM6IFwiICsgZSk7XG4gICAgICAgIGlmICghaXNGaW5pdGUodCkgfHwgdCA8IC0xODAgfHwgdCA+IDE4MCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogXCIgKyB0KTtcbiAgICAgICAgdGhpcy5fbGF0ID0gZSwgdGhpcy5fbG9uZyA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsYXRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvbmdpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsb25naXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEdlb1BvaW50YCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQgPT09IGUuX2xhdCAmJiB0aGlzLl9sb25nID09PSBlLl9sb25nO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgR2VvUG9pbnQuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLl9sYXQsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRoaXMuX2xvbmdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cbiAgICAgKi8gICAgX2NvbXBhcmVUbyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLl9sYXQsIGUuX2xhdCkgfHwgX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5fbG9uZywgZS5fbG9uZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBnZSA9IC9eX18uKl9fJC87XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgZG9jdW1lbnQgZGF0YSAoZS5nLiBmb3IgYSBzZXREYXRhIGNhbGwpLiAqLyBjbGFzcyBQYXJzZWRTZXREYXRhIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGUsIHRoaXMuZmllbGRNYXNrID0gdCwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZmllbGRNYXNrID8gbmV3IF9fUFJJVkFURV9QYXRjaE11dGF0aW9uKGUsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKSA6IG5ldyBfX1BSSVZBVEVfU2V0TXV0YXRpb24oZSwgdGhpcy5kYXRhLCB0LCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIFwidXBkYXRlXCIgZGF0YSAoaS5lLiBmb3IgYW4gdXBkYXRlRGF0YSBjYWxsKS4gKi8gY2xhc3MgUGFyc2VkVXBkYXRlRGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLy8gVGhlIGZpZWxkTWFzayBkb2VzIG5vdCBpbmNsdWRlIGRvY3VtZW50IHRyYW5zZm9ybXMuXG4gICAgdCwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSBlLCB0aGlzLmZpZWxkTWFzayA9IHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oZSwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgdCwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2lzV3JpdGUoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSAwIC8qIFVzZXJEYXRhU291cmNlLlNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMyAvKiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCAqLyA6XG4gICAgICBjYXNlIDQgLyogVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCAqLyA6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbn1cblxuLyoqIEEgXCJjb250ZXh0XCIgb2JqZWN0IHBhc3NlZCBhcm91bmQgd2hpbGUgcGFyc2luZyB1c2VyIGRhdGEuICovIGNsYXNzIF9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFBhcnNlQ29udGV4dCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2V0dGluZ3MgLSBUaGUgc2V0dGluZ3MgZm9yIHRoZSBwYXJzZXIuXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgSUQgb2YgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB0byBnZW5lcmF0ZSB0aGUgVmFsdWUgcHJvdG8uXG4gICAgICogQHBhcmFtIGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgLSBXaGV0aGVyIHRvIGlnbm9yZSB1bmRlZmluZWQgcHJvcGVydGllc1xuICAgICAqIHJhdGhlciB0aGFuIHRocm93LlxuICAgICAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCB0cmFuc2Zvcm1zIGVuY291bnRlcmVkXG4gICAgICogd2hpbGUgcGFyc2luZyB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gZmllbGRNYXNrIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgcGF0aHMgZW5jb3VudGVyZWQgd2hpbGUgcGFyc2luZ1xuICAgICAqIHRoZSBkYXRhLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3csIHNvIHBhdGggY2FuIGJlXG4gICAgICogbnVsbCB0byBpbmRpY2F0ZSB0aGUgY29udGV4dCByZXByZXNlbnRzIGFueSBsb2NhdGlvbiB3aXRoaW4gYW4gYXJyYXkgKGluXG4gICAgICogd2hpY2ggY2FzZSBjZXJ0YWluIGZlYXR1cmVzIHdpbGwgbm90IHdvcmsgYW5kIGVycm9ycyB3aWxsIGJlIHNvbWV3aGF0XG4gICAgICogY29tcHJvbWlzZWQpLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IGUsIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuc2VyaWFsaXplciA9IG4sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IHIsIFxuICAgICAgICAvLyBNaW5vciBoYWNrOiBJZiBmaWVsZFRyYW5zZm9ybXMgaXMgdW5kZWZpbmVkLCB3ZSBhc3N1bWUgdGhpcyBpcyBhblxuICAgICAgICAvLyBleHRlcm5hbCBjYWxsIGFuZCB3ZSBuZWVkIHRvIHZhbGlkYXRlIHRoZSBlbnRpcmUgcGF0aC5cbiAgICAgICAgdm9pZCAwID09PSBpICYmIHRoaXMuZHUoKSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpIHx8IFtdLCB0aGlzLmZpZWxkTWFzayA9IHMgfHwgW107XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wYXRoO1xuICAgIH1cbiAgICBnZXQgVHUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLlR1O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG5ldyBjb250ZXh0IHdpdGggdGhlIHNwZWNpZmllZCBzZXR0aW5ncyBvdmVyd3JpdHRlbi4gKi8gICAgRXUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZXR0aW5ncyksIGUpLCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuc2VyaWFsaXplciwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCB0aGlzLmZpZWxkVHJhbnNmb3JtcywgdGhpcy5maWVsZE1hc2spO1xuICAgIH1cbiAgICBBdShlKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKHQgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuY2hpbGQoZSksIHIgPSB0aGlzLkV1KHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICBSdTogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByLlZ1KGUpLCByO1xuICAgIH1cbiAgICBtdShlKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKHQgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuY2hpbGQoZSksIHIgPSB0aGlzLkV1KHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICBSdTogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByLmR1KCksIHI7XG4gICAgfVxuICAgIGZ1KGUpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3c7IHNvIG1ha2UgcGF0aFxuICAgICAgICAvLyB1bmRlZmluZWQuXG4gICAgICAgIHJldHVybiB0aGlzLkV1KHtcbiAgICAgICAgICAgIHBhdGg6IHZvaWQgMCxcbiAgICAgICAgICAgIFJ1OiAhMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ3UoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NyZWF0ZUVycm9yKGUsIHRoaXMuc2V0dGluZ3MubWV0aG9kTmFtZSwgdGhpcy5zZXR0aW5ncy5wdSB8fCAhMSwgdGhpcy5wYXRoLCB0aGlzLnNldHRpbmdzLnl1KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovICAgIGNvbnRhaW5zKGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5maWVsZE1hc2suZmluZCgodCA9PiBlLmlzUHJlZml4T2YodCkpKSB8fCB2b2lkIDAgIT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoKHQgPT4gZS5pc1ByZWZpeE9mKHQuZmllbGQpKSk7XG4gICAgfVxuICAgIGR1KCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcbiAgICAgICAgLy8gd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKHRoaXMucGF0aCkgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLnBhdGgubGVuZ3RoOyBlKyspIHRoaXMuVnUodGhpcy5wYXRoLmdldChlKSk7XG4gICAgfVxuICAgIFZ1KGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSB0aHJvdyB0aGlzLmd1KFwiRG9jdW1lbnQgZmllbGRzIG11c3Qgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICBpZiAoX19QUklWQVRFX2lzV3JpdGUodGhpcy5UdSkgJiYgZ2UudGVzdChlKSkgdGhyb3cgdGhpcy5ndSgnRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmb3IgcGFyc2luZyByYXcgdXNlciBpbnB1dCAocHJvdmlkZWQgdmlhIHRoZSBBUEkpIGludG8gaW50ZXJuYWwgbW9kZWxcbiAqIGNsYXNzZXMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1VzZXJEYXRhUmVhZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IGUsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IHQsIHRoaXMuc2VyaWFsaXplciA9IG4gfHwgX19QUklWQVRFX25ld1NlcmlhbGl6ZXIoZSk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRvcC1sZXZlbCBwYXJzZSBjb250ZXh0LiAqLyAgICB3dShlLCB0LCBuLCByID0gITEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGFyc2VDb250ZXh0SW1wbCh7XG4gICAgICAgICAgICBUdTogZSxcbiAgICAgICAgICAgIG1ldGhvZE5hbWU6IHQsXG4gICAgICAgICAgICB5dTogbixcbiAgICAgICAgICAgIHBhdGg6IEZpZWxkUGF0aCQxLmVtcHR5UGF0aCgpLFxuICAgICAgICAgICAgUnU6ICExLFxuICAgICAgICAgICAgcHU6IHJcbiAgICAgICAgfSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZSkge1xuICAgIGNvbnN0IHQgPSBlLl9mcmVlemVTZXR0aW5ncygpLCBuID0gX19QUklWQVRFX25ld1NlcmlhbGl6ZXIoZS5fZGF0YWJhc2VJZCk7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfVXNlckRhdGFSZWFkZXIoZS5fZGF0YWJhc2VJZCwgISF0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIG4pO1xufVxuXG4vKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlU2V0RGF0YShlLCB0LCBuLCByLCBpLCBzID0ge30pIHtcbiAgICBjb25zdCBvID0gZS53dShzLm1lcmdlIHx8IHMubWVyZ2VGaWVsZHMgPyAyIC8qIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0ICovIDogMCAvKiBVc2VyRGF0YVNvdXJjZS5TZXQgKi8gLCB0LCBuLCBpKTtcbiAgICBfX1BSSVZBVEVfdmFsaWRhdGVQbGFpbk9iamVjdChcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIG8sIHIpO1xuICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfcGFyc2VPYmplY3Qociwgbyk7XG4gICAgbGV0IGEsIHU7XG4gICAgaWYgKHMubWVyZ2UpIGEgPSBuZXcgRmllbGRNYXNrKG8uZmllbGRNYXNrKSwgdSA9IG8uZmllbGRUcmFuc2Zvcm1zOyBlbHNlIGlmIChzLm1lcmdlRmllbGRzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCByIG9mIHMubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEodCwgciwgbik7XG4gICAgICAgICAgICBpZiAoIW8uY29udGFpbnMoaSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBGaWVsZCAnJHtpfScgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5gKTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9maWVsZE1hc2tDb250YWlucyhlLCBpKSB8fCBlLnB1c2goaSk7XG4gICAgICAgIH1cbiAgICAgICAgYSA9IG5ldyBGaWVsZE1hc2soZSksIHUgPSBvLmZpZWxkVHJhbnNmb3Jtcy5maWx0ZXIoKGUgPT4gYS5jb3ZlcnMoZS5maWVsZCkpKTtcbiAgICB9IGVsc2UgYSA9IG51bGwsIHUgPSBvLmZpZWxkVHJhbnNmb3JtcztcbiAgICByZXR1cm4gbmV3IFBhcnNlZFNldERhdGEobmV3IE9iamVjdFZhbHVlKF8pLCBhLCB1KTtcbn1cblxuY2xhc3MgX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0oZSkge1xuICAgICAgICBpZiAoMiAvKiBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCAqLyAhPT0gZS5UdSkgdGhyb3cgMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gPT09IGUuVHUgPyBlLmd1KGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYXBwZWFyIGF0IHRoZSB0b3AgbGV2ZWwgb2YgeW91ciB1cGRhdGUgZGF0YWApIDogZS5ndShgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbm5vdCBiZSB1c2VkIHdpdGggc2V0KCkgdW5sZXNzIHlvdSBwYXNzIHttZXJnZTp0cnVlfWApO1xuICAgICAgICAvLyBObyB0cmFuc2Zvcm0gdG8gYWRkIGZvciBhIGRlbGV0ZSwgYnV0IHdlIG5lZWQgdG8gYWRkIGl0IHRvIG91clxuICAgICAgICAvLyBmaWVsZE1hc2sgc28gaXQgZ2V0cyBkZWxldGVkLlxuICAgICAgICByZXR1cm4gZS5maWVsZE1hc2sucHVzaChlLnBhdGgpLCBudWxsO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRGVsZXRlRmllbGRWYWx1ZUltcGw7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjaGlsZCBjb250ZXh0IGZvciBwYXJzaW5nIFNlcmlhbGl6YWJsZUZpZWxkVmFsdWVzLlxuICpcbiAqIFRoaXMgaXMgZGlmZmVyZW50IHRoYW4gY2FsbGluZyBgUGFyc2VDb250ZXh0LmNvbnRleHRXaXRoYCBiZWNhdXNlIGl0IGtlZXBzXG4gKiB0aGUgZmllbGRUcmFuc2Zvcm1zIGFuZCBmaWVsZE1hc2sgc2VwYXJhdGUuXG4gKlxuICogVGhlIGNyZWF0ZWQgY29udGV4dCBoYXMgaXRzIGBkYXRhU291cmNlYCBzZXQgdG8gYFVzZXJEYXRhU291cmNlLkFyZ3VtZW50YC5cbiAqIEFsdGhvdWdoIHRoZXNlIHZhbHVlcyBhcmUgdXNlZCB3aXRoIHdyaXRlcywgYW55IGVsZW1lbnRzIGluIHRoZXNlIEZpZWxkVmFsdWVzXG4gKiBhcmUgbm90IGNvbnNpZGVyZWQgd3JpdGVzIHNpbmNlIHRoZXkgY2Fubm90IGNvbnRhaW4gYW55IEZpZWxkVmFsdWUgc2VudGluZWxzLFxuICogZXRjLlxuICpcbiAqIEBwYXJhbSBmaWVsZFZhbHVlIC0gVGhlIHNlbnRpbmVsIEZpZWxkVmFsdWUgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIGNoaWxkXG4gKiAgICAgY29udGV4dC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIHBhcmVudCBjb250ZXh0LlxuICogQHBhcmFtIGFycmF5RWxlbWVudCAtIFdoZXRoZXIgb3Igbm90IHRoZSBGaWVsZFZhbHVlIGhhcyBhbiBhcnJheS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlU2VudGluZWxDaGlsZENvbnRleHQoZSwgdCwgbikge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhcnNlQ29udGV4dEltcGwoe1xuICAgICAgICBUdTogMyAvKiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCAqLyAsXG4gICAgICAgIHl1OiB0LnNldHRpbmdzLnl1LFxuICAgICAgICBtZXRob2ROYW1lOiBlLl9tZXRob2ROYW1lLFxuICAgICAgICBSdTogblxuICAgIH0sIHQuZGF0YWJhc2VJZCwgdC5zZXJpYWxpemVyLCB0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwgZXh0ZW5kcyBGaWVsZFZhbHVlIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0oZS5wYXRoLCBuZXcgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9BcnJheVVuaW9uRmllbGRWYWx1ZUltcGwgZXh0ZW5kcyBGaWVsZFZhbHVlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUpLCB0aGlzLlN1ID0gdDtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0oZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2NyZWF0ZVNlbnRpbmVsQ2hpbGRDb250ZXh0KHRoaXMsIGUsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMuU3UubWFwKChlID0+IF9fUFJJVkFURV9wYXJzZURhdGEoZSwgdCkpKSwgciA9IG5ldyBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFRyYW5zZm9ybShlLnBhdGgsIHIpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IGU7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSksIHRoaXMuU3UgPSB0O1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY3JlYXRlU2VudGluZWxDaGlsZENvbnRleHQodGhpcywgZSwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy5TdS5tYXAoKGUgPT4gX19QUklWQVRFX3BhcnNlRGF0YShlLCB0KSkpLCByID0gbmV3IF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFRyYW5zZm9ybShlLnBhdGgsIHIpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IGU7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5idSA9IHQ7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbihlLnNlcmlhbGl6ZXIsIHRvTnVtYmVyKGUuc2VyaWFsaXplciwgdGhpcy5idSkpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgdCk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gZTtcbiAgICB9XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGFuIHVwZGF0ZSgpIGNhbGwuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVVwZGF0ZURhdGEoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBlLnd1KDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovICwgdCwgbik7XG4gICAgX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBpLCByKTtcbiAgICBjb25zdCBzID0gW10sIG8gPSBPYmplY3RWYWx1ZS5lbXB0eSgpO1xuICAgIGZvckVhY2gociwgKChlLCByKSA9PiB7XG4gICAgICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyh0LCBlLCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHIgPSBnZXRNb2R1bGFySW5zdGFuY2Uocik7XG4gICAgICAgIGNvbnN0IGEgPSBpLm11KF8pO1xuICAgICAgICBpZiAociBpbnN0YW5jZW9mIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICBzLnB1c2goXyk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9wYXJzZURhdGEociwgYSk7XG4gICAgICAgICAgICBudWxsICE9IGUgJiYgKHMucHVzaChfKSwgby5zZXQoXywgZSkpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IF8gPSBuZXcgRmllbGRNYXNrKHMpO1xuICAgIHJldHVybiBuZXcgUGFyc2VkVXBkYXRlRGF0YShvLCBfLCBpLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3MoZSwgdCwgbiwgciwgaSwgcykge1xuICAgIGNvbnN0IG8gPSBlLnd1KDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovICwgdCwgbiksIF8gPSBbIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMSh0LCByLCBuKSBdLCBhID0gWyBpIF07XG4gICAgaWYgKHMubGVuZ3RoICUgMiAhPSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIG5hbWVzIGFuZCB2YWx1ZXMuYCk7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBzLmxlbmd0aDsgZSArPSAyKSBfLnB1c2goX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKHQsIHNbZV0pKSwgXG4gICAgYS5wdXNoKHNbZSArIDFdKTtcbiAgICBjb25zdCB1ID0gW10sIGMgPSBPYmplY3RWYWx1ZS5lbXB0eSgpO1xuICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciB0byBwaWNrIHRoZSBsYXN0IHZhbHVlIGZvciBhIGZpZWxkIGlmIHRoZVxuICAgIC8vIHVzZXIgc3BlY2lmaWVkIHRoZSBmaWVsZCBtdWx0aXBsZSB0aW1lcy5cbiAgICBmb3IgKGxldCBlID0gXy5sZW5ndGggLSAxOyBlID49IDA7IC0tZSkgaWYgKCFfX1BSSVZBVEVfZmllbGRNYXNrQ29udGFpbnModSwgX1tlXSkpIHtcbiAgICAgICAgY29uc3QgdCA9IF9bZV07XG4gICAgICAgIGxldCBuID0gYVtlXTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIG4gPSBnZXRNb2R1bGFySW5zdGFuY2Uobik7XG4gICAgICAgIGNvbnN0IHIgPSBvLm11KHQpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICB1LnB1c2godCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9wYXJzZURhdGEobiwgcik7XG4gICAgICAgICAgICBudWxsICE9IGUgJiYgKHUucHVzaCh0KSwgYy5zZXQodCwgZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGwgPSBuZXcgRmllbGRNYXNrKHUpO1xuICAgIHJldHVybiBuZXcgUGFyc2VkVXBkYXRlRGF0YShjLCBsLCBvLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKlxuICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxuICogYm91bmQpLlxuICpcbiAqIEBwYXJhbSBhbGxvd0FycmF5cyAtIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XG4gKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVF1ZXJ5VmFsdWUoZSwgdCwgbiwgciA9ICExKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9wYXJzZURhdGEobiwgZS53dShyID8gNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovIDogMyAvKiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCAqLyAsIHQpKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdXNlciBkYXRhIHRvIFByb3RvYnVmIFZhbHVlcy5cbiAqXG4gKiBAcGFyYW0gaW5wdXQgLSBEYXRhIHRvIGJlIHBhcnNlZC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gQSBjb250ZXh0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcGF0aCBiZWluZyBwYXJzZWQsXG4gKiB0aGUgc291cmNlIG9mIHRoZSBkYXRhIGJlaW5nIHBhcnNlZCwgZXRjLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZSwgb3IgbnVsbCBpZiB0aGUgdmFsdWUgd2FzIGEgRmllbGRWYWx1ZSBzZW50aW5lbFxuICogdGhhdCBzaG91bGQgbm90IGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRpbmcgcGFyc2VkIGRhdGEuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlRGF0YShlLCB0KSB7XG4gICAgaWYgKF9fUFJJVkFURV9sb29rc0xpa2VKc29uT2JqZWN0KFxuICAgIC8vIFVud3JhcCB0aGUgQVBJIHR5cGUgZnJvbSB0aGUgQ29tcGF0IFNESy4gVGhpcyB3aWxsIHJldHVybiB0aGUgQVBJIHR5cGVcbiAgICAvLyBmcm9tIGZpcmVzdG9yZS1leHAuXG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkpIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVQbGFpbk9iamVjdChcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCB0LCBlKSwgXG4gICAgX19QUklWQVRFX3BhcnNlT2JqZWN0KGUsIHQpO1xuICAgIGlmIChlIGluc3RhbmNlb2YgRmllbGRWYWx1ZSkgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBkZWxldGVGaWVsZCgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlU2VudGluZWxGaWVsZFZhbHVlKGUsIHQpIHtcbiAgICAgICAgLy8gU2VudGluZWxzIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIHdyaXRlcywgYW5kIG5vdCB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAoIV9fUFJJVkFURV9pc1dyaXRlKHQuVHUpKSB0aHJvdyB0Lmd1KGAke2UuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHVwZGF0ZSgpIGFuZCBzZXQoKWApO1xuICAgICAgICBpZiAoIXQucGF0aCkgdGhyb3cgdC5ndShgJHtlLl9tZXRob2ROYW1lfSgpIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluc2lkZSBhcnJheXNgKTtcbiAgICAgICAgY29uc3QgbiA9IGUuX3RvRmllbGRUcmFuc2Zvcm0odCk7XG4gICAgICAgIG4gJiYgdC5maWVsZFRyYW5zZm9ybXMucHVzaChuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBIZWxwZXIgdG8gcGFyc2UgYSBzY2FsYXIgdmFsdWUgKGkuZS4gbm90IGFuIE9iamVjdCwgQXJyYXksIG9yIEZpZWxkVmFsdWUpXG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZVxuICovIChlLCB0KSwgbnVsbDtcbiAgICBpZiAodm9pZCAwID09PSBlICYmIHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcykgXG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCBpdCBjYW4gbmV2ZXIgcGFydGljaXBhdGUgaW4gdGhlIGZpZWxkTWFzaywgc29cbiAgICAvLyBkb24ndCBoYW5kbGUgdGhpcyBiZWxvdy4gSWYgYGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXNgIGlzIGZhbHNlLFxuICAgIC8vIGBwYXJzZVNjYWxhclZhbHVlYCB3aWxsIHJlamVjdCBhbiB1bmRlZmluZWQgdmFsdWUuXG4gICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKFxuICAgIC8vIElmIGNvbnRleHQucGF0aCBpcyBudWxsIHdlIGFyZSBpbnNpZGUgYW4gYXJyYXkgYW5kIHdlIGRvbid0IHN1cHBvcnRcbiAgICAvLyBmaWVsZCBtYXNrIHBhdGhzIG1vcmUgZ3JhbnVsYXIgdGhhbiB0aGUgdG9wLWxldmVsIGFycmF5LlxuICAgIHQucGF0aCAmJiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIGUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBJbmNsdWRlIHRoZSBwYXRoIGNvbnRhaW5pbmcgdGhlIGFycmF5IGluIHRoZSBlcnJvclxuICAgICAgICAvLyBtZXNzYWdlLlxuICAgICAgICAvLyBJbiB0aGUgY2FzZSBvZiBJTiBxdWVyaWVzLCB0aGUgcGFyc2VkIGRhdGEgaXMgYW4gYXJyYXkgKHJlcHJlc2VudGluZ1xuICAgICAgICAvLyB0aGUgc2V0IG9mIHZhbHVlcyB0byBiZSBpbmNsdWRlZCBmb3IgdGhlIElOIHF1ZXJ5KSB0aGF0IG1heSBkaXJlY3RseVxuICAgICAgICAvLyBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlYWNoIHJlcHJlc2VudGluZyBhbiBpbmRpdmlkdWFsIGZpZWxkXG4gICAgICAgIC8vIHZhbHVlKSwgc28gd2UgZGlzYWJsZSB0aGlzIHZhbGlkYXRpb24uXG4gICAgICAgIGlmICh0LnNldHRpbmdzLlJ1ICYmIDQgLyogVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCAqLyAhPT0gdC5UdSkgdGhyb3cgdC5ndShcIk5lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VBcnJheShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gX19QUklWQVRFX3BhcnNlRGF0YShpLCB0LmZ1KHIpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IGUgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICBlID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaChlKSwgcisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSwgdCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VTY2FsYXJWYWx1ZShlLCB0KSB7XG4gICAgICAgIGlmIChudWxsID09PSAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkpIHJldHVybiB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiBlKSByZXR1cm4gdG9OdW1iZXIodC5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgaWYgKFwiYm9vbGVhblwiID09IHR5cGVvZiBlKSByZXR1cm4ge1xuICAgICAgICAgICAgYm9vbGVhblZhbHVlOiBlXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4ge1xuICAgICAgICAgICAgc3RyaW5nVmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gVGltZXN0YW1wLmZyb21EYXRlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogdG9UaW1lc3RhbXAodC5zZXJpYWxpemVyLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgLy8gRmlyZXN0b3JlIGJhY2tlbmQgdHJ1bmNhdGVzIHByZWNpc2lvbiBkb3duIHRvIG1pY3Jvc2Vjb25kcy4gVG8gZW5zdXJlXG4gICAgICAgICAgICAvLyBvZmZsaW5lIG1vZGUgd29ya3MgdGhlIHNhbWUgd2l0aCByZWdhcmRzIHRvIHRydW5jYXRpb24sIHBlcmZvcm0gdGhlXG4gICAgICAgICAgICAvLyB0cnVuY2F0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJhY2tlbmQgdG8gZG8gdGhhdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgVGltZXN0YW1wKGUuc2Vjb25kcywgMWUzICogTWF0aC5mbG9vcihlLm5hbm9zZWNvbmRzIC8gMWUzKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB0b1RpbWVzdGFtcCh0LnNlcmlhbGl6ZXIsIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgR2VvUG9pbnQpIHJldHVybiB7XG4gICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IGUubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBlLmxvbmdpdHVkZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEJ5dGVzKSByZXR1cm4ge1xuICAgICAgICAgICAgYnl0ZXNWYWx1ZTogX19QUklWQVRFX3RvQnl0ZXModC5zZXJpYWxpemVyLCBlLl9ieXRlU3RyaW5nKVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5kYXRhYmFzZUlkLCByID0gZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcXVhbChuKSkgdGhyb3cgdC5ndShgRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAke3IucHJvamVjdElkfS8ke3IuZGF0YWJhc2V9IGJ1dCBzaG91bGQgYmUgZm9yIGRhdGFiYXNlICR7bi5wcm9qZWN0SWR9LyR7bi5kYXRhYmFzZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IF9fUFJJVkFURV90b1Jlc291cmNlTmFtZShlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCB8fCB0LmRhdGFiYXNlSWQsIGUuX2tleS5wYXRoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyB0Lmd1KGBVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogJHtfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihlKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhbiBvYmplY3QgbG9va3MgbGlrZSBhIEpTT04gb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGNvbnZlcnRlZFxuICogaW50byBhIHN0cnVjdC4gTm9ybWFsIGNsYXNzL3Byb3RvdHlwZSBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlXG4gKiBKU09OIG9iamVjdHMgc2luY2UgdGhleSBzaG91bGQgYmUgY29udmVydGVkIHRvIGEgc3RydWN0IHZhbHVlLiBBcnJheXMsIERhdGVzLFxuICogR2VvUG9pbnRzLCBldGMuIGFyZSBub3QgY29uc2lkZXJlZCB0byBsb29rIGxpa2UgSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgbWFwXG4gKiB0byBzcGVjaWZpYyBGaWVsZFZhbHVlIHR5cGVzIG90aGVyIHRoYW4gT2JqZWN0VmFsdWUuXG4gKi8gKGUsIHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VPYmplY3QoZSwgdCkge1xuICAgIGNvbnN0IG4gPSB7fTtcbiAgICByZXR1cm4gaXNFbXB0eShlKSA/IFxuICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlbXB0eSBvYmplY3QsIHdlIGV4cGxpY2l0bHkgYWRkIGl0IHRvIHRoZSB1cGRhdGVcbiAgICAvLyBtYXNrIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJ2ZXIgY3JlYXRlcyBhIG1hcCBlbnRyeS5cbiAgICB0LnBhdGggJiYgdC5wYXRoLmxlbmd0aCA+IDAgJiYgdC5maWVsZE1hc2sucHVzaCh0LnBhdGgpIDogZm9yRWFjaChlLCAoKGUsIHIpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9wYXJzZURhdGEociwgdC5BdShlKSk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobltlXSA9IGkpO1xuICAgIH0pKSwge1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9va3NMaWtlSnNvbk9iamVjdChlKSB7XG4gICAgcmV0dXJuICEoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlIHx8IGUgaW5zdGFuY2VvZiBBcnJheSB8fCBlIGluc3RhbmNlb2YgRGF0ZSB8fCBlIGluc3RhbmNlb2YgVGltZXN0YW1wIHx8IGUgaW5zdGFuY2VvZiBHZW9Qb2ludCB8fCBlIGluc3RhbmNlb2YgQnl0ZXMgfHwgZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBGaWVsZFZhbHVlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QoZSwgdCwgbikge1xuICAgIGlmICghX19QUklWQVRFX2xvb2tzTGlrZUpzb25PYmplY3QobikgfHwgIWZ1bmN0aW9uIF9fUFJJVkFURV9pc1BsYWluT2JqZWN0KGUpIHtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgJiYgbnVsbCAhPT0gZSAmJiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpID09PSBPYmplY3QucHJvdG90eXBlIHx8IG51bGwgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSk7XG4gICAgfShuKSkge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24obik7XG4gICAgICAgIHRocm93IFwiYW4gb2JqZWN0XCIgPT09IHIgPyB0Lmd1KGUgKyBcIiBhIGN1c3RvbSBvYmplY3RcIikgOiB0Lmd1KGUgKyBcIiBcIiArIHIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKCkgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKGUsIHQsIG4pIHtcbiAgICBpZiAoKFxuICAgIC8vIElmIHJlcXVpcmVkLCByZXBsYWNlIHRoZSBGaWVsZFBhdGggQ29tcGF0IGNsYXNzIHdpdGggd2l0aCB0aGUgZmlyZXN0b3JlLWV4cFxuICAgIC8vIEZpZWxkUGF0aC5cbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSBpbnN0YW5jZW9mIEZpZWxkUGF0aCkgcmV0dXJuIHQuX2ludGVybmFsUGF0aDtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKGUsIHQpO1xuICAgIHRocm93IF9fUFJJVkFURV9jcmVhdGVFcnJvcihcIkZpZWxkIHBhdGggYXJndW1lbnRzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3IgXCIsIGUsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG59XG5cbi8qKlxuICogTWF0Y2hlcyBhbnkgY2hhcmFjdGVycyBpbiBhIGZpZWxkIHBhdGggc3RyaW5nIHRoYXQgYXJlIHJlc2VydmVkLlxuICovIGNvbnN0IHBlID0gbmV3IFJlZ0V4cChcIlt+XFxcXCovXFxcXFtcXFxcXV1cIik7XG5cbi8qKlxuICogV3JhcHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZyB3aXRoIGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgdGhlIG1ldGhvZCB0aGF0XG4gKiB3YXMgdGhyb3duLlxuICogQHBhcmFtIG1ldGhvZE5hbWUgLSBUaGUgcHVibGljbHkgdmlzaWJsZSBtZXRob2QgbmFtZVxuICogQHBhcmFtIHBhdGggLSBUaGUgZG90LXNlcGFyYXRlZCBzdHJpbmcgZm9ybSBvZiBhIGZpZWxkIHBhdGggd2hpY2ggd2lsbCBiZVxuICogc3BsaXQgb24gZG90cy5cbiAqIEBwYXJhbSB0YXJnZXREb2MgLSBUaGUgZG9jdW1lbnQgYWdhaW5zdCB3aGljaCB0aGUgZmllbGQgcGF0aCB3aWxsIGJlXG4gKiBldmFsdWF0ZWQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoZSwgdCwgbikge1xuICAgIGlmICh0LnNlYXJjaChwZSkgPj0gMCkgdGhyb3cgX19QUklWQVRFX2NyZWF0ZUVycm9yKGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7dH0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluICd+JywgJyonLCAnLycsICdbJywgb3IgJ10nYCwgZSwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCguLi50LnNwbGl0KFwiLlwiKSkuX2ludGVybmFsUGF0aDtcbiAgICB9IGNhdGNoIChyKSB7XG4gICAgICAgIHRocm93IF9fUFJJVkFURV9jcmVhdGVFcnJvcihgSW52YWxpZCBmaWVsZCBwYXRoICgke3R9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2AsIGUsIFxuICAgICAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAgICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVFcnJvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgY29uc3QgcyA9IHIgJiYgIXIuaXNFbXB0eSgpLCBvID0gdm9pZCAwICE9PSBpO1xuICAgIGxldCBfID0gYEZ1bmN0aW9uICR7dH0oKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGFgO1xuICAgIG4gJiYgKF8gKz0gXCIgKHZpYSBgdG9GaXJlc3RvcmUoKWApXCIpLCBfICs9IFwiLiBcIjtcbiAgICBsZXQgYSA9IFwiXCI7XG4gICAgcmV0dXJuIChzIHx8IG8pICYmIChhICs9IFwiIChmb3VuZFwiLCBzICYmIChhICs9IGAgaW4gZmllbGQgJHtyfWApLCBvICYmIChhICs9IGAgaW4gZG9jdW1lbnQgJHtpfWApLCBcbiAgICBhICs9IFwiKVwiKSwgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXyArIGUgKyBhKTtcbn1cblxuLyoqIENoZWNrcyBgaGF5c3RhY2tgIGlmIEZpZWxkUGF0aCBgbmVlZGxlYCBpcyBwcmVzZW50LiBSdW5zIGluIE8obikuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZE1hc2tDb250YWlucyhlLCB0KSB7XG4gICAgcmV0dXJuIGUuc29tZSgoZSA9PiBlLmlzRXF1YWwodCkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBEb2N1bWVudFNuYXBzaG90JDEge1xuICAgIC8vIE5vdGU6IFRoaXMgY2xhc3MgaXMgc3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHRoZSBEb2N1bWVudFNuYXBzaG90IGluXG4gICAgLy8gdGhlIGxlZ2FjeSBTREsuIFRoZSBjaGFuZ2VzIGFyZTpcbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90TWV0YWRhdGEuXG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE9wdGlvbnMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBlLCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IHQsIHRoaXMuX2tleSA9IG4sIHRoaXMuX2RvY3VtZW50ID0gciwgXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IGk7XG4gICAgfVxuICAgIC8qKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcHJvdmlkZXMgdGhlIGRvY3VtZW50J3MgSUQuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBgRG9jdW1lbnRSZWZlcmVuY2VgIGZvciB0aGUgZG9jdW1lbnQgaW5jbHVkZWQgaW4gdGhlIGBEb2N1bWVudFNuYXBzaG90YC5cbiAgICAgKi8gICAgZ2V0IHJlZigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlciwgdGhpcy5fa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZG9jdW1lbnQgYXQgdGhlIHNuYXBzaG90J3MgbG9jYXRpb24gZXhpc3RzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9kb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgXG4gICAgICogaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldChlKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIGUpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0KSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHQpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgUXVlcnlEb2N1bWVudFNuYXBzaG90JDEgZXh0ZW5kcyBEb2N1bWVudFNuYXBzaG90JDEge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgYGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKWAgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChlLCB0KSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhlLCB0KSA6IHQgaW5zdGFuY2VvZiBGaWVsZFBhdGggPyB0Ll9pbnRlcm5hbFBhdGggOiB0Ll9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdChlKSB7XG4gICAgaWYgKFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovID09PSBlLmxpbWl0VHlwZSAmJiAwID09PSBlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELlVOSU1QTEVNRU5URUQsIFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKTtcbn1cblxuLyoqXG4gKiBBbiBgQXBwbGlhYmxlQ29uc3RyYWludGAgaXMgYW4gYWJzdHJhY3Rpb24gb2YgYSBjb25zdHJhaW50IHRoYXQgY2FuIGJlIGFwcGxpZWRcbiAqIHRvIGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICovIGNsYXNzIEFwcGxpYWJsZUNvbnN0cmFpbnQge31cblxuLyoqXG4gKiBBIGBRdWVyeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0sXG4gKiB7QGxpbmsgb3JkZXJCeX0sIHtAbGluayAoc3RhcnRBdDoxKX0sIHtAbGluayAoc3RhcnRBZnRlcjoxKX0sIHtAbGlua1xuICogKGVuZEJlZm9yZToxKX0sIHtAbGluayAoZW5kQXQ6MSl9LCB7QGxpbmsgbGltaXR9LCB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZFxuICogY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0XG4gKiBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlDb25zdHJhaW50IGV4dGVuZHMgQXBwbGlhYmxlQ29uc3RyYWludCB7fVxuXG5mdW5jdGlvbiBxdWVyeShlLCB0LCAuLi5uKSB7XG4gICAgbGV0IHIgPSBbXTtcbiAgICB0IGluc3RhbmNlb2YgQXBwbGlhYmxlQ29uc3RyYWludCAmJiByLnB1c2godCksIHIgPSByLmNvbmNhdChuKSwgZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlUXVlcnlDb25zdHJhaW50QXJyYXkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXIoKGUgPT4gZSBpbnN0YW5jZW9mIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCkpLmxlbmd0aCwgbiA9IGUuZmlsdGVyKChlID0+IGUgaW5zdGFuY2VvZiBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCkpLmxlbmd0aDtcbiAgICAgICAgaWYgKHQgPiAxIHx8IHQgPiAwICYmIG4gPiAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWRRdWVyeS4gV2hlbiB1c2luZyBjb21wb3NpdGUgZmlsdGVycywgeW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSBmaWx0ZXIgYXQgdGhlIHRvcCBsZXZlbC4gQ29uc2lkZXIgbmVzdGluZyB0aGUgbXVsdGlwbGUgZmlsdGVycyB3aXRoaW4gYW4gYGFuZCguLi4pYCBzdGF0ZW1lbnQuIEZvciBleGFtcGxlOiBjaGFuZ2UgYHF1ZXJ5KHF1ZXJ5LCB3aGVyZSguLi4pLCBvciguLi4pKWAgdG8gYHF1ZXJ5KHF1ZXJ5LCBhbmQod2hlcmUoLi4uKSwgb3IoLi4uKSkpYC5cIik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBDb252ZXJ0cyBGaXJlc3RvcmUncyBpbnRlcm5hbCB0eXBlcyB0byB0aGUgSmF2YVNjcmlwdCB0eXBlcyB0aGF0IHdlIGV4cG9zZVxuICogdG8gdGhlIHVzZXIuXG4gKlxuICogQGludGVybmFsXG4gKi8gKHIpO1xuICAgIGZvciAoY29uc3QgdCBvZiByKSBlID0gdC5fYXBwbHkoZSk7XG4gICAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQSBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5XG4gKiBhIEZpcmVzdG9yZSBxdWVyeSBieSBmaWx0ZXJpbmcgb24gb25lIG9yIG1vcmUgZG9jdW1lbnQgZmllbGRzLlxuICogYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIHdoZXJlfSBhbmQgY2FuIHRoZW5cbiAqIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zXG4gKiB0aGlzIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5fZmllbGQgPSBlLCB0aGlzLl9vcCA9IHQsIHRoaXMuX3ZhbHVlID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJ3aGVyZVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQoZSwgdCwgbik7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9wYXJzZShlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZU5ld0ZpZWxkRmlsdGVyKGUuX3F1ZXJ5LCB0KSwgbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyKGUuX3F1ZXJ5LCB0KSk7XG4gICAgfVxuICAgIF9wYXJzZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZS5maXJlc3RvcmUpLCBuID0gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5RmlsdGVyKGUsIHQsIG4sIHIsIGksIHMsIG8pIHtcbiAgICAgICAgICAgIGxldCBfO1xuICAgICAgICAgICAgaWYgKGkuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gcyB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gcykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIFlvdSBjYW4ndCBwZXJmb3JtICcke3N9JyBxdWVyaWVzIG9uIGRvY3VtZW50SWQoKS5gKTtcbiAgICAgICAgICAgICAgICBpZiAoXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBzIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSBzKSB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV92YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHMobywgcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIG8pIHQucHVzaChfX1BSSVZBVEVfcGFyc2VEb2N1bWVudElkVmFsdWUociwgZSwgbikpO1xuICAgICAgICAgICAgICAgICAgICBfID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogdFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBfID0gX19QUklWQVRFX3BhcnNlRG9jdW1lbnRJZFZhbHVlKHIsIGUsIG8pO1xuICAgICAgICAgICAgfSBlbHNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAhPT0gcyAmJiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAhPT0gcyAmJiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAhPT0gcyB8fCBfX1BSSVZBVEVfdmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzKG8sIHMpLCBcbiAgICAgICAgICAgIF8gPSBfX1BSSVZBVEVfcGFyc2VRdWVyeVZhbHVlKG4sIHQsIG8sIFxuICAgICAgICAgICAgLyogYWxsb3dBcnJheXM9ICovIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gcyB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gcyk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKGksIHMsIF8pO1xuICAgICAgICB9KGUuX3F1ZXJ5LCBcIndoZXJlXCIsIHQsIGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCB0aGlzLl9maWVsZCwgdGhpcy5fb3AsIHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9IHRoYXQgZW5mb3JjZXMgdGhhdCBkb2N1bWVudHNcbiAqIG11c3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIGZpZWxkIGFuZCB0aGF0IHRoZSB2YWx1ZSBzaG91bGQgc2F0aXNmeSB0aGVcbiAqIHJlbGF0aW9uIGNvbnN0cmFpbnQgcHJvdmlkZWQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSBvcFN0ciAtIFRoZSBvcGVyYXRpb24gc3RyaW5nIChlLmcgXCImbHQ7XCIsIFwiJmx0Oz1cIiwgXCI9PVwiLCBcIiZsdDtcIixcbiAqICAgXCImbHQ7PVwiLCBcIiE9XCIpLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIGZvciBjb21wYXJpc29uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIHdoZXJlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gdCwgaSA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoXCJ3aGVyZVwiLCBlKTtcbiAgICByZXR1cm4gUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQuX2NyZWF0ZShpLCByLCBuKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzXG4gKiByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeSBieSBwZXJmb3JtaW5nIHRoZSBsb2dpY2FsIE9SIG9yIEFORCBvZiBtdWx0aXBsZVxuICoge0BsaW5rIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50fXMgb3Ige0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH1zLlxuICogYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayBvcn0gb3JcbiAqIHtAbGluayBhbmR9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5XG4gKiBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhlIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCBleHRlbmRzIEFwcGxpYWJsZUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICBlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IGUsIHRoaXMuX3F1ZXJ5Q29uc3RyYWludHMgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50KGUsIHQpO1xuICAgIH1cbiAgICBfcGFyc2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcXVlcnlDb25zdHJhaW50cy5tYXAoKHQgPT4gdC5fcGFyc2UoZSkpKS5maWx0ZXIoKGUgPT4gZS5nZXRGaWx0ZXJzKCkubGVuZ3RoID4gMCkpO1xuICAgICAgICByZXR1cm4gMSA9PT0gdC5sZW5ndGggPyB0WzBdIDogQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZSh0LCB0aGlzLl9nZXRPcGVyYXRvcigpKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX3BhcnNlKGUpO1xuICAgICAgICByZXR1cm4gMCA9PT0gdC5nZXRGaWx0ZXJzKCkubGVuZ3RoID8gZSA6IChmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVOZXdGaWx0ZXIoZSwgdCkge1xuICAgICAgICAgICAgbGV0IG4gPSBlO1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZ2V0RmxhdHRlbmVkRmlsdGVycygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHIpIF9fUFJJVkFURV92YWxpZGF0ZU5ld0ZpZWxkRmlsdGVyKG4sIGUpLCBuID0gX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyKG4sIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIGZpbHRlciBvcGVyYXRvcnMgYXJlIGluY2x1ZGVkIGluIHRoZSBnaXZlbiBsaXN0IG9mIGZpbHRlcnMgYW5kXG4gICAgICAgIC8vIHJldHVybnMgdGhlIGZpcnN0IG9uZSB0aGF0IGlzLCBvciBudWxsIGlmIG5vbmUgYXJlLlxuICAgICAgICAoZS5fcXVlcnksIHQpLCBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRGaWx0ZXIoZS5fcXVlcnksIHQpKSk7XG4gICAgfVxuICAgIF9nZXRRdWVyeUNvbnN0cmFpbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnlDb25zdHJhaW50cztcbiAgICB9XG4gICAgX2dldE9wZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gXCJhbmRcIiA9PT0gdGhpcy50eXBlID8gXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8gOiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi87XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0gdGhhdCBpcyBhIGRpc2p1bmN0aW9uIG9mXG4gKiB0aGUgZ2l2ZW4gZmlsdGVyIGNvbnN0cmFpbnRzLiBBIGRpc2p1bmN0aW9uIGZpbHRlciBpbmNsdWRlcyBhIGRvY3VtZW50IGlmIGl0XG4gKiBzYXRpc2ZpZXMgYW55IG9mIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICpcbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gT3B0aW9uYWwuIFRoZSBsaXN0IG9mXG4gKiB7QGxpbmsgUXVlcnlGaWx0ZXJDb25zdHJhaW50fXMgdG8gcGVyZm9ybSBhIGRpc2p1bmN0aW9uIGZvci4gVGhlc2UgbXVzdCBiZVxuICogY3JlYXRlZCB3aXRoIGNhbGxzIHRvIHtAbGluayB3aGVyZX0sIHtAbGluayBvcn0sIG9yIHtAbGluayBhbmR9LlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gb3IoLi4uZSkge1xuICAgIC8vIE9ubHkgc3VwcG9ydCBRdWVyeUZpbHRlckNvbnN0cmFpbnRzXG4gICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiBfX1BSSVZBVEVfdmFsaWRhdGVRdWVyeUZpbHRlckNvbnN0cmFpbnQoXCJvclwiLCBlKSkpLCBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQuX2NyZWF0ZShcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8gLCBlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9IHRoYXQgaXMgYSBjb25qdW5jdGlvbiBvZlxuICogdGhlIGdpdmVuIGZpbHRlciBjb25zdHJhaW50cy4gQSBjb25qdW5jdGlvbiBmaWx0ZXIgaW5jbHVkZXMgYSBkb2N1bWVudCBpZiBpdFxuICogc2F0aXNmaWVzIGFsbCBvZiB0aGUgZ2l2ZW4gZmlsdGVycy5cbiAqXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIE9wdGlvbmFsLiBUaGUgbGlzdCBvZlxuICoge0BsaW5rIFF1ZXJ5RmlsdGVyQ29uc3RyYWludH1zIHRvIHBlcmZvcm0gYSBjb25qdW5jdGlvbiBmb3IuIFRoZXNlIG11c3QgYmVcbiAqIGNyZWF0ZWQgd2l0aCBjYWxscyB0byB7QGxpbmsgd2hlcmV9LCB7QGxpbmsgb3J9LCBvciB7QGxpbmsgYW5kfS5cbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIGFuZCguLi5lKSB7XG4gICAgLy8gT25seSBzdXBwb3J0IFF1ZXJ5RmlsdGVyQ29uc3RyYWludHNcbiAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IF9fUFJJVkFURV92YWxpZGF0ZVF1ZXJ5RmlsdGVyQ29uc3RyYWludChcImFuZFwiLCBlKSkpLCBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQuX2NyZWF0ZShcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyAsIGUpO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gc29ydCB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeU9yZGVyQnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmdcbiAqIHtAbGluayBvcmRlckJ5fSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeVxuICogaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgLlxuICpcbiAqIE5vdGU6IERvY3VtZW50cyB0aGF0IGRvIG5vdCBjb250YWluIHRoZSBvcmRlckJ5IGZpZWxkIHdpbGwgbm90IGJlIHByZXNlbnQgaW5cbiAqIHRoZSBxdWVyeSByZXN1bHQuXG4gKi8gY2xhc3MgUXVlcnlPcmRlckJ5Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLl9maWVsZCA9IGUsIHRoaXMuX2RpcmVjdGlvbiA9IHQsIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwib3JkZXJCeVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlPcmRlckJ5Q29uc3RyYWludChlLCB0KTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeU9yZGVyQnkoZSwgdCwgbikge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUuc3RhcnRBdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBzdGFydEF0KCkgb3Igc3RhcnRBZnRlcigpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5lbmRBdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBlbmRBdCgpIG9yIGVuZEJlZm9yZSgpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBjb25zdCByID0gbmV3IE9yZGVyQnkodCwgbik7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlTmV3T3JkZXJCeShlLCB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IF9fUFJJVkFURV9nZXRGaXJzdE9yZGVyQnlGaWVsZChlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBvcmRlciBieS4gSXQgbXVzdCBtYXRjaCBhbnkgaW5lcXVhbGl0eS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoZSk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IG4gJiYgX19QUklWQVRFX3ZhbGlkYXRlT3JkZXJCeUFuZEluZXF1YWxpdHlNYXRjaChlLCBuLCB0LmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KGUsIHIpLCByO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQ3JlYXRlIGEgYEJvdW5kYCBmcm9tIGEgcXVlcnkgYW5kIGEgZG9jdW1lbnQuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBgQm91bmRgIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIGtleSBvZiB0aGUgZG9jdW1lbnRcbiAqIGFuZCBzbyBvbmx5IHRoZSBwcm92aWRlZCBkb2N1bWVudCB3aWxsIGNvbXBhcmUgZXF1YWwgdG8gdGhlIHJldHVybmVkXG4gKiBwb3NpdGlvbi5cbiAqXG4gKiBXaWxsIHRocm93IGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGFsbCBmaWVsZHMgb2YgdGhlIG9yZGVyIGJ5XG4gKiBvZiB0aGUgcXVlcnkgb3IgaWYgYW55IG9mIHRoZSBmaWVsZHMgaW4gdGhlIG9yZGVyIGJ5IGFyZSBhbiB1bmNvbW1pdHRlZFxuICogc2VydmVyIHRpbWVzdGFtcC5cbiAqLyAoZS5fcXVlcnksIHRoaXMuX2ZpZWxkLCB0aGlzLl9kaXJlY3Rpb24pO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkT3JkZXJCeShlLCB0KSB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRlIHRoYXQgb3JkZXJCeSBkb2VzIG5vdCBsaXN0IHRoZSBzYW1lIGtleSB0d2ljZS5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmV4cGxpY2l0T3JkZXJCeS5jb25jYXQoWyB0IF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIG4sIGUuZmlsdGVycy5zbGljZSgpLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbiAgICAgICAgfShlLl9xdWVyeSwgdCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnR9IHRoYXQgc29ydHMgdGhlIHF1ZXJ5IHJlc3VsdCBieSB0aGVcbiAqIHNwZWNpZmllZCBmaWVsZCwgb3B0aW9uYWxseSBpbiBkZXNjZW5kaW5nIG9yZGVyIGluc3RlYWQgb2YgYXNjZW5kaW5nLlxuICpcbiAqIE5vdGU6IERvY3VtZW50cyB0aGF0IGRvIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgZmllbGQgd2lsbCBub3QgYmUgcHJlc2VudFxuICogaW4gdGhlIHF1ZXJ5IHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIGZpZWxkIHRvIHNvcnQgYnkuXG4gKiBAcGFyYW0gZGlyZWN0aW9uU3RyIC0gT3B0aW9uYWwgZGlyZWN0aW9uIHRvIHNvcnQgYnkgKCdhc2MnIG9yICdkZXNjJykuIElmXG4gKiBub3Qgc3BlY2lmaWVkLCBvcmRlciB3aWxsIGJlIGFzY2VuZGluZy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeU9yZGVyQnlDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBvcmRlckJ5KGUsIHQgPSBcImFzY1wiKSB7XG4gICAgY29uc3QgbiA9IHQsIHIgPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50KFwib3JkZXJCeVwiLCBlKTtcbiAgICByZXR1cm4gUXVlcnlPcmRlckJ5Q29uc3RyYWludC5fY3JlYXRlKHIsIG4pO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5TGltaXRDb25zdHJhaW50YCBpcyB1c2VkIHRvIGxpbWl0IHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5XG4gKiBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqIGBRdWVyeUxpbWl0Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayBsaW1pdH0gb3JcbiAqIHtAbGluayBsaW1pdFRvTGFzdH0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXdcbiAqIHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUxpbWl0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlMaW1pdENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICBlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IGUsIHRoaXMuX2xpbWl0ID0gdCwgdGhpcy5fbGltaXRUeXBlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5TGltaXRDb25zdHJhaW50KGUsIHQsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0KGUuX3F1ZXJ5LCB0aGlzLl9saW1pdCwgdGhpcy5fbGltaXRUeXBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBmaXJzdCBtYXRjaGluZ1xuICogZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIGxpbWl0KGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlUG9zaXRpdmVOdW1iZXIoXCJsaW1pdFwiLCBlKSwgUXVlcnlMaW1pdENvbnN0cmFpbnQuX2NyZWF0ZShcImxpbWl0XCIsIGUsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGxhc3QgbWF0Y2hpbmdcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBZb3UgbXVzdCBzcGVjaWZ5IGF0IGxlYXN0IG9uZSBgb3JkZXJCeWAgY2xhdXNlIGZvciBgbGltaXRUb0xhc3RgIHF1ZXJpZXMsXG4gKiBvdGhlcndpc2UgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duIGR1cmluZyBleGVjdXRpb24uXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gbGltaXRUb0xhc3QoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVQb3NpdGl2ZU51bWJlcihcImxpbWl0VG9MYXN0XCIsIGUpLCBRdWVyeUxpbWl0Q29uc3RyYWludC5fY3JlYXRlKFwibGltaXRUb0xhc3RcIiwgZSwgXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8pO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gZXhjbHVkZSBkb2N1bWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgYVxuICogcmVzdWx0IHNldCByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqIGBRdWVyeVN0YXJ0QXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIChzdGFydEF0OjEpfSBvclxuICoge0BsaW5rIChzdGFydEFmdGVyOjEpfSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhXG4gKiBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICBlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IGUsIHRoaXMuX2RvY09yRmllbGRzID0gdCwgdGhpcy5faW5jbHVzaXZlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQoZSwgdCwgbik7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21Eb2NPckZpZWxkcyhlLCB0aGlzLnR5cGUsIHRoaXMuX2RvY09yRmllbGRzLCB0aGlzLl9pbmNsdXNpdmUpO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aFN0YXJ0QXQoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIGUuZmlsdGVycy5zbGljZSgpLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgdCwgZS5lbmRBdCk7XG4gICAgICAgIH0oZS5fcXVlcnksIHQpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHN0YXJ0QXQoLi4uZSkge1xuICAgIHJldHVybiBRdWVyeVN0YXJ0QXRDb25zdHJhaW50Ll9jcmVhdGUoXCJzdGFydEF0XCIsIGUsIFxuICAgIC8qaW5jbHVzaXZlPSovICEwKTtcbn1cblxuZnVuY3Rpb24gc3RhcnRBZnRlciguLi5lKSB7XG4gICAgcmV0dXJuIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQuX2NyZWF0ZShcInN0YXJ0QWZ0ZXJcIiwgZSwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITEpO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RW5kQXRDb25zdHJhaW50YCBpcyB1c2VkIHRvIGV4Y2x1ZGUgZG9jdW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhXG4gKiByZXN1bHQgc2V0IHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5RW5kQXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIChlbmRBdDoxKX0gb3JcbiAqIHtAbGluayAoZW5kQmVmb3JlOjEpfSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ld1xuICogcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5RW5kQXRDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUVuZEF0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fZG9jT3JGaWVsZHMgPSB0LCB0aGlzLl9pbmNsdXNpdmUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlFbmRBdENvbnN0cmFpbnQoZSwgdCwgbik7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21Eb2NPckZpZWxkcyhlLCB0aGlzLnR5cGUsIHRoaXMuX2RvY09yRmllbGRzLCB0aGlzLl9pbmNsdXNpdmUpO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aEVuZEF0KGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBlLmZpbHRlcnMuc2xpY2UoKSwgZS5saW1pdCwgZS5saW1pdFR5cGUsIGUuc3RhcnRBdCwgdCk7XG4gICAgICAgIH0oZS5fcXVlcnksIHQpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGVuZEJlZm9yZSguLi5lKSB7XG4gICAgcmV0dXJuIFF1ZXJ5RW5kQXRDb25zdHJhaW50Ll9jcmVhdGUoXCJlbmRCZWZvcmVcIiwgZSwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITEpO1xufVxuXG5mdW5jdGlvbiBlbmRBdCguLi5lKSB7XG4gICAgcmV0dXJuIFF1ZXJ5RW5kQXRDb25zdHJhaW50Ll9jcmVhdGUoXCJlbmRBdFwiLCBlLCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMCk7XG59XG5cbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21Eb2NPckZpZWxkcyhlLCB0LCBuLCByKSB7XG4gICAgaWYgKG5bMF0gPSBnZXRNb2R1bGFySW5zdGFuY2UoblswXSksIG5bMF0gaW5zdGFuY2VvZiBEb2N1bWVudFNuYXBzaG90JDEpIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21Eb2N1bWVudChlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGlmICghcikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuTk9UX0ZPVU5ELCBgQ2FuJ3QgdXNlIGEgRG9jdW1lbnRTbmFwc2hvdCB0aGF0IGRvZXNuJ3QgZXhpc3QgZm9yICR7bn0oKS5gKTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAvLyBCZWNhdXNlIHBlb3BsZSBleHBlY3QgdG8gY29udGludWUvZW5kIGEgcXVlcnkgYXQgdGhlIGV4YWN0IGRvY3VtZW50XG4gICAgICAgIC8vIHByb3ZpZGVkLCB3ZSBuZWVkIHRvIHVzZSB0aGUgaW1wbGljaXQgc29ydCBvcmRlciByYXRoZXIgdGhhbiB0aGUgZXhwbGljaXRcbiAgICAgICAgLy8gc29ydCBvcmRlciwgYmVjYXVzZSBpdCdzIGd1YXJhbnRlZWQgdG8gY29udGFpbiB0aGUgZG9jdW1lbnQga2V5LiBUaGF0IHdheVxuICAgICAgICAvLyB0aGUgcG9zaXRpb24gYmVjb21lcyB1bmFtYmlndW91cyBhbmQgdGhlIHF1ZXJ5IGNvbnRpbnVlcy9lbmRzIGV4YWN0bHkgYXRcbiAgICAgICAgLy8gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiBXaXRob3V0IHRoZSBrZXkgKGJ5IHVzaW5nIHRoZSBleHBsaWNpdCBzb3J0XG4gICAgICAgIC8vIG9yZGVycyksIG11bHRpcGxlIGRvY3VtZW50cyBjb3VsZCBtYXRjaCB0aGUgcG9zaXRpb24sIHlpZWxkaW5nIGR1cGxpY2F0ZVxuICAgICAgICAvLyByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkgaWYgKG4uZmllbGQuaXNLZXlGaWVsZCgpKSBzLnB1c2goX19QUklWQVRFX3JlZlZhbHVlKHQsIHIua2V5KSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHIuZGF0YS5maWVsZChuLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNTZXJ2ZXJUaW1lc3RhbXAoZSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgXCInICsgbi5maWVsZCArICdcIiBpcyBhbiB1bmNvbW1pdHRlZCBzZXJ2ZXIgdGltZXN0YW1wLiAoU2luY2UgdGhlIHZhbHVlIG9mIHRoaXMgZmllbGQgaXMgdW5rbm93biwgeW91IGNhbm5vdCBzdGFydC9lbmQgYSBxdWVyeSB3aXRoIGl0LiknKTtcbiAgICAgICAgICAgIGlmIChudWxsID09PSBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG4uZmllbGQuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnJHtlfScgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQm91bmQocywgaSk7XG4gICAgfVxuICAgIC8qKlxuICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIGBCb3VuZGAgZm9yIHRoZSBnaXZlbiBxdWVyeS5cbiAqLyAoZS5fcXVlcnksIGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCB0LCBuWzBdLl9kb2N1bWVudCwgcik7XG4gICAge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUuZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbUZpZWxkcyhlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgICAgICAvLyBVc2UgZXhwbGljaXQgb3JkZXIgYnkncyBiZWNhdXNlIGl0IGhhcyB0byBtYXRjaCB0aGUgcXVlcnkgdGhlIHVzZXIgbWFkZVxuICAgICAgICAgICAgY29uc3QgbyA9IGUuZXhwbGljaXRPcmRlckJ5O1xuICAgICAgICAgICAgaWYgKGkubGVuZ3RoID4gby5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gJHtyfSgpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzYCk7XG4gICAgICAgICAgICBjb25zdCBfID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IGkubGVuZ3RoOyBzKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gaVtzXTtcbiAgICAgICAgICAgICAgICBpZiAob1tzXS5maWVsZC5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGEpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBFeHBlY3RlZCBhIHN0cmluZyBmb3IgZG9jdW1lbnQgSUQgaW4gJHtyfSgpLCBidXQgZ290IGEgJHt0eXBlb2YgYX1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNDb2xsZWN0aW9uR3JvdXBRdWVyeShlKSAmJiAtMSAhPT0gYS5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGFuZCBvcmRlcmluZyBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtyfSgpIG11c3QgYmUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke2F9JyBjb250YWlucyBhIHNsYXNoLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGEpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KG4pKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3J9KCkgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7bn0nIGlzIG5vdCBiZWNhdXNlIGl0IGNvbnRhaW5zIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMuYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgRG9jdW1lbnRLZXkobik7XG4gICAgICAgICAgICAgICAgICAgIF8ucHVzaChfX1BSSVZBVEVfcmVmVmFsdWUodCwgaSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfcGFyc2VRdWVyeVZhbHVlKG4sIHIsIGEpO1xuICAgICAgICAgICAgICAgICAgICBfLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChfLCBzKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gYGRvY3VtZW50SWRWYWx1ZWAgaW50byBhIGBSZWZlcmVuY2VWYWx1ZWAsIHRocm93aW5nXG4gKiBhcHByb3ByaWF0ZSBlcnJvcnMgaWYgdGhlIHZhbHVlIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYSBgRG9jdW1lbnRSZWZlcmVuY2VgXG4gKiBvciBgc3RyaW5nYCwgb3IgaWYgdGhlIHN0cmluZyBpcyBtYWxmb3JtZWQuXG4gKi8gKGUuX3F1ZXJ5LCBlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgaSwgdCwgbiwgcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VEb2N1bWVudElkVmFsdWUoZSwgdCwgbikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiAobiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKSkpIHtcbiAgICAgICAgaWYgKFwiXCIgPT09IG4pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy5cIik7XG4gICAgICAgIGlmICghX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkodCkgJiYgLTEgIT09IG4uaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke259JyBjb250YWlucyBhICcvJyBjaGFyYWN0ZXIuYCk7XG4gICAgICAgIGNvbnN0IHIgPSB0LnBhdGguY2hpbGQoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcobikpO1xuICAgICAgICBpZiAoIURvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkocikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtyfScgaXMgbm90IGJlY2F1c2UgaXQgaGFzIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMgKCR7ci5sZW5ndGh9KS5gKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZWZWYWx1ZShlLCBuZXcgRG9jdW1lbnRLZXkocikpO1xuICAgIH1cbiAgICBpZiAobiBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSByZXR1cm4gX19QUklWQVRFX3JlZlZhbHVlKGUsIG4uX2tleSk7XG4gICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IGl0IHdhczogJHtfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihuKX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbnRvIGEgZGlzanVuY3RpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcbiAqIGFycmF5IHJlcXVpcmVtZW50cy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzKGUsIHQpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZSkgfHwgMCA9PT0gZS5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyR7dC50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBvcGVyYXRvciwgcmV0dXJucyB0aGUgc2V0IG9mIG9wZXJhdG9ycyB0aGF0IGNhbm5vdCBiZSB1c2VkIHdpdGggaXQuXG4gKlxuICogVGhpcyBpcyBub3QgYSBjb21wcmVoZW5zaXZlIGNoZWNrLCBhbmQgdGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgcmVtb3ZlZCBpbiB0aGVcbiAqIGxvbmcgdGVybS4gVmFsaWRhdGlvbnMgc2hvdWxkIG9jY3VyIGluIHRoZSBGaXJlc3RvcmUgYmFja2VuZC5cbiAqXG4gKiBPcGVyYXRvcnMgaW4gYSBxdWVyeSBtdXN0IGFkaGVyZSB0byB0aGUgZm9sbG93aW5nIHNldCBvZiBydWxlczpcbiAqIDEuIE9ubHkgb25lIGluZXF1YWxpdHkgcGVyIHF1ZXJ5LlxuICogMi4gYE5PVF9JTmAgY2Fubm90IGJlIHVzZWQgd2l0aCBhcnJheSwgZGlzanVuY3RpdmUsIG9yIGBOT1RfRVFVQUxgIG9wZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVOZXdGaWVsZEZpbHRlcihlLCB0KSB7XG4gICAgaWYgKHQuaXNJbmVxdWFsaXR5KCkpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQoZSksIHIgPSB0LmZpZWxkO1xuICAgICAgICBpZiAobnVsbCAhPT0gbiAmJiAhbi5pc0VxdWFsKHIpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gQWxsIHdoZXJlIGZpbHRlcnMgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG11c3QgYmUgb24gdGhlIHNhbWUgZmllbGQuIEJ1dCB5b3UgaGF2ZSBpbmVxdWFsaXR5IGZpbHRlcnMgb24gJyR7bi50b1N0cmluZygpfScgYW5kICcke3IudG9TdHJpbmcoKX0nYCk7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZ2V0Rmlyc3RPcmRlckJ5RmllbGQoZSk7XG4gICAgICAgIG51bGwgIT09IGkgJiYgX19QUklWQVRFX3ZhbGlkYXRlT3JkZXJCeUFuZEluZXF1YWxpdHlNYXRjaChlLCByLCBpKTtcbiAgICB9XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV9maW5kT3BJbnNpZGVGaWx0ZXJzKGUsIHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIGZvciAoY29uc3QgZSBvZiBuLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkgaWYgKHQuaW5kZXhPZihlLm9wKSA+PSAwKSByZXR1cm4gZS5vcDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfShlLmZpbHRlcnMsIGZ1bmN0aW9uIF9fUFJJVkFURV9jb25mbGljdGluZ09wcyhlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gWyBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXTtcblxuICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIF07XG5cbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIF07XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfSh0Lm9wKSk7XG4gICAgaWYgKG51bGwgIT09IG4pIFxuICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIGl0J3MgYSBkdXBsaWNhdGUgb3AgdG8gZ2l2ZSBhIHNsaWdodGx5IGNsZWFyZXIgZXJyb3IgbWVzc2FnZS5cbiAgICB0aHJvdyBuID09PSB0Lm9wID8gbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgJyR7dC5vcC50b1N0cmluZygpfScgZmlsdGVyLmApIDogbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlICcke3Qub3AudG9TdHJpbmcoKX0nIGZpbHRlcnMgd2l0aCAnJHtuLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoKGUsIHQsIG4pIHtcbiAgICBpZiAoIW4uaXNFcXVhbCh0KSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBoYXZlIGEgd2hlcmUgZmlsdGVyIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBvbiBmaWVsZCAnJHt0LnRvU3RyaW5nKCl9JyBhbmQgc28geW91IG11c3QgYWxzbyB1c2UgJyR7dC50b1N0cmluZygpfScgYXMgeW91ciBmaXJzdCBhcmd1bWVudCB0byBvcmRlckJ5KCksIGJ1dCB5b3VyIGZpcnN0IG9yZGVyQnkoKSBpcyBvbiBmaWVsZCAnJHtuLnRvU3RyaW5nKCl9JyBpbnN0ZWFkLmApO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVRdWVyeUZpbHRlckNvbnN0cmFpbnQoZSwgdCkge1xuICAgIGlmICghKHQgaW5zdGFuY2VvZiBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCB8fCB0IGluc3RhbmNlb2YgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50KSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSByZXF1aXJlcyBBcHBsaWFibGVDb25zdHJhaW50cyBjcmVhdGVkIHdpdGggYSBjYWxsIHRvICd3aGVyZSguLi4pJywgJ29yKC4uLiknLCBvciAnYW5kKC4uLiknLmApO1xufVxuXG5jbGFzcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyIHtcbiAgICBjb252ZXJ0VmFsdWUoZSwgdCA9IFwibm9uZVwiKSB7XG4gICAgICAgIHN3aXRjaCAoX19QUklWQVRFX3R5cGVPcmRlcihlKSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUuYm9vbGVhblZhbHVlO1xuXG4gICAgICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChlLnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFNlcnZlclRpbWVzdGFtcChlLCB0KTtcblxuICAgICAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUuc3RyaW5nVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Qnl0ZXMoX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZS5ieXRlc1ZhbHVlKSk7XG5cbiAgICAgICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRSZWZlcmVuY2UoZS5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdlb1BvaW50KGUuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEFycmF5KGUuYXJyYXlWYWx1ZSwgdCk7XG5cbiAgICAgICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0KGUubWFwVmFsdWUsIHQpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IGZhaWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0T2JqZWN0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdE1hcChlLmZpZWxkcywgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqLyAgICBjb252ZXJ0T2JqZWN0TWFwKGUsIHQgPSBcIm5vbmVcIikge1xuICAgICAgICBjb25zdCBuID0ge307XG4gICAgICAgIHJldHVybiBmb3JFYWNoKGUsICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbltlXSA9IHRoaXMuY29udmVydFZhbHVlKHIsIHQpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIGNvbnZlcnRHZW9Qb2ludChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2VvUG9pbnQoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxhdGl0dWRlKSwgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICBjb252ZXJ0QXJyYXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gKGUudmFsdWVzIHx8IFtdKS5tYXAoKGUgPT4gdGhpcy5jb252ZXJ0VmFsdWUoZSwgdCkpKTtcbiAgICB9XG4gICAgY29udmVydFNlcnZlclRpbWVzdGFtcChlLCB0KSB7XG4gICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB0aGlzLmNvbnZlcnRWYWx1ZShuLCB0KTtcblxuICAgICAgICAgIGNhc2UgXCJlc3RpbWF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSkpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRUaW1lc3RhbXAoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodC5zZWNvbmRzLCB0Lm5hbm9zKTtcbiAgICB9XG4gICAgY29udmVydERvY3VtZW50S2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpO1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChfX1BSSVZBVEVfaXNWYWxpZFJlc291cmNlTmFtZShuKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgRGF0YWJhc2VJZChuLmdldCgxKSwgbi5nZXQoMykpLCBpID0gbmV3IERvY3VtZW50S2V5KG4ucG9wRmlyc3QoNSkpO1xuICAgICAgICByZXR1cm4gci5pc0VxdWFsKHQpIHx8IFxuICAgICAgICAvLyBUT0RPKGIvNjQxMzAyMDIpOiBTb21laG93IHN1cHBvcnQgZm9yZWlnbiByZWZlcmVuY2VzLlxuICAgICAgICBfX1BSSVZBVEVfbG9nRXJyb3IoYERvY3VtZW50ICR7aX0gY29udGFpbnMgYSBkb2N1bWVudCByZWZlcmVuY2Ugd2l0aGluIGEgZGlmZmVyZW50IGRhdGFiYXNlICgke3IucHJvamVjdElkfS8ke3IuZGF0YWJhc2V9KSB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLiBJdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSByZWZlcmVuY2UgaW4gdGhlIGN1cnJlbnQgZGF0YWJhc2UgKCR7dC5wcm9qZWN0SWR9LyR7dC5kYXRhYmFzZX0pIGluc3RlYWQuYCksIFxuICAgICAgICBpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29udmVydHMgY3VzdG9tIG1vZGVsIG9iamVjdCBvZiB0eXBlIFQgaW50byBgRG9jdW1lbnREYXRhYCBieSBhcHBseWluZyB0aGVcbiAqIGNvbnZlcnRlciBpZiBpdCBleGlzdHMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gY29udmVydGluZyB1c2VyIG9iamVjdHMgdG8gYERvY3VtZW50RGF0YWBcbiAqIGJlY2F1c2Ugd2Ugd2FudCB0byBwcm92aWRlIHRoZSB1c2VyIHdpdGggYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgaWZcbiAqIHRoZWlyIGBzZXQoKWAgb3IgZmFpbHMgZHVlIHRvIGludmFsaWQgZGF0YSBvcmlnaW5hdGluZyBmcm9tIGEgYHRvRmlyZXN0b3JlKClgXG4gKiBjYWxsLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoZSwgdCwgbikge1xuICAgIGxldCByO1xuICAgIC8vIENhc3QgdG8gYGFueWAgaW4gb3JkZXIgdG8gc2F0aXNmeSB0aGUgdW5pb24gdHlwZSBjb25zdHJhaW50IG9uXG4gICAgLy8gdG9GaXJlc3RvcmUoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiByID0gZSA/IG4gJiYgKG4ubWVyZ2UgfHwgbi5tZXJnZUZpZWxkcykgPyBlLnRvRmlyZXN0b3JlKHQsIG4pIDogZS50b0ZpcmVzdG9yZSh0KSA6IHQsIFxuICAgIHI7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9MaXRlVXNlckRhdGFXcml0ZXIgZXh0ZW5kcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlcyhlKTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleShlLCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGUgYW4gQWdncmVnYXRlRmllbGQgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcHV0ZSB0aGUgc3VtIG9mXG4gKiBhIHNwZWNpZmllZCBmaWVsZCBvdmVyIGEgcmFuZ2Ugb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAcGFyYW0gZmllbGQgU3BlY2lmaWVzIHRoZSBmaWVsZCB0byBzdW0gYWNyb3NzIHRoZSByZXN1bHQgc2V0LlxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIHN1bShlKSB7XG4gICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVGaWVsZChcInN1bVwiLCBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEoXCJzdW1cIiwgZSkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBhdmVyYWdlIG9mXG4gKiBhIHNwZWNpZmllZCBmaWVsZCBvdmVyIGEgcmFuZ2Ugb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAcGFyYW0gZmllbGQgU3BlY2lmaWVzIHRoZSBmaWVsZCB0byBhdmVyYWdlIGFjcm9zcyB0aGUgcmVzdWx0IHNldC5cbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBhdmVyYWdlKGUpIHtcbiAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUZpZWxkKFwiYXZnXCIsIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMShcImF2ZXJhZ2VcIiwgZSkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBjb3VudCBvZlxuICogZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gY291bnQoKSB7XG4gICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVGaWVsZChcImNvdW50XCIpO1xufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byAnQWdncmVnYXRlRmllbGRgIGluc3RhbmNlcyBmb3IgZXF1YWxpdHkuXG4gKlxuICogQHBhcmFtIGxlZnQgQ29tcGFyZSB0aGlzIEFnZ3JlZ2F0ZUZpZWxkIHRvIHRoZSBgcmlnaHRgLlxuICogQHBhcmFtIHJpZ2h0IENvbXBhcmUgdGhpcyBBZ2dyZWdhdGVGaWVsZCB0byB0aGUgYGxlZnRgLlxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIGFnZ3JlZ2F0ZUZpZWxkRXF1YWwoZSwgdCkge1xuICAgIHZhciBuLCByO1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgQWdncmVnYXRlRmllbGQgJiYgdCBpbnN0YW5jZW9mIEFnZ3JlZ2F0ZUZpZWxkICYmIGUuX2FnZ3JlZ2F0ZVR5cGUgPT09IHQuX2FnZ3JlZ2F0ZVR5cGUgJiYgKG51bGwgPT09IChuID0gZS5faW50ZXJuYWxGaWVsZFBhdGgpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uY2Fub25pY2FsU3RyaW5nKCkpID09PSAobnVsbCA9PT0gKHIgPSB0Ll9pbnRlcm5hbEZpZWxkUGF0aCkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5jYW5vbmljYWxTdHJpbmcoKSk7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCBpbnN0YW5jZXMgZm9yIGVxdWFsaXR5LlxuICpcbiAqIFR3byBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIFwiZXF1YWxcIiBpZiB0aGV5IGhhdmVcbiAqIHVuZGVybHlpbmcgcXVlcmllcyB0aGF0IGNvbXBhcmUgZXF1YWwsIGFuZCB0aGUgc2FtZSBkYXRhLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gVGhlIGZpcnN0IGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gVGhlIHNlY29uZCBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gY29tcGFyZS5cbiAqXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIFwiZXF1YWxcIiwgYXMgZGVmaW5lZCBhYm92ZSwgb3IgYGZhbHNlYFxuICogb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIGFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIHF1ZXJ5RXF1YWwoZS5xdWVyeSwgdC5xdWVyeSkgJiYgZGVlcEVxdWFsKGUuZGF0YSgpLCB0LmRhdGEoKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE1ldGFkYXRhIGFib3V0IGEgc25hcHNob3QsIGRlc2NyaWJpbmcgdGhlIHN0YXRlIG9mIHRoZSBzbmFwc2hvdC5cbiAqLyBjbGFzcyBTbmFwc2hvdE1ldGFkYXRhIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nV3JpdGVzID0gZSwgdGhpcy5mcm9tQ2FjaGUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgU25hcHNob3RNZXRhZGF0YWAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPT09IGUuaGFzUGVuZGluZ1dyaXRlcyAmJiB0aGlzLmZyb21DYWNoZSA9PT0gZS5mcm9tQ2FjaGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgRG9jdW1lbnRTbmFwc2hvdCBleHRlbmRzIERvY3VtZW50U25hcHNob3QkMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICBzdXBlcihlLCB0LCBuLCByLCBzKSwgdGhpcy5fZmlyZXN0b3JlID0gZSwgdGhpcy5fZmlyZXN0b3JlSW1wbCA9IGUsIHRoaXMubWV0YWRhdGEgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBkYXRhIGV4aXN0cy4gVHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5leGlzdHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoZSA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCB0aGlzLm1ldGFkYXRhLCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZSh0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSwgZS5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYSBgc2VydmVyVGltZXN0YW1wKClgIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzZXQgdG9cbiAgICAgKiBpdHMgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBieVxuICAgICAqIHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyB0aGUgZmllbGQgaXMgcmV0cmlldmVkXG4gICAgICogZnJvbSB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wc1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldChlLCB0ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgZSkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUobiwgdC5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCBleHRlbmRzIERvY3VtZW50U25hcHNob3Qge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YShlID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5U25hcHNob3RgIGNvbnRhaW5zIHplcm8gb3IgbW9yZSBgRG9jdW1lbnRTbmFwc2hvdGAgb2JqZWN0c1xuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudHMgY2FuIGJlIGFjY2Vzc2VkIGFzIGFuXG4gKiBhcnJheSB2aWEgdGhlIGBkb2NzYCBwcm9wZXJ0eSBvciBlbnVtZXJhdGVkIHVzaW5nIHRoZSBgZm9yRWFjaGAgbWV0aG9kLiBUaGVcbiAqIG51bWJlciBvZiBkb2N1bWVudHMgY2FuIGJlIGRldGVybWluZWQgdmlhIHRoZSBgZW1wdHlgIGFuZCBgc2l6ZWBcbiAqIHByb3BlcnRpZXMuXG4gKi8gY2xhc3MgUXVlcnlTbmFwc2hvdCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gdCwgdGhpcy5fc25hcHNob3QgPSByLCB0aGlzLm1ldGFkYXRhID0gbmV3IFNuYXBzaG90TWV0YWRhdGEoci5oYXNQZW5kaW5nV3JpdGVzLCByLmZyb21DYWNoZSksIFxuICAgICAgICB0aGlzLnF1ZXJ5ID0gbjtcbiAgICB9XG4gICAgLyoqIEFuIGFycmF5IG9mIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBkb2NzKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKHQgPT4gZS5wdXNoKHQpKSksIGU7XG4gICAgfVxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NuYXBzaG90LmRvY3Muc2l6ZTtcbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlcmUgYXJlIG5vIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIG9mIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdpdGggYSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBmb3JcbiAgICAgKiBlYWNoIGRvY3VtZW50IGluIHRoZSBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gdGhpc0FyZyAtIFRoZSBgdGhpc2AgYmluZGluZyBmb3IgdGhlIGNhbGxiYWNrLlxuICAgICAqLyAgICBmb3JFYWNoKGUsIHQpIHtcbiAgICAgICAgdGhpcy5fc25hcHNob3QuZG9jcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIGUuY2FsbCh0LCBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIG4ua2V5LCBuLCBuZXcgU25hcHNob3RNZXRhZGF0YSh0aGlzLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5rZXkpLCB0aGlzLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0aGlzLnF1ZXJ5LmNvbnZlcnRlcikpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGRvY3VtZW50cyBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHNuYXBzaG90LiBJZiB0aGlzXG4gICAgICogaXMgdGhlIGZpcnN0IHNuYXBzaG90LCBhbGwgZG9jdW1lbnRzIHdpbGwgYmUgaW4gdGhlIGxpc3QgYXMgJ2FkZGVkJ1xuICAgICAqIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGBTbmFwc2hvdExpc3Rlbk9wdGlvbnNgIHRoYXQgY29udHJvbCB3aGV0aGVyIG1ldGFkYXRhLW9ubHlcbiAgICAgKiBjaGFuZ2VzIChpLmUuIG9ubHkgYERvY3VtZW50U25hcHNob3QubWV0YWRhdGFgIGNoYW5nZWQpIHNob3VsZCB0cmlnZ2VyXG4gICAgICogc25hcHNob3QgZXZlbnRzLlxuICAgICAqLyAgICBkb2NDaGFuZ2VzKGUgPSB7fSkge1xuICAgICAgICBjb25zdCB0ID0gISFlLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIGlmICh0ICYmIHRoaXMuX3NuYXBzaG90LmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlRvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMgJiYgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IHQgfHwgKHRoaXMuX2NhY2hlZENoYW5nZXMgPSBcbiAgICAgICAgLyoqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGBEb2N1bWVudENoYW5nZWBzIGZvciBhIGdpdmVuIGBWaWV3U25hcHNob3RgLiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfY2hhbmdlc0Zyb21TbmFwc2hvdChlLCB0KSB7XG4gICAgICAgICAgICBpZiAoZS5fc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuX3NuYXBzaG90LmRvY0NoYW5nZXMubWFwKChuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QoZS5fZmlyZXN0b3JlLCBlLl91c2VyRGF0YVdyaXRlciwgbi5kb2Mua2V5LCBuLmRvYywgbmV3IFNuYXBzaG90TWV0YWRhdGEoZS5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4uZG9jLmtleSksIGUuX3NuYXBzaG90LmZyb21DYWNoZSksIGUucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZG9jLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFkZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogdCsrXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEEgYERvY3VtZW50U2V0YCB0aGF0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBhcyBjaGFuZ2VzIGFyZSBhcHBsaWVkIHRvIHVzZVxuICAgICAgICAgICAgICAgIC8vIHRvIGxvb2t1cCB0aGUgaW5kZXggb2YgYSBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IGUuX3NuYXBzaG90Lm9sZERvY3M7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuX3NuYXBzaG90LmRvY0NoYW5nZXMuZmlsdGVyKChlID0+IHQgfHwgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICE9PSBlLnR5cGUpKS5tYXAoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdChlLl9maXJlc3RvcmUsIGUuX3VzZXJEYXRhV3JpdGVyLCB0LmRvYy5rZXksIHQuZG9jLCBuZXcgU25hcHNob3RNZXRhZGF0YShlLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXModC5kb2Mua2V5KSwgZS5fc25hcHNob3QuZnJvbUNhY2hlKSwgZS5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xLCBzID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gIT09IHQudHlwZSAmJiAoaSA9IG4uaW5kZXhPZih0LmRvYy5rZXkpLCBuID0gbi5kZWxldGUodC5kb2Mua2V5KSksIFxuICAgICAgICAgICAgICAgICAgICAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAhPT0gdC50eXBlICYmIChuID0gbi5hZGQodC5kb2MpLCBzID0gbi5pbmRleE9mKHQuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogX19QUklWQVRFX3Jlc3VsdENoYW5nZVR5cGUodC50eXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IHNcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odGhpcywgdCksIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID0gdCksIHRoaXMuX2NhY2hlZENoYW5nZXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmVzdWx0Q2hhbmdlVHlwZShlKSB7XG4gICAgc3dpdGNoIChlKSB7XG4gICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgIHJldHVybiBcImFkZGVkXCI7XG5cbiAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgIGNhc2UgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovIDpcbiAgICAgICAgcmV0dXJuIFwibW9kaWZpZWRcIjtcblxuICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgIHJldHVybiBcInJlbW92ZWRcIjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlZXhwKTogQWRkIHRlc3RzIGZvciBzbmFwc2hvdEVxdWFsIHdpdGggZGlmZmVyZW50IHNuYXBzaG90XG4vLyBtZXRhZGF0YVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICovIGZ1bmN0aW9uIHNuYXBzaG90RXF1YWwoZSwgdCkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRG9jdW1lbnRTbmFwc2hvdCAmJiB0IGluc3RhbmNlb2YgRG9jdW1lbnRTbmFwc2hvdCA/IGUuX2ZpcmVzdG9yZSA9PT0gdC5fZmlyZXN0b3JlICYmIGUuX2tleS5pc0VxdWFsKHQuX2tleSkgJiYgKG51bGwgPT09IGUuX2RvY3VtZW50ID8gbnVsbCA9PT0gdC5fZG9jdW1lbnQgOiBlLl9kb2N1bWVudC5pc0VxdWFsKHQuX2RvY3VtZW50KSkgJiYgZS5fY29udmVydGVyID09PSB0Ll9jb252ZXJ0ZXIgOiBlIGluc3RhbmNlb2YgUXVlcnlTbmFwc2hvdCAmJiB0IGluc3RhbmNlb2YgUXVlcnlTbmFwc2hvdCAmJiAoZS5fZmlyZXN0b3JlID09PSB0Ll9maXJlc3RvcmUgJiYgcXVlcnlFcXVhbChlLnF1ZXJ5LCB0LnF1ZXJ5KSAmJiBlLm1ldGFkYXRhLmlzRXF1YWwodC5tZXRhZGF0YSkgJiYgZS5fc25hcHNob3QuaXNFcXVhbCh0Ll9zbmFwc2hvdCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIE5vdGU6IGBnZXREb2MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieSB3YWl0aW5nXG4gKiBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWYgeW91IGFyZVxuICogb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLCBpbnZva2VcbiAqIHtAbGluayBnZXREb2NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdG8gZmV0Y2guXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBnZXREb2MoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRWaWFTbmFwc2hvdExpc3RlbmVyKGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIGUuX2tleSkudGhlbigobiA9PiBfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QodCwgZSwgbikpKTtcbn1cblxuY2xhc3MgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyIGV4dGVuZHMgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IGU7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyhlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQnl0ZXMoZSk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkoZSwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBkb2N1bWVudCBpcyBub3QgY3VycmVudGx5IGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGdldERvY0Zyb21DYWNoZShlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUobiwgZS5fa2V5KS50aGVuKChuID0+IG5ldyBEb2N1bWVudFNuYXBzaG90KHQsIHIsIGUuX2tleSwgbiwgbmV3IFNuYXBzaG90TWV0YWRhdGEobnVsbCAhPT0gbiAmJiBuLmhhc0xvY2FsTXV0YXRpb25zLCBcbiAgICAvKiBmcm9tQ2FjaGU9ICovICEwKSwgZS5jb252ZXJ0ZXIpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIHRoZSBzZXJ2ZXIuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBnZXREb2NGcm9tU2VydmVyKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRG9jdW1lbnRSZWZlcmVuY2UpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50VmlhU25hcHNob3RMaXN0ZW5lcihlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCBlLl9rZXksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QodCwgZSwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAuXG4gKlxuICogTm90ZTogYGdldERvY3MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieVxuICogd2FpdGluZyBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWZcbiAqIHlvdSBhcmUgb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLFxuICogaW52b2tlIHtAbGluayBnZXREb2NzRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jc0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBnZXREb2NzKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdChlLl9xdWVyeSksIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNWaWFTbmFwc2hvdExpc3RlbmVyKG4sIGUuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBRdWVyeVNuYXBzaG90KHQsIHIsIGUsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVtcHR5IHJlc3VsdCBzZXQgaWYgbm8gZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBxdWVyeSBhcmUgY3VycmVudGx5XG4gKiBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGdldERvY3NGcm9tQ2FjaGUoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBRdWVyeSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBuID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodCk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZShuLCBlLl9xdWVyeSkudGhlbigobiA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0LCByLCBlLCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIHRoZVxuICogc2VydmVyLiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGdldERvY3NGcm9tU2VydmVyKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lcihuLCBlLl9xdWVyeSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IG5ldyBRdWVyeVNuYXBzaG90KHQsIHIsIGUsIG4pKSk7XG59XG5cbmZ1bmN0aW9uIHNldERvYyhlLCB0LCBuKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIGkgPSBfX1BSSVZBVEVfYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKGUuY29udmVydGVyLCB0LCBuKTtcbiAgICByZXR1cm4gZXhlY3V0ZVdyaXRlKHIsIFsgX19QUklWQVRFX3BhcnNlU2V0RGF0YShfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIociksIFwic2V0RG9jXCIsIGUuX2tleSwgaSwgbnVsbCAhPT0gZS5jb252ZXJ0ZXIsIG4pLnRvTXV0YXRpb24oZS5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSBdKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRG9jKGUsIHQsIG4sIC4uLnIpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRG9jdW1lbnRSZWZlcmVuY2UpO1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgcyA9IF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihpKTtcbiAgICBsZXQgbztcbiAgICBvID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKFxuICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpIHx8IHQgaW5zdGFuY2VvZiBGaWVsZFBhdGggPyBfX1BSSVZBVEVfcGFyc2VVcGRhdGVWYXJhcmdzKHMsIFwidXBkYXRlRG9jXCIsIGUuX2tleSwgdCwgbiwgcikgOiBfX1BSSVZBVEVfcGFyc2VVcGRhdGVEYXRhKHMsIFwidXBkYXRlRG9jXCIsIGUuX2tleSwgdCk7XG4gICAgcmV0dXJuIGV4ZWN1dGVXcml0ZShpLCBbIG8udG9NdXRhdGlvbihlLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHMoITApKSBdKTtcbn1cblxuLyoqXG4gKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgc3BlY2lmaWVkIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBkZWxldGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBkZWxldGVkIGZyb20gdGhlIGJhY2tlbmQgKG5vdGUgdGhhdCBpdCB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBkZWxldGVEb2MoZSkge1xuICAgIHJldHVybiBleGVjdXRlV3JpdGUoX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIFsgbmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihlLl9rZXksIFByZWNvbmRpdGlvbi5ub25lKCkpIF0pO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBkb2N1bWVudCB0byBzcGVjaWZpZWQgYENvbGxlY3Rpb25SZWZlcmVuY2VgIHdpdGggdGhlIGdpdmVuIGRhdGEsXG4gKiBhc3NpZ25pbmcgaXQgYSBkb2N1bWVudCBJRCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgY29sbGVjdGlvbiB0byBhZGQgdGhpcyBkb2N1bWVudCB0by5cbiAqIEBwYXJhbSBkYXRhIC0gQW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRhdGEgZm9yIHRoZSBuZXcgZG9jdW1lbnQuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50UmVmZXJlbmNlYCBwb2ludGluZyB0byB0aGVcbiAqIG5ld2x5IGNyZWF0ZWQgZG9jdW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gd3JpdHRlbiB0byB0aGUgYmFja2VuZCAoTm90ZSB0aGF0IGl0XG4gKiB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBhZGREb2MoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgciA9IGRvYyhlKSwgaSA9IF9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoZS5jb252ZXJ0ZXIsIHQpO1xuICAgIHJldHVybiBleGVjdXRlV3JpdGUobiwgWyBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlLmZpcmVzdG9yZSksIFwiYWRkRG9jXCIsIHIuX2tleSwgaSwgbnVsbCAhPT0gZS5jb252ZXJ0ZXIsIHt9KS50b011dGF0aW9uKHIuX2tleSwgUHJlY29uZGl0aW9uLmV4aXN0cyghMSkpIF0pLnRoZW4oKCgpID0+IHIpKTtcbn1cblxuZnVuY3Rpb24gb25TbmFwc2hvdChlLCAuLi50KSB7XG4gICAgdmFyIG4sIHIsIGk7XG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKTtcbiAgICBsZXQgcyA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITFcbiAgICB9LCBvID0gMDtcbiAgICBcIm9iamVjdFwiICE9IHR5cGVvZiB0W29dIHx8IF9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlcih0W29dKSB8fCAocyA9IHRbb10sIG8rKyk7XG4gICAgY29uc3QgXyA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogcy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzXG4gICAgfTtcbiAgICBpZiAoX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKHRbb10pKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0W29dO1xuICAgICAgICB0W29dID0gbnVsbCA9PT0gKG4gPSBlLm5leHQpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uYmluZChlKSwgdFtvICsgMV0gPSBudWxsID09PSAociA9IGUuZXJyb3IpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuYmluZChlKSwgXG4gICAgICAgIHRbbyArIDJdID0gbnVsbCA9PT0gKGkgPSBlLmNvbXBsZXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmJpbmQoZSk7XG4gICAgfVxuICAgIGxldCBhLCB1LCBjO1xuICAgIGlmIChlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpIHUgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgXG4gICAgYyA9IF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoZS5fa2V5LnBhdGgpLCBhID0ge1xuICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgIHRbb10gJiYgdFtvXShfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QodSwgZSwgbikpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogdFtvICsgMV0sXG4gICAgICAgIGNvbXBsZXRlOiB0W28gKyAyXVxuICAgIH07IGVsc2Uge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgICAgICB1ID0gX19QUklWQVRFX2Nhc3Qobi5maXJlc3RvcmUsIEZpcmVzdG9yZSksIGMgPSBuLl9xdWVyeTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodSk7XG4gICAgICAgIGEgPSB7XG4gICAgICAgICAgICBuZXh0OiBlID0+IHtcbiAgICAgICAgICAgICAgICB0W29dICYmIHRbb10obmV3IFF1ZXJ5U25hcHNob3QodSwgciwgbiwgZSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0W28gKyAxXSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiB0W28gKyAyXVxuICAgICAgICB9LCBfX1BSSVZBVEVfdmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdChlLl9xdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50TGlzdGVuKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfQXN5bmNPYnNlcnZlcihyKSwgcyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcih0LCBpLCBuKTtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuKGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIHMpKSksIFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpLkxhKCksIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oYXdhaXQgX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSwgcykpKTtcbiAgICAgICAgfTtcbiAgICB9KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodSksIGMsIF8sIGEpO1xufVxuXG5mdW5jdGlvbiBvblNuYXBzaG90c0luU3luYyhlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRBZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSwgX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKHQpID8gdCA6IHtcbiAgICAgICAgbmV4dDogdFxuICAgIH0pO1xufVxuXG4vKipcbiAqIExvY2FsbHkgd3JpdGVzIGBtdXRhdGlvbnNgIG9uIHRoZSBhc3luYyBxdWV1ZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGV4ZWN1dGVXcml0ZShlLCB0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRXcml0ZShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IF9fUFJJVkFURV9zeW5jRW5naW5lV3JpdGUoYXdhaXQgX19QUklWQVRFX2dldFN5bmNFbmdpbmUoZSksIHQsIG4pKSksIFxuICAgICAgICBuLnByb21pc2U7XG4gICAgfShlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpLCB0KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHtAbGluayBWaWV3U25hcHNob3R9IHRoYXQgY29udGFpbnMgdGhlIHNpbmdsZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHJlZmBcbiAqIHRvIGEge0BsaW5rIERvY3VtZW50U25hcHNob3R9LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0VG9Eb2NTbmFwc2hvdChlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG4uZG9jcy5nZXQodC5fa2V5KSwgaSA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIoZSk7XG4gICAgcmV0dXJuIG5ldyBEb2N1bWVudFNuYXBzaG90KGUsIGksIHQuX2tleSwgciwgbmV3IFNuYXBzaG90TWV0YWRhdGEobi5oYXNQZW5kaW5nV3JpdGVzLCBuLmZyb21DYWNoZSksIHQuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiB0aGUgZ2l2ZW4gcXVlcnksXG4gKiB3aXRob3V0IGFjdHVhbGx5IGRvd25sb2FkaW5nIHRoZSBkb2N1bWVudHMuXG4gKlxuICogVXNpbmcgdGhpcyBmdW5jdGlvbiB0byBjb3VudCB0aGUgZG9jdW1lbnRzIGlzIGVmZmljaWVudCBiZWNhdXNlIG9ubHkgdGhlXG4gKiBmaW5hbCBjb3VudCwgbm90IHRoZSBkb2N1bWVudHMnIGRhdGEsIGlzIGRvd25sb2FkZWQuIFRoaXMgZnVuY3Rpb24gY2FuIGV2ZW5cbiAqIGNvdW50IHRoZSBkb2N1bWVudHMgaWYgdGhlIHJlc3VsdCBzZXQgd291bGQgYmUgcHJvaGliaXRpdmVseSBsYXJnZSB0b1xuICogZG93bmxvYWQgZW50aXJlbHkgKGUuZy4gdGhvdXNhbmRzIG9mIGRvY3VtZW50cykuXG4gKlxuICogVGhlIHJlc3VsdCByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgaXMgcHJlc2VudGVkLCB1bmFsdGVyZWQsIHdpdGhvdXRcbiAqIGNvbnNpZGVyaW5nIGFueSBsb2NhbCBzdGF0ZS4gVGhhdCBpcywgZG9jdW1lbnRzIGluIHRoZSBsb2NhbCBjYWNoZSBhcmUgbm90XG4gKiB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24sIG5laXRoZXIgYXJlIGxvY2FsIG1vZGlmaWNhdGlvbnMgbm90IHlldFxuICogc3luY2hyb25pemVkIHdpdGggdGhlIHNlcnZlci4gUHJldmlvdXNseS1kb3dubG9hZGVkIHJlc3VsdHMsIGlmIGFueSwgYXJlIG5vdFxuICogdXNlZDogZXZlcnkgcmVxdWVzdCB1c2luZyB0aGlzIHNvdXJjZSBuZWNlc3NhcmlseSBpbnZvbHZlcyBhIHJvdW5kIHRyaXAgdG9cbiAqIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHdob3NlIHJlc3VsdCBzZXQgc2l6ZSB0byBjYWxjdWxhdGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIGNvdW50OyB0aGUgY291bnQgY2FuIGJlXG4gKiByZXRyaWV2ZWQgZnJvbSBgc25hcHNob3QuZGF0YSgpLmNvdW50YCwgd2hlcmUgYHNuYXBzaG90YCBpcyB0aGVcbiAqIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCB0byB3aGljaCB0aGUgcmV0dXJuZWQgUHJvbWlzZSByZXNvbHZlcy5cbiAqLyBmdW5jdGlvbiBnZXRDb3VudEZyb21TZXJ2ZXIoZSkge1xuICAgIHJldHVybiBnZXRBZ2dyZWdhdGVGcm9tU2VydmVyKGUsIHtcbiAgICAgICAgY291bnQ6IGNvdW50KClcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcGVjaWZpZWQgYWdncmVnYXRpb25zIG92ZXIgdGhlIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0XG4gKiBzZXQgb2YgdGhlIGdpdmVuIHF1ZXJ5LCB3aXRob3V0IGFjdHVhbGx5IGRvd25sb2FkaW5nIHRoZSBkb2N1bWVudHMuXG4gKlxuICogVXNpbmcgdGhpcyBmdW5jdGlvbiB0byBwZXJmb3JtIGFnZ3JlZ2F0aW9ucyBpcyBlZmZpY2llbnQgYmVjYXVzZSBvbmx5IHRoZVxuICogZmluYWwgYWdncmVnYXRpb24gdmFsdWVzLCBub3QgdGhlIGRvY3VtZW50cycgZGF0YSwgaXMgZG93bmxvYWRlZC4gVGhpc1xuICogZnVuY3Rpb24gY2FuIGV2ZW4gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgb2YgdGhlIGRvY3VtZW50cyBpZiB0aGUgcmVzdWx0IHNldFxuICogd291bGQgYmUgcHJvaGliaXRpdmVseSBsYXJnZSB0byBkb3dubG9hZCBlbnRpcmVseSAoZS5nLiB0aG91c2FuZHMgb2YgZG9jdW1lbnRzKS5cbiAqXG4gKiBUaGUgcmVzdWx0IHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlciBpcyBwcmVzZW50ZWQsIHVuYWx0ZXJlZCwgd2l0aG91dFxuICogY29uc2lkZXJpbmcgYW55IGxvY2FsIHN0YXRlLiBUaGF0IGlzLCBkb2N1bWVudHMgaW4gdGhlIGxvY2FsIGNhY2hlIGFyZSBub3RcbiAqIHRha2VuIGludG8gY29uc2lkZXJhdGlvbiwgbmVpdGhlciBhcmUgbG9jYWwgbW9kaWZpY2F0aW9ucyBub3QgeWV0XG4gKiBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc2VydmVyLiBQcmV2aW91c2x5LWRvd25sb2FkZWQgcmVzdWx0cywgaWYgYW55LCBhcmUgbm90XG4gKiB1c2VkOiBldmVyeSByZXF1ZXN0IHVzaW5nIHRoaXMgc291cmNlIG5lY2Vzc2FyaWx5IGludm9sdmVzIGEgcm91bmQgdHJpcCB0b1xuICogdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHdob3NlIHJlc3VsdCBzZXQgdG8gYWdncmVnYXRlIG92ZXIuXG4gKiBAcGFyYW0gYWdncmVnYXRlU3BlYyBBbiBgQWdncmVnYXRlU3BlY2Agb2JqZWN0IHRoYXQgc3BlY2lmaWVzIHRoZSBhZ2dyZWdhdGVzXG4gKiB0byBwZXJmb3JtIG92ZXIgdGhlIHJlc3VsdCBzZXQuIFRoZSBBZ2dyZWdhdGVTcGVjIHNwZWNpZmllcyBhbGlhc2VzIGZvciBlYWNoXG4gKiBhZ2dyZWdhdGUsIHdoaWNoIGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBhZ2dyZWdhdGUgcmVzdWx0LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGFnZ3JlZ2F0ZVNuYXBzaG90ID0gYXdhaXQgZ2V0QWdncmVnYXRlRnJvbVNlcnZlcihxdWVyeSwge1xuICogICBjb3VudE9mRG9jczogY291bnQoKSxcbiAqICAgdG90YWxIb3Vyczogc3VtKCdob3VycycpLFxuICogICBhdmVyYWdlU2NvcmU6IGF2ZXJhZ2UoJ3Njb3JlJylcbiAqIH0pO1xuICpcbiAqIGNvbnN0IGNvdW50T2ZEb2NzOiBudW1iZXIgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkuY291bnRPZkRvY3M7XG4gKiBjb25zdCB0b3RhbEhvdXJzOiBudW1iZXIgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkudG90YWxIb3VycztcbiAqIGNvbnN0IGF2ZXJhZ2VTY29yZTogbnVtYmVyIHwgbnVsbCA9IGFnZ3JlZ2F0ZVNuYXBzaG90LmRhdGEoKS5hdmVyYWdlU2NvcmU7XG4gKiBgYGBcbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBnZXRBZ2dyZWdhdGVGcm9tU2VydmVyKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIHIgPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKG4pLCBpID0gZnVuY3Rpb24gX19QUklWQVRFX21hcFRvQXJyYXkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIGZvciAoY29uc3QgciBpbiBlKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgcikgJiYgbi5wdXNoKHQoZVtyXSwgciwgZSkpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9KHQsICgoZSwgdCkgPT4gbmV3IF9fUFJJVkFURV9BZ2dyZWdhdGVJbXBsKHQsIGUuX2FnZ3JlZ2F0ZVR5cGUsIGUuX2ludGVybmFsRmllbGRQYXRoKSkpO1xuICAgIC8vIFJ1biB0aGUgYWdncmVnYXRpb24gYW5kIGNvbnZlcnQgdGhlIHJlc3VsdHNcbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFJ1bkFnZ3JlZ2F0ZVF1ZXJ5KGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyAoc3VtL2F2Zykgc2hvdWxkIHdlIHVwZGF0ZSB0aGlzIHRvIHVzZSB0aGUgZXZlbnQgbWFuYWdlcj9cbiAgICAgICAgICAgIC8vIEltcGxlbWVudCBhbmQgY2FsbCBleGVjdXRlQWdncmVnYXRlUXVlcnlWaWFTbmFwc2hvdExpc3RlbmVyLCBzaW1pbGFyXG4gICAgICAgICAgICAvLyB0byB0aGUgaW1wbGVtZW50YXRpb24gaW4gZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lclxuICAgICAgICAgICAgLy8gYWJvdmVcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzI3NzYyODM4NCk6IGNoZWNrIGBjYW5Vc2VOZXR3b3JrKClgIGFuZCBoYW5kbGUgbXVsdGktdGFiLlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBhd2FpdCBfX1BSSVZBVEVfZ2V0RGF0YXN0b3JlKGUpO1xuICAgICAgICAgICAgICAgIHIucmVzb2x2ZShfX1BSSVZBVEVfaW52b2tlUnVuQWdncmVnYXRpb25RdWVyeVJwYyhpLCB0LCBuKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgci5yZWplY3QoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgci5wcm9taXNlO1xuICAgIH0ociwgZS5fcXVlcnksIGkpLnRoZW4oKHQgPT4gXG4gICAgLyoqXG4gKiBDb252ZXJ0cyB0aGUgY29yZSBhZ2dyZWdyYXRpb24gcmVzdWx0IHRvIGFuIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YFxuICogdGhhdCBjYW4gYmUgcmV0dXJuZWQgdG8gdGhlIGNvbnN1bWVyLlxuICogQHBhcmFtIHF1ZXJ5XG4gKiBAcGFyYW0gYWdncmVnYXRlUmVzdWx0IENvcmUgYWdncmVnYXRpb24gcmVzdWx0XG4gKiBAaW50ZXJuYWxcbiAqL1xuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0VG9BZ2dyZWdhdGVRdWVyeVNuYXBzaG90KGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIoZSk7XG4gICAgICAgIHJldHVybiBuZXcgQWdncmVnYXRlUXVlcnlTbmFwc2hvdCh0LCByLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4sIGUsIHQpKSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlMb2NhbENhY2hlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeVwiLCB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlciwgXG4gICAgICAgIChudWxsID09IGUgPyB2b2lkIDAgOiBlLmdhcmJhZ2VDb2xsZWN0b3IpID8gdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gZS5nYXJiYWdlQ29sbGVjdG9yLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgOiB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9QZXJzaXN0ZW50TG9jYWxDYWNoZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIHRoaXMua2luZCA9IFwicGVyc2lzdGVudFwiLCAobnVsbCA9PSBlID8gdm9pZCAwIDogZS50YWJNYW5hZ2VyKSA/IChlLnRhYk1hbmFnZXIuX2luaXRpYWxpemUoZSksIFxuICAgICAgICB0ID0gZS50YWJNYW5hZ2VyKSA6ICh0ID0gcGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXIodm9pZCAwKSwgdC5faW5pdGlhbGl6ZShlKSksIFxuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IHQuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSB0Ll9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUVhZ2VyR2FiYWdlQ29sbGVjdG9ySW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwibWVtb3J5RWFnZXJcIiwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5THJ1R2FiYWdlQ29sbGVjdG9ySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeUxydVwiLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgX19QUklWQVRFX0xydUdjTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yYC4gVGhpcyBpcyBhbHNvIHRoZVxuICogZGVmYXVsdCBnYXJiYWdlIGNvbGxlY3RvciB1bmxlc3MgaXQgaXMgZXhwbGljaXRseSBzcGVjaWZpZWQgb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIG1lbW9yeUVhZ2VyR2FyYmFnZUNvbGxlY3RvcigpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlFYWdlckdhYmFnZUNvbGxlY3RvckltcGw7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5THJ1R2FyYmFnZUNvbGxlY3RvcmAuXG4gKlxuICogQSB0YXJnZXQgc2l6ZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHBhcnQgb2YgdGhlIHNldHRpbmcgcGFyYW1ldGVyLiBUaGVcbiAqIGNvbGxlY3RvciB3aWxsIHN0YXJ0IGRlbGV0aW5nIGRvY3VtZW50cyBvbmNlIHRoZSBjYWNoZSBzaXplIGV4Y2VlZHNcbiAqIHRoZSBnaXZlbiBzaXplLiBUaGUgZGVmYXVsdCBjYWNoZSBzaXplIGlzIDQwTUIgKDQwICogMTAyNCAqIDEwMjQgYnl0ZXMpLlxuICovIGZ1bmN0aW9uIG1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3IoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUxydUdhYmFnZUNvbGxlY3RvckltcGwobnVsbCA9PSBlID8gdm9pZCAwIDogZS5jYWNoZVNpemVCeXRlcyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5TG9jYWxDYWNoZWAuIFRoZSBpbnN0YW5jZSBjYW4gYmUgc2V0IHRvXG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIHRlbGwgdGhlIFNESyB3aGljaCBjYWNoZSBsYXllciB0byB1c2UuXG4gKi8gZnVuY3Rpb24gbWVtb3J5TG9jYWxDYWNoZShlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5TG9jYWxDYWNoZUltcGwoZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudExvY2FsQ2FjaGVgLiBUaGUgaW5zdGFuY2UgY2FuIGJlIHNldCB0b1xuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byB0ZWxsIHRoZSBTREsgd2hpY2ggY2FjaGUgbGF5ZXIgdG8gdXNlLlxuICpcbiAqIFBlcnNpc3RlbnQgY2FjaGUgY2Fubm90IGJlIHVzZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICovIGZ1bmN0aW9uIHBlcnNpc3RlbnRMb2NhbENhY2hlKGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QZXJzaXN0ZW50TG9jYWxDYWNoZUltcGwoZSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9TaW5nbGVUYWJNYW5hZ2VySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmZvcmNlT3duZXJzaGlwID0gZSwgdGhpcy5raW5kID0gXCJwZXJzaXN0ZW50U2luZ2xlVGFiXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgX2luaXRpYWxpemUoZSkge1xuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlciwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIodGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuY2FjaGVTaXplQnl0ZXMsIHRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX011bHRpVGFiTWFuYWdlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIlBlcnNpc3RlbnRNdWx0aXBsZVRhYlwiO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIF9pbml0aWFsaXplKGUpIHtcbiAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgT25saW5lQ29tcG9uZW50UHJvdmlkZXIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIodGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuY2FjaGVTaXplQnl0ZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlcmAuXG4gKlxuICogQHBhcmFtIHNldHRpbmdzIENvbmZpZ3VyZXMgdGhlIGNyZWF0ZWQgdGFiIG1hbmFnZXIuXG4gKi8gZnVuY3Rpb24gcGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXIoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpbmdsZVRhYk1hbmFnZXJJbXBsKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXJgLlxuICovIGZ1bmN0aW9uIHBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJNYW5hZ2VySW1wbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgeWUgPSB7XG4gICAgbWF4QXR0ZW1wdHM6IDVcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JpdGUgYmF0Y2gsIHVzZWQgdG8gcGVyZm9ybSBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gKlxuICogQSBgV3JpdGVCYXRjaGAgb2JqZWN0IGNhbiBiZSBhY3F1aXJlZCBieSBjYWxsaW5nIHtAbGluayB3cml0ZUJhdGNofS4gSXRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyB3cml0ZXMgdG8gdGhlIHdyaXRlIGJhdGNoLiBOb25lIG9mIHRoZSB3cml0ZXNcbiAqIHdpbGwgYmUgY29tbWl0dGVkIChvciB2aXNpYmxlIGxvY2FsbHkpIHVudGlsIHtAbGluayBXcml0ZUJhdGNoLmNvbW1pdH0gaXNcbiAqIGNhbGxlZC5cbiAqL1xuY2xhc3MgV3JpdGVCYXRjaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX2NvbW1pdEhhbmRsZXIgPSB0LCB0aGlzLl9tdXRhdGlvbnMgPSBbXSwgdGhpcy5fY29tbWl0dGVkID0gITEsIFxuICAgICAgICB0aGlzLl9kYXRhUmVhZGVyID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpO1xuICAgIH1cbiAgICBzZXQoZSwgdCwgbikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihyLmNvbnZlcnRlciwgdCwgbiksIHMgPSBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC5zZXRcIiwgci5fa2V5LCBpLCBudWxsICE9PSByLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMucHVzaChzLnRvTXV0YXRpb24oci5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZShlLCB0LCBuLCAuLi5yKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIHMgPSBcInN0cmluZ1wiID09IHR5cGVvZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgfHwgdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3ModGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIHQsIG4sIHIpIDogX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgdCksIFxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMucHVzaChzLnRvTXV0YXRpb24oaS5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFdyaXRlQmF0Y2hgIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24odC5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSksIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoaXMgd3JpdGUgYmF0Y2ggYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHRoZXNlIHdyaXRlcyB3aWxsIG9ubHkgYmUgcmVmbGVjdGVkIGluIGRvY3VtZW50IHJlYWRzIHRoYXRcbiAgICAgKiBvY2N1ciBhZnRlciB0aGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcy4gSWYgdGhlIGNsaWVudCBpcyBvZmZsaW5lLCB0aGVcbiAgICAgKiB3cml0ZSBmYWlscy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gc2VlIGxvY2FsIG1vZGlmaWNhdGlvbnMgb3IgYnVmZmVyIHdyaXRlc1xuICAgICAqIHVudGlsIHRoZSBjbGllbnQgaXMgb25saW5lLCB1c2UgdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhlIGJhdGNoIGhhdmUgYmVlblxuICAgICAqIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIGFzIGFuIGF0b21pYyB1bml0IChub3RlIHRoYXQgaXQgd29uJ3RcbiAgICAgKiByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAgICAgKi8gICAgY29tbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCksIHRoaXMuX2NvbW1pdHRlZCA9ICEwLCB0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuX2NvbW1pdEhhbmRsZXIodGhpcy5fbXV0YXRpb25zKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBfdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpIGhhcyBiZWVuIGNhbGxlZC5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdCkge1xuICAgIGlmICgoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkuZmlyZXN0b3JlICE9PSB0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuY2xhc3MgVHJhbnNhY3Rpb24gZXh0ZW5kcyBjbGFzcyBUcmFuc2FjdGlvbiQxIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gZSwgdGhpcy5fdHJhbnNhY3Rpb24gPSB0LCB0aGlzLl9kYXRhUmVhZGVyID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IF9fUFJJVkFURV9MaXRlVXNlckRhdGFXcml0ZXIodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmxvb2t1cChbIHQuX2tleSBdKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIGlmICghZSB8fCAxICE9PSBlLmxlbmd0aCkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBlWzBdO1xuICAgICAgICAgICAgaWYgKHIuaXNGb3VuZERvY3VtZW50KCkpIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZSwgbiwgci5rZXksIHIsIHQuY29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChyLmlzTm9Eb2N1bWVudCgpKSByZXR1cm4gbmV3IERvY3VtZW50U25hcHNob3QkMSh0aGlzLl9maXJlc3RvcmUsIG4sIHQuX2tleSwgbnVsbCwgdC5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IF9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoci5jb252ZXJ0ZXIsIHQsIG4pLCBzID0gX19QUklWQVRFX3BhcnNlU2V0RGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnNldFwiLCByLl9rZXksIGksIG51bGwgIT09IHIuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLnNldChyLl9rZXksIHMpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUoZSwgdCwgbiwgLi4ucikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIHMgPSBcInN0cmluZ1wiID09IHR5cGVvZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgfHwgdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3ModGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCB0LCBuLCByKSA6IF9fUFJJVkFURV9wYXJzZVVwZGF0ZURhdGEodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCB0KSwgXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShpLl9rZXksIHMpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUodC5fa2V5KSwgdGhpcztcbiAgICB9XG59IHtcbiAgICAvLyBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIHNhbWUgbG9naWMgYXMgdGhlIFRyYW5zYWN0aW9uIEFQSSBpbiB0aGUgTGl0ZSBTREtcbiAgICAvLyBidXQgaXMgc3ViY2xhc3NlZCBpbiBvcmRlciB0byByZXR1cm4gaXRzIG93biBEb2N1bWVudFNuYXBzaG90IHR5cGVzLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCB0KSwgdGhpcy5fZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldChlKS50aGVuKChlID0+IG5ldyBEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgbiwgdC5fa2V5LCBlLl9kb2N1bWVudCwgbmV3IFNuYXBzaG90TWV0YWRhdGEoXG4gICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovICExLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSksIHQuY29udmVydGVyKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gYHVwZGF0ZUZ1bmN0aW9uYCBhbmQgdGhlbiBhdHRlbXB0cyB0byBjb21taXQgdGhlIGNoYW5nZXNcbiAqIGFwcGxpZWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvbi4gSWYgYW55IGRvY3VtZW50IHJlYWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogaGFzIGNoYW5nZWQsIENsb3VkIEZpcmVzdG9yZSByZXRyaWVzIHRoZSBgdXBkYXRlRnVuY3Rpb25gLiBJZiBpdCBmYWlscyB0b1xuICogY29tbWl0IGFmdGVyIDUgYXR0ZW1wdHMsIHRoZSB0cmFuc2FjdGlvbiBmYWlscy5cbiAqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUgdHJhbnNhY3Rpb24gaXMgNTAwLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgRmlyZXN0b3JlIGRhdGFiYXNlIHRvIHJ1biB0aGlzXG4gKiB0cmFuc2FjdGlvbiBhZ2FpbnN0LlxuICogQHBhcmFtIHVwZGF0ZUZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogY29udGV4dC5cbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIG1heGltdW0gbnVtYmVyIG9mIGF0dGVtcHRzIHRvXG4gKiBjb21taXQuXG4gKiBAcmV0dXJucyBJZiB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBvciB3YXMgZXhwbGljaXRseSBhYm9ydGVkXG4gKiAodGhlIGB1cGRhdGVGdW5jdGlvbmAgcmV0dXJuZWQgYSBmYWlsZWQgcHJvbWlzZSksIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZVxuICogYHVwZGF0ZUZ1bmN0aW9uIGBpcyByZXR1cm5lZCBoZXJlLiBPdGhlcndpc2UsIGlmIHRoZSB0cmFuc2FjdGlvbiBmYWlsZWQsIGFcbiAqIHJlamVjdGVkIHByb21pc2Ugd2l0aCB0aGUgY29ycmVzcG9uZGluZyBmYWlsdXJlIGVycm9yIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIHJ1blRyYW5zYWN0aW9uKGUsIHQsIG4pIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKTtcbiAgICBjb25zdCByID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB5ZSksIG4pO1xuICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVUcmFuc2FjdGlvbk9wdGlvbnMoZSkge1xuICAgICAgICBpZiAoZS5tYXhBdHRlbXB0cyA8IDEpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiTWF4IGF0dGVtcHRzIG11c3QgYmUgYXQgbGVhc3QgMVwiKTtcbiAgICB9KHIpO1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50VHJhbnNhY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gYXdhaXQgX19QUklWQVRFX2dldERhdGFzdG9yZShlKTtcbiAgICAgICAgICAgIG5ldyBfX1BSSVZBVEVfVHJhbnNhY3Rpb25SdW5uZXIoZS5hc3luY1F1ZXVlLCBpLCBuLCB0LCByKS5ydW4oKTtcbiAgICAgICAgfSkpLCByLnByb21pc2U7XG4gICAgfShlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpLCAobiA9PiB0KG5ldyBUcmFuc2FjdGlvbihlLCBuKSkpLCByKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIGZvciB1c2Ugd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IG9yXG4gKiB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IHdpdGggYHttZXJnZTogdHJ1ZX1gIHRvIG1hcmsgYSBmaWVsZCBmb3IgZGVsZXRpb24uXG4gKi8gZnVuY3Rpb24gZGVsZXRlRmllbGQoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfRGVsZXRlRmllbGRWYWx1ZUltcGwoXCJkZWxldGVGaWVsZFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0b1xuICogaW5jbHVkZSBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wIGluIHRoZSB3cml0dGVuIGRhdGEuXG4gKi8gZnVuY3Rpb24gc2VydmVyVGltZXN0YW1wKCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsKFwic2VydmVyVGltZXN0YW1wXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byB1bmlvbiB0aGUgZ2l2ZW4gZWxlbWVudHMgd2l0aCBhbnkgYXJyYXlcbiAqIHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gRWFjaCBzcGVjaWZpZWQgZWxlbWVudCB0aGF0IGRvZXNuJ3RcbiAqIGFscmVhZHkgZXhpc3QgaW4gdGhlIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVuZC4gSWYgdGhlIGZpZWxkIGJlaW5nXG4gKiBtb2RpZmllZCBpcyBub3QgYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gYXJyYXlcbiAqIGNvbnRhaW5pbmcgZXhhY3RseSB0aGUgc3BlY2lmaWVkIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byB1bmlvbiBpbnRvIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYC5cbiAqLyBmdW5jdGlvbiBhcnJheVVuaW9uKC4uLmUpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0FycmF5VW5pb25GaWVsZFZhbHVlSW1wbChcImFycmF5VW5pb25cIiwgZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayAoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIHVwZGF0ZURvYzoxfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gcmVtb3ZlIHRoZSBnaXZlbiBlbGVtZW50cyBmcm9tIGFueVxuICogYXJyYXkgdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBBbGwgaW5zdGFuY2VzIG9mIGVhY2ggZWxlbWVudFxuICogc3BlY2lmaWVkIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheS4gSWYgdGhlIGZpZWxkIGJlaW5nIG1vZGlmaWVkIGlzIG5vdFxuICogYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gZW1wdHkgYXJyYXkuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHJlbW92ZSBmcm9tIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIGFycmF5UmVtb3ZlKC4uLmUpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0FycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwoXCJhcnJheVJlbW92ZVwiLCBlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gaW5jcmVtZW50IHRoZSBmaWVsZCdzIGN1cnJlbnQgdmFsdWUgYnlcbiAqIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBJZiBlaXRoZXIgdGhlIG9wZXJhbmQgb3IgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgdXNlcyBmbG9hdGluZyBwb2ludFxuICogcHJlY2lzaW9uLCBhbGwgYXJpdGhtZXRpYyBmb2xsb3dzIElFRUUgNzU0IHNlbWFudGljcy4gSWYgYm90aCB2YWx1ZXMgYXJlXG4gKiBpbnRlZ2VycywgdmFsdWVzIG91dHNpZGUgb2YgSmF2YVNjcmlwdCdzIHNhZmUgbnVtYmVyIHJhbmdlXG4gKiAoYE51bWJlci5NSU5fU0FGRV9JTlRFR0VSYCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgKSBhcmUgYWxzbyBzdWJqZWN0IHRvXG4gKiBwcmVjaXNpb24gbG9zcy4gRnVydGhlcm1vcmUsIG9uY2UgcHJvY2Vzc2VkIGJ5IHRoZSBGaXJlc3RvcmUgYmFja2VuZCwgYWxsXG4gKiBpbnRlZ2VyIG9wZXJhdGlvbnMgYXJlIGNhcHBlZCBiZXR3ZWVuIC0yXjYzIGFuZCAyXjYzLTEuXG4gKlxuICogSWYgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgaXMgbm90IG9mIHR5cGUgYG51bWJlcmAsIG9yIGlmIHRoZSBmaWVsZCBkb2VzIG5vdFxuICogeWV0IGV4aXN0LCB0aGUgdHJhbnNmb3JtYXRpb24gc2V0cyB0aGUgZmllbGQgdG8gdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBuIC0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBieS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIGluY3JlbWVudChlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsKFwiaW5jcmVtZW50XCIsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgd3JpdGUgYmF0Y2gsIHVzZWQgZm9yIHBlcmZvcm1pbmcgbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlXG4gKiBhdG9taWMgb3BlcmF0aW9uLiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUge0BsaW5rIFdyaXRlQmF0Y2h9XG4gKiBpcyA1MDAuXG4gKlxuICogVW5saWtlIHRyYW5zYWN0aW9ucywgd3JpdGUgYmF0Y2hlcyBhcmUgcGVyc2lzdGVkIG9mZmxpbmUgYW5kIHRoZXJlZm9yZSBhcmVcbiAqIHByZWZlcmFibGUgd2hlbiB5b3UgZG9uJ3QgbmVlZCB0byBjb25kaXRpb24geW91ciB3cml0ZXMgb24gcmVhZCBkYXRhLlxuICpcbiAqIEByZXR1cm5zIEEge0BsaW5rIFdyaXRlQmF0Y2h9IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXRvbWljYWxseSBleGVjdXRlIG11bHRpcGxlXG4gKiB3cml0ZXMuXG4gKi8gZnVuY3Rpb24gd3JpdGVCYXRjaChlKSB7XG4gICAgcmV0dXJuIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpLCBuZXcgV3JpdGVCYXRjaChlLCAodCA9PiBleGVjdXRlV3JpdGUoZSwgdCkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gc2V0SW5kZXhDb25maWd1cmF0aW9uKGUsIHQpIHtcbiAgICB2YXIgbjtcbiAgICBjb25zdCByID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSk7XG4gICAgaWYgKCFyLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyIHx8IFwibWVtb3J5XCIgPT09IChudWxsID09PSAobiA9IHIuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uX29mZmxpbmVLaW5kKSkgXG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCByZXR1cm4gYW4gZXJyb3IgaWYgdGhlIHVzZXIgaGFzIG5vdCBlbmFibGVkXG4gICAgLy8gcGVyc2lzdGVuY2Ugc2luY2UgYGVuYWJsZUluZGV4ZWRkYlBlcnNpc3RlbmNlKClgIGNhbiBmYWlsIG9uIHRoZSBXZWIuXG4gICAgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKFwiQ2Fubm90IGVuYWJsZSBpbmRleGVzIHdoZW4gcGVyc2lzdGVuY2UgaXMgZGlzYWJsZWRcIiksIFxuICAgIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VJbmRleGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBmdW5jdGlvbiBfX1BSSVZBVEVfdHJ5UGFyc2VKc29uKGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gcGFyc2UgSlNPTjogXCIgKyAobnVsbCA9PSBlID8gdm9pZCAwIDogZS5tZXNzYWdlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZSkgOiBlLCBuID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQuaW5kZXhlcykpIGZvciAoY29uc3QgZSBvZiB0LmluZGV4ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdHJ5R2V0U3RyaW5nKGUsIFwiY29sbGVjdGlvbkdyb3VwXCIpLCByID0gW107XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlLmZpZWxkcykpIGZvciAoY29uc3QgdCBvZiBlLmZpZWxkcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhcInNldEluZGV4Q29uZmlndXJhdGlvblwiLCBfX1BSSVZBVEVfdHJ5R2V0U3RyaW5nKHQsIFwiZmllbGRQYXRoXCIpKTtcbiAgICAgICAgICAgICAgICBcIkNPTlRBSU5TXCIgPT09IHQuYXJyYXlDb25maWcgPyByLnB1c2gobmV3IEluZGV4U2VnbWVudChlLCAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLykpIDogXCJBU0NFTkRJTkdcIiA9PT0gdC5vcmRlciA/IHIucHVzaChuZXcgSW5kZXhTZWdtZW50KGUsIDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLykpIDogXCJERVNDRU5ESU5HXCIgPT09IHQub3JkZXIgJiYgci5wdXNoKG5ldyBJbmRleFNlZ21lbnQoZSwgMSAvKiBJbmRleEtpbmQuREVTQ0VORElORyAqLykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbi5wdXNoKG5ldyBGaWVsZEluZGV4KEZpZWxkSW5kZXguVU5LTk9XTl9JRCwgdCwgciwgSW5kZXhTdGF0ZS5lbXB0eSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfSh0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldEluZGV4Q29uZmlndXJhdGlvbihyLCBpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RyeUdldFN0cmluZyhlLCB0KSB7XG4gICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGVbdF0pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiTWlzc2luZyBzdHJpbmcgdmFsdWUgZm9yOiBcIiArIHQpO1xuICAgIHJldHVybiBlW3RdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXJgIGZvciBjb25maWd1cmluZyBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMgdXNlZFxuICogZm9yIGxvY2FsIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAqXG4gKiBUbyB1c2UsIGNhbGwgYGdldFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcigpYCB0byBnZXQgYW4gaW5zdGFuY2UuXG4gKi8gY2xhc3MgUGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5fY2xpZW50ID0gZSwgXG4gICAgICAgIC8qKiBBIHR5cGUgc3RyaW5nIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIlBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlclwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBQZXJzaXN0ZW50Q2FjaGUgSW5kZXggTWFuYWdlciB1c2VkIGJ5IHRoZSBnaXZlbiBgRmlyZXN0b3JlYFxuICogb2JqZWN0LlxuICpcbiAqIEByZXR1cm4gVGhlIGBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXJgIGluc3RhbmNlLCBvciBgbnVsbGAgaWYgbG9jYWxcbiAqIHBlcnNpc3RlbnQgc3RvcmFnZSBpcyBub3QgaW4gdXNlLlxuICovIGZ1bmN0aW9uIGdldFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcihlKSB7XG4gICAgdmFyIHQ7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSk7XG4gICAgY29uc3QgbiA9IHdlLmdldChlKTtcbiAgICBpZiAobikgcmV0dXJuIG47XG4gICAgY29uc3QgciA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSk7XG4gICAgaWYgKFwicGVyc2lzdGVudFwiICE9PSAobnVsbCA9PT0gKHQgPSByLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0Ll9vZmZsaW5lS2luZCkpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGkgPSBuZXcgUGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyKHIpO1xuICAgIHJldHVybiB3ZS5zZXQoZSwgaSksIGk7XG59XG5cbi8qKlxuICogRW5hYmxlcyB0aGUgU0RLIHRvIGNyZWF0ZSBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMgYXV0b21hdGljYWxseSBmb3IgbG9jYWxcbiAqIHF1ZXJ5IGV4ZWN1dGlvbiB3aGVuIHRoZSBTREsgYmVsaWV2ZXMgY2FjaGUgaW5kZXhlcyBjYW4gaGVscCBpbXByb3ZlXG4gKiBwZXJmb3JtYW5jZS5cbiAqXG4gKiBUaGlzIGZlYXR1cmUgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdC5cbiAqLyBmdW5jdGlvbiBlbmFibGVQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbihlKSB7XG4gICAgX19QUklWQVRFX3NldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLCAhMCk7XG59XG5cbi8qKlxuICogU3RvcHMgY3JlYXRpbmcgcGVyc2lzdGVudCBjYWNoZSBpbmRleGVzIGF1dG9tYXRpY2FsbHkgZm9yIGxvY2FsIHF1ZXJ5XG4gKiBleGVjdXRpb24uIFRoZSBpbmRleGVzIHdoaWNoIGhhdmUgYmVlbiBjcmVhdGVkIGJ5IGNhbGxpbmdcbiAqIGBlbmFibGVQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbigpYCBzdGlsbCB0YWtlIGVmZmVjdC5cbiAqLyBmdW5jdGlvbiBkaXNhYmxlUGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb24oZSkge1xuICAgIF9fUFJJVkFURV9zZXRQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbkVuYWJsZWQoZSwgITEpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcy5cbiAqXG4gKiBQbGVhc2Ugbm90ZSB0aGlzIGZ1bmN0aW9uIHdpbGwgYWxzbyBkZWxldGVzIGluZGV4ZXMgZ2VuZXJhdGVkIGJ5XG4gKiBgc2V0SW5kZXhDb25maWd1cmF0aW9uKClgLCB3aGljaCBpcyBkZXByZWNhdGVkLlxuICovIGZ1bmN0aW9uIGRlbGV0ZUFsbFBlcnNpc3RlbnRDYWNoZUluZGV4ZXMoZSkge1xuICAgIGUuX2NsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XG4gICAgX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudERlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlLl9jbGllbnQpLnRoZW4oKGUgPT4gX19QUklWQVRFX2xvZ0RlYnVnKFwiZGVsZXRpbmcgYWxsIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyBzdWNjZWVkZWRcIikpKS5jYXRjaCgoZSA9PiBfX1BSSVZBVEVfbG9nV2FybihcImRlbGV0aW5nIGFsbCBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMgZmFpbGVkXCIsIGUpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zZXRQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbkVuYWJsZWQoZSwgdCkge1xuICAgIGUuX2NsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XG4gICAgX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLl9jbGllbnQsIHQpLnRoZW4oKGUgPT4gX19QUklWQVRFX2xvZ0RlYnVnKGBzZXR0aW5nIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXggYXV0byBjcmVhdGlvbiBpc0VuYWJsZWQ9JHt0fSBzdWNjZWVkZWRgKSkpLmNhdGNoKChlID0+IF9fUFJJVkFURV9sb2dXYXJuKGBzZXR0aW5nIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXggYXV0byBjcmVhdGlvbiBpc0VuYWJsZWQ9JHt0fSBmYWlsZWRgLCBlKSkpO1xufVxuXG4vKipcbiAqIE1hcHMgYEZpcmVzdG9yZWAgaW5zdGFuY2VzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmdcbiAqIGBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXJgIGluc3RhbmNlcy5cbiAqXG4gKiBVc2UgYSBgV2Vha01hcGAgc28gdGhhdCB0aGUgbWFwcGluZyB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZHJvcHBlZCB3aGVuIHRoZVxuICogYEZpcmVzdG9yZWAgaW5zdGFuY2UgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuIFRoaXMgZW11bGF0ZXMgYSBwcml2YXRlIG1lbWJlclxuICogYXMgZGVzY3JpYmVkIGluIGh0dHBzOi8vZ29vLmdsZS80NTR5dnVnLlxuICovIGNvbnN0IHdlID0gbmV3IFdlYWtNYXA7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRlc3RpbmcgaG9va3MgZm9yIHVzZSBieSBGaXJlc3RvcmUncyBpbnRlZ3JhdGlvbiB0ZXN0IHN1aXRlIHRvIHJlYWNoIGludG8gdGhlXG4gKiBTREsgaW50ZXJuYWxzIHRvIHZhbGlkYXRlIGxvZ2ljIGFuZCBiZWhhdmlvciB0aGF0IGlzIG5vdCB2aXNpYmxlIGZyb20gdGhlXG4gKiBwdWJsaWMgQVBJIHN1cmZhY2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgVGVzdGluZ0hvb2tzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3Mgc2hvdWxkIG5vdCBiZSBjcmVhdGVkXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byBiZSBub3RpZmllZCB3aGVuIGFuIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hcbiAgICAgKiBvY2N1cnMgaW4gdGhlIFdhdGNoIGxpc3RlbiBzdHJlYW0uXG4gICAgICpcbiAgICAgKiBUaGUgcmVsYXRpdmUgb3JkZXIgaW4gd2hpY2ggY2FsbGJhY2tzIGFyZSBub3RpZmllZCBpcyB1bnNwZWNpZmllZDsgZG8gbm90XG4gICAgICogcmVseSBvbiBhbnkgcGFydGljdWxhciBvcmRlcmluZy4gSWYgYSBnaXZlbiBjYWxsYmFjayBpcyByZWdpc3RlcmVkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhlbiBpdCB3aWxsIGJlIG5vdGlmaWVkIG11bHRpcGxlIHRpbWVzLCBvbmNlIHBlciByZWdpc3RyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIHRvIGludm9rZSB1cG9uIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIHVucmVnaXN0ZXJzIHRoZSBnaXZlbiBjYWxsYmFjazsgb25seVxuICAgICAqIHRoZSBmaXJzdCBpbnZvY2F0aW9uIG9mIHRoZSByZXR1cm5lZCBmdW5jdGlvbiBkb2VzIGFueXRoaW5nOyBhbGwgc3Vic2VxdWVudFxuICAgICAqIGludm9jYXRpb25zIGRvIG5vdGhpbmcuXG4gICAgICovICAgIHN0YXRpYyBvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9UZXN0aW5nSG9va3NTcGlJbXBsLmluc3RhbmNlLm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2goZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBvZiBgVGVzdGluZ0hvb2tzU3BpYC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfVGVzdGluZ0hvb2tzU3BpSW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuRHUgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gU2UgfHwgKFNlID0gbmV3IF9fUFJJVkFURV9UZXN0aW5nSG9va3NTcGlJbXBsLCBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0VGVzdGluZ0hvb2tzU3BpKGUpIHtcbiAgICAgICAgICAgIGlmIChjZSkgdGhyb3cgbmV3IEVycm9yKFwiYSBUZXN0aW5nSG9va3NTcGkgaW5zdGFuY2UgaXMgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgICAgICBjZSA9IGU7XG4gICAgICAgIH0oU2UpKSwgU2U7XG4gICAgfVxuICAgIGl0KGUpIHtcbiAgICAgICAgdGhpcy5EdS5mb3JFYWNoKCh0ID0+IHQoZSkpKTtcbiAgICB9XG4gICAgb25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBTeW1ib2woKSwgbiA9IHRoaXMuRHU7XG4gICAgICAgIHJldHVybiBuLnNldCh0LCBlKSwgKCkgPT4gbi5kZWxldGUodCk7XG4gICAgfVxufVxuXG5sZXQgU2UgPSBudWxsO1xuXG4vKipcbiAqIENsb3VkIEZpcmVzdG9yZVxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovICFmdW5jdGlvbiBfX1BSSVZBVEVfcmVnaXN0ZXJGaXJlc3RvcmUoZSwgdCA9ICEwKSB7XG4gICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9zZXRTREtWZXJzaW9uKGUpIHtcbiAgICAgICAgUyA9IGU7XG4gICAgfShTREtfVkVSU0lPTiksIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiZmlyZXN0b3JlXCIsICgoZSwge2luc3RhbmNlSWRlbnRpZmllcjogbiwgb3B0aW9uczogcn0pID0+IHtcbiAgICAgICAgY29uc3QgaSA9IGUuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCksIHMgPSBuZXcgRmlyZXN0b3JlKG5ldyBfX1BSSVZBVEVfRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihlLmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiKSksIG5ldyBfX1BSSVZBVEVfRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXIoZS5nZXRQcm92aWRlcihcImFwcC1jaGVjay1pbnRlcm5hbFwiKSksIGZ1bmN0aW9uIF9fUFJJVkFURV9kYXRhYmFzZUlkRnJvbUFwcChlLCB0KSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYXBwbHkoZS5vcHRpb25zLCBbIFwicHJvamVjdElkXCIgXSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsICdcInByb2plY3RJZFwiIG5vdCBwcm92aWRlZCBpbiBmaXJlYmFzZS5pbml0aWFsaXplQXBwLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhYmFzZUlkKGUub3B0aW9ucy5wcm9qZWN0SWQsIHQpO1xuICAgICAgICB9KGksIG4pLCBpKTtcbiAgICAgICAgcmV0dXJuIHIgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHVzZUZldGNoU3RyZWFtczogdFxuICAgICAgICB9LCByKSwgcy5fc2V0U2V0dGluZ3MociksIHM7XG4gICAgfSksIFwiUFVCTElDXCIpLnNldE11bHRpcGxlSW5zdGFuY2VzKCEwKSksIHJlZ2lzdGVyVmVyc2lvbih3LCBcIjQuMi4wXCIsIGUpLCBcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxuICAgIHJlZ2lzdGVyVmVyc2lvbih3LCBcIjQuMi4wXCIsIFwiZXNtMjAxN1wiKTtcbn0oKTtcblxuZXhwb3J0IHsgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciwgQWdncmVnYXRlRmllbGQsIEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3QsIEJ5dGVzLCBmZSBhcyBDQUNIRV9TSVpFX1VOTElNSVRFRCwgQ29sbGVjdGlvblJlZmVyZW5jZSwgRG9jdW1lbnRSZWZlcmVuY2UsIERvY3VtZW50U25hcHNob3QsIEZpZWxkUGF0aCwgRmllbGRWYWx1ZSwgRmlyZXN0b3JlLCBGaXJlc3RvcmVFcnJvciwgR2VvUG9pbnQsIExvYWRCdW5kbGVUYXNrLCBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXIsIFF1ZXJ5LCBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQsIFF1ZXJ5Q29uc3RyYWludCwgUXVlcnlEb2N1bWVudFNuYXBzaG90LCBRdWVyeUVuZEF0Q29uc3RyYWludCwgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQsIFF1ZXJ5TGltaXRDb25zdHJhaW50LCBRdWVyeU9yZGVyQnlDb25zdHJhaW50LCBRdWVyeVNuYXBzaG90LCBRdWVyeVN0YXJ0QXRDb25zdHJhaW50LCBTbmFwc2hvdE1ldGFkYXRhLCBUaW1lc3RhbXAsIFRyYW5zYWN0aW9uLCBXcml0ZUJhdGNoLCBCeXRlU3RyaW5nIGFzIF9CeXRlU3RyaW5nLCBEYXRhYmFzZUlkIGFzIF9EYXRhYmFzZUlkLCBEb2N1bWVudEtleSBhcyBfRG9jdW1lbnRLZXksIF9fUFJJVkFURV9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciBhcyBfRW1wdHlBcHBDaGVja1Rva2VuUHJvdmlkZXIsIF9fUFJJVkFURV9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIGFzIF9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLCBGaWVsZFBhdGgkMSBhcyBfRmllbGRQYXRoLCBUZXN0aW5nSG9va3MgYXMgX1Rlc3RpbmdIb29rcywgX19QUklWQVRFX2Nhc3QgYXMgX2Nhc3QsIF9fUFJJVkFURV9kZWJ1Z0Fzc2VydCBhcyBfZGVidWdBc3NlcnQsIF9fUFJJVkFURV9pc0Jhc2U2NEF2YWlsYWJsZSBhcyBfaXNCYXNlNjRBdmFpbGFibGUsIF9fUFJJVkFURV9sb2dXYXJuIGFzIF9sb2dXYXJuLCBfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciBhcyBfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciwgYWRkRG9jLCBhZ2dyZWdhdGVGaWVsZEVxdWFsLCBhZ2dyZWdhdGVRdWVyeVNuYXBzaG90RXF1YWwsIGFuZCwgYXJyYXlSZW1vdmUsIGFycmF5VW5pb24sIGF2ZXJhZ2UsIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UsIGNvbGxlY3Rpb24sIGNvbGxlY3Rpb25Hcm91cCwgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yLCBjb3VudCwgZGVsZXRlQWxsUGVyc2lzdGVudENhY2hlSW5kZXhlcywgZGVsZXRlRG9jLCBkZWxldGVGaWVsZCwgZGlzYWJsZU5ldHdvcmssIGRpc2FibGVQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbiwgZG9jLCBkb2N1bWVudElkLCBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSwgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgZW5hYmxlTmV0d29yaywgZW5hYmxlUGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb24sIGVuZEF0LCBlbmRCZWZvcmUsIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQsIGV4ZWN1dGVXcml0ZSwgZ2V0QWdncmVnYXRlRnJvbVNlcnZlciwgZ2V0Q291bnRGcm9tU2VydmVyLCBnZXREb2MsIGdldERvY0Zyb21DYWNoZSwgZ2V0RG9jRnJvbVNlcnZlciwgZ2V0RG9jcywgZ2V0RG9jc0Zyb21DYWNoZSwgZ2V0RG9jc0Zyb21TZXJ2ZXIsIGdldEZpcmVzdG9yZSwgZ2V0UGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyLCBpbmNyZW1lbnQsIGluaXRpYWxpemVGaXJlc3RvcmUsIGxpbWl0LCBsaW1pdFRvTGFzdCwgbG9hZEJ1bmRsZSwgbWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yLCBtZW1vcnlMb2NhbENhY2hlLCBtZW1vcnlMcnVHYXJiYWdlQ29sbGVjdG9yLCBuYW1lZFF1ZXJ5LCBvblNuYXBzaG90LCBvblNuYXBzaG90c0luU3luYywgb3IsIG9yZGVyQnksIHBlcnNpc3RlbnRMb2NhbENhY2hlLCBwZXJzaXN0ZW50TXVsdGlwbGVUYWJNYW5hZ2VyLCBwZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlciwgcXVlcnksIHF1ZXJ5RXF1YWwsIHJlZkVxdWFsLCBydW5UcmFuc2FjdGlvbiwgc2VydmVyVGltZXN0YW1wLCBzZXREb2MsIHNldEluZGV4Q29uZmlndXJhdGlvbiwgc2V0TG9nTGV2ZWwsIHNuYXBzaG90RXF1YWwsIHN0YXJ0QWZ0ZXIsIHN0YXJ0QXQsIHN1bSwgdGVybWluYXRlLCB1cGRhdGVEb2MsIHdhaXRGb3JQZW5kaW5nV3JpdGVzLCB3aGVyZSwgd3JpdGVCYXRjaCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuZXhwb3J0ICogZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjEwLjQuMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcbmltcG9ydCB7IGdldEZpcmVzdG9yZSB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfVEVTVF9BUElfS0VZLFxuICBhdXRoRG9tYWluOiBcInRoZS1hZ2dyZWdhdG9yLXRlc3QuZmlyZWJhc2VhcHAuY29tXCIsXG4gIHByb2plY3RJZDogXCJ0aGUtYWdncmVnYXRvci10ZXN0XCIsXG4gIHN0b3JhZ2VCdWNrZXQ6IFwidGhlLWFnZ3JlZ2F0b3ItdGVzdC5hcHBzcG90LmNvbVwiLFxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCI5MzU1NzcxMDA5ODNcIixcbiAgYXBwSWQ6IFwiMTo5MzU1NzcxMDA5ODM6d2ViOjZhYmExZDM3NDFmNzczMDEwY2UzMzJcIixcbn07XG5cbmNvbnN0IHRlc3RBcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcbmNvbnN0IHRlc3REYiA9IGdldEZpcmVzdG9yZSh0ZXN0QXBwKTtcblxuZXhwb3J0IHsgdGVzdEFwcCwgdGVzdERiIH07XG4iLCJmdW5jdGlvbiByZW5kZXJJdGVtcyhxdWVyeVNuYXBzaG90KSB7XG4gIGNvbnN0IGl0ZW1Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIml0ZW1Db250YWluZXJcIik7XG4gIGl0ZW1Db250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSBkb2MuZGF0YSgpO1xuICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBpdGVtRWxlbWVudC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGgzPiR7aXRlbS50aXRsZX08L2gzPlxuICAgICAgICAgIDxwPkRhdGU6ICR7aXRlbS5kYXRlfTwvcD5cbiAgICAgICAgICA8cD4ke2l0ZW0uZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgIDxwPlNvdXJjZTogJHtpdGVtLnNvdXJjZX08L3A+XG4gICAgICAgICAgPGEgaHJlZj1cIiR7aXRlbS51cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+UmVhZCBtb3JlPC9hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGhyPlxuICAgICAgYDtcblxuICAgIGl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbUVsZW1lbnQpO1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVuZGVySXRlbXM7XG5cbi8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIHJlbmRlckl0ZW1zKTtcbiIsImltcG9ydCB7XG4gIGNvbGxlY3Rpb24sXG4gIGdldERvY3MsXG4gIGxpbWl0LFxuICBvcmRlckJ5LFxuICBxdWVyeSxcbiAgc3RhcnRBZnRlcixcbiAgd2hlcmUsXG59IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IHRlc3REYiB9IGZyb20gXCIuL2ZpcmViYXNlLXRlc3RcIjtcbmltcG9ydCByZW5kZXJJdGVtcyBmcm9tIFwiLi9yZW5kZXJcIjtcblxuY29uc3QgZmlyZWJhc2UgPSAoKCkgPT4ge1xuICBmdW5jdGlvbiBnZXRMYXN0VmlzaWJsZShxdWVyeVNuYXBzaG90KSB7XG4gICAgaWYgKHF1ZXJ5U25hcHNob3QpIHJldHVybiBxdWVyeVNuYXBzaG90LmRvY3NbcXVlcnlTbmFwc2hvdC5kb2NzLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SG9tZVF1ZXJ5KGRhdGFiYXNlLCBxdWVyeVNuYXBzaG90ID0gbnVsbCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25SZWYgPSBjb2xsZWN0aW9uKGRhdGFiYXNlLCBcImFsbC1pdGVtc1wiKTtcbiAgICBjb25zdCBsYXN0VmlzaWJsZSA9IGdldExhc3RWaXNpYmxlKHF1ZXJ5U25hcHNob3QpO1xuXG4gICAgbGV0IHEgPSBxdWVyeShjb2xsZWN0aW9uUmVmLCBvcmRlckJ5KFwidGltZXN0YW1wXCIsIFwiZGVzY1wiKSwgbGltaXQoMTApKTtcblxuICAgIGlmIChsYXN0VmlzaWJsZSkge1xuICAgICAgcSA9IHF1ZXJ5KFxuICAgICAgICBjb2xsZWN0aW9uUmVmLFxuICAgICAgICBvcmRlckJ5KFwidGltZXN0YW1wXCIsIFwiZGVzY1wiKSxcbiAgICAgICAgbGltaXQoMTApLFxuICAgICAgICBzdGFydEFmdGVyKGxhc3RWaXNpYmxlKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0RG9jcyhxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENhdGVnb3J5UXVlcnkoZGF0YWJhc2UsIGNhdGVnb3J5LCBxdWVyeVNuYXBzaG90ID0gbnVsbCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25SZWYgPSBjb2xsZWN0aW9uKGRhdGFiYXNlLCBcImFsbC1pdGVtc1wiKTtcbiAgICBjb25zdCBsYXN0VmlzaWJsZSA9IGdldExhc3RWaXNpYmxlKHF1ZXJ5U25hcHNob3QpO1xuXG4gICAgbGV0IHEgPSBxdWVyeShcbiAgICAgIGNvbGxlY3Rpb25SZWYsXG4gICAgICBvcmRlckJ5KFwidGltZXN0YW1wXCIsIFwiZGVzY1wiKSxcbiAgICAgIGxpbWl0KDEwKSxcbiAgICAgIHdoZXJlKFwiY2F0ZWdvcnlcIiwgXCI9PVwiLCBjYXRlZ29yeSlcbiAgICApO1xuXG4gICAgaWYgKGxhc3RWaXNpYmxlKSB7XG4gICAgICBxID0gcXVlcnkoXG4gICAgICAgIGNvbGxlY3Rpb25SZWYsXG4gICAgICAgIG9yZGVyQnkoXCJ0aW1lc3RhbXBcIiwgXCJkZXNjXCIpLFxuICAgICAgICBsaW1pdCgxMCksXG4gICAgICAgIHdoZXJlKFwiY2F0ZWdvcnlcIiwgXCI9PVwiLCBjYXRlZ29yeSksXG4gICAgICAgIHN0YXJ0QWZ0ZXIobGFzdFZpc2libGUpXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBnZXREb2NzKHEpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRIb21lUXVlcnksXG4gICAgZ2V0Q2F0ZWdvcnlRdWVyeSxcbiAgfTtcbn0pKCk7XG5cbmZpcmViYXNlXG4gIC5nZXRDYXRlZ29yeVF1ZXJ5KHRlc3REYiwgXCJhaVwiLCBudWxsKVxuICAudGhlbigocXVlcnlTbmFwc2hvdCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiRmlyc3Q6IFwiKTtcbiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gY29uc29sZS5sb2coZG9jLmRhdGEoKS50aXRsZSkpO1xuICAgIHJlbmRlckl0ZW1zKHF1ZXJ5U25hcHNob3QpO1xuICAgIHJldHVybiBmaXJlYmFzZS5nZXRDYXRlZ29yeVF1ZXJ5KHRlc3REYiwgXCJhaVwiLCBxdWVyeVNuYXBzaG90KTtcbiAgfSlcbiAgLnRoZW4oKHF1ZXJ5U25hcHNob3QpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIlNlY29uZDogXCIpO1xuICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiBjb25zb2xlLmxvZyhkb2MuZGF0YSgpLnRpdGxlKSk7XG4gICAgcmVuZGVySXRlbXMocXVlcnlTbmFwc2hvdCk7XG4gICAgcmV0dXJuIGZpcmViYXNlLmdldENhdGVnb3J5UXVlcnkodGVzdERiLCBcImFpXCIsIHF1ZXJ5U25hcHNob3QpO1xuICB9KVxuICAudGhlbigocXVlcnlTbmFwc2hvdCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiVGhpcmQ6IFwiKTtcbiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gY29uc29sZS5sb2coZG9jLmRhdGEoKS50aXRsZSkpO1xuICAgIHJlbmRlckl0ZW1zKHF1ZXJ5U25hcHNob3QpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsInN0cmluZ1RvQnl0ZUFycmF5JDEiLCJzdHIiLCJvdXQiLCJwIiwiaSIsImxlbmd0aCIsImMiLCJjaGFyQ29kZUF0IiwiYmFzZTY0IiwiYnl0ZVRvQ2hhck1hcF8iLCJjaGFyVG9CeXRlTWFwXyIsImJ5dGVUb0NoYXJNYXBXZWJTYWZlXyIsImNoYXJUb0J5dGVNYXBXZWJTYWZlXyIsIkVOQ09ERURfVkFMU19CQVNFIiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJIQVNfTkFUSVZFX1NVUFBPUlQiLCJhdG9iIiwiZW5jb2RlQnl0ZUFycmF5IiwiaW5wdXQiLCJ3ZWJTYWZlIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJpbml0XyIsImJ5dGVUb0NoYXJNYXAiLCJvdXRwdXQiLCJieXRlMSIsImhhdmVCeXRlMiIsImJ5dGUyIiwiaGF2ZUJ5dGUzIiwiYnl0ZTMiLCJvdXRCeXRlMSIsIm91dEJ5dGUyIiwib3V0Qnl0ZTMiLCJvdXRCeXRlNCIsInB1c2giLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJhcmd1bWVudHMiLCJuYW1lIiwiYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmciLCJ1dGY4Qnl0ZXMiLCJiYXNlNjRFbmNvZGUiLCJyZXBsYWNlIiwiZ2V0RGVmYXVsdHMiLCJzZWxmIiwiZ2V0R2xvYmFsIiwiX19GSVJFQkFTRV9ERUZBVUxUU19fIiwicHJvY2VzcyIsImRlZmF1bHRzSnNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwiZG9jdW1lbnQiLCJtYXRjaCIsImNvb2tpZSIsImRlY29kZWQiLCJjb25zb2xlIiwiZXJyb3IiLCJiYXNlNjREZWNvZGUiLCJnZXREZWZhdWx0c0Zyb21Db29raWUiLCJpbmZvIiwiZ2V0RGVmYXVsdEFwcENvbmZpZyIsIl9hIiwiY29uZmlnIiwiRGVmZXJyZWQiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsIlByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJjYWxsYmFjayIsInZhbHVlIiwiY2F0Y2giLCJGaXJlYmFzZUVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJjdXN0b21EYXRhIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsImNyZWF0ZSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsIl8iLCJrZXkiLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImEiLCJiIiwiYUtleXMiLCJrZXlzIiwiYktleXMiLCJrIiwiaW5jbHVkZXMiLCJhUHJvcCIsImJQcm9wIiwiaXNPYmplY3QiLCJ0aGluZyIsIl9kZWxlZ2F0ZSIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsIm1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInByb3BzIiwic2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2siLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsImdldCIsImlkZW50aWZpZXIiLCJub3JtYWxpemVkSWRlbnRpZmllciIsIm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciIsImhhcyIsImRlZmVycmVkIiwic2V0IiwiaXNJbml0aWFsaXplZCIsInNob3VsZEF1dG9Jbml0aWFsaXplIiwiaW5zdGFuY2UiLCJnZXRPckluaXRpYWxpemVTZXJ2aWNlIiwiaW5zdGFuY2VJZGVudGlmaWVyIiwiZ2V0SW1tZWRpYXRlIiwib3B0aW9ucyIsIm9wdGlvbmFsIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJlbnRyaWVzIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsInNlcnZpY2VzIiwiZnJvbSIsInZhbHVlcyIsImFsbCIsImZpbHRlciIsIm1hcCIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvcHRzIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJTZXQiLCJhZGQiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwidW5kZWZpbmVkIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwibm93IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWV0aG9kIiwiTG9nZ2VyIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJfdXNlckxvZ0hhbmRsZXIiLCJ2YWwiLCJUeXBlRXJyb3IiLCJzZXRMb2dMZXZlbCIsImxvZ0hhbmRsZXIiLCJ1c2VyTG9nSGFuZGxlciIsImRlYnVnIiwibG9nIiwid2FybiIsImluc3RhbmNlT2ZBbnkiLCJvYmplY3QiLCJjb25zdHJ1Y3RvcnMiLCJzb21lIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwidGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwiSURCVHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZU5hbWVzIiwib2JqZWN0U3RvcmUiLCJ0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlIiwiZnVuYyIsIklEQkRhdGFiYXNlIiwidHJhbnNhY3Rpb24iLCJJREJDdXJzb3IiLCJhZHZhbmNlIiwiY29udGludWUiLCJjb250aW51ZVByaW1hcnlLZXkiLCJhcHBseSIsInVud3JhcCIsInN0b3JlTmFtZXMiLCJ0eCIsImNhbGwiLCJzb3J0IiwiZG9uZSIsInVubGlzdGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlIiwiRE9NRXhjZXB0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbiIsIklEQk9iamVjdFN0b3JlIiwiSURCSW5kZXgiLCJQcm94eSIsIklEQlJlcXVlc3QiLCJyZXF1ZXN0Iiwic3VjY2VzcyIsInJlc3VsdCIsInRoZW4iLCJwcm9taXNpZnlSZXF1ZXN0IiwibmV3VmFsdWUiLCJyZWFkTWV0aG9kcyIsIndyaXRlTWV0aG9kcyIsImNhY2hlZE1ldGhvZHMiLCJnZXRNZXRob2QiLCJ0YXJnZXRGdW5jTmFtZSIsInVzZUluZGV4IiwiaXNXcml0ZSIsImFzeW5jIiwic3RvcmVOYW1lIiwic3RvcmUiLCJpbmRleCIsInNoaWZ0Iiwib2xkVHJhcHMiLCJQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibGlicmFyeSIsInZlcnNpb24iLCJsb2dTdHJpbmciLCJuYW1lJG8iLCJ2ZXJzaW9uJDEiLCJsb2dnZXIiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfY29tcG9uZW50cyIsIl9hZGRDb21wb25lbnQiLCJhcHAiLCJfcmVnaXN0ZXJDb21wb25lbnQiLCJjb21wb25lbnROYW1lIiwiRVJST1JfRkFDVE9SWSIsIkZpcmViYXNlQXBwSW1wbCIsIl9pc0RlbGV0ZWQiLCJfb3B0aW9ucyIsImFzc2lnbiIsIl9jb25maWciLCJfbmFtZSIsIl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJfY29udGFpbmVyIiwiY2hlY2tEZXN0cm95ZWQiLCJpc0RlbGV0ZWQiLCJhcHBOYW1lIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwicmVnaXN0ZXJWZXJzaW9uIiwibGlicmFyeUtleU9yTmFtZSIsInZhcmlhbnQiLCJsaWJyYXJ5TWlzbWF0Y2giLCJ2ZXJzaW9uTWlzbWF0Y2giLCJ3YXJuaW5nIiwiREJfTkFNRSIsIkRCX1ZFUlNJT04iLCJTVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwiYmxvY2tlZCIsInVwZ3JhZGUiLCJibG9ja2luZyIsInRlcm1pbmF0ZWQiLCJpbmRleGVkREIiLCJvcGVuIiwib3BlblByb21pc2UiLCJldmVudCIsIm9sZFZlcnNpb24iLCJuZXdWZXJzaW9uIiwiZGIiLCJvcGVuREIiLCJjcmVhdGVPYmplY3RTdG9yZSIsIm9yaWdpbmFsRXJyb3JNZXNzYWdlIiwid3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIiLCJoZWFydGJlYXRPYmplY3QiLCJwdXQiLCJjb21wdXRlS2V5IiwiaWRiR2V0RXJyb3IiLCJhcHBJZCIsIkhlYXJ0YmVhdFNlcnZpY2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZSIsIl9zdG9yYWdlIiwiSGVhcnRiZWF0U3RvcmFnZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlUHJvbWlzZSIsInJlYWQiLCJ0cmlnZ2VySGVhcnRiZWF0IiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImxhc3RTZW50SGVhcnRiZWF0RGF0ZSIsImhlYXJ0YmVhdHMiLCJzaW5nbGVEYXRlSGVhcnRiZWF0IiwiaGJUaW1lc3RhbXAiLCJ2YWx1ZU9mIiwib3ZlcndyaXRlIiwiZ2V0SGVhcnRiZWF0c0hlYWRlciIsImhlYXJ0YmVhdHNUb1NlbmQiLCJ1bnNlbnRFbnRyaWVzIiwiaGVhcnRiZWF0c0NhY2hlIiwibWF4U2l6ZSIsInNsaWNlIiwiaGVhcnRiZWF0RW50cnkiLCJmaW5kIiwiaGIiLCJkYXRlcyIsImNvdW50Qnl0ZXMiLCJwb3AiLCJleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlciIsImhlYWRlclN0cmluZyIsInN0cmluZ2lmeSIsInN1YnN0cmluZyIsIl9jYW5Vc2VJbmRleGVkREJQcm9taXNlIiwicnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjayIsInByZUV4aXN0IiwiREJfQ0hFQ0tfTkFNRSIsIm9uc3VjY2VzcyIsImNsb3NlIiwiZGVsZXRlRGF0YWJhc2UiLCJvbnVwZ3JhZGVuZWVkZWQiLCJvbmVycm9yIiwiaWRiSGVhcnRiZWF0T2JqZWN0IiwicmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCIiwiaGVhcnRiZWF0c09iamVjdCIsImV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCIsImNvbW1vbmpzR2xvYmFsIiwiZ2xvYmFsIiwiZXNtIiwiZ29vZyIsImwiLCJhYSIsImNhIiwiTWF0aCIsInJhbmRvbSIsImRhIiwiZWEiLCJiaW5kIiwiZmEiLCJkIiwidW5zaGlmdCIsInEiLCJ0b1N0cmluZyIsImluZGV4T2YiLCJoYSIsInIiLCIkIiwiYWMiLCJmIiwiaCIsIm4iLCJ2IiwicyIsIm8iLCJzYSIsIk4iLCJoYXNPd25Qcm9wZXJ0eSIsImthIiwibWEiLCJuYSIsInciLCJkZWZhdWx0UHJldmVudGVkIiwib2EiLCJkZWZpbmVQcm9wZXJ0eSIsIngiLCJ0ZXN0IiwicGEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ5IiwicWEiLCJ6YSIsIkRhIiwidGEiLCJ6IiwidWEiLCJ2YSIsIndhIiwidG9Mb3dlckNhc2UiLCJ4YSIsInlhIiwiZG9jdW1lbnRNb2RlIiwiQWEiLCJCYSIsImV4ZWMiLCJDYSIsInBhcnNlRmxvYXQiLCJwYXJzZUludCIsIkZhIiwiQSIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b24iLCJzY3JlZW5ZIiwic2NyZWVuWCIsImNsaWVudFkiLCJjbGllbnRYIiwibWV0YUtleSIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsInN0YXRlIiwicG9pbnRlcklkIiwicG9pbnRlclR5cGUiLCJjaGFuZ2VkVG91Y2hlcyIsInNyY0VsZW1lbnQiLCJub2RlTmFtZSIsImZyb21FbGVtZW50IiwidG9FbGVtZW50IiwicGFnZVgiLCJwYWdlWSIsIkdhIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsIkhhIiwiSWEiLCJKYSIsImxpc3RlbmVyIiwicHJveHkiLCJzcmMiLCJjYXB0dXJlIiwibGEiLCJpYSIsIkthIiwiTmEiLCJQYSIsIlFhIiwic3BsaXQiLCJSYSIsIlNhIiwiVWEiLCJzcGxpY2UiLCJUYSIsIlZhIiwiV2EiLCJZYSIsIm9uY2UiLCJaYSIsIiRhIiwiTyIsImFiIiwiYmIiLCJlYiIsImNiIiwiYXR0YWNoRXZlbnQiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwiUCIsImZiIiwiZ2IiLCJkZXRhY2hFdmVudCIsImhhbmRsZUV2ZW50IiwiQiIsIlMiLCJKIiwiQyIsImliIiwiY29uY2F0IiwidCIsImpiIiwibGIiLCJtYiIsIm5leHQiLCJvYiIsImoiLCJwYiIsInJlc2V0IiwicWIiLCJyYiIsInNldFRpbWVvdXQiLCJzYiIsInRiIiwidmIiLCJ1YiIsIndiIiwieGIiLCJnYSIsIlQiLCJjbGVhclRpbWVvdXQiLCJ5YiIsIk51bWJlciIsInpiIiwibSIsInN0YXJ0IiwiQWIiLCJCYiIsIkNiIiwiRGIiLCJGYiIsIkdiIiwiRCIsIkpiIiwiRWEiLCJFIiwiTGIiLCJNYiIsIk5iIiwiT2IiLCJQYiIsIlNUQVRfRVZFTlQiLCJzdGF0IiwiRiIsIlFiIiwic2l6ZSIsIlJiIiwiU2IiLCJOT19FUlJPUiIsIkViIiwiVElNRU9VVCIsIkliIiwiVGIiLCJLYiIsIiRiIiwiVWIiLCJWYiIsIldiIiwiWGIiLCJPUEVOIiwiSGIiLCJZYiIsIlpiIiwiYmMiLCJXIiwiVSIsImNjIiwiViIsIkkiLCJMIiwiRyIsIlkiLCJNIiwiYmEiLCJLIiwiZGMiLCJYTUxIdHRwUmVxdWVzdCIsImVjIiwiZmMiLCJnYyIsImhjIiwiaWMiLCJqYyIsImtjIiwibGMiLCJuYiIsIm9jIiwicmMiLCJ1YyIsInFjIiwidmMiLCJwYyIsImlzTmFOIiwid2MiLCJuYyIsIkgiLCJzYyIsImFib3J0IiwieGMiLCJ5YyIsInpjIiwiQWMiLCJCYyIsInJhIiwiTGEiLCJNYSIsImdldFJlc3BvbnNlSGVhZGVyIiwiQ2MiLCJEYyIsIkVjIiwiRmMiLCJHYyIsIkhjIiwiS2MiLCJmb3JFYWNoIiwiWiIsIkpjIiwiSWMiLCJqYSIsIm1jIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJzdHJlYW0iLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJ0cmltIiwiT2EiLCJ0YyIsImNhbmNlbCIsIkxjIiwiUmVnRXhwIiwiTmMiLCJPYyIsIlBjIiwiUWMiLCJSYyIsIiRjIiwiWGMiLCJTYyIsIlljIiwiZmxvb3IiLCJhYnMiLCJkZWNvZGVVUkkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJlbmNvZGVVUkkiLCJaYyIsIlRjIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiVWMiLCJWYyIsIldjIiwiTWMiLCJhZCIsImNkIiwiZGQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJlZCIsImZkIiwiY2xlYXIiLCJnZCIsImhkIiwiaWQiLCJrZCIsIm9ubG9hZCIsIm9uYWJvcnQiLCJvbnRpbWVvdXQiLCJsZCIsIm1kIiwicmVhZHlTdGF0ZSIsIm5kIiwic3RhdHVzIiwicmVzcG9uc2VUeXBlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiSGVhZGVycyIsInFkIiwiWGEiLCJwZCIsIm9kIiwic2VuZCIsImhlYWRlcnMiLCJjcmVkZW50aWFscyIsImNhY2hlIiwiYm9keSIsImZldGNoIiwiUmVxdWVzdCIsImFycmF5QnVmZmVyIiwiUmVhZGFibGVTdHJlYW0iLCJnZXRSZWFkZXIiLCJ0ZXh0IiwiVWludDhBcnJheSIsInNldFJlcXVlc3RIZWFkZXIiLCJhcHBlbmQiLCJyZCIsInNkIiwidGQiLCJ1ZCIsInZkIiwieWQiLCJ6ZCIsIkFkIiwibG9jYXRpb24iLCJwcm90b2NvbCIsIndkIiwibW96UmVzcG9uc2VBcnJheUJ1ZmZlciIsIkJkIiwiQ2QiLCJEZCIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsIkVkIiwieG1sSHR0cEZhY3RvcnkiLCJ1c2VGZXRjaFN0cmVhbXMiLCJzdXBwb3J0c0Nyb3NzRG9tYWluWGhyIiwiY29uY3VycmVudFJlcXVlc3RMaW1pdCIsImZhc3RIYW5kc2hha2UiLCJlbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMiLCJmb3JjZUxvbmdQb2xsaW5nIiwiZGV0ZWN0QnVmZmVyaW5nUHJveHkiLCJsb25nUG9sbGluZ1RpbWVvdXQiLCJGZCIsIkdkIiwic2VuZEJlYWNvbiIsIkltYWdlIiwiSGQiLCJMZCIsIktkIiwicm91bmQiLCJtaW4iLCJtYXgiLCJKZCIsIk1kIiwiSWQiLCJpc0FjdGl2ZSIsImpkIiwiaG9zdG5hbWUiLCJwb3J0IiwiTmQiLCJPZCIsIlEiLCJtZXNzYWdlVXJsUGFyYW1zIiwibWVzc2FnZUhlYWRlcnMiLCJjbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwic2VuZFJhd0pzb24iLCJodHRwU2Vzc2lvbklkUGFyYW0iLCJSIiwiUGQiLCJfX2hlYWRlcnNfXyIsInN0YXR1c0NvZGUiLCJfX3N0YXR1c19fIiwiX19zbV9fIiwiUWQiLCJibG9ja1NpemUiLCJTZCIsInRvVXBwZXJDYXNlIiwiZ2V0UHJvdG90eXBlT2YiLCJGb3JtRGF0YSIsIndpdGhDcmVkZW50aWFscyIsInRpbWVvdXQiLCJ4ZCIsImtiIiwiX19kYXRhX18iLCJUZCIsImlzRmluaXRlIiwiVWQiLCJXZCIsIlhkIiwiWCIsIlpkIiwiJGQiLCJhZSIsIllkIiwiYmUiLCJjZWlsIiwiTE4yIiwicG93IiwiYW5kIiwib3IiLCJ4b3IiLCJjcmVhdGVXZWJDaGFubmVsIiwiSFRUUF9FUlJPUiIsIkNPTVBMRVRFIiwiRXZlbnRUeXBlIiwiQ0xPU0UiLCJNRVNTQUdFIiwibGlzdGVuIiwibGlzdGVuT25jZSIsImdldExhc3RFcnJvciIsImdldExhc3RFcnJvckNvZGUiLCJnZXRTdGF0dXMiLCJnZXRSZXNwb25zZUpzb24iLCJnZXRSZXNwb25zZVRleHQiLCJzZXRXaXRoQ3JlZGVudGlhbHMiLCJkaWdlc3QiLCJ1cGRhdGUiLCJtdWx0aXBseSIsIm1vZHVsbyIsImNvbXBhcmUiLCJ0b051bWJlciIsImdldEJpdHMiLCJmcm9tTnVtYmVyIiwiZnJvbVN0cmluZyIsIlZkIiwiY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCIsImdldFN0YXRFdmVudFRhcmdldCIsIkVycm9yQ29kZSIsIkV2ZW50IiwiU3RhdCIsIlBST1hZIiwiTk9QUk9YWSIsIldlYkNoYW5uZWwiLCJGZXRjaFhtbEh0dHBGYWN0b3J5IiwiWGhySW8iLCJNZDUiLCJJbnRlZ2VyIiwiVXNlciIsInVpZCIsImlzQXV0aGVudGljYXRlZCIsInRvS2V5IiwiaXNFcXVhbCIsIlVOQVVUSEVOVElDQVRFRCIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiTU9DS19VU0VSIiwiX19QUklWQVRFX2dldExvZ0xldmVsIiwiX19QUklWQVRFX2xvZ0RlYnVnIiwiX19QUklWQVRFX2FyZ1RvU3RyaW5nIiwiX19QUklWQVRFX2xvZ0Vycm9yIiwiX19QUklWQVRFX2xvZ1dhcm4iLCJmYWlsIiwiX19QUklWQVRFX2hhcmRBc3NlcnQiLCJfX1BSSVZBVEVfZGVidWdDYXN0IiwiT0siLCJDQU5DRUxMRUQiLCJVTktOT1dOIiwiSU5WQUxJRF9BUkdVTUVOVCIsIkRFQURMSU5FX0VYQ0VFREVEIiwiTk9UX0ZPVU5EIiwiQUxSRUFEWV9FWElTVFMiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlJFU09VUkNFX0VYSEFVU1RFRCIsIkZBSUxFRF9QUkVDT05ESVRJT04iLCJBQk9SVEVEIiwiT1VUX09GX1JBTkdFIiwiVU5JTVBMRU1FTlRFRCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiRmlyZXN0b3JlRXJyb3IiLCJfX1BSSVZBVEVfRGVmZXJyZWQiLCJfX1BSSVZBVEVfT0F1dGhUb2tlbiIsInVzZXIiLCJfX1BSSVZBVEVfRW1wdHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsImdldFRva2VuIiwiaW52YWxpZGF0ZVRva2VuIiwiZW5xdWV1ZVJldHJ5YWJsZSIsInNodXRkb3duIiwiX19QUklWQVRFX0VtdWxhdG9yQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIiLCJ0b2tlbiIsImNoYW5nZUxpc3RlbmVyIiwiX19QUklWQVRFX0ZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIiLCJjdXJyZW50VXNlciIsImZvcmNlUmVmcmVzaCIsImF1dGgiLCJfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyIiwiX19QUklWQVRFX2F3YWl0TmV4dFRva2VuIiwiX19QUklWQVRFX3JlZ2lzdGVyQXV0aCIsImFkZEF1dGhUb2tlbkxpc3RlbmVyIiwiYWNjZXNzVG9rZW4iLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImdldFVpZCIsIl9fUFJJVkFURV9GaXJzdFBhcnR5VG9rZW4iLCJfX1BSSVZBVEVfRmlyc3RQYXJ0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiQXBwQ2hlY2tUb2tlbiIsIl9fUFJJVkFURV9GaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlciIsImFwcENoZWNrIiwib25Ub2tlbkNoYW5nZWQiLCJfX1BSSVZBVEVfcmVnaXN0ZXJBcHBDaGVjayIsImFkZFRva2VuTGlzdGVuZXIiLCJyZW1vdmVUb2tlbkxpc3RlbmVyIiwiX19QUklWQVRFX3JhbmRvbUJ5dGVzIiwiY3J5cHRvIiwibXNDcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJfX1BSSVZBVEVfQXV0b0lkIiwiX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IiLCJfX1BSSVZBVEVfYXJyYXlFcXVhbHMiLCJldmVyeSIsIlRpbWVzdGFtcCIsInNlY29uZHMiLCJuYW5vc2Vjb25kcyIsImZyb21NaWxsaXMiLCJmcm9tRGF0ZSIsImdldFRpbWUiLCJ0b0RhdGUiLCJ0b01pbGxpcyIsIl9jb21wYXJlVG8iLCJ0b0pTT04iLCJwYWRTdGFydCIsIlNuYXBzaG90VmVyc2lvbiIsInRpbWVzdGFtcCIsImZyb21UaW1lc3RhbXAiLCJjb21wYXJlVG8iLCJ0b01pY3Jvc2Vjb25kcyIsInRvVGltZXN0YW1wIiwiQmFzZVBhdGgiLCJzZWdtZW50cyIsIm9mZnNldCIsImxlbiIsImNvbXBhcmF0b3IiLCJjaGlsZCIsImxpbWl0IiwiY29uc3RydWN0IiwicG9wRmlyc3QiLCJwb3BMYXN0IiwiZmlyc3RTZWdtZW50IiwibGFzdFNlZ21lbnQiLCJpc0VtcHR5IiwiaXNQcmVmaXhPZiIsImlzSW1tZWRpYXRlUGFyZW50T2YiLCJ0b0FycmF5IiwiUmVzb3VyY2VQYXRoIiwiY2Fub25pY2FsU3RyaW5nIiwiZW1wdHlQYXRoIiwiRmllbGRQYXRoJDEiLCJpc1ZhbGlkSWRlbnRpZmllciIsImlzS2V5RmllbGQiLCJrZXlGaWVsZCIsImZyb21TZXJ2ZXJGb3JtYXQiLCJfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQiLCJEb2N1bWVudEtleSIsInBhdGgiLCJmcm9tUGF0aCIsImZyb21OYW1lIiwiZW1wdHkiLCJjb2xsZWN0aW9uR3JvdXAiLCJoYXNDb2xsZWN0aW9uSWQiLCJnZXRDb2xsZWN0aW9uR3JvdXAiLCJnZXRDb2xsZWN0aW9uUGF0aCIsImlzRG9jdW1lbnRLZXkiLCJmcm9tU2VnbWVudHMiLCJfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRGcm9tRG9jdW1lbnQiLCJJbmRleE9mZnNldCIsInJlYWRUaW1lIiwiZG9jdW1lbnRLZXkiLCJsYXJnZXN0QmF0Y2hJZCIsIl9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IiLCJQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIiwib25Db21taXR0ZWRMaXN0ZW5lcnMiLCJhZGRPbkNvbW1pdHRlZExpc3RlbmVyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyIsIlBlcnNpc3RlbmNlUHJvbWlzZSIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwibWFwQXJyYXkiLCJkb1doaWxlIiwiX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvciIsIl9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZSIsInByZXZpb3VzVmFsdWUiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJvZSIsIl9lIiwid3JpdGVTZXF1ZW5jZU51bWJlciIsIl9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCIsIl9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyIsIl9fUFJJVkFURV9vYmplY3RTaXplIiwiU29ydGVkTWFwIiwicm9vdCIsIkxMUkJOb2RlIiwiRU1QVFkiLCJpbnNlcnQiLCJjb3B5IiwiQkxBQ0siLCJyZW1vdmUiLCJsZWZ0IiwicmlnaHQiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiU29ydGVkTWFwSXRlcmF0b3IiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwiaXNSZXZlcnNlIiwibm9kZVN0YWNrIiwiZ2V0TmV4dCIsImhhc05leHQiLCJwZWVrIiwiY29sb3IiLCJSRUQiLCJmaXhVcCIsInJlbW92ZU1pbiIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVja01heERlcHRoIiwiY2hlY2siLCJTb3J0ZWRTZXQiLCJmaXJzdCIsImxhc3QiLCJmb3JFYWNoSW5SYW5nZSIsImZvckVhY2hXaGlsZSIsImZpcnN0QWZ0ZXJPckVxdWFsIiwiU29ydGVkU2V0SXRlcmF0b3IiLCJ1bmlvbldpdGgiLCJpdGVyIiwiRmllbGRNYXNrIiwiZmllbGRzIiwiY292ZXJzIiwiX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yIiwiQnl0ZVN0cmluZyIsImJpbmFyeVN0cmluZyIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidG9CYXNlNjQiLCJ0b1VpbnQ4QXJyYXkiLCJhcHByb3hpbWF0ZUJ5dGVTaXplIiwiRU1QVFlfQllURV9TVFJJTkciLCJlZSIsIl9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAiLCJzdWJzdHIiLCJuYW5vcyIsIl9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIiLCJfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyIsIl9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcCIsIm1hcFZhbHVlIiwiX190eXBlX18iLCJzdHJpbmdWYWx1ZSIsIl9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlIiwiX19wcmV2aW91c192YWx1ZV9fIiwiX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lIiwiX19sb2NhbF93cml0ZV90aW1lX18iLCJ0aW1lc3RhbXBWYWx1ZSIsIkRhdGFiYXNlSW5mbyIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJsb25nUG9sbGluZ09wdGlvbnMiLCJEYXRhYmFzZUlkIiwicHJvamVjdElkIiwiZGF0YWJhc2UiLCJpc0RlZmF1bHREYXRhYmFzZSIsInRlIiwiX19QUklWQVRFX3R5cGVPcmRlciIsIl9fUFJJVkFURV9pc01heFZhbHVlIiwiX19QUklWQVRFX3ZhbHVlRXF1YWxzIiwiYm9vbGVhblZhbHVlIiwiYnl0ZXNWYWx1ZSIsInJlZmVyZW5jZVZhbHVlIiwiZ2VvUG9pbnRWYWx1ZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiaW50ZWdlclZhbHVlIiwiZG91YmxlVmFsdWUiLCJhcnJheVZhbHVlIiwiX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyIsIl9fUFJJVkFURV92YWx1ZUNvbXBhcmUiLCJfX1BSSVZBVEVfY29tcGFyZVRpbWVzdGFtcHMiLCJjYW5vbmljYWxJZCIsIl9fUFJJVkFURV9jYW5vbmlmeVZhbHVlIiwiX19QUklWQVRFX3JlZlZhbHVlIiwiaXNJbnRlZ2VyIiwiX19QUklWQVRFX2lzTnVsbFZhbHVlIiwiX19QUklWQVRFX2lzTmFuVmFsdWUiLCJfX1BSSVZBVEVfaXNNYXBWYWx1ZSIsIl9fUFJJVkFURV9kZWVwQ2xvbmUiLCJPYmplY3RWYWx1ZSIsImZpZWxkIiwiZ2V0RmllbGRzTWFwIiwic2V0QWxsIiwiYXBwbHlDaGFuZ2VzIiwiY2xvbmUiLCJNdXRhYmxlRG9jdW1lbnQiLCJkb2N1bWVudFR5cGUiLCJjcmVhdGVUaW1lIiwiZG9jdW1lbnRTdGF0ZSIsIm5ld0ludmFsaWREb2N1bWVudCIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJuZXdOb0RvY3VtZW50IiwibmV3VW5rbm93bkRvY3VtZW50IiwiY29udmVydFRvRm91bmREb2N1bWVudCIsImNvbnZlcnRUb05vRG9jdW1lbnQiLCJjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQiLCJzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJzZXRIYXNMb2NhbE11dGF0aW9ucyIsInNldFJlYWRUaW1lIiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJoYXNQZW5kaW5nV3JpdGVzIiwiaXNWYWxpZERvY3VtZW50IiwiaXNGb3VuZERvY3VtZW50IiwiaXNOb0RvY3VtZW50IiwiaXNVbmtub3duRG9jdW1lbnQiLCJtdXRhYmxlQ29weSIsIkJvdW5kIiwicG9zaXRpb24iLCJpbmNsdXNpdmUiLCJfX1BSSVZBVEVfYm91bmRDb21wYXJlVG9Eb2N1bWVudCIsImRpciIsIl9fUFJJVkFURV9ib3VuZEVxdWFscyIsIk9yZGVyQnkiLCJfX1BSSVZBVEVfb3JkZXJCeUVxdWFscyIsIkZpbHRlciIsIkZpZWxkRmlsdGVyIiwib3AiLCJjcmVhdGVLZXlGaWVsZEluRmlsdGVyIiwiX19QUklWQVRFX0tleUZpZWxkRmlsdGVyIiwiX19QUklWQVRFX0FycmF5Q29udGFpbnNGaWx0ZXIiLCJfX1BSSVZBVEVfSW5GaWx0ZXIiLCJfX1BSSVZBVEVfTm90SW5GaWx0ZXIiLCJfX1BSSVZBVEVfQXJyYXlDb250YWluc0FueUZpbHRlciIsIl9fUFJJVkFURV9LZXlGaWVsZEluRmlsdGVyIiwiX19QUklWQVRFX0tleUZpZWxkTm90SW5GaWx0ZXIiLCJtYXRjaGVzIiwibWF0Y2hlc0NvbXBhcmlzb24iLCJpc0luZXF1YWxpdHkiLCJnZXRGbGF0dGVuZWRGaWx0ZXJzIiwiZ2V0RmlsdGVycyIsImdldEZpcnN0SW5lcXVhbGl0eUZpZWxkIiwiQ29tcG9zaXRlRmlsdGVyIiwiZmlsdGVycyIsImNlIiwiX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24iLCJyZWR1Y2UiLCJsZSIsIl9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbiIsIl9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQiLCJfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIiLCJfX1BSSVZBVEVfZmlsdGVyRXF1YWxzIiwiX19QUklWQVRFX3N0cmluZ2lmeUZpbHRlciIsIl9fUFJJVkFURV9leHRyYWN0RG9jdW1lbnRLZXlzRnJvbUFycmF5VmFsdWUiLCJudWxsVmFsdWUiLCJfX1BSSVZBVEVfVGFyZ2V0SW1wbCIsIm9yZGVyQnkiLCJzdGFydEF0IiwiZW5kQXQiLCJoZSIsIl9fUFJJVkFURV9uZXdUYXJnZXQiLCJfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQiLCJfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzIiwiX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQiLCJfX1BSSVZBVEVfUXVlcnlJbXBsIiwiZXhwbGljaXRPcmRlckJ5IiwibGltaXRUeXBlIiwiUGUiLCJJZSIsImRlIiwiX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aCIsIl9fUFJJVkFURV9xdWVyeU1hdGNoZXNBbGxEb2N1bWVudHMiLCJfX1BSSVZBVEVfZ2V0Rmlyc3RPcmRlckJ5RmllbGQiLCJfX1BSSVZBVEVfZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkIiwiX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkiLCJfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeSIsIl9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0IiwiX19QUklWQVRFX19xdWVyeVRvVGFyZ2V0IiwiX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyIiwiX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0IiwiX19QUklWQVRFX3F1ZXJ5RXF1YWxzIiwiX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkiLCJfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkiLCJfX1BSSVZBVEVfcXVlcnlNYXRjaGVzIiwiX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvciIsIl9fUFJJVkFURV9jb21wYXJlRG9jcyIsIk9iamVjdE1hcCIsIm1hcEtleUZuIiwiZXF1YWxzRm4iLCJpbm5lciIsImlubmVyU2l6ZSIsInJlIiwiX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCIsImllIiwiZG9jdW1lbnRNYXAiLCJfX1BSSVZBVEVfY29udmVydE92ZXJsYXllZERvY3VtZW50TWFwVG9Eb2N1bWVudE1hcCIsIm92ZXJsYXllZERvY3VtZW50IiwiX19QUklWQVRFX25ld092ZXJsYXlNYXAiLCJfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAiLCJfX1BSSVZBVEVfbmV3TXV0YXRpb25NYXAiLCJfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQiLCJfX1BSSVZBVEVfdG9Eb3VibGUiLCJ1c2VQcm90bzNKc29uIiwiX19QUklWQVRFX3RvSW50ZWdlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJNSU5fU0FGRV9JTlRFR0VSIiwiaXNTYWZlSW50ZWdlciIsIlRyYW5zZm9ybU9wZXJhdGlvbiIsIl9fUFJJVkFURV9hcHBseVRyYW5zZm9ybU9wZXJhdGlvblRvTG9jYWxWaWV3IiwiX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSIsIl9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIiwiX19QUklWQVRFX2FwcGx5QXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiIsIl9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiIsIl9fUFJJVkFURV9hcHBseUFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uIiwiX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfY29tcHV0ZVRyYW5zZm9ybU9wZXJhdGlvbkJhc2VWYWx1ZSIsImFzTnVtYmVyIiwiVGUiLCJzZXJpYWxpemVyIiwiX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9SZW1vdGVEb2N1bWVudCIsImVsZW1lbnRzIiwiX19QUklWQVRFX2NvZXJjZWRGaWVsZFZhbHVlc0FycmF5IiwiUHJlY29uZGl0aW9uIiwidXBkYXRlVGltZSIsImV4aXN0cyIsIm5vbmUiLCJpc05vbmUiLCJfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50IiwiTXV0YXRpb24iLCJfX1BSSVZBVEVfY2FsY3VsYXRlT3ZlcmxheU11dGF0aW9uIiwiX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uIiwiX19QUklWQVRFX1NldE11dGF0aW9uIiwiX19QUklWQVRFX1BhdGNoTXV0YXRpb24iLCJfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJfX1BSSVZBVEVfc2VydmVyVHJhbnNmb3JtUmVzdWx0cyIsImZpZWxkVHJhbnNmb3JtcyIsInRyYW5zZm9ybVJlc3VsdHMiLCJwcmVjb25kaXRpb24iLCJfX1BSSVZBVEVfZ2V0UGF0Y2giLCJfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3IiwiX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyIsImZpZWxkTWFzayIsIl9fUFJJVkFURV9tdXRhdGlvbkVxdWFscyIsInRyYW5zZm9ybSIsIl9fUFJJVkFURV9maWVsZFRyYW5zZm9ybUVxdWFscyIsImdldEZpZWxkTWFzayIsIk11dGF0aW9uQmF0Y2giLCJiYXRjaElkIiwibG9jYWxXcml0ZVRpbWUiLCJiYXNlTXV0YXRpb25zIiwibXV0YXRpb25zIiwiYXBwbHlUb1JlbW90ZURvY3VtZW50IiwibXV0YXRpb25SZXN1bHRzIiwiYXBwbHlUb0xvY2FsVmlldyIsImFwcGx5VG9Mb2NhbERvY3VtZW50U2V0IiwibXV0YXRlZEZpZWxkcyIsIk92ZXJsYXkiLCJtdXRhdGlvbiIsImdldEtleSIsIkV4aXN0ZW5jZUZpbHRlciIsImNvdW50IiwidW5jaGFuZ2VkTmFtZXMiLCJ1ZSIsIl9fUFJJVkFURV9tYXBDb2RlRnJvbVJwY0NvZGUiLCJfX1BSSVZBVEVfZ2V0TWQ1SGFzaFZhbHVlIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyIsIkRhdGFWaWV3IiwiYnVmZmVyIiwiZ2V0VWludDMyIiwiQmxvb21GaWx0ZXIiLCJiaXRtYXAiLCJwYWRkaW5nIiwiaGFzaENvdW50IiwiX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IiLCJBZSIsIlJlIiwiVmUiLCJtZSIsIm1pZ2h0Q29udGFpbiIsImZlIiwiUmVtb3RlRXZlbnQiLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSIsIlRhcmdldENoYW5nZSIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwiX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UiLCJnZSIsInJlbW92ZWRUYXJnZXRJZHMiLCJwZSIsIl9fUFJJVkFURV9FeGlzdGVuY2VGaWx0ZXJDaGFuZ2UiLCJ0YXJnZXRJZCIsInllIiwiX19QUklWQVRFX1dhdGNoVGFyZ2V0Q2hhbmdlIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJfX1BSSVZBVEVfVGFyZ2V0U3RhdGUiLCJ3ZSIsIlNlIiwiX19QUklWQVRFX3NuYXBzaG90Q2hhbmdlc01hcCIsIkRlIiwiQ2UiLCJ2ZSIsIkZlIiwiTWUiLCJ4ZSIsIk9lIiwiTmUiLCJCZSIsIkxlIiwia2UiLCJxZSIsIl9fUFJJVkFURV9XYXRjaENoYW5nZUFnZ3JlZ2F0b3IiLCJRZSIsIktlIiwiJGUiLCJVZSIsIl9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCIsIldlIiwiR2UiLCJ6ZSIsImplIiwiSGUiLCJmb3JFYWNoVGFyZ2V0IiwiSmUiLCJZZSIsInJlbW92ZVRhcmdldCIsIlplIiwiWGUiLCJldCIsInR0IiwibnQiLCJydCIsImJpdHMiLCJvdCIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJzdCIsIl90IiwidXQiLCJwdXJwb3NlIiwiY3QiLCJsdCIsImFzYyIsImRlc2MiLCJpbiIsIkpzb25Qcm90b1NlcmlhbGl6ZXIiLCJfX1BSSVZBVEVfdG9JbnQzMlByb3RvIiwiX19QUklWQVRFX3RvQnl0ZXMiLCJfX1BSSVZBVEVfZnJvbVZlcnNpb24iLCJfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUiLCJfX1BSSVZBVEVfZnJvbVJlc291cmNlTmFtZSIsIl9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lIiwiX19QUklWQVRFX2V4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lIiwiX19QUklWQVRFX3RvUXVlcnlQYXRoIiwiX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkIiwiX19QUklWQVRFX3RvRG9jdW1lbnRzVGFyZ2V0IiwiZG9jdW1lbnRzIiwiX19QUklWQVRFX3RvUXVlcnlUYXJnZXQiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJwYXJlbnQiLCJjb2xsZWN0aW9uSWQiLCJhbGxEZXNjZW5kYW50cyIsIl9fUFJJVkFURV90b0ZpbHRlciIsIndoZXJlIiwiX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlIiwiZGlyZWN0aW9uIiwiX19QUklWQVRFX3RvRGlyZWN0aW9uIiwiYmVmb3JlIiwiX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkiLCJfX1BSSVZBVEVfZnJvbVF1ZXJ5UGF0aCIsIl9fUFJJVkFURV9mcm9tRmlsdGVyIiwiX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UiLCJfX1BSSVZBVEVfbmV3UXVlcnkiLCJ1bmFyeUZpbHRlciIsIk5hTiIsImZpZWxkRmlsdGVyIiwiY29tcG9zaXRlRmlsdGVyIiwiX19QUklWQVRFX3RvT3BlcmF0b3JOYW1lIiwiX19QUklWQVRFX3RvQ29tcG9zaXRlT3BlcmF0b3JOYW1lIiwiZmllbGRQYXRoIiwiVGFyZ2V0RGF0YSIsInNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsImV4cGVjdGVkQ291bnQiLCJ3aXRoU2VxdWVuY2VOdW1iZXIiLCJ3aXRoUmVzdW1lVG9rZW4iLCJ3aXRoRXhwZWN0ZWRDb3VudCIsIndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiX19QUklWQVRFX0xvY2FsU2VyaWFsaXplciIsImh0IiwiX19QUklWQVRFX2Zyb21CdW5kbGVkUXVlcnkiLCJfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlciIsImR0IiwiVHQiLCJFdCIsIkF0IiwiUnQiLCJWdCIsImZ0IiwiZ3QiLCJ5dCIsInd0IiwiU3QiLCJidCIsIkR0IiwiQ3QiLCJfX1BSSVZBVEVfTWVtb3J5SW5kZXhNYW5hZ2VyIiwiYW4iLCJfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4IiwiYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgiLCJnZXRDb2xsZWN0aW9uUGFyZW50cyIsImdldEVudHJpZXMiLCJhZGRGaWVsZEluZGV4IiwiZGVsZXRlRmllbGRJbmRleCIsImRlbGV0ZUFsbEZpZWxkSW5kZXhlcyIsImNyZWF0ZVRhcmdldEluZGV4ZXMiLCJnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCIsImdldEluZGV4VHlwZSIsImdldEZpZWxkSW5kZXhlcyIsImdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSIsImdldE1pbk9mZnNldCIsImdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVDb2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVJbmRleEVudHJpZXMiLCJMcnVQYXJhbXMiLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJ3aXRoQ2FjaGVTaXplIiwiREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUiLCJERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QiLCJERUZBVUxUIiwiRElTQUJMRUQiLCJfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IiLCJObiIsIkJuIiwiTG4iLCJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsImFkZEVudHJ5IiwiYXNzZXJ0Tm90QXBwbGllZCIsInJlbW92ZUVudHJ5IiwiZ2V0RW50cnkiLCJnZXRGcm9tQ2FjaGUiLCJnZXRBbGxGcm9tQ2FjaGUiLCJPdmVybGF5ZWREb2N1bWVudCIsIkxvY2FsRG9jdW1lbnRzVmlldyIsInJlbW90ZURvY3VtZW50Q2FjaGUiLCJtdXRhdGlvblF1ZXVlIiwiZG9jdW1lbnRPdmVybGF5Q2FjaGUiLCJpbmRleE1hbmFnZXIiLCJnZXREb2N1bWVudCIsImdldE92ZXJsYXkiLCJnZXREb2N1bWVudHMiLCJnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyIsInBvcHVsYXRlT3ZlcmxheXMiLCJjb21wdXRlVmlld3MiLCJnZXRPdmVybGF5ZWREb2N1bWVudHMiLCJnZXRPdmVybGF5cyIsInJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwic2F2ZU92ZXJsYXlzIiwicmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeSIsImdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5IiwiZ2V0TmV4dERvY3VtZW50cyIsImdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAiLCJnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cCIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbiIsIl9fUFJJVkFURV9NZW1vcnlCdW5kbGVDYWNoZSIsImxyIiwiaHIiLCJnZXRCdW5kbGVNZXRhZGF0YSIsInNhdmVCdW5kbGVNZXRhZGF0YSIsImdldE5hbWVkUXVlcnkiLCJzYXZlTmFtZWRRdWVyeSIsInF1ZXJ5IiwiYnVuZGxlZFF1ZXJ5IiwiX19QUklWQVRFX01lbW9yeURvY3VtZW50T3ZlcmxheUNhY2hlIiwib3ZlcmxheXMiLCJQciIsIkl0IiwicmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkIiwiX19QUklWQVRFX1JlZmVyZW5jZVNldCIsIklyIiwiX19QUklWQVRFX0RvY1JlZmVyZW5jZSIsImRyIiwiVHIiLCJFciIsImFkZFJlZmVyZW5jZSIsIkFyIiwicmVtb3ZlUmVmZXJlbmNlIiwiUnIiLCJWciIsIm1yIiwiZ3IiLCJwciIsImNvbnRhaW5zS2V5IiwieXIiLCJfX1BSSVZBVEVfTWVtb3J5TXV0YXRpb25RdWV1ZSIsInJlZmVyZW5jZURlbGVnYXRlIiwid3IiLCJTciIsImNoZWNrRW1wdHkiLCJhZGRNdXRhdGlvbkJhdGNoIiwibG9va3VwTXV0YXRpb25CYXRjaCIsImJyIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJEciIsImdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXMiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSIsIlBPU0lUSVZFX0lORklOSVRZIiwiQ3IiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJ2ciIsIm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkIiwieG4iLCJwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayIsIl9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlSW1wbCIsIkZyIiwiZG9jcyIsInNldEluZGV4TWFuYWdlciIsIk1yIiwibmV3Q2hhbmdlQnVmZmVyIiwiX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIiwiZ2V0U2l6ZSIsInVyIiwiX19QUklWQVRFX01lbW9yeVRhcmdldENhY2hlIiwicGVyc2lzdGVuY2UiLCJPciIsImxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJoaWdoZXN0VGFyZ2V0SWQiLCJOciIsIkJyIiwidGFyZ2V0Q291bnQiLCJMciIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIiLCJhbGxvY2F0ZVRhcmdldElkIiwic2V0VGFyZ2V0c01ldGFkYXRhIiwiUW4iLCJhZGRUYXJnZXREYXRhIiwidXBkYXRlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXRzIiwicmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJnZXRUYXJnZXRDb3VudCIsImdldFRhcmdldERhdGEiLCJhZGRNYXRjaGluZ0tleXMiLCJyZW1vdmVNYXRjaGluZ0tleXMiLCJnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsIl9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZSIsImtyIiwicXIiLCJRciIsIktyIiwiJHIiLCJVciIsInN0YXJ0ZWQiLCJzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lciIsInNldE5ldHdvcmtFbmFibGVkIiwiZ2V0SW5kZXhNYW5hZ2VyIiwiZ2V0RG9jdW1lbnRPdmVybGF5Q2FjaGUiLCJnZXRNdXRhdGlvblF1ZXVlIiwiZ2V0VGFyZ2V0Q2FjaGUiLCJnZXRSZW1vdGVEb2N1bWVudENhY2hlIiwiZ2V0QnVuZGxlQ2FjaGUiLCJydW5UcmFuc2FjdGlvbiIsIl9fUFJJVkFURV9NZW1vcnlUcmFuc2FjdGlvbiIsIldyIiwiR3IiLCJ6ciIsImN1cnJlbnRTZXF1ZW5jZU51bWJlciIsIl9fUFJJVkFURV9NZW1vcnlFYWdlckRlbGVnYXRlIiwianIiLCJIciIsIkpyIiwiWXIiLCJaciIsInVwZGF0ZUxpbWJvRG9jdW1lbnQiLCJfX1BSSVZBVEVfTG9jYWxWaWV3Q2hhbmdlcyIsImZyb21DYWNoZSIsIlFpIiwiS2kiLCIkaSIsImRvY0NoYW5nZXMiLCJkb2MiLCJRdWVyeUNvbnRleHQiLCJfZG9jdW1lbnRSZWFkQ291bnQiLCJkb2N1bWVudFJlYWRDb3VudCIsImluY3JlbWVudERvY3VtZW50UmVhZENvdW50IiwiX19QUklWQVRFX1F1ZXJ5RW5naW5lIiwiVWkiLCJXaSIsIkdpIiwiemkiLCJqaSIsIkhpIiwiSmkiLCJZaSIsIlppIiwiWGkiLCJlcyIsInRzIiwiX19QUklWQVRFX25ld0luZGV4T2Zmc2V0U3VjY2Vzc29yRnJvbVJlYWRUaW1lIiwiX19QUklWQVRFX0xvY2FsU3RvcmVJbXBsIiwibnMiLCJycyIsInNzIiwib3MiLCJfcyIsInVzIiwibG9jYWxEb2N1bWVudHMiLCJjb2xsZWN0R2FyYmFnZSIsImNvbGxlY3QiLCJfX1BSSVZBVEVfbG9jYWxTdG9yZUhhbmRsZVVzZXJDaGFuZ2UiLCJjcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJfX1BSSVZBVEVfbG9jYWxTdG9yZUdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQiLCJfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeSIsIl9fUFJJVkFURV9zZXRNYXhSZWFkVGltZSIsIl9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cCIsIlBzIiwiX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUiLCJhY3RpdmVUYXJnZXRJZHMiLCJScyIsIlZzIiwiQXMiLCJ1cGRhdGVUaW1lTXMiLCJfX1BSSVZBVEVfTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUiLCJybyIsImlvIiwib25saW5lU3RhdGVIYW5kbGVyIiwiYWRkUGVuZGluZ011dGF0aW9uIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ1cGRhdGVRdWVyeVN0YXRlIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzTG9jYWxRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJoYW5kbGVVc2VyQ2hhbmdlIiwic2V0T25saW5lU3RhdGUiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJfX1BSSVZBVEVfTm9vcENvbm5lY3Rpdml0eU1vbml0b3IiLCJzbyIsIl9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvciIsIm9vIiwiX28iLCJhbyIsInVvIiwiY28iLCJsbyIsIl9fUFJJVkFURV9nZW5lcmF0ZVVuaXF1ZURlYnVnSWQiLCJCYXRjaEdldERvY3VtZW50cyIsIkNvbW1pdCIsIlJ1blF1ZXJ5IiwiUnVuQWdncmVnYXRpb25RdWVyeSIsIl9fUFJJVkFURV9TdHJlYW1CcmlkZ2UiLCJobyIsIlBvIiwiSW8iLCJUbyIsIkVvIiwiQW8iLCJvbk1lc3NhZ2UiLCJSbyIsIlZvIiwibW8iLCJmbyIsIl9fUFJJVkFURV9XZWJDaGFubmVsQ29ubmVjdGlvbiIsImRhdGFiYXNlSW5mbyIsInBvIiwieW8iLCJ3byIsIlNvIiwiYm8iLCJEbyIsIkNvIiwidm8iLCJGbyIsIk1vIiwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zIiwidGltZW91dFNlY29uZHMiLCJfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4iLCJfX1BSSVZBVEVfbmV3U2VyaWFsaXplciIsIl9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYiLCJfaSIsInRpbWVySWQiLCJ4byIsIk9vIiwiTm8iLCJCbyIsIkxvIiwia28iLCJxbyIsIlFvIiwiS28iLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsIiRvIiwic2tpcERlbGF5IiwiX19QUklWQVRFX1BlcnNpc3RlbnRTdHJlYW0iLCJVbyIsIldvIiwiY29ubmVjdGlvbiIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwiR28iLCJ6byIsImpvIiwiSG8iLCJKbyIsIllvIiwiWm8iLCJzdG9wIiwiWG8iLCJlXyIsInRfIiwibl8iLCJyXyIsImlfIiwic18iLCJvXyIsIl9fIiwiYV8iLCJ1XyIsImVucXVldWVBbmRGb3JnZXQiLCJfX1BSSVZBVEVfUGVyc2lzdGVudExpc3RlblN0cmVhbSIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsImRvY3VtZW50RGVsZXRlIiwiZG9jdW1lbnRSZW1vdmUiLCJfX1BSSVZBVEVfZnJvbVdhdGNoQ2hhbmdlIiwiY18iLCJsXyIsImFkZFRhcmdldCIsIl9fUFJJVkFURV90b0xpc3RlblJlcXVlc3RMYWJlbHMiLCJsYWJlbHMiLCJoXyIsIl9fUFJJVkFURV9EYXRhc3RvcmVJbXBsIiwiYXV0aENyZWRlbnRpYWxzIiwiYXBwQ2hlY2tDcmVkZW50aWFscyIsIlJfIiwiVl8iLCJ0ZXJtaW5hdGUiLCJfX1BSSVZBVEVfT25saW5lU3RhdGVUcmFja2VyIiwiYXN5bmNRdWV1ZSIsImZfIiwiZ18iLCJwXyIsInlfIiwid18iLCJTXyIsImJfIiwiRF8iLCJfX1BSSVZBVEVfUmVtb3RlU3RvcmVJbXBsIiwibG9jYWxTdG9yZSIsImRhdGFzdG9yZSIsInJlbW90ZVN5bmNlciIsIkNfIiwidl8iLCJGXyIsIk1fIiwieF8iLCJfX1BSSVZBVEVfY2FuVXNlTmV0d29yayIsIl9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsIiwiT18iLCJfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsIiwiX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuIiwiX19QUklWQVRFX3Nob3VsZFN0YXJ0V2F0Y2hTdHJlYW0iLCJfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbSIsIl9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbSIsIl9fUFJJVkFURV9zZW5kV2F0Y2hSZXF1ZXN0IiwiX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4iLCJfX1BSSVZBVEVfc2VuZFVud2F0Y2hSZXF1ZXN0IiwiTl8iLCJfX1BSSVZBVEVfY2xlYW5VcFdhdGNoU3RyZWFtU3RhdGUiLCJfX1BSSVZBVEVfb25XYXRjaFN0cmVhbU9wZW4iLCJfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNsb3NlIiwiX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DaGFuZ2UiLCJyZWplY3RMaXN0ZW4iLCJfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5IiwiYXBwbHlSZW1vdGVFdmVudCIsIl9fUFJJVkFURV9yZW1vdGVTdG9yZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJ2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIkJfIiwiRGVsYXllZE9wZXJhdGlvbiIsInRhcmdldFRpbWVNcyIsInJlbW92YWxDYWxsYmFjayIsImNyZWF0ZUFuZFNjaGVkdWxlIiwidGltZXJIYW5kbGUiLCJoYW5kbGVEZWxheUVsYXBzZWQiLCJfX1BSSVZBVEVfd3JhcEluVXNlckVycm9ySWZSZWNvdmVyYWJsZSIsIkRvY3VtZW50U2V0Iiwia2V5ZWRNYXAiLCJzb3J0ZWRTZXQiLCJlbXB0eVNldCIsIl9fUFJJVkFURV9Eb2N1bWVudENoYW5nZVNldCIsImtfIiwidHJhY2siLCJxXyIsIlZpZXdTbmFwc2hvdCIsIm9sZERvY3MiLCJtdXRhdGVkS2V5cyIsInN5bmNTdGF0ZUNoYW5nZWQiLCJleGNsdWRlc01ldGFkYXRhQ2hhbmdlcyIsImhhc0NhY2hlZFJlc3VsdHMiLCJmcm9tSW5pdGlhbERvY3VtZW50cyIsIl9fUFJJVkFURV9RdWVyeUxpc3RlbmVyc0luZm8iLCJRXyIsImxpc3RlbmVycyIsIl9fUFJJVkFURV9FdmVudE1hbmFnZXJJbXBsIiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwiS18iLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaENoYW5nZSIsIldfIiwiX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQiLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yIiwib25FcnJvciIsIl9fUFJJVkFURV9RdWVyeUxpc3RlbmVyIiwiR18iLCJ6XyIsImpfIiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsIkhfIiwiSl8iLCJZXyIsIlVfIiwiWl8iLCJfX1BSSVZBVEVfQWRkZWRMaW1ib0RvY3VtZW50IiwiX19QUklWQVRFX1JlbW92ZWRMaW1ib0RvY3VtZW50IiwiX19QUklWQVRFX1ZpZXciLCJvcmRlciIsInNuYXBzaG90IiwiX19QUklWQVRFX1F1ZXJ5VmlldyIsInZpZXciLCJMaW1ib1Jlc29sdXRpb24iLCJfX1BSSVZBVEVfU3luY0VuZ2luZUltcGwiLCJyZW1vdGVTdG9yZSIsImV2ZW50TWFuYWdlciIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJpc1ByaW1hcnlDbGllbnQiLCJfX1BSSVZBVEVfc3luY0VuZ2luZUxpc3RlbiIsIl9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlSZW1vdGVFdmVudCIsIl9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsIl9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0TGlzdGVuIiwiX19QUklWQVRFX2Vuc3VyZVdhdGNoQ2FsbGJhY2tzIiwiX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldCIsIl9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zIiwiX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90IiwiX19QUklWQVRFX3N5bmNFbmdpbmVVbmxpc3RlbiIsIl9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0IiwidHJhY2tSZW1vdmFscyIsImxzIiwiaHMiLCJfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsIl9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlSZW1vdGVFdmVudFRvTG9jYWxDYWNoZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSIsIl9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zIiwiX19QUklWQVRFX3JlbW92ZUxpbWJvVGFyZ2V0IiwiX19QUklWQVRFX3RyYWNrTGltYm9DaGFuZ2UiLCJfX1BSSVZBVEVfc3luY0VuZ2luZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIiLCJzeW5jaHJvbml6ZVRhYnMiLCJjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSIsImNyZWF0ZVBlcnNpc3RlbmNlIiwiY3JlYXRlTG9jYWxTdG9yZSIsImdjU2NoZWR1bGVyIiwiY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIiLCJpbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIiLCJjcmVhdGVJbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIiLCJfX1BSSVZBVEVfbmV3TG9jYWxTdG9yZSIsImluaXRpYWxVc2VyIiwiT25saW5lQ29tcG9uZW50UHJvdmlkZXIiLCJjcmVhdGVEYXRhc3RvcmUiLCJjcmVhdGVSZW1vdGVTdG9yZSIsImNyZWF0ZUV2ZW50TWFuYWdlciIsInN5bmNFbmdpbmUiLCJjcmVhdGVTeW5jRW5naW5lIiwiX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUiLCJfX1BSSVZBVEVfQXN5bmNPYnNlcnZlciIsIm9ic2VydmVyIiwibXV0ZWQiLCJGaXJlc3RvcmVDbGllbnQiLCJjbGllbnRJZCIsImF1dGhDcmVkZW50aWFsTGlzdGVuZXIiLCJhcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciIsImdldENvbmZpZ3VyYXRpb24iLCJzZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIiLCJzZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIiLCJ2ZXJpZnlOb3RUZXJtaW5hdGVkIiwiaXNTaHV0dGluZ0Rvd24iLCJlbnRlclJlc3RyaWN0ZWRNb2RlIiwiZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQiLCJfb25saW5lQ29tcG9uZW50cyIsIl9vZmZsaW5lQ29tcG9uZW50cyIsIl9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIiLCJfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIiLCJfdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciIsIl9vZmZsaW5lIiwiX19QUklWQVRFX2NhbkZhbGxiYWNrRnJvbUluZGV4ZWREYkVycm9yIiwiX19QUklWQVRFX2Vuc3VyZU9mZmxpbmVDb21wb25lbnRzIiwiX19QUklWQVRFX2dldEV2ZW50TWFuYWdlciIsIl9vbmxpbmUiLCJfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyIsIm9uTGlzdGVuIiwib25Vbmxpc3RlbiIsIl9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNWaWFTbmFwc2hvdExpc3RlbmVyIiwiX19QUklWQVRFX2V2ZW50TWFuYWdlclVubGlzdGVuIiwic291cmNlIiwiX19QUklWQVRFX2V2ZW50TWFuYWdlckxpc3RlbiIsIl9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyIsIl9fUFJJVkFURV92YWxpZGF0ZUNvbGxlY3Rpb25QYXRoIiwiX19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24iLCJfX1BSSVZBVEVfY2FzdCIsIkZpcmVzdG9yZVNldHRpbmdzSW1wbCIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJsb2NhbENhY2hlIiwiY2FjaGVTaXplQnl0ZXMiLCJfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMiLCJGaXJlc3RvcmUkMSIsIl9hdXRoQ3JlZGVudGlhbHMiLCJfYXBwQ2hlY2tDcmVkZW50aWFscyIsIl9kYXRhYmFzZUlkIiwiX2FwcCIsIl9wZXJzaXN0ZW5jZUtleSIsIl9zZXR0aW5ncyIsIl9zZXR0aW5nc0Zyb3plbiIsIl9pbml0aWFsaXplZCIsIl90ZXJtaW5hdGVkIiwiX3Rlcm1pbmF0ZVRhc2siLCJfc2V0U2V0dGluZ3MiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsImF1dGhUb2tlbkZhY3RvcnkiLCJjbGllbnQiLCJfZ2V0U2V0dGluZ3MiLCJfZnJlZXplU2V0dGluZ3MiLCJfdGVybWluYXRlIiwic2V0dGluZ3MiLCJRdWVyeSIsImNvbnZlcnRlciIsIl9xdWVyeSIsImZpcmVzdG9yZSIsIndpdGhDb252ZXJ0ZXIiLCJEb2N1bWVudFJlZmVyZW5jZSIsIl9rZXkiLCJfcGF0aCIsIkNvbGxlY3Rpb25SZWZlcmVuY2UiLCJjb2xsZWN0aW9uIiwiX19QUklWQVRFX3ZhbGlkYXRlTm9uRW1wdHlBcmd1bWVudCIsIl9fUFJJVkFURV9Bc3luY1F1ZXVlSW1wbCIsImV1IiwidHUiLCJudSIsInJ1IiwiaXUiLCJzdSIsIm91IiwidmlzaWJpbGl0eVN0YXRlIiwiZW5xdWV1ZSIsIl91IiwiYXUiLCJ1dSIsInN0YWNrIiwiY3UiLCJsdSIsImh1IiwiUHUiLCJJdSIsIkZpcmVzdG9yZSIsIl9xdWV1ZSIsIl9maXJlc3RvcmVDbGllbnQiLCJfX1BSSVZBVEVfY29uZmlndXJlRmlyZXN0b3JlIiwiX29mZmxpbmVDb21wb25lbnRQcm92aWRlciIsIl9vbmxpbmVDb21wb25lbnRQcm92aWRlciIsIl9vZmZsaW5lS2luZCIsImtpbmQiLCJCeXRlcyIsIl9ieXRlU3RyaW5nIiwiRmllbGRQYXRoIiwiX2ludGVybmFsUGF0aCIsIkZpZWxkVmFsdWUiLCJfbWV0aG9kTmFtZSIsIkdlb1BvaW50IiwiX2xhdCIsIl9sb25nIiwiX19QUklWQVRFX2lzV3JpdGUiLCJfX1BSSVZBVEVfUGFyc2VDb250ZXh0SW1wbCIsImR1IiwiVHUiLCJFdSIsIkF1IiwiUnUiLCJWdSIsIm11IiwiZnUiLCJndSIsIl9fUFJJVkFURV9jcmVhdGVFcnJvciIsIm1ldGhvZE5hbWUiLCJwdSIsInl1IiwiY29udGFpbnMiLCJfX1BSSVZBVEVfVXNlckRhdGFSZWFkZXIiLCJ3dSIsIl9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlciIsIl9fUFJJVkFURV9wYXJzZVF1ZXJ5VmFsdWUiLCJfX1BSSVZBVEVfcGFyc2VEYXRhIiwiX19QUklWQVRFX2xvb2tzTGlrZUpzb25PYmplY3QiLCJfX1BSSVZBVEVfdmFsaWRhdGVQbGFpbk9iamVjdCIsIl9fUFJJVkFURV9wYXJzZU9iamVjdCIsIl90b0ZpZWxkVHJhbnNmb3JtIiwiRG9jdW1lbnRTbmFwc2hvdCQxIiwiX2ZpcmVzdG9yZSIsIl91c2VyRGF0YVdyaXRlciIsIl9kb2N1bWVudCIsIl9jb252ZXJ0ZXIiLCJyZWYiLCJRdWVyeURvY3VtZW50U25hcHNob3QkMSIsImZyb21GaXJlc3RvcmUiLCJjb252ZXJ0VmFsdWUiLCJfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50Iiwic2VhcmNoIiwiX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmciLCJBcHBsaWFibGVDb25zdHJhaW50IiwiUXVlcnlDb25zdHJhaW50IiwiUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50IiwiUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQiLCJfYXBwbHkiLCJfZmllbGQiLCJfb3AiLCJfdmFsdWUiLCJfY3JlYXRlIiwiX3BhcnNlIiwiX19QUklWQVRFX3ZhbGlkYXRlTmV3RmllbGRGaWx0ZXIiLCJfX1BSSVZBVEVfdmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzIiwiX19QUklWQVRFX3BhcnNlRG9jdW1lbnRJZFZhbHVlIiwiX3F1ZXJ5Q29uc3RyYWludHMiLCJfZ2V0T3BlcmF0b3IiLCJfZ2V0UXVlcnlDb25zdHJhaW50cyIsIlF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnQiLCJfZGlyZWN0aW9uIiwiX19QUklWQVRFX3ZhbGlkYXRlT3JkZXJCeUFuZEluZXF1YWxpdHlNYXRjaCIsIlF1ZXJ5TGltaXRDb25zdHJhaW50IiwiX2xpbWl0IiwiX2xpbWl0VHlwZSIsIl9fUFJJVkFURV92YWxpZGF0ZVBvc2l0aXZlTnVtYmVyIiwiUXVlcnlTdGFydEF0Q29uc3RyYWludCIsIl9kb2NPckZpZWxkcyIsIl9pbmNsdXNpdmUiLCJfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21Eb2NPckZpZWxkcyIsInN0YXJ0QWZ0ZXIiLCJBYnN0cmFjdFVzZXJEYXRhV3JpdGVyIiwiY29udmVydFRpbWVzdGFtcCIsImNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAiLCJjb252ZXJ0Qnl0ZXMiLCJjb252ZXJ0UmVmZXJlbmNlIiwiY29udmVydEdlb1BvaW50IiwiY29udmVydEFycmF5IiwiY29udmVydE9iamVjdCIsImNvbnZlcnRPYmplY3RNYXAiLCJjb252ZXJ0RG9jdW1lbnRLZXkiLCJTbmFwc2hvdE1ldGFkYXRhIiwiRG9jdW1lbnRTbmFwc2hvdCIsIl9maXJlc3RvcmVJbXBsIiwibWV0YWRhdGEiLCJRdWVyeURvY3VtZW50U25hcHNob3QiLCJzZXJ2ZXJUaW1lc3RhbXBzIiwiUXVlcnlTbmFwc2hvdCIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwib2xkSW5kZXgiLCJuZXdJbmRleCIsIl9fUFJJVkFURV9yZXN1bHRDaGFuZ2VUeXBlIiwiX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyIiwiZ2V0RG9jcyIsImVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQiLCJfX1BSSVZBVEVfdmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdCIsInRlc3REYiIsImhlYXJ0YmVhdENvbnRyb2xsZXIiLCJnZXRBcHAiLCJwcm9kdWN0TmFtZSIsIl9iIiwiZW11bGF0b3JIb3N0cyIsImdldERlZmF1bHRFbXVsYXRvckhvc3QiLCJzZXBhcmF0b3JJbmRleCIsImxhc3RJbmRleE9mIiwiZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0IiwibW9ja1VzZXJUb2tlbiIsInByb2plY3QiLCJpYXQiLCJzdWIiLCJ1c2VyX2lkIiwicGF5bG9hZCIsImlzcyIsImF1ZCIsImV4cCIsImF1dGhfdGltZSIsImZpcmViYXNlIiwic2lnbl9pbl9wcm92aWRlciIsImlkZW50aXRpZXMiLCJhbGciLCJjcmVhdGVNb2NrVXNlclRva2VuIiwiY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yIiwiZ2V0RmlyZXN0b3JlIiwiYXBpS2V5IiwiYXV0aERvbWFpbiIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsInF1ZXJ5U25hcHNob3QiLCJpdGVtQ29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJpdGVtIiwiaXRlbUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInVybCIsImFwcGVuZENoaWxkIiwiZ2V0TGFzdFZpc2libGUiLCJnZXRIb21lUXVlcnkiLCJjb2xsZWN0aW9uUmVmIiwibGFzdFZpc2libGUiLCJnZXRDYXRlZ29yeVF1ZXJ5IiwiY2F0ZWdvcnkiLCJyZW5kZXIiXSwic291cmNlUm9vdCI6IiJ9